"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["7182"],{1639:function(e,n,r){r.r(n),r.d(n,{default:function(){return a}});var i=r(6469),o=r(8809);function s(e){let n=Object.assign({h1:"h1",a:"a",p:"p",h3:"h3",code:"code",pre:"pre"},(0,o.ah)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.h1,{id:"npm-两步验证",children:["npm 两步验证",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#npm-两步验证",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"统计信息：字数 2060  阅读5分钟"}),"\n",(0,i.jsxs)(n.h3,{id:"问题",children:["问题",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#问题",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["近期发布版本时，在 cli ",(0,i.jsx)(n.code,{children:"npm login"}),"登录后，输入正确的用户名和密码，提示需要一个 Enter one-time password from your authenticator app，无法发包。"]}),"\n",(0,i.jsx)(n.p,{children:"在网页上操作，登录时也需要输入临时的验证码（one-time password），无法登录。"}),"\n",(0,i.jsxs)(n.h3,{id:"当前配置",children:["当前配置",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#当前配置",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"本地或者 web 端没有开启配置两步验证"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://docs.npmjs.com/configuring-two-factor-authentication#removing-2fa-on-the-web",target:"_blank",rel:"noopener noreferrer",children:"https://docs.npmjs.com/configuring-two-factor-authentication#removing-2fa-on-the-web"})}),"\n",(0,i.jsx)(n.p,{children:"本地查看是否支持两步验证"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm profile disable-2fa\nTwo factor authentication not enabled.\n"})}),"\n",(0,i.jsx)(n.p,{children:"官方建议开启两步验证，但是本地经常发布版本，不希望使用两步验证（太麻烦）。根据官方文档，cli 登录都需要一个两步验证（为了安全），不能直接跳过两步验证。"}),"\n",(0,i.jsxs)(n.p,{children:["For your security, npm may require additional verification to allow you to log in to your account. If you do not have ",(0,i.jsx)(n.a,{href:"https://docs.npmjs.com/configuring-two-factor-authentication",target:"_blank",rel:"noopener noreferrer",children:"two-factor authentication"})," enabled, you may be asked to verify yourself with a one-time password sent to the email address configured for your account."]}),"\n",(0,i.jsxs)(n.h3,{id:"解决方法",children:["解决方法",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#解决方法",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"1、在网页端登录，然后会发一个验证码到邮箱中（可能6位数字），使用验证码可以正常登录。详见文档："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://docs.npmjs.com/receiving-a-one-time-password-over-email",target:"_blank",rel:"noopener noreferrer",children:"https://docs.npmjs.com/receiving-a-one-time-password-over-email"})}),"\n",(0,i.jsx)(n.p,{children:"2、登录后，找到设置界面，获取 token （选择读写的权限）"}),"\n",(0,i.jsx)(n.p,{children:"3、在项目根目录中，或者用户根目录中，配置一下 .npmrc 后面的是获取的 token"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"//registry.npmjs.org/:_authToken=npm_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n"})}),"\n",(0,i.jsxs)(n.p,{children:["具体参考：",(0,i.jsx)(n.a,{href:"https://docs.npmjs.com/using-private-packages-in-a-ci-cd-workflow",target:"_blank",rel:"noopener noreferrer",children:"https://docs.npmjs.com/using-private-packages-in-a-ci-cd-workflow"})]}),"\n",(0,i.jsxs)(n.p,{children:["4、切换到项目中，直接运行 ",(0,i.jsx)(n.code,{children:"npm publish"})," 即可发布版本（发版本不需要登录）；再次发版本时，直接执行4。"]}),"\n",(0,i.jsxs)(n.p,{children:["注：也可以在发版本时，在环境变量中增加 token，可以试一下 ",(0,i.jsx)(n.code,{children:"export xxxxx && npm run build && npm publish"})]}),"\n",(0,i.jsx)(n.p,{children:"如果安装私有库的代码，执行 npm install 也是正常的"})]})}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,o.ah)(),e.components);return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(s,{...e})}):s(e)}let a=t;t.__RSPRESS_PAGE_META={},t.__RSPRESS_PAGE_META["git%2Fnpm%20%E5%8F%91%E5%B8%83%E4%B8%A4%E6%AD%A5%E9%AA%8C%E8%AF%81.md"]={toc:[{text:"问题",id:"问题",depth:3},{text:"当前配置",id:"当前配置",depth:3},{text:"解决方法",id:"解决方法",depth:3}],title:"npm 两步验证",frontmatter:{}}}}]);