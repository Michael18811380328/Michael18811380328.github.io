<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Rspress v1.38.0">
  <title data-rh="true">webpack 基本使用 - 前端工程化</title><meta data-rh="true" name="description" content="介绍前端工程化常用工具"/>
<script>{;const saved = localStorage.getItem('rspress-theme-appearance');const preferDark = window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = !saved || saved === 'auto' ? preferDark : saved === 'dark';document.documentElement.classList.toggle('dark', isDark);document.documentElement.style.colorScheme = isDark ? 'dark' : 'light';}</script><script defer src="/site/webpack/site/static/js/styles.03324596.js"></script><script defer src="/site/webpack/site/static/js/lib-react.82d8ec79.js"></script><script defer src="/site/webpack/site/static/js/lib-router.fdbdb348.js"></script><script defer src="/site/webpack/site/static/js/index.35af798f.js"></script><link href="/site/webpack/site/static/css/styles.c26b7a64.css" rel="stylesheet"></head>

<body >
  <div id="root"><div><div class="navContainer_f6cde rspress-nav px-6 " style="position:sticky"><div class="container_f6cde flex justify-between items-center h-full"><div class="navBarTitle_f6cde"><a class="link_03735 flex items-center w-full h-full text-base font-semibold transition-opacity duration-300 hover:opacity-60 cursor-pointer" target="" href="/site/webpack/site/index.html"><span>前端工程化</span></a></div><div class="flex flex-1 justify-end items-center"><div class="rightNav_f6cde"><div class="flex sm:flex-1 items-center sm:pl-4 sm:pr-2"><div class="rspress-nav-search-button navSearchButton_6e282"><button><svg width="18" height="18" viewBox="0 0 32 32"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9Z"></path></svg><p class="searchWord_6e282">Search Docs</p><div style="opacity:0"><span></span><span>K</span></div></button></div><div class="mobileNavSearchButton_6e282"><svg width="24" height="24" viewBox="0 0 32 32"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9Z"></path></svg></div></div><div class="rspress-nav-menu menu h-14"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/index.html"><div class="rspress-nav-menu-item singleItem_f6cde activeItem_f6cde text-sm font-medium mx-1.5 px-3 py-2 flex items-center">首页</div></a><div class="mx-3 last:mr-0"><div class="relative flex-center h-14"><button class="rspress-nav-menu-group-button flex-center items-center font-medium text-sm text-text-1 hover:text-text-2 transition-colors duration-200"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/28-rollup完全入门指南.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">rollup<svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></div></a></button><div class="rspress-nav-menu-group-content absolute mx-0.8 transition-opacity duration-300" style="opacity:0;visibility:hidden;right:0;top:52px"><div class="p-3 pr-2 w-full h-full max-h-100vh whitespace-nowrap" style="box-shadow:var(--rp-shadow-3);z-index:100;border:1px solid var(--rp-c-divider-light);border-radius:var(--rp-radius-large);background:var(--rp-c-bg)"><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/demo01-note.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>Demo 01 Note</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/demo02-note.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>Demo 02 Note</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/demo03-note.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>Demo 03 Note</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/demo04-note.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>Demo 04 Note</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/28-rollup完全入门指南.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>rollup </span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/29-rollup打包工具基础配置使用详解.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>rollup </span></div></div></a></div></div></div></div></div></div><div class="mx-3 last:mr-0"><div class="relative flex-center h-14"><button class="rspress-nav-menu-group-button flex-center items-center font-medium text-sm text-text-1 hover:text-text-2 transition-colors duration-200"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/21-Babel is what.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">babel<svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></div></a></button><div class="rspress-nav-menu-group-content absolute mx-0.8 transition-opacity duration-300" style="opacity:0;visibility:hidden;right:0;top:52px"><div class="p-3 pr-2 w-full h-full max-h-100vh whitespace-nowrap" style="box-shadow:var(--rp-shadow-3);z-index:100;border:1px solid var(--rp-c-divider-light);border-radius:var(--rp-radius-large);background:var(--rp-c-bg)"><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/21-Babel is what.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>21-Babel is what</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/22-Babel Usage Guide.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>22-Babel Usage Guide</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/23-Babel-Configure.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>23-Babel-Configure</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/24-Babel-Learn ES2015.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>24-Babel-Learn ES2015</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/25-babel-preset-env.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>25-babel-preset-env使用指南</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/26-babel-preset-env 作用.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>26-babel-preset-env 作用</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/27-babel-plugin-transform-runtime 说明.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>27-babel-plugin-transform-runtime 说明</span></div></div></a></div></div></div></div></div></div><div class="mx-3 last:mr-0"><div class="relative flex-center h-14"><button class="rspress-nav-menu-group-button flex-center items-center font-medium text-sm text-text-1 hover:text-text-2 transition-colors duration-200"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/00-readme.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">webpack<svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></div></a></button><div class="rspress-nav-menu-group-content absolute mx-0.8 transition-opacity duration-300" style="opacity:0;visibility:hidden;right:0;top:52px"><div class="p-3 pr-2 w-full h-full max-h-100vh whitespace-nowrap" style="box-shadow:var(--rp-shadow-3);z-index:100;border:1px solid var(--rp-c-divider-light);border-radius:var(--rp-radius-large);background:var(--rp-c-bg)"><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/00-readme.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>00-readme</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/01-webpack基本概念.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>01-webpack基本概念</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/02-create-react-app入门教程.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>02-create-react-app入门教程</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/03-网易webpack配置解析.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>03-网易webpack配置解析</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/04-网易webpack编译原理分析.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>04-网易webpack编译原理分析</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/05-网易webpack的高级技巧.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>05-网易webpack的高级技巧</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/06-网易 webpack 打包工具使用.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>06-网易 webpack 打包工具使用</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/07-webpack 官方起步.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>07-webpack 官方起步</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/08-webpack5 和 webpack4 的区别有哪些.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>08-webpack5 和 webpack4 的区别有哪些</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/09-webpack主要概念.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>09-webpack主要概念</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/10-深度解锁Webpack系列(基础篇) 01.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>10-深度解锁Webpack系列(基础篇) 01</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/11-深度解锁Webpack系列(进阶篇)02.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>11-深度解锁Webpack系列(进阶篇)02</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/12-深度解锁Webpack系列(优化篇)03.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>12-深度解锁Webpack系列(优化篇)03</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/13-webpack5 SplitChunksPlugin 实用指南.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>13-webpack5 SplitChunksPlugin 实用指南</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/41-webpack更新版本后报错Starting the development server.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>41-webpack更新版本后报错Starting the development server</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/42-webpack设置devServer启动项目为https协议.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>42-webpack设置devServer启动项目为https协议</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/43-webpack 打包 antd-mobile 按需加载样式问题.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>43-webpack 打包 antd-mobile 按需加载样式问题</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/44-TS-React-Webpack.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>44-TS-React-Webpack</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/45-TS项目使用Webpack.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>45-TS项目使用Webpack</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/46-webpack 项目配置学习.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>46-webpack 项目配置学习</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/47-webpack 项目配置学习2.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>47-webpack 项目配置学习2</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/48-webpack 项目配置学习3.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>48-webpack 项目配置学习3</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/Preset files are not allowed to export objects.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>Preset files are not allowed to export objects</span></div></div></a></div></div><div><div class="rounded-2xl my-1 flex" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><span class="text-brand">stalled-webpack3基本使用</span></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/stalled-webpack4 babel配置文件.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>stalled-webpack4 babel配置文件</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/stalled-webpack4DevServer配置项.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>stalled-webpack4DevServer配置项</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/stalled-webpack4入门介绍.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>stalled-webpack4入门介绍</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/stalled-webpack4基本配置.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>stalled-webpack4基本配置</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/stalled-webpack4打包很慢处理.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>stalled-webpack4打包很慢处理</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/webpack-setting.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>webpack-setting</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/webpack04-01README.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>webpack04-01README</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/webpack04-02-README.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>webpack04-02-README</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/webpack04-03-README.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>webpack04-03-README</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/webpack3-readme.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>webpack3-readme</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件 mini-css-extract-plugin.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件 mini-css-extract-plugin</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件 react-webpack-template.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件 react-webpack-template</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件 webpack Code Splitting.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件 webpack Code Splitting</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件 webpack HappyPack多个进程处理loader.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件 webpack HappyPack多个进程处理loader</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件 webpack 常用插件.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件 webpack 常用插件</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件 webpack-howto.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件 webpack-howto</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件-HappyPack plugin for the loader could not be found.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件-HappyPack plugin for the loader could not be found</span></div></div></a></div></div></div></div></div></div></div><div class="flex-center flex-row"><div class="mx-2"><div class="md:mr-2 rspress-nav-appearance"><div class="p-1 border border-solid border-gray-300 text-gray-400  cursor-pointer rounded-md hover:border-gray-600 hover:text-gray-600 dark:hover:border-gray-200 dark:hover:text-gray-200 transition-all duration-300 w-7 h-7"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" class="dark:hidden" width="18" height="18" fill="currentColor"><path d="M12 18c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6zm0-10c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zM12 4c-.6 0-1-.4-1-1V1c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zM12 24c-.6 0-1-.4-1-1v-2c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zM5.6 6.6c-.3 0-.5-.1-.7-.3L3.5 4.9c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.1.2-.4.3-.7.3zM19.8 20.8c-.3 0-.5-.1-.7-.3l-1.4-1.4c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.2.2-.5.3-.7.3zM3 13H1c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zM23 13h-2c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zM4.2 20.8c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.4.3-.7.3zM18.4 6.6c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.5.3-.7.3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" class="hidden dark:block" width="18" height="18" fill="currentColor"><path d="M12.1 22h-.9c-5.5-.5-9.5-5.4-9-10.9.4-4.8 4.2-8.6 9-9 .4 0 .8.2 1 .5.2.3.2.8-.1 1.1-2 2.7-1.4 6.4 1.3 8.4 2.1 1.6 5 1.6 7.1 0 .3-.2.7-.3 1.1-.1.3.2.5.6.5 1-.2 2.7-1.5 5.1-3.6 6.8-1.9 1.4-4.1 2.2-6.4 2.2zM9.3 4.4c-2.9 1-5 3.6-5.2 6.8-.4 4.4 2.8 8.3 7.2 8.7 2.1.2 4.2-.4 5.8-1.8 1.1-.9 1.9-2.1 2.4-3.4-2.5.9-5.3.5-7.5-1.1-2.8-2.2-3.9-5.9-2.7-9.2z"></path></svg></div></div></div></div></div><div class="mobileNavMenu_f6cde"><div class="navScreen_457e8 " id="navScreen"><div class="container_457e8"><div class="navMenu_457e8"><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/index.html"><div class="rspress-nav-menu-item singleItem_f6cde activeItem_f6cde text-sm font-medium mx-1.5 px-3 py-2 flex items-center">首页</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/28-rollup完全入门指南.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">rollup</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/21-Babel is what.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">babel</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/00-readme.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">webpack</div></a></div></div><div class="flex-center flex-col gap-2"><div class="mt-2 navAppearance_457e8 flex justify-center"></div></div></div></div><button aria-label="mobile hamburger" class=" navHamburger_e7b06 text-gray-500"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="currentColor"><circle cx="8" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="24" cy="16" r="2" fill="currentColor"></circle></svg></button></div></div></div></div><section><div class="docLayout_edeb4 pt-0"><div class="rspress-sidebar-menu"><button class="flex-center ml-auto"><span class="text-sm">ON THIS PAGE</span><div class="text-md mr-2" style="transform:rotate(0deg);transition:transform 0.2s ease-out;margin-top:2px"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></button><div class="rspress-local-toc-container "><ul></ul></div></div><div class="content_edeb4 rspress-doc-container flex flex-shrink-0 mx-auto"><div class="w-full flex-1"><div><div class="rspress-doc"><!--$--><h1 id="webpack-基本使用" class="text-3xl mb-10 leading-10 tracking-tight title_3b154">webpack 基本使用<a class="link_3b154 header-anchor" aria-hidden="true" href="#webpack-基本使用">#</a></h1>
<p class="my-4 leading-7">统计信息：字数 30272  阅读61分钟</p>
<p class="my-4 leading-7">　　webpack是一款前端模块打包工具, 它的出现是由于现代web开发越来越复杂，如果还是像原来那样把所有的js代码都写到一个文件中，维护非常困难。而解决复杂化的方法通常是分而治之，就是把复杂化的东西进行拆分，形成一个个小的模块，这也是现代web 开发提出的模块化的概念，代码进行拆分，写成一个个小的模块，模块化方案又先后出现了commanjs ,amd, ES6 module方案， 但浏览器并不能直接支持这些方案，所以要把模块化的代码进行转换，转换成浏览器能识别的内容。webpack 就是做这个工作的，把多个小的模块化的文件打包成一个浏览器支持的文件，这应该是打包的由来吧。</p>
<p class="my-4 leading-7">　　使用webpack之前，先做一下准备工作，就是新建文件夹，以及用到的文件，这里要注意，使用webpack 时，我们的项目就是node项目了，对于任何一个node项目，都建议创建一个package.json文件，它主要是记录我们项目的信赖，以及用到的命令， 这里不明白也没关系，我们只要按照步骤做就可以了，用到的时候自然就会明白了。</p>
<p class="my-4 leading-7">　　 新建一个文件夹，就命名为webpack-learning吧，然后双击进入这个文件夹，在windows操作系统下，在文件夹中的任意位置，按住shift 键单击鼠标右键，打开cmd 命令窗口。按照规定，我们要创建package.json文件。在命令窗口中，输入npm init –y，就可以快速创建一个package.json 文件。再新建src和dist文件夹，index.html，src目录存放源代码，dist 目录存放打包后的代码. 在src 下新建index.js, mes.js. 简单项目结构如下：</p>
<p class="my-4 leading-7"><img src="https://images2015.cnblogs.com/blog/1013082/201707/1013082-20170723170847752-552805852.png" alt="img"/></p>
<p class="my-4 leading-7">　　index.js, mes.js 就是两个不同的模块，简单来说，一个js 文件就是一个模块。wepback最先支持的commanjs 和amd 规范， 现在ES6 对模块化进了标准化，webpack2.0也直接支持它了。webpack 使用ES6 模块化方案的好处就是它的 Tree Shaking 功能，这个以后再说，我们先使用commonjs规范</p>
<div class="language-JS"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-JS" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>// mes.js　
</span></span><span style="display:block;padding:0 1.25rem">module.exports = {
</span><span style="display:block;padding:0 1.25rem">  hi: &#x27;Hello world&#x27;
</span><span style="display:block;padding:0 1.25rem">}
</span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem">//index.js
</span><span style="display:block;padding:0 1.25rem">var mes = require(&#x27;./mes&#x27;);
</span><span style="display:block;padding:0 1.25rem">document.body.innerHTML = mes.hi;</span></code></pre></div><div class="code-button-group_15153"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">　　前面已经说了，index.js 不能直接使用，因为浏览器并不支持模块化方案。如果我们在index.html 中直接用script 标签引入index.js，浏览器就会报错。 这时就用到了webpack对这两个js 文件进行打包，打包成一个浏览器可以识别的文件，供我们在浏览器中使用。</p>
<p class="my-4 leading-7">　　使用webpack进行打包， 就要先安装webpack。webpack 的安装方式有两种：全局安装 和 本地安装。</p>
<p class="my-4 leading-7">　　1， 全局安装：在刚才打开的命令窗口中，输入 npm install webpack –g, 等待安装完成，</p>
<p class="my-4 leading-7"><img src="https://images2015.cnblogs.com/blog/1013082/201707/1013082-20170723202900580-430519988.png" alt="img"/></p>
<p class="my-4 leading-7">　　安装完成后，就可以命令行中使用webpack 命令，命令行中输入 webpack src/index.js  dist/build.js ，它表示，对src中的index.js文件进行打包，输出到dist目录下的build.js 中。</p>
<p class="my-4 leading-7"><img src="https://images2015.cnblogs.com/blog/1013082/201707/1013082-20170723203343518-1320319540.png" alt="img"/></p>
<p class="my-4 leading-7">　　打包完成后,可以看到dist目录下多了一个build.js文件，把这个文件引入到index.html文件中，</p>
<p class="my-4 leading-7">　　在本地打开index.html 可以看到Hello world 字样，表示打包成功。</p>
<p class="my-4 leading-7">　　2， 本地安装：本地安装使用的命令是npm install webpack --save-dev。 首先卸载全局安装的webpack, 卸载全局安装的webpack命令是npm uninstall webpack -g</p>
<p class="my-4 leading-7">　　卸载完成后, 再输入npm install webpack --save-dev 进行本地安装， 安装完成后， 如果在命令窗口中输入webpack，报错了，没有这个指令，如下图片显示</p>
<p class="my-4 leading-7">　　但这时webpack-learning文件夹中多了一个node_modules文件夹，表示安装到了本地。因为在node 中，把任何东西安装到本地，它们都会安装到项目文件夹中的node_modules中，安装到本地的命令怎么用，npm script 命令。打开package.json 文件，找到scripts 字段，写入 &quot;build&quot;: &quot;webpack src/index.js dist/build.js&quot; ，它原有的text 命令已经删掉</p>
<p class="my-4 leading-7"><img src="https://images2015.cnblogs.com/blog/1013082/201707/1013082-20170723205910377-1022897193.png" alt="img"/></p>
<p class="my-4 leading-7">　　这样在命令行中输入npm run build也可以启用webpack 进行打包。</p>
<p class="my-4 leading-7"><img src="https://images2015.cnblogs.com/blog/1013082/201707/1013082-20170723210015768-249250478.png" alt="img"/></p>
<p class="my-4 leading-7">　　dist目录下还是会有build.js 文件，用浏览器打开index.html, 还是可以看到Hello world, 证明打包成功。</p>
<p class="my-4 leading-7">　　两种安装方式，到底该用哪一种，**推荐本地安装。**全局安装有一个版本管理问题， 如果我们的项目中，有的用webpack 1.0，有的用webpack2.0 ，而全局webpack 却只有一个命令，那就不好办了。本地安装却没有这个问题。If you are using npm scripts in your project, npm will try to look for webpack installation in your local modules for which this installation technique is useful. 当我们使用npm scripts 时，npm 会寻找本地安装的webpack ,这就解决版本问题， 每一个项目下都使用本地安装webpack , 互不影响。</p>
<p class="my-4 leading-7">　　<strong class="font-semibold">webpack 配置文件（webpack.config.js）</strong></p>
<p class="my-4 leading-7">　　webpack也提供了另外一种方式来完成打包工作，就是使用webpack的配置文件 webpack.config.js， 先了解一下配置文件中的两个概念：entry, output</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">　　entry 入口文件：webpack以哪个文件作为项目的入口， 就是webpack 打包的时候的从哪个文件开始。 相当于webpack 命令中 src/index.js</li>
<li class="[&amp;:not(:first-child)]:mt-2">　　output: webpack 打包完成后的文件放到什么地方。相当于webpack 命令中 dist/build.js</li>
</ul>
<p class="my-4 leading-7">　　现在用配置文件来完成上面的打包工作. 在webpack-learning文件夹下，新建一个js文件，命名为webpack.config.js， 这是wepback配置文件默认命名规则，也就是webpack进行打包的时候，它会自动寻找项目根目录中的webpack.config.js 文件，利用里面的规则进行打包。</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">var</span><span> path </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-function)">require</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;path&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>    </span><span class="token" style="color:var(--code-token-comment)">// 引入path模块</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>module</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>exports </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">entry</span><span class="token operator">:</span><span> path</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">join</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>__dirname</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span class="token" style="color:var(--code-token-string)">&#x27;src/index.js&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>  </span><span class="token" style="color:var(--code-token-comment)">// 指定入口文件，</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">path</span><span class="token operator">:</span><span>path</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">join</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>__dirname</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span class="token" style="color:var(--code-token-string)">&#x27;dist&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>        </span><span class="token" style="color:var(--code-token-comment)">// 打包到哪个路径下，</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">filename</span><span class="token operator">:</span><span class="token" style="color:var(--code-token-string)">&#x27;build.js&#x27;</span><span>　　　　　　　　　　　　　</span><span class="token" style="color:var(--code-token-comment)">// 打包成功后的文件名称</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span></span></code></pre></div><div class="code-button-group_15153"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">　　<img src="https://images2015.cnblogs.com/blog/1013082/201707/1013082-20170723212721424-1856585836.png" alt="img"/></p>
<p class="my-4 leading-7">　　webpack2 建议我们使用 绝对路径，所以引入nodeJs 的path模块，主要用到了path.join方法, 它接受路径参数，然后合并成一个完整的路径。</p>
<p class="my-4 leading-7">　　这时npm scripts 中的 &quot;build&quot;: &quot;webpack src/index.js dist/build.js&quot;  就要改成 &quot;build&quot;: &quot;webpack&quot;.</p>
<p class="my-4 leading-7"><img src="https://images2015.cnblogs.com/blog/1013082/201707/1013082-20170723212910627-540394797.png" alt="img"/></p>
<p class="my-4 leading-7">　　这时在命令行中执行npm run build，同样可以完成打包。</p>
<p class="my-4 leading-7">　　三种打包方式，我们生成了三次build.js 文件，我们也不知道是哪一次生成哪一个文件，所以最好把以前生成的文件删除，保证每次打包完，都是最新的文件。当然，我们也不用每次都手动删除，我们可以使用rimraf 模块。rimraf 就是用来删除文件或文件夹. 首先要安装它, cnpm i rimraf --save-dev,  rimraf 安装到本地后,需要npm script 命令, “rimraf dist” 就可以删除 dist 目录. 修改“build”: “rimraf dist &amp;&amp; webpack”  &amp;&amp; 把两个命令连接起来，执行完前面的再执行后面的，依次从左向右执行, 这样我们每次执行build 命令都会先删除，再重新生成。</p>
<p class="my-4 leading-7">　　webpack配置文件默认命名为webpack.config.js， 我们能不能命名成其它的名称，如wepback.config.client.js， 这是可以的，但要使用一个命令行参数 --config指定我们使用的配置文件，否则webpack找不到配置文件。我们来试一试，先把webpack.config.js文件命名为webpack.config.client.js, 执行npm run build, 这时你会发现报错了。</p>
<p class="my-4 leading-7"><img src="https://images2017.cnblogs.com/blog/1013082/201801/1013082-20180117185308443-1384159937.png" alt="img"/></p>
<p class="my-4 leading-7">　　它说No configuration file found and no output filename configured via CLI option. A configuration file could be named &#x27;webpack.config.js&#x27; in the current directory 没有找到配置文件，配置文件应该命名为webpack.config.js， 这也验证了webpack的配置文件默认命名为webpack.config.js. 这时我们用config 参数指定使用的配置文件。npm scripts build 进行如下修改</p>
<p class="my-4 leading-7"><img src="https://images2017.cnblogs.com/blog/1013082/201801/1013082-20180117191421021-1766358840.png" alt="img"/></p>
<p class="my-4 leading-7">　　执行npm run build 命令，打包成功了。有了 --config参数以后，我们就可以随意命名配置文件，也可以把配置文件放到任意位置。使用vue-cli 创建项目时，我们就看到它把所有配置文件都放到了build文件夹下，并且命名也有webpack.config.dev.js， webpack.config.pro.js 来区分生产和开发配置文件。当执行npm run dev 命令时，它就是使用--config 参数来指定它的配置文件，打开package.json看一下scripts字段就可以了。</p>
<p class="my-4 leading-7">　　4，webpack-dev-server 热更新和热替换。</p>
<p class="my-4 leading-7">　　 上面的打包方式，在项目开发中会遇到一个问题，就是每次修改代码后，如修改index.js文件的内容后，我们都要在命令行中输入npm run build, 然后等待打包完成，打包完成后，还要重新刷新浏览器才能看到效果。这非常麻烦，怎么解决这个问题，这要用到了webpack-dev-server.</p>
<p class="my-4 leading-7">　　webpack-dev-server 是 webpack自带的一个小型服务器，我们可以用服务器的方式访问html页面，每当有文件改动时，浏览器会自动刷新页面来反映我们做出的更改，这也就是所谓的liveload 或hotload. 首先 npm install webpack-dev-server --save-dev 安装它，</p>
<p class="my-4 leading-7"><img src="https://images2015.cnblogs.com/blog/1013082/201707/1013082-20170723215926440-631857389.png" alt="img"/></p>
<p class="my-4 leading-7">　　然后在npm script 命令新建一个命令，&quot;dev&quot;: &quot;webpack-dev-server&quot; ， 在这里，我把wepback的配置文件名称重新改回了webpack.config.js， 所以不用--config指定配置文件</p>
<p class="my-4 leading-7"><img src="https://images2017.cnblogs.com/blog/1013082/201801/1013082-20180117204739756-1066121937.png" alt="img"/></p>
<p class="my-4 leading-7">　　这时，在命令行中输入npm run dev 启动服务器，在浏览器地址栏器输入localhost:8080, 页面中显示hello World, 但是当我们改变mes.js中的Hello World 为Hello时，浏览器的内容并没有发生变化，和我们预想的不一样。这是 怎么回事? 原来是因为执行过npm run build 命令，dist文件夹中有build.js 文件，我们的html 文件是引用这个文件，把dist 目录删除，然后浏览器刷新，什么都没有，打开控制台，可以看到报错了，找不到build.js文件。</p>
<p class="my-4 leading-7"><img src="https://images2015.cnblogs.com/blog/1013082/201705/1013082-20170514215729097-44600592.png" alt="img"/></p>
<p class="my-4 leading-7">　　这是因为启动webpack-dev-server 时，它也会进行打包，只不过它是把打包成功后的文件放到内存中，而不是放到硬盘中，那它放到内存的什么地方呢? 我们必须知道打包后的build.js 放到什么地方，因为我们的html 文件中要进行引入，script 标签中src就是指向build.js文件地址。 我们再看一个启动webpack-dev-server  时发生了什么? 当输入npm run dev 时，我们看到</p>
<p class="my-4 leading-7"><img src="https://images2015.cnblogs.com/blog/1013082/201705/1013082-20170514221157144-932856731.png" alt="img"/></p>
<p class="my-4 leading-7">　　Project is running at <a target="_blank" rel="noopener noreferrer" href="http://localhost:8080/" class="link_03735  link_3b154 inline-link_3b154">http://localhost:8080/</a> 整个项目运行在localhost:8080下。这也就是我们在浏览器中输入localhost:8080的原因。</p>
<p class="my-4 leading-7">　　webpack output is served from /： 通过这一句我们才知道，webpack-dev-server  默认把打包后的文件放到了根目录下，在服务器中，/ 表示的就是根目录。那我们在 src 引入路径的时候，src= ‘bulid.js’ 就可以了。修改index.html 中 script 的src 为 src=&quot;build.js&quot;, 修改之后，浏览器刷新，可以看到hello World, 这时再更改mes.js中的 hello World 为 hello ,浏览器自动刷新，显示hello，成功了。</p>
<p class="my-4 leading-7">　　但这里有一个问题，当执行npm run build 时，dist 目录下会生成一个build.js, 本地打开index.html 又要引入这个文件，需要对html 中的js 路径进行修改为src=&quot;dist /build.js&quot;, 这样两种状况下要来回切换, 不利于开发，这两种不同的状态,可以理解为, 一个是开发环境,一个是生产环境.  dev 状态下是开发环境, build  是生产环境. 有没有办法让它们统一起来? 有，那就是output 中另外一个重要的配置 publicPath, 在服务器开发时，所有的静态资源如css, js，image都叫公共资源，都会放到一个叫public的文件夹下，publicPath，我想就是指定静态资源的存放位置。既然我们的生产环境是用 dist/build.js, 它请求的是服务器端dist目录下的资源，所以publicPath 配置成 &#x27;/dist/&#x27; 就可以了。这里只要记住：保证output 中的publicPath 和path 路径一致，就可以了。</p>
<p class="my-4 leading-7"><img src="https://images2017.cnblogs.com/blog/1013082/201801/1013082-20180117215628881-119775.png" alt="img"/></p>
<p class="my-4 leading-7">　　比热更新更为高级的就是热替换HRM,  当文件内容发生变化时，不用刷新整个页面，只是把变化的部分替换掉。当然它的配置有点小麻烦，不过就是按步骤就可以了。</p>
<p class="my-4 leading-7">　　首先，它利用webpack-dev-server和 webpack.config.js 配置文件生成一个服务器，在webpack-learning文件夹下， 就是项目根目录下新建一个dev-server.js 文件，代码如下：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">var</span><span> webpack </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-function)">require</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;webpack&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">var</span><span> webpackDevServer </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-function)">require</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;webpack-dev-server&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">var</span><span> config </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-function)">require</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;./webpack.config.js&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)">/*
</span></span><span style="display:block;padding:0 1.25rem;color:var(--code-token-comment)" class="token">option 就是对server 服务器的配置， 
</span><span style="display:block;padding:0 1.25rem;color:var(--code-token-comment)" class="token">1， 一定要配置hot: true，因为是它开启的热替换
</span><span style="display:block;padding:0 1.25rem;color:var(--code-token-comment)" class="token">2， publicPath, filename 的配置是保证要和我们html中的src 引用中的保持一致 因为html中
</span><span style="display:block;padding:0 1.25rem;color:var(--code-token-comment)" class="token">    script 中的引用是scr=&#x27;dist/build&#x27;
</span><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)">*/</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">var</span><span> options </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">hot</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">publicPath</span><span class="token operator">:</span><span> config</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>output</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>publicPath</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">filename</span><span class="token operator">:</span><span> config</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>output</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>filename</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">stats</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">colors</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">var</span><span> compiler </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-function)">webpack</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>config</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">var</span><span> server </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-keyword)">new</span><span> </span><span class="token class-name">webpackDevServer</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>compiler</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> options</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span>server</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">listen</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token number">8080</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;localhost&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  console</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">log</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;dev server listening on port 8080&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre></div><div class="code-button-group_15153"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">　　其次， 修改webpack.config.js 配置文件，</p>
<p class="my-4 leading-7">　　一个是对入口文件进行配置，它变成了一个数组，加上了webpack-dev-server 入口</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token literal-property" style="color:var(--code-token-parameter)">entry</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  path</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">join</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>__dirname</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;src/index.js&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-string)">&#x27;webpack/hot/dev-server&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-string)">&#x27;webpack-dev-server/client?http://localhost:8080&#x27;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span></span></code></pre></div><div class="code-button-group_15153"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">　　　一个是要添加一个webpack自带的插件 HotModuleReplacementPlugin， 所以整个配置文件修改如下：</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">var</span><span> path </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-function)">require</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;path&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>   
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">var</span><span> webpack </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-function)">require</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;webpack&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>  </span><span class="token" style="color:var(--code-token-comment)">// 要使用webpack的插件，所以要引入webpack</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span>module</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>exports </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">entry</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span>                      </span><span class="token" style="color:var(--code-token-comment)">// 入口文件加入webpack-dev-server入口</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    path</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">join</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>__dirname</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;src/index.js&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-string)">&#x27;webpack/hot/dev-server&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-string)">&#x27;webpack-dev-server/client?http://localhost:8080&#x27;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> 
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">path</span><span class="token operator">:</span><span> path</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">join</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>__dirname</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;dist&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>       
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">filename</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;build.js&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>　　　　　　　　　
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">publicPath</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;/dist/&#x27;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">plugins</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-keyword)">new</span><span> </span><span class="token class-name">webpack</span><span class="token class-name" style="color:var(--code-token-punctuation)">.</span><span class="token class-name">HotModuleReplacementPlugin</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>  </span><span class="token" style="color:var(--code-token-comment)">// 添加热替换插件</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">]</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span></span></code></pre></div><div class="code-button-group_15153"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">　　最后修改index.js ，就是我们整个项目的入口文件，它接受热替换</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">var</span><span> mes </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-function)">require</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;./mes&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>document</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>body</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>innerHTML </span><span class="token operator">=</span><span> mes</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>hi</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">if</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>module</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>hot</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>  </span><span class="token" style="color:var(--code-token-comment)">// 接受热替换</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  module</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>hot</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">accept</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span></span></code></pre></div><div class="code-button-group_15153"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">　　这时还要把npm scripts 的build 命令修改成node dev-server.js</p>
<p class="my-4 leading-7"><img src="https://images2017.cnblogs.com/blog/1013082/201801/1013082-20180118103028131-1816303424.png" alt="img"/></p>
<p class="my-4 leading-7">　　在命令窗口输入npm run dev 重新启动服务器,   修改mes.js文件的内容，页面内容实时变化，但没有刷新页面，可以看到配置成功了。</p>
<p class="my-4 leading-7">　　<strong class="font-semibold">设置环境变量</strong></p>
<p class="my-4 leading-7">　　配置完成后，又引发另外一个问题，当你使用npm run build 打包时，打包到的build.js 有300K 之多，而我们只写了两个js文件，都不到1k, 这是怎么回事? 因为打包的时候，把热替换的代码也打包到里面去了，显然，这是我们不想要的，因为热替换只有在开发环境下使用。 解决方法就是配置环境变量，根据不同的环境变量，使用不同的配置文件。</p>
<p class="my-4 leading-7">　　配置环境变量最简单的方法，就是直接在命令行中设置参数，你可能见到过 直接让NODE_ENV 等于一个值，如 &quot;build&quot;: &quot;NODE_ENV=pro rimraf dist &amp;&amp; webpack&quot;,  这时执行npm run build 发现报错了, NODE_ENV 不是一个内部或外部命令。 我刚开始学习的时候，也碰到了这个问题，明明是和别人的代码一样，为什么就是报错呢? 原来这样的设置在mac 系统下是有效的，而在windows下无效，而在windows 系统下，应该使用set 命令 &quot;build&quot;: &quot;set NODE_ENV=pro rimraf dist &amp;&amp; webpack&quot;, 这时执行npm run build 可以看到打包成功。为了屏蔽掉操作系统的差别，我们要可以使用一个cross-env的包，npm install cross-env --save-dev 安装它, package.json中scripts字段修改如下：</p>
<p class="my-4 leading-7"><img src="https://images2017.cnblogs.com/blog/1013082/201801/1013082-20180118113655881-906482696.png" alt="img"/></p>
<p class="my-4 leading-7">　　我们给build 命令设置环境变量NODE_ENV 是production, 而dev 设置的是development. 在代码中怎么获取这些环境变量，这要用到node 的process 模块，process.env.NODE_ENV 就可以获取到了。</p>
<p class="my-4 leading-7">　　这里还要注意一点，NODE_ENV=development 中间不能有空格，如果写成NODE_ENV = development, 就成了三个命令了:  NODE_ENV 是一个命令，= 是一个命令，development也是一个命令，执行npm run build 同样会报错: NODE_ENV 不是一个内部命令</p>
<p class="my-4 leading-7">　　这时我们获取到环境变量，就可以对wepack.config.js 进行修改，不同的环境下，用不同的配置内容。</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">var</span><span> path </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-function)">require</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;path&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>   
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">var</span><span> webpack </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-function)">require</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;webpack&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span> 
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">var</span><span> </span><span class="token" style="color:var(--code-token-constant)">DEV</span><span> </span><span class="token operator">=</span><span> process</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>env</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-constant)">NODE_ENV</span><span> </span><span class="token operator">===</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;development&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>  </span><span class="token" style="color:var(--code-token-comment)">// 判断开发环境</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">var</span><span> </span><span class="token" style="color:var(--code-token-constant)">PRO</span><span> </span><span class="token operator">=</span><span> process</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>env</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-constant)">NODE_ENV</span><span> </span><span class="token operator">===</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;production&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)">// 根据不同的环境，执行不同的入口文件</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)">// dev 环境下 执行webpack-dev-server入口</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">var</span><span> entry </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-constant)">DEV</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token operator">?</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span>                     
</span></span><span style="display:block;padding:0 1.25rem"><span>  path</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">join</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>__dirname</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;src/index.js&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-string)">&#x27;webpack/hot/dev-server&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-string)">&#x27;webpack-dev-server/client?http://localhost:8080&#x27;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">]</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span>path</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">join</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>__dirname</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;src/index.js&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)">// dev 下配置不同的插件</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">var</span><span> plugins </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-constant)">DEV</span><span> </span><span class="token operator">?</span><span>  </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-keyword)">new</span><span> </span><span class="token class-name">webpack</span><span class="token class-name" style="color:var(--code-token-punctuation)">.</span><span class="token class-name">HotModuleReplacementPlugin</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span> </span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>module</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>exports </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">entry</span><span class="token operator">:</span><span> entry</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">output</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">path</span><span class="token operator">:</span><span> path</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">join</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>__dirname</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;dist&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>       
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">filename</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;build.js&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>　　　　　　　　　
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">publicPath</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;/dist/&#x27;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">plugins</span><span class="token operator">:</span><span> plugins
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span></span></code></pre></div><div class="code-button-group_15153"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">　　现在再执行npm run build， 打包后的js代码只有2kb. 执行npm run dev, 热替换依然在起作用，完美了。</p>
<p class="my-4 leading-7">　　<strong class="font-semibold">使用webpack 的强大的loaders 来处理不同的资源。</strong></p>
<p class="my-4 leading-7">　　webpack 把所有的资源都当做模块，对模块的解析都要用到loader(模块加载器)。指定哪个loader对哪些文件解析是在配置文件中完成，它有一个module 字段，里面就是定义规则的。我们写一个loader 就明白了。现在开发中我们都会用到ES6+ 的语法，然而浏览器不支持，那就用loader 给它编译成ES5, ES6+ 的语法转化成ES5的语法要用到babel loader。</p>
<p class="my-4 leading-7">　　使用任何loader之前，都要先安装它。npm install babel-loader babel-core babel-preset-es2015 --save-dev 安装babel-loader, 更新 webpack.config.js 文件</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>module.exports = {
    entry: entry,
    output: {
        path: path.join(__dirname, &#x27;dist&#x27;),       
        filename: &#x27;build.js&#x27;,　　　　　　　　　
        publicPath: &#x27;/dist/&#x27;
    },
    module: {
      rules: [
          {
              test: /\.js$/, // 这里一定不要用引号把它包括起来，写成&#x27;/\.js$/&#x27; 
              loader: &#x27;babel-loader&#x27;,
              include: path.join(__dirname, &#x27;src&#x27;),
              exclude: path.join(__dirname, &#x27;node_modules&#x27;)
          }
      ]  
    },
    plugins: plugins
}
</code></div></div>
<p class="my-4 leading-7">　　module: 定义打包规则，webpack2 用的是rules 来指定规则，它是一个数组，里面是每一个对象，对不同的文件指定不同的规则。</p>
<p class="my-4 leading-7">　　　　test:它是一个正则表达式，表示对哪种类型文件应用这个loader。这里一定不要用引号把它包括起来，写成&#x27;/.js$/&#x27;， 如果写成这样，永远不会匹配，代码也就不会做任何转化。</p>
<p class="my-4 leading-7">　　　　loader: 指定具体的loaders, 注意，webpack2 中 babel-loader 后面的 -loader 字符最好不要省略。</p>
<p class="my-4 leading-7">　　　　include: 它是一个文件夹，或一个数组（包含多个文件夹）， 就是对哪个或哪些文件夹中的js文件执行该loader。</p>
<p class="my-4 leading-7">　　　　exclude:  它也是一个文件夹或一个数组(包含多个文件夹)，它是对哪个或哪些文件夹中的js文件不执行该loader。</p>
<p class="my-4 leading-7">　　 使用babel 进行转换之前，还要新建一个.babelrc的文件，告诉babel 用什么规则进行编译。在项目根目录中，新建.babelrc</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>{
    &quot;presets&quot;: [
        &quot;es2015&quot;
    ]
}
</code></div></div>
<p class="my-4 leading-7">　　好了，配置完成后，我们在index.js 中写一点ES6的代码(箭头函数)，体验一下</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>var mes = require(&#x27;./mes&#x27;)

var newMessage = () =&gt; (`&lt;p&gt;${mes.hi}&lt;p&gt;`)
document.body.innerHTML = newMessage();

 if (module.hot) {  // 接受热替换
        module.hot.accept();
}
</code></div></div>
<p class="my-4 leading-7">　　npm run build, 打包完成后，我们可以看到 生成的build.js文件中箭头函数转化为普通函数</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>var newMessage = function newMessage() {
  return &#x27;&lt;p&gt;&#x27; + mes.hi + &#x27;&lt;p&gt;&#x27;;
};
</code></div></div>
<p class="my-4 leading-7">　　 在开发过程还有一个问题要解决，代码的错误查找。如果代码有错误，我们要知道代码在什么地方出错的。现在webpack-dev-server启动服务器，我们把所有的js代码都打包到一个build.js文件中，我们根本不知道，报错在源代码中的什么位置。这就要用到source-map了，压缩后的代码对应到源代码中。这个只要在配置文件中添加devtools 配置项就可以了。</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>module.exports = {
    devtool:&#x27;source-map&#x27;,  // 添加source-map，有利于错误排查
    entry: entry,
    output: {
        path: path.join(__dirname, &#x27;dist&#x27;),       
        filename: &#x27;build.js&#x27;,　　　　　　　　　
        publicPath: &#x27;/dist/&#x27;
    },
.........
</code></div></div>
<p class="my-4 leading-7">　　这时npm run dev 重新启动服务器，打开浏览器控制台的source面板，你会发现，它多了一个wepback//</p>
<p class="my-4 leading-7"><img src="https://images2017.cnblogs.com/blog/1013082/201801/1013082-20180118164831693-263790269.png" alt="img"/></p>
<p class="my-4 leading-7">　　在上面双击，或点击左边的小箭头进行展开，可以看到3个文件夹，点击中间的. 文件夹，可以发现src目录，里面就是我们的源代码。这时，我们在index.js中加入debugger; 或console.log() 语句，你就会发现，它指向是源代码中文件，而不是打包后的build.js。测试一下</p>
<p class="my-4 leading-7">　　我们在mes.js中写入console.log(1)</p>
<p class="my-4 leading-7"><img src="https://images2017.cnblogs.com/blog/1013082/201801/1013082-20180118172926896-1573124661.png" alt="img"/></p>
<p class="my-4 leading-7">　　然后在webpack.config.js中把 devtools: source-map 注释掉</p>
<p class="my-4 leading-7"><img src="https://images2017.cnblogs.com/blog/1013082/201801/1013082-20180118173018459-2128423224.png" alt="img"/></p>
<p class="my-4 leading-7">　　npm run dev 启动服务器，打开控制台, 你可以所有内容指向的是打包后的build.js</p>
<p class="my-4 leading-7"><img src="https://images2017.cnblogs.com/blog/1013082/201801/1013082-20180118174044724-1797887232.png" alt="img"/></p>
<p class="my-4 leading-7">　　现在把wepback.config.js 中的devtool： &#x27;source-map&#x27; 解注, 再重新启动服务器。配置文件只要有变动，就要重新启动服务器。在控制台中可以看到 1 指向了mes.js</p>
<p class="my-4 leading-7"><img src="https://images2017.cnblogs.com/blog/1013082/201801/1013082-20180118174409115-1121546531.png" alt="img"/></p>
<p class="my-4 leading-7">　　点击mes.js ，就会跳转到mes.js 源文件。</p>
<p class="my-4 leading-7">　　<strong class="font-semibold">利用loader 处理样式</strong></p>
<p class="my-4 leading-7">　　在web开发中，肯定少不了写css, css 作为一种资源，也要有相对loader进行解析，有的还会用sass 来写样式, 那还需要把sass 转换成css. 这时需要安装sass-loader, css-loader, style-loader， sass-loader 还要依赖node-sass,   npm install sass-loader node-sass css-loader  style-loader --save-dev   css-loader 处理的是css文件中的url import 等等， style-loader 是把样式插入html 文件中style 标签中，内嵌样式。配置文件为如下， 这里只是更改module 下的内容，增加css loader</p>
<p class="my-4 leading-7">　　对于多个loader 去处理 一个文件时，它用的是use 来指定规则，处理顺序就从右向左。 先使用sass-loader, 把sass 文件转换成 css 文件，所以sass 放在最右边，然后把转换好的css 文件中的url 进行处理，css 放到sass 的左边， 最后把css 样式放入到html 元素中，那就是style-loader, 它放到最左边。</p>
<p class="my-4 leading-7">　　<strong class="font-semibold">利用loader 处理图片</strong></p>
<p class="my-4 leading-7">　　当然 还有一个常用的 loader 叫url-loader, 处理图片，文字等等， 比如把图片变成转成base64编码的, 这样就可以减少http请求数量。当然也不是所有图片都要转化成base 64 一般都是小于10kb 的图片进行转换，否则，会增大css 文件的大小。这需要options 对这个loader 进行配置。</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code> {
        test: /\.(png|jpe?g|gif|svg)(\?.*)?$/,
        loader: &#x27;url-loader&#x27;,
        options: {
          limit: 10000,
　　　　　　name: &quot;img/[name].[hash:7].[ext]&quot;
        }
      },
      {
        test: /\.(woff2?|eot|ttf|otf)(\?.*)?$/,
        loader: &#x27;url-loader&#x27;,
        options: {
          limit: 10000
        }
      }
</code></div></div>
<p class="my-4 leading-7">　　webpack的基本配置差不多了，我们再使用几个有用的插件。</p>
<p class="my-4 leading-7">　　1，UglifyJsPlugin 插件，webpack 中的Tree Shaking 用到它。webpack2中最大的变化就是它原生支持ES6模块化方案，并且由此带来了Tree Shaking 功能。 我们重写一下mes.js</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>export function add(a, b) {
    return a + b;
}
export function substract(a, b) {
    return a - b;
}

export function multiply(a, b) {
    return a * b 
}
</code></div></div>
<p class="my-4 leading-7">　　再重新写一下index.js文件</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>import {multiply} from &#x27;./mes&#x27;

const newMessage = () =&gt; (multiply(3, 4));
document.body.innerHTML = newMessage();

if (module.hot) {  // 接受热替换
        module.hot.accept();
}
</code></div></div>
<p class="my-4 leading-7">　　可以看到程序正常运行，但是在index.js中，我们只用到了multiply函数，所以打包后的文件中， 我们只想包含multiply 函数，而不用包含其它两个add, substract 函数，这就是tree shaking. Tree shaking 的前提是ES6 的模块化方案。而在webpack1 时，  由于它不支持ES6, 所以webpack 会利用babel 把ES6 转换成commonJs，但现在webpack2中原生支持ES6 的import 和export， 也正是由于ES6 module, 它支持Tree Shaking, 所以我们不想让babel 把ES6 的import 和export  转换成commonJs， 这时需要配置 .babelrc 文件，给es2015 设置为modules: false.</p>
<p class="my-4 leading-7"><img src="https://images2017.cnblogs.com/blog/1013082/201801/1013082-20180119101615724-2042014249.png" alt="img"/></p>
<p class="my-4 leading-7">　　只要设定modules: false, babel 遇见import 和 export 就不会转化成commonjs.</p>
<p class="my-4 leading-7">　　现在执行npm run build进行打包, 打开build.js, 你会发现下面的内容,它把 add和 substract 标住了unused, 没有用到这两个函数.</p>
<p class="my-4 leading-7"><img src="https://images2017.cnblogs.com/blog/1013082/201801/1013082-20180119102612646-919507793.png" alt="img"/></p>
<p class="my-4 leading-7">　　既然没有用到这两个函数，那就要把它们从打包后文件中去掉，这用到了webpack 另外一个插件，UglifyJsPlugin， 我们在webpack.config.js 配置一下，由于是插件，并且只在生产环境中使用，我们只要修改一下plugins 就可以了。</p>
<p class="my-4 leading-7"><img src="https://images2017.cnblogs.com/blog/1013082/201801/1013082-20180119173627178-2036556099.png" alt="img"/></p>
<p class="my-4 leading-7">　　npm run build 重新打包，可以看到build.js中只有multiply() 函数。</p>
<p class="my-4 leading-7">　　2. DefinePlugin插件， 当我们执行npm run 命令的时候，它会暴露一些全局变量供我们自己的代码使用，这些全局变量是我们自己定义的，而且我们想定义多少就定义多少。</p>
<p class="my-4 leading-7">　　定义的方式非常简单，就是给DefinePlugin 传递一个对象参数，使用也是简单，直接使用对象的属性，获取的是对象属性的值，最有用的是设置环境变量参数，因为我们自己写的代码也是有的在生产环境使用，有的在测试环境使用，比如在生产环境中，每次都会调用登陆弹窗，在开发的时候却不需要。直接在上面的代码下面加上</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>plugins</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">push</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-keyword)">new</span><span> </span><span class="token class-name">webpack</span><span class="token class-name" style="color:var(--code-token-punctuation)">.</span><span class="token class-name">DefinePlugin</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>   </span><span class="token string-property" style="color:var(--code-token-parameter)">&#x27;env&#x27;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-constant)">JSON</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">stringify</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>process</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>env</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-constant)">NODE_ENV</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">)</span></span></code></pre></div><div class="code-button-group_15153"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">　　当执行npm run 命令时，它就会暴露一个全局变量 ’env‘, 供我们的代码使用，而它的值就是 我们定义的JSON.stringify(process.env.NODE_ENV)。 在index.js中直接使用env</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>import {multiply} from &#x27;./mes&#x27;

// 从webpack.config.js中的DefinePlugin获取环境变量 env
const envValue = env;
const newMessage = () =&gt; (multiply(3, 5));
document.body.innerHTML = &#x27;现在所在的环境是&#x27; + envValue;

if (module.hot) {  // 接受热替换
        module.hot.accept();
}
</code></div></div>
<p class="my-4 leading-7">　　当执行npm run dev，重新启动服务器的时候，你可看到页面上显示是developement, 和我们预想的一样，那么我们就可以利用env 进行判断，如果它是生产环境，如果它是测试。</p>
<p class="my-4 leading-7">你可能使用过axios库发送ajax请求，当在不同的环境时请求的地址不一致，这时就可以使用环境变量进行基本url配置</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>// 如果是开发环境，则向103.168.2.17 发送请求，如果生产环境，则使用&#x27;&#x27;
if (env === &#x27;development&#x27;) {
    axios.defaults.baseURL = &#x27;103.168.2.17&#x27;; 
} else {
    axios.defaults.baseURL = &#x27;&#x27;
}
</code></div></div><!--/$--></div><div class="rspress-doc-footer"><footer class="mt-8"><div class="xs:flex pb-5 px-2 justify-end items-center"></div><div class="flex flex-col"></div><div class="flex flex-col sm:flex-row sm:justify-around gap-4 pt-6"><div class="prev_e7091 flex flex-col"></div><div class="next_e7091 flex flex-col"></div></div></footer></div></div></div><div class="aside-container_edeb4"><div><div class="flex flex-col"><div class="hidden"><div id="aside-container" class="relative text-sm font-medium"><div class="leading-7 block text-sm font-semibold pl-3">ON THIS PAGE</div><nav class="mt-1"><ul class="relative"></ul></nav></div></div></div></div></div></div></div></section></div></div>
  <div id="search-container"></div>
</body>

</html>
