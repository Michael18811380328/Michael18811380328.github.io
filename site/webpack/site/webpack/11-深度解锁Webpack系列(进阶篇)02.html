<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Rspress v1.38.0">
  <title data-rh="true">带你深度解锁Webpack系列(进阶篇) - 前端工程化</title><meta data-rh="true" name="description" content="介绍前端工程化常用工具"/>
<script>{;const saved = localStorage.getItem('rspress-theme-appearance');const preferDark = window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = !saved || saved === 'auto' ? preferDark : saved === 'dark';document.documentElement.classList.toggle('dark', isDark);document.documentElement.style.colorScheme = isDark ? 'dark' : 'light';}</script><script defer src="/site/webpack/site/static/js/styles.03324596.js"></script><script defer src="/site/webpack/site/static/js/lib-react.82d8ec79.js"></script><script defer src="/site/webpack/site/static/js/lib-router.fdbdb348.js"></script><script defer src="/site/webpack/site/static/js/index.35af798f.js"></script><link href="/site/webpack/site/static/css/styles.c26b7a64.css" rel="stylesheet"></head>

<body >
  <div id="root"><div><div class="navContainer_f6cde rspress-nav px-6 " style="position:sticky"><div class="container_f6cde flex justify-between items-center h-full"><div class="navBarTitle_f6cde"><a class="link_03735 flex items-center w-full h-full text-base font-semibold transition-opacity duration-300 hover:opacity-60 cursor-pointer" target="" href="/site/webpack/site/index.html"><span>前端工程化</span></a></div><div class="flex flex-1 justify-end items-center"><div class="rightNav_f6cde"><div class="flex sm:flex-1 items-center sm:pl-4 sm:pr-2"><div class="rspress-nav-search-button navSearchButton_6e282"><button><svg width="18" height="18" viewBox="0 0 32 32"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9Z"></path></svg><p class="searchWord_6e282">Search Docs</p><div style="opacity:0"><span></span><span>K</span></div></button></div><div class="mobileNavSearchButton_6e282"><svg width="24" height="24" viewBox="0 0 32 32"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9Z"></path></svg></div></div><div class="rspress-nav-menu menu h-14"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/index.html"><div class="rspress-nav-menu-item singleItem_f6cde activeItem_f6cde text-sm font-medium mx-1.5 px-3 py-2 flex items-center">首页</div></a><div class="mx-3 last:mr-0"><div class="relative flex-center h-14"><button class="rspress-nav-menu-group-button flex-center items-center font-medium text-sm text-text-1 hover:text-text-2 transition-colors duration-200"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/28-rollup完全入门指南.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">rollup<svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></div></a></button><div class="rspress-nav-menu-group-content absolute mx-0.8 transition-opacity duration-300" style="opacity:0;visibility:hidden;right:0;top:52px"><div class="p-3 pr-2 w-full h-full max-h-100vh whitespace-nowrap" style="box-shadow:var(--rp-shadow-3);z-index:100;border:1px solid var(--rp-c-divider-light);border-radius:var(--rp-radius-large);background:var(--rp-c-bg)"><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/demo01-note.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>Demo 01 Note</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/demo02-note.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>Demo 02 Note</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/demo03-note.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>Demo 03 Note</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/demo04-note.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>Demo 04 Note</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/28-rollup完全入门指南.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>rollup </span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/29-rollup打包工具基础配置使用详解.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>rollup </span></div></div></a></div></div></div></div></div></div><div class="mx-3 last:mr-0"><div class="relative flex-center h-14"><button class="rspress-nav-menu-group-button flex-center items-center font-medium text-sm text-text-1 hover:text-text-2 transition-colors duration-200"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/21-Babel is what.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">babel<svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></div></a></button><div class="rspress-nav-menu-group-content absolute mx-0.8 transition-opacity duration-300" style="opacity:0;visibility:hidden;right:0;top:52px"><div class="p-3 pr-2 w-full h-full max-h-100vh whitespace-nowrap" style="box-shadow:var(--rp-shadow-3);z-index:100;border:1px solid var(--rp-c-divider-light);border-radius:var(--rp-radius-large);background:var(--rp-c-bg)"><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/21-Babel is what.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>21-Babel is what</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/22-Babel Usage Guide.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>22-Babel Usage Guide</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/23-Babel-Configure.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>23-Babel-Configure</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/24-Babel-Learn ES2015.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>24-Babel-Learn ES2015</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/25-babel-preset-env.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>25-babel-preset-env使用指南</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/26-babel-preset-env 作用.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>26-babel-preset-env 作用</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/27-babel-plugin-transform-runtime 说明.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>27-babel-plugin-transform-runtime 说明</span></div></div></a></div></div></div></div></div></div><div class="mx-3 last:mr-0"><div class="relative flex-center h-14"><button class="rspress-nav-menu-group-button flex-center items-center font-medium text-sm text-text-1 hover:text-text-2 transition-colors duration-200"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/00-readme.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">webpack<svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></div></a></button><div class="rspress-nav-menu-group-content absolute mx-0.8 transition-opacity duration-300" style="opacity:0;visibility:hidden;right:0;top:52px"><div class="p-3 pr-2 w-full h-full max-h-100vh whitespace-nowrap" style="box-shadow:var(--rp-shadow-3);z-index:100;border:1px solid var(--rp-c-divider-light);border-radius:var(--rp-radius-large);background:var(--rp-c-bg)"><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/00-readme.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>00-readme</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/01-webpack基本概念.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>01-webpack基本概念</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/02-create-react-app入门教程.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>02-create-react-app入门教程</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/03-网易webpack配置解析.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>03-网易webpack配置解析</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/04-网易webpack编译原理分析.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>04-网易webpack编译原理分析</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/05-网易webpack的高级技巧.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>05-网易webpack的高级技巧</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/06-网易 webpack 打包工具使用.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>06-网易 webpack 打包工具使用</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/07-webpack 官方起步.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>07-webpack 官方起步</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/08-webpack5 和 webpack4 的区别有哪些.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>08-webpack5 和 webpack4 的区别有哪些</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/09-webpack主要概念.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>09-webpack主要概念</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/10-深度解锁Webpack系列(基础篇) 01.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>10-深度解锁Webpack系列(基础篇) 01</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/11-深度解锁Webpack系列(进阶篇)02.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>11-深度解锁Webpack系列(进阶篇)02</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/12-深度解锁Webpack系列(优化篇)03.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>12-深度解锁Webpack系列(优化篇)03</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/13-webpack5 SplitChunksPlugin 实用指南.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>13-webpack5 SplitChunksPlugin 实用指南</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/41-webpack更新版本后报错Starting the development server.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>41-webpack更新版本后报错Starting the development server</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/42-webpack设置devServer启动项目为https协议.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>42-webpack设置devServer启动项目为https协议</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/43-webpack 打包 antd-mobile 按需加载样式问题.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>43-webpack 打包 antd-mobile 按需加载样式问题</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/44-TS-React-Webpack.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>44-TS-React-Webpack</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/45-TS项目使用Webpack.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>45-TS项目使用Webpack</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/46-webpack 项目配置学习.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>46-webpack 项目配置学习</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/47-webpack 项目配置学习2.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>47-webpack 项目配置学习2</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/48-webpack 项目配置学习3.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>48-webpack 项目配置学习3</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/Preset files are not allowed to export objects.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>Preset files are not allowed to export objects</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/stalled-webpack3基本使用.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>stalled-webpack3基本使用</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/stalled-webpack4 babel配置文件.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>stalled-webpack4 babel配置文件</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/stalled-webpack4DevServer配置项.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>stalled-webpack4DevServer配置项</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/stalled-webpack4入门介绍.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>stalled-webpack4入门介绍</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/stalled-webpack4基本配置.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>stalled-webpack4基本配置</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/stalled-webpack4打包很慢处理.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>stalled-webpack4打包很慢处理</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/webpack-setting.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>webpack-setting</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/webpack04-01README.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>webpack04-01README</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/webpack04-02-README.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>webpack04-02-README</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/webpack04-03-README.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>webpack04-03-README</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/webpack3-readme.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>webpack3-readme</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件 mini-css-extract-plugin.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件 mini-css-extract-plugin</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件 react-webpack-template.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件 react-webpack-template</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件 webpack Code Splitting.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件 webpack Code Splitting</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件 webpack HappyPack多个进程处理loader.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件 webpack HappyPack多个进程处理loader</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件 webpack 常用插件.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件 webpack 常用插件</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件 webpack-howto.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件 webpack-howto</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件-HappyPack plugin for the loader could not be found.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件-HappyPack plugin for the loader could not be found</span></div></div></a></div></div></div></div></div></div></div><div class="flex-center flex-row"><div class="mx-2"><div class="md:mr-2 rspress-nav-appearance"><div class="p-1 border border-solid border-gray-300 text-gray-400  cursor-pointer rounded-md hover:border-gray-600 hover:text-gray-600 dark:hover:border-gray-200 dark:hover:text-gray-200 transition-all duration-300 w-7 h-7"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" class="dark:hidden" width="18" height="18" fill="currentColor"><path d="M12 18c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6zm0-10c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zM12 4c-.6 0-1-.4-1-1V1c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zM12 24c-.6 0-1-.4-1-1v-2c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zM5.6 6.6c-.3 0-.5-.1-.7-.3L3.5 4.9c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.1.2-.4.3-.7.3zM19.8 20.8c-.3 0-.5-.1-.7-.3l-1.4-1.4c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.2.2-.5.3-.7.3zM3 13H1c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zM23 13h-2c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zM4.2 20.8c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.4.3-.7.3zM18.4 6.6c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.5.3-.7.3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" class="hidden dark:block" width="18" height="18" fill="currentColor"><path d="M12.1 22h-.9c-5.5-.5-9.5-5.4-9-10.9.4-4.8 4.2-8.6 9-9 .4 0 .8.2 1 .5.2.3.2.8-.1 1.1-2 2.7-1.4 6.4 1.3 8.4 2.1 1.6 5 1.6 7.1 0 .3-.2.7-.3 1.1-.1.3.2.5.6.5 1-.2 2.7-1.5 5.1-3.6 6.8-1.9 1.4-4.1 2.2-6.4 2.2zM9.3 4.4c-2.9 1-5 3.6-5.2 6.8-.4 4.4 2.8 8.3 7.2 8.7 2.1.2 4.2-.4 5.8-1.8 1.1-.9 1.9-2.1 2.4-3.4-2.5.9-5.3.5-7.5-1.1-2.8-2.2-3.9-5.9-2.7-9.2z"></path></svg></div></div></div></div></div><div class="mobileNavMenu_f6cde"><div class="navScreen_457e8 " id="navScreen"><div class="container_457e8"><div class="navMenu_457e8"><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/index.html"><div class="rspress-nav-menu-item singleItem_f6cde activeItem_f6cde text-sm font-medium mx-1.5 px-3 py-2 flex items-center">首页</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/28-rollup完全入门指南.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">rollup</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/21-Babel is what.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">babel</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/00-readme.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">webpack</div></a></div></div><div class="flex-center flex-col gap-2"><div class="mt-2 navAppearance_457e8 flex justify-center"></div></div></div></div><button aria-label="mobile hamburger" class=" navHamburger_e7b06 text-gray-500"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="currentColor"><circle cx="8" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="24" cy="16" r="2" fill="currentColor"></circle></svg></button></div></div></div></div><section><div class="docLayout_edeb4 pt-0"><div class="rspress-sidebar-menu"><button class="flex-center ml-auto"><span class="text-sm">ON THIS PAGE</span><div class="text-md mr-2" style="transform:rotate(0deg);transition:transform 0.2s ease-out;margin-top:2px"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></button><div class="rspress-local-toc-container "><ul><li><a href="#1-静态资源拷贝" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">1. 静态资源拷贝</span></a></li><li><a href="#2provideplugin" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">2.ProvidePlugin</span></a></li><li><a href="#3抽离css" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">3.抽离CSS</span></a></li><li><a href="#将抽离出来的css文件进行压缩" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">将抽离出来的css文件进行压缩</span></a></li><li><a href="#4按需加载" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">4.按需加载</span></a></li><li><a href="#5热更新" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">5.热更新</span></a></li><li><a href="#6多页应用打包" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">6.多页应用打包</span></a></li><li><a href="#7resolve-配置" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">7.resolve 配置</span></a></li><li><a href="#8区分不同的环境" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">8.区分不同的环境</span></a></li><li><a href="#9定义环境变量" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">9.定义环境变量</span></a></li><li><a href="#10利用webpack解决跨域问题" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">10.利用webpack解决跨域问题</span></a></li><li><a href="#配置代理" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">配置代理</span></a></li><li><a href="#11前端模拟数据" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">11.前端模拟数据</span></a></li><li><a href="#最后" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">最后</span></a></li></ul></div></div><div class="content_edeb4 rspress-doc-container flex flex-shrink-0 mx-auto"><div class="w-full flex-1"><div><div class="rspress-doc"><!--$--><h1 id="带你深度解锁webpack系列进阶篇" class="text-3xl mb-10 leading-10 tracking-tight title_3b154">带你深度解锁Webpack系列(进阶篇)<a class="link_3b154 header-anchor" aria-hidden="true" href="#带你深度解锁webpack系列进阶篇">#</a></h1>
<p class="my-4 leading-7">统计信息：字数 29666  阅读60分钟</p>
<p class="my-4 leading-7">掘金</p>
<p class="my-4 leading-7"><a target="_blank" rel="noopener noreferrer" href="https://juejin.cn/user/3368559358523944/posts" class="link_03735  link_3b154 inline-link_3b154">无名之苝</a></p>
<p class="my-4 leading-7">2020-03-0947,221阅读15分钟</p>
<p class="my-4 leading-7">三篇长文，带你解锁 <code>Webpack</code> ，希望读完这三篇文章，你能够对 <code>webpack</code> 的各项配置有一个更为清晰的认识。</p>
<p class="my-4 leading-7">本文是第二篇，如果你还没有阅读<a target="_blank" rel="noopener noreferrer" href="https://juejin.cn/post/6844904079219490830" class="link_03735  link_3b154 inline-link_3b154">《带你深度解锁Webpack系列(基础篇)》</a>，建议阅读之后，再继续阅读本文。</p>
<p class="my-4 leading-7">本文会引入更多的 <code>webpack</code> 配置，如果文中有任何错误，欢迎在评论区指正，我会尽快修正。 <code>webpack</code> 优化部分放在了下一篇。</p>
<p class="my-4 leading-7">推荐大家参考本文一步一步进行配置，不要总是想着找什么最佳配置，掌握之后，根据自己的需求配置出来的，就是最佳配置。</p>
<p class="my-4 leading-7">本文对应的项目地址(编写本文时使用) 供参考：<a target="_blank" rel="noopener noreferrer" href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FYvetteLau%2Fwebpack%2Ftree%2Fmaster%2Fwebpack-second" class="link_03735  link_3b154 inline-link_3b154">github.com/YvetteLau/w…</a></p>
<p class="my-4 leading-7"><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/9/170bae7ee866b278~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" alt="img"/></p>
<h3 id="1-静态资源拷贝" class="mt-10 mb-2 leading-7 text-xl title_3b154">1. 静态资源拷贝<a class="link_3b154 header-anchor" aria-hidden="true" href="#1-静态资源拷贝">#</a></h3>
<p class="my-4 leading-7">有些时候，我们需要使用已有的JS文件、CSS文件（本地文件），但是不需要 <code>webpack</code> 编译。例如，我们在 <code>public/index.html</code> 中引入了 <code>public</code> 目录下的 <code>js</code> 或 <code>css</code> 文件。这个时候，如果直接打包，那么在构建出来之后，肯定是找不到对应的 <code>js</code> / <code>css</code> 了。</p>
<blockquote class="border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 blockquote_3b154">
<p class="my-4 leading-7"><code>public</code> 目录结构</p>
</blockquote>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>├── public
│   ├── config.js
│   ├── index.html
│   ├── js
│   │   ├── base.js
│   │   └── other.js
│   └── login.html
</code></div></div>
<p class="my-4 leading-7">现在，我们在 <code>index.html</code> 中引入了 <code>./js/base.js</code>。</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>&lt;!-- index.html --&gt;
&lt;script src=&quot;./js/base.js&quot;&gt;&lt;/script&gt;
</code></div></div>
<p class="my-4 leading-7">这时候，我们 <code>npm run dev</code>，会发现有找不到该资源文件的报错信息。</p>
<p class="my-4 leading-7">对于这个问题，我们可以手动将其拷贝至构建目录，然后在配置 <code>CleanWebpackPlugin</code> 时，注意不要清空对应的文件或文件夹即可，但是如若这个静态文件时不时的还会修改下，那么依赖于手动拷贝，是很容易出问题的。</p>
<p class="my-4 leading-7">不要过于相信自己的记性，依赖于手动拷贝的方式，大多数人应该都有过忘记拷贝的经历，你要是说你从来没忘过。</p>
<p class="my-4 leading-7"><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/9/170bae7eedad0932~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" alt="050a81c7-59e4-4596-b08f-62cefce353d0.jpg"/></p>
<p class="my-4 leading-7">幸运的是，<code>webpack</code> 为我们这些记性不好又爱偷懒的人提供了好用的插件 <a target="_blank" rel="noopener noreferrer" href="https://link.juejin.cn/?target=https%3A%2F%2Fwebpack.js.org%2Fplugins%2Fcopy-webpack-plugin%2F" class="link_03735  link_3b154 inline-link_3b154">CopyWebpackPlugin</a>，它的作用就是将单个文件或整个目录复制到构建目录。</p>
<p class="my-4 leading-7">首先安装一下依赖：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>npm install copy-webpack-plugin -D
</code></div></div>
<p class="my-4 leading-7">修改配置(当前，需要做的是将 <code>public/js</code> 目录拷贝至 <code>dist/js</code> 目录)：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//webpack.config.js
const CopyWebpackPlugin = require(&#x27;copy-webpack-plugin&#x27;);
module.exports = {
    //...
    plugins: [
        new CopyWebpackPlugin([
            {
                from: &#x27;public/js/*.js&#x27;,
                to: path.resolve(__dirname, &#x27;dist&#x27;, &#x27;js&#x27;),
                flatten: true,
            },
            //还可以继续配置其它要拷贝的文件
        ])
    ]
}
</code></div></div>
<p class="my-4 leading-7">此时，重新执行 <code>npm run dev</code>，报错信息已经消失。</p>
<p class="my-4 leading-7">这里说一下 <code>flatten</code> 这个参数，设置为 <code>true</code>，那么它只会拷贝文件，而不会把文件夹路径都拷贝上，大家可以不设置 <code>flatten</code> 时，看下构建结果。</p>
<p class="my-4 leading-7">另外，如果我们要拷贝一个目录下的很多文件，但是想过滤掉某个或某些文件，那么 <code>CopyWebpackPlugin</code> 还为我们提供了 <code>ignore</code> 参数。</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//webpack.config.js
const CopyWebpackPlugin = require(&#x27;copy-webpack-plugin&#x27;);
module.exports = {
    //...
    plugins: [
        new CopyWebpackPlugin([
            {
                from: &#x27;public/js/*.js&#x27;,
                to: path.resolve(__dirname, &#x27;dist&#x27;, &#x27;js&#x27;),
                flatten: true,
            }
        ], {
            ignore: [&#x27;other.js&#x27;]
        })
    ]
}
</code></div></div>
<p class="my-4 leading-7">例如，这里我们忽略掉 <code>js</code> 目录下的 <code>other.js</code> 文件，使用 <code>npm run build</code> 构建，可以看到 <code>dist/js</code> 下不会出现 <code>other.js</code> 文件。 <code>CopyWebpackPlugin</code> 还提供了很多其它的参数，如果当前的配置不能满足你，可以查阅文档进一步修改配置。</p>
<h3 id="2provideplugin" class="mt-10 mb-2 leading-7 text-xl title_3b154">2.ProvidePlugin<a class="link_3b154 header-anchor" aria-hidden="true" href="#2provideplugin">#</a></h3>
<p class="my-4 leading-7"><code>ProvidePlugin</code> 在我看来，是为懒人准备的，不过也别过度使用，毕竟全局变量不是什么“好东西”。<code>ProvidePlugin</code> 的作用就是不需要 <code>import</code> 或 <code>require</code> 就可以在项目中到处使用。</p>
<p class="my-4 leading-7"><code>ProvidePlugin</code> 是 <code>webpack</code> 的内置插件，使用方式如下：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>new webpack.ProvidePlugin({
  identifier1: &#x27;module1&#x27;,
  identifier2: [&#x27;module2&#x27;, &#x27;property2&#x27;]
});
</code></div></div>
<p class="my-4 leading-7">默认寻找路径是当前文件夹 <code>./**</code> 和 <code>node_modules</code>，当然啦，你可以指定全路径。</p>
<p class="my-4 leading-7"><code>React</code> 大家都知道的，使用的时候，要在每个文件中引入 <code>React</code>，不然立刻抛错给你看。还有就是 <code>jquery</code>, <code>lodash</code> 这样的库，可能在多个文件中使用，但是懒得每次都引入，好嘛，一起来偷个懒，修改下 <code>webpack</code> 的配置:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>const webpack = require(&#x27;webpack&#x27;);
module.exports = {
    //...
    plugins: [
        new webpack.ProvidePlugin({
            React: &#x27;react&#x27;,
            Component: [&#x27;react&#x27;, &#x27;Component&#x27;],
            Vue: [&#x27;vue/dist/vue.esm.js&#x27;, &#x27;default&#x27;],
            $: &#x27;jquery&#x27;,
            _map: [&#x27;lodash&#x27;, &#x27;map&#x27;]
        })
    ]
}
</code></div></div>
<p class="my-4 leading-7">这样配置之后，你就可以在项目中随心所欲的使用 <code>$</code>、<code>_map</code>了，并且写 <code>React</code> 组件时，也不需要 <code>import</code> <code>React</code> 和 <code>Component</code> 了，如果你想的话，你还可以把 <code>React</code> 的 <code>Hooks</code> 都配置在这里。</p>
<p class="my-4 leading-7">另外呢，<code>Vue</code> 的配置后面多了一个 <code>default</code>，这是因为 <code>vue.esm.js</code> 中使用的是 <code>export default</code> 导出的，对于这种，必须要指定 <code>default</code>。<code>React</code> 使用的是 <code>module.exports</code> 导出的，因此不要写 <code>default</code>。</p>
<p class="my-4 leading-7">另外，就是如果你项目启动了 <code>eslint</code> 的话，记得修改下 <code>eslint</code> 的配置文件，增加以下配置：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>{
    &quot;globals&quot;: {
        &quot;React&quot;: true,
        &quot;Vue&quot;: true,
        //....
    }
}
</code></div></div>
<p class="my-4 leading-7">当然啦，偷懒要有个度，你要是配一大堆全局变量，最终可能会给自己带来麻烦，对自己配置的全局变量一定要负责到底。</p>
<p class="my-4 leading-7"><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/9/170bae7ef26d2ca3~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" alt="u=2243033496,1576809017&amp;fm=15&amp;gp=0.jpg"/></p>
<h3 id="3抽离css" class="mt-10 mb-2 leading-7 text-xl title_3b154">3.抽离CSS<a class="link_3b154 header-anchor" aria-hidden="true" href="#3抽离css">#</a></h3>
<p class="my-4 leading-7">CSS打包我们前面已经说过了，不过呢，有些时候，我们可能会有抽离CSS的需求，即将CSS文件单独打包，这可能是因为打包成一个JS文件太大，影响加载速度，也有可能是为了缓存(例如，只有JS部分有改动)，还有可能就是“我高兴”：我想抽离就抽离，谁也管不着。</p>
<p class="my-4 leading-7">不管你是因为什么原因要抽离CSS，只要你有需求，我们就可以去实现。</p>
<p class="my-4 leading-7">首先，安装 <code>loader</code>:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>npm install mini-css-extract-plugin -D
</code></div></div>
<blockquote class="border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 blockquote_3b154">
<p class="my-4 leading-7"><code>mini-css-extract-plugin</code> 和 <code>extract-text-webpack-plugin</code> 相比:</p>
</blockquote>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">异步加载</li>
<li class="[&amp;:not(:first-child)]:mt-2">不会重复编译(性能更好)</li>
<li class="[&amp;:not(:first-child)]:mt-2">更容易使用</li>
<li class="[&amp;:not(:first-child)]:mt-2">只适用CSS</li>
</ol>
<p class="my-4 leading-7">修改我们的配置文件：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//webpack.config.js
const MiniCssExtractPlugin = require(&#x27;mini-css-extract-plugin&#x27;);
module.exports = {
    plugins: [
        new MiniCssExtractPlugin({
            filename: &#x27;css/[name].css&#x27;
            //个人习惯将css文件放在单独目录下
            //publicPath:&#x27;../&#x27;   //如果你的output的publicPath配置的是 &#x27;./&#x27; 这种相对路径，那么如果将css文件放在单独目录下，记得在这里指定一下publicPath 
        })
    ],
    module: {
        rules: [
            {
                test: /\.(le|c)ss$/,
                use: [
                    MiniCssExtractPlugin.loader, //替换之前的 style-loader
                    &#x27;css-loader&#x27;, {
                        loader: &#x27;postcss-loader&#x27;,
                        options: {
                            plugins: function () {
                                return [
                                    require(&#x27;autoprefixer&#x27;)({
                                        &quot;overrideBrowserslist&quot;: [
                                            &quot;defaults&quot;
                                        ]
                                    })
                                ]
                            }
                        }
                    }, &#x27;less-loader&#x27;
                ],
                exclude: /node_modules/
            }
        ]
    }
}
</code></div></div>
<p class="my-4 leading-7">现在，我们重新编译：<code>npm run build</code>，目录结构如下所示:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>.
├── dist
│   ├── assets
│   │   ├── alita_e09b5c.jpg
│   │   └── thor_e09b5c.jpeg
│   ├── css
│   │   ├── index.css
│   │   └── index.css.map
│   ├── bundle.fb6d0c.js
│   ├── bundle.fb6d0c.js.map
│   └── index.html
</code></div></div>
<p class="my-4 leading-7">前面说了最好新建一个 <code>.browserslistrc</code> 文件，这样可以多个 <code>loader</code> 共享配置，所以，动手在根目录下新建文件 (<code>.browserslistrc</code>)，内容如下（你可以根据自己项目需求，修改为其它的配置）:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>last 2 version
&gt; 0.25%
not dead
</code></div></div>
<p class="my-4 leading-7">修改 <code>webpack.config.js</code>：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//webpack.config.js
const MiniCssExtractPlugin = require(&#x27;mini-css-extract-plugin&#x27;);
module.exports = {
    //...
    plugins: [
        new MiniCssExtractPlugin({
            filename: &#x27;css/[name].css&#x27; 
        })
    ],
    module: {
        rules: [
            {
                test: /\.(c|le)ss$/,
                use: [
                    MiniCssExtractPlugin.loader,
                    &#x27;css-loader&#x27;, {
                        loader: &#x27;postcss-loader&#x27;,
                        options: {
                            plugins: function () {
                                return [
                                    require(&#x27;autoprefixer&#x27;)()
                                ]
                            }
                        }
                    }, &#x27;less-loader&#x27;
                ],
                exclude: /node_modules/
            },
        ]
    }
}
</code></div></div>
<p class="my-4 leading-7">要测试自己的 <code>.browserlistrc</code> 有没有生效也很简单，直接将文件内容修改为 <code>last 1 Chrome versions</code> ，然后对比修改前后的构建出的结果，就能看出来啦。</p>
<p class="my-4 leading-7">可以查看更多[browserslistrc]配置项(<a target="_blank" rel="noopener noreferrer" href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fbrowserslist%2Fbrowserslist" class="link_03735  link_3b154 inline-link_3b154">github.com/browserslis…</a>)</p>
<p class="my-4 leading-7">更多配置项，可以查看<a target="_blank" rel="noopener noreferrer" href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fwebpack-contrib%2Fmini-css-extract-plugin" class="link_03735  link_3b154 inline-link_3b154">mini-css-extract-plugin</a></p>
<h4 id="将抽离出来的css文件进行压缩" class="mt-8 leading-6 text-lg title_3b154">将抽离出来的css文件进行压缩<a class="link_3b154 header-anchor" aria-hidden="true" href="#将抽离出来的css文件进行压缩">#</a></h4>
<p class="my-4 leading-7">使用 <code>mini-css-extract-plugin</code>，<code>CSS</code> 文件默认不会被压缩，如果想要压缩，需要配置 <code>optimization</code>，首先安装 <code>optimize-css-assets-webpack-plugin</code>.</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>npm install optimize-css-assets-webpack-plugin -D
</code></div></div>
<p class="my-4 leading-7">修改webpack配置：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//webpack.config.js
const OptimizeCssPlugin = require(&#x27;optimize-css-assets-webpack-plugin&#x27;);

module.exports = {
    entry: &#x27;./src/index.js&#x27;,
    //....
    plugins: [
        new OptimizeCssPlugin()
    ],
}
</code></div></div>
<p class="my-4 leading-7">注意，这里将 <code>OptimizeCssPlugin</code> 直接配置在 <code>plugins</code> 里面，那么 <code>js</code> 和 <code>css</code> 都能够正常压缩，如果你将这个配置在 <code>optimization</code>，那么需要再配置一下 <code>js</code> 的压缩(开发环境下不需要去做CSS的压缩，因此后面记得将其放到 <code>webpack.config.prod.js</code> 中哈)。</p>
<p class="my-4 leading-7">配置完之后，测试的时候发现，抽离之后，修改 <code>css</code> 文件时，第一次页面会刷新，但是第二次页面不会刷新 —— 好嘛，我平时的业务中用不着抽离 <code>css</code>，这个问题搁置了好多天(准确来说是忘记了)。</p>
<p class="my-4 leading-7">3月8号再次修改这篇文章的时候，正好看到了 <code>MiniCssExtractPlugin.loader</code> 对应的 <code>option</code> 设置，我们再次修改下对应的 <code>rule</code>。</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>module.exports = {
    rules: [
        {
            test: /\.(c|le)ss$/,
            use: [
                {
                    loader: MiniCssExtractPlugin.loader,
                    options: {
                        hmr: isDev,
                        reloadAll: true,
                    }
                },
                //...
            ],
            exclude: /node_modules/
        }
    ]
}
</code></div></div>
<p class="my-4 leading-7"><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/9/170bae7ef4ea39dd~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" alt="img"/></p>
<h3 id="4按需加载" class="mt-10 mb-2 leading-7 text-xl title_3b154">4.按需加载<a class="link_3b154 header-anchor" aria-hidden="true" href="#4按需加载">#</a></h3>
<p class="my-4 leading-7">很多时候我们不需要一次性加载所有的JS文件，而应该在不同阶段去加载所需要的代码。<code>webpack</code>内置了强大的分割代码的功能可以实现按需加载。</p>
<p class="my-4 leading-7">比如，我们在点击了某个按钮之后，才需要使用使用对应的JS文件中的代码，需要使用 <code>import()</code> 语法：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>document.getElementById(&#x27;btn&#x27;).onclick = function() {
    import(&#x27;./handle&#x27;).then(fn =&gt; fn.default());
}
</code></div></div>
<p class="my-4 leading-7"><code>import()</code> 语法，需要 <code>@babel/plugin-syntax-dynamic-import</code> 的插件支持，但是因为当前 <code>@babel/preset-env</code> 预设中已经包含了 <code>@babel/plugin-syntax-dynamic-import</code>，因此我们不需要再单独安装和配置。</p>
<p class="my-4 leading-7">直接 <code>npm run build</code> 进行构建，构建结果如下：</p>
<p class="my-4 leading-7"><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/9/170bae7ef6dc0875~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" alt="WechatIMG1121.jpeg"/></p>
<p class="my-4 leading-7"><code>webpack</code> 遇到 <code>import(****)</code> 这样的语法的时候，会这样处理：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">以**** 为入口新生成一个 <code>Chunk</code></li>
<li class="[&amp;:not(:first-child)]:mt-2">当代码执行到 <code>import</code> 所在的语句时，才会加载该 <code>Chunk</code> 所对应的文件（如这里的1.bundle.8bf4dc.js）</li>
</ul>
<p class="my-4 leading-7">大家可以在浏览器中的控制台中，在 <code>Network</code> 的 <code>Tab页</code> 查看文件加载的情况，只有点击之后，才会加载对应的 <code>JS</code> 。</p>
<h3 id="5热更新" class="mt-10 mb-2 leading-7 text-xl title_3b154">5.热更新<a class="link_3b154 header-anchor" aria-hidden="true" href="#5热更新">#</a></h3>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">首先配置 <code>devServer</code> 的 <code>hot</code> 为 <code>true</code></li>
<li class="[&amp;:not(:first-child)]:mt-2">并且在 <code>plugins</code> 中增加 <code>new webpack.HotModuleReplacementPlugin()</code></li>
</ol>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//webpack.config.js
const webpack = require(&#x27;webpack&#x27;);
module.exports = {
    //....
    devServer: {
        hot: true
    },
    plugins: [
        new webpack.HotModuleReplacementPlugin() //热更新插件
    ]
}
</code></div></div>
<p class="my-4 leading-7">我们配置了 <code>HotModuleReplacementPlugin</code> 之后，会发现，此时我们修改代码，仍然是整个页面都会刷新。不希望整个页面都刷新，还需要修改入口文件：</p>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">在入口文件中新增:</li>
</ol>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>if(module &amp;&amp; module.hot) {
    module.hot.accept()
}
</code></div></div>
<p class="my-4 leading-7">此时，再修改代码，不会造成整个页面的刷新。</p>
<p class="my-4 leading-7"><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/9/170bae7ef7c6718b~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" alt="img"/></p>
<h3 id="6多页应用打包" class="mt-10 mb-2 leading-7 text-xl title_3b154">6.多页应用打包<a class="link_3b154 header-anchor" aria-hidden="true" href="#6多页应用打包">#</a></h3>
<p class="my-4 leading-7">有时，我们的应用不一定是一个单页应用，而是一个多页应用，那么如何使用 <code>webpack</code> 进行打包呢。为了生成目录看起来清晰，不生成单独的 <code>map</code> 文件。</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//webpack.config.js
const path = require(&#x27;path&#x27;);
const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);
module.exports = {
    entry: {
        index: &#x27;./src/index.js&#x27;,
        login: &#x27;./src/login.js&#x27;
    },
    output: {
        path: path.resolve(__dirname, &#x27;dist&#x27;),
        filename: &#x27;[name].[hash:6].js&#x27;
    },
    //...
    plugins: [
        new HtmlWebpackPlugin({
            template: &#x27;./public/index.html&#x27;,
            filename: &#x27;index.html&#x27; //打包后的文件名
        }),
        new HtmlWebpackPlugin({
            template: &#x27;./public/login.html&#x27;,
            filename: &#x27;login.html&#x27; //打包后的文件名
        }),
    ]
}
</code></div></div>
<p class="my-4 leading-7">如果需要配置多个 <code>HtmlWebpackPlugin</code>，那么 <code>filename</code> 字段不可缺省，否则默认生成的都是 <code>index.html</code>，如果你希望 <code>html</code> 的文件名中也带有 <code>hash</code>，那么直接修改 <code>fliename</code> 字段即可，例如: <code>filename: &#x27;login.[hash:6].html&#x27;</code>。</p>
<p class="my-4 leading-7">生成目录如下:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>.
├── dist
│   ├── 2.463ccf.js
│   ├── assets
│   │   └── thor_e09b5c.jpeg
│   ├── css
│   │   ├── index.css
│   │   └── login.css
│   ├── index.463ccf.js
│   ├── index.html
│   ├── js
│   │   └── base.js
│   ├── login.463ccf.js
│   └── login.html
</code></div></div>
<p class="my-4 leading-7">看起来，似乎是OK了，不过呢，查看 <code>index.html</code> 和 <code>login.html</code> 会发现，都同时引入了 <code>index.f7d21a.js</code> 和 <code>login.f7d21a.js</code>，通常这不是我们想要的，我们希望，<code>index.html</code> 中只引入 <code>index.f7d21a.js</code>，<code>login.html</code> 只引入 <code>login.f7d21a.js</code>。</p>
<p class="my-4 leading-7"><code>HtmlWebpackPlugin</code> 提供了一个 <code>chunks</code> 的参数，可以接受一个数组，配置此参数仅会将数组中指定的js引入到html文件中，此外，如果你需要引入多个JS文件，仅有少数不想引入，还可以指定 <code>excludeChunks</code> 参数，它接受一个数组。</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//webpack.config.js
module.exports = {
    //...
    plugins: [
        new HtmlWebpackPlugin({
            template: &#x27;./public/index.html&#x27;,
            filename: &#x27;index.html&#x27;, //打包后的文件名
            chunks: [&#x27;index&#x27;]
        }),
        new HtmlWebpackPlugin({
            template: &#x27;./public/login.html&#x27;,
            filename: &#x27;login.html&#x27;, //打包后的文件名
            chunks: [&#x27;login&#x27;]
        }),
    ]
}
</code></div></div>
<p class="my-4 leading-7">执行 <code>npm run build</code>，可以看到 <code>index.html</code> 中仅引入了 <code>index</code> 的 <code>JS</code> 文件，而 <code>login.html</code> 中也仅引入了 <code>login</code> 的 <code>JS</code> 文件，符合我们的预期。</p>
<p class="my-4 leading-7"><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/9/170bae7f6f69cfb5~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" alt="img"/></p>
<h3 id="7resolve-配置" class="mt-10 mb-2 leading-7 text-xl title_3b154">7.resolve 配置<a class="link_3b154 header-anchor" aria-hidden="true" href="#7resolve-配置">#</a></h3>
<p class="my-4 leading-7"><code>resolve</code> 配置 <code>webpack</code> 如何寻找模块所对应的文件。<code>webpack</code> 内置 <code>JavaScript</code> 模块化语法解析功能，默认会采用模块化标准里约定好的规则去寻找，但你可以根据自己的需要修改默认的规则。</p>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">modules</li>
</ol>
<p class="my-4 leading-7"><code>resolve.modules</code> 配置 <code>webpack</code> 去哪些目录下寻找第三方模块，默认情况下，只会去 <code>node_modules</code> 下寻找，如果你我们项目中某个文件夹下的模块经常被导入，不希望写很长的路径，那么就可以通过配置 <code>resolve.modules</code> 来简化。</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//webpack.config.js
module.exports = {
    //....
    resolve: {
        modules: [&#x27;./src/components&#x27;, &#x27;node_modules&#x27;] //从左到右依次查找
    }
}
</code></div></div>
<p class="my-4 leading-7">这样配置之后，我们 <code>import Dialog from &#x27;dialog&#x27;</code>，会去寻找 <code>./src/components/dialog</code>，不再需要使用相对路径导入。如果在 <code>./src/components</code> 下找不到的话，就会到 <code>node_modules</code> 下寻找。</p>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">alias</li>
</ol>
<p class="my-4 leading-7"><code>resolve.alias</code> 配置项通过别名把原导入路径映射成一个新的导入路径，例如：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//webpack.config.js
module.exports = {
    //....
    resolve: {
        alias: {
            &#x27;react-native&#x27;: &#x27;@my/react-native-web&#x27; //这个包名是我随便写的哈
        }
    }
}
</code></div></div>
<p class="my-4 leading-7">例如，我们有一个依赖 <code>@my/react-native-web</code> 可以实现 <code>react-native</code> 转 <code>web</code>。我们代码一般下面这样:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>import { View, ListView, StyleSheet, Animated } from &#x27;react-native&#x27;;
</code></div></div>
<p class="my-4 leading-7">配置了别名之后，在转 web 时，会从 <code>@my/react-native-web</code> 寻找对应的依赖。</p>
<p class="my-4 leading-7">当然啦，如果某个依赖的名字太长了，你也可以给它配置一个短一点的别名，这样用起来比较爽，尤其是带有 <code>scope</code> 的包。</p>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">extensions</li>
</ol>
<p class="my-4 leading-7">适配多端的项目中，可能会出现 <code>.web.js</code>, <code>.wx.js</code>，例如在转web的项目中，我们希望首先找 <code>.web.js</code>，如果没有，再找 <code>.js</code>。我们可以这样配置:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//webpack.config.js
module.exports = {
    //....
    resolve: {
        extensions: [&#x27;web.js&#x27;, &#x27;.js&#x27;] //当然，你还可以配置 .json, .css
    }
}
</code></div></div>
<p class="my-4 leading-7">首先寻找 <code>../dialog.web.js</code> ，如果不存在的话，再寻找 <code>../dialog.js</code>。这在适配多端的代码中非常有用，否则，你就需要根据不同的平台去引入文件(以牺牲了速度为代价)。</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>import dialog from &#x27;../dialog&#x27;;
</code></div></div>
<p class="my-4 leading-7">当然，配置 <code>extensions</code>，我们就可以缺省文件后缀，在导入语句没带文件后缀时，会自动带上<code>extensions</code> 中配置的后缀后，去尝试访问文件是否存在，因此要将高频的后缀放在前面，并且数组不要太长，减少尝试次数。如果没有配置 <code>extensions</code>，默认只会找对对应的js文件。</p>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">enforceExtension</li>
</ol>
<p class="my-4 leading-7">如果配置了 <code>resolve.enforceExtension</code> 为 <code>true</code>，那么导入语句不能缺省文件后缀。</p>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">mainFields</li>
</ol>
<p class="my-4 leading-7">有一些第三方模块会提供多份代码，例如 <code>bootstrap</code>，可以查看 <code>bootstrap</code> 的 <code>package.json</code> 文件：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>{
    &quot;style&quot;: &quot;dist/css/bootstrap.css&quot;,
    &quot;sass&quot;: &quot;scss/bootstrap.scss&quot;,
    &quot;main&quot;: &quot;dist/js/bootstrap&quot;,
}
</code></div></div>
<p class="my-4 leading-7"><code>resolve.mainFields</code> 默认配置是 <code>[&#x27;browser&#x27;, &#x27;main&#x27;]</code>，即首先找对应依赖 <code>package.json</code> 中的 <code>brower</code> 字段，如果没有，找 <code>main</code> 字段。</p>
<p class="my-4 leading-7">如：<code>import &#x27;bootstrap&#x27;</code> 默认情况下，找得是对应的依赖的 <code>package.json</code> 的 <code>main</code> 字段指定的文件，即 <code>dist/js/bootstrap</code>。</p>
<p class="my-4 leading-7">假设我们希望，<code>import &#x27;bootsrap&#x27;</code> 默认去找 <code>css</code> 文件的话，可以配置 <code>resolve.mainFields</code> 为:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//webpack.config.js
module.exports = {
    //....
    resolve: {
        mainFields: [&#x27;style&#x27;, &#x27;main&#x27;] 
    }
}
</code></div></div>
<h3 id="8区分不同的环境" class="mt-10 mb-2 leading-7 text-xl title_3b154">8.区分不同的环境<a class="link_3b154 header-anchor" aria-hidden="true" href="#8区分不同的环境">#</a></h3>
<p class="my-4 leading-7">目前为止我们 <code>webpack</code> 的配置，都定义在了 <code>webpack.config.js</code> 中，对于需要区分是开发环境还是生产环境的情况，我们根据 <code>process.env.NODE_ENV</code> 去进行了区分配置，但是配置文件中如果有多处需要区分环境的配置，这种显然不是一个好办法。</p>
<p class="my-4 leading-7">更好的做法是创建多个配置文件，如: <code>webpack.base.js</code>、<code>webpack.dev.js</code>、<code>webpack.prod.js</code>。</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><code>webpack.base.js</code> 定义公共的配置</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>webpack.dev.js</code>：定义开发环境的配置</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>webpack.prod.js</code>：定义生产环境的配置</li>
</ul>
<p class="my-4 leading-7"><a target="_blank" rel="noopener noreferrer" href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fwebpack-merge" class="link_03735  link_3b154 inline-link_3b154">webpack-merge</a> 专为 <code>webpack</code> 设计，提供了一个 <code>merge</code> 函数，用于连接数组，合并对象。</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>npm install webpack-merge -D
const merge = require(&#x27;webpack-merge&#x27;);
merge({
    devtool: &#x27;cheap-module-eval-source-map&#x27;,
    module: {
        rules: [
            {a: 1}
        ]
    },
    plugins: [1,2,3]
}, {
    devtool: &#x27;none&#x27;,
    mode: &quot;production&quot;,
    module: {
        rules: [
            {a: 2},
            {b: 1}
        ]
    },
    plugins: [4,5,6],
});
//合并后的结果为
{
    devtool: &#x27;none&#x27;,
    mode: &quot;production&quot;,
    module: {
        rules: [
            {a: 1},
            {a: 2},
            {b: 1}
        ]
    },
    plugins: [1,2,3,4,5,6]
}
</code></div></div>
<p class="my-4 leading-7"><code>webpack.config.base.js</code> 中是通用的 <code>webpack</code> 配置，以 <code>webpack.config.dev.js</code> 为例，如下：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//webpack.config.dev.js
const merge = require(&#x27;webpack-merge&#x27;);
const baseWebpackConfig = require(&#x27;./webpack.config.base&#x27;);

module.exports = merge(baseWebpackConfig, {
    mode: &#x27;development&#x27;
    //...其它的一些配置
});
</code></div></div>
<p class="my-4 leading-7">然后修改我们的 <code>package.json</code>，指定对应的 <code>config</code> 文件：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//package.json
{
    &quot;scripts&quot;: {
        &quot;dev&quot;: &quot;cross-env NODE_ENV=development webpack-dev-server --config=webpack.config.dev.js&quot;,
        &quot;build&quot;: &quot;cross-env NODE_ENV=production webpack --config=webpack.config.prod.js&quot;
    },
}
</code></div></div>
<p class="my-4 leading-7">你可以使用 <code>merge</code> 合并，也可以使用 <code>merge.smart</code> 合并，<code>merge.smart</code> 在合并<code>loader</code>时，会将同一匹配规则的进行合并，<code>webpack-merge</code> 的说明文档中给出了详细的示例。</p>
<h3 id="9定义环境变量" class="mt-10 mb-2 leading-7 text-xl title_3b154">9.定义环境变量<a class="link_3b154 header-anchor" aria-hidden="true" href="#9定义环境变量">#</a></h3>
<p class="my-4 leading-7">很多时候，我们在开发环境中会使用预发环境或者是本地的域名，生产环境中使用线上域名，我们可以在 <code>webpack</code> 定义环境变量，然后在代码中使用。</p>
<p class="my-4 leading-7">使用 <code>webpack</code> 内置插件 <code>DefinePlugin</code> 来定义环境变量。</p>
<p class="my-4 leading-7"><code>DefinePlugin</code> 中的每个键，是一个标识符.</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">如果 <code>value</code> 是一个字符串，会被当做 <code>code</code> 片段</li>
<li class="[&amp;:not(:first-child)]:mt-2">如果 <code>value</code> 不是一个字符串，会被<code>stringify</code></li>
<li class="[&amp;:not(:first-child)]:mt-2">如果 <code>value</code> 是一个对象，正常对象定义即可</li>
<li class="[&amp;:not(:first-child)]:mt-2">如果 <code>key</code> 中有 <code>typeof</code>，它只针对 <code>typeof</code> 调用定义</li>
</ul>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//webpack.config.dev.js
const webpack = require(&#x27;webpack&#x27;);
module.exports = {
    plugins: [
        new webpack.DefinePlugin({
            DEV: JSON.stringify(&#x27;dev&#x27;), //字符串
            FLAG: &#x27;true&#x27; //FLAG 是个布尔类型
        })
    ]
}
//index.js
if(DEV === &#x27;dev&#x27;) {
    //开发环境
}else {
    //生产环境
}
</code></div></div>
<p class="my-4 leading-7"><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/9/170bae7f724b6757~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" alt="img"/></p>
<h3 id="10利用webpack解决跨域问题" class="mt-10 mb-2 leading-7 text-xl title_3b154">10.利用webpack解决跨域问题<a class="link_3b154 header-anchor" aria-hidden="true" href="#10利用webpack解决跨域问题">#</a></h3>
<p class="my-4 leading-7">假设前端在3000端口，服务端在4000端口，我们通过 <code>webpack</code> 配置的方式去实现跨域。</p>
<p class="my-4 leading-7">首先，我们在本地创建一个 <code>server.js</code>：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>let express = require(&#x27;express&#x27;);

let app = express();

app.get(&#x27;/api/user&#x27;, (req, res) =&gt; {
    res.json({name: &#x27;刘小夕&#x27;});
});

app.listen(4000);
</code></div></div>
<p class="my-4 leading-7">执行代码(<code>run code</code>)，现在我们可以在浏览器中访问到此接口: <code>http://localhost:4000/api/user</code>。</p>
<p class="my-4 leading-7">在 <code>index.js</code> 中请求 <code>/api/user</code>，修改 <code>index.js</code> 如下:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//需要将 localhost:3000 转发到 localhost:4000（服务端） 端口
fetch(&quot;/api/user&quot;)
    .then(response =&gt; response.json())
    .then(data =&gt; console.log(data))
    .catch(err =&gt; console.log(err));
</code></div></div>
<p class="my-4 leading-7">我们希望通过配置代理的方式，去访问 4000 的接口。</p>
<h4 id="配置代理" class="mt-8 leading-6 text-lg title_3b154">配置代理<a class="link_3b154 header-anchor" aria-hidden="true" href="#配置代理">#</a></h4>
<p class="my-4 leading-7">修改 <code>webpack</code> 配置:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//webpack.config.js
module.exports = {
    //...
    devServer: {
        proxy: {
            &quot;/api&quot;: &quot;http://localhost:4000&quot;
        }
    }
}
</code></div></div>
<p class="my-4 leading-7">重新执行 <code>npm run dev</code>，可以看到控制台打印出来了 <code>{name: &quot;刘小夕&quot;}</code>，实现了跨域。</p>
<p class="my-4 leading-7">大多情况，后端提供的接口并不包含 <code>/api</code>，即：<code>/user</code>，<code>/info</code>、<code>/list</code> 等，配置代理时，我们不可能罗列出每一个api。</p>
<p class="my-4 leading-7">修改我们的服务端代码，并重新执行。</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//server.js
let express = require(&#x27;express&#x27;);

let app = express();

app.get(&#x27;/user&#x27;, (req, res) =&gt; {
    res.json({name: &#x27;刘小夕&#x27;});
});

app.listen(4000);
</code></div></div>
<p class="my-4 leading-7">尽管后端的接口并不包含 <code>/api</code>，我们在请求后端接口时，仍然以 <code>/api</code> 开头，在配置代理时，去掉 <code>/api</code>，修改配置:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//webpack.config.js
module.exports = {
    //...
    devServer: {
        proxy: {
            &#x27;/api&#x27;: {
                target: &#x27;http://localhost:4000&#x27;,
                pathRewrite: {
                    &#x27;/api&#x27;: &#x27;&#x27;
                }
            }
        }
    }
}
</code></div></div>
<p class="my-4 leading-7">重新执行 <code>npm run dev</code>，在浏览器中访问： <code>http://localhost:3000/</code>，控制台中也打印出了<code>{name: &quot;刘小夕&quot;}</code>，跨域成功，</p>
<h3 id="11前端模拟数据" class="mt-10 mb-2 leading-7 text-xl title_3b154">11.前端模拟数据<a class="link_3b154 header-anchor" aria-hidden="true" href="#11前端模拟数据">#</a></h3>
<blockquote class="border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 blockquote_3b154">
<p class="my-4 leading-7">简单数据模拟</p>
</blockquote>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>module.exports = {
    devServer: {
        before(app) {
            app.get(&#x27;/user&#x27;, (req, res) =&gt; {
                res.json({name: &#x27;刘小夕&#x27;})
            })
        }
    }
}
</code></div></div>
<p class="my-4 leading-7">在 <code>src/index.js</code> 中直接请求 <code>/user</code> 接口。</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>fetch(&quot;user&quot;)
    .then(response =&gt; response.json())
    .then(data =&gt; console.log(data))
    .catch(err =&gt; console.log(err));
</code></div></div>
<blockquote class="border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 blockquote_3b154">
<p class="my-4 leading-7">使用 mocker-api mock数据接口</p>
</blockquote>
<p class="my-4 leading-7">mocker-api 为 REST API 创建模拟 API。在没有实际 REST API 服务器的情况下测试应用程序时，它会很有用。</p>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">安装 <a target="_blank" rel="noopener noreferrer" href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fmocker-api" class="link_03735  link_3b154 inline-link_3b154">mocker-api</a>:</li>
</ol>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>npm install mocker-api -D
</code></div></div>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">在项目中新建mock文件夹，新建 mocker.js.文件，文件如下:</li>
</ol>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>module.exports = {
    &#x27;GET /user&#x27;: {name: &#x27;刘小夕&#x27;},
    &#x27;POST /login/account&#x27;: (req, res) =&gt; {
        const { password, username } = req.body
        if (password === &#x27;888888&#x27; &amp;&amp; username === &#x27;admin&#x27;) {
            return res.send({
                status: &#x27;ok&#x27;,
                code: 0,
                token: &#x27;sdfsdfsdfdsf&#x27;,
                data: { id: 1, name: &#x27;刘小夕&#x27; }
            })
        } else {
            return res.send({ status: &#x27;error&#x27;, code: 403 })
        }
    }
}
</code></div></div>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">修改 <code>webpack.config.base.js</code>:</li>
</ol>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>const apiMocker = require(&#x27;mocker-api&#x27;);
module.export = {
    //...
    devServer: {
        before(app){
            apiMocker(app, path.resolve(&#x27;./mock/mocker.js&#x27;))
        }
    }
}
</code></div></div>
<p class="my-4 leading-7">这样，我们就可以直接在代码中像请求后端接口一样对mock数据进行请求。</p>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">重启 <code>npm run dev</code>，可以看到，控制台成功打印出来 <code>{name: &#x27;刘小夕&#x27;}</code></li>
<li class="[&amp;:not(:first-child)]:mt-2">我们再修改下 <code>src/index.js</code>，检查下POST接口是否成功</li>
</ol>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//src/index.js
fetch(&quot;/login/account&quot;, {
    method: &quot;POST&quot;,
    headers: {
        &#x27;Accept&#x27;: &#x27;application/json&#x27;,
        &#x27;Content-Type&#x27;: &#x27;application/json&#x27;
    },
    body: JSON.stringify({
        username: &quot;admin&quot;,
        password: &quot;888888&quot;
    })
})
    .then(response =&gt; response.json())
    .then(data =&gt; console.log(data))
    .catch(err =&gt; console.log(err));
</code></div></div>
<p class="my-4 leading-7">可以在控制台中看到接口返回的成功的数据。</p>
<p class="my-4 leading-7">进阶篇就到这里结束啦，最后一篇是优化篇，下周一带上小板凳和瓜子来约。</p>
<p class="my-4 leading-7"><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/9/170bae92e83c51e3~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" alt="img"/></p>
<h3 id="最后" class="mt-10 mb-2 leading-7 text-xl title_3b154">最后<a class="link_3b154 header-anchor" aria-hidden="true" href="#最后">#</a></h3>
<p class="my-4 leading-7">如果本文对你有帮助的话，给本文点个赞吧。</p>
<p class="my-4 leading-7"><a target="_blank" rel="noopener noreferrer" href="https://juejin.cn/post/6844904093463347208" class="link_03735  link_3b154 inline-link_3b154">带你深度解锁Webpack系列(优化篇)</a></p><!--/$--></div><div class="rspress-doc-footer"><footer class="mt-8"><div class="xs:flex pb-5 px-2 justify-end items-center"></div><div class="flex flex-col"></div><div class="flex flex-col sm:flex-row sm:justify-around gap-4 pt-6"><div class="prev_e7091 flex flex-col"></div><div class="next_e7091 flex flex-col"></div></div></footer></div></div></div><div class="aside-container_edeb4"><div><div class="flex flex-col"><div class="&lt;lg:hidden"><div id="aside-container" class="relative text-sm font-medium"><div class="leading-7 block text-sm font-semibold pl-3">ON THIS PAGE</div><nav class="mt-1"><ul class="relative"><li><a href="#1-静态资源拷贝" title="1. 静态资源拷贝" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">1. 静态资源拷贝</span></a></li><li><a href="#2provideplugin" title="2.ProvidePlugin" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">2.ProvidePlugin</span></a></li><li><a href="#3抽离css" title="3.抽离CSS" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">3.抽离CSS</span></a></li><li><a href="#将抽离出来的css文件进行压缩" title="将抽离出来的css文件进行压缩" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">将抽离出来的css文件进行压缩</span></a></li><li><a href="#4按需加载" title="4.按需加载" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">4.按需加载</span></a></li><li><a href="#5热更新" title="5.热更新" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">5.热更新</span></a></li><li><a href="#6多页应用打包" title="6.多页应用打包" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">6.多页应用打包</span></a></li><li><a href="#7resolve-配置" title="7.resolve 配置" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">7.resolve 配置</span></a></li><li><a href="#8区分不同的环境" title="8.区分不同的环境" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">8.区分不同的环境</span></a></li><li><a href="#9定义环境变量" title="9.定义环境变量" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">9.定义环境变量</span></a></li><li><a href="#10利用webpack解决跨域问题" title="10.利用webpack解决跨域问题" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">10.利用webpack解决跨域问题</span></a></li><li><a href="#配置代理" title="配置代理" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">配置代理</span></a></li><li><a href="#11前端模拟数据" title="11.前端模拟数据" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">11.前端模拟数据</span></a></li><li><a href="#最后" title="最后" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">最后</span></a></li></ul></nav></div></div></div></div></div></div></div></section></div></div>
  <div id="search-container"></div>
</body>

</html>
