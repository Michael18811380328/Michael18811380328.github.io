<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Rspress v1.38.0">
  <title data-rh="true">带你深度解锁Webpack系列(基础篇) 01 - 前端工程化</title><meta data-rh="true" name="description" content="介绍前端工程化常用工具"/>
<script>{;const saved = localStorage.getItem('rspress-theme-appearance');const preferDark = window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = !saved || saved === 'auto' ? preferDark : saved === 'dark';document.documentElement.classList.toggle('dark', isDark);document.documentElement.style.colorScheme = isDark ? 'dark' : 'light';}</script><script defer src="/site/webpack/site/static/js/styles.03324596.js"></script><script defer src="/site/webpack/site/static/js/lib-react.82d8ec79.js"></script><script defer src="/site/webpack/site/static/js/lib-router.fdbdb348.js"></script><script defer src="/site/webpack/site/static/js/index.35af798f.js"></script><link href="/site/webpack/site/static/css/styles.c26b7a64.css" rel="stylesheet"></head>

<body >
  <div id="root"><div><div class="navContainer_f6cde rspress-nav px-6 " style="position:sticky"><div class="container_f6cde flex justify-between items-center h-full"><div class="navBarTitle_f6cde"><a class="link_03735 flex items-center w-full h-full text-base font-semibold transition-opacity duration-300 hover:opacity-60 cursor-pointer" target="" href="/site/webpack/site/index.html"><span>前端工程化</span></a></div><div class="flex flex-1 justify-end items-center"><div class="rightNav_f6cde"><div class="flex sm:flex-1 items-center sm:pl-4 sm:pr-2"><div class="rspress-nav-search-button navSearchButton_6e282"><button><svg width="18" height="18" viewBox="0 0 32 32"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9Z"></path></svg><p class="searchWord_6e282">Search Docs</p><div style="opacity:0"><span></span><span>K</span></div></button></div><div class="mobileNavSearchButton_6e282"><svg width="24" height="24" viewBox="0 0 32 32"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9Z"></path></svg></div></div><div class="rspress-nav-menu menu h-14"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/index.html"><div class="rspress-nav-menu-item singleItem_f6cde activeItem_f6cde text-sm font-medium mx-1.5 px-3 py-2 flex items-center">首页</div></a><div class="mx-3 last:mr-0"><div class="relative flex-center h-14"><button class="rspress-nav-menu-group-button flex-center items-center font-medium text-sm text-text-1 hover:text-text-2 transition-colors duration-200"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/28-rollup完全入门指南.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">rollup<svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></div></a></button><div class="rspress-nav-menu-group-content absolute mx-0.8 transition-opacity duration-300" style="opacity:0;visibility:hidden;right:0;top:52px"><div class="p-3 pr-2 w-full h-full max-h-100vh whitespace-nowrap" style="box-shadow:var(--rp-shadow-3);z-index:100;border:1px solid var(--rp-c-divider-light);border-radius:var(--rp-radius-large);background:var(--rp-c-bg)"><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/demo01-note.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>Demo 01 Note</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/demo02-note.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>Demo 02 Note</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/demo03-note.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>Demo 03 Note</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/demo04-note.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>Demo 04 Note</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/28-rollup完全入门指南.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>rollup </span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/29-rollup打包工具基础配置使用详解.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>rollup </span></div></div></a></div></div></div></div></div></div><div class="mx-3 last:mr-0"><div class="relative flex-center h-14"><button class="rspress-nav-menu-group-button flex-center items-center font-medium text-sm text-text-1 hover:text-text-2 transition-colors duration-200"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/21-Babel is what.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">babel<svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></div></a></button><div class="rspress-nav-menu-group-content absolute mx-0.8 transition-opacity duration-300" style="opacity:0;visibility:hidden;right:0;top:52px"><div class="p-3 pr-2 w-full h-full max-h-100vh whitespace-nowrap" style="box-shadow:var(--rp-shadow-3);z-index:100;border:1px solid var(--rp-c-divider-light);border-radius:var(--rp-radius-large);background:var(--rp-c-bg)"><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/21-Babel is what.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>21-Babel is what</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/22-Babel Usage Guide.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>22-Babel Usage Guide</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/23-Babel-Configure.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>23-Babel-Configure</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/24-Babel-Learn ES2015.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>24-Babel-Learn ES2015</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/25-babel-preset-env.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>25-babel-preset-env使用指南</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/26-babel-preset-env 作用.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>26-babel-preset-env 作用</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/27-babel-plugin-transform-runtime 说明.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>27-babel-plugin-transform-runtime 说明</span></div></div></a></div></div></div></div></div></div><div class="mx-3 last:mr-0"><div class="relative flex-center h-14"><button class="rspress-nav-menu-group-button flex-center items-center font-medium text-sm text-text-1 hover:text-text-2 transition-colors duration-200"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/00-readme.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">webpack<svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></div></a></button><div class="rspress-nav-menu-group-content absolute mx-0.8 transition-opacity duration-300" style="opacity:0;visibility:hidden;right:0;top:52px"><div class="p-3 pr-2 w-full h-full max-h-100vh whitespace-nowrap" style="box-shadow:var(--rp-shadow-3);z-index:100;border:1px solid var(--rp-c-divider-light);border-radius:var(--rp-radius-large);background:var(--rp-c-bg)"><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/00-readme.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>00-readme</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/01-webpack基本概念.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>01-webpack基本概念</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/02-create-react-app入门教程.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>02-create-react-app入门教程</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/03-网易webpack配置解析.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>03-网易webpack配置解析</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/04-网易webpack编译原理分析.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>04-网易webpack编译原理分析</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/05-网易webpack的高级技巧.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>05-网易webpack的高级技巧</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/06-网易 webpack 打包工具使用.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>06-网易 webpack 打包工具使用</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/07-webpack 官方起步.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>07-webpack 官方起步</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/08-webpack5 和 webpack4 的区别有哪些.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>08-webpack5 和 webpack4 的区别有哪些</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/09-webpack主要概念.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>09-webpack主要概念</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/10-深度解锁Webpack系列(基础篇) 01.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>10-深度解锁Webpack系列(基础篇) 01</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/11-深度解锁Webpack系列(进阶篇)02.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>11-深度解锁Webpack系列(进阶篇)02</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/12-深度解锁Webpack系列(优化篇)03.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>12-深度解锁Webpack系列(优化篇)03</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/13-webpack5 SplitChunksPlugin 实用指南.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>13-webpack5 SplitChunksPlugin 实用指南</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/41-webpack更新版本后报错Starting the development server.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>41-webpack更新版本后报错Starting the development server</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/42-webpack设置devServer启动项目为https协议.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>42-webpack设置devServer启动项目为https协议</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/43-webpack 打包 antd-mobile 按需加载样式问题.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>43-webpack 打包 antd-mobile 按需加载样式问题</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/44-TS-React-Webpack.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>44-TS-React-Webpack</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/45-TS项目使用Webpack.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>45-TS项目使用Webpack</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/46-webpack 项目配置学习.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>46-webpack 项目配置学习</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/47-webpack 项目配置学习2.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>47-webpack 项目配置学习2</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/48-webpack 项目配置学习3.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>48-webpack 项目配置学习3</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/Preset files are not allowed to export objects.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>Preset files are not allowed to export objects</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/stalled-webpack3基本使用.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>stalled-webpack3基本使用</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/stalled-webpack4 babel配置文件.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>stalled-webpack4 babel配置文件</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/stalled-webpack4DevServer配置项.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>stalled-webpack4DevServer配置项</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/stalled-webpack4入门介绍.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>stalled-webpack4入门介绍</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/stalled-webpack4基本配置.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>stalled-webpack4基本配置</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/stalled-webpack4打包很慢处理.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>stalled-webpack4打包很慢处理</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/webpack-setting.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>webpack-setting</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/webpack04-01README.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>webpack04-01README</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/webpack04-02-README.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>webpack04-02-README</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/webpack04-03-README.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>webpack04-03-README</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/webpack3-readme.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>webpack3-readme</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件 mini-css-extract-plugin.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件 mini-css-extract-plugin</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件 react-webpack-template.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件 react-webpack-template</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件 webpack Code Splitting.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件 webpack Code Splitting</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件 webpack HappyPack多个进程处理loader.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件 webpack HappyPack多个进程处理loader</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件 webpack 常用插件.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件 webpack 常用插件</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件 webpack-howto.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件 webpack-howto</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件-HappyPack plugin for the loader could not be found.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件-HappyPack plugin for the loader could not be found</span></div></div></a></div></div></div></div></div></div></div><div class="flex-center flex-row"><div class="mx-2"><div class="md:mr-2 rspress-nav-appearance"><div class="p-1 border border-solid border-gray-300 text-gray-400  cursor-pointer rounded-md hover:border-gray-600 hover:text-gray-600 dark:hover:border-gray-200 dark:hover:text-gray-200 transition-all duration-300 w-7 h-7"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" class="dark:hidden" width="18" height="18" fill="currentColor"><path d="M12 18c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6zm0-10c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zM12 4c-.6 0-1-.4-1-1V1c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zM12 24c-.6 0-1-.4-1-1v-2c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zM5.6 6.6c-.3 0-.5-.1-.7-.3L3.5 4.9c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.1.2-.4.3-.7.3zM19.8 20.8c-.3 0-.5-.1-.7-.3l-1.4-1.4c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.2.2-.5.3-.7.3zM3 13H1c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zM23 13h-2c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zM4.2 20.8c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.4.3-.7.3zM18.4 6.6c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.5.3-.7.3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" class="hidden dark:block" width="18" height="18" fill="currentColor"><path d="M12.1 22h-.9c-5.5-.5-9.5-5.4-9-10.9.4-4.8 4.2-8.6 9-9 .4 0 .8.2 1 .5.2.3.2.8-.1 1.1-2 2.7-1.4 6.4 1.3 8.4 2.1 1.6 5 1.6 7.1 0 .3-.2.7-.3 1.1-.1.3.2.5.6.5 1-.2 2.7-1.5 5.1-3.6 6.8-1.9 1.4-4.1 2.2-6.4 2.2zM9.3 4.4c-2.9 1-5 3.6-5.2 6.8-.4 4.4 2.8 8.3 7.2 8.7 2.1.2 4.2-.4 5.8-1.8 1.1-.9 1.9-2.1 2.4-3.4-2.5.9-5.3.5-7.5-1.1-2.8-2.2-3.9-5.9-2.7-9.2z"></path></svg></div></div></div></div></div><div class="mobileNavMenu_f6cde"><div class="navScreen_457e8 " id="navScreen"><div class="container_457e8"><div class="navMenu_457e8"><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/index.html"><div class="rspress-nav-menu-item singleItem_f6cde activeItem_f6cde text-sm font-medium mx-1.5 px-3 py-2 flex items-center">首页</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/28-rollup完全入门指南.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">rollup</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/21-Babel is what.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">babel</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/00-readme.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">webpack</div></a></div></div><div class="flex-center flex-col gap-2"><div class="mt-2 navAppearance_457e8 flex justify-center"></div></div></div></div><button aria-label="mobile hamburger" class=" navHamburger_e7b06 text-gray-500"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="currentColor"><circle cx="8" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="24" cy="16" r="2" fill="currentColor"></circle></svg></button></div></div></div></div><section><div class="docLayout_edeb4 pt-0"><div class="rspress-sidebar-menu"><button class="flex-center ml-auto"><span class="text-sm">ON THIS PAGE</span><div class="text-md mr-2" style="transform:rotate(0deg);transition:transform 0.2s ease-out;margin-top:2px"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></button><div class="rspress-local-toc-container "><ul><li><a href="#1webpack-是什么" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">1.webpack 是什么？</span></a></li><li><a href="#2webpack-的核心概念" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">2.webpack 的核心概念</span></a></li><li><a href="#3初始化项目" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">3.初始化项目</span></a></li><li><a href="#4将js转义为低版本" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">4.将JS转义为低版本</span></a></li><li><a href="#babel-loader" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">babel-loader</span></a></li><li><a href="#创建一个-babelrc" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">创建一个 .babelrc</span></a></li><li><a href="#在webpack中配置-babel" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">在webpack中配置 babel</span></a></li><li><a href="#5mode" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">5.mode</span></a></li><li><a href="#6在浏览器中查看页面" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">6.在浏览器中查看页面</span></a></li><li><a href="#html-webpack-plugin-的-config-的妙用" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">html-webpack-plugin 的 config 的妙用</span></a></li><li><a href="#如何在浏览器中实时展示效果" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">如何在浏览器中实时展示效果</span></a></li><li><a href="#7devtool" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">7.devtool</span></a></li><li><a href="#8如何处理样式文件呢" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">8.如何处理样式文件呢</span></a></li><li><a href="#9图片字体文件处理" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">9.图片/字体文件处理</span></a></li><li><a href="#10处理-html-中的本地图片" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">10.处理 html 中的本地图片</span></a></li><li><a href="#11入口配置" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">11.入口配置</span></a></li><li><a href="#12出口配置" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">12.出口配置</span></a></li><li><a href="#13每次打包前清空dist目录" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">13.每次打包前清空dist目录</span></a></li><li><a href="#希望dist目录下某个文件夹不被清空" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">希望dist目录下某个文件夹不被清空</span></a></li><li><a href="#最后" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">最后</span></a></li></ul></div></div><div class="content_edeb4 rspress-doc-container flex flex-shrink-0 mx-auto"><div class="w-full flex-1"><div><div class="rspress-doc"><!--$--><h1 id="带你深度解锁webpack系列基础篇-01" class="text-3xl mb-10 leading-10 tracking-tight title_3b154">带你深度解锁Webpack系列(基础篇) 01<a class="link_3b154 header-anchor" aria-hidden="true" href="#带你深度解锁webpack系列基础篇-01">#</a></h1>
<p class="my-4 leading-7">统计信息：字数 33009  阅读67分钟</p>
<p class="my-4 leading-7">create time 2024-04-12</p>
<p class="my-4 leading-7">last modify time 2024-04-12</p>
<p class="my-4 leading-7">掘金</p>
<p class="my-4 leading-7"><a target="_blank" rel="noopener noreferrer" href="https://juejin.cn/user/3368559358523944/posts" class="link_03735  link_3b154 inline-link_3b154">无名之苝</a></p>
<p class="my-4 leading-7">2020-03-0947,221阅读15分钟</p>
<p class="my-4 leading-7">三篇长文带你解锁 <code>Webpack</code> ，希望读完这三篇文章，你能够对 <code>webpack</code> 的各项配置有一个更为清晰的认识。</p>
<h3 id="1webpack-是什么" class="mt-10 mb-2 leading-7 text-xl title_3b154">1.webpack 是什么？<a class="link_3b154 header-anchor" aria-hidden="true" href="#1webpack-是什么">#</a></h3>
<p class="my-4 leading-7"><code>webpack</code> 是一个现代 <code>JavaScript</code> 应用程序的静态模块打包器，当 <code>webpack</code> 处理应用程序时，会递归构建一个依赖关系图，其中包含应用程序需要的每个模块，然后将这些模块打包成一个或多个 <code>bundle</code>。</p>
<h3 id="2webpack-的核心概念" class="mt-10 mb-2 leading-7 text-xl title_3b154">2.webpack 的核心概念<a class="link_3b154 header-anchor" aria-hidden="true" href="#2webpack-的核心概念">#</a></h3>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">entry: 入口</li>
<li class="[&amp;:not(:first-child)]:mt-2">output: 输出</li>
<li class="[&amp;:not(:first-child)]:mt-2">loader: 模块转换器，用于把模块原内容按照需求转换成新内容</li>
<li class="[&amp;:not(:first-child)]:mt-2">插件(plugins): 扩展插件，在webpack构建流程中的特定时机注入扩展逻辑来改变构建结果或做你想要做的事情</li>
</ul>
<h3 id="3初始化项目" class="mt-10 mb-2 leading-7 text-xl title_3b154">3.初始化项目<a class="link_3b154 header-anchor" aria-hidden="true" href="#3初始化项目">#</a></h3>
<p class="my-4 leading-7">新建一个文件夹，如: <code>webpack-first</code> (当然，你可以使用任意一个你喜欢的项目名)。推荐大家参考本文一步一步进行配置，不要总是在网上找什么最佳配置，你掌握了<code>webpack</code>之后，根据自己的需求配置出来的，就是最佳配置。</p>
<p class="my-4 leading-7">本篇文章对应的项目地址(编写本文时使用): <a target="_blank" rel="noopener noreferrer" href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FYvetteLau%2Fwebpack%2Ftree%2Fmaster%2Fwebpack-first" class="link_03735  link_3b154 inline-link_3b154">github.com/YvetteLau/w…</a></p>
<p class="my-4 leading-7">使用 <code>npm init -y</code> 进行初始化(也可以使用 <code>yarn</code>)。</p>
<p class="my-4 leading-7">要使用 <code>webpack</code>，那么必然需要安装 <code>webpack</code>、<code>webpack-cli</code>:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>npm install webpack webpack-cli -D
</code></div></div>
<p class="my-4 leading-7">鉴于前端技术变更迅速，祭出本篇文章基于 <code>webpack</code> 的版本号:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>├── webpack@4.41.5 
└── webpack-cli@3.3.10 
</code></div></div>
<p class="my-4 leading-7">从 <code>wepack V4.0.0</code> 开始， <code>webpack</code> 是开箱即用的，在不引入任何配置文件的情况下就可以使用。</p>
<p class="my-4 leading-7">新建 <code>src/index.js</code> 文件，我们在文件中随便写点什么:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//index.js
class Animal {
    constructor(name) {
        this.name = name;
    }
    getName() {
        return this.name;
    }
}

const dog = new Animal(&#x27;dog&#x27;);
</code></div></div>
<p class="my-4 leading-7">使用 <code>npx webpack --mode=development</code> 进行构建，默认是 <code>production</code> 模式，我们为了更清楚得查看打包后的代码，使用 <code>development</code> 模式。</p>
<p class="my-4 leading-7">可以看到项目下多了个 <code>dist</code> 目录，里面有一个打包出来的文件 <code>main.js</code>。</p>
<p class="my-4 leading-7"><code>webpack</code> 有默认的配置，如默认的入口文件是 <code>./src</code>，默认打包到<code>dist/main.js</code>。更多的默认配置可以查看: <code>node_modules/webpack/lib/WebpackOptionsDefaulter.js</code>。</p>
<p class="my-4 leading-7">查看 <code>dist/main.js</code> 文件，可以看到，<code>src/index.js</code> 并没有被转义为低版本的代码，这显然不是我们想要的。</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>{
    &quot;./src/index.js&quot;:
        (function (module, exports) {

            eval(&quot;class Animal {\n    constructor(name) {\n        this.name = name;\n    }\n    getName() {\n        return this.name;\n    }\n}\n\nconst dog = new Animal(&#x27;dog&#x27;);\n\n//# sourceURL=webpack:///./src/index.js?&quot;);

        })
}
</code></div></div>
<h3 id="4将js转义为低版本" class="mt-10 mb-2 leading-7 text-xl title_3b154">4.将JS转义为低版本<a class="link_3b154 header-anchor" aria-hidden="true" href="#4将js转义为低版本">#</a></h3>
<p class="my-4 leading-7">前面我们说了 <code>webpack</code> 的四个核心概念，其中之一就是 <code>loader</code>，<code>loader</code> 用于对源代码进行转换，这正是我们现在所需要的。</p>
<p class="my-4 leading-7">将JS代码向低版本转换，我们需要使用 <code>babel-loader</code>。</p>
<h4 id="babel-loader" class="mt-8 leading-6 text-lg title_3b154">babel-loader<a class="link_3b154 header-anchor" aria-hidden="true" href="#babel-loader">#</a></h4>
<p class="my-4 leading-7">首先安装一下 <code>babel-loader</code></p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>npm install babel-loader -D
</code></div></div>
<p class="my-4 leading-7">此外，我们还需要配置 <code>babel</code>，为此我们安装一下以下依赖:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>npm install @babel/core @babel/preset-env @babel/plugin-transform-runtime -D

npm install @babel/runtime @babel/runtime-corejs3
</code></div></div>
<p class="my-4 leading-7">对babel7配置不熟悉的小伙伴，可以阅读一下这篇文章: <a target="_blank" rel="noopener noreferrer" href="https://juejin.cn/post/6844904008679686152" class="link_03735  link_3b154 inline-link_3b154">不可错过的 Babel7 知识</a></p>
<p class="my-4 leading-7">新建 <code>webpack.config.js</code>，如下:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//webpack.config.js
module.exports = {
    module: {
        rules: [
            {
                test: /\.jsx?$/,
                use: [&#x27;babel-loader&#x27;],
                exclude: /node_modules/ //排除 node_modules 目录
            }
        ]
    }
}
</code></div></div>
<p class="my-4 leading-7">建议给 <code>loader</code> 指定 <code>include</code> 或是 <code>exclude</code>，指定其中一个即可，因为 <code>node_modules</code> 目录通常不需要我们去编译，排除后，有效提升编译效率。</p>
<p class="my-4 leading-7">这里，我们可以在 <code>.babelrc</code> 中编写 <code>babel</code> 的配置，也可以在 <code>webpack.config.js</code> 中进行配置。</p>
<h4 id="创建一个-babelrc" class="mt-8 leading-6 text-lg title_3b154">创建一个 .babelrc<a class="link_3b154 header-anchor" aria-hidden="true" href="#创建一个-babelrc">#</a></h4>
<p class="my-4 leading-7">配置如下：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>{
    &quot;presets&quot;: [&quot;@babel/preset-env&quot;],
    &quot;plugins&quot;: [
        [
            &quot;@babel/plugin-transform-runtime&quot;,
            {
                &quot;corejs&quot;: 3
            }
        ]
    ]
}
</code></div></div>
<p class="my-4 leading-7">现在，我们重新执行  <code>npx webpack --mode=development</code>，查看 <code>dist/main.js</code>，会发现已经被编译成了低版本的JS代码。</p>
<h4 id="在webpack中配置-babel" class="mt-8 leading-6 text-lg title_3b154">在webpack中配置 babel<a class="link_3b154 header-anchor" aria-hidden="true" href="#在webpack中配置-babel">#</a></h4>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//webpack.config.js
module.exports = {
    // mode: &#x27;development&#x27;,
    module: {
        rules: [
            {
                test: /\.jsx?$/,
                use: {
                    loader: &#x27;babel-loader&#x27;,
                    options: {
                        presets: [&quot;@babel/preset-env&quot;],
                        plugins: [
                            [
                                &quot;@babel/plugin-transform-runtime&quot;,
                                {
                                    &quot;corejs&quot;: 3
                                }
                            ]
                        ]
                    }
                },
                exclude: /node_modules/
            }
        ]
    }
}
</code></div></div>
<p class="my-4 leading-7">这里有几点需要说明：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><code>loader</code> 需要配置在 <code>module.rules</code> 中，<code>rules</code> 是一个数组。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>loader</code> 的格式为:</li>
</ul>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>{
    test: /\.jsx?$/,//匹配规则
    use: &#x27;babel-loader&#x27;
}
</code></div></div>
<p class="my-4 leading-7">或者也可以像下面这样:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//适用于只有一个 loader 的情况
{
    test: /\.jsx?$/,
    loader: &#x27;babel-loader&#x27;,
    options: {
        //...
    }
}
</code></div></div>
<p class="my-4 leading-7"><code>test</code> 字段是匹配规则，针对符合规则的文件进行处理。</p>
<p class="my-4 leading-7"><code>use</code> 字段有几种写法</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">可以是一个字符串，例如上面的 <code>use: &#x27;babel-loader&#x27;</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>use</code> 字段可以是一个数组，例如处理CSS文件是，<code>use: [&#x27;style-loader&#x27;, &#x27;css-loader&#x27;]</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>use</code> 数组的每一项既可以是字符串也可以是一个对象，当我们需要在<code>webpack</code> 的配置文件中对 <code>loader</code> 进行配置，就需要将其编写为一个对象，并且在此对象的 <code>options</code> 字段中进行配置，如：</li>
</ul>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>rules: [
    {
        test: /\.jsx?$/,
        use: {
            loader: &#x27;babel-loader&#x27;,
            options: {
                presets: [&quot;@babel/preset-env&quot;]
            }
        },
        exclude: /node_modules/
    }
]
</code></div></div>
<p class="my-4 leading-7">上面我们说了如何将JS的代码编译成向下兼容的代码，当然你可以还需要一些其它的 <code>babel</code> 的插件和预设，例如 <code>@babel/preset-react</code>，<code>@babel/plugin-proposal-optional-chaining</code> 等，不过，<code>babel</code> 的配置并非本文的重点，我们继续往下。</p>
<p class="my-4 leading-7">不要说细心的小伙伴了，即使是粗心的小伙伴肯定也发现了，我们在使用 <code>webpack</code> 进行打包的时候，一直运行的都是 <code>npx webpack --mode=development</code> 是否可以将 <code>mode</code> 配置在 <code>webpack.config.js</code> 中呢？显然是可以的。</p>
<h3 id="5mode" class="mt-10 mb-2 leading-7 text-xl title_3b154">5.mode<a class="link_3b154 header-anchor" aria-hidden="true" href="#5mode">#</a></h3>
<p class="my-4 leading-7">将 <code>mode</code> 增加到 <code>webpack.config.js</code> 中:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>module.exports = {
    //....
    mode: &quot;development&quot;,
    module: {
        //...
    }
}
</code></div></div>
<p class="my-4 leading-7"><code>mode</code> 配置项，告知 <code>webpack</code> 使用相应模式的内置优化。</p>
<p class="my-4 leading-7"><code>mode</code> 配置项，支持以下两个配置:</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><code>development</code>：将 <code>process.env.NODE_ENV</code> 的值设置为 <code>development</code>，启用 <code>NamedChunksPlugin</code> 和 <code>NamedModulesPlugin</code></li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>production</code>：将 <code>process.env.NODE_ENV</code> 的值设置为 <code>production</code>，启用 <code>FlagDependencyUsagePlugin</code>, <code>FlagIncludedChunksPlugin</code>, <code>ModuleConcatenationPlugin</code>, <code>NoEmitOnErrorsPlugin</code>, <code>OccurrenceOrderPlugin</code>, <code>SideEffectsFlagPlugin</code> 和 <code>UglifyJsPlugin</code></li>
</ul>
<p class="my-4 leading-7">现在，我们直接使用 <code>npx webpack</code> 进行编译即可。</p>
<h3 id="6在浏览器中查看页面" class="mt-10 mb-2 leading-7 text-xl title_3b154">6.在浏览器中查看页面<a class="link_3b154 header-anchor" aria-hidden="true" href="#6在浏览器中查看页面">#</a></h3>
<p class="my-4 leading-7">搞了这么久，还不能在浏览器中查看页面，这显然不能忍！</p>
<p class="my-4 leading-7">查看页面，难免就需要 <code>html</code> 文件，有小伙伴可能知道，有时我们会指定打包文件中带有 <code>hash</code>，那么每次生成的 <code>js</code> 文件名会有所不同，总不能让我们每次都人工去修改 <code>html</code>，这样不是显得我们很蠢嘛~</p>
<p class="my-4 leading-7">我们可以使用 <code>html-webpack-plugin</code> 插件来帮助我们完成这些事情。</p>
<p class="my-4 leading-7">首先，安装一下插件:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>npm install html-webpack-plugin -D 
</code></div></div>
<p class="my-4 leading-7">新建 <code>public</code> 目录，并在其中新建一个 <code>index.html</code> 文件( 文件内容使用 <code>html:5</code> 快捷生成即可)</p>
<p class="my-4 leading-7">修改 <code>webpack.config.js</code> 文件。</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//首先引入插件
const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);
module.exports = {
    //...
    plugins: [
        //数组 放着所有的webpack插件
        new HtmlWebpackPlugin({
            template: &#x27;./public/index.html&#x27;,
            filename: &#x27;index.html&#x27;, //打包后的文件名
            minify: {
                removeAttributeQuotes: false, //是否删除属性的双引号
                collapseWhitespace: false, //是否折叠空白
            },
            // hash: true //是否加上hash，默认是 false
        })
    ]
}
</code></div></div>
<p class="my-4 leading-7">此时执行 <code>npx webpack</code>，可以看到 <code>dist</code> 目录下新增了 <code>index.html</code> 文件，并且其中自动插入了 <code>&lt;script&gt;</code> 脚本，引入的是我们打包之后的 js 文件。</p>
<p class="my-4 leading-7">这里要多说一点点东西，<code>HtmlWebpackPlugin</code> 还为我们提供了一个 <code>config</code> 的配置，这个配置可以说是非常有用了。</p>
<h4 id="html-webpack-plugin-的-config-的妙用" class="mt-8 leading-6 text-lg title_3b154">html-webpack-plugin 的 config 的妙用<a class="link_3b154 header-anchor" aria-hidden="true" href="#html-webpack-plugin-的-config-的妙用">#</a></h4>
<p class="my-4 leading-7">有时候，我们的脚手架不仅仅给自己使用，也许还提供给其它业务使用，<code>html</code> 文件的可配置性可能很重要，比如：你公司有专门的部门提供M页的公共头部/公共尾部，埋点jssdk以及分享的jssdk等等，但是不是每个业务都需要这些内容。</p>
<p class="my-4 leading-7">一个功能可能对应多个 <code>js</code> 或者是 <code>css</code> 文件，如果每次都是业务自行修改 <code>public/index.html</code> 文件，也挺麻烦的。首先他们得搞清楚每个功能需要引入的文件，然后才能对 <code>index.html</code> 进行修改。</p>
<p class="my-4 leading-7">此时我们可以增加一个配置文件，业务通过设置 <code>true</code> 或 <code>false</code> 来选出自己需要的功能，我们再根据配置文件的内容，为每个业务生成相应的 <code>html</code> 文件，岂不是美美的。</p>
<p class="my-4 leading-7">Let&#x27;s Go!</p>
<p class="my-4 leading-7">首先，我们在 <code>public</code> 目录下新增一个 <code>config.js</code> ( 文件名你喜欢叫什么就叫什么 )，将其内容设置为:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//public/config.js 除了以下的配置之外，这里面还可以有许多其他配置，例如,pulicPath 的路径等等
module.exports = {
    dev: {
        template: {
            title: &#x27;你好&#x27;,
            header: false,
            footer: false
        }
    },
    build: {
        template: {
            title: &#x27;你好才怪&#x27;,
            header: true,
            footer: false
        }
    }
}
</code></div></div>
<p class="my-4 leading-7">现在，我们修改下我们的 <code>webpack.config.js</code>:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//webpack.config.js
const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;);
const isDev = process.env.NODE_ENV === &#x27;development&#x27;;
const config = require(&#x27;./public/config&#x27;)[isDev ? &#x27;dev&#x27; : &#x27;build&#x27;];

modue.exports = {
    //...
    mode: isDev ? &#x27;development&#x27; : &#x27;production&#x27;
    plugins: [
        new HtmlWebpackPlugin({
            template: &#x27;./public/index.html&#x27;,
            filename: &#x27;index.html&#x27;, //打包后的文件名
            config: config.template
        })
    ]
}
</code></div></div>
<p class="my-4 leading-7">相应的，我们需要修改下我们的 <code>public/index.html</code> 文件(嵌入的js和css并不存在，仅作为示意)：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;
    &lt;% if(htmlWebpackPlugin.options.config.header) { %&gt;
    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;//common/css/header.css&quot;&gt;
    &lt;% } %&gt;
    &lt;title&gt;&lt;%= (htmlWebpackPlugin.options.config.title) %&gt;&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
&lt;/body&gt; 
&lt;% if(htmlWebpackPlugin.options.config.header) { %&gt;
&lt;script src=&quot;//common/header.min.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt; 
&lt;% } %&gt;
&lt;/html&gt;
</code></div></div>
<p class="my-4 leading-7"><code>process.env</code> 中默认并没有 <code>NODE_ENV</code>，这里配置下我们的 <code>package.json</code> 的 <code>scripts</code>.</p>
<p class="my-4 leading-7">为了兼容Windows和Mac，我们先安装一下 <code>cross-env</code>:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>npm install cross-env -D
{
    &quot;scripts&quot;: {
        &quot;dev&quot;: &quot;cross-env NODE_ENV=development webpack&quot;,
        &quot;build&quot;: &quot;cross-env NODE_ENV=production webpack&quot;
    }
}
</code></div></div>
<p class="my-4 leading-7">然后我们运行 <code>npm run dev</code> 和 运行 <code>npm run build</code> ，对比下 <code>dist/index.html</code> ，可以看到 <code>npm run build</code>，生成的 <code>index.html</code> 文件中引入了对应的 <code>css</code> 和 <code>js</code>。并且对应的 <code>title</code> 内容也不一样。</p>
<p class="my-4 leading-7">你说这里是不是非得是用 <code>NODE_ENV</code> 去判断？当然不是咯，你写 <code>aaa=1</code> ，<code>aaa=2</code> 都行（当然啦，<code>webpack.config.js</code> 和 <code>scripts</code> 都需要进行相应修改），但是可能会被后面接手的人打死。</p>
<p class="my-4 leading-7">更多<a target="_blank" rel="noopener noreferrer" href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjantimon%2Fhtml-webpack-plugin%23configuration" class="link_03735  link_3b154 inline-link_3b154">html-webpack-plugin配置项</a></p>
<h4 id="如何在浏览器中实时展示效果" class="mt-8 leading-6 text-lg title_3b154">如何在浏览器中实时展示效果<a class="link_3b154 header-anchor" aria-hidden="true" href="#如何在浏览器中实时展示效果">#</a></h4>
<p class="my-4 leading-7">说了这么多，到现在还没能在浏览器中实时查看效果，是不是已经有点捉急了，先看一下如何实时查看效果吧，不然都不知道自己配得对不对。</p>
<p class="my-4 leading-7">话不多说，先装依赖:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>npm install webpack-dev-server -D
</code></div></div>
<p class="my-4 leading-7">修改下咱们的 <code>package.json</code> 文件的 <code>scripts</code>：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>&quot;scripts&quot;: {
    &quot;dev&quot;: &quot;cross-env NODE_ENV=development webpack-dev-server&quot;,
    &quot;build&quot;: &quot;cross-env NODE_ENV=production webpack&quot;
},
</code></div></div>
<p class="my-4 leading-7">在控制台执行 <code>npm run dev</code>，启动正常，页面上啥也没有，修改下我们的JS代码，往页面中增加点内容，正常刷新(也就是说不需要进行任何配置就可以使用了)。</p>
<p class="my-4 leading-7">Excuse me。怪我平时不认真咯，每次都乖乖的配个 <code>contentBase</code>，原来根本不需要配，带着疑问，我又去搜寻了一番。</p>
<p class="my-4 leading-7">原来在配置了 <code>html-webpack-plugin</code> 的情况下， <code>contentBase</code> 不会起任何作用，也就是说我以前都是白配了，这是一个悲伤的故事。</p>
<p class="my-4 leading-7">不过呢，我们还是可以在 <code>webpack.config.js</code> 中进行 <code>webpack-dev-server</code> 的其它配置，例如指定端口号，设置浏览器控制台消息，是否压缩等等:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//webpack.config.js
module.exports = {
    //...
    devServer: {
        port: &#x27;3000&#x27;, //默认是8080
        quiet: false, //默认不启用
        inline: true, //默认开启 inline 模式，如果设置为false,开启 iframe 模式
        stats: &quot;errors-only&quot;, //终端仅打印 error
        overlay: false, //默认不启用
        clientLogLevel: &quot;silent&quot;, //日志等级
        compress: true //是否启用 gzip 压缩
    }
}
</code></div></div>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">启用 <code>quiet</code> 后，除了初始启动信息之外的任何内容都不会被打印到控制台。这也意味着来自 <code>webpack</code> 的错误或警告在控制台不可见 ———— 我是不会开启这个的，看不到错误日志，还搞个锤子</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7"><code>stats</code>: &quot;errors-only&quot; ， 终端中仅打印出 <code>error</code>，注意当启用了 <code>quiet</code> 或者是 <code>noInfo</code> 时，此属性不起作用。 ————— 这个属性个人觉得很有用，尤其是我们启用了 <code>eslint</code> 或者使用 <code>TS</code>进行开发的时候，太多的编译信息在终端中，会干扰到我们。</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">启用 <code>overlay</code> 后，当编译出错时，会在浏览器窗口全屏输出错误，默认是关闭的。</p>
</li>
</ul>
<p class="my-4 leading-7"><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/2/17098ee5021b37bd~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" alt="img"/></p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7"><code>clientLogLevel</code>: 当使用内联模式时，在浏览器的控制台将显示消息，如：在重新加载之前，在一个错误之前，或者模块热替换启用时。如果你不喜欢看这些信息，可以将其设置为 <code>silent</code> (<code>none</code> 即将被移除)。</p>
</li>
</ul>
<p class="my-4 leading-7"><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/2/17098ee5021f55a7~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" alt="img"/></p>
<p class="my-4 leading-7">本篇文章不是为了细说 <code>webpack-dev-server</code> 的配置，所以这里就不多说了。关于 <code>webpack-dev-server</code> 更多的配置可以<a target="_blank" rel="noopener noreferrer" href="https://link.juejin.cn?target=https%3A%2F%2Fwebpack.js.org%2Fconfiguration%2Fdev-server%2F" class="link_03735  link_3b154 inline-link_3b154">点击查看</a>。</p>
<p class="my-4 leading-7">细心的小伙伴可能发现了一个小问题，我们在<code>src/index.js</code>中增加一句 <code>console.log(&#x27;aaa&#x27;)</code>：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>class Animal {
    constructor(name) {
        this.name = name;
    }
    getName() {
        return this.name;
    }
}

const dog = new Animal(&#x27;dog&#x27;);
console.log(&#x27;aaa&#x27;);
</code></div></div>
<p class="my-4 leading-7">然后通过 <code>npm run dev</code> 查看效果，会发现：</p>
<p class="my-4 leading-7"><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/2/17098ee5022db15f~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" alt="img"/></p>
<p class="my-4 leading-7">这显然不是我们源码中对应的行号，点进去的话，会发现代码是被编译后的，我当前的代码非常简单，还能看出来，项目代码复杂后，“亲妈”看编译后都费劲，这不利于我们开发调试，不是我们想要的，我们肯定还是希望能够直接对应到源码的。</p>
<h3 id="7devtool" class="mt-10 mb-2 leading-7 text-xl title_3b154">7.devtool<a class="link_3b154 header-anchor" aria-hidden="true" href="#7devtool">#</a></h3>
<p class="my-4 leading-7"><code>devtool</code> 中的一些设置，可以帮助我们将编译后的代码映射回原始源代码。不同的值会明显影响到构建和重新构建的速度。</p>
<p class="my-4 leading-7">对我而言，能够定位到源码的行即可，因此，综合构建速度，在开发模式下，我设置的 <code>devtool</code> 的值是 <code>cheap-module-eval-source-map</code>。</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//webpack.config.js
module.exports = {
    devtool: &#x27;cheap-module-eval-source-map&#x27; //开发环境下使用
}
</code></div></div>
<p class="my-4 leading-7">生产环境可以使用 <code>none</code> 或者是 <code>source-map</code>，使用 <code>source-map</code> 最终会单独打包出一个 <code>.map</code> 文件，我们可以根据报错信息和此 <code>map</code> 文件，进行错误解析，定位到源代码。</p>
<p class="my-4 leading-7"><code>source-map</code> 和 <code>hidden-source-map</code> 都会打包生成单独的 <code>.map</code> 文件，区别在于，<code>source-map</code> 会在打包出的js文件中增加一个引用注释，以便开发工具知道在哪里可以找到它。<code>hidden-source-map</code> 则不会在打包的js中增加引用注释。</p>
<p class="my-4 leading-7">但是我们一般不会直接将 <code>.map</code> 文件部署到CDN，因为会直接映射到源码，更希望将<code>.map</code> 文件传到错误解析系统，然后根据上报的错误信息，直接解析到出错的源码位置。</p>
<p class="my-4 leading-7">还可以设置其他的<a target="_blank" rel="noopener noreferrer" href="https://link.juejin.cn?target=http%3A%2F%2Fwebpack.html.cn%2Fconfiguration%2Fdevtool.html" class="link_03735  link_3b154 inline-link_3b154">devtool值</a>，你可以使用不同的值，构建对比差异。</p>
<p class="my-4 leading-7">现在我们已经说了 <code>html</code>、<code>js</code> 了，并且也可以在浏览器中实时看到效果了，现在就不得不说页面开发三巨头之一的 <code>css</code> 。</p>
<h3 id="8如何处理样式文件呢" class="mt-10 mb-2 leading-7 text-xl title_3b154">8.如何处理样式文件呢<a class="link_3b154 header-anchor" aria-hidden="true" href="#8如何处理样式文件呢">#</a></h3>
<p class="my-4 leading-7"><code>webpack</code> 不能直接处理 <code>css</code>，需要借助 <code>loader</code>。如果是 <code>.css</code>，我们需要的 <code>loader</code> 通常有： <code>style-loader</code>、<code>css-loader</code>，考虑到兼容性问题，还需要 <code>postcss-loader</code>，而如果是 <code>less</code> 或者是 <code>sass</code> 的话，还需要 <code>less-loader</code> 和 <code>sass-loader</code>，这里配置一下 <code>less</code> 和 <code>css</code> 文件(<code>sass</code> 的话，使用 <code>sass-loader</code>即可):</p>
<p class="my-4 leading-7">先安装一下需要使用的依赖:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>npm install style-loader less-loader css-loader postcss-loader autoprefixer less -D
//webpack.config.js
module.exports = {
    //...
    module: {
        rules: [
            {
                test: /\.(le|c)ss$/,
                use: [&#x27;style-loader&#x27;, &#x27;css-loader&#x27;, {
                    loader: &#x27;postcss-loader&#x27;,
                    options: {
                        plugins: function () {
                            return [
                                require(&#x27;autoprefixer&#x27;)({
                                    &quot;overrideBrowserslist&quot;: [
                                        &quot;&gt;0.25%&quot;,
                                        &quot;not dead&quot;
                                    ]
                                })
                            ]
                        }
                    }
                }, &#x27;less-loader&#x27;],
                exclude: /node_modules/
            }
        ]
    }
}
</code></div></div>
<p class="my-4 leading-7">测试一下，新建一个 <code>less</code> 文件，<code>src/index.less</code>:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//src/index.less
@color: red;
body{
    background: @color;
    transition: all 2s;
}
</code></div></div>
<p class="my-4 leading-7">再在入口文件中引入此 <code>less</code>:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//src/index.js
import &#x27;./index.less&#x27;;
</code></div></div>
<p class="my-4 leading-7">我们修改了配置文件，重新启动一下服务: <code>npm run dev</code>。可以看到页面的背景色变成了红色。</p>
<p class="my-4 leading-7">OK，我们简单说一下上面的配置：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><code>style-loader</code> 动态创建 <code>style</code> 标签，将 <code>css</code> 插入到 <code>head</code> 中.</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>css-loader</code> 负责处理 <code>@import</code> 等语句。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>postcss-loader</code> 和 <code>autoprefixer</code>，自动生成浏览器兼容性前缀 —— 2020了，应该没人去自己徒手去写浏览器前缀了吧</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>less-loader</code> 负责处理编译 <code>.less</code> 文件,将其转为 <code>css</code></li>
</ul>
<p class="my-4 leading-7">这里，我们之间在 <code>webpack.config.js</code> 写了 <code>autoprefixer</code> 需要兼容的浏览器，仅是为了方便展示。推荐大家在根目录下创建 <code>.browserslistrc</code>，将对应的规则写在此文件中，除了 <code>autoprefixer</code> 使用外，<code>@babel/preset-env</code>、<code>stylelint</code>、<code>eslint-plugin-conmpat</code> 等都可以共用。</p>
<p class="my-4 leading-7"><strong class="font-semibold">注意：</strong></p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>loader` 的执行顺序是从右向左执行的，也就是后面的 `loader` 先执行，上面 `loader` 的执行顺序为: `less-loader` ---&gt; `postcss-loader` ---&gt; `css-loader` ---&gt; `style-loader
</code></div></div>
<p class="my-4 leading-7">当然，<code>loader</code> 其实还有一个参数，可以修改优先级，<code>enforce</code> 参数，其值可以为: <code>pre</code>(优先执行) 或 <code>post</code> (滞后执行)。</p>
<p class="my-4 leading-7">现在，我们已经可以处理 <code>.less</code> 文件啦，<code>.css</code> 文件只需要修改匹配规则，删除 <code>less-loader</code> 即可。</p>
<p class="my-4 leading-7">现在的一切看起来都很完美，但是假设我们的文件中使用了本地的图片，例如:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>body{
    background: url(&#x27;../images/thor.png&#x27;);
}
</code></div></div>
<p class="my-4 leading-7">你就会发现，报错啦啦啦，那么我们要怎么处理图片或是本地的一些其它资源文件呢。不用想，肯定又需要 <code>loader</code> 出马了。</p>
<h3 id="9图片字体文件处理" class="mt-10 mb-2 leading-7 text-xl title_3b154">9.图片/字体文件处理<a class="link_3b154 header-anchor" aria-hidden="true" href="#9图片字体文件处理">#</a></h3>
<p class="my-4 leading-7">我们可以使用 <code>url-loader</code> 或者 <code>file-loader</code> 来处理本地的资源文件。<code>url-loader</code> 和 <code>file-loader</code> 的功能类似，但是 <code>url-loader</code> 可以指定在文件大小小于指定的限制时，返回 <code>DataURL</code>，因此，个人会优先选择使用 <code>url-loader</code>。</p>
<p class="my-4 leading-7">首先安装依赖:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>npm install url-loader -D
</code></div></div>
<p class="my-4 leading-7"><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/2/17098ee506dad2eb~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" alt="img"/></p>
<p class="my-4 leading-7">安装 <code>url-loader</code> 的时候，控制台会提示你，还需要安装下 <code>file-loader</code>，听人家的话安装下就行(新版 <code>npm</code> 不会自动安装 <code>peerDependencies</code>)：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>npm install file-loader -D
</code></div></div>
<p class="my-4 leading-7">在 <code>webpack.config.js</code> 中进行配置：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//webpack.config.js
module.exports = {
    //...
    modules: {
        rules: [
            {
                test: /\.(png|jpg|gif|jpeg|webp|svg|eot|ttf|woff|woff2)$/,
                use: [
                    {
                        loader: &#x27;url-loader&#x27;,
                        options: {
                            limit: 10240, //10K
                            esModule: false 
                        }
                    }
                ],
                exclude: /node_modules/
            }
        ]
    }
}
</code></div></div>
<p class="my-4 leading-7">此处设置 <code>limit</code> 的值大小为 10240，即资源大小小于 <code>10K</code> 时，将资源转换为 <code>base64</code>，超过 10K，将图片拷贝到 <code>dist</code> 目录。<code>esModule</code> 设置为 <code>false</code>，否则，<code>&lt;img src={require(&#x27;XXX.jpg&#x27;)} /&gt;</code> 会出现 <code>&lt;img src=[Module Object] /&gt;</code></p>
<p class="my-4 leading-7">将资源转换为 <code>base64</code> 可以减少网络请求次数，但是 <code>base64</code> 数据较大，如果太多的资源是 <code>base64</code>，会导致加载变慢，因此设置 <code>limit</code> 值时，需要二者兼顾。</p>
<p class="my-4 leading-7">默认情况下，生成的文件的文件名就是文件内容的 <code>MD5</code> 哈希值并会保留所引用资源的原始扩展名，例如我上面的图片(thor.jpeg)对应的文件名如下：</p>
<p class="my-4 leading-7"><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/2/17098ee50ad69750~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" alt="img"/></p>
<p class="my-4 leading-7">当然，你也可以通过 <code>options</code> 参数进行修改。</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//....
use: [
    {
        loader: &#x27;url-loader&#x27;,
        options: {
            limit: 10240, //10K
            esModule: false,
            name: &#x27;[name]_[hash:6].[ext]&#x27;
        }
    }
]
</code></div></div>
<p class="my-4 leading-7">重新编译，在浏览器中审查元素，可以看到图片名变成了: <code>thor_a5f7c0.jpeg</code>。</p>
<p class="my-4 leading-7">当本地资源较多时，我们有时会希望它们能打包在一个文件夹下，这也很简单，我们只需要在 <code>url-loader</code> 的 <code>options</code> 中指定 <code>outpath</code>，如: <code>outputPath: &#x27;assets&#x27;</code>，构建出的目录如下:</p>
<p class="my-4 leading-7"><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/2/17098ee50d59a0cf~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" alt="img"/></p>
<p class="my-4 leading-7">更多的 <code>url-loader</code> 配置可以<a target="_blank" rel="noopener noreferrer" href="https://link.juejin.cn?target=https%3A%2F%2Fwww.webpackjs.com%2Floaders%2Furl-loader%2F" class="link_03735  link_3b154 inline-link_3b154">查看</a></p>
<p class="my-4 leading-7">到了这里，有点<strong class="font-semibold">岁月静好</strong>的感觉了。</p>
<p class="my-4 leading-7"><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/2/17098ee545e78629~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" alt="img"/></p>
<p class="my-4 leading-7">不过还没完，如果你在 <code>public/index.html</code> 文件中，使用本地的图片，例如，我们修改一下 <code>public/index.html</code>：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>&lt;img src=&quot;./a.jpg&quot; /&gt;
</code></div></div>
<p class="my-4 leading-7">重启本地服务，虽然，控制台不会报错，但是你会发现，浏览器中根本加载不出这张图片，Why？因为构建之后，通过相对路径压根找不着这张图片呀。</p>
<p class="my-4 leading-7">How？怎么解决呢？</p>
<h3 id="10处理-html-中的本地图片" class="mt-10 mb-2 leading-7 text-xl title_3b154">10.处理 html 中的本地图片<a class="link_3b154 header-anchor" aria-hidden="true" href="#10处理-html-中的本地图片">#</a></h3>
<p class="my-4 leading-7">安装 <code>html-withimg-loader</code> 来解决咯。</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>npm install html-withimg-loader -D
</code></div></div>
<p class="my-4 leading-7">修改 <code>webpack.config.js</code>：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>module.exports = {
    //...
    module: {
        rules: [
            {
                test: /.html$/,
                use: &#x27;html-withimg-loader&#x27;
            }
        ]
    }
}
</code></div></div>
<p class="my-4 leading-7">然后在我们的 <code>html</code> 中引入一张文件测试一下（图片地址自己写咯，这里只是示意）:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>&lt;!-- index.html --&gt;
&lt;img src=&quot;./thor.jpeg&quot; /&gt;
</code></div></div>
<p class="my-4 leading-7">重启本地服务，图片并没能加载，审查元素的话，会发现图片的地址显示的是 <code>{&quot;default&quot;:&quot;assets/thor_a5f7c0.jpeg&quot;}</code>。</p>
<p class="my-4 leading-7"><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/2/17098ee552daf18d~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" alt="img"/></p>
<p class="my-4 leading-7">我当前 <code>file-loader</code> 的版本是 5.0.2，5版本之后，需要增加 <code>esModule</code> 属性：</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//webpack.config.js
module.exports = {
    //...
    modules: {
        rules: [
            {
                test: /\.(png|jpg|gif|jpeg|webp|svg|eot|ttf|woff|woff2)$/,
                use: [
                    {
                        loader: &#x27;url-loader&#x27;,
                        options: {
                            limit: 10240, //10K
                            esModule: false
                        }
                    }
                ]
            }
        ]
    }
}
</code></div></div>
<p class="my-4 leading-7">再重启本地服务，就搞定啦。</p>
<p class="my-4 leading-7">话说使用 <code>html-withimg-loader</code> 处理图片之后，<code>html</code> 中就不能使用 <code>vm</code>, <code>ejs</code> 的模板了，如果想继续在 <code>html</code> 中使用 <code>&lt;% if(htmlWebpackPlugin.options.config.header) { %&gt;</code> 这样的语法，但是呢，又希望能使用本地图片，可不可以？鱼和熊掌都想要，虽然很多时候，能吃个鱼就不错了，但是这里是可以的哦，像下面这样编写图片的地址，并且删除<code>html-withimg-loader</code>的配置即可。</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>&lt;!-- index.html --&gt;
&lt;img src=&quot;&lt;%= require(&#x27;./thor.jpeg&#x27;) %&gt;&quot; /&gt;
</code></div></div>
<p class="my-4 leading-7">图片加载OK啦，并且 <code>&lt;% %&gt;</code> 语法也可以正常使用，吼吼吼~~~</p>
<p class="my-4 leading-7">虽然，<code>webpack</code> 的默认配置很好用，但是有的时候，我们会有一些其它需要啦，例如，我们不止一个入口文件，这时候，该怎么办呢？</p>
<h3 id="11入口配置" class="mt-10 mb-2 leading-7 text-xl title_3b154">11.入口配置<a class="link_3b154 header-anchor" aria-hidden="true" href="#11入口配置">#</a></h3>
<p class="my-4 leading-7">入口的字段为: <code>entry</code></p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//webpack.config.js
module.exports = {
    entry: &#x27;./src/index.js&#x27; //webpack的默认配置
}
</code></div></div>
<p class="my-4 leading-7"><code>entry</code> 的值可以是一个字符串，一个数组或是一个对象。</p>
<p class="my-4 leading-7">字符串的情况无需多说，就是以对应的文件为入口。</p>
<p class="my-4 leading-7">为数组时，表示有“多个主入口”，想要多个依赖文件一起注入时，会这样配置。例如:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>entry: [
    &#x27;./src/polyfills.js&#x27;,
    &#x27;./src/index.js&#x27;
]
</code></div></div>
<p class="my-4 leading-7"><code>polyfills.js</code> 文件中可能只是简单的引入了一些 <code>polyfill</code>，例如 <code>babel-polyfill</code>，<code>whatwg-fetch</code> 等，需要在最前面被引入（我在 webpack2 时这样配置过）。</p>
<p class="my-4 leading-7">那什么时候是对象呢？不要捉急，后面将多页配置的时候，会说到。</p>
<h3 id="12出口配置" class="mt-10 mb-2 leading-7 text-xl title_3b154">12.出口配置<a class="link_3b154 header-anchor" aria-hidden="true" href="#12出口配置">#</a></h3>
<p class="my-4 leading-7">配置 <code>output</code> 选项可以控制 <code>webpack</code> 如何输出编译文件。</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>const path = require(&#x27;path&#x27;);
module.exports = {
    entry: &#x27;./src/index.js&#x27;,
    output: {
        path: path.resolve(__dirname, &#x27;dist&#x27;), //必须是绝对路径
        filename: &#x27;bundle.js&#x27;,
        publicPath: &#x27;/&#x27; //通常是CDN地址
    }
}
</code></div></div>
<p class="my-4 leading-7">例如，你最终编译出来的代码部署在 CDN 上，资源的地址为: &#x27;<a target="_blank" rel="noopener noreferrer" href="https://link.juejin.cn?target=https%3A%2F%2FAAA%2FBBB%2FYourProject%2FXXX" class="link_03735  link_3b154 inline-link_3b154"><a target="_blank" rel="noopener noreferrer" href="https://AAA/BBB/YourProject/XXX" class="link_03735  link_3b154 inline-link_3b154">https://AAA/BBB/YourProject/XXX</a></a>&#x27;，那么可以将生产的 <code>publicPath</code> 配置为: <code>//AAA/BBB/</code>。</p>
<p class="my-4 leading-7">编译时，可以不配置，或者配置为 <code>/</code>。可以在我们之前提及的 <code>config.js</code> 中指定 <code>publicPath</code>（<code>config.js</code> 中区分了 <code>dev</code> 和 <code>public</code>）， 当然还可以区分不同的环境指定配置文件来设置，或者是根据 <code>isDev</code> 字段来设置。</p>
<p class="my-4 leading-7">除此之外呢，考虑到CDN缓存的问题，我们一般会给文件名加上 <code>hash</code>.</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//webpack.config.js
module.exports = {
    output: {
        path: path.resolve(__dirname, &#x27;dist&#x27;), //必须是绝对路径
        filename: &#x27;bundle.[hash].js&#x27;,
        publicPath: &#x27;/&#x27; //通常是CDN地址
    }
}
</code></div></div>
<p class="my-4 leading-7">如果你觉得 <code>hash</code> 串太长的话，还可以指定长度，例如 <code>bundle.[hash:6].js</code>。使用 <code>npm run build</code> 打包看看吧。</p>
<p class="my-4 leading-7">问题出现啦，每次文件修改后，重新打包，导致 <code>dist</code> 目录下的文件越来越多。要是每次打包前，都先清空一下目录就好啦。可不可以做到呢？必须可以！</p>
<h3 id="13每次打包前清空dist目录" class="mt-10 mb-2 leading-7 text-xl title_3b154">13.每次打包前清空dist目录<a class="link_3b154 header-anchor" aria-hidden="true" href="#13每次打包前清空dist目录">#</a></h3>
<p class="my-4 leading-7">反正我是懒得手动去清理的，只要你足够懒，你总是会找到好办法的，懒人推动科技进步。这里，我们需要插件: <code>clean-webpack-plugin</code></p>
<p class="my-4 leading-7">安装依赖:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>npm install clean-webpack-plugin -D
</code></div></div>
<p class="my-4 leading-7">以前，<code>clean-webpack-plugin</code> 是默认导出的，现在不是，所以引用的时候，需要注意一下。另外，现在构造函数接受的参数是一个对象，可缺省。</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//webpack.config.js
const { CleanWebpackPlugin } = require(&#x27;clean-webpack-plugin&#x27;);

module.exports = {
    //...
    plugins: [
        //不需要传参数喔，它可以找到 outputPath
        new CleanWebpackPlugin() 
    ]
}
</code></div></div>
<p class="my-4 leading-7">现在你再修改文件，重现构建，生成的hash值和之前dist中的不一样，但是因为每次 <code>clean-webpack-plugin</code> 都会帮我们先清空一波 <code>dist</code> 目录，所以不会出现太多文件，傻傻分不清楚究竟哪个是新生成文件的情况。</p>
<h4 id="希望dist目录下某个文件夹不被清空" class="mt-8 leading-6 text-lg title_3b154">希望dist目录下某个文件夹不被清空<a class="link_3b154 header-anchor" aria-hidden="true" href="#希望dist目录下某个文件夹不被清空">#</a></h4>
<p class="my-4 leading-7">不过呢，有些时候，我们并不希望整个 <code>dist</code> 目录都被清空，比如，我们不希望，每次打包的时候，都删除 <code>dll</code> 目录，以及 <code>dll</code> 目录下的文件或子目录，该怎么办呢？</p>
<p class="my-4 leading-7"><code>clean-webpack-plugin</code> 为我们提供了参数 <code>cleanOnceBeforeBuildPatterns</code>。</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>//webpack.config.js
module.exports = {
    //...
    plugins: [
        new CleanWebpackPlugin({
            cleanOnceBeforeBuildPatterns:[&#x27;**/*&#x27;, &#x27;!dll&#x27;, &#x27;!dll/**&#x27;] //不删除dll目录下的文件
        })
    ]
}
</code></div></div>
<p class="my-4 leading-7">此外，<code>clean-webpack-plugin</code> 还有一些其它的配置，不过我使用的不多，大家可以查看<a target="_blank" rel="noopener noreferrer" href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjohnagan%2Fclean-webpack-plugin" class="link_03735  link_3b154 inline-link_3b154">clean-webpack-plugin</a></p>
<p class="my-4 leading-7">至此，我们算是完成了一个基础配置。但是这不够完美，或者说有些时候，我们还会有一些其它的需求。下一篇关于<code>webpack</code>配置的文章会介绍一些其它的情况。</p>
<blockquote class="border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 blockquote_3b154">
<p class="my-4 leading-7">参考资料</p>
</blockquote>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><a target="_blank" rel="noopener noreferrer" href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fen%2Fblog%2Fnpm%2Fpeer-dependencies%2F" class="link_03735  link_3b154 inline-link_3b154">Peer Dependencies</a></li>
<li class="[&amp;:not(:first-child)]:mt-2"><a target="_blank" rel="noopener noreferrer" href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fhtml-webpack-plugin" class="link_03735  link_3b154 inline-link_3b154">html-webpack-plugin</a></li>
<li class="[&amp;:not(:first-child)]:mt-2"><a target="_blank" rel="noopener noreferrer" href="https://link.juejin.cn?target=https%3A%2F%2Fwww.webpackjs.com%2Fconcepts%2F" class="link_03735  link_3b154 inline-link_3b154">webpack中文文档</a></li>
</ul>
<h3 id="最后" class="mt-10 mb-2 leading-7 text-xl title_3b154">最后<a class="link_3b154 header-anchor" aria-hidden="true" href="#最后">#</a></h3>
<p class="my-4 leading-7">如果本文对你有帮助的话，给本文点个赞吧r</p>
<p class="my-4 leading-7">看得不过瘾？</p>
<p class="my-4 leading-7"><a target="_blank" rel="noopener noreferrer" href="https://juejin.cn/post/6844904084927938567" class="link_03735  link_3b154 inline-link_3b154">带你深度解锁Webpack系列(进阶篇)</a> <a target="_blank" rel="noopener noreferrer" href="https://juejin.cn/post/6844904093463347208" class="link_03735  link_3b154 inline-link_3b154">带你深度解锁Webpack系列(优化篇)</a></p>
<p class="my-4 leading-7">作者：无名之苝
链接：<a target="_blank" rel="noopener noreferrer" href="https://juejin.cn/post/6844904079219490830" class="link_03735  link_3b154 inline-link_3b154">https://juejin.cn/post/6844904079219490830</a>
来源：稀土掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p><!--/$--></div><div class="rspress-doc-footer"><footer class="mt-8"><div class="xs:flex pb-5 px-2 justify-end items-center"></div><div class="flex flex-col"></div><div class="flex flex-col sm:flex-row sm:justify-around gap-4 pt-6"><div class="prev_e7091 flex flex-col"></div><div class="next_e7091 flex flex-col"></div></div></footer></div></div></div><div class="aside-container_edeb4"><div><div class="flex flex-col"><div class="&lt;lg:hidden"><div id="aside-container" class="relative text-sm font-medium"><div class="leading-7 block text-sm font-semibold pl-3">ON THIS PAGE</div><nav class="mt-1"><ul class="relative"><li><a href="#1webpack-是什么" title="1.webpack 是什么？" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">1.webpack 是什么？</span></a></li><li><a href="#2webpack-的核心概念" title="2.webpack 的核心概念" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">2.webpack 的核心概念</span></a></li><li><a href="#3初始化项目" title="3.初始化项目" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">3.初始化项目</span></a></li><li><a href="#4将js转义为低版本" title="4.将JS转义为低版本" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">4.将JS转义为低版本</span></a></li><li><a href="#babel-loader" title="babel-loader" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">babel-loader</span></a></li><li><a href="#创建一个-babelrc" title="创建一个 .babelrc" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">创建一个 .babelrc</span></a></li><li><a href="#在webpack中配置-babel" title="在webpack中配置 babel" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">在webpack中配置 babel</span></a></li><li><a href="#5mode" title="5.mode" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">5.mode</span></a></li><li><a href="#6在浏览器中查看页面" title="6.在浏览器中查看页面" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">6.在浏览器中查看页面</span></a></li><li><a href="#html-webpack-plugin-的-config-的妙用" title="html-webpack-plugin 的 config 的妙用" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">html-webpack-plugin 的 config 的妙用</span></a></li><li><a href="#如何在浏览器中实时展示效果" title="如何在浏览器中实时展示效果" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">如何在浏览器中实时展示效果</span></a></li><li><a href="#7devtool" title="7.devtool" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">7.devtool</span></a></li><li><a href="#8如何处理样式文件呢" title="8.如何处理样式文件呢" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">8.如何处理样式文件呢</span></a></li><li><a href="#9图片字体文件处理" title="9.图片/字体文件处理" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">9.图片/字体文件处理</span></a></li><li><a href="#10处理-html-中的本地图片" title="10.处理 html 中的本地图片" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">10.处理 html 中的本地图片</span></a></li><li><a href="#11入口配置" title="11.入口配置" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">11.入口配置</span></a></li><li><a href="#12出口配置" title="12.出口配置" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">12.出口配置</span></a></li><li><a href="#13每次打包前清空dist目录" title="13.每次打包前清空dist目录" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">13.每次打包前清空dist目录</span></a></li><li><a href="#希望dist目录下某个文件夹不被清空" title="希望dist目录下某个文件夹不被清空" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">希望dist目录下某个文件夹不被清空</span></a></li><li><a href="#最后" title="最后" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">最后</span></a></li></ul></nav></div></div></div></div></div></div></div></section></div></div>
  <div id="search-container"></div>
</body>

</html>
