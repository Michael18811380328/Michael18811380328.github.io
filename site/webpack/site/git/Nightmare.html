<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Rspress v1.38.0">
  <title data-rh="true">Nightmare - 前端工程化</title><meta data-rh="true" name="description" content="介绍前端工程化常用工具"/>
<script>{;const saved = localStorage.getItem('rspress-theme-appearance');const preferDark = window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = !saved || saved === 'auto' ? preferDark : saved === 'dark';document.documentElement.classList.toggle('dark', isDark);document.documentElement.style.colorScheme = isDark ? 'dark' : 'light';}</script><script defer src="/site/webpack/site/static/js/styles.03324596.js"></script><script defer src="/site/webpack/site/static/js/lib-react.82d8ec79.js"></script><script defer src="/site/webpack/site/static/js/lib-router.fdbdb348.js"></script><script defer src="/site/webpack/site/static/js/index.35af798f.js"></script><link href="/site/webpack/site/static/css/styles.c26b7a64.css" rel="stylesheet"></head>

<body >
  <div id="root"><div><div class="navContainer_f6cde rspress-nav px-6 " style="position:sticky"><div class="container_f6cde flex justify-between items-center h-full"><div class="navBarTitle_f6cde"><a class="link_03735 flex items-center w-full h-full text-base font-semibold transition-opacity duration-300 hover:opacity-60 cursor-pointer" target="" href="/site/webpack/site/index.html"><span>前端工程化</span></a></div><div class="flex flex-1 justify-end items-center"><div class="rightNav_f6cde"><div class="flex sm:flex-1 items-center sm:pl-4 sm:pr-2"><div class="rspress-nav-search-button navSearchButton_6e282"><button><svg width="18" height="18" viewBox="0 0 32 32"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9Z"></path></svg><p class="searchWord_6e282">Search Docs</p><div style="opacity:0"><span></span><span>K</span></div></button></div><div class="mobileNavSearchButton_6e282"><svg width="24" height="24" viewBox="0 0 32 32"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9Z"></path></svg></div></div><div class="rspress-nav-menu menu h-14"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/index.html"><div class="rspress-nav-menu-item singleItem_f6cde activeItem_f6cde text-sm font-medium mx-1.5 px-3 py-2 flex items-center">首页</div></a><div class="mx-3 last:mr-0"><div class="relative flex-center h-14"><button class="rspress-nav-menu-group-button flex-center items-center font-medium text-sm text-text-1 hover:text-text-2 transition-colors duration-200"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/28-rollup完全入门指南.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">rollup<svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></div></a></button><div class="rspress-nav-menu-group-content absolute mx-0.8 transition-opacity duration-300" style="opacity:0;visibility:hidden;right:0;top:52px"><div class="p-3 pr-2 w-full h-full max-h-100vh whitespace-nowrap" style="box-shadow:var(--rp-shadow-3);z-index:100;border:1px solid var(--rp-c-divider-light);border-radius:var(--rp-radius-large);background:var(--rp-c-bg)"><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/demo01-note.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>Demo 01 Note</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/demo02-note.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>Demo 02 Note</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/demo03-note.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>Demo 03 Note</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/demo04-note.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>Demo 04 Note</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/28-rollup完全入门指南.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>rollup </span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/29-rollup打包工具基础配置使用详解.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>rollup </span></div></div></a></div></div></div></div></div></div><div class="mx-3 last:mr-0"><div class="relative flex-center h-14"><button class="rspress-nav-menu-group-button flex-center items-center font-medium text-sm text-text-1 hover:text-text-2 transition-colors duration-200"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/21-Babel is what.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">babel<svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></div></a></button><div class="rspress-nav-menu-group-content absolute mx-0.8 transition-opacity duration-300" style="opacity:0;visibility:hidden;right:0;top:52px"><div class="p-3 pr-2 w-full h-full max-h-100vh whitespace-nowrap" style="box-shadow:var(--rp-shadow-3);z-index:100;border:1px solid var(--rp-c-divider-light);border-radius:var(--rp-radius-large);background:var(--rp-c-bg)"><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/21-Babel is what.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>21-Babel is what</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/22-Babel Usage Guide.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>22-Babel Usage Guide</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/23-Babel-Configure.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>23-Babel-Configure</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/24-Babel-Learn ES2015.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>24-Babel-Learn ES2015</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/25-babel-preset-env.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>25-babel-preset-env使用指南</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/26-babel-preset-env 作用.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>26-babel-preset-env 作用</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/27-babel-plugin-transform-runtime 说明.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>27-babel-plugin-transform-runtime 说明</span></div></div></a></div></div></div></div></div></div><div class="mx-3 last:mr-0"><div class="relative flex-center h-14"><button class="rspress-nav-menu-group-button flex-center items-center font-medium text-sm text-text-1 hover:text-text-2 transition-colors duration-200"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/00-readme.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">webpack<svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></div></a></button><div class="rspress-nav-menu-group-content absolute mx-0.8 transition-opacity duration-300" style="opacity:0;visibility:hidden;right:0;top:52px"><div class="p-3 pr-2 w-full h-full max-h-100vh whitespace-nowrap" style="box-shadow:var(--rp-shadow-3);z-index:100;border:1px solid var(--rp-c-divider-light);border-radius:var(--rp-radius-large);background:var(--rp-c-bg)"><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/00-readme.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>00-readme</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/01-webpack基本概念.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>01-webpack基本概念</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/02-create-react-app入门教程.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>02-create-react-app入门教程</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/03-网易webpack配置解析.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>03-网易webpack配置解析</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/04-网易webpack编译原理分析.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>04-网易webpack编译原理分析</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/05-网易webpack的高级技巧.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>05-网易webpack的高级技巧</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/06-网易 webpack 打包工具使用.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>06-网易 webpack 打包工具使用</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/07-webpack 官方起步.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>07-webpack 官方起步</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/08-webpack5 和 webpack4 的区别有哪些.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>08-webpack5 和 webpack4 的区别有哪些</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/09-webpack主要概念.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>09-webpack主要概念</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/10-深度解锁Webpack系列(基础篇) 01.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>10-深度解锁Webpack系列(基础篇) 01</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/11-深度解锁Webpack系列(进阶篇)02.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>11-深度解锁Webpack系列(进阶篇)02</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/12-深度解锁Webpack系列(优化篇)03.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>12-深度解锁Webpack系列(优化篇)03</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/13-webpack5 SplitChunksPlugin 实用指南.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>13-webpack5 SplitChunksPlugin 实用指南</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/41-webpack更新版本后报错Starting the development server.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>41-webpack更新版本后报错Starting the development server</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/42-webpack设置devServer启动项目为https协议.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>42-webpack设置devServer启动项目为https协议</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/43-webpack 打包 antd-mobile 按需加载样式问题.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>43-webpack 打包 antd-mobile 按需加载样式问题</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/44-TS-React-Webpack.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>44-TS-React-Webpack</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/45-TS项目使用Webpack.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>45-TS项目使用Webpack</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/46-webpack 项目配置学习.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>46-webpack 项目配置学习</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/47-webpack 项目配置学习2.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>47-webpack 项目配置学习2</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/48-webpack 项目配置学习3.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>48-webpack 项目配置学习3</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/Preset files are not allowed to export objects.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>Preset files are not allowed to export objects</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/stalled-webpack3基本使用.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>stalled-webpack3基本使用</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/stalled-webpack4 babel配置文件.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>stalled-webpack4 babel配置文件</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/stalled-webpack4DevServer配置项.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>stalled-webpack4DevServer配置项</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/stalled-webpack4入门介绍.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>stalled-webpack4入门介绍</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/stalled-webpack4基本配置.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>stalled-webpack4基本配置</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/stalled-webpack4打包很慢处理.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>stalled-webpack4打包很慢处理</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/webpack-setting.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>webpack-setting</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/webpack04-01README.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>webpack04-01README</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/webpack04-02-README.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>webpack04-02-README</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/webpack04-03-README.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>webpack04-03-README</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/webpack3-readme.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>webpack3-readme</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件 mini-css-extract-plugin.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件 mini-css-extract-plugin</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件 react-webpack-template.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件 react-webpack-template</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件 webpack Code Splitting.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件 webpack Code Splitting</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件 webpack HappyPack多个进程处理loader.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件 webpack HappyPack多个进程处理loader</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件 webpack 常用插件.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件 webpack 常用插件</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件 webpack-howto.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件 webpack-howto</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/插件-HappyPack plugin for the loader could not be found.html"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>插件-HappyPack plugin for the loader could not be found</span></div></div></a></div></div></div></div></div></div></div><div class="flex-center flex-row"><div class="mx-2"><div class="md:mr-2 rspress-nav-appearance"><div class="p-1 border border-solid border-gray-300 text-gray-400  cursor-pointer rounded-md hover:border-gray-600 hover:text-gray-600 dark:hover:border-gray-200 dark:hover:text-gray-200 transition-all duration-300 w-7 h-7"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" class="dark:hidden" width="18" height="18" fill="currentColor"><path d="M12 18c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6zm0-10c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zM12 4c-.6 0-1-.4-1-1V1c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zM12 24c-.6 0-1-.4-1-1v-2c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zM5.6 6.6c-.3 0-.5-.1-.7-.3L3.5 4.9c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.1.2-.4.3-.7.3zM19.8 20.8c-.3 0-.5-.1-.7-.3l-1.4-1.4c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.2.2-.5.3-.7.3zM3 13H1c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zM23 13h-2c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zM4.2 20.8c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.4.3-.7.3zM18.4 6.6c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.5.3-.7.3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" class="hidden dark:block" width="18" height="18" fill="currentColor"><path d="M12.1 22h-.9c-5.5-.5-9.5-5.4-9-10.9.4-4.8 4.2-8.6 9-9 .4 0 .8.2 1 .5.2.3.2.8-.1 1.1-2 2.7-1.4 6.4 1.3 8.4 2.1 1.6 5 1.6 7.1 0 .3-.2.7-.3 1.1-.1.3.2.5.6.5 1-.2 2.7-1.5 5.1-3.6 6.8-1.9 1.4-4.1 2.2-6.4 2.2zM9.3 4.4c-2.9 1-5 3.6-5.2 6.8-.4 4.4 2.8 8.3 7.2 8.7 2.1.2 4.2-.4 5.8-1.8 1.1-.9 1.9-2.1 2.4-3.4-2.5.9-5.3.5-7.5-1.1-2.8-2.2-3.9-5.9-2.7-9.2z"></path></svg></div></div></div></div></div><div class="mobileNavMenu_f6cde"><div class="navScreen_457e8 " id="navScreen"><div class="container_457e8"><div class="navMenu_457e8"><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/index.html"><div class="rspress-nav-menu-item singleItem_f6cde activeItem_f6cde text-sm font-medium mx-1.5 px-3 py-2 flex items-center">首页</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/rollup/28-rollup完全入门指南.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">rollup</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/babel/21-Babel is what.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">babel</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/site/webpack/site/webpack/00-readme.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">webpack</div></a></div></div><div class="flex-center flex-col gap-2"><div class="mt-2 navAppearance_457e8 flex justify-center"></div></div></div></div><button aria-label="mobile hamburger" class=" navHamburger_e7b06 text-gray-500"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="currentColor"><circle cx="8" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="24" cy="16" r="2" fill="currentColor"></circle></svg></button></div></div></div></div><section><div class="docLayout_edeb4 pt-0"><div class="rspress-sidebar-menu"><button class="flex-center ml-auto"><span class="text-sm">ON THIS PAGE</span><div class="text-md mr-2" style="transform:rotate(0deg);transition:transform 0.2s ease-out;margin-top:2px"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></button><div class="rspress-local-toc-container "><ul><li><a href="#examples" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:0"><span class="rspress-toc-link-text block">Examples</span></a></li><li><a href="#to-run-the-mocha-tests" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">To run the mocha tests</span></a></li><li><a href="#api" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:0"><span class="rspress-toc-link-text block">API</span></a></li><li><a href="#nightmareoptions" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">Nightmare(options)</span></a></li><li><a href="#certificatesubjectname" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">certificateSubjectName</span></a></li><li><a href="#engineversions" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.engineVersions()</span></a></li><li><a href="#useragentuseragent" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.useragent(useragent)</span></a></li><li><a href="#authenticationuser-password" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.authentication(user, password)</span></a></li><li><a href="#end" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.end()</span></a></li><li><a href="#halterror-done" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.halt(error, done)</span></a></li><li><a href="#interact-with-the-page" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">Interact with the Page</span></a></li><li><a href="#gotourl-headers" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.goto(url[, headers])</span></a></li><li><a href="#back" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.back()</span></a></li><li><a href="#forward" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.forward()</span></a></li><li><a href="#refresh" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.refresh()</span></a></li><li><a href="#clickselector" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.click(selector)</span></a></li><li><a href="#mousedownselector" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.mousedown(selector)</span></a></li><li><a href="#mouseupselector" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.mouseup(selector)</span></a></li><li><a href="#mouseoverselector" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.mouseover(selector)</span></a></li><li><a href="#mouseoutselector" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.mouseout(selector)</span></a></li><li><a href="#typeselector-text" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.type(selector[, text])</span></a></li><li><a href="#insertselector-text" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.insert(selector[, text])</span></a></li><li><a href="#checkselector" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.check(selector)</span></a></li><li><a href="#uncheckselector" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.uncheck(selector)</span></a></li><li><a href="#selectselector-option" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.select(selector, option)</span></a></li><li><a href="#scrolltotop-left" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.scrollTo(top, left)</span></a></li><li><a href="#viewportwidth-height" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.viewport(width, height)</span></a></li><li><a href="#injecttype-file" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.inject(type, file)</span></a></li><li><a href="#evaluatefn-arg1-arg2" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.evaluate(fn[, arg1, arg2,...])</span></a></li><li><a href="#waitms" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.wait(ms)</span></a></li><li><a href="#waitselector" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.wait(selector)</span></a></li><li><a href="#waitfn-arg1-arg2" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.wait(fn[, arg1, arg2,...])</span></a></li><li><a href="#headerheader-value" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.header(header, value)</span></a></li><li><a href="#extract-from-the-page" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">Extract from the Page</span></a></li><li><a href="#existsselector" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.exists(selector)</span></a></li><li><a href="#visibleselector" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.visible(selector)</span></a></li><li><a href="#onevent-callback" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.on(event, callback)</span></a></li><li><a href="#onceevent-callback" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.once(event, callback)</span></a></li><li><a href="#removelistenerevent-callback" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.removeListener(event, callback)</span></a></li><li><a href="#screenshotpath-clip" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.screenshot([path][, clip])</span></a></li><li><a href="#htmlpath-savetype" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.html(path, saveType)</span></a></li><li><a href="#pdfpath-options" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.pdf(path, options)</span></a></li><li><a href="#title" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.title()</span></a></li><li><a href="#url" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.url()</span></a></li><li><a href="#path" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.path()</span></a></li><li><a href="#cookies" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">Cookies</span></a></li><li><a href="#cookiesgetname" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.cookies.get(name)</span></a></li><li><a href="#cookiesgetquery" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.cookies.get(query)</span></a></li><li><a href="#cookiesget" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.cookies.get()</span></a></li><li><a href="#cookiessetname-value" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.cookies.set(name, value)</span></a></li><li><a href="#cookiessetcookie" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.cookies.set(cookie)</span></a></li><li><a href="#cookiessetcookies" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.cookies.set(cookies)</span></a></li><li><a href="#cookiesclearname" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.cookies.clear([name])</span></a></li><li><a href="#cookiesclearall" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.cookies.clearAll()</span></a></li><li><a href="#proxies" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">Proxies</span></a></li><li><a href="#promises" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">Promises</span></a></li><li><a href="#extending-nightmare" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:12px"><span class="rspress-toc-link-text block">Extending Nightmare</span></a></li><li><a href="#nightmareactionname-electronactionelectronnamespace-actionnamespace" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">Nightmare.action(name, [electronAction|electronNamespace], action|namespace)</span></a></li><li><a href="#useplugin" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">.use(plugin)</span></a></li><li><a href="#custom-preload-script" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">Custom preload script</span></a></li><li><a href="#storage-persistence-between-nightmare-instances" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">Storage Persistence between nightmare instances</span></a></li><li><a href="#usage" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:0"><span class="rspress-toc-link-text block">Usage</span></a></li><li><a href="#installation" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">Installation</span></a></li><li><a href="#execution" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">Execution</span></a></li><li><a href="#common-execution-problems" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">Common Execution Problems</span></a></li><li><a href="#debugging" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:24px"><span class="rspress-toc-link-text block">Debugging</span></a></li><li><a href="#additional-resources" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:0"><span class="rspress-toc-link-text block">Additional Resources</span></a></li><li><a href="#tests" class="rspress-toc-link sm:text-normal text-sm" style="margin-left:0"><span class="rspress-toc-link-text block">Tests</span></a></li></ul></div></div><div class="content_edeb4 rspress-doc-container flex flex-shrink-0 mx-auto"><div class="w-full flex-1"><div><div class="rspress-doc"><!--$--><h1 id="前端页面测试" class="text-3xl mb-10 leading-10 tracking-tight title_3b154">前端页面测试<a class="link_3b154 header-anchor" aria-hidden="true" href="#前端页面测试">#</a></h1>
<p class="my-4 leading-7">统计信息：字数 33858  阅读68分钟</p>
<p class="my-4 leading-7">关于函数测试，比如有一些固定的输入输出，可以使用mocha来进行测试，参考 <a target="_blank" rel="noopener noreferrer" href="https://www.jianshu.com/p/368d580d4365" class="link_03735  link_3b154 inline-link_3b154">Mocha测试基本使用</a>。</p>
<p class="my-4 leading-7">关于页面功能的测试，推荐<a target="_blank" rel="noopener noreferrer" href="https://link.jianshu.com/?t=http%3A%2F%2Fwww.nightmarejs.org%2F" class="link_03735  link_3b154 inline-link_3b154">nightmare</a>。</p>
<div class="language-jsx"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-jsx" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">var</span><span> Nightmare </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-keyword)">require</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;nightmare&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">var</span><span> nightmare </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-function)">Nightmare</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> show</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem">nightmare
</span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">goto</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;https://www.taobao.com/&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>  </span><span class="token" style="color:var(--code-token-comment)">//待测试链接</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">type</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;#q&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;电视机&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>   </span><span class="token" style="color:var(--code-token-comment)">//输入框选中，输入值</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">click</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;form[action*=&quot;/search&quot;] [type=submit]&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-comment)">//form表单提交</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">wait</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token number">3000</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">exists</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;#spulist-grid&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">evaluate</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-keyword)">function</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-keyword)">return</span><span> document</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">querySelector</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;#spulist-grid .grid-item .info-cont&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-comment)">//获取需返回的值</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>textContent</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">trim</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">end</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">then</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-keyword)">function</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>result</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>  </span><span class="token" style="color:var(--code-token-comment)">//即为return中的数据</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-symbol)">console</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">log</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>result</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">catch</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-keyword)">function</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>error</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>  </span><span class="token" style="color:var(--code-token-comment)">//错误捕捉</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-symbol)">console</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">error</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;Search failed:&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> error</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre></div><div class="code-button-group_15153"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">可以结合mocha使用。</p>
<div class="language-jsx"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-jsx" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">var</span><span> Nightmare </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-keyword)">require</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;nightmare&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">var</span><span> expect </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-keyword)">require</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;chai&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>expect</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">var</span><span> fork </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-keyword)">require</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;child_process&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>fork</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-function)">describe</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;test index.html&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-keyword)">function</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-keyword)">var</span><span> child</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-function)">before</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-keyword)">function</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>done</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>   </span><span class="token" style="color:var(--code-token-comment)">//钩子函数，测试之前调用</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    child </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-function)">fork</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;./server.js&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    child</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">on</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;message&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-keyword)">function</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>msg</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-keyword)">if</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>msg </span><span class="token operator">===</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;listening&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-function)">done</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-function)">after</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-keyword)">function</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> </span><span class="token" style="color:var(--code-token-comment)">//钩子函数，测试之后调用</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    child</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">kill</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-function)">it</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;点击后标题改变&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-keyword)">function</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>done</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-keyword)">var</span><span> nightmare </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-function)">Nightmare</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> show</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">    nightmare
</span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">goto</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;http://127.0.0.1:8080/index.html&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">click</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;h1&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">wait</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token number">1000</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">evaluate</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-keyword)">function</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-keyword)">return</span><span> document</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">querySelector</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;h1&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>style</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>color</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">end</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">then</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-keyword)">function</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>color</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-symbol)">console</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">log</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>color</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-function)">expect</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>color</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>to</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">equal</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;red&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-function)">done</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre></div><div class="code-button-group_15153"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<h1 id="nightmare" class="text-3xl mb-10 leading-10 tracking-tight title_3b154">Nightmare<a class="link_3b154 header-anchor" aria-hidden="true" href="#nightmare">#</a></h1>
<p class="my-4 leading-7"><a target="_blank" rel="noopener noreferrer" href="https://github.com/segmentio/nightmare#api" class="link_03735  link_3b154 inline-link_3b154">https://github.com/segmentio/nightmare#api</a></p>
<p class="my-4 leading-7">Nightmare is a high-level browser automation library from <a target="_blank" rel="noopener noreferrer" href="https://segment.com/" class="link_03735  link_3b154 inline-link_3b154">Segment</a>.</p>
<p class="my-4 leading-7">The goal is to expose a few simple methods that mimic user actions (like <code>goto</code>, <code>type</code> and <code>click</code>), with an API that feels synchronous for each block of scripting, rather than deeply nested callbacks. It was originally designed for automating tasks across sites that don&#x27;t have APIs, but is most often used for UI testing and crawling.</p>
<p class="my-4 leading-7">Under the covers it uses <a target="_blank" rel="noopener noreferrer" href="http://electron.atom.io/" class="link_03735  link_3b154 inline-link_3b154">Electron</a>, which is similar to <a target="_blank" rel="noopener noreferrer" href="http://phantomjs.org/" class="link_03735  link_3b154 inline-link_3b154">PhantomJS</a> but roughly <a target="_blank" rel="noopener noreferrer" href="https://github.com/segmentio/nightmare/issues/484#issuecomment-184519591" class="link_03735  link_3b154 inline-link_3b154">twice as fast</a> and more modern.</p>
<p class="my-4 leading-7"><strong class="font-semibold">⚠️ Security Warning:</strong> We&#x27;ve implemented <a target="_blank" rel="noopener noreferrer" href="https://github.com/segmentio/nightmare/issues/1388" class="link_03735  link_3b154 inline-link_3b154">many</a> of the security recommendations <a target="_blank" rel="noopener noreferrer" href="https://github.com/electron/electron/blob/master/docs/tutorial/security.md" class="link_03735  link_3b154 inline-link_3b154">outlined by Electron</a> to try and keep you safe, but undiscovered vulnerabilities may exist in Electron that could allow a malicious website to execute code on your computer. Avoid visiting untrusted websites.</p>
<p class="my-4 leading-7"><strong class="font-semibold">🛠 Migrating to 3.x:</strong> You&#x27;ll want to check out <a target="_blank" rel="noopener noreferrer" href="https://github.com/segmentio/nightmare/issues/1396" class="link_03735  link_3b154 inline-link_3b154">this issue</a> before upgrading. We&#x27;ve worked hard to make improvements to nightmare while limiting the breaking changes and there&#x27;s a good chance you won&#x27;t need to do anything.</p>
<p class="my-4 leading-7"><a target="_blank" rel="noopener noreferrer" href="https://github.com/segmentio/niffy" class="link_03735  link_3b154 inline-link_3b154">Niffy</a> is a perceptual diffing tool built on Nightmare. It helps you detect UI changes and bugs across releases of your web app.</p>
<p class="my-4 leading-7"><a target="_blank" rel="noopener noreferrer" href="https://github.com/segmentio/daydream" class="link_03735  link_3b154 inline-link_3b154">Daydream</a> is a complementary chrome extension built by <a target="_blank" rel="noopener noreferrer" href="https://github.com/stevenmiller888" class="link_03735  link_3b154 inline-link_3b154">@stevenmiller888</a> that generates Nightmare scripts for you while you browse.</p>
<p class="my-4 leading-7">Many thanks to <a target="_blank" rel="noopener noreferrer" href="https://github.com/matthewmueller" class="link_03735  link_3b154 inline-link_3b154">@matthewmueller</a> and <a target="_blank" rel="noopener noreferrer" href="https://github.com/rosshinkley" class="link_03735  link_3b154 inline-link_3b154">@rosshinkley</a> for their help on Nightmare.</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">Examples<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><a target="_blank" rel="noopener noreferrer" href="https://segment.com/blog/ui-testing-with-nightmare/" class="link_03735  link_3b154 inline-link_3b154">UI Testing Quick Start</a></li>
<li class="[&amp;:not(:first-child)]:mt-2"><a target="_blank" rel="noopener noreferrer" href="https://segment.com/blog/perceptual-diffing-with-niffy/" class="link_03735  link_3b154 inline-link_3b154">Perceptual Diffing with Niffy &amp; Nightmare</a></li>
</ul>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">API<!-- -->
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><a target="_blank" rel="noopener noreferrer" href="https://github.com/segmentio/nightmare#nightmareoptions" class="link_03735  link_3b154 inline-link_3b154">Set up an instance</a></li>
<li class="[&amp;:not(:first-child)]:mt-2"><a target="_blank" rel="noopener noreferrer" href="https://github.com/segmentio/nightmare#interact-with-the-page" class="link_03735  link_3b154 inline-link_3b154">Interact with the page</a></li>
<li class="[&amp;:not(:first-child)]:mt-2"><a target="_blank" rel="noopener noreferrer" href="https://github.com/segmentio/nightmare#extract-from-the-page" class="link_03735  link_3b154 inline-link_3b154">Extract from the page</a></li>
<li class="[&amp;:not(:first-child)]:mt-2"><a target="_blank" rel="noopener noreferrer" href="https://github.com/segmentio/nightmare#cookies" class="link_03735  link_3b154 inline-link_3b154">Cookies</a></li>
<li class="[&amp;:not(:first-child)]:mt-2"><a target="_blank" rel="noopener noreferrer" href="https://github.com/segmentio/nightmare#proxies" class="link_03735  link_3b154 inline-link_3b154">Proxies</a></li>
<li class="[&amp;:not(:first-child)]:mt-2"><a target="_blank" rel="noopener noreferrer" href="https://github.com/segmentio/nightmare#promises" class="link_03735  link_3b154 inline-link_3b154">Promises</a></li>
<li class="[&amp;:not(:first-child)]:mt-2"><a target="_blank" rel="noopener noreferrer" href="https://github.com/segmentio/nightmare#extending-nightmare" class="link_03735  link_3b154 inline-link_3b154">Extending Nightmare</a></li>
</ul>
</li>
<li class="[&amp;:not(:first-child)]:mt-2"><a target="_blank" rel="noopener noreferrer" href="https://github.com/segmentio/nightmare#usage" class="link_03735  link_3b154 inline-link_3b154">Usage</a></li>
<li class="[&amp;:not(:first-child)]:mt-2"><a target="_blank" rel="noopener noreferrer" href="https://github.com/segmentio/nightmare#debugging" class="link_03735  link_3b154 inline-link_3b154">Debugging</a></li>
<li class="[&amp;:not(:first-child)]:mt-2"><a target="_blank" rel="noopener noreferrer" href="https://github.com/segmentio/nightmare#additional-resources" class="link_03735  link_3b154 inline-link_3b154">Additional Resources</a></li>
</ul>
<h2 id="examples" class="mt-12 mb-6 pt-8 text-2xl tracking-tight border-t-[1px] border-divider-light title_3b154">Examples<a class="link_3b154 header-anchor" aria-hidden="true" href="#examples">#</a></h2>
<p class="my-4 leading-7">Let&#x27;s search on DuckDuckGo:</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">const</span><span> Nightmare </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-function)">require</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;nightmare&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">const</span><span> nightmare </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-function)">Nightmare</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> </span><span class="token literal-property" style="color:var(--code-token-parameter)">show</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem">nightmare
</span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">goto</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;https://duckduckgo.com&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">type</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;#search_form_input_homepage&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;github nightmare&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">click</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;#search_button_homepage&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">wait</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;#r1-0 a.result__a&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">evaluate</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> document</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">querySelector</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;#r1-0 a.result__a&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>href</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">end</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">then</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>console</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>log</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">catch</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter">error</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    console</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">error</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;Search failed:&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> error</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span></span></code></pre></div><div class="code-button-group_15153"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">You can run this with:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-bash" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-function)">npm</span><span> </span><span class="token" style="color:var(--code-token-function)">install</span><span> --save nightmare
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-function)">node</span><span> example.js</span></span></code></pre></div><div class="code-button-group_15153"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">Or, let&#x27;s run some mocha tests:</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">const</span><span> Nightmare </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-function)">require</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;nightmare&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">const</span><span> chai </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-function)">require</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;chai&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">const</span><span> expect </span><span class="token operator">=</span><span> chai</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>expect
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-function)">describe</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;test duckduckgo search results&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-function)">it</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;should find the nightmare github link first&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-keyword)">function</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter">done</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-keyword)">this</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">timeout</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;10s&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-keyword)">const</span><span> nightmare </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-function)">Nightmare</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem">    nightmare
</span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">goto</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;https://duckduckgo.com&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">type</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;#search_form_input_homepage&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;github nightmare&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">click</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;#search_button_homepage&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">wait</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;#links .result__a&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">evaluate</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> document</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">querySelector</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;#links .result__a&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>href</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">end</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">then</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter">link</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-function)">expect</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>link</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>to</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">equal</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;https://github.com/segmentio/nightmare&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>        </span><span class="token" style="color:var(--code-token-function)">done</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span></span></code></pre></div><div class="code-button-group_15153"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">You can see examples of every function <a target="_blank" rel="noopener noreferrer" href="https://github.com/segmentio/nightmare/blob/master/test/index.js" class="link_03735  link_3b154 inline-link_3b154">in the tests here</a>.</p>
<p class="my-4 leading-7">To get started with UI Testing, check out this <a target="_blank" rel="noopener noreferrer" href="https://segment.com/blog/ui-testing-with-nightmare" class="link_03735  link_3b154 inline-link_3b154">quick start guide</a>.</p>
<h3 id="to-run-the-mocha-tests" class="mt-10 mb-2 leading-7 text-xl title_3b154">To run the mocha tests<a class="link_3b154 header-anchor" aria-hidden="true" href="#to-run-the-mocha-tests">#</a></h3>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>npm test
</code></div></div>
<h2 id="api" class="mt-12 mb-6 pt-8 text-2xl tracking-tight border-t-[1px] border-divider-light title_3b154">API<a class="link_3b154 header-anchor" aria-hidden="true" href="#api">#</a></h2>
<h4 id="nightmareoptions" class="mt-8 leading-6 text-lg title_3b154">Nightmare(options)<a class="link_3b154 header-anchor" aria-hidden="true" href="#nightmareoptions">#</a></h4>
<p class="my-4 leading-7">Creates a new instance that can navigate around the web. The available options are <a target="_blank" rel="noopener noreferrer" href="https://github.com/atom/electron/blob/master/docs/api/browser-window.md#new-browserwindowoptions" class="link_03735  link_3b154 inline-link_3b154">documented here</a>, along with the following nightmare-specific options.</p>
<h5 id="waittimeout-default-30s" class="title_3b154">waitTimeout (default: 30s)<a class="link_3b154 header-anchor" aria-hidden="true" href="#waittimeout-default-30s">#</a></h5>
<p class="my-4 leading-7">Throws an exception if the <code>.wait()</code> didn&#x27;t return <code>true</code> within the set timeframe.</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>const nightmare = Nightmare({
  waitTimeout: 1000 // in ms
})
</code></div></div>
<h5 id="gototimeout-default-30s" class="title_3b154">gotoTimeout (default: 30s)<a class="link_3b154 header-anchor" aria-hidden="true" href="#gototimeout-default-30s">#</a></h5>
<p class="my-4 leading-7">Throws an exception if the <code>.goto()</code> didn&#x27;t finish loading within the set timeframe. Note that, even though <code>goto</code> normally waits for all the resources on a page to load, a timeout exception is only raised if the DOM itself has not yet loaded.</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>const nightmare = Nightmare({
  gotoTimeout: 1000 // in ms
})
</code></div></div>
<h5 id="loadtimeout-default-infinite" class="title_3b154">loadTimeout (default: infinite)<a class="link_3b154 header-anchor" aria-hidden="true" href="#loadtimeout-default-infinite">#</a></h5>
<p class="my-4 leading-7">Forces Nightmare to move on if a page transition caused by an action (eg, <code>.click()</code>) didn&#x27;t finish within the set timeframe. If <code>loadTimeout</code> is shorter than <code>gotoTimeout</code>, the exceptions thrown by <code>gotoTimeout</code> will be suppressed.</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>const nightmare = Nightmare({
  loadTimeout: 1000 // in ms
})
</code></div></div>
<h5 id="executiontimeout-default-30s" class="title_3b154">executionTimeout (default: 30s)<a class="link_3b154 header-anchor" aria-hidden="true" href="#executiontimeout-default-30s">#</a></h5>
<p class="my-4 leading-7">The maximum amount of time to wait for an <code>.evaluate()</code> statement to complete.</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>const nightmare = Nightmare({
  executionTimeout: 1000 // in ms
})
</code></div></div>
<h5 id="paths" class="title_3b154">paths<a class="link_3b154 header-anchor" aria-hidden="true" href="#paths">#</a></h5>
<p class="my-4 leading-7">The default system paths that Electron knows about. Here&#x27;s a list of available paths: <a target="_blank" rel="noopener noreferrer" href="https://github.com/atom/electron/blob/master/docs/api/app.md#appgetpathname" class="link_03735  link_3b154 inline-link_3b154">https://github.com/atom/electron/blob/master/docs/api/app.md#appgetpathname</a></p>
<p class="my-4 leading-7">You can overwrite them in Nightmare by doing the following:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>const nightmare = Nightmare({
  paths: {
    userData: &#x27;/user/data&#x27;
  }
})
</code></div></div>
<h5 id="switches" class="title_3b154">switches<a class="link_3b154 header-anchor" aria-hidden="true" href="#switches">#</a></h5>
<p class="my-4 leading-7">The command line switches used by the Chrome browser that are also supported by Electron. Here&#x27;s a list of supported Chrome command line switches: <a target="_blank" rel="noopener noreferrer" href="https://github.com/atom/electron/blob/master/docs/api/chrome-command-line-switches.md" class="link_03735  link_3b154 inline-link_3b154">https://github.com/atom/electron/blob/master/docs/api/chrome-command-line-switches.md</a></p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>const nightmare = Nightmare({
  switches: {
    &#x27;proxy-server&#x27;: &#x27;1.2.3.4:5678&#x27;,
    &#x27;ignore-certificate-errors&#x27;: true
  }
})
</code></div></div>
<h5 id="electronpath" class="title_3b154">electronPath<a class="link_3b154 header-anchor" aria-hidden="true" href="#electronpath">#</a></h5>
<p class="my-4 leading-7">The path to the prebuilt Electron binary. This is useful for testing on different versions of Electron. Note that Nightmare only supports the version on which this package depends. Use this option at your own risk.</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>const nightmare = Nightmare({
  electronPath: require(&#x27;electron&#x27;)
})
</code></div></div>
<h5 id="dock-os-x" class="title_3b154">dock (OS X)<a class="link_3b154 header-anchor" aria-hidden="true" href="#dock-os-x">#</a></h5>
<p class="my-4 leading-7">A boolean to optionally show the Electron icon in the dock (defaults to <code>false</code>). This is useful for testing purposes.</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>const nightmare = Nightmare({
  dock: true
})
</code></div></div>
<h5 id="opendevtools" class="title_3b154">openDevTools<a class="link_3b154 header-anchor" aria-hidden="true" href="#opendevtools">#</a></h5>
<p class="my-4 leading-7">Optionally shows the DevTools in the Electron window using <code>true</code>, or use an object hash containing <code>mode: &#x27;detach&#x27;</code> to show in a separate window. The hash gets passed to <a target="_blank" rel="noopener noreferrer" href="https://github.com/electron/electron/blob/master/docs/api/web-contents.md#contentsopendevtoolsoptions" class="link_03735  link_3b154 inline-link_3b154"><code>contents.openDevTools()</code></a> to be handled. This is also useful for testing purposes. Note that this option is honored only if <code>show</code> is set to <code>true</code>.</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>const nightmare = Nightmare({
  openDevTools: {
    mode: &#x27;detach&#x27;
  },
  show: true
})
</code></div></div>
<h5 id="typeinterval-default-100ms" class="title_3b154">typeInterval (default: 100ms)<a class="link_3b154 header-anchor" aria-hidden="true" href="#typeinterval-default-100ms">#</a></h5>
<p class="my-4 leading-7">How long to wait between keystrokes when using <code>.type()</code>.</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>const nightmare = Nightmare({
  typeInterval: 20
})
</code></div></div>
<h5 id="pollinterval-default-250ms" class="title_3b154">pollInterval (default: 250ms)<a class="link_3b154 header-anchor" aria-hidden="true" href="#pollinterval-default-250ms">#</a></h5>
<p class="my-4 leading-7">How long to wait between checks for the <code>.wait()</code> condition to be successful.</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>const nightmare = Nightmare({
  pollInterval: 50 //in ms
})
</code></div></div>
<h5 id="maxauthretries-default-3" class="title_3b154">maxAuthRetries (default: 3)<a class="link_3b154 header-anchor" aria-hidden="true" href="#maxauthretries-default-3">#</a></h5>
<p class="my-4 leading-7">Defines the number of times to retry an authentication when set up with <code>.authenticate()</code>.</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>const nightmare = Nightmare({
  maxAuthRetries: 3
})
</code></div></div>
<h4 id="certificatesubjectname" class="mt-8 leading-6 text-lg title_3b154">certificateSubjectName<a class="link_3b154 header-anchor" aria-hidden="true" href="#certificatesubjectname">#</a></h4>
<p class="my-4 leading-7">A string to determine the client certificate selected by electron. If this options is set, the <a target="_blank" rel="noopener noreferrer" href="https://github.com/electron/electron/blob/master/docs/api/app.md#event-select-client-certificate" class="link_03735  link_3b154 inline-link_3b154"><code>select-client-certificate</code></a> event will be set to loop through the certificateList and find the first certificate that matches <code>subjectName</code> on the electron <a target="_blank" rel="noopener noreferrer" href="https://electronjs.org/docs/api/structures/certificate" class="link_03735  link_3b154 inline-link_3b154"><code>Certificate Object</code></a>.</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>const nightmare = Nightmare({
  certificateSubjectName: &#x27;tester&#x27;
})
</code></div></div>
<h4 id="engineversions" class="mt-8 leading-6 text-lg title_3b154">.engineVersions()<a class="link_3b154 header-anchor" aria-hidden="true" href="#engineversions">#</a></h4>
<p class="my-4 leading-7">Gets the versions for Electron and Chromium.</p>
<h4 id="useragentuseragent" class="mt-8 leading-6 text-lg title_3b154">.useragent(useragent)<a class="link_3b154 header-anchor" aria-hidden="true" href="#useragentuseragent">#</a></h4>
<p class="my-4 leading-7">Sets the <code>useragent</code> used by electron.</p>
<h4 id="authenticationuser-password" class="mt-8 leading-6 text-lg title_3b154">.authentication(user, password)<a class="link_3b154 header-anchor" aria-hidden="true" href="#authenticationuser-password">#</a></h4>
<p class="my-4 leading-7">Sets the <code>user</code> and <code>password</code> for accessing a web page using basic authentication. Be sure to set it before calling <code>.goto(url)</code>.</p>
<h4 id="end" class="mt-8 leading-6 text-lg title_3b154">.end()<a class="link_3b154 header-anchor" aria-hidden="true" href="#end">#</a></h4>
<p class="my-4 leading-7">Completes any queue operations, disconnect and close the electron process. Note that if you&#x27;re using promises, <code>.then()</code> must be called after <code>.end()</code> to run the <code>.end()</code> task. Also note that if using an <code>.end()</code> callback, the <code>.end()</code> call is equivalent to calling <code>.end()</code> followed by <code>.then(fn)</code>. Consider:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>nightmare
  .goto(someUrl)
  .end(() =&gt; &#x27;some value&#x27;)
  //prints &quot;some value&quot;
  .then(console.log)
</code></div></div>
<h4 id="halterror-done" class="mt-8 leading-6 text-lg title_3b154">.halt(error, done)<a class="link_3b154 header-anchor" aria-hidden="true" href="#halterror-done">#</a></h4>
<p class="my-4 leading-7">Clears all queued operations, kills the electron process, and passes error message or &#x27;Nightmare Halted&#x27; to an unresolved promise. Done will be called after the process has exited.</p>
<h3 id="interact-with-the-page" class="mt-10 mb-2 leading-7 text-xl title_3b154">Interact with the Page<a class="link_3b154 header-anchor" aria-hidden="true" href="#interact-with-the-page">#</a></h3>
<h4 id="gotourl-headers" class="mt-8 leading-6 text-lg title_3b154">.goto(url[, headers])<a class="link_3b154 header-anchor" aria-hidden="true" href="#gotourl-headers">#</a></h4>
<p class="my-4 leading-7">Loads the page at <code>url</code>. Optionally, a <code>headers</code> hash can be supplied to set headers on the <code>goto</code> request.</p>
<p class="my-4 leading-7">When a page load is successful, <code>goto</code> returns an object with metadata about the page load, including:</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><code>url</code>: The URL that was loaded</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>code</code>: The HTTP status code (e.g. 200, 404, 500)</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>method</code>: The HTTP method used (e.g. &quot;GET&quot;, &quot;POST&quot;)</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>referrer</code>: The page that the window was displaying prior to this load or an empty string if this is the first page load.</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>headers</code>: An object representing the response headers for the request as in <code>{header1-name: header1-value, header2-name: header2-value}</code></li>
</ul>
<p class="my-4 leading-7">If the page load fails, the error will be an object with the following properties:</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><code>message</code>: A string describing the type of error</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>code</code>: The underlying error code describing what went wrong. Note this is NOT the HTTP status code. For possible values, see <a target="_blank" rel="noopener noreferrer" href="https://code.google.com/p/chromium/codesearch#chromium/src/net/base/net_error_list.h" class="link_03735  link_3b154 inline-link_3b154">https://code.google.com/p/chromium/codesearch#chromium/src/net/base/net_error_list.h</a></li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>details</code>: A string with additional details about the error. This may be null or an empty string.</li>
<li class="[&amp;:not(:first-child)]:mt-2"><code>url</code>: The URL that failed to load</li>
</ul>
<p class="my-4 leading-7">Note that any valid response from a server is considered “successful.” That means things like 404 “not found” errors are successful results for <code>goto</code>. Only things that would cause no page to appear in the browser window, such as no server responding at the given address, the server hanging up in the middle of a response, or invalid URLs, are errors.</p>
<p class="my-4 leading-7">You can also adjust how long <code>goto</code> will wait before timing out by setting the <a target="_blank" rel="noopener noreferrer" href="https://github.com/segmentio/nightmare#gototimeout-default-30s" class="link_03735  link_3b154 inline-link_3b154"><code>gotoTimeout</code> option</a> on the Nightmare constructor.</p>
<h4 id="back" class="mt-8 leading-6 text-lg title_3b154">.back()<a class="link_3b154 header-anchor" aria-hidden="true" href="#back">#</a></h4>
<p class="my-4 leading-7">Goes back to the previous page.</p>
<h4 id="forward" class="mt-8 leading-6 text-lg title_3b154">.forward()<a class="link_3b154 header-anchor" aria-hidden="true" href="#forward">#</a></h4>
<p class="my-4 leading-7">Goes forward to the next page.</p>
<h4 id="refresh" class="mt-8 leading-6 text-lg title_3b154">.refresh()<a class="link_3b154 header-anchor" aria-hidden="true" href="#refresh">#</a></h4>
<p class="my-4 leading-7">Refreshes the current page.</p>
<h4 id="clickselector" class="mt-8 leading-6 text-lg title_3b154">.click(selector)<a class="link_3b154 header-anchor" aria-hidden="true" href="#clickselector">#</a></h4>
<p class="my-4 leading-7">Clicks the <code>selector</code> element once.</p>
<h4 id="mousedownselector" class="mt-8 leading-6 text-lg title_3b154">.mousedown(selector)<a class="link_3b154 header-anchor" aria-hidden="true" href="#mousedownselector">#</a></h4>
<p class="my-4 leading-7">Mousedowns the <code>selector</code> element once.</p>
<h4 id="mouseupselector" class="mt-8 leading-6 text-lg title_3b154">.mouseup(selector)<a class="link_3b154 header-anchor" aria-hidden="true" href="#mouseupselector">#</a></h4>
<p class="my-4 leading-7">Mouseups the <code>selector</code> element once.</p>
<h4 id="mouseoverselector" class="mt-8 leading-6 text-lg title_3b154">.mouseover(selector)<a class="link_3b154 header-anchor" aria-hidden="true" href="#mouseoverselector">#</a></h4>
<p class="my-4 leading-7">Mouseovers the <code>selector</code> element once.</p>
<h4 id="mouseoutselector" class="mt-8 leading-6 text-lg title_3b154">.mouseout(selector)<a class="link_3b154 header-anchor" aria-hidden="true" href="#mouseoutselector">#</a></h4>
<p class="my-4 leading-7">Mouseout the <code>selector</code> element once.</p>
<h4 id="typeselector-text" class="mt-8 leading-6 text-lg title_3b154">.type(selector[, text])<a class="link_3b154 header-anchor" aria-hidden="true" href="#typeselector-text">#</a></h4>
<p class="my-4 leading-7">Enters the <code>text</code> provided into the <code>selector</code> element. Empty or falsey values provided for <code>text</code> will clear the selector&#x27;s value.</p>
<p class="my-4 leading-7"><code>.type()</code> mimics a user typing in a textbox and will emit the proper keyboard events.</p>
<p class="my-4 leading-7">Key presses can also be fired using Unicode values with <code>.type()</code>. For example, if you wanted to fire an enter key press, you would write <code>.type(&#x27;body&#x27;, &#x27;\u000d&#x27;)</code>.</p>
<blockquote class="border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 blockquote_3b154">
<p class="my-4 leading-7">If you don&#x27;t need the keyboard events, consider using <code>.insert()</code> instead as it will be faster and more robust.</p>
</blockquote>
<h4 id="insertselector-text" class="mt-8 leading-6 text-lg title_3b154">.insert(selector[, text])<a class="link_3b154 header-anchor" aria-hidden="true" href="#insertselector-text">#</a></h4>
<p class="my-4 leading-7">Similar to <code>.type()</code>, <code>.insert()</code> enters the <code>text</code> provided into the <code>selector</code> element. Empty or falsey values provided for <code>text</code> will clear the selector&#x27;s value.</p>
<p class="my-4 leading-7"><code>.insert()</code> is faster than <code>.type()</code> but does not trigger the keyboard events.</p>
<h4 id="checkselector" class="mt-8 leading-6 text-lg title_3b154">.check(selector)<a class="link_3b154 header-anchor" aria-hidden="true" href="#checkselector">#</a></h4>
<p class="my-4 leading-7">Checks the <code>selector</code> checkbox element.</p>
<h4 id="uncheckselector" class="mt-8 leading-6 text-lg title_3b154">.uncheck(selector)<a class="link_3b154 header-anchor" aria-hidden="true" href="#uncheckselector">#</a></h4>
<p class="my-4 leading-7">Unchecks the <code>selector</code> checkbox element.</p>
<h4 id="selectselector-option" class="mt-8 leading-6 text-lg title_3b154">.select(selector, option)<a class="link_3b154 header-anchor" aria-hidden="true" href="#selectselector-option">#</a></h4>
<p class="my-4 leading-7">Changes the <code>selector</code> dropdown element to the option with attribute [value=<code>option</code>]</p>
<h4 id="scrolltotop-left" class="mt-8 leading-6 text-lg title_3b154">.scrollTo(top, left)<a class="link_3b154 header-anchor" aria-hidden="true" href="#scrolltotop-left">#</a></h4>
<p class="my-4 leading-7">Scrolls the page to desired position. <code>top</code> and <code>left</code> are always relative to the top left corner of the document.</p>
<h4 id="viewportwidth-height" class="mt-8 leading-6 text-lg title_3b154">.viewport(width, height)<a class="link_3b154 header-anchor" aria-hidden="true" href="#viewportwidth-height">#</a></h4>
<p class="my-4 leading-7">Sets the viewport size.</p>
<h4 id="injecttype-file" class="mt-8 leading-6 text-lg title_3b154">.inject(type, file)<a class="link_3b154 header-anchor" aria-hidden="true" href="#injecttype-file">#</a></h4>
<p class="my-4 leading-7">Injects a local <code>file</code> onto the current page. The file <code>type</code> must be either <code>js</code> or <code>css</code>.</p>
<h4 id="evaluatefn-arg1-arg2" class="mt-8 leading-6 text-lg title_3b154">.evaluate(fn[, arg1, arg2,...])<a class="link_3b154 header-anchor" aria-hidden="true" href="#evaluatefn-arg1-arg2">#</a></h4>
<p class="my-4 leading-7">Invokes <code>fn</code> on the page with <code>arg1, arg2,...</code>. All the <code>args</code> are optional. On completion it returns the return value of <code>fn</code>. Useful for extracting information from the page. Here&#x27;s an example:</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">const</span><span> selector </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;h1&#x27;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">nightmare
</span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">evaluate</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter">selector</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-comment)">// now we&#x27;re executing inside the browser scope.</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-keyword)">return</span><span> document</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">querySelector</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>selector</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>innerText
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> selector</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-comment)">// &lt;-- that&#x27;s how you pass parameters from Node scope to browser scope</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">then</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter">text</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-comment)">// ...</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span></span></code></pre></div><div class="code-button-group_15153"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">Error-first callbacks are supported as a part of <code>evaluate()</code>. If the arguments passed are one fewer than the arguments expected for the evaluated function, the evaluation will be passed a callback as the last parameter to the function. For example:</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">const</span><span> selector </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;h1&#x27;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">nightmare
</span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">evaluate</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter">selector</span><span class="token parameter" style="color:var(--code-token-punctuation)">,</span><span class="token parameter"> done</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-comment)">// now we&#x27;re executing inside the browser scope.</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-function)">setTimeout</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-function)">done</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-keyword)">null</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> document</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">querySelector</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>selector</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>innerText</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token number">2000</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> selector</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">then</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter">text</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-comment)">// ...</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span></span></code></pre></div><div class="code-button-group_15153"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">Note that callbacks support only one value argument (eg <code>function(err, value)</code>). Ultimately, the callback will get wrapped in a native Promise and only be able to resolve a single value.</p>
<p class="my-4 leading-7">Promises are also supported as a part of <code>evaluate()</code>. If the return value of the function has a <code>then</code> member, <code>.evaluate()</code> assumes it is waiting for a promise. For example:</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">const</span><span> selector </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;h1&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">nightmare
</span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">evaluate</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter">selector</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-keyword)">new</span><span> </span><span class="token class-name">Promise</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter">resolve</span><span class="token parameter" style="color:var(--code-token-punctuation)">,</span><span class="token parameter"> reject</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-function)">setTimeout</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-function)">resolve</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>document</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">querySelector</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>selector</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>innerText</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token number">2000</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> selector</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">then</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter">text</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-comment)">// ...</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span></span></code></pre></div><div class="code-button-group_15153"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<h4 id="waitms" class="mt-8 leading-6 text-lg title_3b154">.wait(ms)<a class="link_3b154 header-anchor" aria-hidden="true" href="#waitms">#</a></h4>
<p class="my-4 leading-7">Waits for <code>ms</code> milliseconds e.g. <code>.wait(5000)</code>.</p>
<h4 id="waitselector" class="mt-8 leading-6 text-lg title_3b154">.wait(selector)<a class="link_3b154 header-anchor" aria-hidden="true" href="#waitselector">#</a></h4>
<p class="my-4 leading-7">Waits until the element <code>selector</code> is present e.g. <code>.wait(&#x27;#pay-button&#x27;)</code>.</p>
<h4 id="waitfn-arg1-arg2" class="mt-8 leading-6 text-lg title_3b154">.wait(fn[, arg1, arg2,...])<a class="link_3b154 header-anchor" aria-hidden="true" href="#waitfn-arg1-arg2">#</a></h4>
<p class="my-4 leading-7">Waits until the <code>fn</code> evaluated on the page with <code>arg1, arg2,...</code> returns <code>true</code>. All the <code>args</code> are optional. See <code>.evaluate()</code> for usage.</p>
<h4 id="headerheader-value" class="mt-8 leading-6 text-lg title_3b154">.header(header, value)<a class="link_3b154 header-anchor" aria-hidden="true" href="#headerheader-value">#</a></h4>
<p class="my-4 leading-7">Adds a header override for all HTTP requests. If <code>header</code> is undefined, the header overrides will be reset.</p>
<h3 id="extract-from-the-page" class="mt-10 mb-2 leading-7 text-xl title_3b154">Extract from the Page<a class="link_3b154 header-anchor" aria-hidden="true" href="#extract-from-the-page">#</a></h3>
<h4 id="existsselector" class="mt-8 leading-6 text-lg title_3b154">.exists(selector)<a class="link_3b154 header-anchor" aria-hidden="true" href="#existsselector">#</a></h4>
<p class="my-4 leading-7">Returns whether the selector exists or not on the page.</p>
<h4 id="visibleselector" class="mt-8 leading-6 text-lg title_3b154">.visible(selector)<a class="link_3b154 header-anchor" aria-hidden="true" href="#visibleselector">#</a></h4>
<p class="my-4 leading-7">Returns whether the selector is visible or not.</p>
<h4 id="onevent-callback" class="mt-8 leading-6 text-lg title_3b154">.on(event, callback)<a class="link_3b154 header-anchor" aria-hidden="true" href="#onevent-callback">#</a></h4>
<p class="my-4 leading-7">Captures page events with the callback. You have to call <code>.on()</code> before calling <code>.goto()</code>. Supported events are <a target="_blank" rel="noopener noreferrer" href="http://electron.atom.io/docs/api/web-contents/#class-webcontents" class="link_03735  link_3b154 inline-link_3b154">documented here</a>.</p>
<h5 id="additional-page-events" class="title_3b154">Additional &quot;page&quot; events<a class="link_3b154 header-anchor" aria-hidden="true" href="#additional-page-events">#</a></h5>
<h6 id="onpage-functiontypeerror-message-stack" class="title_3b154">.on(&#x27;page&#x27;, function(type=&quot;error&quot;, message, stack))<a class="link_3b154 header-anchor" aria-hidden="true" href="#onpage-functiontypeerror-message-stack">#</a></h6>
<p class="my-4 leading-7">This event is triggered if any javascript exception is thrown on the page. But this event is not triggered if the injected javascript code (e.g. via <code>.evaluate()</code>) is throwing an exception.</p>
<h5 id="page-events" class="title_3b154">&quot;page&quot; events<a class="link_3b154 header-anchor" aria-hidden="true" href="#page-events">#</a></h5>
<p class="my-4 leading-7">Listens for <code>window.addEventListener(&#x27;error&#x27;)</code>, <code>alert(...)</code>, <code>prompt(...)</code> &amp; <code>confirm(...)</code>.</p>
<h6 id="onpage-functiontypeerror-message-stack-1" class="title_3b154">.on(&#x27;page&#x27;, function(type=&quot;error&quot;, message, stack))<a class="link_3b154 header-anchor" aria-hidden="true" href="#onpage-functiontypeerror-message-stack-1">#</a></h6>
<p class="my-4 leading-7">Listens for top-level page errors. This will get triggered when an error is thrown on the page.</p>
<h6 id="onpage-functiontypealert-message" class="title_3b154">.on(&#x27;page&#x27;, function(type=&quot;alert&quot;, message))<a class="link_3b154 header-anchor" aria-hidden="true" href="#onpage-functiontypealert-message">#</a></h6>
<p class="my-4 leading-7">Nightmare disables <code>window.alert</code> from popping up by default, but you can still listen for the contents of the alert dialog.</p>
<h6 id="onpage-functiontypeprompt-message-response" class="title_3b154">.on(&#x27;page&#x27;, function(type=&quot;prompt&quot;, message, response))<a class="link_3b154 header-anchor" aria-hidden="true" href="#onpage-functiontypeprompt-message-response">#</a></h6>
<p class="my-4 leading-7">Nightmare disables <code>window.prompt</code> from popping up by default, but you can still listen for the message to come up. If you need to handle the confirmation differently, you&#x27;ll need to use your own preload script.</p>
<h6 id="onpage-functiontypeconfirm-message-response" class="title_3b154">.on(&#x27;page&#x27;, function(type=&quot;confirm&quot;, message, response))<a class="link_3b154 header-anchor" aria-hidden="true" href="#onpage-functiontypeconfirm-message-response">#</a></h6>
<p class="my-4 leading-7">Nightmare disables <code>window.confirm</code> from popping up by default, but you can still listen for the message to come up. If you need to handle the confirmation differently, you&#x27;ll need to use your own preload script.</p>
<h6 id="onconsole-functiontype--arguments-" class="title_3b154">.on(&#x27;console&#x27;, function(type [, arguments, ...]))<a class="link_3b154 header-anchor" aria-hidden="true" href="#onconsole-functiontype--arguments-">#</a></h6>
<p class="my-4 leading-7"><code>type</code> will be either <code>log</code>, <code>warn</code> or <code>error</code> and <code>arguments</code> are what gets passed from the console. This event is not triggered if the injected javascript code (e.g. via <code>.evaluate()</code>) is using <code>console.log</code>.</p>
<h4 id="onceevent-callback" class="mt-8 leading-6 text-lg title_3b154">.once(event, callback)<a class="link_3b154 header-anchor" aria-hidden="true" href="#onceevent-callback">#</a></h4>
<p class="my-4 leading-7">Similar to <code>.on()</code>, but captures page events with the callback one time.</p>
<h4 id="removelistenerevent-callback" class="mt-8 leading-6 text-lg title_3b154">.removeListener(event, callback)<a class="link_3b154 header-anchor" aria-hidden="true" href="#removelistenerevent-callback">#</a></h4>
<p class="my-4 leading-7">Removes a given listener callback for an event.</p>
<h4 id="screenshotpath-clip" class="mt-8 leading-6 text-lg title_3b154">.screenshot([path][, clip])<a class="link_3b154 header-anchor" aria-hidden="true" href="#screenshotpath-clip">#</a></h4>
<p class="my-4 leading-7">Takes a screenshot of the current page. Useful for debugging. The output is always a <code>png</code>. Both arguments are optional. If <code>path</code> is provided, it saves the image to the disk. Otherwise it returns a <code>Buffer</code> of the image data. If <code>clip</code> is provided (as <a target="_blank" rel="noopener noreferrer" href="https://github.com/atom/electron/blob/master/docs/api/browser-window.md#wincapturepagerect-callback" class="link_03735  link_3b154 inline-link_3b154">documented here</a>), the image will be clipped to the rectangle.</p>
<h4 id="htmlpath-savetype" class="mt-8 leading-6 text-lg title_3b154">.html(path, saveType)<a class="link_3b154 header-anchor" aria-hidden="true" href="#htmlpath-savetype">#</a></h4>
<p class="my-4 leading-7">Saves the current page as html as files to disk at the given path. Save type options are <a target="_blank" rel="noopener noreferrer" href="https://github.com/atom/electron/blob/master/docs/api/web-contents.md#webcontentssavepagefullpath-savetype-callback" class="link_03735  link_3b154 inline-link_3b154">here</a>.</p>
<h4 id="pdfpath-options" class="mt-8 leading-6 text-lg title_3b154">.pdf(path, options)<a class="link_3b154 header-anchor" aria-hidden="true" href="#pdfpath-options">#</a></h4>
<p class="my-4 leading-7">Saves a PDF to the specified <code>path</code>. Options are <a target="_blank" rel="noopener noreferrer" href="https://github.com/electron/electron/blob/v1.4.4/docs/api/web-contents.md#contentsprinttopdfoptions-callback" class="link_03735  link_3b154 inline-link_3b154">here</a>.</p>
<h4 id="title" class="mt-8 leading-6 text-lg title_3b154">.title()<a class="link_3b154 header-anchor" aria-hidden="true" href="#title">#</a></h4>
<p class="my-4 leading-7">Returns the title of the current page.</p>
<h4 id="url" class="mt-8 leading-6 text-lg title_3b154">.url()<a class="link_3b154 header-anchor" aria-hidden="true" href="#url">#</a></h4>
<p class="my-4 leading-7">Returns the url of the current page.</p>
<h4 id="path" class="mt-8 leading-6 text-lg title_3b154">.path()<a class="link_3b154 header-anchor" aria-hidden="true" href="#path">#</a></h4>
<p class="my-4 leading-7">Returns the path name of the current page.</p>
<h3 id="cookies" class="mt-10 mb-2 leading-7 text-xl title_3b154">Cookies<a class="link_3b154 header-anchor" aria-hidden="true" href="#cookies">#</a></h3>
<h4 id="cookiesgetname" class="mt-8 leading-6 text-lg title_3b154">.cookies.get(name)<a class="link_3b154 header-anchor" aria-hidden="true" href="#cookiesgetname">#</a></h4>
<p class="my-4 leading-7">Gets a cookie by it&#x27;s <code>name</code>. The url will be the current url.</p>
<h4 id="cookiesgetquery" class="mt-8 leading-6 text-lg title_3b154">.cookies.get(query)<a class="link_3b154 header-anchor" aria-hidden="true" href="#cookiesgetquery">#</a></h4>
<p class="my-4 leading-7">Queries multiple cookies with the <code>query</code> object. If a <code>query.name</code> is set, it will return the first cookie it finds with that name, otherwise it will query for an array of cookies. If no <code>query.url</code> is set, it will use the current url. Here&#x27;s an example:</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)">// get all google cookies that are secure</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)">// and have the path `/query`</span><span>
</span></span><span style="display:block;padding:0 1.25rem">nightmare
</span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">goto</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;http://google.com&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>cookies</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">get</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">path</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;/query&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">secure</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">then</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter">cookies</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-comment)">// do something with the cookies</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span></span></code></pre></div><div class="code-button-group_15153"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">Available properties are documented here: <a target="_blank" rel="noopener noreferrer" href="https://github.com/atom/electron/blob/master/docs/api/session.md#sescookiesgetdetails-callback" class="link_03735  link_3b154 inline-link_3b154">https://github.com/atom/electron/blob/master/docs/api/session.md#sescookiesgetdetails-callback</a></p>
<h4 id="cookiesget" class="mt-8 leading-6 text-lg title_3b154">.cookies.get()<a class="link_3b154 header-anchor" aria-hidden="true" href="#cookiesget">#</a></h4>
<p class="my-4 leading-7">Gets all the cookies for the current url. If you&#x27;d like get all cookies for all urls, use: <code>.get({ url: null })</code>.</p>
<h4 id="cookiessetname-value" class="mt-8 leading-6 text-lg title_3b154">.cookies.set(name, value)<a class="link_3b154 header-anchor" aria-hidden="true" href="#cookiessetname-value">#</a></h4>
<p class="my-4 leading-7">Sets a cookie&#x27;s <code>name</code> and <code>value</code>. This is the most basic form, and the url will be the current url.</p>
<h4 id="cookiessetcookie" class="mt-8 leading-6 text-lg title_3b154">.cookies.set(cookie)<a class="link_3b154 header-anchor" aria-hidden="true" href="#cookiessetcookie">#</a></h4>
<p class="my-4 leading-7">Sets a <code>cookie</code>. If <code>cookie.url</code> is not set, it will set the cookie on the current url. Here&#x27;s an example:</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>nightmare
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">goto</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;http://google.com&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>cookies</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">set</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">name</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;token&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">value</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;some token&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">path</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;/query&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token literal-property" style="color:var(--code-token-parameter)">secure</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-comment)">// ... other actions ...</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">then</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-comment)">// ...</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span></span></code></pre></div><div class="code-button-group_15153"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">Available properties are documented here: <a target="_blank" rel="noopener noreferrer" href="https://github.com/atom/electron/blob/master/docs/api/session.md#sescookiessetdetails-callback" class="link_03735  link_3b154 inline-link_3b154">https://github.com/atom/electron/blob/master/docs/api/session.md#sescookiessetdetails-callback</a></p>
<h4 id="cookiessetcookies" class="mt-8 leading-6 text-lg title_3b154">.cookies.set(cookies)<a class="link_3b154 header-anchor" aria-hidden="true" href="#cookiessetcookies">#</a></h4>
<p class="my-4 leading-7">Sets multiple cookies at once. <code>cookies</code> is an array of <code>cookie</code> objects. Take a look at the <code>.cookies.set(cookie)</code> documentation above for a better idea of what <code>cookie</code> should look like.</p>
<h4 id="cookiesclearname" class="mt-8 leading-6 text-lg title_3b154">.cookies.clear([name])<a class="link_3b154 header-anchor" aria-hidden="true" href="#cookiesclearname">#</a></h4>
<p class="my-4 leading-7">Clears a cookie for the current domain. If <code>name</code> is not specified, all cookies for the current domain will be cleared.</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>nightmare
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">goto</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;http://google.com&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>cookies</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">clear</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;SomeCookieName&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-comment)">// ... other actions ...</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">then</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-comment)">// ...</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span></span></code></pre></div><div class="code-button-group_15153"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<h4 id="cookiesclearall" class="mt-8 leading-6 text-lg title_3b154">.cookies.clearAll()<a class="link_3b154 header-anchor" aria-hidden="true" href="#cookiesclearall">#</a></h4>
<p class="my-4 leading-7">Clears all cookies for all domains.</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>nightmare
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">goto</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;http://google.com&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>cookies</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">clearAll</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-comment)">// ... other actions ...</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">then</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-comment)">//...</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span></span></code></pre></div><div class="code-button-group_15153"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<h3 id="proxies" class="mt-10 mb-2 leading-7 text-xl title_3b154">Proxies<a class="link_3b154 header-anchor" aria-hidden="true" href="#proxies">#</a></h3>
<p class="my-4 leading-7">Proxies are supported in Nightmare through <a target="_blank" rel="noopener noreferrer" href="https://github.com/segmentio/nightmare#switches" class="link_03735  link_3b154 inline-link_3b154">switches</a>.</p>
<p class="my-4 leading-7">If your proxy requires authentication you also need the <a target="_blank" rel="noopener noreferrer" href="https://github.com/segmentio/nightmare#authenticationuser-password" class="link_03735  link_3b154 inline-link_3b154">authentication</a> call.</p>
<p class="my-4 leading-7">The following example not only demonstrates how to use proxies, but you can run it to test if your proxy connection is working:</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">import</span><span> Nightmare </span><span class="token" style="color:var(--code-token-keyword)">from</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;nightmare&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">const</span><span> proxyNightmare </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-function)">Nightmare</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">switches</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token string-property" style="color:var(--code-token-parameter)">&#x27;proxy-server&#x27;</span><span class="token operator">:</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;my_proxy_server.example.com:8080&#x27;</span><span> </span><span class="token" style="color:var(--code-token-comment)">// set the proxy server here ...</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token literal-property" style="color:var(--code-token-parameter)">show</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem">proxyNightmare
</span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">authentication</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;proxyUsername&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;proxyPassword&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-comment)">// ... and authenticate here before `goto`</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">goto</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;http://www.ipchicken.com&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">evaluate</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-keyword)">return</span><span> document</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">querySelector</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;b&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>innerText</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">replace</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token regex-delimiter" style="color:var(--code-token-keyword)">/</span><span class="token regex-source language-regex" style="color:var(--code-token-keyword)">[^\d\.]</span><span class="token regex-delimiter" style="color:var(--code-token-keyword)">/</span><span class="token regex-flags" style="color:var(--code-token-keyword)">g</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">end</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">then</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter">ip</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> </span><span class="token" style="color:var(--code-token-comment)">// This will log the Proxy&#x27;s IP</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    console</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">log</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;proxy IP:&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> ip</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)">// The rest is just normal Nightmare to get your local IP</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">const</span><span> regularNightmare </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-function)">Nightmare</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> </span><span class="token literal-property" style="color:var(--code-token-parameter)">show</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem">regularNightmare
</span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">goto</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;http://www.ipchicken.com&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">evaluate</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    document</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">querySelector</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;b&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>innerText</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">replace</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token regex-delimiter" style="color:var(--code-token-keyword)">/</span><span class="token regex-source language-regex" style="color:var(--code-token-keyword)">[^\d\.]</span><span class="token regex-delimiter" style="color:var(--code-token-keyword)">/</span><span class="token regex-flags" style="color:var(--code-token-keyword)">g</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">end</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">then</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter">ip</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token operator">=&gt;</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> </span><span class="token" style="color:var(--code-token-comment)">// This will log the your local IP</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    console</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">log</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;local IP:&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> ip</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre></div><div class="code-button-group_15153"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<h3 id="promises" class="mt-10 mb-2 leading-7 text-xl title_3b154">Promises<a class="link_3b154 header-anchor" aria-hidden="true" href="#promises">#</a></h3>
<p class="my-4 leading-7">By default, Nightmare uses default native ES6 promises. You can plug in your favorite <a target="_blank" rel="noopener noreferrer" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="link_03735  link_3b154 inline-link_3b154">ES6-style promises library</a> like <a target="_blank" rel="noopener noreferrer" href="https://www.npmjs.com/package/bluebird" class="link_03735  link_3b154 inline-link_3b154">bluebird</a> or <a target="_blank" rel="noopener noreferrer" href="https://www.npmjs.com/package/q" class="link_03735  link_3b154 inline-link_3b154">q</a> for convenience!</p>
<p class="my-4 leading-7">Here&#x27;s an example:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>var Nightmare = require(&#x27;nightmare&#x27;)

Nightmare.Promise = require(&#x27;bluebird&#x27;)
// OR:
Nightmare.Promise = require(&#x27;q&#x27;).Promise
</code></div></div>
<p class="my-4 leading-7">You can also specify a custom Promise library per-instance with the <code>Promise</code> constructor option like so:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>var Nightmare = require(&#x27;nightmare&#x27;)

var es6Nightmare = Nightmare()
var bluebirdNightmare = Nightmare({
  Promise: require(&#x27;bluebird&#x27;)
})

var es6Promise = es6Nightmare
  .goto(&#x27;https://github.com/segmentio/nightmare&#x27;)
  .then()
var bluebirdPromise = bluebirdNightmare
  .goto(&#x27;https://github.com/segmentio/nightmare&#x27;)
  .then()

es6Promise.isFulfilled() // throws: `TypeError: es6EndPromise.isFulfilled is not a function`
bluebirdPromise.isFulfilled() // returns: `true | false`
</code></div></div>
<h3 id="extending-nightmare" class="mt-10 mb-2 leading-7 text-xl title_3b154">Extending Nightmare<a class="link_3b154 header-anchor" aria-hidden="true" href="#extending-nightmare">#</a></h3>
<h4 id="nightmareactionname-electronactionelectronnamespace-actionnamespace" class="mt-8 leading-6 text-lg title_3b154">Nightmare.action(name, [electronAction|electronNamespace], action|namespace)<a class="link_3b154 header-anchor" aria-hidden="true" href="#nightmareactionname-electronactionelectronnamespace-actionnamespace">#</a></h4>
<p class="my-4 leading-7">You can add your own custom actions to the Nightmare prototype. Here&#x27;s an example:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>Nightmare.action(&#x27;size&#x27;, function(done) {
  this.evaluate_now(() =&gt; {
    const w = Math.max(
      document.documentElement.clientWidth,
      window.innerWidth || 0
    )
    const h = Math.max(
      document.documentElement.clientHeight,
      window.innerHeight || 0
    )
    return {
      height: h,
      width: w
    }
  }, done)
})

Nightmare()
  .goto(&#x27;http://cnn.com&#x27;)
  .size()
  .then(size =&gt; {
    //... do something with the size information
  })
</code></div></div>
<blockquote class="border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 blockquote_3b154">
<p class="my-4 leading-7">Remember, this is attached to the static class <code>Nightmare</code>, not the instance.</p>
</blockquote>
<p class="my-4 leading-7">You&#x27;ll notice we used an internal function <code>evaluate_now</code>. This function is different than <code>nightmare.evaluate</code> because it runs it immediately, whereas <code>nightmare.evaluate</code> is queued.</p>
<p class="my-4 leading-7">An easy way to remember: when in doubt, use <code>evaluate</code>. If you&#x27;re creating custom actions, use <code>evaluate_now</code>. The technical reason is that since our action has already been queued and we&#x27;re running it now, we shouldn&#x27;t re-queue the evaluate function.</p>
<p class="my-4 leading-7">We can also create custom namespaces. We do this internally for <code>nightmare.cookies.get</code> and <code>nightmare.cookies.set</code>. These are useful if you have a bundle of actions you want to expose, but it will clutter up the main nightmare object. Here&#x27;s an example of that:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>Nightmare.action(&#x27;style&#x27;, {
  background(done) {
    this.evaluate_now(
      () =&gt; window.getComputedStyle(document.body, null).backgroundColor,
      done
    )
  }
})

Nightmare()
  .goto(&#x27;http://google.com&#x27;)
  .style.background()
  .then(background =&gt; {
    // ... do something interesting with background
  })
</code></div></div>
<p class="my-4 leading-7">You can also add custom Electron actions. The additional Electron action or namespace actions take <code>name</code>, <code>options</code>, <code>parent</code>, <code>win</code>, <code>renderer</code>, and <code>done</code>. Note the Electron action comes first, mirroring how <code>.evaluate()</code> works. For example:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>Nightmare.action(
  &#x27;clearCache&#x27;,
  (name, options, parent, win, renderer, done) =&gt; {
    parent.respondTo(&#x27;clearCache&#x27;, done =&gt; {
      win.webContents.session.clearCache(done)
    })
    done()
  },
  function(done) {
    this.child.call(&#x27;clearCache&#x27;, done)
  }
)

Nightmare()
  .clearCache()
  .goto(&#x27;http://example.org&#x27;)
  //... more actions ...
  .then(() =&gt; {
    // ...
  })
</code></div></div>
<p class="my-4 leading-7">...would clear the browser’s cache before navigating to <code>example.org</code>.</p>
<p class="my-4 leading-7">See <a target="_blank" rel="noopener noreferrer" href="https://github.com/rosshinkley/nightmare-examples/blob/master/docs/beginner/action.md" class="link_03735  link_3b154 inline-link_3b154">this document</a> for more details on creating custom actions.</p>
<h4 id="useplugin" class="mt-8 leading-6 text-lg title_3b154">.use(plugin)<a class="link_3b154 header-anchor" aria-hidden="true" href="#useplugin">#</a></h4>
<p class="my-4 leading-7"><code>nightmare.use</code> is useful for reusing a set of tasks on an instance. Check out <a target="_blank" rel="noopener noreferrer" href="https://github.com/segmentio/nightmare-swiftly" class="link_03735  link_3b154 inline-link_3b154">nightmare-swiftly</a> for some examples.</p>
<h4 id="custom-preload-script" class="mt-8 leading-6 text-lg title_3b154">Custom preload script<a class="link_3b154 header-anchor" aria-hidden="true" href="#custom-preload-script">#</a></h4>
<p class="my-4 leading-7">If you need to do something custom when you first load the window environment, you can specify a custom preload script. Here&#x27;s how you do that:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>import path from &#x27;path&#x27;

const nightmare = Nightmare({
  webPreferences: {
    preload: path.resolve(&#x27;custom-script.js&#x27;)
    //alternative: preload: &quot;absolute/path/to/custom-script.js&quot;
  }
})
</code></div></div>
<p class="my-4 leading-7">The only requirement for that script is that you&#x27;ll need the following prelude:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>window.__nightmare = {}
__nightmare.ipc = require(&#x27;electron&#x27;).ipcRenderer
</code></div></div>
<p class="my-4 leading-7">To benefit of all of nightmare&#x27;s feedback from the browser, you can instead copy the contents of nightmare&#x27;s <a target="_blank" rel="noopener noreferrer" href="https://github.com/segmentio/nightmare/blob/master/lib/preload.js" class="link_03735  link_3b154 inline-link_3b154">preload script</a>.</p>
<h4 id="storage-persistence-between-nightmare-instances" class="mt-8 leading-6 text-lg title_3b154">Storage Persistence between nightmare instances<a class="link_3b154 header-anchor" aria-hidden="true" href="#storage-persistence-between-nightmare-instances">#</a></h4>
<p class="my-4 leading-7">By default nightmare will create an in-memory partition for each instance. This means that any localStorage or cookies or any other form of persistent state will be destroyed when nightmare is ended. If you would like to persist state between instances you can use the <a target="_blank" rel="noopener noreferrer" href="http://electron.atom.io/docs/api/browser-window/#new-browserwindowoptions" class="link_03735  link_3b154 inline-link_3b154">webPreferences.partition</a> api in electron.</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>import Nightmare from &#x27;nightmare&#x27;;

nightmare = Nightmare(); // non persistent paritition by default
yield nightmare
  .evaluate(() =&gt; {
    window.localStorage.setItem(&#x27;testing&#x27;, &#x27;This will not be persisted&#x27;);
  })
  .end();

nightmare = Nightmare({
  webPreferences: {
    partition: &#x27;persist: testing&#x27;
  }
});
yield nightmare
  .evaluate(() =&gt; {
    window.localStorage.setItem(&#x27;testing&#x27;, &#x27;This is persisted for other instances with the same paritition name&#x27;);
  })
  .end();
</code></div></div>
<p class="my-4 leading-7">If you specify a <code>null</code> paritition then it will use the electron default behavior (persistent) or any string that starts with <code>&#x27;persist:&#x27;</code> will persist under that partition name, any other string will result in in-memory only storage.</p>
<h2 id="usage" class="mt-12 mb-6 pt-8 text-2xl tracking-tight border-t-[1px] border-divider-light title_3b154">Usage<a class="link_3b154 header-anchor" aria-hidden="true" href="#usage">#</a></h2>
<h4 id="installation" class="mt-8 leading-6 text-lg title_3b154">Installation<a class="link_3b154 header-anchor" aria-hidden="true" href="#installation">#</a></h4>
<p class="my-4 leading-7">Nightmare is a Node.js module, so you&#x27;ll need to <a target="_blank" rel="noopener noreferrer" href="http://nodejs.org/" class="link_03735  link_3b154 inline-link_3b154">have Node.js installed</a>. Then you just need to <code>npm install</code> the module:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>$ npm install --save nightmare
</code></div></div>
<h4 id="execution" class="mt-8 leading-6 text-lg title_3b154">Execution<a class="link_3b154 header-anchor" aria-hidden="true" href="#execution">#</a></h4>
<p class="my-4 leading-7">Nightmare is a node module that can be used in a Node.js script or module. Here&#x27;s a simple script to open a web page:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>import Nightmare from &#x27;nightmare&#x27;;

const nightmare = Nightmare();

nightmare.goto(&#x27;http://cnn.com&#x27;)
  .evaluate(() =&gt; {
    return document.title;
  })
  .end()
  .then((title) =&gt; {
    console.log(title);
  })
</code></div></div>
<p class="my-4 leading-7">If you save this as <code>cnn.js</code>, you can run it on the command line like this:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>npm install --save nightmare
node cnn.js
</code></div></div>
<h4 id="common-execution-problems" class="mt-8 leading-6 text-lg title_3b154">Common Execution Problems<a class="link_3b154 header-anchor" aria-hidden="true" href="#common-execution-problems">#</a></h4>
<p class="my-4 leading-7">Nightmare heavily relies on <a target="_blank" rel="noopener noreferrer" href="http://electron.atom.io/" class="link_03735  link_3b154 inline-link_3b154">Electron</a> for heavy lifting. And Electron in turn relies on several UI-focused dependencies (eg. libgtk+) which are often missing from server distros.</p>
<p class="my-4 leading-7">For help running nightmare on your server distro check out <a target="_blank" rel="noopener noreferrer" href="https://gist.github.com/dimkir/f4afde77366ff041b66d2252b45a13db" class="link_03735  link_3b154 inline-link_3b154">How to run nightmare on Amazon Linux and CentOS</a> guide.</p>
<h4 id="debugging" class="mt-8 leading-6 text-lg title_3b154">Debugging<a class="link_3b154 header-anchor" aria-hidden="true" href="#debugging">#</a></h4>
<p class="my-4 leading-7">There are three good ways to get more information about what&#x27;s happening inside the headless browser:</p>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">Use the <code>DEBUG=*</code> flag described below.</li>
<li class="[&amp;:not(:first-child)]:mt-2">Pass <code>{ show: true }</code> to the <a target="_blank" rel="noopener noreferrer" href="https://github.com/segmentio/nightmare#nightmareoptions" class="link_03735  link_3b154 inline-link_3b154">nightmare constructor</a> to have it create a visible, rendered window where you can watch what is happening.</li>
<li class="[&amp;:not(:first-child)]:mt-2">Listen for <a target="_blank" rel="noopener noreferrer" href="https://github.com/segmentio/nightmare#onevent-callback" class="link_03735  link_3b154 inline-link_3b154">specific events</a>.</li>
</ol>
<p class="my-4 leading-7">To run the same file with debugging output, run it like this <code>DEBUG=nightmare node cnn.js</code> (on Windows use <code>set DEBUG=nightmare &amp; node cnn.js</code>).</p>
<p class="my-4 leading-7">This will print out some additional information about what&#x27;s going on:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>nightmare queueing action &quot;goto&quot; +0ms
nightmare queueing action &quot;evaluate&quot; +4ms
Breaking News, U.S., World, Weather, Entertainment &amp; Video News - CNN.com
</code></div></div>
<h5 id="debug-flags" class="title_3b154">Debug Flags<a class="link_3b154 header-anchor" aria-hidden="true" href="#debug-flags">#</a></h5>
<p class="my-4 leading-7">All nightmare messages</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>DEBUG=nightmare*
</code></div></div>
<p class="my-4 leading-7">Only actions</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>DEBUG=nightmare:actions*
</code></div></div>
<p class="my-4 leading-7">Only logs</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>DEBUG=nightmare:log*
</code></div></div>
<h2 id="additional-resources" class="mt-12 mb-6 pt-8 text-2xl tracking-tight border-t-[1px] border-divider-light title_3b154">Additional Resources<a class="link_3b154 header-anchor" aria-hidden="true" href="#additional-resources">#</a></h2>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><a target="_blank" rel="noopener noreferrer" href="https://github.com/rosshinkley/nightmare-examples" class="link_03735  link_3b154 inline-link_3b154">Ross Hinkley&#x27;s Nightmare Examples</a> is a great resource for setting up nightmare, learning about custom actions, and avoiding common pitfalls.</li>
<li class="[&amp;:not(:first-child)]:mt-2"><a target="_blank" rel="noopener noreferrer" href="https://github.com/matthewmueller/nightmare-issues" class="link_03735  link_3b154 inline-link_3b154">Nightmare Issues</a> has a bunch of standalone runnable examples. The script numbers correspond to nightmare issue numbers.</li>
<li class="[&amp;:not(:first-child)]:mt-2"><a target="_blank" rel="noopener noreferrer" href="https://hackernoon.com/nightmarishly-good-scraping-with-nightmare-js-and-async-await-b7b20a38438f" class="link_03735  link_3b154 inline-link_3b154">Nightmarishly good scraping</a> is a great tutorial by <a target="_blank" rel="noopener noreferrer" href="https://twitter.com/@aendrew" class="link_03735  link_3b154 inline-link_3b154">Ændrew Rininsland</a> on getting up &amp; running with Nightmare using real-life data.</li>
</ul>
<h2 id="tests" class="mt-12 mb-6 pt-8 text-2xl tracking-tight border-t-[1px] border-divider-light title_3b154">Tests<a class="link_3b154 header-anchor" aria-hidden="true" href="#tests">#</a></h2>
<p class="my-4 leading-7">Automated tests for nightmare itself are run using <a target="_blank" rel="noopener noreferrer" href="http://mochajs.org/" class="link_03735  link_3b154 inline-link_3b154">Mocha</a> and Chai, both of which will be installed via <code>npm install</code>. To run nightmare&#x27;s tests, just run <code>make test</code>.</p>
<p class="my-4 leading-7">When the tests are done, you&#x27;ll see something like this:</p>
<div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><code>make test
  ․․․․․․․․․․․․․․․․․․
  18 passing (1m)
</code></div></div>
<p class="my-4 leading-7">Note that if you are using <code>xvfb</code>, <code>make test</code> will automatically run the tests under an <code>xvfb-run</code> wrapper. If you are planning to run the tests headlessly without running <code>xvfb</code> first, set the <code>HEADLESS</code> environment variable to <code>0</code>.</p>
<p class="my-4 leading-7">下面是实际的案例</p>
<div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-js" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-keyword)">var</span><span> Nightmare </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-function)">require</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;nightmare&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-keyword)">var</span><span> nightmare </span><span class="token operator">=</span><span> </span><span class="token" style="color:var(--code-token-function)">Nightmare</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">{</span><span> </span><span class="token literal-property" style="color:var(--code-token-parameter)">show</span><span class="token operator">:</span><span> </span><span class="token boolean">true</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem">nightmare
</span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">goto</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;https://www.taobao.com/&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>  </span><span class="token" style="color:var(--code-token-comment)">//待测试链接</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">type</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;#q&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;电视机&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>   </span><span class="token" style="color:var(--code-token-comment)">//输入框选中，输入值</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">click</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;form[action*=&quot;/search&quot;] [type=submit]&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-comment)">//form表单提交</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">wait</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token number">3000</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">exists</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;#spulist-grid&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">evaluate</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-keyword)">function</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    </span><span class="token" style="color:var(--code-token-keyword)">return</span><span> document</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">querySelector</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;#spulist-grid .grid-item .info-cont&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-comment)">//获取需返回的值</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span>textContent</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">trim</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">end</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">then</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-keyword)">function</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter">result</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>  </span><span class="token" style="color:var(--code-token-comment)">//即为return中的数据</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    console</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">log</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span>result</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">catch</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-keyword)">function</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token parameter">error</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">{</span><span>  </span><span class="token" style="color:var(--code-token-comment)">//错误捕捉</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>    console</span><span class="token" style="color:var(--code-token-punctuation)">.</span><span class="token" style="color:var(--code-token-function)">error</span><span class="token" style="color:var(--code-token-punctuation)">(</span><span class="token" style="color:var(--code-token-string)">&#x27;Search failed:&#x27;</span><span class="token" style="color:var(--code-token-punctuation)">,</span><span> error</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>  </span><span class="token" style="color:var(--code-token-punctuation)">}</span><span class="token" style="color:var(--code-token-punctuation)">)</span><span class="token" style="color:var(--code-token-punctuation)">;</span></span></code></pre></div><div class="code-button-group_15153"><button title="Toggle code wrap"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153" title="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div><!--/$--></div><div class="rspress-doc-footer"><footer class="mt-8"><div class="xs:flex pb-5 px-2 justify-end items-center"></div><div class="flex flex-col"></div><div class="flex flex-col sm:flex-row sm:justify-around gap-4 pt-6"><div class="prev_e7091 flex flex-col"></div><div class="next_e7091 flex flex-col"></div></div></footer></div></div></div><div class="aside-container_edeb4"><div><div class="flex flex-col"><div class="&lt;lg:hidden"><div id="aside-container" class="relative text-sm font-medium"><div class="leading-7 block text-sm font-semibold pl-3">ON THIS PAGE</div><nav class="mt-1"><ul class="relative"><li><a href="#examples" title="Examples" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">Examples</span></a></li><li><a href="#to-run-the-mocha-tests" title="To run the mocha tests" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">To run the mocha tests</span></a></li><li><a href="#api" title="API" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">API</span></a></li><li><a href="#nightmareoptions" title="Nightmare(options)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">Nightmare(options)</span></a></li><li><a href="#certificatesubjectname" title="certificateSubjectName" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">certificateSubjectName</span></a></li><li><a href="#engineversions" title=".engineVersions()" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.engineVersions()</span></a></li><li><a href="#useragentuseragent" title=".useragent(useragent)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.useragent(useragent)</span></a></li><li><a href="#authenticationuser-password" title=".authentication(user, password)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.authentication(user, password)</span></a></li><li><a href="#end" title=".end()" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.end()</span></a></li><li><a href="#halterror-done" title=".halt(error, done)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.halt(error, done)</span></a></li><li><a href="#interact-with-the-page" title="Interact with the Page" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">Interact with the Page</span></a></li><li><a href="#gotourl-headers" title=".goto(url[, headers])" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.goto(url[, headers])</span></a></li><li><a href="#back" title=".back()" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.back()</span></a></li><li><a href="#forward" title=".forward()" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.forward()</span></a></li><li><a href="#refresh" title=".refresh()" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.refresh()</span></a></li><li><a href="#clickselector" title=".click(selector)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.click(selector)</span></a></li><li><a href="#mousedownselector" title=".mousedown(selector)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.mousedown(selector)</span></a></li><li><a href="#mouseupselector" title=".mouseup(selector)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.mouseup(selector)</span></a></li><li><a href="#mouseoverselector" title=".mouseover(selector)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.mouseover(selector)</span></a></li><li><a href="#mouseoutselector" title=".mouseout(selector)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.mouseout(selector)</span></a></li><li><a href="#typeselector-text" title=".type(selector[, text])" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.type(selector[, text])</span></a></li><li><a href="#insertselector-text" title=".insert(selector[, text])" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.insert(selector[, text])</span></a></li><li><a href="#checkselector" title=".check(selector)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.check(selector)</span></a></li><li><a href="#uncheckselector" title=".uncheck(selector)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.uncheck(selector)</span></a></li><li><a href="#selectselector-option" title=".select(selector, option)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.select(selector, option)</span></a></li><li><a href="#scrolltotop-left" title=".scrollTo(top, left)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.scrollTo(top, left)</span></a></li><li><a href="#viewportwidth-height" title=".viewport(width, height)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.viewport(width, height)</span></a></li><li><a href="#injecttype-file" title=".inject(type, file)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.inject(type, file)</span></a></li><li><a href="#evaluatefn-arg1-arg2" title=".evaluate(fn[, arg1, arg2,...])" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.evaluate(fn[, arg1, arg2,...])</span></a></li><li><a href="#waitms" title=".wait(ms)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.wait(ms)</span></a></li><li><a href="#waitselector" title=".wait(selector)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.wait(selector)</span></a></li><li><a href="#waitfn-arg1-arg2" title=".wait(fn[, arg1, arg2,...])" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.wait(fn[, arg1, arg2,...])</span></a></li><li><a href="#headerheader-value" title=".header(header, value)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.header(header, value)</span></a></li><li><a href="#extract-from-the-page" title="Extract from the Page" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">Extract from the Page</span></a></li><li><a href="#existsselector" title=".exists(selector)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.exists(selector)</span></a></li><li><a href="#visibleselector" title=".visible(selector)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.visible(selector)</span></a></li><li><a href="#onevent-callback" title=".on(event, callback)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.on(event, callback)</span></a></li><li><a href="#onceevent-callback" title=".once(event, callback)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.once(event, callback)</span></a></li><li><a href="#removelistenerevent-callback" title=".removeListener(event, callback)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.removeListener(event, callback)</span></a></li><li><a href="#screenshotpath-clip" title=".screenshot([path][, clip])" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.screenshot([path][, clip])</span></a></li><li><a href="#htmlpath-savetype" title=".html(path, saveType)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.html(path, saveType)</span></a></li><li><a href="#pdfpath-options" title=".pdf(path, options)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.pdf(path, options)</span></a></li><li><a href="#title" title=".title()" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.title()</span></a></li><li><a href="#url" title=".url()" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.url()</span></a></li><li><a href="#path" title=".path()" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.path()</span></a></li><li><a href="#cookies" title="Cookies" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">Cookies</span></a></li><li><a href="#cookiesgetname" title=".cookies.get(name)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.cookies.get(name)</span></a></li><li><a href="#cookiesgetquery" title=".cookies.get(query)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.cookies.get(query)</span></a></li><li><a href="#cookiesget" title=".cookies.get()" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.cookies.get()</span></a></li><li><a href="#cookiessetname-value" title=".cookies.set(name, value)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.cookies.set(name, value)</span></a></li><li><a href="#cookiessetcookie" title=".cookies.set(cookie)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.cookies.set(cookie)</span></a></li><li><a href="#cookiessetcookies" title=".cookies.set(cookies)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.cookies.set(cookies)</span></a></li><li><a href="#cookiesclearname" title=".cookies.clear([name])" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.cookies.clear([name])</span></a></li><li><a href="#cookiesclearall" title=".cookies.clearAll()" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.cookies.clearAll()</span></a></li><li><a href="#proxies" title="Proxies" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">Proxies</span></a></li><li><a href="#promises" title="Promises" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">Promises</span></a></li><li><a href="#extending-nightmare" title="Extending Nightmare" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:12px;font-weight:semibold"><span class="aside-link-text block">Extending Nightmare</span></a></li><li><a href="#nightmareactionname-electronactionelectronnamespace-actionnamespace" title="Nightmare.action(name, [electronAction|electronNamespace], action|namespace)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">Nightmare.action(name, [electronAction|electronNamespace], action|namespace)</span></a></li><li><a href="#useplugin" title=".use(plugin)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">.use(plugin)</span></a></li><li><a href="#custom-preload-script" title="Custom preload script" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">Custom preload script</span></a></li><li><a href="#storage-persistence-between-nightmare-instances" title="Storage Persistence between nightmare instances" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">Storage Persistence between nightmare instances</span></a></li><li><a href="#usage" title="Usage" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">Usage</span></a></li><li><a href="#installation" title="Installation" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">Installation</span></a></li><li><a href="#execution" title="Execution" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">Execution</span></a></li><li><a href="#common-execution-problems" title="Common Execution Problems" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">Common Execution Problems</span></a></li><li><a href="#debugging" title="Debugging" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:24px;font-weight:semibold"><span class="aside-link-text block">Debugging</span></a></li><li><a href="#additional-resources" title="Additional Resources" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">Additional Resources</span></a></li><li><a href="#tests" title="Tests" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="margin-left:0;font-weight:semibold"><span class="aside-link-text block">Tests</span></a></li></ul></nav></div></div></div></div></div></div></div></section></div></div>
  <div id="search-container"></div>
</body>

</html>
