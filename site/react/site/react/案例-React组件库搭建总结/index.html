
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Michael An">
      
      
        <link rel="canonical" href="https://michael18811380328.github.io/react/%E6%A1%88%E4%BE%8B-React%E7%BB%84%E4%BB%B6%E5%BA%93%E6%90%AD%E5%BB%BA%E6%80%BB%E7%BB%93/">
      
      
        <link rel="prev" href="../%E6%A1%88%E4%BE%8B-React%20Testing%20Library%20%E5%92%8C%20Jest%20%E5%AE%8C%E6%88%90%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/">
      
      
        <link rel="next" href="../%E9%98%AE%E4%B8%80%E5%B3%B0%20react%20%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.42">
    
    
      
        <title>案例-React组件库搭建总结 - Michale An Blog</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#react" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Michale An Blog" class="md-header__button md-logo" aria-label="Michale An Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Michale An Blog
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              案例-React组件库搭建总结
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/Michael18811380328/Michael18811380328.github.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Michael18811380328/Michael18811380328.github.io
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Michale An Blog" class="md-nav__button md-logo" aria-label="Michale An Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Michale An Blog
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Michael18811380328/Michael18811380328.github.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Michael18811380328/Michael18811380328.github.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    index
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    new-third-part-lib
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            new-third-part-lib
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/%40excalidraw_excalidraw/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    @excalidraw_excalidraw
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/Bootstrap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bootstrap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/JS-Bridge/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JS-Bridge
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/JSON%20Server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JSON Server
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/JSzip/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JSzip
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/Leaflet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Leaflet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/Mocha/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mocha
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/React%20Image%20Lightbox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React Image Lightbox
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/React-Sweet-Progress/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React-Sweet-Progress
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/Rxjs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rxjs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/Storybook/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Storybook
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/ThreeJS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ThreeJS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/UUID-js/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UUID-js
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/YesPlayMusic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    YesPlayMusic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/ant-design-vue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ant-design-vue
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/antd-mobile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    antd-mobile
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/arco-design-vue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    arco-design-vue
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/autoprefixer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    autoprefixer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/awesome-vue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    awesome-vue
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/axios/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    axios
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/babel-cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    babel-cli
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/babel-eslint/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    babel-eslint
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/babel-jest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    babel-jest
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/babel-loader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    babel-loader
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/babel-plugin-named-asset-import/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    babel-plugin-named-asset-import
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/babel-preset-env/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    babel-preset-env
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/babel-preset-react-app/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    babel-preset-react-app
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/babel-preset-react/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    babel-preset-react
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/case-sensitive-paths-webpack-plugin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    case-sensitive-paths-webpack-plugin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/chartjs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    chartjs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/classnames/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    classnames
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/clean-webpack-plugin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    clean-webpack-plugin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/connect-multiparty/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    connect-multiparty
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/copy-to-clipboard/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    copy-to-clipboard
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/crypto-js/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    crypto-js
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/css-loader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    css-loader
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/csv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    csv
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/date-format/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    date-format
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/dayjs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dayjs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/debug/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    debug
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/deep-copy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    deep-copy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/detect-character-encoding/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    detect-character-encoding
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/dir/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dir
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/docxtemplater/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docxtemplater
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/dom-helper/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dom-helper
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/dom-helpers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dom-helpers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/dotenv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dotenv
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/editor-js/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    editor-js
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/element-plus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    element-plus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/element-ui/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    element-ui
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/enzyme/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    enzyme
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/eslint-config-react-app/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    eslint-config-react-app
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/eslint-loader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    eslint-loader
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/eslint-plugin-flowtype/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    eslint-plugin-flowtype
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/eslint-plugin-import/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    eslint-plugin-import
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/eslint-plugin-react/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    eslint-plugin-react
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/eslint/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    eslint
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/etcd3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    etcd3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/excalidraw/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    excalidraw
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/exif-js/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    exif-js
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/express-rate-limit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    express-rate-limit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/express/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    express
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/file-loader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    file-loader
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/file-saver/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    file-saver
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/form-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    form-data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/formik/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    formik
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/github-copilot-resources_copilot-metrics-viewer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    github-copilot-resources_copilot-metrics-viewer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/glamor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    glamor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/gojs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    gojs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/html2canvas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    html2canvas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/http-server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    http-server
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/i18next-browser-languagedetector/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    i18next-browser-languagedetector
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/i18next-xhr-backend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    i18next-xhr-backend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/i18next/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    i18next
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/iconv-lite/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    iconv-lite
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/is-hotkey/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    is-hotkey
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/isScroll/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    isScroll
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/jest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jest
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/jison/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jison
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/jsonwebtoken/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jsonwebtoken
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/keymirror/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    keymirror
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/lerna/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    lerna
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/lodash-throttle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    lodash-throttle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/lodash/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    lodash
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/log4js/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    log4js
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/luckysheet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    luckysheet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/mind-map/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mind-map
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/mockjs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mockjs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/moment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    moment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/mysql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mysql
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/number-precision/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    number-precision
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/parcel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    parcel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/postcss-loader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    postcss-loader
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/postcss-normalize/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    postcss-normalize
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/postcss-preset-env/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    postcss-preset-env
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/postcss-safe-parser/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    postcss-safe-parser
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/promise/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    promise
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/puppeteer-print-pdf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    puppeteer-print-pdf
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/pure-admin_vue-pure-admin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pure-admin_vue-pure-admin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/quasar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    quasar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/raf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    raf
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/rc-calendar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rc-calendar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/react-cookies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-cookies
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/react-dnd-html5-backend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-dnd-html5-backend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/react-dnd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-dnd
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/react-i18next/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-i18next
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/react-intl-universal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-intl-universal
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/react-is-deprecated/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-is-deprecated
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/react-is/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-is
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/reactstrap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    reactstrap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/redis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    redis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/request/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    request
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/reselect/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    reselect
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/resolve-url-loader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    resolve-url-loader
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/resolve/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    resolve
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/response-time/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    response-time
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/resumablejs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    resumablejs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/ron-react-autocomplete/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ron-react-autocomplete
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/sass-loader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sass-loader
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/semver/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    semver
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/shallow-equal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    shallow-equal
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/shallowequal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    shallowequal
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/simple-statistics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    simple-statistics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/slugid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    slugid
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/socket%20io/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    socket io
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/socket-io-client/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    socket-io-client
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/socket-io/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    socket-io
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/socket.io/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    socket.io
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/sortable/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sortable
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/streamsaver/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    streamsaver
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/style-loader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    style-loader
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/supertest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    supertest
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/terser-webpack-plugin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    terser-webpack-plugin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/thingsboard-ui-vue3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    thingsboard-ui-vue3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/throttle-lodash/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    throttle-lodash
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/tiny-vue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tiny-vue
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/ts-jest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ts-jest
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/ts-pnp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ts-pnp
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/tui-image-editor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tui-image-editor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/uglyJS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    uglyJS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/url-loader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    url-loader
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/uuid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    uuid
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/v-viewer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    v-viewer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/vee-validate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vee-validate
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/video-js/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    video-js
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/viewerjs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    viewerjs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/vite/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vite
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/vue-draggable-resizable/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vue-draggable-resizable
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/vue-ruoyi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vue-ruoyi
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/vue-virtual-scroller/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vue-virtual-scroller
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/vuecli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vuecli
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/vuepress/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vuepress
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/vuetify/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vuetify
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/vuex/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vuex
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/vxe-table/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vxe-table
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/wangeditor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    wangeditor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/watermark/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    watermark
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/webpack-cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    webpack-cli
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/webpack-dev-server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    webpack-dev-server
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/webpack-merge/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    webpack-merge
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/webpack-node-externals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    webpack-node-externals
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/webpack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    webpack
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/whatwg-fetch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    whatwg-fetch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/workbox-webpack-plugin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    workbox-webpack-plugin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/zyronon_douyin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    zyronon_douyin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/%CE%BCPlot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    μPlot
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    react
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            react
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Create-React-App/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create-React-App
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React%20%26%20Webpack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React & Webpack
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React%2017%20%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E6%96%B0%E7%89%B9%E6%80%A7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React 17 事件处理新特性
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React%2018%20%E8%B6%85%E5%85%A8%E5%8D%87%E7%BA%A7%E6%8C%87%E5%8D%97/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React 18 超全升级指南
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React%20FAQ/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React FAQ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React%20Fiber%20Architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React Fiber Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React%20PureComponent%20%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React PureComponent 使用指南
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React%20data%20grid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React data grid
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React%20%E4%B8%AD%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React 中的事件处理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React%20%E5%90%84%E7%A7%8Dbug%20%E4%BC%9A%E5%AE%9E%E6%97%B6%E6%9B%B4%E6%96%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React 各种bug 会实时更新
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React%20%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React 官方文档笔记
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React%20%E5%B8%B8%E7%94%A8%E6%9C%AF%E8%AF%AD%E5%90%AB%E4%B9%89/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React 常用术语含义
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React%20%E6%93%8D%E4%BD%9C%E5%85%83%E7%B4%A0%E7%9A%84API/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React 操作元素的API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React%20%E6%B5%8B%E8%AF%95%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React 测试入门教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React%20%E7%9A%84%20PureComponent%20%E4%B8%8E%20Component/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React 的 PureComponent 与 Component
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React%20%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B-%E4%BC%A0%E6%99%BA%E6%92%AD%E5%AE%A2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React 视频教程-传智播客
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React%20%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B-%E6%8A%80%E6%9C%AF%E8%83%96/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React 视频教程-技术胖
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React%20%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React 高阶组件
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React-Design%20Principles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React-Design Principles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React-Suspense%E7%9A%84%E5%AE%9E%E7%8E%B0%E4%B8%8E%E6%8E%A2%E8%AE%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React-Suspense的实现与探讨
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React-性能优化
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React.Children%E7%9A%84API/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React.Children的API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React.Component/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React.Component
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ReactRouter-%E9%98%AE%E4%B8%80%E5%B3%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ReactRouter-阮一峰
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React%E4%BA%8B%E4%BB%B6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React事件
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React%E6%95%B0%E6%8D%AE%E6%B5%81/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React数据流
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React%E6%96%B0%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F--getDerivedStateFromProps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React新生命周期--getDerivedStateFromProps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6%E6%94%B9%E5%8F%98DOM%E6%96%B9%E6%B3%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React点击事件改变DOM方法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%B5%81%E7%A8%8B%E5%9B%BE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React生命周期流程图
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React%E8%8E%B7%E5%8F%96%E5%B0%BA%E5%AF%B8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React获取尺寸
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React%E8%BF%9B%E9%98%B6%E2%80%94%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React进阶—性能优化
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Refs%20%26%20DOM/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Refs & DOM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getDerivedStateFromProps%E7%9A%84%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    getDerivedStateFromProps的使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../jsx%E8%AF%AD%E6%B3%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jsx语法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../react%20%E4%B8%AD%E9%80%9A%E8%BF%87ref%E8%8E%B7%E5%8F%96%E9%AB%98%E9%98%B6%EF%BC%88HOC%EF%BC%89%E5%AD%90%E7%BB%84%E4%BB%B6%E5%AE%9E%E4%BE%8B%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react 中通过ref获取高阶（HOC）子组件实例的解决方案
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../react%20%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react 项目结构及编码规范
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../react-redux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-redux
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../react-transition-group-%E5%8A%A8%E7%94%BB%E6%95%88%E6%9E%9C/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-transition-group-动画效果
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../react-useRef/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-useRef
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reactjs%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E4%B8%8A%E7%AF%87%EF%BC%88%E9%A6%96%E6%AC%A1%E6%B8%B2%E6%9F%93%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%EF%BC%89/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    reactjs源码分析-上篇（首次渲染实现原理）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reactjs%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E4%B8%8B%E7%AF%87%EF%BC%88%E6%9B%B4%E6%96%B0%E6%9C%BA%E5%88%B6%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%EF%BC%89/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    reactjs源码分析-下篇（更新机制实现原理）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../react%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react生命周期函数源码学习
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../stackoverflow-Highlight%20text%20using%20ReactJS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stackoverflow-Highlight text using ReactJS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../todo-Testing%20React%20components/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-Testing React components
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../todo-VS%20Code%20%E5%BF%AB%E6%8D%B7%E8%BE%93%E5%85%A5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-VS Code 快捷输入
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E4%B8%BA%E4%BB%80%E4%B9%88%E8%AF%B4Suspense%E6%98%AF%E4%B8%80%E7%A7%8D%E5%B7%A8%E5%A4%A7%E7%9A%84%E7%AA%81%E7%A0%B4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    为什么说Suspense是一种巨大的突破
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3-React%E9%AB%98%E9%98%B6API/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    官方文档-React高阶API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%AF%B9React%20children%E7%90%86%E8%A7%A3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    对React children理解
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%8E%8C%E6%8F%A1%E6%8B%96%E6%8B%BD%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%88%E4%BD%BF%E7%94%A8ReactJS%20hooks%EF%BC%89/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    掌握拖拽的实现（使用ReactJS hooks）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A1%88%E4%BE%8B-React%20Hook%2BTS4%20%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E9%A1%B9%E7%9B%AE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    案例-React Hook+TS4 最佳实践项目
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A1%88%E4%BE%8B-React%20Testing%20Library%20%E5%92%8C%20Jest%20%E5%AE%8C%E6%88%90%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    案例-React Testing Library 和 Jest 完成单元测试
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    案例-React组件库搭建总结
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    案例-React组件库搭建总结
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      概览
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      准备工作
    </span>
  </a>
  
    <nav class="md-nav" aria-label="准备工作">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      初始化项目
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      代码规范
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commit-lint" class="md-nav__link">
    <span class="md-ellipsis">
      Commit Lint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#typescript" class="md-nav__link">
    <span class="md-ellipsis">
      TypeScript
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      测试
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      开发与调试
    </span>
  </a>
  
    <nav class="md-nav" aria-label="开发与调试">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#docz" class="md-nav__link">
    <span class="md-ellipsis">
      安装 docz 以及自定义配置
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      编写文档
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      优化文档编写
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      优化代码展示
    </span>
  </a>
  
    <nav class="md-nav" aria-label="优化代码展示">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      编写 ``组件
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      相关配置变更
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      改造相关文件
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      组件库打包
    </span>
  </a>
  
    <nav class="md-nav" aria-label="组件库打包">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      导出类型声明文件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commonjs" class="md-nav__link">
    <span class="md-ellipsis">
      导出 Commonjs 模块
    </span>
  </a>
  
    <nav class="md-nav" aria-label="导出 Commonjs 模块">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#babel" class="md-nav__link">
    <span class="md-ellipsis">
      babel 配置
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gulp" class="md-nav__link">
    <span class="md-ellipsis">
      gulp 配置
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#es-module" class="md-nav__link">
    <span class="md-ellipsis">
      导出 ES module
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      处理样式文件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="处理样式文件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#less" class="md-nav__link">
    <span class="md-ellipsis">
      拷贝 less 文件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#css" class="md-nav__link">
    <span class="md-ellipsis">
      生成 css 文件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cssjs" class="md-nav__link">
    <span class="md-ellipsis">
      生成 css.js
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      按需加载
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#umd" class="md-nav__link">
    <span class="md-ellipsis">
      生成 umd
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      组件测试
    </span>
  </a>
  
    <nav class="md-nav" aria-label="组件测试">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      相关配置
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      编写测试用例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      标准化发布流程
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      初始化组件
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E9%98%AE%E4%B8%80%E5%B3%B0%20react%20%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    阮一峰 react 系列教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4%E7%9A%84%20REACT%202015%20%E4%B9%8B%E8%B7%AF/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    阿里巴巴的 REACT 2015 之路
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    react-hooks
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            react-hooks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-hooks/00%20React%20hook%20%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    00 React hook 笔记
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-hooks/01%20React%20Hooks%20%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B-%E9%98%AE%E4%B8%80%E5%B3%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    01 React Hooks 入门教程-阮一峰
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-hooks/02%20%E8%BD%BB%E6%9D%BE%E5%AD%A6%E4%BC%9A%20React%20%E9%92%A9%E5%AD%90-%E4%BB%A5%20useEffect%28%29%20%E4%B8%BA%E4%BE%8B-%E9%98%AE%E4%B8%80%E5%B3%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    02 轻松学会 React 钩子-以 useEffect() 为例-阮一峰
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-hooks/03%20%E4%BB%8E%20Class%20%E8%BF%81%E7%A7%BB%E5%88%B0%20Hook/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    03 从 Class 迁移到 Hook
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-hooks/04%20React%20%E5%86%85%E7%BD%AE%20Hook/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    04 React 内置 Hook
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-hooks/05%20React%20Hooks%20%E8%AF%A6%E8%A7%A3%20%2B%20%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    05 React Hooks 详解 + 项目实战
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-hooks/06%20%E7%B2%BE%E9%80%9AReact%20Hooks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    06 精通React Hooks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-hooks/07%20React%20Hooks%20%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    07 React Hooks 最佳实践
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-hooks/08%20useMemo%E3%80%81useCallback%E3%80%81useContext/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    08 useMemo、useCallback、useContext
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-hooks/09%20React-hook%2BTS%E7%B1%BB%E5%9E%8B%E9%AA%8C%E8%AF%81/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    09 React-hook+TS类型验证
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    react-third-part-lib
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            react-third-part-lib
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/01-CSDN%20%E5%8D%9A%E5%AE%A2%E6%96%87%E6%A1%A3%E9%93%BE%E6%8E%A5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    01-CSDN 博客文档链接
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/030-react-is-deprecated/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    030-react-is-deprecated
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/031-react-sweet-progress/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    031-react-sweet-progress
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/032-reactstrap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    032-reactstrap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/044-react-app-polyfill/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    044-react-app-polyfill
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/045-react-dev-utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    045-react-dev-utils
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/046-react-dom/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    046-react-dom
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/069-react-codemirror/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    069-react-codemirror
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/073-react-i18next/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    073-react-i18next
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/101-%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93-react-poker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    101-第三方库-react-poker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/103-react-to-print/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    103-react-to-print
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/112-react-select/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    112-react-select
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/113-react-image-lightbox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    113-react-image-lightbox
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/21-%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93-react-window/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    21-第三方库-react-window
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/22-%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93-react-mentions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    22-第三方库-react-mentions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/23-%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93-react-loading-skeleton/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    23-第三方库-react-loading-skeleton
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/24-%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93-react-konva/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    24-第三方库-react-konva
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/25-%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93-react-canvas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    25-第三方库-react-canvas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/26-%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93-react-image-lightbox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    26-第三方库-react-image-lightbox
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/React-Select/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React-Select
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/Todo-054-GGEditor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Todo-054-GGEditor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/gojs-react/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    gojs-react
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/react-colorful/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-colorful
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/react-lazy-load/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-lazy-load
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-00-React%20%E7%AC%94%E8%AE%B0%E7%9B%AE%E5%BD%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-00-React 笔记目录
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-009-html2canvas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-009-html2canvas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-017-qrcode-react/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-017-qrcode-react
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-050-react-custom-scrollbars/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-050-react-custom-scrollbars
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-052-react-select/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-052-react-select
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-053-react-media/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-053-react-media
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-055-DPlayer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-055-DPlayer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-20-React%20Router%20%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A31-v4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-20-React Router 中文文档1-v4
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-20-React%20Router%20%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A32/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-20-React Router 中文文档2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-20-react-router/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-20-react-router
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-26-%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93-react-use/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-26-第三方库-react-use
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-27-%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93-react-motion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-27-第三方库-react-motion
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-28-sort-by/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-28-sort-by
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-29-localForage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-29-localForage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-30-match-sorter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-30-match-sorter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-31-zxing-library%20%E5%AE%9E%E7%8E%B0%E5%89%8D%E7%AB%AF%E6%89%AB%E7%A0%81%E5%8A%9F%E8%83%BD/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-31-zxing-library 实现前端扫码功能
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-32-%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93-react-photoswipe-gallery/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-32-第三方库-react-photoswipe-gallery
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-33-React-%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-33-React-第三方库
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    third-part-lib/codemirror
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            third-part-lib/codemirror
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/codemirror/Code-mirror/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code-mirror
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/codemirror/codemirror-readme/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    codemirror-readme
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/codemirror/codemirror/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    codemirror
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    third-part-lib/echarts
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            third-part-lib/echarts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/echarts/echarts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    echarts
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    third-part-lib/g2
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            third-part-lib/g2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/g2/antv-g2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    antv-g2
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    third-part-lib/react-dnd
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            third-part-lib/react-dnd
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/react-dnd/01-readme/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    01-readme
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/react-dnd/02-quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    02-quickstart
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/react-dnd/03-Overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    03-Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/react-dnd/API/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/react-dnd/React%20DnD/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React DnD
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/react-dnd/Testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/react-dnd/Tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/react-dnd/react-dnd-DragLayer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-dnd-DragLayer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/react-dnd/react-dnd-DragSource/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-dnd-DragSource
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/react-dnd/react-dnd-DropTarget/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-dnd-DropTarget
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/react-dnd/react-dnd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-dnd
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/react-dnd/react-dnd%E4%BD%BF%E7%94%A8%E6%89%8B%E8%AE%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-dnd使用手记
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%B8%B8%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E4%BB%8B%E7%BB%8D/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    常用第三方库介绍
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      概览
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      准备工作
    </span>
  </a>
  
    <nav class="md-nav" aria-label="准备工作">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      初始化项目
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      代码规范
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commit-lint" class="md-nav__link">
    <span class="md-ellipsis">
      Commit Lint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#typescript" class="md-nav__link">
    <span class="md-ellipsis">
      TypeScript
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      测试
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      开发与调试
    </span>
  </a>
  
    <nav class="md-nav" aria-label="开发与调试">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#docz" class="md-nav__link">
    <span class="md-ellipsis">
      安装 docz 以及自定义配置
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      编写文档
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      优化文档编写
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      优化代码展示
    </span>
  </a>
  
    <nav class="md-nav" aria-label="优化代码展示">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      编写 ``组件
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      相关配置变更
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      改造相关文件
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      组件库打包
    </span>
  </a>
  
    <nav class="md-nav" aria-label="组件库打包">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      导出类型声明文件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commonjs" class="md-nav__link">
    <span class="md-ellipsis">
      导出 Commonjs 模块
    </span>
  </a>
  
    <nav class="md-nav" aria-label="导出 Commonjs 模块">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#babel" class="md-nav__link">
    <span class="md-ellipsis">
      babel 配置
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gulp" class="md-nav__link">
    <span class="md-ellipsis">
      gulp 配置
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#es-module" class="md-nav__link">
    <span class="md-ellipsis">
      导出 ES module
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      处理样式文件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="处理样式文件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#less" class="md-nav__link">
    <span class="md-ellipsis">
      拷贝 less 文件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#css" class="md-nav__link">
    <span class="md-ellipsis">
      生成 css 文件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cssjs" class="md-nav__link">
    <span class="md-ellipsis">
      生成 css.js
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      按需加载
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#umd" class="md-nav__link">
    <span class="md-ellipsis">
      生成 umd
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      组件测试
    </span>
  </a>
  
    <nav class="md-nav" aria-label="组件测试">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      相关配置
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      编写测试用例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      标准化发布流程
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      初始化组件
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="react">React组件库搭建总结<a class="headerlink" href="#react" title="Permanent link">&para;</a></h1>
<p>统计信息：字数 47343  阅读95分钟</p>
<p>2021-10</p>
<p>原作者近三年没有更新代码，本案例仅供参考</p>
<p>原始代码仓库地址：<a href="https://github.com/worldzhao/react-ui-library-tutorial">https://github.com/worldzhao/react-ui-library-tutorial</a></p>
<h2 id="_1">概览<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>本文包含以下内容：</p>
<ul>
<li>prepare: 组件库前期开发准备工作。<code>eslint</code>/<code>commit lint</code>/<code>typescript</code>等等；</li>
<li>dev: 使用docz进行开发调试以及文档编写；</li>
<li>build:<em><code>umd</code></em>/<code>cjs</code>/<code>esm</code>、types、polyfill 以及按需加载；</li>
<li>test: 组件测试；</li>
<li>release: 组件库发布流程；</li>
<li>deploy: 使用now部署文档站点，待补充；</li>
<li>other: 使用plop.js快速创建组件模板。</li>
</ul>
<h2 id="_2">准备工作<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<h3 id="_3">初始化项目<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>新建一个<code>happy-ui</code>文件夹，并初始化。</p>
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>happy-ui

<span class="nb">cd</span><span class="w"> </span>happy-ui

npm<span class="w"> </span>init<span class="w"> </span>--y

mkdir<span class="w"> </span>components<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>components<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>touch<span class="w"> </span>index.ts<span class="w"> </span><span class="c1"># 新建源码文件夹以及入口文件</span>
</code></pre></div>
<h3 id="_4">代码规范<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>此处直接使用@umijs/fabric的配置。</p>
<div class="highlight"><pre><span></span><code>yarn<span class="w"> </span>add<span class="w"> </span>@umijs/fabric<span class="w"> </span>--dev

yarn<span class="w"> </span>add<span class="w"> </span>prettier<span class="w"> </span>--dev<span class="w"> </span><span class="c1"># 因为@umijs/fabric没有将prettier作为依赖 所以我们需要手动安装</span>
</code></pre></div>
<p><strong>.eslintrc.js</strong></p>
<div class="highlight"><pre><span></span><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">extends</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">require</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="s1">&#39;@umijs/fabric/dist/eslint&#39;</span><span class="p">)],</span>
<span class="p">};</span>
</code></pre></div>
<p><strong>.prettierrc.js</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">fabric</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@umijs/fabric&#39;</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="p">...</span><span class="nx">fabric</span><span class="p">.</span><span class="nx">prettier</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div>
<p><strong>.stylelintrc.js</strong></p>
<div class="highlight"><pre><span></span><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">extends</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">require</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="s1">&#39;@umijs/fabric/dist/stylelint&#39;</span><span class="p">)],</span>
<span class="p">};</span>
</code></pre></div>
<p>想自行配置的同学可以参考以下文章：</p>
<ul>
<li>Linting Your React+Typescript Project with ESLint and Prettier!</li>
<li>使用 ESLint+Prettier 规范 React+Typescript 项目</li>
</ul>
<h3 id="commit-lint">Commit Lint<a class="headerlink" href="#commit-lint" title="Permanent link">&para;</a></h3>
<p>进行<code>pre-commit</code>代码规范检测。</p>
<div class="highlight"><pre><span></span><code>yarn<span class="w"> </span>add<span class="w"> </span>husky<span class="w"> </span>lint-staged<span class="w"> </span>--dev
</code></pre></div>
<p><strong>package.json</strong></p>
<div class="highlight"><pre><span></span><code><span class="nt">&quot;lint-staged&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;components/**/*.ts?(x)&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;prettier --write&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;eslint --fix&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;git add&quot;</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;components/**/*.less&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;stylelint --syntax less --fix&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;git add&quot;</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">},</span>
<span class="nt">&quot;husky&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;hooks&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;pre-commit&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;lint-staged&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>进行 Commit Message 检测。</p>
<div class="highlight"><pre><span></span><code>yarn<span class="w"> </span>add<span class="w"> </span>@commitlint/cli<span class="w"> </span>@commitlint/config-conventional<span class="w"> </span>commitizen<span class="w"> </span>cz-conventional-changelog<span class="w"> </span>--dev
</code></pre></div>
<p>新增<code>.commitlintrc.js</code>写入以下内容</p>
<div class="highlight"><pre><span></span><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">extends</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;@commitlint/config-conventional&#39;</span><span class="p">]</span><span class="w"> </span><span class="p">};</span>
</code></pre></div>
<p>package.json 写入以下内容：</p>
<div class="highlight"><pre><span></span><code><span class="c1">// ...</span>
<span class="nt">&quot;scripts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;commit&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;git-cz&quot;</span><span class="p">,</span>
<span class="p">}</span>
<span class="c1">// ...</span>
<span class="nt">&quot;husky&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;hooks&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;commit-msg&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;commitlint -E HUSKY_GIT_PARAMS&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;pre-commit&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;lint-staged&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">},</span>
<span class="nt">&quot;config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;commitizen&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cz-conventional-changelog&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>后续使用 <code>yarn commit</code> 替代 <code>git commit</code>生成规范的 Commit Message，当然为了效率你可以选择手写，但是要符合规范。</p>
<h3 id="typescript">TypeScript<a class="headerlink" href="#typescript" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>yarn<span class="w"> </span>add<span class="w"> </span>typescript<span class="w"> </span>--dev
</code></pre></div>
<p>新建<code>tsconfig.json</code>并写入以下内容</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;compilerOptions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;baseUrl&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;./&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;esnext&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;commonjs&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;jsx&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;react&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;declaration&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;declarationDir&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;lib&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;strict&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;moduleResolution&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;node&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;allowSyntheticDefaultImports&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;esModuleInterop&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;resolveJsonModule&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;include&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;components&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;global.d.ts&quot;</span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;exclude&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;node_modules&quot;</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_5">测试<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<p>在<code>components</code>文件夹下新建<code>alert</code>文件夹，目录结构如下：</p>
<div class="highlight"><pre><span></span><code>alert
    ├── alert.tsx           # 源文件
    ├── index.ts            # 入口文件
    ├── interface.ts        # 类型声明文件
    └── style
        ├── index.less      # 样式文件
        └── index.ts        # 样式文件里为什么存在一个index.ts - 按需加载样式 管理样式依赖 后面章节会提到
</code></pre></div>
<p>安装<code>React</code>相关依赖：</p>
<div class="highlight"><pre><span></span><code>yarn<span class="w"> </span>add<span class="w"> </span>react<span class="w"> </span>react-dom<span class="w"> </span>@types/react<span class="w"> </span>@types/react-dom<span class="w"> </span>--dev<span class="w"> </span>
<span class="c1"># 开发时依赖，宿主环境一定存在</span>

yarn<span class="w"> </span>add<span class="w"> </span>prop-types<span class="w">            </span>
<span class="c1"># 运行时依赖，宿主环境可能不存在 安装本组件库时一起安装</span>
</code></pre></div>
<blockquote>
<p>此处依旧安装了<code>prop-types</code>这个库，因为无法保证宿主环境也使用<code>typescript</code>，从而能够进行静态检查，故使用<code>prop-types</code>保证<code>javascript</code>用户也能得到友好的运行时报错信息。</p>
</blockquote>
<p><strong>components/alert/interface.ts</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">export</span><span class="w"> </span><span class="kr">type</span><span class="w"> </span><span class="nx">Kind</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;info&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;positive&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;negative&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;warning&#39;</span><span class="p">;</span>
<span class="k">export</span><span class="w"> </span><span class="kr">type</span><span class="w"> </span><span class="nx">KindMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Record</span><span class="o">&lt;</span><span class="nx">Kind</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="o">&gt;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">AlertProps</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="cm">/**</span>
<span class="cm">   * Set this to change alert kind</span>
<span class="cm">   * @default info</span>
<span class="cm">   */</span>
<span class="w">  </span><span class="nx">kind</span><span class="o">?:</span><span class="w"> </span><span class="s1">&#39;info&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;positive&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;negative&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;warning&#39;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>components/alert/alter.tsx</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">React</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">t</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;prop-types&#39;</span><span class="p">;</span>

<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AlertProps</span><span class="p">,</span><span class="w"> </span><span class="nx">KindMap</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./interface&#39;</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">prefixCls</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;happy-alert&#39;</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">kinds</span><span class="o">:</span><span class="w"> </span><span class="kt">KindMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">info</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#5352ED&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">positive</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#2ED573&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">negative</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#FF4757&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">warning</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#FFA502&#39;</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">Alert</span><span class="o">:</span><span class="w"> </span><span class="kt">React.FC</span><span class="o">&lt;</span><span class="nx">AlertProps</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nx">children</span><span class="p">,</span><span class="w"> </span><span class="nx">kind</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;info&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">rest</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="o">&lt;</span><span class="nx">div</span>
<span class="w">    </span><span class="nx">className</span><span class="o">=</span><span class="p">{</span><span class="nx">prefixCls</span><span class="p">}</span>
<span class="w">    </span><span class="nx">style</span><span class="o">=</span><span class="p">{{</span>
<span class="w">      </span><span class="nx">background</span><span class="o">:</span><span class="w"> </span><span class="kt">kinds</span><span class="p">[</span><span class="nx">kind</span><span class="p">],</span>
<span class="w">    </span><span class="p">}}</span>
<span class="w">    </span><span class="p">{...</span><span class="nx">rest</span><span class="p">}</span>
<span class="w">  </span><span class="o">&gt;</span>
<span class="w">    </span><span class="p">{</span><span class="nx">children</span><span class="p">}</span>
<span class="w">  </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="p">);</span>

<span class="nx">Alert</span><span class="p">.</span><span class="nx">propTypes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">kind</span><span class="o">:</span><span class="w"> </span><span class="kt">t.oneOf</span><span class="p">([</span><span class="s1">&#39;info&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;positive&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;negative&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;warning&#39;</span><span class="p">]),</span>
<span class="p">};</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="nx">Alert</span><span class="p">;</span>
</code></pre></div>
<p><strong>components/alert/index.ts</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">Alert</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./alert&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="nx">Alert</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./interface&#39;</span><span class="p">;</span>
</code></pre></div>
<p><strong>components/alert/style/index.less</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">@popupPrefix</span><span class="o">:</span><span class="w"> </span><span class="nx">happy</span><span class="o">-</span><span class="nx">alert</span><span class="p">;</span>

<span class="p">.</span><span class="err">@</span><span class="p">{</span><span class="nx">popupPrefix</span><span class="p">}</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">padding</span><span class="o">:</span><span class="w"> </span><span class="kt">20px</span><span class="p">;</span>
<span class="w">  </span><span class="nx">background</span><span class="o">:</span><span class="w"> </span><span class="kt">white</span><span class="p">;</span>
<span class="w">  </span><span class="nx">border</span><span class="o">-</span><span class="nx">radius</span><span class="o">:</span><span class="w"> </span><span class="kt">3px</span><span class="p">;</span>
<span class="w">  </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="kt">white</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>components/alert/style/index.ts</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="s1">&#39;./index.less&#39;</span><span class="p">;</span>
</code></pre></div>
<p><strong>components/index.ts</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">export</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">Alert</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./alert&#39;</span><span class="p">;</span>
</code></pre></div>
<blockquote>
<p>此处组件参考的<code>docz</code>项目<code>typescript</code>以及<code>less</code>示例。</p>
</blockquote>
<p>git 一把梭，可以看到控制台已经进行钩子检测了。</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>add<span class="w"> </span>.

yarn<span class="w"> </span>commit<span class="w">  </span><span class="c1"># 或 git commit -m&#39;feat: chapter-1 准备工作&#39;</span>

git<span class="w"> </span>push
</code></pre></div>
<p>准备工作完成。代码可以在仓库的<code>chapter-1</code>分支获取，若存在与本文内容不符的地方，以<code>master</code>分支以及文章为准。</p>
<h2 id="_6">开发与调试<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h2>
<p>本节解决开发组件时的预览以及调试问题，顺路解决文档编写。</p>
<p>此处选择docz来辅助预览调试。</p>
<blockquote>
<p><code>docz</code>基于<code>MDX</code>（Markdown + JSX），可以在 Markdown 中引入 React 组件，使得一边编写文档，一边预览调试成为了可能。而且得益于 React 组件生态，我们可以像编写应用一般编写文档，不仅仅是枯燥的文字。<code>docz</code> 也内置了一些组件，比如<code>&lt;Playground&gt;</code>。</p>
</blockquote>
<h3 id="docz">安装 docz 以及自定义配置<a class="headerlink" href="#docz" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>yarn add docz --dev

yarn add rimraf --dev # 清空目录的一个辅助库
</code></pre></div>
<p>增加 <code>npm scripts</code> 至 <code>package.json</code>。</p>
<div class="highlight"><pre><span></span><code>&quot;scripts&quot;: {
  &quot;dev&quot;: &quot;docz dev&quot;, // 启动本地开发环境
  &quot;start&quot;: &quot;npm run dev&quot;, // dev命令别名
  &quot;build:doc&quot;: &quot;rimraf doc-site &amp;&amp; docz build&quot;, // 后续会配置打包出来的文件目录名为doc-site，故每次build前删除
  &quot;preview:doc&quot;: &quot;docz serve&quot; // 预览文档站点
},
</code></pre></div>
<blockquote>
<p>注意：本节所有操作都是针对站点应用。<code>打包</code>指代文档站点打包，而非组件库。</p>
</blockquote>
<p>新建<code>doczrc.js</code>配置文件，并写入以下内容：</p>
<p><strong>doczrc.js</strong></p>
<div class="highlight"><pre><span></span><code>export default {
  files: &#39;./components/**/*.{md,markdown,mdx}&#39;, // 识别的文件后缀
  dest: &#39;doc-site&#39;, // 打包出来的文件目录名
  title: &#39;happy-ui&#39;, // 站点标题
  typescript: true, // 组件源文件是通过typescript开发，需要打开此选项
};
</code></pre></div>
<p>由于使用了<code>less</code>作为样式预处理器，故需要安装 less 插件。</p>
<div class="highlight"><pre><span></span><code>yarn add less gatsby-plugin-less --dev
</code></pre></div>
<p>新建<code>gatsby-config.js</code>，并写入以下内容：</p>
<p><strong>gatsby-config.js</strong></p>
<div class="highlight"><pre><span></span><code>module.exports = {
  plugins: [&#39;gatsby-theme-docz&#39;, &#39;gatsby-plugin-less&#39;],
};
</code></pre></div>
<h3 id="_7">编写文档<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p>新建<code>components/alert/index.mdx</code>，并写入以下内容：</p>
<div class="highlight"><pre><span></span><code>---
name: Alert 警告提示
route: /Alert
menu: 组件
---

import { Playground } from &#39;docz&#39;; import Alert from &#39;./alert&#39;; // 引入组件 import &#39;./style&#39;; // 引入组件样式

# Alert 警告提示

警告提示，展现需要关注的信息。

## 代码演示

### 基本用法

&lt;Playground&gt;
  &lt;Alert kind=&quot;warning&quot;&gt;这是一条警告提示&lt;/Alert&gt;
&lt;/Playground&gt;

## API

| 属性 | 说明     | 类型                                         | 默认值 |
| ---- | -------- | -------------------------------------------- | ------ |
| kind | 警告类型 | &#39;info&#39;/&#39;positive&#39;/&#39;negative&#39;/&#39;warning&#39;非必填 | &#39;info&#39; |
</code></pre></div>
<p>执行脚本命令：</p>
<div class="highlight"><pre><span></span><code>yarn start # or yarn dev
</code></pre></div>
<p>可以在<code>localhost:3000</code>看到如下页面 ：</p>
<p><img alt="文档站点" src="https://mmbiz.qpic.cn/mmbiz_jpg/5Xv0xlEBe9ibicAticdDa4X6UqnaGT622qA2RVmZ1394RAjjdh1vTkLxAYfttld62RNeykH5S3oOlvYqXibb1xE5Sw/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />文档站点</p>
<p>现在可以在<code>index.mdx</code>中愉快地进行文档编写和调试了！</p>
<p>倘若本文到了这里就结束（其实也可以结束了<code>(_^▽^_)</code>），那我只是官方文档的翻译复读机罢了，有兴趣的同学可以继续向下看。</p>
<h3 id="_8">优化文档编写<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<p>如果<code>代码演示</code>部分的<code>demo</code>较多（比如基本用法、高级用法以及各种用法等等），在组件复杂的情况下（毕竟<code>&lt;Alert/&gt;</code>着实太简单了），会导致文档很长难以维护，你到底是在写文档呢还是在写代码呢？</p>
<p>那就抽离吧。</p>
<p>在<code>components/alert/</code>文件夹下新建<code>demo</code>文件夹，存放我们在编写文档时需要引用的 <code>demo</code>。</p>
<p><strong>components/alert/demo/1-demo-basic.tsx</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">React</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">Alert</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../alert&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="s1">&#39;../style&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">Alert</span><span class="w"> </span><span class="nx">kind</span><span class="o">=</span><span class="s2">&quot;warning&quot;</span><span class="o">&gt;&lt;</span><span class="err">/Alert&gt;;</span>
</code></pre></div>
<p><strong>components/alert/index.mdx</strong></p>
<div class="highlight"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="k">import</span><span class="w"> </span><span class="nx">Alert</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./alert&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// 引入组件</span>
<span class="o">-</span><span class="w"> </span><span class="k">import</span><span class="w"> </span><span class="s1">&#39;./style&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// 引入组件样式</span>
<span class="o">+</span><span class="w"> </span><span class="k">import</span><span class="w"> </span><span class="nx">BasicDemo</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./demo/1-demo-basic&#39;</span><span class="p">;</span>

<span class="p">...</span>

<span class="o">&lt;</span><span class="nx">Playground</span><span class="o">&gt;</span>
<span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">Alert</span><span class="w"> </span><span class="nx">kind</span><span class="o">=</span><span class="s2">&quot;warning&quot;</span><span class="o">&gt;</span><span class="nx">这是一条警告提示</span><span class="o">&lt;</span><span class="err">/Alert&gt;</span>
<span class="o">+</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">BasicDemo</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="err">/Playground&gt;</span>
</code></pre></div>
<p>这样我们就将 demo 与文档进行了分隔。预览如下：</p>
<p><img alt="文档重构" src="https://mmbiz.qpic.cn/mmbiz_jpg/5Xv0xlEBe9ibicAticdDa4X6UqnaGT622qA0jPdNmkz34f92aUpQIZ9Zv2B0uEXnIIXib5Jp4JUGNVGnu3MPRo1WKQ/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />文档重构</p>
<p>等等，下面显示的是<code>&lt;BasicDemo /&gt;</code>，而非<code>demo</code>源码。</p>
<p><code>&lt;Playground /&gt;</code>组件暂时无法支持上述形式的展示：自定义下方展示的代码，而非<code>&lt;Playground /&gt;</code>内部的代码。相关讨论如下：</p>
<ul>
<li>Allow to hide the LiveError overlay #907</li>
<li>Allow to override the playground's editor's code #906</li>
</ul>
<p>其实第一条 <code>PR</code> 已经解决了问题，但是被关闭了，无奈。</p>
<p>不过既然都能引入 React 组件了，在<code>MDX</code>的环境下自定义一个<code>Playground</code>组件又有何难呢，无非就是渲染组件（MDX 自带）和展示源码，简单开放的东西大家都是喜闻乐见的，就叫<code>HappyBox</code>吧。</p>
<h3 id="_9">优化代码展示<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<h4 id="_10">编写 ``组件<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h4>
<p>安装依赖：</p>
<div class="highlight"><pre><span></span><code>yarn add react-use react-tooltip react-feather react-simple-code-editor prismjs react-copy-to-clipboard raw-loader styled-components --dev
</code></pre></div>
<ul>
<li>react-use - 2020 年了，当然要用<code>hooks</code></li>
<li>react-simple-code-editor - 代码展示区域</li>
<li>prismjs - 代码高亮</li>
<li>raw-loader - 将源码转成字符串</li>
<li>react-copy-to-clipboard - 让用户爸爸们能够 copy demo 代码</li>
<li>react-tooltip/react-feather 辅助组件</li>
<li>styled-components 方便在文档示例中让用户看到样式，也用作文档组件的样式处理</li>
</ul>
<blockquote>
<p>这些依赖都是服务于文档站点应用，和组件库自身毫无关联。</p>
</blockquote>
<p>最终效果如下：</p>
<p><img alt="最终效果" src="https://mmbiz.qpic.cn/mmbiz_jpg/5Xv0xlEBe9ibicAticdDa4X6UqnaGT622qA7b8kr82sAb6k7l39MKFO1p8xtG23KcvWptA1cC4aib8B2ZQN3YVLuMg/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />最终效果</p>
<p>根目录下新建<code>doc-comps</code>文件夹，存放文档中使用的一些工具组件，比如<code>&lt;HappyBox /&gt;</code>。</p>
<p><strong>doc-comps</strong></p>
<div class="highlight"><pre><span></span><code>├── happy-box
│   ├── style.ts
│   └── index.tsx
└── index.ts
</code></pre></div>
<p><strong>components/doc-comps/happy-box/index.tsx</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">React</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">Editor</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react-simple-code-editor&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">CopyToClipboard</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react-copy-to-clipboard&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useToggle</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react-use&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">ReactTooltip</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react-tooltip&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">IconCopy</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react-feather/dist/icons/clipboard&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">IconCode</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react-feather/dist/icons/code&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">highlight</span><span class="p">,</span><span class="w"> </span><span class="nx">languages</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;prismjs/components/prism-core&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">StyledContainer</span><span class="p">,</span><span class="w"> </span><span class="nx">StyledIconWrapper</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./style&#39;</span><span class="p">;</span>

<span class="k">import</span><span class="w"> </span><span class="s1">&#39;prismjs/components/prism-clike&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="s1">&#39;prismjs/components/prism-javascript&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="s1">&#39;prismjs/components/prism-markup&#39;</span><span class="p">;</span>

<span class="nx">require</span><span class="p">(</span><span class="s1">&#39;prismjs/components/prism-jsx&#39;</span><span class="p">);</span>

<span class="kd">interface</span><span class="w"> </span><span class="nx">Props</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">code</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">title?</span><span class="o">:</span><span class="w"> </span><span class="kt">React.ReactNode</span><span class="p">;</span>
<span class="w">  </span><span class="nx">desc?</span><span class="o">:</span><span class="w"> </span><span class="kt">React.ReactNode</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">HappyBox</span><span class="o">:</span><span class="w"> </span><span class="kt">React.FC</span><span class="o">&lt;</span><span class="nx">Props</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nx">code</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="p">,</span><span class="w"> </span><span class="nx">desc</span><span class="p">,</span><span class="w"> </span><span class="nx">children</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">isEditVisible</span><span class="p">,</span><span class="w"> </span><span class="nx">toggleEditVisible</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useToggle</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">StyledContainer</span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">section</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s2">&quot;code-box-demo&quot;</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="nx">children</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/section&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">section</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s2">&quot;code-box-meta&quot;</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s2">&quot;text-divider&quot;</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">span</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">title</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;示例&#39;</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/span&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s2">&quot;code-box-description&quot;</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">desc</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;暂无描述&#39;</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s2">&quot;divider&quot;</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s2">&quot;code-box-action&quot;</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">CopyToClipboard</span><span class="w"> </span><span class="nx">text</span><span class="o">=</span><span class="p">{</span><span class="nx">code</span><span class="p">}</span><span class="w"> </span><span class="nx">onCopy</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;复制成功&#39;</span><span class="p">)}</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">IconCopy</span><span class="w"> </span><span class="nx">data</span><span class="o">-</span><span class="nx">place</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="w"> </span><span class="nx">data</span><span class="o">-</span><span class="nx">tip</span><span class="o">=</span><span class="s2">&quot;复制代码&quot;</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/CopyToClipboard&gt;</span>

<span class="w">          </span><span class="o">&lt;</span><span class="nx">StyledIconWrapper</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">toggleEditVisible</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">IconCode</span><span class="w"> </span><span class="nx">data</span><span class="o">-</span><span class="nx">place</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="w"> </span><span class="nx">data</span><span class="o">-</span><span class="nx">tip</span><span class="o">=</span><span class="p">{</span><span class="nx">isEditVisible</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;收起代码&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;显示代码&#39;</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/StyledIconWrapper&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/section&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="nx">renderEditor</span><span class="p">()}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">ReactTooltip</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/StyledContainer&gt;</span>
<span class="w">  </span><span class="p">);</span>

<span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">renderEditor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">isEditVisible</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s2">&quot;container_editor_area&quot;</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Editor</span>
<span class="w">          </span><span class="nx">readOnly</span>
<span class="w">          </span><span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">code</span><span class="p">}</span>
<span class="w">          </span><span class="nx">onValueChange</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{}}</span>
<span class="w">          </span><span class="nx">highlight</span><span class="o">=</span><span class="p">{</span><span class="nx">code</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">highlight</span><span class="p">(</span><span class="nx">code</span><span class="p">,</span><span class="w"> </span><span class="nx">languages</span><span class="p">.</span><span class="nx">jsx</span><span class="p">)}</span>
<span class="w">          </span><span class="nx">padding</span><span class="o">=</span><span class="p">{</span><span class="mf">10</span><span class="p">}</span>
<span class="w">          </span><span class="nx">className</span><span class="o">=</span><span class="s2">&quot;container__editor&quot;</span>
<span class="w">          </span><span class="nx">style</span><span class="o">=</span><span class="p">{{</span>
<span class="w">            </span><span class="nx">fontFamily</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&quot;Fira code&quot;, &quot;Fira Mono&quot;, monospace&#39;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">fontSize</span><span class="o">:</span><span class="w"> </span><span class="kt">14</span><span class="p">,</span>
<span class="w">          </span><span class="p">}}</span>
<span class="w">        </span><span class="o">/&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">};</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="nx">HappyBox</span><span class="p">;</span>
</code></pre></div>
<h3 id="_11">相关配置变更<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<ul>
<li>增加 <code>alias</code>别名，样例源码展示相对路径不够友好，让用户直接拷贝才够省心</li>
</ul>
<p>新建<code>gatsby-node.js</code>，写入以下内容以开启<code>alias</code>：</p>
<div class="highlight"><pre><span></span><code>const path = require(&#39;path&#39;);

exports.onCreateWebpackConfig = args =&gt; {
  args.actions.setWebpackConfig({
    resolve: {
      modules: [path.resolve(__dirname, &#39;../src&#39;), &#39;node_modules&#39;],
      alias: {
        &#39;happy-ui/lib&#39;: path.resolve(__dirname, &#39;../components/&#39;),
        &#39;happy-ui/esm&#39;: path.resolve(__dirname, &#39;../components/&#39;),
        &#39;happy-ui&#39;: path.resolve(__dirname, &#39;../components/&#39;),
      },
    },
  });
};
</code></pre></div>
<p><code>tsconfig.json</code> 打包时需要忽略<code>demo</code>，避免组件库打包生成<code>types</code>时包含其中，同时增加<code>paths</code>属性用于 vscode 自动提示：</p>
<p><strong>tsconfig.json</strong></p>
<div class="highlight"><pre><span></span><code>{
  &quot;compilerOptions&quot;: {
    &quot;baseUrl&quot;: &quot;./&quot;,
+   &quot;paths&quot;: {
+     &quot;happy-ui&quot;: [&quot;components/index.ts&quot;],
+     &quot;happy-ui/esm/*&quot;: [&quot;components/*&quot;],
+     &quot;happy-ui/lib/*&quot;: [&quot;components/*&quot;]
+    },
    &quot;target&quot;: &quot;esnext&quot;,
    &quot;module&quot;: &quot;commonjs&quot;,
    &quot;jsx&quot;: &quot;react&quot;,
    &quot;declaration&quot;: true,
    &quot;declarationDir&quot;: &quot;lib&quot;,
    &quot;strict&quot;: true,
    &quot;moduleResolution&quot;: &quot;node&quot;,
    &quot;allowSyntheticDefaultImports&quot;: true,
    &quot;esModuleInterop&quot;: true,
    &quot;resolveJsonModule&quot;: true
  },
  &quot;include&quot;: [&quot;components&quot;, &quot;global.d.ts&quot;],
- &quot;exclude&quot;: [&quot;node_modules&quot;]
+ &quot;exclude&quot;: [&quot;node_modules&quot;,  &quot;**/demo/**&quot;]
}
</code></pre></div>
<p>新的问题出现了，vscode 的 alias 提示依赖 tsconfig.json，忽略 demo 文件夹后，demo 内的文件模块类型找不到声明(paths 失效)，所以不能将 demo 在 tsconfig.json 中移除：</p>
<div class="highlight"><pre><span></span><code>{
- &quot;exclude&quot;: [&quot;node_modules&quot;,  &quot;**/demo/**&quot;]
+ &quot;exclude&quot;: [&quot;node_modules&quot;]
}
</code></pre></div>
<p>新建一个 tsconfig.build.json 文件：</p>
<p><strong>tsconfig.build.json</strong></p>
<div class="highlight"><pre><span></span><code>{
  &quot;extends&quot;: &quot;./tsconfig.json&quot;,
  &quot;exclude&quot;: [&quot;**/demo/**&quot;, &quot;node_modules&quot;]
}
</code></pre></div>
<p>后续使用 tsc 生成类型声明文件指定<code>tsconfig.build.json</code>即可。</p>
<h3 id="_12">改造相关文件<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<p><strong>components/alert/demo/1-demo-basic.tsx</strong></p>
<div class="highlight"><pre><span></span><code>- import Alert from &#39;../alert&#39;;
+ import Alert from &#39;happy-ui/lib/alert&#39;;

- import &#39;../style&#39;;
+ import &#39;happy-ui/lib/alert/style&#39;;
</code></pre></div>
<p><strong>components/alert/index.mdx</strong></p>
<div class="highlight"><pre><span></span><code>- import { Playground } from &#39;docz&#39;;
+ import { HappyBox } from &#39;../../doc-comps&#39;;

+ import BasicDemoCode from &#39;!raw-loader!./demo/1-demo-basic.tsx&#39;;

...

- &lt;Playground&gt;
-   &lt;BasicDemo /&gt;
- &lt;/Playground&gt;

+ &lt;HappyBox code={BasicDemoCode} title=&quot;基本用法&quot; desc=&quot;使用kind控制Alert类型&quot;&gt;
+  &lt;BasicDemo /&gt;
+ &lt;/HappyBox&gt;
</code></pre></div>
<blockquote>
<p><code>yarn start</code>卡住时尝试删除根目录<code>.docz</code>文件夹，而后重新执行命令。</p>
</blockquote>
<p>现在可以愉快地开发组件了。代码可以在仓库的<code>chapter-2</code>分支获取，若存在与本文内容不符的地方，以<code>master</code>分支以及文章为准。</p>
<h2 id="_13">组件库打包<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h2>
<p><strong>宿主环境各不相同，需要将源码进行相关处理后发布至 npm。</strong></p>
<p>明确以下目标：</p>
<ol>
<li>导出类型声明文件</li>
<li>导出 <code>umd</code>/<code>Commonjs module</code>/<code>ES module</code> 等 3 种形式供使用者引入</li>
<li>支持样式文件 <code>css</code> 引入，而非只有<code>less</code></li>
<li>支持按需加载</li>
</ol>
<h3 id="_14">导出类型声明文件<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<p>既然是使用<code>typescript</code>编写的组件库，那么使用者应当享受到类型系统的好处。</p>
<p>我们可以生成类型声明文件，并在<code>package.json</code>中定义入口，如下：</p>
<p><strong>package.json</strong></p>
<div class="highlight"><pre><span></span><code>{
  &quot;typings&quot;: &quot;lib/index.d.ts&quot;, // 定义类型入口文件
  &quot;scripts&quot;: {
    &quot;build:types&quot;: &quot;tsc -p tsconfig.build.json &amp;&amp; cpr lib esm&quot; // 执行tsc命令生成类型声明文件
  }
}
</code></pre></div>
<blockquote>
<p>值得注意的是：此处使用<code>cpr</code>将<code>lib</code>的声明文件拷贝了一份，重命名为<code>esm</code>。用于后面存放 ES module 形式的组件。这样做主要是为了用户手动按需引入组件时依旧可以有自动提示。</p>
<p>最开始使用的将声明文件单独打包成一个<code>types</code>文件夹，这样只通过'happy-ui'引入才可以有自动提示，但是'happy-ui/esm/xxx'和'happy-ui/lib/xxx'就无法提示。</p>
</blockquote>
<p><strong>tsconfig.build.json</strong></p>
<div class="highlight"><pre><span></span><code>{
  &quot;extends&quot;: &quot;./tsconfig.json&quot;,
  &quot;compilerOptions&quot;: { &quot;emitDeclarationOnly&quot;: true }, // 只生成声明文件
  &quot;exclude&quot;: [&quot;**/__tests__/**&quot;, &quot;**/demo/**&quot;, &quot;node_modules&quot;, &quot;lib&quot;, &quot;esm&quot;] // 排除示例、测试以及打包好的文件夹
}
</code></pre></div>
<p>执行<code>yarn build:types</code>，可以发现根目录下已经生成了<code>lib</code>文件夹（<code>tsconfig.json</code>中定义的<code>declarationDir</code>字段），目录结构与<code>components</code>文件夹保持一致，如下：</p>
<p><strong>types</strong></p>
<div class="highlight"><pre><span></span><code>├── alert
│   ├── alert.d.ts
│   ├── index.d.ts
│   ├── interface.d.ts
│   └── style
│       └── index.d.ts
└── index.d.ts
</code></pre></div>
<p>这样使用者引入<code>npm</code> 包时，便能得到自动提示，也能够复用相关组件的类型定义。</p>
<p>接下来将<code>ts(x)</code>等文件处理成<code>js</code>文件。</p>
<blockquote>
<p>需要注意的是，我们需要输出<code>Commonjs module</code>以及<code>ES module</code>两种模块类型的文件（暂不考虑<code>umd</code>），以下使用<code>cjs</code>指代<code>Commonjs module</code>，<code>esm</code>指代<code>ES module</code>。
对此有疑问的同学推荐阅读：import、require、export、module.exports 混合详解</p>
</blockquote>
<h3 id="commonjs">导出 Commonjs 模块<a class="headerlink" href="#commonjs" title="Permanent link">&para;</a></h3>
<p>其实完全可以使用<code>babel</code>或<code>tsc</code>命令行工具进行代码编译处理（实际上很多工具库就是这样做的），但考虑到还要**处理样式及其按需加载**，我们借助 <code>gulp</code> 来串起这个流程。</p>
<h4 id="babel">babel 配置<a class="headerlink" href="#babel" title="Permanent link">&para;</a></h4>
<p>首先安装<code>babel</code>及其相关依赖</p>
<div class="highlight"><pre><span></span><code>yarn add @babel/core @babel/preset-env @babel/preset-react @babel/preset-typescript @babel/plugin-proposal-class-properties  @babel/plugin-transform-runtime --dev
yarn add @babel/runtime-corejs3
</code></pre></div>
<p>新建<code>.babelrc.js</code>文件，写入以下内容：</p>
<p><strong>.babelrc.js</strong></p>
<div class="highlight"><pre><span></span><code>module.exports = {
  presets: [&#39;@babel/env&#39;, &#39;@babel/typescript&#39;, &#39;@babel/react&#39;],
  plugins: [
    &#39;@babel/proposal-class-properties&#39;,
    [
      &#39;@babel/plugin-transform-runtime&#39;,
      {
        corejs: 3,
        helpers: true,
      },
    ],
  ],
};
</code></pre></div>
<p>关于<code>@babel/plugin-transform-runtime</code>与<code>@babel/runtime-corejs3</code>：</p>
<ul>
<li>若<code>helpers</code>选项设置为<code>true</code>，可抽离代码编译过程重复生成的 <code>helper</code> 函数（<code>classCallCheck</code>,<code>extends</code>等），减小生成的代码体积；</li>
<li>若<code>corejs</code>设置为<code>3</code>，可引入不污染全局的按需<code>polyfill</code>，常用于类库编写（我更推荐：不引入<code>polyfill</code>，转而告知使用者需要引入何种<code>polyfill</code>，避免重复引入或产生冲突，后面会详细提到）。</li>
</ul>
<p>更多参见官方文档-@babel/plugin-transform-runtime</p>
<p><strong>配置目标环境</strong></p>
<p>为了避免转译浏览器原生支持的语法，新建<code>.browserslistrc</code>文件，根据适配需求，写入支持浏览器范围，作用于<code>@babel/preset-env</code>。</p>
<p><strong>.browserslistrc</strong></p>
<div class="highlight"><pre><span></span><code>&gt;0.2%
not dead
not op_mini all
</code></pre></div>
<p>很遗憾的是，<code>@babel/runtime-corejs3</code>无法在按需引入的基础上根据目标浏览器支持程度再次减少<code>polyfill</code>的引入，参见@babel/runtime for target environment 。</p>
<p>这意味着<code>@babel/runtime-corejs3</code> 甚至会在针对现代引擎的情况下注入所有可能的 <code>polyfill</code>：不必要地增加了最终捆绑包的大小。</p>
<p>对于组件库（代码量可能很大），个人建议将<code>polyfill</code>的选择权交还给使用者，在宿主环境进行<code>polyfill</code>。若使用者具有兼容性要求，自然会使用<code>@babel/preset-env + core-js + .browserslistrc</code>进行全局<code>polyfill</code>，这套组合拳引入了最低目标浏览器不支持<code>API</code>的全部 <code>polyfill</code>。</p>
<blockquote>
<p>业务开发中，将<code>@babel/preset-env</code>的<code>useBuiltIns</code>选项值设置为 <code>usage</code>，同时把<code>node_modules</code>从<code>babel-loader</code>中<code>exclude</code>掉的同学可能想要这个特性："useBuiltIns: usage" for node_modules without transpiling #9419，在未支持该<code>issue</code>提到的内容之前，还是乖乖地将<code>useBuiltIns</code>设置为<code>entry</code>，或者不要把<code>node_modules</code>从<code>babel-loader</code>中<code>exclude</code>。</p>
</blockquote>
<p>所以组件库不用画蛇添足，引入多余的<code>polyfill</code>，写好文档说明，比什么都重要（就像zent和antd这样）。</p>
<p>现在<code>@babel/runtime-corejs3</code>更换为<code>@babel/runtime</code>，只进行<code>helper</code>函数抽离。</p>
<div class="highlight"><pre><span></span><code>yarn remove @babel/runtime-corejs3

yarn add @babel/runtime
</code></pre></div>
<p><strong>.babelrc.js</strong></p>
<div class="highlight"><pre><span></span><code>module.exports = {
  presets: [&#39;@babel/env&#39;, &#39;@babel/typescript&#39;, &#39;@babel/react&#39;],
  plugins: [&#39;@babel/plugin-transform-runtime&#39;, &#39;@babel/proposal-class-properties&#39;],
};
</code></pre></div>
<blockquote>
<p><code>@babel/transform-runtime</code>的<code>helper</code>选项默认为<code>true</code>。</p>
</blockquote>
<h4 id="gulp">gulp 配置<a class="headerlink" href="#gulp" title="Permanent link">&para;</a></h4>
<p>再来安装<code>gulp</code>相关依赖</p>
<div class="highlight"><pre><span></span><code>yarn add gulp gulp-babel --dev
</code></pre></div>
<p>新建<code>gulpfile.js</code>，写入以下内容：</p>
<p><strong>gulpfile.js</strong></p>
<div class="highlight"><pre><span></span><code>const gulp = require(&#39;gulp&#39;);
const babel = require(&#39;gulp-babel&#39;);

const paths = {
  dest: {
    lib: &#39;lib&#39;, // commonjs 文件存放的目录名 - 本块关注
    esm: &#39;esm&#39;, // ES module 文件存放的目录名 - 暂时不关心
    dist: &#39;dist&#39;, // umd文件存放的目录名 - 暂时不关心
  },
  styles: &#39;components/**/*.less&#39;, // 样式文件路径 - 暂时不关心
  scripts: [&#39;components/**/*.{ts,tsx}&#39;, &#39;!components/**/demo/*.{ts,tsx}&#39;], // 脚本文件路径
};

function compileCJS() {
  const { dest, scripts } = paths;
  return gulp
    .src(scripts)
    .pipe(babel()) // 使用gulp-babel处理
    .pipe(gulp.dest(dest.lib));
}

// 并行任务 后续加入样式处理 可以并行处理
const build = gulp.parallel(compileCJS);

exports.build = build;

exports.default = build;
</code></pre></div>
<p>修改<code>package.json</code></p>
<p><strong>package.json</strong></p>
<div class="highlight"><pre><span></span><code>{
- &quot;main&quot;: &quot;index.js&quot;,
+ &quot;main&quot;: &quot;lib/index.js&quot;,
  &quot;scripts&quot;: {
    ...
+   &quot;clean&quot;: &quot;rimraf lib esm dist&quot;,
+   &quot;build&quot;: &quot;npm run clean &amp;&amp; npm run build:types &amp;&amp; gulp&quot;,
    ...
  },
}
</code></pre></div>
<p>执行<code>yarn build</code>，得到如下内容：</p>
<p><strong>lib</strong></p>
<div class="highlight"><pre><span></span><code>├── alert
│   ├── alert.js
│   ├── index.js
│   ├── interface.js
│   └── style
│       └── index.js
└── index.js
</code></pre></div>
<p>观察编译后的源码，可以发现：诸多<code>helper</code>方法已被抽离至<code>@babel/runtime</code>中，模块导入导出形式也是<code>commonjs</code>规范。</p>
<p><strong>lib/alert/alert.js</strong></p>
<p><img alt="lib/alert/alert.js" src="https://mmbiz.qpic.cn/mmbiz_jpg/5Xv0xlEBe9ibicAticdDa4X6UqnaGT622qAOLBHkfib2pByCPyTsb9IoPP0BibHVeFveV6CtlgiaibJuSKAmXZGKw8gdQ/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />lib/alert/alert.js</p>
<h3 id="es-module">导出 ES module<a class="headerlink" href="#es-module" title="Permanent link">&para;</a></h3>
<p>生成<code>ES module</code>可以更好地进行tree shaking，基于上一步的<code>babel</code>配置，更新以下内容：</p>
<ol>
<li>配置<code>@babel/preset-env</code>的<code>modules</code>选项为<code>false</code>，关闭模块转换；</li>
<li>配置<code>@babel/plugin-transform-runtime</code>的<code>useESModules</code>选项为<code>true</code>，使用<code>ES module</code>形式引入<code>helper</code>函数。</li>
</ol>
<p><strong>.babelrc.js</strong></p>
<div class="highlight"><pre><span></span><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">presets</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">[</span>
<span class="w">      </span><span class="s1">&#39;@babel/env&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">modules</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// 关闭模块转换</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="s1">&#39;@babel/typescript&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="s1">&#39;@babel/react&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nx">plugins</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s1">&#39;@babel/proposal-class-properties&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="p">[</span>
<span class="w">      </span><span class="s1">&#39;@babel/plugin-transform-runtime&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">useESModules</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// 使用esm形式的helper</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">  </span><span class="p">],</span>
<span class="p">};</span>
</code></pre></div>
<p>目标达成，我们再使用环境变量区分<code>esm</code>和<code>cjs</code>（执行任务时设置对应的环境变量即可），最终<code>babel</code>配置如下：</p>
<p><strong>.babelrc.js</strong></p>
<div class="highlight"><pre><span></span><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">presets</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;@babel/env&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;@babel/typescript&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;@babel/react&#39;</span><span class="p">],</span>
<span class="w">  </span><span class="nx">plugins</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;@babel/plugin-transform-runtime&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;@babel/proposal-class-properties&#39;</span><span class="p">],</span>
<span class="w">  </span><span class="nx">env</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">esm</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">presets</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">[</span>
<span class="w">          </span><span class="s1">&#39;@babel/env&#39;</span><span class="p">,</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nx">modules</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nx">plugins</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">[</span>
<span class="w">          </span><span class="s1">&#39;@babel/plugin-transform-runtime&#39;</span><span class="p">,</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nx">useESModules</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">},</span>
<span class="p">};</span>
</code></pre></div>
<p>接下来修改<code>gulp</code>相关配置，抽离<code>compileScripts</code>任务，增加<code>compileESM</code>任务。</p>
<p><strong>gulpfile.js</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// ...</span>

<span class="cm">/**</span>
<span class="cm"> * 编译脚本文件</span>
<span class="cm"> * @param {string} babelEnv babel环境变量</span>
<span class="cm"> * @param {string} destDir 目标目录</span>
<span class="cm"> */</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">compileScripts</span><span class="p">(</span><span class="nx">babelEnv</span><span class="p">,</span><span class="w"> </span><span class="nx">destDir</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">scripts</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">paths</span><span class="p">;</span>
<span class="w">  </span><span class="c1">// 设置环境变量</span>
<span class="w">  </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">BABEL_ENV</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">babelEnv</span><span class="p">;</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">gulp</span>
<span class="w">    </span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="nx">scripts</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">babel</span><span class="p">())</span><span class="w"> </span><span class="c1">// 使用gulp-babel处理</span>
<span class="w">    </span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="nx">destDir</span><span class="p">));</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * 编译cjs</span>
<span class="cm"> */</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">compileCJS</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">dest</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">paths</span><span class="p">;</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">compileScripts</span><span class="p">(</span><span class="s1">&#39;cjs&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">dest</span><span class="p">.</span><span class="nx">lib</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * 编译esm</span>
<span class="cm"> */</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">compileESM</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">dest</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">paths</span><span class="p">;</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">compileScripts</span><span class="p">(</span><span class="s1">&#39;esm&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">dest</span><span class="p">.</span><span class="nx">esm</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// 串行执行编译脚本任务（cjs,esm） 避免环境变量影响</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">buildScripts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">gulp</span><span class="p">.</span><span class="nx">series</span><span class="p">(</span><span class="nx">compileCJS</span><span class="p">,</span><span class="w"> </span><span class="nx">compileESM</span><span class="p">);</span>

<span class="c1">// 整体并行执行任务</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">build</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">gulp</span><span class="p">.</span><span class="nx">parallel</span><span class="p">(</span><span class="nx">buildScripts</span><span class="p">);</span>

<span class="c1">// ...</span>
</code></pre></div>
<p>执行<code>yarn build</code>，可以发现生成了<code>lib</code>/<code>esm</code>三个文件夹，观察<code>esm</code>目录，结构同<code>lib</code>一致，js 文件都是以<code>ES module</code>模块形式导入导出。</p>
<p><strong>esm/alert/alert.js</strong></p>
<p><img alt="esm/alert/alert.js" src="https://mmbiz.qpic.cn/mmbiz_jpg/5Xv0xlEBe9ibicAticdDa4X6UqnaGT622qAog82T1IDjVERc1KfhAAQfnNGfFlIry723gejibKNASeDPAlcicwib6lOA/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />esm/alert/alert.js</p>
<p>别忘了给<code>package.json</code>增加相关入口。</p>
<p><strong>package.json</strong></p>
<div class="highlight"><pre><span></span><code>{
+ &quot;module&quot;: &quot;esm/index.js&quot;
}
</code></pre></div>
<h3 id="_15">处理样式文件<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<h4 id="less">拷贝 less 文件<a class="headerlink" href="#less" title="Permanent link">&para;</a></h4>
<p>我们会将<code>less</code>文件包含在<code>npm</code>包中，用户可以通过<code>happy-ui/lib/alert/style/index.js</code>的形式按需引入<code>less</code>文件，此处可以直接将 less 文件拷贝至目标文件夹。</p>
<p>在<code>gulpfile.js</code>中新建<code>copyLess</code>任务。</p>
<p><strong>gulpfile.js</strong></p>
<div class="highlight"><pre><span></span><code>// ...

/**
 * 拷贝less文件
 */
function copyLess() {
  return gulp
    .src(paths.styles)
    .pipe(gulp.dest(paths.dest.lib))
    .pipe(gulp.dest(paths.dest.esm));
}

const build = gulp.parallel(buildScripts, copyLess);

// ...
</code></pre></div>
<p>观察<code>lib</code>目录，可以发现 <code>less</code> 文件已被拷贝至<code>alert/style</code>目录下。</p>
<p><strong>lib</strong></p>
<div class="highlight"><pre><span></span><code>├── alert
│   ├── alert.js
│   ├── index.js
│   ├── interface.js
│   └── style
│       ├── index.js
│       └── index.less # less文件
└── index.js
</code></pre></div>
<p>可能有些同学已经发现问题：若使用者没有使用<code>less</code>预处理器，使用的是<code>sass</code>方案甚至原生<code>css</code>方案，那现有方案就搞不定了。经分析，有以下 3 种预选方案：</p>
<ol>
<li>告知用户增加<code>less-loader</code>；</li>
<li>打包出一份完整的 <code>css</code> 文件，进行**全量**引入；</li>
<li>单独提供一份<code>style/css.js</code>文件，引入的是组件 <code>css</code>样式文件依赖，而非 <code>less</code> 依赖，组件库底层抹平差异；</li>
<li>使用<code>css in js</code>方案。</li>
</ol>
<p>方案 1 会导致业务方使用成本增加。</p>
<p>方案 2 无法进行按需引入。</p>
<p>方案 4 需要详细聊聊。</p>
<p><code>css in js</code>除了赋予样式编写更多的可能性之外，在编写第三方组件库时更是利器。</p>
<p>如果我们写一个<code>react-use</code>这种<code>hooks</code>工具库，不涉及到样式，只需要在<code>package.json</code>中设置<code>sideEffects</code>为<code>false</code>，业务方使用 webpack 进行打包时，只会打包被使用到的 hooks（优先使用 ES module）。</p>
<p>入口文件<code>index.js</code>中导出的但未被使用的其他 hooks 会被<code>tree shaking</code>，第一次使用这个库的时候我很好奇，为什么没有按需引入的使用方式，结果打包分析时我傻了，原来人家天生支持按需引入。</p>
<p>可能常用的<code>antd</code>以及<code>lodash</code>都要配一配，导致产生了惯性思维。</p>
<p>回到正题。如果将样式使用<code>javascript</code>来编写，在某种维度上讲，组件库和工具库一致了，配好<code>sideEffects</code>，自动按需引入，美滋滋。</p>
<p>而且每个组件都与自己的样式绑定，不需要业务方或组件开发者去**维护样式依赖**，什么是样式依赖，后面会讲到。</p>
<p>缺点：</p>
<ol>
<li>样式无法单独缓存；</li>
<li>styled-components 自身体积较大；</li>
<li>复写组件样式需要使用属性选择器或者使用<code>styled-components</code>，麻烦了点。</li>
</ol>
<p>需要看取舍了，偷偷说一句<code>styled-components</code>做主题定制也极其方便。</p>
<p>方案 3 是<code>antd</code>使用的这种方案。</p>
<p>在搭建组件库的过程中，有一个问题困扰了我很久：为什么需要<code>alert/style/index.js</code>引入<code>less</code>文件或<code>alert/style/css.js</code>引入<code>css</code>文件？</p>
<p>答案是**管理样式依赖**。</p>
<p>因为我们的组件是没有引入样式文件的，需要用户去手动引入。</p>
<p>假设存在以下场景：引入<code>&lt;Button /&gt;</code>，<code>&lt;Button /&gt;</code>依赖了<code>&lt;Icon /&gt;</code>，使用者需要手动去引入调用的组件的样式（<code>&lt;Button /&gt;</code>）及其依赖的组件样式（<code>&lt;Icon /&gt;</code>），遇到复杂组件极其麻烦，所以组件库开发者可以提供一份这样的<code>js</code>文件，使用者手动引入这个<code>js</code>文件，就能引入对应组件及其依赖组件的样式。</p>
<p>那么问题又来了，为什么组件不能自己去<code>import './index.less'</code>呢？</p>
<p>可以，不过业务方要配置<code>less-loader</code>，什么，业务方不想配，要你<code>import './index.css'</code>？🙃</p>
<p>可以，业务方爽了，组件开发方不爽。</p>
<p>所以我们要找一个大家都爽的方案：</p>
<ol>
<li>开发方能够开心的使用预处理器；</li>
<li>业务方不需要额外的使用成本。</li>
</ol>
<p>答案就是*css in js*单独提供一份<code>style/css.js</code>文件，引入的是组件 <code>css</code>样式文件依赖，而非 <code>less</code> 依赖，组件库底层抹平差异。</p>
<p>之前了解到father可以在打包的时候将<code>index.less</code>转成<code>index.css</code>，这倒是个好法子，但是一些重复引入的样式模块（比如动画样式），会被重复打包，不知道有没有好的解决方案。</p>
<h4 id="css">生成 css 文件<a class="headerlink" href="#css" title="Permanent link">&para;</a></h4>
<p>安装相关依赖。</p>
<div class="highlight"><pre><span></span><code>yarn add gulp-less gulp-autoprefixer gulp-cssnano --dev
</code></pre></div>
<p>将<code>less</code>文件生成对应的<code>css</code>文件，在<code>gulpfile.js</code>中增加<code>less2css</code>任务。</p>
<div class="highlight"><pre><span></span><code>// ...

/**
 * 生成css文件
 */
function less2css() {
  return gulp
    .src(paths.styles)
    .pipe(less()) // 处理less文件
    .pipe(autoprefixer()) // 根据browserslistrc增加前缀
    .pipe(cssnano({ zindex: false, reduceIdents: false })) // 压缩
    .pipe(gulp.dest(paths.dest.lib))
    .pipe(gulp.dest(paths.dest.esm));
}

const build = gulp.parallel(buildScripts, copyLess, less2css);

// ...
</code></pre></div>
<p>执行<code>yarn build</code>，组件<code>style</code>目录下已经存在<code>css</code>文件了。</p>
<p>接下来我们需要一个<code>alert/style/css.js</code>来帮用户引入<code>css</code>文件。</p>
<h4 id="cssjs">生成 css.js<a class="headerlink" href="#cssjs" title="Permanent link">&para;</a></h4>
<p>此处参考antd-tools的实现方式：在处理<code>scripts</code>任务中，截住<code>style/index.js</code>，生成<code>style/css.js</code>，并通过正则将引入的<code>less</code>文件后缀改成<code>css</code>。</p>
<p>安装相关依赖。</p>
<div class="highlight"><pre><span></span><code>yarn add through2 --dev
</code></pre></div>
<p><strong>gulpfile.js</strong></p>
<div class="highlight"><pre><span></span><code>// ...

/**
 * 编译脚本文件
 * @param {*} babelEnv babel环境变量
 * @param {*} destDir 目标目录
 */
function compileScripts(babelEnv, destDir) {
  const { scripts } = paths;
  process.env.BABEL_ENV = babelEnv;
  return gulp
    .src(scripts)
    .pipe(babel()) // 使用gulp-babel处理
    .pipe(
      through2.obj(function z(file, encoding, next) {
        this.push(file.clone());
        // 找到目标
        if (file.path.match(/(\/|\\)style(\/|\\)index\.js/)) {
          const content = file.contents.toString(encoding);
          file.contents = Buffer.from(cssInjection(content)); // 文件内容处理
          file.path = file.path.replace(/index\.js/, &#39;css.js&#39;); // 文件重命名
          this.push(file); // 新增该文件
          next();
        } else {
          next();
        }
      }),
    )
    .pipe(gulp.dest(destDir));
}

// ...
</code></pre></div>
<p><code>cssInjection</code>的实现：</p>
<p><strong>gulpfile.js</strong></p>
<div class="highlight"><pre><span></span><code>/**
 * 当前组件样式 import &#39;./index.less&#39; =&gt; import &#39;./index.css&#39;
 * 依赖的其他组件样式 import &#39;../test-comp/style&#39; =&gt; import &#39;../test-comp/style/css.js&#39;
 * 依赖的其他组件样式 import &#39;../test-comp/style/index.js&#39; =&gt; import &#39;../test-comp/style/css.js&#39;
 * @param {string} content
 */
function cssInjection(content) {
  return content
    .replace(/\/style\/?&#39;/g, &quot;/style/css&#39;&quot;)
    .replace(/\/style\/?&quot;/g, &#39;/style/css&quot;&#39;)
    .replace(/\.less/g, &#39;.css&#39;);
}
</code></pre></div>
<p>再进行打包，可以看见组件<code>style</code>目录下生成了<code>css.js</code>文件，引入的也是上一步<code>less</code>转换而来的<code>css</code>文件。</p>
<p><strong>lib/alert</strong></p>
<div class="highlight"><pre><span></span><code>├── alert.js
├── index.js
├── interface.js
└── style
    ├── css.js # 引入index.css
    ├── index.css
    ├── index.js
    └── index.less
</code></pre></div>
<h3 id="_16">按需加载<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<p>在 package.json 中增加<code>sideEffects</code>属性，配合<code>ES module</code>达到<code>tree shaking</code>效果（将样式依赖文件标注为<code>side effects</code>，避免被误删除）。</p>
<div class="highlight"><pre><span></span><code>// ...
&quot;sideEffects&quot;: [
  &quot;dist/*&quot;,
  &quot;esm/**/style/*&quot;,
  &quot;lib/**/style/*&quot;,
  &quot;*.less&quot;
],
// ...
</code></pre></div>
<p>使用以下方式引入，可以做到<code>js</code>部分的按需加载，但需要手动引入样式：</p>
<div class="highlight"><pre><span></span><code>import { Alert } from &#39;happy-ui&#39;;
import &#39;happy-ui/esm/alert/style&#39;;
</code></pre></div>
<p>也可以使用以下方式引入：</p>
<div class="highlight"><pre><span></span><code>import Alert from &#39;happy-ui/esm/alert&#39;; // or import Alert from &#39;happy-ui/lib/alert&#39;;
import &#39;happy-ui/esm/alert/style&#39;; // or import Alert from &#39;happy-ui/lib/alert&#39;;
</code></pre></div>
<p>以上引入样式文件的方式不太优雅，直接入口处引入**全量**样式文件又和按需加载的本意相去甚远。</p>
<p>使用者可以借助babel-plugin-import来进行辅助，减少代码编写量（说好的不加入其他使用成本的呢~）。</p>
<div class="highlight"><pre><span></span><code>import { Alert } from &#39;happy-ui&#39;;
</code></pre></div>
<p>⬇️</p>
<div class="highlight"><pre><span></span><code>import Alert from &#39;happy-ui/lib/alert&#39;;
import &#39;happy-ui/lib/alert/style&#39;;
</code></pre></div>
<h3 id="umd">生成 umd<a class="headerlink" href="#umd" title="Permanent link">&para;</a></h3>
<p>没用上，这一块标记为 todo 吧。</p>
<p>本节代码可以在仓库的<code>chapter-3</code>分支获取，若存在与本文内容不符的地方，以<code>master</code>分支以及文章为准。</p>
<h2 id="_17">组件测试<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h2>
<p>与软件操作行为越接近的测试，越能给予你信心。</p>
<p>本节主要讲述如何在组件库中引入jest以及@testing-library/react，而不会深入单元测试的学习。</p>
<p>如果你对下列问题感兴趣：</p>
<ol>
<li>What-单元测试是什么？</li>
<li>Why-为什么要写单元测试？</li>
<li>How-编写单元测试的最佳实践？</li>
</ol>
<p>那么可以看看以下文章：</p>
<ul>
<li>Test React apps with React Testing Library：通过一个<code>`的例子延伸，阐述了选择</code>React Testing Library<code>而非</code>Enzyme`的理由，并对其进行了一些入门教学；</li>
<li>React Testing Library：<code>@testing-library/react</code>的官方文档，该库提供的 API 在某个程度上就是在指引开发者进行单元测试的最佳实践；</li>
<li>React Testing Library-examples：<code>@testing-library/react</code>的一些实例，提供了各种常见场景的测试；</li>
<li>React 单元测试策略及落地：如标题所示，值得一看。</li>
</ul>
<h3 id="_18">相关配置<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h3>
<p>安装依赖：</p>
<div class="highlight"><pre><span></span><code>yarn add jest ts-jest @testing-library/react @testing-library/jest-dom identity-obj-proxy @types/jest @types/testing-library__react --dev
</code></pre></div>
<ul>
<li>jest: JavaScript 测试框架，专注于简洁明快；</li>
<li>ts-jest：为<code>TypeScript</code>编写<code>jest</code>测试用例提供支持；</li>
<li>@testing-library/react：简单而完整的<code>React DOM</code>测试工具，鼓励良好的测试实践；</li>
<li>@testing-library/jest-dom：自定义的<code>jest</code>匹配器(<code>matchers</code>)，用于测试<code>DOM</code>的状态（即为<code>jest</code>的<code>except</code>方法返回值增加更多专注于<code>DOM</code>的<code>matchers</code>）；</li>
<li>identity-obj-proxy：一个工具库，此处用来<code>mock</code>样式文件。</li>
</ul>
<p>新建<code>jest.config.js</code>，并写入相关配置，更多配置可参考jest 官方文档-配置，只看几个常用的就可以。</p>
<p><strong>jest.config.js</strong></p>
<div class="highlight"><pre><span></span><code>module.exports = {
  verbose: true,
  roots: [&#39;&lt;rootDir&gt;/components&#39;],
  moduleNameMapper: {
    &#39;\\.(css|less|scss)$&#39;: &#39;identity-obj-proxy&#39;,
    &#39;^components$&#39;: &#39;&lt;rootDir&gt;/components/index.tsx&#39;,
    &#39;^components(.*)$&#39;: &#39;&lt;rootDir&gt;/components/$1&#39;,
  },
  testRegex: &#39;(/test/.*|\\.(test|spec))\\.(ts|tsx|js)$&#39;,
  moduleFileExtensions: [&#39;ts&#39;, &#39;tsx&#39;, &#39;js&#39;, &#39;jsx&#39;],
  testPathIgnorePatterns: [&#39;/node_modules/&#39;, &#39;/lib/&#39;, &#39;/esm/&#39;, &#39;/dist/&#39;],
  preset: &#39;ts-jest&#39;,
  testEnvironment: &#39;jsdom&#39;,
};
</code></pre></div>
<p>修改<code>package.json</code>，增加测试相关命令，并且代码提交前，跑测试用例，如下：</p>
<p><strong>package.json</strong></p>
<div class="highlight"><pre><span></span><code>&quot;scripts&quot;: {
  ...
+  &quot;test&quot;: &quot;jest&quot;,                         # 执行jest
+  &quot;test:watch&quot;: &quot;jest --watch&quot;,           # watch模式下执行
+  &quot;test:coverage&quot;: &quot;jest --coverage&quot;,     # 生成测试覆盖率报告
+  &quot;test:update&quot;: &quot;jest --updateSnapshot&quot;  # 更新快照
},
...
&quot;lint-staged&quot;: {
  &quot;components/**/*.ts?(x)&quot;: [
    &quot;prettier --write&quot;,
    &quot;eslint --fix&quot;,
+   &quot;jest --bail --findRelatedTests&quot;,
    &quot;git add&quot;
  ],
  ...
}
</code></pre></div>
<p>修改<code>gulpfile.js</code>以及<code>tsconfig.json</code>，避免打包时，把测试文件一并处理了。</p>
<p><strong>gulpfile.js</strong></p>
<div class="highlight"><pre><span></span><code>const paths = {
  ...
- scripts: [&#39;components/**/*.{ts,tsx}&#39;, &#39;!components/**/demo/*.{ts,tsx}&#39;],
+ scripts: [
+   &#39;components/**/*.{ts,tsx}&#39;,
+   &#39;!components/**/demo/*.{ts,tsx}&#39;,
+   &#39;!components/**/__tests__/*.{ts,tsx}&#39;,
+ ],
};
</code></pre></div>
<p><strong>tsconfig.json</strong></p>
<div class="highlight"><pre><span></span><code>{
- &quot;exclude&quot;: [&quot;components/**/demo&quot;]
+ &quot;exclude&quot;: [&quot;components/**/demo&quot;, &quot;components/**/__tests__&quot;]
}
</code></pre></div>
<h3 id="_19">编写测试用例<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h3>
<p><code>&lt;Alert /&gt;</code>比较简单，此处只作示例用，简单进行一下快照测试。</p>
<p>在对应组件的文件夹下新建<code>__tests__</code>文件夹，用于存放测试文件，其内新建<code>index.test.tsx</code>文件，写入以下测试用例：</p>
<p><strong>components/alert/**tests</strong>/index.test.tsx**</p>
<div class="highlight"><pre><span></span><code>import React from &#39;react&#39;;
import { render } from &#39;@testing-library/react&#39;;
import Alert from &#39;../alert&#39;;

describe(&#39;&lt;Alert /&gt;&#39;, () =&gt; {
  test(&#39;should render default&#39;, () =&gt; {
    const { container } = render(&lt;Alert&gt;default&lt;/Alert&gt;);
    expect(container).toMatchSnapshot();
  });

  test(&#39;should render alert with type&#39;, () =&gt; {
    const kinds: any[] = [&#39;info&#39;, &#39;warning&#39;, &#39;positive&#39;, &#39;negative&#39;];

    const { getByText } = render(
      &lt;&gt;
        {kinds.map(k =&gt; (
          &lt;Alert kind={k} key={k}&gt;
            {k}
          &lt;/Alert&gt;
        ))}
      &lt;/&gt;,
    );

    kinds.forEach(k =&gt; {
      expect(getByText(k)).toMatchSnapshot();
    });
  });
});
</code></pre></div>
<p>更新一下快照：</p>
<div class="highlight"><pre><span></span><code>yarn test:update
</code></pre></div>
<p>可以看见同级目录下新增了一个<code>__snapshots__</code>文件夹，里面存放对应测试用例的快照文件。</p>
<p><img alt="生成的快照文件" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" />生成的快照文件</p>
<p>再执行测试用例：</p>
<div class="highlight"><pre><span></span><code>yarn test
</code></pre></div>
<p><img alt="通过测试用例" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" />通过测试用例</p>
<p>可以发现我们通过了测试用例。。。额，这里当然能通过，主要是后续我们进行迭代重构时，都会重新执行测试用例，与最近的一次快照进行比对，如果与快照不一致（结构发生了改变），那么相应的测试用例就无法通过。</p>
<p>对于快照测试，褒贬不一，这个例子也着实简单得很，甚至连扩展的 <code>jest-dom</code>提供的 <code>matchers</code> 都没用上。</p>
<p>如何编写优秀的测试用例，我也是一个新手，只能说多看多写多尝试，前面推荐的文章很不错。</p>
<p>本节代码可以在仓库的<code>chapter-4</code>分支获取，若存在与本文内容不符的地方，以<code>master</code>分支以及文章为准。</p>
<h2 id="_20">标准化发布流程<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h2>
<p>本节主要是讲解如何通过一行命令完成以下六点内容：</p>
<ol>
<li>版本更新</li>
<li>生成 CHANGELOG</li>
<li>推送至 git 仓库</li>
<li>组件库打包</li>
<li>发布至 npm</li>
<li>打 tag 并推送至 git</li>
</ol>
<p>如果你不想代码，很好，用np（如果我一开始就知道这个工具，我也不会去写代码，我真傻，真的）。</p>
<p><strong>package.json</strong></p>
<div class="highlight"><pre><span></span><code>&quot;scripts&quot;: {
+ &quot;release&quot;: &quot;ts-node ./scripts/release.ts&quot;
},
</code></pre></div>
<p>直接甩代码吧，实在不复杂。</p>
<div class="highlight"><pre><span></span><code>/* eslint-disable  import/no-extraneous-dependencies,@typescript-eslint/camelcase, no-console */
import inquirer from &#39;inquirer&#39;;
import fs from &#39;fs&#39;;
import path from &#39;path&#39;;
import child_process from &#39;child_process&#39;;
import util from &#39;util&#39;;
import chalk from &#39;chalk&#39;;
import semverInc from &#39;semver/functions/inc&#39;;
import { ReleaseType } from &#39;semver&#39;;

import pkg from &#39;../package.json&#39;;

const exec = util.promisify(child_process.exec);

const run = async (command: string) =&gt; {
  console.log(chalk.green(command));
  await exec(command);
};

const currentVersion = pkg.version;

const getNextVersions = (): { [key in ReleaseType]: string | null } =&gt; ({
  major: semverInc(currentVersion, &#39;major&#39;),
  minor: semverInc(currentVersion, &#39;minor&#39;),
  patch: semverInc(currentVersion, &#39;patch&#39;),
  premajor: semverInc(currentVersion, &#39;premajor&#39;),
  preminor: semverInc(currentVersion, &#39;preminor&#39;),
  prepatch: semverInc(currentVersion, &#39;prepatch&#39;),
  prerelease: semverInc(currentVersion, &#39;prerelease&#39;),
});

const timeLog = (logInfo: string, type: &#39;start&#39; | &#39;end&#39;) =&gt; {
  let info = &#39;&#39;;
  if (type === &#39;start&#39;) {
    info = `=&gt; 开始任务：${logInfo}`;
  } else {
    info = `✨ 结束任务：${logInfo}`;
  }
  const nowDate = new Date();
  console.log(
    `[${nowDate.toLocaleString()}.${nowDate
      .getMilliseconds()
      .toString()
      .padStart(3, &#39;0&#39;)}] ${info}
    `,
  );
};

/**
 * 获取下一次版本号
 */
async function prompt(): Promise&lt;string&gt; {
  const nextVersions = getNextVersions();
  const { nextVersion } = await inquirer.prompt([
    {
      type: &#39;list&#39;,
      name: &#39;nextVersion&#39;,
      message: `请选择将要发布的版本 (当前版本 ${currentVersion})`,
      choices: (Object.keys(nextVersions) as Array&lt;ReleaseType&gt;).map(level =&gt; ({
        name: `${level} =&gt; ${nextVersions[level]}`,
        value: nextVersions[level],
      })),
    },
  ]);
  return nextVersion;
}

/**
 * 更新版本号
 * @param nextVersion 新版本号
 */
async function updateVersion(nextVersion: string) {
  pkg.version = nextVersion;
  timeLog(&#39;修改package.json版本号&#39;, &#39;start&#39;);
  await fs.writeFileSync(path.resolve(__dirname, &#39;./../package.json&#39;), JSON.stringify(pkg));
  await run(&#39;npx prettier package.json --write&#39;);
  timeLog(&#39;修改package.json版本号&#39;, &#39;end&#39;);
}

async function generateChangelog() {
  timeLog(&#39;生成CHANGELOG.md&#39;, &#39;start&#39;);
  await run(&#39; npx conventional-changelog -p angular -i CHANGELOG.md -s -r 0&#39;);
  timeLog(&#39;生成CHANGELOG.md&#39;, &#39;end&#39;);
}

/**
 * 将代码提交至git
 */
async function push(nextVersion: string) {
  timeLog(&#39;推送代码至git仓库&#39;, &#39;start&#39;);
  await run(&#39;git add package.json CHANGELOG.md&#39;);
  await run(`git commit -m &quot;v${nextVersion}&quot; -n`);
  await run(&#39;git push&#39;);
  timeLog(&#39;推送代码至git仓库&#39;, &#39;end&#39;);
}

/**
 * 组件库打包
 */
async function build() {
  timeLog(&#39;组件库打包&#39;, &#39;start&#39;);
  await run(&#39;npm run build&#39;);
  timeLog(&#39;组件库打包&#39;, &#39;end&#39;);
}

/**
 * 发布至npm
 */
async function publish() {
  timeLog(&#39;发布组件库&#39;, &#39;start&#39;);
  await run(&#39;npm publish&#39;);
  timeLog(&#39;发布组件库&#39;, &#39;end&#39;);
}

/**
 * 打tag提交至git
 */
async function tag(nextVersion: string) {
  timeLog(&#39;打tag并推送至git&#39;, &#39;start&#39;);
  await run(`git tag v${nextVersion}`);
  await run(`git push origin tag v${nextVersion}`);
  timeLog(&#39;打tag并推送至git&#39;, &#39;end&#39;);
}

async function main() {
  try {
    const nextVersion = await prompt();
    const startTime = Date.now();
    // =================== 更新版本号 ===================
    await updateVersion(nextVersion);
    // =================== 更新changelog ===================
    await generateChangelog();
    // =================== 代码推送git仓库 ===================
    await push(nextVersion);
    // =================== 组件库打包 ===================
    await build();
    // =================== 发布至npm ===================
    await publish();
    // =================== 打tag并推送至git ===================
    await tag(nextVersion);
    console.log(`✨ 发布流程结束 共耗时${((Date.now() - startTime) / 1000).toFixed(3)}s`);
  } catch (error) {
    console.log(&#39;💣 发布失败，失败原因：&#39;, error);
  }
}

main();
</code></pre></div>
<h2 id="_21">初始化组件<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h2>
<p>每次初始化一个组件就要新建许多文件以及文件夹，复制粘贴也可，不过还可以使用更高级一点的偷懒方式。</p>
<p>常规思路，新建一个组件模板文件夹，里面包含一个组件所需要的所有文件，同时写好文件内容。</p>
<p>至于一些动态内容，譬如组件中英文名称，选一个你喜欢的模板语言（如 handlebars），用其方式留空<code>{{componentName}}</code>。</p>
<p><strong>package.json</strong></p>
<div class="highlight"><pre><span></span><code>&quot;scripts&quot;: {
+ &quot;new&quot;: &quot;ts-node ./scripts/new.ts&quot;
},
</code></pre></div>
<p>接下来我们在<code>new.ts</code>中编写相关步骤，无非是：</p>
<ol>
<li>基于<code>inquirer.js</code>询问一些基本组件信息</li>
<li>结合信息，渲染模板（填空）至组件文件夹</li>
<li>向 components/index.ts 插入导出语句</li>
</ol>
<p>你以为我会写<code>new.ts</code>吗，不，我不会（虽然我真写过）。</p>
<p>主要是使用metalsmith进行数据与模板结合，写脚手架的同学可能比较熟悉。</p>
<p>自从我知道了plop.js这个库，那么又可以偷懒了（为什么之前没有人告诉我有这么多好用的工具？？？）</p>
<div class="highlight"><pre><span></span><code>&quot;scripts&quot;: {
- &quot;new&quot;: &quot;ts-node ./scripts/new.ts&quot;,
+ &quot;new&quot;: &quot;plop --plopfile ./scripts/plopfile.ts&quot;,
},
</code></pre></div>
<p>于是上述流程可以大大简化，不需要写代码去询问，不需要手动渲染模板，我们要做的就是写好模板，并且配置好问题以及渲染目的地。</p>
<p>详情可见：</p>
<ul>
<li>配置文件：scripts/plopfile.ts</li>
<li>模板文件：templates/component</li>
</ul>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">July 29, 2025</span>
  </span>

    
    
    
      
  
  <span class="md-source-file__fact">
    <span class="md-icon" title="Contributors">
      
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4"/></svg>
      
    </span>
    <nav>
      
        <a href="mailto:1822852997@qq.com">Michael An</a>
    </nav>
  </span>

    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; Michael An
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="../../js/baidu-statistics.min.js"></script>
      
        <script src="../../js/history.min.js"></script>
      
    
  </body>
</html>