
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Michael An">
      
      
        <link rel="canonical" href="https://michael18811380328.github.io/react-hooks/07%20React%20Hooks%20%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/">
      
      
        <link rel="prev" href="../06%20%E7%B2%BE%E9%80%9AReact%20Hooks/">
      
      
        <link rel="next" href="../08%20useMemo%E3%80%81useCallback%E3%80%81useContext/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.42">
    
    
      
        <title>07 React Hooks 最佳实践 - Michale An Blog</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#react-hooks" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Michale An Blog" class="md-header__button md-logo" aria-label="Michale An Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Michale An Blog
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              07 React Hooks 最佳实践
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Michael18811380328/Michael18811380328.github.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Michael18811380328/Michael18811380328.github.io
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Michale An Blog" class="md-nav__button md-logo" aria-label="Michale An Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Michale An Blog
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Michael18811380328/Michael18811380328.github.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Michael18811380328/Michael18811380328.github.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    index
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    new-third-part-lib
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            new-third-part-lib
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/%40excalidraw_excalidraw/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    @excalidraw_excalidraw
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/Bootstrap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bootstrap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/JS-Bridge/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JS-Bridge
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/JSON%20Server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JSON Server
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/JSzip/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JSzip
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/Leaflet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Leaflet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/Mocha/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mocha
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/React%20Image%20Lightbox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React Image Lightbox
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/React-Sweet-Progress/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React-Sweet-Progress
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/Rxjs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rxjs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/Storybook/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Storybook
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/ThreeJS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ThreeJS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/UUID-js/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UUID-js
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/YesPlayMusic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    YesPlayMusic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/ant-design-vue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ant-design-vue
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/antd-mobile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    antd-mobile
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/anv-g2.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    anv-g2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/arco-design-vue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    arco-design-vue
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/autoprefixer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    autoprefixer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/awesome-vue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    awesome-vue
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/axios/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    axios
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/babel-cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    babel-cli
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/babel-eslint/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    babel-eslint
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/babel-jest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    babel-jest
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/babel-loader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    babel-loader
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/babel-plugin-named-asset-import/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    babel-plugin-named-asset-import
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/babel-preset-env/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    babel-preset-env
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/babel-preset-react-app/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    babel-preset-react-app
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/babel-preset-react/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    babel-preset-react
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/case-sensitive-paths-webpack-plugin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    case-sensitive-paths-webpack-plugin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/chartjs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    chartjs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/classnames/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    classnames
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/clean-webpack-plugin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    clean-webpack-plugin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/connect-multiparty/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    connect-multiparty
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/copy-to-clipboard/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    copy-to-clipboard
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/crypto-js/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    crypto-js
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/css-loader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    css-loader
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/csv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    csv
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/date-format/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    date-format
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/dayjs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dayjs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/debug/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    debug
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/deep-copy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    deep-copy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/detect-character-encoding/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    detect-character-encoding
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/dir/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dir
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/docxtemplater/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docxtemplater
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/dom-helper/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dom-helper
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/dom-helpers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dom-helpers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/dotenv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dotenv
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/editor-js/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    editor-js
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/element-plus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    element-plus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/element-ui/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    element-ui
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/enzyme/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    enzyme
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/eslint-config-react-app/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    eslint-config-react-app
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/eslint-loader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    eslint-loader
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/eslint-plugin-flowtype/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    eslint-plugin-flowtype
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/eslint-plugin-import/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    eslint-plugin-import
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/eslint-plugin-react/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    eslint-plugin-react
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/eslint/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    eslint
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/etcd3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    etcd3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/excalidraw/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    excalidraw
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/exif-js/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    exif-js
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/express-rate-limit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    express-rate-limit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/express/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    express
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/file-loader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    file-loader
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/file-saver/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    file-saver
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/form-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    form-data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/formik/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    formik
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/github-copilot-resources_copilot-metrics-viewer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    github-copilot-resources_copilot-metrics-viewer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/glamor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    glamor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/gojs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    gojs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/html2canvas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    html2canvas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/http-server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    http-server
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/i18next-browser-languagedetector/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    i18next-browser-languagedetector
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/i18next-xhr-backend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    i18next-xhr-backend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/i18next/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    i18next
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/iconv-lite/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    iconv-lite
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/is-hotkey/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    is-hotkey
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/isScroll/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    isScroll
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/jest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jest
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/jison/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jison
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/jsonwebtoken/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jsonwebtoken
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/keymirror/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    keymirror
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/lerna/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    lerna
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/lodash-throttle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    lodash-throttle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/lodash/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    lodash
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/log4js/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    log4js
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/luckysheet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    luckysheet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/mind-map/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mind-map
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/mockjs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mockjs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/moment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    moment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/mysql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mysql
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/number-precision/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    number-precision
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/parcel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    parcel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/postcss-loader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    postcss-loader
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/postcss-normalize/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    postcss-normalize
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/postcss-preset-env/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    postcss-preset-env
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/postcss-safe-parser/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    postcss-safe-parser
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/promise/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    promise
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/puppeteer-print-pdf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    puppeteer-print-pdf
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/pure-admin_vue-pure-admin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pure-admin_vue-pure-admin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/quasar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    quasar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/raf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    raf
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/rc-calendar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rc-calendar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/react-cookies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-cookies
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/react-dnd-html5-backend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-dnd-html5-backend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/react-dnd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-dnd
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/react-i18next/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-i18next
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/react-intl-universal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-intl-universal
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/react-is-deprecated/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-is-deprecated
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/react-is/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-is
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/reactstrap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    reactstrap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/redis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    redis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/request/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    request
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/reselect/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    reselect
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/resolve-url-loader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    resolve-url-loader
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/resolve/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    resolve
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/response-time/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    response-time
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/resumablejs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    resumablejs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/ron-react-autocomplete/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ron-react-autocomplete
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/sass-loader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sass-loader
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/semver/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    semver
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/shallow-equal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    shallow-equal
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/shallowequal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    shallowequal
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/simple-statistics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    simple-statistics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/slugid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    slugid
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/socket%20io/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    socket io
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/socket-io-client/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    socket-io-client
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/socket-io/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    socket-io
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/socket.io/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    socket.io
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/sortable/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sortable
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/streamsaver/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    streamsaver
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/style-loader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    style-loader
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/supertest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    supertest
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/terser-webpack-plugin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    terser-webpack-plugin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/thingsboard-ui-vue3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    thingsboard-ui-vue3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/throttle-lodash/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    throttle-lodash
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/tiny-vue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tiny-vue
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/ts-jest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ts-jest
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/ts-pnp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ts-pnp
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/tui-image-editor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tui-image-editor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/uglyJS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    uglyJS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/url-loader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    url-loader
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/uuid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    uuid
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/v-viewer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    v-viewer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/vee-validate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vee-validate
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/video-js/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    video-js
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/viewerjs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    viewerjs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/vite/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vite
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/vue-draggable-resizable/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vue-draggable-resizable
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/vue-ruoyi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vue-ruoyi
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/vue-virtual-scroller/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vue-virtual-scroller
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/vuecli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vuecli
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/vuepress/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vuepress
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/vuetify/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vuetify
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/vuex/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vuex
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/vxe-table/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vxe-table
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/wangeditor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    wangeditor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/watermark/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    watermark
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/webpack-cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    webpack-cli
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/webpack-dev-server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    webpack-dev-server
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/webpack-merge/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    webpack-merge
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/webpack-node-externals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    webpack-node-externals
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/webpack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    webpack
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/whatwg-fetch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    whatwg-fetch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/workbox-webpack-plugin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    workbox-webpack-plugin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/zyronon_douyin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    zyronon_douyin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../new-third-part-lib/%CE%BCPlot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    μPlot
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    react
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            react
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/Create-React-App/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create-React-App
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React%20%26%20Webpack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React & Webpack
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React%2017%20%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E6%96%B0%E7%89%B9%E6%80%A7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React 17 事件处理新特性
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React%2018%20%E8%B6%85%E5%85%A8%E5%8D%87%E7%BA%A7%E6%8C%87%E5%8D%97/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React 18 超全升级指南
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React%20FAQ/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React FAQ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React%20Fiber%20Architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React Fiber Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React%20PureComponent%20%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React PureComponent 使用指南
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React%20data%20grid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React data grid
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React%20%E4%B8%AD%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React 中的事件处理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React%20%E5%90%84%E7%A7%8Dbug%20%E4%BC%9A%E5%AE%9E%E6%97%B6%E6%9B%B4%E6%96%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React 各种bug 会实时更新
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React%20%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React 官方文档笔记
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React%20%E5%B8%B8%E7%94%A8%E6%9C%AF%E8%AF%AD%E5%90%AB%E4%B9%89/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React 常用术语含义
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React%20%E5%BC%BA%E5%88%B6%E6%9B%B4%E6%96%B0%E7%BB%84%E4%BB%B6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React 强制更新组件
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React%20%E6%93%8D%E4%BD%9C%E5%85%83%E7%B4%A0%E7%9A%84API/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React 操作元素的API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React%20%E6%B5%8B%E8%AF%95%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React 测试入门教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React%20%E7%9A%84%20PureComponent%20%E4%B8%8E%20Component/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React 的 PureComponent 与 Component
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React%20%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B-%E4%BC%A0%E6%99%BA%E6%92%AD%E5%AE%A2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React 视频教程-传智播客
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React%20%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B-%E6%8A%80%E6%9C%AF%E8%83%96/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React 视频教程-技术胖
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React%20%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React 高阶组件
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React-Design%20Principles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React-Design Principles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React-Suspense%E7%9A%84%E5%AE%9E%E7%8E%B0%E4%B8%8E%E6%8E%A2%E8%AE%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React-Suspense的实现与探讨
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React-性能优化
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React.Children%E7%9A%84API/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React.Children的API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React.Component/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React.Component
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/ReactRouter-%E9%98%AE%E4%B8%80%E5%B3%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ReactRouter-阮一峰
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React%E4%B8%AD%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React中数据传输
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React%E4%BA%8B%E4%BB%B6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React事件
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React%E6%95%B0%E6%8D%AE%E6%B5%81/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React数据流
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React%E6%96%B0%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F--getDerivedStateFromProps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React新生命周期--getDerivedStateFromProps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6%E6%94%B9%E5%8F%98DOM%E6%96%B9%E6%B3%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React点击事件改变DOM方法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%B5%81%E7%A8%8B%E5%9B%BE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React生命周期流程图
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React%E8%8E%B7%E5%8F%96%E5%B0%BA%E5%AF%B8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React获取尺寸
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/React%E8%BF%9B%E9%98%B6%E2%80%94%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React进阶—性能优化
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/Refs%20%26%20DOM/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Refs & DOM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/getDerivedStateFromProps%E7%9A%84%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    getDerivedStateFromProps的使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/jsx%E8%AF%AD%E6%B3%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jsx语法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/react%20%E4%B8%AD%E9%80%9A%E8%BF%87ref%E8%8E%B7%E5%8F%96%E9%AB%98%E9%98%B6%EF%BC%88HOC%EF%BC%89%E5%AD%90%E7%BB%84%E4%BB%B6%E5%AE%9E%E4%BE%8B%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react 中通过ref获取高阶（HOC）子组件实例的解决方案
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/react%20%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react 项目结构及编码规范
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    react/react-dnd
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            react/react-dnd
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/react-dnd/01-readme.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    01-readme
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/react-dnd/02-quickstart.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    02-quickstart
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/react-dnd/03-Overview.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    03-Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/react-dnd/API.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/react-dnd/React DnD.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React DnD
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/react-dnd/Testing.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/react-dnd/Tutorial.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/react-dnd/react-dnd-DragLayer.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-dnd-DragLayer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/react-dnd/react-dnd-DragSource.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-dnd-DragSource
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/react-dnd/react-dnd-DropTarget.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-dnd-DropTarget
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/react-dnd/react-dnd.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-dnd
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/react-dnd/react-dnd使用手记.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-dnd使用手记
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/react-redux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-redux
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/react-responsive/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-responsive
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/react-transition-group-%E5%8A%A8%E7%94%BB%E6%95%88%E6%9E%9C/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-transition-group-动画效果
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/react-useRef/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-useRef
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/reactjs%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E4%B8%8A%E7%AF%87%EF%BC%88%E9%A6%96%E6%AC%A1%E6%B8%B2%E6%9F%93%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%EF%BC%89/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    reactjs源码分析-上篇（首次渲染实现原理）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/reactjs%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E4%B8%8B%E7%AF%87%EF%BC%88%E6%9B%B4%E6%96%B0%E6%9C%BA%E5%88%B6%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%EF%BC%89/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    reactjs源码分析-下篇（更新机制实现原理）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/react%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react生命周期函数源码学习
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/stackoverflow-Highlight%20text%20using%20ReactJS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stackoverflow-Highlight text using ReactJS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/todo-Testing%20React%20components/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-Testing React components
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/todo-VS%20Code%20%E5%BF%AB%E6%8D%B7%E8%BE%93%E5%85%A5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-VS Code 快捷输入
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/%E4%B8%BA%E4%BB%80%E4%B9%88%E8%AF%B4Suspense%E6%98%AF%E4%B8%80%E7%A7%8D%E5%B7%A8%E5%A4%A7%E7%9A%84%E7%AA%81%E7%A0%B4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    为什么说Suspense是一种巨大的突破
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3-React%E9%AB%98%E9%98%B6API/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    官方文档-React高阶API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/%E5%AF%B9React%20children%E7%90%86%E8%A7%A3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    对React children理解
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/%E6%8E%8C%E6%8F%A1%E6%8B%96%E6%8B%BD%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%88%E4%BD%BF%E7%94%A8ReactJS%20hooks%EF%BC%89/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    掌握拖拽的实现（使用ReactJS hooks）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/%E6%A1%88%E4%BE%8B-React%20Hook%2BTS4%20%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E9%A1%B9%E7%9B%AE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    案例-React Hook+TS4 最佳实践项目
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/%E6%A1%88%E4%BE%8B-React%20Testing%20Library%20%E5%92%8C%20Jest%20%E5%AE%8C%E6%88%90%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    案例-React Testing Library 和 Jest 完成单元测试
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/%E6%A1%88%E4%BE%8B-React%E7%BB%84%E4%BB%B6%E5%BA%93%E6%90%AD%E5%BB%BA%E6%80%BB%E7%BB%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    案例-React组件库搭建总结
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/%E9%98%AE%E4%B8%80%E5%B3%B0%20react%20%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    阮一峰 react 系列教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react/%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4%E7%9A%84%20REACT%202015%20%E4%B9%8B%E8%B7%AF/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    阿里巴巴的 REACT 2015 之路
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    react-hooks
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            react-hooks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../00%20React%20hook%20%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    00 React hook 笔记
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01%20React%20Hooks%20%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B-%E9%98%AE%E4%B8%80%E5%B3%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    01 React Hooks 入门教程-阮一峰
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02%20%E8%BD%BB%E6%9D%BE%E5%AD%A6%E4%BC%9A%20React%20%E9%92%A9%E5%AD%90-%E4%BB%A5%20useEffect%28%29%20%E4%B8%BA%E4%BE%8B-%E9%98%AE%E4%B8%80%E5%B3%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    02 轻松学会 React 钩子-以 useEffect() 为例-阮一峰
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03%20%E4%BB%8E%20Class%20%E8%BF%81%E7%A7%BB%E5%88%B0%20Hook/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    03 从 Class 迁移到 Hook
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04%20React%20%E5%86%85%E7%BD%AE%20Hook/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    04 React 内置 Hook
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05%20React%20Hooks%20%E8%AF%A6%E8%A7%A3%20%2B%20%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    05 React Hooks 详解 + 项目实战
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06%20%E7%B2%BE%E9%80%9AReact%20Hooks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    06 精通React Hooks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    07 React Hooks 最佳实践
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    07 React Hooks 最佳实践
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      写在前面
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      函数式组件
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      每一帧拥有独立的变量
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      状态
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      每一帧拥有独立的状态
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      获取过去或未来帧中的值
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#effects" class="md-nav__link">
    <span class="md-ellipsis">
      每一帧可以拥有独立的 Effects
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#effects_1" class="md-nav__link">
    <span class="md-ellipsis">
      在比对中执行 Effects
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eslint" class="md-nav__link">
    <span class="md-ellipsis">
      使用 ESLint 插件
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usememousecallback" class="md-nav__link">
    <span class="md-ellipsis">
      使用 useMemo/useCallback
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      惰性初始值
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#refs" class="md-nav__link">
    <span class="md-ellipsis">
      避免滥用 refs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usememo" class="md-nav__link">
    <span class="md-ellipsis">
      避免滥用 useMemo
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      受控与非受控
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#useslider" class="md-nav__link">
    <span class="md-ellipsis">
      实践：useSlider
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      结束语
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08%20useMemo%E3%80%81useCallback%E3%80%81useContext/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    08 useMemo、useCallback、useContext
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09%20React-hook%2BTS%E7%B1%BB%E5%9E%8B%E9%AA%8C%E8%AF%81/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    09 React-hook+TS类型验证
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    react-third-part-lib
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            react-third-part-lib
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/01-CSDN%20%E5%8D%9A%E5%AE%A2%E6%96%87%E6%A1%A3%E9%93%BE%E6%8E%A5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    01-CSDN 博客文档链接
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/030-react-is-deprecated/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    030-react-is-deprecated
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/031-react-sweet-progress/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    031-react-sweet-progress
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/032-reactstrap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    032-reactstrap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/044-react-app-polyfill/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    044-react-app-polyfill
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/045-react-dev-utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    045-react-dev-utils
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/046-react-dom/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    046-react-dom
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/069-react-codemirror/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    069-react-codemirror
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/073-react-i18next/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    073-react-i18next
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/101-%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93-react-poker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    101-第三方库-react-poker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/103-react-to-print/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    103-react-to-print
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/112-react-select/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    112-react-select
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/113-react-image-lightbox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    113-react-image-lightbox
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/21-%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93-react-window/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    21-第三方库-react-window
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/22-%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93-react-mentions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    22-第三方库-react-mentions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/23-%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93-react-loading-skeleton/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    23-第三方库-react-loading-skeleton
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/24-%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93-react-konva/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    24-第三方库-react-konva
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/25-%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93-react-canvas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    25-第三方库-react-canvas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/26-%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93-react-image-lightbox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    26-第三方库-react-image-lightbox
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/React-Select/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React-Select
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/Todo-054-GGEditor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Todo-054-GGEditor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/gojs-react/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    gojs-react
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/react-colorful/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-colorful
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/react-lazy-load/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react-lazy-load
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-00-React%20%E7%AC%94%E8%AE%B0%E7%9B%AE%E5%BD%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-00-React 笔记目录
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-009-html2canvas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-009-html2canvas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-017-qrcode-react/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-017-qrcode-react
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-050-react-custom-scrollbars/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-050-react-custom-scrollbars
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-052-react-select/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-052-react-select
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-053-react-media/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-053-react-media
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-055-DPlayer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-055-DPlayer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-20-React%20Router%20%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A31-v4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-20-React Router 中文文档1-v4
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-20-React%20Router%20%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A32/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-20-React Router 中文文档2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-20-react-router/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-20-react-router
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-26-%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93-react-use/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-26-第三方库-react-use
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-27-%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93-react-motion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-27-第三方库-react-motion
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-28-sort-by/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-28-sort-by
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-29-localForage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-29-localForage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-30-match-sorter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-30-match-sorter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-31-zxing-library%20%E5%AE%9E%E7%8E%B0%E5%89%8D%E7%AB%AF%E6%89%AB%E7%A0%81%E5%8A%9F%E8%83%BD/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-31-zxing-library 实现前端扫码功能
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-32-%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93-react-photoswipe-gallery/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-32-第三方库-react-photoswipe-gallery
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../react-third-part-lib/todo-33-React-%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    todo-33-React-第三方库
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    third-part-lib/codemirror
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            third-part-lib/codemirror
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/codemirror/Code-mirror/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code-mirror
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/codemirror/codemirror-readme/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    codemirror-readme
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/codemirror/codemirror/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    codemirror
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    third-part-lib/d3
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            third-part-lib/d3
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/d3/%23Introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    #Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/d3/d3-drag/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    d3-drag
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/d3/%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%8F%AF%E6%8B%96%E5%8A%A8%E7%9A%84%E5%9C%86%E5%B1%95%E7%A4%BAd3.drag%E7%9A%84%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    创建一个可拖动的圆展示d3.drag的使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/d3/%E8%AF%B4%E6%98%8E/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    说明
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    third-part-lib/debugjs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            third-part-lib/debugjs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/debugjs/README.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    README
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    third-part-lib/echarts
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            third-part-lib/echarts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/echarts/Readme.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Readme
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    third-part-lib/echarts/echarts-demo
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            third-part-lib/echarts/echarts-demo
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/echarts/echarts-demo/readme.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    readme
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    third-part-lib/slate
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            third-part-lib/slate
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/slate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    README
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/slate/Slate%20remove%20leaves/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Slate remove leaves
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" >
        
          
          <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    third-part-lib/slate/slate-new-API
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            third-part-lib/slate/slate-new-API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/slate/slate-new-API/block/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    block
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/slate/slate-new-API/change/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    change
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/slate/slate-new-API/data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/slate/slate-new-API/decoration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    decoration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/slate/slate-new-API/document/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    document
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/slate/slate-new-API/inline/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    inline
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/slate/slate-new-API/mark/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mark
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/slate/slate-new-API/node/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    node
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/slate/slate-new-API/operation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    operation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/slate/slate-new-API/point/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    point
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/slate/slate-new-API/range/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    range
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/slate/slate-new-API/schema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    schema
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/slate/slate-new-API/selection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    selection
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/slate/slate-new-API/text/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    text
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/slate/slate-new-API/utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    utils
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/slate/slate-new-API/value/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    value
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/slate/slate-new-API/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    slate-new-API
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14" >
        
          
          <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    third-part-lib/slate/slate-old-API
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14">
            <span class="md-nav__icon md-icon"></span>
            third-part-lib/slate/slate-old-API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/slate/slate-old-API/readme/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    readme
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/slate/slate-old-API/slate%20core/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    slate core
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/slate/%E5%8E%9F%E7%94%9FRange%E5%AF%B9%E8%B1%A1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    原生Range对象
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_15" >
        
          
          <label class="md-nav__link" for="__nav_15" id="__nav_15_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    third-part-lib/webRTC/css
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_15">
            <span class="md-nav__icon md-icon"></span>
            third-part-lib/webRTC/css
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../third-part-lib/webRTC/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E8%B0%83%E7%94%A8%E6%89%8B%E6%9C%BA%E6%91%84%E5%83%8F%E5%A4%B4%E6%89%AB%E6%8F%8F%E4%BA%8C%E7%BB%B4%E7%A0%81/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    移动端调用手机摄像头扫描二维码
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%B8%B8%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E4%BB%8B%E7%BB%8D/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    常用第三方库介绍
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      写在前面
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      函数式组件
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      每一帧拥有独立的变量
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      状态
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      每一帧拥有独立的状态
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      获取过去或未来帧中的值
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#effects" class="md-nav__link">
    <span class="md-ellipsis">
      每一帧可以拥有独立的 Effects
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#effects_1" class="md-nav__link">
    <span class="md-ellipsis">
      在比对中执行 Effects
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eslint" class="md-nav__link">
    <span class="md-ellipsis">
      使用 ESLint 插件
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usememousecallback" class="md-nav__link">
    <span class="md-ellipsis">
      使用 useMemo/useCallback
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      惰性初始值
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#refs" class="md-nav__link">
    <span class="md-ellipsis">
      避免滥用 refs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usememo" class="md-nav__link">
    <span class="md-ellipsis">
      避免滥用 useMemo
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      受控与非受控
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#useslider" class="md-nav__link">
    <span class="md-ellipsis">
      实践：useSlider
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      结束语
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="react-hooks">React Hooks 最佳实践<a class="headerlink" href="#react-hooks" title="Permanent link">&para;</a></h1>
<p>统计信息：字数 36951  阅读74分钟</p>
<p><a href="https://juejin.cn/post/6844904165500518414">https://juejin.cn/post/6844904165500518414</a></p>
<p><a href="https://juejin.cn/team/6932010947578069006/posts">网易云音乐技术团队<img alt="team icon" src="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/255e400027b783cbad76dc41527e7695.svg" /></a></p>
<p>2020-05-2256,710阅读24分钟</p>
<h2 id="_1">写在前面<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>在过去的几个月里，React Hooks 在我们的项目中得到了充分利用。在实际使用过程中，我发现 React Hooks 除了带来简洁的代码外，也存在对其使用不当的情况。</p>
<p>在这篇文章中，我想总结我过去几个月来对 React Hooks 使用，分享我对它的看法以及我认为的最佳实践，供大家参考。</p>
<p>本文假定读者已经对 React-Hooks 及其使用方式有了初步的了解。您可以通过 <a href="https://link.juejin.cn?target=https%3A%2F%2Freactjs.org%2Fdocs%2Fhooks-intro.html">官方文档</a> 进行学习。</p>
<h2 id="_2">函数式组件<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>简而言之，就是在一个函数中返回 React Element。</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">App</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">props</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">title</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">props</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">title</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
<span class="w">    </span><span class="p">);</span><span class="w">  </span>
<span class="p">};</span>
</code></pre></div>
<p>一般的，该函数接收唯一的参数：props 对象。从该对象中，我们可以读取到数据，并通过计算产生新的数据，最后返回 React Elements 以交给 React 进行渲染。此外也可以选择在函数中执行副作用。</p>
<p>在本文中，我们给函数式组件的函数起个简单一点的名字：render 函数。</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">appElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">App</span><span class="p">({</span><span class="w"> </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;XXX&quot;</span><span class="w"> </span><span class="p">});</span>
<span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span>
<span class="w">    </span><span class="nx">appElement</span><span class="p">,</span>
<span class="w">    </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;app&#39;</span><span class="p">)</span>
<span class="p">);</span>
</code></pre></div>
<p>在上方的代码中，我们自行调用了 render 函数以期执行渲染。然而这在 React 中不是正常的操作。</p>
<p>正常操作是像下方这样的代码：</p>
<div class="highlight"><pre><span></span><code><span class="c1">// React.createElement(App, {</span>
<span class="c1">//     title: &quot;XXX&quot;</span>
<span class="c1">// });</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">appElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">App</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">&quot;XXX&quot;</span><span class="w"> </span><span class="o">/&gt;</span><span class="p">;</span>
<span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span>
<span class="w">    </span><span class="nx">appElement</span><span class="p">,</span>
<span class="w">    </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;app&#39;</span><span class="p">)</span>
<span class="p">);</span>
</code></pre></div>
<p>在 React 内部，它会决定在何时调用 render 函数，并对返回的 React Elements 进行遍历，如果遇到函数组件，React 便会继续调用这个函数组件。在这个过程中，可以由父组件通过 props 将数据传递到该子组件中。最终 React 会调用完所有的组件，从而知晓如何进行渲染。</p>
<p>这种把 render 函数交给 React 内部处理的机制，为引入状态带来了可能。</p>
<p>在本文中，为了方便描述，对于 render 函数的每次调用，我想称它为一帧。</p>
<h2 id="_3">每一帧拥有独立的变量<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<p>在引入状态之前，我们需要明白这一点。</p>
<p>我们通过 <em>例一</em> 进行观察：</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcodesandbox.io%2Fs%2Fserverless-microservice-35z1y%3Ffontsize%3D14%26hidenavigation%3D1%26module%3D%2Fsrc%2FExample.js%26theme%3Ddark"><img alt="Edit 1. 每一帧拥有独立的变量" src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/22/1723a2f77a00c0f2~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" /></a></p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">Example</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">count</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">props</span><span class="p">;</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">handleClick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">alert</span><span class="p">(</span><span class="nx">count</span><span class="p">);</span>
<span class="w">        </span><span class="p">},</span><span class="w"> </span><span class="mf">3000</span><span class="p">);</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">count</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClick</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Alert</span><span class="w"> </span><span class="nx">Count</span><span class="o">&lt;</span><span class="err">/button&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">    </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>重点关注 <code>&lt;Example&gt;</code> 函数组件的代码，其中的 <code>count</code> 属性由父组件传入，初始值为 0，每隔一秒增加 1。点击 "Alert Count" 按钮，将延迟 3 秒钟弹出 <code>count</code> 的值。操作后发现，弹窗中出现的值，与页面中文本展示的值不同，而是等于点击 "alert Count" 按钮时 <code>count</code> 的值。</p>
<p>如果更换为 class 组件，它的实现是 <code>&lt;Example2&gt;</code> 这样的：</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nx">Example2</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Component</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">handleClick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">count</span><span class="p">);</span>
<span class="w">        </span><span class="p">},</span><span class="w"> </span><span class="mf">3000</span><span class="p">);</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="nx">render</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="nx">Example2</span><span class="o">&lt;</span><span class="err">/h2&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">count</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleClick</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Alert</span><span class="w"> </span><span class="nx">Count</span><span class="o">&lt;</span><span class="err">/button&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>此时，点击 "Alert Count" 按钮，延迟 3 秒钟弹出 <code>count</code> 的值，与页面中文本展示的值是一样的。</p>
<p>在某些情况下，<code>&lt;Example&gt;</code> 函数组件中的行为才符合预期。如果将 <code>setTimeout</code> 类比到一次 Fetch 请求，在请求成功时，我要获取的是发起 Fetch 请求前相关的数据，并对其进行修改。</p>
<p>如何理解其中的差异呢？</p>
<p>在 <code>&lt;Example2&gt;</code> class 组件中，我们是从 <code>this</code> 中获取到的 <code>props.count</code>。<code>this</code> 是固定指向同一个组件实例的。在 3 秒的延时器生效后，组件重新进行了渲染，<code>this.props</code> 也发生了改变。当延时的回调函数执行时，读取到的 <code>this.props</code> 是当前组件最新的属性值。</p>
<p>而在 <code>&lt;Example&gt;</code> 函数组件中，每一次执行 render 函数时，<code>props</code> 作为该函数的参数传入，它是函数作用域下的变量。</p>
<p>当 <code>&lt;Example&gt;</code> 组件被创建，将运行类似这样的代码来完成第一帧：</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">props_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">count</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="p">};</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">handleClick_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">alert</span><span class="p">(</span><span class="nx">props_0</span><span class="p">.</span><span class="nx">count</span><span class="p">);</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="mf">3000</span><span class="p">);</span>
<span class="p">};</span>
<span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="nx">Example</span><span class="o">&lt;</span><span class="err">/h2&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">props_0</span><span class="p">.</span><span class="nx">count</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClick_0</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">alert</span><span class="w"> </span><span class="nx">Count</span><span class="o">&lt;</span><span class="err">/button&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="p">);</span>
</code></pre></div>
<p>当父组件传入的 count 变为 1，React 会再次调用 <code>Example</code> 函数，执行第二帧，此时 <code>count</code> 是 <code>1</code>。</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">props_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">count</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="p">};</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">handleClick_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">alert</span><span class="p">(</span><span class="nx">props_1</span><span class="p">.</span><span class="nx">count</span><span class="p">);</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="mf">3000</span><span class="p">);</span>
<span class="p">};</span>
<span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="nx">Example</span><span class="o">&lt;</span><span class="err">/h2&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">props_1</span><span class="p">.</span><span class="nx">count</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClick_1</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">alert</span><span class="w"> </span><span class="nx">Count</span><span class="o">&lt;</span><span class="err">/button&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="p">);</span>
</code></pre></div>
<p>由于 <code>props</code> 是 <code>Example</code> 函数作用域下的变量，可以说对于这个函数的每一次调用中，都产生了新的 <code>props</code> 变量，它在声明时被赋予了当前的属性，他们相互间互不影响。</p>
<p>换一种说法，对于其中任一个 <code>props</code> ，其值在声明时便已经决定，不会随着时间产生变化。<code>handleClick</code> 函数亦是如此。例如定时器的回调函数是在未来发生的，但 <code>props.count</code> 的值是在声明 <code>handleClick</code> 函数时就已经决定好的。</p>
<p>如果我们在函数开头使用解构赋值，<code>const { count } = props</code>，之后直接使用 <code>count</code>，和上面的情况没有区别。</p>
<h2 id="_4">状态<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<p>可以简单的认为，在某个组件中，对于返回的 React Elements 树形结构，某个位置的 element ，其类型与 key 属性均不变，React 便会选择重用该组件实例；否则，比如从 <code>&lt;A/&gt;</code> 组件切换到了 <code>&lt;B/&gt;</code> 组件，会销毁 A，然后重建 B，B 此时会执行第一帧。</p>
<p>在实例中，可以通过 <code>useState</code> 等方式拥有局部状态。在重用的过程中，这些状态会得到保留。而如果无法重用，状态会被销毁。</p>
<p>例如 <code>useState</code>，为当前的函数组件创建了一个状态，这个状态的值独立于函数存放。 <code>useState</code> 会返回一个数组，在该数组中，得到该状态的值和更新该状态的方法。通过解构，该状态的值会赋值到当前 render 函数作用域下的一个常量 <code>state</code> 中。</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">setState</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="nx">initialState</span><span class="p">);</span>
</code></pre></div>
<p>当组件被创建而不是重用时，即在组件的第一帧中，该状态将被赋予初始值 <code>initialState</code>，而之后的重用过程中，不会被重复赋予初始值。</p>
<p>通过调用 <code>setState</code> ，可以更新状态的值。</p>
<h2 id="_5">每一帧拥有独立的状态<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<p>需要明确的是，<code>state</code> 作为函数中的一个常量，就是普通的数据，并不存在诸如数据绑定这样的操作来驱使 DOM 发生更新。在调用 <code>setState</code> 后，React 将重新执行 render 函数，仅此而已。</p>
<p>因此，状态也是函数作用域下的普通变量。我们可以说每次函数执行拥有独立的状态。</p>
<p>为了加深印象，我们来看 <em>例二</em>，它是 React 官网某个例子的复杂化：</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcodesandbox.io%2Fs%2Fhardcore-fast-66u24%3Ffontsize%3D14%26hidenavigation%3D1%26theme%3Ddark"><img alt="Edit 每一帧拥有独立的状态" src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/22/1723a2f77a00c0f2~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" /></a></p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">Example2</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">count</span><span class="p">,</span><span class="w"> </span><span class="nx">setCount</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">handleClick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">setCount</span><span class="p">(</span><span class="nx">count</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">        </span><span class="p">},</span><span class="w"> </span><span class="mf">3000</span><span class="p">);</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">count</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setCount</span><span class="p">(</span><span class="nx">count</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">)}</span><span class="o">&gt;</span>
<span class="w">                </span><span class="nx">setCount</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/button&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClick</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">                </span><span class="nx">Delay</span><span class="w"> </span><span class="nx">setCount</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/button&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">    </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>在第一帧中，<code>p</code> 标签中的文本为 0。点击 "Delay setCount"，文本依然为 0。随后在 3 秒内连续点击 "setCount" 两次，将会分别执行第二帧和第三帧。你将看到 <code>p</code> 标签中的文本由 0 变化为 1, 2。但在点击 "Delay setCount" 3 秒后，文本重新变为 1。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// 第一帧</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">count_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">handleClick_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">delayAction_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">setCount</span><span class="p">(</span><span class="nx">count_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">delayAction_1</span><span class="p">,</span><span class="w"> </span><span class="mf">3000</span><span class="p">);</span>
<span class="p">};</span>

<span class="c1">//...</span>
<span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClick_1</span><span class="p">}</span><span class="o">&gt;</span>
<span class="c1">//...</span>

<span class="c1">// 点击 &quot;setCount&quot; 后第二帧</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">count_2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">handleClick_2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">delayAction_2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">setCount</span><span class="p">(</span><span class="nx">count_2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">delayAction_2</span><span class="p">,</span><span class="w"> </span><span class="mf">3000</span><span class="p">);</span>
<span class="p">};</span>

<span class="c1">//...</span>
<span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClick_2</span><span class="p">}</span><span class="o">&gt;</span>
<span class="c1">//...</span>

<span class="c1">// 再次点击 &quot;setCount&quot; 后第三帧</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">count_3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">handleClick_3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">delayAction_3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">setCount</span><span class="p">(</span><span class="nx">count_3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">delayAction_3</span><span class="p">,</span><span class="w"> </span><span class="mf">3000</span><span class="p">);</span>
<span class="p">};</span>

<span class="c1">//...</span>
<span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClick_3</span><span class="p">}</span><span class="o">&gt;</span>
<span class="c1">//...</span>
</code></pre></div>
<p><code>count</code>，<code>handleClick</code> 都是 <code>Example2</code> 函数作用域中的常量。在点击 "Delay setCount" 时，定时器设置 3000ms 到期后的执行函数为 <code>delayAction_1</code>，函数中读取 <code>count_1</code> 常量的值是 0，这和第二帧的 <code>count_2</code> 无关。</p>
<h2 id="_6">获取过去或未来帧中的值<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h2>
<p>对于 state，如果想要在第一帧时点击 "Delay setCount" ，在一个异步回调函数的执行中，获取到 <code>count</code> 最新一帧中的值，不妨向 <code>setCount</code> <a href="https://link.juejin.cn?target=https%3A%2F%2Freactjs.org%2Fdocs%2Fhooks-reference.html%23functional-updates">传入函数作为参数</a>。</p>
<p>其他情况下，例如需要读取到 state 及其衍生的某个常量，相对于变量声明时所在帧过去或未来的值，就需要使用 <code>useRef</code>，通过它来拥有一个在所有帧中共享的变量。</p>
<p>如果要与 class 组件进行比较，<code>useRef</code> 的作用相对于让你在 class 组件的 <code>this</code> 上追加属性。</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">refContainer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useRef</span><span class="p">(</span><span class="nx">initialValue</span><span class="p">);</span>
</code></pre></div>
<p>在组件的第一帧中，<code>refContainer.current</code> 将被赋予初始值 <code>initialValue</code>，之后便不再发生变化。但你可以自己去设置它的值。设置它的值不会重新触发 render 函数。</p>
<p>例如，我们把第 n 帧的某个 props 或者 state 通过 <code>useRef</code> 进行保存，在第 n + 1 帧可以读取到过去的，第 n 帧中的值。我们也可以在第 n + 1 帧使用 ref 保存某个 props 或者 state，然后在第 n 帧中声明的异步回调函数中读取到它。</p>
<p>对 <em>例二</em> 进行修改，得到 <em>例三</em>，看看具体的效果：</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcodesandbox.io%2Fs%2Frecursing-dan-b1syo%3Ffontsize%3D14%26hidenavigation%3D1%26theme%3Ddark"><img alt="Edit 获取过去或未来帧中的值" src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/22/1723a2f77a00c0f2~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" /></a></p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">Example</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">count</span><span class="p">,</span><span class="w"> </span><span class="nx">setCount</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">currentCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useRef</span><span class="p">(</span><span class="nx">count</span><span class="p">);</span>

<span class="w">    </span><span class="nx">currentCount</span><span class="p">.</span><span class="nx">current</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">count</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">handleClick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">setCount</span><span class="p">(</span><span class="nx">currentCount</span><span class="p">.</span><span class="nx">current</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">        </span><span class="p">},</span><span class="w"> </span><span class="mf">3000</span><span class="p">);</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">count</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setCount</span><span class="p">(</span><span class="nx">count</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">)}</span><span class="o">&gt;</span>
<span class="w">                </span><span class="nx">setCount</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/button&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClick</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">                </span><span class="nx">Delay</span><span class="w"> </span><span class="nx">setCount</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/button&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">    </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>在 <code>setCount</code> 后便会执行下一帧，在函数的开头， <code>currentCount</code> 始终与最新的 <code>count</code> state 保持同步。因此，在 <code>setTimeout</code> 中可以通过此方法获取到回调函数执行时当前的 count 值。</p>
<p>接下来再通过 <em>例四</em> 了解如何获取过去帧中的值：</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcodesandbox.io%2Fs%2Fsnowy-voice-e4lyn%3Ffontsize%3D14%26hidenavigation%3D1%26theme%3Ddark"><img alt="Edit 获取过去帧中的值" src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/22/1723a2f77a00c0f2~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" /></a></p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">Example4</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">count</span><span class="p">,</span><span class="w"> </span><span class="nx">setCount</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="mf">1</span><span class="p">);</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">prevCountRef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useRef</span><span class="p">(</span><span class="mf">1</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">prevCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">prevCountRef</span><span class="p">.</span><span class="nx">current</span><span class="p">;</span>
<span class="w">    </span><span class="nx">prevCountRef</span><span class="p">.</span><span class="nx">current</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">count</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">handleClick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">setCount</span><span class="p">(</span><span class="nx">prevCount</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">count</span><span class="p">);</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">count</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClick</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">SetCount</span><span class="o">&lt;</span><span class="err">/button&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">    </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>这段代码实现的功能是，count 初始值为 1，点击按钮后累加到 2，随后点击按钮，总是用当前 count 的值和前一个 count 的值进行累加，得到新的 count 的值。</p>
<p><code>prevCountRef</code> 在 render 函数执行的过程中，与最新的 <code>count</code> state 进行了同步。由于在同步前，我们将该 ref 保存到函数作用域下的另一个变量 <code>prevCount</code> 中，因此我们总是能够获取到前一个 count 的值。</p>
<p>同样的方法，我们可以用于保存任何值：某个 prop，某个 state 变量，甚至一个函数等。在后面的 Effects 部分，我们会继续使用 refs 为我们带来好处。</p>
<h2 id="effects">每一帧可以拥有独立的 Effects<a class="headerlink" href="#effects" title="Permanent link">&para;</a></h2>
<p>如果弄清了前面的『每一帧拥有独立的变量』的概念，你会发现，若某个 useEffect/useLayoutEffect 有且仅有一个函数作为参数，那么每次 render 函数执行时该 Effects 也是独立的。因为它是在 render 函数中选择适当时机的执行。</p>
<p>对于 <code>useEffect</code> 来说，执行的时机是完成所有的 DOM 变更并让浏览器渲染页面后，而 <code>useLayoutEffect</code> 和 class 组件中 <code>componentDidMount</code>, <code>componentDidUpdate</code>一致——在 React 完成 DOM 更新后马上同步调用，会阻塞页面渲染。</p>
<p>如果 useEffect 没有传入第二个参数，那么第一个参数传入的 effect 函数在每次 render 函数执行是都是独立的。每个 effect 函数中捕获的 props 或 state 都来自于那一次的 render 函数。</p>
<p>我们可以再观察一个例子：</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">Counter</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">count</span><span class="p">,</span><span class="w"> </span><span class="nx">setCount</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>

<span class="w">    </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`You clicked </span><span class="si">${</span><span class="nx">count</span><span class="si">}</span><span class="sb"> times`</span><span class="p">);</span>
<span class="w">        </span><span class="p">},</span><span class="w"> </span><span class="mf">3000</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">You</span><span class="w"> </span><span class="nx">clicked</span><span class="w"> </span><span class="p">{</span><span class="nx">count</span><span class="p">}</span><span class="w"> </span><span class="nx">times</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setCount</span><span class="p">(</span><span class="nx">count</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">)}</span><span class="o">&gt;</span>
<span class="w">                </span><span class="nx">Click</span><span class="w"> </span><span class="nx">me</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/button&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">    </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>在这个例子中，每一次对 <code>count</code> 进行改变，重新执行 render 函数后，延迟 3 秒打印 <code>count</code> 的值。</p>
<p>如果我们不停地点击按钮，打印的结果是什么呢？</p>
<p>我们发现经过延时后，每个 count 的值被依次打印了，他们从 0 开始依次递增，且不重复。</p>
<p>如果换成 class 组件，尝试使用 <code>componentDidUpdate</code> 去实现，会得到不一样的结果：</p>
<div class="highlight"><pre><span></span><code><span class="nx">componentDidUpdate</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`You clicked </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">count</span><span class="si">}</span><span class="sb"> times`</span><span class="p">);</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="mf">3000</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p><code>this.state.count</code> 总是指向最新的 <code>count</code> 值，而不是属于某次调用 render 函数时的值。</p>
<p>因此，在使用 useEffect 时，应当抛开在 class 组件中关于生命周期的思维。他们并不相同。在 useEffect 中刻意寻找那几个生命周期函数的替代写法，将会陷入僵局，无法充分发挥 useEffect 的能力。</p>
<h2 id="effects_1">在比对中执行 Effects<a class="headerlink" href="#effects_1" title="Permanent link">&para;</a></h2>
<p>React 针对 React Elements 前后值进行对比，只去更新 DOM 真正发生改变的部分。对于 Effects，能否有类似这样的理念呢？</p>
<p>某个 Effects 函数一旦执行，函数内的副作用已经发生，React 无法猜测到函数相比于上一次做了哪些变化。但我们可以给 useEffect 传入第二个参数，作为依赖数组 (deps)，避免 Effects 不必要的重复调用。</p>
<p>这个 deps 的含义是：当前 Effect 依赖了哪些变量。</p>
<p>但有时问题不一定能解决。比如官网就有 <a href="https://link.juejin.cn?target=https%3A%2F%2Fzh-hans.reactjs.org%2Fdocs%2Fhooks-faq.html%23what-can-i-do-if-my-effect-dependencies-change-too-often">这样的例子</a>：</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">count</span><span class="p">,</span><span class="w"> </span><span class="nx">setCount</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>

<span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">setInterval</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">setCount</span><span class="p">(</span><span class="nx">count</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="mf">1000</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">clearInterval</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
<span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">count</span><span class="p">]);</span>
</code></pre></div>
<p>如果我们频繁修改 <code>count</code>，每次执行 Effect，上一次的计时器被清除，需要调用 <code>setInterval</code> 重新进入时间队列，实际的定期时间被延后，甚至有可能根本没有机会被执行。</p>
<p>但是下面这样的实践方式也不宜采用：</p>
<p>在 Effect 函数中寻找一些变量添加到 deps 中，需要满足条件：其变化时，需要重新触发 effect。</p>
<p>按照这种实践方式，<code>count</code> 变化时，我们并不希望重新 <code>setInterval</code>，故 deps 为空数组。这意味着该 hook 只在组件挂载时运行一次。Effect 中明明依赖了 <code>count</code>，但我们撒谎说它没有依赖，那么当 <code>setInterval</code> 回调函数执行时，获取到的 <code>count</code> 值永远为 0。</p>
<p>遇到这种问题，直接从 deps 移除是不可行的。静下来分析一下，此处为什么要用到 <code>count</code>？能否避免对其直接使用？</p>
<p>可以看到，在 <code>setCount</code> 中用到了 <code>count</code>，为的是把 <code>count</code> 转换为 <code>count + 1</code> ，然后返回给 React。React 其实已经知道当前的 <code>count</code>，我们需要告知 React 的仅仅是去递增状态，不管它现在具体是什么值。</p>
<p>所以有一个最佳实践：状态变更时，应该通过 setState 的函数形式来代替直接获取当前状态。</p>
<div class="highlight"><pre><span></span><code><span class="nx">setCount</span><span class="p">(</span><span class="nx">c</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">c</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
</code></pre></div>
<p>另外一种场景是：</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">count</span><span class="p">,</span><span class="w"> </span><span class="nx">setCount</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>

<span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">setInterval</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">count</span><span class="p">);</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="mf">1000</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">clearInterval</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
<span class="p">},</span><span class="w"> </span><span class="p">[]);</span>
</code></pre></div>
<p>在这里，同样的，当<code>count</code> 变化时，我们并不希望重新 <code>setInterval</code>。但我们可以把 <code>count</code> 通过 ref 保存起来。</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">count</span><span class="p">,</span><span class="w"> </span><span class="nx">setCount</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">countRef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useRef</span><span class="p">();</span>
<span class="nx">countRef</span><span class="p">.</span><span class="nx">current</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">count</span><span class="p">;</span>

<span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">setInterval</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">countRef</span><span class="p">.</span><span class="nx">current</span><span class="p">);</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="mf">1000</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">clearInterval</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
<span class="p">},</span><span class="w"> </span><span class="p">[]);</span>
</code></pre></div>
<p>这样，<code>count</code> 的确不再被使用，而是用 ref 存储了一个在所有帧中共享的变量。</p>
<p>另外的情况是，Effects 依赖了函数或者其他引用类型。与原始数据类型不同的是，在未优化的情况下，每次 render 函数调用时，因为对这些内容的重新创建，其值总是发生了变化，导致 Effects 在使用 deps 的情况下依然会频繁被调用。</p>
<p>对于这个问题，<a href="https://link.juejin.cn?target=https%3A%2F%2Fzh-hans.reactjs.org%2Fdocs%2Fhooks-faq.html%23is-it-safe-to-omit-functions-from-the-list-of-dependencies">官网的 FAQ</a> 已经给出了答案：对于函数，使用 useCallback 避免重复创建；对于对象或者数组，则可以使用 useMemo。从而减少 deps 的变化。</p>
<h2 id="eslint">使用 ESLint 插件<a class="headerlink" href="#eslint" title="Permanent link">&para;</a></h2>
<p>使用 ESLint 插件 <code>eslint-plugin-react-hooks@&gt;=2.4.0</code>，很有必要。</p>
<p>该插件除了帮你检查<a href="https://link.juejin.cn?target=https%3A%2F%2Fzh-hans.reactjs.org%2Fdocs%2Fhooks-rules.html%23only-call-hooks-at-the-top-level">使用 Hook 需要遵循的两条规则</a>外，还会向你提示在使用 useEffect 或者 useMemo 时，deps 应该填入的内容。</p>
<p>如果你正在使用 VSCode，并且安装了 ESLint 扩展。当你编写 useEffect 或者 useMemo ，且 deps 中的内容并不完整时，deps 所在的那一行便会给出警告或者错误的提示，并且会有一个快速修复的功能，该功能会为你自动填入缺失的 deps。</p>
<p>对于这些提示，不要暴力地通过 <code>eslint-disable</code> 禁用。未来，你可能再次修改该 useEffect 或者 useMemo，如果使用了新的依赖并且在 deps 中漏掉了它，便会引发新的问题。有一些场景，比如 useEffect 依赖一个函数，并且填入 deps 了。但是这个函数使用了 useCallback 且 deps 出现了遗漏，这种情况下一旦出现问题，排查的难度会很大，所以为什么要让 ESLint 沉默呢？</p>
<p>尝试用上一节的方法进行分析，对于一些变量不希望引起 effect 重新更新的，使用 ref 解决。对于获取状态用于计算新的状态的，尝试 setState 的函数入参，或者使用 useReducer 整合多个类型的状态。</p>
<h2 id="usememousecallback">使用 useMemo/useCallback<a class="headerlink" href="#usememousecallback" title="Permanent link">&para;</a></h2>
<p>useMemo 的含义是，通过一些变量计算得到新的值。通过把这些变量加入依赖 deps，当 deps 中的值均未发生变化时，跳过这次计算。useMemo 中传入的函数，将在 render 函数调用过程被同步调用。</p>
<p>可以使用 useMemo 缓存一些相对耗时的计算。</p>
<p>除此以外，useMemo 也非常适合用于存储引用类型的数据，可以传入对象字面量，匿名函数等，甚至是 React Elements。</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useMemo</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span>
<span class="w">    </span><span class="nx">a</span><span class="p">,</span>
<span class="w">    </span><span class="nx">b</span><span class="p">,</span>
<span class="w">    </span><span class="nx">c</span><span class="p">,</span>
<span class="w">    </span><span class="nx">d</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;xxx&#39;</span>
<span class="p">}),</span><span class="w"> </span><span class="p">[</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="p">]);</span>

<span class="c1">// 可以用 useCallback 代替</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useMemo</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// do something</span>
<span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">]);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">memoComponentsA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useMemo</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">ComponentsA</span><span class="w"> </span><span class="p">{...</span><span class="nx">someProps</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="p">),</span><span class="w"> </span><span class="p">[</span><span class="nx">someProps</span><span class="p">]);</span>
</code></pre></div>
<p>在这些例子中，useMemo 的目的其实是尽量使用缓存的值。</p>
<p>对于函数，其作为另外一个 useEffect 的 deps 时，减少函数的重新生成，就能减少该 Effect 的调用，甚至避免一些死循环的产生;</p>
<p>对于对象和数组，如果某个子组件使用了它作为 props，减少它的重新生成，就能避免子组件不必要的重复渲染，提升性能。</p>
<p>未优化的代码如下：</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="w"> </span><span class="p">};</span>

<span class="k">return</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">Child</span><span class="w"> </span><span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">data</span><span class="p">}</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div>
<p>此时，每当父组件需要 render 时，子组件也会执行 render。如果使用 <code>useMemo</code> 对 data 进行优化：</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useMemo</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nx">id</span><span class="w"> </span><span class="p">}),</span><span class="w"> </span><span class="p">[</span><span class="nx">id</span><span class="p">]);</span>

<span class="k">return</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">Child</span><span class="w"> </span><span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">data</span><span class="p">}</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div>
<p>当父组件 render 时，只要满足 id 不变，data 的值也不会发生变化，子组件也将避免 render。</p>
<p>对于组件返回的 React Elements，我们可以选择性地提取其中一部分 elements，通过 useMemo 进行缓存，也能避免这一部分的重复渲染。</p>
<p>在过去的 class 组件中，我们通过 <code>shouldComponentUpdate</code> 判断当前属性和状态是否和上一次的相同，来避免组件不必要的更新。其中的比较是对于本组件的所有属性和状态而言的，无法根据 <code>shouldComponentUpdate</code> 的返回值来使该组件一部分 elements 更新，另一部分不更新。</p>
<p>为了进一步优化性能，我们会对大组件进行拆分，拆分出的小组件只关心其中一部分属性，从而有更多的机会不去更新。</p>
<p>而函数组件中的 useMemo 其实就可以代替这一部分工作。为了方便理解，我们来看 <em>例五</em>：</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcodesandbox.io%2Fs%2Fgoofy-grothendieck-tkmow%3Ffontsize%3D14%26hidenavigation%3D1%26module%3D%2Fsrc%2FExample.js%26theme%3Ddark"><img alt="Edit 使用 useMemo 缓存 React Elements" src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/22/1723a2f77a00c0f2~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" /></a></p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">Example</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">count</span><span class="p">,</span><span class="w"> </span><span class="nx">setCount</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">foo</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Item</span><span class="w"> </span><span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="mf">1</span><span class="p">}</span><span class="w"> </span><span class="nx">x</span><span class="o">=</span><span class="p">{</span><span class="mf">1</span><span class="p">}</span><span class="w"> </span><span class="nx">foo</span><span class="o">=</span><span class="p">{</span><span class="nx">foo</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Item</span><span class="w"> </span><span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="mf">2</span><span class="p">}</span><span class="w"> </span><span class="nx">x</span><span class="o">=</span><span class="p">{</span><span class="mf">2</span><span class="p">}</span><span class="w"> </span><span class="nx">foo</span><span class="o">=</span><span class="p">{</span><span class="nx">foo</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Item</span><span class="w"> </span><span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="mf">3</span><span class="p">}</span><span class="w"> </span><span class="nx">x</span><span class="o">=</span><span class="p">{</span><span class="mf">3</span><span class="p">}</span><span class="w"> </span><span class="nx">foo</span><span class="o">=</span><span class="p">{</span><span class="nx">foo</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Item</span><span class="w"> </span><span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="mf">4</span><span class="p">}</span><span class="w"> </span><span class="nx">x</span><span class="o">=</span><span class="p">{</span><span class="mf">4</span><span class="p">}</span><span class="w"> </span><span class="nx">foo</span><span class="o">=</span><span class="p">{</span><span class="nx">foo</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Item</span><span class="w"> </span><span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="mf">5</span><span class="p">}</span><span class="w"> </span><span class="nx">x</span><span class="o">=</span><span class="p">{</span><span class="mf">5</span><span class="p">}</span><span class="w"> </span><span class="nx">foo</span><span class="o">=</span><span class="p">{</span><span class="nx">foo</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">count</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setCount</span><span class="p">(</span><span class="nx">count</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">)}</span><span class="o">&gt;</span><span class="nx">setCount</span><span class="o">&lt;</span><span class="err">/button&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="nx">main</span><span class="p">}</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">    </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>假设 <code>&lt;Item&gt;</code> 组件，其自身的 render 消耗较多的时间。默认情况下，每次 setCount 改变 count 的值，便会重新对 <code>&lt;Example&gt;</code> 进行 render，其返回的 React Elements 中3个 <code>&lt;Item&gt;</code> 也重新 render，其耗时的操作阻塞了 UI 的渲染。导致按下 "setCount" 按钮后出现了明显的卡顿。</p>
<p>为了优化性能，我们可以将 <code>main</code> 变量这一部分单独作为一个组件 <code>&lt;Main&gt;</code>，拆分出去，并对  <code>&lt;Main&gt;</code> 使用诸如 <code>React.memo</code> , <code>shouldComponentUpdate</code> 的方式，使 <code>count</code> 属性变化时，<code>&lt;Main&gt;</code> 不重复 render。</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">Main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">React</span><span class="p">.</span><span class="nx">memo</span><span class="p">((</span><span class="nx">props</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">foo</span><span class="w"> </span><span class="p">}</span><span class="o">=</span><span class="w"> </span><span class="nx">props</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Item</span><span class="w"> </span><span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="mf">1</span><span class="p">}</span><span class="w"> </span><span class="nx">x</span><span class="o">=</span><span class="p">{</span><span class="mf">1</span><span class="p">}</span><span class="w"> </span><span class="nx">foo</span><span class="o">=</span><span class="p">{</span><span class="nx">foo</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">Item</span><span class="w"> </span><span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="mf">2</span><span class="p">}</span><span class="w"> </span><span class="nx">x</span><span class="o">=</span><span class="p">{</span><span class="mf">2</span><span class="p">}</span><span class="w"> </span><span class="nx">foo</span><span class="o">=</span><span class="p">{</span><span class="nx">foo</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">Item</span><span class="w"> </span><span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="mf">3</span><span class="p">}</span><span class="w"> </span><span class="nx">x</span><span class="o">=</span><span class="p">{</span><span class="mf">3</span><span class="p">}</span><span class="w"> </span><span class="nx">foo</span><span class="o">=</span><span class="p">{</span><span class="nx">foo</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">Item</span><span class="w"> </span><span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="mf">4</span><span class="p">}</span><span class="w"> </span><span class="nx">x</span><span class="o">=</span><span class="p">{</span><span class="mf">4</span><span class="p">}</span><span class="w"> </span><span class="nx">foo</span><span class="o">=</span><span class="p">{</span><span class="nx">foo</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">Item</span><span class="w"> </span><span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="mf">5</span><span class="p">}</span><span class="w"> </span><span class="nx">x</span><span class="o">=</span><span class="p">{</span><span class="mf">5</span><span class="p">}</span><span class="w"> </span><span class="nx">foo</span><span class="o">=</span><span class="p">{</span><span class="nx">foo</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">    </span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>而现在，我们可以使用 <code>useMemo</code>，避免了组件拆分，代码也更简洁易懂：</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">Example</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">count</span><span class="p">,</span><span class="w"> </span><span class="nx">setCount</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">foo</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useMemo</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Item</span><span class="w"> </span><span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="mf">1</span><span class="p">}</span><span class="w"> </span><span class="nx">x</span><span class="o">=</span><span class="p">{</span><span class="mf">1</span><span class="p">}</span><span class="w"> </span><span class="nx">foo</span><span class="o">=</span><span class="p">{</span><span class="nx">foo</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Item</span><span class="w"> </span><span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="mf">2</span><span class="p">}</span><span class="w"> </span><span class="nx">x</span><span class="o">=</span><span class="p">{</span><span class="mf">2</span><span class="p">}</span><span class="w"> </span><span class="nx">foo</span><span class="o">=</span><span class="p">{</span><span class="nx">foo</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Item</span><span class="w"> </span><span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="mf">3</span><span class="p">}</span><span class="w"> </span><span class="nx">x</span><span class="o">=</span><span class="p">{</span><span class="mf">3</span><span class="p">}</span><span class="w"> </span><span class="nx">foo</span><span class="o">=</span><span class="p">{</span><span class="nx">foo</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Item</span><span class="w"> </span><span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="mf">4</span><span class="p">}</span><span class="w"> </span><span class="nx">x</span><span class="o">=</span><span class="p">{</span><span class="mf">4</span><span class="p">}</span><span class="w"> </span><span class="nx">foo</span><span class="o">=</span><span class="p">{</span><span class="nx">foo</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Item</span><span class="w"> </span><span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="mf">5</span><span class="p">}</span><span class="w"> </span><span class="nx">x</span><span class="o">=</span><span class="p">{</span><span class="mf">5</span><span class="p">}</span><span class="w"> </span><span class="nx">foo</span><span class="o">=</span><span class="p">{</span><span class="nx">foo</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">    </span><span class="p">),</span><span class="w"> </span><span class="p">[</span><span class="nx">foo</span><span class="p">]);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">count</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setCount</span><span class="p">(</span><span class="nx">count</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">)}</span><span class="o">&gt;</span><span class="nx">setCount</span><span class="o">&lt;</span><span class="err">/button&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="nx">main</span><span class="p">}</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">    </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="_7">惰性初始值<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h2>
<p>对于 state，其拥有 <a href="https://link.juejin.cn?target=https%3A%2F%2Freactjs.org%2Fdocs%2Fhooks-reference.html%23lazy-initial-state">惰性初始化的方法</a>。可能有人不明白它的作用。</p>
<p><code>someExpensiveComputation</code> 是一个相对耗时的操作。如果我们直接采用</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">initialState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">someExpensiveComputation</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">setState</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="nx">initialState</span><span class="p">);</span>
</code></pre></div>
<p>注意，虽然 <code>initialState</code> 只在初始化时有其存在的价值，但是 <code>someExpensiveComputation</code> 在每一帧都被调用了。只有当使用惰性初始化的方法：</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">setState</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">initialState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">someExpensiveComputation</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">initialState</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div>
<p>因 <code>someExpensiveComputation</code> 运行在一个匿名函数下，该函数当且仅当初始化时被调用，从而优化性能。</p>
<p>我们甚至可以跳出计算 state 这一规定，来完成任何昂贵的初始化操作。</p>
<div class="highlight"><pre><span></span><code><span class="nx">useState</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">someExpensiveComputation</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div>
<h2 id="refs">避免滥用 refs<a class="headerlink" href="#refs" title="Permanent link">&para;</a></h2>
<p>当 <code>useEffect</code> 的依赖频繁变化，你可能想到把频繁变化的值用 ref 保存起来。然而，useReducer 可能是更好的解决方式：使用 dispatch 消除对一些状态的依赖。<a href="https://link.juejin.cn?target=https%3A%2F%2Fzh-hans.reactjs.org%2Fdocs%2Fhooks-faq.html%23what-can-i-do-if-my-effect-dependencies-change-too-often">官网的 FAQ</a> 有详细的解释。</p>
<p>最终可以总结出这样的实践：</p>
<p>useEffect 对于函数依赖，尝试将该函数放置在 effect 内，或者使用 useCallback 包裹；useEffect/useCallback/useMemo，对于 state 或者其他属性的依赖，根据 eslint 的提示填入 deps；如果不直接使用 state，只是想修改 state，用 setState 的函数入参方式（<code>setState(c =&gt; c + 1)</code>）代替；如果修改 state 的过程依赖了其他属性，尝试将 state 和属性聚合，改写成 useReducer 的形式。当这些方法都不奏效，使用 ref，但是依然要谨慎操作。</p>
<h2 id="usememo">避免滥用 useMemo<a class="headerlink" href="#usememo" title="Permanent link">&para;</a></h2>
<p>使用 useMemo 当 deps 不变时，直接返回上一次计算的结果，从而使子组件跳过渲染。</p>
<p>但是当返回的是原始数据类型（如字符串、数字、布尔值）。即使参与了计算，只要 deps 依赖的内容不变，返回结果也很可能是不变的。此时就需要权衡这个计算的时间成本和 useMemo 额外带来的空间成本（缓存上一次的结果）了。</p>
<p>此外，如果 useMemo 的 deps 依赖数组为空，这样做说明你只是希望存储一个值，这个值在重新 render 时永远不会变。</p>
<p>比如：</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">Comp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useMemo</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;xxx&#39;</span><span class="w"> </span><span class="p">}),</span><span class="w"> </span><span class="p">[]);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">Child</span><span class="w"> </span><span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">data</span><span class="p">}</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>可以被替换为：</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">Comp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">current</span><span class="o">:</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useRef</span><span class="p">({</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;xxx&#39;</span><span class="w"> </span><span class="p">});</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">Child</span><span class="w"> </span><span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">data</span><span class="p">}</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>甚至：</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;xxx&#39;</span><span class="w"> </span><span class="p">};</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">Comp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">Child</span><span class="w"> </span><span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">data</span><span class="p">}</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>此外，如果 deps 频繁变动，我们也要思考，使用 useMemo 是否有必要。因为 useMemo 占用了额外的空间，还需要在每次 render 时检查 deps 是否变动，反而比不使用 useMemo 开销更大。</p>
<h2 id="_8">受控与非受控<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h2>
<p>在一个自定义 Hooks，我们可能有这样一段逻辑：</p>
<div class="highlight"><pre><span></span><code><span class="nx">useSomething</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">inputCount</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="nx">count</span><span class="p">,</span><span class="w"> </span><span class="nx">setCount</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">setState</span><span class="p">(</span><span class="nx">inputCount</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div>
<p>这里有一个问题，外部传入的 <code>inputCount</code> 属性发生了变化，使其与 <code>useSomething</code> Hook 内的 <code>count</code> state 不一致时，是否想要更新这个 <code>count</code> ？</p>
<p>默认不会更新，因为 useState 参数代表的是初始值，仅在 <code>useSomething</code> 初始时赋值给了 <code>count</code> state。后续 <code>count</code> 的状态将与 <code>inputCount</code> 无关。这种外部无法直接控制 state 的方式，我们称为非受控。</p>
<p>如果想被外部传入的 props 始终控制，比如在这个例子中，<code>useSomething</code> 内部，<code>count</code> 这一 state 的值需要从 <code>inputCount</code> 进行同步，需要这样写：</p>
<div class="highlight"><pre><span></span><code><span class="nx">useSomething</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">inputCount</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="nx">count</span><span class="p">,</span><span class="w"> </span><span class="nx">setCount</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">setState</span><span class="p">(</span><span class="nx">inputCount</span><span class="p">);</span>
<span class="w">    </span><span class="nx">setCount</span><span class="p">(</span><span class="nx">inputCount</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div>
<p><code>setCount</code>后，React 会立即退出当前的 render 并用更新后的 state 重新运行 render 函数。这一点，<a href="https://link.juejin.cn?target=https%3A%2F%2Fzh-hans.reactjs.org%2Fdocs%2Fhooks-faq.html%23how-do-i-implement-getderivedstatefromprops">官网文档</a> 是有说明的。</p>
<p>在这种的机制下，state 由外界同步的同时，内部又有可能通过 setState 来修改 state，可能引发新的问题。例如 <code>useSomething</code> 初始时，count 为 0，后续内部通过 <code>setCount</code> 修改了 <code>count</code> 为 1。当外部函数组件的 render 函数重新调用，也会再一次调用 <code>useSomething</code>，此时传入的 <code>inputCount</code> 依然是 0，就会把 <code>count</code> 变回 0。这很可能不符合预期。</p>
<p>遇到这样的问题，建议将 <code>inputCount</code> 的当前值与上一次的值进行比较，只有确定发生变化时执行 <code>setCount(inputCount)</code> 。</p>
<p>当然，在特殊的场景下，这样的设定也不一定符合需求。<a href="https://link.juejin.cn?target=https%3A%2F%2Fzh-hans.reactjs.org%2Fblog%2F2018%2F06%2F07%2Fyou-probably-dont-need-derived-state.html">官网的这篇文章</a> 有提出类似的问题。</p>
<h2 id="useslider">实践：useSlider<a class="headerlink" href="#useslider" title="Permanent link">&para;</a></h2>
<p>通过一个滑动选择器自定义 hook <code>userSlider</code> 的实现，我们可以回答上面的这个问题，顺便对本文做一个总结。</p>
<p><img alt="image" src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/22/1723a2f745f0e0c6~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" /></p>
<p><code>userSlider</code> 需要实现的逻辑是：按住滑动选择器的圆形手柄区域并拖动可以调节数值大小，数值范围为 0 到 1。</p>
<p><code>userSlider</code> 只负责逻辑的实现，UI 样式由组件自行完成。为了模拟真实业务，另外通过文本展示了当前的数值。并有几个按钮用于切换数值的初始值，这是为了切换分类后，当前的滑动选择器需要重置到某个数值。</p>
<p>按照常规的逻辑，我们实现了以下代码：</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcodesandbox.io%2Fs%2Fuseslider-wenti-imji7%3Ffontsize%3D14%26hidenavigation%3D1%26module%3D%2Fsrc%2FuseSlider.js%26theme%3Ddark"><img alt="Edit useSlider 问题" src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/22/1723a2f77a00c0f2~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" /></a></p>
<p>当前的问题是，<code>useEffect</code> 涉及到多个 state 的获取与计算。导致鼠标按下、移动、弹起的几个操作中因为对 stata 的修改，<code>useEffect</code> 频繁刷新，且涉及到了鼠标按下、移动、弹起事件监听的取消与重新绑定，这带来了性能问题以及较难观察到的 BUG。</p>
<p>和前面的 <code>setInterval</code> 例子相似，我们不希望在状态变动时，刷新 <code>useEffect</code>。由于此处涉及到多个状态：是否滑动中、鼠标位置、上一次鼠标的问题、选择器的可滑动宽度，如果整合到一个 <code>state</code> 中，会面临代码不清晰，缺少内聚性的问题，我们尝试用 <code>useReducer</code> 做一次替换。</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">reducer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">action</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;start&quot;</span><span class="o">:</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">...</span><span class="nx">state</span><span class="p">,</span>
<span class="w">        </span><span class="nx">lastPos</span><span class="o">:</span><span class="w"> </span><span class="nx">action</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
<span class="w">        </span><span class="nx">slideRange</span><span class="o">:</span><span class="w"> </span><span class="nx">action</span><span class="p">.</span><span class="nx">slideWidth</span><span class="p">,</span>
<span class="w">        </span><span class="nx">sliding</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">      </span><span class="p">};</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;move&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">state</span><span class="p">.</span><span class="nx">sliding</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">state</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">action</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">delta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">pos</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">lastPos</span><span class="p">;</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">...</span><span class="nx">state</span><span class="p">,</span>
<span class="w">        </span><span class="nx">lastPos</span><span class="o">:</span><span class="w"> </span><span class="nx">pos</span><span class="p">,</span>
<span class="w">        </span><span class="nx">ratio</span><span class="o">:</span><span class="w"> </span><span class="nx">fixRatio</span><span class="p">(</span><span class="nx">state</span><span class="p">.</span><span class="nx">ratio</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">delta</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">slideRange</span><span class="p">)</span>
<span class="w">      </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;end&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">state</span><span class="p">.</span><span class="nx">sliding</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">state</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">action</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">delta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">pos</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">lastPos</span><span class="p">;</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">...</span><span class="nx">state</span><span class="p">,</span>
<span class="w">        </span><span class="nx">lastPos</span><span class="o">:</span><span class="w"> </span><span class="nx">pos</span><span class="p">,</span>
<span class="w">        </span><span class="nx">ratio</span><span class="o">:</span><span class="w"> </span><span class="nx">fixRatio</span><span class="p">(</span><span class="nx">state</span><span class="p">.</span><span class="nx">ratio</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">delta</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">slideRange</span><span class="p">),</span>
<span class="w">        </span><span class="nx">sliding</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">      </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">default</span><span class="o">:</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">state</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">};</span>

<span class="c1">//...</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">handleThumbMouseDown</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useCallback</span><span class="p">(</span><span class="nx">ev</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">hotArea</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">hotAreaRef</span><span class="p">.</span><span class="nx">current</span><span class="p">;</span>
<span class="w">  </span><span class="nx">dispatch</span><span class="p">({</span>
<span class="w">    </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;start&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="nx">ev</span><span class="p">.</span><span class="nx">pageX</span>
<span class="w">    </span><span class="nx">slideWidth</span><span class="o">:</span><span class="w"> </span><span class="nx">hotArea</span><span class="p">.</span><span class="nx">clientWidth</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">},</span><span class="w"> </span><span class="p">[]);</span>

<span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">onSliding</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ev</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">dispatch</span><span class="p">({</span>
<span class="w">      </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;move&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="nx">ev</span><span class="p">.</span><span class="nx">pageX</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">};</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">onSlideEnd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ev</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">dispatch</span><span class="p">({</span>
<span class="w">      </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;end&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">x</span><span class="o">:</span><span class="w"> </span><span class="nx">ev</span><span class="p">.</span><span class="nx">pageX</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">};</span>
<span class="w">  </span><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;mousemove&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">onSliding</span><span class="p">);</span>
<span class="w">  </span><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;mouseup&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">onSlideEnd</span><span class="p">);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">document</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s2">&quot;mousemove&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">onSliding</span><span class="p">);</span>
<span class="w">    </span><span class="nb">document</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s2">&quot;mouseup&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">onSlideEnd</span><span class="p">);</span>
<span class="w">  </span><span class="p">};</span>
<span class="p">},</span><span class="w"> </span><span class="p">[]);</span>
</code></pre></div>
<p>这样处理后，effect 只要执行一次即可。</p>
<p>接下来还有一个问题没有处理，目前 <code>initRatio</code> 是作为初始值传入的，<code>useSlider</code> 内部的 ratio 是不受外部控制的。</p>
<p>以一个音乐均衡器的设置为例：当前滑动选择器代表的是低频端（31）的增益值，用户通过拖动滑块可以设置这个值的大小（-12 到 12 dB 范围，我们设置到了 3 dB）。同时我们提供了一些预设选项，一旦选择预设选项，如『流行』风格，当前滑块需要重置到特定值 -1 dB。为此， <code>useSlider</code> 需要提供控制状态的方法。</p>
<p><img alt="image" src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/22/1723a2f73fac9e30~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" /></p>
<p>根据前一节的介绍，在 <code>useSlider</code> 的开头，我们可以将属性 <code>initRatio</code> 的当前值与上一次的值进行比较，若发生变化，则执行 <code>setRatio</code>。但仍然有场景无法满足：用户选择了『流行』这一预设，然后拖动滑块进行了调节，之后又重新选择『流行』这一预设，此时 <code>initRatio</code> 没有任何变化，但我们期望 ratio 重新变为 <code>initRatio</code>。</p>
<p>解决这个问题的办法是，在 <code>useSlider</code> 内部添加一个 <code>setRatio</code> 方法。</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">setRatio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useCallback</span><span class="p">(</span>
<span class="w">    </span><span class="nx">ratio</span><span class="w"> </span><span class="p">=&gt;</span>
<span class="w">        </span><span class="nx">dispatch</span><span class="p">({</span>
<span class="w">            </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;setRatio&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">ratio</span>
<span class="w">        </span><span class="p">}),</span>
<span class="w">    </span><span class="p">[]</span>
<span class="p">);</span>
</code></pre></div>
<p>将该方法输出供外部用于对 ratio 控制。<code>initRatio</code> 不再控制 ratio 的状态，仅用于设置初始值。</p>
<p>可以看下最终的实现方案：</p>
<p>该方案中，除了完成以上需求，还支持在选择器的其他区域点击直接跳转到对应的数值；支持设定选择器为垂直还是水平方向。供大家参考。</p>
<h2 id="_9">结束语<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h2>
<p>忘掉 class 组件的生命周期，重新审视函数式组件的意义，是用好 React Hooks 的关键一步。希望这篇文章能帮助大家进一步理解并获取到一些最佳实践。当然，不同的 React Hooks 使用姿势可能带来不同的最佳实践，欢迎大家交流。</p>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">November 9, 2024</span>
  </span>

    
    
    
      
  
  <span class="md-source-file__fact">
    <span class="md-icon" title="Contributors">
      
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4"/></svg>
      
    </span>
    <nav>
      
        <a href="mailto:2331806369@qq.com">Michael An</a>
    </nav>
  </span>

    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; Michael An
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="../../js/baidu-statistics.min.js"></script>
      
        <script src="../../js/history.min.js"></script>
      
    
  </body>
</html>