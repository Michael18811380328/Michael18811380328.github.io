
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <meta name="author" content="Michael An">
      
      
        <link rel="canonical" href="https://michael18811380328.github.io/typescript/04-%E5%B7%A5%E7%A8%8B%E5%8C%96%E5%BC%80%E5%8F%91-%E6%B5%8B%E8%AF%95%E7%BC%96%E8%AF%91/">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.8">
    
    
      
        <title>工程 - Michale An Blog</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.cb6bc1d0.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.39b8e14a.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://michael18811380328.github.io/" title="Michale An Blog" class="md-header-nav__button md-logo" aria-label="Michale An Blog">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            Michale An Blog
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              工程
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/Michael18811380328/Michael18811380328.github.io/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Michael18811380328/Michael18811380328.github.io
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://michael18811380328.github.io/" title="Michale An Blog" class="md-nav__button md-logo" aria-label="Michale An Blog">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Michale An Blog
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/Michael18811380328/Michael18811380328.github.io/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Michael18811380328/Michael18811380328.github.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        介绍
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" >
      
      <label class="md-nav__link" for="nav-2">
        NodeJS
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="NodeJS" data-md-level="1">
        <label class="md-nav__title" for="nav-2">
          <span class="md-nav__icon md-icon"></span>
          NodeJS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-1" type="checkbox" id="nav-2-1" >
      
      <label class="md-nav__link" for="nav-2-1">
        基础
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="基础" data-md-level="2">
        <label class="md-nav__title" for="nav-2-1">
          <span class="md-nav__icon md-icon"></span>
          基础
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/01-Node.js%20%E6%95%99%E7%A8%8B/" class="md-nav__link">
        01-Node.js 教程.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/02-Node.js%20%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/" class="md-nav__link">
        02-Node.js 安装配置.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/03-Node.js%20%E5%88%9B%E5%BB%BA%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%BA%94%E7%94%A8/" class="md-nav__link">
        03-Node.js 创建第一个应用.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/05-Node.js%20REPL%28%E4%BA%A4%E4%BA%92%E5%BC%8F%E8%A7%A3%E9%87%8A%E5%99%A8%29/" class="md-nav__link">
        05-Node.js REPL(交互式解释器).md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/06-Node.js%20%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0/" class="md-nav__link">
        06-Node.js 回调函数.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/07-Node.js%20%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/" class="md-nav__link">
        07-Node.js 事件循环.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/08-Node.js%20EventEmitter/" class="md-nav__link">
        08-Node.js EventEmitter.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/09-Node.js%20Buffer%28%E7%BC%93%E5%86%B2%E5%8C%BA%29/" class="md-nav__link">
        09-Node.js Buffer(缓冲区).md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/10-Node.js%20Stream%28%E6%B5%81%29/" class="md-nav__link">
        10-Node.js Stream(流).md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/11-Node.js%E6%A8%A1%E5%9D%97%E7%B3%BB%E7%BB%9F/" class="md-nav__link">
        11-Node.js模块系统.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/12-Node.js%20%E5%87%BD%E6%95%B0/" class="md-nav__link">
        12-Node.js 函数.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/13-Node.js%20%E8%B7%AF%E7%94%B1/" class="md-nav__link">
        13-Node.js 路由.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/14-Node.js%20%E5%85%A8%E5%B1%80%E5%AF%B9%E8%B1%A1/" class="md-nav__link">
        14-Node.js 全局对象.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/15-Node.js%20%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/" class="md-nav__link">
        15-Node.js 常用工具.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/16-Node.js%20%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/" class="md-nav__link">
        16-Node.js 文件系统.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/17-Node.js%20GETPOST%E8%AF%B7%E6%B1%82/" class="md-nav__link">
        17-Node.js GETPOST请求.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/18-Node.js%20%E5%B7%A5%E5%85%B7%E6%A8%A1%E5%9D%97/" class="md-nav__link">
        18-Node.js 工具模块.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/19-Node.js%20Web%20%E6%A8%A1%E5%9D%97/" class="md-nav__link">
        19-Node.js Web 模块.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/20-Node.js%20Express%20%E6%A1%86%E6%9E%B6/" class="md-nav__link">
        20-Node.js Express 框架.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/21-Node.js%20RESTful%20API/" class="md-nav__link">
        21-Node.js RESTful API.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/22-Node.js%20%E5%A4%9A%E8%BF%9B%E7%A8%8B/" class="md-nav__link">
        22-Node.js 多进程.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/23-Node.js%20JXcore%20%E6%89%93%E5%8C%85/" class="md-nav__link">
        23-Node.js JXcore 打包.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/24-Node.js%20%E8%BF%9E%E6%8E%A5%20MySQL/" class="md-nav__link">
        24-Node.js 连接 MySQL.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/25-Node.js%20%E8%BF%9E%E6%8E%A5%20MongoDB/" class="md-nav__link">
        25-Node.js 连接 MongoDB.md
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2" >
      
      <label class="md-nav__link" for="nav-2-2">
        高级
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="高级" data-md-level="2">
        <label class="md-nav__title" for="nav-2-2">
          <span class="md-nav__icon md-icon"></span>
          高级
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/Node%20%E4%B8%8B%20LDAP%20%E5%AE%9E%E7%8E%B0/" class="md-nav__link">
        Node 下 LDAP 实现.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/Node.js-fs%E6%96%87%E6%A1%A3/" class="md-nav__link">
        Node.js-fs文档.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/Node.js-path/" class="md-nav__link">
        Node.js-path.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/Node.js-%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F/" class="md-nav__link">
        Node.js-全局变量.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/Node.js%E4%BD%BF%E7%94%A8Nodemailer%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6/" class="md-nav__link">
        Node.js使用 Nodemailer 发送邮件.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/NodeJS/" class="md-nav__link">
        NodeJS.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/node-debug/" class="md-nav__link">
        node-debug.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/nodeJS%20%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/" class="md-nav__link">
        nodeJS 基础教程.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/nodeJS%2Bmysql%2B%E8%BF%9E%E6%8E%A5%E6%B1%A0/" class="md-nav__link">
        nodeJS+mysql+连接池.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/nodejs%20api%E5%AD%A6%E4%B9%A0%EF%BC%9Afs.createReadStreame%28%29/" class="md-nav__link">
        nodejs api学习：fs.createReadStreame().md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/node%E5%AE%9A%E6%97%B6%E5%99%A8/" class="md-nav__link">
        node定时器.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/%E4%BD%BF%E7%94%A8nodejs%E8%BF%9E%E6%8E%A5mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E7%8E%B0%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5/" class="md-nav__link">
        使用nodejs连接mysql数据库实现增删改查.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/%E5%BB%96%E9%9B%AA%E5%B3%B0%20NodeJS/" class="md-nav__link">
        廖雪峰 NodeJS.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../nodejs/%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%9A%84nodeJS/" class="md-nav__link">
        命令行的nodeJS.md
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" >
      
      <label class="md-nav__link" for="nav-3">
        SQL
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="SQL" data-md-level="1">
        <label class="md-nav__title" for="nav-3">
          <span class="md-nav__icon md-icon"></span>
          SQL
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SQL/%E9%98%BF%E9%87%8C%E4%BA%91MySQL%E5%85%A5%E9%97%A8/" class="md-nav__link">
        阿里云MySQL入门
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SQL/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E5%BF%B5/" class="md-nav__link">
        数据库概念
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SQL/%E6%B7%B1%E5%85%A5MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/" class="md-nav__link">
        深入MySQL数据库
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SQL/Mac%20pip%20install%20mysql-python%20unsuccessful/" class="md-nav__link">
        Mac pip install mysql-python unsuccessful
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SQL/Mac%E5%AE%89%E8%A3%85MySQLdb%EF%BC%88python-mysql%EF%BC%89%E6%A8%A1%E5%9D%97/" class="md-nav__link">
        Mac 安装 MySQLdb（python-mysql）模块
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SQL/Python%E6%93%8D%E4%BD%9C%20MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/" class="md-nav__link">
        Python 操作 MySQL数据库
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../SQL/SQLite-API-Python/" class="md-nav__link">
        SQLite-API-Python
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" >
      
      <label class="md-nav__link" for="nav-4">
        python
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="python" data-md-level="1">
        <label class="md-nav__title" for="nav-4">
          <span class="md-nav__icon md-icon"></span>
          python
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../python/django-basic/" class="md-nav__link">
        django-basic
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../python/django/" class="md-nav__link">
        django
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../python/falsk%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B/" class="md-nav__link">
        flask快速开始
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../python/flask%20%E7%BD%91%E6%98%93%E4%BA%91%E8%AF%BE%E5%A0%82/" class="md-nav__link">
        flask 网易云课堂
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../python/%E5%AE%89%E8%A3%85pandas%E6%97%B6%E5%87%BA%E7%8E%B0%E7%8E%AF%E5%A2%83%E9%94%99%E8%AF%AF/" class="md-nav__link">
        安装pandas时出现环境错误
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../python/%E6%90%AD%E5%BB%BApython3%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/" class="md-nav__link">
        搭建python3开发环境
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../python/%E3%80%90%E8%A7%A3%E5%86%B3%E3%80%91ValueError%20Length%20mismatch%20Expected%20axis%20has%200%20elements%2C%20new%20values%20have%202%20elements/" class="md-nav__link">
        ValueError Length mismatch Expected axis has 0 elements, new values have 2 elements
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../python/ERROR%20No%20matching%20distribution%20found%20for%20Django%3D%3D3.0.2%20%28from%20-r%20requirements.txt%20%28line%204%29%29/" class="md-nav__link">
        ERROR No matching distribution found for Django==3.0.2 (from -r requirements.txt (line 4))
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" >
      
      <label class="md-nav__link" for="nav-5">
        About
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="About" data-md-level="1">
        <label class="md-nav__title" for="nav-5">
          <span class="md-nav__icon md-icon"></span>
          About
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        关于我
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../about/log/" class="md-nav__link">
        学习日志
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/Michael18811380328/Michael18811380328.github.io/edit/master/docs/typescript/04-工程化开发-测试编译.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="_1">工程<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<p>掌握了 TypeScript 的语法就像学会了砌墙的工艺。</p>
<p>我们学习 TypeScript 的目的不是为了造一间小茅屋，而是为了造高楼大厦，这也正是 TypeScript 的类型系统带来的优势。</p>
<p>那么一项大工程应该如何开展呢？本部分的内容就会介绍 TypeScript 工程化的最佳实践，具体内容包括：</p>
<ul>
<li><a href="https://ts.xcatliu.com/engineering/lint.html">代码检查</a></li>
<li><a href="https://ts.xcatliu.com/engineering/compiler-options.html">编译选项</a></li>
</ul>
<h1 id="_2">代码检查<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h1>
<p>2019 年 1 月，<a href="https://www.oschina.net/news/103818/future-typescript-eslint">TypeScirpt 官方决定全面采用 ESLint</a> 作为代码检查的工具，并创建了一个新项目 <a href="https://github.com/typescript-eslint/typescript-eslint">typescript-eslint</a>，提供了 TypeScript 文件的解析器 <a href="https://github.com/typescript-eslint/typescript-eslint/blob/master/packages/parser">@typescript-eslint/parser</a> 和相关的配置选项 <a href="https://github.com/typescript-eslint/typescript-eslint/blob/master/packages/eslint-plugin">@typescript-eslint/eslint-plugin</a> 等。TypeScript 的代码检查方案就是 <a href="https://github.com/typescript-eslint/typescript-eslint">typescript-eslint</a>。</p>
<h2 id="_3">什么是代码检查<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<p>代码检查主要是用来发现代码错误、统一代码风格。</p>
<p>在 JavaScript 项目中，我们一般使用 <a href="https://eslint.org/">ESLint</a> 来进行代码检查，它通过插件化的特性极大的丰富了适用范围，搭配 <a href="https://github.com/typescript-eslint/typescript-eslint">typescript-eslint</a> 之后，甚至可以用来检查 TypeScript 代码。</p>
<h2 id="_4">为什么需要代码检查<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<p>有人会觉得，JavaScript 非常灵活，所以需要代码检查。而 TypeScript 已经能够在编译阶段检查出很多问题了，为什么还需要代码检查呢？</p>
<p>因为 TypeScript 关注的重心是类型的检查，而不是代码风格。当团队的人员越来越多时，同样的逻辑不同的人写出来可能会有很大的区别：</p>
<ul>
<li>缩进应该是四个空格还是两个空格？</li>
<li>是否应该禁用 <code>var</code>？</li>
<li>接口名是否应该以 <code>I</code> 开头？</li>
<li>是否应该强制使用 <code>===</code> 而不是 <code>==</code>？</li>
</ul>
<p>这些问题 TypeScript 不会关注，但是却影响到多人协作开发时的效率、代码的可理解性以及可维护性。</p>
<p>下面来看一个具体的例子：</p>
<div class="highlight"><pre><span></span><code><span class="kd">var</span> <span class="nx">myName</span> <span class="o">=</span> <span class="s1">&#39;Tom&#39;</span><span class="p">;</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`My name is </span><span class="si">${</span><span class="nx">myNane</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`My name is </span><span class="si">${</span><span class="nx">myName</span><span class="p">.</span><span class="nx">toStrng</span><span class="p">()</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</code></pre></div>
<p>以上代码你能看出有什么错误吗？</p>
<p>分别用 tsc 编译和 eslint 检查后，报错信息如下：</p>
<div class="highlight"><pre><span></span><code><span class="kd">var</span> <span class="nx">myName</span> <span class="o">=</span> <span class="s1">&#39;Tom&#39;</span><span class="p">;</span>
<span class="c1">// eslint 报错信息：</span>
<span class="c1">// Unexpected var, use let or const instead.eslint(no-var)</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`My name is </span><span class="si">${</span><span class="nx">myNane</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="c1">// tsc 报错信息：</span>
<span class="c1">// Cannot find name &#39;myNane&#39;. Did you mean &#39;myName&#39;?</span>
<span class="c1">// eslint 报错信息：</span>
<span class="c1">// &#39;myNane&#39; is not defined.eslint(no-undef)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`My name is </span><span class="si">${</span><span class="nx">myName</span><span class="p">.</span><span class="nx">toStrng</span><span class="p">()</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="c1">// tsc 报错信息：</span>
<span class="c1">// Property &#39;toStrng&#39; does not exist on type &#39;string&#39;. Did you mean &#39;toString&#39;?</span>
</code></pre></div>
<table>
<thead>
<tr>
<th align="left">存在的问题</th>
<th align="left"><code>tsc</code> 是否报错</th>
<th align="left"><code>eslint</code> 是否报错</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">应该使用 <code>let</code> 或 <code>const</code> 而不是 <code>var</code></td>
<td align="left">❌</td>
<td align="left">✅</td>
</tr>
<tr>
<td align="left"><code>myName</code> 被误写成了 <code>myNane</code></td>
<td align="left">✅</td>
<td align="left">✅</td>
</tr>
<tr>
<td align="left"><code>toString</code> 被误写成了 <code>toStrng</code></td>
<td align="left">✅️</td>
<td align="left">❌</td>
</tr>
</tbody>
</table>
<p>上例中，我们使用了 <code>var</code> 来定义一个变量，但其实 ES6 中有更先进的语法 <code>let</code> 和 <code>const</code>，此时就可以通过 <code>eslint</code> 检查出来，提示我们应该使用 <code>let</code> 或 <code>const</code> 而不是 <code>var</code>。</p>
<p>对于未定义的变量 <code>myNane</code>，<code>tsc</code> 和 <code>eslint</code> 都可以检查出来。</p>
<p>由于 <code>eslint</code> 无法识别 <code>myName</code> 存在哪些方法，所以对于拼写错误的 <code>toString</code> 没有检查出来。</p>
<p>由此可见，<code>eslint</code> 能够发现出一些 <code>tsc</code> 不会关心的错误，检查出一些潜在的问题，所以代码检查还是非常重要的。</p>
<h2 id="typescript-eslint">在 TypeScript 中使用 ESLint<a class="headerlink" href="#typescript-eslint" title="Permanent link">&para;</a></h2>
<h3 id="eslint">安装 ESLint<a class="headerlink" href="#eslint" title="Permanent link">&para;</a></h3>
<p>ESLint 可以安装在当前项目中或全局环境下，因为代码检查是项目的重要组成部分，所以我们一般会将它安装在当前项目中。可以运行下面的脚本来安装：</p>
<div class="highlight"><pre><span></span><code>npm install --save-dev eslint
</code></pre></div>
<p>由于 ESLint 默认使用 <a href="https://github.com/eslint/espree">Espree</a> 进行语法解析，无法识别 TypeScript 的一些语法，故我们需要安装 <a href="https://github.com/typescript-eslint/typescript-eslint/tree/master/packages/parser"><code>@typescript-eslint/parser</code></a>，替代掉默认的解析器，别忘了同时安装 <code>typescript</code>：</p>
<div class="highlight"><pre><span></span><code>npm install --save-dev typescript @typescript-eslint/parser
</code></pre></div>
<p>接下来需要安装对应的插件 <a href="https://github.com/typescript-eslint/typescript-eslint/tree/master/packages/eslint-plugin">@typescript-eslint/eslint-plugin</a> 它作为 eslint 默认规则的补充，提供了一些额外的适用于 ts 语法的规则。</p>
<div class="highlight"><pre><span></span><code>npm install --save-dev @typescript-eslint/eslint-plugin
</code></pre></div>
<h3 id="_5">创建配置文件<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<p>ESLint 需要一个配置文件来决定对哪些规则进行检查，配置文件的名称一般是 <code>.eslintrc.js</code> 或 <code>.eslintrc.json</code>。</p>
<p>当运行 ESLint 的时候检查一个文件的时候，它会首先尝试读取该文件的目录下的配置文件，然后再一级一级往上查找，将所找到的配置合并起来，作为当前被检查文件的配置。</p>
<p>我们在项目的根目录下创建一个 <code>.eslintrc.js</code>，内容如下：</p>
<div class="highlight"><pre><span></span><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">parser</span><span class="o">:</span> <span class="s1">&#39;@typescript-eslint/parser&#39;</span><span class="p">,</span>
    <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;@typescript-eslint&#39;</span><span class="p">],</span>
    <span class="nx">rules</span><span class="o">:</span> <span class="p">{</span>
        <span class="c1">// 禁止使用 var</span>
        <span class="s1">&#39;no-var&#39;</span><span class="o">:</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>
        <span class="c1">// 优先使用 interface 而不是 type</span>
        <span class="s1">&#39;@typescript-eslint/consistent-type-definitions&#39;</span><span class="o">:</span> <span class="p">[</span>
            <span class="s2">&quot;error&quot;</span><span class="p">,</span>
            <span class="s2">&quot;interface&quot;</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>以上配置中，我们指定了两个规则，其中 <code>no-var</code> 是 ESLint 原生的规则，<code>@typescript-eslint/consistent-type-definitions</code> 是 <code>@typescript-eslint/eslint-plugin</code> 新增的规则。</p>
<p>规则的取值一般是一个数组（上例中的 <code>@typescript-eslint/consistent-type-definitions</code>），其中第一项是 <code>off</code>、<code>warn</code> 或 <code>error</code> 中的一个，表示关闭、警告和报错。后面的项都是该规则的其他配置。</p>
<p>如果没有其他配置的话，则可以将规则的取值简写为数组中的第一项（上例中的 <code>no-var</code>）。</p>
<p>关闭、警告和报错的含义如下：</p>
<ul>
<li>关闭：禁用此规则</li>
<li>警告：代码检查时输出错误信息，但是不会影响到 exit code</li>
<li>报错：发现错误时，不仅会输出错误信息，而且 exit code 将被设为 1（一般 exit code 不为 0 则表示执行出现错误）</li>
</ul>
<h3 id="ts">检查一个 ts 文件<a class="headerlink" href="#ts" title="Permanent link">&para;</a></h3>
<p>创建了配置文件之后，我们来创建一个 ts 文件看看是否能用 ESLint 去检查它。</p>
<p>创建一个新文件 <code>index.ts</code>，将以下内容复制进去：</p>
<div class="highlight"><pre><span></span><code><span class="kd">var</span> <span class="nx">myName</span> <span class="o">=</span> <span class="s1">&#39;Tom&#39;</span><span class="p">;</span>
<span class="kd">type</span> <span class="nx">Foo</span> <span class="o">=</span> <span class="p">{};</span>
</code></pre></div>
<p>然后执行以下命令：</p>
<div class="highlight"><pre><span></span><code>./node_modules/.bin/eslint index.ts
</code></pre></div>
<p>则会得到如下报错信息：</p>
<div class="highlight"><pre><span></span><code>/path/to/index.ts
  <span class="m">1</span>:1  error  Unexpected var, use <span class="nb">let</span> or const instead  no-var
  <span class="m">3</span>:6  error  Use an <span class="sb">`</span>interface<span class="sb">`</span> instead of a <span class="sb">`</span><span class="nb">type</span><span class="sb">`</span>    @typescript-eslint/consistent-type-definitions

✖ <span class="m">2</span> problems <span class="o">(</span><span class="m">2</span> errors, <span class="m">0</span> warnings<span class="o">)</span>
  <span class="m">2</span> errors and <span class="m">0</span> warnings potentially fixable with the <span class="sb">`</span>--fix<span class="sb">`</span> option.
</code></pre></div>
<p>上面的结果显示，刚刚配置的两个规则都生效了：禁止使用 <code>var</code>；优先使用 <code>interface</code> 而不是 <code>type</code>。</p>
<p>需要注意的是，我们使用的是 <code>./node_modules/.bin/eslint</code>，而不是全局的 <code>eslint</code> 脚本，这是因为代码检查是项目的重要组成部分，所以我们一般会将它安装在当前项目中。</p>
<p>可是每次执行这么长一段脚本颇有不便，我们可以通过在 <code>package.json</code> 中添加一个 <code>script</code> 来创建一个 npm script 来简化这个步骤：</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;scripts&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;eslint&quot;</span><span class="p">:</span> <span class="s2">&quot;eslint index.ts&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>这时只需执行 <code>npm run eslint</code> 即可。</p>
<h3 id="ts_1">检查整个项目的 ts 文件<a class="headerlink" href="#ts_1" title="Permanent link">&para;</a></h3>
<p>我们的项目源文件一般是放在 <code>src</code> 目录下，所以需要将 <code>package.json</code> 中的 <code>eslint</code> 脚本改为对一个目录进行检查。由于 <code>eslint</code> 默认不会检查 <code>.ts</code> 后缀的文件，所以需要加上参数 <code>--ext .ts</code>：</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;scripts&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;eslint&quot;</span><span class="p">:</span> <span class="s2">&quot;eslint src --ext .ts&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>此时执行 <code>npm run eslint</code> 即会检查 <code>src</code> 目录下的所有 <code>.ts</code> 后缀的文件。</p>
<h3 id="vscode-eslint">在 VSCode 中集成 ESLint 检查<a class="headerlink" href="#vscode-eslint" title="Permanent link">&para;</a></h3>
<p>在编辑器中集成 ESLint 检查，可以在开发过程中就发现错误，甚至可以在保存时自动修复错误，极大的增加了开发效率。</p>
<p>要在 VSCode 中集成 ESLint 检查，我们需要先安装 ESLint 插件，点击「扩展」按钮，搜索 ESLint，然后安装即可。</p>
<p>VSCode 中的 ESLint 插件默认是不会检查 <code>.ts</code> 后缀的，需要在「文件 =&gt; 首选项 =&gt; 设置 =&gt; 工作区」中（也可以在项目根目录下创建一个配置文件 <code>.vscode/settings.json</code>），添加以下配置：</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;eslint.validate&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;javascript&quot;</span><span class="p">,</span>
        <span class="s2">&quot;javascriptreact&quot;</span><span class="p">,</span>
        <span class="s2">&quot;typescript&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;typescript.tsdk&quot;</span><span class="p">:</span> <span class="s2">&quot;node_modules/typescript/lib&quot;</span>
<span class="p">}</span>
</code></pre></div>
<p>这时再打开一个 <code>.ts</code> 文件，将鼠标移到红色提示处，即可看到这样的报错信息了：</p>
<p><img alt="VSCode ESLint 错误信息" src="https://ts.xcatliu.com/assets/vscode-eslint-error.png" /></p>
<p>我们还可以开启保存时自动修复的功能，通过配置：</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;eslint.autoFixOnSave&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;eslint.validate&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;javascript&quot;</span><span class="p">,</span>
        <span class="s2">&quot;javascriptreact&quot;</span><span class="p">,</span>
        <span class="p">{</span>
            <span class="nt">&quot;language&quot;</span><span class="p">:</span> <span class="s2">&quot;typescript&quot;</span><span class="p">,</span>
            <span class="nt">&quot;autoFix&quot;</span><span class="p">:</span> <span class="kc">true</span>
        <span class="p">},</span>
    <span class="p">],</span>
    <span class="nt">&quot;typescript.tsdk&quot;</span><span class="p">:</span> <span class="s2">&quot;node_modules/typescript/lib&quot;</span>
<span class="p">}</span>
</code></pre></div>
<p>就可以在保存文件后，自动修复为：</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nx">myName</span> <span class="o">=</span> <span class="s1">&#39;Tom&#39;</span><span class="p">;</span>

<span class="kd">interface</span> <span class="nx">Foo</span> <span class="p">{}</span>
</code></pre></div>
<h3 id="prettier">使用 Prettier 修复格式错误<a class="headerlink" href="#prettier" title="Permanent link">&para;</a></h3>
<p>ESLint 包含了一些代码格式的检查，比如空格、分号等。但前端社区中有一个更先进的工具可以用来格式化代码，那就是 <a href="https://prettier.io/">Prettier</a>。</p>
<p>Prettier 聚焦于代码的格式化，通过语法分析，重新整理代码的格式，让所有人的代码都保持同样的风格。</p>
<p>首先需要安装 Prettier：</p>
<div class="highlight"><pre><span></span><code>npm install --save-dev prettier
</code></pre></div>
<p>然后创建一个 <code>prettier.config.js</code> 文件，里面包含 Prettier 的配置项。Prettier 的配置项很少，这里我推荐大家一个配置规则，作为参考：</p>
<div class="highlight"><pre><span></span><code><span class="c1">// prettier.config.js or .prettierrc.js</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">// 一行最多 100 字符</span>
    <span class="nx">printWidth</span><span class="o">:</span> <span class="mf">100</span><span class="p">,</span>
    <span class="c1">// 使用 4 个空格缩进</span>
    <span class="nx">tabWidth</span><span class="o">:</span> <span class="mf">4</span><span class="p">,</span>
    <span class="c1">// 不使用缩进符，而使用空格</span>
    <span class="nx">useTabs</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="c1">// 行尾需要有分号</span>
    <span class="nx">semi</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="c1">// 使用单引号</span>
    <span class="nx">singleQuote</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="c1">// 对象的 key 仅在必要时用引号</span>
    <span class="nx">quoteProps</span><span class="o">:</span> <span class="s1">&#39;as-needed&#39;</span><span class="p">,</span>
    <span class="c1">// jsx 不使用单引号，而使用双引号</span>
    <span class="nx">jsxSingleQuote</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="c1">// 末尾不需要逗号</span>
    <span class="nx">trailingComma</span><span class="o">:</span> <span class="s1">&#39;none&#39;</span><span class="p">,</span>
    <span class="c1">// 大括号内的首尾需要空格</span>
    <span class="nx">bracketSpacing</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="c1">// jsx 标签的反尖括号需要换行</span>
    <span class="nx">jsxBracketSameLine</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="c1">// 箭头函数，只有一个参数的时候，也需要括号</span>
    <span class="nx">arrowParens</span><span class="o">:</span> <span class="s1">&#39;always&#39;</span><span class="p">,</span>
    <span class="c1">// 每个文件格式化的范围是文件的全部内容</span>
    <span class="nx">rangeStart</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span>
    <span class="nx">rangeEnd</span><span class="o">:</span> <span class="kc">Infinity</span><span class="p">,</span>
    <span class="c1">// 不需要写文件开头的 @prettier</span>
    <span class="nx">requirePragma</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="c1">// 不需要自动在文件开头插入 @prettier</span>
    <span class="nx">insertPragma</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="c1">// 使用默认的折行标准</span>
    <span class="nx">proseWrap</span><span class="o">:</span> <span class="s1">&#39;preserve&#39;</span><span class="p">,</span>
    <span class="c1">// 根据显示样式决定 html 要不要折行</span>
    <span class="nx">htmlWhitespaceSensitivity</span><span class="o">:</span> <span class="s1">&#39;css&#39;</span><span class="p">,</span>
    <span class="c1">// 换行符使用 lf</span>
    <span class="nx">endOfLine</span><span class="o">:</span> <span class="s1">&#39;lf&#39;</span>
<span class="p">};</span>
</code></pre></div>
<p>接下来安装 VSCode 中的 Prettier 插件，然后修改 <code>.vscode/settings.json</code>：</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;files.eol&quot;</span><span class="p">:</span> <span class="s2">&quot;</span>
<span class="s2">&quot;</span><span class="p">,</span>
    <span class="nt">&quot;editor.tabSize&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="nt">&quot;editor.formatOnSave&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;editor.defaultFormatter&quot;</span><span class="p">:</span> <span class="s2">&quot;esbenp.prettier-vscode&quot;</span><span class="p">,</span>
    <span class="nt">&quot;eslint.autoFixOnSave&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;eslint.validate&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;javascript&quot;</span><span class="p">,</span>
        <span class="s2">&quot;javascriptreact&quot;</span><span class="p">,</span>
        <span class="p">{</span>
            <span class="nt">&quot;language&quot;</span><span class="p">:</span> <span class="s2">&quot;typescript&quot;</span><span class="p">,</span>
            <span class="nt">&quot;autoFix&quot;</span><span class="p">:</span> <span class="kc">true</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="nt">&quot;typescript.tsdk&quot;</span><span class="p">:</span> <span class="s2">&quot;node_modules/typescript/lib&quot;</span>
<span class="p">}</span>
</code></pre></div>
<p>这样就实现了保存文件时自动格式化并且自动修复 ESLint 错误。</p>
<p>需要注意的是，由于 ESLint 也可以检查一些代码格式的问题，所以在和 Prettier 配合使用时，我们一般会把 ESLint 中的代码格式相关的规则禁用掉，否则就会有冲突了。</p>
<h3 id="alloyteam-eslint">使用 AlloyTeam 的 ESLint 配置<a class="headerlink" href="#alloyteam-eslint" title="Permanent link">&para;</a></h3>
<p>ESLint 原生的规则和 <code>@typescript-eslint/eslint-plugin</code> 的规则太多了，而且原生的规则有一些在 TypeScript 中支持的不好，需要禁用掉。</p>
<p>这里我推荐使用 <a href="https://github.com/AlloyTeam/eslint-config-alloy#typescript">AlloyTeam ESLint 规则中的 TypeScript 版本</a>，它已经为我们提供了一套完善的配置规则，并且与 Prettier 是完全兼容的（eslint-config-alloy 不包含任何代码格式的规则，代码格式的问题交给更专业的 Prettier 去处理）。</p>
<p>安装：</p>
<div class="highlight"><pre><span></span><code>npm install --save-dev eslint typescript @typescript-eslint/parser @typescript-eslint/eslint-plugin eslint-config-alloy
</code></pre></div>
<p>在你的项目根目录下创建 <code>.eslintrc.js</code>，并将以下内容复制到文件中即可：</p>
<div class="highlight"><pre><span></span><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="k">extends</span><span class="o">:</span> <span class="p">[</span>
        <span class="s1">&#39;alloy&#39;</span><span class="p">,</span>
        <span class="s1">&#39;alloy/typescript&#39;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="nx">env</span><span class="o">:</span> <span class="p">{</span>
        <span class="c1">// 您的环境变量（包含多个预定义的全局变量）</span>
        <span class="c1">// Your environments (which contains several predefined global variables)</span>
        <span class="c1">//</span>
        <span class="c1">// browser: true,</span>
        <span class="c1">// node: true,</span>
        <span class="c1">// mocha: true,</span>
        <span class="c1">// jest: true,</span>
        <span class="c1">// jquery: true</span>
    <span class="p">},</span>
    <span class="nx">globals</span><span class="o">:</span> <span class="p">{</span>
        <span class="c1">// 您的全局变量（设置为 false 表示它不允许被重新赋值）</span>
        <span class="c1">// Your global variables (setting to false means it&#39;s not allowed to be reassigned)</span>
        <span class="c1">//</span>
        <span class="c1">// myGlobal: false</span>
    <span class="p">},</span>
    <span class="nx">rules</span><span class="o">:</span> <span class="p">{</span>
        <span class="c1">// 自定义您的规则</span>
        <span class="c1">// Customize your rules</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div>
<p>更多的使用方法，请参考 <a href="https://github.com/AlloyTeam/eslint-config-alloy">AlloyTeam ESLint 规则</a></p>
<h3 id="eslint-tsx">使用 ESLint 检查 tsx 文件<a class="headerlink" href="#eslint-tsx" title="Permanent link">&para;</a></h3>
<p>如果需要同时支持对 tsx 文件的检查，则需要对以上步骤做一些调整：</p>
<p>安装 <code>eslint-plugin-react</code></p>
<div class="highlight"><pre><span></span><code>npm install --save-dev eslint-plugin-react
</code></pre></div>
<p>package.json 中的 scripts.eslint 添加 <code>.tsx</code> 后缀</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;scripts&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;eslint&quot;</span><span class="p">:</span> <span class="s2">&quot;eslint src --ext .ts,.tsx&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>VSCode 的配置中新增 typescriptreact 检查</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;files.eol&quot;</span><span class="p">:</span> <span class="s2">&quot;</span>
<span class="s2">&quot;</span><span class="p">,</span>
    <span class="nt">&quot;editor.tabSize&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="nt">&quot;editor.formatOnSave&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;editor.defaultFormatter&quot;</span><span class="p">:</span> <span class="s2">&quot;esbenp.prettier-vscode&quot;</span><span class="p">,</span>
    <span class="nt">&quot;eslint.autoFixOnSave&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;eslint.validate&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;javascript&quot;</span><span class="p">,</span>
        <span class="s2">&quot;javascriptreact&quot;</span><span class="p">,</span>
        <span class="p">{</span>
            <span class="nt">&quot;language&quot;</span><span class="p">:</span> <span class="s2">&quot;typescript&quot;</span><span class="p">,</span>
            <span class="nt">&quot;autoFix&quot;</span><span class="p">:</span> <span class="kc">true</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;language&quot;</span><span class="p">:</span> <span class="s2">&quot;typescriptreact&quot;</span><span class="p">,</span>
            <span class="nt">&quot;autoFix&quot;</span><span class="p">:</span> <span class="kc">true</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="nt">&quot;typescript.tsdk&quot;</span><span class="p">:</span> <span class="s2">&quot;node_modules/typescript/lib&quot;</span>
<span class="p">}</span>
</code></pre></div>
<p>使用 AlloyTeam ESLint 规则中的 TypeScript React 版本</p>
<p><a href="https://github.com/AlloyTeam/eslint-config-alloy#typescript-react">AlloyTeam ESLint 规则中的 TypeScript React 版本</a></p>
<h2 id="troubleshootings">Troubleshootings<a class="headerlink" href="#troubleshootings" title="Permanent link">&para;</a></h2>
<p>报错解决：Cannot find module '@typescript-eslint/parser'</p>
<p>你运行的是全局的 eslint，需要改为运行 <code>./node_modules/.bin/eslint</code>。</p>
<p>VSCode 没有显示出 ESLint 的报错</p>
<ol>
<li>检查「文件 =&gt; 首选项 =&gt; 设置」中有没有配置正确</li>
<li>检查必要的 npm 包有没有安装</li>
<li>检查 <code>.eslintrc.js</code> 有没有配置</li>
<li>检查文件是不是在 <code>.eslintignore</code> 中</li>
</ol>
<p>如果以上步骤都不奏效，则可以在「文件 =&gt; 首选项 =&gt; 设置」中配置 <code>"eslint.trace.server": "messages"</code>，按 <code>Ctrl</code>+<code>Shift</code>+<code>U</code> 打开输出面板，然后选择 ESLint 输出，查看具体错误。</p>
<p><img alt="VSCode 的 ESLint 输出" src="https://ts.xcatliu.com/assets/vscode-output-eslint.png" /></p>
<p>为什么有些定义了的变量（比如使用 <code>enum</code> 定义的变量）未使用，ESLint 却没有报错？</p>
<p>因为无法支持这种变量定义的检查。建议在 <code>tsconfig.json</code> 中添加以下配置，使 <code>tsc</code> 编译过程能够检查出定义了未使用的变量：</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;compilerOptions&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;noUnusedLocals&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;noUnusedParameters&quot;</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>启用了 noUnusedParameters 之后，只使用了第二个参数，但是又必须传入第一个参数，这就会报错了</p>
<p>第一个参数以下划线开头即可，参考 <a href="https://github.com/Microsoft/TypeScript/issues/9458">https://github.com/Microsoft/TypeScript/issues/9458</a></p>
<h1 id="_6">编译选项<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h1>
<p>TypeScript 提供了非常多的编译选项。索引：</p>
<table>
<thead>
<tr>
<th align="left">选项</th>
<th align="left">类型</th>
<th align="left">默认值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><a href="https://ts.xcatliu.com/engineering/compiler-options.html#allowjs"><code>allowJs</code></a></td>
<td align="left"><code>boolean</code></td>
<td align="left"><code>false</code></td>
<td align="left">允许编译 js 文件</td>
</tr>
<tr>
<td align="left"><a href="https://ts.xcatliu.com/engineering/compiler-options.html#allowsyntheticdefaultimports"><code>allowSyntheticDefaultImports</code></a></td>
<td align="left"><code>boolean</code></td>
<td align="left"><code>false</code></td>
<td align="left">允许对不包含默认导出的模块使用默认导入。这个选项不会影响生成的代码，只会影响类型检查。</td>
</tr>
</tbody>
</table>
<h2 id="allowjs">allowJs<a class="headerlink" href="#allowjs" title="Permanent link">&para;</a></h2>
<blockquote>
<p>允许编译 js 文件。</p>
</blockquote>
<p>设置为 <code>true</code> 时，js 文件会被 tsc 编译，否则不会。一般在项目中 js, ts 混合开发时需要设置。</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 设置为 true 时，编译后的文件包含 foo.js</span>
├── lib
│   ├── foo.js
│   └── index.js
├── src
│   ├── foo.js
│   └── index.ts
├── package.json
└── tsconfig.json
<span class="c1"># 设置为 false 时，编译后的文件不包含 foo.js</span>
├── lib
│   └── index.js
├── src
│   ├── foo.js
│   └── index.ts
├── package.json
└── tsconfig.json
</code></pre></div>
<h2 id="allowsyntheticdefaultimports">allowSyntheticDefaultImports<a class="headerlink" href="#allowsyntheticdefaultimports" title="Permanent link">&para;</a></h2>
<blockquote>
<p>允许对不包含默认导出的模块使用默认导入。这个选项不会影响生成的代码，只会影响类型检查。</p>
</blockquote>
<p><code>export = foo</code> 是 ts 为了兼容 commonjs 创造的语法，它对应于 commonjs 中的 <code>module.exports = foo</code>。</p>
<p>在 ts 中，如果要引入一个通过 <code>export = foo</code> 导出的模块，标准的语法是 <code>import foo = require('foo')</code>，或者 <code>import * as foo from 'foo'</code>。</p>
<p>但由于历史原因，我们已经习惯了使用 <code>import foo from 'foo'</code>。</p>
<p>这个选项就是为了解决这个问题。当它设置为 <code>true</code> 时，允许使用 <code>import foo from 'foo'</code> 来导入一个通过 <code>export = foo</code> 导出的模块。当它设置为 <code>false</code> 时，则不允许，会报错。</p>
<p>当然，我们一般不会在 ts 文件中使用 <code>export = foo</code> 来导出模块，而是在<a href="https://ts.xcatliu.com/basics/declaration-files#export-1">写（符合 commonjs 规范的）第三方库的声明文件</a>时，才会用到 <code>export = foo</code> 来导出类型。</p>
<p>比如 React 的声明文件中，就是通过 <code>export = React</code> 来导出类型：</p>
<div class="highlight"><pre><span></span><code><span class="k">export</span> <span class="o">=</span> <span class="nx">React</span><span class="p">;</span>
<span class="k">export</span> <span class="kr">as</span> <span class="nx">namespace</span> <span class="nx">React</span><span class="p">;</span>

<span class="kr">declare</span> <span class="nx">namespace</span> <span class="nx">React</span> <span class="p">{</span>
    <span class="c1">// 声明 React 的类型</span>
<span class="p">}</span>
</code></pre></div>
<p>此时若我们通过 <code>import React from 'react'</code> 来导入 react 则会报错 ：</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="c1">// Module &#39;&quot;typescript-tutorial/examples/compiler-options/02-allowSyntheticDefaultImports/false/node_modules/@types/react/index&quot;&#39; can only be default-imported using the &#39;esModuleInterop&#39; flagts(1259)</span>
</code></pre></div>
<p>解决办法就是将 <code>allowSyntheticDefaultImports</code> 设置为 <code>true</code>。</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; Michael An
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.18f0862e.min.js"></script>
      <script src="../../assets/javascripts/bundle.994580cf.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.9c0e82ba.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="../../js/baidu-statistics.js"></script>
      
    
  </body>
</html>