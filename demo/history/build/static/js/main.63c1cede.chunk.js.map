{"version":3,"sources":["utils.js","App.js","index.js"],"names":["timestampToTime","timestamp","date","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getHistorys","historyStr","window","localStorage","getItem","historyObj","JSON","parse","e","console","log","historyArr","key","value","item","name","time","url","push","length","sort","a","b","App","props","deleteLog","index","historys","state","slice","splice","setState","forEach","stringify","setItem","deleteAllLog","confirm","renderHeader","className","Button","onClick","color","this","Table","striped","bordered","map","href","replace","style","cursor","React","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.63c1cede.chunk.js","sourcesContent":["export function timestampToTime(timestamp) {\n  var date = new Date(timestamp);\n  var Y = date.getFullYear() + '-';\n  var M = (date.getMonth()+1 < 10 ? '0'+(date.getMonth()+1) : date.getMonth()+1) + '-';\n  var D = (date.getDate() < 10 ? '0'+date.getDate() : date.getDate()) + ' ';\n  var h = (date.getHours() < 10 ? '0'+date.getHours() : date.getHours()) + ':';\n  var m = (date.getMinutes() < 10 ? '0'+date.getMinutes() : date.getMinutes()) + ':';\n  var s = (date.getSeconds() < 10 ? '0'+date.getSeconds() : date.getSeconds()); \n  let strDate = Y+M+D+h+m+s;\n  return strDate;\n};\n\nexport function getHistorys() {\n  var historyStr = window.localStorage.getItem('blog-history') || '';\n  if (!historyStr || typeof historyStr !== 'string') {\n    historyStr = '{}';\n  }\n  var historyObj = {};\n  try {\n    historyObj = JSON.parse(historyStr);\n  } catch (e) {\n    console.log(e);\n  }\n  var historyArr = [];\n  for (let key in historyObj) {\n    let value = historyObj[key];\n    let item = {\n      name: key,\n      time: value.time,\n      url: value.url,\n    };\n    historyArr.push(item);\n    // 可以获取全部的历史记录，放在 state 中。界面先渲染 30 条记录，滚动到底部后，加载更多记录即可（如果是异步网络请求，也类似这样渲染）。\n    if (historyArr.length >= 30) break;\n  }\n  historyArr.sort((a, b) => (a.time < b.time ? 1 : -1));\n  return historyArr;\n};\n","import React from 'react';\nimport { Button, Table } from 'reactstrap';\nimport { timestampToTime, getHistorys } from './utils';\nimport './App.css';\n\nclass App extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      historys: getHistorys(),\n    };\n  }\n  \n  deleteLog = (index) => {\n    let historys = this.state.historys.slice(0);\n    historys.splice(index, 1);\n    this.setState({ historys });\n    // save to localStorage\n    let historyObj = {};\n    historys.forEach(item => {\n      historyObj[item.name] = item;\n    });\n    const historyStr = JSON.stringify(historyObj);\n    window.localStorage.setItem('blog-history', historyStr);\n  }\n\n  deleteAllLog = () => {\n    if (window.confirm('你确定要删除全部的浏览记录吗?')) {\n      let historys = [];\n      this.setState({ historys });\n      const historyStr = JSON.stringify({});\n      window.localStorage.setItem('blog-history', historyStr);\n    }\n  }\n\n  renderHeader = () => {\n    return (\n      <div className=\"history-header\">\n        <h2>访问记录</h2>\n        <Button onClick={this.deleteAllLog} color=\"warning\">删除全部</Button>\n      </div>\n    );\n  }\n  \n  render () {\n    if (this.state.historys.length === 0) {\n      return (\n        <div className=\"history\">\n          {this.renderHeader()}\n          <div className=\"history-body\">\n            没有浏览记录\n          </div>\n        </div>\n      );\n    }\n    return (\n      <div className=\"history\">\n        {this.renderHeader()}\n        <div className=\"history-body\">\n          <Table striped bordered>\n            <thead>\n              <tr>\n                <th>文章名称</th>\n                <th>访问时间</th>\n                <th>删除记录</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.historys.map((item, index) => {\n                const { name, time, url } = item;\n                return (\n                  <tr key={name}>\n                    <td><a href={url}><span>{name.replace('¶', '')}</span></a></td>\n                    <td>{timestampToTime(time)}</td>\n                    <td onClick={() => {this.deleteLog(index)}} style={{cursor: 'pointer'}}>x</td> \n                  </tr>\n                );\n              })}\n            </tbody>\n          </Table>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}