<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Michael An">
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>原地算法 - Michale An Test Page</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="..">Michale An Test Page</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="..">Home</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li class="active">
    <a href="./">原地算法</a>
</li>
                                    
<li >
    <a href="../part-two/">二分算法</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Learn <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../double-pointer/">双指针</a>
</li>
                                    
<li >
    <a href="../diverce/">分治算法</a>
</li>
                                    
<li >
    <a href="../K-means/">聚类算法</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../process-and-thread/">License</a>
</li>
                                    
<li >
    <a href="../uuid/">Release Notes</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="..">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../part-two/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#_1">原地算法</a></li>
            <li><a href="#_2">数组翻转</a></li>
            <li><a href="#_3">删除排序后数组的重复元素</a></li>
            <li><a href="#_5">在计算上的复杂度</a></li>
            <li><a href="#_6">随意的角色</a></li>
            <li><a href="#_7">在函数的程式设计</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="_1">原地算法</h1>
<p>In computer science, an in-place algorithm is an algorithm which transforms input using no auxiliary data structure. However a small amount of extra storage space is allowed for auxiliary variables. The input is usually overwritten by the output as the algorithm executes. In-place algorithm updates input sequence only through replacement or swapping of elements. An algorithm which is not in-place is sometimes called not-in-place or out-of-place.</p>
<p>像 wiki 里面说的，原地算法是基本上不需要额外辅助的数据结构,然而,允许少量额外的辅助变量来转换数据的算法。在计算复杂性理论中，原地算法包含使用O(1)空间复杂度的所有算法，DSPACE(1)类型。</p>
<pre><code class="js">function reverse-in-place(a[0..n])
    for i from 0 to floor(n/2)
        swap(a[i], a[n-i])
</code></pre>

<h2 id="_2">数组翻转</h2>
<p>比如我们在 JS 中，实现翻转数组，（array.prototype.reverse） 除外。[1,2,3] =&gt; [3,2,1]</p>
<pre><code class="js">function reverseArray(arr) {
  var len = array.length;
  var middle = Math.floor(len / 2);
  for (var i = 0; i &lt; middle; i += 1) {
    var temp = array[i];
    array[i] = array[n - 1 - i];
    array[n - 1 - i] = temp;
  }
}
</code></pre>

<p>这样我们就不用借助另外一个一个数组倒序循环了。</p>
<h2 id="_3">删除排序后数组的重复元素</h2>
<p>比如我们给出一组排好后的数组，然后删除掉其中重复的元素</p>
<p>[1,2,3,3,3,4,5,5,5,6,7] to [1,2,3,4,5,6,7]</p>
<pre><code class="js">var removeDuplicates = function(nums) {
  var i = 0;
  // 这里有问题，需要看 for-of 的循环
  // https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/for...of
  for (let n of nums) {
    if (i==0 || n &gt; nums[i - 1]) {
      nums[i++] = n;
    }
  }
  return i;
};
</code></pre>

<h3 id="_4">判断回文</h3>
<p>最近 <strong>20200202</strong> 比较火，这是比较常见的<a href="https://en.wikipedia.org/wiki/Palindrome">回文</a>数字。类似单词比如 <code>bob</code> 或者句子 <code>Was it a car or a cat I saw?</code>。</p>
<pre><code class="bash">'aba' =&gt; true
'accad' =&gt; false
'20200202' =&gt; true
</code></pre>

<p>我们如何判断一个字符串是回文的时候可以用到。</p>
<pre><code class="js">function isPalindromeStr(str) {
  var middle = Math.floor(str.length / 2);
  for (var i = 0; i &lt; middle; i++)
    if (str[i] !== str[str.length - i - 1]) {
      return false;
    }
  return true;
} 
</code></pre>

<p>对应下面三个题目</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/In-place_algorithm">In-place algorithm</a></li>
<li><a href="https://en.wikipedia.org/wiki/Palindrome">Palindrome</a></li>
<li><a href="https://leetcode.com/problems/longest-palindromic-substring/">Longest Palindromic Substring</a></li>
</ul>
<p>其他的例子，排序算法会原地重新排放阵列内容成为排序过的顺序，包含：</p>
<p><a href="https://baike.sogou.com/lemma/ShowInnerLink.htm?lemmaId=111984">冒泡排序</a></p>
<p><a href="https://baike.sogou.com/lemma/ShowInnerLink.htm?lemmaId=7538686">选择排序</a></p>
<p><a href="https://baike.sogou.com/lemma/ShowInnerLink.htm?lemmaId=7832934">插入排序</a></p>
<p><a href="https://baike.sogou.com/lemma/ShowInnerLink.htm?lemmaId=4838322">堆排序</a></p>
<p><a href="https://baike.sogou.com/lemma/ShowInnerLink.htm?lemmaId=7835120">希尔排序</a></p>
<p>快速排序通常被描述为一个原地算法，但是事实上并不是。大部份的实作需要O(log n)的空间来支持它的 <a href="https://baike.sogou.com/lemma/ShowInnerLink.htm?lemmaId=7824380">分治法</a>（divide-and-conquer）递回。大部份选择算法也是原地，虽然在找到最后结果的过程中，有某些相当地重新排列输入阵列，但却是固定大小的结果。</p>
<h2 id="_5">在计算上的复杂度</h2>
<p>在<a href="https://baike.sogou.com/lemma/ShowInnerLink.htm?lemmaId=174556523&amp;ss_c=ssc.citiao.link">计算复杂性理论</a>中，原地算法包含使用O(1) <a href="https://baike.sogou.com/lemma/ShowInnerLink.htm?lemmaId=5026582">空间复杂度</a>的所有算法，DSPACE(1)类型。这个类型是非常有限的；它与正规语言1相等。事实上，它甚至不包含上面所列的任何范例。</p>
<p>因为这个原因，我们也考虑在 L 的算法，这类型的问题需要O(log n)额外的空间，来成为原地。虽然这个似乎与我们先前的定义矛盾，但是我们必须认为在抽象的世界，输入的资料可以是任意巨大的。在一部真实的电脑，指标（pointer）仅需要一个小的固定数量空间，因为实体内存的数量是固定的，但是一般上一个大小为n的数列需要O(log n)位元来作为它的索引（index）。</p>
<p>结果是否意指快速排序是原地的？其实一点也不 — 技术上来说，它需要O(log2 n)空间，因为它的O(log n) 堆栈框架（stack frames）每一个都含有一个固定数量的指标（每一个大小为O(log n)）。</p>
<p>辨别拥有 L 的原地算法拥有某些有趣的含意；举例来说，它意指存在一个（相当地复杂）原地算法，决定在一个<a href="https://baike.sogou.com/lemma/ShowInnerLink.htm?lemmaId=541946&amp;ss_c=ssc.citiao.link">无向图</a>（undirected graph）中的任两个节点（nodes）之间是否存在一条路径（path），这是一个需要O(n)个额外的空间，使用典型的算法像是深度优先搜寻(depth-first search)（每个节点有个走访的位元）的问题。有些问题像是决定一个图形是否为<a href="https://baike.sogou.com/lemma/ShowInnerLink.htm?lemmaId=412491&amp;ss_c=ssc.citiao.link">二分图</a>（bipartite graph）或测试两个图形使否有相同数量的连结元件（<a href="https://baike.sogou.com/lemma/ShowInnerLink.htm?lemmaId=8887224&amp;ss_c=ssc.citiao.link">connected</a> <a href="https://baike.sogou.com/lemma/ShowInnerLink.htm?lemmaId=106288&amp;ss_c=ssc.citiao.link">component</a>），接着针对这些问题产出原地算法。参考SL有更多的资讯。</p>
<h2 id="_6">随意的角色</h2>
<p>在很多情况，借由使用<a href="https://baike.sogou.com/lemma/ShowInnerLink.htm?lemmaId=1708671&amp;ss_c=ssc.citiao.link">随机化算法</a>（randomized algorithms），一个算法的空间需求可以被极度地裁减掉。举个范例，我们希望知道一个有 n 个顶点（vertices）的图形中的两个顶点是否位于图中同一个连接元件（connected component）。没有已知简单、决定性的（deterministic）、原地算法来决定这件事，但是如果我们简单地由一个顶点开始，且执行大约20n3步的随机走路（random walk），那我们会偶遇到其他顶点来提供它不是在同一个元件（component）中的机会是非常地高。类似地，对于质数测试（primality test）有简单的随机化原地算法像是米勒-拉宾检验，也有简单原地<a href="https://baike.sogou.com/lemma/ShowInnerLink.htm?lemmaId=67142757&amp;ss_c=ssc.citiao.link">随机化</a><a href="https://baike.sogou.com/lemma/ShowInnerLink.htm?lemmaId=63790654&amp;ss_c=ssc.citiao.link">整数分解</a>算法像是Pollard's rho 算法。参考RL和BPL有对这个现象更多的讨论。</p>
<h2 id="_7">在函数的程式设计</h2>
<p>函数<a href="https://baike.sogou.com/lemma/ShowInnerLink.htm?lemmaId=107828&amp;ss_c=ssc.citiao.link">程式设计</a>（functional programming）语言经常不鼓励或不支援会覆盖资料的原地算法，因为这是副作用的一种型态；反之，他们只允许建立新的资料。然而，好的函数语言 <a href="https://baike.sogou.com/lemma/ShowInnerLink.htm?lemmaId=106869&amp;ss_c=ssc.citiao.link">编译器</a>（compiler）在当一个与以存在之非常相似的物件被建立时，都经常会辨识出来，然后旧的就会被丢弃掉，而且会最把这最佳化为一个简单的"<a href="https://baike.sogou.com/lemma/ShowInnerLink.htm?lemmaId=9318085&amp;ss_c=ssc.citiao.link">引擎盖</a>之下"转换。</p>
<p>基本上，有可能小心地建构原地算法而部会更动资料（除非资料已不会再被使用），但是在实际上这却很少见到。参考纯函数数据结构（purely functional data structure）。</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; TEST</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"search": 83, "next": 78, "help": 191, "previous": 80};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
