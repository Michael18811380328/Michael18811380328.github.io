
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <meta name="author" content="Michael An">
      
      
        <link rel="canonical" href="https://michael18811380328.github.io/ebook-JS-basic/08-DOM/">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.8">
    
    
      
        <title>08-DOM.md - Michale An Blog</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.cb6bc1d0.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.39b8e14a.min.css">
        
          
          
          <meta name="theme-color" content="#2094f3">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue" data-md-color-accent="">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#dom" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://michael18811380328.github.io/" title="Michale An Blog" class="md-header-nav__button md-logo" aria-label="Michale An Blog">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            Michale An Blog
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              08-DOM.md
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/Michael18811380328/Michael18811380328.github.io/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Michael18811380328/Michael18811380328.github.io
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://michael18811380328.github.io/" title="Michale An Blog" class="md-nav__button md-logo" aria-label="Michale An Blog">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Michale An Blog
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/Michael18811380328/Michael18811380328.github.io/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Michael18811380328/Michael18811380328.github.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1" >
      
      <label class="md-nav__link" for="nav-1">
        人生思考
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="人生思考" data-md-level="1">
        <label class="md-nav__title" for="nav-1">
          <span class="md-nav__icon md-icon"></span>
          人生思考
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/40%E9%80%80%E4%BC%91/" class="md-nav__link">
        40退休.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" class="md-nav__link">
        JS 数据结构.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/Poor-and-busy/" class="md-nav__link">
        Poor-and-busy.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/Reflections%20on%20Pre-Tirement/" class="md-nav__link">
        Reflections on Pre-Tirement.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/The%20art%20of%20Execution%20%E6%89%A7%E8%A1%8C%E5%8A%9B%E7%9A%84%E8%89%BA%E6%9C%AF/" class="md-nav__link">
        The art of Execution 执行力的艺术.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/b%E8%AE%A1%E5%88%92/" class="md-nav__link">
        b计划.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/data%20structure%20basic/" class="md-nav__link">
        data structure basic.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/" class="md-nav__link">
        index.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E7%86%B5%E5%A2%9E/" class="md-nav__link">
        熵增.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E4%B8%AA%E4%BA%BA%E9%80%89%E6%8B%A9/" class="md-nav__link">
        个人选择.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E4%BA%BA%E7%94%9F%E7%9C%9F%E7%9B%B8/" class="md-nav__link">
        人生真相.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E5%85%B6%E4%BB%96%E4%B9%A6%E5%8D%95/" class="md-nav__link">
        其他书单.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E4%B8%B9%E5%B0%BC%E6%96%AF%E4%B8%8EUnix/" class="md-nav__link">
        丹尼斯与Unix.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E8%A9%B9%E5%AE%8F%E5%BF%97%E8%AF%BB%E4%B9%A6/" class="md-nav__link">
        詹宏志读书.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E9%AA%A1%E5%AD%90%E5%92%8C%E4%BA%BA%E7%94%9F/" class="md-nav__link">
        骡子和人生.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E4%BB%A3%E7%A0%81%E6%95%B4%E6%B4%81%E4%B9%8B%E9%81%93%20%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        代码整洁之道 读书笔记.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E5%A6%82%E4%BD%95%E5%8F%98%E5%BE%97%E5%BC%BA%E5%A4%A7/" class="md-nav__link">
        如何变得强大.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E4%B8%93%E4%B8%9A%E6%95%99%E8%82%B2%E7%9A%84%E5%85%B4%E8%B5%B7/" class="md-nav__link">
        专业教育的兴起.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E4%B8%AD%E5%9B%BD%E7%BB%8F%E6%B5%8E%E7%9A%84%E8%BD%AC%E5%8F%98/" class="md-nav__link">
        中国经济的转变.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E7%A1%95%E5%A3%AB%E5%AD%A6%E4%BD%8D%E7%9A%84%E8%B4%AC%E5%80%BC/" class="md-nav__link">
        硕士学位的贬值.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E4%BB%BB%E6%AD%A3%E9%9D%9E%E7%9A%84%E7%AE%A1%E7%90%86%E6%80%9D%E6%83%B3/" class="md-nav__link">
        任正非的管理思想.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E6%8A%80%E6%9C%AF%E5%92%8C%E7%A8%B3%E5%AE%9A%E7%9A%84%E5%B7%A5%E4%BD%9C/" class="md-nav__link">
        技术和稳定的工作.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E5%A4%A7%E5%AD%A6%E6%95%99%E8%82%B2%E5%92%8C%E7%BD%91%E7%BB%9C%E6%96%87%E5%87%AD/" class="md-nav__link">
        大学教育和网络文凭.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%E5%88%B0%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" class="md-nav__link">
        思维导图到深度学习.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E4%B8%AD%E5%9B%BD%E7%9A%84%E6%88%BF%E4%BB%B7%E4%BC%9A%E6%80%8E%E4%B9%88%E6%94%B6%E5%9C%BA/" class="md-nav__link">
        中国的房价会怎么收场.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E5%B7%A5%E4%B8%9A%E6%96%87%E6%98%8E%E5%AF%B9%E4%BA%8E%E7%A4%BE%E4%BC%9A%E7%9A%84%E5%86%B2%E5%87%BB/" class="md-nav__link">
        工业文明对于社会的冲击.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83%E5%92%8C%E5%AF%B9%E6%95%B0%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83/" class="md-nav__link">
        正态分布和对数正态分布.md
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
      
      <label class="md-nav__link" for="nav-2">
        JS 基础
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="JS 基础" data-md-level="1">
        <label class="md-nav__title" for="nav-2">
          <span class="md-nav__icon md-icon"></span>
          JS 基础
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../01-%E5%85%A5%E9%97%A8/" class="md-nav__link">
        01-入门.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../02-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" class="md-nav__link">
        02-数据类型.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../03-%E8%BF%90%E7%AE%97%E7%AC%A6/" class="md-nav__link">
        03-运算符.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../04-%E8%AF%AD%E6%B3%95%E4%B8%93%E9%A2%98/" class="md-nav__link">
        04-语法专题.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../05-%E6%A0%87%E5%87%86%E5%BA%93/" class="md-nav__link">
        05-标准库.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../06-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/" class="md-nav__link">
        06-面向对象编程.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../07-%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C/" class="md-nav__link">
        07-异步操作.md
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          08-DOM.md
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        08-DOM.md
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dom" class="md-nav__link">
    第八章 DOM
  </a>
  
    <nav class="md-nav" aria-label="第八章 DOM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81" class="md-nav__link">
    8.1 概念
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#82-node-api" class="md-nav__link">
    8.2 Node API
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#83-api" class="md-nav__link">
    8.3 节点集合 API
  </a>
  
    <nav class="md-nav" aria-label="8.3 节点集合 API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nodelist-api" class="md-nav__link">
    NodeList API
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#htmlcollection-api" class="md-nav__link">
    HTMLCollection API
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#84-parentnode-childnode" class="md-nav__link">
    8.4 parentNode childNode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#85-document-node" class="md-nav__link">
    8.5 Document Node
  </a>
  
    <nav class="md-nav" aria-label="8.5 Document Node">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    属性
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    方法
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#86-element-node" class="md-nav__link">
    8.6 Element Node
  </a>
  
    <nav class="md-nav" aria-label="8.6 Element Node">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    属性
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a" class="md-nav__link">
    方法:a:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#87" class="md-nav__link">
    8.7 属性的操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#88-text-node" class="md-nav__link">
    8.8 text Node
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#89-documentfragment-node" class="md-nav__link">
    8.9 DocumentFragment Node
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#810-css" class="md-nav__link">
    8.10 CSS操作
  </a>
  
    <nav class="md-nav" aria-label="8.10 CSS操作">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1domcss" class="md-nav__link">
    1、使用DOM操作CSS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2css-styledeclaration" class="md-nav__link">
    2、CSS 的 StyleDeclaration 对象
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3css" class="md-nav__link">
    3、CSS 模块的侦测
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4css" class="md-nav__link">
    4、CSS 对象的静态方法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5windowgetcomputedstyle" class="md-nav__link">
    5、window.getComputedStyle
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6stylesheets-api" class="md-nav__link">
    6、styleSheets API
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#811-mutation-observer" class="md-nav__link">
    8.11 Mutation Observer
  </a>
  
    <nav class="md-nav" aria-label="8.11 Mutation Observer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    1、观察器定义
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    2、观察器构造函数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    3、实例方法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4mutationrecord" class="md-nav__link">
    4、mutationRecord 对象
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    5、使用案例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../09-Event/" class="md-nav__link">
        09-Event.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../10-BOM/" class="md-nav__link">
        10-BOM.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/" class="md-nav__link">
        11-网页元素接口.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../readme/" class="md-nav__link">
        readme.md
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" >
      
      <label class="md-nav__link" for="nav-3">
        网易云课堂笔记
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="网易云课堂笔记" data-md-level="1">
        <label class="md-nav__title" for="nav-3">
          <span class="md-nav__icon md-icon"></span>
          网易云课堂笔记
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/02-v8%E5%BC%95%E6%93%8E%E5%9B%9E%E6%94%B6%E5%86%85%E5%AD%98%E7%AE%80%E4%BB%8B/" class="md-nav__link">
        02-v8引擎回收内存简介.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/03-node%E4%B8%8B%E9%9D%A2%E7%9A%84Restful%E5%AE%9E%E7%8E%B0/" class="md-nav__link">
        03-node下面的Restful实现.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/04-%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3%E7%9A%84%E6%8F%90%E5%8D%87%E2%80%94%E5%A6%82%E4%BD%95%E6%8F%90%E9%AB%98%E6%88%91%E4%BB%AC%E4%BB%A3%E7%A0%81%E7%9A%84%E5%8F%AF%E6%89%A9%E5%B1%95%E6%80%A7/" class="md-nav__link">
        04-编程思想的提升—如何提高我们代码的可扩展性.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/06-%E6%B5%8F%E8%A7%88%E5%99%A8%E6%B8%B2%E6%9F%93%E5%8E%9F%E7%90%86%E5%92%8Cssr/" class="md-nav__link">
        06-浏览器渲染原理和ssr.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/07-%E7%BD%91%E6%98%93%E7%9C%9F%E5%AE%9E%E9%A1%B9%E7%9B%AEwebpack%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90/" class="md-nav__link">
        07-网易真实项目webpack配置解析.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/08-%E4%BB%8E%E6%9E%B6%E6%9E%84%E5%88%86%E6%9E%90API%E5%B1%82/" class="md-nav__link">
        08-从架构分析API层.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/09-%E5%89%8D%E7%AB%AF%E8%B4%9F%E8%B4%A3%E4%BA%BA%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%86%85%E5%AE%B9/" class="md-nav__link">
        09-前端负责人的工作内容.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/10-%E5%88%86%E6%9E%90%E6%BA%90%E7%A0%81%E5%AD%A6%E6%9E%B6%E6%9E%84/" class="md-nav__link">
        10-分析源码学架构.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/11-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E9%AB%98%E8%B4%A8%E9%87%8F%E4%BB%A3%E7%A0%81/" class="md-nav__link">
        11-设计模式高质量代码.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/12-nodeJS%2BMongoDB%E7%99%BB%E5%BD%95%E7%B3%BB%E7%BB%9F/" class="md-nav__link">
        12-nodeJS+MongoDB登录系统.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/12-nodejs-mongodb-mongoose/" class="md-nav__link">
        12-nodejs-mongodb-mongoose.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/13-%E4%BD%BF%E7%94%A8VUE%E5%88%9B%E5%BB%BA%E7%BB%84%E4%BB%B6%EF%BC%88%E6%B2%A1%E5%AD%A6%E5%AE%8C%EF%BC%89/" class="md-nav__link">
        13-使用VUE创建组件（没学完）.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/16-%E6%9E%84%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6%E5%B7%A5%E5%85%B7/" class="md-nav__link">
        16-构建自己的脚手架工具.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/17-webpack%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/" class="md-nav__link">
        17-webpack编译原理分析.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/20-%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8A%80%E8%83%BD-VUE%EF%BC%88%E6%B2%A1%E5%AD%A6%E5%AE%8C%EF%BC%89/" class="md-nav__link">
        20-组件封装的基本技能-VUE（没学完）.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/21-ssr/" class="md-nav__link">
        21-ssr.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/24-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E5%A6%82%E4%BD%95%E5%81%9A/" class="md-nav__link">
        24-单元测试如何做.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/25-%E5%9F%BA%E4%BA%8ENodeJS%E6%89%93%E9%80%A0Web%E6%9E%B6%E6%9E%84%E4%B8%AD%E9%97%B4%E5%B1%82/" class="md-nav__link">
        25-基于NodeJS打造Web架构中间层.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/26-webpack%E7%9A%84%E9%AB%98%E7%BA%A7%E6%8A%80%E5%B7%A7/" class="md-nav__link">
        26-webpack的高级技巧.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/readme/" class="md-nav__link">
        readme.md
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" >
      
      <label class="md-nav__link" for="nav-4">
        开课吧笔记
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="开课吧笔记" data-md-level="1">
        <label class="md-nav__title" for="nav-4">
          <span class="md-nav__icon md-icon"></span>
          开课吧笔记
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-kaikeba-frontend/01%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" class="md-nav__link">
        01 性能优化.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-kaikeba-frontend/02%20%E5%89%8D%E7%AB%AF%E6%B5%8B%E8%AF%95/" class="md-nav__link">
        02 前端测试.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-kaikeba-frontend/03%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" class="md-nav__link">
        03 设计模式.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" class="md-nav__link">
        04 数据结构与算法.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/" class="md-nav__link">
        05 面试题.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-kaikeba-frontend/06%20%E9%9D%A2%E8%AF%95%E6%8A%80%E5%B7%A7/" class="md-nav__link">
        06 面试技巧.md
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" >
      
      <label class="md-nav__link" for="nav-5">
        前端工程化笔记
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="前端工程化笔记" data-md-level="1">
        <label class="md-nav__title" for="nav-5">
          <span class="md-nav__icon md-icon"></span>
          前端工程化笔记
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-jstraining-RYF/" class="md-nav__link">
        README.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-jstraining-RYF/engineering/" class="md-nav__link">
        engineering.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-jstraining-RYF/history/" class="md-nav__link">
        history.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-jstraining-RYF/node/" class="md-nav__link">
        node.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-jstraining-RYF/preparation/" class="md-nav__link">
        preparation.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-jstraining-RYF/react/" class="md-nav__link">
        react.md
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" >
      
      <label class="md-nav__link" for="nav-6">
        JS ES6 语法
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="JS ES6 语法" data-md-level="1">
        <label class="md-nav__title" for="nav-6">
          <span class="md-nav__icon md-icon"></span>
          JS ES6 语法
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JSES6-RYF/readme/" class="md-nav__link">
        说明
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JSES6-RYF/01-%E4%BB%8B%E7%BB%8D/" class="md-nav__link">
        01-介绍.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JSES6-RYF/02-%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC/" class="md-nav__link">
        02-变量赋值.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JSES6-RYF/03-%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/" class="md-nav__link">
        03-解构赋值.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JSES6-RYF/04-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%89%A9%E5%B1%95/" class="md-nav__link">
        04-字符串的扩展.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JSES6-RYF/05-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%96%B9%E6%B3%95/" class="md-nav__link">
        05-字符串方法.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JSES6-RYF/06-%E6%AD%A3%E5%88%99/" class="md-nav__link">
        06-正则.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JSES6-RYF/07-%E6%95%B0%E5%80%BC/" class="md-nav__link">
        07-数值.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JSES6-RYF/08-%E5%87%BD%E6%95%B0/" class="md-nav__link">
        08-函数.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JSES6-RYF/09-%E6%95%B0%E7%BB%84/" class="md-nav__link">
        09-数组.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JSES6-RYF/10-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E5%B1%9E%E6%80%A7/" class="md-nav__link">
        10-对象的新增属性.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JSES6-RYF/11-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95/" class="md-nav__link">
        11-对象的新增方法.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JSES6-RYF/12-Symbol/" class="md-nav__link">
        12-Symbol.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JSES6-RYF/13-Set%20%E5%92%8C%20Map%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" class="md-nav__link">
        13-Set 和 Map 数据结构.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JSES6-RYF/14-Proxy/" class="md-nav__link">
        14-Proxy.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JSES6-RYF/15-Reflect/" class="md-nav__link">
        15-Reflect.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JSES6-RYF/16-Promise/" class="md-nav__link">
        16-Promise.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JSES6-RYF/17-%E9%81%8D%E5%8E%86%E5%99%A8%E7%9A%84%E5%BE%AA%E7%8E%AF/" class="md-nav__link">
        17-遍历器的循环.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JSES6-RYF/18-Generator/" class="md-nav__link">
        18-Generator.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JSES6-RYF/19-Generator%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/" class="md-nav__link">
        19-Generator异步应用.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JSES6-RYF/20-async%20%E5%87%BD%E6%95%B0/" class="md-nav__link">
        20-async 函数.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JSES6-RYF/21-Class%20%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/" class="md-nav__link">
        21-Class 的基本语法.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JSES6-RYF/22-Class%20%E7%9A%84%E7%BB%A7%E6%89%BF/" class="md-nav__link">
        22-Class 的继承.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JSES6-RYF/23-Module%20%E7%9A%84%E8%AF%AD%E6%B3%95/" class="md-nav__link">
        23-Module 的语法.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JSES6-RYF/24-Module%20%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%AE%9E%E7%8E%B0/" class="md-nav__link">
        24-Module 的加载实现.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JSES6-RYF/25-%E7%BC%96%E7%A8%8B%E9%A3%8E%E6%A0%BC/" class="md-nav__link">
        25-编程风格.md
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" >
      
      <label class="md-nav__link" for="nav-7">
        Javascript 高级教程
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Javascript 高级教程" data-md-level="1">
        <label class="md-nav__title" for="nav-7">
          <span class="md-nav__icon md-icon"></span>
          Javascript 高级教程
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../book-JS-primer-code-design/08-window/" class="md-nav__link">
        08-window.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../book-JS-primer-code-design/10-nodes/" class="md-nav__link">
        10-nodes.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../book-JS-primer-code-design/11-choose/" class="md-nav__link">
        11-choose.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../book-JS-primer-code-design/22-%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95/" class="md-nav__link">
        22-高级用法.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../book-JS-primer-code-design/24-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/" class="md-nav__link">
        24-最佳实践.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../book-JS-primer-code-design/readme/" class="md-nav__link">
        readme.md
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" >
      
      <label class="md-nav__link" for="nav-8">
        其他书籍
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="其他书籍" data-md-level="1">
        <label class="md-nav__title" for="nav-8">
          <span class="md-nav__icon md-icon"></span>
          其他书籍
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../book-JS-The-good-parts/JS-the-good-parts/" class="md-nav__link">
        JS-the-good-parts.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../book-JS-The-good-parts/curry-function/" class="md-nav__link">
        curry-function.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-javascript-secret-garden/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/" class="md-nav__link">
        JavaScript 秘密花园.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-javascript-secret-garden/readme/" class="md-nav__link">
        readme.md
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dom" class="md-nav__link">
    第八章 DOM
  </a>
  
    <nav class="md-nav" aria-label="第八章 DOM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81" class="md-nav__link">
    8.1 概念
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#82-node-api" class="md-nav__link">
    8.2 Node API
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#83-api" class="md-nav__link">
    8.3 节点集合 API
  </a>
  
    <nav class="md-nav" aria-label="8.3 节点集合 API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nodelist-api" class="md-nav__link">
    NodeList API
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#htmlcollection-api" class="md-nav__link">
    HTMLCollection API
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#84-parentnode-childnode" class="md-nav__link">
    8.4 parentNode childNode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#85-document-node" class="md-nav__link">
    8.5 Document Node
  </a>
  
    <nav class="md-nav" aria-label="8.5 Document Node">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    属性
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    方法
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#86-element-node" class="md-nav__link">
    8.6 Element Node
  </a>
  
    <nav class="md-nav" aria-label="8.6 Element Node">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    属性
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a" class="md-nav__link">
    方法:a:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#87" class="md-nav__link">
    8.7 属性的操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#88-text-node" class="md-nav__link">
    8.8 text Node
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#89-documentfragment-node" class="md-nav__link">
    8.9 DocumentFragment Node
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#810-css" class="md-nav__link">
    8.10 CSS操作
  </a>
  
    <nav class="md-nav" aria-label="8.10 CSS操作">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1domcss" class="md-nav__link">
    1、使用DOM操作CSS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2css-styledeclaration" class="md-nav__link">
    2、CSS 的 StyleDeclaration 对象
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3css" class="md-nav__link">
    3、CSS 模块的侦测
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4css" class="md-nav__link">
    4、CSS 对象的静态方法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5windowgetcomputedstyle" class="md-nav__link">
    5、window.getComputedStyle
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6stylesheets-api" class="md-nav__link">
    6、styleSheets API
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#811-mutation-observer" class="md-nav__link">
    8.11 Mutation Observer
  </a>
  
    <nav class="md-nav" aria-label="8.11 Mutation Observer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    1、观察器定义
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    2、观察器构造函数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    3、实例方法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4mutationrecord" class="md-nav__link">
    4、mutationRecord 对象
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    5、使用案例
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/Michael18811380328/Michael18811380328.github.io/edit/master/docs/ebook-JS-basic/08-DOM.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  <h1>08-DOM.md</h1>
                
                <h2 id="dom">第八章 DOM<a class="headerlink" href="#dom" title="Permanent link">&para;</a></h2>
<h3 id="81">8.1 概念<a class="headerlink" href="#81" title="Permanent link">&para;</a></h3>
<p>DOM（文档对象模型）作用是把网页转换成JS可以处理的对象（树状结构）。浏览器标签HTML脚本，转换成Node节点树 JS才能操作。</p>
<p>DOM 树最小的单位是 node 节点。浏览器提供了原生的对象 Node。实际的DOM树节点有7类，都继承自Node节点。最大的根节点是 Document， 浏览器中各种标签（span）是 Element， 每个节点具有属性 Attribute，标签内部的文本是 Text，注释是 Comment 节点。文档片段是 DocumentFragment，最后是 DocumentType 表示 doctype 标签（说明HTML的规范）</p>
<p>全部节点按照树状结构排列就是 Document DOM 树。可以使用 parentNode, firstChild, lastChild, nextSibling, previousSibling 获取任意节点。</p>
<p>对于原生 JS 操作node是很重要的，对于React不需要直接操作node，直接使用状态驱动UI界面即可（操作界面，界面滚动动画等也需要DOM）。</p>
<h3 id="82-node-api">8.2 Node API<a class="headerlink" href="#82-node-api" title="Permanent link">&para;</a></h3>
<p>所有的节点都继承自 Node 节点，所以所有的节点都可以继承 Node 节点的 APIs。下面是常用原型上的API。</p>
<p>属性</p>
<div class="codehilite"><pre><span></span><code><span class="nx">Node</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">nodeType</span> <span class="c1">// 返回一个数值，表示节点的类型(节点属性文本对应123)</span>
<span class="nx">Node</span><span class="p">.</span><span class="nx">prototuype</span><span class="p">.</span><span class="nx">nodeName</span> <span class="c1">// 返回字符串，表示节点的名称(div #text)</span>
<span class="nx">Node</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">nodeValue</span> <span class="c1">// 返回一个字符串，表示节点的值(文本节点、属性节点、注释节点具有这个属性)，如果内部是空，返回null,这个值可以改变</span>
<span class="nx">textContent</span> <span class="c1">// 返回当前节点和所有子节点的文本内容</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">===</span> <span class="kc">null</span> 
<span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">textContent</span> <span class="c1">//可以获取整个文档的内容（实际上获取不全）</span>

<span class="nx">baseURL</span> <span class="c1">// 返回一个绝对路径(由window.location决定),属性只读，浏览器根据这个属性计算相对路径</span>
<span class="nx">ownerDocument</span> <span class="c1">// 返回当前节点的根节点document，document.ownerDocument === null</span>
<span class="nx">nextSibling</span><span class="p">,</span> <span class="nx">previousSibling</span> 
<span class="c1">//返回相邻节点(如果没有相邻节点返回null, 可能一个元素节点的相邻节点是文本节点或者注释节点)</span>
<span class="nx">parentNode</span> <span class="c1">// 只有三种情况 Element, Document, DocumentFraggment</span>
<span class="nx">parentElement</span> <span class="c1">// 父元素 element</span>
<span class="nx">firstChild</span> <span class="nx">lastChild</span> <span class="c1">// 返回子元素中的第一个或者最后一个(可能是文本注释或者空)</span>
<span class="nx">childNodes</span> <span class="c1">// 返回所有子节点的集合</span>
<span class="nx">isConnected</span> <span class="c1">// 当前节点是否在文档中(可能没有插入文档中)</span>
</code></pre></div>

<p>方法</p>
<div class="codehilite"><pre><span></span><code><span class="mf">1</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span> <span class="c1">// 如果p是新建的DOM，直接在body后面插入。如果p是已有的DOM节点，就是把这个节点移动到body后面。返回值是插入文档的子节点。如果传入的参数是 DocumentFragment，那么插入的是全部的文档片段，返回值是空的DocumentFragment片段。</span>

<span class="mf">2</span>
<span class="nx">hasChildNodes</span> <span class="c1">//判断当前节点是否有子节点(包括所有类型的节点，不仅仅是文档节点)</span>
<span class="c1">// 判断一个节点是否具有子节点的三种方法</span>
<span class="nx">node</span><span class="p">.</span><span class="nx">hasChildNodes</span><span class="p">()</span>
<span class="nx">node</span><span class="p">.</span><span class="nx">firstChild</span> <span class="o">!==</span> <span class="kc">null</span>
<span class="nx">node</span><span class="p">.</span><span class="nx">childNodes</span> <span class="o">&amp;&amp;</span> <span class="nx">node</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mf">0</span>

<span class="mf">3</span><span class="o">/</span>
<span class="nx">node</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">()</span> <span class="nx">克隆一个节点</span><span class="p">(</span><span class="nx">参数是true</span><span class="err">、</span><span class="kc">false</span><span class="err">，</span><span class="nx">表示克隆自身或者克隆全部子节点</span><span class="p">)</span><span class="err">，</span><span class="nx">可以克隆全部属性</span><span class="err">，</span><span class="nx">但是会失去事件监听</span><span class="p">(</span><span class="nx">回调函数</span><span class="p">)</span><span class="err">。</span><span class="nx">克隆后的节点没有父节点</span><span class="err">，</span><span class="nx">需要手动append到节点树中</span><span class="err">。</span><span class="nx">如果克隆后有两个name或者ID需要改变其中的一个</span><span class="err">。</span>

<span class="mf">4</span><span class="err">、</span>
<span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">newNode</span><span class="p">,</span> <span class="nx">referNode</span><span class="p">);</span> <span class="nx">新节点会插入到父节点中</span><span class="err">，</span><span class="nx">插入到referNode之前</span><span class="err">。</span><span class="nx">返回值是插入的节点</span><span class="err">。</span><span class="nx">如果第二个参数是null</span><span class="err">，</span><span class="nx">就插入到最后的位置</span><span class="err">。</span>

<span class="mf">5</span><span class="err">、</span>
<span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">childNode</span><span class="p">)</span>
<span class="k">while</span><span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">element</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">)</span>
<span class="p">}</span>
<span class="c1">//可以移除一个节点的全部子节点</span>

<span class="mf">6</span><span class="err">、</span><span class="nx">replaceChild</span><span class="p">(</span><span class="nx">newNode</span><span class="p">,</span> <span class="nx">oldNode</span><span class="p">)</span>

<span class="mf">7</span> <span class="nx">node</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">childNode</span><span class="p">);</span> <span class="nx">是否是当前节点</span><span class="err">、</span><span class="nx">子节点</span><span class="err">、</span><span class="nx">后代节点</span>

<span class="nx">node</span><span class="p">.</span><span class="nx">compareDocumentPosition</span><span class="p">(</span><span class="nx">another</span> <span class="nx">node</span><span class="p">)</span> <span class="nx">判断两个节点的相对位置</span><span class="p">(</span><span class="nx">返回一个数值</span><span class="p">)</span>

<span class="nx">isEqualNode</span> <span class="nx">判断两个节点的类型属性子节点是否一致</span>
<span class="nx">isSameNode</span> <span class="nx">判断两个节点是否完全一致</span>

<span class="nx">normalize</span> <span class="nx">清理节点内部的文本节点</span><span class="p">(</span><span class="nx">会去掉空文本节点</span><span class="err">，</span><span class="nx">将相邻的文本节点合并</span><span class="p">)</span>
<span class="nx">getRootNode</span> <span class="nx">获取文档的根节点</span><span class="p">(</span><span class="nx">类似于属性ownerDocument</span><span class="p">,</span><span class="nx">方法可以使用在document自身上面</span><span class="p">)</span>
</code></pre></div>

<h3 id="83-api">8.3 节点集合 API<a class="headerlink" href="#83-api" title="Permanent link">&para;</a></h3>
<p>Node 是单个节点，多个节点集合可以分为 NodeList 和 HTMLCollection，前者包括各种类型节点，后者包括HTML元素节点。</p>
<h4 id="nodelist-api">NodeList API<a class="headerlink" href="#nodelist-api" title="Permanent link">&para;</a></h4>
<p>类似于数组，Node.childNodes document.querySelectorAll() 可以获取；结果是一个伪数组，具有 length 和 forEach， for循环，但是不具有数组的其他属性方法，可以使用call，apply 方法将其转化成数组。</p>
<p><code>let children = document.body.childNodes; Array.prototype.slice.call(children);</code></p>
<p>注意：结果可能是一个动态实例：获取后，如果DOM发生变化，那么属性也会发生变化。</p>
<div class="codehilite"><pre><span></span><code><span class="nx">children</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">children</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">children</span><span class="p">.</span><span class="nx">length</span>
<span class="nx">chilfren</span><span class="p">.</span><span class="nx">item</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span> <span class="nx">返回索引位置的子节点</span>

<span class="nx">values</span><span class="err">，</span><span class="nx">keys</span><span class="p">,</span> <span class="nx">entries</span> <span class="nx">返回的是ES6的遍历器</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">entry</span> <span class="k">of</span> <span class="nx">children</span><span class="p">.</span><span class="nx">entries</span><span class="p">())</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">entry</span><span class="p">);</span>
  <span class="c1">// Array [ 1, &lt;script&gt; ]</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="htmlcollection-api">HTMLCollection API<a class="headerlink" href="#htmlcollection-api" title="Permanent link">&para;</a></h4>
<p>不能使用forEach 遍历 document.links document.forms document.images</p>
<p>如果某个元素具有id或者name属性，那么可以通过点语法获取这个节点</p>
<p><code>document.getElementById('pic') === document.iamges.pic</code></p>
<div class="codehilite"><pre><span></span><code><span class="nx">HTMLCollection</span><span class="p">.</span><span class="nx">length</span>
<span class="nx">HTMLCollection</span><span class="p">.</span><span class="nx">item</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span>
<span class="nx">HTMLCollection</span><span class="p">.</span><span class="nx">nameItem</span><span class="p">(</span><span class="s1">&#39;pic&#39;</span><span class="p">)</span> 
<span class="c1">// &lt;img id=&quot;pic&quot; src=&quot;http://example.com/foo.jpg&quot;&gt;</span>
</code></pre></div>

<h3 id="84-parentnode-childnode">8.4 parentNode childNode<a class="headerlink" href="#84-parentnode-childnode" title="Permanent link">&para;</a></h3>
<p>拥有子节点的Node才能继承 parentNode 的属性（Element，document， DocumentFragment）</p>
<div class="codehilite"><pre><span></span><code>parentNode.children
parentNode.firstElementNode
parentNode.lastElementNode
parentNode.childElementCount === 10
parentNode.append(div, &#39;hello&#39;); //加到最后一个节点后面
parentNode.prepend(); // 加到最前面节点
</code></pre></div>

<p>子节点</p>
<div class="codehilite"><pre><span></span><code><span class="nx">node</span><span class="p">.</span><span class="nx">remove</span><span class="p">()</span>
<span class="nx">node</span><span class="p">.</span><span class="nx">before</span><span class="p">(</span><span class="nx">div</span><span class="p">);</span>
<span class="nx">node</span><span class="p">.</span><span class="nx">after</span><span class="p">(</span><span class="nx">div</span><span class="p">);</span>
<span class="nx">node</span><span class="p">.</span><span class="nx">replaceWith</span><span class="p">(</span><span class="nx">newNode</span><span class="p">);</span>
</code></pre></div>

<h3 id="85-document-node">8.5 Document Node<a class="headerlink" href="#85-document-node" title="Permanent link">&para;</a></h3>
<p>document 表示整个文档，可以使用 window.document 或者 document 获取对象。document 继承了 Node ParentNode EventTarget 的属性和方法。下面是常用的属性和方法</p>
<h4 id="_1">属性<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h4>
<p>常见属性</p>
<div class="codehilite"><pre><span></span><code><span class="nb">document</span><span class="p">.</span><span class="k">default</span> <span class="o">===</span> <span class="nb">window</span> <span class="c1">//返回window对象(如果不是window的document就返回null，例如 Ajax 或者 iframe 创建的document，很少用到)</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">doctype</span> <span class="o">===</span> <span class="s2">&quot;&lt;!DOCTYPE html&gt;&quot;</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">doctype</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="s1">&#39;html&#39;</span> <span class="c1">// 返回文档类型</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span> <span class="p">=&gt;</span> <span class="nx">返回HTML节点</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">body</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">head</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">scrollingElement</span> <span class="p">=&gt;</span><span class="nx">返回当前滚动的元素</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">activeElement</span> <span class="p">=&gt;</span><span class="nx">返回当前活动的元素</span><span class="p">(</span><span class="nx">获取焦点的input表单等</span><span class="p">)</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">fullscreenElement</span><span class="p">.</span><span class="nx">nodeName</span> <span class="o">===</span> <span class="s1">&#39;VIDEO&#39;</span> <span class="nx">当前全屏的元素</span><span class="p">(</span><span class="nx">如果是video</span><span class="err">，</span><span class="nx">证明用户在全屏观看视频等</span><span class="p">)</span>
</code></pre></div>

<p>节点集合属性</p>
<p>下面的属性返回文档的节点组合动态集合（如果内部节点变化，返回值也会随时更新）</p>
<div class="codehilite"><pre><span></span><code><span class="nb">document</span><span class="p">.</span><span class="nx">links</span>
<span class="nx">documents</span><span class="p">.</span><span class="nx">forms</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">images</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">plugins</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">embeds</span>
<span class="c1">// 上面都返回一个 HTMLCollection</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">styleSheets</span>
</code></pre></div>

<p>文档静态信息属性</p>
<div class="codehilite"><pre><span></span><code><span class="nb">document</span><span class="p">.</span><span class="nx">URL</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">documentURL</span>
<span class="c1">// 如果anchor变化，那么这两个属性都会发生变化</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">domain</span> <span class="nx">返回当前文档的域名</span><span class="err">，</span><span class="nx">不包括协议和端口</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">location</span> <span class="nx">很常用</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">lastModified</span> <span class="nx">最近更改的时间</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">title</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">characteret</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">referrer</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">dir</span> 
<span class="nb">document</span><span class="p">.</span><span class="nx">compatMode</span> <span class="c1">// 兼容模式或者严格模式</span>
</code></pre></div>

<p>文档状态属性</p>
<div class="codehilite"><pre><span></span><code><span class="nb">document</span><span class="p">.</span><span class="nx">hidden</span> <span class="c1">// 当前界面是否最小化(或者其他tab活动)</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">visibilityState</span> <span class="c1">// 文档可见状态(在渲染的哪个阶段)？结果是可见、不可见、正在渲染、已经卸载</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">readyState</span> <span class="c1">// loading(加载HTML) interactive(HTML加载完毕，加载外部的图片CSS) complete(加载完毕)，状态改变会触发 readystatechange 事件，在首屏优化功能会用到这部分。</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">cookie</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">designMode</span> <span class="c1">//文档的编辑模式(如果&#39;on&#39;，界面中可编辑HTML)，这样对于调试界面截屏很常用</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">implemention</span> <span class="c1">//返回一个DOMImplemention对象，可以创建新的XML</span>
</code></pre></div>

<h4 id="_2">方法<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="nb">document</span><span class="p">.</span><span class="nx">open</span><span class="p">();</span> <span class="nx">清除文档当前内容</span><span class="p">(</span><span class="nx">界面会空白</span><span class="p">)</span><span class="err">，</span><span class="nx">文档成为可写状态</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span> <span class="nx">关闭</span> <span class="nx">open</span> <span class="nx">方法打开的文档</span><span class="err">。</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">);</span> <span class="nx">在界面中写入HTML</span><span class="p">(</span><span class="nx">如果界面中已有内容</span><span class="err">，</span><span class="nx">首先执行open方法清空界面</span><span class="p">)</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">writeln</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">);</span> <span class="nx">类似上面的方法</span>

<span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">();</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">();</span> <span class="nx">加入CSS选择器</span><span class="err">，</span><span class="nx">选择符合标准的第一个或者全部DOM对象</span><span class="p">(</span><span class="nx">不支持伪元素和伪类选择器</span><span class="p">)</span><span class="nx">返回的结果是静态的节点</span><span class="err">，</span><span class="nx">不会随着界面变化而变化</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;DIV:not(.ignore)&#39;</span><span class="p">);</span> <span class="c1">// 选中div元素，那些 class 含 ignore 的除外</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;p&#39;</span><span class="p">)</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="s1">&#39;foo bar&#39;</span><span class="p">);</span>
<span class="nx">注意</span><span class="err">：</span><span class="nx">HTML标签对于大小写不敏感</span><span class="err">，</span><span class="nx">但是CSS类名对于大小写敏感</span><span class="p">(</span><span class="nx">类名选择器更重要</span><span class="p">)</span>
<span class="nx">getElementsByName</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span> <span class="nx">获取HTML中name是x的元素组合</span>  <span class="o">&lt;</span><span class="nx">form</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="o">&gt;&lt;</span><span class="err">/form&gt;</span>
<span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;wrap&#39;</span><span class="p">);</span> <span class="nx">这个效率比</span> <span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;#wrap&#39;</span><span class="p">)</span><span class="nx">效率高很多</span>

<span class="nb">document</span><span class="p">.</span><span class="nx">elementFromPoint</span><span class="p">(</span><span class="mf">50</span><span class="p">,</span> <span class="mf">50</span><span class="p">)</span> <span class="nx">获取界面中坐标位置的最上层元素</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">elementsFromPoint</span><span class="p">(</span><span class="mf">50</span><span class="p">,</span> <span class="mf">50</span><span class="p">)</span> <span class="nx">获取界面中坐标位置的全部元素</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">caretPositionFromPoint</span><span class="p">()</span> <span class="nx">返回一个CaretPosition对象</span><span class="err">，</span><span class="nx">包含了指定坐标点在节点对象内部的位置信息</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">)</span> <span class="nx">这里可以使自定义的标签名</span><span class="err">，</span><span class="nx">不能包含尖括号</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span><span class="s1">&#39;Hello&#39;</span><span class="p">)</span> <span class="nx">创建一个文本节点</span><span class="err">，</span><span class="nx">返回的节点是文本节点</span><span class="p">(</span><span class="nx">不是HTML</span><span class="p">)</span><span class="nx">所以可以很好的处理XSS</span><span class="err">，</span><span class="nx">展示用户的输入</span><span class="err">，</span><span class="nx">会对特殊符号进行转义</span><span class="err">，</span><span class="nx">即使含有恶意代码也不会出现XSS攻击</span><span class="err">。</span><span class="nx">不能对双引号转义</span>
<span class="nx">createAttribute</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span> <span class="nx">创建属性名</span>
<span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s2">&quot;Mike&quot;</span><span class="p">)</span> <span class="nx">设置属性名</span>

<span class="kd">let</span> <span class="nx">a</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createAttribute</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">);</span>
<span class="nx">a</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s1">&#39;Michael&#39;</span><span class="p">;</span>
<span class="nx">等价于</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s2">&quot;Michael&quot;</span><span class="p">);</span>
<span class="nx">createComment</span> <span class="nx">返回一个注释节点</span><span class="err">，</span><span class="nx">传入的是字符串</span>
<span class="kd">var</span> <span class="nx">documentFragment</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createDocumentFragment</span><span class="p">();</span> <span class="nx">这部分DOM存在于内存中</span><span class="err">，</span><span class="nx">不属于当前的文档</span><span class="err">，</span><span class="nx">可以生成一个复杂的DOM</span><span class="err">，</span><span class="nx">然后一次性插入到文档中</span><span class="err">，</span><span class="nx">对这个文档片段的改动不会引发网页的重新渲染</span><span class="err">（</span><span class="nx">比直接修改DOM要好</span><span class="err">）。</span>

<span class="kd">var</span> <span class="nx">event</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createEvent</span><span class="p">();</span> <span class="nx">创建一个事件对象</span>
<span class="kd">var</span> <span class="nx">event</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createEvent</span><span class="p">(</span><span class="s1">&#39;Event&#39;</span><span class="p">);</span>
<span class="nx">event</span><span class="p">.</span><span class="nx">initEvent</span><span class="p">(</span><span class="s1">&#39;build&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;build&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">type</span><span class="p">);</span> <span class="c1">// &quot;build&quot;</span>
<span class="p">},</span> <span class="kc">false</span><span class="p">);</span>
<span class="nx">触发这个事件</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createEvent</span><span class="p">(</span><span class="s1">&#39;Event&#39;</span><span class="p">);</span>
<span class="nx">e</span><span class="p">.</span><span class="nx">initEvent</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">type</span><span class="p">);</span> <span class="s1">&#39;build&#39;</span>
<span class="p">},</span> <span class="nx">falsse</span><span class="p">);</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>

<span class="c1">// 增加移除事件监听</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="nx">listener</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="nx">listener</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Event</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">);</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span> <span class="c1">// 触发事件</span>


<span class="c1">// 后面这些API基本没有听过用过，现在了解一下</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">hasFocus</span><span class="p">()</span> <span class="nx">当前文档是否有元素激活或者获取焦点</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">adpotNode</span><span class="p">()</span> 
<span class="c1">// adpotNode 将某个节点及其子节点，从原来所在的文档或DocumentFragment里面移除，归属当前document对象，返回插入后的新节点。document.adoptNode方法只是改变了节点的归属，并没有将这个节点插入新的文档树。所以，还要再用appendChild方法或insertBefore方法，将新节点插入当前文档树。</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">importNode</span><span class="p">()</span>
<span class="c1">// 从原来所在的文档或DocumentFragment里面，拷贝某个节点及其子节点，让它们归属当前document对象。同理需要将新节点插入当前的文档树</span>

<span class="nb">document</span><span class="p">.</span><span class="nx">createNodeIterator</span><span class="p">()</span> <span class="nx">返回一个子节点的遍历器</span><span class="err">。</span><span class="nx">第一个参数是需要遍历的根节点</span><span class="err">，</span><span class="nx">第二个参数是遍历的节点类型</span><span class="err">，</span><span class="nx">例如下面返回的就是元素节点的遍历</span>
<span class="kd">var</span> <span class="nx">nodeIterator</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createNodeIterator</span><span class="p">(</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span>
  <span class="nx">NodeFilter</span><span class="p">.</span><span class="nx">SHOW_ELEMENT</span>
<span class="p">);</span>

<span class="nb">document</span><span class="p">.</span><span class="nx">createTreeWalker</span><span class="p">()</span> <span class="nx">返回一个</span> <span class="nx">DOM</span> <span class="nx">的子树遍历器</span>
</code></pre></div>

<p>在设计模式开启或者可编辑状态时，可以使用下面的几种方法执行指令.</p>
<div class="codehilite"><pre><span></span><code><span class="k">if</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">designMode</span> <span class="o">===</span> <span class="s1">&#39;on&#39;</span> <span class="o">||</span> <span class="nx">node</span><span class="p">.</span><span class="nx">contenteditable</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">execCommand</span><span class="p">(</span><span class="nx">command</span><span class="p">,</span> <span class="nx">showDefaultUI</span><span class="p">,</span> <span class="nx">input</span><span class="p">);</span>
<span class="p">}</span>
<span class="nx">第一个参数是改变的命令</span><span class="p">(</span><span class="nx">createLink</span><span class="p">)</span><span class="err">，</span><span class="nx">第二个参数表示是否使用默认用户界面</span><span class="p">(</span><span class="k">default</span><span class="err">：</span><span class="kc">false</span><span class="p">)</span><span class="err">，</span><span class="nx">第三个参数是命令的具体值</span><span class="err">（</span><span class="nx">url</span><span class="err">）。</span><span class="nx">具体的命令很多</span><span class="err">，</span><span class="nx">包括加粗</span><span class="err">、</span><span class="nx">全选</span><span class="err">、</span><span class="nx">删除等</span><span class="err">。</span><span class="nx">这个API具有兼容性</span><span class="err">，</span><span class="nx">所以可以通过后面两个API监测某个命令是否可以使用</span><span class="err">，</span><span class="nx">返回值都是布尔值</span><span class="err">。</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">queryCommandEnabled</span><span class="p">(</span><span class="s1">&#39;SelectAll&#39;</span><span class="p">))</span> <span class="p">{</span>
  <span class="c1">// 监测浏览器是否兼容，then use this API</span>
<span class="p">}</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">queryCommandSupported</span><span class="p">(</span><span class="s1">&#39;SelectAll&#39;</span><span class="p">))</span> <span class="p">{</span>
  <span class="c1">// 监测当前是否可以使用摸个命令(例如必须选中文本后才能给文本加粗)，没选中就不能使用Blod命令</span>
<span class="p">}</span>
</code></pre></div>

<p>document.getSelection() 指向 window.getSelection()</p>
<h3 id="86-element-node">8.6 Element Node<a class="headerlink" href="#86-element-node" title="Permanent link">&para;</a></h3>
<p>元素节点：HTML标签渲染成Node树节点就是元素节点，nodeType == 1。元素节点是多种节点的一个集合，继承了Node节点的属性和方法。</p>
<h4 id="_3">属性<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h4>
<p>1、元素特性属性</p>
<div class="codehilite"><pre><span></span><code><span class="nx">Element</span><span class="p">.</span><span class="nx">id</span>  <span class="nx">获取元素节点的ID</span><span class="err">，</span><span class="nx">对于大小写敏感</span><span class="err">，</span><span class="nx">可读写</span> <span class="c1">// id=&#39;wrap&#39;</span>
<span class="nx">Element</span><span class="p">.</span><span class="nx">tagName</span> <span class="o">===</span> <span class="nx">node</span><span class="p">.</span><span class="nx">nodeName</span> <span class="o">===</span> <span class="s1">&#39;SPAN&#39;</span> <span class="nx">返回节点的大写名称</span>
<span class="nx">Element</span><span class="p">.</span><span class="nx">dir</span> <span class="s1">&#39;ltr&#39;</span> <span class="s1">&#39;rtl&#39;</span> <span class="nx">获取文本排列的方向</span>
<span class="nx">ELement</span><span class="p">.</span><span class="nx">accessKey</span> <span class="o">=</span> <span class="s1">&#39;h&#39;</span> <span class="nx">设置当前元素的快捷键</span><span class="p">(</span><span class="nx">Alt</span><span class="o">+</span><span class="nx">h</span><span class="p">)</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">dragment</span> <span class="nx">元素节点可拖拽</span><span class="p">(</span><span class="nx">属性可读写</span><span class="p">)</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">lang</span> <span class="nx">返回当前HTML的语言</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">tabIndex</span> <span class="nx">当前元素在按下Tab键遍历的顺序</span><span class="err">，</span><span class="nx">如果是</span><span class="o">-</span><span class="mf">1</span><span class="err">，</span><span class="nx">Tab键不会遍历到这个元素</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">title</span> <span class="nx">当前元素的标题</span><span class="p">(</span><span class="nx">鼠标经过时系统提示文本</span><span class="p">)</span>
</code></pre></div>

<p>2、元素UI状态属性</p>
<div class="codehilite"><pre><span></span><code><span class="nx">element</span><span class="p">.</span><span class="nx">hidden</span>  <span class="nx">权重小于CSS的设置</span><span class="err">，</span><span class="nx">如果CSS已经设置hidden或者none</span><span class="err">，</span><span class="nx">这里无效</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">contentEditable</span> <span class="nx">用户是否可以编写HTML</span><span class="p">(</span><span class="nx">通常是default</span><span class="p">),</span><span class="nx">这个属性可读写</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">isContentEditable</span> <span class="nx">读写的状态</span><span class="err">，</span><span class="nx">不可写</span>
</code></pre></div>

<p>3、元素HTML属性</p>
<div class="codehilite"><pre><span></span><code><span class="nx">element</span><span class="p">.</span><span class="nx">attributes</span> <span class="nx">返回一个属性的伪数组</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">className</span> <span class="nx">返回类名的字符串</span><span class="err">，</span><span class="nx">使用空格分开</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">classList</span> <span class="nx">返回类名的伪数组</span><span class="err">，</span><span class="nx">具有下面API</span>
    <span class="nx">add</span>
  <span class="nx">remove</span>
  <span class="nx">contains</span>
  <span class="nx">toggle</span><span class="p">(</span><span class="s1">&#39;sf-color&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span> <span class="nx">这个很常用</span><span class="err">，</span><span class="nx">可以切换元素节点的样式和行为</span><span class="err">；</span><span class="nx">第二个参数可选</span><span class="err">，</span><span class="nx">true表示增加属性</span>
  <span class="nx">toString</span>
  <span class="nx">item</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span> <span class="nx">返回某个索引位置的类名</span>

<span class="nx">foo</span><span class="p">.</span><span class="nx">className</span> <span class="o">+=</span> <span class="s1">&#39;sf-color&#39;</span><span class="p">;</span>
<span class="nx">foo</span><span class="p">.</span><span class="nx">className</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^sf-color$/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
<span class="nx">foo</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;sf-color&#39;</span><span class="p">);</span> <span class="c1">// 不是数组不能直接使用push</span>
<span class="nx">foo</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">&#39;sf-color&#39;</span><span class="p">);</span>

<span class="nx">element</span><span class="p">.</span><span class="nx">dataset</span> <span class="nx">获取元素节点的</span> <span class="nx">data</span><span class="o">-</span> <span class="nx">属性</span><span class="err">，</span><span class="nx">结果是一个对象</span><span class="err">，</span><span class="nx">对象可读写</span><span class="err">。</span><span class="nx">使用</span> <span class="nx">getAttribute</span> <span class="nx">setAttribute</span> <span class="nx">同样可以读写</span> <span class="nx">data</span> <span class="nx">属性</span><span class="err">。</span><span class="nx">这里可以存放时间戳等属性</span><span class="p">(</span><span class="nx">如果ID已经存放其他值</span><span class="err">，</span><span class="nx">这里可以存放一部分信息</span><span class="p">)</span>

<span class="nx">element</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="nx">返回节点内部的HTML</span> <span class="nx">可读写</span><span class="p">(</span><span class="nx">这里返回的字符串会把特殊符号转化</span><span class="err">，</span><span class="nx">如果只获取完整文本</span><span class="err">，</span><span class="nx">可以使用textContent</span> <span class="nx">属性</span><span class="p">)</span><span class="err">。</span><span class="nx">当设置一个节点的</span> <span class="nx">innerHTML</span> <span class="nx">时</span><span class="err">，</span><span class="nx">如果参数字符串包含HTML标签</span><span class="err">，</span><span class="nx">就会渲染</span><span class="err">，</span><span class="nx">存在风险</span><span class="err">；</span><span class="nx">包含的Script标签不会执行</span><span class="p">(</span><span class="nx">如果传入img标签</span><span class="err">，</span><span class="nx">然后指向不安全网站</span><span class="p">)</span>

<span class="nx">element</span><span class="p">.</span><span class="nx">outerHTML</span> <span class="nx">返回节点内部的HTML和当前节点的HTML</span><span class="err">，</span><span class="nx">如果当前节点没有父节点</span><span class="p">(</span><span class="nx">新创建的节点</span><span class="p">)</span><span class="err">，</span><span class="nx">会报错</span>
</code></pre></div>

<p>4、元素尺寸</p>
<div class="codehilite"><pre><span></span><code><span class="nx">element</span><span class="p">.</span><span class="nx">clientHeight</span> <span class="nx">element</span><span class="p">.</span><span class="nx">clientWidth</span> <span class="nx">返回元素的高度和宽度</span><span class="p">(</span><span class="nx">如果元素是行内元素</span><span class="err">，</span><span class="nx">返回的是0</span><span class="err">，</span><span class="nx">如果CSS中给定元素的尺寸</span><span class="err">，</span><span class="nx">返回的就是固定值</span><span class="err">，</span><span class="nx">否则返回界面中实际渲染的值</span><span class="p">)</span><span class="nx">包括padding</span> <span class="p">,</span><span class="nx">不包括border和滚动条</span><span class="err">。</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">clientHeight</span> <span class="nx">网页总高度</span><span class="err">；</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">clientHeight</span> <span class="nx">视口高度</span>

<span class="nx">clientLeft</span> <span class="nx">clientTop</span> <span class="nx">返回元素左边框和顶部边框的宽度</span><span class="p">(</span><span class="nx">不包括内外边距</span><span class="p">)</span><span class="err">，</span><span class="nx">返回的是整数</span>

<span class="nx">scrollHeight</span> <span class="nx">scrollWidth</span> <span class="nx">返回元素的总高度和总宽度</span><span class="p">(</span><span class="nx">溢出隐藏的部分也会计算</span><span class="err">，</span><span class="nx">包括内部的伪元素伪类的尺寸</span><span class="p">)</span>

<span class="nx">scrollLeft</span> <span class="nx">scrollTop</span> <span class="nx">元素滚动的距离</span><span class="p">(</span><span class="nx">没有滚动条的元素始终返回0</span><span class="p">)</span>

<span class="nx">offsetParent</span> <span class="nx">获取当前元素外部的一个父元素</span><span class="p">(</span><span class="nx">这个元素position不是继承的static</span><span class="p">)</span><span class="err">，</span><span class="nx">所以父元素一定要相对定位</span><span class="p">(</span><span class="nx">position</span> <span class="nx">relative</span><span class="err">，</span><span class="nx">如果是继承的话</span><span class="err">，</span><span class="nx">高度就计算错误了</span><span class="p">)</span><span class="nx">如果元素是不可见的</span><span class="err">，</span><span class="nx">或者固定定位</span><span class="err">，</span><span class="nx">那么父元素是null</span><span class="err">。</span>

<span class="nx">offsetWidth</span> <span class="nx">offsetHeight</span> <span class="nx">表示元素的高度和宽度</span><span class="p">(</span><span class="nx">包括边界和滚动条</span><span class="p">)</span><span class="err">，</span><span class="nx">只读</span>
<span class="nx">offsetLeft</span> <span class="nx">offsetTop</span> <span class="nx">表示元素距离左侧和顶部元素的距离</span>

<span class="nx">element</span><span class="p">.</span><span class="nx">style</span> <span class="nx">设置行内样式</span><span class="p">(</span><span class="nx">可读写</span><span class="p">)</span>
</code></pre></div>

<p>5、子元素属性</p>
<div class="codehilite"><pre><span></span><code><span class="nx">element</span><span class="p">.</span><span class="nx">children</span> <span class="nx">获取子节点</span><span class="p">(</span><span class="nx">只有元素类型子节点</span><span class="err">，</span><span class="nx">不包括注释节点文本节点</span><span class="p">)</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">childElementCount</span> <span class="o">===</span> <span class="nx">element</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">firstElementChild</span> <span class="nx">element</span><span class="p">.</span><span class="nx">lastElementChild</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">nextElementSibling</span> <span class="nx">element</span><span class="p">.</span><span class="nx">previousSibling</span>
</code></pre></div>

<h4 id="a">方法:a:<a class="headerlink" href="#a" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">);</span>
<span class="nx">getAttributeNames</span><span class="p">();</span>
<span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s2">&quot;Michale&quot;</span><span class="p">);</span>
<span class="nx">hasAttribute</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">);</span>
<span class="nx">hasAttributes</span><span class="p">();</span>
<span class="nx">removeAttribute</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>

<span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#wrap, p&#39;</span><span class="p">)</span>
<span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;p, div&#39;</span><span class="p">)</span>
<span class="nx">node</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span> <span class="nx">结果是动态的伪数组</span>
<span class="nx">node</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="nx">node</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span> <span class="nx">返回距离当前节点的满足条件的最近的节点</span><span class="p">(</span><span class="nx">包括自己</span><span class="p">)</span>
<span class="nx">node</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="kc">true</span> <span class="nx">or</span> <span class="kc">false</span>

<span class="nx">事件的API</span>
<span class="nx">node</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){..});</span>
<span class="nx">node</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){});</span>
<span class="kd">let</span> <span class="nx">event</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Event</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">);</span>
<span class="nx">node</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>

<span class="nx">element</span><span class="p">.</span><span class="nx">scrollIntoView</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="nx">滚动当前元素到浏览器的可见区域</span><span class="err">，</span><span class="nx">默认参数是true</span><span class="err">，</span><span class="nx">表示元素的顶部和可见区域的顶部对齐</span><span class="err">，</span><span class="nx">如果传入的是false</span><span class="err">，</span><span class="nx">元素的底部和可见区域的底部对齐</span><span class="err">。</span>

<span class="nx">element</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">()</span> <span class="nx">返回当前元素对应的矩形的坐标对象</span><span class="err">，</span><span class="nx">具有</span> <span class="nx">x</span> <span class="nx">y</span> <span class="nx">height</span> <span class="nx">width</span> <span class="nx">left</span> <span class="nx">right</span> <span class="nx">top</span> <span class="nx">bottom</span> <span class="nx">表示元素相对于视口的位置</span><span class="err">。</span><span class="nx">这些属性包括内边距和边框</span><span class="err">。</span>

<span class="nx">element</span><span class="p">.</span><span class="nx">getClientRects</span><span class="p">()</span> <span class="nx">返回一个伪数组</span><span class="err">，</span><span class="nx">就是元素对应矩形的参数的伪数组</span><span class="p">(</span><span class="nx">上面对象属性构成的伪数组</span><span class="p">)</span> <span class="nx">height</span> <span class="nx">width</span> <span class="nx">left</span> <span class="nx">right</span> <span class="nx">top</span> <span class="nx">bottom</span> <span class="nx">这个方法决定于行内元素是否换行</span><span class="err">，</span><span class="nx">行内元素每一行的位置偏移</span><span class="err">。</span>

<span class="nx">element</span><span class="p">.</span><span class="nx">insertAdjacentElement</span><span class="p">(</span><span class="nx">position</span><span class="p">,</span> <span class="nx">element</span><span class="p">);</span> <span class="nx">相对于当前元素的指定位置</span><span class="err">，</span><span class="nx">插入一个新的节点</span><span class="err">。</span>

<span class="nx">element</span><span class="p">.</span><span class="nx">insertAdjacentHTML</span><span class="p">();</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">insertAdjacentText</span><span class="p">();</span>
<span class="nx">将一段HTML或者文本插入临近的节点</span>

<span class="nx">element</span><span class="p">.</span><span class="nx">remove</span><span class="p">()</span> <span class="nx">将当前节点从父节点移除</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">focus</span><span class="p">()</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">blur</span><span class="p">()</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">click</span><span class="p">()</span> <span class="nx">模拟了一次鼠标点击</span><span class="err">，</span><span class="nx">相当于click事件</span>
</code></pre></div>

<h3 id="87">8.7 属性的操作<a class="headerlink" href="#87" title="Permanent link">&para;</a></h3>
<p>元素节点具有属性集合，attributes，其他节点都是null。属性集合对应HTML中的各种属性，是一个动态的伪数组。可以通过伪数组的下标或者键，获取对应的值，每一项是键值对。（id="wrap"）</p>
<p>标准属性：例如id，class，src；非标准属性可以是用户自定义的属性(data-*)。自定义属性需要使用data-开始，这样可以通过验证。一个元素节点创建出来后就会具有标准属性。注意，JSX 中使用 HtmlFor, className 代替。</p>
<p>API</p>
<div class="codehilite"><pre><span></span><code><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>
<span class="nx">getAttributeNames</span><span class="p">()</span>
<span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;wrap&#39;</span><span class="p">)</span>
<span class="nx">hasAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>
<span class="nx">hasAttributes</span><span class="p">()</span>
<span class="nx">removeAttribute</span><span class="p">(</span><span class="s1">&#39;wrap&#39;</span><span class="p">)</span>
</code></pre></div>

<h3 id="88-text-node">8.8 text Node<a class="headerlink" href="#88-text-node" title="Permanent link">&para;</a></h3>
<p>text 节点是元素节点和属性节点的子节点，空格也是一个文本节点。</p>
<p>属性</p>
<div class="codehilite"><pre><span></span><code><span class="nx">data</span> <span class="nx">等于</span> <span class="nx">value</span> <span class="nx">返回当前文本节点的内容</span><span class="p">(</span><span class="nx">字符串</span><span class="p">)</span>
<span class="nx">wholeText</span> <span class="nx">返回当前文本节点和相邻文本节点对的全部文本</span><span class="p">(</span><span class="nx">如果有</span><span class="p">)</span>
<span class="nx">length</span> <span class="nx">返回文本节点的长度</span>
<span class="nx">nextElementSibling</span> <span class="nx">previousElementSibling</span> <span class="nx">返回同级别节点</span><span class="p">(</span><span class="nx">如果有</span><span class="p">)</span>
</code></pre></div>

<p>方法</p>
<div class="codehilite"><pre><span></span><code><span class="nx">appendData</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">)</span> <span class="nx">在结尾增加字符串</span>
<span class="nx">deleteData</span><span class="p">(</span><span class="nx">startID</span><span class="p">,</span> <span class="nx">length</span><span class="p">)</span>
<span class="nx">insertData</span><span class="p">(</span><span class="nx">startID</span><span class="p">,</span> <span class="s1">&#39;test&#39;</span><span class="p">)</span>
<span class="nx">replaceData</span><span class="p">(</span><span class="nx">startID</span><span class="p">,</span> <span class="nx">length</span><span class="p">,</span> <span class="s1">&#39;test&#39;</span><span class="p">)</span>
<span class="nx">substringData</span><span class="p">(</span><span class="nx">startId</span><span class="p">,</span> <span class="nx">length</span><span class="p">)</span> <span class="nx">截取字符串</span>
<span class="nx">remove</span><span class="p">()</span> <span class="nx">移除当前节点</span>
<span class="nx">splitText</span><span class="p">(</span><span class="nx">position</span><span class="p">)</span> <span class="nx">将一个文本节点切割成两部分</span><span class="err">，</span><span class="nx">参数就是切割的位置</span>
<span class="nx">normalize</span><span class="p">();</span> <span class="nx">把内部两个相邻文本节点合并</span>

<span class="kd">let</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">docuemnt</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">textNode</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">();</span>
<span class="kd">let</span> <span class="nx">newTextNode</span> <span class="o">=</span> <span class="nx">textNode</span><span class="p">.</span><span class="nx">splitText</span><span class="p">(</span><span class="mf">3</span><span class="p">);</span>

<span class="nx">p</span><span class="p">.</span><span class="nx">chlidNodes</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mf">2</span>
<span class="nx">p</span><span class="p">.</span><span class="nx">normalize</span><span class="p">();</span>
<span class="nx">p</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mf">1</span>
</code></pre></div>

<h3 id="89-documentfragment-node">8.9 DocumentFragment Node<a class="headerlink" href="#89-documentfragment-node" title="Permanent link">&para;</a></h3>
<p>文本片段节点，没有parentNode，可以存放文本片段，在这里存放文本片段的速度比直接操作DOM快速，继承自Node和parentNode节点，所以具有继承的属性。children ,firstElementChildren, lastElementChilden, childElementCount 等属性。</p>
<h3 id="810-css">8.10 CSS操作<a class="headerlink" href="#810-css" title="Permanent link">&para;</a></h3>
<p>https://wangdoc.com/javascript/dom/css.html</p>
<p>使用 JS 去操作 CSS 来更改界面样式</p>
<h4 id="1domcss">1、使用DOM操作CSS<a class="headerlink" href="#1domcss" title="Permanent link">&para;</a></h4>
<p>直接改变DOM中的属性节点 setAttribute('style', 'color: pink;')；改变行内样式 </p>
<h4 id="2css-styledeclaration">2、CSS 的 StyleDeclaration 对象<a class="headerlink" href="#2css-styledeclaration" title="Permanent link">&para;</a></h4>
<p>可以通过这个对象的实例 elementNode.style 来改变样式（这里的 style 对象是键值对，键需要驼峰命名，值全部是字符串，不能写数值）</p>
<div class="codehilite"><pre><span></span><code><span class="kd">let</span> <span class="nx">cssStyle</span> <span class="o">=</span> <span class="nx">documenty</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;wrap&#39;</span><span class="p">).</span><span class="nx">style</span><span class="p">;</span>

<span class="c1">// 下面是CSS对象的属性</span>
<span class="nx">cssStyle</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span> <span class="c1">// 这个属性可以获取、清除全部行内属性</span>
<span class="nx">cssStyle</span><span class="p">.</span><span class="nx">length</span> <span class="c1">// return inner line style number</span>

<span class="c1">// 实例方法</span>
<span class="nx">cssStyle</span><span class="p">.</span><span class="nx">getPropertyPriority</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">)</span>
<span class="c1">// if (color: #fff !important;) return &#39;important&#39;; else return &#39;&#39;;</span>
<span class="nx">cssStyle</span><span class="p">.</span><span class="nx">getPropertyValue</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">)</span> <span class="o">===</span> <span class="s1">&#39;#fff&#39;</span><span class="p">;</span>
<span class="nx">cssStyle</span><span class="p">.</span><span class="nx">removeProperty</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">)</span>
<span class="nx">cssStyle</span><span class="p">.</span><span class="nx">setProperty</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;#fff&#39;</span><span class="p">,</span> <span class="s1">&#39;important&#39;</span><span class="p">)</span> <span class="c1">// important is not necessary</span>
<span class="nx">cssStyle</span><span class="p">.</span><span class="nx">item</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span> <span class="o">===</span> <span class="s1">&#39;color&#39;</span>
</code></pre></div>

<h4 id="3css">3、CSS 模块的侦测<a class="headerlink" href="#3css" title="Permanent link">&para;</a></h4>
<p>监测浏览器兼容性，判断浏览器某个属性是否是字符串（如果支持这个属性，但是没有设置，就会返回一个空字符串，如果不支持就返回undefined）。</p>
<div class="codehilite"><pre><span></span><code><span class="k">typeof</span> <span class="nx">cssStyle</span><span class="p">[</span><span class="s1">&#39;webkitAnimation&#39;</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">;</span>
</code></pre></div>

<p>那么可以创建一个函数判断是否支持这个属性</p>
<div class="codehilite"><pre><span></span><code><span class="kd">function</span> <span class="nx">isPropertySupported</span><span class="p">(</span><span class="nx">property</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// 处理兼容的属性</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">property</span> <span class="k">in</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">style</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">// 处理非兼容的属性(这里可以获取浏览器的名称，然后加上定向前缀，当然这样也是可以的)</span>
  <span class="kd">var</span> <span class="nx">prefixes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Moz&#39;</span><span class="p">,</span> <span class="s1">&#39;Webkit&#39;</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="s1">&#39;ms&#39;</span><span class="p">,</span> <span class="s1">&#39;Khtml&#39;</span><span class="p">];</span>
  <span class="kd">var</span> <span class="nx">prefProperty</span> <span class="o">=</span> <span class="nx">property</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mf">0</span><span class="p">).</span><span class="nx">toUpperCase</span> <span class="o">+</span> <span class="nx">property</span><span class="p">.</span><span class="nx">subStr</span><span class="p">(</span><span class="mf">1</span><span class="p">);</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">prefixes</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">((</span><span class="nx">prefixes</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+</span> <span class="nx">prefProperty</span><span class="p">)</span> <span class="k">in</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">style</span> <span class="p">{</span>
       <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">isPropertySupported</span><span class="p">(</span><span class="s1">&#39;background-clip&#39;</span><span class="p">)</span>
</code></pre></div>

<h4 id="4css">4、CSS 对象的静态方法<a class="headerlink" href="#4css" title="Permanent link">&para;</a></h4>
<p>CSS.escape('foo#foo') 使用 document.getElementById('wrap'), 如果内部字符串含有特殊字符，使用这个方法转换后可以进行茶轩；CSS.supports('width', '100px') CSS.supports('width: 100px') 可以监测当前环境是否支持这种类型的样式，第二种写法不能加入分号。</p>
<h4 id="5windowgetcomputedstyle">5、window.getComputedStyle<a class="headerlink" href="#5windowgetcomputedstyle" title="Permanent link">&para;</a></h4>
<p>前几种方法是获取静态的样式，实际上的样式是浏览器计算结果，这个API可以获取计算后的结果。</p>
<p>let cssStyle = window.getCOmputedStyle(div, ':after') 第二个参数是可选参数，获取的对象是动态变化的实际渲染对象（只读）；可以通过点语法获取具体的样式；获取的结果是绝对的计算结果（px rgb）需要通过单个属性（font-size）而不能直接获取font的属性。</p>
<p>界面上可以用这个方法获取伪元素的实际样式</p>
<h4 id="6stylesheets-api">6、styleSheets API<a class="headerlink" href="#6stylesheets-api" title="Permanent link">&para;</a></h4>
<p>document.stylesheets 网页全部的样式表（外部样式或者内联样式的伪数组）或者获取单一元素的样式表</p>
<p>elementNode.sheet 这个对象具有很多属性（title disabled media href...）</p>
<p>styleSheet.insertRule('#block { color: white }', 0) 给0条样式表增加一条规则</p>
<p>styleSheet.deleteRule(1) 删除1条样式表的规则</p>
<p>界面添加样式表的方法：添加style节点或者link节点</p>
<h3 id="811-mutation-observer">8.11 Mutation Observer<a class="headerlink" href="#811-mutation-observer" title="Permanent link">&para;</a></h3>
<h4 id="1">1、观察器定义<a class="headerlink" href="#1" title="Permanent link">&para;</a></h4>
<p>Mutation observer API 观察器：可以监视DOM节点的变动。节点属性文本的增减可以通过这个API监测到。和Event的区别是，event是同步触发（DOM变动后就会触发事件）observer是异步触发，界面中的DOM操作全部做完后才触发这个API，而且可以避免频繁的事件触发（拖动事件可能几千次，最后在observer中只触发一次，但是event中会触发多次）总结一下具有三个特点：</p>
<ul>
<li>异步触发</li>
<li>避免频繁触发（把所有的事件封装在一个数组中处理）</li>
<li>可以选择性记录DOM变动类型</li>
</ul>
<h4 id="2">2、观察器构造函数<a class="headerlink" href="#2" title="Permanent link">&para;</a></h4>
<p>构造函数创建观察器实例</p>
<div class="codehilite"><pre><span></span><code><span class="kd">let</span> <span class="nx">observer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MutationObserver</span><span class="p">((</span><span class="nx">mutations</span><span class="p">,</span> <span class="nx">observer</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// mutations 是事件构成的数组，observer 是返回的观察器实例，构造函数传入的参数是回调函数</span>
  <span class="nx">mutations</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">mutation</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">mutation</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div>

<h4 id="3">3、实例方法<a class="headerlink" href="#3" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kd">let</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;childList&#39;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="s1">&#39;Attributes&#39;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="s1">&#39;characterData&#39;</span><span class="o">:</span> <span class="kc">false</span><span class="p">};</span>
<span class="nx">observer</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nx">div</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
<span class="c1">// 观察div上面的options变化情况  characterData 节点内容或者节点文本的变化</span>

<span class="kd">let</span> <span class="nx">insertedNodes</span> <span class="o">=</span> <span class="p">[];</span>
<span class="kd">let</span> <span class="nx">observer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MutationObserver</span><span class="p">((</span><span class="nx">mutations</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">mutations</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">mutation</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">:</span> <span class="nx">mutation</span><span class="p">.</span><span class="nx">addedNodes</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">insertedNodes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">mutation</span><span class="p">.</span><span class="nx">addNodes</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">insertedNodes</span><span class="p">);</span>
<span class="p">});</span>
<span class="kd">let</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">childList</span><span class="o">:</span> <span class="kc">true</span> <span class="p">};</span>
<span class="nx">observer</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nb">document</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
<span class="c1">// 注：教程上options的键不同，第一个案例是字符串，第二个是直接的 childList，应该第一个正确。</span>

<span class="nx">observer</span><span class="p">.</span><span class="nx">disconnect</span><span class="p">();</span> <span class="c1">// 停止监听DOM的变动</span>
<span class="kd">let</span> <span class="nx">changes</span> <span class="o">=</span> <span class="nx">observer</span><span class="p">.</span><span class="nx">takeRecords</span><span class="p">();</span> <span class="c1">// 保存观察器没有处理的其他变动(处理到的部分在回调函数中实现)</span>
</code></pre></div>

<h4 id="4mutationrecord">4、mutationRecord 对象<a class="headerlink" href="#4mutationrecord" title="Permanent link">&para;</a></h4>
<p>DOM 变化一次会产生一个 MutationRecord 对象的实例。具有很多属性</p>
<div class="codehilite"><pre><span></span><code><span class="nx">type</span> <span class="nx">target</span> <span class="nx">addedNodes</span> <span class="nx">removedNodes</span> <span class="nx">previousSibling</span> <span class="nx">nextSibling</span> <span class="nx">oldValue</span>
</code></pre></div>

<h4 id="5">5、使用案例<a class="headerlink" href="#5" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1">// 监听子元素的变动</span>
<span class="kd">var</span> <span class="nx">callback</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">records</span><span class="p">){</span>
  <span class="nx">records</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">record</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Mutation type: &#39;</span> <span class="o">+</span> <span class="nx">record</span><span class="p">.</span><span class="nx">type</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Mutation target: &#39;</span> <span class="o">+</span> <span class="nx">record</span><span class="p">.</span><span class="nx">target</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">mo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MutationObserver</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">option</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;childList&#39;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s1">&#39;subtree&#39;</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">mo</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span> <span class="nx">option</span><span class="p">);</span>
</code></pre></div>

<p>属性的变动</p>
<div class="codehilite"><pre><span></span><code><span class="kd">var</span> <span class="nx">callback</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">records</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">records</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">record</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Previous attribute value: &#39;</span> <span class="o">+</span> <span class="nx">record</span><span class="p">.</span><span class="nx">oldValue</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">mo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MutationObserver</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;#my_element&#39;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;attributes&#39;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s1">&#39;attributeOldValue&#39;</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">}</span>

<span class="nx">mo</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
</code></pre></div>

<p>取代 DOMContentLoaded 事件</p>
<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">win</span><span class="p">){</span>
  <span class="s1">&#39;use strict&#39;</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">listeners</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="kd">var</span> <span class="nx">doc</span> <span class="o">=</span> <span class="nx">win</span><span class="p">.</span><span class="nb">document</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">MutationObserver</span> <span class="o">=</span> <span class="nx">win</span><span class="p">.</span><span class="nx">MutationObserver</span> <span class="o">||</span> <span class="nx">win</span><span class="p">.</span><span class="nx">WebKitMutationObserver</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">observer</span><span class="p">;</span>

  <span class="kd">function</span> <span class="nx">ready</span><span class="p">(</span><span class="nx">selector</span><span class="p">,</span> <span class="nx">fn</span><span class="p">){</span>
    <span class="c1">// 储存选择器和回调函数</span>
    <span class="nx">listeners</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
      <span class="nx">selector</span><span class="o">:</span> <span class="nx">selector</span><span class="p">,</span>
      <span class="nx">fn</span><span class="o">:</span> <span class="nx">fn</span>
    <span class="p">});</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">observer</span><span class="p">){</span>
      <span class="c1">// 监听document变化</span>
      <span class="nx">observer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MutationObserver</span><span class="p">(</span><span class="nx">check</span><span class="p">);</span>
      <span class="nx">observer</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nx">doc</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">childList</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nx">subtree</span><span class="o">:</span> <span class="kc">true</span>
      <span class="p">});</span>
    <span class="p">}</span>
    <span class="c1">// 检查该节点是否已经在DOM中</span>
    <span class="nx">check</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">check</span><span class="p">(){</span>
  <span class="c1">// 检查是否匹配已储存的节点</span>
    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">listeners</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>
      <span class="kd">var</span> <span class="nx">listener</span> <span class="o">=</span> <span class="nx">listeners</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
      <span class="c1">// 检查指定节点是否有匹配</span>
      <span class="kd">var</span> <span class="nx">elements</span> <span class="o">=</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="nx">listener</span><span class="p">.</span><span class="nx">selector</span><span class="p">);</span>
      <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">elements</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="nx">elements</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>
        <span class="c1">// 确保回调函数只会对该元素调用一次</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">element</span><span class="p">.</span><span class="nx">ready</span><span class="p">){</span>
          <span class="nx">element</span><span class="p">.</span><span class="nx">ready</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="c1">// 对该节点调用回调函数</span>
          <span class="nx">listener</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">element</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="c1">// 对外暴露ready</span>
  <span class="nx">win</span><span class="p">.</span><span class="nx">ready</span> <span class="o">=</span> <span class="nx">ready</span><span class="p">;</span>

<span class="p">})(</span><span class="k">this</span><span class="p">);</span>

<span class="c1">// 使用方法</span>
<span class="nx">ready</span><span class="p">(</span><span class="s1">&#39;.foo&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">){</span>
  <span class="c1">// ...</span>
<span class="p">});</span>
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../07-%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                07-异步操作.md
              </div>
            </div>
          </a>
        
        
          <a href="../09-Event/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                09-Event.md
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; Michael An
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.18f0862e.min.js"></script>
      <script src="../../assets/javascripts/bundle.994580cf.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.9c0e82ba.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="../../js/baidu-statistics.js"></script>
      
    
  </body>
</html>