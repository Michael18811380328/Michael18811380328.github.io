
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <meta name="author" content="Michael An">
      
      
        <link rel="canonical" href="https://michael18811380328.github.io/ebook-JSES6-RYF/04-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%89%A9%E5%B1%95/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.4">
    
    
      
        <title>04-字符串的扩展 - Michale An Blog</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.f7f47774.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f5d1f46.min.css">
        
          
          
          <meta name="theme-color" content="#2094f3">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue" data-md-color-accent="">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Michale An Blog" class="md-header__button md-logo" aria-label="Michale An Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Michale An Blog
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              04-字符串的扩展
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/Michael18811380328/Michael18811380328.github.io/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Michael18811380328/Michael18811380328.github.io
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Michale An Blog" class="md-nav__button md-logo" aria-label="Michale An Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Michale An Blog
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/Michael18811380328/Michael18811380328.github.io/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Michael18811380328/Michael18811380328.github.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      <label class="md-nav__link" for="__nav_1">
        人生思考
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="人生思考" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          人生思考
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        说明
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/40%E9%80%80%E4%BC%91/" class="md-nav__link">
        40退休
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/JS%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" class="md-nav__link">
        JS 数据结构
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/Poor-and-busy/" class="md-nav__link">
        Poor-and-busy
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/Reflections%20on%20Pre-Tirement/" class="md-nav__link">
        Reflections on Pre-Tirement
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/The%20art%20of%20Execution%20%E6%89%A7%E8%A1%8C%E5%8A%9B%E7%9A%84%E8%89%BA%E6%9C%AF/" class="md-nav__link">
        The art of Execution 执行力的艺术
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/Who%20Wants%20to%20Be%20a%20Millionaire/" class="md-nav__link">
        Who Wants to Be a Millionaire
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/b%E8%AE%A1%E5%88%92/" class="md-nav__link">
        b计划
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/data%20structure%20basic/" class="md-nav__link">
        data structure basic
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/" class="md-nav__link">
        index
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/leanpub-auto-the-road-to-ecmascript-6/" class="md-nav__link">
        leanpub-auto-the-road-to-ecmascript-6
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E5%B0%8F%E7%8B%97%E9%92%B1%E9%92%B1/" class="md-nav__link">
        小狗钱钱
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E7%86%B5%E5%A2%9E/" class="md-nav__link">
        熵增
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E4%B8%AA%E4%BA%BA%E9%80%89%E6%8B%A9/" class="md-nav__link">
        个人选择
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E4%BA%BA%E7%94%9F%E7%9C%9F%E7%9B%B8/" class="md-nav__link">
        人生真相
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E5%85%B6%E4%BB%96%E4%B9%A6%E5%8D%95/" class="md-nav__link">
        其他书单
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E4%B8%B9%E5%B0%BC%E6%96%AF%E4%B8%8EUnix/" class="md-nav__link">
        丹尼斯与Unix
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E8%A9%B9%E5%AE%8F%E5%BF%97%E8%AF%BB%E4%B9%A6/" class="md-nav__link">
        詹宏志读书
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E9%AA%A1%E5%AD%90%E5%92%8C%E4%BA%BA%E7%94%9F/" class="md-nav__link">
        骡子和人生
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E4%BB%A3%E7%A0%81%E6%95%B4%E6%B4%81%E4%B9%8B%E9%81%93%20%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        代码整洁之道 读书笔记
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E5%A6%82%E4%BD%95%E5%8F%98%E5%BE%97%E5%BC%BA%E5%A4%A7/" class="md-nav__link">
        如何变得强大
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E4%B8%93%E4%B8%9A%E6%95%99%E8%82%B2%E7%9A%84%E5%85%B4%E8%B5%B7/" class="md-nav__link">
        专业教育的兴起
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E4%B8%AD%E5%9B%BD%E7%BB%8F%E6%B5%8E%E7%9A%84%E8%BD%AC%E5%8F%98/" class="md-nav__link">
        中国经济的转变
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E7%A1%95%E5%A3%AB%E5%AD%A6%E4%BD%8D%E7%9A%84%E8%B4%AC%E5%80%BC/" class="md-nav__link">
        硕士学位的贬值
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E4%BB%BB%E6%AD%A3%E9%9D%9E%E7%9A%84%E7%AE%A1%E7%90%86%E6%80%9D%E6%83%B3/" class="md-nav__link">
        任正非的管理思想
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E6%8A%80%E6%9C%AF%E5%92%8C%E7%A8%B3%E5%AE%9A%E7%9A%84%E5%B7%A5%E4%BD%9C/" class="md-nav__link">
        技术和稳定的工作
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E5%A4%A7%E5%AD%A6%E6%95%99%E8%82%B2%E5%92%8C%E7%BD%91%E7%BB%9C%E6%96%87%E5%87%AD/" class="md-nav__link">
        大学教育和网络文凭
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%E5%88%B0%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" class="md-nav__link">
        思维导图到深度学习
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E4%B8%AD%E5%9B%BD%E7%9A%84%E6%88%BF%E4%BB%B7%E4%BC%9A%E6%80%8E%E4%B9%88%E6%94%B6%E5%9C%BA/" class="md-nav__link">
        中国的房价会怎么收场
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E5%B7%A5%E4%B8%9A%E6%96%87%E6%98%8E%E5%AF%B9%E4%BA%8E%E7%A4%BE%E4%BC%9A%E7%9A%84%E5%86%B2%E5%87%BB/" class="md-nav__link">
        工业文明对于社会的冲击
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../other/%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83%E5%92%8C%E5%AF%B9%E6%95%B0%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83/" class="md-nav__link">
        正态分布和对数正态分布
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        JS 基础
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="JS 基础" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          JS 基础
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JS-basic/01-%E5%85%A5%E9%97%A8/" class="md-nav__link">
        01-入门
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JS-basic/02-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" class="md-nav__link">
        02-数据类型
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JS-basic/03-%E8%BF%90%E7%AE%97%E7%AC%A6/" class="md-nav__link">
        03-运算符
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JS-basic/04-%E8%AF%AD%E6%B3%95%E4%B8%93%E9%A2%98/" class="md-nav__link">
        04-语法专题
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JS-basic/05-%E6%A0%87%E5%87%86%E5%BA%93/" class="md-nav__link">
        05-标准库
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JS-basic/06-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/" class="md-nav__link">
        06-面向对象编程
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JS-basic/07-%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C/" class="md-nav__link">
        07-异步操作
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JS-basic/08-DOM/" class="md-nav__link">
        08-DOM
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JS-basic/09-Event/" class="md-nav__link">
        09-Event
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JS-basic/10-BOM/" class="md-nav__link">
        10-BOM
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JS-basic/11-%E7%BD%91%E9%A1%B5%E5%85%83%E7%B4%A0%E6%8E%A5%E5%8F%A3/" class="md-nav__link">
        11-网页元素接口
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-JS-basic/readme/" class="md-nav__link">
        readme
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        网易云课堂笔记
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="网易云课堂笔记" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          网易云课堂笔记
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/02-v8%E5%BC%95%E6%93%8E%E5%9B%9E%E6%94%B6%E5%86%85%E5%AD%98%E7%AE%80%E4%BB%8B/" class="md-nav__link">
        02-v8引擎回收内存简介
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/03-node%E4%B8%8B%E9%9D%A2%E7%9A%84Restful%E5%AE%9E%E7%8E%B0/" class="md-nav__link">
        03-node下面的Restful实现
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/04-%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3%E7%9A%84%E6%8F%90%E5%8D%87%E2%80%94%E5%A6%82%E4%BD%95%E6%8F%90%E9%AB%98%E6%88%91%E4%BB%AC%E4%BB%A3%E7%A0%81%E7%9A%84%E5%8F%AF%E6%89%A9%E5%B1%95%E6%80%A7/" class="md-nav__link">
        04-编程思想的提升—如何提高我们代码的可扩展性
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/06-%E6%B5%8F%E8%A7%88%E5%99%A8%E6%B8%B2%E6%9F%93%E5%8E%9F%E7%90%86%E5%92%8Cssr/" class="md-nav__link">
        06-浏览器渲染原理和ssr
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/07-%E7%BD%91%E6%98%93%E7%9C%9F%E5%AE%9E%E9%A1%B9%E7%9B%AEwebpack%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90/" class="md-nav__link">
        07-网易真实项目webpack配置解析
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/08-%E4%BB%8E%E6%9E%B6%E6%9E%84%E5%88%86%E6%9E%90API%E5%B1%82/" class="md-nav__link">
        08-从架构分析API层
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/09-%E5%89%8D%E7%AB%AF%E8%B4%9F%E8%B4%A3%E4%BA%BA%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%86%85%E5%AE%B9/" class="md-nav__link">
        09-前端负责人的工作内容
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/10-%E5%88%86%E6%9E%90%E6%BA%90%E7%A0%81%E5%AD%A6%E6%9E%B6%E6%9E%84/" class="md-nav__link">
        10-分析源码学架构
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/11-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E9%AB%98%E8%B4%A8%E9%87%8F%E4%BB%A3%E7%A0%81/" class="md-nav__link">
        11-设计模式高质量代码
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/12-nodeJS%2BMongoDB%E7%99%BB%E5%BD%95%E7%B3%BB%E7%BB%9F/" class="md-nav__link">
        12-nodeJS+MongoDB登录系统
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/12-nodejs-mongodb-mongoose/" class="md-nav__link">
        12-nodejs-mongodb-mongoose
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/13-%E4%BD%BF%E7%94%A8VUE%E5%88%9B%E5%BB%BA%E7%BB%84%E4%BB%B6%EF%BC%88%E6%B2%A1%E5%AD%A6%E5%AE%8C%EF%BC%89/" class="md-nav__link">
        13-使用VUE创建组件（没学完）
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/16-%E6%9E%84%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6%E5%B7%A5%E5%85%B7/" class="md-nav__link">
        16-构建自己的脚手架工具
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/17-webpack%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/" class="md-nav__link">
        17-webpack编译原理分析
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/20-%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%8A%80%E8%83%BD-VUE%EF%BC%88%E6%B2%A1%E5%AD%A6%E5%AE%8C%EF%BC%89/" class="md-nav__link">
        20-组件封装的基本技能-VUE（没学完）
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/21-ssr/" class="md-nav__link">
        21-ssr
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/24-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E5%A6%82%E4%BD%95%E5%81%9A/" class="md-nav__link">
        24-单元测试如何做
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/25-%E5%9F%BA%E4%BA%8ENodeJS%E6%89%93%E9%80%A0Web%E6%9E%B6%E6%9E%84%E4%B8%AD%E9%97%B4%E5%B1%82/" class="md-nav__link">
        25-基于NodeJS打造Web架构中间层
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/26-webpack%E7%9A%84%E9%AB%98%E7%BA%A7%E6%8A%80%E5%B7%A7/" class="md-nav__link">
        26-webpack的高级技巧
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-netease-senior-frontend/readme/" class="md-nav__link">
        readme
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        开课吧笔记
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="开课吧笔记" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          开课吧笔记
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-kaikeba-frontend/01%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" class="md-nav__link">
        01 性能优化
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-kaikeba-frontend/02%20%E5%89%8D%E7%AB%AF%E6%B5%8B%E8%AF%95/" class="md-nav__link">
        02 前端测试
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-kaikeba-frontend/03%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" class="md-nav__link">
        03 设计模式
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-kaikeba-frontend/04%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" class="md-nav__link">
        04 数据结构与算法
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-kaikeba-frontend/05%20%E9%9D%A2%E8%AF%95%E9%A2%98/" class="md-nav__link">
        05 面试题
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-kaikeba-frontend/06%20%E9%9D%A2%E8%AF%95%E6%8A%80%E5%B7%A7/" class="md-nav__link">
        06 面试技巧
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        前端工程化笔记
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="前端工程化笔记" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          前端工程化笔记
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-jstraining-RYF/" class="md-nav__link">
        README
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-jstraining-RYF/engineering/" class="md-nav__link">
        engineering
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-jstraining-RYF/node/" class="md-nav__link">
        node
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-jstraining-RYF/preparation/" class="md-nav__link">
        preparation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-jstraining-RYF/react/" class="md-nav__link">
        react
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      <label class="md-nav__link" for="__nav_6">
        JS ES6 语法
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="JS ES6 语法" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          JS ES6 语法
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../readme/" class="md-nav__link">
        说明
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../01-%E4%BB%8B%E7%BB%8D/" class="md-nav__link">
        01-介绍
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../02-%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC/" class="md-nav__link">
        02-变量赋值
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../03-%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/" class="md-nav__link">
        03-解构赋值
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          04-字符串的扩展
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        04-字符串的扩展
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    模板字符串
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    案例：模板编译
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    标签模板
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    模板字符串的限制
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unicode" class="md-nav__link">
    Unicode 表示法
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    遍历器接口
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#u2028-u2029" class="md-nav__link">
    直接输入 U+2028 和 U+2029
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../05-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%96%B9%E6%B3%95/" class="md-nav__link">
        05-字符串方法
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../06-%E6%AD%A3%E5%88%99/" class="md-nav__link">
        06-正则
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../07-%E6%95%B0%E5%80%BC/" class="md-nav__link">
        07-数值
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../08-%E5%87%BD%E6%95%B0/" class="md-nav__link">
        08-函数
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../09-%E6%95%B0%E7%BB%84/" class="md-nav__link">
        09-数组
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../10-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E5%B1%9E%E6%80%A7/" class="md-nav__link">
        10-对象的新增属性
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../11-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95/" class="md-nav__link">
        11-对象的新增方法
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../12-Symbol/" class="md-nav__link">
        12-Symbol
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../13-Set%20%E5%92%8C%20Map%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" class="md-nav__link">
        13-Set 和 Map 数据结构
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../14-Proxy/" class="md-nav__link">
        14-Proxy
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../15-Reflect/" class="md-nav__link">
        15-Reflect
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../16-Promise/" class="md-nav__link">
        16-Promise
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../17-%E9%81%8D%E5%8E%86%E5%99%A8%E7%9A%84%E5%BE%AA%E7%8E%AF/" class="md-nav__link">
        17-遍历器的循环
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../18-Generator/" class="md-nav__link">
        18-Generator
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../19-Generator%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8/" class="md-nav__link">
        19-Generator异步应用
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../20-async%20%E5%87%BD%E6%95%B0/" class="md-nav__link">
        20-async 函数
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../21-Class%20%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/" class="md-nav__link">
        21-Class 的基本语法
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../22-Class%20%E7%9A%84%E7%BB%A7%E6%89%BF/" class="md-nav__link">
        22-Class 的继承
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../23-Module%20%E7%9A%84%E8%AF%AD%E6%B3%95/" class="md-nav__link">
        23-Module 的语法
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../24-Module%20%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%AE%9E%E7%8E%B0/" class="md-nav__link">
        24-Module 的加载实现
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../25-%E7%BC%96%E7%A8%8B%E9%A3%8E%E6%A0%BC/" class="md-nav__link">
        25-编程风格
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      <label class="md-nav__link" for="__nav_7">
        Javascript 高级教程
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Javascript 高级教程" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Javascript 高级教程
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../book-JS-primer-code-design/11-choose/" class="md-nav__link">
        11-choose
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../book-JS-primer-code-design/22-%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95/" class="md-nav__link">
        22-高级用法
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../book-JS-primer-code-design/24-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/" class="md-nav__link">
        24-最佳实践
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../book-JS-primer-code-design/readme/" class="md-nav__link">
        readme
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      <label class="md-nav__link" for="__nav_8">
        其他书籍
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="其他书籍" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          其他书籍
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../book-JS-The-good-parts/JS-the-good-parts/" class="md-nav__link">
        JS-the-good-parts
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../book-JS-The-good-parts/curry-function/" class="md-nav__link">
        curry-function
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ebook-javascript-secret-garden/JavaScript%20%E7%A7%98%E5%AF%86%E8%8A%B1%E5%9B%AD-zh/" class="md-nav__link">
        JavaScript 秘密花园
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    模板字符串
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    案例：模板编译
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    标签模板
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    模板字符串的限制
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unicode" class="md-nav__link">
    Unicode 表示法
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    遍历器接口
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#u2028-u2029" class="md-nav__link">
    直接输入 U+2028 和 U+2029
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/Michael18811380328/Michael18811380328.github.io/edit/master/docs/ebook-JSES6-RYF/04-字符串的扩展.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="_1">字符串扩展<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<h2 id="_2">模板字符串<img alt="🅰" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/1f170.png" title=":a:" /><a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>ES6 引入了模板字符串解决了字符串拼接。模板字符串是增强版的字符串，用反引号（`）标识。它可以当作普通字符串使用，也可以用来定义多行字符串，或者在字符串中嵌入变量。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// 普通字符串</span>
<span class="sb">`In JavaScript &#39;</span><span class="err">\</span><span class="sb">n&#39; is a line-feed.`</span>

<span class="c1">// 多行字符串</span>
<span class="sb">`In JavaScript this is</span>
<span class="sb"> not legal.`</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`string text line 1</span>
<span class="sb">string text line 2`</span><span class="p">);</span>

<span class="c1">// 模板字符串中嵌入变量，需要将变量名写在${}之中。</span>
<span class="kd">let</span> <span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;Bob&quot;</span><span class="p">,</span> <span class="nx">time</span> <span class="o">=</span> <span class="s2">&quot;today&quot;</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">str</span> <span class="o">=</span> <span class="sb">`Hello </span><span class="si">${</span><span class="nx">name</span><span class="si">}</span><span class="sb">, how are you </span><span class="si">${</span><span class="nx">time</span><span class="si">}</span><span class="sb">?`</span><span class="p">;</span>
</code></pre></div>
<p>上面代码中的模板字符串，都是用反引号表示。如果在模板字符串中需要使用反引号，则前面要用反斜杠转义。</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nx">greeting</span> <span class="o">=</span> <span class="sb">`\`Yo\` World!`</span><span class="p">;</span>
</code></pre></div>
<p>如果使用模板字符串表示多行字符串，所有的空格和缩进都会被保留在输出之中。</p>
<div class="highlight"><pre><span></span><code><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#list&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="sb">`</span>
<span class="sb">&lt;ul&gt;</span>
<span class="sb">  &lt;li&gt;first&lt;/li&gt;</span>
<span class="sb">  &lt;li&gt;second&lt;/li&gt;</span>
<span class="sb">&lt;/ul&gt;</span>
<span class="sb">`</span><span class="p">);</span>
</code></pre></div>
<p>上面代码中，所有模板字符串的空格和换行，都是被保留的，比如<code>&lt;ul&gt;</code>标签前面会有一个换行。如果你不想要这个换行，可以使用<code>trim</code>方法消除它。</p>
<div class="highlight"><pre><span></span><code><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#list&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="sb">`</span>
<span class="sb">&lt;ul&gt;</span>
<span class="sb">  &lt;li&gt;first&lt;/li&gt;</span>
<span class="sb">  &lt;li&gt;second&lt;/li&gt;</span>
<span class="sb">&lt;/ul&gt;</span>
<span class="sb">`</span><span class="p">.</span><span class="nx">trim</span><span class="p">());</span>
</code></pre></div>
<p>大括号内部可以放入任意的 JavaScript 表达式，可以进行运算，以及引用对象属性。</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nx">x</span> <span class="o">=</span> <span class="mf">1</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">y</span> <span class="o">=</span> <span class="mf">2</span><span class="p">;</span>

<span class="sb">`</span><span class="si">${</span><span class="nx">x</span><span class="si">}</span><span class="sb"> + </span><span class="si">${</span><span class="nx">y</span><span class="si">}</span><span class="sb"> = </span><span class="si">${</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="si">}</span><span class="sb">`</span>
<span class="c1">// &quot;1 + 2 = 3&quot;</span>

<span class="sb">`</span><span class="si">${</span><span class="nx">x</span><span class="si">}</span><span class="sb"> + </span><span class="si">${</span><span class="nx">y</span> <span class="o">*</span> <span class="mf">2</span><span class="si">}</span><span class="sb"> = </span><span class="si">${</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span> <span class="o">*</span> <span class="mf">2</span><span class="si">}</span><span class="sb">`</span>
<span class="c1">// &quot;1 + 4 = 5&quot;</span>

<span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span><span class="nx">x</span><span class="o">:</span> <span class="mf">1</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="mf">2</span><span class="p">};</span>
<span class="sb">`</span><span class="si">${</span><span class="nx">obj</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">y</span><span class="si">}</span><span class="sb">`</span>
<span class="c1">// &quot;3&quot;</span>
</code></pre></div>
<p>模板字符串之中还能调用函数。</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span> <span class="nx">fn</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s2">&quot;Hello World&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="sb">`foo </span><span class="si">${</span><span class="nx">fn</span><span class="p">()</span><span class="si">}</span><span class="sb"> bar`</span>
<span class="c1">// foo Hello World bar</span>
</code></pre></div>
<p>如果大括号中的值不是字符串，将按照一般的规则转为字符串。比如，大括号中是一个对象，将默认调用对象的<code>toString</code>方法。</p>
<p>由于模板字符串的大括号内部，就是执行 JavaScript 代码，因此如果大括号内部是一个字符串，将会原样输出。</p>
<div class="highlight"><pre><span></span><code><span class="sb">`Hello </span><span class="si">${</span><span class="s1">&#39;World&#39;</span><span class="si">}</span><span class="sb">`</span>
<span class="c1">// &quot;Hello World&quot;</span>
</code></pre></div>
<p>模板字符串还能嵌套。</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">tmpl</span> <span class="o">=</span> <span class="nx">addrs</span> <span class="p">=&gt;</span> <span class="sb">`</span>
<span class="sb">  &lt;table&gt;</span>
<span class="sb">  </span><span class="si">${</span><span class="nx">addrs</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">addr</span> <span class="p">=&gt;</span> <span class="sb">`</span>
<span class="sb">    &lt;tr&gt;&lt;td&gt;</span><span class="si">${</span><span class="nx">addr</span><span class="p">.</span><span class="nx">first</span><span class="si">}</span><span class="sb">&lt;/td&gt;&lt;/tr&gt;</span>
<span class="sb">    &lt;tr&gt;&lt;td&gt;</span><span class="si">${</span><span class="nx">addr</span><span class="p">.</span><span class="nx">last</span><span class="si">}</span><span class="sb">&lt;/td&gt;&lt;/tr&gt;</span>
<span class="sb">  `</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}</span><span class="sb"></span>
<span class="sb">  &lt;/table&gt;</span>
<span class="sb">`</span><span class="p">;</span>
</code></pre></div>
<p>如果需要引用模板字符串本身，在需要时执行，可以写成函数。</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nx">func</span> <span class="o">=</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="sb">`Hello </span><span class="si">${</span><span class="nx">name</span><span class="si">}</span><span class="sb">!`</span><span class="p">;</span>
<span class="nx">func</span><span class="p">(</span><span class="s1">&#39;Jack&#39;</span><span class="p">)</span> <span class="c1">// &quot;Hello Jack!&quot;</span>
</code></pre></div>
<p>上面代码中，模板字符串写成了一个函数的返回值。执行这个函数，就相当于执行这个模板字符串了。</p>
<h2 id="_3">案例：模板编译<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<p>下面，我们来看一个通过模板字符串，生成正式模板的实例。</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nx">template</span> <span class="o">=</span> <span class="sb">`</span>
<span class="sb">&lt;ul&gt;</span>
<span class="sb">  &lt;% for(let i=0; i &lt; data.supplies.length; i++) { %&gt;</span>
<span class="sb">    &lt;li&gt;&lt;%= data.supplies[i] %&gt;&lt;/li&gt;</span>
<span class="sb">  &lt;% } %&gt;</span>
<span class="sb">&lt;/ul&gt;</span>
<span class="sb">`</span><span class="p">;</span>
</code></pre></div>
<p>上面代码在模板字符串之中，放置了一个常规模板。该模板使用<code>&lt;%...%&gt;</code>放置 JavaScript 代码，使用<code>&lt;%= ... %&gt;</code>输出 JavaScript 表达式。</p>
<p>怎么编译这个模板字符串呢？</p>
<p>一种思路是将其转换为 JavaScript 表达式字符串。</p>
<div class="highlight"><pre><span></span><code>echo<span class="o">(</span><span class="s1">&#39;&lt;ul&gt;&#39;</span><span class="o">)</span><span class="p">;</span>
<span class="k">for</span><span class="o">(</span><span class="nb">let</span> <span class="nv">i</span><span class="o">=</span><span class="m">0</span><span class="p">;</span> i &lt; data.supplies.length<span class="p">;</span> i++<span class="o">)</span> <span class="o">{</span>
  echo<span class="o">(</span><span class="s1">&#39;&lt;li&gt;&#39;</span><span class="o">)</span><span class="p">;</span>
  echo<span class="o">(</span>data.supplies<span class="o">[</span>i<span class="o">])</span><span class="p">;</span>
  echo<span class="o">(</span><span class="s1">&#39;&lt;/li&gt;&#39;</span><span class="o">)</span><span class="p">;</span>
<span class="o">}</span><span class="p">;</span>
echo<span class="o">(</span><span class="s1">&#39;&lt;/ul&gt;&#39;</span><span class="o">)</span><span class="p">;</span>
</code></pre></div>
<p>这个转换使用正则表达式就行了。</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nx">evalExpr</span> <span class="o">=</span> <span class="sr">/&lt;%=(.+?)%&gt;/g</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">expr</span> <span class="o">=</span> <span class="sr">/&lt;%([\s\S]+?)%&gt;/g</span><span class="p">;</span>

<span class="nx">template</span> <span class="o">=</span> <span class="nx">template</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">evalExpr</span><span class="p">,</span> <span class="s1">&#39;`); \n  echo( $1 ); \n  echo(`&#39;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="nx">expr</span><span class="p">,</span> <span class="s1">&#39;`); \n $1 \n  echo(`&#39;</span><span class="p">);</span>
<span class="nx">template</span> <span class="o">=</span> <span class="s1">&#39;echo(`&#39;</span> <span class="o">+</span> <span class="nx">template</span> <span class="o">+</span> <span class="s1">&#39;`);&#39;</span><span class="p">;</span>
</code></pre></div>
<p>然后，将<code>template</code>封装在一个函数里面返回，就可以了。</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nx">script</span> <span class="o">=</span>
<span class="sb">`(function parse(data){</span>
<span class="sb">  let output = &quot;&quot;;</span>

<span class="sb">  function echo(html){</span>
<span class="sb">    output += html;</span>
<span class="sb">  }</span>

<span class="sb">  </span><span class="si">${</span> <span class="nx">template</span> <span class="si">}</span><span class="sb"></span>

<span class="sb">  return output;</span>
<span class="sb">})`</span><span class="p">;</span>

<span class="k">return</span> <span class="nx">script</span><span class="p">;</span>
</code></pre></div>
<p>将上面的内容拼装成一个模板编译函数<code>compile</code>。</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span> <span class="nx">compile</span><span class="p">(</span><span class="nx">template</span><span class="p">){</span>
  <span class="kd">const</span> <span class="nx">evalExpr</span> <span class="o">=</span> <span class="sr">/&lt;%=(.+?)%&gt;/g</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">expr</span> <span class="o">=</span> <span class="sr">/&lt;%([\s\S]+?)%&gt;/g</span><span class="p">;</span>

  <span class="nx">template</span> <span class="o">=</span> <span class="nx">template</span>
    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">evalExpr</span><span class="p">,</span> <span class="s1">&#39;`); \n  echo( $1 ); \n  echo(`&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">expr</span><span class="p">,</span> <span class="s1">&#39;`); \n $1 \n  echo(`&#39;</span><span class="p">);</span>

  <span class="nx">template</span> <span class="o">=</span> <span class="s1">&#39;echo(`&#39;</span> <span class="o">+</span> <span class="nx">template</span> <span class="o">+</span> <span class="s1">&#39;`);&#39;</span><span class="p">;</span>

  <span class="kd">let</span> <span class="nx">script</span> <span class="o">=</span>
  <span class="sb">`(function parse(data){</span>
<span class="sb">    let output = &quot;&quot;;</span>

<span class="sb">    function echo(html){</span>
<span class="sb">      output += html;</span>
<span class="sb">    }</span>

<span class="sb">    </span><span class="si">${</span> <span class="nx">template</span> <span class="si">}</span><span class="sb"></span>

<span class="sb">    return output;</span>
<span class="sb">  })`</span><span class="p">;</span>

  <span class="k">return</span> <span class="nx">script</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p><code>compile</code>函数的用法如下。</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nx">parse</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="nx">compile</span><span class="p">(</span><span class="nx">template</span><span class="p">));</span>
<span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">parse</span><span class="p">({</span> <span class="nx">supplies</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;broom&quot;</span><span class="p">,</span> <span class="s2">&quot;mop&quot;</span><span class="p">,</span> <span class="s2">&quot;cleaner&quot;</span> <span class="p">]</span> <span class="p">});</span>
<span class="c1">//   &lt;ul&gt;</span>
<span class="c1">//     &lt;li&gt;broom&lt;/li&gt;</span>
<span class="c1">//     &lt;li&gt;mop&lt;/li&gt;</span>
<span class="c1">//     &lt;li&gt;cleaner&lt;/li&gt;</span>
<span class="c1">//   &lt;/ul&gt;</span>
</code></pre></div>
<h2 id="_4">标签模板<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<p>模板字符串的功能，不仅仅是上面这些。它可以紧跟在一个函数名后面，该函数将被调用来处理这个模板字符串。这被称为“标签模板”功能（tagged template）。</p>
<div class="highlight"><pre><span></span><code><span class="nx">alert</span><span class="sb">`123`</span>
<span class="c1">// 等同于</span>
<span class="nx">alert</span><span class="p">(</span><span class="mf">123</span><span class="p">)</span>
</code></pre></div>
<p>标签模板其实不是模板，而是函数调用的一种特殊形式。“标签”指的就是函数，紧跟在后面的模板字符串就是它的参数。</p>
<p>但是，如果模板字符里面有变量，就不是简单的调用了，而是会将模板字符串先处理成多个参数，再调用函数。</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nx">a</span> <span class="o">=</span> <span class="mf">5</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">b</span> <span class="o">=</span> <span class="mf">10</span><span class="p">;</span>

<span class="nx">tag</span><span class="sb">`Hello </span><span class="si">${</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span> <span class="si">}</span><span class="sb"> world </span><span class="si">${</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">b</span> <span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<span class="c1">// 等同于</span>
<span class="nx">tag</span><span class="p">([</span><span class="s1">&#39;Hello &#39;</span><span class="p">,</span> <span class="s1">&#39; world &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">],</span> <span class="mf">15</span><span class="p">,</span> <span class="mf">50</span><span class="p">);</span>
</code></pre></div>
<p>上面代码中，模板字符串前面有一个标识名<code>tag</code>，它是一个函数。整个表达式的返回值，就是<code>tag</code>函数处理模板字符串后的返回值。</p>
<p>函数<code>tag</code>依次会接收到多个参数。</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span> <span class="nx">tag</span><span class="p">(</span><span class="nx">stringArr</span><span class="p">,</span> <span class="nx">value1</span><span class="p">,</span> <span class="nx">value2</span><span class="p">){</span>
  <span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// 等同于</span>

<span class="kd">function</span> <span class="nx">tag</span><span class="p">(</span><span class="nx">stringArr</span><span class="p">,</span> <span class="p">...</span><span class="nx">values</span><span class="p">){</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>
<p><code>tag</code>函数的第一个参数是一个数组，该数组的成员是模板字符串中那些没有变量替换的部分，也就是说，变量替换只发生在数组的第一个成员与第二个成员之间、第二个成员与第三个成员之间，以此类推。</p>
<p><code>tag</code>函数的其他参数，都是模板字符串各个变量被替换后的值。由于本例中，模板字符串含有两个变量，因此<code>tag</code>会接受到<code>value1</code>和<code>value2</code>两个参数。</p>
<p><code>tag</code>函数所有参数的实际值如下。</p>
<ul>
<li>第一个参数：<code>['Hello ', ' world ', '']</code></li>
<li>第二个参数: 15</li>
<li>第三个参数：50</li>
</ul>
<p>也就是说，<code>tag</code>函数实际上以下面的形式调用。</p>
<div class="highlight"><pre><span></span><code><span class="nx">tag</span><span class="p">([</span><span class="s1">&#39;Hello &#39;</span><span class="p">,</span> <span class="s1">&#39; world &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">],</span> <span class="mf">15</span><span class="p">,</span> <span class="mf">50</span><span class="p">)</span>
</code></pre></div>
<p>我们可以按照需要编写<code>tag</code>函数的代码。下面是<code>tag</code>函数的一种写法，以及运行结果。</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nx">a</span> <span class="o">=</span> <span class="mf">5</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">b</span> <span class="o">=</span> <span class="mf">10</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">tag</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="nx">v1</span><span class="p">,</span> <span class="nx">v2</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">s</span><span class="p">[</span><span class="mf">0</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">s</span><span class="p">[</span><span class="mf">1</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">s</span><span class="p">[</span><span class="mf">2</span><span class="p">]);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">v1</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">v2</span><span class="p">);</span>

  <span class="k">return</span> <span class="s2">&quot;OK&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">tag</span><span class="sb">`Hello </span><span class="si">${</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span> <span class="si">}</span><span class="sb"> world </span><span class="si">${</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">b</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<span class="c1">// &quot;Hello &quot;</span>
<span class="c1">// &quot; world &quot;</span>
<span class="c1">// &quot;&quot;</span>
<span class="c1">// 15</span>
<span class="c1">// 50</span>
<span class="c1">// &quot;OK&quot;</span>
</code></pre></div>
<p>下面是一个更复杂的例子。</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nx">total</span> <span class="o">=</span> <span class="mf">30</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">msg</span> <span class="o">=</span> <span class="nx">passthru</span><span class="sb">`The total is </span><span class="si">${</span><span class="nx">total</span><span class="si">}</span><span class="sb"> (</span><span class="si">${</span><span class="nx">total</span><span class="o">*</span><span class="mf">1.05</span><span class="si">}</span><span class="sb"> with tax)`</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">passthru</span><span class="p">(</span><span class="nx">literals</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span>

  <span class="k">while</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">literals</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">result</span> <span class="o">+=</span> <span class="nx">literals</span><span class="p">[</span><span class="nx">i</span><span class="o">++</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">result</span> <span class="o">+=</span> <span class="nx">arguments</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">msg</span> <span class="c1">// &quot;The total is 30 (31.5 with tax)&quot;</span>
</code></pre></div>
<p>上面这个例子展示了，如何将各个参数按照原来的位置拼合回去。</p>
<p><code>passthru</code>函数采用 rest 参数的写法如下。</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span> <span class="nx">passthru</span><span class="p">(</span><span class="nx">literals</span><span class="p">,</span> <span class="p">...</span><span class="nx">values</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">output</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">index</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="nx">index</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span> <span class="nx">index</span> <span class="o">&lt;</span> <span class="nx">values</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">index</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">output</span> <span class="o">+=</span> <span class="nx">literals</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="o">+</span> <span class="nx">values</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
  <span class="p">}</span>

  <span class="nx">output</span> <span class="o">+=</span> <span class="nx">literals</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span>
  <span class="k">return</span> <span class="nx">output</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>“标签模板”的一个重要应用，就是过滤 HTML 字符串，防止用户输入恶意内容。</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nx">message</span> <span class="o">=</span>
  <span class="nx">SaferHTML</span><span class="sb">`&lt;p&gt;</span><span class="si">${</span><span class="nx">sender</span><span class="si">}</span><span class="sb"> has sent you a message.&lt;/p&gt;`</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">SaferHTML</span><span class="p">(</span><span class="nx">templateData</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">s</span> <span class="o">=</span> <span class="nx">templateData</span><span class="p">[</span><span class="mf">0</span><span class="p">];</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mf">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">arg</span> <span class="o">=</span> <span class="nb">String</span><span class="p">(</span><span class="nx">arguments</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>

    <span class="c1">// Escape special characters in the substitution.</span>
    <span class="nx">s</span> <span class="o">+=</span> <span class="nx">arg</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&amp;/g</span><span class="p">,</span> <span class="s2">&quot;&amp;amp;&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&lt;/g</span><span class="p">,</span> <span class="s2">&quot;&amp;lt;&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&gt;/g</span><span class="p">,</span> <span class="s2">&quot;&amp;gt;&quot;</span><span class="p">);</span>

    <span class="c1">// Don&#39;t escape special characters in the template.</span>
    <span class="nx">s</span> <span class="o">+=</span> <span class="nx">templateData</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">s</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>上面代码中，<code>sender</code>变量往往是用户提供的，经过<code>SaferHTML</code>函数处理，里面的特殊字符都会被转义。</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nx">sender</span> <span class="o">=</span> <span class="s1">&#39;&lt;script&gt;alert(&quot;abc&quot;)&lt;/script&gt;&#39;</span><span class="p">;</span> <span class="c1">// 恶意代码</span>
<span class="kd">let</span> <span class="nx">message</span> <span class="o">=</span> <span class="nx">SaferHTML</span><span class="sb">`&lt;p&gt;</span><span class="si">${</span><span class="nx">sender</span><span class="si">}</span><span class="sb"> has sent you a message.&lt;/p&gt;`</span><span class="p">;</span>

<span class="nx">message</span>
<span class="c1">// &lt;p&gt;&amp;lt;script&amp;gt;alert(&quot;abc&quot;)&amp;lt;/script&amp;gt; has sent you a message.&lt;/p&gt;</span>
</code></pre></div>
<p>标签模板的另一个应用，就是多语言转换（国际化处理）。</p>
<div class="highlight"><pre><span></span><code><span class="nx">i18n</span><span class="sb">`Welcome to </span><span class="si">${</span><span class="nx">siteName</span><span class="si">}</span><span class="sb">, you are visitor number </span><span class="si">${</span><span class="nx">visitorNumber</span><span class="si">}</span><span class="sb">!`</span>
<span class="c1">// &quot;欢迎访问xxx，您是第xxxx位访问者！&quot;</span>
</code></pre></div>
<p>模板字符串本身并不能取代 Mustache 之类的模板库，因为没有条件判断和循环处理功能，但是通过标签函数，你可以自己添加这些功能。</p>
<div class="highlight"><pre><span></span><code><span class="c1">// 下面的hashTemplate函数</span>
<span class="c1">// 是一个自定义的模板处理函数</span>
<span class="kd">let</span> <span class="nx">libraryHtml</span> <span class="o">=</span> <span class="nx">hashTemplate</span><span class="sb">`</span>
<span class="sb">  &lt;ul&gt;</span>
<span class="sb">    #for book in </span><span class="si">${</span><span class="nx">myBooks</span><span class="si">}</span><span class="sb"></span>
<span class="sb">      &lt;li&gt;&lt;i&gt;#{book.title}&lt;/i&gt; by #{book.author}&lt;/li&gt;</span>
<span class="sb">    #end</span>
<span class="sb">  &lt;/ul&gt;</span>
<span class="sb">`</span><span class="p">;</span>
</code></pre></div>
<p>除此之外，你甚至可以使用标签模板，在 JavaScript 语言之中嵌入其他语言。</p>
<div class="highlight"><pre><span></span><code>&lt;div&gt;
  &lt;input
    ref=&#39;input&#39;
    onChange=&#39;${this.handleChange}&#39;
    defaultValue=&#39;${this.state.value}&#39; /&gt;
  ${this.state.value}
&lt;/div&gt;
</code></pre></div>
<p>上面的代码通过<code>jsx</code>函数，将一个 DOM 字符串转为 React 对象。你可以在 GitHub 找到<code>jsx</code>函数的<a href="https://gist.github.com/lygaret/a68220defa69174bdec5">具体实现</a>。</p>
<p>下面则是一个假想的例子，通过<code>java</code>函数，在 JavaScript 代码之中运行 Java 代码。</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span> <span class="nc">HelloWorldApp</span> <span class="p">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Hello World!&quot;</span><span class="p">);</span> <span class="c1">// Display the string.</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="n">HelloWorldApp</span><span class="p">.</span><span class="na">main</span><span class="p">();</span>
</code></pre></div>
<p>模板处理函数的第一个参数（模板字符串数组），还有一个<code>raw</code>属性。</p>
<div class="highlight"><pre><span></span><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="sb">`123`</span>
<span class="c1">// [&quot;123&quot;, raw: Array[1]]</span>
</code></pre></div>
<p>上面代码中，<code>console.log</code>接受的参数，实际上是一个数组。该数组有一个<code>raw</code>属性，保存的是转义后的原字符串。</p>
<p>请看下面的例子。</p>
<div class="highlight"><pre><span></span><code><span class="nx">tag</span><span class="sb">`First line</span><span class="err">\</span><span class="sb">nSecond line`</span>

<span class="kd">function</span> <span class="nx">tag</span><span class="p">(</span><span class="nx">strings</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">strings</span><span class="p">.</span><span class="nx">raw</span><span class="p">[</span><span class="mf">0</span><span class="p">]);</span>
  <span class="c1">// strings.raw[0] 为 &quot;First line\\nSecond line&quot;</span>
  <span class="c1">// 打印输出 &quot;First line\nSecond line&quot;</span>
<span class="p">}</span>
</code></pre></div>
<p>上面代码中，<code>tag</code>函数的第一个参数<code>strings</code>，有一个<code>raw</code>属性，也指向一个数组。该数组的成员与<code>strings</code>数组完全一致。比如，<code>strings</code>数组是<code>["First line\nSecond line"]</code>，那么<code>strings.raw</code>数组就是<code>["First line\\nSecond line"]</code>。两者唯一的区别，就是字符串里面的斜杠都被转义了。比如，strings.raw 数组会将<code>\n</code>视为<code>\\</code>和<code>n</code>两个字符，而不是换行符。这是为了方便取得转义之前的原始模板而设计的。</p>
<h2 id="_5">模板字符串的限制<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<p>前面提到标签模板里面，可以内嵌其他语言。但是，模板字符串默认会将字符串转义，导致无法嵌入其他语言。</p>
<p>举例来说，标签模板里面可以嵌入 LaTEX 语言。</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span> <span class="nx">latex</span><span class="p">(</span><span class="nx">strings</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nb">document</span> <span class="o">=</span> <span class="nx">latex</span><span class="sb">`</span>
<span class="err">\</span><span class="sb">newcommand{</span><span class="err">\</span><span class="sb">fun}{</span><span class="err">\</span><span class="sb">textbf{Fun!}}  // 正常工作</span>
<span class="err">\</span><span class="sb">newcommand{</span><span class="err">\</span><span class="sb">unicode}{</span><span class="err">\</span><span class="sb">textbf{Unicode!}} // 报错</span>
<span class="err">\</span><span class="sb">newcommand{</span><span class="err">\</span><span class="sb">xerxes}{</span><span class="err">\</span><span class="sb">textbf{King!}} // 报错</span>

<span class="sb">Breve over the h goes </span><span class="err">\</span><span class="sb">u{h}ere // 报错</span>
<span class="sb">`</span>
</code></pre></div>
<p>上面代码中，变量<code>document</code>内嵌的模板字符串，对于 LaTEX 语言来说完全是合法的，但是 JavaScript 引擎会报错。原因就在于字符串的转义。</p>
<p>模板字符串会将<code>\u00FF</code>和<code>\u{42}</code>当作 Unicode 字符进行转义，所以<code>\unicode</code>解析时报错；而<code>\x56</code>会被当作十六进制字符串转义，所以<code>\xerxes</code>会报错。也就是说，<code>\u</code>和<code>\x</code>在 LaTEX 里面有特殊含义，但是 JavaScript 将它们转义了。</p>
<p>为了解决这个问题，ES2018 <a href="https://tc39.github.io/proposal-template-literal-revision/">放松</a>了对标签模板里面的字符串转义的限制。如果遇到不合法的字符串转义，就返回<code>undefined</code>，而不是报错，并且从<code>raw</code>属性上面可以得到原始字符串。</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span> <span class="nx">tag</span><span class="p">(</span><span class="nx">strs</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">strs</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">===</span> <span class="kc">undefined</span>
  <span class="nx">strs</span><span class="p">.</span><span class="nx">raw</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;\\unicode and \\u{55}&quot;</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">tag</span><span class="sb">`</span><span class="err">\</span><span class="sb">unicode and </span><span class="err">\</span><span class="sb">u{55}`</span>
</code></pre></div>
<p>上面代码中，模板字符串原本是应该报错的，但是由于放松了对字符串转义的限制，所以不报错了，JavaScript 引擎将第一个字符设置为<code>undefined</code>，但是<code>raw</code>属性依然可以得到原始字符串，因此<code>tag</code>函数还是可以对原字符串进行处理。</p>
<p>注意，这种对字符串转义的放松，只在标签模板解析字符串时生效，不是标签模板的场合，依然会报错。</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nx">bad</span> <span class="o">=</span> <span class="sb">`bad escape sequence: </span><span class="err">\</span><span class="sb">unicode`</span><span class="p">;</span> <span class="c1">// 报错</span>
</code></pre></div>
<h2 id="unicode">Unicode 表示法<a class="headerlink" href="#unicode" title="Permanent link">&para;</a></h2>
<p>使用不多：ES6 加强了对 Unicode 的支持，允许采用<code>\uxxxx</code>形式表示一个字符，其中<code>xxxx</code>表示字符的 Unicode 码点。</p>
<div class="highlight"><pre><span></span><code><span class="s2">&quot;\u0061&quot;</span>
<span class="c1">// &quot;a&quot;</span>

<span class="c1">// 对于后面的符号超过unicode编码，需要将符号使用大括号括起来</span>
<span class="s2">&quot;\u{20BB7}&quot;</span>
<span class="c1">// &quot;𠮷&quot;</span>

<span class="s2">&quot;\u{41}\u{42}\u{43}&quot;</span>
<span class="c1">// &quot;ABC&quot;</span>

<span class="kd">let</span> <span class="nx">hello</span> <span class="o">=</span> <span class="mf">123</span><span class="p">;</span>
<span class="nx">hell</span><span class="err">\</span><span class="nx">u</span><span class="p">{</span><span class="mf">6</span><span class="nx">F</span><span class="p">}</span> <span class="c1">// 123</span>
</code></pre></div>
<p>ES6 JavaScript 共有 6 种方法可以表示一个字符。</p>
<div class="highlight"><pre><span></span><code><span class="s1">&#39;\z&#39;</span> <span class="o">===</span> <span class="s1">&#39;z&#39;</span>  <span class="c1">// true</span>
<span class="s1">&#39;\172&#39;</span> <span class="o">===</span> <span class="s1">&#39;z&#39;</span> <span class="c1">// true</span>
<span class="s1">&#39;\x7A&#39;</span> <span class="o">===</span> <span class="s1">&#39;z&#39;</span> <span class="c1">// true</span>
<span class="s1">&#39;\u007A&#39;</span> <span class="o">===</span> <span class="s1">&#39;z&#39;</span> <span class="c1">// true</span>
<span class="s1">&#39;\u{7A}&#39;</span> <span class="o">===</span> <span class="s1">&#39;z&#39;</span> <span class="c1">// true</span>
</code></pre></div>
<h2 id="_6">遍历器接口<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h2>
<p>ES6 为字符串添加了遍历器接口，使得字符串可以被<code>for...of</code>循环遍历。</p>
<div class="highlight"><pre><span></span><code><span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">codePoint</span> <span class="k">of</span> <span class="s1">&#39;foo&#39;</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">codePoint</span><span class="p">)</span>
<span class="p">}</span>
<span class="c1">// &quot;f&quot;</span>
<span class="c1">// &quot;o&quot;</span>
<span class="c1">// &quot;o&quot;</span>
</code></pre></div>
<p>除了遍历字符串，这个遍历器最大的优点是可以识别大于<code>0xFFFF</code>的码点，传统的<code>for</code>循环无法识别这样的码点。</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span> <span class="nx">text</span> <span class="o">=</span> <span class="nb">String</span><span class="p">.</span><span class="nx">fromCodePoint</span><span class="p">(</span><span class="mh">0x20BB7</span><span class="p">);</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="k">of</span> <span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// &quot;𠮷&quot;</span>
</code></pre></div>
<h2 id="u2028-u2029">直接输入 U+2028 和 U+2029<a class="headerlink" href="#u2028-u2029" title="Permanent link">&para;</a></h2>
<p>JavaScript 字符串允许直接输入字符，以及输入字符的转义形式。举例来说，“中”的 Unicode 码点是 U+4e2d，你可以直接在字符串里面输入这个汉字，也可以输入它的转义形式<code>\u4e2d</code>，两者是等价的。</p>
<div class="highlight"><pre><span></span><code><span class="s1">&#39;中&#39;</span> <span class="o">===</span> <span class="s1">&#39;\u4e2d&#39;</span> <span class="c1">// true</span>
</code></pre></div>
<p>但是，JavaScript 规定有5个字符，不能在字符串里面直接使用，只能使用转义形式。</p>
<ul>
<li>U+005C：反斜杠（reverse solidus)</li>
<li>U+000D：回车（carriage return）</li>
<li>U+2028：行分隔符（line separator）</li>
<li>U+2029：段分隔符（paragraph separator）</li>
<li>U+000A：换行符（line feed）</li>
</ul>
<p>举例来说，字符串里面不能直接包含反斜杠，一定要转义写成<code>\\</code>或者<code>\u005c</code>。</p>
<p>这个规定本身没有问题，麻烦在于 JSON 格式允许字符串里面直接使用 U+2028（行分隔符）和 U+2029（段分隔符）。这样一来，<mark>服务器输出的 JSON 被<code>JSON.parse</code>解析，就有可能直接报错</mark>。</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">json</span> <span class="o">=</span> <span class="s1">&#39;&quot;\u2028&quot;&#39;</span><span class="p">;</span>
<span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">json</span><span class="p">);</span> <span class="c1">// 可能报错</span>
</code></pre></div>
<p>JSON 格式已经冻结（RFC 7159），没法修改了。为了消除这个报错，<a href="https://github.com/tc39/proposal-json-superset">ES2019</a> 允许 JavaScript 字符串直接输入 U+2028（行分隔符）和 U+2029（段分隔符）。根据这个提案，上面的代码不会报错。</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">PS</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="s2">&quot;&#39;\u2029&#39;&quot;</span><span class="p">);</span>
</code></pre></div>
<p>注意，模板字符串现在就允许直接输入这两个字符。另外，正则表达式依然不允许直接输入这两个字符，这是没有问题的，因为 JSON 本来就不允许直接包含正则表达式。</p>
<p>根据标准，JSON 数据必须是 UTF-8 编码。但是，现在的<code>JSON.stringify()</code>方法有可能返回不符合 UTF-8 标准的字符串。</p>
<p>具体来说，UTF-8 标准规定，<code>0xD800</code>到<code>0xDFFF</code>之间的码点，不能单独使用，必须配对使用。比如，<code>\uD834\uDF06</code>是两个码点，但是必须放在一起配对使用，代表字符<code>𝌆</code>。这是为了表示码点大于<code>0xFFFF</code>的字符的一种变通方法。单独使用<code>\uD834</code>和<code>\uDFO6</code>这两个码点是不合法的，或者颠倒顺序也不行，因为<code>\uDF06\uD834</code>并没有对应的字符。</p>
<p><code>JSON.stringify()</code>的问题在于，它可能返回<code>0xD800</code>到<code>0xDFFF</code>之间的单个码点。</p>
<div class="highlight"><pre><span></span><code><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="s1">&#39;\u{D834}&#39;</span><span class="p">)</span> <span class="c1">// &quot;\u{D834}&quot;</span>
</code></pre></div>
<p>为了确保返回的是合法的 UTF-8 字符，<a href="https://github.com/tc39/proposal-well-formed-stringify">ES2019</a> 改变了<code>JSON.stringify()</code>的行为。如果遇到<code>0xD800</code>到<code>0xDFFF</code>之间的单个码点，或者不存在的配对形式，它会返回转义字符串，留给应用自己决定下一步的处理。</p>
<div class="highlight"><pre><span></span><code><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="s1">&#39;\u{D834}&#39;</span><span class="p">)</span> <span class="c1">// &quot;&quot;\\uD834&quot;&quot;</span>
<span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="s1">&#39;\uDF06\uD834&#39;</span><span class="p">)</span> <span class="c1">// &quot;&quot;\\udf06\\ud834&quot;&quot;</span>
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../03-%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 03-解构赋值" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              03-解构赋值
            </div>
          </div>
        </a>
      
      
        
        <a href="../05-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%96%B9%E6%B3%95/" class="md-footer__link md-footer__link--next" aria-label="Next: 05-字符串方法" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              05-字符串方法
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; Michael An
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.709b4209.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.febc23d1.min.js"></script>
      
        <script src="../../js/baidu-statistics.js"></script>
      
    
  </body>
</html>