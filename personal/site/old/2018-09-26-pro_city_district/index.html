
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <meta name="author" content="ZeFeng">
      
      
        <link rel="canonical" href="https://michael18811380328.github.io/old/2018-09-26-pro_city_district/">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.8">
    
    
      
        <title>省市区选择控件(wx) - Michale An Blog</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.cb6bc1d0.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.39b8e14a.min.css">
        
          
          
          <meta name="theme-color" content="#ffa724">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="orange" data-md-color-accent="">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://michael18811380328.github.io/" title="Michale An Blog" class="md-header-nav__button md-logo" aria-label="Michale An Blog">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            Michale An Blog
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              省市区选择控件(wx)
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/Michael18811380328/Michael18811380328.github.io/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Michael18811380328/Michael18811380328.github.io
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://michael18811380328.github.io/" title="Michale An Blog" class="md-nav__button md-logo" aria-label="Michale An Blog">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Michale An Blog
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/Michael18811380328/Michael18811380328.github.io/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Michael18811380328/Michael18811380328.github.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1" >
      
      <label class="md-nav__link" for="nav-1">
        About
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="About" data-md-level="1">
        <label class="md-nav__title" for="nav-1">
          <span class="md-nav__icon md-icon"></span>
          About
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        说明
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../log/" class="md-nav__link">
        学习日志
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
      
      <label class="md-nav__link" for="nav-2">
        其他日志存档
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="其他日志存档" data-md-level="1">
        <label class="md-nav__title" for="nav-2">
          <span class="md-nav__icon md-icon"></span>
          其他日志存档
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../2018-09-11-browser-sync/" class="md-nav__link">
        2018-09-11-browser-sync.markdown
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../2018-09-11-ice-instructions/" class="md-nav__link">
        2018-09-11-ice-instructions.markdown
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../2018-09-12-algorithm/" class="md-nav__link">
        2018-09-12-algorithm.markdown
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../2018-09-12-localstorage/" class="md-nav__link">
        2018-09-12-localstorage.markdown
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          2018-09-26-pro_city_district.markdown
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        2018-09-26-pro_city_district.markdown
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    前言
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    正文
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    分析
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    注意
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    后记
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../2018-10-11-typescript/" class="md-nav__link">
        2018-10-11-typescript.markdown
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../2018-10-14-vue_websocket/" class="md-nav__link">
        2018-10-14-vue_websocket.markdown
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../2018-10-16-showdoc_saying/" class="md-nav__link">
        2018-10-16-showdoc_saying.markdown
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../2018-10-18-personal_experience/" class="md-nav__link">
        2018-10-18-personal_experience.markdown
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../2018-10-18-vue_responsive_principle/" class="md-nav__link">
        2018-10-18-vue_responsive_principle.markdown
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../2018-11-18-mui-instructions/" class="md-nav__link">
        2018-11-18-mui-instructions.markdown
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../2018-11-20-tool-instructions/" class="md-nav__link">
        2018-11-20-tool-instructions.markdown
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../2018-11-29-uni-app-instructions/" class="md-nav__link">
        2018-11-29-uni-app-instructions.markdown
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../2018-12-01-git-introduce/" class="md-nav__link">
        2018-12-01-git-introduce.markdown
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../2018-12-02-my-profession-life/" class="md-nav__link">
        2018-12-02-my-profession-life.markdown
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../2018-12-14-alibaba-open-source-instructions/" class="md-nav__link">
        2018-12-14-alibaba-open-source-instructions.markdown
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../algorithm-sort/" class="md-nav__link">
        algorithm-sort.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../alibaba-open-source-instructions/" class="md-nav__link">
        alibaba-open-source-instructions.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../browser-sync/" class="md-nav__link">
        browser-sync.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../ice-instructions/" class="md-nav__link">
        ice-instructions.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../localstorage/" class="md-nav__link">
        localstorage.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../mui-instructions/" class="md-nav__link">
        mui-instructions.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../my-profession-life/" class="md-nav__link">
        my-profession-life.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../personal_experience/" class="md-nav__link">
        personal_experience.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../pro_city_district/" class="md-nav__link">
        pro_city_district.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../showdoc_saying/" class="md-nav__link">
        showdoc_saying.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tool-instructions/" class="md-nav__link">
        tool-instructions.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../typescript/" class="md-nav__link">
        typescript.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../vue_responsive_principle/" class="md-nav__link">
        vue_responsive_principle.md
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../vue_websocket/" class="md-nav__link">
        vue_websocket.md
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    前言
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    正文
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    分析
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    注意
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    后记
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/Michael18811380328/Michael18811380328.github.io/edit/master/docs/old/2018-09-26-pro_city_district.markdown" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  <h1>2018-09-26-pro_city_district.markdown</h1>
                
                <h2 id="_1">前言<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>现在省市区选择控件，我们可以搜索到就有很多参考了。我之所以写这篇主要是因为想要写一个更加灵活，体验更加好的。（特别是微信端的）<br />
先来看下我们这个控件展示效果<br />
<img src="https://00feng00.github.io/img/pro_city_dis.jpg">
<br />
下面开始讲我们这个控件里面的逻辑</p>
<h2 id="_2">正文<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>我们这个控件是使用VUE来开发的，代码主要包括html、css、js这三块。下面开始讲代码以及逻辑：<br />
html代码<br />
<div class="highlight"><pre><span></span><code>  &lt;section class=&quot;myAddress&quot;&gt;
    &lt;!-- 省市区三级联动选项 --&gt;
    &lt;section class=&quot;showChose&quot; v-show=&quot;showChose&quot;&gt;
      &lt;section class=&quot;address&quot;&gt;
        &lt;section class=&quot;topheader&quot; id=&quot;topheader&quot;&gt;
          &lt;span&gt;选择您所在的地区&lt;/span&gt;
          &lt;span @click=&quot;closeAdd()&quot; class=&quot;close&quot;&gt;×&lt;/span&gt;
        &lt;/section&gt;
        &lt;section class=&quot;title&quot; id=&quot;title&quot;&gt;
          &lt;div class=&quot;area&quot; @click=&quot;provinceSelected(0)&quot; :class=&quot;tabIndex===0?&#39;active&#39;:&#39;&#39;&quot;&gt;
            {{Province ? Province : &#39;请选择&#39;}}
          &lt;/div&gt;
          &lt;div class=&quot;area&quot; @click=&quot;citySelected(1)&quot; :class=&quot;tabIndex===1?&#39;active&#39;:&#39;&#39;&quot; v-show=&quot;Province&quot;&gt;
            {{City ? City : &#39;请选择&#39;}}
          &lt;/div&gt;
          &lt;div class=&quot;area&quot; @click=&quot;districtSelected(2)&quot; :class=&quot;tabIndex===2?&#39;active&#39;:&#39;&#39;&quot;
               v-show=&quot;City &amp;&amp; hasDistrict &amp;&amp; option===3&quot;&gt;
            {{District ? District : &#39;请选择&#39;}}
          &lt;/div&gt;
        &lt;/section&gt;
        &lt;ul id=&quot;searchBar&quot; @scroll=&quot;ProvinceScroll&quot;   v-show=&quot;showProvince&quot;&gt;
          &lt;!-- 常用城市 --&gt;
          &lt;div v-show=&quot;showProvince&quot; class=&quot;frequentCity&quot;&gt;
             &lt;p class=&quot;frequentCityTip&quot; v-show=&quot;showFrequentCity&quot;&gt;常用城市&lt;/p&gt;
              &lt;div class=&quot;frequentCityList&quot;&gt;
                &lt;span class=&quot;cityName&quot; v-for=&quot;(frequentCity, index) in frequentCitys&quot; :key=&quot;&#39;frequentCity&#39;+index&quot; @click=&quot;selectFrequentCity(frequentCity)&quot;&gt;{{RegExp(/市/).test(frequentCity.city) ? frequentCity.city.slice(0,frequentCity.city.length-1) : frequentCity.city}}&lt;/span&gt;
              &lt;/div&gt;
            &lt;div class=&quot;frequentCityTip&quot; v-show=&quot;showProvince&quot;&gt;选择省份&lt;/div&gt;
          &lt;/div&gt;
          &lt;!-- 省市区列表 --&gt;
          &lt;div style=&quot;height: 101%&quot;&gt;
          &lt;li class=&quot;addList van-hairline--bottom&quot; v-for=&quot;(v , k) in info&quot;
              @click=&quot;getProvinceId(v.RNUM, v.AREA_NAME, k, v.AREA_CODE)&quot; :class=&quot;v.selected ? &#39;active&#39; : &#39;&#39;&quot;&gt;
            {{v.AREA_NAME}}
          &lt;/li&gt;
          &lt;/div&gt;
        &lt;/ul&gt;
        &lt;ul id=&quot;cityChangeScroll&quot; @scroll=&quot;cityChangeScroll&quot;  v-show=&quot;showCity&quot;&gt;
          &lt;div style=&quot;height: 101%&quot;&gt;
          &lt;li class=&quot;addList van-hairline--bottom&quot; v-for=&quot;(v,k) in showCityList&quot;
              @click=&quot;getCityId(v.RNUM, v.AREA_NAME, k, v.AREA_CODE)&quot; :class=&quot;v.selected ? &#39;active&#39; : &#39;&#39;&quot;&gt;{{v.AREA_NAME}}
          &lt;/li&gt;
          &lt;/div&gt;
        &lt;/ul&gt;

        &lt;ul id=&quot;DistrictChangeScroll&quot;  @scroll=&quot;DistrictChangeScroll&quot;
            v-show=&quot;showDistrict &amp;&amp; option===3&quot;&gt;
          &lt;div style=&quot;height: 101%&quot;&gt;
          &lt;li class=&quot;addList van-hairline--bottom&quot; v-for=&quot;(v,k) in showDistrictList&quot;
              @click=&quot;getDistrictId(v.RNUM, v.AREA_NAME, k, v.AREA_CODE)&quot; :class=&quot;v.selected ? &#39;active&#39; : &#39;&#39;&quot;&gt;
            {{v.AREA_NAME}}
          &lt;/li&gt;
          &lt;/div&gt;
        &lt;/ul&gt;
      &lt;/section&gt;
    &lt;/section&gt;
  &lt;/section&gt;
</code></pre></div></p>
<p>css代码:<br /></p>
<div class="highlight"><pre><span></span><code> .myAddress {
   width: 100%;
   background-color: white;
   color: #333;
   height: 100%;
 }
.showChose {
    width: 100%;
    height: 100%;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 120;
    background: rgba(77, 82, 113, 0.8);
  }
  .address {
    position: absolute;
    bottom: 0;
    left: 0;
    z-index: 121;
    background: #fff;
    width: 100%;
    height: 100%;
  }
  .topTip{
    height: 0.88rem;
    font-size: .32rem;
    color: #000;
    line-height: 0.88rem;
    text-align: center;
  }
  .title{
    height: 0.88rem;
  }
  .unactTitle{
    background-color: #ffffff;
  }
  .actTitle{
    background-color: #f6f6f6;
  }
  .scrollDiv{
    height: 6.4rem;
    overflow-y: scroll;
  }
  .title h4 {
    display: inline-block;
    margin-left: 2rem;
    font-size: 0.32rem;
    line-height: 0.88rem;
    font-weight: normal;
    color: #999;
  }
  .title span {
    margin: 0.42rem 0 0 2.2rem;
    font-size: 0.45rem;
    line-height: 0.34rem;
    color: #D8D8D8;
  }
  .area {
    display: inline-block;
    font-size: 0.28rem;
    line-height: 0.64rem;
    height: 0.64rem;
    margin-left: 0.32rem;
    color: #333;
  }
  .addList {
    padding-left: 0.32rem;
    font-size: 0.28rem;
    height: 0.88rem;
    line-height: 0.88rem;
    color: #333;
  }
  /* 修改的格式 */
  .address ul {
    height: 86%;
    overflow-y: scroll;
    -webkit-overflow-scrolling : touch;
  }
  .address .title .active {
    color: #0071B8;
    border-bottom: 0.02rem solid #0071B8;
  }
  .address ul .active {
    color: #0071B8;
  }
  .provinceTip{
    background-color: #fafafa;
    font-size: .24rem;
    color: #262626;
    text-align: left;
    padding-left: .32rem;
    height: 0.64rem;
    line-height: 0.64rem;
  }
  .frequentCity{
    width: 7.5rem;
    height: 1.68rem;
    overflow: hidden;
  }
  .frequentCityTip{
    text-align: left;
    font-size: 0.24rem;
    padding-left: 0.32rem;
    background-color: #f6f6f6;
    height: 0.64rem;
    line-height: 0.64rem;
  }
  .frequentCityList{
    display: -webkit-box; /* Chrome 4+, Safari 3.1, iOS Safari 3.2+ */
    display: -moz-box; /* Firefox 17- */
    display: -webkit-flex; /* Chrome 21+, Safari 6.1+, iOS Safari 7+, Opera 15/16 */
    display: -moz-flex; /* Firefox 18+ */
    display: -ms-flexbox; /* IE 10 */
    display: flex; /* Chrome 29+, Firefox 22+, IE 11+, Opera 12.1/17/18, Android 4.4+ */
    flex-wrap: wrap;
    margin-right: .32rem;
    padding: 0 0.32rem;
  }
  .cityName{
    letter-spacing: .02rem;
    font-size: .28rem;
    border-radius: .4rem;
    height: 1.04rem;
    line-height: 1.04rem;
    margin-right: 0.24rem;
  }
</code></pre></div>
<p>js代码<br /></p>
<div class="highlight"><pre><span></span><code>/* 这块是data里面需要的数据参数 */
data () {
    return {
      showChose: false,             // 是否显示省市区弹框
      showProvince: true,           // 显示省份列表
      showCity: false,              // 显示城市列表
      showDistrict: false,          // 显示区列表
      showCityList: false,          // 城市数据列表
      showDistrictList: false,      // 区数据列表
      province: 5,                  // 当前选择的省份index
      city: 3,                      // 当前选择的城市index
      district: 57,                 // 当前选择的区index
      District: false,              // 区名字
      Province: false,              // 省名字
      City: false,                  // 城市名字
      areaProvince: &#39;&#39;,
      areaCity: &#39;&#39;,
      areaDistrict: &#39;&#39;,
      tabIndex: 0,                  // 当前选择的tab下标
      hasDistrict: true,            // 是否有区
      selected: false,              // 是否选中(active)
      info: [],                     // 后台交互的省市区接口数据（数据格式跟frequentCitys这个的数据格式是一样的。）
      frequentCitys: [
        {ProIndex: 19, city: &#39;广州市&#39;, cityCode: &#39;440100&#39;, cityIndex: 201, cityKey: 0, proKey: 18, province: &#39;广东省&#39;, provinceCode: &#39;440000&#39;},
        {ProIndex: 19, city: &#39;深圳市&#39;, cityCode: &#39;440300&#39;, cityIndex: 203, cityKey: 2, proKey: 18, province: &#39;广东省&#39;, provinceCode: &#39;440000&#39;},
        {ProIndex: 30, city: &#39;乌鲁木齐市&#39;, cityCode: &#39;650100&#39;, cityIndex: 347, cityKey: 0, proKey: 30, province: &#39;新疆维吾尔自治区&#39;, provinceCode: &#39;650000&#39;},
        {ProIndex: 12, city: &#39;合肥市&#39;, cityCode: &#39;340100&#39;, cityIndex: 99, cityKey: 0, proKey: 11, province: &#39;安徽省&#39;, provinceCode: &#39;340000&#39;}
      ],                            // 常用城市数据
      saveCityData: [],             // 存储选择的省市区的缓存数据
      showFrequentCity: true,       // 是否显示常用城市
      saveProAdcode: &#39;&#39;,            // 保存当前选择的省份的编码
      svaeProIndex: -1,             // 保存当前选择的省份的索引
      saveProKey: -1,               // 保存当前选择的省份的下标
      saveCityCode: &#39;&#39;,             // 保存当前选择的城市的编码
      svaeCityIndex: -1,            // 保存当前选择的城市的索引
      saveCityKey: -1,              // 保存当前选择的城市的下标
      stepProIndex: -1,             // 动态获取省份index
      stepProKey: -1,               // 动态获取城市index
      stepCityKey: -1,              // 动态获取城市key
      firstIsFinshed: false,          // first动态加载完成
      stepIsFinshed: false           // second动态加载完成
    }
  },
  /* 三个tab的点击的方法 */
    // 点击省份tab
     provinceSelected(index) {
       this.tabIndex = index
       // 选项页面的切换
       this.showProvince = true
       this.showCity = false
       this.showDistrict = false
       this.firstShow(1)
     },
    // 点击城市tab
    citySelected(index) {
      this.tabIndex = index
      this.showProvince = false
      this.showCity = true
      this.showDistrict = false
      this.firstShow(2)
     },
    // 点击区tab
    districtSelected(index) {
      this.tabIndex = index
      this.showProvince = false
      this.showCity = false 
      this.showDistrict = true
      this.firstShow(3)
    }
  /* 选择省市区的三个事件 */
    // 选择省份列表
      getProvinceId(code, input, index, adCode) {
        this.tabIndex = 1
        this.province = code
        this.Province = input
        this.showProvince = false
        this.showCity = true
        this.showDistrict = false
        this.saveProAdcode = adCode
        this.svaeProIndex = code
        this.saveProKey = index
        if (!this.City) {
        } else {
          this.City = &#39;请选择&#39;
        }
        if (!this.District) {
        } else {
          this.hasDistrict = false
          this.District = &#39;请选择&#39;
        }
        this.showCityList = this._filter(this.info, &#39;citys&#39;, this.province)
        // 点击选择当前
        /* eslint-disable */
        this.info.map(a =&gt; a.selected = false)
        /* eslint-enable */
        this.info[index].selected = true
        this.areaProvince = input
        this.firstShow(2)
      },
    // 选择城市列表
      getCityId(code, input, index, adCode) {
        this.tabIndex = 2
        this.city = code
        this.City = input
        this.showProvince = false
        this.showCity = false
        this.showDistrict = true
        this.District = &#39;请选择&#39;
        this.showDistrictList = this._filter(this.showCityList, &#39;district&#39;, this.city)
        // 选择当前添加active
        /* eslint-disable */
        this.showCityList.map(a =&gt; a.selected = false)
        /* eslint-enable */
        this.showCityList[index].selected = true
        this.areaCity = input
        // 判断当前选的城市是否有地区
        if (this.showDistrictList.length === 0) {
          this.hasDistrict = false
          this.showDistrict = false
          this.District = false
          this.showChose = false
          // 把选择的省市放入缓存中
          let selectCity = {}
          selectCity.province = this.Province
          selectCity.provinceCode = this.saveProAdcode
          selectCity.proKey = this.saveProKey
          selectCity.cityCode = adCode
          selectCity.cityKey = index
          selectCity.city = this.City
          selectCity.district = &#39;&#39;
          selectCity.districtCode = &#39;&#39;
          selectCity.ProIndex = this.svaeProIndex
          selectCity.cityIndex = adCode
          this.saveCityData = [];
          this.saveCityData.push(selectCity)
        } else {
          this.saveCityCode = adCode
          this.svaeCityIndex = code
          this.saveCityKey = index
          this.hasDistrict = true
          this.showDistrict = true
        }
        this.firstShow(3)
      },
      // 选择区列表
      getDistrictId(code, input, index, adCode) {
        this.district = code
        this.District = input
        // 选择当前添加active
        /* eslint-disable */
        this.showDistrictList.map(a =&gt; a.selected = false)
        /* eslint-enable */
        this.showDistrictList[index].selected = true
        // 选取市区选项之后关闭弹层
        this.showChose = false
        this.areaDistrict = input
        // 把选择的数据放入缓存中
        let selectCity = {}
        selectCity.province = this.Province
        selectCity.provinceCode = this.saveProAdcode
        selectCity.proKey = this.saveProKey
        selectCity.cityKey = this.saveCityKey
        selectCity.city = this.City
        selectCity.cityCode = this.saveCityCode
        selectCity.district = this.District
        selectCity.districtCode = adCode
        selectCity.ProIndex = this.svaeProIndex
        selectCity.cityIndex = this.svaeCityIndex
        console.log(&#39;this.District&#39;, this.District)
        this.saveCityData = [];
        this.saveCityData.push(selectCity)
        this.$emit(&#39;test&#39;, this.saveCityData)
        this.showChose = false
      },
      /* 省市区分别对应的三个滚动事件 */
      ProvinceScroll() {
        let scrollTop = document.getElementById(&#39;searchBar&#39;).scrollTop
        let scrollHeight = document.getElementById(&#39;searchBar&#39;).scrollHeight;
        let offsetHeight = document.getElementById(&#39;searchBar&#39;).offsetHeight + scrollTop;
        if (scrollTop === 0) {
          document.getElementById(&#39;searchBar&#39;).scrollTop = 1;
          document.body.addEventListener(&#39;touchmove&#39;, function (evt) {
            evt.stopPropagation()
          })
        }
        if (offsetHeight === scrollHeight) {
          document.body.addEventListener(&#39;touchmove&#39;, function (evt) {
            evt.stopPropagation()
          })
        }
        if (offsetHeight &lt;= scrollHeight) {
        }
      },

      cityChangeScroll() {
        let scrollTop = document.getElementById(&#39;cityChangeScroll&#39;).scrollTop
        let scrollHeight = document.getElementById(&#39;cityChangeScroll&#39;).scrollHeight;
        let offsetHeight = document.getElementById(&#39;cityChangeScroll&#39;).offsetHeight + scrollTop;
        if (scrollTop == 0) {
          document.body.addEventListener(&#39;touchmove&#39;, function (evt) {
            evt.stopPropagation()
          })
        }
        if (offsetHeight == scrollHeight) {
          document.body.addEventListener(&#39;touchmove&#39;, function (evt) {
            evt.stopPropagation()
          })
        }
        if (scrollHeight &lt;= offsetHeight) {
        }
      },
      DistrictChangeScroll() {
        let scrollTop = document.getElementById(&#39;DistrictChangeScroll&#39;).scrollTop
        let scrollHeight = document.getElementById(&#39;DistrictChangeScroll&#39;).scrollHeight;
        let offsetHeight = document.getElementById(&#39;DistrictChangeScroll&#39;).offsetHeight + scrollTop;
        if (scrollTop == 0) {
          document.body.addEventListener(&#39;touchmove&#39;, function (evt) {
            evt.stopPropagation()
          })
        }
        if (offsetHeight == scrollHeight) {
          document.body.addEventListener(&#39;touchmove&#39;, function (evt) {
            evt.stopPropagation()
          })
        }
        if (scrollHeight &lt;= offsetHeight) {
        }
      },
      /* 数据刷选函数 */
     // 对选择当前的数据,进行下一级的数据的筛选
      _filter(add, name, code) {
        let result = []
        for (let i = 0; i &lt; add.length; i++) {
          if (code == add[i].RNUM) {
            result = add[i][name]
          }
        }
        return result
      },
      /* 初始化的时候，防止拖动body滚动条函数 */
      firstShow (index) {
        this.$nextTick(function () {
          if (this.showChose === true) {
            if(index === 1){
              if (document.getElementById(&#39;searchBar&#39;).scrollTop === 0){
                document.getElementById(&#39;searchBar&#39;).scrollTop = 1;
              }
            } else if (index === 2) {
              if (document.getElementById(&#39;cityChangeScroll&#39;).scrollTop === 0){
                document.getElementById(&#39;cityChangeScroll&#39;).scrollTop = 1;
              }
            } else if (index === 3) {
              if (document.getElementById(&#39;DistrictChangeScroll&#39;).scrollTop === 0){
                document.getElementById(&#39;DistrictChangeScroll&#39;).scrollTop = 1;
              }
            }
          }
        })
      },
      /* 关闭弹框函数 */
      // 关闭弹框
      closeAdd() {
        this.District = false
        this.Province = false
        this.City = false
        this.showProvince = true
        this.showCity = false
        this.showDistrict = false
        this.tabIndex = 0
        this.showChose = false
        document.getElementById(&#39;se&#39;).style.display=&#39;block&#39;
      },
      /* 显示弹框函数 */
      choseAdd() {
        this.showChose = true
        this.firstShow(1)
      },
</code></pre></div>
<h2 id="_3">分析<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<p>上面的代码拿到手就可以直接复制黏贴，然后就可以运行了。
这里讲下其中有几个需要注意的点：<br />
1、正常我们使用省市区控件默认都是隐藏的，只有当我们触发后才会显示我们的弹框，choseAdd()这个方法就是显示弹框的方法。<br />
2、当我们选择省市区完后，我们需要关闭弹框，closeAdd()这个方法就是关闭弹框的，需要注意，当我们再次点开的时候，应该显示区。<br />
3、我们拿到数据后，注意是用_filter()这个方法对数据进行过滤。<br />
4、当我们第一次加载这个控件后，为了防止用户下拉，拖动到body滚动条，我们需要用firstShow()这个方法来处理，体验更好。<br />
5、为了让体验更好，我们需要对省市区对应的滚动的事件进行处理。ProvinceScroll()、cityChangeScroll()、DistrictChangeScroll()<br />
6、info这个数据源的格式:<br />
<div class="highlight"><pre><span></span><code>[
  {
    AREA_CODE:&quot;110000&quot;,
    AREA_NAME:&quot;北京市&quot;,
    LV:2,
    P_AREA_CODE:&quot;100000&quot;,
    RNUM:1,
    hasNodes:1,
    id:&quot;110100&quot;,
    index:0,
    text:&quot;北京市&quot;,
    citys:[
      {
        AREA_CODE: &quot;110100&quot;, 
        AREA_NAME: &quot;北京市&quot;, 
        LV: 3, 
        P_AREA_CODE: &quot;110000&quot;, 
        RNUM: 1, 
        hasNodes:1,
        id: &quot;110100&quot;,
        index: 0, 
        text: &quot;北京市&quot;,
        district:[
          {
            AREA_CODE:&quot;110101&quot;,
            AREA_NAME:&quot;东城区&quot;,
            LV:4,
            P_AREA_CODE:&quot;110100&quot;,
            RNUM:1,
            hasNodes:0,
            id:&quot;110101&quot;,
            index:0,
            text:&quot;东城区&quot;
          }
        ],
      }
    ],
  }
]
</code></pre></div>
info是一个数组，每个对象里面包含city这个数组，city每个对象里面又包含district这个数组。<br />
说明一下个别属性的含义：<br />
1、hasNodes是否有下一级（对象里面是否有数组）<br />
2、RNUM是当前是第几个（从1开始，省、市、区是分开算的，比如省是从1开始算，市是从1开始，区是从1开始算的。三者是分开的）<br />
3、index是当前下标是第几个(从0开始，当前数据对象所处的数组的第几个)<br />
4、LV可用可不用（可以自己根据需求来考虑）<br /></p>
<h2 id="_4">注意<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<p>看完上面的分析，应该对整个控件有了一定的理解了。最后需要注意的两点：<br />
1、info这个数据，是用来接收后端返回来的数据的。我们需要自己写一个方法来接收后端返回来的数据的。<br />
2、三个滚动事件主要处理的了滚动的边界，然后停止事件的传播。主要用到event.stoppropagation()<br /></p>
<h2 id="_5">后记<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<p>最后说下完成这个控件，个人的一点感受。一般自己写钩子，可以提升自己对数据的处理能力，然后需要考虑到兼容性问题。最后需要对这个钩子进行不断的测试优化，最后上线。</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../2018-09-12-localstorage/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                2018-09-12-localstorage.markdown
              </div>
            </div>
          </a>
        
        
          <a href="../2018-10-11-typescript/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                2018-10-11-typescript.markdown
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; Michael An
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.18f0862e.min.js"></script>
      <script src="../../assets/javascripts/bundle.994580cf.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.9c0e82ba.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="../../js/baidu-statistics.js"></script>
      
    
  </body>
</html>